import{r as m,fI as R,bF as M,ay as P,cX as H,j as f,fJ as E,fK as K,fL as W,fM as U,aO as X,fN as N,ba as $,fO as V}from"./csnclwvitc93pb4o.js";import{bV as G,bW as z}from"./iqrmcf3yr8rsq080.js";import{hn as Q,c0 as Z}from"./h60ucn2y7ct2d4ke.js";import{b as J}from"./n74ya7jjfzak7j6d.js";import{u as Y}from"./dnip6xpd9prkhs9b.js";import{j as I,l as ee,f as te}from"./n4qj6ulh3s8xnvd9.js";import"./bttpfgsfg4ef0gbl.js";import"./jp1jwdv7k1751yfk.js";import"./lvsvs844qrjuc6nk.js";import"./2gjidviy9hrl6wog.js";import"./e2ateo6egwv02wdi.js";import"./rda984i6rgyzirgj.js";import"./lqm0oiwpw48k2r2t.js";import"./n3zdlbuc71osh7uw.js";import"./mjjh29q34xq0a2oo.js";import"./vvn0bm7an5iwjzxy.js";import"./eet9eab627thrt07.js";import"./lgr0r7bzqvy8fmdk.js";import"./km9s5iryouklsfgz.js";import"./e58nm5wssonic2eo.js";import"./fqo53v4s3w183q3i.js";import"./kwb3s2s0rag2z6ws.js";import"./44f414w5x9yrfmkh.js";import"./k2zfqi9lthrrva0q.js";import"./n9fk8g9m05rokwec.js";import"./boryqaoqfhtqy1q6.js";import"./csnq7rz0042rw9gr.js";import"./p43u8b58bbt12lig.js";import"./nap4cbz6pie35nb2.js";import"./ft4fw7ri1hjvqtvf.js";import"./h3xn0g2j4pgttkzn.js";import"./337ykqt2vz24y21l.js";import"./cliukozz5l6964oo.js";import"./c3fqzaoazo489nch.js";const x=m.createContext(void 0),ne={};x.Provider;const se=()=>m.useContext(x)?m.useContext(x):ne,C=typeof window>"u"?global:window,v="@griffel/";function re(e,t){return C[Symbol.for(v+e)]||(C[Symbol.for(v+e)]=t),C[Symbol.for(v+e)]}const b=re("DEFINITION_LOOKUP_TABLE",{}),S="data-make-styles-bucket",ie="data-priority",w=7,_="___",oe=_.length+w,ce=0,le=1;function ae(e){const t=e.length;if(t===w)return e;for(let s=t;s<w;s++)e+="0";return e}function q(e,t,s=[]){return _+ae(Q(e+t))}function k(e,t){let s="",n="";for(const i in e){const r=e[i];if(r===0){n+=i+" ";continue}const o=Array.isArray(r),c=t==="rtl"?(o?r[1]:r)+" ":(o?r[0]:r)+" ";s+=c,n+=c}return[s.slice(0,-1),n.slice(0,-1)]}function T(e,t){const s={};for(const n in e){const[i,r]=k(e[n],t);if(r===""){s[n]="";continue}const o=q(r,t),c=o+(i===""?"":" "+i);b[o]=[e[n],t],s[n]=c}return s}const O={};function ue(){let e=null,t="",s="";const n=new Array(arguments.length);for(let l=0;l<arguments.length;l++){const p=arguments[l];if(typeof p=="string"&&p!==""){const d=p.indexOf(_);if(d===-1)t+=p+" ";else{const y=p.substr(d,oe);d>0&&(t+=p.slice(0,d)),s+=y,n[l]=y}}}if(s==="")return t.slice(0,-1);const i=O[s];if(i!==void 0)return t+i;const r=[];for(let l=0;l<arguments.length;l++){const p=n[l];if(p){const d=b[p];d&&(r.push(d[ce]),e=d[le])}}const o=Object.assign.apply(Object,[{}].concat(r)),[c,a]=k(o,e),u=q(a,e,n),h=u+" "+c;return O[s]=h,b[u]=[o,e],t+h}function de(e){return Array.isArray(e)?e:[e]}function fe(e,t,s,n){const i=[];if(n[S]=t,n[ie]=String(s),e)for(const o in n)e.setAttribute(o,n[o]);function r(o){return e!=null&&e.sheet?e.sheet.insertRule(o,e.sheet.cssRules.length):i.push(o)}return{elementAttributes:n,insertRule:r,element:e,bucketName:t,cssRules(){return e!=null&&e.sheet?Array.from(e.sheet.cssRules).map(o=>o.cssText):i}}}const me=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],A=me.reduce((e,t,s)=>(e[t]=s,e),{});function he(e,t,s){return(e==="m"?e+t:e)+s}function pe(e,t,s,n,i={}){var r,o;const c=e==="m",a=(r=i.m)!==null&&r!==void 0?r:"0",u=(o=i.p)!==null&&o!==void 0?o:0,h=he(e,a,u);if(!n.stylesheets[h]){const l=t&&t.createElement("style"),p=fe(l,e,u,Object.assign({},n.styleElementAttributes,c&&{media:a}));n.stylesheets[h]=p,t&&l&&t.head.insertBefore(l,ye(t,s,e,n,i))}return n.stylesheets[h]}function ge(e,t,s){var n,i;const r=t+((n=s.m)!==null&&n!==void 0?n:""),o=e.getAttribute(S)+((i=e.media)!==null&&i!==void 0?i:"");return r===o}function ye(e,t,s,n,i={}){var r,o;const c=A[s],a=(r=i.m)!==null&&r!==void 0?r:"",u=(o=i.p)!==null&&o!==void 0?o:0;let h=g=>c-A[g.getAttribute(S)],l=e.head.querySelectorAll(`[${S}]`);if(s==="m"){const g=e.head.querySelectorAll(`[${S}="${s}"]`);g.length&&(l=g,h=B=>n.compareMediaQueries(a,B.media))}const p=g=>ge(g,s,i)?u-Number(g.getAttribute("data-priority")):h(g),d=l.length;let y=d-1;for(;y>=0;){const g=l.item(y);if(p(g)>0)return g.nextSibling;y--}return d>0?l.item(0):t?t.nextSibling:null}function D(e,t){try{e.insertRule(t)}catch{}}let Se=0;const Ce=(e,t)=>e<t?-1:e>t?1:0;function ve(e=typeof document>"u"?void 0:document,t={}){const{classNameHashSalt:s,unstable_filterCSSRule:n,insertionPoint:i,styleElementAttributes:r,compareMediaQueries:o=Ce}=t,c={classNameHashSalt:s,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(r),compareMediaQueries:o,id:`d${Se++}`,insertCSSRules(a){for(const u in a){const h=a[u];for(let l=0,p=h.length;l<p;l++){const[d,y]=de(h[l]),g=pe(u,e,i||null,c,y);c.insertionCache[d]||(c.insertionCache[d]=u,n?n(d)&&D(g,d):D(g,d))}}}};return c}const xe=()=>{const e={};return function(s,n){e[s.id]===void 0&&(s.insertCSSRules(n),e[s.id]=!0)}};function be(e,t,s=xe){const n=s();let i=null,r=null;function o(c){const{dir:a,renderer:u}=c,h=a==="ltr";return h?i===null&&(i=T(e,a)):r===null&&(r=T(e,a)),n(u,t),h?i:r}return o}function we(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const j=R.useInsertionEffect?R.useInsertionEffect:void 0,Ee=()=>{const e={};return function(s,n){if(j&&we()){j(()=>{s.insertCSSRules(n)},[s,n]);return}e[s.id]===void 0&&(s.insertCSSRules(n),e[s.id]=!0)}},_e=m.createContext(ve());function Re(){return m.useContext(_e)}const Ne=m.createContext("ltr");function Ie(){return m.useContext(Ne)}function Te(e,t){const s=be(e,t,Ee);return function(){const i=Ie(),r=Re();return s({dir:i,renderer:r})}}const Oe=Te({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),Ae=(e,t)=>{const{title:s,primaryFill:n="currentColor",...i}=e,r={...i,title:void 0,fill:n},o=Oe(),c=se();return r.className=ue(o.root,(t==null?void 0:t.flipInRtl)&&(c==null?void 0:c.textDirection)==="rtl"&&o.rtl,r.className),s&&(r["aria-label"]=s),!r["aria-label"]&&!r["aria-labelledby"]?r["aria-hidden"]=!0:r.role="img",r},De=(e,t,s,n)=>{const i=t==="1em"?"20":t,r=m.forwardRef((o,c)=>{const a={...Ae(o,{flipInRtl:void 0}),ref:c,width:t,height:t,viewBox:`0 0 ${i} ${i}`,xmlns:"http://www.w3.org/2000/svg"};return m.createElement("svg",a,...s.map(u=>m.createElement("path",{d:u,fill:a.fill})))});return r.displayName=e,r},je=De("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function Le({onNewThread:e,onOpenInMainWindow:t}){return f.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex h-8 w-full items-center justify-between px-2",children:[f.jsxs("div",{children:[f.jsx("button",{onClick:e,className:"text-token-text-tertiary hover:text-token-text-primary",children:f.jsx(G,{})}),t&&f.jsx("button",{onClick:t,className:"pl-2 text-token-text-tertiary hover:text-token-text-primary",children:f.jsx(z,{})})]}),f.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-primary",onClick:()=>{E(!1)},children:f.jsx(je,{className:"text-token-text-tertiary hover:text-token-text-primary"})})]})}function Fe({onNewThread:e,onOpenInMainWindow:t,children:s}){const n=m.useRef(null);return m.useEffect(()=>{if(n.current){const i=n.current.ownerDocument,r=o=>{o.key==="Escape"&&!o.shiftKey&&!o.ctrlKey&&!o.metaKey&&E(!1)};return i.addEventListener("keydown",r),()=>{i.removeEventListener("keydown",r)}}},[]),f.jsxs("div",{className:"flex h-full w-full flex-col pt-8",ref:n,children:[f.jsx(Le,{onNewThread:e,onOpenInMainWindow:t}),s]})}function qe(){const[e,t]=m.useState(()=>I());Y(e,{kind:M.PrimaryAssistant});const s=P(),n=ee(r=>te.resolveThreadId(e,r)),i=H();return m.useEffect(()=>{const r=()=>{var o;(o=i.document.getElementById("prompt-textarea"))==null||o.focus()};return i.addEventListener("focus",r),()=>{i.removeEventListener("focus",r)}},[i]),f.jsx(Fe,{onNewThread:()=>{t(I())},onOpenInMainWindow:n!==e?()=>{s(`/c/${e}`),E(!1,{focusMainWindow:!0})}:void 0,children:f.jsx(Z,{children:f.jsx(K,{children:f.jsx(J,{clientThreadId:e,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},e)})})})}let L=!1;function Ct(){var e;(e=W)==null||e.registerObserver(U)}function F(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function ke(e,t){e.head.querySelectorAll("link, style").forEach(n=>{F(n)&&t.head.appendChild(n.cloneNode(!0))});const s=new MutationObserver(n=>{n.forEach(i=>{i.type==="childList"&&i.addedNodes.forEach(r=>{if(F(r)){const o=t.head.appendChild(r.cloneNode(!0));if(r instanceof HTMLStyleElement&&r.dataset.emotion){const{sheet:c}=r,{sheet:a}=o;if(c&&a)for(const u of c.cssRules)a.insertRule(u.cssText)}}})})});return s.observe(e.head,{childList:!0}),()=>{s.disconnect()}}function Be(e,t){for(const n of e.attributes)t.setAttribute(n.name,n.value);const s=new MutationObserver(n=>{n.forEach(i=>{if(i.type==="attributes"&&i.attributeName!=null){const r=e.getAttribute(i.attributeName);r==null?t.removeAttribute(i.attributeName):t.setAttribute(i.attributeName,r)}})});return s.observe(e,{attributes:!0}),()=>{s.disconnect()}}function vt(){const[e,t]=m.useState(null),{value:s}=X("3653083604");return m.useEffect(()=>{if(!s||L||typeof window>"u")return;const n=window.open("about:blank",N);if(!n)throw new Error("ChatBar: window.open() did not create a window");L=!0,ke(document,n.document),Be(document.documentElement,n.document.documentElement),t(n.document.body.appendChild(n.document.createElement("div"))),n.addEventListener("unload",i=>{n.close()})},[s]),e&&$.createPortal(f.jsx(V,{window:e.ownerDocument.defaultView,children:f.jsx(qe,{})}),e,N)}export{vt as DesktopChatBar,Ct as initDesktop};
//# sourceMappingURL=i8jm4gc03qtcmq29.js.map
