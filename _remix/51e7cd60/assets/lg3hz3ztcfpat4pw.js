const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gf6rw7o9sk4zjgdd.js","assets/kqru8lsn8we722yx.js","assets/jtfo8pfmx9vwsskh.js","assets/root-n17uqvbd.css","assets/nms257ef1lzn00g8.js","assets/conversation-small-lkohtmkm.css","assets/cw950lm20f6iv7ia.js","assets/u2crgvhnyoq8kmk8.js","assets/ewos3yaiq011b9ly.js","assets/dij5mxku3l4y38ds.js","assets/hb07gfw17yjl0yld.js","assets/kbdi5ue5cyi9t75w.js","assets/och5g129vhumwhcy.js","assets/h48npevb6efzx1g2.js","assets/lrz10urcfgtjpg47.js","assets/glw5ca81jajbw24p.js","assets/jgkg1qoh2jbnrh7o.js","assets/fzrn137102spawew.js","assets/eey9g2dzidtwdbbk.js","assets/egsprt2l7oenz6yb.js","assets/j1u34bbllqszg71b.js","assets/contt731gp4x2rip.js","assets/ckz3mwj3da8hcobg.js","assets/nhxrpic6hfe84hjg.js","assets/nl5adhp2em6oxf04.js","assets/kqwdyvkaaavvn8k3.js","assets/kg62k151q1uem9f4.js","assets/fjnt892o4fut212s.js","assets/h25kr1pina7qavx4.js","assets/g4hs1c0lczhxzjeg.js","assets/d8xiw3cb99cycsyu.js","assets/lwt6g4izs8lu1n2g.js","assets/hpsjx73jjqsse5ei.js","assets/c4bxzbp1808foto4.js","assets/ibqtg3zrhxkl2bbj.js","assets/g002fzhg8w2j4zb1.js","assets/i9pyo5h1vu7ygzjk.js","assets/l2fzmhn511k4uv9b.js","assets/gqybtvzdlsvkl1u2.js","assets/msoqf1xutx22uw1m.js","assets/bfujlk3qvckcihxj.js","assets/oiu851pf99o91m46.js","assets/r61cv0t37q4ex83p.js","assets/tol70hr68or7ilro.js","assets/bxltgiunjgrtk3lx.js","assets/g5nhm8l4ymafc10p.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{r as d,m as e,ae as te,B as re,V as oe,ex as ie,b8 as x,b9 as f,aC as ne,dY as j,bG as de,bt as N,dW as L,e5 as R,gY as P,aJ as ce,gR as C,N as le,aB as ue,ad as T,af as he,de as A,z as F,bh as me,D as xe,ct as fe,cu as ge,cv as be,dE as pe,g1 as je,A as ve,a0 as Se}from"./kqru8lsn8we722yx.js";import{hg as Ce,hh as H,A as z,hi as we,hj as Ee,cE as B,bk as ye,cF as _e,cU as U,T as G,hk as W,hl as Ne,hm as Pe,fQ as K,hn as Q,ho as Y,hp as q,hq as Te,bl as X,hr as k,hs as S,fM as Ae,bB as w,bC as V,z as Fe,ht as ke,u as Ve,eW as Oe,et as Ie,eV as Me,hu as De,hv as Le,hw as Re,bY as He,hx as ze,hy as Be,hz as Ue,hA as O,hB as Ge,az as We,hC as Ke,hD as Qe,bi as Ye,cC as qe,cD as Xe,hE as $e,hF as Je,hG as Ze,cG as es,hH as ss,bZ as as,eq as ts}from"./nms257ef1lzn00g8.js";import{m as p}from"./ewos3yaiq011b9ly.js";import{S as I,b as rs,c as os}from"./ibqtg3zrhxkl2bbj.js";import{S as is,C as ns}from"./i9pyo5h1vu7ygzjk.js";import{T as $,C as J}from"./l2fzmhn511k4uv9b.js";import{N as ds}from"./g002fzhg8w2j4zb1.js";import{C as cs}from"./r61cv0t37q4ex83p.js";function ls({clientThreadId:s}){const a=Ce(r=>r.notifications);return d.useEffect(()=>{a.filter(t=>t.clientThreadId===s).map(t=>t.id).filter(t=>t!==void 0).forEach(t=>H(t))},[s,a]),a.length===0?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(z,{children:a.map(r=>e.jsx(us,{...r},r.id))})})}function us({...s}){const a=te(),r=re(),t=oe(),i=ie(s.clientThreadId),n=()=>{i&&Ee(a,r,i),s.id&&H(s.id)};return e.jsxs(p.div,{onClick:n,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(we,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:s.title??t.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:s.subtitle??t.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const hs=x(()=>f(()=>import("./gf6rw7o9sk4zjgdd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(s=>s.CanvasFocusedViewManager)),ms=x(()=>f(()=>import("./ckz3mwj3da8hcobg.js"),__vite__mapDeps([22,1,2,3,23,4,5,24,25,26,27,8])).then(s=>s.SearchResultsModal));function xs({clientThreadId:s,setClientThreadId:a,urlThreadId:r,prefetchSearch:t,threadContent:i}){const n=ne();B({clientThreadId:s});const{createNewThread:u,onThreadCreated:o,resetThread:c}=ye({clientThreadId:s,setClientThreadId:a});_e({resetThreadAction:c,clientThreadId:s});const h=j("searchSources"),g=j("summarizer"),b=U();return e.jsxs(G,{enableSandbox:!1,clientThreadId:s,children:[e.jsx(W,{clientThreadId:s,urlThreadId:r}),e.jsxs(I,{hideNavigation:n,mobileHeaderContent:e.jsx(Ne,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Pe,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(rs,{onNewChatButtonClick:c}),mobileHeaderRightContent:e.jsx(os,{onNewChatButtonClick:c}),sidebar:e.jsx(ds,{navHeader:s?e.jsx(is,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:u}):null,children:e.jsx(ns,{clientThreadId:s,onNewThread:u})}),threadFlyout:e.jsxs(e.Fragment,{children:[h&&e.jsx(K,{clientThreadId:s}),b&&g&&e.jsx(Q,{clientThreadId:s})]}),children:[e.jsx(Y,{}),i??e.jsx($,{clientThreadId:s,onCreate:o,prefetchSearch:t},s),e.jsxs(I.Sidebars,{children:[e.jsx(hs,{clientThreadId:s}),e.jsx(q,{clientThreadId:s})]})]}),e.jsx(fs,{clientThreadId:s})]})}function fs({clientThreadId:s}){const a=de(),r=a?.includes(N.SearchTool)&&!a?.includes(N.SearchToolHoldout),t=Te();return L()&&(!t||!r)&&e.jsx(ms,{clientThreadId:s})}const M=450;function gs({children:s,clientThreadId:a,isOpen:r,onClose:t}){const i=R();return e.jsxs(z,{children:[r&&i&&e.jsx(X,{clientThreadId:a,children:e.jsx(P,{children:e.jsx(k.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(p.div,{className:"h-full w-full bg-token-main-surface-secondary",...S}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(p.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:M},...S,children:e.jsx(J,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:s})]})]})})})}),r&&!i&&e.jsx(P,{children:e.jsx(k.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(p.div,{className:"h-full w-full bg-token-main-surface-secondary",...S}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(p.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:M},...S,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx($,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})]})}const bs=x(()=>f(()=>import("./h25kr1pina7qavx4.js"),__vite__mapDeps([28,1,2,3,4,5]))),ps=x(()=>f(()=>import("./g4hs1c0lczhxzjeg.js"),__vite__mapDeps([29,1,2,3,4,5,30,31,32,33,8,34,35,19,36,37,9,15,38,39,40,41,42])).then(s=>s.ImageEditor));function js({clientThreadId:s}){const a=Ae();d.useEffect(()=>{w.close()},[s]);let r;return a?.type===V.ADAVisualization?r=e.jsx(bs,{clientThreadId:s,visualization:a.visualization}):a?.type===V.Image&&(r=e.jsx(ps,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(gs,{clientThreadId:s,isOpen:a!=null,onClose:w.close,children:r})}const vs=x(()=>f(()=>import("./gf6rw7o9sk4zjgdd.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(s=>s.CanvasFocusedViewManager)),D=64;function Ss(){const{focusedObject:s,clientThreadId:a}=Fe();j(void 0);const r=d.useRef(null),[t,i]=d.useState({bottom:null,height:null});ke(r,i);const n=Ve(),u=j("searchSources"),o=j("summarizer"),c=L(),[h,g]=d.useState(!1),b=!n&&!!s;let l=0;h&&t.height==null?l=D:h&&t.height!=null?l=D+t.height:!h&&t.height!=null&&(l=t.height);const v=U();return e.jsx(Oe,{className:ce(C.application,{[C.withCanvasFocusedView]:!!n,[C.withEmbeddedFocusedView]:b}),banner:e.jsx(le,{children:e.jsx(Ie,{setIsMobileAppUpsellBannerVisible:g})}),sidebar:e.jsx(cs,{}),thread:e.jsx(J,{ref:r},a),details:e.jsx(vs,{clientThreadId:a}),threadExtendedInfo:c&&e.jsxs(e.Fragment,{children:[!1,u&&e.jsx(K,{clientThreadId:a}),v&&o&&e.jsx(Q,{clientThreadId:a})]}),debugger:e.jsx(q,{clientThreadId:a}),name:"application-root",style:{"--screen-keyboard-bottom":t.bottom?`${t.bottom}px`:"","--screen-height-offset":l>0?`${l}px`:""}})}function Cs({clientThreadId:s,urlThreadId:a}){return B({clientThreadId:s}),e.jsxs(Me,{children:[e.jsx(De,{}),e.jsx(Le,{}),e.jsxs(G,{enableSandbox:!1,clientThreadId:s,children:[e.jsx(W,{clientThreadId:s,urlThreadId:a}),e.jsx(Y,{}),e.jsx(Ss,{})]})]})}var ws={};const Es=x(()=>f(()=>import("./tol70hr68or7ilro.js"),__vite__mapDeps([43,1,2,3,4,5,44]))),ys=x(()=>f(()=>import("./g5nhm8l4ymafc10p.js"),__vite__mapDeps([45,1,2,3,4,5,37,9,8,15,38,19,39,40,41,46])));function Ms(s){const{urlThreadId:a,clientThreadId:r,prefetchSearch:t}=s;Ns();const i=ue(),n=T(),[u]=he(),[o,c]=d.useState(()=>a!==void 0?a:r!==void 0?r:A());a!==void 0&&o!==a&&F.getServerThreadId(o)!==a&&c(a);const h=Re(T());d.useEffect(()=>{a===void 0&&F.getServerThreadId(o)!==void 0&&c(A())},[a,o,h]);const g=He(as.workspaceId),b=R(),{eligible:l,isLoading:v,markAsViewed:E}=ze(),y=Be(),Z=me("3435450078");d.useEffect(()=>{(n.pathname==="/"||n.pathname.startsWith("/c/"))&&Ue({namespace:O.ChatPageLoad})==null&&(Ge({namespace:O.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),xe.addTiming("chatgpt.web.chatPage.mounted"))},[]);const _=We();d.useEffect(()=>{fe(!0).then(m=>{m.force_login&&_({authType:"login"}),ge.initializeAndGatherData(m),Ke.initializeAndGatherData(m),be.initializeAndGatherData(m)})},[_]),d.useEffect(()=>{const m=u.get(Qe)==="true";i!==m&&pe.setIsTemporaryChatEnabled(m)},[i,u]),d.useEffect(()=>{n.state?.focusObject&&w.setFocusedObject(n.state.focusObject)},[n.state?.focusObject]),d.useEffect(()=>{!v&&l&&(E(),y())},[l,v,E,y]);const{isOpen:ee,isLoading:se}=Ye(),ae=b?Cs:xs;return e.jsx(je.Provider,{value:null,children:e.jsx(qe,{children:e.jsxs(Xe,{clientThreadId:o,children:[e.jsx($e,{clientThreadId:o},g),!se&&ee&&e.jsx(ys,{clientThreadId:o,setClientThreadId:c}),e.jsx(Je,{}),e.jsx(Ze,{}),e.jsx(X,{clientThreadId:o,setClientThreadId:c,prefetchSearch:t,children:e.jsx(ae,{urlThreadId:a,clientThreadId:o,setClientThreadId:c,prefetchSearch:t})}),e.jsx(js,{clientThreadId:o}),e.jsx(es,{clientThreadId:o}),e.jsx(_s,{}),e.jsx(ss,{}),Z?e.jsx(ls,{clientThreadId:o}):!1]})})})}function _s(){const s=ts(a=>a.sharingModalThreadId);return s?e.jsx(Es,{serverThreadId:s}):null}function Ns(){ve({queryKey:["pingEdge"],queryFn:()=>Se.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=ws.GOKU_SERVICE);export{Ms as C,M as F};
//# sourceMappingURL=lg3hz3ztcfpat4pw.js.map
