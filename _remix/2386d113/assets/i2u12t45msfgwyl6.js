import{r as u,t as e,av as C,K as R,a0 as i,W as G,bq as Se,br as Pe,j as W,a5 as Q,fi as j,dh as M,a as B,am as ve,aq as Z,bh as Ce,dl as Ne,cl as Ge,a8 as te,ab as Ae,bA as _e,h as ae,eJ as Re,bx as De,fj as V,es as Ee,et as X,eu as ge,cg as We}from"./om77559u6zbv0nxn.js";import{Y as p,a1 as be,bF as y,l as ee,ay as Ie,V as Le,fB as xe,cV as ze}from"./gxt05z3vby89tole.js";import{S as w}from"./mxumex8v5v236ep7.js";import{a as Fe,b as Be}from"./lix2v5tk5c36yx76.js";import{O as se,bi as He,S as he,bj as qe,t as Ue,I as fe,bk as Te,Q as je,aD as Ke,ab as Ye,bc as Ve,J as Qe}from"./nbc7lxss689jfxsu.js";import{B as we,S as Je}from"./l0vqh9fvszj3hp3b.js";import{g as ye}from"./fiv58pqznrh1w78a.js";import{n as $e}from"./h42yhbvy8sdy9y8c.js";import{D as O}from"./li1mu0tcis4xdg0x.js";import{G as Xe}from"./nmbq5qwlkfpahe3h.js";import{S as Ze,c as es}from"./ipt27ybvwhd7glg6.js";import{A as ss}from"./q56vtfoe5kl5blqj.js";import{V as ts}from"./d3y72ugnrmac5z1v.js";import{R as as}from"./d009u1kk3xssyomu.js";import{a as is,b as ns,c as ke,d as rs,e as ls,f as os,A as cs}from"./dn2og4yqpvjxmu0p.js";import{u as ds,b as ps}from"./jw563y8048aa0yhh.js";import"./duw60p19oojdjpnr.js";import"./b7wk66yvrq7fr35v.js";import"./dcgct9yu6baxv56d.js";import"./i4vaxxauijcymhjm.js";import"./gjrzgqfyea2njtcj.js";import"./axvu6ydpv10js14q.js";import"./d5zjt0h3njg3m1rr.js";import"./nd4liikwpb82oyik.js";import"./e05t3wbhku53ta4s.js";import"./b1pq23kxgnd8p9mk.js";import"./ddxo2ilfl7o2palb.js";import"./jiv5cnvrwlato7ez.js";import"./houdxhnqt1f537jw.js";import"./d377yem4viu4l95y.js";import"./llgltku1zw4z6psq.js";import"./fsddy3bxlesj6ecw.js";import"./l5wla3bqers8ciuk.js";import"./fyzbbyrzmzc9o19b.js";import"./j2t25kjfvmgbsvyp.js";import"./l09n2dwczp0zamvv.js";import"./k8i7qjuwte3gs0xd.js";import"./lwdvxz60h1qnxfus.js";import"./erwbk06nmq2xx20b.js";import"./l6wcmwerxruya66n.js";import"./o0e0ym89ni9u8zm0.js";import"./cn8oq89xi0inr50x.js";import"./hm0a9dl47it1vupe.js";import"./wbq6i1q94nv7suxv.js";import"./jpz79m2c0rrrb9l1.js";import"./7bg1a1w5rvrtocyg.js";import"./x46kagrjwuuka7n4.js";import"./iz0g4gxvbm84e0h6.js";import"./pay9icxv4xeze4yl.js";import"./jr5logb3r9gep8eb.js";import"./g8hjhy9sdhse72sa.js";import"./cu3zlkhn2muqxufg.js";import"./nb9naugptbzjd0ju.js";import"./oa6h9q9ugz98zxr7.js";import"./hq7iopmkz520umcn.js";import"./nlmgg35yke3631co.js";import"./nvznqmip6awktwwt.js";import"./7bdc1fk6ob6vuz9j.js";function ms({value:s,title:t,valueClassName:a,onChange:n,emptyMessage:r}){const[l,o]=u.useState(!1),[g,x]=u.useState(""),h=u.useRef(null),f=()=>{if(g!==""){const c=g.trim();n([...s,c]),o(!1),x("")}};return e.jsxs(p.Root,{className:"w-auto",children:[e.jsxs(p.Header,{children:[e.jsx(p.HeaderCell,{children:t}),e.jsx(p.HeaderCell,{})]}),e.jsxs(p.Body,{children:[s.map((c,T)=>e.jsxs(p.Row,{children:[e.jsx(p.Cell,{className:a,children:c}),e.jsx(p.Cell,{textAlign:"right",children:e.jsx(C,{type:"button",onClick:()=>{n(s.filter((N,k)=>k!==T))},children:e.jsx(se,{className:"icon-sm"})})})]},T)),r&&s.length===0?e.jsx(p.Row,{children:e.jsx(p.Cell,{colSpan:2,className:"text-center text-sm italic",children:r})}):null,e.jsxs(p.Row,{children:[e.jsxs("div",{className:R("mt-2 flex flex-row gap-2 p-1",!l&&"hidden"),children:[e.jsx(be,{className:"w-80",name:"newDomain",value:g,onChange:c=>{x(c.target.value)},ref:h,onPressEnter:f,placeholder:"example.com"}),e.jsx(C,{className:"grow-0",onClick:f,children:e.jsx(i,{id:"svRVol",defaultMessage:"Add"})})]}),!l&&e.jsxs(C,{type:"button",onClick:()=>{o(!0),setTimeout(()=>{h.current?.focus()},0)},className:"mt-2",children:[e.jsx(He,{className:"icon-sm inline-block"}),e.jsx(i,{id:"J5y3+M",defaultMessage:"Add new domain"})]})]})]})]})}function us({isOpen:s,onClose:t,account:a,gpt:n}){const r=G(),[l,o]=u.useState(!1),[g,x]=u.useState(""),[h,f]=u.useState(!0);return e.jsxs(Se,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Pe,type:"success",title:r.formatMessage(z.deleteModalTitle),children:[e.jsx("p",{className:"mb-4 text-token-text-primary",children:e.jsx(i,{...z.deleteModalPrompt,values:{gptName:n.gizmo.display.name}})}),!h&&e.jsx("p",{className:"text-red-500",children:e.jsx(i,{...z.invalidEmail})}),e.jsx(be,{className:R("px-3 py-2",h?"":"border-red-500"),name:"email",type:"email",value:g,placeholder:"Email",onChange:c=>{x(c.target.value)}}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(C,{color:"secondary",onClick:()=>{t(!1),o(!1),f(!0)},loading:l,children:e.jsx(i,{...z.cancelButtonText})}),e.jsx(C,{color:"primary",loading:l,onClick:()=>{o(!0),f(!0),g==""||!ts.test(g)?(f(!1),o(!1)):W.updateWorkspaceGPTOwner(a.id,n.gizmo.id,g).then(()=>{t(!0),o(!1),f(!0)},()=>{f(!1),o(!1)})},children:e.jsx(i,{...z.deleteButtonText})})]})]})}const z=Q({deleteModalTitle:{id:"changeOwnerModal.changeModalTitle",defaultMessage:"Change Owner"},deleteModalPrompt:{id:"changeOwnerModal.changeModalPrompt",defaultMessage:"New owner of {gptName}"},cancelButtonText:{id:"changeOwnerModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"changeOwnerModal.changeOwnerButtonText",defaultMessage:"Change owner"},invalidEmail:{id:"changeOwnerModal.invalidEmail",defaultMessage:"Email is invalid or does not belong to a member in this workspace"}});function gs({isOpen:s,onClose:t,account:a,gpt:n}){const r=G(),[l,o]=u.useState(!1);return e.jsxs(Se,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Pe,type:"success",title:r.formatMessage(K.deleteModalTitle),children:[e.jsx("p",{className:"mb-4 text-token-text-primary",children:e.jsx(i,{...K.deleteModalPrompt,values:{gptName:n.gizmo.display.name}})}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(C,{color:"secondary",onClick:()=>{t(!1)},loading:l,children:e.jsx(i,{...K.cancelButtonText})}),e.jsx(C,{color:"danger",loading:l,onClick:()=>{o(!0),W.deleteWorkspaceGPT(a.id,n.gizmo.id).finally(()=>{t(!0),o(!1)})},children:e.jsx(i,{...K.deleteButtonText})})]})]})}const K=Q({deleteModalTitle:{id:"deleteGPTModal.accessModalTitle",defaultMessage:"Delete GPT"},deleteModalPrompt:{id:"deleteGPTModal.accessModalPrompt",defaultMessage:"Are you sure you would like to delete {gptName}? This action can not be undone."},cancelButtonText:{id:"deleteGPTModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"deleteGPTModal.deleteButtonText",defaultMessage:"Delete"}}),F=10;function xs({account:s,gpt:t,thirdParty:a=!1}){const n=B(),[r,l]=u.useState(!1),[o,g]=u.useState(!1),[x,h]=u.useState(!1),[f,c]=u.useState(!1),T=Ce(),N=new Date(a?t.gizmo.workspace_approval_date??"":t.gizmo.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),k=t.tools.filter(P=>P.type===M.JIT_PLUGIN).map(P=>P.type===M.JIT_PLUGIN?P.metadata.domain:"");let S="";return k.length===0?S="":k.length===1?S=k[0]:S=`${k.length} domains`,e.jsxs(e.Fragment,{children:[e.jsxs(p.Row,{children:[e.jsx(p.Cell,{className:"py-4 pr-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:e.jsx(Xe,{src:t.gizmo.display.profile_picture_url,isFirstParty:t.gizmo.tags?.includes(Le.FirstParty)??!1,alt:t.gizmo.display.name,className:"h-10 w-10"})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-semibold text-token-text-primary",children:t.gizmo.display.name})})]})}),e.jsx(p.Cell,{className:"p-4 text-sm text-token-text-secondary",children:t.gizmo.author.display_name}),e.jsx(p.Cell,{className:"p-4 text-sm text-token-text-secondary",children:S}),!a&&e.jsx(p.Cell,{className:"p-4 text-sm text-token-text-secondary",children:e.jsx(ks,{gizmo:t,account:s})}),!a&&e.jsx(p.Cell,{className:"p-4 text-sm text-token-text-secondary",children:t.gizmo.vanity_metrics?.num_conversations_str??0}),e.jsx(p.Cell,{className:"p-4 text-sm text-token-text-secondary",children:N}),e.jsx(p.Cell,{children:e.jsxs(O.Root,{children:[e.jsx(O.Trigger,{className:"-my-2",children:e.jsx(Ye,{className:"icon-sm"})}),e.jsx(O.Portal,{children:a?e.jsx(O.Content,{children:e.jsx(O.Item,{onClick:()=>{c(!0)},color:"danger",icon:se,children:e.jsx(i,{...d.removeFromWorkspace})})}):e.jsxs(O.Content,{children:[e.jsx(O.Item,{onClick:()=>{l(t)},icon:Ve,children:e.jsx(i,{...d.changeAccess})}),e.jsx(O.Item,{onClick:()=>{h(!0)},icon:Qe,children:e.jsx(i,{...d.changeOwner})}),e.jsx(O.Item,{onClick:()=>{g(!0)},icon:se,color:"danger",children:e.jsx(i,{...d.deleteGPT})})]})})]})})]}),r&&e.jsx(Ze,{publishedGizmo:r,gizmo:es(r),promoteGizmo:async()=>{},onClose:()=>{l(!1)},showActionsModal:()=>{},appealGizmo:async()=>{T($e(r.gizmo.id))},setAppealState:()=>{},shareOnly:!0,updateGizmo:()=>{},workspaceOwner:!0}),e.jsx(us,{isOpen:x,gpt:t,account:s,onClose:P=>{h(!1),P&&n.invalidateQueries({queryKey:["workspace",s.id,j.WORKSPACE]})}}),e.jsx(gs,{isOpen:o,gpt:t,account:s,onClose:P=>{g(!1),P&&n.invalidateQueries({queryKey:["workspace",s.id,j.WORKSPACE]})}}),e.jsx(as,{isOpen:f,gpt:t,account:s,onClose:P=>{c(!1),P&&n.invalidateQueries({queryKey:["workspace",s.id,j.THIRD_PARTY]})}})]})}function hs(s,t,a){return s.sort((n,r)=>{let l,o;if(t==="created_at")l=new Date(n.gizmo.created_at).getTime(),o=new Date(r.gizmo.created_at).getTime();else if(t==="workspace_approval_date")l=new Date(n.gizmo.workspace_approval_date??"").getTime(),o=new Date(r.gizmo.workspace_approval_date??"").getTime();else if(t==="vanity_metrics.num_conversations_str")l=n.gizmo.vanity_metrics?.num_conversations??0,o=r.gizmo.vanity_metrics?.num_conversations??0;else throw new Error(`Invalid field: ${t}`);if(a==="asc")return l-o;if(a==="desc")return o-l;throw new Error(`Invalid direction: ${a}`)})}function fs(s){switch(s){case y.User:case y.Group:return y.Private;case y.WorkspaceLink:return y.Workspace;default:return s}}function Ts(s,t){return s.filter(a=>{const n=a.tools.some(o=>o.type===M.MEMORY||o.type===M.INTENT||o.type===M.CONTACTS?!1:t.tools[o.type]),r=fs(a.gizmo.share_recipient),l=t.share_recipient[r];return n||l})}function js(s,t){const a=t.toLowerCase();return s.filter(n=>{const r=n.gizmo.author.display_name&&n.gizmo.author.display_name.toLowerCase(),l=n.gizmo.display.name.toLowerCase();return r&&r.includes(a)||l.includes(a)})}function ws({account:s,showThirdParty:t}){const[a,n]=u.useState(j.WORKSPACE),{data:r,fetchNextPage:l,hasNextPage:o,isError:g,isFetchingNextPage:x}=ys(s.id,a),h=G(),[f,c]=u.useState(!1),T=r?.pages.flatMap(v=>v.items)??[];u.useEffect(()=>{!g&&!x&&o&&l()},[x,o,g,l]);const N=o,k=u.useRef(null),[S,P]=u.useState(""),[H,ie]=u.useState(!1),[A,ne]=u.useState(a==j.WORKSPACE?"created_at":"workspace_approval_date"),[_,D]=u.useState("desc"),re={tools:{[M.BROWSER]:!1,[M.PYTHON]:!1,[M.JIT_PLUGIN]:!1,[M.RETRIEVAL]:!1,[M.DALLE]:!1},share_recipient:{[y.Private]:!1,[y.Workspace]:!1,[y.Link]:!1,[y.Marketplace]:!1}},[E,le]=u.useState(re),[J,q]=u.useState(0),Me=B();u.useEffect(()=>{H&&k.current&&k.current.focus()},[H]);function oe(v,I){const{id:L,checked:Oe}=v.currentTarget,ue={...E};ue[I][L]=Oe,le(ue),q(0)}let ce=0,de=0;const $=Object.values(E.tools).filter(Boolean).length+Object.values(E.share_recipient).filter(Boolean).length;let b=[],pe=0;const U=r===void 0,me=!U&&T.length>0;return U||(pe=Math.min(T.length,F),de=Math.ceil(T.length/F),N?b=T:b=hs(T,A,_),S!==""&&(b=js(b,S)),$>0&&(b=Ts(b,E)),ce=Math.ceil(b.length/F),b=b.slice(J*F,(J+1)*F)),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between border-b border-token-border-light",children:[e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx("a",{className:R("text-l pb-4 font-semibold",a===j.WORKSPACE?"border-b border-token-text-secondary text-token-text-primary":"cursor-pointer text-token-text-tertiary"),onClick:()=>{n(j.WORKSPACE)},children:e.jsx(i,{...d.workspaceTab})}),t&&e.jsx("a",{className:R("text-l pb-4 font-semibold",a===j.THIRD_PARTY?"border-b border-token-text-secondary text-token-text-primary":"cursor-pointer text-token-text-tertiary"),onClick:()=>{n(j.THIRD_PARTY)},children:e.jsx(i,{...d.thirdPartyTab})})]}),!U&&e.jsxs("div",{className:"flex items-center space-x-4 pb-2",children:[$>0&&e.jsxs("div",{className:"mx-0 flex items-center space-x-1",onClick:()=>{le(re)},children:[e.jsx("span",{children:$}),e.jsx(he,{className:"cursor-pointer"})]}),e.jsx(ve,{theme:"white",label:e.jsxs("div",{className:"w-64 space-y-4 p-2 font-normal text-token-text-primary",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,{...d.capabilitiesTitle})}),Object.entries(E.tools).map(([v,I])=>e.jsx(ee,{id:v,checked:I,label:ye(s,v),onChange:L=>{oe(L,"tools")}},v))]}),e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(i,{...d.whoHasAccessTitle})}),Object.entries(E.share_recipient).map(([v,I])=>e.jsx(ee,{id:v,checked:I,label:ye(s,v),onChange:L=>{oe(L,"share_recipient")}},v))]})]}),className:"bg-token-main-surface-primary",side:"bottom",withArrow:!1,align:"end",sideOffset:4,wide:!0,interactive:!0,children:e.jsx(qe,{className:"cursor-pointer"})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>{ie(!0)},children:e.jsx(Ue,{className:"icon-sm"})}),e.jsx("input",{type:"text",ref:k,placeholder:h.formatMessage(d.filterByNameOrBuilderPlaceholder),className:R("border-none bg-token-main-surface-primary px-0 transition-width duration-300 ease-in-out focus:ring-0",H?"w-64":"w-0"),value:S,onChange:()=>{q(0),P(k.current?.value??"")}}),e.jsx("div",{className:R("cursor-pointer",H?"":"hidden"),onClick:()=>{ie(!1),P(""),q(0)},children:e.jsx(he,{className:"icon-sm"})}),t&&e.jsx(C,{color:"secondary",onClick:()=>{c(!0)},icon:fe,children:e.jsx(i,{...d.approveAGPTButton})})]})]}),U?e.jsx("div",{className:"mt-8 flex items-center justify-center",children:e.jsx(Z,{})}):e.jsxs("div",{style:{height:pe*85+75},className:"mb-8",children:[b.length>0?e.jsxs(p.Root,{size:"normal",className:"min-w-full overflow-hidden bg-token-main-surface-primary sm:rounded-lg",children:[e.jsxs(p.Header,{children:[e.jsx(p.HeaderCell,{className:"py-2 pr-4 text-left text-xs text-token-text-secondary",children:e.jsx(i,{...d.nameCellTitle})}),e.jsx(p.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(i,{...d.builderCellTitle})}),e.jsx(p.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(i,{...d.customActionsCellTitle})}),a==j.WORKSPACE&&e.jsx(p.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(i,{...d.whoHasAccessTitle})}),a==j.WORKSPACE&&e.jsx(p.HeaderCell,{className:"cursor-pointer px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{A==="vanity_metrics.num_conversations_str"?D(_==="asc"?"desc":"asc"):(ne("vanity_metrics.num_conversations_str"),D("desc"))},children:[e.jsx("span",{children:e.jsx(i,{...d.chatsCellTitle})}),A==="vanity_metrics.num_conversations_str"&&_==="asc"&&e.jsx(Te,{className:"icon-sm"}),A==="vanity_metrics.num_conversations_str"&&_==="desc"&&e.jsx(je,{className:"icon-sm"})]})}),e.jsx(p.HeaderCell,{className:"cursor-pointer px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{A==="created_at"?D(_==="asc"?"desc":"asc"):(ne("created_at"),D("desc"))},children:[e.jsx("span",{children:a==j.WORKSPACE?e.jsx(i,{...d.createdCellTitle}):e.jsx(i,{...d.approvedCellTitle})}),A==="created_at"&&_==="asc"&&e.jsx(Te,{className:"icon-sm"}),A==="created_at"&&_==="desc"&&e.jsx(je,{className:"icon-sm"})]})}),e.jsx(p.HeaderCell,{className:"w-16"})]}),e.jsx(p.Body,{children:b.map(v=>e.jsx(xs,{account:s,gpt:v,thirdParty:a==j.THIRD_PARTY},v.gizmo.id))})]}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center gap-4 py-16",children:[e.jsx(Ke,{className:"h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-token-text-secondary",children:a==j.THIRD_PARTY?me?e.jsx(i,{...d.noWorkspaceApprovedGPTsFound}):e.jsx(i,{...d.noWorkspaceApprovedGPTs}):me?e.jsx(i,{...d.noWorkspaceGPTsFound}):e.jsx(i,{...d.noWorkspaceGPTs})}),a==j.THIRD_PARTY&&e.jsx(C,{color:"secondary",onClick:()=>{c(!0)},icon:fe,children:e.jsx(i,{...d.approveAGPTButton})})]}),N&&e.jsxs("div",{className:"my-4 flex w-full items-center justify-center gap-4 text-token-text-tertiary",children:[e.jsx(Z,{}),e.jsx(i,{...d.stillLoadingData})]}),de>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(Ie,{currentPage:J,onChangeIndex:q,length:Math.max(ce,1)})})]}),e.jsx(ss,{isOpen:f,onClose:()=>{c(!1),Me.invalidateQueries({queryKey:["workspace",s.id,j.THIRD_PARTY]})},account:s})]})}function ys(s,t){return Ne({queryKey:["workspace",s,"gizmos",t],queryFn:({pageParam:a})=>W.getWorkspaceGPTs(s,t,a),initialPageParam:"",getNextPageParam:a=>a.cursor})}function ks({gizmo:s,account:t}){const a=G(),n={[y.Private]:a.formatMessage(d.shareRecipientTitlePrivate),[y.User]:a.formatMessage(d.shareRecipientTitlePrivate),[y.Group]:a.formatMessage(d.shareRecipientTitlePrivate),[y.Link]:a.formatMessage(d.shareRecipientTitleLink),[y.Marketplace]:a.formatMessage(d.shareRecipientTitlePublic),[y.Workspace]:t.data.name,[y.WorkspaceLink]:t.data.name};if(["private","user","group"].includes(s.gizmo.sharing.recipient)){const{users:r,groups:l}=Ss(s);return r===0&&l===0?e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(i,{...d.shareRecipientTitlePrivate})}):r>0&&l>0?e.jsxs("span",{className:"text-token-text-secondary",children:[n[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{id:"fQ+tJG",defaultMessage:"Shared with {users} and {groups}",values:{users:a.formatMessage(d.userCount,{numUsers:r}),groups:a.formatMessage(d.groupCount,{numGroups:l})}})]}):r>0?e.jsxs("span",{className:"text-token-text-secondary",children:[n[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{...d.userCount,values:{numUsers:r}})]}):e.jsxs("span",{className:"text-token-text-secondary",children:[n[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(i,{...d.groupCount,values:{numGroups:l}})]})}return e.jsx("span",{children:n[s.gizmo.share_recipient]})}function Ss(s){if(s.gizmo.sharing.subjects){const t=s.gizmo.sharing.subjects.filter(n=>n.type===xe.USER).length,a=s.gizmo.sharing.subjects.filter(n=>n.type===xe.GROUP).length;return{users:t,groups:a}}return{users:0,groups:0}}const d=Q({stillLoadingData:{id:"workspaceSettings.stillLoadingData",defaultMessage:"Don't see what you're looking for? Some GPTs are still loading..."},noWorkspaceGPTs:{id:"workspaceSettings.noWorkspaceGPTs",defaultMessage:"This workspace does not have any GPTs"},noWorkspaceGPTsFound:{id:"workspaceSettings.noWorkspaceGPTsFound",defaultMessage:"No workspace GPTs found"},noWorkspaceApprovedGPTs:{id:"workspaceSettings.noWorkspaceApprovedGPTs",defaultMessage:"You havent approved any third-party GPTs"},noWorkspaceApprovedGPTsFound:{id:"workspaceSettings.noWorkspaceApprovedGPTsFound",defaultMessage:"No approved third-party GPTs found"},workspaceTab:{id:"workspaceSettings.workspaceTab",defaultMessage:"Workspace"},thirdPartyTab:{id:"workspaceSettings.thirdPartyTab",defaultMessage:"Third-party"},capabilitiesTitle:{id:"workspaceSettings.capabilitiesTitle",defaultMessage:"Capabilities"},whoHasAccessTitle:{id:"workspaceSettings.whoHasAccessTitle",defaultMessage:"Who has access"},filterByNameOrBuilderPlaceholder:{id:"workspaceSettings.filterByNameOrBuilderPlaceholder",defaultMessage:"Filter by name or builder..."},nameCellTitle:{id:"workspaceSettings.nameCellTitle",defaultMessage:"Name"},builderCellTitle:{id:"workspaceSettings.builderCellTitle",defaultMessage:"Builder"},customActionsCellTitle:{id:"workspaceSettings.customActionsCellTitle",defaultMessage:"Custom Actions"},chatsCellTitle:{id:"workspaceSettings.chatsCellTitle",defaultMessage:"Chats"},createdCellTitle:{id:"workspaceSettings.createdCellTitle",defaultMessage:"Created"},approvedCellTitle:{id:"workspaceSettings.approvedCellTitle",defaultMessage:"Approved"},approveAGPTButton:{id:"workspaceSettings.approveAGPTButton",defaultMessage:"Approve a GPT"},shareRecipientTitlePrivate:{id:"vyjlzc",defaultMessage:"Invite only"},shareRecipientTitleLink:{id:"workspaceSettings.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettings.shareRecipientTitlePublic",defaultMessage:"Public"},changeAccess:{id:"workspaceSettings.changeAccess",defaultMessage:"Change who has access"},changeOwner:{id:"workspaceSettings.changeOwner",defaultMessage:"Change Owner"},deleteGPT:{id:"workspaceSettings.deleteGPT",defaultMessage:"Delete GPT"},removeFromWorkspace:{id:"workspaceSettings.removeFromWorkspace",defaultMessage:"Remove from workspace"},userCount:{id:"P1xo2B",defaultMessage:"{numUsers, plural, one {# user} other {# users}}"},groupCount:{id:"4zRUED",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"}});function Y({title:s,description:t,children:a,upsellEnterprise:n=!1,className:r=""}){return e.jsx(We,{label:e.jsx(i,{...m.enterpriseRequiredMessage}),side:"top",sideOffset:4,disabled:!n,className:"max-w-5xl",children:e.jsxs(rs,{className:R(n&&"text-token-text-tertiary","max-w-4xl",r),children:[e.jsxs(ls,{className:"flex items-center gap-3",children:[e.jsx(i,{...s}),n&&e.jsx("span",{className:"rounded-xl bg-token-main-surface-tertiary px-2 pb-0.5 text-sm",children:e.jsx(i,{...m.enterpriseUpsellPill})})]}),t&&e.jsx(os,{className:"py-2 text-token-text-secondary",children:e.jsx(i,{...t})}),a]})})}function Ps({workspaceId:s,label:t,setting:a,defaultValue:n,values:r,disabled:l=!1}){const o=G(),g=te(),x=B(),{variables:h,mutate:f}=ae({mutationFn:({setting:c,value:T})=>W.setWorkspaceShareSetting(s,c,T),onSettled:()=>{x.invalidateQueries({queryKey:["workspace-settings"]}),x.invalidateQueries({queryKey:["workspace"]})},onError:()=>{g.danger(o.formatMessage(m.featureSettingsUpdateFailed))}});return e.jsxs(cs,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(i,{...t})}),e.jsxs(w.Root,{defaultValue:h?.value??n,onValueChange:c=>{f({setting:a,value:c})},disabled:l,children:[e.jsxs(w.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(w.Value,{}),e.jsx(w.Icon,{})]}),e.jsx(w.Portal,{children:e.jsx(w.Content,{children:r.map((c,T)=>e.jsx(w.Item,{className:"text-md",value:c.value,children:e.jsx(i,{...c.display})},T))})})]})]})}function vs({workspaceId:s,value:t,upsellEnterprise:a=!1}){const n=G(),r=te(),l=B(),{variables:o,mutate:g}=ae({mutationFn:({value:x})=>W.setWorkspaceThirdPartyGPTSetting(s,x),onSettled:()=>{l.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{r.danger(n.formatMessage(m.featureSettingsUpdateFailed))}});return e.jsxs(w.Root,{defaultValue:o?.value??t,onValueChange:x=>{g({value:x})},children:[e.jsxs(w.Trigger,{className:"border border-token-border-light text-base focus-visible:border-token-border-light",children:[e.jsx(w.Value,{}),e.jsx(w.Icon,{})]}),e.jsx(w.Portal,{children:e.jsxs(w.Content,{children:[e.jsx(w.Item,{className:"text-base",value:V.ALLOW_ALL,children:e.jsx(i,{...m.allowAllOption})}),!a&&e.jsx(w.Item,{className:"text-base",value:V.ALLOW_SPECIFIC,children:e.jsx(i,{...m.ownerApprovedOnlyOption})}),e.jsx(w.Item,{className:"text-base",value:V.ALLOW_NONE,children:e.jsx(i,{...m.dontAllowOption})})]})})]})}function bs({workspaceId:s,data:t}){const a=G(),n=te(),r=Ae(),l=B(),[o,g]=u.useState([]),{value:x}=_e("3298726333"),h=ae({mutationFn:({value:S})=>W.setWorkspaceCustomActionsDomains(s,S),onSettled:()=>{l.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{n.danger(a.formatMessage(m.featureSettingsUpdateFailed))}}),f=Re(De.SearchTool);if(r==null)return null;const c=r.isTeam(),T=e.jsx(Y,{title:m.thirdPartyGPTsTitle,description:m.thirdPartyGPTsDescription,className:"border-b border-token-border-light pb-4",children:e.jsx("div",{children:e.jsx(vs,{workspaceId:s,value:t.allow_third_party_gpts,upsellEnterprise:c})})}),N=e.jsx(Y,{title:m.sidebarTitle,children:e.jsx(ws,{account:r,showThirdParty:!c&&t.allow_third_party_gpts===V.ALLOW_SPECIFIC})}),k=t.allowed_custom_actions_domains!=null||t.beta_settings.workspace_gpt_custom_actions===!1;return e.jsxs(is,{className:"max-w-5xl",children:[c&&T,c&&r.isOwnerOfAccount()&&N,c&&e.jsx(ns,{}),e.jsx(Y,{title:m.sharingSettingsTitle,upsellEnterprise:c,children:e.jsx(ke,{children:e.jsx(Ps,{workspaceId:s,label:m.gptSharingTitle,disabled:c,setting:Ee.GPT_SHARE_SETTINGS,defaultValue:t.share_settings.gpt_share_setting,values:[{display:m.anyOneSelect,value:X.ANYONE},{display:m.workspaceMembersOnlySelect,value:X.WORKSPACE_ONLY},{display:m.inviteOnlySelect,value:X.NO_ONE}]})})}),e.jsx(Y,{title:m.workspaceGPTsTitle,description:m.workspaceGPTsDescription,upsellEnterprise:c,children:e.jsxs(ke,{children:[e.jsx(we,{label:f?m.searchOptionTitle:m.browseOptionTitle,feature:ge.BROWSING,value:t.beta_settings.browsing,workspaceId:s,tooltip:f?m.searchTooltip:m.browseTooltip,disabled:c}),x?e.jsxs("div",{className:"flex flex-col gap-4 py-6",children:[e.jsx("div",{className:"text-xl font-semibold",children:e.jsx(i,{id:"ugI3Yt",defaultMessage:"GPT actions"})}),e.jsx("div",{className:"py-2 text-sm text-token-text-secondary",children:e.jsx(i,{id:"HY2eof",defaultMessage:"GPT actions allow GPTs to call third-party APIs for tasks such as retrieving or modifying data. GPT actions are defined by GPT builders, and you can limit the domains that can be used for GPTs created in your workspace."})}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(ee,{checked:!k,id:"allow-all-domains",onChange:S=>{S.currentTarget.checked?(g(t.allowed_custom_actions_domains),h.mutate({value:null})):h.mutate({value:o??[]})},label:e.jsxs("span",{className:"flex flex-row items-center",children:[e.jsx(i,{id:"WnWoqJ",defaultMessage:"Allow all domains for GPT actions"}),e.jsx(ve,{sideOffset:4,interactive:!0,delayDuration:0,label:e.jsx(i,{id:"KjJtEm",defaultMessage:"Limit the Internet domains that can be used by GPTs created in your workspace. This does not apply to third-party GPTs."}),side:"top",children:e.jsx(Je,{})})]})}),h.isPending&&e.jsx(Z,{})]}),k&&e.jsx(ms,{value:t.allowed_custom_actions_domains??[],title:a.formatMessage({id:"YetDcq",defaultMessage:"Domains"}),onChange:S=>{h.mutate({value:S})},emptyMessage:a.formatMessage({id:"rFH4IP",defaultMessage:"No domains added. No GPT actions will be allowed."})})]}):e.jsx(we,{label:m.customActionsOptionTitle,feature:ge.WORKSPACE_GPT_CUSTOM_ACTIONS,value:t.beta_settings.workspace_gpt_custom_actions,workspaceId:s,tooltip:m.customActionsTooltip,disabled:c})]})}),!c&&T,!c&&r.isOwnerOfAccount()&&N]})}function Ms({currentWorkspaceId:s}){const{data:t,isLoading:a}=Ge(s),n=G();return e.jsxs(e.Fragment,{children:[e.jsx(ze,{children:e.jsx("title",{children:n.formatMessage(m.sidebarTitle)})}),e.jsx(Fe,{title:n.formatMessage(m.sidebarTitle)}),e.jsx(Be,{showSpinner:a,children:t===void 0?null:e.jsx(bs,{workspaceId:s,data:t})})]})}const m=Q({sidebarTitle:{id:"workspaceSettingsOld.sidebarTitle",defaultMessage:"GPTs"},allowAllOption:{id:"workspaceSettingsOld.allowAllOption",defaultMessage:"Allow all"},ownerApprovedOnlyOption:{id:"workspaceSettingsOld.ownerApprovedOnlyOption",defaultMessage:"Owner-approved only"},dontAllowOption:{id:"workspaceSettingsOld.dontAllowOption",defaultMessage:"Don't allow"},retentionPolicyTitle:{id:"workspaceSettingsOld.retentionPolicyTitle",defaultMessage:"Retention policy"},thirdPartyGPTsTitle:{id:"workspaceSettingsOld.thirdPartyGPTsTitle",defaultMessage:"Third-party"},thirdPartyGPTsDescription:{id:"workspaceSettingsOld.thirdPartyGPTsDescription",defaultMessage:"Manage whether members can use GPTs created outside your workspace."},customActionsTooltip:{id:"workspaceSettingsOld.customActionsTooltip",defaultMessage:"Allow GPTs to use third-party services for tasks such as finding flights. Actions are defined by GPT builders."},browseTooltip:{id:"workspaceSettingsOld.browseTooltip",defaultMessage:"Allow ChatGPT and GPTs to browse the internet to answer questions about recent topics and events."},searchTooltip:{id:"workspaceSettingsOld.searchTooltip",defaultMessage:"Allow ChatGPT and GPTs to search the web to answer questions about recent topics and events."},customActionsOptionTitle:{id:"workspaceSettingsOld.pluginsOptionTitle.0",defaultMessage:"Custom actions"},browseOptionTitle:{id:"workspaceSettingsOld.browseOptionTitle",defaultMessage:"Browsing with Bing"},searchOptionTitle:{id:"workspaceSettingsOld.searchOptionTitle",defaultMessage:"Web Search"},workspaceGPTsTitle:{id:"workspaceSettingsOld.workspaceGPTsTitle",defaultMessage:"Workspace"},appearanceTitle:{id:"workspaceSettingsOld.appearanceTitle",defaultMessage:"Appearance"},sharingSettingsTitle:{id:"workspaceSettingsOld.sharingSettingsTitle",defaultMessage:"Sharing"},gptSharingTitle:{id:"workspaceSettingsOld.gptSharingTitle",defaultMessage:"GPTs can be shared with..."},chatSharingTitle:{id:"workspaceSettingsOld.chatSharingTitle",defaultMessage:"Chats can be shared with..."},workspaceMembersOnlySelect:{id:"workspaceSettingsOld.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},anyOneSelect:{id:"workspaceSettingsOld.anyOneSelect",defaultMessage:"Anyone"},noOneSelect:{id:"workspaceSettingsOld.noOneSelect",defaultMessage:"No one"},inviteOnlySelect:{id:"workspaceSettingsOld.inviteOnlySelect",defaultMessage:"Invite only"},featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"},conversationRetention:{id:"workspaceSettingsOld.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettingsOld.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettingsOld.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettingsOld.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettingsOld.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettingsOld.retentionChange",defaultMessage:"Contact your account manager to change this setting."},workspaceGPTsDescription:{id:"workspaceSettingsOld.workspaceGPTsDescription",defaultMessage:"Manage which capabilities are available for GPTs built in your workspace or by ChatGPT. This does not apply to third-party GPTs."},enterpriseUpsellPill:{id:"workspaceSettingsOld.enterpriseUpsellPill",defaultMessage:"Enterprise"},retentionSettingTooltip:{id:"workspaceSettingsOld.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},enterpriseRequiredMessage:{id:"workspaceSettingsOld.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},shareRecipientTitlePrivate:{id:"workspaceSettingsOld.shareRecipientTitlePrivate",defaultMessage:"Private"},shareRecipientTitleLink:{id:"workspaceSettingsOld.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettingsOld.shareRecipientTitlePublic",defaultMessage:"Public"}});function At(){const s=ds();return ps(),e.jsx(Ms,{...s})}export{At as default};
//# sourceMappingURL=i2u12t45msfgwyl6.js.map
