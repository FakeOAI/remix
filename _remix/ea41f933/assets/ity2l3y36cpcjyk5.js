import{dC as p,bj as C,r as a,a5 as E,F as O,aL as i,aM as u}from"./hehcvio4m1gb3l50.js";import"./mj0e86z3fqyhfd6p.js";function b(){const{pluginId:t}=p(),s=C(),l=a.useRef(!1),[h,R]=a.useState(""),{code:r,error:n,error_description:o,state:c}=Object.fromEntries(new URLSearchParams(h.substring(1)).entries());return a.useEffect(()=>{R(window.location.hash)},[]),a.useEffect(()=>{if(l.current)return;t&&r&&c&&(l.current=!0);async function S(){const d=`https://chatgpt.com/ccc/${t}/oauth/callback`;if(!(!t||!r||!c))try{const e=await O.connectorOauthCallback(t,r,d,c);if(e.success){const f=new URL(i(u.OAUTH_SUCCESS,e.redirect_path));f.searchParams.set("oauth_success","true"),s(f.toString())}else s(i(u.CUSTOM_ERROR,e.redirect_path,e.error??e.message))}catch{s(i(u.CUSTOM_ERROR))}}S()},[t,r,c,s]),a.useEffect(()=>{n&&E.danger(`${n}${o?`: ${o}`:""}`)},[n,o]),null}export{b as default};
//# sourceMappingURL=ity2l3y36cpcjyk5.js.map
