import{r as d,L as C,fo as E,fp as I,O as D,eW as j,m as e,bj as L,bd as u,dq as N,ds as F,dr as v,eV as f,u as y}from"./dkrkpapzk8i632go.js";import{aO as A,aP as T,aQ as k}from"./fow2c4yq3c8klomi.js";import{cy as U,cz as V,cA as R,cB as S,cC as z,cD as O,cE as B,cF as G}from"./fnh1ee9l40s79ybh.js";import{S as a}from"./dco64ghh2ipsi0j7.js";function H({voice:t}){const[l,c]=d.useState(!1),i=C(),s=E(),g=t.voice,r=t.preview_url,n=d.useRef({playPromise:null}).current,o=I(p=>p.isPlaying&&p.sourceUrl===r),h=D(),m=d.useCallback(async()=>{if(!s)return;const p={voice:g,source:r};j.previews.click(p);try{c(!0),s.changeSource(r),n.playPromise=s.play(),c(!1)}catch(w){j.previews.error(w,p),h.danger(i.formatMessage({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}))}},[i,s,r,g,n,h]),x=d.useCallback(()=>{s&&(n.playPromise?n.playPromise.then(()=>{s.stop(),n.playPromise=null}):s.stop())},[s,n]),P=d.useCallback(()=>{o?x():l||m()},[x,m,l,o]);return d.useEffect(()=>()=>{o&&x()},[t,o,x]),e.jsx(L,{onClick:P,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:l,icon:o?A:T,children:o?e.jsx(u,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(u,{id:"JwYDVp",defaultMessage:"Play"})})}const Z={Trigger:J,Content:W};function b(){return y("174366048")?.value}function J(){return b()?e.jsx(U,{value:V.Speech,icon:e.jsx(k,{className:"icon-sm"}),label:e.jsx(u,{id:"speechSettings.trigger",defaultMessage:"Speech"})}):null}function W(){const t=b(),l=y("1426009137")?.value;return t?e.jsxs(R,{value:V.Speech,children:[e.jsx(S,{children:e.jsx(Y,{})}),l?e.jsx(S,{children:e.jsx(_,{})}):null]}):null}function M(t){const{data:l,isLoading:c}=N(t)||{},i=F();return{isLoading:c,value:l,setValue:s=>{i.mutate({setting:t,value:s})}}}function Y(){const{isLoading:t,value:l,setValue:c}=M(v.VoiceName),i=z(),s=O(),g=t?"":B(l,s),r=i.find(({voice:n})=>n===g);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(u,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[r?e.jsxs(e.Fragment,{children:[e.jsx(H,{voice:r}),e.jsx("div",{className:"h-4 border-l"})]}):null,e.jsxs(a.Root,{value:g,onValueChange:n=>c(n),disabled:t,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsx(a.Content,{children:i.map(({voice:n,name:o})=>e.jsx(a.Item,{value:n,children:o},n))})})]})]})]})})})}function _(){const{isLoading:t,value:l,setValue:c}=M(v.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(u,{id:"speechSettings.content.language",defaultMessage:"Main Language"})}),e.jsxs(a.Root,{value:t?"":l??f.Auto,onValueChange:i=>c(i),disabled:t,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsxs(a.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(a.Item,{value:f.Auto,children:e.jsx(u,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-Detect"})}),Object.entries(f).filter(([i,s])=>s!==f.Auto).map(([i,s])=>e.jsx(a.Item,{value:s,className:"capitalize",children:i},s))]})})]})]}),e.jsx(G,{children:e.jsx(u,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}export{Z as S,M as u};
//# sourceMappingURL=gmef1fomg8iw6s5q.js.map
