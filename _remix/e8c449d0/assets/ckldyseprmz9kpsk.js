const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/img8utsbhlqr8upu.js","assets/ocp1psdvo7s079n6.js","assets/hw2syyb0zdm0dkqx.js","assets/root-k189he4r.css","assets/rdbylepeccge9tbg.js","assets/conversation-small-cll5buey.css","assets/lyrcpf96v5bl5084.js","assets/i1r22qcgvstmagp4.js","assets/oaq3fl6muamktpp2.js","assets/dha8jss0rv65fh0q.js","assets/de7n61hf6walzk1m.js","assets/gwcxwlnj3xqo72hp.js","assets/f5xyl8wyf6fclxx9.js","assets/de0h6u09ou6wpsk8.js","assets/cea2doqin12vkc0p.js","assets/izctx8xm0yrnltp4.js","assets/i1chtz3xhl82lma2.js","assets/e9lafxuzyeh4418f.js","assets/onna164ci5wml3w5.js","assets/k7gcfhlbv1yikdac.js","assets/nv5fuebg453r6u02.js","assets/c1zjx57ua9b5wiax.js","assets/ibhhmuvsjr5wnled.js","assets/ds76px0yaj99gjto.js","assets/bb0vcnlx5trtlof5.js","assets/h5kirm4n0pkadz15.js","assets/gfnaw88k591ms4p7.js","assets/iioiw7cl9tku0gsf.js","assets/k50yad1v8u4823ca.js","assets/f5io6j7r4d9h0skj.js","assets/nbe002ddeu0cwjlx.js","assets/evbz7x5tgtuvisct.js","assets/fqyndvlhdryyy3f3.js","assets/driv3wuv7sfni6r9.js","assets/xbjdxrxv0zzpnke6.js","assets/bri2kqncbgw1svcp.js","assets/g3yxf2osg8n43igz.js","assets/lpz9p2ac4ijjr5z7.js","assets/mpw2m17uk8wpysxy.js","assets/fir5dxk1rwh3c7qj.js","assets/kh6je5ypycxpc0es.js","assets/j5rg6lbom43132tl.js","assets/npzpm8ih3q28ok6m.js","assets/f3l3qzkix7g4rlvf.js","assets/lu6d76in0x15qnpg.js","assets/bf5cqgyv8kj7xvvt.js","assets/kqwdyvkaaavvn8k3.js","assets/d94mgtyecv6b6dth.js","assets/hhmyh2knatc4xsfj.js","assets/ll534iy5sng25owv.js","assets/jczddg88wr85eun0.js","assets/dvdm4umyeij98znn.js","assets/j6su9p32iq147hqt.js","assets/ma1uosrkjzmhscav.js","assets/hj0d4bvug8lcmcvq.js","assets/9xaxq4ggtxs5mrdc.js","assets/oiom8m5ixpwrmi53.js","assets/jmz5a8o3p9rmnze1.js","assets/983a0dy92b3ronpv.js","assets/l5rjn0vc7ijgztrv.js","assets/f5cymwfiv0inb9x9.js","assets/cetyxbkxi5mk86ax.js","assets/m0q6x95fwlvgmauh.js","assets/o86bcwszeuk05sg4.js","assets/hzbk9awu1ns2nmge.js","assets/oc4qx6g6o281ycpv.js","assets/o2cmcbw01unadygm.js","assets/nmm44e1bj3k0yp2m.js","assets/yev44jmj2foiy5b3.js","assets/itkhplpkpc3w0plx.js","assets/c65xwy88iahye311.js","assets/dk3ib44pjbtdsx8j.js","assets/fz901yi1uitk1p61.js","assets/g80eepbdx0m9e06r.js"])))=>i.map(i=>d[i]);
import{x as e,bw as X,a$ as Ee,b0 as Ne,aZ as Oe,r,D as z,av as B,j as Pe,S as H,P as ge,d as fe,a0 as k,a5 as $,V as es,W as U,a8 as Le,a6 as ss,Y as b,Z as C,ab as De,bJ as as,bI as ts,bG as os,aR as ns,t as Ie,bq as Be,br as is,a2 as rs,au as cs,N as m,aw as ls,a as Ve,fa as ds,cf as Re,aq as us,a7 as hs,d5 as y,c3 as gs,fk as fs,w as me,aW as ms,dN as pe,c_ as ps,c$ as xs,d0 as bs,bR as Cs,as as Ss,u as ys}from"./ocp1psdvo7s079n6.js";import{l as Z,T as Fe}from"./bb0vcnlx5trtlof5.js";import{hb as J,cQ as Ms,hc as He,hd as We,he as js,hf as Ge,u as ks,hg as vs,hh as As,S as ws,hi as _s,hj as Ts,bz as W,hk as Es,hl as Ns,hm as Os,hn as Ps,ho as Ls,hp as Ds,hq as Is,hr as Bs,hs as Vs,ht as Rs,hu as Fs,hv as Hs,hw as Ws,hx as Gs,hy as zs,hz as $s,hA as Us,hB as qs,hC as Ks,hD as Qs,hE as Ys,hF as Xs,hG as Zs,cl as ee,hH as Js,hI as ea,er as sa,eu as ze,c9 as Q,f2 as xe,hJ as $e,hK as Ue,gG as aa,aa as ta,hL as oa,gP as be,fI as na,bV as Y,bW as Ce,cz as ia,c0 as ra,c1 as Se,ep as ye,hM as ca,ce as la,hN as Me,am as da,hO as ua,aA as ha,eg as ga,cb as je,cc as fa,fL as ma,hP as pa,hQ as xa,d4 as ba,b$ as Ca,hR as Sa,hS as ya,c4 as Ma,c5 as ke,hT as ja,o as ka,co as va,hU as Aa,cp as wa,dl as _a,hV as Ta,dm as Ea,hW as Na}from"./rdbylepeccge9tbg.js";import{U as u,G as I,u as j,c as qe,d as F,b as Oa}from"./izctx8xm0yrnltp4.js";import{T as G,c as Pa,d as La,m as Da}from"./oaq3fl6muamktpp2.js";import{u as Ia}from"./f5xyl8wyf6fclxx9.js";import{L as Ba}from"./de0h6u09ou6wpsk8.js";import{S as ve,b as Va,c as Ra,N as Fa}from"./cetyxbkxi5mk86ax.js";import{u as Ke,b as Ha,g as Wa}from"./m0q6x95fwlvgmauh.js";import{S as Ga,C as za}from"./o86bcwszeuk05sg4.js";import{T as $a,f as Ua,b as Qe}from"./c1zjx57ua9b5wiax.js";import{c as qa,d as se,a as Ka,b as Qa}from"./oc4qx6g6o281ycpv.js";import{m as Ae}from"./dha8jss0rv65fh0q.js";import{a as Ya,b as we}from"./hzbk9awu1ns2nmge.js";import{r as Xa,u as Za}from"./gwcxwlnj3xqo72hp.js";import{aL as Ja,bG as et,V as st}from"./hw2syyb0zdm0dkqx.js";const at=60*60*24;function tt(s,a=!1){return X()==null||a?"loading":!s||Ee.getCookie(Ne.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function ot({onClose:s}){const{data:{ageVerificationType:a,ageVerificationDeadline:t}={}}=J();return a==="passive"?e.jsx(nt,{onClose:s}):a==="countdown"&&t!=null?e.jsx(it,{onClose:s,ageVerificationDeadline:t}):null}const nt=({onClose:s})=>{const{country:a}=Oe();return r.useEffect(()=>{z.addAction("privacy_policy.show_age_verification_modal",{country:a})},[a]),e.jsx(Ms,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(B,{color:"primary",onClick:async()=>{await Pe.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(B,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},it=({onClose:s,ageVerificationDeadline:a})=>{const t=a!=null?Math.floor(a/60/60/24):0;r.useEffect(()=>{H.logEvent("chatgpt_compliance_age_verification_seen"),ge.logEvent(fe.complianceAgeVerificationSeen)},[]);const{country:o}=Oe();return r.useEffect(()=>{z.addAction("privacy_policy.show_age_verification_countdown",{country:o})},[o]),e.jsxs(He,{children:[e.jsx(We,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(k,{..._e.ageVerificationTitle,values:{deadline:t,learnMoreLink:i=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:i})}})}),e.jsx(js,{altText:"Dismiss notification",asChild:!0,children:e.jsx(B,{color:"primary",size:"small",onClick:()=>{H.logEvent("chatgpt_compliance_age_verification_clicked"),ge.logEvent(fe.complianceAgeVerificationClicked),Ee.setCookie(Ne.AgeVerification,"true",{maxAge:at,path:"/"}),s(),u.openModal(I.AgeVerificationInterstitial)},children:e.jsx(k,{..._e.startVerification})})}),e.jsx(Ge,{})]})},_e=$({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function rt({onClose:s}){const a=U(),t=Le(),{openSettings:o}=ks(),i=vs(),{session:n}=ss(),{data:{isStorageComplianceEnabled:c}={}}=J(),{data:d,isLoading:S}=As({enabled:!!(c&&n),select:l=>!l.cookie_consent.is_required});return r.useEffect(()=>{d===!0&&s()},[d,s]),S?null:e.jsx(ct,{onReject:()=>{i.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){t.success(a.formatMessage(D.updateSuccess))},onError(){t.danger(a.formatMessage(D.updateFailure))}}),s()},onAccept:()=>{i.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){t.success(a.formatMessage(D.updateSuccess))},onError(){t.danger(a.formatMessage(D.updateFailure))}}),s()},children:e.jsx(k,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:l=>e.jsx(Ba,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:l}),manageLink:l=>e.jsx(lt,{onClick:()=>{o(ws.DataControls)},children:l})}})})}function ct({children:s,onAccept:a,onReject:t}){return r.useEffect(()=>{z.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs(He,{children:[e.jsxs(We,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(B,{color:"secondary",size:"small",onClick:t,children:e.jsx(k,{...D.reject})}),e.jsx(B,{color:"secondary",size:"small",onClick:a,children:e.jsx(k,{...D.accept})})]})]}),e.jsx(Ge,{})]})}const lt=es.button`underline font-normal text-green-600`,D=$({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),dt=b(()=>C(async()=>{const{ModelOnboardingNUXModal:s}=await import("./img8utsbhlqr8upu.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(({ModelOnboardingNUXModal:s})=>s),{ssr:!1}),ut=({onClose:s})=>{const a=U(),t=W(ee.isBusinessWorkspace),o=W(n=>n.currentWorkspace),i=t?a.formatMessage(Te.workspaceWelcome,{workspaceName:o?.name}):"ChatGPT";return e.jsx(Be,{isOpen:!0,onClose:is,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(Te.personalOnboardingSubheading),children:e.jsx(Js,{onClose:s,scope:ea.Personal})})};function ht(){const[s,a]=r.useState(0),{hasSeenOnboardingDate:t}=_s(),{hasSeenTeamOwnerOnboardingDate:o}=Ts(),i=W(ee.isBusinessWorkspace),n=De(),[c,d]=r.useState(!1),{data:S,isPending:l}=J(),A=tt(S,l),{eligible:P,isLoading:w}=Ia(),E=as(),N=ts(),v=os(),{data:g,isError:M}=ns(),p=g!=null,_=g&&g?.accountItems.length>1&&g.currentAccountId==null,O=g?.accountItems.some(h=>h.isPersonalAccount()),x=!!g?.accountItems&&g.accountItems.length>0&&g.accountItems.every(({canAccessWithCurrentSession:h})=>!h),{eligible:V,isLoading:f}=Es(),{value:T}=Ie("1542198993"),{punchOutRequireLoginInfo:R}=Ns(),{state:ae}=Os(),{isOpen:te,isLoading:oe}=Ps(),{isOpen:ne,isLoading:ie}=Ls(),{isOpen:re,isLoading:ce}=Ds(),{isOpen:le,isLoading:de}=Is(),{state:ue}=Bs(),L=r.useMemo(()=>[{Component:Vs,getModalState:()=>R?"show":"hide",isDeferrable:!1},{Component:Rs,getModalState:()=>ae,isDeferrable:!1},{Component:Fs,getModalState:()=>ue,isDeferrable:!1},{Component:Hs,getModalState:()=>oe?"loading":te?"show":"hide",isDeferrable:!1},{Component:Ws,getModalState:()=>de?"loading":le?"show":"hide",isDeferrable:!1},{Component:ut,getModalState:()=>i?"hide":t===null?"loading":t===!1?"show":"hide",isDeferrable:!0},{Component:Gs,getModalState:()=>M?"hide":_?"show":p?"hide":"loading",isDeferrable:!1},{Component:zs,getModalState:()=>E!==null?"show":M||p?"hide":"loading",isDeferrable:!1},{Component:$s,getModalState:()=>N!==null?"show":M||p?"hide":"loading",isDeferrable:!1},{Component:Us,getModalState:()=>v!=null?"show":M||p?"hide":"loading",isDeferrable:!1},{Component:qs,getModalState:()=>p?x?"show":"hide":"loading",isDeferrable:!1},{Component:Ks,getModalState:()=>ie?"loading":ne?"show":"hide",isDeferrable:!1},{Component:Qs,getModalState:()=>ce?"loading":re?"show":"hide",isDeferrable:!1},{Component:rt,getModalState:()=>"hide",isDeferrable:!1},{Component:Ys,getModalState:()=>!n?.isTeam()||!n?.isOwnerOfAccount()||!O?"hide":!p||o===null?"loading":o===!1?"show":"hide",isDeferrable:!1},{Component:Xs,getModalState:()=>i?t===null?"loading":t===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Zs,getModalState:()=>f?"loading":V&&T?"show":"hide",isDeferrable:!1},{Component:ot,getModalState:()=>A,isDeferrable:!1},{Component:dt,getModalState:()=>w?"loading":P?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(h=>!(h.isDeferrable&&c)&&(!h.expiresAt||h.expiresAt.getTime()>Date.now())),[R,ae,v,p,t,o,O,w,i,M,E,N,n,x,_,A,P,c,T,V,f,te,oe,le,de,ue,ie,ne,re,ce]);r.useEffect(()=>{if(L[s]&&L[s].getModalState()==="hide"){const h=L.findIndex(Je=>Je.getModalState()!=="hide");a(h)}},[s,L]);const q=L[s],K=q?.getModalState()==="show";if(r.useEffect(()=>{const h=j.getState().activeModals.has(I.BlockingInitialComponent);K!==h&&(K?u.openModal(I.BlockingInitialComponent):u.closeModal(I.BlockingInitialComponent))},[K]),q==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const he=q.getModalState();if(he==="loading")return null;he==="hide"&&a(h=>h+1);const Ze=L[s].Component;return e.jsx(Ze,{onClose:()=>{d(!0),a(h=>h+1)}})}const Te=$({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),gt=b(()=>C(()=>import("./cea2doqin12vkc0p.js"),__vite__mapDeps([14,1,2,3,8,4,5,9,7,10,11,15,16,17,18,19,20,21,22,23,24,25,12,13,26,27,28,29,30,31,6,32,33,34,35,36,37,38,39,40,41,42,43])).then(s=>s.DebugConversationSidebar));function Ye({clientThreadId:s}){ft();const a=X(),t=a?.includes("debug"),o=rs(),i=j(c=>c.activeSidebar),n=a?.includes("debug")&&i==="debug";return!t||!n?null:e.jsx(gt,{clientThreadId:s,slideOver:!sa(o),onClose:()=>u.toggleActiveSidebar("debug"),isOpen:!0})}function ft(){const a=X()?.includes("debug");r.useEffect(()=>{if(!a)return;const t=new AbortController;return document.addEventListener("keydown",o=>{o.target instanceof HTMLElement&&["input","textarea","select","button"].includes(o.target.tagName.toLowerCase())||o.key==="\\"&&u.toggleActiveSidebar("debug")},{signal:t.signal}),()=>{t.abort()}},[a])}const mt=b(()=>C(()=>import("./lu6d76in0x15qnpg.js"),__vite__mapDeps([44,1,2,3,4,5,45,8,9,46,47,7,10,48])).then(s=>s.SearchSources));function pt({clientThreadId:s}){const{resolvedTheme:a}=cs(),t=a==="dark",{turnIndex:o,messageId:i,isOpen:n}=qe(),c=r.useCallback(()=>{u.closeChatThreadFlyout(s,i)},[s,i]);return!i||!o||!n?null:e.jsx(ze,{anchor:"top",className:m("relative flex-1 border-l",t?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(Q,{name:"search-sources-header",type:"primary",className:m("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(ls,{onClick:c})})}),children:e.jsx(mt,{clientThreadId:s,turnIndex:o,messageId:i,isInSidebar:!0})})}function Xe({clientThreadId:s}){r.useEffect(()=>{u.closeSharingModal()},[s]);const a=Ve();r.useEffect(()=>(G.retainThread(s),()=>{setTimeout(()=>{a.invalidateQueries({queryKey:["conversation",s]})},0),G.releaseThread(s)}),[s,a]),r.useEffect(()=>()=>{H.checkGate("3922476776")||xe.abortAllRequests()},[s]);const t=r.useRef(s);r.useEffect(()=>{s!==t.current&&(H.checkGate("3922476776")||xe.clear(),t.current=s)},[s])}const xt=b(()=>C(()=>import("./ll534iy5sng25owv.js"),__vite__mapDeps([49,1,2,3,4,5,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6,50,51,52,53,54,55,18,56])).then(s=>s.CanvasFocusedViewManager)),bt=b(()=>C(()=>import("./jmz5a8o3p9rmnze1.js"),__vite__mapDeps([57,1,2,3,15,4,5,10,8,9,44,45,46,47,7,48,58])).then(s=>s.SearchResultsModal));function Ct({clientThreadId:s,setClientThreadId:a,urlThreadId:t,prefetchSearch:o}){const i=Pa();Xe({clientThreadId:s});const{createNewThread:n,onThreadCreated:c,resetThread:d}=qa({clientThreadId:s,setClientThreadId:a});Ke({resetThreadAction:d,clientThreadId:s});const S=Z(s);return e.jsxs(Fe,{clientThreadId:s,children:[e.jsx($e,{clientThreadId:s,urlThreadId:t}),e.jsxs(ve,{hideNavigation:i,mobileHeaderContent:e.jsx($a,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Ua,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(Va,{onNewChatButtonClick:d}),mobileHeaderRightContent:e.jsx(Ra,{onNewChatButtonClick:d}),sidebar:e.jsx(Fa,{navHeader:s?e.jsx(Ga,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:n}):null,children:e.jsx(za,{clientThreadId:s,onNewThread:n})}),threadFlyout:e.jsx(pt,{clientThreadId:s}),children:[e.jsx(Ue,{}),e.jsx(Qe,{clientThreadId:s,onCreate:c,prefetchSearch:o},s),e.jsxs(ve.Sidebars,{children:[S&&e.jsx(xt,{clientThreadId:s}),e.jsx(Ye,{clientThreadId:s}),!1]})]}),e.jsx(St,{clientThreadId:s})]})}function St({clientThreadId:s}){const{value:a}=Ie("218782548"),t=aa(),{isOpen:o}=qe();return o&&(!t||!a)&&e.jsx(bt,{clientThreadId:s})}const yt=450;function Mt({children:s,clientThreadId:a,isOpen:t,onClose:o}){return e.jsx(ta,{children:t&&e.jsx(ds,{children:e.jsx(oa.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(Ae.div,{className:"h-full w-full bg-token-main-surface-secondary",...be}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(Ae.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:yt},...be,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Qe,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})})}const jt=b(()=>C(()=>import("./l5rjn0vc7ijgztrv.js"),__vite__mapDeps([59,1,2,3,4,5,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6]))),kt=b(()=>C(()=>import("./f5cymwfiv0inb9x9.js"),__vite__mapDeps([60,1,2,3,4,5,39,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6,61,41,62,63,64,21,22,32,33,34,35,36,37,38,40,42,43,65])).then(s=>s.ImageEditor));function vt({clientThreadId:s}){const a=na();r.useEffect(()=>{Y.close()},[s]);let t;return a?.type===Ce.ADAVisualization?t=e.jsx(jt,{clientThreadId:s,visualization:a.visualization}):a?.type===Ce.Image&&(t=e.jsx(kt,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(Mt,{clientThreadId:s,isOpen:a!=null,onClose:Y.close,children:t})}const At=()=>{const s=U(),a=j(n=>n.activeModals.has(I.KeyboardActions)),t=()=>{u.closeModal(I.KeyboardActions)},o=Ha(),i=r.useMemo(()=>{const n=Math.ceil(o.length/2);return[o.slice(0,n),o.slice(n)]},[o]);return e.jsx(Be,{isOpen:a,onClose:t,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage(Tt.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:i.map((n,c)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:n.map(d=>e.jsx(wt,{action:d},d.key))},`col-${c}`))})})})},wt=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(k,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:Wa(s.keyboardBinding).map((a,t)=>e.jsx(_t,{keyName:a},`${s.key}-${t}`))})]}),_t=({keyName:s})=>{const a=m("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:m(a,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:m(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:m(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},Tt=$({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function Et(){const s=Ve(),[a,t]=r.useState(!1);return e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(k,{id:"p9u9Tx",defaultMessage:"Unable to load history"}),!a&&e.jsx("div",{className:"mt-1",children:e.jsx(B,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{t(!0),Xa(s)},children:e.jsx(k,{id:"3NKcIv",defaultMessage:"Retry"})})})]})}function Nt({clientThreadId:s}){const a=La(s),t=Re(),{isCollapsible:o,recentConversationLimit:i}=Ya(),n={buckets:o,recentConversationLimit:i},c=j(f=>f.isHistoryCollapsed),{conversations:d,buckets:S,hasNextPage:l,fetchNextPage:A,data:P,isLoading:w,isFetchingNextPage:E,isError:N,recents:v}=Za(n),g=t?void 0:a,M=c&&v.items.length>0,p=!c&&S.length>0,_=d.length===0,O=!N&&(P===void 0||w||E);r.useMemo(()=>{ia.publish({kind:"refreshHistory",conversations:d})},[d]);const[x]=ra({onChange:f=>{r.startTransition(()=>{u.setHistoryShowMoreVisible(f)})}}),V=l&&!_&&!c&&!w&&!E;return e.jsxs(e.Fragment,{children:[N&&_&&!O&&e.jsx(Et,{}),M&&e.jsx(Se,{header:v.label,children:v.items.map((f,T)=>e.jsx(we,{item:f,isActive:f.id===g,testId:`history-item-${T}`},f.id))}),p&&S.map(f=>e.jsx(Se,{header:f.label,children:f.items.map((T,R)=>e.jsx(we,{item:T,isActive:T.id===g,testId:`history-item-${R}`},T.id))},f.key)),O&&e.jsx(us,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),o&&e.jsxs("div",{className:"-ml-2 mb-5",children:[e.jsx("div",{className:m(!c&&"hidden"),children:e.jsx(ye,{type:"more",onClick:u.toggleHistoryCollapsed})}),e.jsx("div",{className:m(c&&"hidden"),ref:x,children:e.jsx(ye,{type:"less",onClick:u.toggleHistoryCollapsed})})]}),V&&e.jsx(ca,{onPaginate:A})]})}const Ot=b(()=>C(()=>import("./o2cmcbw01unadygm.js"),__vite__mapDeps([66,1,2,3,35,7,4,5,8,9,10,15,63,25,64,11,6,62,24,12,13,26,27])).then(s=>s.GizmoSidebarList));function Pt({clientThreadId:s}){const a=De(),t=Da(s),{isUnauthenticated:o}=hs();return o?null:e.jsxs("div",{className:m(y.screenContent),children:[null,e.jsx(Nt,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(Ot,{currentGizmoId:t}):null]})}const Lt=b(()=>C(()=>import("./nmm44e1bj3k0yp2m.js"),__vite__mapDeps([67,1,2,3,15,4,5,10,8,9,24,7,25,12,13,26,27,61,41])).then(s=>s.UserProfileBar),{ssr:!0});function Dt(){const s=j(F.isGptListVisible),a=j(F.isHistoryShowMoreVisible),t=j(F.isHistoryCollapsed),o=j(F.isGptListCollapsed),i=r.useCallback(()=>{t||u.toggleHistoryCollapsed(),o&&u.toggleGptListCollapsed()},[t,o]),n=[];return!t&&!a&&n.push(e.jsx(Me,{onClick:u.toggleHistoryCollapsed,children:e.jsx(k,{id:"1poXLj",defaultMessage:"See less"})},"see-less")),s||n.push(e.jsx(Me,{onClick:i,children:e.jsx(k,{id:"DnQZfo",defaultMessage:"See GPTs"})},"see-gpt")),e.jsxs(la,{className:m(y.screenTrailingBarContainer),children:[n,e.jsx(Lt,{})]})}const It=b(()=>C(()=>import("./yev44jmj2foiy5b3.js"),__vite__mapDeps([68,1,2,3,4,5,69,70,8,9,71,62,6,7,10,11,15])).then(s=>s.FannyPackIconButton),{ssr:!1});function Bt({onNewThread:s}){const a=U(),t=Oa(),o=j(n=>n.sidebarState===da.Floating);ua({checkElement:n=>n?.tagName==="NAV",enabled:!t&&o,onLightDismiss(){const n=document.querySelector(`input[name="${je.OpenOrClosed}"]`);n&&(n.checked=!1)}});const{isFannyPackEnabled:i}=ha();return e.jsxs(e.Fragment,{children:[e.jsx(Q,{type:"primary",className:m(y.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[9px]",children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(ga,{className:m(y.closeSidebarAction),checked:!t,onChange:n=>{n.currentTarget.checked?u.openSidebar():u.closeSidebar()},icon:e.jsx(Ja,{className:y.sidebarIcon}),label:a.formatMessage({id:"fM0vj3",defaultMessage:"Close Sidebar"}),group:je.OpenOrClosed})}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx(It,{className:y.searchAction,icon:e.jsx(et,{className:y.sidebarIcon})}),e.jsx(gs,{to:"/",onClick:n=>{n.preventDefault(),s()},children:e.jsx(fa,{icon:e.jsx(st,{className:y.sidebarIcon}),className:y.searchAction,label:a.formatMessage({id:"NUNaGU",defaultMessage:"New chat"})})})]})]})}),e.jsx(Q,{type:"primary",className:y.bucketBar,disableSizeTracking:!0,children:" "})]})}function Vt(){const{clientThreadId:s,onNewThread:a}=se();return e.jsx(ze,{anchor:"vertical",className:m(y.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Bt,{onNewThread:a}),trackLeading:!0,trailing:e.jsx(Dt,{}),children:e.jsx(Pt,{clientThreadId:s})})}const Rt=b(()=>C(()=>import("./ll534iy5sng25owv.js"),__vite__mapDeps([49,1,2,3,4,5,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6,50,51,52,53,54,55,18,56])).then(s=>s.CanvasFocusedViewManager));function Ft(){const{clientThreadId:s,resetThread:a}=se();return Ke({resetThreadAction:a,clientThreadId:s}),null}function Ht(){const{clientThreadId:s,currentModelId:a,isCompanionWindow:t}=se();return e.jsx(pa,{conversationId:s,currentModelId:a,isActiveWindow:!t})}function Wt({clientThreadId:s,setClientThreadId:a,urlThreadId:t}){Xe({clientThreadId:s});const o=Z(s);return e.jsxs(Ka,{clientThreadId:s,setClientThreadId:a,children:[e.jsx(Ht,{}),e.jsx(Ft,{}),e.jsxs(Fe,{clientThreadId:s,children:[e.jsx($e,{clientThreadId:s,urlThreadId:t}),e.jsx(Ue,{}),e.jsx(ma,{className:fs.application,sidebar:e.jsx(Vt,{}),thread:e.jsx(Qa,{}),details:o&&e.jsx(Rt,{clientThreadId:s}),debugger:e.jsx(Ye,{clientThreadId:s}),name:"application-root"})]})]})}var Gt={};const zt=b(()=>C(()=>import("./fz901yi1uitk1p61.js"),__vite__mapDeps([72,1,2,3,4,5,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6,73])));function lo(s){const{urlThreadId:a,clientThreadId:t,prefetchSearch:o}=s,i="serviceStatus"in s?s.serviceStatus:null;Ut();const n=Re(),c=me(),[d]=ms(),S=Le(),[l,A]=r.useState(()=>a!==void 0?a:t!==void 0?t:pe());a!==void 0&&l!==a&&G.getServerThreadId(l)!==a&&A(a);const P=xa(me());r.useEffect(()=>{a===void 0&&G.getServerThreadId(l)!==void 0&&A(pe())},[a,l,P]);const w=ba(),E=W(ee.workspaceId);Z(l);const N=Ca(),{eligible:v,isLoading:g,markAsViewed:M}=Sa(),p=ya();r.useEffect(()=>{(c.pathname==="/"||c.pathname.startsWith("/c/"))&&Ma({namespace:ke.ChatPageLoad})==null&&(ja({namespace:ke.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),z.addTiming("chatgpt.web.chatPage.mounted"))},[]);const _=ka();r.useEffect(()=>{ps(!0).then(x=>{x.force_login&&_({authType:"login"}),xs.initializeAndGatherData(x),va.initializeAndGatherData(x),bs.initializeAndGatherData(x)})},[_]),r.useEffect(()=>{i?.type&&w===!1&&S.warning(i.message,{hasCloseButton:!0,duration:5})},[w,i?.message,i?.type,S]),r.useEffect(()=>{const x=d.get(Aa)==="true";n!==x&&Cs.setIsTemporaryChatEnabled(x)},[n,d]),r.useEffect(()=>{c.state?.focusObject&&Y.setFocusedObject(c.state.focusObject)},[c.state?.focusObject]),r.useEffect(()=>{!g&&v&&(M(),p())},[v,g,M,p]);const O=N?Wt:Ct;return e.jsx(Ss.Provider,{value:null,children:e.jsx(wa,{children:e.jsxs(_a,{clientThreadId:l,children:[e.jsx(ht,{},E),e.jsx(At,{}),e.jsx(Ta,{}),e.jsx(O,{urlThreadId:a,clientThreadId:l,setClientThreadId:A,prefetchSearch:o}),e.jsx(vt,{clientThreadId:l}),e.jsx(Ea,{clientThreadId:l}),e.jsx($t,{}),!1,e.jsx(Na,{})]})})})}function $t(){const s=j(a=>a.sharingModalThreadId);return s?e.jsx(zt,{serverThreadId:s}):null}function Ut(){ys({queryKey:["pingEdge"],queryFn:()=>Pe.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Gt.GOKU_SERVICE);export{lo as C,yt as F};
//# sourceMappingURL=ckldyseprmz9kpsk.js.map
