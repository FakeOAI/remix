import{r as p,bc as O,V as W,e0 as S,bh as q,a2 as B,x as f,W as P,am as b,bA as K,fz as U,fA as k}from"./ocp1psdvo7s079n6.js";import{C as H,a as $}from"./naejynt8oaqpji7x.js";import{a as V}from"./i1ful5binj02wqq4.js";import"./hn8927ddsdfkqp9a.js";import{jC as X,jD as z,ho as G}from"./rdbylepeccge9tbg.js";import{bW as Q,bX as Y}from"./hw2syyb0zdm0dkqx.js";import{a as Z,b as J,l as ee}from"./oaq3fl6muamktpp2.js";import"./bb0vcnlx5trtlof5.js";import"./i1r22qcgvstmagp4.js";import"./de7n61hf6walzk1m.js";import"./h5kirm4n0pkadz15.js";import"./f5xyl8wyf6fclxx9.js";import"./de0h6u09ou6wpsk8.js";import"./gfnaw88k591ms4p7.js";import"./izctx8xm0yrnltp4.js";import"./iioiw7cl9tku0gsf.js";import"./oc4qx6g6o281ycpv.js";import"./c1zjx57ua9b5wiax.js";import"./ibhhmuvsjr5wnled.js";import"./ds76px0yaj99gjto.js";import"./k50yad1v8u4823ca.js";import"./dha8jss0rv65fh0q.js";import"./f5io6j7r4d9h0skj.js";import"./nbe002ddeu0cwjlx.js";import"./gwcxwlnj3xqo72hp.js";import"./evbz7x5tgtuvisct.js";import"./lyrcpf96v5bl5084.js";import"./fqyndvlhdryyy3f3.js";import"./driv3wuv7sfni6r9.js";import"./xbjdxrxv0zzpnke6.js";import"./bri2kqncbgw1svcp.js";import"./g3yxf2osg8n43igz.js";import"./lpz9p2ac4ijjr5z7.js";import"./mpw2m17uk8wpysxy.js";import"./fir5dxk1rwh3c7qj.js";import"./kh6je5ypycxpc0es.js";import"./j5rg6lbom43132tl.js";import"./npzpm8ih3q28ok6m.js";import"./f3l3qzkix7g4rlvf.js";import"./m0q6x95fwlvgmauh.js";const x=p.createContext(void 0),te={};x.Provider;const ne=()=>p.useContext(x)?p.useContext(x):te,v=typeof window>"u"?global:window,w="@griffel/";function se(e,t){return v[Symbol.for(w+e)]||(v[Symbol.for(w+e)]=t),v[Symbol.for(w+e)]}const _=se("DEFINITION_LOOKUP_TABLE",{}),y="data-make-styles-bucket",oe="data-priority",E=7,R="___",ie=R.length+E,re=0,le=1;function ce(e){const t=e.length;if(t===E)return e;for(let n=t;n<E;n++)e+="0";return e}function L(e,t,n=[]){return R+ce(X(e+t))}function M(e,t){let n="",s="";for(const i in e){const o=e[i];if(o===0){s+=i+" ";continue}const r=Array.isArray(o),l=t==="rtl"?(r?o[1]:o)+" ":(r?o[0]:o)+" ";n+=l,s+=l}return[n.slice(0,-1),s.slice(0,-1)]}function I(e,t){const n={};for(const s in e){const[i,o]=M(e[s],t);if(o===""){n[s]="";continue}const r=L(o,t),l=r+(i===""?"":" "+i);_[r]=[e[s],t],n[s]=l}return n}const N={};function ae(){let e=null,t="",n="";const s=new Array(arguments.length);for(let c=0;c<arguments.length;c++){const h=arguments[c];if(typeof h=="string"&&h!==""){const a=h.indexOf(R);if(a===-1)t+=h+" ";else{const C=h.substr(a,ie);a>0&&(t+=h.slice(0,a)),n+=C,s[c]=C}}}if(n==="")return t.slice(0,-1);const i=N[n];if(i!==void 0)return t+i;const o=[];for(let c=0;c<arguments.length;c++){const h=s[c];if(h){const a=_[h];a&&(o.push(a[re]),e=a[le])}}const r=Object.assign.apply(Object,[{}].concat(o)),[l,u]=M(r,e),d=L(u,e,s),m=d+" "+l;return N[n]=m,_[d]=[r,e],t+m}function ue(e){return Array.isArray(e)?e:[e]}function fe(e,t,n,s){const i=[];if(s[y]=t,s[oe]=String(n),e)for(const r in s)e.setAttribute(r,s[r]);function o(r){return e?.sheet?e.sheet.insertRule(r,e.sheet.cssRules.length):i.push(r)}return{elementAttributes:s,insertRule:o,element:e,bucketName:t,cssRules(){return e?.sheet?Array.from(e.sheet.cssRules).map(r=>r.cssText):i}}}const de=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],T=de.reduce((e,t,n)=>(e[t]=n,e),{});function me(e,t,n){return(e==="m"?e+t:e)+n}function he(e,t,n,s,i={}){var o,r;const l=e==="m",u=(o=i.m)!==null&&o!==void 0?o:"0",d=(r=i.p)!==null&&r!==void 0?r:0,m=me(e,u,d);if(!s.stylesheets[m]){const c=t&&t.createElement("style"),h=fe(c,e,d,Object.assign({},s.styleElementAttributes,l&&{media:u}));s.stylesheets[m]=h,t&&c&&t.head.insertBefore(c,pe(t,n,e,s,i))}return s.stylesheets[m]}function ge(e,t,n){var s,i;const o=t+((s=n.m)!==null&&s!==void 0?s:""),r=e.getAttribute(y)+((i=e.media)!==null&&i!==void 0?i:"");return o===r}function pe(e,t,n,s,i={}){var o,r;const l=T[n],u=(o=i.m)!==null&&o!==void 0?o:"",d=(r=i.p)!==null&&r!==void 0?r:0;let m=g=>l-T[g.getAttribute(y)],c=e.head.querySelectorAll(`[${y}]`);if(n==="m"){const g=e.head.querySelectorAll(`[${y}="${n}"]`);g.length&&(c=g,m=F=>s.compareMediaQueries(u,F.media))}const h=g=>ge(g,n,i)?d-Number(g.getAttribute("data-priority")):m(g),a=c.length;let C=a-1;for(;C>=0;){const g=c.item(C);if(h(g)>0)return g.nextSibling;C--}return a>0?c.item(0):t?t.nextSibling:null}function A(e,t){try{e.insertRule(t)}catch{}}let Ce=0;const Se=(e,t)=>e<t?-1:e>t?1:0;function ye(e=typeof document>"u"?void 0:document,t={}){const{classNameHashSalt:n,unstable_filterCSSRule:s,insertionPoint:i,styleElementAttributes:o,compareMediaQueries:r=Se}=t,l={classNameHashSalt:n,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(o),compareMediaQueries:r,id:`d${Ce++}`,insertCSSRules(u){for(const d in u){const m=u[d];for(let c=0,h=m.length;c<h;c++){const[a,C]=ue(m[c]),g=he(d,e,i||null,l,C);l.insertionCache[a]||(l.insertionCache[a]=d,s?s(a)&&A(g,a):A(g,a))}}}};return l}const be=()=>{const e={};return function(n,s){e[n.id]===void 0&&(n.insertCSSRules(s),e[n.id]=!0)}};function ve(e,t,n=be){const s=n();let i=null,o=null;function r(l){const{dir:u,renderer:d}=l,m=u==="ltr";return m?i===null&&(i=I(e,u)):o===null&&(o=I(e,u)),s(d,t),m?i:o}return r}function we(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const D=O.useInsertionEffect?O.useInsertionEffect:void 0,xe=()=>{const e={};return function(n,s){if(D&&we()){D(()=>{n.insertCSSRules(s)},[n,s]);return}e[n.id]===void 0&&(n.insertCSSRules(s),e[n.id]=!0)}},_e=p.createContext(ye());function Ee(){return p.useContext(_e)}const Re=p.createContext("ltr");function Oe(){return p.useContext(Re)}function Ie(e,t){const n=ve(e,t,xe);return function(){const i=Oe(),o=Ee();return n({dir:i,renderer:o})}}const Ne=Ie({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),Te=(e,t)=>{const{title:n,primaryFill:s="currentColor",...i}=e,o={...i,title:void 0,fill:s},r=Ne(),l=ne();return o.className=ae(r.root,t?.flipInRtl&&l?.textDirection==="rtl"&&r.rtl,o.className),n&&(o["aria-label"]=n),!o["aria-label"]&&!o["aria-labelledby"]?o["aria-hidden"]=!0:o.role="img",o},Ae=(e,t,n,s)=>{const i=t==="1em"?"20":t,o=p.forwardRef((r,l)=>{const u={...Te(r,{flipInRtl:void 0}),ref:l,width:t,height:t,viewBox:`0 0 ${i} ${i}`,xmlns:"http://www.w3.org/2000/svg"};return p.createElement("svg",u,...n.map(d=>p.createElement("path",{d,fill:u.fill})))});return o.displayName=e,o},De=Ae("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function je({onNewThread:e,onOpenInMainWindow:t,onClose:n}){const s=P(),i=s.formatMessage({id:"cHkwhd",defaultMessage:"New chat"}),o=s.formatMessage({id:"BzpJ40",defaultMessage:"Open in Main Window"}),r=s.formatMessage({id:"63wWYx",defaultMessage:"Close"});return f.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex h-[32px] w-full justify-between",children:[f.jsx(b,{label:i,sideOffset:4,side:"bottom",children:f.jsx(j,{onClick:e,"aria-label":i,children:f.jsx(Q,{})})}),t&&f.jsx(b,{label:o,sideOffset:4,side:"bottom",className:"ml-auto",children:f.jsx(j,{onClick:t,"aria-label":o,children:f.jsx(Y,{})})}),f.jsx(b,{label:r,sideOffset:4,side:"bottom",children:f.jsx(We,{onClick:n,"aria-label":r,children:f.jsx(De,{})})})]})}const j=W.button`flex h-full w-[46px] cursor-default items-center justify-center hover:bg-gray-200 active:bg-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-700`,We=W.button`flex h-full w-[46px] cursor-default items-center justify-center hover:bg-red-500 hover:text-white active:bg-red-400 active:text-white`;function Le({onNewThread:e,onOpenInMainWindow:t,onClose:n,children:s}){const i=p.useRef(null);return f.jsxs("div",{className:"flex h-full w-full flex-col pt-[32px]",ref:i,children:[f.jsx(je,{onNewThread:e,onOpenInMainWindow:t,onClose:n}),s]})}function Me({clientThreadId:e}){const t=S.useStore(),n=q(),s=Z(o=>J.resolveThreadId(e,o)),i=B();return p.useEffect(()=>{if(!i)return;function o(l){l.key==="Escape"&&!l.shiftKey&&!l.ctrlKey&&!l.metaKey&&!l.altKey&&S.hide()}function r(){i&&z()&&S.hide()}return i.document.addEventListener("keydown",o),i.addEventListener("blur",r),()=>{i.document.removeEventListener("keydown",o),i.removeEventListener("blur",r)}},[i]),f.jsx(Le,{onNewThread:()=>{t.newThread(!0)},onOpenInMainWindow:s!==e||!ee(e)?()=>{n(`/c/${e}`),t.newThread(!0),S.focusMainWindow()}:void 0,onClose:()=>{S.hide()},children:f.jsx(H,{clientThreadId:e})})}function xt(){const{value:e}=K("3653083604"),{isOpen:t}=G(),n=V(r=>r.isVoiceModeActive),s=e&&!t&&!n,{clientThreadId:i}=S.useState(),o=S.useStore();if(p.useEffect(()=>{s&&!i&&o.newThread(!1)},[s,i,o]),!(!s||!i))return f.jsx($,{features:`${U}=${k.COMPANION}`,children:f.jsx(Me,{clientThreadId:i})})}export{xt as DesktopCompanionWindowController};
//# sourceMappingURL=i5ylvg5xl8do19ca.js.map
