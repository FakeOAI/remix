const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dm6m4k4vfgrz3vx2.js","assets/f1tbg9vupz7s4vaz.js","assets/ku9ixf6u9z228exb.js","assets/root-knsezumx.css"])))=>i.map(i=>d[i]);
import{dN as u,h as f,j as c,aD as b,bw as l,r}from"./f1tbg9vupz7s4vaz.js";import{d as S,a as y,T as w}from"./oixhn1b8fi6yhijp.js";import{d as D}from"./eyfm2skil9fzhvo1.js";async function m(e){const t=await b(()=>import("./dm6m4k4vfgrz3vx2.js").then(a=>a.i),__vite__mapDeps([0,1,2,3]));if(l!=null&&e?.startsWith(l))return!0;try{return t.get(new URL(e??"").hostname)==="openai.com"}catch{return!1}}function g(e,t){const a=u();return f({queryKey:["safe-url",{serverThreadId:e,url:t,isHistoryAndTrainingDisabled:a}],queryFn:async()=>await m(t)||w.getThreadSafeUrls(e)?.includes(t)?{safe:!0}:c.getConversationSafeUrls(e,t,a),enabled:e!=null&&t!=null})}function C(e,t,a=!0){const o=S(s=>e!=null&&t!=null&&y.isThreadUrlSafe(e,t,s)),{data:{safe:i}={}}=g(e,o?void 0:t);return o||i||!a?t:void 0}function E(e,t){const[a,o]=r.useState(void 0),[i]=r.useState(()=>D(s=>{o(s)},t));return r.useEffect(()=>{i(e)},[i,e]),a===e?e:void 0}function F(e,t){const a=u(),o=S(s=>e==null?[]:y.getThread(e,s)?.safeUrls??[]),{data:i=[]}=f({queryKey:["safe-urls",e,t,a,o],queryFn:async()=>{const s=o.filter(n=>t.includes(n)),d=t.filter(n=>!s.includes(n)),p=(await Promise.allSettled(d.map(async n=>{if(await m(n))return n;if(e==null)return null;try{return(await c.getConversationSafeUrls(e,n,a)).safe?n:null}catch{return null}}))).map(n=>n.status==="fulfilled"?n.value:null).filter(n=>n!=null);return s.concat(p)},enabled:e!=null&&t.length>0});return i}export{E as a,C as b,F as u};
//# sourceMappingURL=n1ugpxrluw7f2lu7.js.map
