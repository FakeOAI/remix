const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kzbhlu8veib077gj.js","assets/sj4egp330zr3hymf.js","assets/root-gxxjueqp.css","assets/ca559fjqljd18hab.js","assets/kg4srka8y24rfx9h.js","assets/ohfy421oyz5q6uux.js","assets/conversation-small-ile61fj8.css","assets/muvy4qzgls86chgu.js","assets/d422vlbtt271j9aw.js","assets/fc93tduihgcgsfo0.js","assets/jfv0jheher0tsah5.js","assets/oytupubrd6tpy6xv.js","assets/gthr5bsilbom1ilp.js","assets/j4liuzvdsj8mj1zq.js"])))=>i.map(i=>d[i]);
import{b3 as q,b4 as Z,m as e,eJ as ae,L as E,r as u,a5 as J,bs as L,K as ie,ef as oe,ee as ke,bp as w,cT as re,aE as y,N as R,V as Ce,aw as Ie,d8 as Ne,cy as Me,dq as ze,bd as ce,hx as j,hy as Fe,c0 as Oe,c1 as Te,gq as we,e4 as P,a9 as Ee,b6 as _e}from"./sj4egp330zr3hymf.js";import{h0 as Ge,k8 as U,bQ as Le,cd as Pe,gZ as le,iM as Ae,f_ as Re,dA as W,dy as Be,aR as de,b7 as ee,cR as He,k9 as O,eN as De,ka as Ue,kb as We,eT as Ke,dB as me,aO as Ve,kc as qe,dC as Ze,ch as ue,kd as Je,fg as Qe,U as xe,fS as Ye,eO as Xe,ke as $e,cv as es,cw as ss,cr as Q,cZ as ts,aX as ns,kf as as,kg as F,cq as Y,I as b,cJ as fe,dD as is,H as he,dE as os,cy as ge,kh as rs,K as cs,ki as ls,kj as ds,kk as ms,kl as se,eq as us,km as X,aD as A,kn as pe,ko as xs,kp as K,kq as T,cD as fs,er as hs,bs as gs,kr as ps,aE as bs,bV as Ss,ks as vs,z as js,kt as ys,E as ks,bO as Cs,ku as Is,kv as be,J as Ns,kw as Ms,ca as zs}from"./ohfy421oyz5q6uux.js";import{u as _,d as Fs}from"./muvy4qzgls86chgu.js";import{m as V}from"./d422vlbtt271j9aw.js";import{U as Os,P as Ts}from"./fc93tduihgcgsfo0.js";const ws=q(()=>Z(()=>import("./kzbhlu8veib077gj.js"),__vite__mapDeps([0,1,2,3])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(Se,{color:s})}),Es={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function Se({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:e.jsx(Ge,{className:"h-3/4 w-3/4",style:{color:s}})})}function _s({gizmo:s,historyDisabled:n,section:t,onClick:c,isActive:a,hideOverflowMenu:l=!1,elementRef:i}){const{clientThreadId:x}=_(),f=ae(x),h=E(),[d,S]=u.useState(!1),[r,o]=u.useState(!1),[m,p]=u.useState(!1),g=s.gizmo.id,C=U.useStore(),I=U.useState(M=>U.selectFolderState(M,g)),N=J(),B=!!s.gizmo.tags?.includes(Le.FirstParty),{items:$=[],hasNextPage:G}=Pe(s.gizmo.id),v={items:$},k=le(g),H=Ae(g);let D=!1;a&&k&&!(I==="open"&&f)&&(D=!0),u.useEffect(()=>{I!=="open"&&a&&f&&C.expandProject(g)},[a,f,C,g]);let z;if(s!=null)z=s.gizmo.display.name||Re;else{if(N==null)return null;n?z=h.formatMessage(W.clearChat):N.canInteractWithGizmos()?z=Ze:z=h.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(V.div,{whileTap:{scale:.98},onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},children:e.jsx(Be,{loggingGizmoId:s?.gizmo.id??"primary",href:de(s),onClick:c,showActiveIndicator:D,icon:k&&v&&v.items.length>0?e.jsx(L,{side:"top",sideOffset:4,delayDuration:600,label:I==="open"?h.formatMessage(ee.hideChatsForProjectTooltip):h.formatMessage(ee.showChatsForProjectTooltip),children:e.jsx("button",{onClick:M=>{M.preventDefault(),I==="open"?C.collapseProject(g):C.expandProject(g)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(ws,{isOpen:I==="open",isHovered:m,color:H||null})})})})}):k?e.jsx(Se,{color:H}):e.jsx(He,{isFirstParty:B,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:d,label:z,rightIcon:t===O.Workspace&&e.jsx(L,{side:"right",label:h.formatMessage(te.workspaceRecommended,{workspace_name:N?.name??"Your Workspace"}),children:e.jsx(De,{className:"icon-md text-token-text-secondary",alt:h.formatMessage(te.workspaceRecommended,{workspace_name:N?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(r||d)&&!l&&(k?e.jsx("div",{className:"text-token-text-tertiary",onClick:M=>{M.preventDefault()},children:e.jsx(Ue,{gizmo:s,isOpen:d,setIsOpen:S})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:M=>{M.preventDefault()},children:e.jsx(We,{gizmo:s,isOpen:d,setIsOpen:S,section:t})})),!k&&!l&&e.jsx(L,{side:"right",label:h.formatMessage(n?W.clearChat:W.newChat),className:"flex items-center",children:e.jsx("button",{className:d?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(Ke,{className:"icon-md"}):e.jsx(me,{className:"icon-md"})})})]}),elementRef:i})}),e.jsx(Ve,{initial:!1,children:k&&I==="open"&&v&&v.items.length>0&&e.jsx(V.div,{initial:"closed",animate:"open",exit:"closed",variants:Es,className:"overflow-hidden",layout:!0,children:e.jsx(qe,{gizmoResource:s,serverThreadId:f,isOnProjectPage:D,conversations:v.items,hasNextPage:G})},"nested-conversations")})]})}const te=ie({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function Gs(s){const{clientThreadId:n}=_(),t=u.useRef(s);t.current=s;const c=u.useRef(null);u.useEffect(()=>{const a=c.current;return c.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function ve(){const s=E(),n=ue(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(Je,{children:e.jsx(V.div,{whileTap:{scale:.98},children:e.jsx(oe,{to:Qe(),onClick:()=>{n.activeSidebar==="popover-nav"&&xe.setActiveSidebar(!1)},children:e.jsx(Ye,{icon:Xe,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const Ls=2;function je({gizmos:s,isGizmoFlyout:n,isLoaded:t,maxToShowOnLoad:c=4,isScreenArch:a,showAllSidebarItems:l}){const i=as(s,o=>o.flair.kind),x=[...(i[F.Workspace]?.map(({resource:o})=>({gizmo:o,section:O.Workspace}))??[]).slice(0,3),...i[F.FirstParty]?.map(({resource:o})=>({gizmo:o,section:O.Keep}))??[],...i[F.SidebarKeep]?.map(({resource:o})=>({gizmo:o,section:O.Keep}))??[]],f=i[F.Recent]?.slice(0,a||t?i[F.Recent]?.length:Ls).map(({resource:o})=>({gizmo:o,section:O.Recents}))??[],h=f.length,d=x.length,S=a?h>0:s.length>c;let r=[];return n&&a?r=[...x,...f]:!n&&a?r=x:(r=[...x,...f],l||(r.length>c&&d>c?r=r.slice(0,d):r.length>c&&(r=r.slice(0,c)))),{listItems:r,itemsLeft:s.length-r.length,needsToCollapseItems:S,total:s.length}}function ye({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:c=!1}){const a=u.useRef(!1),l=!t,i=ke(),[x,f]=u.useState(!1),h=ue(m=>!$e.isGptListCollapsed(m)),{listItems:d,needsToCollapseItems:S,itemsLeft:r}=je({gizmos:s,isGizmoFlyout:l,isLoaded:x,maxToShowOnLoad:t,isScreenArch:i,showAllSidebarItems:h});u.useEffect(()=>{x||f(!0)},[x]),u.useEffect(()=>{d.length>0&&!a.current&&(es({namespace:ss.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),a.current=!0)},[d]);function o(m,p){const g=e.jsx(_s,{gizmo:m,isActive:m.gizmo.id===n,section:p,hideOverflowMenu:c},m.gizmo.id);return i?e.jsx("li",{children:g}):g}return e.jsxs("div",{children:[d.map(({gizmo:m,section:p},g)=>e.jsxs(u.Fragment,{children:[g>1&&p!==d[g-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),o(m,p)]},g)),!i&&S?e.jsxs("button",{onClick:xe.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(Q,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:h?e.jsxs(e.Fragment,{children:[e.jsx(w,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(ts,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:r}}),e.jsx(ns,{className:"icon-xs"})]})})]}):null,!i&&e.jsx(ve,{})]})}function Ps({currentGizmoId:s,gizmos:n,onClick:t}){const{isSidebarFlyoutOpen:c,onSidebarFlyoutOpenChange:a}=Y(),l=c(b.Gizmo),i=fe();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(re,{onOpenChange:x=>a(b.Gizmo,x),side:i?"bottom":"right",sideOffset:4,open:l,contentAlign:"end",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",l&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Q,{className:y("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(w,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(R,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(ye,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function As({currentGizmoId:s}){const{data:{gizmos:n}={}}=is();let t=n;he()&&(t=n?.filter(l=>!os(l.resource)));const{needsToCollapseItems:a}=je({gizmos:t??[],isLoaded:!1,isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(ge,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(w,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(ve,{}),e.jsx(ye,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:rs}),a&&e.jsx(R,{children:e.jsx(Ps,{currentGizmoId:s,gizmos:t??[]})})]})})}function Rs({onClick:s}){const{clientThreadId:n}=_(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:c}=Y(),a=fe(),l=t(b.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(re,{onOpenChange:i=>{i&&Ce.logEvent("chatgpt_web_more_conversation_history_opened"),c(b.Conversation,i)},side:a?"bottom":"right",sideOffset:4,open:l,contentAlign:"start",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",l&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(Q,{className:y("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(w,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(R,{children:e.jsx(cs,{activeId:n,hideOverflowMenu:!0})})})})})}function Bs({clientThreadId:s}){const n=ae(s),t=Ie(),{isCollapsible:c,recentConversationLimit:a}=ls(),l={recentConversationLimit:a},i=u.useRef(!1),x=!0,{conversations:f,data:h,isLoading:d,isError:S,recents:r,refetch:o}=ds(l),[m,p]=u.useState(!0),g=u.useCallback(function(k){k===void 0&&p(!1),o({cancelRefetch:!0})},[o,p]),C=t?void 0:n,I=f.length===0,N=S||h===void 0&&!d&&i.current,B=!N&&(h===void 0||d);h===void 0&&!d&&!i.current&&(i.current=!0,g(!0));const G=f.find(v=>v.id===C)??null;return u.useMemo(()=>{Ne.publish({kind:"refreshHistory",conversations:f})},[f]),e.jsxs(e.Fragment,{children:[N&&e.jsx(ms,{showRetry:m,refetch:g}),!I&&e.jsxs(ge,{header:r.label,isLastInGroup:!0,children:[r.items.map((v,k)=>e.jsx(se,{item:v,isActive:v.id===C,testId:`history-item-${k}`},v.id)),G&&!r.items.some(v=>v.id===C)&&e.jsx(se,{item:G,isActive:!0})]}),B&&e.jsx(Me,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),c&&e.jsx(R,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!x,className:y(!x),children:e.jsx(Rs,{})})})})]})}const ne=q(()=>Z(()=>import("./kg4srka8y24rfx9h.js"),__vite__mapDeps([4,1,2,5,6,7,8,9])).then(s=>s.SnorlaxSidebarList));function Hs({clientThreadId:s}){const n=J(),t=ze(s),{isUnauthenticated:c}=ce(),a=he();return c?null:e.jsxs("div",{className:y(j.screenContent),children:[a&&n?.canInteractWithGizmos()&&ne?e.jsx(ne,{currentGizmoId:t}):null,null,e.jsx(Bs,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(As,{currentGizmoId:t}):null]})}function Ds(){const s=J(),n=s?.data==null,{isUnauthenticated:t}=ce(),{openSettings:c}=us(),a=Fe(),[l]=u.useState(()=>{const o=Oe.getCookie(Te.Workspace);return typeof o=="string"&&o!==we}),i=E(),{store:x,actions:f}=X(),h=x(o=>o.mode),[d,S]=u.useState(!0);if(u.useEffect(()=>{S(!1)},[]),!s&&d||l&&n)return null;const r=t?e.jsx(Os,{}):e.jsx(Fs,{onClickSettings:()=>c()});return e.jsxs(A,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[r,a.get("include_floating_state",!1)&&e.jsx("div",{className:j.togglePinWrapper,children:e.jsx(pe,{tooltipSideOffset:14,className:j.pinSidebarAction,icon:e.jsx(xs,{}),onActivate:o=>{o.preventDefault(),o.persist(),K.togglePinSidebar(o,f,h===T.Floating?T.Pinned:T.Floating)},label:h===T.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:P.FloatingOrPinned})})]})}function Us(){return e.jsx(A,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Ts,{})})}function Ws(){return e.jsxs(fs,{className:y(j.screenTrailingBarContainer),children:[e.jsx(hs,{}),e.jsx(Us,{}),e.jsx(Ds,{})]})}function Ks({onNewThread:s}){const n=E(),t=Ee(),{clientThreadId:c}=_(),a=gs(c),l=a?ps(a):void 0,i=l?de(l):void 0,x=le(l?.gizmo.id),f=n.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return e.jsx(L,{label:f,children:e.jsx(oe,{to:i??"/",onClick:async h=>{h.preventDefault(),!x&&i!=null?bs(t,i):s()},tabIndex:-1,children:e.jsx(Ss,{icon:e.jsx(me,{className:j.sidebarIcon}),className:j.searchAction,label:f,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const Vs=q(()=>Z(()=>import("./jfv0jheher0tsah5.js"),__vite__mapDeps([10,1,2,5,6,11,12,13])).then(s=>s.FannyPackIconButton));function qs({onNewThread:s}){const n=E(),t=u.useRef(null),{store:c,actions:a}=X(),l=c(m=>m.isSidebarOpen),i=c(m=>m.mode),{isSidebarFlyoutOpen:x}=Y(),f=x(b.Conversation),h=x(b.Gizmo),d=x(b.Snorlax),S=l&&!f&&!h&&!d;function r(){be(t.current)&&document.getElementById(P.OpenOrClosed)?.click()}vs({checkElement:m=>m?.tagName==="NAV",enabled:S,onLightDismiss:r});const{isFannyPackEnabled:o}=js();return _e(),e.jsxs(e.Fragment,{children:[e.jsx(A,{type:"primary",className:y(j.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(pe,{className:y(j.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:m=>{K.closeSidebar(m,a,i)},onActivate:m=>{K.closeSidebar(m,a,i)},icon:e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:y(j.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(ks,{className:y(j.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(Zs.closeSidebar),htmlFor:P.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,o&&e.jsx(Cs,{children:e.jsx(Vs,{className:j.searchAction,icon:e.jsx(Is,{className:j.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx(Ks,{onNewThread:s})]})]})}),e.jsx(A,{type:"primary",className:j.bucketBar,disableSizeTracking:!0,children:" "})]})}const Zs=ie({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function et(){const{clientThreadId:s,onNewThread:n}=_(),[t,c]=u.useState(!1),[a,l]=u.useState(!1),[i,x]=u.useState(!1),{store:f}=X(),h=u.useCallback(r=>r===b.Conversation?t:r===b.Gizmo?a:r===b.Snorlax?i:!1,[t,a,i]),d=u.useCallback((r,o)=>{const m=p=>{r===b.Conversation?c(p):r===b.Gizmo?l(p):r===b.Snorlax&&x(p)};o?m(!0):setTimeout(()=>{m(!1)},100)},[]),S=u.useRef(null);return Gs((r,o)=>{d(b.Conversation,!1),d(b.Gizmo,!1),d(b.Snorlax,!1);const m=window.matchMedia("(max-width: 700px)").matches,p=be(S.current);o!=null&&m&&f.getState().isSidebarOpen&&(f.getState().mode===T.Floating||p)&&setTimeout(()=>{document.getElementById(P.OpenOrClosed)?.click()},100)}),e.jsxs(Ns,{value:{isSidebarFlyoutOpen:h,onSidebarFlyoutOpenChange:d},children:[e.jsx(Ms,{}),e.jsx(zs,{anchor:"vertical",className:y(j.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(qs,{onNewThread:n}),ref:S,trackLeading:!0,trailing:e.jsx(Ws,{}),children:e.jsx(Hs,{clientThreadId:s})})]})}export{et as C,_s as G,ye as a};
//# sourceMappingURL=ma0s76orva63ppzy.js.map
