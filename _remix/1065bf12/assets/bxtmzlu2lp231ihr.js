import{r as a,c3 as Q,u as O,m as e,cR as Z,L as T,a5 as X,bp as I,bD as J,f5 as k,eJ as $,P as H,e as K,bV as ee,cy as R,bs as se}from"./sj4egp330zr3hymf.js";import{S as te}from"./grcsufjty2yi7w64.js";import{i8 as M,i9 as g,d1 as U,aO as q,eP as ae,i_ as oe,g1 as ne,i$ as ie,j0 as le,j1 as W,j2 as ce,ia as re,j3 as de}from"./ohfy421oyz5q6uux.js";import{j as ue,u as me,d as fe}from"./gh6m1nq83mu1qt9p.js";import{V as he}from"./i2fm373lm85gghkx.js";import{m as E}from"./d422vlbtt271j9aw.js";import"./mxdadxhyvv6qdl6d.js";import"./ex1x3ei3e1p4cu2q.js";import"./dr4jl4ly38rp4ncz.js";import"./c4bxzbp1808foto4.js";const xe=s=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...s},a.createElement("path",{d:"M8.94467 2.79115C9.33616 2.40159 9.96932 2.40316 10.3589 2.79465L11.9995 4.44338L13.64 2.79465C14.0296 2.40316 14.6627 2.40159 15.0542 2.79114C15.4457 3.18069 15.4473 3.81385 15.0577 4.20535L12.9995 6.27387V10.2643L16.431 8.27321L17.1843 5.44759C17.3266 4.91394 17.8746 4.59667 18.4082 4.73894C18.9418 4.88121 19.2591 5.42915 19.1168 5.9628L18.5139 8.22431L20.76 8.82916C21.2933 8.97277 21.6092 9.5215 21.4656 10.0548C21.322 10.5881 20.7733 10.904 20.24 10.7604L17.4326 10.0044L13.9926 12.0003L17.4314 13.9956L20.2388 13.2396C20.7721 13.096 21.3209 13.4119 21.4645 13.9452C21.6081 14.4784 21.2922 15.0272 20.7589 15.1708L18.5127 15.7757L19.1157 18.0372C19.258 18.5708 18.9407 19.1188 18.4071 19.2611C17.8735 19.4033 17.3255 19.0861 17.1832 18.5524L16.4298 15.7268L12.9995 13.7364V17.7261L15.0577 19.7947C15.4473 20.1861 15.4457 20.8193 15.0542 21.2089C14.6627 21.5984 14.0296 21.5968 13.64 21.2053L11.9995 19.5566L10.3589 21.2054C9.96932 21.5968 9.33616 21.5984 8.94467 21.2089C8.55318 20.8193 8.55161 20.1861 8.94117 19.7946L10.9995 17.7261V13.737L7.57021 15.7268L6.81684 18.5524C6.67455 19.086 6.12661 19.4033 5.59297 19.261C5.05933 19.1187 4.74207 18.5707 4.88435 18.0371L5.48731 15.7757L3.24116 15.1708C2.70787 15.0272 2.39198 14.4784 2.53559 13.9452C2.6792 13.4119 3.22793 13.096 3.76122 13.2396L6.56868 13.9956L10.0075 12.0003L6.56749 10.0044L3.76003 10.7604C3.22674 10.904 2.67801 10.5881 2.5344 10.0548C2.3908 9.52151 2.7067 8.97278 3.23998 8.82918L5.48613 8.22433L4.88317 5.96284C4.74088 5.4292 5.05814 4.88126 5.59179 4.73898C6.12543 4.59669 6.67338 4.91396 6.81566 5.4476L7.56903 8.27322L10.9995 10.2637V6.27388L8.94117 4.20535C8.55161 3.81387 8.55318 3.1807 8.94467 2.79115Z",fill:"white"}));function ge(){const s=M(g.hasSeenStrawSelection),o=M(U()?g.hasSeenElectronComposerStraw:g.hasSeenWebComposerStraw),{layer:t}=Q("871635014"),d=t.get("snowflake_composer_entry_point",!1),n=O("3419264204").value,i=!s.isLoading&&s.eligible&&!o.isLoading&&o.eligible&&(d||n),[u,p]=a.useState(!1),[r,l]=a.useState(!1),[m,f]=a.useState(""),[N,v]=a.useState(!1),[C,j]=a.useState(!1);return{shouldShowComposerSnowflake:i,composerStrawAnnouncement:o,showSnowflake:u,setShowSnowflake:p,enableFadeInBoldIcon:r,setEnableFadeInBoldIcon:l,initialVoiceName:m,setInitialVoiceName:f,showVoicePicker:N,setShowVoicePicker:v,hasShownSnowflake:C,setHasShownSnowflake:j}}const pe=s=>a.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 4C7.58172 4 4 7.58172 4 12C4 14.2569 4.93453 16.2954 6.43772 17.7499C7.71622 16.0791 9.73141 15 12 15C14.2686 15 16.2838 16.0791 17.5623 17.7499C19.0655 16.2954 20 14.2569 20 12C20 7.58172 16.4183 4 12 4ZM15.9632 18.9509C15.0483 17.7635 13.6126 17 12 17C10.3874 17 8.9517 17.7635 8.03677 18.9509C9.20512 19.6185 10.558 20 12 20C13.442 20 14.7949 19.6185 15.9632 18.9509ZM2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12ZM12 8C10.8954 8 10 8.89543 10 10C10 11.1046 10.8954 12 12 12C13.1046 12 14 11.1046 14 10C14 8.89543 13.1046 8 12 8ZM8 10C8 7.79086 9.79086 6 12 6C14.2091 6 16 7.79086 16 10C16 12.2091 14.2091 14 12 14C9.79086 14 8 12.2091 8 10Z",fill:"currentColor"})),ve=s=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:32,height:33,viewBox:"0 0 32 33",fill:"none",...s},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2948 4.65537C21.9454 5.00233 22.1915 5.81099 21.8445 6.46155L17.5583 14.4983H19.3333C20.0706 14.4983 20.6683 15.096 20.6683 15.8333V19.5C20.6683 20.4195 21.4137 21.165 22.3333 21.165H26.6666C27.4039 21.165 28.0016 21.7627 28.0016 22.5C28.0016 23.2373 27.4039 23.835 26.6666 23.835H22.3333C19.9391 23.835 17.9983 21.8941 17.9983 19.5V17.1683H16.9999C15.2372 17.1683 14.1101 15.2898 14.9396 13.7345L19.4887 5.20508C19.8356 4.55452 20.6443 4.3084 21.2948 4.65537ZM17.2955 14.991L17.2958 14.9905L17.2955 14.991ZM5.41956 15.5935C6.15585 15.6321 6.72145 16.2602 6.68286 16.9965C6.48941 20.6879 8.19571 24.0398 10.9531 26.1024C11.5435 26.544 11.6641 27.3806 11.2225 27.971C10.7808 28.5614 9.94419 28.682 9.35379 28.2404C5.91339 25.6669 3.77448 21.4751 4.01652 16.8568C4.05511 16.1205 4.68327 15.5549 5.41956 15.5935ZM10.7456 15.8726C11.4819 15.9112 12.0475 16.5393 12.0089 17.2756C11.9122 19.1204 12.764 20.7959 14.1441 21.8283C14.7345 22.2699 14.8551 23.1065 14.4135 23.6969C13.9718 24.2873 13.1352 24.4079 12.5448 23.9663C10.4817 22.423 9.19729 19.9076 9.34255 17.1359C9.38113 16.3996 10.0093 15.834 10.7456 15.8726Z",fill:"currentColor"}));function z(s){return e.jsx(Z,{isOpen:s.isOpen,onClose:s.onClose,type:"success",size:"fullscreen",children:e.jsx(q,{children:e.jsx(E.div,{children:e.jsx(he,{conversationId:s.conversationId,onClose:s.onClose,cameFromNux:s.cameFromNux,initialVoiceName:s.initialVoiceName})})})})}function Ce({conversationId:s,initialVoiceName:o}){const t=T(),d=M(g.hasSeenAdvancedVoiceNuxFullPage),n=X(),i=n?.isPlus()??!1,u=n?.isEnterprisey()??!1,p=!i&&!u,r="https://help.openai.com/en/articles/8400625-voice-mode-faq#h_c5d6fe534b",[l,m]=a.useState(!1),[f,N]=a.useState(!1),[v,C]=a.useState(!1),[j,L]=a.useState(!0);a.useEffect(()=>{requestAnimationFrame(()=>N(!0))},[]);const A=()=>{C(!0),k.voiceAdvancedDisclosureAccepted.click(),m(!0),setTimeout(async()=>{L(!1)},ie)},h=()=>{d.markAsViewed()},x=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ae,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"TFfx7w",defaultMessage:"Natural conversations"})}),e.jsx("p",{className:"text-token-text-secondary",children:t.formatMessage({id:"qR+v5Q",defaultMessage:"Senses and responds to interruptions, humor, and more."})})]})]}),V=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(oe,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"br49Gd",defaultMessage:"Free monthly preview"})}),e.jsx("p",{className:"text-token-text-secondary",children:t.formatMessage({id:"LhOfga",defaultMessage:"Use advanced voice for a short period each month."})})]})]}),S=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ve,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"84QiAT",defaultMessage:"Multiple voices"})}),e.jsx("p",{className:"text-token-text-secondary",children:t.formatMessage({id:"yYgwEW",defaultMessage:"Offers an expanded set of voices to choose from."})})]})]}),y=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(pe,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"M/x7uJ",defaultMessage:"Personalized to you"})}),e.jsx("p",{className:"text-token-text-secondary",children:t.formatMessage({id:"QZXq7u",defaultMessage:"Can use memory and custom instructions to shape responses."})})]})]}),b=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ne,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:t.formatMessage({id:"e6n5kr",defaultMessage:"Youâ€™re in control"})}),e.jsx("p",{className:"text-token-text-secondary",children:u?e.jsx(I,{id:"4szv66",defaultMessage:"Your audio recordings are saved but not used for training. Learn how to <link>manage recordings</link>.",values:{link:c=>e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"underline",children:c})}}):e.jsx(I,{id:"M/k4S5",defaultMessage:"Audio recordings are saved, and you can delete them at any time. Learn how to <link>manage recordings</link>.",values:{link:c=>e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"underline",children:c})}})})]})]}),F=p?[V,x,y,b]:[x,S,y,b];return e.jsxs(e.Fragment,{children:[e.jsx(z,{isOpen:l,onClose:h,conversationId:s,cameFromNux:!0,initialVoiceName:o}),e.jsx(Z,{isOpen:j,onClose:h,type:"success",size:"fullscreen",className:`bg-white transition-opacity duration-300 dark:bg-gray-800 ${f&&!v?"opacity-100":"opacity-0"}`,showOverlayBackground:!1,children:e.jsxs("div",{className:"mx-auto flex h-full w-full max-w-lg flex-col items-center justify-center px-4 text-center",children:[e.jsx("h1",{className:"mb-9 text-2xl font-semibold text-token-text-primary",children:p?t.formatMessage({id:"XV3+9K",defaultMessage:"Sneak a peek at advanced voice mode"}):t.formatMessage({id:"9YnxDX",defaultMessage:"Say hello to advanced voice mode"})}),e.jsx("div",{className:"mb-9 space-y-5",children:F.map((c,_)=>e.jsx("div",{children:c},_))}),e.jsxs("p",{className:"mb-9 text-sm text-token-text-primary",children:[t.formatMessage({id:"vtcf3s",defaultMessage:"Voice mode can make mistakes â€” check important info."}),e.jsx("br",{}),t.formatMessage({id:"4nw2S2",defaultMessage:"Usage limits may change."})]}),e.jsx(J,{className:"rounded-full bg-token-text-primary px-20 py-3 font-semibold",onClick:A,children:e.jsx(I,{id:"ppi93b",defaultMessage:"Continue"})})]})})]})}const Se={default_voice_mode:"advanced",modes:[{mode:"advanced",default_model_slug:de,disabled_mode_metadata:null,description:"Advanced Voice Mode",display_name:"Advanced Voice",info_message:{actions:[],buttons:[],hint:"Advanced Voice",message_markdown:"Advanced Voice",message:"Advanced Voice",title:"Advanced Voice",display_at_launch:!1},disclosure_message:null,resets_after:"None"}],chatreq_token:"default"};function we(){const s=O("2775516364").value,o=M(g.hasSeenAdvancedVoiceNuxFullPage);return!o.isLoading&&o.eligible&&s}function ke(){const s=O("562926978").value,o=U()?g.hasSeenAdvancedVoiceWebNuxTooltip:g.hasSeenAdvancedVoiceRealWebNuxTooltip,t=M(o);return{shouldShowTooltipNux:!t.isLoading&&t.eligible&&s,tooltipAnnouncement:t,announcementKey:o}}function Pe({clientThreadId:s,gizmoId:o}){const t=$(s),n=T().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),[i,u]=a.useState(!1),[p,r]=a.useState(!1),l=we(),{shouldShowTooltipNux:m,tooltipAnnouncement:f,announcementKey:N}=ke(),v=ue(),C=t??s,j=me(w=>w.isVoiceModeActive);a.useEffect(()=>{l||r(!1)},[l]);const{shouldShowComposerSnowflake:L,composerStrawAnnouncement:A,showSnowflake:h,setShowSnowflake:x,enableFadeInBoldIcon:V,setEnableFadeInBoldIcon:S,initialVoiceName:y,setInitialVoiceName:b,showVoicePicker:F,setShowVoicePicker:c,hasShownSnowflake:_,setHasShownSnowflake:Y}=ge(),G=a.useCallback(async()=>{if(H.logEvent(K.composerSpeechButtonClicked),m&&f.markAsViewed(),h)if(b(le),k.strawComposerSnowflake.click(),l){k.voiceAdvancedDisclosureShown.success(),r(!0);return}else{c(!0);return}if(l){k.voiceAdvancedDisclosureShown.success(),r(!0);return}let w;u(!0);try{w=await v({conversation_id:t??null,requested_voice_mode:"advanced",gizmo_id:o??null},"composer_speech_button")}finally{u(!1)}const P=w??Se;fe.setState(D=>{D.voiceStatus=P,D.isVoiceModeActive=!0})},[m,h,l,f,b,c,v,t,o]);a.useEffect(()=>{if(L&&!_){const w=setTimeout(()=>{x(!0),S(!1),k.strawComposerSnowflake.success()},W),P=setTimeout(()=>{x(!1),S(!0),A.markAsViewed()},W+ce);return()=>{clearTimeout(w),clearTimeout(P)}}else S(!1),x(!1)},[A,_,S,x,L]);const B=ee();return e.jsx(e.Fragment,{children:p?e.jsx(Ce,{conversationId:C,initialVoiceName:y}):F?e.jsx(z,{isOpen:F,onClose:()=>{c(!1),Y(!0)},conversationId:C,cameFromNux:!0,initialVoiceName:y}):e.jsx("div",{className:"relative h-8 w-8",children:e.jsx(Ne,{showNuxTooltip:m,tooltipAnnouncement:f,announcementKey:N,children:e.jsx(E.div,{initial:{background:B?"linear-gradient(180deg, #FFF 0%, #FFF 100%)":"linear-gradient(180deg, #000 0%, #000 100%)"},animate:{background:h?"linear-gradient(180deg, #377FF6 0%, #B4DAFF 100%)":B?"linear-gradient(180deg, #FFF 0%, #FFF 100%)":"linear-gradient(180deg, #000 0%, #000 100%)"},transition:{duration:.5,ease:"easeInOut"},className:"flex h-full w-full items-center justify-center rounded-full",children:e.jsx("button",{"data-testid":"composer-speech-button",onClick:G,"aria-label":n,disabled:j||i,className:"relative flex h-8 w-8 items-center justify-center rounded-full text-white transition-colors hover:opacity-70 focus-visible:outline-none focus-visible:outline-black disabled:text-[#f4f4f4] disabled:opacity-30 dark:text-black",children:e.jsx("div",{className:"relative h-full w-full",children:e.jsx(q,{mode:"wait",children:h?e.jsx(E.div,{initial:{opacity:0,scale:.5,rotate:0},animate:{opacity:1,scale:1,rotate:360},exit:{opacity:0,scale:.5},transition:{opacity:{duration:.5},scale:{duration:.3,ease:"easeInOut"},rotate:{duration:24,ease:"linear"}},className:"absolute inset-0 flex items-center justify-center",children:i?e.jsx(R,{}):e.jsx(xe,{})},"snowflake"):e.jsx(E.div,{initial:V?{opacity:0,scale:.5}:{},animate:V?{opacity:1,scale:1}:{},exit:{opacity:0,scale:.5},transition:{opacity:{duration:.5},scale:{duration:.3,ease:"easeInOut"}},className:"absolute inset-0 flex items-center justify-center",children:i?e.jsx(R,{}):e.jsx(te,{})},"voiceBoldIcon")})})})})})})})}function Ne({children:s,showNuxTooltip:o,tooltipAnnouncement:t,announcementKey:d}){const n=T();return o?e.jsx(re,{announcementKey:d,theme:"bright",side:"top",show:!0,badge:"new",dismissOnOutsideClick:!0,title:n.formatMessage({id:"DQ6CAP",defaultMessage:"Try advanced voice mode"}),contentAlign:"center",onDismiss:t.markAsViewed,sideOffset:2,children:e.jsx("div",{children:s})}):e.jsx(se,{sideOffset:4,label:n.formatMessage({id:"i4P/ix",defaultMessage:"Use voice mode"}),side:"top",onOpenChange:i=>{i&&(H.logEvent(K.composerSpeechButtonHovered),k.composerSpeechButton.hover())},children:s})}export{Pe as ComposerSpeechButton};
//# sourceMappingURL=bxtmzlu2lp231ihr.js.map
