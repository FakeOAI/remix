import{g as W,gI as _,r as b,m as o,aE as u,L as H,bs as R}from"./sj4egp330zr3hymf.js";import{T as $,D as w}from"./jpf0fwd7gcj4o5gh.js";import{dq as G,dr as V,ds as q,dt as D,du as K}from"./ohfy421oyz5q6uux.js";import{C as E,T as Z}from"./llxg1g65f4d35qsd.js";import{P as S}from"./h5kaq2cosykz4dzw.js";import{_ as J}from"./isjdmfmhzv09v01t.js";import{g as Q}from"./btagl6w1gub4aw61.js";import{m as k}from"./d422vlbtt271j9aw.js";import"./edzdph5rs0n89q6j.js";var X=J,Y=G,L=_,C=parseFloat,F=Math.min,U=Math.random;function z(e,t,n){if(n&&typeof n!="boolean"&&Y(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=L(e),t===void 0?(t=e,e=0):t=L(t)),e>t){var f=e;e=t,t=f}if(n||e%1||t%1){var d=U();return F(e+d*(t-e+C("1e-"+((d+"").length-1))),t)}return X(e,t)}var P=z;const I=W(P),O=({isHovered:e=!1})=>{const t=H();return o.jsx(R,{label:t.formatMessage({id:"KMbgyZ",defaultMessage:"Open in canvas"}),children:o.jsx(k.div,{role:"button",animate:{opacity:e?1:.64},whileHover:{opacity:1},transition:{type:"tween",duration:.18},className:"text-token-text-secondary transition-colors",children:o.jsx(V,{className:"icon-md"})})})},tt=({isCanvasOpen:e,isFocused:t,isHovered:n,isInlinePreview:f,size:d})=>e?t?"0px 2px 6px 0px rgba(0, 0, 0, 0.06)":"0px 2px 6px 0px rgba(0, 0, 0, 0)":f?n||t?`0px ${d==="large"?12:4}px ${d==="large"?32:10}px 0px rgba(0, 0, 0, 0.064)`:`0px ${d==="large"?6:4}px ${d==="large"?14:4}px 0px rgba(0, 0, 0, 0.04)`:"0px 2px 6px 0px rgba(0, 0, 0, 0)",et=({textdocId:e,name:t,tag:n,icon:f,iconSelected:d,marginBottom:h,size:c="large",isCanvasOpen:a=!1,isDisabled:s=!1,isFocused:l=!1,isInferring:y=!1,isInlinePreview:r=!1,isStreaming:x=!1,isUserMessage:i=!1,onClick:j,children:p})=>{const g=b.useRef(null),[m,N]=b.useState(!1),[T]=b.useState(()=>I(100,180,!1)),M=l&&a?d??f:f,A=M?o.jsx("span",{className:u("flex-shrink-0 transition-[filter]",{grayscale:!l&&!m}),children:M}):o.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center overflow-hidden",children:o.jsx(S,{lines:1,size:"base",width:100,widthVariance:0})}),v=!t||y?o.jsx("div",{className:"flex h-5 flex-grow items-center overflow-hidden",style:{width:T},children:o.jsx(S,{lines:1,size:"base",width:100,widthVariance:0})}):o.jsx("span",{className:"min-w-0 truncate",children:t}),B=()=>{!g.current||s||(q.logButtonClick(D.MESSAGE_ATTACHMENT,{type:n}),K(g.current),j?.())};return o.jsxs(k.div,{role:"button",id:Q(e),initial:{opacity:x?0:1,scale:x?.9:1},animate:{opacity:1,scale:1},transition:{type:"spring",bounce:0,duration:.72},className:u("popover relative z-0 flex select-none flex-col overflow-hidden border bg-token-main-surface-primary transition-shadow duration-500",s?"cursor-default":"cursor-pointer",{"border-token-text-tertiary font-medium dark:border-gray-600":l&&a,"font-regular":!l,"border-token-border-light":!m&&!l,"border-token-border-medium":m&&!l,"flex min-w-0 flex-shrink flex-grow-0 items-center justify-between self-start rounded-xl":a||!r,"rounded-2xl":!a&&r,"max-w-full":!i&&(a||!r),"max-w-[var(--user-chat-width,70%)]":i&&(a||!r),"w-full":!i&&!a&&r,"w-[var(--user-chat-width,70%)]":i&&!a&&r}),onMouseEnter:()=>!s&&N(!0),onMouseLeave:()=>N(!1),onClick:B,ref:g,style:{marginBottom:h,height:a||!r?void 0:c==="large"?"22rem":"10rem",width:c==="small"?"300px":void 0,boxShadow:tt({isCanvasOpen:a,isFocused:l,isHovered:m,isInlinePreview:r,size:c})},children:[o.jsxs("div",{className:u("flex w-full min-w-0 items-center justify-between gap-2 self-start border-token-border-light px-4 transition-colors duration-700",{"border-token-border-light":!m&&!l,"border-token-border-medium":m&&!l,"text-sm font-medium text-token-text-primary":!a&&m&&r,"py-2":a||!r,"py-3":!a&&r,"text-sm font-medium text-token-text-secondary":!a&&!m&&r}),children:[o.jsxs("div",{className:u("flex min-w-0 items-center",{"gap-2":a||!r,"gap-3.5":!a&&r}),children:[A,v]}),a?o.jsx(k.span,{animate:x?"show":"initial",variants:{initial:{opacity:0,paddingLeft:0,width:"0"},show:{opacity:1,paddingLeft:2,width:"24px"}},transition:{type:"tween",duration:.18},children:x&&o.jsx($,{gap:1,padding:0})}):r&&!s?o.jsx(O,{isHovered:m}):null]}),o.jsxs("div",{className:"relative flex min-h-0 w-full flex-1 flex-col self-end",children:[!a&&p,r&&!a&&o.jsx(E,{size:c,position:"bottom"}),r&&c==="small"&&!a&&o.jsx(E,{size:c,position:"right"})]})]})},ct=({textdocId:e,name:t,tag:n,icon:f,iconSelected:d,isCanvasOpen:h=!1,isFetching:c=!1,isFocused:a=!1,isInlinePreview:s=!1,isStreaming:l=!1,isUserMessage:y=!1,onClick:r})=>{const[x,i]=b.useState(!1),j=g=>{i(g>0)},p=h||!s?12:!h&&s?16:void 0;return o.jsx(et,{textdocId:e,name:t,tag:n,icon:f,iconSelected:d,marginBottom:p,isCanvasOpen:h,isFocused:a,isInlinePreview:s,isStreaming:l,isUserMessage:y,onClick:r,children:s&&o.jsx("div",{className:u("relative flex min-h-0 flex-auto flex-col overflow-hidden border-t transition-colors",{"border-token-border-light":x,"border-transparent":!x}),children:c?o.jsx(w,{}):!!e&&o.jsx(Z,{onScroll:j,textdocId:e})})})};export{ct as CanvasMessageAttachment,et as CanvasMessageAttachmentWrapper};
//# sourceMappingURL=fnbd6ylyoz2p55qg.js.map
