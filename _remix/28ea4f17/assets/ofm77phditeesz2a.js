const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-irnjbve04358uqx9.js","assets/h3lg90w4eburb9l1.js","assets/eisknr83d7xonp4v.js","assets/root-iyb3qk9s.css","assets/ib0rzjo7jsw69270.js","assets/itrk5c5jq0xa5b9u.js","assets/conversation-small-cll5buey.css","assets/gobs7jvyy4dso3c3.js","assets/d57ytrufyxi9ftf7.js","assets/4jfs12k7mvkh5eep.js","assets/g34w7dm96iu72qbz.js","assets/bv82nytha89yynjj.js","assets/c46pq1bupx9ciq93.js","assets/jzcja7m2krt3h1u8.js","assets/hrzxq093sk8tzi40.js","assets/30zkryfp9qppzscc.js","assets/o19gqs9pq4dz93zr.js","assets/e9ujw9iv31g6k44l.js","assets/mgqnvd4qg02o6avs.js","assets/g4oc09mc36zm5yyj.js","assets/tl3a0wcq99elbaxt.js","assets/gcbb7s59shr2zyu1.js","assets/ub1fuq023ljugivy.js","assets/cyk8svdnctzcy3dj.js","assets/itghwucfyv5ciib7.js","assets/f9gwwevb7d6ll56n.js","assets/wxfa149fs3blmlr7.js","assets/mwdkpqhnensqpx9w.js","assets/n07ufxny6dmbvzwo.js","assets/983a0dy92b3ronpv.js","assets/kg8724y5et7zv40d.js","assets/bj9ypq08ppo5qhl6.js","assets/kqwdyvkaaavvn8k3.js","assets/qlpa88skjmnrskb9.js","assets/j6vlc6wrjlr6gv70.js","assets/cihu32ycb7x9o41c.js","assets/gt38pyev52mewcz2.js","assets/e9lafxuzyeh4418f.js","assets/o2m1r1itz2y4ebyv.js","assets/j0zhkgrt7c6ba58o.js","assets/nhwwej1nq0zrd7sc.js","assets/gu129tfluy2pk8r8.js","assets/ohv4idhjunkbof6z.js","assets/ggwxyfi5h7a9laq8.js","assets/gj7pyapyy87m7o4d.js","assets/nppl65vgvgce6f0b.js","assets/f6u04h23uigu5mfo.js","assets/qhqoq7wpxzplmlem.js","assets/niesp8klkf6an6rp.js","assets/eeiua5o82doo0r0c.js","assets/iej0cupg2dqkmejt.js","assets/58jpiu65w3vil7s2.js","assets/lq4mlx0apzmwpqk6.js","assets/jk8w36bsokizpx57.js","assets/krbt6aq7lk2ckq8c.js","assets/d5iinj0h2qn61j2v.js","assets/oh2ry19au4v2lbjg.js","assets/swiper-kmk1dd5x.css","assets/in6ut6l17ex025gl.js","assets/lift5fw0y6l7uld0.js","assets/d3y72ugnrmac5z1v.js"])))=>i.map(i=>d[i]);
import{bA as ke,u as vn,r as l,b as bn,t as n,R as Cn,fs as Mt,n as St,W as Z,am as X,ft as Re,bb as oe,bc as In,fu as yn,N as ie,V as he,K as Ee,c3 as Mn,ab as ee,bh as me,P as j,d as B,T as Sn,Y as ze,Z as qe,a0 as M,a5 as Qe,a as Tt,aR as we,a8 as Tn,bQ as jn,bO as kn,aq as Se,er as jt,S as q,bE as kt,bd as Et,bo as at,bp as rt,c4 as En,bv as Oe,bq as wn,aw as Pn,av as re,cf as wt,s as _n,eb as Nn,ec as An,aU as Te,bD as Rn,a7 as Pt,fl as On}from"./h3lg90w4eburb9l1.js";import{hY as Fn,hZ as Bn,h_ as Dn,h$ as Wn,i0 as Ln,i1 as _t,cz as $n,i2 as Un,i3 as Hn,i4 as Vn,fd as Fe,fc as it,bM as Gn,i5 as zn,i6 as qn,i7 as Ie,i8 as Qn,i9 as Kn,ia as Jn,ib as Yn,ic as Xn,id as Zn,ie as es,ig as ts,ih as ve,ii as ct,ij as ns,ik as ye,il as ss,im as os,io as lt,fe as as,fh as rs,ip as is,iq as cs,ir as Nt,is as Ke,ae as Je,fo as ls,it as us,iu as At,bW as Pe,iv as ds,iw as Me,ix as ms,iy as Rt,iz as Be,iA as fs,iB as ps,bb as ae,iC as gs,iD as xs,iE as hs,aP as F,iF as Ot,aI as ut,aJ as le,aK as _e,aU as vs,bj as bs,bk as Cs,aX as Is,aY as Ft,aZ as je,a_ as ue,ba as ys,bl as O,iG as D,bm as Ms,a$ as Ss,b0 as Ts,b1 as js,b3 as Bt,b2 as ks,aM as Es,b7 as ws,b8 as Ps,bc as _s,bd as Ns,iH as As,iI as Rs,iJ as Os,iK as Fs,bf as dt,iL as Dt,bg as Bs,b9 as Ds,bi as Ws,iM as Ls,iN as $s,iO as Us,iP as Wt,iQ as Hs,iR as Vs,iS as De,iT as Gs,eR as zs,w as Ye,o as Xe,an as Ze,c as qs,gR as et,d2 as Lt,ca as mt,t as $t,aA as Qs,bD as Ks,iU as Js,bq as Ut,r as Ht,iV as Ys,u as Xs,bX as Zs,c8 as ft,q as eo}from"./itrk5c5jq0xa5b9u.js";import{H as to,L as Vt,E as no,u as so}from"./g34w7dm96iu72qbz.js";import{T as ge,i as oo,p as ao,C as ro,d as io}from"./bv82nytha89yynjj.js";import{u as tt,a8 as co,bF as Gt,a1 as zt,aR as lo,ah as uo,q as mo,J as fo,ab as po,p as go,a_ as qt,bm as Qt,bs as Kt,bG as Jt,I as xo,bn as ho,b8 as vo,b2 as We,V as Yt,aJ as bo}from"./eisknr83d7xonp4v.js";import{D as E,B as Co}from"./mwdkpqhnensqpx9w.js";import{a as Xt,b as Zt}from"./qhqoq7wpxzplmlem.js";import{u as Io}from"./kdtfwn2zgs7lv4nm.js";import{U,G as ce,a as yo,u as en,b as tn}from"./jzcja7m2krt3h1u8.js";const Mo=()=>{const{value:e}=ke("44045625");return e},cr=()=>{const{value:e}=ke("3700195277");return e||!1},nt=e=>{const t=to(e);return Mo()&&!!t?.includes("canmore")},lr=()=>{const{value:e}=ke("711369489");return e||!1},So=e=>bn.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),To=async e=>{const t=await So(e),o=new Map(t?.map(r=>[r.id,r])),s=[];for(const{id:r,content:i,version:c,textdoc_type:m,title:f,comments:p}of t)s.push({textdocId:r,messageId:null,type:Wn(m),comments:Ln(p,i),title:f,content:i,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(s.map(r=>[r.textdocId,r])),persistedTextdocVersions:s,persistedTextdocById:o}};function jo({clientThreadId:e,isEnabled:t}){const o=ge.getServerThreadId(e),{data:s,error:a,isLoading:r,isFetching:i,refetch:c}=vn({queryKey:[o,"textdocs"],enabled:!!o&&t,gcTime:0,queryFn:()=>o&&To(o)});return l.useEffect(()=>{if(!s)return;const{persistedTextdocVersions:m}=s;Fn(m),Bn(m),Dn(m)},[s]),[{...s,error:a,isLoading:r,isFetching:i},c]}const nn=_t(null),be=_t(null),pt=e=>{if(!e)return;const{messages:t}=e,o=es(t??[],({message:a})=>a.author.role===Cn.System),s=o===-1?t:t?.slice(o+1);if(s&&ts(s))return s};function fe(e=Mt){return ve(nn,e)}function ko(e=Mt){return ve(be,e)}function ur(){return fe(e=>e?.isFetchingFromPersistence)}function dr(){return fe(e=>e?.isEnabled)}function sn(){return ve(be,e=>e?.resolveTempTextdocId)}function mr(){return ve(be,e=>e?.resolveTempCommentId)}function fr(){return ve(be,e=>e?.latestTextdocId??null)}function pr(e){const t=sn();return fe(o=>Nt(o,t??{},e))}function on(e){const t=sn();return fe(o=>Nt(o,t??{},e)?.metadata??null)}function an(){const e=fe(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function gr(){return fe(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function xr({clientThreadId:e,children:t}){const o=nt(e),{textdocStore:s,optimisticTextdocStore:a}=Eo({clientThreadId:e,isEnabled:o});return n.jsx(be.Provider,{value:a,children:n.jsx(nn.Provider,{value:s,children:t})})}function Eo({clientThreadId:e,isEnabled:t}){const o=oo(e),s=ao(e,o),a=ro(e),r=$n(a),[{error:i,persistedTextdocVersionById:c,isLoading:m,isFetching:f},p]=jo({clientThreadId:e,isEnabled:t}),h=Un(),[u,d]=l.useState(!1),g=Hn(),[x,v]=l.useState(!0);Vn(()=>{if(!t)return;const I=ge.getThreadCurrentLeafId(e),P=ge.getThreadConversationTurns(e,I),W=Fe(P)?.messages??[],R=ct(W);if(R==null)return;const $=R.message.metadata?.canvas?.textdoc_id,ne=R.message.metadata?.canvas?.version;$!=null&&ne!=null&&h($,ne),d(!0),p().finally(()=>d(!1))});const[k,w]=l.useState(c);l.useEffect(()=>{r&&w(c)},[r]);const C=t&&(r||!x||f&&!m&&u),y=Fe(s),N=l.useMemo(()=>{if(!y||!it(y))return null;const I=ge.getTree(e),{variantIds:P}=y;return P.map(A=>{const W=I.getLeafFromNode(A).id;return Fe(ge.getThreadConversationTurns(e,W))})},[e,y]),_=l.useMemo(()=>!C||!y?null:it(y)?N?.flatMap(pt).filter(Gn):pt(y),[C,y,N]),S=!!_?k:c,T=zn(),K=qn(),L=l.useMemo(()=>{let I=ns();return!S||(I=Ie(I,P=>{for(const[A,W]of S.entries()){P.allTextdocIdSet[A]=A;const R=g.get(A);let $=R&&(R.versionInt??ye)>(W.versionInt??ye)?{...W,...R}:W;const ne=K.filter(z=>z.textdocId===A&&z.kind===ss.REMOVE_COMMENT);let Ce=$.versionInt;for(const z of ne)$=os($,z),Ce=Math.max(Ce??ye,z.versionInt??ye);$={...$,versionInt:Ce},P.textdocById[A]=void 0,lt(P,$)}}),!T)?I:Ie(I,P=>{lt(P,T,!1)})},[S,g,T,K]),G=l.useMemo(()=>Ie(L,I=>{I.fetchError=i,I.isFetchingFromPersistence=f}),[L,i,f]),[H,Q]=l.useState(Qn),te=l.useMemo(()=>_?.length?Kn(r,L,H,_):null,[_,r,H,L]),J=Jn(r,te,v),b=l.useMemo(()=>J?Yn(G,J):G,[G,J]);return l.useEffect(()=>{if(!t)return;const I=Xn(H,s);I&&Q(I)},[e,t,s.length]),l.useEffect(()=>{const I=Zn(H,te);I&&Q(I)},[te]),{textdocStore:l.useMemo(()=>Ie(b,I=>{I.isEnabled!==t&&(I.isEnabled=t);const P=s.flatMap(R=>R.messages),A={},W=as(P);for(let R=W.length-1;R>=0;R--){const $=W[R];if($.type!==rs.Canmore)continue;const ne=is($.messages),z=ct($.messages)?.message.metadata?.canvas?.textdoc_id??cs(P);z&&ne!=null&&!A[z]&&(A[z]=!0,ne.nodeId!==I.lastCanvasAssistantMessageById[z]&&(I.lastCanvasAssistantMessageById[z]=ne.nodeId))}}),[b,s,t]),optimisticTextdocStore:H}}function rn(){return Ke(e=>e.focusedObject)}function hr(){const e=Ke(t=>t.focusedObject);return e?.type!==Je.Textdoc?null:e}function vr(){const e=Ke(t=>t.focusedObject);return e?.type!==Je.Textdoc?null:e.history??null}function cn(){return rn()!=null}function br(e){const t=rn();return ko(o=>{if(!e||t?.type!==Je.Textdoc)return!1;const s=o?.resolveTempTextdocId??{},a=s[t.textdocId]??t.textdocId,r=s[e]??e;return a===r})}const wo=({children:e})=>{const t=an();return t?.length?n.jsxs(E.Root,{children:[n.jsx(E.Trigger,{className:"h-10 px-2",children:e}),n.jsx(E.Content,{align:"end",onCloseAutoFocus:o=>o.preventDefault(),children:t.map(o=>n.jsx(Po,{textdocId:o},o))})]}):null},Po=({textdocId:e})=>{const t=St(on(e));return n.jsx(E.Item,{icon:tt,onClick:()=>{ls.logButtonClick(us.FILE_DRAWER_ITEM),At(t.textdocId)},children:t.title})},_o=()=>{const e=Z(),t=an(),o=cn();if(!t||o)return null;const s=t.length;return s===1?n.jsx(No,{textdocId:t[0]}):n.jsx(wo,{children:n.jsx(X,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[n.jsx(tt,{className:"icon-xl-heavy"}),s]})})})},No=({textdocId:e})=>{const t=Z(),o=St(on(e));return n.jsx(X,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsx(Pe,{onClick:()=>At(o.textdocId),icon:tt})})},Ao=({children:e})=>cn()?null:n.jsx(n.Fragment,{children:e}),gt=({clientThreadId:e,children:t})=>nt(e)?n.jsx(Ao,{children:t}):t,ln={...In},Ro=ln.useInsertionEffect,Oo=Ro||(e=>e());function un(e){const t=l.useRef(()=>{});return Oo(()=>{t.current=e}),l.useCallback(function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}var Ve=typeof document<"u"?l.useLayoutEffect:l.useEffect;let xt=!1,Fo=0;const ht=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Fo++;function Bo(){const[e,t]=l.useState(()=>xt?ht():void 0);return Ve(()=>{e==null&&t(ht())},[]),l.useEffect(()=>{xt=!0},[]),e}const Do=ln.useId,Wo=Do||Bo;function Lo(){const e=new Map;return{emit(t,o){var s;(s=e.get(t))==null||s.forEach(a=>a(o))},on(t,o){e.set(t,[...e.get(t)||[],o])},off(t,o){var s;e.set(t,((s=e.get(t))==null?void 0:s.filter(a=>a!==o))||[])}}}const $o=l.createContext(null),Uo=l.createContext(null),Ho=()=>{var e;return((e=l.useContext($o))==null?void 0:e.id)||null},Vo=()=>l.useContext(Uo),Go="data-floating-ui-focusable";function zo(e){const{open:t=!1,onOpenChange:o,elements:s}=e,a=Wo(),r=l.useRef({}),[i]=l.useState(()=>Lo()),c=Ho()!=null,[m,f]=l.useState(s.reference),p=un((d,g,x)=>{r.current.openEvent=d?g:void 0,i.emit("openchange",{open:d,event:g,reason:x,nested:c}),o?.(d,g,x)}),h=l.useMemo(()=>({setPositionReference:f}),[]),u=l.useMemo(()=>({reference:m||s.reference||null,floating:s.floating||null,domReference:s.reference}),[m,s.reference,s.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:p,elements:u,events:i,floatingId:a,refs:h}),[t,p,u,i,a,h])}function qo(e){e===void 0&&(e={});const{nodeId:t}=e,o=zo({...e,elements:{reference:null,floating:null,...e.elements}}),s=e.rootContext||o,a=s.elements,[r,i]=l.useState(null),[c,m]=l.useState(null),p=a?.reference||r,h=l.useRef(null),u=Vo();Ve(()=>{p&&(h.current=p)},[p]);const d=ds({...e,elements:{...a,...c&&{reference:c}}}),g=l.useCallback(C=>{const y=Me(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),contextElement:C}:C;m(y),d.refs.setReference(y)},[d.refs]),x=l.useCallback(C=>{(Me(C)||C===null)&&(h.current=C,i(C)),(Me(d.refs.reference.current)||d.refs.reference.current===null||C!==null&&!Me(C))&&d.refs.setReference(C)},[d.refs]),v=l.useMemo(()=>({...d.refs,setReference:x,setPositionReference:g,domReference:h}),[d.refs,x,g]),k=l.useMemo(()=>({...d.elements,domReference:p}),[d.elements,p]),w=l.useMemo(()=>({...d,...s,refs:v,elements:k,nodeId:t}),[d,v,k,t,s]);return Ve(()=>{s.dataRef.current.floatingContext=w;const C=u?.nodesRef.current.find(y=>y.id===t);C&&(C.context=w)}),l.useMemo(()=>({...d,context:w,refs:v,elements:k}),[d,v,k,w])}const vt="active",bt="selected";function Le(e,t,o){const s=new Map,a=o==="item";let r=e;if(a&&e){const{[vt]:i,[bt]:c,...m}=e;r=m}return{...o==="floating"&&{tabIndex:-1,[Go]:""},...r,...t.map(i=>{const c=i?i[o]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((i,c)=>(c&&Object.entries(c).forEach(m=>{let[f,p]=m;if(!(a&&[vt,bt].includes(f)))if(f.indexOf("on")===0){if(s.has(f)||s.set(f,[]),typeof p=="function"){var h;(h=s.get(f))==null||h.push(p),i[f]=function(){for(var u,d=arguments.length,g=new Array(d),x=0;x<d;x++)g[x]=arguments[x];return(u=s.get(f))==null?void 0:u.map(v=>v(...g)).find(v=>v!==void 0)}}}else i[f]=p}),i),{})}}function Qo(e){e===void 0&&(e=[]);const t=e.map(c=>c?.reference),o=e.map(c=>c?.floating),s=e.map(c=>c?.item),a=l.useCallback(c=>Le(c,e,"reference"),t),r=l.useCallback(c=>Le(c,e,"floating"),o),i=l.useCallback(c=>Le(c,e,"item"),s);return l.useMemo(()=>({getReferenceProps:a,getFloatingProps:r,getItemProps:i}),[a,r,i])}function Ct(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Ko=e=>({name:"inner",options:e,async fn(t){const{listRef:o,overflowRef:s,onFallbackChange:a,offset:r=0,index:i=0,minItemsVisible:c=4,referenceOverflowThreshold:m=0,scrollRef:f,...p}=ms(e,t),{rects:h,elements:{floating:u}}=t,d=o.current[i],g=f?.current||u,x=u.clientTop||g.clientTop,v=u.clientTop!==0,k=g.clientTop!==0,w=u===g;if(!d)return{};const C={...t,...await Rt(-d.offsetTop-u.clientTop-h.reference.height/2-d.offsetHeight/2-r).fn(t)},y=await Re(Ct(C,g.scrollHeight+x+u.clientTop),p),N=await Re(C,{...p,elementContext:"reference"}),_=Be(0,y.top),V=C.y+_,S=fs(Be(0,g.scrollHeight+(v&&w||k?x*2:0)-_-Be(0,y.bottom)));if(g.style.maxHeight=S+"px",g.scrollTop=_,a){const T=g.scrollHeight>g.offsetHeight&&g.offsetHeight<d.offsetHeight*c-1||N.top>=-m||N.bottom>=-m;oe.flushSync(()=>a(T))}return s&&(s.current=await Re(Ct({...C,y:V},g.offsetHeight+x+u.clientTop),p)),{y:V}}});function Jo(e,t){const{open:o,elements:s}=e,{enabled:a=!0,overflowRef:r,scrollRef:i,onChange:c}=t,m=un(c),f=l.useRef(!1),p=l.useRef(null),h=l.useRef(null);l.useEffect(()=>{if(!a)return;function d(x){if(x.ctrlKey||!g||r.current==null)return;const v=x.deltaY,k=r.current.top>=-.5,w=r.current.bottom>=-.5,C=g.scrollHeight-g.clientHeight,y=v<0?-1:1,N=v<0?"max":"min";g.scrollHeight<=g.clientHeight||(!k&&v>0||!w&&v<0?(x.preventDefault(),oe.flushSync(()=>{m(_=>_+Math[N](v,C*y))})):/firefox/i.test(ps())&&(g.scrollTop+=v))}const g=i?.current||s.floating;if(o&&g)return g.addEventListener("wheel",d),requestAnimationFrame(()=>{p.current=g.scrollTop,r.current!=null&&(h.current={...r.current})}),()=>{p.current=null,h.current=null,g.removeEventListener("wheel",d)}},[a,o,s.floating,r,i,m]);const u=l.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const d=i?.current||s.floating;if(!(!r.current||!d||!f.current)){if(p.current!==null){const g=d.scrollTop-p.current;(r.current.bottom<-.5&&g<-1||r.current.top<-.5&&g>1)&&oe.flushSync(()=>m(x=>x+g))}requestAnimationFrame(()=>{p.current=d.scrollTop})}}}),[s.floating,m,r,i]);return l.useMemo(()=>a?{floating:u}:{},[a,u])}let pe=l.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});pe.displayName="FloatingContext";let st=l.createContext(null);st.displayName="PlacementContext";function Yo(e){return l.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function Xo(){return l.useContext(pe).setReference}function Zo(){return l.useContext(pe).getReferenceProps}function ea(){let{getFloatingProps:e,slot:t}=l.useContext(pe);return l.useCallback((...o)=>Object.assign({},e(...o),{"data-anchor":t.anchor}),[e,t])}function ta(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=l.useContext(st),o=l.useMemo(()=>e,[JSON.stringify(e,(a,r)=>{var i;return(i=r?.outerHTML)!=null?i:r})]);ae(()=>{t?.(o??null)},[t,o]);let s=l.useContext(pe);return l.useMemo(()=>[s.setFloating,e?s.styles:{}],[s.setFloating,e,s.styles])}let It=4;function na({children:e,enabled:t=!0}){let[o,s]=l.useState(null),[a,r]=l.useState(0),i=l.useRef(null),[c,m]=l.useState(null);sa(c);let f=t&&o!==null&&c!==null,{to:p="bottom",gap:h=0,offset:u=0,padding:d=0,inner:g}=oa(o,c),[x,v="center"]=p.split(" ");ae(()=>{f&&r(0)},[f]);let{refs:k,floatingStyles:w,context:C}=qo({open:f,placement:x==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${x}`:`${x}-${v}`,strategy:"absolute",transform:!1,middleware:[Rt({mainAxis:x==="selection"?0:h,crossAxis:u}),gs({padding:d}),x!=="selection"&&xs({padding:d}),x==="selection"&&g?Ko({...g,padding:d,overflowRef:i,offset:a,minItemsVisible:It,referenceOverflowThreshold:d,onFallbackChange(L){var G,H;if(!L)return;let Q=C.elements.floating;if(!Q)return;let te=parseFloat(getComputedStyle(Q).scrollPaddingBottom)||0,J=Math.min(It,Q.childElementCount),b=0,de=0;for(let I of(H=(G=C.elements.floating)==null?void 0:G.childNodes)!=null?H:[])if(I instanceof HTMLElement){let P=I.offsetTop,A=P+I.clientHeight+te,W=Q.scrollTop,R=W+Q.clientHeight;if(P>=W&&A<=R)J--;else{de=Math.max(0,Math.min(A,R)-Math.max(P,W)),b=I.clientHeight;break}}J>=1&&r(I=>{let P=b*J-de+te;return I>=P?I:P})}}):null,hs({padding:d,apply({availableWidth:L,availableHeight:G,elements:H}){Object.assign(H.floating.style,{overflow:"auto",maxWidth:`${L}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${G}px)`})}})].filter(Boolean),whileElementsMounted:yn}),[y=x,N=v]=C.placement.split("-");x==="selection"&&(y="selection");let _=l.useMemo(()=>({anchor:[y,N].filter(Boolean).join(" ")}),[y,N]),V=Jo(C,{overflowRef:i,onChange:r}),{getReferenceProps:S,getFloatingProps:T}=Qo([V]),K=F(L=>{m(L),k.setFloating(L)});return l.createElement(st.Provider,{value:s},l.createElement(pe.Provider,{value:{setFloating:K,setReference:k.setReference,styles:w,getReferenceProps:S,getFloatingProps:T,slot:_}},e))}function sa(e){ae(()=>{if(!e)return;let t=new MutationObserver(()=>{let o=window.getComputedStyle(e).maxHeight,s=parseFloat(o);if(isNaN(s))return;let a=parseInt(o);isNaN(a)||s!==a&&(e.style.maxHeight=`${Math.ceil(s)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function oa(e,t){var o,s,a;let r=$e((o=e?.gap)!=null?o:"var(--anchor-gap, 0)",t),i=$e((s=e?.offset)!=null?s:"var(--anchor-offset, 0)",t),c=$e((a=e?.padding)!=null?a:"var(--anchor-padding, 0)",t);return{...e,gap:r,offset:i,padding:c}}function $e(e,t,o=void 0){let s=Ot(),a=F((m,f)=>{if(m==null)return[o,null];if(typeof m=="number")return[m,null];if(typeof m=="string"){if(!f)return[o,null];let p=yt(m,f);return[p,h=>{let u=dn(m);{let d=u.map(g=>window.getComputedStyle(f).getPropertyValue(g));s.requestAnimationFrame(function g(){s.nextFrame(g);let x=!1;for(let[k,w]of u.entries()){let C=window.getComputedStyle(f).getPropertyValue(w);if(d[k]!==C){d[k]=C,x=!0;break}}if(!x)return;let v=yt(m,f);p!==v&&(h(v),p=v)})}return s.dispose}]}return[o,null]}),r=l.useMemo(()=>a(e,t)[0],[e,t]),[i=r,c]=l.useState();return ae(()=>{let[m,f]=a(e,t);if(c(m),!!f)return f(c)},[e,t]),i}function dn(e){let t=/var\((.*)\)/.exec(e);if(t){let o=t[1].indexOf(",");if(o===-1)return[t[1]];let s=t[1].slice(0,o).trim(),a=t[1].slice(o+1).trim();return a?[s,...dn(a)]:[s]}return[]}function yt(e,t){let o=document.createElement("div");t.appendChild(o),o.style.setProperty("margin-top","0px","important"),o.style.setProperty("margin-top",e,"important");let s=parseFloat(window.getComputedStyle(o).marginTop)||0;return t.removeChild(o),s}var aa=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(aa||{}),ra=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ra||{}),ia=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(ia||{});function Ue(e,t=o=>o){let o=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,s=Gs(t(e.items.slice()),r=>r.dataRef.current.domRef.current),a=o?s.indexOf(o):null;return a===-1&&(a=null),{items:s,activeItemIndex:a}}let ca={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var o,s,a,r,i;if(e.menuState===1)return e;let c={...e,searchQuery:"",activationTrigger:(o=t.trigger)!=null?o:1,__demoMode:!1};if(t.focus===D.Nothing)return{...c,activeItemIndex:null};if(t.focus===D.Specific)return{...c,activeItemIndex:e.items.findIndex(p=>p.id===t.id)};if(t.focus===D.Previous){let p=e.activeItemIndex;if(p!==null){let h=e.items[p].dataRef.current.domRef,u=De(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((s=h.current)==null?void 0:s.previousElementSibling)===d.current||((a=d.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeItemIndex:u}}}}else if(t.focus===D.Next){let p=e.activeItemIndex;if(p!==null){let h=e.items[p].dataRef.current.domRef,u=De(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((r=h.current)==null?void 0:r.nextElementSibling)===d.current||((i=d.current)==null?void 0:i.nextElementSibling)===null)return{...c,activeItemIndex:u}}}}let m=Ue(e),f=De(t,{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...m,activeItemIndex:f}},3:(e,t)=>{let o=e.searchQuery!==""?0:1,s=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+o).concat(e.items.slice(0,e.activeItemIndex+o)):e.items).find(i=>{var c;return((c=i.dataRef.current.textValue)==null?void 0:c.startsWith(s))&&!i.dataRef.current.disabled}),r=a?e.items.indexOf(a):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let o=Ue(e,s=>[...s,{id:t.id,dataRef:t.dataRef}]);return{...e,...o}},6:(e,t)=>{let o=Ue(e,s=>{let a=s.findIndex(r=>r.id===t.id);return a!==-1&&s.splice(a,1),s});return{...e,...o,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},ot=l.createContext(null);ot.displayName="MenuContext";function Ne(e){let t=l.useContext(ot);if(t===null){let o=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Ne),o}return t}function la(e,t){return Ft(t.type,ca,e,t)}let ua=l.Fragment;function da(e,t){let{__demoMode:o=!1,...s}=e,a=l.useReducer(la,{__demoMode:o,menuState:o?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsElement:i,buttonElement:c},m]=a,f=_e(t);vs(r===0,[c,i],(d,g)=>{m({type:1}),bs(g,Cs.Loose)||(d.preventDefault(),c?.focus())});let p=F(()=>{m({type:1})}),h=l.useMemo(()=>({open:r===0,close:p}),[r,p]),u={ref:f};return ie.createElement(na,null,ie.createElement(ot.Provider,{value:a},ie.createElement(Is,{value:Ft(r,{0:je.Open,1:je.Closed})},ue({ourProps:u,theirProps:s,slot:h,defaultTag:ua,name:"Menu"}))))}let ma="button";function fa(e,t){var o;let s=l.useId(),{id:a=`headlessui-menu-button-${s}`,disabled:r=!1,autoFocus:i=!1,...c}=e,[m,f]=Ne("Menu.Button"),p=Zo(),h=ys(),u=_e(t,Xo(),F(S=>f({type:7,element:S}))),d=F(S=>{switch(S.key){case O.Space:case O.Enter:case O.ArrowDown:S.preventDefault(),S.stopPropagation(),oe.flushSync(()=>f({type:0})),f({type:2,focus:D.First});break;case O.ArrowUp:S.preventDefault(),S.stopPropagation(),oe.flushSync(()=>f({type:0})),f({type:2,focus:D.Last});break}}),g=F(S=>{switch(S.key){case O.Space:S.preventDefault();break}}),x=F(S=>{var T;if(Ms(S.currentTarget))return S.preventDefault();r||(m.menuState===0?(oe.flushSync(()=>f({type:1})),(T=m.buttonElement)==null||T.focus({preventScroll:!0})):(S.preventDefault(),f({type:0})))}),{isFocusVisible:v,focusProps:k}=Ss({autoFocus:i}),{isHovered:w,hoverProps:C}=Ts({isDisabled:r}),{pressed:y,pressProps:N}=js({disabled:r}),_=l.useMemo(()=>({open:m.menuState===0,active:y||m.menuState===0,disabled:r,hover:w,focus:v,autofocus:i}),[m,w,v,y,r,i]),V=Bt(p(),{ref:u,id:a,type:ks(e,m.buttonElement),"aria-haspopup":"menu","aria-controls":(o=m.itemsElement)==null?void 0:o.id,"aria-expanded":m.menuState===0,disabled:r||void 0,autoFocus:i,onKeyDown:d,onKeyUp:g,onClick:x},k,C,N);return ue({mergeRefs:h,ourProps:V,theirProps:c,slot:_,defaultTag:ma,name:"Menu.Button"})}let pa="div",ga=ut.RenderStrategy|ut.Static;function xa(e,t){var o,s;let a=l.useId(),{id:r=`headlessui-menu-items-${a}`,anchor:i,portal:c=!1,modal:m=!0,transition:f=!1,...p}=e,h=Yo(i),[u,d]=Ne("Menu.Items"),[g,x]=ta(h),v=ea(),[k,w]=l.useState(null),C=_e(t,h?g:null,F(b=>d({type:8,element:b})),w),y=Es(u.itemsElement);h&&(c=!0);let N=ws(),[_,V]=Ps(f,k,N!==null?(N&je.Open)===je.Open:u.menuState===0);_s(_,u.buttonElement,()=>{d({type:1})});let S=u.__demoMode?!1:m&&u.menuState===0;Ns(S,y);let T=u.__demoMode?!1:m&&u.menuState===0;As(T,{allowed:l.useCallback(()=>[u.buttonElement,u.itemsElement],[u.buttonElement,u.itemsElement])});let K=u.menuState!==0,L=Rs(K,u.buttonElement)?!1:_;l.useEffect(()=>{let b=u.itemsElement;b&&u.menuState===0&&b!==y?.activeElement&&b.focus({preventScroll:!0})},[u.menuState,u.itemsElement,y]),Os(u.menuState===0,{container:u.itemsElement,accept(b){return b.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:b.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(b){b.setAttribute("role","none")}});let G=Ot(),H=F(b=>{var de,I,P;switch(G.dispose(),b.key){case O.Space:if(u.searchQuery!=="")return b.preventDefault(),b.stopPropagation(),d({type:3,value:b.key});case O.Enter:if(b.preventDefault(),b.stopPropagation(),d({type:1}),u.activeItemIndex!==null){let{dataRef:A}=u.items[u.activeItemIndex];(I=(de=A.current)==null?void 0:de.domRef.current)==null||I.click()}Dt(u.buttonElement);break;case O.ArrowDown:return b.preventDefault(),b.stopPropagation(),d({type:2,focus:D.Next});case O.ArrowUp:return b.preventDefault(),b.stopPropagation(),d({type:2,focus:D.Previous});case O.Home:case O.PageUp:return b.preventDefault(),b.stopPropagation(),d({type:2,focus:D.First});case O.End:case O.PageDown:return b.preventDefault(),b.stopPropagation(),d({type:2,focus:D.Last});case O.Escape:b.preventDefault(),b.stopPropagation(),oe.flushSync(()=>d({type:1})),(P=u.buttonElement)==null||P.focus({preventScroll:!0});break;case O.Tab:b.preventDefault(),b.stopPropagation(),oe.flushSync(()=>d({type:1})),Fs(u.buttonElement,b.shiftKey?dt.Previous:dt.Next);break;default:b.key.length===1&&(d({type:3,value:b.key}),G.setTimeout(()=>d({type:4}),350));break}}),Q=F(b=>{switch(b.key){case O.Space:b.preventDefault();break}}),te=l.useMemo(()=>({open:u.menuState===0}),[u.menuState]),J=Bt(h?v():{},{"aria-activedescendant":u.activeItemIndex===null||(o=u.items[u.activeItemIndex])==null?void 0:o.id,"aria-labelledby":(s=u.buttonElement)==null?void 0:s.id,id:r,onKeyDown:H,onKeyUp:Q,role:"menu",tabIndex:u.menuState===0?0:void 0,ref:C,style:{...p.style,...x,"--button-width":Bs(u.buttonElement,!0).width},...Ds(V)});return ie.createElement(Ws,{enabled:c?e.static||_:!1},ue({ourProps:J,theirProps:p,slot:te,defaultTag:pa,features:ga,visible:L,name:"Menu.Items"}))}let ha=l.Fragment;function va(e,t){let o=l.useId(),{id:s=`headlessui-menu-item-${o}`,disabled:a=!1,...r}=e,[i,c]=Ne("Menu.Item"),m=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===s:!1,f=l.useRef(null),p=_e(t,f);ae(()=>{if(!i.__demoMode&&i.menuState===0&&m&&i.activationTrigger!==0)return Ls().requestAnimationFrame(()=>{var T,K;(K=(T=f.current)==null?void 0:T.scrollIntoView)==null||K.call(T,{block:"nearest"})})},[i.__demoMode,f,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let h=$s(f),u=l.useRef({disabled:a,domRef:f,get textValue(){return h()}});ae(()=>{u.current.disabled=a},[u,a]),ae(()=>(c({type:5,id:s,dataRef:u}),()=>c({type:6,id:s})),[u,s]);let d=F(()=>{c({type:1})}),g=F(T=>{if(a)return T.preventDefault();c({type:1}),Dt(i.buttonElement)}),x=F(()=>{if(a)return c({type:2,focus:D.Nothing});c({type:2,focus:D.Specific,id:s})}),v=Us(),k=F(T=>{v.update(T),!a&&(m||c({type:2,focus:D.Specific,id:s,trigger:0}))}),w=F(T=>{v.wasMoved(T)&&(a||m||c({type:2,focus:D.Specific,id:s,trigger:0}))}),C=F(T=>{v.wasMoved(T)&&(a||m&&c({type:2,focus:D.Nothing}))}),[y,N]=Wt(),[_,V]=Hs(),S=l.useMemo(()=>({active:m,focus:m,disabled:a,close:d}),[m,a,d]);return ie.createElement(N,null,ie.createElement(V,null,ue({ourProps:{id:s,ref:p,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":y,"aria-describedby":_,disabled:void 0,onClick:g,onFocus:x,onPointerEnter:k,onMouseEnter:k,onPointerMove:w,onMouseMove:w,onPointerLeave:C,onMouseLeave:C},theirProps:r,slot:S,defaultTag:ha,name:"Menu.Item"})))}let ba="div";function Ca(e,t){let[o,s]=Wt();return ie.createElement(s,null,ue({ourProps:{ref:t,"aria-labelledby":o,role:"group"},theirProps:e,slot:{},defaultTag:ba,name:"Menu.Section"}))}let Ia="header";function ya(e,t){let o=l.useId(),{id:s=`headlessui-menu-heading-${o}`,...a}=e,r=Vs();ae(()=>r.register(s),[s,r.register]);let i={id:s,ref:t,role:"presentation",...r.props};return ue({ourProps:i,theirProps:a,slot:{},defaultTag:Ia,name:"Menu.Heading"})}let Ma="div";function Sa(e,t){return ue({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:Ma,name:"Menu.Separator"})}let Ta=le(da),ja=le(fa),ka=le(xa),Ea=le(va),wa=le(Ca),Pa=le(ya),_a=le(Sa),xe=Object.assign(Ta,{Button:ja,Items:ka,Item:Ea,Section:wa,Heading:Pa,Separator:_a});function Na({show:e,appear:t,children:o}){return n.jsx(zs,{as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",show:e,appear:t,children:o})}function se({onClick:e,href:t,target:o,children:s,disabled:a,icon:r,testId:i}){return n.jsx(xe.Item,{disabled:a,children:({active:c})=>n.jsxs(Ae,{onClick:e,href:t,target:o,className:Ee({"bg-token-sidebar-surface-secondary":c,"hover:bg-token-sidebar-surface-secondary":!c&&!a}),"data-testid":i,children:[r&&n.jsx(r,{className:"icon-md"}),s]})})}function Aa({to:e,children:t,icon:o}){return n.jsx(xe.Item,{children:({active:s})=>n.jsx(Mn,{to:e,children:n.jsxs(Ae,{$as:"span",className:Ee(s?"bg-token-sidebar-surface-secondary":"cursor-pointer"),children:[o&&n.jsx(o,{className:"icon-md"}),t]})})})}he.a`p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer`;const Ae=he.a`flex gap-2 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group items-center`,Cr=he(Ae)`border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]`,Ge=he.div`h-px bg-token-border-light my-1.5`,Ir=he(Ae)`${e=>e.$active?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`;function mn({menuItemComponent:e}){const t=ee(),o=me(),s=l.useCallback(()=>{j.logEvent(B.clickSidebarAccountPortalMenuItem),Ye(o,"Sidebar account menu item")},[o]),{value:a}=Sn("1028682714"),r=ze(()=>qe(()=>import("./sso-irnjbve04358uqx9.js").then(i=>i.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57])).then(i=>i.default));return n.jsxs(n.Fragment,{children:[t?.hasPaidSubscription()&&(a?n.jsx(r,{handleClickCustomerPortal:s,menuItemComponent:e}):n.jsx(e,{onClick:s,icon:co,children:n.jsx(M,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),t?.canInteractWithGizmos()&&n.jsx(e,{onClick:()=>{j.logEvent(B.accountMenuClickMyGPTs),o(Vt())},icon:Gt,children:n.jsx(M,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),n.jsx(e,{icon:zt,onClick:()=>{U.openModal(ce.UserContext),j.logEvent(B.accountMenuClickCustomizeChatGPT)},children:n.jsx(M,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function fn({menuItemComponent:e,routedMenuItemComponent:t}){const o=ee(),s=ke("2756095923")?.value&&o?.isEdu()&&o?.isStandardUserOfAccount();return n.jsxs(n.Fragment,{children:[!s&&n.jsx(t,{to:"/admin",icon:lo,children:n.jsx(M,{...He.myWorkspaceSettings})}),n.jsx(t,{to:Vt(),onClick:()=>{j.logEvent(B.accountMenuClickMyGPTs)},icon:Gt,children:n.jsx(M,{...He.myGpts})}),n.jsx(e,{onClick:()=>{U.openModal(ce.UserContext),j.logEvent(B.accountMenuClickCustomizeChatGPT)},icon:zt,children:n.jsx(M,{...He.chatPreferences})})]})}const He=Qe({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}}),Ra=ze(()=>qe(()=>import("./in6ut6l17ex025gl.js"),__vite__mapDeps([58,1,2,3,13,12,11,5,6,8,59,60,36,37,38,19])));function yr({onClickSettings:e}){return n.jsxs(xe,{as:"div",className:"group relative",children:[n.jsx(Da,{}),n.jsx(Na,{children:n.jsx(xe.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:n.jsx(Ba,{onClickSettings:e})})})]})}function pn(){const e=!ee()?.isEnterprisey()&&!Et,t=Z(),o=Ze(),s=me();return o?n.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[n.jsx("div",{className:"text-sm text-token-text-secondary",children:o?.email}),e&&n.jsx(X,{label:t.formatMessage(Y.addWorkspaceTooltip),side:"right",children:n.jsx("button",{onClick:()=>Ye(s,"profile menu"),children:n.jsx(xo,{className:"icon-sm text-token-text-primary"})})})]}):null}function Oa(){const e=ee();return e==null?n.jsx(n.Fragment,{children:n.jsx("div",{className:"w-full px-3 py-2",children:n.jsx(Se,{})})}):n.jsxs(n.Fragment,{children:[n.jsx(pn,{}),n.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:n.jsx(xn,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})})]})}function gn({menuItemComponent:e}){const t=Xe(),o=Tt(),{data:s}=we(),a=ee(),[r,i]=l.useState(!1),c=Ze(),m=Z(),f=Tn();if(!a||!s)return null;const p=a.isWorkspaceAccount(),h=s.accountItems.length>1,u=s.accountItems,d=qs([u.find(x=>x.isPersonalAccount()),...u.filter(x=>!x.isPersonalAccount())]);if(d.sort((x,v)=>x.isPersonalAccount()?1:v.isPersonalAccount()?-1:0),!h)return p?n.jsx(Oa,{}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:c?.email})});const g=d.map(x=>n.jsx(e,{disabled:x.isDeactivated(),onClick:()=>{if(x.isDeactivated()||x.id===a?.id)return;i(!0);const{willRedirect:v}=jn(o,x.id,t,m,f);v||kn()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:x.isDeactivated()?n.jsx(Fa,{workspace:x,isLoading:r}):n.jsx(xn,{workspace:x,isLoading:r,currentWorkspaceId:a?.id})},x.id));return n.jsxs(n.Fragment,{children:[n.jsx(pn,{}),n.jsx(E.Separator,{}),g]})}function xn({workspace:e,isLoading:t,currentWorkspaceId:o,showCheck:s=!0}){const a=e.canAccessWithCurrentSession,r=!t&&s&&e.id===o;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(et,{iconSize:"small",workspace:e,className:Ee({"flex-shrink-0":!0})})}),n.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:Lt(Z(),e)}),t&&n.jsx(Se,{}),r&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(uo,{className:"icon-sm"})}),!a&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(mo,{className:"icon-sm"})})]}),!a&&n.jsx("div",{className:"rowDivClassName",children:n.jsx("small",{className:"text-token-text-secondary",children:n.jsx(M,{...e.ssoConnectionName?Y.authenticateWithSSOToAccessWorkspace:Y.authenticateWithoutSSOToAccessWorkspace})})})]})}function Fa({workspace:e,isLoading:t}){const o=Z(),s=e.isOwnerOfAccount(),[a,r]=l.useState(!1),i=Io(e.id);return l.useEffect(()=>{i!=null&&a&&(U.setPurchaseWorkspaceData({minimumSeats:Math.max(i,mt),existingAccount:e}),r(!1))},[i,a,e]),n.jsxs(n.Fragment,{children:[n.jsxs(X,{className:"flex w-full flex-1 items-center gap-2.5",label:o.formatMessage(Y.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(fo,{className:"icon-sm flex-shrink-0 opacity-30"})}),n.jsx("div",{className:"truncate opacity-30",children:Lt(o,e)})]}),t&&n.jsx(Se,{}),!t&&n.jsxs(E.Root,{children:[n.jsx(E.Trigger,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:n.jsx(po,{className:"icon-sm m-1"})}),n.jsx(E.Portal,{children:n.jsxs(E.Content,{children:[s&&n.jsx(n.Fragment,{children:n.jsx(E.Item,{onClick:()=>{i==null?r(!0):U.setPurchaseWorkspaceData({minimumSeats:Math.max(i,mt),existingAccount:e})},children:a?n.jsx(Se,{}):n.jsx(M,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),n.jsx(E.Item,{onClick:()=>{U.setLeaveWorkspaceData(e)},children:n.jsx(M,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function Ba({onClickSettings:e}){const{data:t}=we(),o=ee(),s=$t(),a=Xt(),{openModal:r}=Zt(),i=jt("3905879930");var c=o?.isTeam()??!1,m=!1;if(c&&(m=i.config.get("enabled",!1)),!o||!t)return null;const f=o.isWorkspaceAccount(),p=!s;return n.jsxs("nav",{children:[n.jsx(gn,{menuItemComponent:se}),n.jsx(Ge,{}),f?n.jsx(fn,{menuItemComponent:se,routedMenuItemComponent:Aa}):n.jsx(mn,{menuItemComponent:se}),p&&n.jsx(se,{href:Qs(),target:"_blank",onClick:()=>{j.logEvent(B.clickFaqLink)},icon:go,children:n.jsx(M,{...Y.helpAndFaq})}),n.jsx(se,{onClick:e,icon:qt,testId:"accounts-settings-button",children:n.jsx(M,{...Y.settings})}),c&&m&&n.jsxs(n.Fragment,{children:[n.jsx(se,{onClick:()=>{U.openModal(ce.InviteUsersToWorkspace),j.logEvent(B.accountMemberInviteButton,{location:"dropdown-menu-click"}),q.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Qt,children:n.jsx(M,{...Y.addTeammatesButton})}),n.jsx(Ra,{workspace:o})]}),a&&n.jsx(Wa,{openDownloadModal:r}),n.jsx(Ge,{}),n.jsx(se,{onClick:()=>{j.logEvent(B.clickLogOut,{eventSource:"mouse"}),kt()},icon:Kt,children:n.jsx(M,{...Y.logOut})})]})}function Da(){return Ze()?n.jsx(La,{}):null}function Wa({openDownloadModal:e}){return n.jsxs("span",{children:[n.jsx(Ge,{}),n.jsx(se,{icon:Jt,onClick:()=>{j.logEvent(B.accountMenuClickDownloadApp),e()},children:n.jsx(M,{...Y.downloadApp})})]})}function La(){const{data:e}=we(),t=ee(),o=Ks(),s=Js();if(!t||!e)return null;const a=t.isWorkspaceAccount(),r=e.accountItems.length>1;return n.jsxs(xe.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(et,{iconSize:"gizmo"})}),n.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[n.jsx("div",{dir:"auto",children:s}),a||r?n.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:o}):null]})]})}const Y=Qe({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});function $a(e){q.logEvent("chatgpt_web_thread_tap_new_thread"),at.getItem(rt.HasSeenNewChatModal)===!0?Ut(e):(at.setItem(rt.HasSeenNewChatModal,!0),U.openModal(ce.NoAuthNewChat))}function Mr(){return yo(ce.NoAuthNewChat)?n.jsx(Ua,{onClose:()=>{U.closeModal(ce.NoAuthNewChat)}}):null}function Ua({onClose:e}){const t=Xe(),o=me(),s=En("1934819688"),a=s.config.get("is_redesign_enabled",!1),r=s.config.get("secondary_button_type","cancel"),i=Ht(Oe.signUpButtonText),c=h=>{h.preventDefault(),t({authType:"signup",callback:u=>{q.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),j.logSignUpButtonClicked({location:"New chat modal",provider:u})}})},m=h=>{h.preventDefault(),t({authType:"login",callback:u=>{q.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),j.logLogInButtonClicked({location:"New chat modal",provider:u})}})},f=()=>{q.logEvent("chatgpt_new_chat_modal_cancel_button_clicked"),j.logEvent(B.newChatModalCancelButtonClicked),e()},p=()=>{q.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),j.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),Ut(o),e()};return l.useEffect(()=>{q.logEvent("chatgpt_new_chat_modal_shown"),j.logEvent(B.newChatModalShown)},[]),n.jsx(wn,{isOpen:!0,type:"success",onClose:e,noPadding:!0,size:"custom",className:"max-w-sm",children:n.jsxs("div",{className:"flex flex-col justify-center p-6",children:[n.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[n.jsx("div",{}),n.jsx("div",{className:"text-xl font-medium",children:n.jsx(M,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),n.jsx("div",{className:"flex justify-end",children:a?n.jsx(Pn,{onClick:e}):null})]}),n.jsx("p",{className:"mb-6 text-center text-token-text-secondary",children:n.jsx(M,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:h=>n.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:c,children:h}),login:h=>n.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:m,children:h})}})}),n.jsx(re,{className:"mb-3",color:a?"primary":"danger",size:"giant",onClick:p,children:n.jsx(M,{id:"cBGbrD",defaultMessage:"Clear chat"})}),r==="cancel"?n.jsx(re,{size:"giant",onClick:f,color:"secondary",children:n.jsx(M,{...Oe.cancelButtonText})}):null,r==="login"?n.jsx(re,{size:"giant",onClick:()=>{t({authType:"login",callback:h=>{j.logLogInButtonClicked({location:"New chat modal",provider:h})}})},color:"ghost",children:n.jsx(M,{...Oe.logInButtonText})}):null,r==="signup"?n.jsx(re,{size:"giant",onClick:()=>{t({authType:"signup",callback:h=>{j.logSignUpButtonClicked({location:"New chat modal",provider:h})}})},color:"ghost",children:n.jsx(M,{...i})}):null]})})}function Ha({clientThreadId:e,location:t}){const o=Tt(),{id:s}=no(e),a=so(!0),r=me(),i=wt(),c=_n();return l.useCallback(()=>{Nn(An(o))?$a(r):i?r({pathname:c.pathname,search:c.search},{state:Ys()}):(a({modelId:s,location:t}),q.logEvent("chatgpt_web_thread_tap_new_thread"))},[o,t,s,a,r,i,c])}const Va=ze(()=>qe(()=>import("./in6ut6l17ex025gl.js"),__vite__mapDeps([58,1,2,3,13,12,11,5,6,8,59,60,36,37,38,19])));function Sr({showShareButton:e,showProfileDropdown:t,clientThreadId:o}){const s=io(o),a=Z(),r=nt(o),{layer:i}=Te("1547743984"),c=i.get("show_share_button_text",!1),m=a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),f=Zs(),p=()=>U.openSharingModal(s),h=a.formatMessage({id:"TO+loE",defaultMessage:"New Chat"});return n.jsxs(n.Fragment,{children:[!1,r&&n.jsx(_o,{}),!1,e&&s&&n.jsx(gt,{clientThreadId:o,children:c?n.jsx(re,{onClick:p,icon:We,label:m,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",style:{display:"var(--screen-size-hidden-on-compact-mode)"},children:m}):n.jsx(X,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:n.jsx(Pe,{"data-testid":"share-chat-button",onClick:()=>U.openSharingModal(s),icon:We})})}),f&&e&&s&&n.jsx(gt,{clientThreadId:o,children:n.jsx(X,{label:m,children:n.jsx(ft,{style:{display:"var(--screen-size-hidden-on-wide-mode)"},onClick:p,icon:n.jsx(We,{}),label:m})})}),f&&n.jsx(X,{label:h,children:n.jsx(ft,{className:On.sidebarIcon,icon:n.jsx(Yt,{}),label:h,style:{display:"var(--screen-size-hidden-on-wide-mode)"}})}),t&&n.jsx(za,{})]})}function Ga({to:e,children:t,icon:o}){const s=me();return n.jsx(E.Item,{icon:o,onSelect:()=>s(e),children:t})}function za(){const{isUnauthenticated:e}=Pt();return e?n.jsx(Xa,{}):n.jsx(qa,{})}function qa(){const{data:e}=we(),t=ee(),o=t?.isPlus()??!1,s=t?.isWorkspaceAccount()??!1,{openSettings:a}=Xs(),r=Xt(),{openModal:i}=Zt(),{layer:c}=Te("2888142241"),m=jt("3905879930");var f=t?.isTeam()??!1,p=!1;f&&(p=m.config.get("enabled",!1));const{doesUserHaveAnyAccountsWithPlusFeatures:h}=Rn(),{layer:u}=Te("2670443078");if(!t||!e)return null;const d=e.accountItems.length>1;let g=o;!s&&!o&&h&&u.get("is_gating_fix_enabled",!1)&&(g=h);const x=!s&&!g&&!Et&&c.get("is_upgrade_in_settings",!1);return n.jsxs(Co,{triggerButton:n.jsx("button",{onClick:()=>{j.logEvent(B.accountOpenProfileMenu),q.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",style:{display:"var(--screen-size-hidden-on-compact-mode, flex)"},children:n.jsx(et,{iconSize:"medium"})}),children:[d&&n.jsx(gn,{menuItemComponent:E.Item}),d?n.jsx(E.Separator,{}):null,s?n.jsx(fn,{menuItemComponent:E.Item,routedMenuItemComponent:Ga}):n.jsx(mn,{menuItemComponent:E.Item}),n.jsx(E.Item,{icon:qt,onClick:()=>a(),"data-testid":"settings-menu-item",children:n.jsx(M,{defaultMessage:"Settings",id:"navigation.settings.0"})}),n.jsx(E.Separator,{}),f&&p&&n.jsxs(n.Fragment,{children:[n.jsx(E.Item,{"data-testid":"settings-menu-item-invite-teammates",onClick:()=>{U.openModal(ce.InviteUsersToWorkspace),j.logEvent(B.accountMemberInviteButton,{eventSource:"mouse",location:"profile_drop_down"}),q.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Qt,children:n.jsx(M,{...hn.addTeammatesButton})}),n.jsx(Va,{workspace:t})]}),r&&n.jsx(Ka,{openDownloadModal:i}),x&&n.jsx(Ja,{}),(x||r)&&n.jsx(E.Separator,{}),n.jsx(E.Item,{onClick:()=>{j.logEvent(B.clickLogOut,{eventSource:"mouse"}),j.logLogOutButtonClicked({location:"profile_drop_down"}),kt()},"data-testid":"log-out-menu-item",icon:Kt,children:n.jsx(M,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function Qa({onClick:e,className:t,testId:o}){const s=Z(),a=wt(),r=a?s.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):s.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return n.jsx(X,{sideOffset:4,label:r,className:Ee("flex",t),children:n.jsx(Pe,{onClick:()=>{U.closePopoverNavSidebar(),e()},icon:a?bo:Yt,surfaceContext:"secondary","aria-label":r,"data-testid":o})})}function Tr({clientThreadId:e}){const[t]=en(a=>[a.activeStageSidebar]),o=tn(),s=Ha({clientThreadId:e,location:"Navigation actions"});return!o&&!t?null:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ya,{}),n.jsx(Qa,{onClick:s})]})}function Ka({openDownloadModal:e}){return n.jsx("span",{children:n.jsx(E.Item,{icon:Jt,onClick:()=>{e(),j.logEvent(B.accountMenuClickDownloadApp)},children:n.jsx(M,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function Ja(){const e=me(),o=ee()?.wasPaidCustomer()??!1,s=()=>{q.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),j.logEvent(B.plusUpgradeInSettingsMenuClicked),Ye(e,"Upper right settings menu")};return n.jsx(E.Item,{icon:ho,onClick:s,children:o?n.jsx(M,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):n.jsx(M,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Ya(){const e=Z(),[t]=en(r=>[r.activeStageSidebar]),o=tn(),s=$t(),{isUnauthenticated:a}=Pt();return!t&&!o||!s||a?null:n.jsx(X,{label:e.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:n.jsx(Pe,{"aria-label":e.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:U.toggleNavSidebar,icon:vo,surfaceContext:"primary"})})}function Xa(){const e=Xe(),t=eo(),o=Ht(hn.signUpCta),{layer:s}=Te("3637408529"),a=s.get("is_desktop_primary_auth_button_on_right",!1),r=()=>{e({authType:"login",callback:p=>{j.logLogInButtonClicked({location:"Chat header",provider:p})}})},i=()=>{e({authType:"signup",callback:p=>{j.logSignUpButtonClicked({location:"Chat header",provider:p})}})},c=n.jsx(re,{onClick:r,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:n.jsx(M,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),m=n.jsx(re,{color:t?"secondary":"primary",onClick:i,size:"small","data-testid":"signup-button",children:n.jsx(M,{...o})},"signup"),f=t?[c,m]:[m,c];return n.jsx("div",{className:"flex items-center justify-center gap-2",children:a?f.reverse():f})}const hn=Qe({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});export{Mo as A,Tr as B,Sr as C,Mr as D,Ya as E,za as L,na as M,Qa as N,Na as P,ta as R,xr as T,Ir as U,qa as a,ea as b,yr as c,Ha as d,cn as e,Ae as f,fr as g,$a as h,hr as i,sn as j,Cr as k,nt as l,lr as m,cr as n,pr as o,ur as p,mr as q,br as r,on as s,vr as t,rn as u,gr as v,dr as w,Yo as x,Xo as y,fe as z};
//# sourceMappingURL=ofm77phditeesz2a.js.map
