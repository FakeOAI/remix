import{N as H,r as B}from"./h3lg90w4eburb9l1.js";import{s as Re}from"./g5cznpb942b2fdl8.js";import"./eisknr83d7xonp4v.js";import"./itrk5c5jq0xa5b9u.js";import"./d57ytrufyxi9ftf7.js";import"./bv82nytha89yynjj.js";import"./g4oc09mc36zm5yyj.js";import"./hrzxq093sk8tzi40.js";import"./esx1k4id2bozw9ik.js";import"./f4ehhwrzc0vcmm1z.js";import"./mwdkpqhnensqpx9w.js";import"./ib0rzjo7jsw69270.js";import"./ofm77phditeesz2a.js";import"./g34w7dm96iu72qbz.js";import"./c46pq1bupx9ciq93.js";import"./qhqoq7wpxzplmlem.js";import"./gu129tfluy2pk8r8.js";import"./kdtfwn2zgs7lv4nm.js";import"./jzcja7m2krt3h1u8.js";import"./gobs7jvyy4dso3c3.js";import"./4jfs12k7mvkh5eep.js";import"./30zkryfp9qppzscc.js";import"./o19gqs9pq4dz93zr.js";import"./e9ujw9iv31g6k44l.js";const Ae=Re("div")({name:"NumberOverlayEditorStyle",class:"gdg-n15fjm3e",propsAsIs:!1});function de(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}var Y;(function(e){e.event="event",e.props="prop"})(Y||(Y={}));function $(){}function Oe(e){var t,r=void 0;return function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return t&&n.length===t.length&&n.every(function(i,l){return i===t[l]})||(t=n,r=e.apply(void 0,n)),r}}function ee(e){return!!(e||"").match(/\d/)}function q(e){return e==null}function Te(e){return typeof e=="number"&&isNaN(e)}function me(e){return q(e)||Te(e)||typeof e=="number"&&!isFinite(e)}function ge(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function Be(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function _e(e,t,r){var n=Be(r),a=e.search(/[1-9]/);return a=a===-1?e.length:a,e.substring(0,a)+e.substring(a,e.length).replace(n,"$1"+t)}function Fe(e){var t=B.useRef(e);t.current=e;var r=B.useRef(function(){for(var n=[],a=arguments.length;a--;)n[a]=arguments[a];return t.current.apply(t,n)});return r.current}function ue(e,t){t===void 0&&(t=!0);var r=e[0]==="-",n=r&&t;e=e.replace("-","");var a=e.split("."),i=a[0],l=a[1]||"";return{beforeDecimal:i,afterDecimal:l,hasNegation:r,addNegation:n}}function Le(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var r=e.split("."),n=r[0].replace(/^0+/,"")||"0",a=r[1]||"";return(t?"-":"")+n+(a?"."+a:"")}function he(e,t,r){for(var n="",a=r?"0":"",i=0;i<=t-1;i++)n+=e[i]||a;return n}function fe(e,t){return Array(t+1).join(e)}function pe(e){var t=e+"",r=t[0]==="-"?"-":"";r&&(t=t.substring(1));var n=t.split(/[eE]/g),a=n[0],i=n[1];if(i=Number(i),!i)return r+a;a=a.replace(".","");var l=1+i,g=a.length;return l<0?a="0."+fe("0",Math.abs(l))+a:l>=g?a=a+fe("0",l-g):a=(a.substring(0,l)||"0")+"."+a.substring(l),r+a}function se(e,t,r){if(["","-"].indexOf(e)!==-1)return e;var n=(e.indexOf(".")!==-1||r)&&t,a=ue(e),i=a.beforeDecimal,l=a.afterDecimal,g=a.hasNegation,S=parseFloat("0."+(l||"0")),y=l.length<=t?"0."+l:S.toFixed(t),h=y.split("."),d=i.split("").reverse().reduce(function(N,w,m){return N.length>m?(Number(N[0])+Number(w)).toString()+N.substring(1,N.length):w+N},h[0]),p=he(h[1]||"",t,r),x=g?"-":"",c=n?".":"";return""+x+d+c+p}function Z(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var r=e.createTextRange();return r.move("character",t),r.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var Se=Oe(function(e,t){for(var r=0,n=0,a=e.length,i=t.length;e[r]===t[r]&&r<a;)r++;for(;e[a-1-n]===t[i-1-n]&&i-n>r&&a-n>r;)n++;return{from:{start:r,end:a-n},to:{start:r,end:i-n}}});function je(e,t,r){return Math.min(Math.max(e,t),r)}function oe(e){return Math.max(e.selectionStart,e.selectionEnd)}function Me(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function Pe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function ke(e){var t=e.currentValue,r=e.formattedValue,n=e.currentValueIndex,a=e.formattedValueIndex;return t[n]===r[a]}function Ke(e,t,r,n,a,i,l){l===void 0&&(l=ke);var g=a.findIndex(function(k){return k}),S=e.slice(0,g);!t&&!r.startsWith(S)&&(t=S,r=S+r,n=n+S.length);for(var y=r.length,h=e.length,d={},p=new Array(y),x=0;x<y;x++){p[x]=-1;for(var c=0,N=h;c<N;c++){var w=l({currentValue:r,lastValue:t,formattedValue:e,currentValueIndex:x,formattedValueIndex:c});if(w&&d[c]!==!0){p[x]=c,d[c]=!0;break}}}for(var m=n;m<y&&(p[m]===-1||!i(r[m]));)m++;var _=m===y||p[m]===-1?h:p[m];for(m=n-1;m>0&&p[m]===-1;)m--;var L=m===-1||p[m]===-1?0:p[m]+1;return L>_?_:n-L<_-n?L:_}function ve(e,t,r,n){var a=e.length;if(t=je(t,0,a),n==="left"){for(;t>=0&&!r[t];)t--;t===-1&&(t=r.indexOf(!0))}else{for(;t<=a&&!r[t];)t++;t>a&&(t=r.lastIndexOf(!0))}return t===-1&&(t=a),t}function We(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),r=0,n=t.length;r<n;r++)t[r]=!!(ee(e[r])||ee(e[r-1]));return t}function xe(e,t,r,n,a,i){i===void 0&&(i=$);var l=Fe(function(c,N){var w,m;return me(c)?(m="",w=""):typeof c=="number"||N?(m=typeof c=="number"?pe(c):c,w=n(m)):(m=a(c,void 0),w=n(m)),{formattedValue:w,numAsString:m}}),g=B.useState(function(){return l(q(e)?t:e,r)}),S=g[0],y=g[1],h=function(c,N){c.formattedValue!==S.formattedValue&&y({formattedValue:c.formattedValue,numAsString:c.value}),i(c,N)},d=e,p=r;q(e)&&(d=S.numAsString,p=!0);var x=l(d,p);return B.useMemo(function(){y(x)},[x.formattedValue]),[S,h]}function Ue(e){return e.replace(/[^0-9]/g,"")}function $e(e){return e}function Ge(e){var t=e.type;t===void 0&&(t="text");var r=e.displayType;r===void 0&&(r="input");var n=e.customInput,a=e.renderText,i=e.getInputRef,l=e.format;l===void 0&&(l=$e);var g=e.removeFormatting;g===void 0&&(g=Ue);var S=e.defaultValue,y=e.valueIsNumericString,h=e.onValueChange,d=e.isAllowed,p=e.onChange;p===void 0&&(p=$);var x=e.onKeyDown;x===void 0&&(x=$);var c=e.onMouseUp;c===void 0&&(c=$);var N=e.onFocus;N===void 0&&(N=$);var w=e.onBlur;w===void 0&&(w=$);var m=e.value,_=e.getCaretBoundary;_===void 0&&(_=We);var L=e.isValidInputCharacter;L===void 0&&(L=ee);var k=e.isCharacterSame,j=de(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),G=xe(m,S,!!y,l,g,h),K=G[0],b=K.formattedValue,M=K.numAsString,W=G[1],P=B.useRef({formattedValue:b,numAsString:M}),z=function(o,u){P.current={formattedValue:o.formattedValue,numAsString:o.value},W(o,u)},U=B.useState(!1),J=U[0],Q=U[1],f=B.useRef(null),s=B.useRef({setCaretTimeout:null,focusTimeout:null});B.useEffect(function(){return Q(!0),function(){clearTimeout(s.current.setCaretTimeout),clearTimeout(s.current.focusTimeout)}},[]);var O=l,D=function(o,u){var v=parseFloat(u);return{formattedValue:o,value:u,floatValue:isNaN(v)?void 0:v}},I=function(o,u,v){o.selectionStart===0&&o.selectionEnd===o.value.length||(Z(o,u),s.current.setCaretTimeout=setTimeout(function(){o.value===v&&o.selectionStart!==o.selectionEnd&&Z(o,u)},0))},R=function(o,u,v){return ve(o,u,_(o),v)},F=function(o,u,v){var C=_(u),E=Ke(u,b,o,v,C,L,k);return E=ve(u,E,C),E},te=function(o){var u=o.formattedValue;u===void 0&&(u="");var v=o.input,C=o.setCaretPosition;C===void 0&&(C=!0);var E=o.source,V=o.event,A=o.numAsString,T=o.caretPos;if(v){if(T===void 0&&C){var X=o.inputValue||v.value,ie=oe(v);v.value=u,T=F(X,u,ie)}v.value=u,C&&T!==void 0&&I(v,T,u)}u!==b&&z(D(u,A),{event:V,source:E})};B.useEffect(function(){var o=P.current,u=o.formattedValue,v=o.numAsString;b!==u&&(b!==M||u!==v)&&z(D(b,M),{event:void 0,source:Y.props})},[b,M]);var ne=f.current?oe(f.current):void 0,re=typeof window<"u"?B.useLayoutEffect:B.useEffect;re(function(){var o=f.current;if(b!==P.current.formattedValue&&o){var u=F(P.current.formattedValue,b,ne);o.value=b,I(o,u,b)}},[b]);var be=function(o,u,v){var C=Se(b,o),E=Object.assign(Object.assign({},C),{lastValue:b}),V=g(o,E),A=O(V);if(V=g(A,void 0),d&&!d(D(A,V))){var T=u.target,X=oe(T),ie=F(o,b,X);return T.value=b,I(T,ie,b),!1}return te({formattedValue:A,numAsString:V,inputValue:o,event:u,source:v,setCaretPosition:!0,input:u.target}),!0},Ve=function(o){var u=o.target,v=u.value,C=be(v,o,Y.event);C&&p(o)},Ne=function(o){var u=o.target,v=o.key,C=u.selectionStart,E=u.selectionEnd,V=u.value;V===void 0&&(V="");var A;if(v==="ArrowLeft"||v==="Backspace"?A=Math.max(C-1,0):v==="ArrowRight"?A=Math.min(C+1,V.length):v==="Delete"&&(A=C),A===void 0||C!==E){x(o);return}var T=A;if(v==="ArrowLeft"||v==="ArrowRight"){var X=v==="ArrowLeft"?"left":"right";T=R(V,A,X),T!==A&&o.preventDefault()}else v==="Delete"&&!L(V[A])?T=R(V,A,"right"):v==="Backspace"&&!L(V[A])&&(T=R(V,A,"left"));T!==A&&I(u,T,V),o.isUnitTestRun&&I(u,T,V),x(o)},we=function(o){var u=o.target,v=u.selectionStart,C=u.selectionEnd,E=u.value;if(E===void 0&&(E=""),v===C){var V=R(E,v);V!==v&&I(u,V,E)}c(o)},De=function(o){o.persist&&o.persist();var u=o.target;f.current=u,s.current.focusTimeout=setTimeout(function(){var v=u.selectionStart,C=u.selectionEnd,E=u.value;E===void 0&&(E="");var V=R(E,v);V!==v&&!(v===0&&C===E.length)&&I(u,V,E),N(o)},0)},Ie=function(o){f.current=null,clearTimeout(s.current.focusTimeout),clearTimeout(s.current.setCaretTimeout),w(o)},Ce=J&&Me()?"numeric":void 0,le=Object.assign({inputMode:Ce},j,{type:t,value:b,onChange:Ve,onKeyDown:Ne,onMouseUp:we,onFocus:De,onBlur:Ie});if(r==="text")return a?H.createElement(H.Fragment,null,a(b,j)||null):H.createElement("span",Object.assign({},j,{ref:i}),b);if(n){var Ee=n;return H.createElement(Ee,Object.assign({},le,{ref:i}))}return H.createElement("input",Object.assign({},le,{ref:i}))}function ce(e,t){var r=t.decimalScale,n=t.fixedDecimalScale,a=t.prefix;a===void 0&&(a="");var i=t.suffix;i===void 0&&(i="");var l=t.allowNegative,g=t.thousandsGroupStyle;if(g===void 0&&(g="thousand"),e===""||e==="-")return e;var S=ae(t),y=S.thousandSeparator,h=S.decimalSeparator,d=r!==0&&e.indexOf(".")!==-1||r&&n,p=ue(e,l),x=p.beforeDecimal,c=p.afterDecimal,N=p.addNegation;return r!==void 0&&(c=he(c,r,!!n)),y&&(x=_e(x,y,g)),a&&(x=a+x),i&&(c=c+i),N&&(x="-"+x),e=x+(d&&h||"")+c,e}function ae(e){var t=e.decimalSeparator;t===void 0&&(t=".");var r=e.thousandSeparator,n=e.allowedDecimalSeparators;return r===!0&&(r=","),n||(n=[t,"."]),{decimalSeparator:t,thousandSeparator:r,allowedDecimalSeparators:n}}function Ze(e,t){e===void 0&&(e="");var r=new RegExp("(-)"),n=new RegExp("(-)(.)*(-)"),a=r.test(e),i=n.test(e);return e=e.replace(/-/g,""),a&&!i&&t&&(e="-"+e),e}function ze(e,t){return new RegExp("(^-)|[0-9]|"+ge(e),"g")}function He(e,t,r){return e===""?!0:!t?.match(/\d/)&&!r?.match(/\d/)&&typeof e=="string"&&!isNaN(Number(e))}function qe(e,t,r){var n;t===void 0&&(t=Pe(e));var a=r.allowNegative,i=r.prefix;i===void 0&&(i="");var l=r.suffix;l===void 0&&(l="");var g=r.decimalScale,S=t.from,y=t.to,h=y.start,d=y.end,p=ae(r),x=p.allowedDecimalSeparators,c=p.decimalSeparator,N=e[d]===c;if(ee(e)&&(e===i||e===l)&&t.lastValue==="")return e;if(d-h===1&&x.indexOf(e[h])!==-1){var w=g===0?"":c;e=e.substring(0,h)+w+e.substring(h+1,e.length)}var m=function(s,O,D){var I=!1,R=!1;i.startsWith("-")?I=!1:s.startsWith("--")?(I=!1,R=!0):l.startsWith("-")&&s.length===l.length?I=!1:s[0]==="-"&&(I=!0);var F=I?1:0;return R&&(F=2),F&&(s=s.substring(F),O-=F,D-=F),{value:s,start:O,end:D,hasNegation:I}},_=m(e,h,d),L=_.hasNegation;n=_,e=n.value,h=n.start,d=n.end;var k=m(t.lastValue,S.start,S.end),j=k.start,G=k.end,K=k.value,b=e.substring(h,d);e.length&&K.length&&(j>K.length-l.length||G<i.length)&&!(b&&l.startsWith(b))&&(e=K);var M=0;e.startsWith(i)?M+=i.length:h<i.length&&(M=h),e=e.substring(M),d-=M;var W=e.length,P=e.length-l.length;e.endsWith(l)?W=P:(d>P||d>e.length-l.length)&&(W=d),e=e.substring(0,W),e=Ze(L?"-"+e:e,a),e=(e.match(ze(c))||[]).join("");var z=e.indexOf(c);e=e.replace(new RegExp(ge(c),"g"),function(s,O){return O===z?".":""});var U=ue(e,a),J=U.beforeDecimal,Q=U.afterDecimal,f=U.addNegation;return y.end-y.start<S.end-S.start&&J===""&&N&&!parseFloat(Q)&&(e=f?"-":""),e}function Je(e,t){var r=t.prefix;r===void 0&&(r="");var n=t.suffix;n===void 0&&(n="");var a=Array.from({length:e.length+1}).map(function(){return!0}),i=e[0]==="-";a.fill(!1,0,r.length+(i?1:0));var l=e.length;return a.fill(!1,l-n.length+1,l+1),a}function Qe(e){var t=ae(e),r=t.thousandSeparator,n=t.decimalSeparator,a=e.prefix;a===void 0&&(a="");var i=e.allowNegative;if(i===void 0&&(i=!0),r===n)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+r+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+n+` (default value for decimalSeparator is .)
     `);return a.startsWith("-")&&i&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+a+`
      allowNegative: `+i+`
    `),i=!1),Object.assign(Object.assign({},e),{allowNegative:i})}function Xe(e){e=Qe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,r=e.allowNegative,n=e.allowLeadingZeros,a=e.onKeyDown;a===void 0&&(a=$);var i=e.onBlur;i===void 0&&(i=$);var l=e.thousandSeparator,g=e.decimalScale,S=e.fixedDecimalScale,y=e.prefix;y===void 0&&(y="");var h=e.defaultValue,d=e.value,p=e.valueIsNumericString,x=e.onValueChange,c=de(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),N=ae(e),w=N.decimalSeparator,m=N.allowedDecimalSeparators,_=function(f){return ce(f,e)},L=function(f,s){return qe(f,s,e)},k=q(d)?h:d,j=p??He(k,y,t);q(d)?q(h)||(j=j||typeof h=="number"):j=j||typeof d=="number";var G=function(f){return me(f)?f:(typeof f=="number"&&(f=pe(f)),j&&typeof g=="number"?se(f,g,!!S):f)},K=xe(G(d),G(h),!!j,_,L,x),b=K[0],M=b.numAsString,W=b.formattedValue,P=K[1],z=function(f){var s=f.target,O=f.key,D=s.selectionStart,I=s.selectionEnd,R=s.value;if(R===void 0&&(R=""),D!==I){a(f);return}O==="Backspace"&&R[0]==="-"&&D===y.length+1&&r&&Z(s,1),g&&S&&(O==="Backspace"&&R[D-1]===w?(Z(s,D-1),f.preventDefault()):O==="Delete"&&R[D]===w&&f.preventDefault()),m?.includes(O)&&R[D]===w&&Z(s,D+1);var F=l===!0?",":l;O==="Backspace"&&R[D-1]===F&&Z(s,D-1),O==="Delete"&&R[D]===F&&Z(s,D+1),a(f)},U=function(f){var s=M;if(s.match(/\d/g)||(s=""),n||(s=Le(s)),S&&g&&(s=se(s,g,S)),s!==M){var O=ce(s,e);P({formattedValue:O,value:s,floatValue:parseFloat(s)},{event:f,source:Y.event})}i(f)},J=function(f){return f===w?!0:ee(f)},Q=function(f){var s=f.currentValue,O=f.lastValue,D=f.formattedValue,I=f.currentValueIndex,R=f.formattedValueIndex,F=s[I],te=D[R],ne=Se(O,s),re=ne.to;return I>=re.start&&I<re.end&&m&&m.includes(F)&&te===w?!0:F===te};return Object.assign(Object.assign({},c),{value:W,valueIsNumericString:!1,isValidInputCharacter:J,isCharacterSame:Q,onValueChange:P,format:_,removeFormatting:L,getCaretBoundary:function(f){return Je(f,e)},onKeyDown:z,onBlur:U})}function Ye(e){var t=Xe(e);return H.createElement(Ge,Object.assign({},t))}function ye(){return Intl.NumberFormat()?.formatToParts(1.1)?.find(r=>r.type==="decimal")?.value??"."}function et(){return ye()==="."?",":"."}const Dt=e=>{const{value:t,onChange:r,disabled:n,highlight:a,validatedSelection:i,fixedDecimals:l,allowNegative:g,thousandSeparator:S,decimalSeparator:y}=e,h=B.useRef();return B.useLayoutEffect(()=>{if(i!==void 0){const d=typeof i=="number"?[i,null]:i;h.current?.setSelectionRange(d[0],d[1])}},[i]),B.createElement(Ae,null,B.createElement(Ye,{autoFocus:!0,getInputRef:h,className:"gdg-input",onFocus:d=>d.target.setSelectionRange(a?0:d.target.value.length,d.target.value.length),disabled:n===!0,decimalScale:l,allowNegative:g,thousandSeparator:S??et(),decimalSeparator:y??ye(),value:Object.is(t,-0)?"-":t??"",onValueChange:r}))};export{Dt as default};
//# sourceMappingURL=g2zof20pjtc0z72k.js.map
