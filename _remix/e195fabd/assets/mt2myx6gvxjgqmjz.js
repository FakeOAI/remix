import{z as T,j as e,P as m,bg as F,J as c,bx as fe,W as ge,r as p,bj as pe,b2 as he,b3 as xe,b4 as be,b6 as ve,K as P,c as k,G as E,H as je,I as Se,N as K,ao as V,F as A,bh as I,y,cr as Me,az as Z,ar as B,e6 as ye,ag as J,bo as Q,f4 as X,aN as Ce,a6 as ke,cv as we,f5 as Ne,aG as Ie,C as Te,x as Pe,ee as _e,aD as Ue,u as z}from"./h0b670ehlczrzmby.js";import{fi as Y,be as W,bf as ee,v as L,U as h,fj as Fe,b8 as Ee,aZ as N,ce as Be,cd as Le,fk as U,fl as Re,fm as Oe,fn as G,fo as Ae,fp as D,s as We,a$ as se,fq as De,fr as $e,fs as He,ft as q,fu as ze,f9 as Ge}from"./nhycp86hlx2bwzb5.js";import{as as qe,B as Ke,bs as Ve,bt as te,A as Ze,bu as Je,aW as Qe,$ as Xe}from"./l80md5euhzcfcwih.js";import{N as ae,c as Ye,E as es}from"./ogz2chpqk6y3mtrw.js";import{m as ne}from"./digndrx9sk290tqa.js";import{B as ss,D as R}from"./bkali08fbs0zdeff.js";import{A as ts}from"./e0si7fcmujopszjn.js";function Is({onClick:t,className:a,...s}){return e.jsx(Fe,{onClick:t,className:k(a,"flex-grow overflow-hidden"),...s})}function Ts({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=T();return s||!a?null:e.jsx(ae,{className:"mr-3",onClick:()=>{m.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function Ps({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=T(),i=Y();return s?null:a?i?e.jsx(ns,{}):e.jsx(as,{}):e.jsx(ae,{onClick:()=>{m.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function as(){const t=W(),a=ee(ie.signUpButtonText);return e.jsx(F,{as:"button",size:"small",color:"primary",onClick:()=>{t({authType:"signup",callback:s=>{m.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:s})}})},children:e.jsx(c,{...a})})}function ns(){const t=W();return e.jsx(F,{as:"button",size:"small",color:"primary",onClick:()=>{t({authType:"login",callback:a=>{m.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:a})}})},"data-testid":"mobile-login-button",children:e.jsx(c,{...fe.logInButtonText})})}function is({onClick:t}){return e.jsxs("button",{type:"button",className:"inline-flex rounded-md hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:t,"data-testid":"open-sidebar-button",children:[e.jsx("span",{className:"sr-only",children:e.jsx(c,{...ie.openSidebar})}),e.jsx(qe,{className:"icon-lg mx-2 text-token-text-secondary"})]})}const rs=({onClickOpenSidebar:t,children:a,showNavSidebar:s,leftContent:i,rightContent:r,bottomContent:n})=>{const o=L(f=>f.activeSidebar),d=ge().asPath;return p.useEffect(()=>{o==="popover-nav"&&h.setActiveSidebar(!1)},[d]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"draggable sticky top-0 z-10 flex min-h-[60px] items-center justify-center border-transparent bg-token-main-surface-primary pl-0 md:hidden",children:[(s||i)&&e.jsxs("div",{className:"no-draggable absolute bottom-0 left-0 top-0 ml-3 inline-flex items-center justify-center",children:[s&&e.jsx(is,{onClick:t}),i]}),e.jsx("div",{className:"no-draggable",children:a}),r&&e.jsx("div",{className:"no-draggable absolute bottom-0 right-0 top-0 mr-3 inline-flex items-center justify-center",children:r})]}),n&&e.jsx("div",{className:"no-draggable flex w-full items-center justify-center bg-token-main-surface-primary md:hidden",children:n})]})};function os({isPopoverOnDesktop:t=!1,isExpanded:a=!1,children:s}){const i=pe();return e.jsxs(e.Fragment,{children:[!i||t?e.jsx(cs,{children:s}):null,e.jsx(ls,{isExpanded:!t&&a,children:s})]})}function ls({isExpanded:t,children:a}){const s=p.useRef(null);return e.jsx(ne.div,{className:"flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary max-md:!w-0",ref:s,initial:!1,animate:{width:t?"260px":0,transition:{type:"spring",bounce:.12,duration:.64}},onAnimationStart:()=>{s.current&&(s.current.style.visibility="visible")},onAnimationComplete:()=>{s.current&&(t||(s.current.style.visibility="hidden"))},children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col",children:a})})})}function cs({children:t}){const a=L(s=>s.activeSidebar);return e.jsx(he,{open:a==="popover-nav",onOpenChange:s=>{s||h.setActiveSidebar(!1)},children:e.jsxs(xe,{children:[e.jsx(be,{className:"fixed inset-0 z-10 bg-white/50 radix-state-open:animate-show dark:bg-black/50"}),e.jsx(ve,{className:"fixed left-0 top-0 z-50 h-full max-w-xs border-r border-gray-200 bg-token-sidebar-surface-primary shadow-[0_0_64px_0_rgba(0,0,0,0.07)] focus:outline-none radix-state-closed:animate-sidebarHide radix-state-open:animate-sidebarShow dark:border-gray-800",children:t})]})})}const ie=P({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}});function ds({workspace:t}){var n;const a=E(),s=Ee(N.InviteUsersToWorkspace),i=Be()??!0,r=(n=Le())==null?void 0:n.map(o=>o.hostname);return e.jsx(je,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Se,type:"success",title:t.data.name!=null?a.formatMessage(w.inviteMemberModalTitle,{workspaceName:t.data.name}):a.formatMessage(w.inviteMemberModalTitleUntitledWorkspace),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(c,{...w.inviteMemberModalDescription})}),!!(r!=null&&r.length)&&!i&&e.jsxs("p",{className:"mt-2",children:[e.jsx(c,{...w.prohibitExternalDomainsDescription}),"Â ",e.jsx("b",{children:r.join(", ")})]})]}),children:e.jsx(ts,{workspace:t,canResendInviteEmails:!0,onCancel:()=>h.closeModal(N.InviteUsersToWorkspace),onSuccess:()=>h.closeModal(N.InviteUsersToWorkspace),cancelButtonText:a.formatMessage(w.inviteMemberInviteCancelButton)})})}const w=P({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},prohibitExternalDomainsDescription:{id:"ky8nVd",defaultMessage:"Only users from the following emails can be added to this workspace:"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}});function us({showFreeTrialLoadingPayment:t,handleGetPaymentLink:a}){const s=E(),i=()=>{t||(U(!0),a())},r=b=>{b.stopPropagation(),Re(!0),Oe(!0)},{data:n,isLoading:o,isSuccess:l}=V({queryKey:["claimedReferralInvite"],queryFn:()=>A.getClaimedReferralInvite(),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),d=n==null?void 0:n.invite_code,[f,g]=p.useState(!1);if(p.useEffect(()=>{d&&!f&&l&&(g(!0),I.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),m.logEvent(y.chatgptReferralShowClaimedSidebartMenuPromo))},[d,g,f,l]),!d||o||!l)return null;const u=d.invite_metadata.invite_data,S=u!=null&&u.referral_trial_duration_months?(u==null?void 0:u.referral_trial_duration_months)>1?s.formatMessage(O.monthsOfBenefit,{referralTrialDurationMonths:u==null?void 0:u.referral_trial_duration_months}):s.formatMessage(O.daysOfBenefit,{referralTrialDurationDays:u==null?void 0:u.referral_trial_duration_days}):null;return e.jsx(ne.div,{className:k("relative",{"cursor-progress opacity-50":t}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:e.jsxs(ms,{className:k(t&&"opacity-75"),onClick:i,children:[e.jsxs("div",{className:"flex w-full flex-row items-center justify-start gap-3",children:[e.jsx(Me,{className:"icon-sm shrink-0"}),e.jsx(c,{...O.freeTrialCta,values:{duration:S}})]}),!t&&e.jsx(Ke,{onClick:r,className:"icon-md shrink-0 rounded-full p-0.5 text-token-text-tertiary opacity-50 transition-colors duration-200 hover:bg-[#0077FF] hover:text-red-500 group-hover:opacity-100"}),e.jsx("span",{className:"absolute top-11 h-0 w-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}const ms=K.a`group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm`,O=P({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}"}});function fs(){const t=E(),a=Z(),s=B(),i=!s,r=(s==null?void 0:s.hasPaidSubscription())??!1,n=(s==null?void 0:s.hasClaimedFreeTrial())??!1,o=p.useMemo(()=>s==null?void 0:s.subscriptionAnalyticsParams,[s]),l=async()=>{U(!0),m.logEvent(y.clickAccountPaymentCheckout,o);try{const v=await A.getCheckoutLink(a);window.location.href=v.url}catch{ke.warning(t.formatMessage(j.paymentErrorWarning),{hasCloseButton:!0}),U(!1)}finally{}},d=()=>{g||(U(!0),l())},f=G(v=>v.didCloseFreeTrial),g=G(v=>v.showFreeTrialLoadingPayment),u=!f&&n,S=(s==null?void 0:s.wasPaidCustomer())??!1;let b=(s==null?void 0:s.isWorkspaceAccount())??!1;const M=(s==null?void 0:s.isPlus())??!1,{doesUserHaveAnyAccountsWithPlusFeatures:_}=ye(),{layer:x}=J("2670443078");let $=M;!b&&!M&&_&&x.get("is_gating_fix_enabled",!1)&&($=_,b=!0);const le=!i&&!b,ce=Q(),de=()=>{m.logEvent(y.clickSidebarAccountPaymentMenuItem,o),We(ce,"Sidebar account payment menu item")},{setShowReferralInviteModal:H}=Ae(v=>({setShowReferralInviteModal:v.setShowReferralInviteModal})),ue=p.useCallback(()=>{I.logEvent("chatgpt_referral_invite_sidebar_clicked"),m.logEvent(y.chatgptReferralInviteSidebarClicked,o),H(!0,()=>{m.logEvent(y.clickSidebarAccountPaymentMenuItem,o)})},[o,H]),me=(s==null?void 0:s.isTeam())??!1;return e.jsxs(e.Fragment,{children:[((a==null?void 0:a.includes(X))||r)&&e.jsx(hs,{analyticsParams:o,handleReferralInvite:ue}),!r&&u&&e.jsx(us,{showFreeTrialLoadingPayment:g,handleGetPaymentLink:l}),me&&e.jsx(ps,{}),le&&e.jsx(D,{onClick:u?d:de,className:"m-0 rounded-lg px-2",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(gs,{wasPaidCustomer:S,showFreeTrialLoadingPayment:g,hasPlusSubscription:$})})})})]})}const gs=({wasPaidCustomer:t,showFreeTrialLoadingPayment:a,hasPlusSubscription:s})=>a?e.jsx(Ce,{className:"icon-sm shrink-0"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(Ve,{className:"icon-sm shrink-0"})}),e.jsx("div",{className:"flex flex-col",children:t?e.jsx(c,{...j.renewPlus}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s?e.jsx(c,{...j.createATeamWorkspace}):e.jsx(c,{...j.upgradePlan})}),e.jsx("span",{className:"line-clamp-1 text-xs text-token-text-tertiary",children:s?e.jsx(c,{...j.upgradeToTeamUpsell}):e.jsx(c,{...j.upgradeToPlusUpsell})})]})})]}),ps=()=>{const t=B();return e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>{h.openModal(N.InviteUsersToWorkspace)},className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(te,{className:"icon-sm shrink-0"})}),e.jsx(c,{...j.inviteMembers})]})})}),t!=null?e.jsx(ds,{workspace:t}):null]})},hs=({analyticsParams:t,handleReferralInvite:a})=>{const s=Z(),i=(s==null?void 0:s.includes(X))??!1,r=B(),{data:n}=V({queryKey:["referralInvites"],queryFn:()=>A.getEligibleReferralInvites(),enabled:i}),o=r&&!r.isOrWasPaidCustomer()&&!r.hasPlusFeatures(),l=(n==null?void 0:n.invites_remaining)&&(n==null?void 0:n.invites_remaining)>0,d=o&&l,[f,g]=p.useState(!1);return p.useEffect(()=>{d&&!f&&(g(!0),I.logEvent("chatgpt_referral_show_sidebar_menu_item"),m.logEvent(y.chatgptReferralShowSidebarMenuItem,t))},[d,g,f,t]),d?e.jsx(D,{onClick:a,className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(te,{className:"icon-sm shrink-0"})}),e.jsx(c,{...j.inviteReferral})]})})}):null},j=P({upgradePlan:{id:"PaymentMenuItems.upgradePlan",defaultMessage:"Upgrade plan"},createATeamWorkspace:{id:"PaymentMenuItems.createATeamWorkspace",defaultMessage:"Add Team workspace"},upgradeToTeamUpsell:{id:"PaymentMenuItems.upgradeToTeamUpsell",defaultMessage:"Collaborate on a Team plan"},upgradeToPlusUpsell:{id:"PaymentMenuItems.upgradeToPlusUpsell.0",defaultMessage:"More access to the best models"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend"},inviteMembers:{id:"PaymentMenuItems.inviteMembers.0",defaultMessage:"Invite members"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}});function _s({navHeader:t,children:a,className:s}){const i=E(),r=p.useRef(null),n=we(),{isUnauthenticated:o}=T(),{layer:l}=J("1578749296"),d=l.get("is_sticky_toggle_off",!1);return p.useEffect(()=>{d&&h.openSidebar()},[d]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"draggable relative h-full w-full flex-1 items-start border-white/20",children:[e.jsx(Ne,{asChild:!0,children:e.jsx("h2",{children:e.jsx(c,{...C.chatHistoryLabel})})}),e.jsxs("nav",{className:k("flex h-full w-full flex-col px-3",s),"aria-label":i.formatMessage(C.chatHistoryLabel),children:[t,e.jsx(bs,{ref:r,$disableScroll:n&&!o,children:a}),e.jsx(Ie,{children:e.jsx(xs,{})})]})]})})}function xs(){const[t]=p.useState(()=>{const l=Te.getCookie(Pe.Workspace);return typeof l=="string"&&l!==_e}),a=B(),s=(a==null?void 0:a.data)==null,{isUnauthenticated:i}=T(),{openSettings:r}=se(),{isCollapsible:n}=De(),o=L(l=>l.isHistoryCollapsed);return t&&s||!a?null:i?e.jsx(re,{}):e.jsxs("div",{className:k("flex flex-col py-2 empty:hidden dark:border-white/20",n&&"-mx-3 border-t border-token-border-sharp px-3"),children:[n&&!o&&e.jsx($e,{type:"less",onClick:h.toggleHistoryCollapsed}),e.jsx(He,{}),e.jsx(fs,{}),e.jsx("div",{className:"flex w-full items-center md:hidden",children:e.jsx("div",{className:"max-w-[100%] grow",children:e.jsx(Ye,{onClickSettings:()=>r()})})})]})}const re=()=>{const t=Y(),a=W(),s=ee(C.unauthSignupCta),i=()=>{a({authType:"login",callback:l=>{m.logLogInButtonClicked({location:"Sidebar bottom unit",provider:l}),I.logEvent("chatgpt_sidebar_login_button_clicked")}})},r=()=>{a({authType:"signup",callback:l=>{m.logSignUpButtonClicked({location:"Sidebar bottom unit",provider:l}),I.logEvent("chatgpt_sidebar_signup_button_clicked")}})},n=e.jsx(F,{as:"button",size:"medium",color:t?"secondary":"primary","data-testid":"signup-button",onClick:r,children:e.jsx(c,{...s})}),o=e.jsx(F,{as:"button",size:"medium",color:t?"primary":"secondary","data-testid":"login-button",onClick:i,children:e.jsx(c,{...C.unauthLoginCta})});return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-4 mt-2",children:[e.jsx("p",{className:"mb-1 text-sm font-semibold text-token-text-primary",children:e.jsx(c,{...t?C.logInOrSignUp:C.signUpOrLogIn})}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(c,{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."})})]}),e.jsx("div",{className:"flex flex-row items-start gap-2",children:t?[o,n]:[n,o]})]})},bs=K.div`flex-col flex-1 transition-opacity duration-500 relative -mr-2 pr-2
  ${({$disableScroll:t})=>t?"overflow-y-hidden opacity-20 pointer-events-none":"overflow-y-auto"}`,C=P({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history"},closeSidebar:{id:"NavigationContent.closeSidebar",defaultMessage:"Close sidebar"},signInToChat:{id:"NavigationContent.signInToChat",defaultMessage:"Sign in to ChatGPT"},signUpOrLogIn:{id:"NavigationContent.signUpOrLogIn",defaultMessage:"Sign up or log in"},logInOrSignUp:{id:"NavigationContent.logInOrSignUp",defaultMessage:"Log in or sign up"},unauthSignupCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},unauthLoginCta:{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"}}),vs=()=>{var i;const{openSettings:t}=se(),a=(i=Ue("3376455464"))==null?void 0:i.value,s=Q();return e.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[e.jsx(q,{icon:Ze,onClick:()=>{ze(s),h.closeActiveSidebar()},children:e.jsx(c,{id:"0FupYP",defaultMessage:"New chat"})}),e.jsx("div",{className:"flex grow items-center justify-center",children:e.jsx(re,{})}),e.jsxs(ss,{contentClassName:"w-[298px]",triggerButton:e.jsx(q,{icon:Je,children:e.jsx(c,{id:"y4Lkp7",defaultMessage:"Settings and more"})}),children:[e.jsx(R.Item,{onClick:()=>t(),icon:Qe,children:e.jsx(c,{id:"HrRLkZ",defaultMessage:"Settings"})}),a&&e.jsx(R.Item,{icon:Xe,onClick:()=>{h.openModal(N.ReportConversation)},children:e.jsx(c,{id:"thread.report.0",defaultMessage:"Report illegal content"})}),e.jsx(R.Separator,{}),e.jsx(es,{})]})]})};function oe({children:t,hideNavigation:a=!1,mobileHeaderContent:s,mobileHeaderLeftContent:i,mobileHeaderRightContent:r,mobileHeaderBottomContent:n,sidebar:o,forceOpenDesktopSidebar:l=!1}){const{isUnauthenticated:d}=T(),[f,g]=L(x=>[x.activeStageSidebar,x.activeSidebar]),u=Ge(),S=[];let b=null;z.Children.forEach(t,x=>{z.isValidElement(x)&&(x.type===oe.Sidebars?b=x:S.push(x))});const M=!d&&!a&&o!=null,_=!a&&(M||d);return e.jsxs("div",{className:k("relative flex h-full w-full overflow-hidden transition-colors",g!=="popover-nav"&&"z-0"),children:[M&&e.jsx(os,{isExpanded:l||!u,isPopoverOnDesktop:f,children:d?e.jsx(vs,{}):o}),e.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[_&&e.jsx(rs,{onClickOpenSidebar:()=>h.togglePopoverNavSidebar(),showNavSidebar:M,leftContent:i,rightContent:r,bottomContent:n,children:s}),e.jsx("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:S})]}),b]})}function js({children:t}){return e.jsx(e.Fragment,{children:t})}oe.Sidebars=js;export{ds as A,_s as N,oe as S,Is as a,Ts as b,Ps as c};
//# sourceMappingURL=mt2myx6gvxjgqmjz.js.map
