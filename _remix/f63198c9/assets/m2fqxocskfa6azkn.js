const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/wd8qtziasrjwx8lh.js","assets/oxu1g7ovqac4x1gm.js","assets/l2dlwlym9v3m5hew.js","assets/root-cooud999.css","assets/gnak5wbxgigpi788.js","assets/conversation-small-lkohtmkm.css","assets/d5dd0f3y5pjnq9gb.js","assets/hn0y0npzt2rjtnrq.js","assets/mrsokoll6b76hci3.js","assets/l0btf8d8mvj6co8e.js","assets/dwpddq5e09ixla8n.js","assets/omrbwl0k69upg0s6.js","assets/n3gw3e0kmedzjukw.js","assets/mcu2x4k7m0dwhi9c.js","assets/j4hv2vgn7rr65ugu.js","assets/kjwkz3o8cg2pzz3l.js","assets/m2fmu3mgiitcocee.js","assets/fzrn137102spawew.js","assets/h064k5aw72l9h1gy.js","assets/il7m0l9oupjndsma.js","assets/ds8vtrc30cct4toh.js","assets/hzjwquj9mz3njn0w.js","assets/ior5ctahycggy9a2.js","assets/f28nvdwx0nfn2djj.js","assets/bfsrfw3wnz2peymf.js","assets/kqwdyvkaaavvn8k3.js","assets/l0tz9hj7ji6r64rk.js","assets/b6t7fkitifl93byt.js","assets/fz3i139nlh0ynofs.js","assets/omii1ik27yjtvf77.js","assets/gcl5aln2lhrg63m7.js","assets/bkuj2hk1b16na9id.js","assets/c4bxzbp1808foto4.js","assets/k0ideqem515iteit.js","assets/ibrhoqeqt5jsrr7k.js","assets/cen54lleq2hv1lq6.js","assets/ozml6g4yv99w13w0.js","assets/ejruvu5sadmqmhx1.js","assets/2ikygwimiuwckkqc.js","assets/garv4qabzshzkq6g.js","assets/jqu0qcy8mdco0gsj.js","assets/h51ekr9uo3fuans1.js","assets/iu5bsdj8jvpdkgl4.js","assets/gnngpkbm828evxkf.js","assets/cu04yy4zqgs3ezoj.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{r as d,m as e,ae as te,B as re,V as oe,ex as ie,b8 as x,b9 as f,aC as ne,dZ as j,bG as de,bt as N,dX as L,bJ as R,gW as T,aJ as ce,gS as C,N as le,aB as ue,ad as P,af as he,df as A,z as F,bh as me,D as xe,cu as fe,cv as ge,cw as be,dF as pe,g4 as je,A as ve,a0 as Se}from"./oxu1g7ovqac4x1gm.js";import{hc as Ce,hd as H,A as z,he as we,hf as ye,cB as B,bk as Ee,cC as _e,cR as U,T as G,hg as K,hh as Ne,hi as Te,fM as W,hj as X,hk as Q,hl as q,hm as Pe,bl as Y,hn as k,ho as S,fI as Ae,bB as w,bC as V,z as Fe,hp as ke,u as Ve,eV as Ie,es as Oe,eU as Me,hq as De,hr as Le,hs as Re,bY as He,ht as ze,hu as Be,hv as Ue,hw as I,hx as Ge,az as Ke,hy as We,hz as Xe,bi as Qe,cz as qe,cA as Ye,hA as Je,hB as $e,hC as Ze,cD as es,hD as ss,bZ as as,ep as ts}from"./gnak5wbxgigpi788.js";import{m as p}from"./mrsokoll6b76hci3.js";import{S as O,b as rs,c as os}from"./k0ideqem515iteit.js";import{S as is,C as ns}from"./cen54lleq2hv1lq6.js";import{T as J,C as $}from"./ozml6g4yv99w13w0.js";import{N as ds}from"./ibrhoqeqt5jsrr7k.js";import{C as cs}from"./h51ekr9uo3fuans1.js";function ls({clientThreadId:s}){const a=Ce(r=>r.notifications);return d.useEffect(()=>{a.filter(t=>t.clientThreadId===s).map(t=>t.id).filter(t=>t!==void 0).forEach(t=>H(t))},[s,a]),a.length===0?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(z,{children:a.map(r=>e.jsx(us,{...r},r.id))})})}function us({...s}){const a=te(),r=re(),t=oe(),i=ie(s.clientThreadId),n=()=>{i&&ye(a,r,i),s.id&&H(s.id)};return e.jsxs(p.div,{onClick:n,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(we,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:s.title??t.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:s.subtitle??t.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const hs=x(()=>f(()=>import("./wd8qtziasrjwx8lh.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(s=>s.CanvasFocusedViewManager)),ms=x(()=>f(()=>import("./ior5ctahycggy9a2.js"),__vite__mapDeps([22,1,2,3,23,4,5,24,25,26,27,8])).then(s=>s.SearchResultsModal));function xs({clientThreadId:s,setClientThreadId:a,urlThreadId:r,prefetchSearch:t,threadContent:i}){const n=ne();B({clientThreadId:s});const{createNewThread:u,onThreadCreated:o,resetThread:c}=Ee({clientThreadId:s,setClientThreadId:a});_e({resetThreadAction:c,clientThreadId:s});const h=j("searchSources"),g=j("summarizer"),b=U();return e.jsxs(G,{enableSandbox:!1,clientThreadId:s,children:[e.jsx(K,{clientThreadId:s,urlThreadId:r}),e.jsxs(O,{hideNavigation:n,mobileHeaderContent:e.jsx(Ne,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Te,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(rs,{onNewChatButtonClick:c}),mobileHeaderRightContent:e.jsx(os,{onNewChatButtonClick:c}),sidebar:e.jsx(ds,{navHeader:s?e.jsx(is,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:u}):null,children:e.jsx(ns,{clientThreadId:s,onNewThread:u})}),threadFlyout:e.jsxs(e.Fragment,{children:[h&&e.jsx(W,{clientThreadId:s}),b&&g&&e.jsx(X,{clientThreadId:s})]}),children:[e.jsx(Q,{}),i??e.jsx(J,{clientThreadId:s,onCreate:o,prefetchSearch:t},s),e.jsxs(O.Sidebars,{children:[e.jsx(hs,{clientThreadId:s}),e.jsx(q,{clientThreadId:s})]})]}),e.jsx(fs,{clientThreadId:s})]})}function fs({clientThreadId:s}){const a=de(),r=a?.includes(N.SearchTool)&&!a?.includes(N.SearchToolHoldout),t=Pe();return L()&&(!t||!r)&&e.jsx(ms,{clientThreadId:s})}const M=450;function gs({children:s,clientThreadId:a,isOpen:r,onClose:t}){const i=R();return e.jsxs(z,{children:[r&&i&&e.jsx(Y,{clientThreadId:a,children:e.jsx(T,{children:e.jsx(k.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(p.div,{className:"h-full w-full bg-token-main-surface-secondary",...S}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(p.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:M},...S,children:e.jsx($,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:s})]})]})})})}),r&&!i&&e.jsx(T,{children:e.jsx(k.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(p.div,{className:"h-full w-full bg-token-main-surface-secondary",...S}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(p.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:M},...S,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(J,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})]})}const bs=x(()=>f(()=>import("./fz3i139nlh0ynofs.js"),__vite__mapDeps([28,1,2,3,4,5]))),ps=x(()=>f(()=>import("./omii1ik27yjtvf77.js"),__vite__mapDeps([29,1,2,3,4,5,30,31,32,8,33,34,19,35,36,9,15,37,38,39,40,41])).then(s=>s.ImageEditor));function js({clientThreadId:s}){const a=Ae();d.useEffect(()=>{w.close()},[s]);let r;return a?.type===V.ADAVisualization?r=e.jsx(bs,{clientThreadId:s,visualization:a.visualization}):a?.type===V.Image&&(r=e.jsx(ps,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(gs,{clientThreadId:s,isOpen:a!=null,onClose:w.close,children:r})}const vs=x(()=>f(()=>import("./wd8qtziasrjwx8lh.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(s=>s.CanvasFocusedViewManager)),D=64;function Ss(){const{focusedObject:s,clientThreadId:a}=Fe();j(void 0);const r=d.useRef(null),[t,i]=d.useState({bottom:null,height:null});ke(r,i);const n=Ve(),u=j("searchSources"),o=j("summarizer"),c=L(),[h,g]=d.useState(!1),b=!n&&!!s;let l=0;h&&t.height==null?l=D:h&&t.height!=null?l=D+t.height:!h&&t.height!=null&&(l=t.height);const v=U();return e.jsx(Ie,{className:ce(C.application,{[C.withCanvasFocusedView]:!!n,[C.withEmbeddedFocusedView]:b}),banner:e.jsx(le,{children:e.jsx(Oe,{setIsMobileAppUpsellBannerVisible:g})}),sidebar:e.jsx(cs,{}),thread:e.jsx($,{ref:r},a),details:e.jsx(vs,{clientThreadId:a}),threadExtendedInfo:c&&e.jsxs(e.Fragment,{children:[!1,u&&e.jsx(W,{clientThreadId:a}),v&&o&&e.jsx(X,{clientThreadId:a})]}),debugger:e.jsx(q,{clientThreadId:a}),name:"application-root",style:{"--screen-keyboard-bottom":t.bottom?`${t.bottom}px`:"","--screen-height-offset":l>0?`${l}px`:""}})}function Cs({clientThreadId:s,urlThreadId:a}){return B({clientThreadId:s}),e.jsxs(Me,{children:[e.jsx(De,{}),e.jsx(Le,{}),e.jsxs(G,{enableSandbox:!1,clientThreadId:s,children:[e.jsx(K,{clientThreadId:s,urlThreadId:a}),e.jsx(Q,{}),e.jsx(Ss,{})]})]})}var ws={};const ys=x(()=>f(()=>import("./iu5bsdj8jvpdkgl4.js"),__vite__mapDeps([42,1,2,3,4,5,43]))),Es=x(()=>f(()=>import("./cu04yy4zqgs3ezoj.js"),__vite__mapDeps([44,1,2,3,4,5,36,9,8,15,37,19,38,39,40,45])));function Ms(s){const{urlThreadId:a,clientThreadId:r,prefetchSearch:t}=s;Ns();const i=ue(),n=P(),[u]=he(),[o,c]=d.useState(()=>a!==void 0?a:r!==void 0?r:A());a!==void 0&&o!==a&&F.getServerThreadId(o)!==a&&c(a);const h=Re(P());d.useEffect(()=>{a===void 0&&F.getServerThreadId(o)!==void 0&&c(A())},[a,o,h]);const g=He(as.workspaceId),b=R(),{eligible:l,isLoading:v,markAsViewed:y}=ze(),E=Be(),Z=me("3435450078");d.useEffect(()=>{(n.pathname==="/"||n.pathname.startsWith("/c/"))&&Ue({namespace:I.ChatPageLoad})==null&&(Ge({namespace:I.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),xe.addTiming("chatgpt.web.chatPage.mounted"))},[]);const _=Ke();d.useEffect(()=>{fe(!0).then(m=>{m.force_login&&_({authType:"login"}),ge.initializeAndGatherData(m),We.initializeAndGatherData(m),be.initializeAndGatherData(m)})},[_]),d.useEffect(()=>{const m=u.get(Xe)==="true";i!==m&&pe.setIsTemporaryChatEnabled(m)},[i,u]),d.useEffect(()=>{n.state?.focusObject&&w.setFocusedObject(n.state.focusObject)},[n.state?.focusObject]),d.useEffect(()=>{!v&&l&&(y(),E())},[l,v,y,E]);const{isOpen:ee,isLoading:se}=Qe(),ae=b?Cs:xs;return e.jsx(je.Provider,{value:null,children:e.jsx(qe,{children:e.jsxs(Ye,{clientThreadId:o,children:[e.jsx(Je,{clientThreadId:o},g),!se&&ee&&e.jsx(Es,{clientThreadId:o,setClientThreadId:c}),e.jsx($e,{}),e.jsx(Ze,{}),e.jsx(Y,{clientThreadId:o,setClientThreadId:c,prefetchSearch:t,children:e.jsx(ae,{urlThreadId:a,clientThreadId:o,setClientThreadId:c,prefetchSearch:t})}),e.jsx(js,{clientThreadId:o}),e.jsx(es,{clientThreadId:o}),e.jsx(_s,{}),e.jsx(ss,{}),Z?e.jsx(ls,{clientThreadId:o}):!1]})})})}function _s(){const s=ts(a=>a.sharingModalThreadId);return s?e.jsx(ys,{serverThreadId:s}):null}function Ns(){ve({queryKey:["pingEdge"],queryFn:()=>Se.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=ws.GOKU_SERVICE);export{Ms as C,M as F};
//# sourceMappingURL=m2fqxocskfa6azkn.js.map
