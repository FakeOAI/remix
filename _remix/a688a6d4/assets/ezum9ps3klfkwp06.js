import{aw as w,eQ as c,Z as g,aL as T,r as d,a6 as n,U as E,aj as I,aY as m,fl as b,fm as v}from"./fw2sv6mo32vdb58s.js";import{C as _,a as W}from"./hk9hgj5yw25y7v6y.js";import{a as D}from"./ua3f6ccraijv6k5a.js";import"./lv4lqm4uk0kls2ph.js";import{aY as C,dH as B,dI as L}from"./mvfp9xkrxbhizxzo.js";import{b9 as y,ba as S}from"./brnrasthlm0rpj0x.js";import{c as j}from"./izia4nap8s109akt.js";import"./hdbx903vjmhfkcan.js";import"./fpjq4i80aohithht.js";import"./nrfrj4av9qbdbq3n.js";import"./e6w4twohzb8ryusl.js";import"./bhsv161b2mgumrql.js";import"./h4k0zbuacboymzim.js";import"./exejoj0p864knzaw.js";import"./ji3ygbgpa9t6ay5b.js";import"./go1jirsdkzblmhip.js";import"./jqx7ianpdxg9s4us.js";import"./k75790v27xcy5v05.js";import"./jh4c9zw9q7ws8hh3.js";import"./o0ufnn1nsvflbkgh.js";const O=j("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function f(s,a){return s/a}function x(){const[t,i]=d.useState({titleBarHeight:32,buttonWidth:46,iconSize:16}),{value:o}=E("842034403");return d.useEffect(()=>{if(!o)return;const e=async()=>{const u=await window.getScreenDetails(),l=window.devicePixelRatio/u.currentScreen.devicePixelRatio;i({titleBarHeight:f(32,l),buttonWidth:f(46,l),iconSize:f(16,l)})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o]),t}function A({onNewThread:s,onOpenInMainWindow:a,onClose:r}){const t=I(),{titleBarHeight:i,buttonWidth:o,iconSize:e}=x(),u=t.formatMessage({id:"DAjGx7",defaultMessage:"New chat"}),l=t.formatMessage({defaultMessage:"Open in main window",id:"CompanionWindow.openInMainWindow1"}),h=t.formatMessage({id:"/LZfgc",defaultMessage:"Close"});return n.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex w-full justify-between",style:{height:`${i}px`},children:[n.jsx(m,{label:u,sideOffset:4,side:"bottom",children:n.jsx(p,{onClick:s,"aria-label":u,style:{height:`${i}px`,width:`${o}px`},children:n.jsx(y,{style:{height:`${e}px`,width:`${e}px`}})})}),n.jsx(m,{label:l,sideOffset:4,side:"bottom",className:"ml-auto",children:n.jsx(p,{onClick:a,"aria-label":l,style:{height:`${i}px`,width:`${o}px`},children:n.jsx(S,{style:{height:`${e}px`,width:`${e}px`}})})}),n.jsx(m,{label:h,sideOffset:4,side:"bottom",children:n.jsx(R,{onClick:r,"aria-label":h,style:{height:`${i}px`,width:`${o}px`},children:n.jsx(O,{style:{height:`${e}px`,width:`${e}px`}})})})]})}const p=w.button`flex items-center justify-center cursor-default hover:bg-gray-200 active:bg-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-700`,R=w.button`flex items-center justify-center cursor-default hover:bg-red-500 hover:text-white active:bg-red-400 active:text-white`;function $({onNewThread:s,onOpenInMainWindow:a,onClose:r,children:t}){const i=d.useRef(null),{titleBarHeight:o}=x(),e=C();return n.jsxs("div",{className:"flex h-full w-full flex-col",style:{paddingTop:e?void 0:`${o}px`,"--screen-titlebar-height":`${o}px`},ref:i,children:[n.jsx(A,{onNewThread:s,onOpenInMainWindow:a,onClose:r}),t]})}function N({clientThreadId:s}){const a=c.useStore(),r=g(),t=T();return d.useEffect(()=>{if(!t)return;function i(e){e.key==="Escape"&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&c.hide()}function o(){t&&B()&&c.hide()}return t.document.addEventListener("keydown",i),t.addEventListener("blur",o),()=>{t.document.removeEventListener("keydown",i),t.removeEventListener("blur",o)}},[t]),n.jsx($,{onNewThread:()=>{a.newThread(!0)},onOpenInMainWindow:()=>{r(`/c/${s}`),a.newThread(!0),c.focusMainWindow()},onClose:()=>{c.hide()},children:n.jsx(_,{clientThreadId:s})})}function oe(){const{value:s}=E("3653083604"),{isOpen:a}=L(),r=D(e=>e.isVoiceModeActive),t=s&&!a&&!r,{clientThreadId:i}=c.useState(),o=c.useStore();if(d.useEffect(()=>{t&&!i&&o.newThread(!1)},[t,i,o]),!(!t||!i))return n.jsx(W,{features:`${b}=${v.COMPANION}`,children:n.jsx(N,{clientThreadId:i})})}export{oe as DesktopCompanionWindowController};
//# sourceMappingURL=ezum9ps3klfkwp06.js.map
