const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ci5y83585rau4e92.js","assets/c18i0pp13au3y7ic.js","assets/haiie99g2z7r06p2.js","assets/root-it5gal5m.css","assets/6821c7u8k44y6qgw.js","assets/g4twu77u2twhehgk.js","assets/conversation-small-cll5buey.css","assets/enssjn5g3z6y1cyn.js","assets/oebbfh7ymqr9h0bg.js","assets/ipokt9i7zjv6h6xg.js","assets/d6pd9vw7xwm0s8og.js"])))=>i.map(i=>d[i]);
import{ab as A,ac as M,j,be as k,y as e,a4 as z,e5 as y,e6 as w,ae as x,a0 as E,r as g,$ as _,as as L,a1 as T,c6 as P}from"./c18i0pp13au3y7ic.js";import{G as D}from"./gnw06s083lr5f19e.js";import{bR as b,bS as U,ak as F,bT as O,bU as B,bV as K,bW as H,bX as q,al as W,bY as V,D as Z,bZ as h}from"./g4twu77u2twhehgk.js";import{p as Q,f as R,m as X,G as Y}from"./enssjn5g3z6y1cyn.js";import{c as $,U as J}from"./a6yq7dxv0hbp7yf9.js";import{aC as ee,W as te,aD as se,ab as ie}from"./haiie99g2z7r06p2.js";import{a as ae,E as re}from"./h9k2q1s6tchmizhu.js";import{B as ne,D as oe}from"./6821c7u8k44y6qgw.js";import{h as le}from"./h1mh4abdz9ajp2qf.js";import{m as I}from"./ipokt9i7zjv6h6xg.js";import"./oebbfh7ymqr9h0bg.js";import"./d6pd9vw7xwm0s8og.js";import"./d2rynahwdk8zgr3h.js";import"./kj64znksxeizyr44.js";import"./l72gguc1sdhtezl5.js";import"./uz674jecbic99odm.js";import"./i0rsuleug17fm96j.js";import"./kp8msh463esg9se3.js";import"./8n4pdax1gjhvhr60.js";import"./tdlbzuru68c98r10.js";import"./jd722thjwk9l119v.js";import"./l6q8z1di3hxp7im8.js";const ce=A(()=>M(()=>import("./ci5y83585rau4e92.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(t=>t.GizmoKeepInSidebarMenuItem));var me=(t=>(t[t.Keep=0]="Keep",t[t.Recents=1]="Recents",t))(me||{});const de=2;function v({isActive:t,isNewConversation:a}){const s=j(),r=k(),n=b();return e.jsx("div",{className:z(n?"":"bg-token-sidebar-surface-primary","pt-0"),children:e.jsx(C,{gizmo:void 0,isActive:t,onClick:o=>{y(w(s))&&!a&&(o.preventDefault(),le(r))}})})}function pe(t,a,s){const r=Z(t,i=>i.flair.kind),n=[...r[h.FirstParty]?.map(({resource:i})=>({gizmo:i,section:0}))??[],...r[h.SidebarKeep]?.map(({resource:i})=>({gizmo:i,section:0}))??[],...r[h.Recent]?.slice(0,de).map(({resource:i})=>({gizmo:i,section:1}))??[]],o=n.length>s+1,l=o&&!a&&n.length>s?n.slice(0,s):n;return{listItems:[...l.filter(({section:i})=>i===0),...l.filter(({section:i})=>i===1)],itemsLeft:n.length-l.length,needsToCollapseItems:o}}function S({gizmo:t,currentGizmoId:a}){const s=g.useRef(!1),r=$(),n=!1,o=b(),l=o?5:4,{listItems:d}=pe(t,n,l);g.useEffect(()=>{d.length>0&&!s.current&&(K({namespace:H.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),s.current=!0)},[d]);function i(c,p){const m=e.jsx(C,{gizmo:c,isActive:c.gizmo.id===a,section:p},c.gizmo.id);return o?e.jsx("li",{children:m}):m}return e.jsxs("div",{children:[d.map(({gizmo:c,section:p},m)=>e.jsxs(g.Fragment,{children:[m>1&&p!==d[m-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),i(c,p)]},m)),e.jsx(re,{children:e.jsx(I.div,{whileTap:{scale:.98},children:e.jsx(P,{to:X(),onClick:()=>{r.activeSidebar==="popover-nav"&&J.setActiveSidebar(!1)},children:e.jsx(q,{icon:se,"data-testid":"explore-gpts-button",children:e.jsx(x,{...f.exploreStoreEnabled})})},"explore")})})]})}function Pe({currentGizmoId:t}){const{data:{gizmos:a}={}}=Q();let s=a;return b()?s!=null?e.jsx(e.Fragment,{children:e.jsxs(U,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(x,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(v,{isActive:t===void 0,isNewConversation:!0}),e.jsx(S,{gizmo:s,currentGizmoId:t})]})}):null:e.jsxs(e.Fragment,{children:[e.jsx(v,{isActive:t===void 0,isNewConversation:!0}),e.jsx(ae,{}),s!=null?e.jsx(S,{gizmo:s,currentGizmoId:t}):null]})}function ue({gizmo:t,isOpen:a,setIsOpen:s,section:r}){const n=j();return e.jsxs(ne,{open:a,onOpenChange:s,triggerButton:e.jsx("button",{className:z("flex text-token-text-secondary hover:text-token-text-primary",a?"":"invisible group-hover:visible"),children:e.jsx(ie,{className:"icon-md"})}),contentAlign:"start",sideOffset:4,alignOffset:-4,size:"auto",children:[r===1&&e.jsx(oe.Item,{onClick:async()=>{await W.updateGizmoSidebar(n,Y,t.gizmo.id,"keep")},children:e.jsx(x,{...f.keepInSidebar})}),e.jsx(ce,{gizmoResource:t})]})}function C({gizmo:t,historyDisabled:a,section:s,onClick:r,isActive:n}){const o=E(),[l,d]=g.useState(!1),[i,c]=g.useState(!1),p=_(),m=!!t?.gizmo.tags?.includes(F.FirstParty);let G=!1,u;if(t!=null)u=t.gizmo.display.name||O;else{if(p==null)return null;a?u=o.formatMessage(f.clearChat):p.canInteractWithGizmos()?u=V:u=o.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsx(I.div,{whileTap:{scale:.98},onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},children:e.jsx(B,{loggingGizmoId:t?.gizmo.id??"primary",href:t!=null?R(t):"/",onClick:r,showActiveIndicator:G,icon:e.jsx(D,{isFirstParty:t==null||m,src:t?.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),isMenuOpen:l,label:u,hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(i||l)&&t!=null&&e.jsx("div",{className:"text-token-text-tertiary",onClick:N=>{N.preventDefault()},children:e.jsx(ue,{gizmo:t,isOpen:l,setIsOpen:d,section:s})}),e.jsx(L,{side:"right",label:o.formatMessage(a?f.clearChat:f.newChat),className:"flex items-center",children:e.jsx("button",{className:l?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:a?e.jsx(ee,{className:"icon-md"}):e.jsx(te,{className:"icon-md"})})})]})})})}const f=T({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}});export{v as DefaultGPTSidebarListItem,Pe as GizmoSidebarList,C as GizmoSidebarListItem,me as SidebarSectionType,f as sidebarMessages};
//# sourceMappingURL=k2pl8zald2qe4rou.js.map
