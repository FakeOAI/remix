const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dsf53if5ht9m0wd8.js","assets/c18i0pp13au3y7ic.js","assets/haiie99g2z7r06p2.js","assets/root-it5gal5m.css","assets/g4twu77u2twhehgk.js","assets/conversation-small-cll5buey.css","assets/kj64znksxeizyr44.js","assets/l72gguc1sdhtezl5.js","assets/oebbfh7ymqr9h0bg.js","assets/ipokt9i7zjv6h6xg.js","assets/enssjn5g3z6y1cyn.js","assets/d6pd9vw7xwm0s8og.js","assets/e9b7sspfv4me19d2.js","assets/a6yq7dxv0hbp7yf9.js","assets/g8jbtbghrpvvqdd1.js","assets/e9lafxuzyeh4418f.js","assets/oo6asolwbpv1j84c.js","assets/kjwmdic96o9z6muu.js","assets/ml5qecvid841ca5l.js","assets/bvc0q1gds11j04iw.js","assets/d29skr3h0didb7mn.js","assets/ewx9shdrubeyyv1h.js","assets/gacwwf80r3e09egn.js","assets/mfvx3ufcdqql8z8f.js","assets/e84pdv6605u7dh25.js","assets/gnw06s083lr5f19e.js","assets/h1mh4abdz9ajp2qf.js","assets/6821c7u8k44y6qgw.js","assets/kp8msh463esg9se3.js","assets/8n4pdax1gjhvhr60.js","assets/tdlbzuru68c98r10.js","assets/jd722thjwk9l119v.js","assets/l6q8z1di3hxp7im8.js","assets/uz674jecbic99odm.js","assets/i0rsuleug17fm96j.js","assets/ercjloytnrkrpiaf.js","assets/nt5chjmu6n6hgb8b.js","assets/nhbvzkfqiq95cx4e.js","assets/ocp9qypl4gbd93gm.js","assets/hy6dx4j4e3itesri.js","assets/juqs3lvx2wx3p6v6.js","assets/orb8fa0lbkmiqrf2.js","assets/ns9dkoj1t5uxmxt2.js","assets/kqwdyvkaaavvn8k3.js","assets/acq0xsb3l8wpx02c.js","assets/m6zc5jn7jmqwdygb.js","assets/f3x28xf7uv9lbccs.js","assets/jxd5vdyqt1j1cwep.js","assets/h2ajwxbnw0cciuul.js","assets/jz1mnakg6ee5aebw.js","assets/csizhphp0t8uols1.js","assets/e6n84s7z4ek6v6kk.js","assets/k6c5owbstadzd4i3.js","assets/w39ar3tl84u5dos7.js","assets/jgjds3418her6nxr.js","assets/gl5db07e2npewjeg.js","assets/983a0dy92b3ronpv.js","assets/ivu2bgr2lx18ry7p.js","assets/dxm9k5rz9fypiu2i.js","assets/j5fp77xzoqlejbm4.js","assets/h9k2q1s6tchmizhu.js","assets/d2rynahwdk8zgr3h.js","assets/hbftftivxxnf28as.js","assets/h5zajrmsu588ivc7.js","assets/gh81skfwc2ue8g4f.js","assets/nhvy7iy1ucx17kzi.js","assets/k2pl8zald2qe4rou.js","assets/hta1dhxrovgmh9dr.js","assets/klrc6kw0zpn9v5lo.js","assets/kn3mkzykrdz1nxas.js"])))=>i.map(i=>d[i]);
import{y as e,bA as J,b2 as R,b3 as W,b0 as Ge,r as o,D as Z,aA as H,N as $e,S as K,P as Q,d as we,ae as T,a1 as G,a9 as vs,a0 as $,al as ys,aj as Ms,ab as x,ac as S,$ as oe,bM as As,bL as ws,bJ as Os,aW as _s,w as Ue,ed as Oe,bt as qe,bu as Ns,ag as Ts,az as Es,a4 as g,aB as Ps,j as Ls,f5 as _e,ch as Ke,aw as Is,aE as Ds,ak as Qe,fn as m,c as Ye,dA as Bs,e9 as Vs,as as Ne,c6 as Fs,fi as Te,x as Ee,a$ as Rs,dI as Pe,bk as Ws,bl as Hs,bm as zs,bU as Gs,u as $s}from"./c18i0pp13au3y7ic.js";import{jc as re,fl as Us,jd as Xe,je as Je,jf as qs,jg as Ze,ai as es,jh as Ks,ji as Qs,cX as Ys,jj as Xs,jk as Js,c6 as Y,jl as Zs,jm as et,jn as st,jo as tt,dz as at,jp as nt,jq as ot,jr as rt,js as it,jt as ct,ju as lt,jv as dt,jw as ut,jx as ft,jy as gt,jz as ht,jA as mt,jB as pt,jC as bt,jD as xt,jE as St,jF as jt,jG as Ct,jH as kt,c7 as ie,jI as vt,jJ as yt,eN as Mt,ge as ss,h_ as X,eR as Le,dS as ce,jK as ts,jL as as,ha as At,bR as le,bD as wt,jM as Ie,hj as U,fK as Ot,bL as ae,bM as De,b_ as _t,jN as Nt,bS as Tt,jO as p,jP as Be,jQ as ns,jR as Et,jS as Pt,i1 as ne,jT as Lt,hZ as It,jU as Dt,bq as Bt,b$ as Vt,ir as Ft,fH as Rt,gd as Wt,jV as Ht,jW as zt,jX as Gt,jY as $t,bV as Ut,bW as Ve,jZ as qt,u as Kt,ca as Qt,j_ as Yt,cm as Xt,cb as Jt,d2 as Zt,j$ as ea,d3 as sa,k0 as ta}from"./g4twu77u2twhehgk.js";import{U as A,G as D,c as B,b as os}from"./a6yq7dxv0hbp7yf9.js";import{b as aa,c as na,A as oa,T as z,a as ra,d as ia,k as ca}from"./oebbfh7ymqr9h0bg.js";import{u as la,a as rs}from"./kj64znksxeizyr44.js";import{L as da}from"./l72gguc1sdhtezl5.js";import{S as Fe,b as ua,c as fa,N as ga,U as ha}from"./j5fp77xzoqlejbm4.js";import{u as is,c as ma,g as pa}from"./i0rsuleug17fm96j.js";import{S as ba,C as xa}from"./h9k2q1s6tchmizhu.js";import{d as Sa,g as ja,T as cs}from"./bvc0q1gds11j04iw.js";import{T as ls}from"./hbftftivxxnf28as.js";import{H as Ca,i as ds,f as V,o as ka}from"./h1mh4abdz9ajp2qf.js";import{C as us}from"./h5zajrmsu588ivc7.js";import{m as q}from"./ipokt9i7zjv6h6xg.js";import{a as va}from"./d2rynahwdk8zgr3h.js";import{B as ya}from"./6821c7u8k44y6qgw.js";import{ab as Ma,bq as Aa,b5 as wa,bQ as Oa,W as _a}from"./haiie99g2z7r06p2.js";import{u as Na}from"./gh81skfwc2ue8g4f.js";const Ta=60*60*24;function Ea(s,t=!1){return J()==null||t?"loading":!s||R.getCookie(W.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function Pa({onClose:s}){const{data:{ageVerificationType:t,ageVerificationDeadline:a}={}}=re();return t==="passive"?e.jsx(La,{onClose:s}):t==="countdown"&&a!=null?e.jsx(Ia,{onClose:s,ageVerificationDeadline:a}):null}const La=({onClose:s})=>{const{country:t}=Ge();return o.useEffect(()=>{Z.addAction("privacy_policy.show_age_verification_modal",{country:t})},[t]),e.jsx(Us,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(H,{color:"primary",onClick:async()=>{await $e.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(H,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},Ia=({onClose:s,ageVerificationDeadline:t})=>{const a=t!=null?Math.floor(t/60/60/24):0;o.useEffect(()=>{K.logEvent("chatgpt_compliance_age_verification_seen"),Q.logEvent(we.complianceAgeVerificationSeen)},[]);const{country:n}=Ge();return o.useEffect(()=>{Z.addAction("privacy_policy.show_age_verification_countdown",{country:n})},[n]),e.jsxs(Xe,{children:[e.jsx(Je,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(T,{...Re.ageVerificationTitle,values:{deadline:a,learnMoreLink:r=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:r})}})}),e.jsx(qs,{altText:"Dismiss notification",asChild:!0,children:e.jsx(H,{color:"primary",size:"small",onClick:()=>{K.logEvent("chatgpt_compliance_age_verification_clicked"),Q.logEvent(we.complianceAgeVerificationClicked),R.setCookie(W.AgeVerification,"true",{maxAge:Ta,path:"/"}),s(),A.openModal(D.AgeVerificationInterstitial)},children:e.jsx(T,{...Re.startVerification})})}),e.jsx(Ze,{})]})},Re=G({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function Da({onClose:s}){const t=$(),a=ys(),{openSettings:n}=es(),r=Ks(),{session:i}=Ms(),{data:{isStorageComplianceEnabled:d}={}}=re(),{data:l,isLoading:u}=Qs({enabled:!!(d&&i),select:f=>!f.cookie_consent.is_required});return o.useEffect(()=>{l===!0&&s()},[l,s]),u?null:e.jsx(Ba,{onReject:()=>{r.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){a.success(t.formatMessage(I.updateSuccess))},onError(){a.danger(t.formatMessage(I.updateFailure))}}),s()},onAccept:()=>{r.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){a.success(t.formatMessage(I.updateSuccess))},onError(){a.danger(t.formatMessage(I.updateFailure))}}),s()},children:e.jsx(T,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:f=>e.jsx(da,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:f}),manageLink:f=>e.jsx(Va,{onClick:()=>{n(Ys.DataControls)},children:f})}})})}function Ba({children:s,onAccept:t,onReject:a}){return o.useEffect(()=>{Z.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs(Xe,{children:[e.jsxs(Je,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(H,{color:"secondary",size:"small",onClick:a,children:e.jsx(T,{...I.reject})}),e.jsx(H,{color:"secondary",size:"small",onClick:t,children:e.jsx(T,{...I.accept})})]})]}),e.jsx(Ze,{})]})}const Va=vs.button`underline font-normal text-green-600`,I=G({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),Fa=x(()=>S(async()=>{const{ModelOnboardingNUXModal:s}=await import("./dsf53if5ht9m0wd8.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(({ModelOnboardingNUXModal:s})=>s)),Ra=({onClose:s})=>{const t=$(),a=Y(ie.isBusinessWorkspace),n=Y(i=>i.currentWorkspace),r=a?t.formatMessage(We.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx(qe,{isOpen:!0,onClose:Ns,type:"success",title:r,size:"custom",noPadding:!0,className:"max-w-3xl",description:t.formatMessage(We.personalOnboardingSubheading),children:e.jsx(vt,{onClose:s,scope:yt.Personal})})};function Wa({clientThreadId:s}){const[t,a]=o.useState(0),{hasSeenOnboardingDate:n}=Xs(),{hasSeenTeamOwnerOnboardingDate:r}=Js(),i=Y(ie.isBusinessWorkspace),d=oe(),[l,u]=o.useState(!1),{data:f,isPending:c}=re(),C=Ea(f,c),{eligible:w,isLoading:k}=la(),v=As(),O=ws(),y=Os(),E=aa(()=>na.getThread(s)),b=oa(s)||!E,F=z.getConversationOrigin(s),{data:j,isError:_}=_s(),M=j!=null,N=j&&j?.accountItems.length>1&&j.currentAccountId==null,P=j?.accountItems.some(h=>h.isPersonalAccount()),de=!!j?.accountItems&&j.accountItems.length>0&&j.accountItems.every(({canAccessWithCurrentSession:h})=>!h),{eligible:ue,isLoading:fe}=Zs(),{value:ge}=Ue("1542198993"),{punchOutRequireLoginInfo:he}=et(),{state:me}=st(),{isOpen:pe,isLoading:be}=tt(),{isOpen:xe,isLoading:Se}=at(),{isOpen:je,isLoading:Ce}=nt(),{isOpen:ke,isLoading:ve}=ot(),{state:ye}=rt(),{isOpen:Ss,isLoading:js}=it(),Me=o.useMemo(()=>()=>null,[s]),L=o.useMemo(()=>[{Component:ct,getModalState:()=>he?"show":"hide",isDeferrable:!1},{Component:lt,getModalState:()=>me,isDeferrable:!1},{Component:dt,getModalState:()=>ye,isDeferrable:!1},{Component:ut,getModalState:()=>be||b?"loading":F===Oe.APPLE?"hide":pe?"show":"hide",isDeferrable:!1},{Component:ft,getModalState:()=>ve||b?"loading":F===Oe.APPLE?"hide":ke?"show":"hide",isDeferrable:!1},{Component:Me,getModalState:()=>"hide",isDeferrable:!1},{Component:Ra,getModalState:()=>i?"hide":n===null?"loading":n===!1?"show":"hide",isDeferrable:!0},{Component:gt,getModalState:()=>_?"hide":N?"show":M?"hide":"loading",isDeferrable:!1},{Component:ht,getModalState:()=>v!==null?"show":_||M?"hide":"loading",isDeferrable:!1},{Component:mt,getModalState:()=>O!==null?"show":_||M?"hide":"loading",isDeferrable:!1},{Component:pt,getModalState:()=>y!=null?"show":_||M?"hide":"loading",isDeferrable:!1},{Component:bt,getModalState:()=>M?de?"show":"hide":"loading",isDeferrable:!1},{Component:xt,getModalState:()=>Se?"loading":xe?"show":"hide",isDeferrable:!1},{Component:St,getModalState:()=>Ce?"loading":je?"show":"hide",isDeferrable:!1},{Component:Da,getModalState:()=>"hide",isDeferrable:!1},{Component:jt,getModalState:()=>!d?.isTeam()||!d?.isOwnerOfAccount()||!P?"hide":!M||r===null?"loading":r===!1?"show":"hide",isDeferrable:!1},{Component:Ct,getModalState:()=>i?n===null?"loading":n===!1?"show":"hide":"hide",isDeferrable:!0},{Component:kt,getModalState:()=>fe?"loading":ue&&ge?"show":"hide",isDeferrable:!1},{Component:Pa,getModalState:()=>C,isDeferrable:!1},{Component:Fa,getModalState:()=>k?"loading":w?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(h=>!(h.isDeferrable&&l)&&(!h.expiresAt||h.expiresAt.getTime()>Date.now())),[he,me,y,M,n,r,P,k,i,_,v,O,d,de,N,C,w,l,ge,ue,fe,pe,be,ke,ve,ye,Se,xe,je,Ce,F,b,js,Ss,Me]);o.useEffect(()=>{if(L[t]&&L[t].getModalState()==="hide"){const h=L.findIndex(ks=>ks.getModalState()!=="hide");a(h)}},[t,L]);const ee=L[t],se=ee?.getModalState()==="show";if(o.useEffect(()=>{const h=B.getState().activeModals.has(D.BlockingInitialComponent);se!==h&&(se?A.openModal(D.BlockingInitialComponent):A.closeModal(D.BlockingInitialComponent))},[se]),ee==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const Ae=ee.getModalState();if(Ae==="loading")return null;Ae==="hide"&&a(h=>h+1);const Cs=L[t].Component;return e.jsx(Cs,{onClose:()=>{u(!0),a(h=>h+1)}})}const We=G({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ha=x(()=>S(()=>import("./e9b7sspfv4me19d2.js"),__vite__mapDeps([12,1,2,3,8,4,5,9,10,11,6,7,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40])).then(s=>s.DebugConversationSidebar));function fs({clientThreadId:s}){za();const t=J(),a=t?.includes("debug"),n=Ts(),r=B(d=>d.activeSidebar),i=t?.includes("debug")&&r==="debug";return!a||!i?null:e.jsx(Ha,{clientThreadId:s,slideOver:!Mt(n),onClose:()=>A.toggleActiveSidebar("debug"),isOpen:!0})}function za(){const t=J()?.includes("debug");o.useEffect(()=>{if(!t)return;const a=new AbortController;return document.addEventListener("keydown",n=>{n.target instanceof HTMLElement&&["input","textarea","select","button"].includes(n.target.tagName.toLowerCase())||n.key==="\\"&&A.toggleActiveSidebar("debug")},{signal:a.signal}),()=>{a.abort()}},[t])}const Ga=x(()=>S(()=>import("./orb8fa0lbkmiqrf2.js"),__vite__mapDeps([41,1,2,3,4,5,42,8,9,43,44,10,11,45])).then(s=>s.SearchSources));function gs({clientThreadId:s}){const{resolvedTheme:t}=Es(),a=t==="dark",{turnIndex:n,messageId:r,isOpen:i}=os(),d=o.useCallback(()=>{A.closeChatThreadFlyout(s,r)},[s,r]);return!r||!n||!i?null:e.jsx(ss,{anchor:"top",className:g("relative flex-1 border-l",a?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(X,{name:"search-sources-header",type:"primary",className:g("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(Ps,{onClick:d})})}),children:e.jsx(Ga,{clientThreadId:s,turnIndex:n,messageId:r,isInSidebar:!0})})}function hs({clientThreadId:s}){o.useEffect(()=>{A.closeSharingModal()},[s]);const t=Ls();o.useEffect(()=>(z.retainThread(s),()=>{setTimeout(()=>{t.invalidateQueries({queryKey:["conversation",s]})},0),z.releaseThread(s)}),[s,t]),o.useEffect(()=>()=>{K.checkGate("3922476776")||Le.abortAllRequests()},[s]);const a=o.useRef(s);o.useEffect(()=>{s!==a.current&&(K.checkGate("3922476776")||Le.clear(),a.current=s)},[s])}const $a=x(()=>S(()=>import("./f3x28xf7uv9lbccs.js"),__vite__mapDeps([46,1,2,3,4,5,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33,47,48,49,50,21,51,52,53,16,35,54])).then(s=>s.CanvasFocusedViewManager)),Ua=x(()=>S(()=>import("./gl5db07e2npewjeg.js"),__vite__mapDeps([55,1,2,3,13,11,8,4,5,9,41,42,43,44,10,45,56])).then(s=>s.SearchResultsModal));function qa({clientThreadId:s,setClientThreadId:t,urlThreadId:a,prefetchSearch:n}){const r=ra();hs({clientThreadId:s});const{createNewThread:i,onThreadCreated:d,resetThread:l}=Ca({clientThreadId:s,setClientThreadId:t});is({resetThreadAction:l,clientThreadId:s});const u=ce();return e.jsxs(ls,{clientThreadId:s,children:[e.jsx(ts,{clientThreadId:s,urlThreadId:a}),e.jsxs(Fe,{hideNavigation:r,mobileHeaderContent:e.jsx(Sa,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(ja,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(ua,{onNewChatButtonClick:l}),mobileHeaderRightContent:e.jsx(fa,{onNewChatButtonClick:l}),sidebar:e.jsx(ga,{navHeader:s?e.jsx(ba,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:i}):null,children:e.jsx(xa,{clientThreadId:s,onNewThread:i})}),threadFlyout:e.jsx(gs,{clientThreadId:s}),children:[e.jsx(as,{}),e.jsx(cs,{clientThreadId:s,onCreate:d,prefetchSearch:n},s),e.jsxs(Fe.Sidebars,{children:[u&&e.jsx($a,{clientThreadId:s}),e.jsx(fs,{clientThreadId:s}),!1]})]}),e.jsx(Ka,{clientThreadId:s})]})}function Ka({clientThreadId:s}){const{value:t}=Ue("218782548"),a=At(),{isOpen:n}=os();return n&&(!a||!t)&&e.jsx(Ua,{clientThreadId:s})}const He=450;function Qa({children:s,clientThreadId:t,isOpen:a,onClose:n}){const r=le();return e.jsxs(wt,{children:[a&&r&&e.jsx(ds,{clientThreadId:t,children:e.jsx(_e,{children:e.jsx(Ie.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(q.div,{className:"h-full w-full bg-token-main-surface-secondary",...U}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(q.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:He},...U,children:e.jsx(us,{hideHeader:!0,hideTools:!0})})]})]})})})}),a&&!r&&e.jsx(_e,{children:e.jsx(Ie.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(q.div,{className:"h-full w-full bg-token-main-surface-secondary",...U}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(q.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:He},...U,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(cs,{clientThreadId:t,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},t)})})]})]})})})]})}const Ya=x(()=>S(()=>import("./ivu2bgr2lx18ry7p.js"),__vite__mapDeps([57,1,2,3,4,5,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33]))),Xa=x(()=>S(()=>import("./dxm9k5rz9fypiu2i.js"),__vite__mapDeps([58,1,2,3,4,5,37,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33,59,39,34,60,61,19,20,21,22,23,24,25,35,36,38,40,62,63,64,65])).then(s=>s.ImageEditor));function Ja({clientThreadId:s}){const t=Ot();o.useEffect(()=>{ae.close()},[s]);let a;return t?.type===De.ADAVisualization?a=e.jsx(Ya,{clientThreadId:s,visualization:t.visualization}):t?.type===De.Image&&(a=e.jsx(Xa,{clientThreadId:s,messageId:t.messageId,image:t.image,allImages:t.allImages},t.image.asset_pointer)),e.jsx(Qa,{clientThreadId:s,isOpen:t!=null,onClose:ae.close,children:a})}const Za=()=>{const s=$(),t=B(i=>i.activeModals.has(D.KeyboardActions)),a=()=>{A.closeModal(D.KeyboardActions)},n=ma(),r=o.useMemo(()=>{const i=Math.ceil(n.length/2);return[n.slice(0,i),n.slice(i)]},[n]);return e.jsx(qe,{isOpen:t,onClose:a,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage(tn.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:r.map((i,d)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:i.map(l=>e.jsx(en,{action:l},l.key))},`col-${d}`))})})})},en=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(T,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:pa(s.keyboardBinding).map((t,a)=>e.jsx(sn,{keyName:t},`${s.key}-${a}`))})]}),sn=({keyName:s})=>{const t=g("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:g(t,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:g(t,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:g(t,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},tn=G({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function an(){const{clientThreadId:s,resetThread:t}=V();return is({resetThreadAction:t,clientThreadId:s}),null}const nn=x(()=>S(()=>import("./h9k2q1s6tchmizhu.js").then(s=>s.b),__vite__mapDeps([60,1,2,3,4,5,27,13,11,8,9,61,10,6,7,33,34,26,28,29,30,31,32])).then(s=>s.default));function on({onClick:s}){const{clientThreadId:t}=V();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(ya,{onOpenChange:()=>{},side:"right",sideOffset:0,contentAlign:"center",triggerButton:e.jsxs("button",{className:g("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2.5 text-sm tracking-condensed text-token-text-secondary hover:bg-token-main-surface-secondary focus:ring-0"),onClick:s,children:[e.jsx(Ma,{className:g("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(T,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"popover max-h-[80dvh] overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(nn,{activeId:t})})})})}function rn(){const s=le(),{conversations:t}=rs();return{isCollapsible:s&&t.length>5,recentConversationLimit:5}}function cn({clientThreadId:s}){const t=ia(s),a=Ke(),{isCollapsible:n,recentConversationLimit:r}=rn(),i={recentConversationLimit:r},d=o.useRef(!1),l=!0,{conversations:u,data:f,isLoading:c,isFetchingNextPage:C,isError:w,recents:k,refetch:v}=rs(i),[O,y]=o.useState(!0),E=o.useCallback(function(P){P===void 0&&y(!1),v({cancelRefetch:!0})},[v,y]),b=a?void 0:t,F=u.length===0,j=w||f===void 0&&!c&&!C&&d.current,_=!j&&(f===void 0||c||C);return f===void 0&&!c&&!d.current&&(d.current=!0,E(!0)),o.useMemo(()=>{_t.publish({kind:"refreshHistory",conversations:u})},[u]),e.jsxs(e.Fragment,{children:[j&&e.jsx(Nt,{showRetry:O,refetch:E}),!F&&e.jsx(Tt,{header:k.label,isLastInGroup:!0,children:k.items.map((N,P)=>e.jsx(va,{item:N,isActive:N.id===b,testId:`history-item-${P}`},N.id))}),_&&e.jsx(Is,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),n&&e.jsx(Ds,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!l,className:g(!l),children:e.jsx(on,{})})})})]})}const ln=x(()=>S(()=>import("./k2pl8zald2qe4rou.js"),__vite__mapDeps([66,1,2,3,25,10,4,5,8,9,11,13,60,27,61,6,7,33,34,26,28,29,30,31,32])).then(s=>s.GizmoSidebarList));function dn({clientThreadId:s}){const t=oe(),a=ca(s),{isUnauthenticated:n}=Qe();return n?null:e.jsxs("div",{className:g(m.screenContent),children:[null,e.jsx(cn,{clientThreadId:s}),t?.canInteractWithGizmos()?e.jsx(ln,{currentGizmoId:a}):null]})}function ms(){return{isSidebarOpen:!1,mode:p.Floating}}class ps{store;constructor(t){this.store=t}setSidebarMode=async t=>{switch(t){case p.Floating:this.store.setState({mode:p.Floating});break;case p.Pinned:this.store.setState({mode:p.Pinned});break}};openSidebar=async()=>{const t=document.querySelector("input[name='sidebar_closed']");if(t){if(this.store.getState().isSidebarOpen&&!t.checked)return;t.checked=!1}this.store.setState({isSidebarOpen:!0}),B.setState({isDesktopNavCollapsed:!1}),await Be.yield(),Q.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1})};closeSidebar=async()=>{const t=document.querySelector("input[name='sidebar_closed']");if(t){if(!this.store.getState().isSidebarOpen&&t.checked)return;t.checked=!0}this.store.setState({isSidebarOpen:!1}),B.setState({isDesktopNavCollapsed:!0}),await Be.yield(),Q.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0})}}const ze=Ye(()=>ms()),bs=o.createContext({store:ze,actions:new ps(ze)});function un(s){let{isSidebarOpen:t,mode:a}=s;return t&&a===p.Pinned?"open-pinned":!t&&a===p.Pinned?"closed-pinned":"closed"}function fn(s){if(!s)return ms();const[t,a]=s.split("-");return{isSidebarOpen:t==="open",mode:a??p.Floating}}function xs(){return o.use(bs)}function gn({children:s}){o.use(Bs);const[t]=o.useState(()=>{const a=R.getCookie(W.SidebarState),n=Ye(()=>fn(a));return{store:n,actions:new ps(n)}});return o.useEffect(()=>t.store.subscribe((a,n)=>{const r=a.mode!==n.mode,i=a.isSidebarOpen!==n.isSidebarOpen;if(!(r||i))return;const d=un(a);R.setCookie(W.SidebarState,d,{maxAge:2**30})}),[t.store]),e.jsx(bs,{value:t,children:s})}function hn(){const s=oe(),t=s?.data==null,{isUnauthenticated:a}=Qe(),{openSettings:n}=es(),[r]=o.useState(()=>{const c=R.getCookie(W.Workspace);return typeof c=="string"&&c!==Vs}),i=$(),{store:d,actions:l}=xs(),u=d(c=>c.mode);if(!s||r&&t)return null;const f=a?e.jsx(ha,{}):e.jsx(ka,{onClickSettings:()=>n()});return e.jsxs(X,{name:"user-profile-bar",className:"z-10 grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-2",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[f,e.jsx("div",{className:m.togglePinWrapper,children:e.jsx(ns,{tooltipSideOffset:14,className:g(m.pinSidebarAction),checked:u===p.Floating,onChange:c=>{const C=c.currentTarget.checked?p.Floating:p.Pinned;c.preventDefault(),c.persist(),Et({css:Lt,update:()=>{c.target.checked=C===p.Floating,l.setSidebarMode(C)}})},icon:e.jsx(Pt,{}),label:u===p.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),group:ne.FloatingOrPinned})})]})}function mn(){return e.jsx(It,{className:g(m.screenTrailingBarContainer),children:e.jsx(hn,{})})}function pn(s){const{clientThreadId:t}=V(),a=o.useRef(s);a.current=s,o.useEffect(()=>{a.current()},[t])}const bn=x(()=>S(()=>import("./hta1dhxrovgmh9dr.js"),__vite__mapDeps([67,1,2,3,4,5,64,65,8,9,34,6,7,10,11,13,27])).then(s=>s.FannyPackIconButton));function xn({onNewThread:s}){const t=$(),{store:a,actions:n}=xs(),r=a(c=>c.isSidebarOpen),i=a(c=>c.mode===p.Floating);function d(){const c=document.querySelector(`input[name="${ne.OpenOrClosed}"]`);c&&(c.checked=!1)}pn(()=>{const c=Ft[Rt.Medium];matchMedia(`(max-width: ${c}px)`).matches&&d()}),Dt({checkElement:c=>c?.tagName==="NAV",enabled:r&&i,onLightDismiss:d});const{isFannyPackEnabled:l}=Bt(),{searchMsg:u,shortcutMsg:f}=Na();return J(),e.jsxs(e.Fragment,{children:[e.jsx(X,{type:"primary",className:g(m.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[9px]",children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(ns,{className:g(m.closeSidebarAction),checked:r,onChange:c=>{c.currentTarget.checked?n.openSidebar():n.closeSidebar()},icon:e.jsxs(e.Fragment,{children:[e.jsx(Aa,{className:m.sidebarIcon,style:{display:"var(--screen-size-hidden-on-compact-mode)"}}),e.jsx(wa,{className:m.sidebarIcon,style:{display:"var(--screen-size-hidden-on-wide-mode)"}})]}),label:t.formatMessage(te.closeSidebar),group:ne.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center gap-3",children:[!1,l&&e.jsx(Ne,{label:e.jsxs("div",{children:[u,e.jsx("div",{className:"text-sm font-normal text-token-text-secondary",children:f})]}),children:e.jsx(bn,{className:m.searchAction,icon:e.jsx(Oa,{className:m.sidebarIcon})})}),e.jsx(Ne,{label:t.formatMessage(te.newChat),children:e.jsx(Fs,{to:"/",onClick:c=>{c.preventDefault(),s()},children:e.jsx(Vt,{icon:e.jsx(_a,{className:m.sidebarIcon}),className:m.searchAction,label:t.formatMessage(te.newChat)})})})]})]})}),e.jsx(X,{type:"primary",className:m.bucketBar,disableSizeTracking:!0,children:" "})]})}const te=G({newChat:{id:"NUNaGU",defaultMessage:"New chat"},closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function Sn(){const{clientThreadId:s,onNewThread:t}=V();return e.jsx(ss,{anchor:"vertical",className:g(m.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(xn,{onNewThread:t}),trackLeading:!0,trailing:e.jsx(mn,{}),children:e.jsx(dn,{clientThreadId:s})})}const jn=x(()=>S(()=>import("./f3x28xf7uv9lbccs.js"),__vite__mapDeps([46,1,2,3,4,5,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33,47,48,49,50,21,51,52,53,16,35,54])).then(s=>s.CanvasFocusedViewManager));function Cn(){const{focusedObject:s,clientThreadId:t}=V(),a=ce();return e.jsx(Wt,{className:g(Te.application,{[Te.withFocusedView]:s}),sidebar:e.jsx(Sn,{}),thread:e.jsx(us,{}),details:e.jsxs(e.Fragment,{children:[a&&e.jsx(jn,{clientThreadId:t}),!1]}),threadExtendedInfo:e.jsx(gs,{clientThreadId:t}),debugger:e.jsx(fs,{clientThreadId:t}),name:"application-root"})}function kn(){const{clientThreadId:s,currentModelId:t,isCompanionWindow:a}=V();return e.jsx(Ht,{conversationId:s,currentModelId:t,isActiveWindow:!a})}function vn({clientThreadId:s,setClientThreadId:t,urlThreadId:a}){return hs({clientThreadId:s}),e.jsx(ds,{clientThreadId:s,setClientThreadId:t,children:e.jsxs(gn,{children:[e.jsx(kn,{}),e.jsx(an,{}),e.jsxs(ls,{clientThreadId:s,children:[e.jsx(ts,{clientThreadId:s,urlThreadId:a}),e.jsx(as,{}),e.jsx(Cn,{})]})]})})}var yn={};const Mn=x(()=>S(()=>import("./klrc6kw0zpn9v5lo.js"),__vite__mapDeps([68,1,2,3,4,5,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33,69])));function Un(s){const{urlThreadId:t,clientThreadId:a,prefetchSearch:n}=s;wn();const r=Ke(),i=Ee(),[d]=Rs(),[l,u]=o.useState(()=>t!==void 0?t:a!==void 0?a:Pe());t!==void 0&&l!==t&&z.getServerThreadId(l)!==t&&u(t);const f=zt(Ee());o.useEffect(()=>{t===void 0&&z.getServerThreadId(l)!==void 0&&u(Pe())},[t,l,f]);const c=Y(ie.workspaceId);ce();const C=le(),{eligible:w,isLoading:k,markAsViewed:v}=Gt(),O=$t();o.useEffect(()=>{(i.pathname==="/"||i.pathname.startsWith("/c/"))&&Ut({namespace:Ve.ChatPageLoad})==null&&(qt({namespace:Ve.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),Z.addTiming("chatgpt.web.chatPage.mounted"))},[]);const y=Kt();o.useEffect(()=>{Ws(!0).then(b=>{b.force_login&&y({authType:"login"}),Hs.initializeAndGatherData(b),Qt.initializeAndGatherData(b),zs.initializeAndGatherData(b)})},[y]),o.useEffect(()=>{const b=d.get(Yt)==="true";r!==b&&Gs.setIsTemporaryChatEnabled(b)},[r,d]),o.useEffect(()=>{i.state?.focusObject&&ae.setFocusedObject(i.state.focusObject)},[i.state?.focusObject]),o.useEffect(()=>{!k&&w&&(v(),O())},[w,k,v,O]);const E=C?vn:qa;return e.jsx(Xt.Provider,{value:null,children:e.jsx(Jt,{children:e.jsxs(Zt,{clientThreadId:l,children:[e.jsx(Wa,{clientThreadId:l},c),e.jsx(Za,{}),e.jsx(ea,{}),e.jsx(E,{urlThreadId:t,clientThreadId:l,setClientThreadId:u,prefetchSearch:n}),e.jsx(Ja,{clientThreadId:l}),e.jsx(sa,{clientThreadId:l}),e.jsx(An,{}),!1,e.jsx(ta,{})]})})})}function An(){const s=B(t=>t.sharingModalThreadId);return s?e.jsx(Mn,{serverThreadId:s}):null}function wn(){$s({queryKey:["pingEdge"],queryFn:()=>$e.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=yn.GOKU_SERVICE);export{Un as C,He as F,gs as a};
//# sourceMappingURL=ckuuaeibp6usx7mh.js.map
