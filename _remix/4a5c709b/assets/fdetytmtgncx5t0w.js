import{J as k,_ as v,dw as S,ah as j,g as _,j as a,ak as M,aB as f,bH as A,aq as R,r as p,d as h,P as E}from"./oekykjd73qa82yti.js";import{eP as C,eQ as T,bN as D,a_ as g,eR as N,eS as L,eT as m,eU as w,a5 as F,a6 as P,eV as $,eW as z}from"./ea8db8p61xn3dl41.js";import{F as U}from"./nxs0ek8rbsj007rl.js";import{S as H,a as q}from"./ib8gc1yu4nwij5f6.js";import{g as B}from"./kqwdyvkaaavvn8k3.js";import{a as I}from"./nmyjcqino366vejt.js";import{E as O}from"./fu8gt8b3r6si7410.js";import{m as V}from"./bva9obs1v3upiudq.js";import"./dg9kyz0flvvgkn3v.js";function W({date:e}){const t=k(),n=e instanceof Date?e:new Date(e*1e3),r=C(n,new Date);if(r<4&&r>-4){const o=t.formatRelativeTime(r,"day",{numeric:"auto"});return o.charAt(0).toUpperCase()+o.slice(1)}else return t.formatDate(n,{year:"numeric",month:"long",day:"numeric"})}var G=S,J=v,Q=T,K=j;function X(e,t){var n=K(e)?G:Q;return n(e,J(t))}var Y=X,Z=D,ee=Y;function te(e,t){return Z(ee(e,t),1)}var ae=te;const ne=_(ae),re=(e,t)=>{const n=w();return F(()=>{const r=P.getTurnContentReferences(e,t);return $(r,n)})};function xe({clientThreadId:e,turnIndex:t,messageId:n,isInSidebar:r=!1}){const o=re(e,t),i=g(),s=N(e,t),c={clientThreadId:e,messageId:n,turnIndex:t},l=ne(s,u=>u.entries).toSorted((u,d)=>(d?.pub_date??0)-(u?.pub_date??0));return a.jsxs("div",{className:M("flex w-full flex-col bg-token-main-surface-primary",r?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)]":"mt-0",!i||!r?"border-t border-token-border-light":""),children:[a.jsx(x,{title:a.jsx(f,{id:"dlVlo6",defaultMessage:"Citations"}),items:o,analyticsMetadata:{...c,linkType:"citation"},messageId:n}),a.jsx(x,{title:a.jsx(f,{id:"iUafP7",defaultMessage:"Search Results"}),items:l,analyticsMetadata:{...c,linkType:"search_result"},messageId:n,analyticsIndexOffset:o.length})]},`${t}-${e}`)}function x({title:e,items:t,analyticsMetadata:n,analyticsIndexOffset:r=0,messageId:o}){return!t||t.length===0?null:a.jsxs("div",{children:[a.jsx(b,{className:"sticky top-0 z-[1] flex h-[var(--screen-thread-header-min-height,60px)] items-center border-b border-token-border-light bg-token-main-surface-primary px-6 py-4 text-sm font-medium text-token-text-primary",children:e}),a.jsx("div",{className:"flex flex-col px-3 py-2",children:t.map((i,s)=>a.jsx(b,{index:s,children:a.jsx(se,{item:i,analyticsMetadata:{...n,groupIndex:s,entireListIndex:s+r},messageId:o},s)},`${e}-${s}`))})]})}function b({children:e,index:t=0,className:n=""}){return g()?a.jsx("div",{className:n,children:e}):a.jsx(V.div,{className:n,initial:{opacity:0},animate:{opacity:1},transition:{delay:(t+1)*.03},children:e})}function se({item:e,analyticsMetadata:t,messageId:n}){const r=I(e.url).data??B(e.url,"short"),o=l=>"ref_id"in l&&"content_type"in l,i=L(),s=A().resolvedTheme==="dark",c=a.jsxs(oe,{analyticsMetadata:t,href:e.url,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{!("attributions"in e)||!e.attributions||m.setHighlightBySource(n,e)},onMouseLeave:()=>{m.clearHighlights()},children:[a.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[a.jsx(U,{url:e.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:a.jsx(H,{className:"icon-sm text-token-text-quaternary"})}),r,o(e)&&a.jsx(q,{searchResult:e,className:"inline h-4 w-4 text-token-text-tertiary"})]}),a.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:e.title}),(e.pub_date??e.snippet)&&a.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[e.pub_date&&a.jsx(W,{date:e.pub_date}),e.pub_date&&e.snippet&&" â€” ",e.snippet]})]});return i?a.jsx(R,{label:a.jsx(O,{item:e}),className:"text-left text-xs",theme:s?"default":"white",children:c}):c}const oe=p.forwardRef(function(t,n){const{analyticsMetadata:r,...o}=t;function i(s,c){if(!t.href)return;const{entireListIndex:l,groupIndex:u,linkType:d,...y}=r;E.logEventWithStatsig(s,c,{...z(y),url:t.href,global_index:l.toString(),local_index:u.toString(),type:d})}return p.useEffect(()=>{i(h.searchLinkShown,"search_link_shown")},[]),a.jsx("a",{ref:n,...o,onClick:s=>{t.onClick?.(s),s.stopPropagation(),i(h.searchLinkClicked,"search_link_clicked")}})});export{xe as SearchSources,x as SourcesListGroup};
//# sourceMappingURL=fdetytmtgncx5t0w.js.map
