const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fv4viup8zxls08ac.js","assets/oekykjd73qa82yti.js","assets/dg9kyz0flvvgkn3v.js","assets/root-ehcwjjjl.css","assets/ea8db8p61xn3dl41.js","assets/conversation-small-o5ybpv0e.css","assets/hleqic3nfevjef5m.js","assets/gnvfqd100prlcesm.js","assets/bva9obs1v3upiudq.js","assets/njq349kzc2cy5m0p.js","assets/imxne7cqtt55cx4i.js","assets/kngv21ammg8f0cgt.js","assets/nz0cpjpk13dg73bg.js","assets/mazb227dclb16kbk.js","assets/jc0heq139qjn0ife.js","assets/bo1eog35b5y0x36j.js","assets/fijqvyq2i9aelgx9.js","assets/doqjumb4xtfm9gdp.js","assets/cdrwkqz6w38xd7n2.js","assets/lazua3a0sw5bc7ay.js","assets/flx3uvyzqr1f83fg.js","assets/fdetytmtgncx5t0w.js","assets/nxs0ek8rbsj007rl.js","assets/ib8gc1yu4nwij5f6.js","assets/kqwdyvkaaavvn8k3.js","assets/nmyjcqino366vejt.js","assets/fu8gt8b3r6si7410.js","assets/983a0dy92b3ronpv.js","assets/lp2y961h36pgsenn.js","assets/lycth7uqpnq98xnn.js","assets/e8pwcjhj3qtwvlje.js","assets/j5w4166bn3c02o6l.js","assets/fse5r3xrzz5qybei.js","assets/oh7lieex8df6gy3d.js","assets/iqnw9mlui36w4f2m.js","assets/jq4uei78sudi2e1o.js","assets/bp8jgluwk7b4vfp6.js","assets/cre0v5s82p0s3nmu.js","assets/b37yz4jin00ebvzj.js","assets/lq7lwrvwa64irfkk.js","assets/igabhrlqdnztuwqh.js","assets/g2gs0ph39hfixbc2.js","assets/cnbnbaxjicn0xdxh.js"])))=>i.map(i=>d[i]);
import{r as d,a0 as Pe,ci as Ee,ch as Te,cf as De,by as _e,ap as Ie,F as se,j as e,J as ye,bE as Ne,aN as Le,I as Be,an as m,ao as p,aQ as Fe,aK as oe,fH as te,ak as Ve,fB as ne,ag as We,t as ie,X as Re,b$ as re,D as He,bM as Ge,bN as Ue,bO as ze,cq as qe,l as Ke,O as Qe}from"./oekykjd73qa82yti.js";import{i6 as $e,i7 as Xe,cf as k,i8 as Ye,i9 as Je,ia as Ze,a5 as ea,a6 as aa,ck as sa,q as N,ib as oa,ic as ta,id as na,ie as ia,eg as ra,ig as la,ih as da,ii as ca,ij as ua,ik as ha,il as ga,im as fa,io as ma,ip as pa,iq as ba,ir as Sa,is as Ma,it as xa,iu as Ca,iv as ja,iw as Aa,ix as va,iy as wa,iz as ka,iA as Oa,g5 as me,aa as y,U as le,cg as B,iB as Pa,iC as Ea,d6 as Ta,c$ as pe,iD as Da,d0 as _a,X as be,iE as Se,fm as Ia,iF as ya,gt as Me,iG as xe,iH as Ce,iI as Na,bO as La,a_ as je,a8 as Ba,d1 as Ae,iJ as de,iK as v,fN as Fa,bQ as L,bR as ce,a7 as Va,eI as Wa,eH as Ra,iL as Ha,iM as Ga,iN as Ua,iO as za,iP as qa,iQ as Ka,iR as ue,iS as Qa,j as $a,iT as Xa,iU as Ya,fM as Ja,ab as Za,cZ as es,c_ as as,iV as ss,iW as os,d2 as ts,iX as ns}from"./ea8db8p61xn3dl41.js";import{S as he,b as is,c as rs,N as ls}from"./fse5r3xrzz5qybei.js";import{S as ds,a as cs,C as us}from"./oh7lieex8df6gy3d.js";import{T as ve}from"./iqnw9mlui36w4f2m.js";import{C as we}from"./lq7lwrvwa64irfkk.js";import{m as w}from"./bva9obs1v3upiudq.js";const hs=({onClose:a})=>{const s=ye(),o=k(B.isBusinessWorkspace),t=k(r=>r.currentWorkspace),i=o?s.formatMessage(ge.workspaceWelcome,{workspaceName:t?.name}):"ChatGPT";return e.jsx(Ne,{isOpen:!0,onClose:Le,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:s.formatMessage(ge.personalOnboardingSubheading),children:e.jsx(Pa,{onClose:a,scope:Ea.Personal})})};function gs({clientThreadId:a}){const[s,o]=d.useState(0),{hasSeenOnboardingDate:t}=$e(),{hasSeenTeamOwnerOnboardingDate:i}=Xe(),r=k(B.isBusinessWorkspace),u=Pe(),[n,b]=d.useState(!1),{data:O,isPending:P,isEnabled:E}=Ye(),S=Je(O,P&&E),{eligible:A}=Ze(),M=Ee(),x=Te(),C=De(),T=ea(()=>aa.getThread(a)),c=sa(a)||!T,D=N.getConversationOrigin(a),{data:h,isError:j}=_e(),g=h!=null,F=h&&h?.accountItems.length>1&&h.currentAccountId==null,V=h?.accountItems.some(l=>l.isPersonalAccount()),W=!!h?.accountItems&&h.accountItems.length>0&&h.accountItems.every(({canAccessWithCurrentSession:l})=>!l),{eligible:R,isLoading:H}=oa(),{value:G}=Ie("1542198993"),{punchOutRequireLoginInfo:U}=ta(),{state:z}=na(),{isOpen:q,isLoading:K}=ia(),{isOpen:Q,isLoading:$}=ra(),{isOpen:X,isLoading:Y}=la(),{isOpen:J,isLoading:Z}=da(),{state:ee}=ca(),f=d.useMemo(()=>[{Component:ua,getModalState:()=>U?"show":"hide",isDeferrable:!1},{Component:ha,getModalState:()=>z,isDeferrable:!1},{Component:ga,getModalState:()=>ee,isDeferrable:!1},{Component:fa,getModalState:()=>K||c?"loading":D===se.APPLE?"hide":q?"show":"hide",isDeferrable:!1},{Component:ma,getModalState:()=>Z||c?"loading":D===se.APPLE?"hide":J?"show":"hide",isDeferrable:!1},{Component:hs,getModalState:()=>r?"hide":t===null?"loading":t===!1?"show":"hide",isDeferrable:!0},{Component:pa,getModalState:()=>j?"hide":F?"show":g?"hide":"loading",isDeferrable:!1},{Component:ba,getModalState:()=>M!==null?"show":j||g?"hide":"loading",isDeferrable:!1},{Component:Sa,getModalState:()=>x!==null?"show":j||g?"hide":"loading",isDeferrable:!1},{Component:Ma,getModalState:()=>C!=null?"show":j||g?"hide":"loading",isDeferrable:!1},{Component:xa,getModalState:()=>g?W?"show":"hide":"loading",isDeferrable:!1},{Component:Ca,getModalState:()=>$?"loading":Q?"show":"hide",isDeferrable:!1},{Component:ja,getModalState:()=>Y?"loading":X?"show":"hide",isDeferrable:!1},{Component:Aa,getModalState:()=>"hide",isDeferrable:!1},{Component:va,getModalState:()=>!u?.isTeam()||!u?.isOwnerOfAccount()||!V?"hide":!g||i===null?"loading":i===!1?"show":"hide",isDeferrable:!1},{Component:wa,getModalState:()=>r?t===null?"loading":t===!1?"show":"hide":"hide",isDeferrable:!0},{Component:ka,getModalState:()=>H?"loading":R&&G?"show":"hide",isDeferrable:!1},{Component:Oa,getModalState:()=>S,isDeferrable:!1}].filter(l=>!(l.isDeferrable&&n)),[A,U,z,C,g,t,i,V,r,j,M,x,u,W,F,S,n,G,R,H,q,K,J,Z,ee,$,Q,X,Y,D,c]);d.useEffect(()=>{if(f[s]&&f[s].getModalState()==="hide"){const l=f.findIndex(Oe=>Oe.getModalState()!=="hide");o(l)}},[s,f]);const _=f[s],I=_?.getModalState()==="show";if(d.useEffect(()=>{const l=me.getState().activeModals.has(y.BlockingInitialComponent);I!==l&&(I?le.openModal(y.BlockingInitialComponent):le.closeModal(y.BlockingInitialComponent))},[I]),_==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const ae=_.getModalState();if(ae==="loading")return null;ae==="hide"&&o(l=>l+1);const ke=f[s].Component;return e.jsx(ke,{onClose:()=>{b(!0),o(l=>l+1)}})}const ge=Be({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),fs=m(()=>p(()=>import("./fv4viup8zxls08ac.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(a=>a.CanvasFocusedViewManager)),ms=m(()=>p(()=>import("./flx3uvyzqr1f83fg.js"),__vite__mapDeps([20,1,2,3,4,5,21,22,23,24,25,26,8,27])).then(a=>a.SearchResultsModal));function ps({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){const i=Ta();pe({clientThreadId:a});const{createNewThread:r,onThreadCreated:u,resetThread:n}=Da({clientThreadId:a,setClientThreadId:s});return _a({resetThreadAction:n,clientThreadId:a}),e.jsxs(be,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(Se,{clientThreadId:a,urlThreadId:o}),e.jsxs(he,{hideNavigation:i,mobileHeaderContent:e.jsx(Ia,{clientThreadId:a,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(ya,{clientThreadId:a}),mobileHeaderLeftContent:e.jsx(is,{onNewChatButtonClick:n}),mobileHeaderRightContent:e.jsx(rs,{onNewChatButtonClick:n}),sidebar:e.jsx(ls,{navHeader:a?e.jsx(ds,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:r}):null,children:e.jsx(cs,{clientThreadId:a,onNewThread:r})}),threadFlyout:e.jsx(Me,{clientThreadId:a}),children:[e.jsx(xe,{}),e.jsx(ve,{clientThreadId:a,onCreate:u,prefetchSearch:t},a),e.jsxs(he.Sidebars,{children:[e.jsx(fs,{clientThreadId:a}),e.jsx(Ce,{clientThreadId:a}),!1]})]}),e.jsx(bs,{clientThreadId:a})]})}function bs({clientThreadId:a}){const s=Fe(),o=s?.includes(oe.SearchTool)&&!s?.includes(oe.SearchToolHoldout),t=Na(),{isOpen:i}=La();return i&&(!t||!o)&&e.jsx(ms,{clientThreadId:a})}const fe=450;function Ss({children:a,clientThreadId:s,isOpen:o,onClose:t}){const i=je();return e.jsxs(Ba,{children:[o&&i&&e.jsx(Ae,{clientThreadId:s,children:e.jsx(te,{children:e.jsx(de.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(w.div,{className:"h-full w-full bg-token-main-surface-secondary",...v}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(w.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:fe},...v,children:e.jsx(we,{hideHeader:!0,hideTools:!0})})]})]})})})}),o&&!i&&e.jsx(te,{children:e.jsx(de.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(w.div,{className:"h-full w-full bg-token-main-surface-secondary",...v}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(w.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:fe},...v,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(ve,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const Ms=m(()=>p(()=>import("./lp2y961h36pgsenn.js"),__vite__mapDeps([28,1,2,3,4,5]))),xs=m(()=>p(()=>import("./lycth7uqpnq98xnn.js"),__vite__mapDeps([29,1,2,3,4,5,30,31,8,32,18,33,34,15,35,36,37,9,38,39,40])).then(a=>a.ImageEditor));function Cs({clientThreadId:a}){const s=Fa();d.useEffect(()=>{L.close()},[a]);let o;return s?.type===ce.ADAVisualization?o=e.jsx(Ms,{clientThreadId:a,visualization:s.visualization}):s?.type===ce.Image&&(o=e.jsx(xs,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(Ss,{clientThreadId:a,isOpen:s!=null,onClose:L.close,children:o})}const js=m(()=>p(()=>import("./fv4viup8zxls08ac.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19])).then(a=>a.CanvasFocusedViewManager));function As(){const{focusedObject:a,clientThreadId:s}=Va();return e.jsx(Wa,{className:Ve(ne.application,{[ne.withFocusedView]:a}),sidebar:e.jsx(us,{}),thread:e.jsx(we,{},s),details:e.jsxs(e.Fragment,{children:[e.jsx(js,{clientThreadId:s}),!1]}),threadExtendedInfo:e.jsx(Me,{clientThreadId:s}),debugger:e.jsx(Ce,{clientThreadId:s}),name:"application-root"})}function vs({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){return pe({clientThreadId:a}),e.jsx(Ae,{clientThreadId:a,setClientThreadId:s,prefetchSearch:t,children:e.jsxs(Ra,{children:[e.jsx(Ha,{}),e.jsx(Ga,{}),e.jsxs(be,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(Se,{clientThreadId:a,urlThreadId:o}),e.jsx(xe,{}),e.jsx(As,{})]})]})})}var ws={};const ks=m(()=>p(()=>import("./g2gs0ph39hfixbc2.js"),__vite__mapDeps([41,1,2,3,4,5,42])));function Ls(a){const{urlThreadId:s,clientThreadId:o,prefetchSearch:t}=a;Ps();const i=We(),r=ie(),[u]=Re(),[n,b]=d.useState(()=>s!==void 0?s:o!==void 0?o:re());s!==void 0&&n!==s&&N.getServerThreadId(n)!==s&&b(s);const O=Ua(ie());d.useEffect(()=>{s===void 0&&N.getServerThreadId(n)!==void 0&&b(re())},[s,n,O]);const P=k(B.workspaceId),E=je(),{eligible:S,isLoading:A,markAsViewed:M}=za(),x=qa();d.useEffect(()=>{(r.pathname==="/"||r.pathname.startsWith("/c/"))&&Ka({namespace:ue.ChatPageLoad})==null&&(Qa({namespace:ue.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),He.addTiming("chatgpt.web.chatPage.mounted"))},[]);const C=$a();d.useEffect(()=>{Ge(!0).then(c=>{c.force_login&&C({authType:"login"}),Ue.initializeAndGatherData(c),Xa.initializeAndGatherData(c),ze.initializeAndGatherData(c)})},[C]),d.useEffect(()=>{const c=u.get(Ya)==="true";i!==c&&qe.setIsTemporaryChatEnabled(c)},[i,u]),d.useEffect(()=>{r.state?.focusObject&&L.setFocusedObject(r.state.focusObject)},[r.state?.focusObject]),d.useEffect(()=>{!A&&S&&(M(),x())},[S,A,M,x]),Ja();const T=E?vs:ps;return e.jsx(Za.Provider,{value:null,children:e.jsx(es,{children:e.jsxs(as,{clientThreadId:n,children:[e.jsx(gs,{clientThreadId:n},P),!1,e.jsx(ss,{}),e.jsx(os,{}),e.jsx(T,{urlThreadId:s,clientThreadId:n,setClientThreadId:b,prefetchSearch:t}),e.jsx(Cs,{clientThreadId:n}),e.jsx(ts,{clientThreadId:n}),e.jsx(Os,{}),e.jsx(ns,{})]})})})}function Os(){const a=me(s=>s.sharingModalThreadId);return a?e.jsx(ks,{serverThreadId:a}):null}function Ps(){Ke({queryKey:["pingEdge"],queryFn:()=>Qe.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=ws.GOKU_SERVICE);export{Ls as C,fe as F};
//# sourceMappingURL=b76iv34ycmbcpi75.js.map
