const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/knw5sjvwmn1f77ch.js","assets/gblfh15g18zr7pwb.js","assets/fxihrcxhyf7cscoy.js","assets/root-mumb2j74.css","assets/excramzz6zmdjrf7.js","assets/conversation-small-ict01xsi.css","assets/ny97a6zaxx8dkaur.js","assets/mayoy69amcb76b6l.js","assets/6q43potufxm7ybkq.js","assets/jrff983dtdqrqosv.js","assets/k04ck5jz7xpugaan.js","assets/m0mw406kbxcyqjdt.js","assets/k5sh7u8yh3bk12bi.js","assets/fae6lgtd8eq36gap.js","assets/icxrpuv2qhfccct8.js","assets/h0lewpj4sqqc9iao.js","assets/d92sme9gdpkl1kx8.js"])))=>i.map(i=>d[i]);
import{u as q,j as e,r as l,az as d,dF as G,bb as Z,aw as E,aM as y,aN as I,Y as L,au as $,ac as Q,b0 as ee,a8 as k,aJ as N,ao as _,b9 as H,b4 as se,e5 as j,aH as te,aI as ne,f2 as ae}from"./gblfh15g18zr7pwb.js";import{dp as w,F as T,bV as ie,j2 as oe,du as re,eP as ce,j3 as le,j4 as de,bM as ue,ch as me,j5 as be,bj as he,bJ as fe,j6 as ge,U as P,b4 as B,df as R,b2 as Se,b3 as D,dw as xe,dx as h,j7 as pe,j8 as je,fY as ve,j9 as Ce,dy as ye,ja as z,hU as Ie,fS as U,b0 as V,jb as ke,jc as Ne,jd as we,je as p,jf as Te,ic as Me,jg as Oe,jh as Ae,eV as Fe,ji as Pe}from"./excramzz6zmdjrf7.js";import{r as ze,Z as W,bG as Ge,aA as Ee}from"./fxihrcxhyf7cscoy.js";import{m as Le}from"./k04ck5jz7xpugaan.js";import{N as _e,u as K,h as He}from"./m0mw406kbxcyqjdt.js";import{a as Be}from"./icxrpuv2qhfccct8.js";import{U as Re,P as De}from"./h0lewpj4sqqc9iao.js";function Ue(){const s=w(T.SonicSidebar),[t,n]=l.useState(!1);return s.isLoading||!s.eligible?null:e.jsx(Le.div,{className:"no-draggable group pb-0",whileTap:{scale:.98},children:e.jsx(We,{children:e.jsx(ie,{href:"/search",target:"_blank",icon:e.jsx("div",{className:d("gizmo-shadow-stroke mr-[0.5] flex h-[18px] w-[18px] items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:e.jsx(oe,{})}),label:"SearchGPT",hoverRightIcon:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ke,{isOpen:t,setIsOpen:n,onDismiss:()=>s.markAsViewed()}),e.jsx(ze,{className:d("icon-md text-token-text-tertiary",!t&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function Ve(){const s=ce(),t=w(T.hasSeenSncSidebarTooltip),n=le(),a=de(),{activeModals:o}=ue(),r=me();return!t.isLoading&&t.eligible&&!n&&o.size===0&&!s&&!a&&!r}function We({children:s}){const t=Ve(),n=w(T.hasSeenSncSidebarTooltip);return t?e.jsx(re,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:n.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:e.jsx("div",{className:"w-full",children:s})}):e.jsx(e.Fragment,{children:s})}function Ke({isOpen:s,setIsOpen:t,onDismiss:n}){return e.jsx(G,{open:s,onOpenChange:t,triggerButton:e.jsx("button",{className:d("flex text-token-text-tertiary",s?"":"invisible group-hover:visible"),onClick:a=>{a.preventDefault()},children:e.jsx(W,{className:"icon-md"})}),children:e.jsx(Z.Item,{onClick:a=>{a.preventDefault(),n()},children:e.jsx(E,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}function Ye(){const s=q("114024");return!s.value||s.isLoading?null:e.jsx(Ue,{})}const Je=y(()=>I(()=>import("./knw5sjvwmn1f77ch.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(s=>s.FannyPackAction)),Xe=y(()=>I(()=>import("./jrff983dtdqrqosv.js"),__vite__mapDeps([9,1,2,3,4,5,10,11,12,13,14,15])).then(s=>s.GizmoSidebarList));function us({clientThreadId:s,onNewThread:t}){const n=B(s),a=k(),{isUnauthenticated:o}=N(),r=R(s),c=_();return o?null:e.jsxs(e.Fragment,{children:[e.jsx(Se,{onNewThread:t}),a?.canInteractWithGizmos()?e.jsx(Xe,{currentGizmoId:r}):e.jsx(Ye,{}),!1,!o&&e.jsx(D,{activeId:c?void 0:n})]})}function ms({className:s,onNewThread:t}){const n=L(),a=$(),o=be(),r=Q(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:c}=he();return e.jsxs("div",{className:d("flex",r?.visible&&r.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(ee,{sideOffset:4,label:n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(fe,{className:"no-draggable","aria-label":n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{ge(a)?P.toggleNavSidebar():P.togglePopoverNavSidebar()},icon:Ge,mobileIcon:Ee,surfaceContext:"secondary","data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[c&&e.jsx(Je,{}),!o&&e.jsx(_e,{onClick:t,testId:"create-new-chat-button"})]})]})}function qe({onClick:s}){const{clientThreadId:t}=K(),{isSidebarFlyoutOpen:n,onSidebarFlyoutOpenChange:a}=xe(),o=n(h.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(G,{onOpenChange:r=>a(h.Conversation,r),side:"right",sideOffset:4,open:o,contentAlign:"end",triggerButton:e.jsxs("button",{className:d("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2.5 text-sm tracking-condensed text-token-text-secondary hover:bg-token-main-surface-secondary focus:ring-0",o&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(W,{className:d("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(E,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(H,{children:e.jsx(D,{activeId:t,hideOverflowMenu:!0})})})})})}function Ze({clientThreadId:s}){const t=B(s),n=_(),{isCollapsible:a,recentConversationLimit:o}=pe(),r={recentConversationLimit:o},c=l.useRef(!1),f=!0,{conversations:u,data:m,isLoading:i,isError:S,recents:g,refetch:x}=je(r),[Y,M]=l.useState(!0),O=l.useCallback(function(C){C===void 0&&M(!1),x({cancelRefetch:!0})},[x,M]),v=n?void 0:t,J=u.length===0,A=S||m===void 0&&!i&&c.current,X=!A&&(m===void 0||i);m===void 0&&!i&&!c.current&&(c.current=!0,O(!0));const F=u.find(b=>b.id===v)??null;return l.useMemo(()=>{ve.publish({kind:"refreshHistory",conversations:u})},[u]),e.jsxs(e.Fragment,{children:[A&&e.jsx(Ce,{showRetry:Y,refetch:O}),!J&&e.jsxs(ye,{header:g.label,isLastInGroup:!0,children:[g.items.map((b,C)=>e.jsx(z,{item:b,isActive:b.id===v,testId:`history-item-${C}`},b.id)),F&&!g.items.some(b=>b.id===v)&&e.jsx(z,{item:F,isActive:!0})]}),X&&e.jsx(se,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),a&&e.jsx(H,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!f,className:d(!f),children:e.jsx(qe,{})})})})]})}const $e=y(()=>I(()=>import("./d92sme9gdpkl1kx8.js"),__vite__mapDeps([16,1,2,3,4,5,9,10,11,12,13,14,15])).then(s=>s.ChatScreenGizmoSidebarList));function Qe({clientThreadId:s}){const t=k(),n=R(s),{isUnauthenticated:a}=N();return a?null:e.jsxs("div",{className:d(j.screenContent),children:[null,e.jsx(Ze,{clientThreadId:s}),t?.canInteractWithGizmos()?e.jsx($e,{currentGizmoId:n}):null]})}function es(){const s=k(),t=s?.data==null,{isUnauthenticated:n}=N(),{openSettings:a}=Ie(),[o]=l.useState(()=>{const i=te.getCookie(ne.Workspace);return typeof i=="string"&&i!==ae}),r=L(),{store:c,actions:f}=U(),u=c(i=>i.mode);if(!s||o&&t)return null;const m=n?e.jsx(Re,{}):e.jsx(He,{onClickSettings:()=>a()});return e.jsxs(V,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[m,e.jsx("div",{className:j.togglePinWrapper,children:e.jsx(ke,{tooltipSideOffset:14,className:j.pinSidebarAction,icon:e.jsx(Ne,{}),onActivate:i=>{i.preventDefault(),i.persist(),we.togglePinSidebar(i,f,u===p.Floating?p.Pinned:p.Floating)},label:u===p.Floating?r.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):r.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:Te.FloatingOrPinned})})]})}function ss(){return e.jsx(V,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(De,{})})}function ts(){return e.jsxs(Me,{className:d(j.screenTrailingBarContainer),children:[e.jsx(ss,{}),e.jsx(es,{})]})}function bs(){const{clientThreadId:s,onNewThread:t}=K(),[n,a]=l.useState(!1),[o,r]=l.useState(!1),{store:c,actions:f}=U(),u=l.useCallback(i=>i===h.Conversation?n:i===h.Gizmo?o:!1,[n,o]),m=l.useCallback((i,S)=>{const g=x=>{i===h.Conversation?a(x):i===h.Gizmo&&r(x)};if(S){g(S);return}setTimeout(()=>{g(S)},100)},[]);return Be(()=>{m(h.Conversation,!1),m(h.Gizmo,!1),window.matchMedia("(max-width: 700px)").matches&&c.getState().mode===p.Floating&&setTimeout(()=>{f.closeSidebar()},100)}),e.jsxs(Oe,{value:{isSidebarFlyoutOpen:u,onSidebarFlyoutOpenChange:m},children:[e.jsx(Ae,{}),e.jsx(Fe,{anchor:"vertical",className:d(j.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Pe,{onNewThread:t}),trackLeading:!0,trailing:e.jsx(ts,{}),children:e.jsx(Qe,{clientThreadId:s})})]})}export{bs as C,ms as S,Ye as a,us as b};
//# sourceMappingURL=ofwd1hipxshy1t1d.js.map
