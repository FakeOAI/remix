import{a3 as k,t as e,T as y,a8 as m,aA as j,r as f,d as p,P as v}from"./elatgogjtv7nqe0m.js";import{dw as S,dx as R,dy as _,dz as M,dA as x,bR as N,c as A}from"./htp5iqft2rzvr58f.js";import{S as E,a as w}from"./g2kwkwnujpn0wjnk.js";import{o as D,p as C}from"./h1jpzm6tqkxt344d.js";import{g as L}from"./kqwdyvkaaavvn8k3.js";import{a as P}from"./kjt5h7j69e6yt20h.js";import{b as T}from"./njnyzv45aw3y7o3m.js";import{E as z}from"./gdbrdy5dsypwxgl2.js";import{m as F}from"./iudm9ugwilu2skh4.js";import"./cr91oy4eihkrvo1z.js";import"./lknunzf857a9nkhn.js";function $({date:t}){const a=k(),s=t instanceof Date?t:new Date(t*1e3),n=S(s,new Date);if(n<4&&n>-4){const r=a.formatRelativeTime(n,"day",{numeric:"auto"});return r.charAt(0).toUpperCase()+r.slice(1)}else return a.formatDate(s,{year:"numeric",month:"long",day:"numeric"})}function Z({clientThreadId:t,turnIndex:a,messageId:s,isInSidebar:n=!1}){const r=D(t,a),o=C(t,a),c={clientThreadId:t,messageId:s,turnIndex:a},i=R(o,l=>l.entries).toSorted((l,u)=>(u?.pub_date??0)-(l?.pub_date??0));return e.jsxs("div",{className:y("flex w-full flex-col border-t border-token-border-light bg-token-main-surface-primary",n?"mt-[-57px]":"mt-0"),children:[e.jsx(h,{title:e.jsx(m,{id:"dlVlo6",defaultMessage:"Citations"}),items:r,analyticsMetadata:c,messageId:s}),e.jsx(h,{title:e.jsx(m,{id:"iUafP7",defaultMessage:"Search Results"}),items:i,analyticsMetadata:c,messageId:s})]},`${a}-${t}`)}function h({title:t,items:a,analyticsMetadata:s,messageId:n}){return!a||a.length===0?null:e.jsxs("div",{children:[e.jsx(b,{className:"sticky top-0 z-[1] h-[56px] border-b border-token-border-light bg-token-main-surface-primary px-6 py-4 text-sm font-medium text-token-text-primary",children:t}),e.jsx("div",{className:"flex flex-col px-3 py-2",children:a.map((r,o)=>e.jsx(b,{index:o,children:e.jsx(U,{item:r,analyticsMetadata:s,index:o,messageId:n},o)},`${t}-${o}`))})]})}function b({children:t,index:a=0,className:s=""}){return e.jsx(F.div,{className:s,initial:{opacity:0},animate:{opacity:1},transition:{delay:(a+1)*.03},children:t})}function U({item:t,index:a,analyticsMetadata:s,messageId:n}){const r=P(t.url).data??L(t.url,"short"),o=d=>"ref_id"in d&&"content_type"in d,c=_(),i=j().resolvedTheme==="dark",l=M(),u=e.jsxs(H,{analyticsMetadata:s,href:t.url,position:a,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{t.attributions&&x.setHighlight(n,t.attributions?.slice(0,l).map(({attribution_index:d,probability:g})=>({index:d,probability:g})))},onMouseLeave:()=>{x.clearHighlights()},children:[e.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[e.jsx(N,{url:t.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:e.jsx(E,{className:"icon-sm text-token-text-quaternary"})}),r,o(t)&&e.jsx(w,{searchResult:t,className:"inline h-4 w-4 text-token-text-tertiary"})]}),e.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:t.title}),(t.pub_date??t.snippet)&&e.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[t.pub_date&&e.jsx($,{date:t.pub_date}),t.pub_date&&t.snippet&&" â€” ",t.snippet]})]});return c?e.jsx(A,{label:e.jsx(z,{item:t}),className:"text-left text-xs",theme:i?"default":"white",children:u}):u}const H=f.forwardRef(function(a,s){const{analyticsMetadata:n,position:r,...o}=a;function c(i,l){a.href&&v.logEventWithStatsig(i,l,{...T(n),url:a.href,raw_position:r.toString()})}return f.useEffect(()=>{c(p.searchLinkShown,"search_link_shown")},[]),e.jsx("a",{ref:s,...o,onClick:i=>{a.onClick?.(i),i.stopPropagation(),c(p.searchLinkClicked,"search_link_clicked")}})});export{Z as SearchSources,h as SourcesListGroup};
//# sourceMappingURL=ldvdltwdsykp9yhr.js.map
