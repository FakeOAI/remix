const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lznxhzguq23zvbst.js","assets/elatgogjtv7nqe0m.js","assets/cr91oy4eihkrvo1z.js","assets/root-f2ivi636.css","assets/dt30ajj9yy0fx43z.js","assets/htp5iqft2rzvr58f.js","assets/conversation-small-mclg7qvi.css","assets/fmv8nex9lm6fgdd1.js","assets/mhoun9ad2jk8xyl3.js","assets/h1xmpcoqij88ddar.js","assets/cguzkiw1ysteyh96.js","assets/m3z1qz3cc8c6u3xf.js","assets/mmf744yo7oex6s8h.js","assets/omba5vbgw2kqkaoe.js","assets/frk1etidprk2mn5h.js","assets/korsme7s7hk24byb.js","assets/sso-mbpcti5xy6krfg95.js","assets/gt9yt6m8kstbc8qg.js","assets/pa1iyn2idxl19s5v.js","assets/lknunzf857a9nkhn.js","assets/h1jpzm6tqkxt344d.js","assets/iudm9ugwilu2skh4.js","assets/njnyzv45aw3y7o3m.js","assets/l6guvzd52gy27z13.js","assets/e52rm0fcoysbc5g7.js","assets/heqqk27j3mi75hhq.js","assets/iwxixxpe5e3magz2.js","assets/goajibdwxzha23en.js","assets/n67zukerwlagub9o.js","assets/k4jmcc7xi21ufmsx.js","assets/oxxp3esgmgzz1mrz.js","assets/i1wp36sdgmc0qfin.js","assets/invgdph6vy3ds9mr.js","assets/h33iotbq4bwsa76b.js","assets/jxoikmmk4apd7oqs.js","assets/go5jwhbjp3l9pm7p.js","assets/ezsmqsp05gis9fbo.js","assets/gzgf69j2kwt2cajo.js","assets/itghwucfyv5ciib7.js","assets/bxmtg68yodh0dibp.js","assets/983a0dy92b3ronpv.js","assets/9s7ikcyvuoe4rox8.js","assets/g2kwkwnujpn0wjnk.js","assets/kqwdyvkaaavvn8k3.js","assets/kjt5h7j69e6yt20h.js","assets/d0cv1xpu4ddq05dn.js","assets/hkltmo8vpfgztpvg.js","assets/exw8rqvcib9p1xbv.js","assets/nhwwej1nq0zrd7sc.js","assets/mz3x8579ol9czhqt.js","assets/c2zknxzodv7bzaks.js","assets/d51dduttnzc9df1c.js","assets/jk6trg67dh7lvgks.js","assets/f19d6wcygynlz0m6.js","assets/dkvt10yo0ml0h6i4.js","assets/f7hufexli35qg583.js","assets/l5dm2t1bcdfhkv8v.js","assets/c7jfdjoy3tdlx9ci.js","assets/iej0cupg2dqkmejt.js","assets/jch8jimsi1vui4vi.js","assets/kb2k7qi5k4l96gs7.js","assets/jk8w36bsokizpx57.js","assets/g1iwufhjwkzbmk25.js","assets/jp8rwyahge8nbheg.js","assets/m9o5lr86ffp69pzq.js","assets/jzxvdfnszp91i4yk.js","assets/7p9wcr5j6pkl0bd2.js","assets/kn9exsm7ivyfqe14.js","assets/gbydpb7c8oejdy6d.js","assets/swiper-kmk1dd5x.css"])))=>i.map(i=>d[i]);
import{r as a,O as ye,aj as Se,D as _,d8 as Me,t as e,dO as ge,T as y,s as ct,cc as he,a8 as Ie,j as lt,aD as He,aC as dt,e1 as ut,aU as mt,a5 as Fe,a6 as De,a$ as Ue,bz as ht,aT as ft,ag as qe,u as pt,b as xt,y as gt,bv as bt,fp as wt,bp as yt,aa as St,cF as vt,dq as jt}from"./elatgogjtv7nqe0m.js";import{bv as _t,bw as kt,aG as Nt,bx as Tt,by as Et,x as Ct,bz as Pt,bA as It,aC as We,t as Ge,bB as At,d as Lt,b8 as Rt,s as Ot,aE as Mt,ah as Ht}from"./cr91oy4eihkrvo1z.js";import{L as Ft,a as Ve,S as Dt,b as Be,R as Ut,A as Qe,u as $e,G as qt}from"./fmv8nex9lm6fgdd1.js";import{h4 as Ke,cU as Ye,h8 as Wt,cE as ze,a4 as be,h9 as Gt,ha as Vt,af as Xe,eF as Bt,hb as Qt,Y as C,Z as P,dG as $t,hc as Kt,$ as Yt,hd as zt,i as Xt,he as Zt,hf as fe,hg as Jt,hh as es,k,hi as ts,hj as ss,c5 as ns}from"./htp5iqft2rzvr58f.js";import{S as I,P as A,u as Ze,a as rs,C as as,r as os,R as is,g as cs,b as ls,c as ds,f as us}from"./bxmtg68yodh0dibp.js";import{m as T}from"./iudm9ugwilu2skh4.js";import{u as ce,a as le,U as X,b as Z,c as Ae,d as z,S as ms}from"./frk1etidprk2mn5h.js";import{i as Le}from"./mphj8flarivjr19i.js";import{i as hs}from"./i5xse42anbkbyjnb.js";import{a as f,c as Je,S as fs,E as ps}from"./h1xmpcoqij88ddar.js";import{L as xs,a as gs,u as bs}from"./mmf744yo7oex6s8h.js";import{S as ws,c as ys,b as Ss}from"./omba5vbgw2kqkaoe.js";import"./mhoun9ad2jk8xyl3.js";import"./oxxp3esgmgzz1mrz.js";import"./h1jpzm6tqkxt344d.js";import"./k4jmcc7xi21ufmsx.js";import"./983a0dy92b3ronpv.js";import"./9s7ikcyvuoe4rox8.js";import"./g2kwkwnujpn0wjnk.js";import"./kqwdyvkaaavvn8k3.js";import"./kjt5h7j69e6yt20h.js";import"./lknunzf857a9nkhn.js";import"./njnyzv45aw3y7o3m.js";import"./cguzkiw1ysteyh96.js";import"./m3z1qz3cc8c6u3xf.js";const vs=t=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:26,height:8,viewBox:"0 0 26 8",fill:"none",...t},a.createElement("path",{d:"M1 1L12.5528 6.77639C12.8343 6.91716 13.1657 6.91716 13.4472 6.77639L25 1",stroke:"currentColor",strokeLinecap:"round"})),$="inline-block flex items-center min-h-10 rounded-full px-6 leading-none tracking-[0.0015rem]",js="transition-[background-color,color] duration-500 ease-[cubic-bezier(.215,.61,.355,1)] overflow-hidden",ne="bg-black/10 text-gray-600 pointer-events-none",Re="bg-[#080808] text-white hover:bg-black/75 ";function Y(t){return y("duration-700 transition-[opacity,filter]",{"opacity-0 blur-xl":!t})}function _s(){return e.jsxs("a",{className:"flex items-center gap-1 hover:opacity-80",href:Dt,target:"_blank",onClick:()=>{I.logEvent(A.waitlistLearnMoreClicked)},rel:"noreferrer",children:["Learn More",e.jsx(kt,{className:"icon-md"})]})}const re=ye.div`md:grid flex flex-col md:grid-rows-1 md:grid-cols-2 items-center justify-center bg-white rounded-md overflow-hidden w-full md:aspect-[140/67]`,ks=ye.div`flex items-center justify-center bg-white rounded-xl overflow-hidden w-full md:h-[30rem]`,ae={autoPlay:!0,loop:!0,playsInline:!0,muted:!0};function oe({header:t,children:n}){return e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-8 text-center md:items-start md:p-20 md:text-left",children:[e.jsx("h3",{className:"w-full whitespace-break-spaces pr-4 text-[1.7rem] font-normal",children:t}),e.jsx("p",{className:"text-base font-normal text-gray-600",children:n})]})}function et({isWaitlistEnabled:t,isOnWaitlist:n,setIsOnWaitlist:o,isRegionBlocked:l,isWorkspacePlanBlocked:c,authStatus:s,children:r}){const{pathname:h,search:p,hash:g}=ct(),i=`/auth/login?next=${encodeURIComponent(h+p+g)}`;return t?s===ge.LoggedOut?e.jsxs(e.Fragment,{children:[e.jsx(he,{to:i,className:y($,Re),children:e.jsx("span",{className:"relative",children:"Sign in to join waitlist"})}),r,e.jsx(he,{className:"hover:opacity-80",to:i,children:"Have access? Log in here."})]}):l?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:y($,ne),children:"Unavailable in your region"}),r]}):c?e.jsxs(e.Fragment,{children:[e.jsx("button",{className:y($,ne),children:"Sign in to your personal account to join the waitlist"}),r]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:y($,js,n?ne:Re),onClick:async()=>{const{status:v}=await Wt();o(v),I.logEvent(A.waitlistButtonClicked,{status:v}),_.addAction("sonic.web.waitlist_button_clicked",{status:v})},children:[e.jsxs(T.span,{className:"flex items-center gap-2 text-nowrap text-gray-600",initial:n?{opacity:1,width:"auto"}:{opacity:0,width:0},animate:n?{opacity:1,width:"auto"}:{opacity:0,width:0},children:[e.jsx(_t,{className:"h-5 w-5 shrink-0"}),"You're on the waitlist"]}),e.jsx(T.span,{className:"text-nowrap text-white",initial:n?{opacity:0,width:0}:{opacity:1,width:"auto"},animate:n?{opacity:0,width:0}:{opacity:1,width:"auto"},children:"Join the waitlist"})]}),r,!1]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{className:y($,ne),children:"The waitlist is now closed"}),r,s===ge.LoggedOut&&e.jsx(he,{className:"hover:opacity-80",to:i,children:"Have access? Log in here."})]})}function Ns({isWaitlistEnabled:t,isOnWaitlist:n,isRegionBlocked:o,isWorkspacePlanBlocked:l,authStatus:c,setIsOnWaitlist:s,isVideoLoaded:r}){return e.jsxs("div",{className:"absolute inset-0 flex h-full w-full flex-col items-center justify-center",children:[e.jsx("h3",{className:y("mb-3 rounded-full bg-[#A47EE726] px-3 py-1 text-xs font-semibold text-[#875BE1]",Y(r)),children:"Prototype"}),e.jsx("h1",{className:y("mb-5 text-center text-5xl font-normal delay-100 sm:text-6xl md:text-7xl",Y(r)),children:"SearchGPT"}),e.jsx("h2",{className:y("mb-9 w-4/5 max-w-[40rem] text-center text-lg font-normal delay-300",Y(r)),children:"A prototype of new search features, using the strength of our AI models to give you fast answers with clear and relevant sources."}),e.jsx("div",{className:y("flex min-h-10 w-full max-w-[30rem] flex-wrap items-center justify-center gap-6 text-[0.95rem] delay-500",Y(r)),children:e.jsx(et,{isOnWaitlist:n,isRegionBlocked:o,isWorkspacePlanBlocked:!!l,authStatus:c,isWaitlistEnabled:t,setIsOnWaitlist:s,children:e.jsx(_s,{})})})]})}function Ts({isWaitlistEnabled:t=!1,isOnWaitlist:n=!1,isRegionBlocked:o=!1,authStatus:l,isAccountPlanBlocked:c}){const[s,r]=a.useState(!1),u=a.useRef(null),[h,p]=a.useState(n),i=Se()?.isWorkspacePlan()??c??!1;a.useEffect(()=>(u.current=setTimeout(()=>{r(!0)},200),()=>{u.current&&clearTimeout(u.current)}),[]),a.useEffect(()=>{I.logEvent(A.waitlistPageShown,{is_waitlist_enabled:t,is_on_waitlist:h,is_region_blocked:o,auth_status:l}),_.addAction("sonic.web.waitlist_page_shown",{is_waitlist_enabled:t,is_on_waitlist:h,is_region_blocked:o,auth_status:l})},[]);const[v,m]=a.useState(!1);a.useEffect(()=>{if(!Ke())return;const j=()=>{const R=window.innerHeight,L=document.documentElement.clientHeight;m(R<L)};return j(),Me(window,{resize:j})},[]);const S=a.useRef(null),N=()=>{S.current&&S.current.scrollIntoView({behavior:"smooth",block:"start"})};return e.jsxs(e.Fragment,{children:[e.jsx(Ye,{children:e.jsx("title",{children:"SearchGPT"})}),e.jsxs("div",{className:"flex min-h-full w-full flex-col items-center overflow-x-hidden bg-gray-50 text-gray-950",children:[e.jsxs("div",{className:"absolute left-0 top-0 flex h-20 w-full items-center justify-between",children:[e.jsx(Ft,{}),l===ge.LoggedIn&&e.jsx(Ve,{})]}),e.jsxs("div",{className:"relative mb-32 h-screen w-screen",children:[e.jsx("video",{src:"https://persistent.oaistatic.com/sonic/landing/bg_v2.mp4",autoPlay:!0,loop:!0,playsInline:!0,muted:!0,className:y("pointer-events-none absolute left-0 top-0 h-[calc(100vh+8rem)] w-full object-cover transition-opacity delay-1000 duration-1000",!s&&"opacity-0"),onCanPlayThrough:()=>{},onPlay:()=>{r(!0)}}),e.jsx("div",{className:"absolute left-0 top-[100vh] h-32 w-full bg-gradient-to-t from-gray-50 to-transparent"}),e.jsx(Ns,{isWaitlistEnabled:t,isOnWaitlist:h,isRegionBlocked:o,isWorkspacePlanBlocked:i,authStatus:l,setIsOnWaitlist:p,isVideoLoaded:s}),e.jsxs("div",{className:y("absolute flex w-full flex-col items-center gap-4 text-[10px] text-black/40 delay-500 md:mt-7 md:text-xs lg:mt-9",v?"bottom-24":"bottom-7",Y(s)),children:[e.jsx("span",{children:"Access is limited. If selected, you'll receive an email."}),e.jsx("div",{className:"p-2 hover:cursor-pointer hover:opacity-80",onClick:N,children:e.jsx(vs,{className:"animate-bounce stroke-2"})})]})]}),e.jsxs("div",{className:"flex max-w-[70rem] flex-col items-center justify-center gap-32 px-6 py-32",ref:S,children:[e.jsx("h4",{className:"max-w-[36rem] text-center text-4xl",children:"SearchGPT is a faster, easier way to find what you're looking for"}),e.jsxs(re,{children:[e.jsx(oe,{header:"Designed to give you an answer",children:"Get quick and timely answers to your questions."}),e.jsx("video",{src:"https://persistent.oaistatic.com/sonic/landing/fastanswers_v3.mp4",...ae,className:"h-full w-full object-cover"})]}),e.jsxs(re,{children:[e.jsx("video",{src:"https://persistent.oaistatic.com/sonic/landing/realtimeinfo_v2.mp4",...ae,className:"aspect-square h-full w-full object-cover"}),e.jsx(oe,{header:"Real-time information from relevant sources",children:"Find up-to-date information from the web with clear links to relevant sources."})]}),e.jsxs(re,{children:[e.jsx(oe,{header:"Search in a more natural, intuitive way",children:"Ask follow-up questions, just like you would in a conversation."}),e.jsx("video",{src:"https://persistent.oaistatic.com/sonic/landing/followups_v3.mp4",...ae,className:"h-full w-full object-cover"})]}),e.jsxs(re,{children:[e.jsx("video",{src:"https://persistent.oaistatic.com/sonic/landing/visualanswers_v3.mp4",...ae,className:"h-full w-full object-cover"}),e.jsx(oe,{header:"Visual results for richer understanding",children:"Get visual responses with images and video in an easy-to-understand format."})]}),e.jsx(ks,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 p-8 text-center md:px-20 md:py-16",children:[e.jsx("h3",{className:"pr-4 text-3xl font-normal",children:"What comes next"}),e.jsxs("div",{children:[e.jsx("p",{children:"We plan to get feedback on the prototype and bring the best of this experience into ChatGPT."}),e.jsx("p",{className:"mt-2",children:"If you're interested in trying SearchGPT, sign up for the waitlist."})]}),e.jsx("div",{className:"mt-4 flex min-h-10 w-full max-w-[30rem] flex-wrap items-center justify-center gap-6 text-[0.95rem]",children:e.jsx(et,{isOnWaitlist:h,setIsOnWaitlist:p,isRegionBlocked:o,isWorkspacePlanBlocked:i,authStatus:l,isWaitlistEnabled:t})})]})})]})]})]})}function Es({reason:t}){const n=Se();return a.useEffect(()=>{I.logEvent(A.blockedPageShown)},[]),e.jsxs("div",{className:"flex min-h-screen w-full justify-center bg-token-main-surface-primary",children:[e.jsx(Be,{hideReadyState:!0}),e.jsxs("div",{className:"m-auto flex max-w-2xl flex-col items-center space-y-2 pb-20 pt-20 text-token-text-tertiary",children:[e.jsx(Nt,{className:"h-10 w-10"}),e.jsxs("p",{className:"font-semibold",children:[t==="region"&&e.jsx(Ie,{id:"SLU4OU",defaultMessage:"SearchGPT is not currently available in your country."}),t==="enterprise"&&e.jsx(Ie,{id:"8pSa5H",defaultMessage:"SearchGPT is not currently available for Enterprise or Team accounts."})]})]}),n?.id&&e.jsx(Ve,{})]})}function Cs(){const t=ce(le.isWelcomePageOpen),{eligible:n,isLoading:o}=ze(be.hasSeenSncWelcomeNux);return a.useEffect(()=>{X.setWelcomePageOpen(n)},[n]),{showWelcomePage:t,isAnnouncementEligible:n,onClose:()=>{X.setWelcomePageOpen(!1),lt.announcementViewed(be.hasSeenSncWelcomeNux)},isLoading:o}}const Ps=({onClose:t})=>(a.useEffect(()=>{I.logEvent(A.welcomePageShown)},[]),e.jsxs("div",{className:"flex min-h-screen w-full bg-token-main-surface-primary",children:[e.jsx("div",{className:"flex w-full justify-center",children:e.jsxs("div",{className:"m-auto max-w-2xl pb-20 pt-20",children:[e.jsxs("div",{className:"mb-10 border-b-[0.5px] border-token-border-medium pb-5",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-5",children:[e.jsx(He,{className:"h-10 w-10"}),e.jsx("h1",{className:"pb-3 text-xl font-semibold sm:text-2xl",children:"SearchGPT Terms & Conditions"})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"max-w-[90%] pb-6 text-center sm:text-base md:max-w-[80%]",children:["SearchGPT is offered on a preview basis under OpenAI's"," ",e.jsx("a",{className:"text-token-link hover:underline",target:"_blank",href:"https://openai.com/policies/service-terms",rel:"noreferrer",children:"service terms"})," ","and governed by our"," ",e.jsx("a",{className:"text-token-link hover:underline",target:"_blank",href:"https://openai.com/policies/terms-of-use",rel:"noreferrer",children:"terms of use"}),", as well as these additional terms:"]})})]}),e.jsxs("div",{className:"flex flex-col gap-8 px-5 md:px-0",children:[e.jsx(K,{icon:e.jsx(Tt,{className:"icon-lg"}),title:"Work in Progress",description:e.jsx("p",{children:"SearchGPT is constantly changing and improving, and it may make mistakes or be unavailable at times."})}),e.jsx(K,{icon:e.jsx(Et,{className:"icon-lg"}),title:"Information Sharing",description:e.jsxs("p",{children:["To search and answer your questions, SearchGPT may share de-identified search queries with third-party search providers. For more information, see our"," ",e.jsx("a",{className:"text-token-link hover:underline",target:"_blank",href:"https://openai.com/policies/privacy-policy",rel:"noreferrer",children:"Privacy Policy"}),"."]})}),e.jsx(K,{icon:e.jsx(Ct,{className:"icon-lg"}),title:"Location",description:e.jsx("p",{children:"We collect and share general location information with third-party search providers to improve the accuracy of your results. You can choose to share more precise location information to help give the best results by updating your controls in the settings menu."})}),e.jsx(K,{icon:e.jsx(Pt,{className:"icon-lg"}),title:"Improving Our Search Services",description:e.jsx("p",{children:"SearchGPT conversations may be reviewed and used to improve our search functionality. You can adjust your preferences for improving our services in the settings menu. Any changes will carry over between ChatGPT and SearchGPT."})}),e.jsx(K,{icon:e.jsx(It,{className:"icon-lg"}),title:"Account History",description:e.jsx("p",{children:"Your SearchGPT search history is separate from your ChatGPT chat history. If you wish to delete either history, you must do so separately in each service."})})]}),e.jsx("div",{className:"mt-16 flex",children:e.jsxs("div",{role:"button",className:"m-auto flex items-center justify-center space-x-2 rounded-full bg-token-text-primary py-3 pl-10 pr-8 font-semibold text-token-main-surface-primary hover:opacity-85",onClick:t,children:[e.jsx("p",{children:"Accept & Continue"}),e.jsx("span",{children:e.jsx(We,{className:"icon-md-heavy"})})]})})]})}),e.jsx(Ut,{})]}));function K({icon:t,title:n,description:o}){return e.jsxs("div",{className:"flex gap-4 sm:text-base",children:[e.jsx("div",{className:"pt-[2px]",children:t}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-semibold text-token-text-primary",children:n}),e.jsx("div",{className:"text-token-text-secondary",children:o})]})]})}function tt({onSubmitSearch:t,submitButtonTextClassName:n,className:o}){const l=f.useStore(),[c,s]=a.useState(()=>f.selectQueryInput(l.getState())),r=c.trim().length>0;function u(){r&&(t(c),l.setState({queryInput:c,shouldShowComposer:!1}))}const h=a.useRef(null);a.useEffect(()=>{const i=h.current;i?.focus(),i?.setSelectionRange(0,i.value.length)},[]);const p=Ze({query:c}),g=c.length>0?p.find(i=>i.length>c.length&&i.startsWith(c)):void 0;return e.jsx("div",{className:y("overflow-hidden rounded-2xl p-6",o),onClick:i=>{i.target instanceof Element&&i.target.tagName!=="TEXTAREA"&&i.target.tagName!=="BUTTON"&&h.current?.focus()},children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Ge,{className:"icon-lg relative top-[0.125rem] shrink-0 self-start text-token-text-primary"}),e.jsxs("div",{className:"relative grow",children:[g!=null&&e.jsx("div",{className:"absolute inset-0 text-lg text-token-text-tertiary",children:g}),e.jsx(hs,{value:c,minRows:4,maxRows:10,placeholder:"What are you looking for?",onKeyDown:i=>{i.key==="Enter"&&!i.shiftKey&&(i.preventDefault(),u()),i.key==="Escape"&&l.setState({shouldShowComposer:!1}),i.key==="Tab"&&g!=null&&(i.preventDefault(),s(g))},style:{height:void 0},onChange:i=>{s(i.target.value)},ref:h,className:"relative block w-full resize-none border-none bg-transparent p-0 text-lg text-token-text-primary"})]}),e.jsx("button",{onClick:u,disabled:!r,className:y("shrink-0 self-end rounded-lg bg-black p-1.5 transition disabled:bg-token-text-quaternary dark:bg-white disabled:dark:bg-token-text-tertiary",n),children:e.jsx(We,{className:"icon-lg"})})]})})}function Is({onTypeaheadOpenChange:t}){const n=a.useRef(""),[o,l]=a.useState(!1),c=f.useState(f.selectQueryInput),s=f.useStore();a.useEffect(()=>{_.addTiming("sonic.web.home.consolePrimarySearchInput.mounted")},[]);const[r,u]=a.useState(null),{submitSearch:h}=Z(),p=Ze({query:n.current});a.useEffect(()=>{p.length===0&&u(null),l(p.length>0)},[p]),a.useEffect(()=>{t?.(o)},[o,t]);const g=m=>{s.setQueryInput(m),h(m)},i=({value:m,delta:S,shouldUpdateQuery:N=!0})=>{if(m===void 0&&S===void 0)throw new Error("changeSelectedIndex requires either value or delta");let j=null;S!==void 0?r==null?j=S===-1?p.length-1:0:(j=r+S,(j<0||j>=p.length)&&(j=null)):m!==void 0&&(j=m),u(j),N&&(j==null?s.setQueryInput(n.current):s.setQueryInput(p[j]))},v=m=>{o&&(m.key==="ArrowUp"?(m.preventDefault(),i({delta:-1})):m.key==="ArrowDown"?(m.preventDefault(),i({delta:1})):m.key==="Escape"&&l(!1))};return e.jsxs("div",{className:"relative sm:hidden",children:[e.jsx("div",{className:"relative h-snc-3 px-4 max-sm:mb-3",children:e.jsx(rs,{className:"w-full",value:c,placeholder:"Search",leftIcon:e.jsx(Ge,{className:"icon-md-heavy"}),submitButtonIcon:e.jsx(At,{className:"icon-lg-heavy m-auto"}),onKeyDown:v,onChange:m=>{s.setQueryInput(m),n.current=m},variant:"mobile_splash",onSubmit:m=>h(m),autoFocus:!0})}),e.jsx("div",{className:y("absolute bottom-[3.75rem] left-0 right-0 flex h-screen flex-col justify-end bg-token-main-surface-primary pb-5 transition-opacity",o?"opacity-100":"pointer-events-none opacity-0"),children:e.jsx("div",{onMouseLeave:()=>i({value:null,shouldUpdateQuery:!1}),children:p.map((m,S)=>e.jsx(As,{typeahead:m,typedQuery:n.current,onHover:()=>i({value:S,shouldUpdateQuery:!1}),onSubmit:g,isSelected:S===r},S))})})]})}function As({typeahead:t,typedQuery:n,onHover:o,onSubmit:l,isSelected:c}){const s=t.startsWith(n),r=s?n:t,u=s?t.slice(n.length):"";return e.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full",children:e.jsxs("button",{className:y("flex w-full items-center gap-3 rounded-lg px-5 py-3.5 transition-colors",c?"text-token-text-primary":"text-token-text-tertiary"),onClick:h=>{h.stopPropagation(),l(t)},onMouseEnter:()=>o(t),children:[e.jsx("div",{className:"flex h-5 w-5 items-center justify-center",children:e.jsx(Lt,{})}),e.jsxs("div",{className:"flex-grow text-left",children:[e.jsx("span",{children:r}),e.jsx("span",{className:"font-semibold",children:u})]})]},t)})}function Ls(){const t=f.useStore(),[n,o]=a.useState(!1);return e.jsx(T.div,{animate:{height:92,opacity:1},exit:n?void 0:{height:0,opacity:0},className:"w-full overflow-hidden px-2.5 sm:hidden",children:e.jsxs("div",{className:"flex items-center gap-3 rounded-[20px] bg-token-main-surface-tertiary p-2",onClick:()=>{t.setState({shouldShowAddToHomePopover:!0}),o(!0),t.dismissAddToHomePrompt()},children:[e.jsx("div",{className:"flex h-[60px] w-[60px] items-center justify-center rounded-2xl border border-token-border-light bg-token-main-surface-primary shadow-sm",children:e.jsx(Bt,{className:"h-8 w-8"})}),e.jsxs("div",{className:"grow",children:[e.jsx("div",{className:"font-semibold",children:"Add to home screen"}),e.jsx("div",{className:"text-sm text-token-text-tertiary",children:"for quicker access"})]}),e.jsx(mt,{onClick:l=>{l.stopPropagation(),t.dismissAddToHomePrompt()},className:"text-token-text-secondary"})]})},"add-to-home")}function Rs(){const n=!(f.useState(o=>o.hasDismissedAddToHome)&&!0)&&Ke();return e.jsx(Xe,{children:n?e.jsx(Ls,{},"prompt"):null})}function Os(){const{submitSearch:t}=Z(),n=f.useState(o=>o.shouldShowAddToHomePopover);return e.jsxs("div",{className:"flex h-full w-full flex-col bg-token-main-surface-primary sm:flex-row",children:[e.jsx(Be,{}),e.jsxs("div",{className:"lg:p-snc-4 relative flex flex-col items-center gap-7 overflow-hidden p-2.5 sm:mx-16 sm:-mt-12 sm:grow sm:justify-center sm:p-0",children:[e.jsx(qs,{}),e.jsx(Hs,{}),e.jsx("div",{className:"w-full sm:max-w-[700px] 2xl:max-w-[800px]",children:e.jsx(tt,{onSubmitSearch:t,submitButtonTextClassName:"text-token-main-surface-tertiary",className:"hidden bg-token-main-surface-tertiary sm:block"})})]}),e.jsxs("div",{className:"absolute right-5 top-5 hidden items-center gap-4 sm:flex",children:[e.jsx(as,{}),e.jsx(Qe,{className:"h-8 w-8"})]}),e.jsx(Ms,{}),e.jsx(Is,{}),e.jsxs("div",{className:y("px-4 text-center text-xs text-token-text-tertiary max-sm:mb-4 sm:absolute sm:bottom-snc-1 sm:left-1/2 sm:-translate-x-1/2",{invisible:n}),children:[e.jsx("span",{className:"inline-block whitespace-nowrap",children:"SearchGPT is a prototype."})," ",e.jsxs("span",{className:"inline-block whitespace-nowrap",children:["Read our"," ",e.jsx("a",{href:"https://openai.com/policies/terms-of-use",target:"_blank",className:"underline hover:no-underline",rel:"noreferrer",children:"Terms"})," ","and"," ",e.jsx("a",{href:"https://openai.com/policies/privacy-policy",target:"_blank",className:"underline hover:no-underline",rel:"noreferrer",children:"Privacy Policy"}),"."]})]})]})}function Ms(){return e.jsx("div",{className:"flex grow items-center justify-center sm:hidden",children:e.jsx(He,{className:"h-14 w-14"})})}function Hs(){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"-mb-2 grid w-full grid-cols-[1fr,auto,1fr] items-center justify-between sm:hidden",children:[e.jsx("div",{className:"flex",children:e.jsx(Qe,{children:e.jsx(Rt,{})})}),e.jsx("div",{className:"text-lg font-semibold",children:"SearchGPT"})]}),e.jsx(dt,{children:e.jsx(Rs,{})})]})}const Fs=100,Ds=1e3,Us=50,ie="SearchGPT";function qs(){const t=Gt(0,{duration:Ds}),[n,o]=a.useState(0),[l,c]=a.useState(!1),s=ut();return a.useEffect(()=>{s(()=>t.set(ie.length),Fs)},[]),Vt(t,"change",r=>{o(u=>Math.max(u,Math.floor(r)))}),a.useEffect(()=>{n===ie.length&&s(()=>c(!0),Us)},[n,s]),e.jsxs("div",{className:"hidden h-snc-3 items-center gap-1 text-4xl font-bold sm:flex",children:[ie.slice(0,n),e.jsx(st,{className:y(l&&"animate-blinkOnce")})]})}function Ws(){return e.jsxs("div",{className:"flex items-center gap-1 text-4xl font-bold",children:[ie,e.jsx(st,{})]})}const st=ye.div`w-7 h-7 bg-token-text-primary rounded-full`,we={type:"spring",damping:20,stiffness:200};function Gs({onSubmitSearch:t}){const n=f.useState(o=>o.shouldShowComposer);return e.jsx(Xe,{children:n?e.jsx(Vs,{onSubmitSearch:t},"composer"):null})}function Vs({onSubmitSearch:t}){const n=f.useStore();a.useEffect(()=>(document.body.classList.add("overflow-hidden"),()=>{document.body.classList.remove("overflow-hidden")}),[]);const o=a.useRef(null),[l]=a.useState(()=>Date.now());return e.jsxs("div",{className:"fixed inset-0",children:[e.jsx(T.div,{initial:{opacity:0,backdropFilter:"blur(0px)"},animate:{opacity:1,backdropFilter:"blur(10px)"},exit:{opacity:0,backdropFilter:"blur(0px)"},transition:we,className:"absolute -inset-4 bg-[rgba(255,255,255,0.9)] backdrop-blur-md dark:bg-[rgb(33,33,33,0.9)]"}),e.jsxs(T.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:we,onClick:c=>{Date.now()<l+300||c.target===o.current&&n.setState({shouldShowComposer:!1})},className:"absolute inset-0 flex items-center justify-center",ref:o,children:[e.jsx(Bs,{}),e.jsxs(T.div,{className:"relative flex flex-col items-center gap-8",children:[e.jsx(Ws,{}),e.jsx("div",{className:"w-[800px] max-w-[90vw]",children:e.jsx(tt,{onSubmitSearch:t,submitButtonTextClassName:"text-token-main-surface-primary dark:text-token-main-surface-tertiary",className:"bg-token-main-surface-primary shadow-[0_0_200px_0_rgba(0,0,0,0.14)] dark:bg-token-main-surface-tertiary dark:shadow-xl"})})]})]})]})}function Bs(){return e.jsxs(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"absolute bottom-8 flex cursor-default items-center gap-4",children:[e.jsxs("div",{className:"rounded-lg bg-token-main-surface-tertiary px-2.5 py-1 text-sm font-semibold text-token-text-primary",children:[os(Qt()?"meta":"ctrl"),"K"]}),e.jsx("div",{className:"text-token-text-tertiary",children:"Toggle search"})]})}const Qs=Fe(()=>De(()=>import("./lznxhzguq23zvbst.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15])).then(t=>t.DebugModal)),$s=a.memo(function({initialQuery:n,showSplash:o}){const[l]=Ue(),c=l.get("feather_eval")==="true",s=$e(),r=f.useStore(),u=C(P.threadId),{sessionUser:h}=Z(),p=a.useRef(null);return a.useEffect(()=>{n!==p.current&&(p.current=n,r.setQueryInput(n??""),r.setFollowupQueryInput(""))},[r,n]),a.useEffect(()=>Me(document,{keydown:g=>{g.key==="k"&&g.metaKey&&g.shiftKey&&(g.preventDefault(),r.setQueryInput(""),r.setFollowupQueryInput(""))}}),[r]),o?e.jsx(Os,{}):e.jsxs(e.Fragment,{children:[e.jsx(is,{}),s&&e.jsx(Qs,{threadId:u,threadUserId:h?.id}),c&&s&&e.jsx(Ks,{})]})});function Ks(){const{sessionUser:t}=Z(),n=C(P.threadId),o=t?.id,l=C(P.isLastTurnStreaming),c=C(P.numTurns),{waitingForNewTurn:s}=Z();return n&&o?e.jsx("div",{className:"hidden",id:"__feather_data","data-num-turns":c,"data-permalink":$t(o,n),"data-is-streaming-completed":!l&&!s}):null}const Ys=t=>a.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},a.createElement("path",{d:"M5.59061 18C4.74491 18 4.10044 17.7783 3.65721 17.3348C3.21907 16.8913 3 16.2467 3 15.4009V7.86678C3 7.0159 3.21907 6.37129 3.65721 5.93296C4.10044 5.48947 4.74491 5.26773 5.59061 5.26773H7.76856V6.98496H5.72817C5.39192 6.98496 5.13464 7.07263 4.95633 7.24796C4.78311 7.41813 4.69651 7.68113 4.69651 8.03696V15.223C4.69651 15.5789 4.78311 15.8419 4.95633 16.012C5.13464 16.1874 5.39192 16.275 5.72817 16.275H14.2642C14.5953 16.275 14.8501 16.1874 15.0284 16.012C15.2067 15.8419 15.2959 15.5789 15.2959 15.223V8.03696C15.2959 7.68113 15.2067 7.41813 15.0284 7.24796C14.8501 7.07263 14.5953 6.98496 14.2642 6.98496H12.2238V5.26773H14.4094C15.2551 5.26773 15.897 5.48947 16.3352 5.93296C16.7784 6.37129 17 7.0159 17 7.86678V15.4009C17 16.2467 16.7784 16.8913 16.3352 17.3348C15.897 17.7783 15.2551 18 14.4094 18H5.59061ZM9.99236 11.6339C9.77838 11.6339 9.59498 11.5565 9.44214 11.4018C9.2893 11.2471 9.21288 11.0666 9.21288 10.8603V3.16373L9.28166 2.02664L8.89956 2.54491L7.87555 3.65105C7.7329 3.8006 7.55713 3.87538 7.34825 3.87538C7.16485 3.87538 7.00437 3.81349 6.86681 3.68973C6.73435 3.56596 6.66812 3.4061 6.66812 3.21014C6.66812 3.02449 6.73945 2.8569 6.8821 2.70735L9.38865 0.270735C9.49563 0.167598 9.59753 0.0979802 9.69432 0.0618823C9.79112 0.0206274 9.89047 0 9.99236 0C10.0993 0 10.2012 0.0206274 10.298 0.0618823C10.3999 0.0979802 10.5018 0.167598 10.6037 0.270735L13.1103 2.70735C13.2529 2.8569 13.3242 3.02449 13.3242 3.21014C13.3242 3.4061 13.2555 3.56596 13.1179 3.68973C12.9803 3.81349 12.8199 3.87538 12.6365 3.87538C12.4276 3.87538 12.2544 3.8006 12.1168 3.65105L11.1004 2.54491L10.7183 2.02664L10.7795 3.16373V10.8603C10.7795 11.0666 10.7031 11.2471 10.5502 11.4018C10.4025 11.5565 10.2165 11.6339 9.99236 11.6339Z",fill:"currentColor"}));function zs(){return f.useState(n=>n.shouldShowAddToHomePopover)?e.jsx(Xs,{}):null}function Xs(){const[t]=a.useState(()=>Kt()),n=f.useStore();return e.jsxs(Yt,{modal:!0,open:!0,onOpenChange:o=>{o||n.setState({shouldShowAddToHomePopover:!1})},children:[e.jsx(zt,{children:e.jsx("div",{className:"fixed bottom-0 left-1/2"})}),e.jsxs(Xt,{sideOffset:12,className:"animate-bounce rounded-2xl bg-black px-6 py-2 text-center text-white outline-none dark:bg-white dark:text-black",children:[e.jsxs("div",{className:"flex items-center justify-center font-semibold",children:["Tap ",e.jsx(Ys,{className:"h-4.5 w-4.5 ml-1"})]}),e.jsx("div",{className:"text-sm opacity-70",children:'And select "Add to Home Screen"'}),!t&&e.jsx("div",{className:"absolute bottom-0 left-1/2 h-4 w-4 -translate-x-1/2 translate-y-1/2",children:e.jsx("div",{className:"h-full w-full rotate-45 bg-black dark:bg-white"})})]})]})}function Zs(){const t=ze(be.hasSeenSncUsageNux),n=ce(le.isWelcomePageOpen),o=!t.isLoading&&t.eligible&&!n;return a.useEffect(()=>{X.setUsageNuxModalOpen(o)},[o]),o?e.jsxs(ht,{title:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"text-xl",children:"Welcome to SearchGPT"}),e.jsx("div",{className:"text-sm font-normal text-token-text-tertiary",children:"A prototype combining the strength of OpenAI's models with information from the web"})]}),onClose:t.markAsViewed,type:"success",isOpen:!0,size:"custom",className:"max-w-[48rem] px-4 sm:px-0",children:[e.jsxs("div",{className:"flex w-full flex-col gap-4 sm:grid sm:grid-cols-3",children:[e.jsx(pe,{icon:e.jsx(Ot,{className:"icon-md text-green-500"}),title:"Get real-time information",children:"Get fast and timely answers in a conversational format. Ask follow-up questions to clarify and learn more."}),e.jsx(pe,{icon:e.jsx(Mt,{className:"icon-md text-brand-purple"}),title:"Dive deep with sources",children:"Connect with publishers and creators through prominent in-line citations. Explore more with clear, relevant sources."}),e.jsx(pe,{icon:e.jsx(Ht,{className:"icon-md text-yellow-600 dark:text-yellow-400"}),title:"Help us improve",children:"SearchGPT is a temporary prototype. Share feedback by clicking the thumbs up and thumbs down icons."})]}),e.jsx("div",{className:"mt-4 flex w-full justify-end",children:e.jsx(ft,{onClick:t.markAsViewed,className:"mt-4",children:"Get started"})})]}):null}function pe({title:t,icon:n,children:o}){return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[n,t]}),e.jsx("div",{className:"text-sm text-token-text-secondary",children:o})]})}const xe=["moz","ms","o","webkit"];function nt(t){return t?t+"Hidden":"hidden"}function Js(t){return(t||"")+"visibilitychange"}function en(){for(let t=0;t<xe.length;t++)if(nt(xe[t])in document)return xe[t];return null}function tn(t){const n=en(),o=Js(n);function l(c){if(typeof c=="boolean")return c?t.onVisible():t.onHidden();const s=nt(n);return document[s]?t.onHidden():t.onVisible()}return document.addEventListener(o,l,!1),document.addEventListener("focus",t.onVisible,!1),document.addEventListener("blur",t.onHidden,!1),window.addEventListener("focus",t.onVisible,!1),window.addEventListener("blur",t.onHidden,!1),()=>{document.removeEventListener(o,l,!1),document.removeEventListener("focus",t.onVisible,!1),document.removeEventListener("blur",t.onHidden,!1),window.removeEventListener("focus",t.onVisible,!1),window.removeEventListener("blur",t.onHidden,!1)}}const sn=5e3,nn=50,rn=50;function an({threadId:t,sessionId:n,socketUrls:o,onTurnSubmitted:l}){const c=f.useStore(),[s,r]=a.useState(!1),[u]=a.useState(o),[h,p]=a.useState(!0),[g,i]=a.useState(!0),v=a.useRef(0),m=a.useRef(!1),S=qe();a.useEffect(()=>(m.current=!0,()=>{m.current=!1}),[]),pt({queryKey:["ping"],queryFn:Zt,enabled:!0,networkMode:"online",refetchInterval:1e3*10});const N=a.useCallback(async()=>{if(v.current>rn)return S.danger("Failed to fetch websocket url",{hasCloseButton:!0,id:"ws-fetch-error"}),_.addError(new fe("Failed to fetch websocket url, giving up"),{attempts:v.current}),null;try{const x=await xt.get(`${gt}/register-websocket`);return v.current=0,{wss_url:x.wss_url,fallback_wss_url:x.fallback_wss_url??null}}catch(x){throw x instanceof bt&&x.status===401&&window.location.reload(),_.addError(new fe("Failed to fetch websocket url, retrying"),{cause:x}),v.current+=1,x}},[]),j=a.useCallback(x=>{const w=c.getState().currentSearch;w&&(I.logEvent(A.searchQuerySubmitted,{thread_id:x,source:w.config.querySource,prefetched:f.selectWasCurrentSearchPrefetched(c.getState())}),_.addAction("sonic.web.search_query_submitted",{thread_id:x,source:w.config.querySource}))},[c]),R=x=>({retryOnError:m.current===!0&&g,shouldReconnect:()=>m.current===!0&&g,reconnectAttempts:nn,reconnectInterval:w=>Math.min(Math.pow(1.3,w)*1e3,sn),onMessage:w=>{const F=JSON.parse(w.data);on(F,t,n,j)},onError:w=>{_.addError(new fe("Websocket error"),{event:w,primary:x})},onOpen:()=>{_.addAction("sonic.web.websocket_open",{primary:x})},onClose:()=>{console.debug("[ws] Connection closed"),_.addAction("sonic.web.websocket_closed",{primary:x}),r(!0)},onReconnectStop:()=>{S.danger("Websocket connection attempts failed, pausing reconnects",{hasCloseButton:!0})}}),L=a.useCallback(async()=>(await N())?.wss_url??"",[N]),J=a.useCallback(async()=>(await N())?.fallback_wss_url??"",[N]),{readyState:O}=Ae(!s&&u?u.wss_url:L,R(!0),h),{readyState:M}=Ae(!s&&u?u.fallback_wss_url:J,R(!1),h),H=O!==z.ReadyState.CLOSING&&O!==z.ReadyState.CLOSED?O:M,E=a.useCallback(()=>{H!==z.ReadyState.OPEN&&(p(!1),v.current=0,setTimeout(()=>{p(!0)},0))},[H]);a.useEffect(()=>tn({onHidden:()=>{console.debug("[ws] onHidden"),i(!1)},onVisible:()=>{console.debug("[ws] onVisible, set reconnect to true"),i(!0),E()}}),[E]);const V=a.useCallback(async x=>{const{threadId:w,sessionId:F,isFollowup:D}=x;c.setCurrentSearch({config:{threadId:w,query:x.query,isFollowup:D,querySource:x.querySource},state:Je.Active}),Jt({threadId:w,sessionId:F,query:x.query,agentSettingsOverrides:x.agentSettingsOverrides,metadata:x.metadata}).then(()=>{l?.({isFollowup:D})}).catch(ee=>{_.addError(new es("Failed to postThreadTurn"),{cause:ee}),k.setError(ee.message)})},[c,l]);return{readyState:H,postQuery:V}}function on(t,n,o,l){if(t.thread_id!==n&&!(t.delta.type==="append_turn"&&t.delta.session_id===o))return;const c=t.delta.type==="append_turn"||t.delta.type==="set_turn"?t.delta.turn.index:t.delta.turn_index;if(c==null)throw new Error;switch(t.delta.type){case"append_turn":{const s=t.delta;k.appendTurn(t.thread_id,s.turn,l);break}case"set_search_results":{const s=t.delta;k.updateTurn(c,r=>{r.search_results=s.search_results});break}case"set_model_response":{const s=t.delta;k.updateTurn(c,r=>r.model_response=s.model_response);break}case"append_model_response_text":{const s=t.delta;k.updateTurn(c,r=>{if(!r.model_response||r.model_response.text==null)throw new Error;s.text_start&&s.text_start!==r.model_response.text.length?(_.addError(new ts("Text start index does not match the current text length."),{expected:r.model_response.text.length,actual:s.text_start}),s.text_start<r.model_response.text.length?r.model_response.text=r.model_response.text.substring(0,s.text_start)+s.text+r.model_response.text.substring(s.text_start+s.text.length):r.model_response.text=r.model_response.text.padEnd(s.text_start," ")+s.text):r.model_response.text+=s.text,s.citations&&(r.model_response.citations=[...r.model_response.citations.filter(u=>u.start_idx<s.citations_start),...s.citations]),r.model_response.end_turn=s.end_turn});break}case"set_sports_widget":{const s=t.delta;k.updateTurn(c,r=>{r.sports_widget=s.sports_widget});break}case"set_keyed_content_ref":{const s=t.delta;k.updateTurn(c,r=>{r.keyed_content_refs&&(r.keyed_content_refs[s.key]=s.content_ref)});break}case"set_use_location":{const s=t.delta;k.updateTurn(c,r=>{r.use_location=s.use_location});break}case"set_turn_execution_status":{const s=t.delta;k.updateTurn(c,r=>{r.execution_status=s.execution_status,r.error=s.error});break}case"set_image_results":{const s=t.delta;k.updateTurn(c,r=>{r.image_results=s.image_results});break}case"set_image_try_hard_status":{const s=t.delta;k.updateTurn(c,r=>{r.image_try_hard_status=s.status});break}case"set_model_response_citation":{const s=t.delta;k.updateTurn(c,r=>{if(!r.model_response)throw new Error;r.model_response.citations[s.citation_index]=s.citation});break}case"set_plaintext_model_response":{const s=t.delta;k.updateTurn(c,r=>{if(!r.model_response)throw new Error;r.model_response.plaintext=s.text});break}default:_.addError("Unsupported delta type",{delta:t.delta})}}const cn=Fe(()=>De(()=>import("./sso-mbpcti5xy6krfg95.js").then(t=>t.I),__vite__mapDeps([16,1,2,3,17,5,6,18,19,20,21,22,8,23,24,25,26,10,27,28,29,30,31,32,33,34,35,36,9,11,12,13,37,38,39,7,14,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,15,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69])).then(t=>t.InternalSettings),{ssr:!1});function ln({user:t,initialQuery:n,initialThreadId:o,sessionId:l,socketUrls:c,userMetadata:s,evalPreset:r,completionModel:u,baseConfig:h,isRegionBlocked:p,isAccountPlanBlocked:g}){const i=f.useStore(),v=f.useState(f.selectLastSubmittedQuery),S=Se()?.isWorkspacePlan()??g??!1,N=$e(),j=ce(le.isSettingsModalOpen),R=ce(le.isInternalSettingsModalOpen),{showWelcomePage:L,onClose:J}=Cs(),[O,M]=Ss(),[H,E]=a.useState(n==null),V=C(P.threadId)??o,x=C(P.lastTurn),w=C(P.numTurns),[F,D]=a.useState(w),[ee]=Ue(),te=ee.get("q"),ve=yt(),B=ss({namespace:ns.SonicHome}),je=gs(),U=qe();a.useEffect(()=>{_.addTiming("sonic.web.home.mounted")},[]),a.useEffect(()=>{!r&&!h&&!u||i.updateAgentSettingsOverrides({...r&&{eval_preset:r},...h&&{base_config:h},...u&&{completion_model:u}})},[r,h,u,i]);const rt=a.useCallback(({isFollowup:d})=>{d||B.logTiming("search_query_submitted",{context:{source:i.getState().currentSearch?.config.querySource,prefetched:f.selectWasCurrentSearchPrefetched(i.getState())}}),i.markHasSearched()},[i,B]),{readyState:q,postQuery:_e}=an({socketUrls:c,threadId:V,sessionId:l,onTurnSubmitted:rt}),{newQueryStarted:ke}=dn({profiler:B});a.useEffect(()=>{je==="denied"&&M(d=>({...d,useLocation:!1}))},[M,je]);const de=bs(),se=a.useMemo(()=>de==null?s:{...s,...de},[s,de]),Ne=x?.index,Q=a.useCallback(async d=>{try{const b=d.isFollowup?"followup":"query";b==="query"&&(B.reset(),ke(),i.setQueryInput(d.query)),await _e({threadId:d.threadId,sessionId:l,isFollowup:d.isFollowup,prefetched:d.isFollowup?!1:f.selectWasCurrentSearchPrefetched(i.getState()),query:d.query,querySource:d.querySource,agentSettingsOverrides:f.selectAgentSettingsOverrides(i.getState()),metadata:se}),b==="followup"&&I.logEvent(A.searchFollowupSubmitted,{thread_id:d.threadId,turn_index:Ne??0})}catch(b){_.addError(new Error("Error posting user action",{cause:b})),U.danger("Failed to submit")}},[_e,l,i,se,B,ke,Ne,U]),Te=a.useCallback(d=>{i.setLastPrefetchedQuery(d);const b=i.getState().currentSearch?.config.querySource;I.logEvent(A.searchQueryPrefetched,{source:b??"search_input"}),_.addAction("sonic.web.home.prefetch",{source:b})},[i]),W=a.useCallback(async(d,{isFollowup:b=!1})=>{if(q!==z.ReadyState.OPEN){_.addAction("sonic.web.home.websocket.not_open"),U.danger("Websocket connection is not open");return}E(!1),await Q({query:d,threadId:b?V:null,isFollowup:b,querySource:"search_input"})},[Q,q,V,U]),G=a.useCallback(async d=>{k.clearThread();const b=new URLSearchParams(window.location.search);if(d?b.set("q",d):b.delete("q"),i.setState({queryInput:d??"",currentSearch:void 0}),d!==te){const me=cs(window.innerWidth)===ls.DesktopWithDrawer;ve({search:b.toString(),hash:me?ds()??location.hash.slice(1):void 0}),d==null&&E(!0)}else d&&await W(d,{isFollowup:!1})},[i,te,ve,W]),Ee=a.useCallback(async d=>{const b=f.selectLastSubmittedQuery(i.getState());if(b==null){U.danger("No previous query to retry");return}return d?W(d,{isFollowup:!0}):G(b)},[i,W,G,U]),Ce=St(),ue=a.useCallback(d=>(i.setFollowupQueryInput(""),us(Ce),G(d)),[Ce,G,i]),Pe=a.useCallback(d=>(D(w+1),i.setFollowupQueryInput(""),W(d,{isFollowup:!0})),[W,i,w]);a.useEffect(()=>{if(i.getState().currentSearch?.state!==Je.InitialPending){const d=te;k.clearThread(),d?(E(!1),D(1),Q({query:d,threadId:null,isFollowup:!1,querySource:"search_input"})):E(!0)}},[te]),a.useEffect(()=>{if(q!==z.ReadyState.OPEN||L)return;const d=i.handlePendingInitialSearch();d&&(Q(d.config),D(1),E(!1))},[i,q,t.id,Q,L]);const at=a.useMemo(()=>({waitingForNewTurn:w<F,sessionUser:t,settings:O,userMetadata:se,submitFollowup:Pe,submitSearch:ue,retrySearch:Ee,resetSearch:()=>G(),prefetch:Te,readyState:q}),[t,O,se,Pe,ue,Ee,Te,G,q,w,F]),ot=a.useCallback(()=>{J(),M(d=>({...d,useLocation:!0}))},[J,M]),it=f.useState(d=>d.shouldShowComposer);return e.jsxs(vt,{name:"sonic_ui_boundary_error",fallback:({resetError:d,componentStack:b,error:me})=>e.jsx(qt,{resetError:d,componentStack:b,error:me}),children:[e.jsx(Ye,{children:e.jsx("title",{children:!H&&v?`${v} - SearchGPT`:"SearchGPT"})}),e.jsx(T.div,{animate:{scale:it?1.04:1},transition:we,className:"h-[100dvh] w-screen overflow-auto","data-search-root":!0,children:p||!N&&S?e.jsx(Es,{reason:p?"region":"enterprise"}):L?e.jsx(T.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:e.jsx(Ps,{onClose:ot})}):e.jsx(ms.Provider,{value:at,children:e.jsx($s,{initialQuery:n,showSplash:H})})}),j&&e.jsx(ps,{onClose:()=>X.setSettingsModalOpen(!1)}),N&&R&&e.jsx(cn,{onClose:()=>X.setInternalSettingsModalOpen(!1)}),e.jsx(Zs,{}),e.jsx(Gs,{onSubmitSearch:ue}),e.jsx(zs,{})]})}const Oe={turn:!1,searchResults:!1,modelResponse:!1,widget:!1};function dn({profiler:t}){const n=a.useRef({...Oe}),o=C(P.firstTurn),l=f.useStore();return a.useEffect(()=>{if(o==null)return;const s=l.getState().currentSearch?.config.querySource;n.current.turn||(n.current.turn=!0,t.logTiming("ttf_message",{context:{source:s}})),!n.current.modelResponse&&!Le(o.model_response?.text)&&(n.current.modelResponse=!0,t.logTiming("ttf_model_response",{context:{source:s}})),!n.current.searchResults&&!Le(o.search_results?.entries)&&(n.current.searchResults=!0,t.logTiming("ttf_search_results",{context:{source:s}}))},[l,o,t]),{newQueryStarted:a.useCallback(()=>{n.current={...Oe}},[])}}function un(t){return e.jsx(wt,{children:e.jsx(ws,{userId:t.user.id,children:e.jsx(ys,{userId:t.user.id,children:e.jsx(xs,{children:e.jsx(fs,{serverProps:t,children:e.jsx(ln,{...t})})})})})})}const Hn=()=>!1,Fn=()=>[{title:"SearchGPT"},{tagName:"link",rel:"manifest",href:"/manifest-search.json"},{property:"og:description",content:"A prototype of new search features that give you fast answers with clear and relevant sources."},{name:"description",content:"SearchGPT is a prototype of new search features designed to use the strength of OpenAI's AI models to give you fast answers with clear, relevant sources."},{name:"keywords",content:"ai search,ai,search gpt,search gbt,search gpt login,search gpt website,search gpt,search gtp,search openai,searchai,searchbot gpt,searchg,searchgpt login,searchgpt,gpt search,open ai,openai search,openai searchgpt"},{property:"og:title",content:"SearchGPT"},{property:"og:url",content:"https://chatgpt.com"},{tagName:"link",rel:"search",type:"application/opensearchdescription+xml",href:"https://chatgpt.com/opensearch-searchgpt.xml",title:"SearchGPT"},{name:"apple-mobile-web-app-status-bar-style",content:"default"},{name:"theme-color",content:"white"}];function Dn(){const t=jt();return t.forceLandingPage?e.jsx(Ts,{...t,forceLandingPage:!0}):e.jsx(un,{...t})}export{Dn as default,Fn as meta,Hn as shouldRevalidate};
//# sourceMappingURL=g6so0r0eh66tqe6s.js.map
