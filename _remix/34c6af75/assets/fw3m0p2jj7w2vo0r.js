import{V as S,O as j,eO as _,Q as R,g as E,e5 as k,gT as A,m as a,aJ as v,bi as m,r as p,bM as C,ba as D,d as x,G as N,am as L,P as T,ai as w}from"./cbdhxbjz462fxz30.js";import{f1 as F,f2 as $,f3 as P,f4 as h,cK as z,f5 as b,b0 as O,f6 as H,f7 as I}from"./f4wa8ql6adp83vsr.js";import{S as V,a as G}from"./ht83mm3m8ydjs5k8.js";import{g as K}from"./kqwdyvkaaavvn8k3.js";import{a as U}from"./ogkfvgpinzzk99vx.js";import{E as W}from"./f2pvnq811wi5pu88.js";import{m as q}from"./k5pz0z71530nw1jz.js";import"./k56dd5cd1qc9k1m3.js";function B({date:e}){const t=S(),s=e instanceof Date?e:new Date(e*1e3),n=F(s,new Date);if(n<4&&n>-4){const r=t.formatRelativeTime(n,"day",{numeric:"auto"});return r.charAt(0).toUpperCase()+r.slice(1)}else return t.formatDate(s,{year:"numeric",month:"long",day:"numeric"})}var J=_,Q=j,X=$,Y=R;function Z(e,t){var s=Y(e)?J:X;return s(e,Q(t))}var ee=Z,te=P,ae=ee;function se(e,t){return te(ae(e,t),1)}var ne=se;const re=E(ne),oe=(e,t)=>{const s=H();return N(()=>{const n=L.getMessageContentReferences(e,t);return I(n,s)})};function be({clientThreadId:e,turnIndex:t,messageId:s,scrollToHeader:n=h.Citations,shouldAnimateScroll:r,isInSidebar:c=!1}){const o=oe(e,s),i=k(),u=A(e,s),d={clientThreadId:e,messageId:s,turnIndex:t},l=re(u,f=>f.entries).toSorted((f,M)=>(M?.pub_date??0)-(f?.pub_date??0));return a.jsxs("div",{className:v("flex w-full flex-col bg-token-main-surface-primary",c?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)]":"mt-0",!i||!c?"border-t border-token-border-light":""),children:[a.jsx(g,{title:a.jsx(m,{id:"dlVlo6",defaultMessage:"Citations"}),items:o,analyticsMetadata:{...d,linkType:"citation"},scrollToHeader:n===h.Citations,messageId:s,shouldAnimateScroll:r}),a.jsx(g,{title:a.jsx(m,{id:"KoXAr4",defaultMessage:"Web Results"}),scrollToHeader:n===h.SearchResults,items:l,analyticsMetadata:{...d,linkType:"search_result"},messageId:s,analyticsIndexOffset:o.length,shouldAnimateScroll:r})]},`${t}-${e}`)}function g({title:e,items:t,analyticsMetadata:s,analyticsIndexOffset:n=0,scrollToHeader:r,messageId:c,shouldAnimateScroll:o}){const i=p.useRef(null),u=k();return p.useEffect(()=>{i.current&&r&&i.current.scrollIntoView({behavior:o?"smooth":"instant"})},[r,o]),!t||t.length===0?null:a.jsxs("div",{ref:i,children:[a.jsx(y,{className:v("sticky top-0 z-[1] flex h-[calc(var(--screen-thread-header-min-height,60px)+1px)] items-center border-b border-token-border-sharp bg-token-main-surface-primary px-6 pt-4 font-medium text-token-text-primary",u?"pb-3.5 text-panel-title":"pb-4 text-sm"),children:e}),a.jsx("div",{className:"flex flex-col px-3 py-2",children:t.map((d,l)=>a.jsx(y,{index:l,children:a.jsx(ie,{item:d,analyticsMetadata:{...s,groupIndex:l,entireListIndex:l+n},messageId:c},l)},`${e}-${l}`))})]})}function y({children:e,index:t=0,className:s=""}){return a.jsx(q.div,{className:s,initial:{opacity:0},animate:{opacity:1},transition:{delay:(t+1)*.03+.2},children:e})}function ie({item:e,analyticsMetadata:t,messageId:s}){const n=U(e.url).data??K(e.url,"short"),r=u=>"ref_id"in u&&"content_type"in u,c=z(),o=C().resolvedTheme==="dark",i=a.jsxs(ce,{analyticsMetadata:t,href:e.url,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{b.setHighlightBySource(s,e)},onMouseLeave:()=>{b.clearHighlights()},children:[a.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[a.jsx(O,{url:e.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:a.jsx(V,{className:"icon-sm text-token-text-quaternary"})}),n,r(e)&&a.jsx(G,{searchResult:e,className:"inline h-4 w-4 text-token-text-tertiary"})]}),a.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:e.title}),(e.pub_date??e.snippet)&&a.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[e.pub_date&&a.jsx(B,{date:e.pub_date}),e.pub_date&&e.snippet&&" â€” ",e.snippet]})]});return c?a.jsx(D,{label:a.jsx(W,{item:e}),className:"text-left text-xs",theme:o?"default":"white",children:i}):i}const ce=p.forwardRef(function(t,s){const{analyticsMetadata:n,...r}=t;function c(o,i){if(!t.href)return;const{entireListIndex:u,groupIndex:d,linkType:l,...f}=n;T.logEventWithStatsig(o,i,{...w(f),url:t.href,global_index:u.toString(),local_index:d.toString(),type:l})}return p.useEffect(()=>{c(x.searchLinkShown,"search_link_shown")},[]),a.jsx("a",{ref:s,...r,onClick:o=>{t.onClick?.(o),o.stopPropagation(),c(x.searchLinkClicked,"search_link_clicked")}})});export{be as SearchSources,g as SourcesListGroup};
//# sourceMappingURL=fw3m0p2jj7w2vo0r.js.map
