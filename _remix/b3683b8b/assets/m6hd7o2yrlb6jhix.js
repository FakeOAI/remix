import{G as v,av as S,eF as M,aw as j,g as _,gS as A,m as a,aD as g,aS as p,cd as R,aJ as E,r as f,d as h,x as C,ab as D,P as N,a7 as F}from"./chhpo5f7h1mkv8bj.js";import{eR as L,eS as T,eT as w,ak as y,cN as P,eU as x,eV as $,eW as z}from"./cfxa008xhk1w4hnw.js";import{F as U}from"./kvf3etmbvoanc5t6.js";import{S as G,a as H}from"./eqsvo26ru6n9zg4r.js";import{g as I}from"./kqwdyvkaaavvn8k3.js";import{a as O}from"./0vihtpctgvq4ptc3.js";import{E as V}from"./jfm2u0zbgzfcqotw.js";import{m as W}from"./fo76ywp66oc7essj.js";import"./k976jk34eufnjb9r.js";function q({date:e}){const t=v(),n=e instanceof Date?e:new Date(e*1e3),s=L(n,new Date);if(s<4&&s>-4){const o=t.formatRelativeTime(s,"day",{numeric:"auto"});return o.charAt(0).toUpperCase()+o.slice(1)}else return t.formatDate(n,{year:"numeric",month:"long",day:"numeric"})}var B=M,J=S,K=T,Q=j;function X(e,t){var n=Q(e)?B:K;return n(e,J(t))}var Y=X,Z=w,ee=Y;function te(e,t){return Z(ee(e,t),1)}var ae=te;const ne=_(ae),se=(e,t)=>{const n=$();return C(()=>{const s=D.getMessageContentReferences(e,t);return z(s,n)})};function me({clientThreadId:e,turnIndex:t,messageId:n,isInSidebar:s=!1}){const o=se(e,n),c=y(),i=A(e,n),r={clientThreadId:e,messageId:n,turnIndex:t},l=ne(i,u=>u.entries).toSorted((u,d)=>(d?.pub_date??0)-(u?.pub_date??0));return a.jsxs("div",{className:g("flex w-full flex-col bg-token-main-surface-primary",s?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)]":"mt-0",!c||!s?"border-t border-token-border-light":""),children:[a.jsx(m,{title:a.jsx(p,{id:"dlVlo6",defaultMessage:"Citations"}),items:o,analyticsMetadata:{...r,linkType:"citation"},messageId:n}),a.jsx(m,{title:a.jsx(p,{id:"iUafP7",defaultMessage:"Search Results"}),items:l,analyticsMetadata:{...r,linkType:"search_result"},messageId:n,analyticsIndexOffset:o.length})]},`${t}-${e}`)}function m({title:e,items:t,analyticsMetadata:n,analyticsIndexOffset:s=0,messageId:o}){const c=y();return!t||t.length===0?null:a.jsxs("div",{children:[a.jsx(b,{className:g("sticky top-0 z-[1] flex h-[calc(var(--screen-thread-header-min-height,60px)+1px)] items-center border-b border-token-border-sharp bg-token-main-surface-primary px-6 pt-4 font-medium text-token-text-primary",c?"pb-3.5 text-panel-title":"pb-4 text-sm"),children:e}),a.jsx("div",{className:"flex flex-col px-3 py-2",children:t.map((i,r)=>a.jsx(b,{index:r,children:a.jsx(re,{item:i,analyticsMetadata:{...n,groupIndex:r,entireListIndex:r+s},messageId:o},r)},`${e}-${r}`))})]})}function b({children:e,index:t=0,className:n=""}){return a.jsx(W.div,{className:n,initial:{opacity:0},animate:{opacity:1},transition:{delay:(t+1)*.03+.1},children:e})}function re({item:e,analyticsMetadata:t,messageId:n}){const s=O(e.url).data??I(e.url,"short"),o=l=>"ref_id"in l&&"content_type"in l,c=P(),i=R().resolvedTheme==="dark",r=a.jsxs(oe,{analyticsMetadata:t,href:e.url,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{!("attributions"in e)||!e.attributions||x.setHighlightBySource(n,e)},onMouseLeave:()=>{x.clearHighlights()},children:[a.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[a.jsx(U,{url:e.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:a.jsx(G,{className:"icon-sm text-token-text-quaternary"})}),s,o(e)&&a.jsx(H,{searchResult:e,className:"inline h-4 w-4 text-token-text-tertiary"})]}),a.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:e.title}),(e.pub_date??e.snippet)&&a.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[e.pub_date&&a.jsx(q,{date:e.pub_date}),e.pub_date&&e.snippet&&" â€” ",e.snippet]})]});return c?a.jsx(E,{label:a.jsx(V,{item:e}),className:"text-left text-xs",theme:i?"default":"white",children:r}):r}const oe=f.forwardRef(function(t,n){const{analyticsMetadata:s,...o}=t;function c(i,r){if(!t.href)return;const{entireListIndex:l,groupIndex:u,linkType:d,...k}=s;N.logEventWithStatsig(i,r,{...F(k),url:t.href,global_index:l.toString(),local_index:u.toString(),type:d})}return f.useEffect(()=>{c(h.searchLinkShown,"search_link_shown")},[]),a.jsx("a",{ref:n,...o,onClick:i=>{t.onClick?.(i),i.stopPropagation(),c(h.searchLinkClicked,"search_link_clicked")}})});export{me as SearchSources,m as SourcesListGroup};
//# sourceMappingURL=m6hd7o2yrlb6jhix.js.map
