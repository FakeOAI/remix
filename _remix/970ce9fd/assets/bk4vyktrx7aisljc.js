const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jkwoyr5fxoagq7m2.js","assets/n91qxymkwfpx8ttj.js","assets/df2a9d4t5fmrl1uv.js","assets/root-bszwljh8.css","assets/dmelb770qardfms2.js","assets/conversation-small-ile61fj8.css","assets/nghlmkt0u26alosf.js","assets/cdoez9k1zer1qmxh.js","assets/j3oohos4ge27w0vf.js","assets/kgxc42nkk1vki7st.js","assets/gt5pxp5o4n4jew97.js","assets/c786w82k4duswbpn.js","assets/8tldspsotjul133y.js","assets/d1ffx56904ahfimb.js","assets/e55cgzbrd5qbrpk2.js","assets/e5xsuj1z1dz6gipr.js","assets/jl9nglh88al7i20b.js","assets/fzrn137102spawew.js","assets/lgxtbtmbmxu3e8ye.js","assets/j4af6x44ig60kmpw.js","assets/feopb9ram6brwkv1.js","assets/8zla5f0ynyg0o5cb.js","assets/ovdynhu4xpdf83j6.js","assets/j9hubu956ucxdw9y.js","assets/mrik12qxs2mcymlb.js","assets/b85yqcn1ynok69ji.js","assets/kqwdyvkaaavvn8k3.js","assets/nnu59fndumzy0xpt.js","assets/f57909xo39qivulz.js","assets/983a0dy92b3ronpv.js","assets/i3qv6jyoge6c91op.js","assets/cdnmqxdja8r2sdvk.js","assets/ig79plt5lppslf4e.js","assets/c4bxzbp1808foto4.js","assets/ovpxpw78oyj2isoi.js","assets/cd6zo5qsfdvcx9in.js","assets/dpidhrgs5k9yqjq7.js","assets/ebyr7x2b4neia6jw.js","assets/keor0u7wjqhtrx87.js","assets/nblbhbuqa7n30y37.js","assets/lksxxt81s95vkmke.js","assets/h778f5g6b5p3d9cl.js","assets/j4l9syr30zwky9ar.js","assets/ocpreaitf2wj05oi.js","assets/kixzyi332z8lhxnf.js","assets/dde1mr4wnklkiyfa.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{r as d,Z as Te,dk as De,dj as Ie,dh as ye,x as Le,ab as Ne,gl as Be,y as N,c3 as Fe,aR as Ve,hg as oe,m as e,G as Re,c9 as We,ba as He,F as Ge,aH as m,aI as p,aq as Ue,bf as ze,b2 as te,fo as be,gY as ne,eW as re,aD as Ke,gR as y,bp as qe,ap as Qe,a2 as ie,a4 as Ye,d3 as le,D as $e,ci as Je,cj as Ze,ck as Xe,dt as ea,g0 as aa,s as sa,L as oa}from"./n91qxymkwfpx8ttj.js";import{h1 as ta,h2 as na,bN as _,h3 as ra,h4 as ia,h5 as la,h6 as da,h7 as ca,h8 as ua,h9 as ha,e7 as ga,ha as fa,hb as ma,hc as pa,hd as ba,he as Sa,hf as xa,hg as Ma,hh as Ca,hi as ja,hj as Aa,hk as wa,hl as va,hm as Oa,hn as ka,ho as Ea,hp as Pa,hq as _a,hr as Ta,hs as Da,ht as Ia,bY as Se,p as L,U as de,bO as F,hu as ya,hv as La,cC as xe,ba as Na,cD as Ba,T as Me,hw as Ce,hx as Fa,hy as Va,fz as je,hz as Ae,hA as we,hB as Ra,ao as ve,aC as Wa,bb as Oe,hC as ce,hD as E,ff as Ha,bq as B,br as ue,n as Ga,hE as Ua,u as za,eP as Ka,em as qa,eO as Qa,hF as Ya,hG as $a,hH as Ja,hI as Za,hJ as Xa,hK as es,hL as he,hM as as,am as ss,hN as os,hO as ts,b8 as ns,cA as rs,cB as is,hP as ls,hQ as ds,cE as cs,hR as us}from"./dmelb770qardfms2.js";import{S as ge,b as hs,c as gs}from"./ovpxpw78oyj2isoi.js";import{S as fs,C as ms}from"./dpidhrgs5k9yqjq7.js";import{T as ke,C as Ee}from"./ebyr7x2b4neia6jw.js";import{N as ps}from"./cd6zo5qsfdvcx9in.js";import{m as P}from"./j3oohos4ge27w0vf.js";import{C as bs}from"./j4l9syr30zwky9ar.js";const Ss=({onClose:a})=>{const s=Re(),o=_(F.isBusinessWorkspace),t=_(r=>r.currentWorkspace),i=o?s.formatMessage(fe.workspaceWelcome,{workspaceName:t?.name}):"ChatGPT";return e.jsx(We,{isOpen:!0,onClose:He,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:s.formatMessage(fe.personalOnboardingSubheading),children:e.jsx(ya,{onClose:a,scope:La.Personal})})};function xs({clientThreadId:a}){const[s,o]=d.useState(0),{hasSeenOnboardingDate:t}=ta(),{hasSeenTeamOwnerOnboardingDate:i}=na(),r=_(F.isBusinessWorkspace),u=Te(),[n,h]=d.useState(!1),{data:S,isPending:x,isEnabled:g}=ra(),M=ia(S,x&&g),{eligible:k}=la(),C=De(),j=Ie(),A=ye(),T=Le(()=>Ne.getThread(a)),w=Be(a)||!T,v=N.getConversationOrigin(a),{data:l,isError:O}=Fe(),f=l!=null,V=l&&l?.accountItems.length>1&&l.currentAccountId==null,R=l?.accountItems.some(c=>c.isPersonalAccount()),W=!!l?.accountItems&&l.accountItems.length>0&&l.accountItems.every(({canAccessWithCurrentSession:c})=>!c),{eligible:H,isLoading:G}=da(),{value:U}=Ve("1542198993"),{punchOutRequireLoginInfo:z}=ca(),{state:K}=ua(),{isOpen:q,isLoading:Q}=ha(),{isOpen:Y,isLoading:$}=ga(),{isOpen:J,isLoading:Z}=fa(),{isOpen:X,isLoading:ee}=ma(),{state:ae}=pa(),b=d.useMemo(()=>[{Component:ba,getModalState:()=>z?"show":"hide",isDeferrable:!1},{Component:Sa,getModalState:()=>K,isDeferrable:!1},{Component:xa,getModalState:()=>ae,isDeferrable:!1},{Component:Ma,getModalState:()=>Q||w?"loading":v===oe.APPLE?"hide":q?"show":"hide",isDeferrable:!1},{Component:Ca,getModalState:()=>ee||w?"loading":v===oe.APPLE?"hide":X?"show":"hide",isDeferrable:!1},{Component:Ss,getModalState:()=>r?"hide":t===null?"loading":t===!1?"show":"hide",isDeferrable:!0},{Component:ja,getModalState:()=>O?"hide":V?"show":f?"hide":"loading",isDeferrable:!1},{Component:Aa,getModalState:()=>C!==null?"show":O||f?"hide":"loading",isDeferrable:!1},{Component:wa,getModalState:()=>j!==null?"show":O||f?"hide":"loading",isDeferrable:!1},{Component:va,getModalState:()=>A!=null?"show":O||f?"hide":"loading",isDeferrable:!1},{Component:Oa,getModalState:()=>f?W?"show":"hide":"loading",isDeferrable:!1},{Component:ka,getModalState:()=>$?"loading":Y?"show":"hide",isDeferrable:!1},{Component:Ea,getModalState:()=>Z?"loading":J?"show":"hide",isDeferrable:!1},{Component:Pa,getModalState:()=>"hide",isDeferrable:!1},{Component:_a,getModalState:()=>!u?.isTeam()||!u?.isOwnerOfAccount()||!R?"hide":!f||i===null?"loading":i===!1?"show":"hide",isDeferrable:!1},{Component:Ta,getModalState:()=>r?t===null?"loading":t===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Da,getModalState:()=>G?"loading":H&&U?"show":"hide",isDeferrable:!1},{Component:Ia,getModalState:()=>M,isDeferrable:!1}].filter(c=>!(c.isDeferrable&&n)),[k,z,K,A,f,t,i,R,r,O,C,j,u,W,V,M,n,U,H,G,q,Q,X,ee,ae,$,Y,J,Z,v,w]);d.useEffect(()=>{if(b[s]&&b[s].getModalState()==="hide"){const c=b.findIndex(_e=>_e.getModalState()!=="hide");o(c)}},[s,b]);const D=b[s],I=D?.getModalState()==="show";if(d.useEffect(()=>{const c=Se.getState().activeModals.has(L.BlockingInitialComponent);I!==c&&(I?de.openModal(L.BlockingInitialComponent):de.closeModal(L.BlockingInitialComponent))},[I]),D==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const se=D.getModalState();if(se==="loading")return null;se==="hide"&&o(c=>c+1);const Pe=b[s].Component;return e.jsx(Pe,{onClose:()=>{h(!0),o(c=>c+1)}})}const fe=Ge({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ms=m(()=>p(()=>import("./jkwoyr5fxoagq7m2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(a=>a.CanvasFocusedViewManager)),Cs=m(()=>p(()=>import("./ovdynhu4xpdf83j6.js"),__vite__mapDeps([22,1,2,3,23,4,5,24,25,26,27,28,8,29])).then(a=>a.SearchResultsModal));function js({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){const i=Ue();xe({clientThreadId:a});const{createNewThread:r,onThreadCreated:u,resetThread:n}=Na({clientThreadId:a,setClientThreadId:s});return Ba({resetThreadAction:n,clientThreadId:a}),e.jsxs(Me,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(Ce,{clientThreadId:a,urlThreadId:o}),e.jsxs(ge,{hideNavigation:i,mobileHeaderContent:e.jsx(Fa,{clientThreadId:a,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Va,{clientThreadId:a}),mobileHeaderLeftContent:e.jsx(hs,{onNewChatButtonClick:n}),mobileHeaderRightContent:e.jsx(gs,{onNewChatButtonClick:n}),sidebar:e.jsx(ps,{navHeader:a?e.jsx(fs,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:r}):null,children:e.jsx(ms,{clientThreadId:a,onNewThread:r})}),threadFlyout:e.jsx(je,{clientThreadId:a}),children:[e.jsx(Ae,{}),e.jsx(ke,{clientThreadId:a,onCreate:u,prefetchSearch:t},a),e.jsxs(ge.Sidebars,{children:[e.jsx(Ms,{clientThreadId:a}),e.jsx(we,{clientThreadId:a})]})]}),e.jsx(As,{clientThreadId:a})]})}function As({clientThreadId:a}){const s=ze(),o=s?.includes(te.SearchTool)&&!s?.includes(te.SearchToolHoldout),t=Ra();return be()&&(!t||!o)&&e.jsx(Cs,{clientThreadId:a})}const me=450;function ws({children:a,clientThreadId:s,isOpen:o,onClose:t}){const i=ve();return e.jsxs(Wa,{children:[o&&i&&e.jsx(Oe,{clientThreadId:s,children:e.jsx(ne,{children:e.jsx(ce.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(P.div,{className:"h-full w-full bg-token-main-surface-secondary",...E}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(P.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:me},...E,children:e.jsx(Ee,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:a})]})]})})})}),o&&!i&&e.jsx(ne,{children:e.jsx(ce.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(P.div,{className:"h-full w-full bg-token-main-surface-secondary",...E}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(P.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:me},...E,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(ke,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const vs=m(()=>p(()=>import("./i3qv6jyoge6c91op.js"),__vite__mapDeps([30,1,2,3,4,5]))),Os=m(()=>p(()=>import("./cdnmqxdja8r2sdvk.js"),__vite__mapDeps([31,1,2,3,4,5,32,33,8,34,35,19,36,37,9,38,15,39,40,41,42])).then(a=>a.ImageEditor));function ks({clientThreadId:a}){const s=Ha();d.useEffect(()=>{B.close()},[a]);let o;return s?.type===ue.ADAVisualization?o=e.jsx(vs,{clientThreadId:a,visualization:s.visualization}):s?.type===ue.Image&&(o=e.jsx(Os,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(ws,{clientThreadId:a,isOpen:s!=null,onClose:B.close,children:o})}const Es=m(()=>p(()=>import("./jkwoyr5fxoagq7m2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(a=>a.CanvasFocusedViewManager)),pe=64;function Ps(){const{focusedObject:a,clientThreadId:s}=Ga();re(void 0);const o=d.useRef(null),[t,i]=d.useState({bottom:null,height:null});Ua(o,i);const r=za(),u=re("searchSources"),n=be(),[h,S]=d.useState(!1),x=!r&&!!a;let g=0;return h&&t.height==null?g=pe:h&&t.height!=null?g=pe+t.height:!h&&t.height!=null&&(g=t.height),e.jsx(Ka,{className:Ke(y.application,{[y.withCanvasFocusedView]:!!r,[y.withEmbeddedFocusedView]:x}),banner:e.jsx(qe,{children:e.jsx(qa,{setIsMobileAppUpsellBannerVisible:S})}),sidebar:e.jsx(bs,{}),thread:e.jsx(Ee,{ref:o},s),details:e.jsx(Es,{clientThreadId:s}),threadExtendedInfo:n&&e.jsxs(e.Fragment,{children:[!1,u&&e.jsx(je,{clientThreadId:s})]}),debugger:e.jsx(we,{clientThreadId:s}),name:"application-root",style:{"--screen-keyboard-bottom":t.bottom?`${t.bottom}px`:"","--screen-height-offset":g>0?`${g}px`:""}})}function _s({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){return xe({clientThreadId:a}),e.jsx(Oe,{clientThreadId:a,setClientThreadId:s,prefetchSearch:t,children:e.jsxs(Qa,{children:[e.jsx(Ya,{}),e.jsx($a,{}),e.jsxs(Me,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(Ce,{clientThreadId:a,urlThreadId:o}),e.jsx(Ae,{}),e.jsx(Ps,{})]})]})})}var Ts={};const Ds=m(()=>p(()=>import("./ocpreaitf2wj05oi.js"),__vite__mapDeps([43,1,2,3,4,5,44]))),Is=m(()=>p(()=>import("./dde1mr4wnklkiyfa.js"),__vite__mapDeps([45,1,2,3,4,5,37,9,8,38,19,15,39,40,41,46])));function Us(a){const{urlThreadId:s,clientThreadId:o,prefetchSearch:t}=a;Ls();const i=Qe(),r=ie(),[u]=Ye(),[n,h]=d.useState(()=>s!==void 0?s:o!==void 0?o:le());s!==void 0&&n!==s&&N.getServerThreadId(n)!==s&&h(s);const S=Ja(ie());d.useEffect(()=>{s===void 0&&N.getServerThreadId(n)!==void 0&&h(le())},[s,n,S]);const x=_(F.workspaceId),g=ve(),{eligible:M,isLoading:k,markAsViewed:C}=Za(),j=Xa();d.useEffect(()=>{(r.pathname==="/"||r.pathname.startsWith("/c/"))&&es({namespace:he.ChatPageLoad})==null&&(as({namespace:he.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),$e.addTiming("chatgpt.web.chatPage.mounted"))},[]);const A=ss();d.useEffect(()=>{Je(!0).then(l=>{l.force_login&&A({authType:"login"}),Ze.initializeAndGatherData(l),os.initializeAndGatherData(l),Xe.initializeAndGatherData(l)})},[A]),d.useEffect(()=>{const l=u.get(ts)==="true";i!==l&&ea.setIsTemporaryChatEnabled(l)},[i,u]),d.useEffect(()=>{r.state?.focusObject&&B.setFocusedObject(r.state.focusObject)},[r.state?.focusObject]),d.useEffect(()=>{!k&&M&&(C(),j())},[M,k,C,j]);const{isOpen:T,isLoading:w}=ns(),v=g?_s:js;return e.jsx(aa.Provider,{value:null,children:e.jsx(rs,{children:e.jsxs(is,{clientThreadId:n,children:[e.jsx(xs,{clientThreadId:n},x),!w&&T&&e.jsx(Is,{clientThreadId:n,setClientThreadId:h}),e.jsx(ls,{}),e.jsx(ds,{}),e.jsx(v,{urlThreadId:s,clientThreadId:n,setClientThreadId:h,prefetchSearch:t}),e.jsx(ks,{clientThreadId:n}),e.jsx(cs,{clientThreadId:n}),e.jsx(ys,{}),e.jsx(us,{})]})})})}function ys(){const a=Se(s=>s.sharingModalThreadId);return a?e.jsx(Ds,{serverThreadId:a}):null}function Ls(){sa({queryKey:["pingEdge"],queryFn:()=>oa.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Ts.GOKU_SERVICE);export{Us as C,me as F};
//# sourceMappingURL=bk4vyktrx7aisljc.js.map
