import{aH as f,aI as M,aJ as A,aK as v,b as K,U as S,V as p,aB as k,aL as B}from"./dnytedm08a8h3kff.js";import{t as L}from"./knyk3i9cmwskwcvv.js";import{aK as w,r as D,Y as P,R as T,P as E,d as x,D as R,a1 as F}from"./ba3fwhhjky1m504d.js";import{T as g}from"./nvd0p58sqo8se13g.js";const U=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function V(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const e={Mod:"mod",Comma:",",...f.Key},G={[e.Mod]:V()?"⌘":"Ctrl",[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"},j=t=>t.map(o=>G[o]??o),i=F({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),N=new M,_=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n,toaster:a,isFannyPackEnabled:r})=>[{key:"newChat",action:t||P,actionMessageDescriptor:i.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:r?[]:[[e.Mod,"k"]]},{key:"focusPromptTextarea",action:n??L,actionMessageDescriptor:i.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:s=>{if(o!=null){const c=g.getThreadCurrentLeafId(o),b=g.getThreadConversationTurns(o,c);for(let l=b.length-1;l>=0;l--){const{messages:C}=b[l],u=[...C.reduce((y,d)=>d.err==null&&d.message.author.role===T.Assistant&&d.message.recipient==="all"?y+(y?`

`:"")+K(d.message):y,"").matchAll(U)],h=u.length?u[u.length-1][1]:null;if(h!=null){S(h,a,s).then(()=>{a.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:i.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:s=>{o!=null&&g.copyLastMessageToClipboard(o,a,s,"keyboard").then(()=>{a.success("Last response copied to clipboard")})},actionMessageDescriptor:i.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>p.toggleModal(k.UserContext),actionMessageDescriptor:i.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>p.toggleNavSidebar(),actionMessageDescriptor:i.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(o){const s=g.getServerThreadId(o);s&&N.publish({kind:"deleteChat",serverThreadId:s})}},actionMessageDescriptor:i.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"toggleKeyboardActions",action:()=>p.toggleModal(k.KeyboardActions),actionMessageDescriptor:i.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]}],m=t=>B(t,o=>{E.logEvent(x.keyboardShortcut,{keyboardActionKey:o.key}),R.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:o.key})},{enabled:!0}),H=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n}={})=>{const a=w(),{isFannyPackEnabled:r}=A();return D.useMemo(()=>_({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n,toaster:a,isFannyPackEnabled:r}).filter(({enabled:c=!0})=>c),[a,o,t,r,n])},q=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n})=>{const a=H({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n}),s=v(c=>c.isVoiceActive)?[]:a;m(s)},z=({setSelectedVoiceIndex:t,previousVoiceIndex:o,nextVoiceIndex:n,setDirection:a})=>{const r=[{key:"selectPreviousVoice",action:()=>{a(-1),t(o)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{a(1),t(n)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[e.ArrowRight]}];m(r)};export{N as G,H as a,z as b,j as g,V as i,q as u};
//# sourceMappingURL=hslpinwa3mqbvqpe.js.map
