const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/k4pq5rdf9uqyv1ur.js","assets/qt4wss72u2iiwb12.js","assets/mj1bo2bvsdcuqwn0.js","assets/root-m9ef0vyd.css","assets/essdexqvqu02rgqn.js","assets/conversation-small-cll5buey.css","assets/g53wp1fz9j23sg74.js","assets/il13svm8z46vwj7c.js","assets/nyafg151eqhmq9mq.js","assets/epo75wihakppz7a8.js","assets/eixpuwitl9sszofn.js","assets/e07xeu5zi6rth7jm.js","assets/bpykej1504xqtnru.js","assets/cpjf339qrta25jtt.js","assets/nldl9h83w2w2p8e7.js","assets/jkzm70qt1tu6tx8c.js","assets/e9lafxuzyeh4418f.js","assets/e6uduv7ax2muttxg.js","assets/pfiabpecp3d9w5i4.js","assets/kn35f6q8ddweae0k.js","assets/junr6rvvs2nkjh8o.js","assets/6bb90yacv3xqgsg1.js","assets/iorvpedrfxnoycni.js","assets/lzkd8nhhz0rpbybt.js","assets/oz2p326ip1qkp1yw.js","assets/dk42zn752mgi7t43.js","assets/cki7q0rothorf8gt.js","assets/hm2o7iguqbjp347m.js","assets/g2z2evai3603aozf.js","assets/jgo01kpq4t1kgbqt.js","assets/cqjhevi2hictlclg.js","assets/lpv78gcbu761i6tm.js","assets/frazneop97dpz2zw.js","assets/ehyjmqre1iuv5xnh.js","assets/lyvan9oso5scelhw.js","assets/pcggbxr6hulrl2lb.js","assets/d0mshaqotoswy47e.js","assets/oyixhgf2ek57szce.js","assets/hudcs4pqc4nukiau.js","assets/jrgi17awm0lxf0zo.js","assets/c2isyhxzg9dfq3cz.js","assets/ouy0e10bjw097ebb.js","assets/fxbgi0xaqglep4qe.js","assets/dxx6gzuqcbqxi8tu.js","assets/kqwdyvkaaavvn8k3.js","assets/l401nq0zpwxlduaf.js","assets/nxbof71r66jvmije.js","assets/nplb7hk3njrqyyty.js","assets/lz6v3mb5aeg1e76k.js","assets/ieth3j2fai0mwnrn.js","assets/g7f6qxmq593r4akn.js","assets/ds9h0ddwvrib0p5k.js","assets/inl1jaiu5qc3cgse.js","assets/l0cy9ilxr1we67th.js","assets/lvbxjyepe9ho1xbq.js","assets/m46mf0ufp7gogv1i.js","assets/jn2kamkvdohp9lbd.js","assets/983a0dy92b3ronpv.js","assets/cbgturi3x49j8kar.js","assets/cu64veochvqvhe9w.js","assets/n519iii45qgeglbt.js","assets/inwaqyhkeiulw8e8.js","assets/n3r6x07swvufnwmy.js","assets/415canzho8qsofbd.js","assets/pagqkjp3oapk8wpq.js","assets/fmmw2t5mcyfcee8s.js","assets/hrmt6hor3nfn9qcc.js","assets/zq7szmj0an9i1nn3.js","assets/dw21p1cevywa6lzj.js","assets/ikl248hdla3k1e3w.js","assets/fqiwirbmj6opbsc0.js","assets/oqfnuhav5rh0t0bu.js","assets/mhamp86weysdm6zq.js"])))=>i.map(i=>d[i]);
import{y as e,bw as ne,aZ as oe,a_ as ie,aX as De,r,D as Y,av as F,l as Be,S as q,P as ye,b as je,a1 as O,a6 as Z,W as cs,X as H,a9 as ls,a7 as ds,Z as C,$ as S,ag as re,bJ as us,bI as gs,bG as hs,aR as fs,w as Ve,eb as ke,bq as Re,br as ms,a3 as ps,au as xs,O as p,aw as bs,u as Cs,f3 as Ss,ce as Fe,ar as ys,az as We,a8 as He,d1 as m,e7 as js,c3 as ks,fg as vs,x as ve,aW as Ms,dI as Me,bi as As,bj as ws,bk as _s,bR as Es,j as Os}from"./qt4wss72u2iiwb12.js";import{s as Ts,i as ce,o as Ps,f as le,C as Ns}from"./dk42zn752mgi7t43.js";import{hN as de,eE as Ls,hO as Ge,hP as ze,hQ as Is,hR as $e,u as Ue,hS as Ds,hT as Bs,S as Vs,hU as Rs,hV as Fs,cf as Q,hW as Ws,hX as Hs,hY as Gs,hZ as zs,ew as $s,h_ as Us,h$ as Ks,i0 as qs,i1 as Qs,i2 as Xs,i3 as Ys,i4 as Zs,i5 as Js,i6 as ea,i7 as sa,i8 as aa,i9 as ta,ia as na,ib as oa,ic as ia,id as ra,ie as ca,ig as la,cg as ue,ih as da,ii as ua,eN as ga,g7 as Ke,hn as X,eR as Ae,ij as qe,ik as Qe,h3 as ha,aF as fa,il as ma,hc as we,fB as pa,bU as ae,bV as _e,b_ as Xe,c7 as xa,im as ba,b$ as Ee,io as Ca,ip as Sa,iq as Ye,ai as R,ir as ya,hp as te,is as ja,hm as ka,it as va,iu as Ma,aw as Aa,c8 as wa,g6 as _a,iv as Ea,iw as Oa,ix as Ta,iy as Pa,c2 as Na,c3 as Oe,iz as La,r as Ia,cj as Da,iA as Ba,cv as Va,ck as Ra,da as Fa,iB as Wa,db as Ha,iC as Ga}from"./essdexqvqu02rgqn.js";import{U as x,G as D,u as _,c as Ze,b as za}from"./nldl9h83w2w2p8e7.js";import{a as $a,b as Ua,A as Ka,T as W,c as qa,d as Qa,k as Xa}from"./nyafg151eqhmq9mq.js";import{u as Ya,a as Je}from"./e07xeu5zi6rth7jm.js";import{L as Za}from"./bpykej1504xqtnru.js";import{S as Te,b as Ja,c as et,N as st,U as at}from"./n519iii45qgeglbt.js";import{u as es,b as tt,g as nt}from"./inwaqyhkeiulw8e8.js";import{S as ot,C as it}from"./n3r6x07swvufnwmy.js";import{d as rt,f as ct,T as ss}from"./junr6rvvs2nkjh8o.js";import{T as as}from"./pagqkjp3oapk8wpq.js";import{m as Pe}from"./epo75wihakppz7a8.js";import{a as Ne}from"./415canzho8qsofbd.js";import{bI as lt,bJ as dt,bv as ut,bK as gt,V as ht}from"./mj1bo2bvsdcuqwn0.js";import{C as ft}from"./fmmw2t5mcyfcee8s.js";const mt=60*60*24;function pt(s,a=!1){return ne()==null||a?"loading":!s||oe.getCookie(ie.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function xt({onClose:s}){const{data:{ageVerificationType:a,ageVerificationDeadline:t}={}}=de();return a==="passive"?e.jsx(bt,{onClose:s}):a==="countdown"&&t!=null?e.jsx(Ct,{onClose:s,ageVerificationDeadline:t}):null}const bt=({onClose:s})=>{const{country:a}=De();return r.useEffect(()=>{Y.addAction("privacy_policy.show_age_verification_modal",{country:a})},[a]),e.jsx(Ls,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(F,{color:"primary",onClick:async()=>{await Be.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(F,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},Ct=({onClose:s,ageVerificationDeadline:a})=>{const t=a!=null?Math.floor(a/60/60/24):0;r.useEffect(()=>{q.logEvent("chatgpt_compliance_age_verification_seen"),ye.logEvent(je.complianceAgeVerificationSeen)},[]);const{country:n}=De();return r.useEffect(()=>{Y.addAction("privacy_policy.show_age_verification_countdown",{country:n})},[n]),e.jsxs(Ge,{children:[e.jsx(ze,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(O,{...Le.ageVerificationTitle,values:{deadline:t,learnMoreLink:c=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:c})}})}),e.jsx(Is,{altText:"Dismiss notification",asChild:!0,children:e.jsx(F,{color:"primary",size:"small",onClick:()=>{q.logEvent("chatgpt_compliance_age_verification_clicked"),ye.logEvent(je.complianceAgeVerificationClicked),oe.setCookie(ie.AgeVerification,"true",{maxAge:mt,path:"/"}),s(),x.openModal(D.AgeVerificationInterstitial)},children:e.jsx(O,{...Le.startVerification})})}),e.jsx($e,{})]})},Le=Z({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function St({onClose:s}){const a=H(),t=ls(),{openSettings:n}=Ue(),c=Ds(),{session:o}=ds(),{data:{isStorageComplianceEnabled:l}={}}=de(),{data:i,isLoading:d}=Bs({enabled:!!(l&&o),select:g=>!g.cookie_consent.is_required});return r.useEffect(()=>{i===!0&&s()},[i,s]),d?null:e.jsx(yt,{onReject:()=>{c.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){t.success(a.formatMessage(I.updateSuccess))},onError(){t.danger(a.formatMessage(I.updateFailure))}}),s()},onAccept:()=>{c.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){t.success(a.formatMessage(I.updateSuccess))},onError(){t.danger(a.formatMessage(I.updateFailure))}}),s()},children:e.jsx(O,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:g=>e.jsx(Za,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:g}),manageLink:g=>e.jsx(jt,{onClick:()=>{n(Vs.DataControls)},children:g})}})})}function yt({children:s,onAccept:a,onReject:t}){return r.useEffect(()=>{Y.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs(Ge,{children:[e.jsxs(ze,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(F,{color:"secondary",size:"small",onClick:t,children:e.jsx(O,{...I.reject})}),e.jsx(F,{color:"secondary",size:"small",onClick:a,children:e.jsx(O,{...I.accept})})]})]}),e.jsx($e,{})]})}const jt=cs.button`underline font-normal text-green-600`,I=Z({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),kt=C(()=>S(async()=>{const{ModelOnboardingNUXModal:s}=await import("./k4pq5rdf9uqyv1ur.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(({ModelOnboardingNUXModal:s})=>s)),vt=({onClose:s})=>{const a=H(),t=Q(ue.isBusinessWorkspace),n=Q(o=>o.currentWorkspace),c=t?a.formatMessage(Ie.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx(Re,{isOpen:!0,onClose:ms,type:"success",title:c,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(Ie.personalOnboardingSubheading),children:e.jsx(da,{onClose:s,scope:ua.Personal})})};function Mt({clientThreadId:s}){const[a,t]=r.useState(0),{hasSeenOnboardingDate:n}=Rs(),{hasSeenTeamOwnerOnboardingDate:c}=Fs(),o=Q(ue.isBusinessWorkspace),l=re(),[i,d]=r.useState(!1),{data:g,isPending:B}=de(),T=pt(g,B),{eligible:k,isLoading:y}=Ya(),v=us(),E=gs(),M=hs(),P=$a(()=>Ua.getThread(s)),h=Ka(s)||!P,N=W.getConversationOrigin(s),{data:b,isError:w}=fs(),A=b!=null,G=b&&b?.accountItems.length>1&&b.currentAccountId==null,z=b?.accountItems.some(u=>u.isPersonalAccount()),V=!!b?.accountItems&&b.accountItems.length>0&&b.accountItems.every(({canAccessWithCurrentSession:u})=>!u),{eligible:$,isLoading:J}=Ws(),{value:U}=Ve("1542198993"),{punchOutRequireLoginInfo:f}=Hs(),{state:j}=Gs(),{isOpen:K,isLoading:ge}=zs(),{isOpen:he,isLoading:fe}=$s(),{isOpen:me,isLoading:pe}=Us(),{isOpen:xe,isLoading:be}=Ks(),{state:Ce}=qs(),L=r.useMemo(()=>[{Component:Qs,getModalState:()=>f?"show":"hide",isDeferrable:!1},{Component:Xs,getModalState:()=>j,isDeferrable:!1},{Component:Ys,getModalState:()=>Ce,isDeferrable:!1},{Component:Zs,getModalState:()=>ge||h?"loading":N===ke.APPLE?"hide":K?"show":"hide",isDeferrable:!1},{Component:Js,getModalState:()=>be||h?"loading":N===ke.APPLE?"hide":xe?"show":"hide",isDeferrable:!1},{Component:vt,getModalState:()=>o?"hide":n===null?"loading":n===!1?"show":"hide",isDeferrable:!0},{Component:ea,getModalState:()=>w?"hide":G?"show":A?"hide":"loading",isDeferrable:!1},{Component:sa,getModalState:()=>v!==null?"show":w||A?"hide":"loading",isDeferrable:!1},{Component:aa,getModalState:()=>E!==null?"show":w||A?"hide":"loading",isDeferrable:!1},{Component:ta,getModalState:()=>M!=null?"show":w||A?"hide":"loading",isDeferrable:!1},{Component:na,getModalState:()=>A?V?"show":"hide":"loading",isDeferrable:!1},{Component:oa,getModalState:()=>fe?"loading":he?"show":"hide",isDeferrable:!1},{Component:ia,getModalState:()=>pe?"loading":me?"show":"hide",isDeferrable:!1},{Component:St,getModalState:()=>"hide",isDeferrable:!1},{Component:ra,getModalState:()=>!l?.isTeam()||!l?.isOwnerOfAccount()||!z?"hide":!A||c===null?"loading":c===!1?"show":"hide",isDeferrable:!1},{Component:ca,getModalState:()=>o?n===null?"loading":n===!1?"show":"hide":"hide",isDeferrable:!0},{Component:la,getModalState:()=>J?"loading":$&&U?"show":"hide",isDeferrable:!1},{Component:xt,getModalState:()=>T,isDeferrable:!1},{Component:kt,getModalState:()=>y?"loading":k?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(u=>!(u.isDeferrable&&i)&&(!u.expiresAt||u.expiresAt.getTime()>Date.now())),[f,j,M,A,n,c,z,y,o,w,v,E,l,V,G,T,k,i,U,$,J,K,ge,xe,be,Ce,fe,he,me,pe,N,h]);r.useEffect(()=>{if(L[a]&&L[a].getModalState()==="hide"){const u=L.findIndex(rs=>rs.getModalState()!=="hide");t(u)}},[a,L]);const ee=L[a],se=ee?.getModalState()==="show";if(r.useEffect(()=>{const u=_.getState().activeModals.has(D.BlockingInitialComponent);se!==u&&(se?x.openModal(D.BlockingInitialComponent):x.closeModal(D.BlockingInitialComponent))},[se]),ee==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const Se=ee.getModalState();if(Se==="loading")return null;Se==="hide"&&t(u=>u+1);const is=L[a].Component;return e.jsx(is,{onClose:()=>{d(!0),t(u=>u+1)}})}const Ie=Z({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),At=C(()=>S(()=>import("./cpjf339qrta25jtt.js"),__vite__mapDeps([13,1,2,3,8,4,5,9,7,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,6,30,31,32,33,34,35,36,37,38,39,40,41])).then(s=>s.DebugConversationSidebar));function ts({clientThreadId:s}){wt();const a=ne(),t=a?.includes("debug"),n=ps(),c=_(l=>l.activeSidebar),o=a?.includes("debug")&&c==="debug";return!t||!o?null:e.jsx(At,{clientThreadId:s,slideOver:!ga(n),onClose:()=>x.toggleActiveSidebar("debug"),isOpen:!0})}function wt(){const a=ne()?.includes("debug");r.useEffect(()=>{if(!a)return;const t=new AbortController;return document.addEventListener("keydown",n=>{n.target instanceof HTMLElement&&["input","textarea","select","button"].includes(n.target.tagName.toLowerCase())||n.key==="\\"&&x.toggleActiveSidebar("debug")},{signal:t.signal}),()=>{t.abort()}},[a])}const _t=C(()=>S(()=>import("./fxbgi0xaqglep4qe.js"),__vite__mapDeps([42,1,2,3,4,5,43,8,9,44,45,7,10,46])).then(s=>s.SearchSources));function ns({clientThreadId:s}){const{resolvedTheme:a}=xs(),t=a==="dark",{turnIndex:n,messageId:c,isOpen:o}=Ze(),l=r.useCallback(()=>{x.closeChatThreadFlyout(s,c)},[s,c]);return!c||!n||!o?null:e.jsx(Ke,{anchor:"top",className:p("relative flex-1 border-l",t?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(X,{name:"search-sources-header",type:"primary",className:p("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(bs,{onClick:l})})}),children:e.jsx(_t,{clientThreadId:s,turnIndex:n,messageId:c,isInSidebar:!0})})}function os({clientThreadId:s}){r.useEffect(()=>{x.closeSharingModal()},[s]);const a=Cs();r.useEffect(()=>(W.retainThread(s),()=>{setTimeout(()=>{a.invalidateQueries({queryKey:["conversation",s]})},0),W.releaseThread(s)}),[s,a]),r.useEffect(()=>()=>{q.checkGate("3922476776")||Ae.abortAllRequests()},[s]);const t=r.useRef(s);r.useEffect(()=>{s!==t.current&&(q.checkGate("3922476776")||Ae.clear(),t.current=s)},[s])}const Et=C(()=>S(()=>import("./nplb7hk3njrqyyty.js"),__vite__mapDeps([47,1,2,3,4,5,22,23,9,24,7,8,10,25,26,11,12,27,14,28,29,6,48,49,50,51,52,53,54,17,55])).then(s=>s.CanvasFocusedViewManager)),Ot=C(()=>S(()=>import("./jn2kamkvdohp9lbd.js"),__vite__mapDeps([56,1,2,3,14,4,5,10,8,9,42,43,44,45,7,46,57])).then(s=>s.SearchResultsModal));function Tt({clientThreadId:s,setClientThreadId:a,urlThreadId:t,prefetchSearch:n}){const c=qa();os({clientThreadId:s});const{createNewThread:o,onThreadCreated:l,resetThread:i}=Ts({clientThreadId:s,setClientThreadId:a});es({resetThreadAction:i,clientThreadId:s});const d=ce(s);return e.jsxs(as,{clientThreadId:s,children:[e.jsx(qe,{clientThreadId:s,urlThreadId:t}),e.jsxs(Te,{hideNavigation:c,mobileHeaderContent:e.jsx(rt,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(ct,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(Ja,{onNewChatButtonClick:i}),mobileHeaderRightContent:e.jsx(et,{onNewChatButtonClick:i}),sidebar:e.jsx(st,{navHeader:s?e.jsx(ot,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:o}):null,children:e.jsx(it,{clientThreadId:s,onNewThread:o})}),threadFlyout:e.jsx(ns,{clientThreadId:s}),children:[e.jsx(Qe,{}),e.jsx(ss,{clientThreadId:s,onCreate:l,prefetchSearch:n},s),e.jsxs(Te.Sidebars,{children:[d&&e.jsx(Et,{clientThreadId:s}),e.jsx(ts,{clientThreadId:s}),!1]})]}),e.jsx(Pt,{clientThreadId:s})]})}function Pt({clientThreadId:s}){const{value:a}=Ve("218782548"),t=ha(),{isOpen:n}=Ze();return n&&(!t||!a)&&e.jsx(Ot,{clientThreadId:s})}const Nt=450;function Lt({children:s,clientThreadId:a,isOpen:t,onClose:n}){return e.jsx(fa,{children:t&&e.jsx(Ss,{children:e.jsx(ma.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(Pe.div,{className:"h-full w-full bg-token-main-surface-secondary",...we}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(Pe.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:Nt},...we,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(ss,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})})}const It=C(()=>S(()=>import("./cbgturi3x49j8kar.js"),__vite__mapDeps([58,1,2,3,4,5,25,26,7,8,9,10,11,12,27,14,28,29,6]))),Dt=C(()=>S(()=>import("./cu64veochvqvhe9w.js"),__vite__mapDeps([59,1,2,3,4,5,37,25,26,7,8,9,10,11,12,27,14,28,29,6,60,39,61,62,63,20,21,22,23,24,30,31,32,33,34,35,36,38,40,41,64,65])).then(s=>s.ImageEditor));function Bt({clientThreadId:s}){const a=pa();r.useEffect(()=>{ae.close()},[s]);let t;return a?.type===_e.ADAVisualization?t=e.jsx(It,{clientThreadId:s,visualization:a.visualization}):a?.type===_e.Image&&(t=e.jsx(Dt,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(Lt,{clientThreadId:s,isOpen:a!=null,onClose:ae.close,children:t})}const Vt=()=>{const s=H(),a=_(o=>o.activeModals.has(D.KeyboardActions)),t=()=>{x.closeModal(D.KeyboardActions)},n=tt(),c=r.useMemo(()=>{const o=Math.ceil(n.length/2);return[n.slice(0,o),n.slice(o)]},[n]);return e.jsx(Re,{isOpen:a,onClose:t,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage(Wt.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:c.map((o,l)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:o.map(i=>e.jsx(Rt,{action:i},i.key))},`col-${l}`))})})})},Rt=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(O,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:nt(s.keyboardBinding).map((a,t)=>e.jsx(Ft,{keyName:a},`${s.key}-${t}`))})]}),Ft=({keyName:s})=>{const a=p("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:p(a,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:p(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:p(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},Wt=Z({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function Ht(){const s=Xe(),{conversations:a}=Je();return{isCollapsible:s&&a.length>5,recentConversationLimit:5}}function Gt({clientThreadId:s}){const a=Qa(s),t=Fe(),{isCollapsible:n,recentConversationLimit:c}=Ht(),o={buckets:n,recentConversationLimit:c},l=r.useRef(!1),i=_(f=>f.isHistoryCollapsed),{conversations:d,buckets:g,hasNextPage:B,fetchNextPage:T,data:k,isLoading:y,isFetchingNextPage:v,isError:E,recents:M,refetch:P}=Je(o),[h,N]=r.useState(!0),b=r.useCallback(function(j){j===void 0&&N(!1),P({cancelRefetch:!0})},[P,N]),w=t?void 0:a,A=i&&M.items.length>0,G=!i&&g.length>0,z=d.length===0,V=E||k===void 0&&!y&&!v&&l.current,$=!V&&(k===void 0||y||v);k===void 0&&!y&&!l.current&&(l.current=!0,b(!0)),r.useMemo(()=>{xa.publish({kind:"refreshHistory",conversations:d})},[d]);const U=B&&!z&&!i&&!y&&!v;return e.jsxs(e.Fragment,{children:[V&&e.jsx(ba,{showRetry:h,refetch:b}),A&&e.jsx(Ee,{header:M.label,children:M.items.map((f,j)=>e.jsx(Ne,{item:f,isActive:f.id===w,testId:`history-item-${j}`},f.id))}),G&&g.map(f=>e.jsx(Ee,{header:f.label,children:f.items.map((j,K)=>e.jsx(Ne,{item:j,isActive:j.id===w,testId:`history-item-${K}`},j.id))},f.key)),$&&e.jsx(ys,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),n&&e.jsx(We,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!i,className:p(!i&&"hidden"),children:e.jsx(Ca,{type:"more",onClick:x.expandHistory})})})}),U&&e.jsx(Sa,{onPaginate:T})]})}const zt=C(()=>S(()=>import("./hrmt6hor3nfn9qcc.js"),__vite__mapDeps([66,1,2,3,33,7,4,5,8,9,10,14,62,26,63,11,12,6,61,25,27,28,29])).then(s=>s.GizmoSidebarList));function $t({clientThreadId:s}){const a=re(),t=Xa(s),{isUnauthenticated:n}=He();return n?null:e.jsxs("div",{className:p(m.screenContent),children:[null,e.jsx(Gt,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(zt,{currentGizmoId:t}):null]})}function Ut(){const s=re(),a=s?.data==null,{isUnauthenticated:t}=He(),{openSettings:n}=Ue(),[c]=r.useState(()=>{const d=oe.getCookie(ie.Workspace);return typeof d=="string"&&d!==js}),o=H(),l=_(d=>d.sidebarState);if(!s||c&&a)return null;const i=t?e.jsx(at,{}):e.jsx(Ps,{onClickSettings:()=>n()});return e.jsxs(X,{name:"user-profile-bar",className:"z-10 grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[i,e.jsx("div",{className:m.togglePinWrapper,children:e.jsx(Ye,{className:p(m.pinSidebarAction),checked:l===R.Floating,onChange:d=>{const g=d.currentTarget.checked?R.Floating:R.Pinned;ya({css:ja,update:()=>{x.setSidebarState(g)}})},icon:l===R.Pinned?e.jsx(lt,{}):e.jsx(dt,{}),label:o.formatMessage({id:"JZfuR3",defaultMessage:"Toggle Sidebar Pin"}),group:te.FloatingOrPinned})})]})}function Kt(){const s=_(a=>a.isHistoryCollapsed);return e.jsxs(ka,{className:p(m.screenTrailingBarContainer),children:[e.jsx(We,{children:e.jsx(va,{hidden:s,onClick:x.collapseHistory,children:e.jsx(O,{id:"1poXLj",defaultMessage:"See less"})})}),e.jsx(Ut,{})]})}const qt=C(()=>S(()=>import("./zq7szmj0an9i1nn3.js"),__vite__mapDeps([67,1,2,3,4,5,68,69,8,9,70,61,6,7,10,11,12,14])).then(s=>s.FannyPackIconButton));function Qt({onNewThread:s}){const a=H(),t=za(),n=_(o=>o.sidebarState===R.Floating);Ma({checkElement:o=>o?.tagName==="NAV",enabled:!t&&n,onLightDismiss(){const o=document.querySelector(`input[name="${te.OpenOrClosed}"]`);o&&(o.checked=!1)}});const{isFannyPackEnabled:c}=Aa();return e.jsxs(e.Fragment,{children:[e.jsx(X,{type:"primary",className:p(m.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[3px]",children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(Ye,{className:p(m.closeSidebarAction),checked:!t,onChange:o=>{o.currentTarget.checked?x.openSidebar():x.closeSidebar()},icon:e.jsx(ut,{className:m.sidebarIcon}),label:a.formatMessage({id:"fM0vj3",defaultMessage:"Close Sidebar"}),group:te.OpenOrClosed})}),e.jsxs("div",{className:"flex items-center gap-3",children:[c&&e.jsx(qt,{className:m.searchAction,icon:e.jsx(gt,{className:m.sidebarIcon})}),e.jsx(ks,{to:"/",onClick:o=>{o.preventDefault(),s()},children:e.jsx(wa,{icon:e.jsx(ht,{className:m.sidebarIcon}),className:m.searchAction,label:a.formatMessage({id:"NUNaGU",defaultMessage:"New chat"})})})]})]})}),e.jsx(X,{type:"primary",className:m.bucketBar,disableSizeTracking:!0,children:" "})]})}function Xt(){const{clientThreadId:s,onNewThread:a}=le();return e.jsx(Ke,{anchor:"vertical",className:p(m.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Qt,{onNewThread:a}),trackLeading:!0,trailing:e.jsx(Kt,{}),children:e.jsx($t,{clientThreadId:s})})}const Yt=C(()=>S(()=>import("./nplb7hk3njrqyyty.js"),__vite__mapDeps([47,1,2,3,4,5,22,23,9,24,7,8,10,25,26,11,12,27,14,28,29,6,48,49,50,51,52,53,54,17,55])).then(s=>s.CanvasFocusedViewManager));function Zt(){const{clientThreadId:s,resetThread:a}=le();return es({resetThreadAction:a,clientThreadId:s}),null}function Jt(){const{clientThreadId:s,currentModelId:a,isCompanionWindow:t}=le();return e.jsx(Ea,{conversationId:s,currentModelId:a,isActiveWindow:!t})}function en({clientThreadId:s,setClientThreadId:a,urlThreadId:t}){os({clientThreadId:s});const n=ce(s);return e.jsxs(Ns,{clientThreadId:s,setClientThreadId:a,children:[e.jsx(Jt,{}),e.jsx(Zt,{}),e.jsxs(as,{clientThreadId:s,children:[e.jsx(qe,{clientThreadId:s,urlThreadId:t}),e.jsx(Qe,{}),e.jsx(_a,{className:vs.application,sidebar:e.jsx(Xt,{}),thread:e.jsx(ft,{}),details:n&&e.jsx(Yt,{clientThreadId:s}),threadExtendedInfo:e.jsx(ns,{clientThreadId:s}),debugger:e.jsx(ts,{clientThreadId:s}),name:"application-root"})]})]})}var sn={};const an=C(()=>S(()=>import("./oqfnuhav5rh0t0bu.js"),__vite__mapDeps([71,1,2,3,4,5,25,26,7,8,9,10,11,12,27,14,28,29,6,72])));function jn(s){const{urlThreadId:a,clientThreadId:t,prefetchSearch:n}=s;nn();const c=Fe(),o=ve(),[l]=Ms(),[i,d]=r.useState(()=>a!==void 0?a:t!==void 0?t:Me());a!==void 0&&i!==a&&W.getServerThreadId(i)!==a&&d(a);const g=Oa(ve());r.useEffect(()=>{a===void 0&&W.getServerThreadId(i)!==void 0&&d(Me())},[a,i,g]);const B=Q(ue.workspaceId);ce(i);const T=Xe(),{eligible:k,isLoading:y,markAsViewed:v}=Ta(),E=Pa();r.useEffect(()=>{(o.pathname==="/"||o.pathname.startsWith("/c/"))&&Na({namespace:Oe.ChatPageLoad})==null&&(La({namespace:Oe.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),Y.addTiming("chatgpt.web.chatPage.mounted"))},[]);const M=Ia();r.useEffect(()=>{As(!0).then(h=>{h.force_login&&M({authType:"login"}),ws.initializeAndGatherData(h),Da.initializeAndGatherData(h),_s.initializeAndGatherData(h)})},[M]),r.useEffect(()=>{const h=l.get(Ba)==="true";c!==h&&Es.setIsTemporaryChatEnabled(h)},[c,l]),r.useEffect(()=>{o.state?.focusObject&&ae.setFocusedObject(o.state.focusObject)},[o.state?.focusObject]),r.useEffect(()=>{!y&&k&&(v(),E())},[k,y,v,E]);const P=T?en:Tt;return e.jsx(Va.Provider,{value:null,children:e.jsx(Ra,{children:e.jsxs(Fa,{clientThreadId:i,children:[e.jsx(Mt,{clientThreadId:i},B),e.jsx(Vt,{}),e.jsx(Wa,{}),e.jsx(P,{urlThreadId:a,clientThreadId:i,setClientThreadId:d,prefetchSearch:n}),e.jsx(Bt,{clientThreadId:i}),e.jsx(Ha,{clientThreadId:i}),e.jsx(tn,{}),!1,e.jsx(Ga,{})]})})})}function tn(){const s=_(a=>a.sharingModalThreadId);return s?e.jsx(an,{serverThreadId:s}):null}function nn(){Os({queryKey:["pingEdge"],queryFn:()=>Be.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=sn.GOKU_SERVICE);export{jn as C,Nt as F,ns as a};
//# sourceMappingURL=6tukql02wjyx47k9.js.map
