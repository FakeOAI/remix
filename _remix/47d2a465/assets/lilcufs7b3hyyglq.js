const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-dh1250dcxmsn2s1v.js","assets/izrp0ab0bt841f6f.js","assets/jcb9oi3n2m62jlu1.js","assets/root-mqr9jcw8.css","assets/geemwvu9x8sejira.js","assets/flhoklliryp7qvb5.js","assets/conversation-small-n29wfzgk.css","assets/bxo5xfj7kh7zikib.js","assets/owb4cucjw7gaawd7.js","assets/imoil9kgknk4ot9l.js","assets/ezqycl9jhriww5x6.js","assets/gje8ch8jr33fkso7.js","assets/is2bqaglh61tm89a.js","assets/hn4wqt9wa8c0ztnx.js","assets/olw8s2e0v1djiab9.js","assets/du2nxm3wxnkd859h.js","assets/l5lb1g934132dtc1.js","assets/cvtl5jpvasho98c2.js","assets/hcsvzggxbm1z74jl.js","assets/eapcasn280248g7y.js","assets/fb0owppwcbb78jlf.js","assets/cxcz3ua3nlcyzjqa.js","assets/bct9qtcu6dc7aurq.js","assets/f0fzzuqev3k991sg.js","assets/dbwekrgp479wwxe2.js","assets/igadywc7653mc6ra.js","assets/e3car8vgx8kzmpbb.js","assets/k4y1w9ib3mm4pmi9.js","assets/k6hsppy3fbvk4w5w.js","assets/dme4ztml7oswp8cj.js","assets/bevoxult1e03mr4c.js","assets/kqwdyvkaaavvn8k3.js","assets/devjxyh6ck56nr7j.js","assets/lqd0ajxaaq9wf6a9.js","assets/ojxmz2qcbkosnm0l.js","assets/n2auh9im0j5ll2e0.js","assets/e9lafxuzyeh4418f.js","assets/lx4n1dez7l2vscx9.js","assets/lqk5d6ix8v80knv9.js","assets/c24vqqa8yzkx3fg8.js","assets/e8o9wibommcihaz7.js","assets/nhwwej1nq0zrd7sc.js","assets/jkspwiee5rv6rexa.js","assets/lhq46cur3gridiwb.js","assets/kkg4blictog0gs7m.js","assets/k3mbl23swzw3txdu.js","assets/gxwpzl1z5b6ssxud.js","assets/f4uz60pxzmwm4gbo.js","assets/ed4vex2ltq8kud2v.js","assets/czbfbrcxkgo0zbkm.js","assets/d4gq55lmsfoia36g.js","assets/oh39p2otr7nek6ah.js","assets/gx0clj5nz2zmyqf7.js","assets/gweae4pat8pq6mvw.js","assets/fbcm8q7p3w0578xc.js","assets/gkwwq7xljdbglfpm.js","assets/lta4pr9jh2v4tvb8.js","assets/c5rj8gdnx4avsqhb.js","assets/gh7xioc61m362xnc.js","assets/m7n1x78k9gpvt4jy.js","assets/odun85e553mblpiu.js","assets/b8f4zaek06skxqpb.js","assets/iej0cupg2dqkmejt.js","assets/pb65qim02j09hgfm.js","assets/jk8w36bsokizpx57.js","assets/ocf0xtaeksvb9pk7.js","assets/dj3e26ghcqsoynnj.js","assets/e41av2l4wqwgignn.js","assets/k5ljqelg28w1cva1.js","assets/jgqjvfqlt018gw2l.js","assets/ojuxo54cspej9b4t.js","assets/carousel-bss5aguy.css","assets/d2p04txsiw7bwtxx.js","assets/nm04jgpfyxi6pn12.js"])))=>i.map(i=>d[i]);
import{bT as Fe,h as Lt,r as l,f as Ut,l as n,R as Ht,fo as Vt,an as tt,W as K,fp as Ce,bx as J,by as Gt,fq as qt,a3 as ne,a2 as le,m as he,ch as zt,aN as Y,bC as ue,P as _,a as L,aA as Qt,aD as Kt,aE as Yt,a0 as w,a1 as Ne,u as nt,bf as ve,aK as Xt,c4 as Jt,c2 as Zt,a$ as pe,bY as st,d_ as ot,cj as at,a9 as en,eX as tn,eY as nn,ap as Oe,bg as ge,eu as sn,Q as rt,bd as we}from"./izrp0ab0bt841f6f.js";import{hK as on,hL as an,hM as rn,hN as cn,hO as ln,hP as un,ew as dn,hQ as mn,hR as fn,fk as pn,hS as gn,hT as xn,hU as hn,hV as vn,hW as de,fz as bn,hX as yn,hY as In,hZ as Sn,h_ as Cn,h$ as Mn,i0 as it,i1 as Tn,i2 as me,i3 as jn,i4 as kn,i5 as He,ff as En,fl as Pn,fo as wn,i6 as Rn,i7 as An,i8 as Fn,i9 as Nn,ia as ct,fv as On,ib as Dn,ic as lt,id as _n,c as se,N as be,ie as Wn,ig as $n,ih as fe,ii as Bn,ij as ut,ik as Me,il as Ln,im as Un,bs as Z,io as Hn,ip as Vn,iq as Gn,b4 as N,ir as dt,aZ as Ve,a_ as oe,a$ as ye,b9 as qn,bA as zn,bB as Qn,bc as Kn,bd as mt,be as xe,bf as ae,br as Yn,bC as F,is as D,bD as Xn,bg as Jn,bh as Zn,bi as es,bk as ft,bj as ts,b1 as ns,bo as ss,bp as os,bt as as,bu as rs,it as is,iu as cs,iv as ls,iw as us,bw as Ge,ix as pt,bx as ds,bq as ms,bz as fs,iy as ps,iz as gs,iA as xs,iB as gt,iC as hs,iD as vs,iE as Te,iF as bs,f6 as ys,A as De,a4 as Q,aH as xt,v as ht,aD as _e,d as Is,gX as We,cZ as vt,ce as qe,y as bt,bW as Ss,iG as Cs,eg as Ms,iH as Ts,u as js,G as yt,bZ as It,w as ks,x as Es}from"./flhoklliryp7qvb5.js";import{a as Ps,L as St,J as ws,u as Rs}from"./imoil9kgknk4ot9l.js";import{T as As,l as Fs,p as Ns,w as Os,b as Ds}from"./ezqycl9jhriww5x6.js";import{u as $e,a4 as _s,bE as Ct,$ as Mt,a$ as Ws,ad as $s,q as Bs,S as Ls,a7 as Us,p as Hs,aP as Tt,bz as jt,bF as kt,I as Vs,bq as Gs,bg as qs,ba as ze,b5 as zs,T as Qs}from"./jcb9oi3n2m62jlu1.js";import{D as k,$ as Ks,B as Ys}from"./k4y1w9ib3mm4pmi9.js";import{c as Et,d as Pt}from"./hn4wqt9wa8c0ztnx.js";import{u as Xs}from"./cctit5n82uu9uuic.js";const Js=()=>{const{value:e}=Fe("44045625");return e},Fa=()=>{const{value:e}=Fe("3700195277");return e||!1},Be=e=>{const t=Ps(e);return Js()&&!!t?.includes("canmore")},Zs=e=>Ut.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),eo=async e=>{const t=await Zs(e),s=new Map(t?.map(r=>[r.id,r])),o=[];for(const{id:r,content:i,version:c,textdoc_type:m,title:f,comments:p}of t)o.push({textdocId:r,messageId:null,type:cn(m),comments:ln(p,i),title:f,content:i,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(o.map(r=>[r.textdocId,r])),persistedTextdocVersions:o,persistedTextdocById:s}};function to({clientThreadId:e,isEnabled:t}){const s=As.getServerThreadId(e),{data:o,error:a,isLoading:r,isFetching:i,refetch:c}=Lt({queryKey:[s,"textdocs"],enabled:!!s&&t,gcTime:0,queryFn:()=>s&&eo(s)});return l.useEffect(()=>{if(!o)return;const{persistedTextdocVersions:m}=o;on(m),an(m),rn(m)},[o]),[{...o,error:a,isLoading:r,isFetching:i},c]}const wt=un(null);function re(e=Vt){return Nn(wt,e)}function Na(){return re(e=>e?.isFetchingFromPersistence)}function Oa(){return re(e=>e?.isEnabled)}function Da(e){const t=it();return re(s=>ct(s,t,e))}function Rt(e){const t=it();return re(s=>ct(s,t,e)?.metadata??null)}function At(){const e=re(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function _a(){return re(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function Wa({clientThreadId:e,children:t}){const s=Be(e),o=no({clientThreadId:e,isEnabled:s});return n.jsx(wt.Provider,{value:o,children:t})}function no({clientThreadId:e,isEnabled:t}){const s=Fs(e),o=Ns(e,s),a=Os(e),r=dn(a),[{error:i,persistedTextdocVersionById:c,isLoading:m,isFetching:f},p]=to({clientThreadId:e,isEnabled:t}),[y,u]=l.useState(!1),d=mn(),[g,x]=l.useState(!0);fn(()=>{t&&(u(!0),p().finally(()=>u(!1)))});const[v,M]=l.useState(c);l.useEffect(()=>{r&&M(c)},[r]);const T=t&&(r||!g||f&&!m&&y),b=pn(o),I=l.useMemo(()=>{if(!b)return null;const{messages:j}=b,A=gn(j??[],({message:$})=>$.author.role===Ht.System),h=A===-1?j:j?.slice(A+1);return T&&h&&xn(h)?h:null},[T,b]),R=!!I?v:c,W=hn(),S=vn(),C=l.useMemo(()=>{let j=Tn();return!R||(j=de(j,A=>{for(const[h,$]of R.entries()){A.allTextdocIdSet[h]=h;const E=d.get(h);let P=E&&(E.versionInt??me)>($.versionInt??me)?{...$,...E}:$;const z=S.filter(B=>B.textdocId===h&&B.kind===jn.REMOVE_COMMENT);let X=P.versionInt;for(const B of z)P=kn(P,B),X=Math.max(X??me,B.versionInt??me);P={...P,versionInt:X},A.textdocById[h]=void 0,He(A,P)}}),!W)?j:de(j,A=>{He(A,W,!1)})},[R,d,W,S]),V=l.useMemo(()=>de(C,j=>{j.fetchError=i,j.isFetchingFromPersistence=f}),[C,i,f]),U=bn(),H=l.useMemo(()=>I?.length?yn(r,C,U,I):null,[I,r,U,C]),G=In(r,H,x),q=l.useMemo(()=>G?Sn(V,G):V,[V,G]);return l.useEffect(()=>{t&&Cn(o)},[e,t,o.length]),l.useEffect(()=>{Mn(H)},[H]),l.useMemo(()=>de(q,j=>{j.isEnabled!==t&&(j.isEnabled=t);const A=En(o,E=>E.messages),h={},$=Pn(A);for(let E=$.length-1;E>=0;E--){const P=$[E];if(P.type!==wn.Canmore)continue;const z=Rn(P.messages),B=An(P.messages)?.message.metadata?.canvas?.textdoc_id??Fn(A);B&&z!=null&&!h[B]&&(h[B]=!0,z.nodeId!==j.lastCanvasAssistantMessageById[B]&&(j.lastCanvasAssistantMessageById[B]=z.nodeId))}}),[q,o,t])}const so=({children:e})=>{const t=At();return t?.length?n.jsxs(k.Root,{children:[n.jsx(k.Trigger,{className:"h-10 px-2",children:e}),n.jsx(k.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:t.map(s=>n.jsx(oo,{textdocId:s},s))})]}):null},oo=({textdocId:e})=>{const t=tt(Rt(e));return n.jsx(k.Item,{icon:$e,onClick:()=>{On.logButtonClick(Dn.FILE_DRAWER_ITEM),lt(t.textdocId)},children:t.title})},ao=()=>{const e=K(),t=At(),s=_n();if(!t||s)return null;const o=t.length;return o===1?n.jsx(ro,{textdocId:t[0]}):n.jsx(so,{children:n.jsx(se,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[n.jsx($e,{className:"icon-xl-heavy"}),o]})})})},ro=({textdocId:e})=>{const t=K(),s=tt(Rt(e));return n.jsx(se,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsx(be,{onClick:()=>lt(s.textdocId),icon:$e})})},io=({clientThreadId:e,children:t})=>Be(e)?n.jsx(Wn,{children:t}):t,Ft={...Gt},co=Ft.useInsertionEffect,lo=co||(e=>e());function Nt(e){const t=l.useRef(()=>{});return lo(()=>{t.current=e}),l.useCallback(function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t.current==null?void 0:t.current(...o)},[])}var Re=typeof document<"u"?l.useLayoutEffect:l.useEffect;let Qe=!1,uo=0;const Ke=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+uo++;function mo(){const[e,t]=l.useState(()=>Qe?Ke():void 0);return Re(()=>{e==null&&t(Ke())},[]),l.useEffect(()=>{Qe=!0},[]),e}const fo=Ft.useId,po=fo||mo;function go(){const e=new Map;return{emit(t,s){var o;(o=e.get(t))==null||o.forEach(a=>a(s))},on(t,s){e.set(t,[...e.get(t)||[],s])},off(t,s){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(a=>a!==s))||[])}}}const xo=l.createContext(null),ho=l.createContext(null),vo=()=>{var e;return((e=l.useContext(xo))==null?void 0:e.id)||null},bo=()=>l.useContext(ho),yo="data-floating-ui-focusable";function Io(e){const{open:t=!1,onOpenChange:s,elements:o}=e,a=po(),r=l.useRef({}),[i]=l.useState(()=>go()),c=vo()!=null,[m,f]=l.useState(o.reference),p=Nt((d,g,x)=>{r.current.openEvent=d?g:void 0,i.emit("openchange",{open:d,event:g,reason:x,nested:c}),s?.(d,g,x)}),y=l.useMemo(()=>({setPositionReference:f}),[]),u=l.useMemo(()=>({reference:m||o.reference||null,floating:o.floating||null,domReference:o.reference}),[m,o.reference,o.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:p,elements:u,events:i,floatingId:a,refs:y}),[t,p,u,i,a,y])}function So(e){e===void 0&&(e={});const{nodeId:t}=e,s=Io({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||s,a=o.elements,[r,i]=l.useState(null),[c,m]=l.useState(null),p=a?.reference||r,y=l.useRef(null),u=bo();Re(()=>{p&&(y.current=p)},[p]);const d=$n({...e,elements:{...a,...c&&{reference:c}}}),g=l.useCallback(b=>{const I=fe(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;m(I),d.refs.setReference(I)},[d.refs]),x=l.useCallback(b=>{(fe(b)||b===null)&&(y.current=b,i(b)),(fe(d.refs.reference.current)||d.refs.reference.current===null||b!==null&&!fe(b))&&d.refs.setReference(b)},[d.refs]),v=l.useMemo(()=>({...d.refs,setReference:x,setPositionReference:g,domReference:y}),[d.refs,x,g]),M=l.useMemo(()=>({...d.elements,domReference:p}),[d.elements,p]),T=l.useMemo(()=>({...d,...o,refs:v,elements:M,nodeId:t}),[d,v,M,t,o]);return Re(()=>{o.dataRef.current.floatingContext=T;const b=u?.nodesRef.current.find(I=>I.id===t);b&&(b.context=T)}),l.useMemo(()=>({...d,context:T,refs:v,elements:M}),[d,v,M,T])}const Ye="active",Xe="selected";function je(e,t,s){const o=new Map,a=s==="item";let r=e;if(a&&e){const{[Ye]:i,[Xe]:c,...m}=e;r=m}return{...s==="floating"&&{tabIndex:-1,[yo]:""},...r,...t.map(i=>{const c=i?i[s]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((i,c)=>(c&&Object.entries(c).forEach(m=>{let[f,p]=m;if(!(a&&[Ye,Xe].includes(f)))if(f.indexOf("on")===0){if(o.has(f)||o.set(f,[]),typeof p=="function"){var y;(y=o.get(f))==null||y.push(p),i[f]=function(){for(var u,d=arguments.length,g=new Array(d),x=0;x<d;x++)g[x]=arguments[x];return(u=o.get(f))==null?void 0:u.map(v=>v(...g)).find(v=>v!==void 0)}}}else i[f]=p}),i),{})}}function Co(e){e===void 0&&(e=[]);const t=e.map(c=>c?.reference),s=e.map(c=>c?.floating),o=e.map(c=>c?.item),a=l.useCallback(c=>je(c,e,"reference"),t),r=l.useCallback(c=>je(c,e,"floating"),s),i=l.useCallback(c=>je(c,e,"item"),o);return l.useMemo(()=>({getReferenceProps:a,getFloatingProps:r,getItemProps:i}),[a,r,i])}function Je(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Mo=e=>({name:"inner",options:e,async fn(t){const{listRef:s,overflowRef:o,onFallbackChange:a,offset:r=0,index:i=0,minItemsVisible:c=4,referenceOverflowThreshold:m=0,scrollRef:f,...p}=Bn(e,t),{rects:y,elements:{floating:u}}=t,d=s.current[i],g=f?.current||u,x=u.clientTop||g.clientTop,v=u.clientTop!==0,M=g.clientTop!==0,T=u===g;if(!d)return{};const b={...t,...await ut(-d.offsetTop-u.clientTop-y.reference.height/2-d.offsetHeight/2-r).fn(t)},I=await Ce(Je(b,g.scrollHeight+x+u.clientTop),p),O=await Ce(b,{...p,elementContext:"reference"}),R=Me(0,I.top),W=b.y+R,S=Ln(Me(0,g.scrollHeight+(v&&T||M?x*2:0)-R-Me(0,I.bottom)));if(g.style.maxHeight=S+"px",g.scrollTop=R,a){const C=g.scrollHeight>g.offsetHeight&&g.offsetHeight<d.offsetHeight*c-1||O.top>=-m||O.bottom>=-m;J.flushSync(()=>a(C))}return o&&(o.current=await Ce(Je({...b,y:W},g.offsetHeight+x+u.clientTop),p)),{y:W}}});function To(e,t){const{open:s,elements:o}=e,{enabled:a=!0,overflowRef:r,scrollRef:i,onChange:c}=t,m=Nt(c),f=l.useRef(!1),p=l.useRef(null),y=l.useRef(null);l.useEffect(()=>{if(!a)return;function d(x){if(x.ctrlKey||!g||r.current==null)return;const v=x.deltaY,M=r.current.top>=-.5,T=r.current.bottom>=-.5,b=g.scrollHeight-g.clientHeight,I=v<0?-1:1,O=v<0?"max":"min";g.scrollHeight<=g.clientHeight||(!M&&v>0||!T&&v<0?(x.preventDefault(),J.flushSync(()=>{m(R=>R+Math[O](v,b*I))})):/firefox/i.test(Un())&&(g.scrollTop+=v))}const g=i?.current||o.floating;if(s&&g)return g.addEventListener("wheel",d),requestAnimationFrame(()=>{p.current=g.scrollTop,r.current!=null&&(y.current={...r.current})}),()=>{p.current=null,y.current=null,g.removeEventListener("wheel",d)}},[a,s,o.floating,r,i,m]);const u=l.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const d=i?.current||o.floating;if(!(!r.current||!d||!f.current)){if(p.current!==null){const g=d.scrollTop-p.current;(r.current.bottom<-.5&&g<-1||r.current.top<-.5&&g>1)&&J.flushSync(()=>m(x=>x+g))}requestAnimationFrame(()=>{p.current=d.scrollTop})}}}),[o.floating,m,r,i]);return l.useMemo(()=>a?{floating:u}:{},[a,u])}let ie=l.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});ie.displayName="FloatingContext";let Le=l.createContext(null);Le.displayName="PlacementContext";function jo(e){return l.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function ko(){return l.useContext(ie).setReference}function Eo(){return l.useContext(ie).getReferenceProps}function Po(){let{getFloatingProps:e,slot:t}=l.useContext(ie);return l.useCallback((...s)=>Object.assign({},e(...s),{"data-anchor":t.anchor}),[e,t])}function wo(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=l.useContext(Le),s=l.useMemo(()=>e,[JSON.stringify(e,(a,r)=>{var i;return(i=r?.outerHTML)!=null?i:r})]);Z(()=>{t?.(s??null)},[t,s]);let o=l.useContext(ie);return l.useMemo(()=>[o.setFloating,e?o.styles:{}],[o.setFloating,e,o.styles])}let Ze=4;function Ro({children:e,enabled:t=!0}){let[s,o]=l.useState(null),[a,r]=l.useState(0),i=l.useRef(null),[c,m]=l.useState(null);Ao(c);let f=t&&s!==null&&c!==null,{to:p="bottom",gap:y=0,offset:u=0,padding:d=0,inner:g}=Fo(s,c),[x,v="center"]=p.split(" ");Z(()=>{f&&r(0)},[f]);let{refs:M,floatingStyles:T,context:b}=So({open:f,placement:x==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${x}`:`${x}-${v}`,strategy:"absolute",transform:!1,middleware:[ut({mainAxis:x==="selection"?0:y,crossAxis:u}),Hn({padding:d}),x!=="selection"&&Vn({padding:d}),x==="selection"&&g?Mo({...g,padding:d,overflowRef:i,offset:a,minItemsVisible:Ze,referenceOverflowThreshold:d,onFallbackChange(U){var H,G;if(!U)return;let q=b.elements.floating;if(!q)return;let j=parseFloat(getComputedStyle(q).scrollPaddingBottom)||0,A=Math.min(Ze,q.childElementCount),h=0,$=0;for(let E of(G=(H=b.elements.floating)==null?void 0:H.childNodes)!=null?G:[])if(E instanceof HTMLElement){let P=E.offsetTop,z=P+E.clientHeight+j,X=q.scrollTop,B=X+q.clientHeight;if(P>=X&&z<=B)A--;else{$=Math.max(0,Math.min(z,B)-Math.max(P,X)),h=E.clientHeight;break}}A>=1&&r(E=>{let P=h*A-$+j;return E>=P?E:P})}}):null,Gn({padding:d,apply({availableWidth:U,availableHeight:H,elements:G}){Object.assign(G.floating.style,{overflow:"auto",maxWidth:`${U}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${H}px)`})}})].filter(Boolean),whileElementsMounted:qt}),[I=x,O=v]=b.placement.split("-");x==="selection"&&(I="selection");let R=l.useMemo(()=>({anchor:[I,O].filter(Boolean).join(" ")}),[I,O]),W=To(b,{overflowRef:i,onChange:r}),{getReferenceProps:S,getFloatingProps:C}=Co([W]),V=N(U=>{m(U),M.setFloating(U)});return l.createElement(Le.Provider,{value:o},l.createElement(ie.Provider,{value:{setFloating:V,setReference:M.setReference,styles:T,getReferenceProps:S,getFloatingProps:C,slot:R}},e))}function Ao(e){Z(()=>{if(!e)return;let t=new MutationObserver(()=>{let s=window.getComputedStyle(e).maxHeight,o=parseFloat(s);if(isNaN(o))return;let a=parseInt(s);isNaN(a)||o!==a&&(e.style.maxHeight=`${Math.ceil(o)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function Fo(e,t){var s,o,a;let r=ke((s=e?.gap)!=null?s:"var(--anchor-gap, 0)",t),i=ke((o=e?.offset)!=null?o:"var(--anchor-offset, 0)",t),c=ke((a=e?.padding)!=null?a:"var(--anchor-padding, 0)",t);return{...e,gap:r,offset:i,padding:c}}function ke(e,t,s=void 0){let o=dt(),a=N((m,f)=>{if(m==null)return[s,null];if(typeof m=="number")return[m,null];if(typeof m=="string"){if(!f)return[s,null];let p=et(m,f);return[p,y=>{let u=Ot(m);{let d=u.map(g=>window.getComputedStyle(f).getPropertyValue(g));o.requestAnimationFrame(function g(){o.nextFrame(g);let x=!1;for(let[M,T]of u.entries()){let b=window.getComputedStyle(f).getPropertyValue(T);if(d[M]!==b){d[M]=b,x=!0;break}}if(!x)return;let v=et(m,f);p!==v&&(y(v),p=v)})}return o.dispose}]}return[s,null]}),r=l.useMemo(()=>a(e,t)[0],[e,t]),[i=r,c]=l.useState();return Z(()=>{let[m,f]=a(e,t);if(c(m),!!f)return f(c)},[e,t]),i}function Ot(e){let t=/var\((.*)\)/.exec(e);if(t){let s=t[1].indexOf(",");if(s===-1)return[t[1]];let o=t[1].slice(0,s).trim(),a=t[1].slice(s+1).trim();return a?[o,...Ot(a)]:[o]}return[]}function et(e,t){let s=document.createElement("div");t.appendChild(s),s.style.setProperty("margin-top","0px","important"),s.style.setProperty("margin-top",e,"important");let o=parseFloat(window.getComputedStyle(s).marginTop)||0;return t.removeChild(s),o}var No=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(No||{}),Oo=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Oo||{}),Do=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(Do||{});function Ee(e,t=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,o=bs(t(e.items.slice()),r=>r.dataRef.current.domRef.current),a=s?o.indexOf(s):null;return a===-1&&(a=null),{items:o,activeItemIndex:a}}let _o={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var s,o,a,r,i;if(e.menuState===1)return e;let c={...e,searchQuery:"",activationTrigger:(s=t.trigger)!=null?s:1,__demoMode:!1};if(t.focus===D.Nothing)return{...c,activeItemIndex:null};if(t.focus===D.Specific)return{...c,activeItemIndex:e.items.findIndex(p=>p.id===t.id)};if(t.focus===D.Previous){let p=e.activeItemIndex;if(p!==null){let y=e.items[p].dataRef.current.domRef,u=Te(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((o=y.current)==null?void 0:o.previousElementSibling)===d.current||((a=d.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeItemIndex:u}}}}else if(t.focus===D.Next){let p=e.activeItemIndex;if(p!==null){let y=e.items[p].dataRef.current.domRef,u=Te(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((r=y.current)==null?void 0:r.nextElementSibling)===d.current||((i=d.current)==null?void 0:i.nextElementSibling)===null)return{...c,activeItemIndex:u}}}}let m=Ee(e),f=Te(t,{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...m,activeItemIndex:f}},3:(e,t)=>{let s=e.searchQuery!==""?0:1,o=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(i=>{var c;return((c=i.dataRef.current.textValue)==null?void 0:c.startsWith(o))&&!i.dataRef.current.disabled}),r=a?e.items.indexOf(a):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let s=Ee(e,o=>[...o,{id:t.id,dataRef:t.dataRef}]);return{...e,...s}},6:(e,t)=>{let s=Ee(e,o=>{let a=o.findIndex(r=>r.id===t.id);return a!==-1&&o.splice(a,1),o});return{...e,...s,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},Ue=l.createContext(null);Ue.displayName="MenuContext";function Ie(e){let t=l.useContext(Ue);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Ie),s}return t}function Wo(e,t){return mt(t.type,_o,e,t)}let $o=l.Fragment;function Bo(e,t){let{__demoMode:s=!1,...o}=e,a=l.useReducer(Wo,{__demoMode:s,menuState:s?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsElement:i,buttonElement:c},m]=a,f=ye(t);qn(r===0,[c,i],(d,g)=>{m({type:1}),zn(g,Qn.Loose)||(d.preventDefault(),c?.focus())});let p=N(()=>{m({type:1})}),y=l.useMemo(()=>({open:r===0,close:p}),[r,p]),u={ref:f};return ne.createElement(Ro,null,ne.createElement(Ue.Provider,{value:a},ne.createElement(Kn,{value:mt(r,{0:xe.Open,1:xe.Closed})},ae({ourProps:u,theirProps:o,slot:y,defaultTag:$o,name:"Menu"}))))}let Lo="button";function Uo(e,t){var s;let o=l.useId(),{id:a=`headlessui-menu-button-${o}`,disabled:r=!1,autoFocus:i=!1,...c}=e,[m,f]=Ie("Menu.Button"),p=Eo(),y=Yn(),u=ye(t,ko(),N(S=>f({type:7,element:S}))),d=N(S=>{switch(S.key){case F.Space:case F.Enter:case F.ArrowDown:S.preventDefault(),S.stopPropagation(),J.flushSync(()=>f({type:0})),f({type:2,focus:D.First});break;case F.ArrowUp:S.preventDefault(),S.stopPropagation(),J.flushSync(()=>f({type:0})),f({type:2,focus:D.Last});break}}),g=N(S=>{switch(S.key){case F.Space:S.preventDefault();break}}),x=N(S=>{var C;if(Xn(S.currentTarget))return S.preventDefault();r||(m.menuState===0?(J.flushSync(()=>f({type:1})),(C=m.buttonElement)==null||C.focus({preventScroll:!0})):(S.preventDefault(),f({type:0})))}),{isFocusVisible:v,focusProps:M}=Jn({autoFocus:i}),{isHovered:T,hoverProps:b}=Zn({isDisabled:r}),{pressed:I,pressProps:O}=es({disabled:r}),R=l.useMemo(()=>({open:m.menuState===0,active:I||m.menuState===0,disabled:r,hover:T,focus:v,autofocus:i}),[m,T,v,I,r,i]),W=ft(p(),{ref:u,id:a,type:ts(e,m.buttonElement),"aria-haspopup":"menu","aria-controls":(s=m.itemsElement)==null?void 0:s.id,"aria-expanded":m.menuState===0,disabled:r||void 0,autoFocus:i,onKeyDown:d,onKeyUp:g,onClick:x},M,b,O);return ae({mergeRefs:y,ourProps:W,theirProps:c,slot:R,defaultTag:Lo,name:"Menu.Button"})}let Ho="div",Vo=Ve.RenderStrategy|Ve.Static;function Go(e,t){var s,o;let a=l.useId(),{id:r=`headlessui-menu-items-${a}`,anchor:i,portal:c=!1,modal:m=!0,transition:f=!1,...p}=e,y=jo(i),[u,d]=Ie("Menu.Items"),[g,x]=wo(y),v=Po(),[M,T]=l.useState(null),b=ye(t,y?g:null,N(h=>d({type:8,element:h})),T),I=ns(u.itemsElement);y&&(c=!0);let O=ss(),[R,W]=os(f,M,O!==null?(O&xe.Open)===xe.Open:u.menuState===0);as(R,u.buttonElement,()=>{d({type:1})});let S=u.__demoMode?!1:m&&u.menuState===0;rs(S,I);let C=u.__demoMode?!1:m&&u.menuState===0;is(C,{allowed:l.useCallback(()=>[u.buttonElement,u.itemsElement],[u.buttonElement,u.itemsElement])});let V=u.menuState!==0,U=cs(V,u.buttonElement)?!1:R;l.useEffect(()=>{let h=u.itemsElement;h&&u.menuState===0&&h!==I?.activeElement&&h.focus({preventScroll:!0})},[u.menuState,u.itemsElement,I]),ls(u.menuState===0,{container:u.itemsElement,accept(h){return h.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:h.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(h){h.setAttribute("role","none")}});let H=dt(),G=N(h=>{var $,E,P;switch(H.dispose(),h.key){case F.Space:if(u.searchQuery!=="")return h.preventDefault(),h.stopPropagation(),d({type:3,value:h.key});case F.Enter:if(h.preventDefault(),h.stopPropagation(),d({type:1}),u.activeItemIndex!==null){let{dataRef:z}=u.items[u.activeItemIndex];(E=($=z.current)==null?void 0:$.domRef.current)==null||E.click()}pt(u.buttonElement);break;case F.ArrowDown:return h.preventDefault(),h.stopPropagation(),d({type:2,focus:D.Next});case F.ArrowUp:return h.preventDefault(),h.stopPropagation(),d({type:2,focus:D.Previous});case F.Home:case F.PageUp:return h.preventDefault(),h.stopPropagation(),d({type:2,focus:D.First});case F.End:case F.PageDown:return h.preventDefault(),h.stopPropagation(),d({type:2,focus:D.Last});case F.Escape:h.preventDefault(),h.stopPropagation(),J.flushSync(()=>d({type:1})),(P=u.buttonElement)==null||P.focus({preventScroll:!0});break;case F.Tab:h.preventDefault(),h.stopPropagation(),J.flushSync(()=>d({type:1})),us(u.buttonElement,h.shiftKey?Ge.Previous:Ge.Next);break;default:h.key.length===1&&(d({type:3,value:h.key}),H.setTimeout(()=>d({type:4}),350));break}}),q=N(h=>{switch(h.key){case F.Space:h.preventDefault();break}}),j=l.useMemo(()=>({open:u.menuState===0}),[u.menuState]),A=ft(y?v():{},{"aria-activedescendant":u.activeItemIndex===null||(s=u.items[u.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(o=u.buttonElement)==null?void 0:o.id,id:r,onKeyDown:G,onKeyUp:q,role:"menu",tabIndex:u.menuState===0?0:void 0,ref:b,style:{...p.style,...x,"--button-width":ds(u.buttonElement,!0).width},...ms(W)});return ne.createElement(fs,{enabled:c?e.static||R:!1},ae({ourProps:A,theirProps:p,slot:j,defaultTag:Ho,features:Vo,visible:U,name:"Menu.Items"}))}let qo=l.Fragment;function zo(e,t){let s=l.useId(),{id:o=`headlessui-menu-item-${s}`,disabled:a=!1,...r}=e,[i,c]=Ie("Menu.Item"),m=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===o:!1,f=l.useRef(null),p=ye(t,f);Z(()=>{if(!i.__demoMode&&i.menuState===0&&m&&i.activationTrigger!==0)return ps().requestAnimationFrame(()=>{var C,V;(V=(C=f.current)==null?void 0:C.scrollIntoView)==null||V.call(C,{block:"nearest"})})},[i.__demoMode,f,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let y=gs(f),u=l.useRef({disabled:a,domRef:f,get textValue(){return y()}});Z(()=>{u.current.disabled=a},[u,a]),Z(()=>(c({type:5,id:o,dataRef:u}),()=>c({type:6,id:o})),[u,o]);let d=N(()=>{c({type:1})}),g=N(C=>{if(a)return C.preventDefault();c({type:1}),pt(i.buttonElement)}),x=N(()=>{if(a)return c({type:2,focus:D.Nothing});c({type:2,focus:D.Specific,id:o})}),v=xs(),M=N(C=>{v.update(C),!a&&(m||c({type:2,focus:D.Specific,id:o,trigger:0}))}),T=N(C=>{v.wasMoved(C)&&(a||m||c({type:2,focus:D.Specific,id:o,trigger:0}))}),b=N(C=>{v.wasMoved(C)&&(a||m&&c({type:2,focus:D.Nothing}))}),[I,O]=gt(),[R,W]=hs(),S=l.useMemo(()=>({active:m,focus:m,disabled:a,close:d}),[m,a,d]);return ne.createElement(O,null,ne.createElement(W,null,ae({ourProps:{id:o,ref:p,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":R,disabled:void 0,onClick:g,onFocus:x,onPointerEnter:M,onMouseEnter:M,onPointerMove:T,onMouseMove:T,onPointerLeave:b,onMouseLeave:b},theirProps:r,slot:S,defaultTag:qo,name:"Menu.Item"})))}let Qo="div";function Ko(e,t){let[s,o]=gt();return ne.createElement(o,null,ae({ourProps:{ref:t,"aria-labelledby":s,role:"group"},theirProps:e,slot:{},defaultTag:Qo,name:"Menu.Section"}))}let Yo="header";function Xo(e,t){let s=l.useId(),{id:o=`headlessui-menu-heading-${s}`,...a}=e,r=vs();Z(()=>r.register(o),[o,r.register]);let i={id:o,ref:t,role:"presentation",...r.props};return ae({ourProps:i,theirProps:a,slot:{},defaultTag:Yo,name:"Menu.Heading"})}let Jo="div";function Zo(e,t){return ae({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:Jo,name:"Menu.Separator"})}let ea=oe(Bo),ta=oe(Uo),na=oe(Go),sa=oe(zo),oa=oe(Ko),aa=oe(Xo),ra=oe(Zo),ce=Object.assign(ea,{Button:ta,Items:na,Item:sa,Section:oa,Heading:aa,Separator:ra});function ia({show:e,appear:t,children:s}){return n.jsx(ys,{as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",show:e,appear:t,children:s})}function te({onClick:e,href:t,target:s,children:o,disabled:a,icon:r,testId:i}){return n.jsx(ce.Item,{disabled:a,children:({active:c})=>n.jsxs(Se,{onClick:e,href:t,target:s,className:he({"bg-token-sidebar-surface-secondary":c,"hover:bg-token-sidebar-surface-secondary":!c&&!a}),"data-testid":i,children:[r&&n.jsx(r,{className:"icon-md"}),o]})})}function ca({to:e,children:t,icon:s}){return n.jsx(ce.Item,{children:({active:o})=>n.jsx(zt,{to:e,children:n.jsxs(Se,{$as:"span",className:he(o?"bg-token-sidebar-surface-secondary":"cursor-pointer"),children:[s&&n.jsx(s,{className:"icon-md"}),t]})})})}le.a`p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer`;const Se=le.a`flex gap-2 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group items-center`,$a=le(Se)`border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]`,Ae=le.div`h-px bg-token-border-light my-1.5`,Ba=le(Se)`${e=>e.$active?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`;function Dt({menuItemComponent:e}){const t=Y(),s=ue(),o=l.useCallback(()=>{_.logEvent(L.clickSidebarAccountPortalMenuItem),De(s,"Sidebar account menu item")},[s]),{value:a}=Qt("1028682714"),r=Kt(()=>Yt(()=>import("./sso-dh1250dcxmsn2s1v.js").then(i=>i.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73])).then(i=>i.default));return n.jsxs(n.Fragment,{children:[t?.hasPaidSubscription()&&(a?n.jsx(r,{handleClickCustomerPortal:o,menuItemComponent:e}):n.jsx(e,{onClick:o,icon:_s,children:n.jsx(w,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),t?.canInteractWithGizmos()&&n.jsx(e,{onClick:()=>{_.logEvent(L.accountMenuClickMyGPTs),s(St())},icon:Ct,children:n.jsx(w,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),n.jsx(e,{icon:Mt,onClick:()=>{Q.openModal(xt.UserContext),_.logEvent(L.accountMenuClickCustomizeChatGPT)},children:n.jsx(w,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function _t({menuItemComponent:e,routedMenuItemComponent:t}){const s=Y(),o=Fe("2756095923")?.value&&s?.isEdu()&&s?.isStandardUserOfAccount();return n.jsxs(n.Fragment,{children:[!o&&n.jsx(t,{to:"/admin",icon:Ws,children:n.jsx(w,{...Pe.myWorkspaceSettings})}),n.jsx(t,{to:St(),onClick:()=>{_.logEvent(L.accountMenuClickMyGPTs)},icon:Ct,children:n.jsx(w,{...Pe.myGpts})}),n.jsx(e,{onClick:()=>{Q.openModal(xt.UserContext),_.logEvent(L.accountMenuClickCustomizeChatGPT)},icon:Mt,children:n.jsx(w,{...Pe.chatPreferences})})]})}const Pe=Ne({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});function La({onClickSettings:e}){return n.jsxs(ce,{as:"div",className:"group relative",children:[n.jsx(ma,{}),n.jsx(ia,{children:n.jsx(ce.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:n.jsx(da,{onClickSettings:e})})})]})}function Wt(){const e=!Y()?.isEnterprisey()&&!ot,t=K(),s=_e(),o=ue();return s?n.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[n.jsx("div",{className:"text-sm text-token-text-secondary",children:s?.email}),e&&n.jsx(se,{label:t.formatMessage(ee.addWorkspaceTooltip),side:"right",children:n.jsx("button",{onClick:()=>De(o,"profile menu"),children:n.jsx(Vs,{className:"icon-sm text-token-text-primary"})})})]}):null}function la(){const e=Y();return e==null?n.jsx(n.Fragment,{children:n.jsx("div",{className:"w-full px-3 py-2",children:n.jsx(pe,{})})}):n.jsxs(n.Fragment,{children:[n.jsx(Wt,{}),n.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:n.jsx(Bt,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})})]})}function $t({menuItemComponent:e}){const t=ht(),s=nt(),{data:o}=ve(),a=Y(),[r,i]=l.useState(!1),c=_e(),m=K(),f=Xt();if(!a||!o)return null;const p=a.isWorkspaceAccount(),y=o.accountItems.length>1,u=o.accountItems,d=Is([u.find(x=>x.isPersonalAccount()),...u.filter(x=>!x.isPersonalAccount())]);if(d.sort((x,v)=>x.isPersonalAccount()?1:v.isPersonalAccount()?-1:0),!y)return p?n.jsx(la,{}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:c?.email})});const g=d.map(x=>n.jsx(e,{disabled:x.isDeactivated(),onClick:()=>{if(x.isDeactivated()||x.id===a?.id)return;i(!0);const{willRedirect:v}=Jt(s,x.id,t,m,f);v||Zt()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:x.isDeactivated()?n.jsx(ua,{workspace:x,isLoading:r}):n.jsx(Bt,{workspace:x,isLoading:r,currentWorkspaceId:a?.id})},x.id));return n.jsxs(n.Fragment,{children:[n.jsx(Wt,{}),n.jsx(k.Separator,{}),g]})}function Bt({workspace:e,isLoading:t,currentWorkspaceId:s,showCheck:o=!0}){const a=e.canAccessWithCurrentSession,r=!t&&o&&e.id===s;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(We,{iconSize:"small",workspace:e,className:he({"flex-shrink-0":!0})})}),n.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:vt(K(),e)}),t&&n.jsx(pe,{}),r&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx($s,{className:"icon-sm"})}),!a&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(Bs,{className:"icon-sm"})})]}),!a&&n.jsx("div",{className:"rowDivClassName",children:n.jsx("small",{className:"text-token-text-secondary",children:n.jsx(w,{...e.ssoConnectionName?ee.authenticateWithSSOToAccessWorkspace:ee.authenticateWithoutSSOToAccessWorkspace})})})]})}function ua({workspace:e,isLoading:t}){const s=K(),o=e.isOwnerOfAccount(),[a,r]=l.useState(!1),i=Xs(e.id);return l.useEffect(()=>{i!=null&&a&&(Q.setPurchaseWorkspaceData({minimumSeats:Math.max(i,qe),existingAccount:e}),r(!1))},[i,a,e]),n.jsxs(n.Fragment,{children:[n.jsxs(se,{className:"flex w-full flex-1 items-center gap-2.5",label:s.formatMessage(ee.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(Ls,{className:"icon-sm flex-shrink-0 opacity-30"})}),n.jsx("div",{className:"truncate opacity-30",children:vt(s,e)})]}),t&&n.jsx(pe,{}),!t&&n.jsxs(k.Root,{children:[n.jsx(Ks,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:n.jsx(Us,{className:"icon-sm m-1"})}),n.jsx(k.Portal,{children:n.jsxs(k.Content,{children:[o&&n.jsx(n.Fragment,{children:n.jsx(k.Item,{onClick:()=>{i==null?r(!0):Q.setPurchaseWorkspaceData({minimumSeats:Math.max(i,qe),existingAccount:e})},children:a?n.jsx(pe,{}):n.jsx(w,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),n.jsx(k.Item,{onClick:()=>{Q.setLeaveWorkspaceData(e)},children:n.jsx(w,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function da({onClickSettings:e}){const{data:t}=ve(),s=Y(),o=bt(),a=Et(),{openModal:r}=Pt();if(!s||!t)return null;const i=s.isWorkspaceAccount(),c=!o;return n.jsxs("nav",{children:[n.jsx($t,{menuItemComponent:te}),n.jsx(Ae,{}),i?n.jsx(_t,{menuItemComponent:te,routedMenuItemComponent:ca}):n.jsx(Dt,{menuItemComponent:te}),c&&n.jsx(te,{href:"https://help.openai.com/en/collections/3742473-chatgpt",target:"_blank",onClick:()=>{_.logEvent(L.clickFaqLink)},icon:Hs,children:n.jsx(w,{...ee.helpAndFaq})}),n.jsx(te,{onClick:e,icon:Tt,testId:"accounts-settings-button",children:n.jsx(w,{...ee.settings})}),a&&n.jsx(fa,{openDownloadModal:r}),n.jsx(Ae,{}),n.jsx(te,{onClick:()=>{_.logEvent(L.clickLogOut,{eventSource:"mouse"}),st()},icon:jt,children:n.jsx(w,{...ee.logOut})})]})}function ma(){return _e()?n.jsx(pa,{}):null}function fa({openDownloadModal:e}){return n.jsxs("span",{children:[n.jsx(Ae,{}),n.jsx(te,{icon:kt,onClick:()=>{_.logEvent(L.accountMenuClickDownloadApp),e()},children:n.jsx(w,{...ee.downloadApp})})]})}function pa(){const{data:e}=ve(),t=Y(),s=Ss(),o=Cs();if(!t||!e)return null;const a=t.isWorkspaceAccount(),r=e.accountItems.length>1;return n.jsxs(ce.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(We,{iconSize:"gizmo"})}),n.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[n.jsx("div",{dir:"auto",children:o}),a||r?n.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:s}):null]})]})}const ee=Ne({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"}});function ga({clientThreadId:e,location:t}){const s=nt(),{id:o}=ws(e),a=Rs(!0),r=ue(),i=at(),c=en();return l.useCallback(()=>{tn(nn(s))?Ms(r):i?r({pathname:c.pathname,search:c.search},{state:Ts()}):(a({modelId:o,location:t}),Oe.logEvent("chatgpt_web_thread_tap_new_thread"))},[s,t,o,a,r,i,c])}function Ua({showShareButton:e,showProfileDropdown:t,clientThreadId:s}){const o=Ds(s),a=K(),r=Be(s),{layer:i}=ge("1547743984"),c=i.get("show_share_button_text",!1);return n.jsxs(n.Fragment,{children:[!1,r&&n.jsx(ao,{}),e&&o&&n.jsx(io,{clientThreadId:s,children:c?n.jsx(we,{onClick:()=>Q.openSharingModal(o),icon:ze,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",children:a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"})}):n.jsx(se,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:n.jsx(be,{"data-testid":"share-chat-button",onClick:()=>Q.openSharingModal(o),icon:ze})})}),t&&n.jsx(ha,{})]})}function xa({to:e,children:t,icon:s}){const o=ue();return n.jsx(k.Item,{icon:s,onSelect:()=>o(e),children:t})}function ha(){const{isUnauthenticated:e}=rt();return e?n.jsx(Ca,{}):n.jsx(va,{})}function va(){const{data:e}=ve(),t=Y(),s=t?.isPlus()??!1,o=t?.isWorkspaceAccount()??!1,{openSettings:a}=js(),r=Et(),{openModal:i}=Pt(),{layer:c}=ge("2888142241"),{doesUserHaveAnyAccountsWithPlusFeatures:m}=sn(),{layer:f}=ge("2670443078");if(!t||!e)return null;const p=e.accountItems.length>1;let y=s;!o&&!s&&m&&f.get("is_gating_fix_enabled",!1)&&(y=m);const u=!o&&!y&&!ot&&c.get("is_upgrade_in_settings",!1);return n.jsxs(Ys,{triggerButton:n.jsx("button",{onClick:()=>{_.logEvent(L.accountOpenProfileMenu),Oe.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",children:n.jsx(We,{iconSize:"medium"})}),children:[p&&n.jsx($t,{menuItemComponent:k.Item}),p?n.jsx(k.Separator,{}):null,o?n.jsx(_t,{menuItemComponent:k.Item,routedMenuItemComponent:xa}):n.jsx(Dt,{menuItemComponent:k.Item}),n.jsx(k.Item,{icon:Tt,onClick:()=>a(),"data-testid":"settings-menu-item",children:n.jsx(w,{defaultMessage:"Settings",id:"navigation.settings.0"})}),n.jsx(k.Separator,{}),r&&n.jsx(ya,{openDownloadModal:i}),u&&n.jsx(Ia,{}),(u||r)&&n.jsx(k.Separator,{}),n.jsx(k.Item,{onClick:()=>{_.logEvent(L.clickLogOut,{eventSource:"mouse"}),_.logLogOutButtonClicked({location:"profile_drop_down"}),st()},"data-testid":"log-out-menu-item",icon:jt,children:n.jsx(w,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function ba({onClick:e,className:t,testId:s}){const o=K(),a=at(),r=a?o.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):o.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return n.jsx(se,{sideOffset:4,label:r,className:he("flex",t),children:n.jsx(be,{onClick:()=>{Q.closePopoverNavSidebar(),e()},icon:a?zs:Qs,surfaceContext:"secondary","aria-label":r,"data-testid":s})})}function Ha({clientThreadId:e}){const[t]=yt(a=>[a.activeStageSidebar]),s=It(),o=ga({clientThreadId:e,location:"Navigation actions"});return!s&&!t?null:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Sa,{}),n.jsx(ba,{onClick:o})]})}function ya({openDownloadModal:e}){return n.jsx("span",{children:n.jsx(k.Item,{icon:kt,onClick:()=>{e(),_.logEvent(L.accountMenuClickDownloadApp)},children:n.jsx(w,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function Ia(){const e=ue(),s=Y()?.wasPaidCustomer()??!1,o=()=>{Oe.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),_.logEvent(L.plusUpgradeInSettingsMenuClicked),De(e,"Upper right settings menu")};return n.jsx(k.Item,{icon:Gs,onClick:o,children:s?n.jsx(w,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):n.jsx(w,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Sa(){const e=K(),[t]=yt(r=>[r.activeStageSidebar]),s=It(),o=bt(),{isUnauthenticated:a}=rt();return!t&&!s||!o||a?null:n.jsx(se,{label:e.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:n.jsx(be,{"aria-label":e.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:Q.toggleNavSidebar,icon:qs,surfaceContext:"primary"})})}function Ca(){const e=ht(),t=ks(),s=Es(Ma.signUpCta),{layer:o}=ge("3637408529"),a=o.get("is_desktop_primary_auth_button_on_right",!1),r=()=>{e({authType:"login",callback:p=>{_.logLogInButtonClicked({location:"Chat header",provider:p})}})},i=()=>{e({authType:"signup",callback:p=>{_.logSignUpButtonClicked({location:"Chat header",provider:p})}})},c=n.jsx(we,{onClick:r,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:n.jsx(w,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),m=n.jsx(we,{color:t?"secondary":"primary",onClick:i,size:"small","data-testid":"signup-button",children:n.jsx(w,{...s})},"signup"),f=t?[c,m]:[m,c];return n.jsx("div",{className:"flex items-center justify-center gap-2",children:a?f.reverse():f})}const Ma=Ne({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Ua as C,Sa as E,ha as L,Ro as M,ba as N,ia as P,wo as R,Wa as T,Ba as U,va as a,Po as b,Se as c,$a as d,La as e,Be as f,Fa as g,Da as h,Na as i,Rt as j,_a as k,Oa as l,re as m,Js as n,Ha as o,ga as u,jo as x,ko as y};
//# sourceMappingURL=lilcufs7b3hyyglq.js.map
