const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/c5xqxtykl1x9cwcf.js","assets/ccj7f6j14nau263c.js","assets/root-jizurg7v.css","assets/bs7iave5elcatxkk.js","assets/f0imo4yu61eu3xxo.js","assets/loa8289j6tos1s6g.js","assets/conversation-small-ile61fj8.css","assets/dt4h30mv0dkadc4y.js","assets/ifcr298ebnr3hnqh.js","assets/n0cjr6uqfkarxxrc.js","assets/ekixp0xtlsh78lod.js","assets/ox0b7s7bf5v2z3mb.js","assets/kuqx699kbhz6ney5.js","assets/bdr3fncv5m35780r.js","assets/dm5mqr2wkoh57knc.js","assets/mw3tuz989m1i278r.js","assets/hw4pk2drgpnlauhr.js","assets/o4vd9ghhjnt6gf10.js","assets/fq6rmrpy5d1ycn7h.js","assets/ji2bm0h2t2e1p96r.js","assets/i40ajyebp6mbrn09.js","assets/abe61xuyobs03inn.js","assets/gnblcunwpxkvtebj.js","assets/hz6hy4ko1r36vewh.js","assets/l84xlrbtbd5jz973.js","assets/m02qjjjz9hpt39am.js"])))=>i.map(i=>d[i]);
import{r as u,m as s,aE as I,aJ as H,gV as J,fk as ee,fl as se,bw as ae,bp as L,e5 as ne,fh as te,e3 as oe,bK as K,bA as Q,gW as ie,d as re,ad as le,P as ce,b3 as y,b4 as v,b5 as me,dq as de,at as O,fb as ge}from"./ccj7f6j14nau263c.js";import{fx as F,fy as $,aQ as P,fz as fe,fA as pe,fB as xe,fC as ue,fD as he,c$ as _e,aZ as ye,fE as Ee,bb as ve,fF as be,fG as je,bW as n,fH as Ie,fI as Te,fJ as Ae,fK as Se,fL as Ne,fM as we,fc as Ce}from"./loa8289j6tos1s6g.js";import{m as C}from"./dt4h30mv0dkadc4y.js";const De=2e3,Y=.4,Re=.45,Pe=.2,Oe=.1,Le=.25;var N=(e=>(e[e.Running=0]="Running",e[e.Finished=1]="Finished",e[e.Error=2]="Error",e[e.Stopped=3]="Stopped",e[e.Paused=4]="Paused",e))(N||{});function ls({conversationMessages:e,icon:o,status:a,text:d,estimatedToolDurationMs:p,animationLoopDurationMs:g=De,shouldPersistAfterFinished:r=!1}){const[l,i]=u.useState(a===0?0:a===1&&!r?7:1),[c,x]=u.useState(0);u.useEffect(()=>{a===2?i(8):a===3?i(9):a===4?i(10):a===1?i(l===2?3:7):a===0&&l===10&&(i(2),x(m=>m+1))},[a]);const f=Fe(l);return u.useEffect(()=>{const m=e[0].message.id;if(f)return F.addDelayedRenderingMessage(m),()=>{F.removeDelayedRenderingMessage(m)}},[f]),$(()=>{w(l)&&x(m=>m+1)},g),l===7&&!r?null:s.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[s.jsx(Me,{icon:o,status:a,uiState:l,estimatedToolDurationMs:p,animationLoopCounter:c,shouldPersistAfterFinished:r,onFillProgressBarAnimationComplete:()=>i(4),onFinishAnimationComplete:()=>{i(5),setTimeout(()=>{i(r?7:6)},Oe*1e3)},onHideAnimationComplete:()=>i(7)}),s.jsx(ke,{text:d,uiState:l,animationLoopCounter:c,onEnterAnimationComplete:()=>i(2)})]})}const V=50;function Me({icon:e,status:o,uiState:a,estimatedToolDurationMs:d,animationLoopCounter:p,shouldPersistAfterFinished:g,onFillProgressBarAnimationComplete:r,onFinishAnimationComplete:l,onHideAnimationComplete:i}){const[c,x]=u.useState(0);$(()=>{w(a)?x(R=>R+V):a===10&&x(0)},V);let f,m,_;w(a)||a===10?(f="running",m=s.jsx(e,{animationLoopCounter:p}),_="bg-transparent"):a===4||a===5||a===7&&g?(f="finished",m=s.jsx(pe,{}),_="bg-brand-purple"):o===2?(f="error",m=s.jsx(xe,{}),_="bg-orange-500"):o===3&&(f="stopped",m=s.jsx(ue,{}),_="bg-gray-300");let E={opacity:0,scale:0,rotate:-180,x:0},j={type:"spring",bounce:.3,duration:Re},T={opacity:0,scale:.6,rotate:0,x:0};a===0?(E={opacity:0,scale:.5,rotate:-180,x:-8},j={type:"spring",bounce:.3,duration:Y}):a===1?E=!1:a===5&&(T={opacity:0,scale:0,rotate:0,x:0},j={type:"spring",bounce:.3,duration:Le});const D=he(c,d);return s.jsx("div",{className:"relative h-5 w-5 shrink-0",children:s.jsx(P,{onExitComplete:()=>{a===6&&i()},children:f!=null&&s.jsxs(C.div,{className:I("absolute left-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",_),initial:E,animate:{opacity:1,scale:1,rotate:0,x:0},exit:T,transition:j,onAnimationComplete:()=>{a===4&&l()},children:[m,(w(a)||a===10)&&s.jsx(fe,{percentage:a===3?100:D,thickness:1.5/23,className:"absolute left-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2 text-brand-purple",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:a===3?`${(100-D)/100*Pe}s`:void 0,transitionTimingFunction:a===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{a===3&&r()}})]},f)})})}function ke({text:e,uiState:o,animationLoopCounter:a,onEnterAnimationComplete:d}){const[p,g]=u.useState(e);u.useEffect(()=>{o===2&&g(e)},[a]),u.useEffect(()=>{w(o)||g(e)},[o,e]);let r={opacity:0,x:0,y:15},l={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};o===0?(r={opacity:0,x:-8,y:0},l={type:"spring",bounce:.3,duration:Y,delay:.15}):o===1&&(r=!1);const i=p??void 0;return s.jsx("div",{className:I("relative h-5 w-full leading-5",o===8||o===9?"text-token-text-tertiary":"text-token-text-secondary"),children:s.jsx(P,{children:i!=null&&s.jsx(C.div,{className:"absolute left-0 top-0 line-clamp-1 overflow-visible",initial:r,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:l,onAnimationComplete:()=>{o===0&&d()},children:i},i.toString())})})}function w(e){return e===0||e===2||e===3}function Fe(e){return w(e)||e===4||e===5||e===6||e===10}const B=H.div`group absolute left-0 top-0 mr-1.5 h-8 overflow-hidden mt-1`;function Ve({highlightedCommand:e,status:o,children:a,showWorkUserSetting:d=!1,hideOnlyIfNotInteractedWith:p=!1,onOpenAnalytics:g,onClick:r}){const l=a!=null||r!=null,[i]=u.useState(d),[c,x]=u.useState(d),[f,m]=u.useState(!1),_=o===N.Finished||o===N.Error,E=p?i?!1:!f:!1,j=o===N.Running&&"loading-shimmer";return _&&E?null:l?s.jsxs(s.Fragment,{children:[s.jsx(z,{$canShowWork:!0,children:s.jsx(P,{children:s.jsx(B,{children:s.jsx(C.button,{onClick:()=>{c||g?.(),x(T=>!T),m(!0),r?.()},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:I(j),children:s.jsxs("div",{className:"flex items-center justify-start gap-1",children:[s.jsx("span",{children:e}),!r&&(c?s.jsx(_e,{className:"icon-md"}):s.jsx(ye,{className:"icon-md"}))]})},e?.toString())})})}),s.jsx(P,{children:c&&a&&s.jsx(C.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:a})})]}):s.jsx(z,{$canShowWork:!1,children:s.jsx(B,{className:I(j),children:e})})}const z=H.span`block first:mt-0 relative h-8
${({$canShowWork:e})=>e?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary"}`,Be=3,ze=.1,U=[0,.26,.4];function Ue({nextMessage:e,isLastMessage:o,isRequestActive:a,isLastTurnInConversation:d,clientThreadId:p,turnIndex:g}){let r=o||!e||e&&!J(e.message);const l=ee(e?.message),i=se(e?.message);e?.message.id&&Ee(e?.message.id);const c=[];if(i?.[0]?.type==="navigation"&&e&&c.push(s.jsx(We,{clientThreadId:p,turnIndex:g,nextMessage:e,isRequestActive:a,isLastTurnInConversation:d,navigationCitation:i[0]},"fast-nav")),r){const x=ae(l.slice(0,Be).map(m=>m.entries[0].url)),f=a?s.jsxs("div",{className:"flex items-center gap-1",children:[x.map((m,_)=>s.jsx(C.div,{className:I("-ml-1.5 first:ml-0 last:mr-1.5","relative"),initial:{width:_===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:ze,delay:U[Math.min(_,U.length-1)]},children:s.jsx("div",{className:I("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-2 border-token-main-surface-primary bg-token-main-surface-primary"),children:s.jsx(ve,{url:m,size:32,minSize:16,className:"icon-md rounded-full"})})},m)),s.jsx(L,{id:"jjx8Qg",defaultMessage:"Searching the web"})]}):s.jsx(L,{id:"fssXGM",defaultMessage:"Error while searching"});c.push(s.jsx(Ve,{highlightedCommand:f,status:a?N.Running:N.Error},"search-gpt-query"))}return c.length?s.jsx(s.Fragment,{children:c}):null}const We=({clientThreadId:e,turnIndex:o,nextMessage:a,isRequestActive:d,isLastTurnInConversation:p,navigationCitation:g})=>{const{scrollToHeader:r}=ne("searchSources")??{},l=te(),i=oe()&&l?.type==="searchSources",{openThreadSidebar:c}=K(),{value:x}=Q("756982148");return u.useEffect(()=>{i&&c({type:"searchSources",scrollToHeader:r,clientThreadId:e,turnIndex:o,messageId:a?.message.id??""})},[]),d&&p&&x?s.jsx(C.div,{initial:{opacity:d?0:1,height:d?0:"auto"},animate:{opacity:1,height:"auto"},children:s.jsx(W,{clientThreadId:e,turnIndex:o,nextMessage:a,navigationCitation:g})}):s.jsx(W,{clientThreadId:e,turnIndex:o,nextMessage:a,navigationCitation:g})},W=({clientThreadId:e,turnIndex:o,nextMessage:a,navigationCitation:d})=>{const{toggleThreadSidebar:p}=K(),{value:g}=Q("756982148"),r=u.useMemo(()=>({clientThreadId:e,turnIndex:o,messageId:a?.message.id}),[e,o,a?.message.id]),l=u.useCallback((x,f)=>{p({type:"searchSources",scrollToHeader:f,clientThreadId:e,turnIndex:o,messageId:a?.message.id??""})},[p,e,o,a?.message.id]),i=u.useRef(!1),c=u.useCallback((x,f,m,_)=>{if(r&&r.messageId&&ie(r.messageId)&&(!i.current||x!==re.searchContentReferenceShown)){i.current=!0;const E={...le(r),type:m,index:0,..._??{}};ce.logEventWithStatsig(x,f,E)}},[r]);return g?s.jsx(be,{navigation:d,onShowSearchResults:l,trackContentReferenceEvent:c}):s.jsx(je,{tldr:{type:"tldr",display_title:d.domains[0].title,url:d.domains[0].url,matched_text:"",start_idx:0,end_idx:0,page_title:"",breadcrumbs:[d.domains[0].domain]},trackContentReferenceEvent:c})},He=y(()=>v(()=>import("./c5xqxtykl1x9cwcf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),Je=y(()=>v(()=>import("./ifcr298ebnr3hnqh.js"),__vite__mapDeps([8,1,2,9]))),Ke=y(()=>v(()=>import("./ekixp0xtlsh78lod.js"),__vite__mapDeps([10,1,2,5,6]))),Qe=y(()=>v(()=>import("./ox0b7s7bf5v2z3mb.js"),__vite__mapDeps([11,1,2,5,6])).then(e=>e.TextMessageEditor)),$e=y(()=>v(()=>import("./kuqx699kbhz6ney5.js"),__vite__mapDeps([12,1,2,13,5,6,7,14,3,4,15,16]))),Ye=y(async()=>()=>null),Xe=y(()=>v(()=>import("./o4vd9ghhjnt6gf10.js"),__vite__mapDeps([17,1,2,5,6,7]))),Ze=y(()=>v(()=>import("./fq6rmrpy5d1ycn7h.js"),__vite__mapDeps([18,1,2,5,6,19,7])).then(e=>e.BrowsingMessage)),Ge=y(()=>v(()=>import("./i40ajyebp6mbrn09.js"),__vite__mapDeps([20,1,2,5,6])).then(e=>e.SearchResultMessage)),qe=y(()=>v(()=>import("./abe61xuyobs03inn.js"),__vite__mapDeps([21,1,2,5,6,7])).then(e=>e.JITPluginMessage)),es=y(()=>v(()=>import("./gnblcunwpxkvtebj.js"),__vite__mapDeps([22,1,2,5,6,7])).then(e=>e.DataAnalysisMessage)),ss=y(()=>v(()=>import("./hz6hy4ko1r36vewh.js"),__vite__mapDeps([23,1,2,15,5,6,24,25,7])));function cs(e){switch(e.type){case n.Text:case n.Debug:return[e.message];case n.MultiText:case n.Browsing:case n.CodeInterpreter:case n.JITPlugin:case n.RetrievalBrowsing:case n.ParallelBrowsing:case n.Dalle:case n.GizmoEditor:case n.SearchResult:case n.a8km123:case n.f959b8c:case n.b1de6e2:case n.b1de6e2_c:case n.Canmore:case n.SonicCanvas:case n.de1d73e:case n.SearchGPTQuery:case n.oiw209h:return e.messages;default:throw new Error("Bad")}}function ms({groupedMessagesToRender:e,allGroupedMessages:o,clientThreadId:a,isEditing:d,isUserTurn:p,isCompletionRequestInProgress:g,isFeedbackEnabled:r,isFinalTurn:l,turnIndex:i,hasActiveRequest:c,showEditButton:x=!1,handleEnterEdit:f,handleExitEdit:m,onChangeItemInView:_,onRequestMoreCompletions:E,onRequestCompletion:j,shouldGrowContainer:T=!0}){const{showDebugConversationTurns:D}=Ie(),R=me(a),M=de(a),X=o.some(t=>Te.includes(t.type)),Z=e.map((t,h)=>{const A=h===o.length-1;switch(t.type){case n.Text:case n.MultiText:{const b=e[h-1],S=b?.type,k=b&&"messages"in b?b.messages:void 0;if(t.type===n.Text){const G=t?.message&&!J(t.message.message),q=d?s.jsx(Qe,{message:t.message,clientThreadId:a,onChangeItemInView:_,onRequestCompletion:j,onRequestMoreCompletions:E,onExitEdit:m,disabled:c}):X&&G?null:s.jsx(Ne,{className:"min-h-8",message:t.message,isFeedbackEnabled:r,isCompletionInProgress:A&&g,turnIndex:i,clientThreadId:a,showEditButton:x,onEnterEdit:f,isUserTurn:p,onRequestMoreCompletions:E,prevGroupedMessageType:S,prevGroupedMessages:k});return s.jsxs(u.Fragment,{children:[q,s.jsx(we,{isUserTurn:p,message:t.message.message})]},"group-"+t.message.nodeId)}else return t.type===n.MultiText?s.jsx(Ke,{clientThreadId:a,messages:t.messages,isCompletionInProgress:A&&g,isFeedbackEnabled:r,onRequestMoreCompletions:E,prevGroupedMessageType:S,prevGroupedMessages:k},"multitext-"+(t.messages[0]?.nodeId??h)):t.type}case n.Browsing:case n.RetrievalBrowsing:{const b=R!=null&&[O.GizmoInteraction,O.GizmoMagicCreate,O.GizmoTest].includes(R.kind),S=M?Se(M):!1;return s.jsx(Ze,{messages:t.messages,isRequestActive:c,isLastMessageInTurn:A,isUsingGizmo:b,isUsingSnorlax:S,isRetrieval:t.type===n.RetrievalBrowsing},"browsing-"+(t.messages[0]?.nodeId??h))}case n.SearchGPTQuery:{const b=o.slice(h+1).find(S=>S.type===n.Text);return s.jsx(Ue,{clientThreadId:a,turnIndex:i,isRequestActive:c,isLastMessage:A,isLastTurnInConversation:l,nextMessage:b&&b.type===n.Text?b.message:void 0},"searchquery-"+(t.messages[0]?.nodeId??h))}case n.a8km123:return s.jsx(ss,{messages:t.messages,isStreaming:A&&g,isLastMessage:A,clientThreadId:a,currentGroupedMessageIndex:h,turnIndex:i},"sum-"+(t.messages[0]?.nodeId??h));case n.f959b8c:return null;case n.b1de6e2:return null;case n.b1de6e2_c:return null;case n.de1d73e:return null;case n.ParallelBrowsing:return s.jsx(Xe,{messages:t.messages},"parallel-"+(t.messages[0]?.nodeId??h));case n.CodeInterpreter:return s.jsx(es,{messages:t.messages,isRequestActive:c,clientThreadId:a},"ada-"+(t.messages[0]?.nodeId??h));case n.JITPlugin:return s.jsx(qe,{messages:t.messages,clientThreadId:a,isLastTurnInConversation:l,onRequestCompletion:j},"jit-"+(t.messages[0]?.nodeId??h));case n.Dalle:return s.jsx($e,{messages:t.messages,clientThreadId:a},"dalle-"+(t.messages[0]?.nodeId??h));case n.GizmoEditor:return s.jsx(He,{messages:t.messages},"gizmo-editor-"+(t.messages[0]?.nodeId??h));case n.oiw209h:return s.jsx(Ye,{messages:t.messages,clientThreadId:a},"oiw209h-"+(t.messages[0]?.nodeId??h));case n.Canmore:return s.jsx(Ae,{messages:t.messages,allGroupedMessages:e,isFinalTurn:l,isRequestActive:c,clientThreadId:a},"canmore-"+(t.messages[0]?.nodeId??h));case n.SonicCanvas:return!1;case n.Debug:return D?s.jsx(Je,{message:t.message},"debug-"+t.message.nodeId):null;case n.SearchResult:return s.jsx(Ge,{messages:t.messages},"search-result-"+(t.messages[0]?.nodeId??h))}});return s.jsx(ns,{shouldGrowContainer:T,children:Z})}function as(){return s.jsx(Ce,{type:"danger",children:s.jsx(L,{id:"daIg0P",defaultMessage:"Unable to display this message due to a error."})})}function ns({children:e,shouldGrowContainer:o}){return s.jsx("div",{className:I({"flex max-w-full flex-col":!0,"flex-grow":o}),children:s.jsx(ge,{name:"GroupedMessages",fallback:as,children:e})})}export{ms as C,N as T,Ve as a,ls as b,cs as g};
//# sourceMappingURL=orthujvtvor3v21y.js.map
