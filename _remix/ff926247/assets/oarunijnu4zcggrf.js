const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pa6ijfnwzww932ld.js","assets/ccj7f6j14nau263c.js","assets/root-jizurg7v.css","assets/nngll6r7jm6atfbr.js","assets/n056iynmfq7m0iyh.js","assets/loa8289j6tos1s6g.js","assets/conversation-small-ile61fj8.css","assets/ck4hhqh0meyucwck.js","assets/dt4h30mv0dkadc4y.js","assets/mby08hr11r5h56a2.js","assets/gtn665i0bnz5bl2u.js","assets/gnkrfus33iqji08d.js","assets/o6wn1knh8ygnus5o.js","assets/mrwho9vkcpjp1kk9.js"])))=>i.map(i=>d[i]);
import{b3 as K,b4 as q,m as e,eJ as ne,L as E,r as u,a5 as Q,bs as L,K as ae,ef as ie,ee as ye,bp as _,cT as oe,aE as y,N as R,V as ke,aw as Ce,d8 as Ie,cy as Ne,dq as Me,bd as re,hx as j,hy as ze,cp as Fe,cq as Te,gq as Oe,e4 as A,a9 as we,b6 as _e}from"./ccj7f6j14nau263c.js";import{gY as Ee,k8 as D,bS as Ge,cf as Le,gV as ce,iM as Ae,fV as Pe,dx as U,dv as Re,aT as le,b9 as X,cT as Be,k9 as O,eK as He,ka as De,kb as Ue,eQ as We,dy as de,aQ as Ve,kc as Ke,dz as qe,cj as me,kd as Qe,fd as Ye,U as ue,fN as Ze,eL as $e,ke as Je,cx as Xe,cy as es,ct as Y,c$ as ss,aZ as ts,kf as ns,kg as T,cs as Z,A as b,cL as xe,dA as as,z as fe,dB as is,cA as he,kh as os,I as rs,ki as cs,kj as ls,kk as ds,kl as ee,en as ms,km as $,aF as P,kn as ge,ko as us,kp as W,kq as w,cF as xs,eo as fs,bu as hs,kr as gs,aG as ps,bV as bs,ks as Ss,w as vs,kt as js,y as ys,bQ as ks,ku as Cs,kv as pe,E as Is,kw as Ns,cc as Ms}from"./loa8289j6tos1s6g.js";import{u as G,d as zs}from"./ck4hhqh0meyucwck.js";import{m as V}from"./dt4h30mv0dkadc4y.js";import{U as Fs,P as Ts}from"./mby08hr11r5h56a2.js";const Os=K(()=>q(()=>import("./pa6ijfnwzww932ld.js"),__vite__mapDeps([0,1,2,3])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(be,{color:s})}),ws={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function be({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:e.jsx(Ee,{className:"h-3/4 w-3/4",style:{color:s}})})}function _s({gizmo:s,historyDisabled:n,section:t,onClick:c,isActive:a,hideOverflowMenu:l=!1,elementRef:i}){const{clientThreadId:x}=G(),f=ne(x),h=E(),[d,S]=u.useState(!1),[r,o]=u.useState(!1),[m,p]=u.useState(!1),g=s.gizmo.id,k=D.useStore(),C=D.useState(z=>D.selectFolderState(z,g)),N=Q(),B=!!s.gizmo.tags?.includes(Ge.FirstParty),{items:J=[]}=Le(s.gizmo.id),I={items:J},v=ce(g),M=Ae(g);let H=!1;a&&v&&!(C==="open"&&f)&&(H=!0),u.useEffect(()=>{C!=="open"&&a&&f&&k.expandProject(g)},[a,f,k,g]);let F;if(s!=null)F=s.gizmo.display.name||Pe;else{if(N==null)return null;n?F=h.formatMessage(U.clearChat):N.canInteractWithGizmos()?F=qe:F=h.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(V.div,{whileTap:{scale:.98},onMouseEnter:()=>{o(!0)},onMouseLeave:()=>{o(!1)},children:e.jsx(Re,{loggingGizmoId:s?.gizmo.id??"primary",href:le(s),onClick:c,showActiveIndicator:H,icon:v&&I&&I.items.length>0?e.jsx(L,{side:"top",sideOffset:4,delayDuration:600,label:C==="open"?h.formatMessage(X.hideChatsForProjectTooltip):h.formatMessage(X.showChatsForProjectTooltip),children:e.jsx("button",{onClick:z=>{z.preventDefault(),C==="open"?k.collapseProject(g):k.expandProject(g)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Os,{isOpen:C==="open",isHovered:m,color:M||null})})})})}):v?e.jsx(be,{color:M}):e.jsx(Be,{isFirstParty:B,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:d,label:F,rightIcon:t===O.Workspace&&e.jsx(L,{side:"right",label:h.formatMessage(se.workspaceRecommended,{workspace_name:N?.name??"Your Workspace"}),children:e.jsx(He,{className:"icon-md text-token-text-secondary",alt:h.formatMessage(se.workspaceRecommended,{workspace_name:N?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(r||d)&&!l&&(v?e.jsx("div",{className:"text-token-text-tertiary",onClick:z=>{z.preventDefault()},children:e.jsx(De,{gizmo:s,isOpen:d,setIsOpen:S})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:z=>{z.preventDefault()},children:e.jsx(Ue,{gizmo:s,isOpen:d,setIsOpen:S,section:t})})),!v&&!l&&e.jsx(L,{side:"right",label:h.formatMessage(n?U.clearChat:U.newChat),className:"flex items-center",children:e.jsx("button",{className:d?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(We,{className:"icon-md"}):e.jsx(de,{className:"icon-md"})})})]}),elementRef:i})}),e.jsx(Ve,{initial:!1,children:v&&C==="open"&&I&&I.items.length>0&&e.jsx(V.div,{initial:"closed",animate:"open",exit:"closed",variants:ws,className:"overflow-hidden",layout:!0,children:e.jsx(Ke,{gizmoResource:s,serverThreadId:f,isOnProjectPage:H,conversations:I.items})},"nested-conversations")})]})}const se=ae({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function Es(s){const{clientThreadId:n}=G(),t=u.useRef(s);t.current=s;const c=u.useRef(null);u.useEffect(()=>{const a=c.current;return c.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function Se(){const s=E(),n=me(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(Qe,{children:e.jsx(V.div,{whileTap:{scale:.98},children:e.jsx(ie,{to:Ye(),onClick:()=>{n.activeSidebar==="popover-nav"&&ue.setActiveSidebar(!1)},children:e.jsx(Ze,{icon:$e,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const Gs=2;function ve({gizmos:s,isGizmoFlyout:n,isLoaded:t,maxToShowOnLoad:c=4,isScreenArch:a,showAllSidebarItems:l}){const i=ns(s,o=>o.flair.kind),x=[...(i[T.Workspace]?.map(({resource:o})=>({gizmo:o,section:O.Workspace}))??[]).slice(0,3),...i[T.FirstParty]?.map(({resource:o})=>({gizmo:o,section:O.Keep}))??[],...i[T.SidebarKeep]?.map(({resource:o})=>({gizmo:o,section:O.Keep}))??[]],f=i[T.Recent]?.slice(0,a||t?i[T.Recent]?.length:Gs).map(({resource:o})=>({gizmo:o,section:O.Recents}))??[],h=f.length,d=x.length,S=a?h>0:s.length>c;let r=[];return n&&a?r=[...x,...f]:!n&&a?r=x:(r=[...x,...f],l||(r.length>c&&d>c?r=r.slice(0,d):r.length>c&&(r=r.slice(0,c)))),{listItems:r,itemsLeft:s.length-r.length,needsToCollapseItems:S,total:s.length}}function je({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:c=!1}){const a=u.useRef(!1),l=!t,i=ye(),[x,f]=u.useState(!1),h=me(m=>!Je.isGptListCollapsed(m)),{listItems:d,needsToCollapseItems:S,itemsLeft:r}=ve({gizmos:s,isGizmoFlyout:l,isLoaded:x,maxToShowOnLoad:t,isScreenArch:i,showAllSidebarItems:h});u.useEffect(()=>{x||f(!0)},[x]),u.useEffect(()=>{d.length>0&&!a.current&&(Xe({namespace:es.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),a.current=!0)},[d]);function o(m,p){const g=e.jsx(_s,{gizmo:m,isActive:m.gizmo.id===n,section:p,hideOverflowMenu:c},m.gizmo.id);return i?e.jsx("li",{children:g}):g}return e.jsxs("div",{children:[d.map(({gizmo:m,section:p},g)=>e.jsxs(u.Fragment,{children:[g>1&&p!==d[g-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),o(m,p)]},g)),!i&&S?e.jsxs("button",{onClick:ue.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(Y,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:h?e.jsxs(e.Fragment,{children:[e.jsx(_,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(ss,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:r}}),e.jsx(ts,{className:"icon-xs"})]})})]}):null,!i&&e.jsx(Se,{})]})}function Ls({currentGizmoId:s,gizmos:n,onClick:t}){const{isSidebarFlyoutOpen:c,onSidebarFlyoutOpenChange:a}=Z(),l=c(b.Gizmo),i=xe();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(oe,{onOpenChange:x=>a(b.Gizmo,x),side:i?"bottom":"right",sideOffset:4,open:l,contentAlign:"end",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",l&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Y,{className:y("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(R,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(je,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function As({currentGizmoId:s}){const{data:{gizmos:n}={}}=as();let t=n;fe()&&(t=n?.filter(l=>!is(l.resource)));const{needsToCollapseItems:a}=ve({gizmos:t??[],isLoaded:!1,isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(he,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(_,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(Se,{}),e.jsx(je,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:os}),a&&e.jsx(R,{children:e.jsx(Ls,{currentGizmoId:s,gizmos:t??[]})})]})})}function Ps({onClick:s}){const{clientThreadId:n}=G(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:c}=Z(),a=xe(),l=t(b.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(oe,{onOpenChange:i=>{i&&ke.logEvent("chatgpt_web_more_conversation_history_opened"),c(b.Conversation,i)},side:a?"bottom":"right",sideOffset:4,open:l,contentAlign:"start",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",l&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(Y,{className:y("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(R,{children:e.jsx(rs,{activeId:n,hideOverflowMenu:!0})})})})})}function Rs({clientThreadId:s}){const n=ne(s),t=Ce(),{isCollapsible:c,recentConversationLimit:a}=cs(),l={recentConversationLimit:a},i=u.useRef(!1),x=!0,{conversations:f,data:h,isLoading:d,isError:S,recents:r,refetch:o}=ls(l),[m,p]=u.useState(!0),g=u.useCallback(function(M){M===void 0&&p(!1),o({cancelRefetch:!0})},[o,p]),k=t?void 0:n,C=f.length===0,N=S||h===void 0&&!d&&i.current,B=!N&&(h===void 0||d);h===void 0&&!d&&!i.current&&(i.current=!0,g(!0));const I=f.find(v=>v.id===k)??null;return u.useMemo(()=>{Ie.publish({kind:"refreshHistory",conversations:f})},[f]),e.jsxs(e.Fragment,{children:[N&&e.jsx(ds,{showRetry:m,refetch:g}),!C&&e.jsxs(he,{header:r.label,isLastInGroup:!0,children:[r.items.map((v,M)=>e.jsx(ee,{item:v,isActive:v.id===k,testId:`history-item-${M}`},v.id)),I&&!r.items.some(v=>v.id===k)&&e.jsx(ee,{item:I,isActive:!0})]}),B&&e.jsx(Ne,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),c&&e.jsx(R,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!x,className:y(!x),children:e.jsx(Ps,{})})})})]})}const te=K(()=>q(()=>import("./n056iynmfq7m0iyh.js"),__vite__mapDeps([4,1,2,5,6,7,8,9])).then(s=>s.SnorlaxSidebarList));function Bs({clientThreadId:s}){const n=Q(),t=Me(s),{isUnauthenticated:c}=re(),a=fe();return c?null:e.jsxs("div",{className:y(j.screenContent),children:[a&&n?.canInteractWithGizmos()&&te?e.jsx(te,{currentGizmoId:t}):null,null,e.jsx(Rs,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(As,{currentGizmoId:t}):null]})}function Hs(){const s=Q(),n=s?.data==null,{isUnauthenticated:t}=re(),{openSettings:c}=ms(),a=ze(),[l]=u.useState(()=>{const o=Fe.getCookie(Te.Workspace);return typeof o=="string"&&o!==Oe}),i=E(),{store:x,actions:f}=$(),h=x(o=>o.mode),[d,S]=u.useState(!0);if(u.useEffect(()=>{S(!1)},[]),!s&&d||l&&n)return null;const r=t?e.jsx(Fs,{}):e.jsx(zs,{onClickSettings:()=>c()});return e.jsxs(P,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[r,a.get("include_floating_state",!1)&&e.jsx("div",{className:j.togglePinWrapper,children:e.jsx(ge,{tooltipSideOffset:14,className:j.pinSidebarAction,icon:e.jsx(us,{}),onActivate:o=>{o.preventDefault(),o.persist(),W.togglePinSidebar(o,f,h===w.Floating?w.Pinned:w.Floating)},label:h===w.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:A.FloatingOrPinned})})]})}function Ds(){return e.jsx(P,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Ts,{})})}function Us(){return e.jsxs(xs,{className:y(j.screenTrailingBarContainer),children:[e.jsx(fs,{}),e.jsx(Ds,{}),e.jsx(Hs,{})]})}function Ws({onNewThread:s}){const n=E(),t=we(),{clientThreadId:c}=G(),a=hs(c),l=a?gs(a):void 0,i=l?le(l):void 0,x=ce(l?.gizmo.id),f=n.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return e.jsx(L,{label:f,children:e.jsx(ie,{to:i??"/",onClick:async h=>{h.preventDefault(),!x&&i!=null?ps(t,i):s()},tabIndex:-1,children:e.jsx(bs,{icon:e.jsx(de,{className:j.sidebarIcon}),className:j.searchAction,label:f,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const Vs=K(()=>q(()=>import("./gtn665i0bnz5bl2u.js"),__vite__mapDeps([10,1,2,5,6,11,12,13])).then(s=>s.FannyPackIconButton));function Ks({onNewThread:s}){const n=E(),t=u.useRef(null),{store:c,actions:a}=$(),l=c(m=>m.isSidebarOpen),i=c(m=>m.mode),{isSidebarFlyoutOpen:x}=Z(),f=x(b.Conversation),h=x(b.Gizmo),d=x(b.Snorlax),S=l&&!f&&!h&&!d;function r(){pe(t.current)&&document.getElementById(A.OpenOrClosed)?.click()}Ss({checkElement:m=>m?.tagName==="NAV",enabled:S,onLightDismiss:r});const{isFannyPackEnabled:o}=vs();return _e(),e.jsxs(e.Fragment,{children:[e.jsx(P,{type:"primary",className:y(j.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(ge,{className:y(j.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:m=>{W.closeSidebar(m,a,i)},onActivate:m=>{W.closeSidebar(m,a,i)},icon:e.jsxs(e.Fragment,{children:[e.jsx(js,{className:y(j.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(ys,{className:y(j.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(qs.closeSidebar),htmlFor:A.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,o&&e.jsx(ks,{children:e.jsx(Vs,{className:j.searchAction,icon:e.jsx(Cs,{className:j.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx(Ws,{onNewThread:s})]})]})}),e.jsx(P,{type:"primary",className:j.bucketBar,disableSizeTracking:!0,children:" "})]})}const qs=ae({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function Xs(){const{clientThreadId:s,onNewThread:n}=G(),[t,c]=u.useState(!1),[a,l]=u.useState(!1),[i,x]=u.useState(!1),{store:f}=$(),h=u.useCallback(r=>r===b.Conversation?t:r===b.Gizmo?a:r===b.Snorlax?i:!1,[t,a,i]),d=u.useCallback((r,o)=>{const m=p=>{r===b.Conversation?c(p):r===b.Gizmo?l(p):r===b.Snorlax&&x(p)};o?m(!0):setTimeout(()=>{m(!1)},100)},[]),S=u.useRef(null);return Es((r,o)=>{d(b.Conversation,!1),d(b.Gizmo,!1),d(b.Snorlax,!1);const m=window.matchMedia("(max-width: 700px)").matches,p=pe(S.current);o!=null&&m&&f.getState().isSidebarOpen&&(f.getState().mode===w.Floating||p)&&setTimeout(()=>{document.getElementById(A.OpenOrClosed)?.click()},100)}),e.jsxs(Is,{value:{isSidebarFlyoutOpen:h,onSidebarFlyoutOpenChange:d},children:[e.jsx(Ns,{}),e.jsx(Ms,{anchor:"vertical",className:y(j.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Ks,{onNewThread:n}),ref:S,trackLeading:!0,trailing:e.jsx(Us,{}),children:e.jsx(Bs,{clientThreadId:s})})]})}export{Xs as C,_s as G,je as a};
//# sourceMappingURL=oarunijnu4zcggrf.js.map
