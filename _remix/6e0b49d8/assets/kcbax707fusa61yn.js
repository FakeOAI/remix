const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pelbjji4thmlgwdm.js","assets/lklglvrzltpv3f05.js","assets/bs81jb3dnj0a9ooo.js","assets/root-ksnlquoy.css","assets/dzdyz5bl3nzi5cph.js","assets/l64ci4rg34pgsa0c.js","assets/dqnh11qs4iylzde4.js","assets/conversation-small-fwmnexun.css","assets/kl2bgmt55x84dzak.js","assets/o9qagrry9v4fk81h.js","assets/e724sowby8ex7zkz.js","assets/cgtrifafqz9mamuj.js","assets/gav1p6nvk5rtmmcr.js","assets/br1ctvm27u5u7w3n.js"])))=>i.map(i=>d[i]);
import{j as e,c as M,r as f,ac as U,ad as Se,L as ee,M as _,e as je}from"./lklglvrzltpv3f05.js";import{h3 as ve,jq as H,bU as ye,i2 as Ce,g$ as se,hX as Ie,g2 as Ne,dL as D,dJ as ke,aZ as te,cY as Me,jr as O,eY as ze,js as Fe,jt as Oe,f2 as Te,dM as ne,ju as _e,be as q,dN as Ee,co as ae,jv as we,fm as Ge,U as ie,fX as Le,eZ as Pe,jw as Ae,cC as Re,cD as Be,cy as K,Z as He,Y as De,jx as Ue,jy as w,cx as V,P as p,cQ as oe,dO as We,O as re,dP as Ke,cF as ce,jz as Ve,R as Ye,jA as Ze,jB as Qe,jC as $e,jD as J,eB as qe,jE as Y,aM as G,jF as le,jG as Je,jH as W,jI as T,cK as Xe,eC as es,by as ss,jJ as ts,aN as ns,b$ as as,jK as is,J as os,jL as rs,M as cs,bS as ls,jM as ds,jN as de,Q as ms,jO as us,ci as xs}from"./dqnh11qs4iylzde4.js";import{aR as Z,aS as Q,ek as me,o as $,bd as L,f as ue,dV as fs,cz as xe,as as v,N as A,S as hs,ak as gs,cQ as ps,cg as bs,d4 as Ss,a$ as fe,gD as b,gE as js,bN as vs,bO as ys,fE as Cs,dL as P,aU as Is}from"./bs81jb3dnj0a9ooo.js";import{u as E,d as Ns}from"./kl2bgmt55x84dzak.js";import{U as ks,P as Ms}from"./o9qagrry9v4fk81h.js";const zs=Z(()=>Q(()=>import("./pelbjji4thmlgwdm.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(he,{color:s})}),Fs={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function Os({color:s,folderState:a,gizmoId:t,sidebarSnorlaxFolderStore:c}){const o=M(),[l,r]=f.useState(!1);return e.jsx(L,{side:"top",sideOffset:4,delayDuration:600,label:a==="open"?o.formatMessage(q.hideChatsForProjectTooltip):o.formatMessage(q.showChatsForProjectTooltip),children:e.jsx("button",{onClick:u=>{u.preventDefault(),a==="open"?c.collapseProject(t):c.expandProject(t)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(zs,{isOpen:a==="open",isHovered:l,color:s})})})})})}function he({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center text-token-text-primary",children:e.jsx(ve,{className:"h-3/4 w-3/4",style:{color:s}})})}function Ts({gizmo:s,historyDisabled:a,section:t,onClick:c,isActive:o,hideOverflowMenu:l=!1,elementRef:r}){const{clientThreadId:u}=E(),m=me(u),x=M(),[h,g]=f.useState(!1),[d,i]=f.useState(!1),n=s.gizmo.id,S=H.useStore(),I=H.useState(F=>H.selectFolderState(F,n)),C=$(),R=!!s.gizmo.tags?.includes(ye.FirstParty),{items:k=[],hasNextPage:B}=Ce(s.gizmo.id),N=se(n),z=Ie(n,s.gizmo.display.theme);let j=!1;o&&N&&!(I==="open"&&m)&&(j=!0),f.useEffect(()=>{I!=="open"&&o&&m&&S.expandProject(n)},[o,m,S,n]);let y;if(s!=null)y=s.gizmo.display.name||Ne;else{if(C==null)return null;a?y=x.formatMessage(D.clearChat):C.canInteractWithGizmos()?y=Ee:y=x.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(U.div,{whileTap:{scale:.98},onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},children:e.jsx(ke,{loggingGizmoId:s?.gizmo.id??"primary",href:te(s),onClick:c,showActiveIndicator:j,isHovered:d,icon:N&&k.length>0?e.jsx(Os,{color:z,folderState:I,gizmoId:n,sidebarSnorlaxFolderStore:S}):N?e.jsx(he,{color:z}):e.jsx(Me,{isFirstParty:R,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:h,label:y,rightIcon:t===O.Workspace&&e.jsx(L,{side:"right",label:x.formatMessage(X.workspaceRecommended,{workspace_name:C?.name??"Your Workspace"}),children:e.jsx(ze,{className:"icon-md text-token-text-secondary",alt:x.formatMessage(X.workspaceRecommended,{workspace_name:C?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(d||h)&&!l&&(N?e.jsx("div",{className:"text-token-text-tertiary",onClick:F=>{F.preventDefault()},children:e.jsx(Fe,{gizmo:s,isOpen:h,setIsOpen:g})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:F=>{F.preventDefault()},children:e.jsx(Oe,{gizmo:s,isOpen:h,setIsOpen:g,section:t})})),!N&&!l&&e.jsx(L,{side:"right",label:x.formatMessage(a?D.clearChat:D.newChat),className:"flex items-center",children:e.jsx("button",{className:h?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:a?e.jsx(Te,{className:"icon-md"}):e.jsx(ne,{className:"icon-md"})})})]}),elementRef:r})}),e.jsx(Se,{initial:!1,children:N&&I==="open"&&k.length>0&&e.jsx(U.div,{initial:"closed",animate:"open",exit:"closed",variants:Fs,className:"overflow-hidden",children:e.jsx(_e,{gizmoResource:s,serverThreadId:m,isOnProjectPage:j,conversations:k,hasNextPage:B})},"nested-conversations")})]})}const X=ue({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function _s(s){const{clientThreadId:a}=E(),t=f.useRef(s);t.current=s;const c=f.useRef(null);f.useEffect(()=>{const o=c.current;return c.current=a,()=>{a!==o&&t.current?.(a,o)}},[a])}function ge(){const s=M(),a=ae(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(we,{children:e.jsx(U.div,{whileTap:{scale:.98},children:e.jsx(ee,{to:Ge(),onClick:()=>{a.activeSidebar==="popover-nav"&&ie.setActiveSidebar(!1)},children:e.jsx(Le,{icon:Pe,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const Es=2;function pe({gizmos:s,isGizmoFlyout:a,maxToShowOnLoad:t=4,isScreenArch:c,showAllSidebarItems:o}){const l=Ue(s,n=>n.flair.kind),r=[...(l[w.Workspace]?.map(({resource:n})=>({gizmo:n,section:O.Workspace}))??[]).slice(0,3),...l[w.FirstParty]?.map(({resource:n})=>({gizmo:n,section:O.Keep}))??[],...l[w.SidebarKeep]?.map(({resource:n})=>({gizmo:n,section:O.Keep}))??[]],u=l[w.Recent]??[],x=(c||o?u:u.slice(0,Es)).map(({resource:n})=>({gizmo:n,section:O.Recents})),h=x.length,g=r.length,d=c?h>0:s.length>t;let i=[];return a&&c?i=[...r,...x]:!a&&c?i=r:(i=[...r,...x],o||(i.length>t&&g>t?i=i.slice(0,g):i.length>t&&(i=i.slice(0,t)))),{listItems:i,itemsLeft:s.length-i.length,needsToCollapseItems:d,total:s.length}}function be({gizmo:s,currentGizmoId:a,maxToShowOnLoad:t,hideOverflowMenu:c=!1}){const o=f.useRef(!1),l=!t,r=fs(),u=ae(d=>!Ae.isGptListCollapsed(d)),{listItems:m,needsToCollapseItems:x,itemsLeft:h}=pe({gizmos:s,isGizmoFlyout:l,maxToShowOnLoad:t,isScreenArch:r,showAllSidebarItems:u});f.useEffect(()=>{m.length>0&&!o.current&&(Re({namespace:Be.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),o.current=!0)},[m]);function g(d,i){const n=e.jsx(Ts,{gizmo:d,isActive:d.gizmo.id===a,section:i,hideOverflowMenu:c},d.gizmo.id);return r?e.jsx("li",{children:n}):n}return e.jsxs("div",{children:[m.map(({gizmo:d,section:i},n)=>e.jsxs(f.Fragment,{children:[n>1&&i!==m[n-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),g(d,i)]},n)),!r&&x?e.jsxs("button",{onClick:ie.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(K,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:u?e.jsxs(e.Fragment,{children:[e.jsx(_,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(He,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:h}}),e.jsx(De,{className:"icon-xs"})]})})]}):null,!r&&e.jsx(ge,{})]})}function ws({currentGizmoId:s,gizmos:a,onClick:t}){const{isSidebarFlyoutOpen:c,onSidebarFlyoutOpenChange:o}=V(),l=c(p.Gizmo),r=oe();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(xe,{onOpenChange:u=>o(p.Gizmo,u),side:r?"bottom":"right",sideOffset:4,open:l,contentAlign:"end",triggerButton:e.jsxs("button",{className:v("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",l&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(K,{className:v("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(A,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(be,{gizmo:a,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function Gs({currentGizmoId:s}){const{data:{gizmos:a}={}}=We();let t=a;re()&&(t=a?.filter(l=>!Ke(l.resource)));const{needsToCollapseItems:o}=pe({gizmos:t??[],isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(ce,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(_,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(ge,{}),e.jsx(be,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:Ve}),o&&e.jsx(A,{children:e.jsx(ws,{currentGizmoId:s,gizmos:t??[]})})]})})}function Ls({onClick:s}){const{clientThreadId:a}=E(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:c}=V(),o=oe(),l=t(p.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(xe,{onOpenChange:r=>{r&&hs.logEvent("chatgpt_web_more_conversation_history_opened"),c(p.Conversation,r)},side:o?"bottom":"right",sideOffset:4,open:l,contentAlign:"start",triggerButton:e.jsxs("button",{className:v("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",l&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(K,{className:v("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(A,{children:e.jsx(Ye,{activeId:a,hideOverflowMenu:!0})})})})})}function Ps({clientThreadId:s}){const a=me(s),t=gs(),{isCollapsible:c,recentConversationLimit:o}=Ze(),l={recentConversationLimit:o},r=f.useRef(!1),u=!0,{conversations:m,data:x,isLoading:h,isError:g,recents:d,refetch:i}=Qe(l),[n,S]=f.useState(!0),I=f.useCallback(function(y){y===void 0&&S(!1),i({cancelRefetch:!0})},[i,S]),C=t?void 0:a,R=m.length===0,k=g||x===void 0&&!h&&r.current,B=!k&&(x===void 0||h);x===void 0&&!h&&!r.current&&(r.current=!0,I(!0));const z=m.find(j=>j.id===C)??null;return f.useMemo(()=>{ps.publish({kind:"refreshHistory",conversations:m})},[m]),e.jsxs(e.Fragment,{children:[k&&e.jsx($e,{showRetry:n,refetch:I}),!R&&e.jsxs(ce,{header:d.label,isLastInGroup:!0,children:[d.items.map((j,y)=>e.jsx(J,{item:j,isActive:j.id===C,testId:`history-item-${y}`},j.id)),z&&!d.items.some(j=>j.id===C)&&e.jsx(J,{item:z,isActive:!0})]}),B&&e.jsx(bs,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),c&&e.jsx(A,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!u,className:v(!u),children:e.jsx(Ls,{})})})})]})}const As=Z(()=>Q(()=>import("./l64ci4rg34pgsa0c.js"),__vite__mapDeps([5,1,6,2,3,7,8,9])).then(s=>s.SnorlaxSidebarList));function Rs({clientThreadId:s}){const a=$(),t=Ss(s),{isUnauthenticated:c}=fe(),o=re();return c?null:e.jsxs("div",{className:v(b.screenContent,"group/sidebar"),children:[o&&e.jsx(As,{currentGizmoId:t}),null,e.jsx(Ps,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(Gs,{currentGizmoId:t}):null]})}function Bs(){const s=$(),a=s?.data==null,{isUnauthenticated:t}=fe(),{openSettings:c}=qe(),o=js(),[l]=f.useState(()=>{const i=vs.getCookie(ys.Workspace);return typeof i=="string"&&i!==Cs}),r=M(),{store:u,actions:m}=Y(),x=u(i=>i.mode),[h,g]=f.useState(!0);if(f.useEffect(()=>{g(!1)},[]),!s&&h||l&&a)return null;const d=t?e.jsx(ks,{}):e.jsx(Ns,{onClickSettings:()=>c()});return e.jsxs(G,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:pb-1.5 md:pt-2.5",type:"primary",disableSizeTracking:!0,trailing:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[d,o.get("include_floating_state",!1)&&e.jsx("div",{className:b.togglePinWrapper,children:e.jsx(le,{tooltipSideOffset:14,className:b.pinSidebarAction,icon:e.jsx(Je,{}),onActivate:i=>{i.preventDefault(),i.persist(),W.togglePinSidebar(i,m,x===T.Floating?T.Pinned:T.Floating)},label:x===T.Floating?r.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):r.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:P.FloatingOrPinned})})]})}function Hs(){return e.jsx(G,{className:"z-10 px-sidebar-inline pb-0.5 empty:hidden",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Ms,{})})}function Ds(){return e.jsxs(Xe,{className:v(b.screenTrailingBarContainer),children:[e.jsx(es,{}),e.jsx(Hs,{}),e.jsx(Bs,{})]})}function Us({onNewThread:s}){const a=M(),t=je(),{clientThreadId:c}=E(),o=ss(c),l=o?ts(o):void 0,r=l?te(l):void 0,u=se(l?.gizmo.id),m=a.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return e.jsx(L,{label:m,children:e.jsx(ee,{to:r??"/",onClick:async x=>{x.preventDefault(),!u&&r!=null?ns(t,r):s()},tabIndex:-1,children:e.jsx(as,{icon:e.jsx(ne,{className:b.sidebarIcon}),className:b.searchAction,label:m,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const Ws=Z(()=>Q(()=>import("./e724sowby8ex7zkz.js"),__vite__mapDeps([10,1,6,2,3,7,11,12,13])).then(s=>s.FannyPackIconButton));function Ks({onNewThread:s}){const a=M(),t=f.useRef(null),{store:c,actions:o}=Y(),l=c(n=>n.isSidebarOpen),r=c(n=>n.mode),{isSidebarFlyoutOpen:u}=V(),m=u(p.Conversation),x=u(p.Gizmo),h=u(p.Snorlax),g=l&&!m&&!x&&!h;function d(){de(t.current)&&document.getElementById(P.OpenOrClosed)?.click()}is({checkElement:n=>n?.tagName==="NAV",enabled:g,onLightDismiss:d});const{isFannyPackEnabled:i}=os();return Is(),e.jsxs(e.Fragment,{children:[e.jsx(G,{type:"primary",className:v(b.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between px-[var(--sidebar-inline-padding)]",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(le,{className:v(b.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:n=>{W.closeSidebar(n,o,r)},onActivate:n=>{W.closeSidebar(n,o,r)},icon:e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:v(b.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(cs,{className:v(b.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:a.formatMessage(Vs.closeSidebar),htmlFor:P.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,i&&e.jsx(ls,{children:e.jsx(Ws,{className:b.searchAction,icon:e.jsx(ds,{className:b.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx(Us,{onNewThread:s})]})]})}),e.jsx(G,{type:"primary",name:"floating-spacer",leading:!0,className:b.bucketBar,disableSizeTracking:!0,children:"Â "})]})}const Vs=ue({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function Js(){const{clientThreadId:s,onNewThread:a}=E(),[t,c]=f.useState(!1),[o,l]=f.useState(!1),[r,u]=f.useState(!1),{store:m}=Y(),x=f.useCallback(d=>d===p.Conversation?t:d===p.Gizmo?o:d===p.Snorlax?r:!1,[t,o,r]),h=f.useCallback((d,i)=>{const n=S=>{d===p.Conversation?c(S):d===p.Gizmo?l(S):d===p.Snorlax&&u(S)};i?n(!0):setTimeout(()=>{n(!1)},100)},[]),g=f.useRef(null);return _s((d,i)=>{h(p.Conversation,!1),h(p.Gizmo,!1),h(p.Snorlax,!1);const n=window.matchMedia("(max-width: 700px)").matches,S=de(g.current);i!=null&&n&&m.getState().isSidebarOpen&&(m.getState().mode===T.Floating||S)&&setTimeout(()=>{document.getElementById(P.OpenOrClosed)?.click()},100)}),e.jsxs(ms,{value:{isSidebarFlyoutOpen:x,onSidebarFlyoutOpenChange:h},children:[e.jsx(us,{}),e.jsx(xs,{anchor:"vertical",className:v(b.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Ks,{onNewThread:a}),ref:g,trackLeading:!0,trailing:e.jsx(Ds,{}),children:e.jsx(Rs,{clientThreadId:s})})]})}export{Js as C,Ts as G,be as a};
//# sourceMappingURL=kcbax707fusa61yn.js.map
