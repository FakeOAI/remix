const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/k2g4u6tk1j4m5ya3.js","assets/c3nnbeco67svv9me.js","assets/zsi1dkkcij1sdsx2.js","assets/root-e1ypms0r.css","assets/ddabru9k2rsup3m3.js","assets/conversation-small-cll5buey.css","assets/cihegvbamlni4l0v.js","assets/dxoslro1rvwd67ew.js","assets/gzgbevofufkf3o7o.js","assets/kwgflxxqdlwwap3u.js","assets/mehecquh0drw2spi.js","assets/dptc4ef9hl5or064.js","assets/n5r74i415n0sut4t.js","assets/bis5ga30x4w0y6e0.js","assets/i57mbtl7bqpo52km.js","assets/dgsuu1vhr5tghtn8.js","assets/kh7we7rj2rl9xdit.js","assets/hud8tx4fe9du4j6v.js","assets/l3mmxn9xtzugkpwe.js","assets/mgia4zi5ae90nd7x.js","assets/jjtb5ci6m0hp9jyh.js","assets/i94a48bxf7zc8cye.js","assets/dpcv4y6964rt950l.js","assets/ADAVisualizationComponent-mi6em660.css","assets/sso-kkbohn30u8r96oob.js","assets/j3w4xxnimb40u8nk.js","assets/cnjso0qjmz262g1k.js","assets/m2jcs38bwv9n5ztp.js","assets/it6a5i80mgx7jq68.js","assets/fi2rsulnau1zqfhn.js","assets/itghwucfyv5ciib7.js","assets/i6eu6lv9525xzh5u.js","assets/k2vowg0ykhafie8j.js","assets/axfi3l2367fywj85.js","assets/983a0dy92b3ronpv.js","assets/wvab8hga041nh5i3.js","assets/kqwdyvkaaavvn8k3.js","assets/bh2yix2wxd7c3inp.js","assets/mvovir12k5yc59to.js","assets/n2aczfgtl2styzw1.js","assets/bjaktf7o2v0a5jtn.js","assets/e9lafxuzyeh4418f.js","assets/kwu53kn97nx1putq.js","assets/drs9mnj4ro9vqhdk.js","assets/ctfli6rokc0zbrq9.js","assets/kr6pgyhuvn529gtf.js","assets/ieqagx4q4yicva24.js","assets/ipd558g0fxhlzx8z.js","assets/fsyzoz4pdkgytknt.js","assets/ennjq8gvzvvohe32.js","assets/byp3cvpsjpy6zpfr.js","assets/iej0cupg2dqkmejt.js","assets/e4o86k33gx70iwnr.js","assets/fvl2fzacbhl9n4so.js","assets/jk8w36bsokizpx57.js","assets/m7slh596hmg40uso.js","assets/oumrpq3np8ubqwx5.js","assets/70zut4e6jwohgrr8.js","assets/kawo8rcfompwg618.js","assets/cbogalhc2015hbij.js","assets/kfdgzahaccsimpny.js","assets/d8tnbqndjndub5wd.js","assets/m3nsqywioc4wkivs.js","assets/edp22e9qkq615ybp.js","assets/mv4sskfoyq7k00ea.js","assets/myuvx87u3187b7dk.js","assets/kfnakb8tz2g71qgg.js","assets/cmm8gohqx45ogutj.js"])))=>i.map(i=>d[i]);
import{Y as oe,r as y,x as t,ao as he,O as w,X as B,$ as v,a0 as b,M as H,bz as xe,bA as pe,a2 as U,ec as Me,P as K,b as Y,a5 as z,cz as Ee,S as Te,W as ye,d as Ie}from"./c3nnbeco67svv9me.js";import{ho as _e,dC as Ce,fU as Ae,fV as ve,fP as be,hp as je,hq as Ne,hr as we,hs as Se,ht as Re,dz as Pe,hu as Fe,hv as De,hw as ke,hx as Oe,fX as x,fW as k,hy as G,hz as Q,hA as Le,hB as ze,hC as X,hD as ie,bP as V,fA as re,hE as Ve,hF as We,hG as Ue,hH as de,hI as le,h as Be,bQ as He,b as Je,fI as Ke,hJ as Ye,fT as c,H as Ge,hK as Qe,hL as Xe,bH as $e,hM as qe,eX as Ze,hN as es,hO as ss,hP as ts,hQ as W,hR as as}from"./ddabru9k2rsup3m3.js";import{q as $,r as ns,d as ce,s as os,v as is,w as rs,z as ds,F as ls,A as cs,B as ms,D as gs}from"./bis5ga30x4w0y6e0.js";import{H as us,I as fs,T as D,l as hs}from"./dxoslro1rvwd67ew.js";import{i as xs,C as ps,g as Ms,a as Es,b as Ts}from"./kwgflxxqdlwwap3u.js";import{m as O}from"./cihegvbamlni4l0v.js";import{ah as ys,ai as Is}from"./zsi1dkkcij1sdsx2.js";const _s=(e,a)=>e?.textdocId?e.textdocId:e?.function===k.CreateTextdoc?Le(e):a??void 0,Cs=({messages:e,isRequestActive:a})=>{const s=oe(),o=_e(e),i=Ce(e),n=y.useMemo(()=>{if(Ae(o?.message))return ve(a,o.message,i?.message??null)},[a,o,i]),g=be(),r=_s(n,g),m=je(r),f=Ne(),u=we(r),M=Se(),d=Re(),h=Pe(),p=Fe(),E=De(),_=ke(),j=Oe({textdocId:r,toolResponseMessage:i});if(!n)return null;const N=!p&&!m&&n.status!==x.STREAMING&&n.status!==x.WAITING&&E;let R,P;if(n.status!==x.REDACTED&&n.status!==x.FAILED&&!N&&r){const C=_&&n.function===k.UpdateTextdoc&&n.status===x.COMPLETE;R=()=>{C&&n.versionInt?ze(r,n.versionInt,M):G(r)},P=()=>{C&&n.versionInt&&h(r,n.versionInt)}}const l=As(n,m);if(n.function===k.CreateTextdoc){if(n.status===x.STREAMING||n.status===x.WAITING||n.status===x.COMPLETE){const L=p===!0&&(n.status===x.STREAMING||n.status===x.WAITING);return t.jsx($,{isInlinePreview:j,isMissingFromThread:N,isFetching:L,type:n.type??null,name:l,isFocused:u,isStreaming:n.status===x.STREAMING,onClick:R,isCanvasOpen:f,textdocId:r})}let C;switch(n.status){case x.FAILED:C=s.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case x.CANCELED:C=s.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case x.REDACTED:C=t.jsx(he,{align:"start",label:s.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:s.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return t.jsx(q,{children:C})}const T=N||n.status===x.REDACTED,S=d&&!T?l:null,I=t.jsx(q,{onClick:R,onMouseOver:P,isStreaming:n.status===x.STREAMING,children:n.function===k.CommentTextdoc?bs(s,n,S):vs(s,n,S)});return j&&!f?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx($,{isInlinePreview:!0,isMissingFromThread:N,isFetching:!1,type:m?.type??null,name:l,isFocused:u,isStreaming:n.status===x.STREAMING,onClick:r!=null?()=>G(r):void 0,isCanvasOpen:f,textdocId:r}),I]}):I};function As(e,a){return a?.title?Q(a.title):e.function===k.CreateTextdoc&&e.title?Q(e.title):null}const q=({isStreaming:e=!1,onClick:a,onMouseOver:s,children:o})=>t.jsx("button",{disabled:!a,className:w(e&&"loading-shimmer","flex min-h-5 w-fit select-none pt-[3px] text-start text-token-text-secondary",a&&"hover:text-token-text-primary"),onClick:a,onMouseOver:s,children:o}),me=9;function vs(e,a,s){if(a.status===x.STREAMING)return s?e.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(a.status===x.FAILED)return s?e.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(a.status===x.CANCELED)return s?e.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const o=a.updates?.length;return a.status===x.REDACTED||!o||o>me?s?e.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):s?e.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:o,documentTitle:s}):e.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:o})}function bs(e,a,s){if(a.status===x.STREAMING)return s?e.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(a.status===x.FAILED)return s?e.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(a.status===x.CANCELED)return s?e.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const o=a.comments?.length;return a.status===x.REDACTED||!o||o>me?s?e.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):s?e.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:o,documentTitle:s}):e.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:o})}const js=2e3,ge=.4,Ns=.45,ws=.2,Ss=.1,Rs=.25;var A=(e=>(e[e.Running=0]="Running",e[e.Finished=1]="Finished",e[e.Error=2]="Error",e[e.Stopped=3]="Stopped",e[e.Paused=4]="Paused",e))(A||{});function mt({conversationMessages:e,icon:a,status:s,text:o,estimatedToolDurationMs:i,animationLoopDurationMs:n=js,shouldPersistAfterFinished:g=!1}){const[r,m]=y.useState(s===0?0:s===1&&!g?7:1),[f,u]=y.useState(0);y.useEffect(()=>{s===2?m(8):s===3?m(9):s===4?m(10):s===1?m(r===2?3:7):s===0&&r===10&&(m(2),u(d=>d+1))},[s]);const M=Ds(r);return y.useEffect(()=>{const d=e[0].message.id;if(M)return X.addDelayedRenderingMessage(d),()=>{X.removeDelayedRenderingMessage(d)}},[M]),ie(()=>{F(r)&&u(d=>d+1)},n),r===7&&!g?null:t.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[t.jsx(Ps,{icon:a,status:s,uiState:r,estimatedToolDurationMs:i,animationLoopCounter:f,shouldPersistAfterFinished:g,onFillProgressBarAnimationComplete:()=>m(4),onFinishAnimationComplete:()=>{m(5),setTimeout(()=>{m(g?7:6)},Ss*1e3)},onHideAnimationComplete:()=>m(7)}),t.jsx(Fs,{text:o,uiState:r,animationLoopCounter:f,onEnterAnimationComplete:()=>m(2)})]})}const Z=50;function Ps({icon:e,status:a,uiState:s,estimatedToolDurationMs:o,animationLoopCounter:i,shouldPersistAfterFinished:n,onFillProgressBarAnimationComplete:g,onFinishAnimationComplete:r,onHideAnimationComplete:m}){const[f,u]=y.useState(0);ie(()=>{F(s)?u(N=>N+Z):s===10&&u(0)},Z);let M,d,h;F(s)||s===10?(M="running",d=t.jsx(e,{animationLoopCounter:i}),h="bg-transparent"):s===4||s===5||s===7&&n?(M="finished",d=t.jsx(Ve,{}),h="bg-brand-purple"):a===2?(M="error",d=t.jsx(We,{}),h="bg-orange-500"):a===3&&(M="stopped",d=t.jsx(Ue,{}),h="bg-gray-300");let p={opacity:0,scale:0,rotate:-180,x:0},E={type:"spring",bounce:.3,duration:Ns},_={opacity:0,scale:.6,rotate:0,x:0};s===0?(p={opacity:0,scale:.5,rotate:-180,x:-8},E={type:"spring",bounce:.3,duration:ge}):s===1?p=!1:s===5&&(_={opacity:0,scale:0,rotate:0,x:0},E={type:"spring",bounce:.3,duration:Rs});const j=ns(f,o);return t.jsx("div",{className:"relative h-5 w-5 shrink-0",children:t.jsx(V,{onExitComplete:()=>{s===6&&m()},children:M!=null&&t.jsxs(O.div,{className:w("absolute left-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",h),initial:p,animate:{opacity:1,scale:1,rotate:0,x:0},exit:_,transition:E,onAnimationComplete:()=>{s===4&&r()},children:[d,(F(s)||s===10)&&t.jsx(re,{percentage:s===3?100:j,thickness:1.5/23,className:"absolute left-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2 text-brand-purple",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:s===3?`${(100-j)/100*ws}s`:void 0,transitionTimingFunction:s===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{s===3&&g()}})]},M)})})}function Fs({text:e,uiState:a,animationLoopCounter:s,onEnterAnimationComplete:o}){const[i,n]=y.useState(e);y.useEffect(()=>{a===2&&n(e)},[s]),y.useEffect(()=>{F(a)||n(e)},[a,e]);let g={opacity:0,x:0,y:15},r={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};a===0?(g={opacity:0,x:-8,y:0},r={type:"spring",bounce:.3,duration:ge,delay:.15}):a===1&&(g=!1);const m=i??void 0;return t.jsx("div",{className:w("relative h-5 w-full leading-5",a===8||a===9?"text-token-text-tertiary":"text-token-text-secondary"),children:t.jsx(V,{children:m!=null&&t.jsx(O.div,{className:"absolute left-0 top-0 line-clamp-1 overflow-visible",initial:g,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:r,onAnimationComplete:()=>{a===0&&o()},children:m},m.toString())})})}function F(e){return e===0||e===2||e===3}function Ds(e){return F(e)||e===4||e===5||e===6||e===10}const ee=B.div`group absolute left-0 top-0 mr-1.5 h-8 overflow-hidden mt-1`;function J({highlightedCommand:e,status:a,children:s,showWorkUserSetting:o=!1,hideOnlyIfNotInteractedWith:i=!1,onOpenAnalytics:n}){const g=s!=null,[r]=y.useState(o),[m,f]=y.useState(o),[u,M]=y.useState(!1),d=a===A.Finished||a===A.Error,h=i?r?!1:!u:!1,p=a===A.Running&&"loading-shimmer";return d&&h?null:g?t.jsxs(t.Fragment,{children:[t.jsx(se,{$canShowWork:!0,children:t.jsx(V,{children:t.jsx(ee,{children:t.jsx(O.button,{onClick:()=>{m||n?.(),f(E=>!E),M(!0)},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:w(p),children:t.jsxs("div",{className:"flex items-center justify-start gap-1",children:[t.jsx("span",{children:e}),m?t.jsx(ys,{className:"icon-md"}):t.jsx(Is,{className:"icon-md"})]})},e?.toString())})})}),t.jsx(V,{children:m&&s&&t.jsx(O.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s})})]}):t.jsx(se,{$canShowWork:!1,children:t.jsx(ee,{className:w(p),children:e})})}const se=B.p`first:mt-0 relative h-8
${({$canShowWork:e})=>e?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary"}`,te=v(()=>b(()=>import("./k2g4u6tk1j4m5ya3.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).then(e=>e.default));function ks({messages:e,isRequestActive:a,clientThreadId:s}){const[o,i]=e,n=ce(o.message),g=i?.message.metadata?.aggregate_result,r=os(),m=is(),f=i?.message?rs(i.message):[],u=i?.message.metadata?.aggregate_result?.messages.filter(xs)??[],d=(f.filter(E=>E.type==="chart")??[]).length!==u.length,h=m&&!d;let p=A.Running;return g?.status==="success"?p=A.Finished:i!=null&&i.message.content.content_type!==H.ExecutionOutput||g!=null&&g.status!=="running"?p=A.Error:(n||!a)&&(p=A.Stopped),t.jsxs(t.Fragment,{children:[t.jsx(Os,{messages:e,status:p,isRequestActive:a}),h&&f.map((E,_)=>{const{type:j}=E;return j==="chart"&&!r?(E.fallback_to_image=!0,t.jsx(ae,{children:t.jsx(te,{clientThreadId:s,visualization:E})},_)):t.jsx(ae,{children:t.jsx(te,{clientThreadId:s,visualization:E})},_)}),!h&&i!=null&&t.jsx(ps,{message:i.message})]})}const ae=B.div`mb-3 max-w-[80%]`;function Os({messages:e,status:a,isRequestActive:s}){const[o,i]=e,n=oe(),g=i?.message.metadata?.aggregate_result,r=ce(o.message),{data:m,error:f}=xe(pe.ShowExpandedCodeView);let u=n.formatMessage({id:"message.tools.data-analysis.running",defaultMessage:"Analyzing"});if(g?.status==="success"?u=n.formatMessage({id:"message.tools.data-analysis.finished",defaultMessage:"Analyzed"}):i!=null&&i.message.content.content_type!==H.ExecutionOutput||g!=null&&g.status!=="running"?u=n.formatMessage({id:"message.tools.data-analysis.error",defaultMessage:"Analysis errored"}):(r||!s)&&(u=n.formatMessage({id:"message.tools.data-analysis.stopped",defaultMessage:"Analysis paused"})),m!==void 0||f){const M=Ms(o.message)!=null;return t.jsx(J,{status:a,highlightedCommand:u,showWorkUserSetting:m??!1,hideOnlyIfNotInteractedWith:!0,children:M?t.jsxs("div",{className:"mb-3 mt-0.5 overflow-hidden rounded-xl bg-black",children:[t.jsx(Es,{message:o.message,FormattedText:de}),i!=null&&t.jsx(Ts,{message:i.message})]}):null})}return null}const Ls=3,zs=.1,ne=[0,.26,.4];function Vs({nextMessage:e,isLastMessage:a,isRequestActive:s}){let o=a||!e||e&&!le(e.message);const i=us(e?.message),n=Be(i.slice(0,Ls).map(g=>g.entries[0].url));if(e?.message.id&&ds(e?.message.id),o){const g=s?t.jsxs("div",{className:"flex items-center gap-1",children:[n.map((r,m)=>t.jsx(O.div,{className:w("-ml-1.5 first:ml-0 last:mr-1.5","relative"),initial:{width:m===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:zs,delay:ne[Math.min(m,ne.length-1)]},children:t.jsx("div",{className:w("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-2 border-token-main-surface-primary bg-token-main-surface-primary"),children:t.jsx(He,{url:r,size:32,minSize:16,className:"icon-md rounded-full"})})},r)),t.jsx(U,{id:"jjx8Qg",defaultMessage:"Searching the web"})]}):t.jsx(U,{id:"fssXGM",defaultMessage:"Error while searching"});return t.jsx(J,{highlightedCommand:g,status:s?A.Running:A.Error})}return null}const Ws={strong:e=>{const{node:a,children:s,...o}=e;return t.jsx("strong",{...o,className:w(o.className,"font-semibold text-token-text-primary"),children:s})},p:e=>{const{node:a,children:s,...o}=e;return t.jsx("p",{...o,className:w(o.className,"text-base","has-[strong]:mb-1 [&:not(:first-child)]:has-[strong]:mt-3 [&:not(:has(strong))]:mb-3"),children:s})}};function Us({headline:e,message:a}){const o=a.create_time?new Date(a.create_time*1e3):Date.now(),i=+new Date-+o,n=Ke(a.id,48e4,Ye(48e4,i));return t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx(re,{percentage:n,thickness:1/8,className:"h-5 w-5 text-token-text-primary",backgroundStrokeClassName:"stroke-token-main-surface-tertiary",transitionDuration:`${(100-n)/100*.2}s`,transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}),e]})}function Bs({messages:e,isStreaming:a,clientThreadId:s}){const[o,i]=y.useState(""),[n,g]=y.useState(!1),f=fs(s)===Me.STREAMING||a,u=e[0].message,M=u.id,d=D.getServerThreadId(s),h=Je(u),p=u.metadata?.summarization_headline,E=a&&p!=null;y.useEffect(()=>{const N=/\*\*(.*?)(?:\*\*|\n|$)/g;let R,P="";for(;(R=N.exec(h))!=null;)P=R[1].trim();P?i(P):u.metadata?.initial_text!=null&&i(u.metadata.initial_text)},[h,u.metadata?.initial_text]),y.useEffect(()=>{h.length>0&&!p&&g(!0)},[h,p]);const _=y.useMemo(()=>({client_thread_id:s,message_id:M,conversationId:d}),[s,M,d]);y.useEffect(()=>{n&&K.logEvent(Y.receivedA8KM123Message,_)},[n]);const j=y.useCallback(()=>{K.logEvent(Y.openedA8KM123Message,{..._,isStreaming:a})},[_,a]);return t.jsx(J,{status:f?A.Running:A.Finished,highlightedCommand:f?p==null?o:t.jsx(Us,{headline:p,message:u}):u.metadata?.finished_text??"",onOpenAnalytics:j,children:n&&!E?t.jsx("div",{className:"mb-4 border-l-2 pl-4 dark:border-token-text-secondary",children:t.jsx(de,{componentOverrides:Ws,className:"not-prose leading-6",children:h})}):null})}const Hs=v(()=>b(()=>import("./sso-kkbohn30u8r96oob.js").then(e=>e.J),__vite__mapDeps([24,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56])).then(e=>e.JawboneMessage).catch(()=>ls)),Js=v(()=>b(()=>import("./70zut4e6jwohgrr8.js"),__vite__mapDeps([57,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),Ks=v(()=>b(()=>import("./kawo8rcfompwg618.js"),__vite__mapDeps([58,1,2,3,4,5]))),Ys=v(()=>b(()=>import("./cbogalhc2015hbij.js"),__vite__mapDeps([59,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),Gs=v(()=>b(()=>import("./kfdgzahaccsimpny.js"),__vite__mapDeps([60,1,2,3,4,5,7,6])).then(e=>e.TextMessageEditor)),Qs=v(()=>b(()=>import("./d8tnbqndjndub5wd.js"),__vite__mapDeps([61,1,2,3,4,5,6,62,13,12,14,15,7,16,17,18,19,8,20,21,9,22]))),Xs=v(()=>b(()=>import("./edp22e9qkq615ybp.js"),__vite__mapDeps([63,1,2,3,13,4,5,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),$s=v(()=>b(()=>import("./mv4sskfoyq7k00ea.js"),__vite__mapDeps([64,1,2,3,4,5,16,7,6,17,37,13,12,14,15,18,19,8,20,21,9,22])).then(e=>e.BrowsingMessage)),qs=v(()=>b(()=>import("./myuvx87u3187b7dk.js"),__vite__mapDeps([65,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22])).then(e=>e.SearchResultMessage)),Zs=v(()=>b(()=>import("./kfnakb8tz2g71qgg.js"),__vite__mapDeps([66,1,2,3,4,5,16,7,6,17,46,44])).then(e=>e.GizmoContactsMessage)),et=v(()=>b(()=>import("./cmm8gohqx45ogutj.js"),__vite__mapDeps([67,1,2,3,4,5,16,7,6,17,13,12,14,15,18,19,8,20,21,9,22])).then(e=>e.JITPluginMessage));function gt(e){switch(e.type){case c.Text:case c.Debug:return[e.message];case c.MultiText:case c.Browsing:case c.CodeInterpreter:case c.JITPlugin:case c.RetrievalBrowsing:case c.ParallelBrowsing:case c.Dalle:case c.GizmoEditor:case c.SearchResult:case c.GizmoContacts:case c.a8km123:case c.f959b8c:case c.b1de6e2:case c.b1de6e2_c:case c.Canmore:case c.de1d73e:case c.SearchGPTQuery:return e.messages;default:throw new Error("Bad")}}function ut({groupedMessagesToRender:e,allGroupedMessages:a,clientThreadId:s,isEditing:o,isUserTurn:i,isCompletionRequestInProgress:n,isFeedbackEnabled:g,isFinalTurn:r,turnIndex:m,hasActiveRequest:f,showEditButton:u=!1,handleEnterEdit:M,handleExitEdit:d,onChangeItemInView:h,onRequestMoreCompletions:p,onRequestCompletion:E,shouldGrowContainer:_=!0}){const{showDebugConversationTurns:j}=Ge(),N=hs(s),R=a.some(l=>Qe.includes(l.type)),P=e.map((l,T)=>{const S=T===a.length-1;switch(l.type){case c.Text:case c.MultiText:{const I=e[T-1],C=I?.type,L=I&&"messages"in I?I.messages:void 0;if(l.type===c.Text){const ue=l?.message&&!le(l.message.message),fe=o?t.jsx(Gs,{message:l.message,clientThreadId:s,onChangeItemInView:h,onRequestCompletion:E,onRequestMoreCompletions:p,onExitEdit:d,disabled:f}):R&&ue?null:t.jsx(cs,{className:"min-h-8",message:l.message,isFeedbackEnabled:g,isCompletionInProgress:S&&n,turnIndex:m,clientThreadId:s,showEditButton:u,onEnterEdit:M,isUserTurn:i,onRequestMoreCompletions:p,prevGroupedMessageType:C,prevGroupedMessages:L});return t.jsxs(y.Fragment,{children:[fe,t.jsx(Xe,{isUserTurn:i,message:l.message.message})]},"group-"+l.message.nodeId)}else return l.type===c.MultiText?t.jsx(Ys,{clientThreadId:s,messages:l.messages,isCompletionInProgress:S&&n,isFeedbackEnabled:g,onRequestMoreCompletions:p,prevGroupedMessageType:C,prevGroupedMessages:L},"multitext-"+(l.messages[0]?.nodeId??T)):l.type}case c.Browsing:case c.RetrievalBrowsing:{const I=N!=null&&[z.GizmoInteraction,z.GizmoMagicCreate,z.GizmoTest].includes(N.kind);return t.jsx($s,{messages:l.messages,isRequestActive:f,isLastMessageInTurn:S,isUsingGizmo:I,isRetrieval:l.type===c.RetrievalBrowsing},"browsing-"+(l.messages[0]?.nodeId??T))}case c.SearchGPTQuery:{const I=a.slice(T+1).find(C=>C.type===c.Text);return t.jsx(Vs,{isRequestActive:f,isLastMessage:S,nextMessage:I&&I.type===c.Text?I.message:void 0},"searchquery-"+(l.messages[0]?.nodeId??T))}case c.a8km123:return t.jsx(Bs,{messages:l.messages,isStreaming:S&&n,clientThreadId:s},"sum-"+(l.messages[0]?.nodeId??T));case c.f959b8c:return null;case c.b1de6e2:return null;case c.b1de6e2_c:return null;case c.de1d73e:{const I=T+1<a.length?a[T+1]:void 0;return t.jsx(Hs,{currentGroupedMessage:l,nextMessage:I&&I.type===c.Text?I.message:void 0,isLastMessage:S,isRequestActive:f},"jawbone-"+(l.messages[0]?.nodeId??T))}case c.ParallelBrowsing:return t.jsx(Xs,{messages:l.messages},"parallel-"+(l.messages[0]?.nodeId??T));case c.CodeInterpreter:return t.jsx(ks,{messages:l.messages,isRequestActive:f,clientThreadId:s},"ada-"+(l.messages[0]?.nodeId??T));case c.JITPlugin:return t.jsx(et,{messages:l.messages,clientThreadId:s,isLastTurnInConversation:r,onRequestCompletion:E},"jit-"+(l.messages[0]?.nodeId??T));case c.GizmoContacts:return t.jsx(Zs,{messages:l.messages,clientThreadId:s,isLastTurnInConversation:r,onRequestCompletion:E},"gizmo-contacts-"+(l.messages[0]?.nodeId??T));case c.Dalle:return t.jsx(Qs,{messages:l.messages,clientThreadId:s},"dalle-"+(l.messages[0]?.nodeId??T));case c.GizmoEditor:return t.jsx(Js,{messages:l.messages},"gizmo-editor-"+(l.messages[0]?.nodeId??T));case c.Canmore:return t.jsx(Cs,{messages:l.messages,isRequestActive:f},"canmore-"+(l.messages[0]?.nodeId??T));case c.Debug:return j?t.jsx(Ks,{message:l.message},"debug-"+l.message.nodeId):null;case c.SearchResult:return t.jsx(qs,{messages:l.messages},"search-result-"+(l.messages[0]?.nodeId??T))}});return t.jsx(tt,{shouldGrowContainer:_,children:P})}function st(){return t.jsx($e,{type:"danger",children:t.jsx(U,{id:"daIg0P",defaultMessage:"Unable to display this message due to a error."})})}function tt({children:e,shouldGrowContainer:a}){return t.jsx("div",{className:w({"flex max-w-full flex-col":!0,"flex-grow":a}),children:t.jsx(Ee,{name:"GroupedMessages",fallback:st,children:e})})}function ft(e,a,s,o){let i=es.getReadyFiles(e.getState());o?.kind===z.GizmoMagicCreate?i=i.filter(d=>d.gizmoId!=null):i=i.filter(d=>d.gizmoId==null);let n=a??"";const g=[],r=[],m=ss(s,o),u=ts(s,o).length>0,M=m===W.Interpreter||m===W.Retrieval||m===W.ContextConnector;return i.forEach(({fileSpec:d})=>{if(M){const h=d.contextConnectorInfo;g.push({id:d.id,size:d.size,name:d.name,context_connector_info:h?{context_connector:h?.contextConnector,source_url:h?.sourceUrl,synthetic_extension:h?.syntheticExtension??null,type:h?.type}:void 0,mime_type:d.mimeType,width:"width"in d?d.width:void 0,height:"height"in d?d.height:void 0,file_token_size:d.fileTokenSize})}u&&"width"in d&&"height"in d&&r.push({content_type:Ie.ImageAssetPointer,asset_pointer:as(d.id),size_bytes:d.size,width:d.width,height:d.height})}),r.length>0&&(r.push(a??""),n={content_type:H.MultimodalText,parts:r}),{content:n,attachments:g}}async function ht({clientThreadId:e,currentRequestId:a,queryClient:s,isHistoryAndTrainingDisabled:o}){const i=D.getServerThreadId(e);ms.stopConversation(i);const n=D.getTree(e);!n.hasReceivedServerCompletion&&!o&&n.getParent(a).metadata?.errCode!==qe.ContentPolicy&&setTimeout(()=>{gs.onCreateFinished(s,i,o)},500),i&&Te.checkGate("3922476776")&&await ye.stopConversationProcess(i),Ze.abortRequest(a)&&D.updateTree(e,r=>{const m=D.getThreadCurrentLeafId(e);r.updateNodeMessageMetadata(m,{finish_details:{type:"interrupted"}})})}export{ut as C,J as T,A as a,mt as b,ht as c,gt as d,ft as g};
//# sourceMappingURL=lh1c2ka0m0o1fj4x.js.map
