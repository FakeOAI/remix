import{c7 as X,u as O,r as o,m as e,cp as z,V as L,a9 as J,bi as I,bo as Z,eW as N,ey as $,P as K,d as U,bO as ee,cl as W,ba as se}from"./drn86x6z0dntkhx9.js";import{B as te,Q as ae,b9 as oe,ba as ne,z as ie,bb as le,bc as ce}from"./cp86wre9ui5kltwi.js";import{f9 as M,fa as g,cl as q,A as H,fb as re,fc as de,fd as R,fe as ue,ff as me,fg as fe}from"./hznw5cgbp60ntlrj.js";import{a as he,u as xe,b as ge}from"./fljwikep2yyk1e5j.js";import{V as pe}from"./jt6iklxgzghiek3s.js";import{m as T}from"./dnjwhueabhjknjbo.js";import"./ip7aumjlen5lavf1.js";import"./ov4ohdoqbt3v43w7.js";import"./c4bxzbp1808foto4.js";function ve(){const t=M(g.hasSeenStrawSelection),a=M(q()?g.hasSeenElectronComposerStraw:g.hasSeenWebComposerStraw),{layer:s}=X("871635014"),d=s.get("snowflake_composer_entry_point",!1),n=O("3419264204").value,i=!t.isLoading&&t.eligible&&!a.isLoading&&a.eligible&&(d||n),[u,p]=o.useState(!1),[r,l]=o.useState(!1),[m,f]=o.useState(""),[j,v]=o.useState(!1),[S,b]=o.useState(!1);return{shouldShowComposerSnowflake:i,composerStrawAnnouncement:a,showSnowflake:u,setShowSnowflake:p,enableFadeInBoldIcon:r,setEnableFadeInBoldIcon:l,initialVoiceName:m,setInitialVoiceName:f,showVoicePicker:j,setShowVoicePicker:v,hasShownSnowflake:S,setHasShownSnowflake:b}}function Y(t){return e.jsx(z,{isOpen:t.isOpen,onClose:t.onClose,type:"success",size:"fullscreen",children:e.jsx(H,{children:e.jsx(T.div,{children:e.jsx(pe,{conversationId:t.conversationId,onClose:t.onClose,cameFromNux:t.cameFromNux,initialVoiceName:t.initialVoiceName})})})})}function Se({conversationId:t,initialVoiceName:a}){const s=L(),d=M(g.hasSeenAdvancedVoiceNuxFullPage),n=J(),i=n?.isPlus()??!1,u=n?.isEnterprisey()??!1,p=!i&&!u,r="https://help.openai.com/en/articles/8400625-voice-mode-faq#h_c5d6fe534b",[l,m]=o.useState(!1),[f,j]=o.useState(!1),[v,S]=o.useState(!1),[b,V]=o.useState(!0);o.useEffect(()=>{requestAnimationFrame(()=>j(!0))},[]);const F=()=>{S(!0),N.voiceAdvancedDisclosureAccepted.click(),m(!0),setTimeout(async()=>{V(!1)},re)},h=()=>{d.markAsViewed()},x=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(te,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"TFfx7w",defaultMessage:"Natural conversations"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"qR+v5Q",defaultMessage:"Senses and responds to interruptions, humor, and more."})})]})]}),C=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ae,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"br49Gd",defaultMessage:"Free monthly preview"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"LhOfga",defaultMessage:"Use advanced voice for a short period each month."})})]})]}),k=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(oe,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"84QiAT",defaultMessage:"Multiple voices"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"yYgwEW",defaultMessage:"Offers an expanded set of voices to choose from."})})]})]}),y=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ne,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"M/x7uJ",defaultMessage:"Personalized to you"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"QZXq7u",defaultMessage:"Can use memory and custom instructions to shape responses."})})]})]}),A=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ie,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"e6n5kr",defaultMessage:"You’re in control"})}),e.jsx("p",{className:"text-token-text-secondary",children:u?e.jsx(I,{id:"4szv66",defaultMessage:"Your audio recordings are saved but not used for training. Learn how to <link>manage recordings</link>.",values:{link:c=>e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"underline",children:c})}}):e.jsx(I,{id:"M/k4S5",defaultMessage:"Audio recordings are saved, and you can delete them at any time. Learn how to <link>manage recordings</link>.",values:{link:c=>e.jsx("a",{href:r,target:"_blank",rel:"noopener noreferrer",className:"underline",children:c})}})})]})]}),_=p?[C,x,y,A]:[x,k,y,A];return e.jsxs(e.Fragment,{children:[e.jsx(Y,{isOpen:l,onClose:h,conversationId:t,cameFromNux:!0,initialVoiceName:a}),e.jsx(z,{isOpen:b,onClose:h,type:"success",size:"fullscreen",className:`bg-white transition-opacity duration-300 dark:bg-gray-800 ${f&&!v?"opacity-100":"opacity-0"}`,showOverlayBackground:!1,children:e.jsxs("div",{className:"mx-auto flex h-full w-full max-w-lg flex-col items-center justify-center px-4 text-center",children:[e.jsx("h1",{className:"mb-9 text-2xl font-semibold text-token-text-primary",children:p?s.formatMessage({id:"XV3+9K",defaultMessage:"Sneak a peek at advanced voice mode"}):s.formatMessage({id:"9YnxDX",defaultMessage:"Say hello to advanced voice mode"})}),e.jsx("div",{className:"mb-9 space-y-5",children:_.map((c,P)=>e.jsx("div",{children:c},P))}),e.jsxs("p",{className:"mb-9 text-sm text-token-text-primary",children:[s.formatMessage({id:"vtcf3s",defaultMessage:"Voice mode can make mistakes — check important info."}),e.jsx("br",{}),s.formatMessage({id:"4nw2S2",defaultMessage:"Usage limits may change."})]}),e.jsx(Z,{className:"rounded-full bg-token-text-primary px-20 py-3 font-semibold",onClick:F,children:e.jsx(I,{id:"ppi93b",defaultMessage:"Continue"})})]})})]})}const ke={default_voice_mode:"advanced",modes:[{mode:"advanced",default_model_slug:fe,disabled_mode_metadata:null,description:"Advanced Voice Mode",display_name:"Advanced Voice",info_message:{actions:[],buttons:[],hint:"Advanced Voice",message_markdown:"Advanced Voice",message:"Advanced Voice",title:"Advanced Voice",display_at_launch:!1},disclosure_message:null,resets_after:"None"}],chatreq_token:"default"};function we(){const t=O("2775516364").value,a=M(g.hasSeenAdvancedVoiceNuxFullPage);return!a.isLoading&&a.eligible&&t}function Ne(){const t=O("562926978").value,a=q()?g.hasSeenAdvancedVoiceWebNuxTooltip:g.hasSeenAdvancedVoiceRealWebNuxTooltip,s=M(a);return{shouldShowTooltipNux:!s.isLoading&&s.eligible&&t,tooltipAnnouncement:s,announcementKey:a}}function Te({clientThreadId:t,gizmoId:a}){const s=$(t),n=L().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),[i,u]=o.useState(!1),[p,r]=o.useState(!1),l=we(),{shouldShowTooltipNux:m,tooltipAnnouncement:f,announcementKey:j}=Ne(),v=he(),S=s??t,b=xe(w=>w.isVoiceModeActive);o.useEffect(()=>{l||r(!1)},[l]);const{shouldShowComposerSnowflake:V,composerStrawAnnouncement:F,showSnowflake:h,setShowSnowflake:x,enableFadeInBoldIcon:C,setEnableFadeInBoldIcon:k,initialVoiceName:y,setInitialVoiceName:A,showVoicePicker:_,setShowVoicePicker:c,hasShownSnowflake:P,setHasShownSnowflake:Q}=ve(),G=o.useCallback(async()=>{if(K.logEvent(U.composerSpeechButtonClicked),m&&f.markAsViewed(),h)if(A(de),N.strawComposerSnowflake.click(),l){N.voiceAdvancedDisclosureShown.success(),r(!0);return}else{c(!0);return}if(l){N.voiceAdvancedDisclosureShown.success(),r(!0);return}let w;u(!0);try{w=await v({conversation_id:s??null,requested_voice_mode:"advanced",gizmo_id:a??null},"composer_speech_button")}finally{u(!1)}const E=w??ke;ge.setState(D=>{D.voiceStatus=E,D.isVoiceModeActive=!0})},[m,h,l,f,A,c,v,s,a]);o.useEffect(()=>{if(V&&!P){const w=setTimeout(()=>{x(!0),k(!1),N.strawComposerSnowflake.success()},R),E=setTimeout(()=>{x(!1),k(!0),F.markAsViewed()},R+ue);return()=>{clearTimeout(w),clearTimeout(E)}}else k(!1),x(!1)},[F,P,k,x,V]);const B=ee().resolvedTheme==="dark";return e.jsx(e.Fragment,{children:p?e.jsx(Se,{conversationId:S,initialVoiceName:y}):_?e.jsx(Y,{isOpen:_,onClose:()=>{c(!1),Q(!0)},conversationId:S,cameFromNux:!0,initialVoiceName:y}):e.jsx("div",{className:"relative h-8 w-8",children:e.jsx(je,{showNuxTooltip:m,tooltipAnnouncement:f,announcementKey:j,children:e.jsx(T.div,{initial:{background:B?"linear-gradient(180deg, #FFF 0%, #FFF 100%)":"linear-gradient(180deg, #000 0%, #000 100%)"},animate:{background:h?"linear-gradient(180deg, #377FF6 0%, #B4DAFF 100%)":B?"linear-gradient(180deg, #FFF 0%, #FFF 100%)":"linear-gradient(180deg, #000 0%, #000 100%)"},transition:{duration:.5,ease:"easeInOut"},className:"flex h-full w-full items-center justify-center rounded-full",children:e.jsx("button",{"data-testid":"composer-speech-button",onClick:G,"aria-label":n,disabled:b||i,className:"relative flex h-8 w-8 items-center justify-center rounded-full text-white transition-colors hover:opacity-70 focus-visible:outline-none focus-visible:outline-black disabled:text-[#f4f4f4] disabled:opacity-30 dark:text-black",children:e.jsx("div",{className:"relative h-full w-full",children:e.jsx(H,{mode:"wait",children:h?e.jsx(T.div,{initial:{opacity:0,scale:.5,rotate:0},animate:{opacity:1,scale:1,rotate:360},exit:{opacity:0,scale:.5},transition:{opacity:{duration:.5},scale:{duration:.3,ease:"easeInOut"},rotate:{duration:24,ease:"linear"}},className:"absolute inset-0 flex items-center justify-center",children:i?e.jsx(W,{}):e.jsx(ce,{})},"snowflake"):e.jsx(T.div,{initial:C?{opacity:0,scale:.5}:{},animate:C?{opacity:1,scale:1}:{},exit:{opacity:0,scale:.5},transition:{opacity:{duration:.5},scale:{duration:.3,ease:"easeInOut"}},className:"absolute inset-0 flex items-center justify-center",children:i?e.jsx(W,{}):e.jsx(le,{})},"voiceBoldIcon")})})})})})})})}function je({children:t,showNuxTooltip:a,tooltipAnnouncement:s,announcementKey:d}){const n=L();return a?e.jsx(me,{announcementKey:d,theme:"bright",side:"top",show:!0,badge:"new",dismissOnOutsideClick:!0,title:n.formatMessage({id:"DQ6CAP",defaultMessage:"Try advanced voice mode"}),contentAlign:"center",onDismiss:s.markAsViewed,sideOffset:2,children:e.jsx("div",{children:t})}):e.jsx(se,{sideOffset:4,label:n.formatMessage({id:"i4P/ix",defaultMessage:"Use voice mode"}),side:"top",onOpenChange:i=>{i&&(K.logEvent(U.composerSpeechButtonHovered),N.composerSpeechButton.hover())},children:t})}export{Te as ComposerSpeechButton};
//# sourceMappingURL=cuphosxumfr7z0mh.js.map
