import{r as n,gX as D,l as R,m as a,g as B,ho as F,cd as Z,aD as m,G as W,aJ as _}from"./llbrkjesn4fy8q4c.js";import{iC as $,iD as G,iE as A,iF as L,iG as q,iH as U,fM as J,iI as K}from"./cos8e48aelizd7fm.js";import{g as Q,s as X}from"./ojt2wrb4yexygybl.js";import{A as Y,g as z,C as j,a as I,b as C,c as P,D as O}from"./ldpzakis1dq4n8j8.js";import{i as ee,bs as te}from"./oqbc6ah0gwwjqrkd.js";import{a as E}from"./lpx64ww748dqjsob.js";import{_ as ae}from"./isjdmfmhzv09v01t.js";import{m as w}from"./m2bh5x759u52lj5z.js";import"./g4zaoz8y5nfpfdmm.js";import"./b92q8lo30mpzmm1s.js";const oe=({onScroll:t,textdocId:e})=>{const s=$(e),{windowWidth:l}=D(x=>x,{windowWidth:0,windowHeight:0});if(!s)return null;const{versions:r}=s,o=R(r),h=G(o),i=P({isReadonlyFromQueryParam:!0});let c=null;switch(o?.type){case L.DOCUMENT:c=a.jsx(I,{value:o.content,comments:[],isRequestActive:h,isPreview:!0,isDisabled:!0,hideAccelerators:!0,commentsMode:j.ALL_HIDDEN,readonlyReason:i,hideToolbar:!0,hideEditOverlay:!0,width:l,modelCursor:o.modelCursor});break;default:o&&A(o.type)&&(c=a.jsx(Y,{id:"codemirror",currentlyStreamingLineIndex:null,language:z(o.type),value:o.content,commentsMode:j.ALL_HIDDEN,hideToolbar:!0,hideAccelerators:!0,readonlyReason:i,comments:[],isRequestActive:h}))}return a.jsx(C,{children:a.jsx(C.Content,{onScroll:t,children:c})})},re=n.memo(oe);var ne=ae,se=q,M=F,le=parseFloat,ie=Math.min,de=Math.random;function ce(t,e,s){if(s&&typeof s!="boolean"&&se(t,e,s)&&(e=s=void 0),s===void 0&&(typeof e=="boolean"?(s=e,e=void 0):typeof t=="boolean"&&(s=t,t=void 0)),t===void 0&&e===void 0?(t=0,e=1):(t=M(t),e===void 0?(e=t,t=0):e=M(e)),t>e){var l=t;t=e,e=l}if(s||t%1||e%1){var r=de();return ie(t+r*(e-t+le("1e-"+((r+"").length-1))),e)}return ne(t,e)}var me=ce;const he=B(me),xe=t=>n.createElement("svg",{width:20,height:17,viewBox:"0 0 20 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M0 7.5C0 6.67157 0.671573 6 1.5 6H3.83C4.65843 6 5.33 6.67157 5.33 7.5V15.5C5.33 16.3284 4.65843 17 3.83 17H1.5C0.671572 17 0 16.3284 0 15.5V7.5Z",fill:"#10A37F"}),n.createElement("path",{d:"M14.67 5.5C14.67 4.67157 15.3416 4 16.17 4H18.5C19.3284 4 20 4.67157 20 5.5V15.5C20 16.3284 19.3284 17 18.5 17H16.17C15.3416 17 14.67 16.3284 14.67 15.5V5.5Z",fill:"#10A37F"}),n.createElement("path",{d:"M7.33 1.5C7.33 0.671573 8.00157 0 8.83 0H11.17C11.9984 0 12.67 0.671573 12.67 1.5V16C12.67 16.5523 12.2223 17 11.67 17H8.33C7.77772 17 7.33 16.5523 7.33 16V1.5Z",fill:"#10A37F"})),fe=t=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",...t},n.createElement("path",{fillRule:"evenodd",d:"M14.447 7.106a1 1 0 0 1 .447 1.341l-4 8a1 1 0 1 1-1.788-.894l4-8a1 1 0 0 1 1.341-.447ZM6.6 7.2a1 1 0 0 1 .2 1.4L4.25 12l2.55 3.4a1 1 0 0 1-1.6 1.2l-3-4a1 1 0 0 1 0-1.2l3-4a1 1 0 0 1 1.4-.2Zm10.8 0a1 1 0 0 1 1.4.2l3 4a1 1 0 0 1 0 1.2l-3 4a1 1 0 0 1-1.6-1.2l2.55-3.4-2.55-3.4a1 1 0 0 1 .2-1.4Z",clipRule:"evenodd"})),ge=t=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("rect",{x:2,y:4,width:20,height:16,rx:3,fill:"#007AFF"}),n.createElement("path",{d:"M8 10H16",stroke:"white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),n.createElement("path",{d:"M8 14H12",stroke:"white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),ue=t=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("rect",{x:2,y:4,width:20,height:16,rx:4,fill:"#FF5C00"}),n.createElement("path",{d:"M8 14L10.8 11L13.2 13L16 10",stroke:"white",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),we=t=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},n.createElement("path",{d:"M2 11H11V20H5C3.34315 20 2 18.6569 2 17V11Z",fill:"#10A37F"}),n.createElement("path",{d:"M13 11H22V17C22 18.6569 20.6569 20 19 20H13V11Z",fill:"#10A37F"}),n.createElement("path",{d:"M5 4C3.34315 4 2 5.34315 2 7V9H22V7C22 5.34315 20.6569 4 19 4H5Z",fill:"#10A37F"}));function pe(t,e){switch(t){case"presentation":return a.jsx(ue,{});case"table":return a.jsx(we,{});case"chart":return a.jsx(xe,{});case L.DOCUMENT:return a.jsx(ee,{className:m("icon-md",{"text-token-text-primary":e,"text-token-text-tertiary":!e})});default:return A(t)?a.jsx(fe,{className:m("icon-md",{"text-token-text-primary":e,"text-token-text-tertiary":!e})}):a.jsx(ge,{})}}const be=({isHovered:t=!1})=>{const e=W();return a.jsx(_,{label:e.formatMessage({id:"KMbgyZ",defaultMessage:"Open in canvas"}),children:a.jsx(w.div,{role:"button",animate:{opacity:t?1:.64},whileHover:{opacity:1},transition:{type:"tween",duration:.18},className:"text-token-text-secondary transition-colors",children:a.jsx(te,{className:"icon-md"})})})},ye=({isCanvasOpen:t,isFocused:e,isHovered:s,isInlinePreview:l,size:r})=>t?e?"0px 2px 6px 0px rgba(0, 0, 0, 0.06)":"0px 2px 6px 0px rgba(0, 0, 0, 0)":l?s||e?`0px ${r==="large"?12:4}px ${r==="large"?32:10}px 0px rgba(0, 0, 0, 0.064)`:`0px ${r==="large"?6:4}px ${r==="large"?14:4}px 0px rgba(0, 0, 0, 0.04)`:"0px 2px 6px 0px rgba(0, 0, 0, 0)",ve=({textdocId:t,isInlinePreview:e=!1,isStreaming:s=!1,isDisabled:l=!1,isFocused:r=!1,isCanvasOpen:o=!1,marginBottom:h,size:i="large",onClick:c,children:x,name:u,type:f})=>{const g=n.useRef(null),[d,p]=n.useState(!1),[H]=n.useState(()=>he(100,180,!1)),{resolvedTheme:N}=Z(),b=N==="dark",T=f?a.jsx("span",{className:m("flex-shrink-0 transition-[filter]",{grayscale:!r&&!d}),children:pe(f,r&&o)}):a.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center overflow-hidden",children:a.jsx(E,{lines:1,size:"base",width:100,widthVariance:0})}),S=u?a.jsx("span",{className:"min-w-0 truncate",children:u}):a.jsx("div",{className:"flex h-5 flex-grow items-center overflow-hidden",style:{width:H},children:a.jsx(E,{lines:1,size:"base",width:100,widthVariance:0})}),y=s&&a.jsx(U,{size:20,className:m("flex-shrink-0",r?"text-blue-selection":"text-token-text-secondary")}),V=()=>{!g.current||l||(J.logButtonClick(K.MESSAGE_ATTACHMENT,{type:f}),X(g.current),c?.())},v=i==="large"?100:50,k=`${b?"rgba(0,0,0,0)":"rgba(255,255,255,0)"}, ${b?"#2f2f2f":"#ffffff"}`;return a.jsxs(w.div,{role:"button",id:Q(t),initial:{opacity:s?0:1,scale:s?.9:1},animate:{opacity:1,scale:1},transition:{type:"spring",bounce:0,duration:.72},className:m("popover relative flex select-none flex-col overflow-hidden border bg-token-main-surface-primary transition-shadow duration-500",l?"cursor-default":"cursor-pointer",{"border-token-text-tertiary font-medium dark:border-gray-600":r&&o,"font-regular":!r,"border-token-border-light":!d&&!r,"border-token-border-medium":d&&!r,"flex min-w-0 max-w-full flex-shrink flex-grow-0 items-center justify-between self-start rounded-xl":o||!e,"w-full rounded-2xl":!o&&e}),onMouseEnter:()=>!l&&p(!0),onMouseLeave:()=>p(!1),onClick:V,ref:g,style:{marginBottom:h,height:o||!e?void 0:i==="large"?"24rem":"10rem",width:i==="small"?"300px":void 0,boxShadow:ye({isCanvasOpen:o,isFocused:r,isHovered:d,isInlinePreview:e,size:i})},children:[a.jsxs("div",{className:m("flex w-full min-w-0 items-center justify-between gap-2 self-start border-token-border-light px-4 transition-colors duration-700",{"border-token-border-light":!d&&!r,"border-token-border-medium":d&&!r,"text-sm font-medium text-token-text-primary":!o&&d&&e,"py-2":o||!e,"py-3":!o&&e,"text-sm font-medium text-token-text-secondary":!o&&!d&&e}),children:[a.jsxs("div",{className:m("flex min-w-0 items-center",{"gap-2":o||!e,"gap-3.5":!o&&e}),children:[T,S]}),o?a.jsx(w.span,{animate:y?"show":"initial",variants:{initial:{opacity:0,paddingLeft:0,width:"0"},show:{opacity:1,paddingLeft:2,width:"24px"}},transition:{type:"tween",duration:.18},children:y}):e&&!l?a.jsx(be,{isHovered:d}):null]}),a.jsxs("div",{className:"relative flex min-h-0 w-full flex-1 flex-col self-end",children:[!o&&x,e&&!o&&a.jsx("div",{className:"absolute bottom-0 z-20 h-24 w-full transition-colors",style:{height:v,background:`linear-gradient(${k})`}}),e&&i==="small"&&!o&&a.jsx("div",{className:"absolute bottom-0 right-0 top-0 z-20 transition-colors",style:{width:v,background:`linear-gradient(to right, ${k})`}})]})]})},Se=({type:t,name:e,isStreaming:s=!1,isFocused:l=!1,onClick:r,textdocId:o,isFetching:h=!1,isCanvasOpen:i=!1,isInlinePreview:c=!1})=>{const[x,u]=n.useState(!1),f=d=>{u(d>0)},g=i||!c?12:!i&&c?16:void 0;return a.jsx(ve,{name:e,isFocused:l,isCanvasOpen:i,textdocId:o,type:t,isInlinePreview:c,isStreaming:s,onClick:r,marginBottom:g,children:c&&a.jsx("div",{className:m("relative flex min-h-0 flex-auto flex-col overflow-hidden border-t transition-colors",{"border-token-border-light":x,"border-transparent":!x}),children:h?a.jsx(O,{}):!!o&&a.jsx(re,{onScroll:f,textdocId:o})})})};export{Se as CanvasMessageAttachment,ve as CanvasMessageAttachmentWrapper};
//# sourceMappingURL=mqge9qcwx5nztqy9.js.map
