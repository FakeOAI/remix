const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/bgyt9sv6440g8wnz.js","assets/nqo5y2f0dorhrqsr.js","assets/ea44aepkxmyz26n5.js","assets/root-il8atsax.css","assets/hy4pnhpks2qtkjnf.js","assets/bsmsu7atvs04jstd.js","assets/fn7uhkmkudh3vw3f.js","assets/conversation-small-ile61fj8.css","assets/gg3yq1dwjx7pu1s5.js","assets/dojh9c2da7skqh96.js","assets/8ppp1sdy504xj70e.js","assets/odnwzlaampp2fkds.js","assets/jnhvhco5sgjisq8y.js","assets/j1gkbzsjv0ofwuht.js"])))=>i.map(i=>d[i]);
import{j as e,c as M,r as x,ae as U,af as Se,L as ee,M as _,e as je}from"./nqo5y2f0dorhrqsr.js";import{gZ as ve,jh as H,bP as ye,cc as Ce,gW as se,hS as Ie,fY as Ne,dz as D,dx as ke,aQ as te,cQ as Me,ji as O,eM as ze,jj as Fe,jk as Te,eS as Oe,dA as ne,jl as Ee,b6 as J,dB as _e,cg as ae,jm as we,ff as Ge,U as ie,fQ as Le,eN as Pe,jn as Ae,cu as Be,cv as Re,cq as K,cY as He,aW as De,jo as Ue,jp as T,cp as V,I as p,cI as oe,dC as We,H as re,dD as Ke,cx as ce,jq as Ve,K as Qe,jr as qe,js as Ye,jt as Ze,ju as $,ep as Je,jv as Q,aD as G,jw as le,jx as $e,jy as W,jz as E,cC as Xe,eq as es,br as ss,jA as ts,aE as ns,bU as as,jB as is,z as os,jC as rs,E as cs,bN as ls,jD as ds,jE as de,J as ms,jF as us,c9 as xs}from"./fn7uhkmkudh3vw3f.js";import{aS as q,aT as Y,el as me,j as Z,be as L,F as ue,dW as fs,cB as xe,at as y,N as A,S as hs,al as gs,cR as ps,ci as bs,d5 as Ss,b0 as fe,gM as j,gN as js,bP as vs,bQ as ys,fI as Cs,dM as P,aV as Is}from"./ea44aepkxmyz26n5.js";import{u as w,d as Ns}from"./gg3yq1dwjx7pu1s5.js";import{U as ks,P as Ms}from"./dojh9c2da7skqh96.js";const zs=q(()=>Y(()=>import("./bgyt9sv6440g8wnz.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(he,{color:s})}),Fs={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function Ts({color:s,folderState:n,gizmoId:t,sidebarSnorlaxFolderStore:o}){const a=M(),[d,i]=x.useState(!1);return e.jsx(L,{side:"top",sideOffset:4,delayDuration:600,label:n==="open"?a.formatMessage(J.hideChatsForProjectTooltip):a.formatMessage(J.showChatsForProjectTooltip),children:e.jsx("button",{onClick:m=>{m.preventDefault(),n==="open"?o.collapseProject(t):o.expandProject(t)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(zs,{isOpen:n==="open",isHovered:d,color:s})})})})})}function he({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:e.jsx(ve,{className:"h-3/4 w-3/4",style:{color:s}})})}function Os({gizmo:s,historyDisabled:n,section:t,onClick:o,isActive:a,hideOverflowMenu:d=!1,elementRef:i}){const{clientThreadId:m}=w(),f=me(m),h=M(),[u,b]=x.useState(!1),[c,r]=x.useState(!1),l=s.gizmo.id,g=H.useStore(),S=H.useState(F=>H.selectFolderState(F,l)),I=Z(),B=!!s.gizmo.tags?.includes(ye.FirstParty),{items:k=[],hasNextPage:R}=Ce(s.gizmo.id),N=se(l),z=Ie(l);let v=!1;a&&N&&!(S==="open"&&f)&&(v=!0),x.useEffect(()=>{S!=="open"&&a&&f&&g.expandProject(l)},[a,f,g,l]);let C;if(s!=null)C=s.gizmo.display.name||Ne;else{if(I==null)return null;n?C=h.formatMessage(D.clearChat):I.canInteractWithGizmos()?C=_e:C=h.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(U.div,{whileTap:{scale:.98},onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)},children:e.jsx(ke,{loggingGizmoId:s?.gizmo.id??"primary",href:te(s),onClick:o,showActiveIndicator:v,icon:N&&k.length>0?e.jsx(Ts,{color:z,folderState:S,gizmoId:l,sidebarSnorlaxFolderStore:g}):N?e.jsx(he,{color:z}):e.jsx(Me,{isFirstParty:B,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:u,label:C,rightIcon:t===O.Workspace&&e.jsx(L,{side:"right",label:h.formatMessage(X.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"}),children:e.jsx(ze,{className:"icon-md text-token-text-secondary",alt:h.formatMessage(X.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(c||u)&&!d&&(N?e.jsx("div",{className:"text-token-text-tertiary",onClick:F=>{F.preventDefault()},children:e.jsx(Fe,{gizmo:s,isOpen:u,setIsOpen:b})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:F=>{F.preventDefault()},children:e.jsx(Te,{gizmo:s,isOpen:u,setIsOpen:b,section:t})})),!N&&!d&&e.jsx(L,{side:"right",label:h.formatMessage(n?D.clearChat:D.newChat),className:"flex items-center",children:e.jsx("button",{className:u?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(Oe,{className:"icon-md"}):e.jsx(ne,{className:"icon-md"})})})]}),elementRef:i})}),e.jsx(Se,{initial:!1,children:N&&S==="open"&&k.length>0&&e.jsx(U.div,{initial:"closed",animate:"open",exit:"closed",variants:Fs,className:"overflow-hidden",children:e.jsx(Ee,{gizmoResource:s,serverThreadId:f,isOnProjectPage:v,conversations:k,hasNextPage:R})},"nested-conversations")})]})}const X=ue({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function Es(s){const{clientThreadId:n}=w(),t=x.useRef(s);t.current=s;const o=x.useRef(null);x.useEffect(()=>{const a=o.current;return o.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function ge(){const s=M(),n=ae(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(we,{children:e.jsx(U.div,{whileTap:{scale:.98},children:e.jsx(ee,{to:Ge(),onClick:()=>{n.activeSidebar==="popover-nav"&&ie.setActiveSidebar(!1)},children:e.jsx(Le,{icon:Pe,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const _s=2;function pe({gizmos:s,isGizmoFlyout:n,isLoaded:t,maxToShowOnLoad:o=4,isScreenArch:a,showAllSidebarItems:d}){const i=Ue(s,r=>r.flair.kind),m=[...(i[T.Workspace]?.map(({resource:r})=>({gizmo:r,section:O.Workspace}))??[]).slice(0,3),...i[T.FirstParty]?.map(({resource:r})=>({gizmo:r,section:O.Keep}))??[],...i[T.SidebarKeep]?.map(({resource:r})=>({gizmo:r,section:O.Keep}))??[]],f=i[T.Recent]?.slice(0,a||t?i[T.Recent]?.length:_s).map(({resource:r})=>({gizmo:r,section:O.Recents}))??[],h=f.length,u=m.length,b=a?h>0:s.length>o;let c=[];return n&&a?c=[...m,...f]:!n&&a?c=m:(c=[...m,...f],d||(c.length>o&&u>o?c=c.slice(0,u):c.length>o&&(c=c.slice(0,o)))),{listItems:c,itemsLeft:s.length-c.length,needsToCollapseItems:b,total:s.length}}function be({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:o=!1}){const a=x.useRef(!1),d=!t,i=fs(),[m,f]=x.useState(!1),h=ae(l=>!Ae.isGptListCollapsed(l)),{listItems:u,needsToCollapseItems:b,itemsLeft:c}=pe({gizmos:s,isGizmoFlyout:d,isLoaded:m,maxToShowOnLoad:t,isScreenArch:i,showAllSidebarItems:h});x.useEffect(()=>{m||f(!0)},[m]),x.useEffect(()=>{u.length>0&&!a.current&&(Be({namespace:Re.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),a.current=!0)},[u]);function r(l,g){const S=e.jsx(Os,{gizmo:l,isActive:l.gizmo.id===n,section:g,hideOverflowMenu:o},l.gizmo.id);return i?e.jsx("li",{children:S}):S}return e.jsxs("div",{children:[u.map(({gizmo:l,section:g},S)=>e.jsxs(x.Fragment,{children:[S>1&&g!==u[S-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),r(l,g)]},S)),!i&&b?e.jsxs("button",{onClick:ie.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(K,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:h?e.jsxs(e.Fragment,{children:[e.jsx(_,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(He,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:c}}),e.jsx(De,{className:"icon-xs"})]})})]}):null,!i&&e.jsx(ge,{})]})}function ws({currentGizmoId:s,gizmos:n,onClick:t}){const{isSidebarFlyoutOpen:o,onSidebarFlyoutOpenChange:a}=V(),d=o(p.Gizmo),i=oe();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(xe,{onOpenChange:m=>a(p.Gizmo,m),side:i?"bottom":"right",sideOffset:4,open:d,contentAlign:"end",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",d&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(K,{className:y("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(A,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(be,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function Gs({currentGizmoId:s}){const{data:{gizmos:n}={}}=We();let t=n;re()&&(t=n?.filter(d=>!Ke(d.resource)));const{needsToCollapseItems:a}=pe({gizmos:t??[],isLoaded:!1,isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(ce,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(_,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(ge,{}),e.jsx(be,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:Ve}),a&&e.jsx(A,{children:e.jsx(ws,{currentGizmoId:s,gizmos:t??[]})})]})})}function Ls({onClick:s}){const{clientThreadId:n}=w(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:o}=V(),a=oe(),d=t(p.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(xe,{onOpenChange:i=>{i&&hs.logEvent("chatgpt_web_more_conversation_history_opened"),o(p.Conversation,i)},side:a?"bottom":"right",sideOffset:4,open:d,contentAlign:"start",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",d&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(K,{className:y("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(A,{children:e.jsx(Qe,{activeId:n,hideOverflowMenu:!0})})})})})}function Ps({clientThreadId:s}){const n=me(s),t=gs(),{isCollapsible:o,recentConversationLimit:a}=qe(),d={recentConversationLimit:a},i=x.useRef(!1),m=!0,{conversations:f,data:h,isLoading:u,isError:b,recents:c,refetch:r}=Ye(d),[l,g]=x.useState(!0),S=x.useCallback(function(C){C===void 0&&g(!1),r({cancelRefetch:!0})},[r,g]),I=t?void 0:n,B=f.length===0,k=b||h===void 0&&!u&&i.current,R=!k&&(h===void 0||u);h===void 0&&!u&&!i.current&&(i.current=!0,S(!0));const z=f.find(v=>v.id===I)??null;return x.useMemo(()=>{ps.publish({kind:"refreshHistory",conversations:f})},[f]),e.jsxs(e.Fragment,{children:[k&&e.jsx(Ze,{showRetry:l,refetch:S}),!B&&e.jsxs(ce,{header:c.label,isLastInGroup:!0,children:[c.items.map((v,C)=>e.jsx($,{item:v,isActive:v.id===I,testId:`history-item-${C}`},v.id)),z&&!c.items.some(v=>v.id===I)&&e.jsx($,{item:z,isActive:!0})]}),R&&e.jsx(bs,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),o&&e.jsx(A,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!m,className:y(!m),children:e.jsx(Ls,{})})})})]})}const As=q(()=>Y(()=>import("./bsmsu7atvs04jstd.js"),__vite__mapDeps([5,1,6,2,3,7,8,9])).then(s=>s.SnorlaxSidebarList));function Bs({clientThreadId:s}){const n=Z(),t=Ss(s),{isUnauthenticated:o}=fe(),a=re();return o?null:e.jsxs("div",{className:y(j.screenContent,"group/sidebar"),children:[a&&e.jsx(As,{currentGizmoId:t}),null,e.jsx(Ps,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(Gs,{currentGizmoId:t}):null]})}function Rs(){const s=Z(),n=s?.data==null,{isUnauthenticated:t}=fe(),{openSettings:o}=Je(),a=js(),[d]=x.useState(()=>{const r=vs.getCookie(ys.Workspace);return typeof r=="string"&&r!==Cs}),i=M(),{store:m,actions:f}=Q(),h=m(r=>r.mode),[u,b]=x.useState(!0);if(x.useEffect(()=>{b(!1)},[]),!s&&u||d&&n)return null;const c=t?e.jsx(ks,{}):e.jsx(Ns,{onClickSettings:()=>o()});return e.jsxs(G,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[c,a.get("include_floating_state",!1)&&e.jsx("div",{className:j.togglePinWrapper,children:e.jsx(le,{tooltipSideOffset:14,className:j.pinSidebarAction,icon:e.jsx($e,{}),onActivate:r=>{r.preventDefault(),r.persist(),W.togglePinSidebar(r,f,h===E.Floating?E.Pinned:E.Floating)},label:h===E.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:P.FloatingOrPinned})})]})}function Hs(){return e.jsx(G,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Ms,{})})}function Ds(){return e.jsxs(Xe,{className:y(j.screenTrailingBarContainer),children:[e.jsx(es,{}),e.jsx(Hs,{}),e.jsx(Rs,{})]})}function Us({onNewThread:s}){const n=M(),t=je(),{clientThreadId:o}=w(),a=ss(o),d=a?ts(a):void 0,i=d?te(d):void 0,m=se(d?.gizmo.id),f=n.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return e.jsx(L,{label:f,children:e.jsx(ee,{to:i??"/",onClick:async h=>{h.preventDefault(),!m&&i!=null?ns(t,i):s()},tabIndex:-1,children:e.jsx(as,{icon:e.jsx(ne,{className:j.sidebarIcon}),className:j.searchAction,label:f,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const Ws=q(()=>Y(()=>import("./8ppp1sdy504xj70e.js"),__vite__mapDeps([10,1,6,2,3,7,11,12,13])).then(s=>s.FannyPackIconButton));function Ks({onNewThread:s}){const n=M(),t=x.useRef(null),{store:o,actions:a}=Q(),d=o(l=>l.isSidebarOpen),i=o(l=>l.mode),{isSidebarFlyoutOpen:m}=V(),f=m(p.Conversation),h=m(p.Gizmo),u=m(p.Snorlax),b=d&&!f&&!h&&!u;function c(){de(t.current)&&document.getElementById(P.OpenOrClosed)?.click()}is({checkElement:l=>l?.tagName==="NAV",enabled:b,onLightDismiss:c});const{isFannyPackEnabled:r}=os();return Is(),e.jsxs(e.Fragment,{children:[e.jsx(G,{type:"primary",className:y(j.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(le,{className:y(j.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:l=>{W.closeSidebar(l,a,i)},onActivate:l=>{W.closeSidebar(l,a,i)},icon:e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:y(j.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(cs,{className:y(j.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(Vs.closeSidebar),htmlFor:P.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,r&&e.jsx(ls,{children:e.jsx(Ws,{className:j.searchAction,icon:e.jsx(ds,{className:j.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx(Us,{onNewThread:s})]})]})}),e.jsx(G,{type:"primary",className:j.bucketBar,disableSizeTracking:!0,children:"Â "})]})}const Vs=ue({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function $s(){const{clientThreadId:s,onNewThread:n}=w(),[t,o]=x.useState(!1),[a,d]=x.useState(!1),[i,m]=x.useState(!1),{store:f}=Q(),h=x.useCallback(c=>c===p.Conversation?t:c===p.Gizmo?a:c===p.Snorlax?i:!1,[t,a,i]),u=x.useCallback((c,r)=>{const l=g=>{c===p.Conversation?o(g):c===p.Gizmo?d(g):c===p.Snorlax&&m(g)};r?l(!0):setTimeout(()=>{l(!1)},100)},[]),b=x.useRef(null);return Es((c,r)=>{u(p.Conversation,!1),u(p.Gizmo,!1),u(p.Snorlax,!1);const l=window.matchMedia("(max-width: 700px)").matches,g=de(b.current);r!=null&&l&&f.getState().isSidebarOpen&&(f.getState().mode===E.Floating||g)&&setTimeout(()=>{document.getElementById(P.OpenOrClosed)?.click()},100)}),e.jsxs(ms,{value:{isSidebarFlyoutOpen:h,onSidebarFlyoutOpenChange:u},children:[e.jsx(us,{}),e.jsx(xs,{anchor:"vertical",className:y(j.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Ks,{onNewThread:n}),ref:b,trackLeading:!0,trailing:e.jsx(Ds,{}),children:e.jsx(Bs,{clientThreadId:s})})]})}export{$s as C,Os as G,be as a};
//# sourceMappingURL=hsut84jr99ao5q4g.js.map
