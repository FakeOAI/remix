import{ag as o,ah as g}from"./hc0go6t8u8it292j.js";import{bh as c,c as m,bl as n,aZ as p,a_ as S,P as r,b as v,a8 as w,r as u,dA as D}from"./du9ygo55hccsm0ec.js";import{b as h}from"./kwyhm54wtm4zbkpo.js";var L=(e=>(e.DownloadMessages="download-messages",e.InviteUsersToWorkspace="invite-users-to-workspace",e.WorkspaceAppearance="workspace-appearance",e.KeyboardActions="keyboard-actions",e.UserContext="user-context",e.WorkspaceSwitcher="workspace-switcher",e.ReadOnlyConversationTemplate="read-only-conversation-template",e.CookieManagement="cookie-management",e.AgeVerificationInterstitial="age-verification-interstitial",e.GPTDetails="gpt-details",e.GPTPrivacySettings="gpt-privacy-settings",e.GPTFeedbackEmail="gpt-support-email",e.GPTReview="gpt-review",e.GPTRemoveThirdParty="gpt-remove-third-party",e.SharedConversationModeration="shared-conversation-moderation",e.ReportConversation="report-conversation",e.BlockingInitialComponent="blocking-initial-component",e.NoAuthNewChat="no-auth-new-chat",e.GlobalMemoryOnboarding="global-memory-onboarding",e.AccountPayment="account-payment",e.CreateExclusion="create-exclusion",e))(L||{});const y=c.IsNavigationCollapsed,f=c.IsHistoryCollapsed,T=c.IsGptListCollapsed;function N(){const e=n.getItem(y)??!1;return p.setCookie(S.NavigationState,e?"0":"1",{maxAge:2**30}),{collapsed:e}}function P(){return p.getCookie(S.SidebarState)==="pinned"?o.Pinned:o.Floating}function l({collapsed:e}){n.setItem(y,e),p.setCookie(S.NavigationState,e?"0":"1",{maxAge:2**30})}function C(e){p.setCookie(S.SidebarState,e,{maxAge:2**30})}const t=m()(()=>({isThreadHeaderVisible:!0,isDesktopNavCollapsed:N().collapsed,isVoiceActive:!1,sharingModalThreadId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,chatThreadFlyout:{userPreferenceIsOpen:b()??!1,isOpen:b()??!1},activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,isHistoryShowMoreVisible:!0,sidebarState:P(),isHistoryCollapsed:n.getItem(f)??!0,isGptListVisible:!0,isGptListCollapsed:n.getItem(T)??!0,browseMode:"conversation"})),M={isThreadHeaderVisible:e=>e.isThreadHeaderVisible,isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible,isHistoryShowMoreVisible:e=>e.isHistoryShowMoreVisible,isGptListVisible:e=>e.isGptListVisible,isHistoryCollapsed:e=>e.isHistoryCollapsed,isGptListCollapsed:e=>e.isGptListCollapsed},d={setBrowseMode:e=>{t.setState(a=>({...a,browseMode:e}))},enterGizmoEditor:()=>{t.setState({browseMode:"gizmo-editor"})},exitGizmoEditor:()=>{t.setState({browseMode:"conversation"})},toggleGptListCollapsed:()=>{t.setState(e=>{const a=!e.isGptListCollapsed;return n.setItem(T,a),r.logToggleShowGptList({isCollapsed:a}),{isGptListCollapsed:a}})},toggleHistoryCollapsed:()=>{t.setState(e=>{const a=!e.isHistoryCollapsed;return n.setItem(f,a),r.logToggleShowRecents({isOnlyShowingRecents:a}),{isHistoryCollapsed:a}})},toggleNavSidebar:()=>{t.getState().activeStageSidebar?d.togglePopoverNavSidebar():d.toggleDesktopNavCollapsed()},togglePopoverNavSidebar:()=>{d.toggleActiveSidebar("popover-nav")},closePopoverNavSidebar:()=>{t.setState(e=>e.activeSidebar==="popover-nav"?{activeSidebar:void 0}:{})},setSidebarState:async e=>{switch(e){case o.Floating:t.setState({sidebarState:o.Floating}),await g.yield(),l({collapsed:!0}),C(o.Floating);break;case o.Pinned:t.setState({sidebarState:o.Pinned}),await g.yield(),l({collapsed:!1}),C(o.Pinned);break}},toggleDesktopNavCollapsed:e=>{t.setState(a=>{const s=e??!a.isDesktopNavCollapsed;return l({collapsed:s}),r.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:s}),{isDesktopNavCollapsed:s}})},openSidebar:()=>{t.getState().sidebarState===o.Pinned&&l({collapsed:!1}),r.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1}),t.setState({isDesktopNavCollapsed:!1})},closeSidebar:()=>{const e=document.querySelector("input[name='sidebar_closed']");e&&(e.checked=!0),t.getState().sidebarState===o.Pinned&&l({collapsed:!0}),r.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0}),t.setState({isDesktopNavCollapsed:!0})},hideThreadHeader:()=>{t.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{t.setState({isThreadHeaderVisible:!0})},openSharingModal(e,a){t.setState({sharingModalThreadId:e}),r.logEvent(v.shareConversationOpenModal,{location:a})},closeSharingModal(){t.setState({sharingModalThreadId:void 0})},openFeedbackModal(e){t.setState({feedbackModalThreadId:e})},closeFeedbackModal(){t.setState({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(e){t.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){t.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){t.setState({activeSidebar:e})},toggleActiveSidebar(e){t.setState(a=>({activeSidebar:a.activeSidebar===e?!1:e}))},closeActiveSidebar(){t.setState(()=>({activeSidebar:!1}))},setHistoryShowMoreVisible(e){t.setState({isHistoryShowMoreVisible:e})},setGptListVisible(e){t.setState({isGptListVisible:e})},setActiveStageSidebar(e){t.setState({activeStageSidebar:e})},toggleModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.has(e)?s.delete(e):s.add(e),{activeModals:s}})},openModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.add(e),{activeModals:s}})},closeModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.delete(e),{activeModals:s}})},closeAllActiveModals(){t.setState({activeModals:new Set})},hideLatencyDevTools:()=>{t.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{t.setState({isLatencyDevToolsVisible:!0})},openChatThreadFlyout:(e,a,s)=>{r.logEventWithStatsig(v.searchLinkSidebarShown,"search_links_sidebar_shown",h({turnIndex:a,clientThreadId:e,messageId:s})),k(!0),t.setState({chatThreadFlyout:{isOpen:!0,userPreferenceIsOpen:!0,turnIndex:a,messageId:s,clientThreadId:e}})},toggleChatThreadFlyout:(e,a,s)=>{const i=t.getState().chatThreadFlyout;e===i.clientThreadId&&a===i.turnIndex&&i.isOpen?d.closeChatThreadFlyout(e,s):d.openChatThreadFlyout(e,a,s)},closeChatThreadFlyout:(e,a)=>{r.logEventWithStatsig(v.searchLinkSidebarClosed,"search_links_sidebar_closed",h({clientThreadId:e,messageId:a})),k(!1),t.setState({chatThreadFlyout:{isOpen:!1,userPreferenceIsOpen:!1}})},temporaryCloseChatThreadFlyout:()=>{t.setState(e=>({chatThreadFlyout:{isOpen:!1,userPreferenceIsOpen:e.chatThreadFlyout.userPreferenceIsOpen}}))}};function V(e){return t(a=>a.activeModals.has(e))}function _(){return t(e=>e.chatThreadFlyout)}function H(){const{isUnauthenticated:e}=w(),a=u.useContext(D).getCookie(S.NavigationState),s=t(i=>i.isDesktopNavCollapsed);return e?!0:a?a==="0":s}function O(){const[e,a]=u.useState(!1),s=t(i=>i.activeModals);return u.useEffect(()=>{a(i=>i||s.has("blocking-initial-component"))},[s]),e}function b(){const e=n.getItem(c.ChatThreadFlyoutState);return e===void 0?null:e}function k(e){n.setItem(c.ChatThreadFlyoutState,e)}export{L as G,d as U,V as a,H as b,_ as c,M as d,O as e,t as u};
//# sourceMappingURL=156t2vs0ziqy5ta8.js.map
