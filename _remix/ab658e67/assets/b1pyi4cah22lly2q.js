const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/egiwluy0o9io16gu.js","assets/du9ygo55hccsm0ec.js","assets/ibjw18ivx5tw615x.js","assets/root-d4voymz4.css","assets/hc0go6t8u8it292j.js","assets/conversation-small-cll5buey.css","assets/gj6xeouxppgt6npy.js","assets/ndpe1ojbx7c3v18s.js","assets/m7ykldedawewofy8.js","assets/kl23pvq05rxrgvth.js","assets/kwyhm54wtm4zbkpo.js","assets/huj2tv4ji3im8uo0.js","assets/j2y7wsnqu61ya7iz.js","assets/g25rdt29bll4sk12.js","assets/156t2vs0ziqy5ta8.js","assets/hgeajy87cwg3r1m6.js","assets/e9lafxuzyeh4418f.js","assets/if45wgcplc4vea0y.js","assets/kb7xugd5kw771ze8.js","assets/jajzrlrmjppvuz8o.js","assets/koyiigs1bh3cqmq2.js","assets/mgmk61xedx50tz2y.js","assets/4kejfy36ysbrmoi8.js","assets/i241ashuzoz67842.js","assets/f0zfhvj0myt4b1v1.js","assets/d0s4um1rh2f7pgrr.js","assets/23yqn56dfa53achp.js","assets/ls8z0fgz00gw1alh.js","assets/g917upaeimfgkdh1.js","assets/gymcumd7hmh6bi1s.js","assets/mxtabnjz46g5s0cv.js","assets/n76fh2yxfraxsw30.js","assets/focy1c95cgqmv4o7.js","assets/igmk8bhhl98b6n5v.js","assets/itr9kuli5zrjmpey.js","assets/g3qlyev81q1nuv69.js","assets/d28r08o6ubsxmagb.js","assets/kvl6v3wn9q5374rs.js","assets/buez05obmqmatsz0.js","assets/j5wjh6rpg8sgmhl2.js","assets/mahlkymmmcl5d7ax.js","assets/o9yaharrxcbvpcdi.js","assets/kkcwo4e9fvsopl82.js","assets/gxdpxxoyr6t76g9h.js","assets/kqwdyvkaaavvn8k3.js","assets/jaayw0db1wxhxzj6.js","assets/ml96qbr3au57ovpu.js","assets/jtrvqvo9d6oquvbf.js","assets/et2uoyt3grzxr97o.js","assets/n5vdeh5q9wio907j.js","assets/mnredlbahj266zt5.js","assets/kvumw7oij2cm1aux.js","assets/ewtvnczlu0248tj1.js","assets/peuoegvyfhwgkarr.js","assets/gtd478z3zlcqmf1r.js","assets/i3uvjpf7subxx2zx.js","assets/f8aj0rne75c4urcq.js","assets/983a0dy92b3ronpv.js","assets/g295ul1ddup68x76.js","assets/e4ufap8jna4xm13e.js","assets/eo3f8wi24ku6jqxy.js","assets/ot4k89oi9z3cyuwx.js","assets/o7o4vvrc2y6pzocg.js","assets/fcsx10fpeqfsj82e.js","assets/emajr637ahk3quf0.js","assets/dpd71mjhk5ws66hy.js","assets/c8jcqyufjz3y3xq2.js","assets/lnfqtzs536evjxe6.js","assets/bey1ck797b7xnt8t.js","assets/e9pifcw0zbbez9d7.js","assets/fk0t1ybdlhjnuo8z.js","assets/kxc80swz6kz1g4fr.js","assets/f8fzdt98oyl3a9ln.js","assets/dno702cefx93jnk9.js"])))=>i.map(i=>d[i]);
import{y as e,bw as te,aZ as Ne,a_ as De,aX as Ie,r,D as K,av as R,l as Be,S as U,P as xe,b as be,a1 as T,a6 as Q,W as ts,X,a9 as os,a7 as ns,Z as m,$ as p,ag as Ve,bJ as is,bI as rs,bG as cs,aR as ls,w as Re,ec as Ce,bq as Fe,br as ds,a3 as us,au as hs,O as b,aw as gs,u as fs,f3 as ms,ce as We,ar as ps,a8 as xs,d1 as S,c3 as bs,fe as Cs,x as Se,aW as Ss,dI as ye,bi as ys,bj as Ms,bk as js,bR as ks,j as vs}from"./du9ygo55hccsm0ec.js";import{s as As,k as oe,f as ne,j as ws}from"./d0s4um1rh2f7pgrr.js";import{hH as ie,eO as _s,hI as Ge,hJ as He,hK as Ts,hL as $e,u as Es,hM as Os,hN as Ps,S as Ls,hO as Ns,hP as Ds,ci as q,hQ as Is,hR as Bs,hS as Vs,hT as Rs,hU as Fs,hV as Ws,hW as Gs,hX as Hs,hY as $s,hZ as zs,h_ as Us,h$ as qs,i0 as Ks,i1 as Qs,i2 as Xs,i3 as Ys,i4 as Zs,i5 as Js,i6 as ea,i7 as sa,i8 as aa,i9 as ta,ia as oa,cj as re,ib as na,ic as ia,eZ as ra,eC as ze,c6 as se,fn as Me,id as Ue,ie as qe,hc as ca,aD as la,ig as da,hl as je,fM as ua,bS as ae,bT as ke,cx as ha,ih as ga,b_ as ve,eX as fa,ii as ma,cb as pa,ij as Ae,ag as xa,ik as ba,au as Ca,eJ as Sa,c8 as we,c9 as ya,gh as Ma,il as ja,im as ka,bY as va,io as Aa,ip as wa,c1 as _a,c2 as _e,iq as Ta,r as Ea,cm as Oa,ir as Pa,cz as La,cn as Na,de as Da,is as Ia,df as Ba,it as Va}from"./hc0go6t8u8it292j.js";import{U as u,G as I,u as w,c as Ke,d as ee,b as Ra}from"./156t2vs0ziqy5ta8.js";import{a as Fa,b as Wa,v as Ga,T as F,c as Ha,d as $a,n as za}from"./m7ykldedawewofy8.js";import{u as Ua,a as qa}from"./huj2tv4ji3im8uo0.js";import{L as Ka}from"./j2y7wsnqu61ya7iz.js";import{S as Te,b as Qa,c as Xa,N as Ya}from"./eo3f8wi24ku6jqxy.js";import{u as Qe,a as Za,g as Ja}from"./ot4k89oi9z3cyuwx.js";import{S as et,C as st}from"./o7o4vvrc2y6pzocg.js";import{T as at,f as tt,b as Xe}from"./koyiigs1bh3cqmq2.js";import{T as Ye}from"./emajr637ahk3quf0.js";import{m as Ee}from"./kl23pvq05rxrgvth.js";import{a as ot,b as Oe}from"./fcsx10fpeqfsj82e.js";import{aL as nt,bI as it,V as rt}from"./ibjw18ivx5tw615x.js";import{C as ct}from"./dpd71mjhk5ws66hy.js";const lt=60*60*24;function dt(s,a=!1){return te()==null||a?"loading":!s||Ne.getCookie(De.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function ut({onClose:s}){const{data:{ageVerificationType:a,ageVerificationDeadline:t}={}}=ie();return a==="passive"?e.jsx(ht,{onClose:s}):a==="countdown"&&t!=null?e.jsx(gt,{onClose:s,ageVerificationDeadline:t}):null}const ht=({onClose:s})=>{const{country:a}=Ie();return r.useEffect(()=>{K.addAction("privacy_policy.show_age_verification_modal",{country:a})},[a]),e.jsx(_s,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(R,{color:"primary",onClick:async()=>{await Be.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(R,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},gt=({onClose:s,ageVerificationDeadline:a})=>{const t=a!=null?Math.floor(a/60/60/24):0;r.useEffect(()=>{U.logEvent("chatgpt_compliance_age_verification_seen"),xe.logEvent(be.complianceAgeVerificationSeen)},[]);const{country:o}=Ie();return r.useEffect(()=>{K.addAction("privacy_policy.show_age_verification_countdown",{country:o})},[o]),e.jsxs(Ge,{children:[e.jsx(He,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(T,{...Pe.ageVerificationTitle,values:{deadline:t,learnMoreLink:i=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:i})}})}),e.jsx(Ts,{altText:"Dismiss notification",asChild:!0,children:e.jsx(R,{color:"primary",size:"small",onClick:()=>{U.logEvent("chatgpt_compliance_age_verification_clicked"),xe.logEvent(be.complianceAgeVerificationClicked),Ne.setCookie(De.AgeVerification,"true",{maxAge:lt,path:"/"}),s(),u.openModal(I.AgeVerificationInterstitial)},children:e.jsx(T,{...Pe.startVerification})})}),e.jsx($e,{})]})},Pe=Q({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function ft({onClose:s}){const a=X(),t=os(),{openSettings:o}=Es(),i=Os(),{session:n}=ns(),{data:{isStorageComplianceEnabled:l}={}}=ie(),{data:c,isLoading:h}=Ps({enabled:!!(l&&n),select:x=>!x.cookie_consent.is_required});return r.useEffect(()=>{c===!0&&s()},[c,s]),h?null:e.jsx(mt,{onReject:()=>{i.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){t.success(a.formatMessage(D.updateSuccess))},onError(){t.danger(a.formatMessage(D.updateFailure))}}),s()},onAccept:()=>{i.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){t.success(a.formatMessage(D.updateSuccess))},onError(){t.danger(a.formatMessage(D.updateFailure))}}),s()},children:e.jsx(T,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:x=>e.jsx(Ka,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:x}),manageLink:x=>e.jsx(pt,{onClick:()=>{o(Ls.DataControls)},children:x})}})})}function mt({children:s,onAccept:a,onReject:t}){return r.useEffect(()=>{K.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs(Ge,{children:[e.jsxs(He,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(R,{color:"secondary",size:"small",onClick:t,children:e.jsx(T,{...D.reject})}),e.jsx(R,{color:"secondary",size:"small",onClick:a,children:e.jsx(T,{...D.accept})})]})]}),e.jsx($e,{})]})}const pt=ts.button`underline font-normal text-green-600`,D=Q({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),xt=m(()=>p(async()=>{const{ModelOnboardingNUXModal:s}=await import("./egiwluy0o9io16gu.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(({ModelOnboardingNUXModal:s})=>s),{ssr:!1}),bt=({onClose:s})=>{const a=X(),t=q(re.isBusinessWorkspace),o=q(n=>n.currentWorkspace),i=t?a.formatMessage(Le.workspaceWelcome,{workspaceName:o?.name}):"ChatGPT";return e.jsx(Fe,{isOpen:!0,onClose:ds,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(Le.personalOnboardingSubheading),children:e.jsx(na,{onClose:s,scope:ia.Personal})})};function Ct({clientThreadId:s}){const[a,t]=r.useState(0),{hasSeenOnboardingDate:o}=Ns(),{hasSeenTeamOwnerOnboardingDate:i}=Ds(),n=q(re.isBusinessWorkspace),l=Ve(),[c,h]=r.useState(!1),{data:x,isPending:B}=ie(),O=dt(x,B),{eligible:j,isLoading:y}=Ua(),k=is(),E=rs(),v=cs(),P=Fa(()=>Wa.getThread(s)),g=Ga(s)||!P,L=F.getConversationOrigin(s),{data:C,isError:_}=ls(),A=C!=null,W=C&&C?.accountItems.length>1&&C.currentAccountId==null,G=C?.accountItems.some(d=>d.isPersonalAccount()),V=!!C?.accountItems&&C.accountItems.length>0&&C.accountItems.every(({canAccessWithCurrentSession:d})=>!d),{eligible:H,isLoading:Y}=Is(),{value:$}=Re("1542198993"),{punchOutRequireLoginInfo:f}=Bs(),{state:M}=Vs(),{isOpen:z,isLoading:ce}=Rs(),{isOpen:le,isLoading:de}=Fs(),{isOpen:ue,isLoading:he}=Ws(),{isOpen:ge,isLoading:fe}=Gs(),{state:me}=Hs(),N=r.useMemo(()=>[{Component:$s,getModalState:()=>f?"show":"hide",isDeferrable:!1},{Component:zs,getModalState:()=>M,isDeferrable:!1},{Component:Us,getModalState:()=>me,isDeferrable:!1},{Component:qs,getModalState:()=>ce||g?"loading":L===Ce.APPLE?"hide":z?"show":"hide",isDeferrable:!1},{Component:Ks,getModalState:()=>fe||g?"loading":L===Ce.APPLE?"hide":ge?"show":"hide",isDeferrable:!1},{Component:bt,getModalState:()=>n?"hide":o===null?"loading":o===!1?"show":"hide",isDeferrable:!0},{Component:Qs,getModalState:()=>_?"hide":W?"show":A?"hide":"loading",isDeferrable:!1},{Component:Xs,getModalState:()=>k!==null?"show":_||A?"hide":"loading",isDeferrable:!1},{Component:Ys,getModalState:()=>E!==null?"show":_||A?"hide":"loading",isDeferrable:!1},{Component:Zs,getModalState:()=>v!=null?"show":_||A?"hide":"loading",isDeferrable:!1},{Component:Js,getModalState:()=>A?V?"show":"hide":"loading",isDeferrable:!1},{Component:ea,getModalState:()=>de?"loading":le?"show":"hide",isDeferrable:!1},{Component:sa,getModalState:()=>he?"loading":ue?"show":"hide",isDeferrable:!1},{Component:ft,getModalState:()=>"hide",isDeferrable:!1},{Component:aa,getModalState:()=>!l?.isTeam()||!l?.isOwnerOfAccount()||!G?"hide":!A||i===null?"loading":i===!1?"show":"hide",isDeferrable:!1},{Component:ta,getModalState:()=>n?o===null?"loading":o===!1?"show":"hide":"hide",isDeferrable:!0},{Component:oa,getModalState:()=>Y?"loading":H&&$?"show":"hide",isDeferrable:!1},{Component:ut,getModalState:()=>O,isDeferrable:!1},{Component:xt,getModalState:()=>y?"loading":j?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(d=>!(d.isDeferrable&&c)&&(!d.expiresAt||d.expiresAt.getTime()>Date.now())),[f,M,v,A,o,i,G,y,n,_,k,E,l,V,W,O,j,c,$,H,Y,z,ce,ge,fe,me,de,le,ue,he,L,g]);r.useEffect(()=>{if(N[a]&&N[a].getModalState()==="hide"){const d=N.findIndex(as=>as.getModalState()!=="hide");t(d)}},[a,N]);const Z=N[a],J=Z?.getModalState()==="show";if(r.useEffect(()=>{const d=w.getState().activeModals.has(I.BlockingInitialComponent);J!==d&&(J?u.openModal(I.BlockingInitialComponent):u.closeModal(I.BlockingInitialComponent))},[J]),Z==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const pe=Z.getModalState();if(pe==="loading")return null;pe==="hide"&&t(d=>d+1);const ss=N[a].Component;return e.jsx(ss,{onClose:()=>{h(!0),t(d=>d+1)}})}const Le=Q({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),St=m(()=>p(()=>import("./g25rdt29bll4sk12.js"),__vite__mapDeps([13,1,2,3,8,4,5,9,7,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,6,30,31,32,33,34,35,36,37,38,39,40,41])).then(s=>s.DebugConversationSidebar));function Ze({clientThreadId:s}){yt();const a=te(),t=a?.includes("debug"),o=us(),i=w(l=>l.activeSidebar),n=a?.includes("debug")&&i==="debug";return!t||!n?null:e.jsx(St,{clientThreadId:s,slideOver:!ra(o),onClose:()=>u.toggleActiveSidebar("debug"),isOpen:!0})}function yt(){const a=te()?.includes("debug");r.useEffect(()=>{if(!a)return;const t=new AbortController;return document.addEventListener("keydown",o=>{o.target instanceof HTMLElement&&["input","textarea","select","button"].includes(o.target.tagName.toLowerCase())||o.key==="\\"&&u.toggleActiveSidebar("debug")},{signal:t.signal}),()=>{t.abort()}},[a])}const Mt=m(()=>p(()=>import("./kkcwo4e9fvsopl82.js"),__vite__mapDeps([42,1,2,3,4,5,43,8,9,44,45,7,10,46])).then(s=>s.SearchSources));function Je({clientThreadId:s}){const{resolvedTheme:a}=hs(),t=a==="dark",{turnIndex:o,messageId:i,isOpen:n}=Ke(),l=r.useCallback(()=>{u.closeChatThreadFlyout(s,i)},[s,i]);return!i||!o||!n?null:e.jsx(ze,{anchor:"top",className:b("relative flex-1 border-l",t?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(se,{name:"search-sources-header",type:"primary",className:b("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(gs,{onClick:l})})}),children:e.jsx(Mt,{clientThreadId:s,turnIndex:o,messageId:i,isInSidebar:!0})})}const jt=Object.freeze(Object.defineProperty({__proto__:null,ChatScreenSearchSourcesFlyout:Je},Symbol.toStringTag,{value:"Module"}));function es({clientThreadId:s}){r.useEffect(()=>{u.closeSharingModal()},[s]);const a=fs();r.useEffect(()=>(F.retainThread(s),()=>{setTimeout(()=>{a.invalidateQueries({queryKey:["conversation",s]})},0),F.releaseThread(s)}),[s,a]),r.useEffect(()=>()=>{U.checkGate("3922476776")||Me.abortAllRequests()},[s]);const t=r.useRef(s);r.useEffect(()=>{s!==t.current&&(U.checkGate("3922476776")||Me.clear(),t.current=s)},[s])}const kt=m(()=>p(()=>import("./jtrvqvo9d6oquvbf.js"),__vite__mapDeps([47,1,2,3,4,5,22,23,9,24,7,8,10,25,26,11,12,27,14,28,29,6,48,49,50,51,52,53,54,17,55])).then(s=>s.CanvasFocusedViewManager)),vt=m(()=>p(()=>import("./f8aj0rne75c4urcq.js"),__vite__mapDeps([56,1,2,3,14,4,5,10,8,9,42,43,44,45,7,46,57])).then(s=>s.SearchResultsModal));function At({clientThreadId:s,setClientThreadId:a,urlThreadId:t,prefetchSearch:o}){const i=Ha();es({clientThreadId:s});const{createNewThread:n,onThreadCreated:l,resetThread:c}=As({clientThreadId:s,setClientThreadId:a});Qe({resetThreadAction:c,clientThreadId:s});const h=oe(s);return e.jsxs(Ye,{clientThreadId:s,children:[e.jsx(Ue,{clientThreadId:s,urlThreadId:t}),e.jsxs(Te,{hideNavigation:i,mobileHeaderContent:e.jsx(at,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(tt,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(Qa,{onNewChatButtonClick:c}),mobileHeaderRightContent:e.jsx(Xa,{onNewChatButtonClick:c}),sidebar:e.jsx(Ya,{navHeader:s?e.jsx(et,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:n}):null,children:e.jsx(st,{clientThreadId:s,onNewThread:n})}),threadFlyout:e.jsx(Je,{clientThreadId:s}),children:[e.jsx(qe,{}),e.jsx(Xe,{clientThreadId:s,onCreate:l,prefetchSearch:o},s),e.jsxs(Te.Sidebars,{children:[h&&e.jsx(kt,{clientThreadId:s}),e.jsx(Ze,{clientThreadId:s}),!1]})]}),e.jsx(wt,{clientThreadId:s})]})}function wt({clientThreadId:s}){const{value:a}=Re("218782548"),t=ca(),{isOpen:o}=Ke();return o&&(!t||!a)&&e.jsx(vt,{clientThreadId:s})}const _t=450;function Tt({children:s,clientThreadId:a,isOpen:t,onClose:o}){return e.jsx(la,{children:t&&e.jsx(ms,{children:e.jsx(da.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(Ee.div,{className:"h-full w-full bg-token-main-surface-secondary",...je}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(Ee.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:_t},...je,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Xe,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})})}const Et=m(()=>p(()=>import("./g295ul1ddup68x76.js"),__vite__mapDeps([58,1,2,3,4,5,25,26,7,8,9,10,11,12,27,14,28,29,6]))),Ot=m(()=>p(()=>import("./e4ufap8jna4xm13e.js"),__vite__mapDeps([59,1,2,3,4,5,37,25,26,7,8,9,10,11,12,27,14,28,29,6,60,39,61,62,63,20,21,22,23,24,30,31,32,33,34,35,36,38,40,41,64,65])).then(s=>s.ImageEditor));function Pt({clientThreadId:s}){const a=ua();r.useEffect(()=>{ae.close()},[s]);let t;return a?.type===ke.ADAVisualization?t=e.jsx(Et,{clientThreadId:s,visualization:a.visualization}):a?.type===ke.Image&&(t=e.jsx(Ot,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(Tt,{clientThreadId:s,isOpen:a!=null,onClose:ae.close,children:t})}const Lt=()=>{const s=X(),a=w(n=>n.activeModals.has(I.KeyboardActions)),t=()=>{u.closeModal(I.KeyboardActions)},o=Za(),i=r.useMemo(()=>{const n=Math.ceil(o.length/2);return[o.slice(0,n),o.slice(n)]},[o]);return e.jsx(Fe,{isOpen:a,onClose:t,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage(It.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:i.map((n,l)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:n.map(c=>e.jsx(Nt,{action:c},c.key))},`col-${l}`))})})})},Nt=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(T,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:Ja(s.keyboardBinding).map((a,t)=>e.jsx(Dt,{keyName:a},`${s.key}-${t}`))})]}),Dt=({keyName:s})=>{const a=b("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:b(a,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:b(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:b(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},It=Q({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function Bt({clientThreadId:s}){const a=$a(s),t=We(),{isCollapsible:o,recentConversationLimit:i}=ot(),n={buckets:o,recentConversationLimit:i},l=r.useRef(!1),c=w(f=>f.isHistoryCollapsed),{conversations:h,buckets:x,hasNextPage:B,fetchNextPage:O,data:j,isLoading:y,isFetchingNextPage:k,isError:E,recents:v,refetch:P}=qa(n),[g,L]=r.useState(!0),C=r.useCallback(function(M){M===void 0&&L(!1),P({cancelRefetch:!0})},[P,L]),_=t?void 0:a,A=c&&v.items.length>0,W=!c&&x.length>0,G=h.length===0,V=E||j===void 0&&!y&&!k&&l.current,H=!V&&(j===void 0||y||k);j===void 0&&!y&&!l.current&&(l.current=!0,C(!0)),r.useMemo(()=>{ha.publish({kind:"refreshHistory",conversations:h})},[h]);const $=B&&!G&&!c&&!y&&!k;return e.jsxs(e.Fragment,{children:[V&&e.jsx(ga,{showRetry:g,refetch:C}),A&&e.jsx(ve,{header:v.label,children:v.items.map((f,M)=>e.jsx(Oe,{item:f,isActive:f.id===_,testId:`history-item-${M}`},f.id))}),W&&x.map(f=>e.jsx(ve,{header:f.label,children:f.items.map((M,z)=>e.jsx(Oe,{item:M,isActive:M.id===_,testId:`history-item-${z}`},M.id))},f.key)),H&&e.jsx(ps,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),o&&e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{className:b(!c&&"hidden"),children:e.jsx(fa,{type:"more",onClick:u.toggleHistoryCollapsed})})}),$&&e.jsx(ma,{onPaginate:O})]})}const Vt=m(()=>p(()=>import("./c8jcqyufjz3y3xq2.js"),__vite__mapDeps([66,1,2,3,33,7,4,5,8,9,10,14,62,26,63,11,12,6,61,25,27,28,29])).then(s=>s.GizmoSidebarList));function Rt({clientThreadId:s}){const a=Ve(),t=za(s),{isUnauthenticated:o}=xs();return o?null:e.jsxs("div",{className:b(S.screenContent),children:[null,e.jsx(Bt,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(Vt,{currentGizmoId:t}):null]})}const Ft=m(()=>p(()=>import("./lnfqtzs536evjxe6.js"),__vite__mapDeps([67,1,2,3,14,4,5,10,8,9,25,26,7,11,12,27,28,29,6,60,39])).then(s=>s.UserProfileBar),{ssr:!0});function Wt(){const s=w(ee.isGptListVisible),a=w(ee.isHistoryCollapsed),t=w(ee.isGptListCollapsed),o=r.useCallback(()=>{a||u.toggleHistoryCollapsed(),t&&u.toggleGptListCollapsed()},[a,t]),i=[];return a||i.push(e.jsx(Ae,{onClick:u.toggleHistoryCollapsed,children:e.jsx(T,{id:"1poXLj",defaultMessage:"See less"})},"see-less")),s||i.push(e.jsx(Ae,{onClick:o,children:e.jsx(T,{id:"DnQZfo",defaultMessage:"See GPTs"})},"see-gpt")),e.jsxs(pa,{className:b(S.screenTrailingBarContainer),children:[i,e.jsx(Ft,{})]})}const Gt=m(()=>p(()=>import("./bey1ck797b7xnt8t.js"),__vite__mapDeps([68,1,2,3,4,5,69,70,8,9,71,61,6,7,10,11,12,14])).then(s=>s.FannyPackIconButton),{ssr:!1});function Ht({onNewThread:s}){const a=X(),t=Ra(),o=w(n=>n.sidebarState===xa.Floating);ba({checkElement:n=>n?.tagName==="NAV",enabled:!t&&o,onLightDismiss(){const n=document.querySelector(`input[name="${we.OpenOrClosed}"]`);n&&(n.checked=!1)}});const{isFannyPackEnabled:i}=Ca();return e.jsxs(e.Fragment,{children:[e.jsx(se,{type:"primary",className:b(S.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[3px]",children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(Sa,{className:b(S.closeSidebarAction),checked:!t,onChange:n=>{n.currentTarget.checked?u.openSidebar():u.closeSidebar()},icon:e.jsx(nt,{className:S.sidebarIcon}),label:a.formatMessage({id:"fM0vj3",defaultMessage:"Close Sidebar"}),group:we.OpenOrClosed})}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx(Gt,{className:S.searchAction,icon:e.jsx(it,{className:S.sidebarIcon})}),e.jsx(bs,{to:"/",onClick:n=>{n.preventDefault(),s()},children:e.jsx(ya,{icon:e.jsx(rt,{className:S.sidebarIcon}),className:S.searchAction,label:a.formatMessage({id:"NUNaGU",defaultMessage:"New chat"})})})]})]})}),e.jsx(se,{type:"primary",className:S.bucketBar,disableSizeTracking:!0,children:" "})]})}function $t(){const{clientThreadId:s,onNewThread:a}=ne();return e.jsx(ze,{anchor:"vertical",className:b(S.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Ht,{onNewThread:a}),trackLeading:!0,trailing:e.jsx(Wt,{}),children:e.jsx(Rt,{clientThreadId:s})})}const zt=m(()=>p(()=>import("./jtrvqvo9d6oquvbf.js"),__vite__mapDeps([47,1,2,3,4,5,22,23,9,24,7,8,10,25,26,11,12,27,14,28,29,6,48,49,50,51,52,53,54,17,55])).then(s=>s.CanvasFocusedViewManager)),Ut=m(()=>p(()=>Promise.resolve().then(()=>jt),void 0).then(s=>s.ChatScreenSearchSourcesFlyout));function qt(){const{clientThreadId:s,resetThread:a}=ne();return Qe({resetThreadAction:a,clientThreadId:s}),null}function Kt(){const{clientThreadId:s,currentModelId:a,isCompanionWindow:t}=ne();return e.jsx(ja,{conversationId:s,currentModelId:a,isActiveWindow:!t})}function Qt({clientThreadId:s,setClientThreadId:a,urlThreadId:t}){es({clientThreadId:s});const o=oe(s);return e.jsxs(ws,{clientThreadId:s,setClientThreadId:a,children:[e.jsx(Kt,{}),e.jsx(qt,{}),e.jsxs(Ye,{clientThreadId:s,children:[e.jsx(Ue,{clientThreadId:s,urlThreadId:t}),e.jsx(qe,{}),e.jsx(Ma,{className:Cs.application,sidebar:e.jsx($t,{}),thread:e.jsx(ct,{}),details:o&&e.jsx(zt,{clientThreadId:s}),threadExtendedInfo:e.jsx(Ut,{clientThreadId:s}),debugger:e.jsx(Ze,{clientThreadId:s}),name:"application-root"})]})]})}var Xt={};const Yt=m(()=>p(()=>import("./f8fzdt98oyl3a9ln.js"),__vite__mapDeps([72,1,2,3,4,5,25,26,7,8,9,10,11,12,27,14,28,29,6,73])));function xo(s){const{urlThreadId:a,clientThreadId:t,prefetchSearch:o}=s;Jt();const i=We(),n=Se(),[l]=Ss(),[c,h]=r.useState(()=>a!==void 0?a:t!==void 0?t:ye());a!==void 0&&c!==a&&F.getServerThreadId(c)!==a&&h(a);const x=ka(Se());r.useEffect(()=>{a===void 0&&F.getServerThreadId(c)!==void 0&&h(ye())},[a,c,x]);const B=q(re.workspaceId);oe(c);const O=va(),{eligible:j,isLoading:y,markAsViewed:k}=Aa(),E=wa();r.useEffect(()=>{(n.pathname==="/"||n.pathname.startsWith("/c/"))&&_a({namespace:_e.ChatPageLoad})==null&&(Ta({namespace:_e.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),K.addTiming("chatgpt.web.chatPage.mounted"))},[]);const v=Ea();r.useEffect(()=>{ys(!0).then(g=>{g.force_login&&v({authType:"login"}),Ms.initializeAndGatherData(g),Oa.initializeAndGatherData(g),js.initializeAndGatherData(g)})},[v]),r.useEffect(()=>{const g=l.get(Pa)==="true";i!==g&&ks.setIsTemporaryChatEnabled(g)},[i,l]),r.useEffect(()=>{n.state?.focusObject&&ae.setFocusedObject(n.state.focusObject)},[n.state?.focusObject]),r.useEffect(()=>{!y&&j&&(k(),E())},[j,y,k,E]);const P=O?Qt:At;return e.jsx(La.Provider,{value:null,children:e.jsx(Na,{children:e.jsxs(Da,{clientThreadId:c,children:[e.jsx(Ct,{clientThreadId:c},B),e.jsx(Lt,{}),e.jsx(Ia,{}),e.jsx(P,{urlThreadId:a,clientThreadId:c,setClientThreadId:h,prefetchSearch:o}),e.jsx(Pt,{clientThreadId:c}),e.jsx(Ba,{clientThreadId:c}),e.jsx(Zt,{}),!1,e.jsx(Va,{})]})})})}function Zt(){const s=w(a=>a.sharingModalThreadId);return s?e.jsx(Yt,{serverThreadId:s}):null}function Jt(){vs({queryKey:["pingEdge"],queryFn:()=>Be.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Xt.GOKU_SERVICE);export{xo as C,_t as F,Je as a};
//# sourceMappingURL=b1pyi4cah22lly2q.js.map
