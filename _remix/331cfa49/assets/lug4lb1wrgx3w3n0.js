import{dO as p,bo as O,r as a,a6 as E,F as m,aQ as i,aR as u}from"./jxcj8c73xykl5pdh.js";import"./dbh3rqot1oqdum8f.js";function b(){const{pluginId:t}=p(),s=O(),l=a.useRef(!1),[h,R]=a.useState(""),{code:r,error:o,error_description:n,state:c}=Object.fromEntries(new URLSearchParams(h.substring(1)).entries());return a.useEffect(()=>{R(window.location.hash)},[]),a.useEffect(()=>{if(l.current)return;t&&r&&c&&(l.current=!0);async function S(){const d=`https://chatgpt.com/ccc/${t}/oauth/callback`;if(!(!t||!r||!c))try{const e=await m.connectorOauthCallback(t,r,d,c);if(e.success){const f=new URL(i(u.OAUTH_SUCCESS,e.redirect_path));f.searchParams.set("oauth_success","true"),s(f.toString())}else s(i(u.CUSTOM_ERROR,e.redirect_path,e.error??e.message))}catch{s(i(u.CUSTOM_ERROR))}}S()},[t,r,c,s]),a.useEffect(()=>{o&&E.danger(`${o}${n?`: ${n}`:""}`)},[o,n]),null}export{b as default};
//# sourceMappingURL=lug4lb1wrgx3w3n0.js.map
