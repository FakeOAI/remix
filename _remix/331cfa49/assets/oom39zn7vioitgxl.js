import{f as A,a as $,p as j,h as R}from"./ovg9jkz4fiyf1ltu.js";import{gR as z}from"./kracfvru65uyxco3.js";import{a8 as y,Z as P,F as h,a9 as b,aa as k,ab as S,f as G,ac as M,_ as O}from"./nvgdmt3w630ppqx0.js";var I={}.hasOwnProperty;function T(e,r){var o=r||{};function t(n){var c=t.invalid,i=t.handlers;if(n&&I.call(n,e)&&(c=I.call(i,n[e])?i[n[e]]:t.unknown),c)return c.apply(this,arguments)}return t.handlers=o.handlers||{},t.invalid=o.invalid,t.unknown=o.unknown,t}const V={}.hasOwnProperty;function v(e,r){let o=-1,t;if(r.extensions)for(;++o<r.extensions.length;)v(e,r.extensions[o]);for(t in r)if(V.call(r,t))switch(t){case"extensions":break;case"unsafe":{B(e[t],r[t]);break}case"join":{B(e[t],r[t]);break}case"handlers":{_(e[t],r[t]);break}default:e.options[t]=r[t]}return e}function B(e,r){r&&e.push(...r)}function _(e,r){r&&Object.assign(e,r)}const D=[E];function E(e,r,o,t){if(r.type==="code"&&A(r,t)&&(e.type==="list"||e.type===r.type&&A(e,t)))return!1;if("spread"in o&&typeof o.spread=="boolean")return e.type==="paragraph"&&(e.type===r.type||r.type==="definition"||r.type==="heading"&&$(r,t))?void 0:o.spread?1:0}const C=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Z=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:C},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:C},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:C},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:C},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:C},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:C},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:C},{atBreak:!0,character:"~"}];function J(e){return e.label||!e.identifier?e.label||"":z(e.identifier)}function Q(e){if(!e._compiled){const r=(e.atBreak?"[\\r\\n][\\t ]*":"")+(e.before?"(?:"+e.before+")":"");e._compiled=new RegExp((r?"("+r+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(e.character)?"\\":"")+e.character+(e.after?"(?:"+e.after+")":""),"g")}return e._compiled}function U(e,r,o){const t=r.indexStack,n=e.children||[],c=[];let i=-1,l=o.before;t.push(-1);let s=r.createTracker(o);for(;++i<n.length;){const f=n[i];let a;if(t[t.length-1]=i,i+1<n.length){let u=r.handle.handlers[n[i+1].type];u&&u.peek&&(u=u.peek),a=u?u(n[i+1],e,r,{before:"",after:"",...s.current()}).charAt(0):""}else a=o.after;c.length>0&&(l==="\r"||l===`
`)&&f.type==="html"&&(c[c.length-1]=c[c.length-1].replace(/(\r?\n|\r)$/," "),l=" ",s=r.createTracker(o),s.move(c.join(""))),c.push(s.move(r.handle(f,e,r,{...s.current(),before:l,after:a}))),l=c[c.length-1].slice(-1)}return t.pop(),c.join("")}function W(e,r,o){const t=r.indexStack,n=e.children||[],c=r.createTracker(o),i=[];let l=-1;for(t.push(-1);++l<n.length;){const s=n[l];t[t.length-1]=l,i.push(c.move(r.handle(s,e,r,{before:`
`,after:`
`,...c.current()}))),s.type!=="list"&&(r.bulletLastUsed=void 0),l<n.length-1&&i.push(c.move(H(s,n[l+1],e,r)))}return t.pop(),i.join("")}function H(e,r,o,t){let n=t.join.length;for(;n--;){const c=t.join[n](e,r,o,t);if(c===!0||c===1)break;if(typeof c=="number")return`
`.repeat(1+c);if(c===!1)return`

<!---->

`}return`

`}const N=/\r?\n|\r/g;function q(e,r){const o=[];let t=0,n=0,c;for(;c=N.exec(e);)i(e.slice(t,c.index)),o.push(c[0]),t=c.index+c[0].length,n++;return i(e.slice(t)),o.join("");function i(l){o.push(r(l,n,!l))}}function K(e,r,o){const t=(o.before||"")+(r||"")+(o.after||""),n=[],c=[],i={};let l=-1;for(;++l<e.unsafe.length;){const a=e.unsafe[l];if(!j(e.stack,a))continue;const u=e.compilePattern(a);let d;for(;d=u.exec(t);){const m="before"in a||!!a.atBreak,w="after"in a,p=d.index+(m?d[1].length:0);n.includes(p)?(i[p].before&&!m&&(i[p].before=!1),i[p].after&&!w&&(i[p].after=!1)):(n.push(p),i[p]={before:m,after:w})}}n.sort(X);let s=o.before?o.before.length:0;const f=t.length-(o.after?o.after.length:0);for(l=-1;++l<n.length;){const a=n[l];a<s||a>=f||a+1<f&&n[l+1]===a+1&&i[a].after&&!i[a+1].before&&!i[a+1].after||n[l-1]===a-1&&i[a].before&&!i[a-1].before&&!i[a-1].after||(s!==a&&c.push(L(t.slice(s,a),"\\")),s=a,/[!-/:-@[-`{-~]/.test(t.charAt(a))&&(!o.encode||!o.encode.includes(t.charAt(a)))?c.push("\\"):(c.push("&#x"+t.charCodeAt(a).toString(16).toUpperCase()+";"),s++))}return c.push(L(t.slice(s,f),o.after)),c.join("")}function X(e,r){return e-r}function L(e,r){const o=/\\(?=[!-/:-@[-`{-~])/g,t=[],n=[],c=e+r;let i=-1,l=0,s;for(;s=o.exec(c);)t.push(s.index);for(;++i<t.length;)l!==t[i]&&n.push(e.slice(l,t[i])),n.push("\\"),l=t[i];return n.push(e.slice(l)),n.join("")}function Y(e){const r=e||{},o=r.now||{};let t=r.lineShift||0,n=o.line||1,c=o.column||1;return{move:s,current:i,shift:l};function i(){return{now:{line:n,column:c},lineShift:t}}function l(f){t+=f}function s(f){const a=f||"",u=a.split(/\r?\n|\r/g),d=u[u.length-1];return n+=u.length-1,c=u.length===1?c+d.length:1+d.length+t,a}}function de(e,r={}){const o={enter:n,indentLines:q,associationId:J,containerPhrasing:re,containerFlow:oe,createTracker:Y,compilePattern:Q,safe:ce,stack:[],unsafe:[...Z],join:[...D],handlers:{...R},options:{},indexStack:[],handle:void 0};v(o,r),o.options.tightDefinitions&&o.join.push(ne),o.handle=T("type",{invalid:ee,unknown:te,handlers:o.handlers});let t=o.handle(e,void 0,o,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return t&&t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t;function n(c){return o.stack.push(c),i;function i(){o.stack.pop()}}}function ee(e){throw new Error("Cannot handle value `"+e+"`, expected node")}function te(e){const r=e;throw new Error("Cannot handle unknown node `"+r.type+"`")}function ne(e,r){if(e.type==="definition"&&e.type===r.type)return 0}function re(e,r){return U(e,this,r)}function oe(e,r){return W(e,this,r)}function ce(e,r){return K(this,e,r)}function he(e,r=null){return function(o,t){let{$from:n,$to:c}=o.selection,i=n.blockRange(c),l=!1,s=i;if(!i)return!1;if(i.depth>=2&&n.node(i.depth-1).type.compatibleContent(e)&&i.startIndex==0){if(n.index(i.depth-1)==0)return!1;let a=o.doc.resolve(i.start-2);s=new y(a,a,i.depth),i.endIndex<i.parent.childCount&&(i=new y(n,o.doc.resolve(c.end(i.depth)),i.depth)),l=!0}let f=P(s,e,r,i);return f?(t&&t(ie(o.tr,i,f,l,e).scrollIntoView()),!0):!1}}function ie(e,r,o,t,n){let c=h.empty;for(let a=o.length-1;a>=0;a--)c=h.from(o[a].type.create(o[a].attrs,c));e.step(new b(r.start-(t?2:0),r.end,r.start,r.end,new k(c,0,0),o.length,!0));let i=0;for(let a=0;a<o.length;a++)o[a].type==n&&(i=a+1);let l=o.length-i,s=r.start+o.length-(t?2:0),f=r.parent;for(let a=r.startIndex,u=r.endIndex,d=!0;a<u;a++,d=!1)!d&&S(e.doc,s,l)&&(e.split(s,l),s+=2*l),s+=f.child(a).nodeSize;return e}function pe(e,r){return function(o,t){let{$from:n,$to:c,node:i}=o.selection;if(i&&i.isBlock||n.depth<2||!n.sameParent(c))return!1;let l=n.node(-1);if(l.type!=e)return!1;if(n.parent.content.size==0&&n.node(-1).childCount==n.indexAfter(-1)){if(n.depth==3||n.node(-3).type!=e||n.index(-2)!=n.node(-2).childCount-1)return!1;if(t){let u=h.empty,d=n.index(-1)?1:n.index(-2)?2:3;for(let g=n.depth-d;g>=n.depth-3;g--)u=h.from(n.node(g).copy(u));let m=n.indexAfter(-1)<n.node(-2).childCount?1:n.indexAfter(-2)<n.node(-3).childCount?2:3;u=u.append(h.from(e.createAndFill()));let w=n.before(n.depth-(d-1)),p=o.tr.replace(w,n.after(-m),new k(u,4-d,0)),x=-1;p.doc.nodesBetween(w,p.doc.content.size,(g,F)=>{if(x>-1)return!1;g.isTextblock&&g.content.size==0&&(x=F+1)}),x>-1&&p.setSelection(G.near(p.doc.resolve(x))),t(p.scrollIntoView())}return!0}let s=c.pos==n.end()?l.contentMatchAt(0).defaultType:null,f=o.tr.delete(n.pos,c.pos),a=s?[null,{type:s}]:void 0;return S(f.doc,n.pos,2,a)?(t&&t(f.split(n.pos,2,a).scrollIntoView()),!0):!1}}function me(e){return function(r,o){let{$from:t,$to:n}=r.selection,c=t.blockRange(n,i=>i.childCount>0&&i.firstChild.type==e);return c?o?t.node(c.depth-1).type==e?ae(r,o,e,c):le(r,o,c):!0:!1}}function ae(e,r,o,t){let n=e.tr,c=t.end,i=t.$to.end(t.depth);c<i&&(n.step(new b(c-1,i,c,i,new k(h.from(o.create(null,t.parent.copy())),1,0),1,!0)),t=new y(n.doc.resolve(t.$from.pos),n.doc.resolve(i),t.depth));const l=M(t);if(l==null)return!1;n.lift(t,l);let s=n.mapping.map(c,-1)-1;return O(n.doc,s)&&n.join(s),r(n.scrollIntoView()),!0}function le(e,r,o){let t=e.tr,n=o.parent;for(let m=o.end,w=o.endIndex-1,p=o.startIndex;w>p;w--)m-=n.child(w).nodeSize,t.delete(m-1,m+1);let c=t.doc.resolve(o.start),i=c.nodeAfter;if(t.mapping.map(o.end)!=o.start+c.nodeAfter.nodeSize)return!1;let l=o.startIndex==0,s=o.endIndex==n.childCount,f=c.node(-1),a=c.index(-1);if(!f.canReplace(a+(l?0:1),a+1,i.content.append(s?h.empty:h.from(n))))return!1;let u=c.pos,d=u+i.nodeSize;return t.step(new b(u-(l?1:0),d+(s?1:0),u+1,d-1,new k((l?h.empty:h.from(n.copy(h.empty))).append(s?h.empty:h.from(n.copy(h.empty))),l?0:1,s?0:1),l?0:1)),r(t.scrollIntoView()),!0}function we(e){return function(r,o){let{$from:t,$to:n}=r.selection,c=t.blockRange(n,f=>f.childCount>0&&f.firstChild.type==e);if(!c)return!1;let i=c.startIndex;if(i==0)return!1;let l=c.parent,s=l.child(i-1);if(s.type!=e)return!1;if(o){let f=s.lastChild&&s.lastChild.type==l.type,a=h.from(f?e.create():null),u=new k(h.from(e.create(null,h.from(l.type.create(null,a)))),f?3:1,0),d=c.start,m=c.end;o(r.tr.step(new b(d-(f?3:1),m,d,m,u,1,!0)).scrollIntoView())}return!0}}export{we as a,me as l,pe as s,de as t,he as w};
//# sourceMappingURL=oom39zn7vioitgxl.js.map
