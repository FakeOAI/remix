import{a3 as S,aj as C,t as e,a8 as b,r as h,aT as P,P as w,d as A,ax as T,cR as _,bJ as V}from"./jf8dax6efxk3ntrb.js";import{K as E,aS as F,aT as L,aU as B,J as O,aV as z}from"./fsip9vfxppjksmhp.js";import{cE as M,a4 as y,c as U,dE as q}from"./iy5hn0mjbnzt38c5.js";import{z as D}from"./k1syenyfb41jsafy.js";import{V as I,u as Q,a as G,b as K,c as R}from"./c6kvagnxip77d120.js";import{d as W}from"./hqt4zfekukrwmgoh.js";import"./ekvxzdf96oarhu21.js";import"./o1vqbuli5awq6nfs.js";import"./jn59n5aa3tm5bet0.js";import"./f5sm5aoia6vskn8p.js";import"./hkgypyj4gy3dzmj2.js";import"./jdi7i9l9ih2o13vl.js";import"./e3v3yphi6j699k9m.js";import"./hjtfi4y9shjj710l.js";function Y({conversationId:t}){const s=S(),a=M(y.hasSeenAdvancedVoiceNuxFullPage),n=C(),r=n?.isPlus()??!1,d=n?.isEnterprisey()??!1,m=!r&&!d,p="https://help.openai.com/en/articles/8400625-voice-mode-faq#h_c5d6fe534b",u=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(E,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"TFfx7w",defaultMessage:"Natural conversations"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"qR+v5Q",defaultMessage:"Senses and responds to interruptions, humor, and more."})})]})]}),i=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(F,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"br49Gd",defaultMessage:"Free monthly preview"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"LhOfga",defaultMessage:"Use advanced voice for a short period each month."})})]})]}),f=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(L,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"84QiAT",defaultMessage:"Multiple voices"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"yYgwEW",defaultMessage:"Offers an expanded set of voices to choose from."})})]})]}),l=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(B,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"M/x7uJ",defaultMessage:"Personalized to you"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"QZXq7u",defaultMessage:"Can use memory and custom instructions to shape responses."})})]})]}),x=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(O,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"e6n5kr",defaultMessage:"You’re in control"})}),e.jsx("p",{className:"text-token-text-secondary",children:d?e.jsx(b,{id:"4szv66",defaultMessage:"Your audio recordings are saved but not used for training. Learn how to <link>manage recordings</link>.",values:{link:o=>e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"underline",children:o})}}):e.jsx(b,{id:"M/k4S5",defaultMessage:"Audio recordings are saved, and you can delete them at any time. Learn how to <link>manage recordings</link>.",values:{link:o=>e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"underline",children:o})}})})]})]}),g=m?[i,u,l,x]:[u,f,l,x],[k,j]=h.useState(!1),N=()=>{j(!0)},c=()=>{a.markAsViewed()};return k?e.jsx(I,{conversationId:t,onClose:c,cameFromNux:!0}):e.jsx("div",{className:"fixed left-0 top-0 z-50 flex h-full w-full flex-col items-center justify-center bg-token-main-surface-primary",children:e.jsxs("div",{className:"mx-auto w-full max-w-lg px-4 text-center",children:[e.jsx("h1",{className:"mb-9 text-2xl font-semibold text-token-text-primary",children:m?s.formatMessage({id:"XV3+9K",defaultMessage:"Sneak a peek at advanced voice mode"}):s.formatMessage({id:"9YnxDX",defaultMessage:"Say hello to advanced voice mode"})}),e.jsx("div",{className:"mb-9 space-y-5",children:g.map((o,v)=>e.jsx("div",{children:o},v))}),e.jsxs("p",{className:"mb-9 text-sm text-token-text-primary",children:[s.formatMessage({id:"vtcf3s",defaultMessage:"Voice mode can make mistakes — check important info."}),e.jsx("br",{}),s.formatMessage({id:"4nw2S2",defaultMessage:"Usage limits may change."})]}),e.jsx(P,{className:"rounded-full bg-token-text-primary px-20 py-3 font-semibold",onClick:N,children:e.jsx(b,{id:"ppi93b",defaultMessage:"Continue"})})]})})}const H={default_voice_mode:"advanced",modes:[{mode:"advanced",default_model_slug:D,disabled_mode_metadata:null,description:"Advanced Voice Mode",display_name:"Advanced Voice",info_message:{actions:[],buttons:[],hint:"Advanced Voice",message_markdown:"Advanced Voice",message:"Advanced Voice",title:"Advanced Voice",display_at_launch:!1},disclosure_message:null,resets_after:"None"}]};function J(){const t=V("2775516364").value,s=M(y.hasSeenAdvancedVoiceNuxFullPage);return!s.isLoading&&s.eligible&&t}function X(){const t=V("562926978").value,s=M(y.hasSeenAdvancedVoiceWebNuxTooltip);return{shouldShowTooltipNux:!s.isLoading&&s.eligible&&t,tooltipAnnouncement:s}}function fe({clientThreadId:t,gizmoId:s}){const a=W(t),r=S().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),[d,m]=h.useState(!1),[p,u]=h.useState(!1),i=J(),{shouldShowTooltipNux:f,tooltipAnnouncement:l}=X(),{refetch:x}=Q({conversationId:a??null,requestedVoiceMode:"advanced",gizmoId:s,eventSource:"composer_speech_button",fetchImmediately:!1}),g=G(),k=a??t,j=K(c=>c.isVoiceModeActive);h.useEffect(()=>{i||u(!1)},[i]);const N=h.useCallback(async()=>{if(w.logEvent(A.composerSpeechButtonClicked),f&&l.markAsViewed(),i){u(!0);return}let c;m(!0);try{c=await x()}finally{m(!1)}const o=c.data??g??H;R.setState(v=>{v.voiceStatus=o,v.isVoiceModeActive=!0})},[g,x,i,f,l]);return e.jsxs(e.Fragment,{children:[p&&e.jsx(Y,{conversationId:k}),e.jsx(Z,{showNuxTooltip:f,tooltipAnnouncement:l,children:e.jsx("button",{"data-testid":"composer-speech-button",onClick:N,"aria-label":r,disabled:j||d,className:"flex h-8 w-8 items-center justify-center rounded-full bg-black text-white transition-colors hover:opacity-70 focus-visible:outline-none focus-visible:outline-black disabled:text-[#f4f4f4] disabled:hover:opacity-100 dark:bg-white dark:text-black dark:focus-visible:outline-white disabled:dark:bg-token-text-quaternary dark:disabled:text-token-main-surface-secondary",children:d?e.jsx(T,{}):e.jsx(z,{})})})]})}function Z({children:t,showNuxTooltip:s,tooltipAnnouncement:a}){const n=S();return s?e.jsx(q,{side:"top",show:!0,badge:"new",dismissOnOutsideClick:!0,title:n.formatMessage({id:"DQ6CAP",defaultMessage:"Try advanced voice mode"}),contentAlign:"center",onDismiss:a.markAsViewed,sideOffset:2,children:e.jsx("div",{children:t})}):e.jsx(U,{sideOffset:14,label:n.formatMessage({id:"i4P/ix",defaultMessage:"Use voice mode"}),side:"top",onOpenChange:r=>{r&&(w.logEvent(A.composerSpeechButtonHovered),_.composerSpeechButton.hover())},children:t})}export{fe as ComposerSpeechButton};
//# sourceMappingURL=dvtcc7z09wzzcxmg.js.map
