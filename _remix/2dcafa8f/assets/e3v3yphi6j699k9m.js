import{by as l,c as T,bx as r,b4 as u,b5 as S,P as i,d,af as f,r as p,dH as b}from"./jf8dax6efxk3ntrb.js";import{b as v}from"./ekvxzdf96oarhu21.js";var m=(e=>(e.DownloadMessages="download-messages",e.InviteUsersToWorkspace="invite-users-to-workspace",e.WorkspaceAppearance="workspace-appearance",e.KeyboardActions="keyboard-actions",e.UserContext="user-context",e.WorkspaceSwitcher="workspace-switcher",e.ReadOnlyConversationTemplate="read-only-conversation-template",e.CookieManagement="cookie-management",e.AgeVerificationInterstitial="age-verification-interstitial",e.GPTDetails="gpt-details",e.GPTPrivacySettings="gpt-privacy-settings",e.GPTFeedbackEmail="gpt-support-email",e.GPTReview="gpt-review",e.GPTRemoveThirdParty="gpt-remove-third-party",e.SharedConversationModeration="shared-conversation-moderation",e.ReportConversation="report-conversation",e.BlockingInitialComponent="blocking-initial-component",e.NoAuthNewChat="no-auth-new-chat",e.GlobalMemoryOnboarding="global-memory-onboarding",e.AccountPayment="account-payment",e))(m||{});const C=l.IsNavigationCollapsed,y=l.IsHistoryCollapsed,k=l.IsGptListCollapsed;function w(){const e=r.getItem(C)??!1;return u.setCookie(S.NavigationState,e?"0":"1",{maxAge:2**30}),{collapsed:e}}function c({collapsed:e}){r.setItem(C,e),u.setCookie(S.NavigationState,e?"0":"1",{maxAge:2**30})}const t=T()(()=>({isThreadHeaderVisible:!0,isDesktopNavCollapsed:w().collapsed,isVoiceActive:!1,sharingModalThreadId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,chatThreadFlyout:{userPreferenceIsOpen:g()??!1,isOpen:g()??!1},activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,isHistoryShowMoreVisible:!0,isHistoryCollapsed:r.getItem(y)??!0,isGptListVisible:!0,isGptListCollapsed:r.getItem(k)??!0,browseMode:"conversation"})),N={isThreadHeaderVisible:e=>e.isThreadHeaderVisible,isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible,isHistoryShowMoreVisible:e=>e.isHistoryShowMoreVisible,isGptListVisible:e=>e.isGptListVisible,isHistoryCollapsed:e=>e.isHistoryCollapsed,isGptListCollapsed:e=>e.isGptListCollapsed},n={setBrowseMode:e=>{t.setState(a=>({...a,browseMode:e}))},enterGizmoEditor:()=>{t.setState({browseMode:"gizmo-editor"})},exitGizmoEditor:()=>{t.setState({browseMode:"conversation"})},toggleGptListCollapsed:()=>{t.setState(e=>{const a=!e.isGptListCollapsed;return r.setItem(k,a),i.logToggleShowGptList({isCollapsed:a}),{isGptListCollapsed:a}})},toggleHistoryCollapsed:()=>{t.setState(e=>{const a=!e.isHistoryCollapsed;return r.setItem(y,a),i.logToggleShowRecents({isOnlyShowingRecents:a}),{isHistoryCollapsed:a}})},toggleNavSidebar:()=>{t.getState().activeStageSidebar?n.togglePopoverNavSidebar():n.toggleDesktopNavCollapsed()},togglePopoverNavSidebar:()=>{n.toggleActiveSidebar("popover-nav")},closePopoverNavSidebar:()=>{t.setState(e=>e.activeSidebar==="popover-nav"?{activeSidebar:void 0}:{})},toggleDesktopNavCollapsed:e=>{t.setState(a=>{const s=e??!a.isDesktopNavCollapsed;return c({collapsed:s}),i.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:s}),{isDesktopNavCollapsed:s}})},openSidebar:()=>{c({collapsed:!1}),i.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1}),t.setState({isDesktopNavCollapsed:!1})},closeSidebar:()=>{c({collapsed:!0}),i.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0}),t.setState({isDesktopNavCollapsed:!0})},hideThreadHeader:()=>{t.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{t.setState({isThreadHeaderVisible:!0})},openSharingModal(e,a){t.setState({sharingModalThreadId:e}),i.logEvent(d.shareConversationOpenModal,{location:a})},closeSharingModal(){t.setState({sharingModalThreadId:void 0})},openFeedbackModal(e){t.setState({feedbackModalThreadId:e})},closeFeedbackModal(){t.setState({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(e){t.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){t.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){t.setState({activeSidebar:e})},toggleActiveSidebar(e){t.setState(a=>({activeSidebar:a.activeSidebar===e?!1:e}))},closeActiveSidebar(){t.setState(()=>({activeSidebar:!1}))},setHistoryShowMoreVisible(e){t.setState({isHistoryShowMoreVisible:e})},setGptListVisible(e){t.setState({isGptListVisible:e})},setActiveStageSidebar(e){t.setState({activeStageSidebar:e})},toggleModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.has(e)?s.delete(e):s.add(e),{activeModals:s}})},openModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.add(e),{activeModals:s}})},closeModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.delete(e),{activeModals:s}})},closeAllActiveModals(){t.setState({activeModals:new Set})},hideLatencyDevTools:()=>{t.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{t.setState({isLatencyDevToolsVisible:!0})},openChatThreadFlyout:(e,a,s)=>{i.logEventWithStatsig(d.searchLinkSidebarShown,"search_links_sidebar_shown",v({turnIndex:a,clientThreadId:e,messageId:s})),h(!0),t.setState({chatThreadFlyout:{isOpen:!0,userPreferenceIsOpen:!0,turnIndex:a,messageId:s,clientThreadId:e}})},toggleChatThreadFlyout:(e,a,s)=>{const o=t.getState().chatThreadFlyout;e===o.clientThreadId&&a===o.turnIndex&&o.isOpen?n.closeChatThreadFlyout(e):n.openChatThreadFlyout(e,a,s)},closeChatThreadFlyout:e=>{i.logEventWithStatsig(d.searchLinkSidebarClosed,"search_links_sidebar_closed",v({clientThreadId:e})),h(!1),t.setState({chatThreadFlyout:{isOpen:!1,userPreferenceIsOpen:!1}})},temporaryCloseChatThreadFlyout:()=>{t.setState(e=>({chatThreadFlyout:{isOpen:!1,userPreferenceIsOpen:e.chatThreadFlyout.userPreferenceIsOpen}}))}};function I(e){return t(a=>a.activeModals.has(e))}function M(){return t(e=>e.chatThreadFlyout)}function P(){const{isUnauthenticated:e}=f(),a=p.useContext(b).getCookie(S.NavigationState),s=t(o=>o.isDesktopNavCollapsed);return e?!0:a?a==="0":s}function F(){const[e,a]=p.useState(!1),s=t(o=>o.activeModals);return p.useEffect(()=>{a(o=>o||s.has("blocking-initial-component"))},[s]),e}function g(){const e=r.getItem(l.ChatThreadFlyoutState);return e===void 0?null:e}function h(e){r.setItem(l.ChatThreadFlyoutState,e)}export{m as G,n as U,I as a,P as b,M as c,N as d,F as e,t as u};
//# sourceMappingURL=e3v3yphi6j699k9m.js.map
