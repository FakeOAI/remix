const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-lh93s4wrdpp5fblx.js","assets/cya1ek7zbsww3e8p.js","assets/m1h3d66e9x9d8av7.js","assets/root-fuvdhw7t.css","assets/h2x37ub1souzo3by.js","assets/o02kugc5eyp7bzuk.js","assets/conversation-small-cll5buey.css","assets/lptuk0q8xn5ezb1r.js","assets/cnlquey73j7uw8fu.js","assets/eqdwfm1ss7l1qetb.js","assets/ji313uzrpltya54g.js","assets/cnkyxf781f12fdb9.js","assets/lxcl4lkoqrle7fky.js","assets/n0s5m6clrqpu2fmq.js","assets/br9sj6yk029klw3b.js","assets/gq7tdevv4xdhasrb.js","assets/md510keitf2ivqa8.js","assets/beqhh5k54ufxbjqa.js","assets/n7mihaj2sjxshzb0.js","assets/pao6j5dhdawubk5p.js","assets/ht9d44tegtx4tp9s.js","assets/ck6f40emr7l3i0b3.js","assets/kav457re2wa0x93n.js","assets/bhomxqrcs87wp0ug.js","assets/bjiqtsa2cgudgxj8.js","assets/oqh7ik4ekqszwe7b.js","assets/itghwucfyv5ciib7.js","assets/hxbgovcs84mk9v9r.js","assets/o8i8jua4ntxjn5y6.js","assets/gqzdg6plr3pmj597.js","assets/l2vkye9yek1pl7hq.js","assets/983a0dy92b3ronpv.js","assets/idzy572xfl7a5o6a.js","assets/hv7e2fak15kx5n21.js","assets/kqwdyvkaaavvn8k3.js","assets/n34hy54j5bdr6y6c.js","assets/f084274wzviqv3v8.js","assets/pcjzq5zspamo9j8w.js","assets/zy8toyr2lgrov161.js","assets/e9lafxuzyeh4418f.js","assets/oq0wn5kmxc7rsdva.js","assets/obop3mkgis8ubd40.js","assets/nhwwej1nq0zrd7sc.js","assets/ecaf2k8jxs5jdeba.js","assets/dg59tnhw4y7axib5.js","assets/clvle6hjcebazwfi.js","assets/k7gblveuiw9977ct.js","assets/o3xqxqfvzxvixas7.js","assets/t9hafwtdc4pa0i6h.js","assets/cwu0zz6c73ktxehb.js","assets/i54f37mdctri2apr.js","assets/lrlzvgtohqckew7u.js","assets/jxvdqm13zt0qwgq5.js","assets/pbdfoko4gp72yxjd.js","assets/iej0cupg2dqkmejt.js","assets/g0lnj6ucdra0znz0.js","assets/m0ufyovf28ile0yl.js","assets/jk8w36bsokizpx57.js","assets/jci37cw2gaa1mzk1.js","assets/m6ckmcg5tc6lq0tg.js","assets/jwu51nzixsme9dia.js","assets/eg0ljzej0vy0q2ev.js","assets/l7os5ptlstx02j38.js","assets/hebnsu59jjcxuabp.js","assets/hdbfjkke7bjaucig.js","assets/swiper-kmk1dd5x.css","assets/o4d8ft3c9f9f03br.js","assets/l6rvvvgqn69lsznc.js","assets/d3y72ugnrmac5z1v.js"])))=>i.map(i=>d[i]);
import{bH as Te,u as fn,r as l,b as pn,t as n,R as gn,fr as vt,n as bt,a3 as Y,fs as Ne,bi as se,bj as hn,ft as xn,Q as re,O as ge,T as je,ca as vn,aj as X,bo as de,P as j,d as D,a1 as bn,a5 as He,a6 as Ve,a8 as y,ad as Ge,a as Ct,aY as ke,ag as Cn,bX as In,bV as yn,ax as ye,er as It,S as Q,bL as yt,bk as Mt,bv as nt,bw as st,cb as Mn,bC as Ae,bx as Sn,aW as Tn,aV as ae,cm as St,s as jn,eb as kn,ec as En,a$ as Me,bK as wn,af as Tt,fm as Pn}from"./cya1ek7zbsww3e8p.js";import{h9 as _n,ha as Nn,hb as An,hc as Rn,hd as On,he as jt,cD as Fn,hf as Bn,hg as Dn,hh as Wn,fh as ot,hi as Ln,hj as $n,hk as Un,hl as Hn,hm as be,hn as Vn,ho as Gn,hp as zn,hq as qn,hr as Qn,hs as Kn,ht as he,hu as at,hv as Jn,hw as Ce,hx as Yn,hy as Xn,hz as rt,dy as Zn,fi as es,fl as ts,hA as ns,hB as ss,hC as kt,hD as ze,an as qe,fs as os,hE as as,hF as Et,c as ce,N as Ee,hG as rs,hH as Ie,hI as is,hJ as wt,hK as Re,hL as cs,hM as ls,bj as oe,hN as us,hO as ds,hP as ms,aX as B,hQ as Pt,aQ as it,aR as le,aS as we,b0 as fs,br as ps,bs as gs,b3 as hs,b4 as _t,b5 as Se,b6 as ue,bi as xs,bt as F,hR as L,bu as vs,b7 as bs,b8 as Cs,b9 as Is,bb as Nt,ba as ys,aU as Ms,bf as Ss,bg as Ts,bk as js,bl as ks,hS as Es,hT as ws,hU as Ps,hV as _s,bn as ct,hW as At,bo as Ns,bh as As,bq as Rs,hX as Os,hY as Fs,hZ as Bs,h_ as Rt,h$ as Ds,i0 as Ws,i1 as Oe,i2 as Ls,eV as $s,A as Qe,v as Ke,aw as Je,d as Us,gT as Ye,d8 as Ot,cf as lt,y as Ft,aJ as Hs,bL as Vs,i3 as Gs,by as Bt,x as Dt,i4 as zs,u as qs,c2 as Qs,U as Ks,w as Js}from"./o02kugc5eyp7bzuk.js";import{r as Ys,J as Wt,K as Xs,u as Zs}from"./ji313uzrpltya54g.js";import{T as Le,i as eo,r as to,B as no,d as so}from"./cnkyxf781f12fdb9.js";import{u as Xe,a5 as oo,bC as Lt,a1 as $t,aP as ao,ae as ro,q as io,J as co,a8 as lo,p as uo,aY as Ut,bl as Ht,br as Vt,bD as Gt,I as mo,bm as fo,b7 as po,b2 as ut,V as zt,aH as go}from"./m1h3d66e9x9d8av7.js";import{D as P,B as ho}from"./gqzdg6plr3pmj597.js";import{a as qt,b as Qt}from"./lrlzvgtohqckew7u.js";import{u as xo}from"./dt5uqt2zhmlrp895.js";import{U as H,G as ie,a as vo,u as Kt,b as Jt}from"./n0s5m6clrqpu2fmq.js";const bo=()=>{const{value:e}=Te("44045625");return e},ar=()=>{const{value:e}=Te("3700195277");return e||!1},Ze=e=>{const t=Ys(e);return bo()&&!!t?.includes("canmore")},rr=()=>{const{value:e}=Te("711369489");return e||!1},Co=e=>pn.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),Io=async e=>{const t=await Co(e),s=new Map(t?.map(r=>[r.id,r])),o=[];for(const{id:r,content:i,version:c,textdoc_type:m,title:f,comments:p}of t)o.push({textdocId:r,messageId:null,type:Rn(m),comments:On(p,i),title:f,content:i,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(o.map(r=>[r.textdocId,r])),persistedTextdocVersions:o,persistedTextdocById:s}};function yo({clientThreadId:e,isEnabled:t}){const s=Le.getServerThreadId(e),{data:o,error:a,isLoading:r,isFetching:i,refetch:c}=fn({queryKey:[s,"textdocs"],enabled:!!s&&t,gcTime:0,queryFn:()=>s&&Io(s)});return l.useEffect(()=>{if(!o)return;const{persistedTextdocVersions:m}=o;_n(m),Nn(m),An(m)},[o]),[{...o,error:a,isLoading:r,isFetching:i},c]}const Yt=jt(null),xe=jt(null);function me(e=vt){return he(Yt,e)}function Mo(e=vt){return he(xe,e)}function ir(){return me(e=>e?.isFetchingFromPersistence)}function cr(){return me(e=>e?.isEnabled)}function Xt(){return he(xe,e=>e?.resolveTempTextdocId)}function lr(){return he(xe,e=>e?.resolveTempCommentId)}function ur(){return he(xe,e=>e?.latestTextdocId??null)}function dr(e){const t=Xt();return me(s=>kt(s,t??{},e))}function Zt(e){const t=Xt();return me(s=>kt(s,t??{},e)?.metadata??null)}function en(){const e=me(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function mr(){return me(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function fr({clientThreadId:e,children:t}){const s=Ze(e),{textdocStore:o,optimisticTextdocStore:a}=So({clientThreadId:e,isEnabled:s});return n.jsx(xe.Provider,{value:a,children:n.jsx(Yt.Provider,{value:o,children:t})})}function So({clientThreadId:e,isEnabled:t}){const s=eo(e),o=to(e,s),a=no(e),r=Fn(a),[{error:i,persistedTextdocVersionById:c,isLoading:m,isFetching:f},p]=yo({clientThreadId:e,isEnabled:t}),x=Bn(),[u,d]=l.useState(!1),g=Dn(),[h,v]=l.useState(!0);Wn(()=>{if(!t)return;const I=Le.getThreadCurrentLeafId(e),T=Le.getThreadConversationTurns(e,I),W=ot(T)?.messages??[],A=at(W);if(A==null)return;const O=A.message.metadata?.canvas?.textdoc_id,te=A.message.metadata?.canvas?.version;O!=null&&te!=null&&x(O,te),d(!0),p().finally(()=>d(!1))});const[k,_]=l.useState(c);l.useEffect(()=>{r&&_(c)},[r]);const b=t&&(r||!h||f&&!m&&u),M=ot(o),N=l.useMemo(()=>{if(!M)return null;const{messages:I}=M,T=Ln(I??[],({message:W})=>W.author.role===gn.System),w=T===-1?I:I?.slice(T+1);return b&&w&&$n(w)?w:null},[b,M]),$=!!N?k:c,S=Un(),E=Hn(),G=l.useMemo(()=>{let I=Jn();return!$||(I=be(I,T=>{for(const[w,W]of $.entries()){T.allTextdocIdSet[w]=w;const A=g.get(w);let O=A&&(A.versionInt??Ce)>(W.versionInt??Ce)?{...W,...A}:W;const te=E.filter(q=>q.textdocId===w&&q.kind===Yn.REMOVE_COMMENT);let ve=O.versionInt;for(const q of te)O=Xn(O,q),ve=Math.max(ve??Ce,q.versionInt??Ce);O={...O,versionInt:ve},T.textdocById[w]=void 0,rt(T,O)}}),!S)?I:be(I,T=>{rt(T,S,!1)})},[$,g,S,E]),V=l.useMemo(()=>be(G,I=>{I.fetchError=i,I.isFetchingFromPersistence=f}),[G,i,f]),[U,K]=l.useState(Vn),z=l.useMemo(()=>N?.length?Gn(r,G,U,N):null,[N,r,U,G]),Z=zn(r,z,v),ee=l.useMemo(()=>Z?qn(V,Z):V,[V,Z]);return l.useEffect(()=>{if(!t)return;const I=Qn(U,o);I&&K(I)},[e,t,o.length]),l.useEffect(()=>{const I=Kn(U,z);I&&K(I)},[z]),{textdocStore:l.useMemo(()=>be(ee,I=>{I.isEnabled!==t&&(I.isEnabled=t);const T=Zn(o,A=>A.messages),w={},W=es(T);for(let A=W.length-1;A>=0;A--){const O=W[A];if(O.type!==ts.Canmore)continue;const te=ns(O.messages),q=at(O.messages)?.message.metadata?.canvas?.textdoc_id??ss(T);q&&te!=null&&!w[q]&&(w[q]=!0,te.nodeId!==I.lastCanvasAssistantMessageById[q]&&(I.lastCanvasAssistantMessageById[q]=te.nodeId))}}),[ee,o,t]),optimisticTextdocStore:U}}function tn(){return ze(e=>e.focusedObject)}function pr(){const e=ze(t=>t.focusedObject);return e?.type!==qe.Textdoc?null:e}function gr(){const e=ze(t=>t.focusedObject);return e?.type!==qe.Textdoc?null:e.history??null}function nn(){return tn()!=null}function hr(e){const t=tn();return Mo(s=>{if(!e||t?.type!==qe.Textdoc)return!1;const o=s?.resolveTempTextdocId??{},a=o[t.textdocId]??t.textdocId,r=o[e]??e;return a===r})}const To=({children:e})=>{const t=en();return t?.length?n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"h-10 px-2",children:e}),n.jsx(P.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:t.map(s=>n.jsx(jo,{textdocId:s},s))})]}):null},jo=({textdocId:e})=>{const t=bt(Zt(e));return n.jsx(P.Item,{icon:Xe,onClick:()=>{os.logButtonClick(as.FILE_DRAWER_ITEM),Et(t.textdocId)},children:t.title})},ko=()=>{const e=Y(),t=en(),s=nn();if(!t||s)return null;const o=t.length;return o===1?n.jsx(Eo,{textdocId:t[0]}):n.jsx(To,{children:n.jsx(ce,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[n.jsx(Xe,{className:"icon-xl-heavy"}),o]})})})},Eo=({textdocId:e})=>{const t=Y(),s=bt(Zt(e));return n.jsx(ce,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsx(Ee,{onClick:()=>Et(s.textdocId),icon:Xe})})},wo=({children:e})=>nn()?null:n.jsx(n.Fragment,{children:e}),Po=({clientThreadId:e,children:t})=>Ze(e)?n.jsx(wo,{children:t}):t,sn={...hn},_o=sn.useInsertionEffect,No=_o||(e=>e());function on(e){const t=l.useRef(()=>{});return No(()=>{t.current=e}),l.useCallback(function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t.current==null?void 0:t.current(...o)},[])}var $e=typeof document<"u"?l.useLayoutEffect:l.useEffect;let dt=!1,Ao=0;const mt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ao++;function Ro(){const[e,t]=l.useState(()=>dt?mt():void 0);return $e(()=>{e==null&&t(mt())},[]),l.useEffect(()=>{dt=!0},[]),e}const Oo=sn.useId,Fo=Oo||Ro;function Bo(){const e=new Map;return{emit(t,s){var o;(o=e.get(t))==null||o.forEach(a=>a(s))},on(t,s){e.set(t,[...e.get(t)||[],s])},off(t,s){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(a=>a!==s))||[])}}}const Do=l.createContext(null),Wo=l.createContext(null),Lo=()=>{var e;return((e=l.useContext(Do))==null?void 0:e.id)||null},$o=()=>l.useContext(Wo),Uo="data-floating-ui-focusable";function Ho(e){const{open:t=!1,onOpenChange:s,elements:o}=e,a=Fo(),r=l.useRef({}),[i]=l.useState(()=>Bo()),c=Lo()!=null,[m,f]=l.useState(o.reference),p=on((d,g,h)=>{r.current.openEvent=d?g:void 0,i.emit("openchange",{open:d,event:g,reason:h,nested:c}),s?.(d,g,h)}),x=l.useMemo(()=>({setPositionReference:f}),[]),u=l.useMemo(()=>({reference:m||o.reference||null,floating:o.floating||null,domReference:o.reference}),[m,o.reference,o.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:p,elements:u,events:i,floatingId:a,refs:x}),[t,p,u,i,a,x])}function Vo(e){e===void 0&&(e={});const{nodeId:t}=e,s=Ho({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||s,a=o.elements,[r,i]=l.useState(null),[c,m]=l.useState(null),p=a?.reference||r,x=l.useRef(null),u=$o();$e(()=>{p&&(x.current=p)},[p]);const d=rs({...e,elements:{...a,...c&&{reference:c}}}),g=l.useCallback(b=>{const M=Ie(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;m(M),d.refs.setReference(M)},[d.refs]),h=l.useCallback(b=>{(Ie(b)||b===null)&&(x.current=b,i(b)),(Ie(d.refs.reference.current)||d.refs.reference.current===null||b!==null&&!Ie(b))&&d.refs.setReference(b)},[d.refs]),v=l.useMemo(()=>({...d.refs,setReference:h,setPositionReference:g,domReference:x}),[d.refs,h,g]),k=l.useMemo(()=>({...d.elements,domReference:p}),[d.elements,p]),_=l.useMemo(()=>({...d,...o,refs:v,elements:k,nodeId:t}),[d,v,k,t,o]);return $e(()=>{o.dataRef.current.floatingContext=_;const b=u?.nodesRef.current.find(M=>M.id===t);b&&(b.context=_)}),l.useMemo(()=>({...d,context:_,refs:v,elements:k}),[d,v,k,_])}const ft="active",pt="selected";function Fe(e,t,s){const o=new Map,a=s==="item";let r=e;if(a&&e){const{[ft]:i,[pt]:c,...m}=e;r=m}return{...s==="floating"&&{tabIndex:-1,[Uo]:""},...r,...t.map(i=>{const c=i?i[s]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((i,c)=>(c&&Object.entries(c).forEach(m=>{let[f,p]=m;if(!(a&&[ft,pt].includes(f)))if(f.indexOf("on")===0){if(o.has(f)||o.set(f,[]),typeof p=="function"){var x;(x=o.get(f))==null||x.push(p),i[f]=function(){for(var u,d=arguments.length,g=new Array(d),h=0;h<d;h++)g[h]=arguments[h];return(u=o.get(f))==null?void 0:u.map(v=>v(...g)).find(v=>v!==void 0)}}}else i[f]=p}),i),{})}}function Go(e){e===void 0&&(e=[]);const t=e.map(c=>c?.reference),s=e.map(c=>c?.floating),o=e.map(c=>c?.item),a=l.useCallback(c=>Fe(c,e,"reference"),t),r=l.useCallback(c=>Fe(c,e,"floating"),s),i=l.useCallback(c=>Fe(c,e,"item"),o);return l.useMemo(()=>({getReferenceProps:a,getFloatingProps:r,getItemProps:i}),[a,r,i])}function gt(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const zo=e=>({name:"inner",options:e,async fn(t){const{listRef:s,overflowRef:o,onFallbackChange:a,offset:r=0,index:i=0,minItemsVisible:c=4,referenceOverflowThreshold:m=0,scrollRef:f,...p}=is(e,t),{rects:x,elements:{floating:u}}=t,d=s.current[i],g=f?.current||u,h=u.clientTop||g.clientTop,v=u.clientTop!==0,k=g.clientTop!==0,_=u===g;if(!d)return{};const b={...t,...await wt(-d.offsetTop-u.clientTop-x.reference.height/2-d.offsetHeight/2-r).fn(t)},M=await Ne(gt(b,g.scrollHeight+h+u.clientTop),p),N=await Ne(b,{...p,elementContext:"reference"}),R=Re(0,M.top),$=b.y+R,S=cs(Re(0,g.scrollHeight+(v&&_||k?h*2:0)-R-Re(0,M.bottom)));if(g.style.maxHeight=S+"px",g.scrollTop=R,a){const E=g.scrollHeight>g.offsetHeight&&g.offsetHeight<d.offsetHeight*c-1||N.top>=-m||N.bottom>=-m;se.flushSync(()=>a(E))}return o&&(o.current=await Ne(gt({...b,y:$},g.offsetHeight+h+u.clientTop),p)),{y:$}}});function qo(e,t){const{open:s,elements:o}=e,{enabled:a=!0,overflowRef:r,scrollRef:i,onChange:c}=t,m=on(c),f=l.useRef(!1),p=l.useRef(null),x=l.useRef(null);l.useEffect(()=>{if(!a)return;function d(h){if(h.ctrlKey||!g||r.current==null)return;const v=h.deltaY,k=r.current.top>=-.5,_=r.current.bottom>=-.5,b=g.scrollHeight-g.clientHeight,M=v<0?-1:1,N=v<0?"max":"min";g.scrollHeight<=g.clientHeight||(!k&&v>0||!_&&v<0?(h.preventDefault(),se.flushSync(()=>{m(R=>R+Math[N](v,b*M))})):/firefox/i.test(ls())&&(g.scrollTop+=v))}const g=i?.current||o.floating;if(s&&g)return g.addEventListener("wheel",d),requestAnimationFrame(()=>{p.current=g.scrollTop,r.current!=null&&(x.current={...r.current})}),()=>{p.current=null,x.current=null,g.removeEventListener("wheel",d)}},[a,s,o.floating,r,i,m]);const u=l.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const d=i?.current||o.floating;if(!(!r.current||!d||!f.current)){if(p.current!==null){const g=d.scrollTop-p.current;(r.current.bottom<-.5&&g<-1||r.current.top<-.5&&g>1)&&se.flushSync(()=>m(h=>h+g))}requestAnimationFrame(()=>{p.current=d.scrollTop})}}}),[o.floating,m,r,i]);return l.useMemo(()=>a?{floating:u}:{},[a,u])}let fe=l.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});fe.displayName="FloatingContext";let et=l.createContext(null);et.displayName="PlacementContext";function Qo(e){return l.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function Ko(){return l.useContext(fe).setReference}function Jo(){return l.useContext(fe).getReferenceProps}function Yo(){let{getFloatingProps:e,slot:t}=l.useContext(fe);return l.useCallback((...s)=>Object.assign({},e(...s),{"data-anchor":t.anchor}),[e,t])}function Xo(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=l.useContext(et),s=l.useMemo(()=>e,[JSON.stringify(e,(a,r)=>{var i;return(i=r?.outerHTML)!=null?i:r})]);oe(()=>{t?.(s??null)},[t,s]);let o=l.useContext(fe);return l.useMemo(()=>[o.setFloating,e?o.styles:{}],[o.setFloating,e,o.styles])}let ht=4;function Zo({children:e,enabled:t=!0}){let[s,o]=l.useState(null),[a,r]=l.useState(0),i=l.useRef(null),[c,m]=l.useState(null);ea(c);let f=t&&s!==null&&c!==null,{to:p="bottom",gap:x=0,offset:u=0,padding:d=0,inner:g}=ta(s,c),[h,v="center"]=p.split(" ");oe(()=>{f&&r(0)},[f]);let{refs:k,floatingStyles:_,context:b}=Vo({open:f,placement:h==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${h}`:`${h}-${v}`,strategy:"absolute",transform:!1,middleware:[wt({mainAxis:h==="selection"?0:x,crossAxis:u}),us({padding:d}),h!=="selection"&&ds({padding:d}),h==="selection"&&g?zo({...g,padding:d,overflowRef:i,offset:a,minItemsVisible:ht,referenceOverflowThreshold:d,onFallbackChange(V){var U,K;if(!V)return;let z=b.elements.floating;if(!z)return;let Z=parseFloat(getComputedStyle(z).scrollPaddingBottom)||0,ee=Math.min(ht,z.childElementCount),C=0,I=0;for(let T of(K=(U=b.elements.floating)==null?void 0:U.childNodes)!=null?K:[])if(T instanceof HTMLElement){let w=T.offsetTop,W=w+T.clientHeight+Z,A=z.scrollTop,O=A+z.clientHeight;if(w>=A&&W<=O)ee--;else{I=Math.max(0,Math.min(W,O)-Math.max(w,A)),C=T.clientHeight;break}}ee>=1&&r(T=>{let w=C*ee-I+Z;return T>=w?T:w})}}):null,ms({padding:d,apply({availableWidth:V,availableHeight:U,elements:K}){Object.assign(K.floating.style,{overflow:"auto",maxWidth:`${V}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${U}px)`})}})].filter(Boolean),whileElementsMounted:xn}),[M=h,N=v]=b.placement.split("-");h==="selection"&&(M="selection");let R=l.useMemo(()=>({anchor:[M,N].filter(Boolean).join(" ")}),[M,N]),$=qo(b,{overflowRef:i,onChange:r}),{getReferenceProps:S,getFloatingProps:E}=Go([$]),G=B(V=>{m(V),k.setFloating(V)});return l.createElement(et.Provider,{value:o},l.createElement(fe.Provider,{value:{setFloating:G,setReference:k.setReference,styles:_,getReferenceProps:S,getFloatingProps:E,slot:R}},e))}function ea(e){oe(()=>{if(!e)return;let t=new MutationObserver(()=>{let s=window.getComputedStyle(e).maxHeight,o=parseFloat(s);if(isNaN(o))return;let a=parseInt(s);isNaN(a)||o!==a&&(e.style.maxHeight=`${Math.ceil(o)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function ta(e,t){var s,o,a;let r=Be((s=e?.gap)!=null?s:"var(--anchor-gap, 0)",t),i=Be((o=e?.offset)!=null?o:"var(--anchor-offset, 0)",t),c=Be((a=e?.padding)!=null?a:"var(--anchor-padding, 0)",t);return{...e,gap:r,offset:i,padding:c}}function Be(e,t,s=void 0){let o=Pt(),a=B((m,f)=>{if(m==null)return[s,null];if(typeof m=="number")return[m,null];if(typeof m=="string"){if(!f)return[s,null];let p=xt(m,f);return[p,x=>{let u=an(m);{let d=u.map(g=>window.getComputedStyle(f).getPropertyValue(g));o.requestAnimationFrame(function g(){o.nextFrame(g);let h=!1;for(let[k,_]of u.entries()){let b=window.getComputedStyle(f).getPropertyValue(_);if(d[k]!==b){d[k]=b,h=!0;break}}if(!h)return;let v=xt(m,f);p!==v&&(x(v),p=v)})}return o.dispose}]}return[s,null]}),r=l.useMemo(()=>a(e,t)[0],[e,t]),[i=r,c]=l.useState();return oe(()=>{let[m,f]=a(e,t);if(c(m),!!f)return f(c)},[e,t]),i}function an(e){let t=/var\((.*)\)/.exec(e);if(t){let s=t[1].indexOf(",");if(s===-1)return[t[1]];let o=t[1].slice(0,s).trim(),a=t[1].slice(s+1).trim();return a?[o,...an(a)]:[o]}return[]}function xt(e,t){let s=document.createElement("div");t.appendChild(s),s.style.setProperty("margin-top","0px","important"),s.style.setProperty("margin-top",e,"important");let o=parseFloat(window.getComputedStyle(s).marginTop)||0;return t.removeChild(s),o}var na=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(na||{}),sa=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(sa||{}),oa=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(oa||{});function De(e,t=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,o=Ls(t(e.items.slice()),r=>r.dataRef.current.domRef.current),a=s?o.indexOf(s):null;return a===-1&&(a=null),{items:o,activeItemIndex:a}}let aa={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var s,o,a,r,i;if(e.menuState===1)return e;let c={...e,searchQuery:"",activationTrigger:(s=t.trigger)!=null?s:1,__demoMode:!1};if(t.focus===L.Nothing)return{...c,activeItemIndex:null};if(t.focus===L.Specific)return{...c,activeItemIndex:e.items.findIndex(p=>p.id===t.id)};if(t.focus===L.Previous){let p=e.activeItemIndex;if(p!==null){let x=e.items[p].dataRef.current.domRef,u=Oe(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((o=x.current)==null?void 0:o.previousElementSibling)===d.current||((a=d.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeItemIndex:u}}}}else if(t.focus===L.Next){let p=e.activeItemIndex;if(p!==null){let x=e.items[p].dataRef.current.domRef,u=Oe(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((r=x.current)==null?void 0:r.nextElementSibling)===d.current||((i=d.current)==null?void 0:i.nextElementSibling)===null)return{...c,activeItemIndex:u}}}}let m=De(e),f=Oe(t,{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...m,activeItemIndex:f}},3:(e,t)=>{let s=e.searchQuery!==""?0:1,o=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(i=>{var c;return((c=i.dataRef.current.textValue)==null?void 0:c.startsWith(o))&&!i.dataRef.current.disabled}),r=a?e.items.indexOf(a):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let s=De(e,o=>[...o,{id:t.id,dataRef:t.dataRef}]);return{...e,...s}},6:(e,t)=>{let s=De(e,o=>{let a=o.findIndex(r=>r.id===t.id);return a!==-1&&o.splice(a,1),o});return{...e,...s,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},tt=l.createContext(null);tt.displayName="MenuContext";function Pe(e){let t=l.useContext(tt);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Pe),s}return t}function ra(e,t){return _t(t.type,aa,e,t)}let ia=l.Fragment;function ca(e,t){let{__demoMode:s=!1,...o}=e,a=l.useReducer(ra,{__demoMode:s,menuState:s?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsElement:i,buttonElement:c},m]=a,f=we(t);fs(r===0,[c,i],(d,g)=>{m({type:1}),ps(g,gs.Loose)||(d.preventDefault(),c?.focus())});let p=B(()=>{m({type:1})}),x=l.useMemo(()=>({open:r===0,close:p}),[r,p]),u={ref:f};return re.createElement(Zo,null,re.createElement(tt.Provider,{value:a},re.createElement(hs,{value:_t(r,{0:Se.Open,1:Se.Closed})},ue({ourProps:u,theirProps:o,slot:x,defaultTag:ia,name:"Menu"}))))}let la="button";function ua(e,t){var s;let o=l.useId(),{id:a=`headlessui-menu-button-${o}`,disabled:r=!1,autoFocus:i=!1,...c}=e,[m,f]=Pe("Menu.Button"),p=Jo(),x=xs(),u=we(t,Ko(),B(S=>f({type:7,element:S}))),d=B(S=>{switch(S.key){case F.Space:case F.Enter:case F.ArrowDown:S.preventDefault(),S.stopPropagation(),se.flushSync(()=>f({type:0})),f({type:2,focus:L.First});break;case F.ArrowUp:S.preventDefault(),S.stopPropagation(),se.flushSync(()=>f({type:0})),f({type:2,focus:L.Last});break}}),g=B(S=>{switch(S.key){case F.Space:S.preventDefault();break}}),h=B(S=>{var E;if(vs(S.currentTarget))return S.preventDefault();r||(m.menuState===0?(se.flushSync(()=>f({type:1})),(E=m.buttonElement)==null||E.focus({preventScroll:!0})):(S.preventDefault(),f({type:0})))}),{isFocusVisible:v,focusProps:k}=bs({autoFocus:i}),{isHovered:_,hoverProps:b}=Cs({isDisabled:r}),{pressed:M,pressProps:N}=Is({disabled:r}),R=l.useMemo(()=>({open:m.menuState===0,active:M||m.menuState===0,disabled:r,hover:_,focus:v,autofocus:i}),[m,_,v,M,r,i]),$=Nt(p(),{ref:u,id:a,type:ys(e,m.buttonElement),"aria-haspopup":"menu","aria-controls":(s=m.itemsElement)==null?void 0:s.id,"aria-expanded":m.menuState===0,disabled:r||void 0,autoFocus:i,onKeyDown:d,onKeyUp:g,onClick:h},k,b,N);return ue({mergeRefs:x,ourProps:$,theirProps:c,slot:R,defaultTag:la,name:"Menu.Button"})}let da="div",ma=it.RenderStrategy|it.Static;function fa(e,t){var s,o;let a=l.useId(),{id:r=`headlessui-menu-items-${a}`,anchor:i,portal:c=!1,modal:m=!0,transition:f=!1,...p}=e,x=Qo(i),[u,d]=Pe("Menu.Items"),[g,h]=Xo(x),v=Yo(),[k,_]=l.useState(null),b=we(t,x?g:null,B(C=>d({type:8,element:C})),_),M=Ms(u.itemsElement);x&&(c=!0);let N=Ss(),[R,$]=Ts(f,k,N!==null?(N&Se.Open)===Se.Open:u.menuState===0);js(R,u.buttonElement,()=>{d({type:1})});let S=u.__demoMode?!1:m&&u.menuState===0;ks(S,M);let E=u.__demoMode?!1:m&&u.menuState===0;Es(E,{allowed:l.useCallback(()=>[u.buttonElement,u.itemsElement],[u.buttonElement,u.itemsElement])});let G=u.menuState!==0,V=ws(G,u.buttonElement)?!1:R;l.useEffect(()=>{let C=u.itemsElement;C&&u.menuState===0&&C!==M?.activeElement&&C.focus({preventScroll:!0})},[u.menuState,u.itemsElement,M]),Ps(u.menuState===0,{container:u.itemsElement,accept(C){return C.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:C.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(C){C.setAttribute("role","none")}});let U=Pt(),K=B(C=>{var I,T,w;switch(U.dispose(),C.key){case F.Space:if(u.searchQuery!=="")return C.preventDefault(),C.stopPropagation(),d({type:3,value:C.key});case F.Enter:if(C.preventDefault(),C.stopPropagation(),d({type:1}),u.activeItemIndex!==null){let{dataRef:W}=u.items[u.activeItemIndex];(T=(I=W.current)==null?void 0:I.domRef.current)==null||T.click()}At(u.buttonElement);break;case F.ArrowDown:return C.preventDefault(),C.stopPropagation(),d({type:2,focus:L.Next});case F.ArrowUp:return C.preventDefault(),C.stopPropagation(),d({type:2,focus:L.Previous});case F.Home:case F.PageUp:return C.preventDefault(),C.stopPropagation(),d({type:2,focus:L.First});case F.End:case F.PageDown:return C.preventDefault(),C.stopPropagation(),d({type:2,focus:L.Last});case F.Escape:C.preventDefault(),C.stopPropagation(),se.flushSync(()=>d({type:1})),(w=u.buttonElement)==null||w.focus({preventScroll:!0});break;case F.Tab:C.preventDefault(),C.stopPropagation(),se.flushSync(()=>d({type:1})),_s(u.buttonElement,C.shiftKey?ct.Previous:ct.Next);break;default:C.key.length===1&&(d({type:3,value:C.key}),U.setTimeout(()=>d({type:4}),350));break}}),z=B(C=>{switch(C.key){case F.Space:C.preventDefault();break}}),Z=l.useMemo(()=>({open:u.menuState===0}),[u.menuState]),ee=Nt(x?v():{},{"aria-activedescendant":u.activeItemIndex===null||(s=u.items[u.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(o=u.buttonElement)==null?void 0:o.id,id:r,onKeyDown:K,onKeyUp:z,role:"menu",tabIndex:u.menuState===0?0:void 0,ref:b,style:{...p.style,...h,"--button-width":Ns(u.buttonElement,!0).width},...As($)});return re.createElement(Rs,{enabled:c?e.static||R:!1},ue({ourProps:ee,theirProps:p,slot:Z,defaultTag:da,features:ma,visible:V,name:"Menu.Items"}))}let pa=l.Fragment;function ga(e,t){let s=l.useId(),{id:o=`headlessui-menu-item-${s}`,disabled:a=!1,...r}=e,[i,c]=Pe("Menu.Item"),m=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===o:!1,f=l.useRef(null),p=we(t,f);oe(()=>{if(!i.__demoMode&&i.menuState===0&&m&&i.activationTrigger!==0)return Os().requestAnimationFrame(()=>{var E,G;(G=(E=f.current)==null?void 0:E.scrollIntoView)==null||G.call(E,{block:"nearest"})})},[i.__demoMode,f,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let x=Fs(f),u=l.useRef({disabled:a,domRef:f,get textValue(){return x()}});oe(()=>{u.current.disabled=a},[u,a]),oe(()=>(c({type:5,id:o,dataRef:u}),()=>c({type:6,id:o})),[u,o]);let d=B(()=>{c({type:1})}),g=B(E=>{if(a)return E.preventDefault();c({type:1}),At(i.buttonElement)}),h=B(()=>{if(a)return c({type:2,focus:L.Nothing});c({type:2,focus:L.Specific,id:o})}),v=Bs(),k=B(E=>{v.update(E),!a&&(m||c({type:2,focus:L.Specific,id:o,trigger:0}))}),_=B(E=>{v.wasMoved(E)&&(a||m||c({type:2,focus:L.Specific,id:o,trigger:0}))}),b=B(E=>{v.wasMoved(E)&&(a||m&&c({type:2,focus:L.Nothing}))}),[M,N]=Rt(),[R,$]=Ds(),S=l.useMemo(()=>({active:m,focus:m,disabled:a,close:d}),[m,a,d]);return re.createElement(N,null,re.createElement($,null,ue({ourProps:{id:o,ref:p,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":M,"aria-describedby":R,disabled:void 0,onClick:g,onFocus:h,onPointerEnter:k,onMouseEnter:k,onPointerMove:_,onMouseMove:_,onPointerLeave:b,onMouseLeave:b},theirProps:r,slot:S,defaultTag:pa,name:"Menu.Item"})))}let ha="div";function xa(e,t){let[s,o]=Rt();return re.createElement(o,null,ue({ourProps:{ref:t,"aria-labelledby":s,role:"group"},theirProps:e,slot:{},defaultTag:ha,name:"Menu.Section"}))}let va="header";function ba(e,t){let s=l.useId(),{id:o=`headlessui-menu-heading-${s}`,...a}=e,r=Ws();oe(()=>r.register(o),[o,r.register]);let i={id:o,ref:t,role:"presentation",...r.props};return ue({ourProps:i,theirProps:a,slot:{},defaultTag:va,name:"Menu.Heading"})}let Ca="div";function Ia(e,t){return ue({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:Ca,name:"Menu.Separator"})}let ya=le(ca),Ma=le(ua),Sa=le(fa),Ta=le(ga),ja=le(xa),ka=le(ba),Ea=le(Ia),pe=Object.assign(ya,{Button:Ma,Items:Sa,Item:Ta,Section:ja,Heading:ka,Separator:Ea});function wa({show:e,appear:t,children:s}){return n.jsx($s,{as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",show:e,appear:t,children:s})}function ne({onClick:e,href:t,target:s,children:o,disabled:a,icon:r,testId:i}){return n.jsx(pe.Item,{disabled:a,children:({active:c})=>n.jsxs(_e,{onClick:e,href:t,target:s,className:je({"bg-token-sidebar-surface-secondary":c,"hover:bg-token-sidebar-surface-secondary":!c&&!a}),"data-testid":i,children:[r&&n.jsx(r,{className:"icon-md"}),o]})})}function Pa({to:e,children:t,icon:s}){return n.jsx(pe.Item,{children:({active:o})=>n.jsx(vn,{to:e,children:n.jsxs(_e,{$as:"span",className:je(o?"bg-token-sidebar-surface-secondary":"cursor-pointer"),children:[s&&n.jsx(s,{className:"icon-md"}),t]})})})}ge.a`p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer`;const _e=ge.a`flex gap-2 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group items-center`,xr=ge(_e)`border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]`,Ue=ge.div`h-px bg-token-border-light my-1.5`,vr=ge(_e)`${e=>e.$active?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`;function rn({menuItemComponent:e}){const t=X(),s=de(),o=l.useCallback(()=>{j.logEvent(D.clickSidebarAccountPortalMenuItem),Qe(s,"Sidebar account menu item")},[s]),{value:a}=bn("1028682714"),r=He(()=>Ve(()=>import("./sso-lh93s4wrdpp5fblx.js").then(i=>i.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65])).then(i=>i.default));return n.jsxs(n.Fragment,{children:[t?.hasPaidSubscription()&&(a?n.jsx(r,{handleClickCustomerPortal:o,menuItemComponent:e}):n.jsx(e,{onClick:o,icon:oo,children:n.jsx(y,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),t?.canInteractWithGizmos()&&n.jsx(e,{onClick:()=>{j.logEvent(D.accountMenuClickMyGPTs),s(Wt())},icon:Lt,children:n.jsx(y,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),n.jsx(e,{icon:$t,onClick:()=>{H.openModal(ie.UserContext),j.logEvent(D.accountMenuClickCustomizeChatGPT)},children:n.jsx(y,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function cn({menuItemComponent:e,routedMenuItemComponent:t}){const s=X(),o=Te("2756095923")?.value&&s?.isEdu()&&s?.isStandardUserOfAccount();return n.jsxs(n.Fragment,{children:[!o&&n.jsx(t,{to:"/admin",icon:ao,children:n.jsx(y,{...We.myWorkspaceSettings})}),n.jsx(t,{to:Wt(),onClick:()=>{j.logEvent(D.accountMenuClickMyGPTs)},icon:Lt,children:n.jsx(y,{...We.myGpts})}),n.jsx(e,{onClick:()=>{H.openModal(ie.UserContext),j.logEvent(D.accountMenuClickCustomizeChatGPT)},icon:$t,children:n.jsx(y,{...We.chatPreferences})})]})}const We=Ge({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}}),_a=He(()=>Ve(()=>import("./o4d8ft3c9f9f03br.js"),__vite__mapDeps([66,1,2,3,13,12,11,5,6,8,67,68,38,39,40,21])));function br({onClickSettings:e}){return n.jsxs(pe,{as:"div",className:"group relative",children:[n.jsx(Oa,{}),n.jsx(wa,{children:n.jsx(pe.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:n.jsx(Ra,{onClickSettings:e})})})]})}function ln(){const e=!X()?.isEnterprisey()&&!Mt,t=Y(),s=Je(),o=de();return s?n.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[n.jsx("div",{className:"text-sm text-token-text-secondary",children:s?.email}),e&&n.jsx(ce,{label:t.formatMessage(J.addWorkspaceTooltip),side:"right",children:n.jsx("button",{onClick:()=>Qe(o,"profile menu"),children:n.jsx(mo,{className:"icon-sm text-token-text-primary"})})})]}):null}function Na(){const e=X();return e==null?n.jsx(n.Fragment,{children:n.jsx("div",{className:"w-full px-3 py-2",children:n.jsx(ye,{})})}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{}),n.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:n.jsx(dn,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})})]})}function un({menuItemComponent:e}){const t=Ke(),s=Ct(),{data:o}=ke(),a=X(),[r,i]=l.useState(!1),c=Je(),m=Y(),f=Cn();if(!a||!o)return null;const p=a.isWorkspaceAccount(),x=o.accountItems.length>1,u=o.accountItems,d=Us([u.find(h=>h.isPersonalAccount()),...u.filter(h=>!h.isPersonalAccount())]);if(d.sort((h,v)=>h.isPersonalAccount()?1:v.isPersonalAccount()?-1:0),!x)return p?n.jsx(Na,{}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:c?.email})});const g=d.map(h=>n.jsx(e,{disabled:h.isDeactivated(),onClick:()=>{if(h.isDeactivated()||h.id===a?.id)return;i(!0);const{willRedirect:v}=In(s,h.id,t,m,f);v||yn()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:h.isDeactivated()?n.jsx(Aa,{workspace:h,isLoading:r}):n.jsx(dn,{workspace:h,isLoading:r,currentWorkspaceId:a?.id})},h.id));return n.jsxs(n.Fragment,{children:[n.jsx(ln,{}),n.jsx(P.Separator,{}),g]})}function dn({workspace:e,isLoading:t,currentWorkspaceId:s,showCheck:o=!0}){const a=e.canAccessWithCurrentSession,r=!t&&o&&e.id===s;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(Ye,{iconSize:"small",workspace:e,className:je({"flex-shrink-0":!0})})}),n.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:Ot(Y(),e)}),t&&n.jsx(ye,{}),r&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(ro,{className:"icon-sm"})}),!a&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(io,{className:"icon-sm"})})]}),!a&&n.jsx("div",{className:"rowDivClassName",children:n.jsx("small",{className:"text-token-text-secondary",children:n.jsx(y,{...e.ssoConnectionName?J.authenticateWithSSOToAccessWorkspace:J.authenticateWithoutSSOToAccessWorkspace})})})]})}function Aa({workspace:e,isLoading:t}){const s=Y(),o=e.isOwnerOfAccount(),[a,r]=l.useState(!1),i=xo(e.id);return l.useEffect(()=>{i!=null&&a&&(H.setPurchaseWorkspaceData({minimumSeats:Math.max(i,lt),existingAccount:e}),r(!1))},[i,a,e]),n.jsxs(n.Fragment,{children:[n.jsxs(ce,{className:"flex w-full flex-1 items-center gap-2.5",label:s.formatMessage(J.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(co,{className:"icon-sm flex-shrink-0 opacity-30"})}),n.jsx("div",{className:"truncate opacity-30",children:Ot(s,e)})]}),t&&n.jsx(ye,{}),!t&&n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:n.jsx(lo,{className:"icon-sm m-1"})}),n.jsx(P.Portal,{children:n.jsxs(P.Content,{children:[o&&n.jsx(n.Fragment,{children:n.jsx(P.Item,{onClick:()=>{i==null?r(!0):H.setPurchaseWorkspaceData({minimumSeats:Math.max(i,lt),existingAccount:e})},children:a?n.jsx(ye,{}):n.jsx(y,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),n.jsx(P.Item,{onClick:()=>{H.setLeaveWorkspaceData(e)},children:n.jsx(y,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function Ra({onClickSettings:e}){const{data:t}=ke(),s=X(),o=Ft(),a=qt(),{openModal:r}=Qt(),i=It("3905879930");var c=s?.isTeam()??!1,m=!1;if(c&&(m=i.config.get("enabled",!1)),!s||!t)return null;const f=s.isWorkspaceAccount(),p=!o;return n.jsxs("nav",{children:[n.jsx(un,{menuItemComponent:ne}),n.jsx(Ue,{}),f?n.jsx(cn,{menuItemComponent:ne,routedMenuItemComponent:Pa}):n.jsx(rn,{menuItemComponent:ne}),p&&n.jsx(ne,{href:Hs(),target:"_blank",onClick:()=>{j.logEvent(D.clickFaqLink)},icon:uo,children:n.jsx(y,{...J.helpAndFaq})}),n.jsx(ne,{onClick:e,icon:Ut,testId:"accounts-settings-button",children:n.jsx(y,{...J.settings})}),c&&m&&n.jsxs(n.Fragment,{children:[n.jsx(ne,{onClick:()=>{H.openModal(ie.InviteUsersToWorkspace),j.logEvent(D.accountMemberInviteButton,{location:"dropdown-menu-click"}),Q.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Ht,children:n.jsx(y,{...J.addTeammatesButton})}),n.jsx(_a,{workspace:s})]}),a&&n.jsx(Fa,{openDownloadModal:r}),n.jsx(Ue,{}),n.jsx(ne,{onClick:()=>{j.logEvent(D.clickLogOut,{eventSource:"mouse"}),yt()},icon:Vt,children:n.jsx(y,{...J.logOut})})]})}function Oa(){return Je()?n.jsx(Ba,{}):null}function Fa({openDownloadModal:e}){return n.jsxs("span",{children:[n.jsx(Ue,{}),n.jsx(ne,{icon:Gt,onClick:()=>{j.logEvent(D.accountMenuClickDownloadApp),e()},children:n.jsx(y,{...J.downloadApp})})]})}function Ba(){const{data:e}=ke(),t=X(),s=Vs(),o=Gs();if(!t||!e)return null;const a=t.isWorkspaceAccount(),r=e.accountItems.length>1;return n.jsxs(pe.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Ye,{iconSize:"gizmo"})}),n.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[n.jsx("div",{dir:"auto",children:o}),a||r?n.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:s}):null]})]})}const J=Ge({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});function Da(e){Q.logEvent("chatgpt_web_thread_tap_new_thread"),nt.getItem(st.HasSeenNewChatModal)===!0?Bt(e):(nt.setItem(st.HasSeenNewChatModal,!0),H.openModal(ie.NoAuthNewChat))}function Cr(){return vo(ie.NoAuthNewChat)?n.jsx(Wa,{onClose:()=>{H.closeModal(ie.NoAuthNewChat)}}):null}function Wa({onClose:e}){const t=Ke(),s=de(),o=Mn("1934819688"),a=o.config.get("is_redesign_enabled",!1),r=o.config.get("secondary_button_type","cancel"),i=Dt(Ae.signUpButtonText),c=x=>{x.preventDefault(),t({authType:"signup",callback:u=>{Q.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),j.logSignUpButtonClicked({location:"New chat modal",provider:u})}})},m=x=>{x.preventDefault(),t({authType:"login",callback:u=>{Q.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),j.logLogInButtonClicked({location:"New chat modal",provider:u})}})},f=()=>{Q.logEvent("chatgpt_new_chat_modal_cancel_button_clicked"),j.logEvent(D.newChatModalCancelButtonClicked),e()},p=()=>{Q.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),j.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),Bt(s),e()};return l.useEffect(()=>{Q.logEvent("chatgpt_new_chat_modal_shown"),j.logEvent(D.newChatModalShown)},[]),n.jsx(Sn,{isOpen:!0,type:"success",onClose:e,noPadding:!0,size:"custom",className:"max-w-sm",children:n.jsxs("div",{className:"flex flex-col justify-center p-6",children:[n.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[n.jsx("div",{}),n.jsx("div",{className:"text-xl font-medium",children:n.jsx(y,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),n.jsx("div",{className:"flex justify-end",children:a?n.jsx(Tn,{onClick:e}):null})]}),n.jsx("p",{className:"mb-6 text-center text-token-text-secondary",children:n.jsx(y,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:x=>n.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:c,children:x}),login:x=>n.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:m,children:x})}})}),n.jsx(ae,{className:"mb-3",color:a?"primary":"danger",size:"giant",onClick:p,children:n.jsx(y,{id:"cBGbrD",defaultMessage:"Clear chat"})}),r==="cancel"?n.jsx(ae,{size:"giant",onClick:f,color:"secondary",children:n.jsx(y,{...Ae.cancelButtonText})}):null,r==="login"?n.jsx(ae,{size:"giant",onClick:()=>{t({authType:"login",callback:x=>{j.logLogInButtonClicked({location:"New chat modal",provider:x})}})},color:"ghost",children:n.jsx(y,{...Ae.logInButtonText})}):null,r==="signup"?n.jsx(ae,{size:"giant",onClick:()=>{t({authType:"signup",callback:x=>{j.logSignUpButtonClicked({location:"New chat modal",provider:x})}})},color:"ghost",children:n.jsx(y,{...i})}):null]})})}function La({clientThreadId:e,location:t}){const s=Ct(),{id:o}=Xs(e),a=Zs(!0),r=de(),i=St(),c=jn();return l.useCallback(()=>{kn(En(s))?Da(r):i?r({pathname:c.pathname,search:c.search},{state:zs()}):(a({modelId:o,location:t}),Q.logEvent("chatgpt_web_thread_tap_new_thread"))},[s,t,o,a,r,i,c])}const $a=He(()=>Ve(()=>import("./o4d8ft3c9f9f03br.js"),__vite__mapDeps([66,1,2,3,13,12,11,5,6,8,67,68,38,39,40,21])));function Ir({showShareButton:e,showProfileDropdown:t,clientThreadId:s}){const o=so(s),a=Y(),r=Ze(s),{layer:i}=Me("1547743984"),c=i.get("show_share_button_text",!1),m=a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),f=Qs();return n.jsxs(n.Fragment,{children:[!1,r&&n.jsx(ko,{}),!1,e&&o&&n.jsx(Po,{clientThreadId:s,children:c?n.jsx(ae,{onClick:()=>H.openSharingModal(o),icon:ut,label:m,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",children:n.jsx("span",{style:{display:"var(--screen-size-hidden-on-compact-mode,)"},children:m})}):n.jsx(ce,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:n.jsx(Ee,{"data-testid":"share-chat-button",onClick:()=>H.openSharingModal(o),icon:ut})})}),f&&n.jsx(Ks,{className:Pn.sidebarIcon,icon:n.jsx(zt,{}),label:a.formatMessage({id:"rnCpM4",defaultMessage:"New Chat"}),style:{display:"var(--screen-size-hidden-on-wide-mode)"}}),t&&n.jsx(Ha,{})]})}function Ua({to:e,children:t,icon:s}){const o=de();return n.jsx(P.Item,{icon:s,onSelect:()=>o(e),children:t})}function Ha(){const{isUnauthenticated:e}=Tt();return e?n.jsx(Ka,{}):n.jsx(Va,{})}function Va(){const{data:e}=ke(),t=X(),s=t?.isPlus()??!1,o=t?.isWorkspaceAccount()??!1,{openSettings:a}=qs(),r=qt(),{openModal:i}=Qt(),{layer:c}=Me("2888142241"),m=It("3905879930");var f=t?.isTeam()??!1,p=!1;f&&(p=m.config.get("enabled",!1));const{doesUserHaveAnyAccountsWithPlusFeatures:x}=wn(),{layer:u}=Me("2670443078");if(!t||!e)return null;const d=e.accountItems.length>1;let g=s;!o&&!s&&x&&u.get("is_gating_fix_enabled",!1)&&(g=x);const h=!o&&!g&&!Mt&&c.get("is_upgrade_in_settings",!1);return n.jsxs(ho,{triggerButton:n.jsx("button",{onClick:()=>{j.logEvent(D.accountOpenProfileMenu),Q.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",style:{display:"var(--screen-size-hidden-on-compact-mode, flex)"},children:n.jsx(Ye,{iconSize:"medium"})}),children:[d&&n.jsx(un,{menuItemComponent:P.Item}),d?n.jsx(P.Separator,{}):null,o?n.jsx(cn,{menuItemComponent:P.Item,routedMenuItemComponent:Ua}):n.jsx(rn,{menuItemComponent:P.Item}),n.jsx(P.Item,{icon:Ut,onClick:()=>a(),"data-testid":"settings-menu-item",children:n.jsx(y,{defaultMessage:"Settings",id:"navigation.settings.0"})}),n.jsx(P.Separator,{}),f&&p&&n.jsxs(n.Fragment,{children:[n.jsx(P.Item,{"data-testid":"settings-menu-item-invite-teammates",onClick:()=>{H.openModal(ie.InviteUsersToWorkspace),j.logEvent(D.accountMemberInviteButton,{eventSource:"mouse",location:"profile_drop_down"}),Q.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Ht,children:n.jsx(y,{...mn.addTeammatesButton})}),n.jsx($a,{workspace:t})]}),r&&n.jsx(za,{openDownloadModal:i}),h&&n.jsx(qa,{}),(h||r)&&n.jsx(P.Separator,{}),n.jsx(P.Item,{onClick:()=>{j.logEvent(D.clickLogOut,{eventSource:"mouse"}),j.logLogOutButtonClicked({location:"profile_drop_down"}),yt()},"data-testid":"log-out-menu-item",icon:Vt,children:n.jsx(y,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function Ga({onClick:e,className:t,testId:s}){const o=Y(),a=St(),r=a?o.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):o.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return n.jsx(ce,{sideOffset:4,label:r,className:je("flex",t),children:n.jsx(Ee,{onClick:()=>{H.closePopoverNavSidebar(),e()},icon:a?go:zt,surfaceContext:"secondary","aria-label":r,"data-testid":s})})}function yr({clientThreadId:e}){const[t]=Kt(a=>[a.activeStageSidebar]),s=Jt(),o=La({clientThreadId:e,location:"Navigation actions"});return!s&&!t?null:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Qa,{}),n.jsx(Ga,{onClick:o})]})}function za({openDownloadModal:e}){return n.jsx("span",{children:n.jsx(P.Item,{icon:Gt,onClick:()=>{e(),j.logEvent(D.accountMenuClickDownloadApp)},children:n.jsx(y,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function qa(){const e=de(),s=X()?.wasPaidCustomer()??!1,o=()=>{Q.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),j.logEvent(D.plusUpgradeInSettingsMenuClicked),Qe(e,"Upper right settings menu")};return n.jsx(P.Item,{icon:fo,onClick:o,children:s?n.jsx(y,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):n.jsx(y,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Qa(){const e=Y(),[t]=Kt(r=>[r.activeStageSidebar]),s=Jt(),o=Ft(),{isUnauthenticated:a}=Tt();return!t&&!s||!o||a?null:n.jsx(ce,{label:e.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:n.jsx(Ee,{"aria-label":e.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:H.toggleNavSidebar,icon:po,surfaceContext:"primary"})})}function Ka(){const e=Ke(),t=Js(),s=Dt(mn.signUpCta),{layer:o}=Me("3637408529"),a=o.get("is_desktop_primary_auth_button_on_right",!1),r=()=>{e({authType:"login",callback:p=>{j.logLogInButtonClicked({location:"Chat header",provider:p})}})},i=()=>{e({authType:"signup",callback:p=>{j.logSignUpButtonClicked({location:"Chat header",provider:p})}})},c=n.jsx(ae,{onClick:r,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:n.jsx(y,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),m=n.jsx(ae,{color:t?"secondary":"primary",onClick:i,size:"small","data-testid":"signup-button",children:n.jsx(y,{...s})},"signup"),f=t?[c,m]:[m,c];return n.jsx("div",{className:"flex items-center justify-center gap-2",children:a?f.reverse():f})}const mn=Ge({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});export{bo as A,yr as B,Ir as C,Cr as D,Qa as E,Ha as L,Zo as M,Ga as N,wa as P,Xo as R,fr as T,vr as U,Va as a,Yo as b,br as c,_e as d,ur as e,pr as f,Xt as g,Da as h,xr as i,La as j,Ze as k,rr as l,ar as m,dr as n,ir as o,lr as p,hr as q,Zt as r,nn as s,gr as t,tn as u,mr as v,cr as w,Qo as x,Ko as y,me as z};
//# sourceMappingURL=cd3lr7lq8spr3x1m.js.map
