const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-lh93s4wrdpp5fblx.js","assets/cya1ek7zbsww3e8p.js","assets/m1h3d66e9x9d8av7.js","assets/root-fuvdhw7t.css","assets/h2x37ub1souzo3by.js","assets/o02kugc5eyp7bzuk.js","assets/conversation-small-cll5buey.css","assets/cd3lr7lq8spr3x1m.js","assets/ji313uzrpltya54g.js","assets/cnkyxf781f12fdb9.js","assets/cnlquey73j7uw8fu.js","assets/lxcl4lkoqrle7fky.js","assets/gqzdg6plr3pmj597.js","assets/lrlzvgtohqckew7u.js","assets/clvle6hjcebazwfi.js","assets/dt5uqt2zhmlrp895.js","assets/n0s5m6clrqpu2fmq.js","assets/ck6f40emr7l3i0b3.js","assets/lptuk0q8xn5ezb1r.js","assets/eqdwfm1ss7l1qetb.js","assets/br9sj6yk029klw3b.js","assets/gq7tdevv4xdhasrb.js","assets/md510keitf2ivqa8.js","assets/beqhh5k54ufxbjqa.js","assets/n7mihaj2sjxshzb0.js","assets/pao6j5dhdawubk5p.js","assets/ht9d44tegtx4tp9s.js","assets/kav457re2wa0x93n.js","assets/bhomxqrcs87wp0ug.js","assets/bjiqtsa2cgudgxj8.js","assets/oqh7ik4ekqszwe7b.js","assets/itghwucfyv5ciib7.js","assets/hxbgovcs84mk9v9r.js","assets/o8i8jua4ntxjn5y6.js","assets/l2vkye9yek1pl7hq.js","assets/983a0dy92b3ronpv.js","assets/idzy572xfl7a5o6a.js","assets/hv7e2fak15kx5n21.js","assets/kqwdyvkaaavvn8k3.js","assets/n34hy54j5bdr6y6c.js","assets/f084274wzviqv3v8.js","assets/pcjzq5zspamo9j8w.js","assets/zy8toyr2lgrov161.js","assets/e9lafxuzyeh4418f.js","assets/oq0wn5kmxc7rsdva.js","assets/obop3mkgis8ubd40.js","assets/nhwwej1nq0zrd7sc.js","assets/ecaf2k8jxs5jdeba.js","assets/dg59tnhw4y7axib5.js","assets/k7gblveuiw9977ct.js","assets/o3xqxqfvzxvixas7.js","assets/t9hafwtdc4pa0i6h.js","assets/cwu0zz6c73ktxehb.js","assets/i54f37mdctri2apr.js","assets/jxvdqm13zt0qwgq5.js","assets/pbdfoko4gp72yxjd.js","assets/iej0cupg2dqkmejt.js","assets/g0lnj6ucdra0znz0.js","assets/m0ufyovf28ile0yl.js","assets/jk8w36bsokizpx57.js","assets/jci37cw2gaa1mzk1.js","assets/m6ckmcg5tc6lq0tg.js","assets/jwu51nzixsme9dia.js","assets/eg0ljzej0vy0q2ev.js","assets/l7os5ptlstx02j38.js","assets/hebnsu59jjcxuabp.js","assets/hdbfjkke7bjaucig.js","assets/swiper-kmk1dd5x.css"])))=>i.map(i=>d[i]);
import{a5 as $s,a6 as js,Q as ks,aB as W,t as s,T as y,r as m,d7 as Ns,a1 as Cs,d as x,cS as Ss,aw as Ge,a3 as M,bJ as R,aW as _s,ad as de,eo as Ps,eI as Ds,g as Ve,a8 as $,aA as Ts,D as Ms,bH as qe,O as Xe,aV as As,P as ne,cD as he,f4 as Es}from"./cya1ek7zbsww3e8p.js";import{n as Is,J as Ls,a7 as Fs,h as Ke,a8 as zs,c as Je,d as Qe}from"./cnkyxf781f12fdb9.js";import{a as Hs,b as Rs}from"./l0j08voj1v7au9ty.js";import{b as es,R as ss,u as ts,C as Us,c as Os,d as Ys,S as xe,D as Bs,e as Ws}from"./m24o883itte139y6.js";import{c as Z,j$ as ue,ah as z,nG as Zs,dz as fe,nH as ns,dA as rs,nI as Gs,dB as P,j7 as Vs,nJ as as,l7 as qs,f7 as Xs,y as Ks,ag as Js,c0 as be,b$ as Qs,bV as G,af as ve,nK as os,_ as D,nL as me,l5 as is,d as cs,nM as et,Y as st,i$ as tt,nN as nt}from"./o02kugc5eyp7bzuk.js";import{U as rt}from"./l2vkye9yek1pl7hq.js";import{b as at,u as ot}from"./bjiqtsa2cgudgxj8.js";import{b as it}from"./lxcl4lkoqrle7fky.js";import{a as ct,b as lt}from"./br9sj6yk029klw3b.js";import{E as A}from"./clvle6hjcebazwfi.js";import{u as dt,p as ht,W as ut,X as ft,C as mt,ce as pt,a4 as gt}from"./m1h3d66e9x9d8av7.js";import{b as H}from"./lptuk0q8xn5ezb1r.js";import{g as ls}from"./kqwdyvkaaavvn8k3.js";import{v as ye,C as xt,A as bt,a as vt,L as yt,B as wt,p as $t,b as jt,e as kt,P as Nt,f as Ct,g as St}from"./dvw11z2kumzaga8m.js";import{a as _t}from"./n34hy54j5bdr6y6c.js";import{S as Pt}from"./983a0dy92b3ronpv.js";import{m as we}from"./cnlquey73j7uw8fu.js";import{E as Dt}from"./fzfry531gccgg793.js";import{B as Tt,D as Mt}from"./gqzdg6plr3pmj597.js";import"./nbye4lkf0z5yx7k0.js";import"./ji313uzrpltya54g.js";function At(e){return e&&/^turn[0-9]+ifs[0-9]+$/.test(e)}const Et=$s(()=>js(()=>import("./sso-lh93s4wrdpp5fblx.js").then(e=>e.B),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67])).then(e=>e.BusinessesMap),{ssr:!1});function It({attribution:e}){const t=m.useContext(z),n=Zs(t?.message.id,e.attributable_index),r=fe(),[a,o]=ns();return s.jsx(Ft,{highlightProb:n,isDebugMode:r,probMin:a,probMax:o,content:e.alt??"",attributableIndex:e.attributable_index})}function Lt({content:e,highlightProb:t,isDebugMode:n,probMin:r,probMax:a,attributableIndex:o}){const i=a===r?t>a?1:0:(t-r)/(a-r),c=W().resolvedTheme==="dark";return s.jsxs("span",{style:{backgroundColor:c?`rgba(130, 97, 22, ${i})`:`rgba(246, 233, 204, ${i})`},className:y("relative",n&&"hover:border hover:border-red-500/50"),children:[n&&s.jsx("span",{className:"absolute -top-4 left-0 whitespace-nowrap text-xs text-red-500",children:s.jsx(Z,{label:"Attribution Index",side:"top",children:o})}),s.jsx(ue,{rehypePlugins:es,remarkPlugins:ss,urlTransform:ts,components:{p:({children:u})=>s.jsx(s.Fragment,{children:u})},children:e})]})}const Ft=ks.memo(Lt);function zt({attributionFooter:e}){const[t,n]=m.useState(!1),r=fe(),[a,o]=ns(),i=rs(),c=p=>{P.setProbMin(p),p>o&&u(p)},u=p=>{P.setProbMax(p),p<a&&c(p)},h=Gs(),d=Ht();m.useEffect(()=>Ns(document,{keydown:p=>{p.code==="Digit3"&&p.altKey&&t&&P.setPaused(!h)}}),[h,t]);const l=Vs();return d?s.jsxs(s.Fragment,{children:[s.jsxs("button",{className:y("rounded-xl px-2 py-1 text-sm text-black",e.status==="error"?"bg-red-100 hover:bg-red-200":e.status==="done"?"bg-green-100 hover:bg-green-200":"bg-token-main-surface-secondary hover:bg-token-main-surface-tertiary"),onClick:()=>n(p=>!p),children:["(DEBUG) Enhanched Attributions: ",e.status]}),t&&s.jsx("div",{className:"sticky bottom-20 left-0 z-10 rounded-xl border border-token-border-heavy bg-white/90 p-4 dark:bg-black/90",children:s.jsxs("div",{className:"grid grid-cols-[auto,auto,1fr] gap-1 whitespace-nowrap text-sm",children:[s.jsx("label",{className:"border-b",children:"Enhanced Attributions"}),s.jsx("div",{className:"col-span-2 flex justify-end",children:s.jsx("button",{onClick:()=>n(!1),children:"x"})}),e.status==="error"&&s.jsxs("span",{className:"col-span-3 text-red-500",children:["Error",s.jsx("pre",{children:e.error})]}),s.jsx("label",{children:"Debug View"}),s.jsx("input",{type:"checkbox",checked:r,onChange:()=>P.setDebugMode(!r),className:"col-span-2 bg-token-main-surface-primary"}),s.jsx("label",{children:"Paused (⌥+3)"}),s.jsx("input",{type:"checkbox",checked:h,onChange:()=>P.setPaused(!h),className:"col-span-2 bg-token-main-surface-primary"}),s.jsx("label",{children:"Disable segment replacement"}),s.jsx("input",{type:"checkbox",checked:l,onChange:()=>P.setDisableSegmentReplacement(!l),className:"col-span-2 bg-token-main-surface-primary"}),s.jsx("label",{children:"Probility Min"}),s.jsx("input",{type:"number",value:a,onChange:p=>c(parseFloat(p.target.value)),className:"w-16 bg-token-main-surface-primary p-0 text-sm"}),s.jsx("input",{type:"range",value:a,min:0,max:1,step:.001,onChange:p=>c(parseFloat(p.target.value))}),s.jsx("label",{children:"Probability Max"}),s.jsx("input",{type:"number",value:o,onChange:p=>u(parseFloat(p.target.value)),className:"w-16 bg-token-main-surface-primary p-0 text-sm"}),s.jsx("input",{type:"range",value:o,min:0,max:1,step:.001,onChange:p=>u(parseFloat(p.target.value))}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:"Num Entries"}),s.jsx("span",{className:"text-xxs",children:"(must re-hover)"})]}),s.jsx("input",{type:"number",value:i,onChange:p=>P.setNumProbs(parseInt(p.target.value)),className:"w-16 bg-token-main-surface-primary p-0 text-sm"}),s.jsx("input",{type:"range",value:i,min:0,max:20,onChange:p=>P.setNumProbs(parseInt(p.target.value))}),s.jsxs("div",{className:"col-span-3",children:[s.jsx("button",{onClick:P.reset,className:"rounded-xl bg-token-main-surface-secondary px-2 py-1 text-sm text-token-text-secondary hover:bg-token-main-surface-tertiary",children:"Reset"}),s.jsx("button",{onClick:()=>n(!1),className:"rounded-xl bg-token-main-surface-secondary px-2 py-1 text-sm text-token-text-secondary hover:bg-token-main-surface-tertiary",children:"Close"})]})]})})]}):null}function Ht(){const{value:e}=Cs("2192543539");return e}function $e(e,t){try{return BigInt(e).toLocaleString(t)}catch{const n=Number(e);return e.includes("e")||e.includes("E")?n.toExponential():n.toLocaleString(t,{maximumFractionDigits:6})}}function Rt({data:e,trackContentReferenceEvent:t}){m.useEffect(()=>{t(x.searchContentReferenceShown,"search_content_reference_shown",e.type)},[t,e.type]);const{currentLocale:n}=Ss();return e.expression&&e.result!=null?s.jsxs("div",{className:"no-scrollbar overflow-auto sm:overflow-hidden",children:[s.jsxs("div",{className:"pb-1 text-lg font-semibold",children:[e.prefix&&s.jsx("span",{children:e.prefix}),s.jsx("span",{children:$e(e.result,n)}),e.suffix&&s.jsx("span",{children:e.suffix})]}),s.jsx("div",{className:"tracking-wide text-token-text-primary",children:`${e.expression}=${$e(e.result,n)}`})]}):null}function Ut(e){return s.jsxs(Ge,{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",...e,children:[s.jsx("path",{d:"M4.42 0.75H2.8625H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V11.65C0.75 12.7546 1.64543 13.65 2.75 13.65H2.8625C2.8625 13.65 2.8625 13.65 2.8625 13.65C2.8625 13.65 4.00751 13.65 4.42 13.65M13.98 13.65H15.5375H15.65C16.7546 13.65 17.65 12.7546 17.65 11.65V2.75C17.65 1.64543 16.7546 0.75 15.65 0.75H15.5375H13.98",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.16045 7.41534C5.32257 7.228 4.69638 6.47988 4.69638 5.58551C4.69638 4.54998 5.53584 3.71051 6.57136 3.71051C7.60689 3.71051 8.44635 4.54998 8.44635 5.58551C8.44635 5.8965 8.37064 6.1898 8.23664 6.448C8.22998 6.48984 8.21889 6.53136 8.20311 6.57208L6.77017 10.2702C6.63182 10.6272 6.18568 10.7873 5.7737 10.6276C5.36172 10.468 5.13991 10.0491 5.27826 9.69206L6.16045 7.41534ZM11.4177 7.41534C10.5798 7.228 9.95362 6.47988 9.95362 5.58551C9.95362 4.54998 10.7931 3.71051 11.8286 3.71051C12.8641 3.71051 13.7036 4.54998 13.7036 5.58551C13.7036 5.8965 13.6279 6.1898 13.4939 6.448C13.4872 6.48984 13.4761 6.53136 13.4604 6.57208L12.0274 10.2702C11.8891 10.6272 11.4429 10.7873 11.0309 10.6276C10.619 10.468 10.3971 10.0491 10.5355 9.69206L11.4177 7.41534Z",fill:"currentColor"})]})}function Ot(e){return s.jsxs(Ge,{width:"19",height:"15",viewBox:"0 0 19 15",fill:"none",...e,children:[s.jsx("path",{d:"M4.42 0.75H2.8625H2.75C1.64543 0.75 0.75 1.64543 0.75 2.75V11.65C0.75 12.7546 1.64543 13.65 2.75 13.65H2.8625C2.8625 13.65 2.8625 13.65 2.8625 13.65C2.8625 13.65 4.00751 13.65 4.42 13.65M13.98 13.65H15.5375H15.65C16.7546 13.65 17.65 12.7546 17.65 11.65V2.75C17.65 1.64543 16.7546 0.75 15.65 0.75H15.5375H13.98",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M5.55283 4.21963C5.25993 3.92674 4.78506 3.92674 4.49217 4.21963C4.19927 4.51252 4.19927 4.9874 4.49217 5.28029L6.36184 7.14996L4.49217 9.01963C4.19927 9.31252 4.19927 9.7874 4.49217 10.0803C4.78506 10.3732 5.25993 10.3732 5.55283 10.0803L7.95283 7.68029C8.24572 7.3874 8.24572 6.91252 7.95283 6.61963L5.55283 4.21963Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.2",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M9.77753 8.75003C9.3357 8.75003 8.97753 9.10821 8.97753 9.55003C8.97753 9.99186 9.3357 10.35 9.77753 10.35H13.2775C13.7194 10.35 14.0775 9.99186 14.0775 9.55003C14.0775 9.10821 13.7194 8.75003 13.2775 8.75003H9.77753Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"0.1"})]})}function Yt({codeMessage:e,codeExecutionOutputMessage:t,onDismiss:n,FormattedText:r}){const a=M();return s.jsx(R.Root,{isOpen:!0,onClose:n,children:s.jsx(R.Overlay,{children:s.jsxs(R.Content,{className:"flex max-h-[75vh] max-w-lg flex-col overflow-hidden",children:[s.jsx(R.Header,{title:a.formatMessage(Bt.title),type:"success",closeButton:s.jsx(_s,{onClick:n})}),s.jsxs("div",{className:"flex flex-1 flex-col overflow-auto bg-black",children:[s.jsx("div",{children:s.jsx(ct,{FormattedText:r,message:e})}),s.jsx("div",{children:s.jsx(lt,{message:t})})]})]})})})}const Bt=de({title:{id:"CodeExecutionOutputModal.title",defaultMessage:"Analysis"}});function Wt({displayInfo:e,FormattedText:t,trackContentReferenceEvent:n}){const[r,a]=m.useState(!1),o=M();return m.useEffect(()=>{n(x.searchContentReferenceShown,"search_content_reference_shown",e.type)},[n,e.type]),s.jsxs(s.Fragment,{children:[s.jsx(Z,{label:o.formatMessage(Zt.viewAnalysis),side:"top",sideOffset:4,withArrow:!1,delayDuration:150,children:s.jsx("button",{onClick:()=>a(!0),children:s.jsx(Ot,{className:"-mt-0.5 ml-0.5 inline-block text-token-link hover:text-token-link-hover"})})}),r&&s.jsx(Yt,{FormattedText:t,codeMessage:e.codeMessage,codeExecutionOutputMessage:e.codeExecutionOutputMessage,onDismiss:()=>a(!1)})]})}const Zt=de({viewAnalysis:{id:"viewAnalysis",defaultMessage:"View analysis"}}),je=24;function Gt(e){const t=e.split(".");let n=e;return t.length>1&&t.slice(0,-1).some(r=>r.length>0)&&(n=t.slice(0,-1).join(".")),n.length>je&&(n=n.slice(0,je-1)+"…"),n}function Vt({fileRef:e,onClick:t}){const n=as();if(!e)return null;const r=s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"flex shrink-0 items-center justify-center",children:s.jsx(dt,{className:"icon-xs"})}),s.jsx("div",{className:"max-w-xs truncate",children:e.name}),s.jsx("div",{className:"shrink-0",children:s.jsx(ht,{className:"icon-xs"})})]});return e.cloud_doc_url?s.jsx(A,{href:e.cloud_doc_url,target:"_blank",rel:"noreferrer",className:"text-xs",children:r}):s.jsx("button",{onClick:()=>{n(e.id,e.name),t?.()},className:"text-xs",children:r})}function qt({fileRef:e,index:t,trackContentReferenceEvent:n}){const r=as(),a=m.useContext(z),o=Ps("668322707"),i=Is(a?.analyticsMetadata.clientThreadId??Ds),c=qs(),u=a?.message.metadata?.gizmo_id,h=!!u&&c.includes(u),d=Xs(i),l={source:e.source,index:t};if(m.useEffect(()=>{n(x.fileCitationShown,"file_citation_shown","file",l)},[]),d&&!h)return null;const p=!o.isLoading&&o.layer.get("show_citations_with_title",!1)?`(${Gt(e.name)})`:s.jsx(Ut,{className:"-mt-0.5 ml-0.5 inline-block text-token-link hover:text-token-link-hover"});return s.jsx(Z,{label:s.jsx(Vt,{fileRef:e,onClick:()=>{n(x.fileCitationClicked,"file_citation_clicked","file",l)}}),onOpenChange:f=>{f?n(x.fileCitationHovered,"file_citation_hovered","file",l):n(x.fileCitationUnhovered,"file_citation_unhovered","file",l)},side:"top",sideOffset:4,withArrow:!1,delayDuration:150,interactive:!0,wide:!0,children:e.cloud_doc_url?s.jsx(A,{href:e.cloud_doc_url,target:"_blank",rel:"noreferrer",className:"px-0.5 text-green-600",children:p}):s.jsx("button",{onClick:()=>r(e.id,e.name),className:"px-0.5 text-green-600",children:p})})}var re={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var a=Number(r);return isNaN(a)?a:a<0?Math.ceil(a):Math.floor(a)}e.exports=t.default})(re,re.exports);var Xt=re.exports;const Kt=Ve(Xt);var ae={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){var a=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return a.setUTCFullYear(r.getFullYear()),r.getTime()-a.getTime()}e.exports=t.default})(ae,ae.exports);var Jt=ae.exports;const ke=Ve(Jt);function Qt(e,t){var n=nn(t);return n.formatToParts?sn(n,e):tn(n,e)}var en={year:0,month:1,day:2,hour:3,minute:4,second:5};function sn(e,t){try{for(var n=e.formatToParts(t),r=[],a=0;a<n.length;a++){var o=en[n[a].type];o>=0&&(r[o]=parseInt(n[a].value,10))}return r}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function tn(e,t){var n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var X={};function nn(e){if(!X[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00";X[e]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return X[e]}function ds(e,t,n,r,a,o,i){var c=new Date(0);return c.setUTCFullYear(e,t,n),c.setUTCHours(r,a,o,i),c}var Ne=36e5,rn=6e4,K={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function hs(e,t,n){var r,a;if(!e||(r=K.timezoneZ.exec(e),r))return 0;var o;if(r=K.timezoneHH.exec(e),r)return o=parseInt(r[1],10),Ce(o)?-(o*Ne):NaN;if(r=K.timezoneHHMM.exec(e),r){o=parseInt(r[2],10);var i=parseInt(r[3],10);return Ce(o,i)?(a=Math.abs(o)*Ne+i*rn,r[1]==="+"?-a:a):NaN}if(cn(e)){t=new Date(t||Date.now());var c=n?t:an(t),u=oe(c,e),h=n?u:on(t,u,e);return-h}return NaN}function an(e){return ds(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function oe(e,t){var n=Qt(e,t),r=ds(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),a=e.getTime(),o=a%1e3;return a-=o>=0?o:1e3+o,r-a}function on(e,t,n){var r=e.getTime(),a=r-t,o=oe(new Date(a),n);if(t===o)return t;a-=o-t;var i=oe(new Date(a),n);return o===i?o:Math.max(o,i)}function Ce(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var Se={};function cn(e){if(Se[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Se[e]=!0,!0}catch{return!1}}var ln=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,J=36e5,_e=6e4,dn=2,N={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ln};function ie(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n={},r=n.additionalDigits==null?dn:Kt(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=hn(e),o=un(a.date,r),i=o.year,c=o.restDateString,u=fn(c,i);if(isNaN(u))return new Date(NaN);if(u){var h=u.getTime(),d=0,l;if(a.time&&(d=mn(a.time),isNaN(d)))return new Date(NaN);if(a.timeZone||n.timeZone){if(l=hs(a.timeZone||n.timeZone,new Date(h+d)),isNaN(l))return new Date(NaN)}else l=ke(new Date(h+d)),l=ke(new Date(h+d+l));return new Date(h+d+l)}else return new Date(NaN)}function hn(e){var t={},n=N.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=N.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){var a=N.timeZone.exec(r);a?(t.time=r.replace(a[1],""),t.timeZone=a[1].trim()):t.time=r}return t}function un(e,t){var n=N.YYY[t],r=N.YYYYY[t],a;if(a=N.YYYY.exec(e)||r.exec(e),a){var o=a[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(a=N.YY.exec(e)||n.exec(e),a){var i=a[1];return{year:parseInt(i,10)*100,restDateString:e.slice(i.length)}}return{year:null}}function fn(e,t){if(t===null)return null;var n,r,a,o;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(n=N.MM.exec(e),n)return r=new Date(0),a=parseInt(n[1],10)-1,De(t,a)?(r.setUTCFullYear(t,a),r):new Date(NaN);if(n=N.DDD.exec(e),n){r=new Date(0);var i=parseInt(n[1],10);return xn(t,i)?(r.setUTCFullYear(t,0,i),r):new Date(NaN)}if(n=N.MMDD.exec(e),n){r=new Date(0),a=parseInt(n[1],10)-1;var c=parseInt(n[2],10);return De(t,a,c)?(r.setUTCFullYear(t,a,c),r):new Date(NaN)}if(n=N.Www.exec(e),n)return o=parseInt(n[1],10)-1,Te(t,o)?Pe(t,o):new Date(NaN);if(n=N.WwwD.exec(e),n){o=parseInt(n[1],10)-1;var u=parseInt(n[2],10)-1;return Te(t,o,u)?Pe(t,o,u):new Date(NaN)}return null}function mn(e){var t,n,r;if(t=N.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),Q(n)?n%24*J:NaN;if(t=N.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),Q(n,r)?n%24*J+r*_e:NaN;if(t=N.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var a=parseFloat(t[3].replace(",","."));return Q(n,r,a)?n%24*J+r*_e+a*1e3:NaN}return null}function Pe(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var a=r.getUTCDay()||7,o=t*7+n+1-a;return r.setUTCDate(r.getUTCDate()+o),r}var pn=[31,28,31,30,31,30,31,31,30,31,30,31],gn=[31,29,31,30,31,30,31,31,30,31,30,31];function us(e){return e%400===0||e%4===0&&e%100!==0}function De(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var r=us(e);if(r&&n>gn[t]||!r&&n>pn[t])return!1}return!0}function xn(e,t){if(t<1)return!1;var n=us(e);return!(n&&t>366||!n&&t>365)}function Te(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function Q(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function F(e,t,n){var r=ie(e,n),a=hs(t,r,!0),o=new Date(r.getTime()-a),i=new Date(0);return i.setFullYear(o.getUTCFullYear(),o.getUTCMonth(),o.getUTCDate()),i.setHours(o.getUTCHours(),o.getUTCMinutes(),o.getUTCSeconds(),o.getUTCMilliseconds()),i}const Me="#30a633",Ae="#f14d42",bn="text-[#30a633]",vn="text-[#f14d42]";var ee={line:{color:"#F66",width:1,dashPattern:[]},sync:{enabled:!0,group:1,suppressTooltips:!1},zoom:{enabled:!0,zoomboxBackgroundColor:"rgba(66,133,244,0.2)",zoomboxBorderColor:"#48F",zoomButtonText:"Reset Zoom",zoomButtonClass:"reset-zoom"},snap:{enabled:!1},callbacks:{beforeZoom:function(e,t){return!0},afterZoom:function(e,t){}}},yn={id:"crosshair",afterInit:function(e){if(e.config.options.scales.x){var t=e.config.options.scales.x.type;if(!(t!=="linear"&&t!=="time"&&t!=="category"&&t!=="logarithmic")){e.options.plugins.crosshair===void 0&&(e.options.plugins.crosshair=ee),e.crosshair={enabled:!1,suppressUpdate:!1,x:null,originalData:[],originalXRange:{},dragStarted:!1,dragStartX:null,dragEndX:null,suppressTooltips:!1,ignoreNextEvents:0,reset:(function(){this.resetZoom(e,!1,!1)}).bind(this)};var n=this.getOption(e,"sync","enabled");n&&(e.crosshair.syncEventHandler=(function(r){this.handleSyncEvent(e,r)}).bind(this),e.crosshair.resetZoomEventHandler=(function(r){var a=this.getOption(e,"sync","group");r.chartId!==e.id&&r.syncGroup===a&&this.resetZoom(e,!0)}).bind(this),window.addEventListener("sync-event",e.crosshair.syncEventHandler),window.addEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler)),e.panZoom=this.panZoom.bind(this,e)}}},afterDestroy:function(e){var t=this.getOption(e,"sync","enabled");t&&(window.removeEventListener("sync-event",e.crosshair.syncEventHandler),window.removeEventListener("reset-zoom-event",e.crosshair.resetZoomEventHandler))},panZoom:function(e,t){if(e.crosshair.originalData.length!==0){var n=e.crosshair.end-e.crosshair.start,r=e.crosshair.min,a=e.crosshair.max;t<0?(e.crosshair.start=Math.max(e.crosshair.start+t,r),e.crosshair.end=e.crosshair.start===r?r+n:e.crosshair.end+t):(e.crosshair.end=Math.min(e.crosshair.end+t,e.crosshair.max),e.crosshair.start=e.crosshair.end===a?a-n:e.crosshair.start+t),this.doZoom(e,e.crosshair.start,e.crosshair.end)}},getOption:function(e,t,n){return ye(e.options.plugins.crosshair[t]?e.options.plugins.crosshair[t][n]:void 0,ee[t][n])},getXScale:function(e){return e.data.datasets.length?e.scales[e.getDatasetMeta(0).xAxisID]:null},getYScale:function(e){return e.scales[e.getDatasetMeta(0).yAxisID]},handleSyncEvent:function(e,t){var n=this.getOption(e,"sync","group");if(t.chartId!==e.id&&t.syncGroup===n){var r=this.getXScale(e);if(r){var a=t.original.native.buttons===void 0?t.original.native.which:t.original.native.buttons;t.original.type==="mouseup"&&(a=0);var o={type:t.original.type=="click"?"mousemove":t.original.type,chart:e,x:r.getPixelForValue(t.xValue),y:t.original.y,native:{buttons:a},stop:!0};e._eventHandler(o)}}},afterEvent:function(e,t){if(e.config.options.scales.x.length==0)return;let n=t.event;var r=e.config.options.scales.x.type;if(!(r!=="linear"&&r!=="time"&&r!=="category"&&xscaleType!=="logarithmic")){var a=this.getXScale(e);if(a){if(e.crosshair.ignoreNextEvents>0){e.crosshair.ignoreNextEvents-=1;return}var o=n.native.buttons===void 0?n.native.which:n.native.buttons;n.native.type==="mouseup"&&(o=0);var i=this.getOption(e,"sync","enabled"),c=this.getOption(e,"sync","group");if(!n.stop&&i){var t=new CustomEvent("sync-event");t.chartId=e.id,t.syncGroup=c,t.original=n,t.xValue=a.getValueForPixel(n.x),window.dispatchEvent(t)}var u=this.getOption(e,"sync","suppressTooltips");if(e.crosshair.suppressTooltips=n.stop&&u,e.crosshair.enabled=n.type!=="mouseout"&&n.x>a.getPixelForValue(a.min)&&n.x<a.getPixelForValue(a.max),!e.crosshair.enabled&&!e.crosshair.suppressUpdate)return n.x>a.getPixelForValue(a.max)&&(e.crosshair.suppressUpdate=!0,e.update("none")),e.crosshair.dragStarted=!1,!1;e.crosshair.suppressUpdate=!1;var h=this.getOption(e,"zoom","enabled");if(o===1&&!e.crosshair.dragStarted&&h&&(e.crosshair.dragStartX=n.x,e.crosshair.dragStarted=!0),e.crosshair.dragStarted&&o===0){e.crosshair.dragStarted=!1;var d=a.getValueForPixel(e.crosshair.dragStartX),l=a.getValueForPixel(e.crosshair.x);Math.abs(e.crosshair.dragStartX-e.crosshair.x)>1&&this.doZoom(e,d,l),e.update("none")}e.crosshair.x=n.x,e.draw()}}},afterDraw:function(e){if(e.crosshair.enabled)return e.crosshair.dragStarted?this.drawZoombox(e):(this.drawTraceLine(e),this.interpolateValues(e),this.drawTracePoints(e)),!0},beforeTooltipDraw:function(e){return!e.crosshair.dragStarted&&!e.crosshair.suppressTooltips},resetZoom:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(n){if(e.crosshair.originalData.length>0)for(var r=0;r<e.data.datasets.length;r++){var a=e.data.datasets[r];a.data=e.crosshair.originalData.shift(0)}e.crosshair.originalXRange.min?(e.options.scales.x.min=e.crosshair.originalXRange.min,e.crosshair.originalXRange.min=null):delete e.options.scales.x.min,e.crosshair.originalXRange.max?(e.options.scales.x.max=e.crosshair.originalXRange.max,e.crosshair.originalXRange.max=null):delete e.options.scales.x.max}e.crosshair.button&&e.crosshair.button.parentNode&&(e.crosshair.button.parentNode.removeChild(e.crosshair.button),e.crosshair.button=!1);var o=this.getOption(e,"sync","enabled");if(!t&&n&&o){var i=this.getOption(e,"sync","group"),c=new CustomEvent("reset-zoom-event");c.chartId=e.id,c.syncGroup=i,window.dispatchEvent(c)}n&&e.update("none")},doZoom:function(e,t,n){if(t>n){var r=t;t=n,n=r}var a=ye(e.options.plugins.crosshair.callbacks?e.options.plugins.crosshair.callbacks.beforeZoom:void 0,ee.callbacks.beforeZoom);if(!a(t,n))return!1;if(e.crosshair.dragStarted=!1,e.options.scales.x.min&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.min=e.options.scales.x.min),e.options.scales.x.max&&e.crosshair.originalData.length===0&&(e.crosshair.originalXRange.max=e.options.scales.x.max),!e.crosshair.button){var o=document.createElement("button"),i=this.getOption(e,"zoom","zoomButtonText"),c=this.getOption(e,"zoom","zoomButtonClass"),u=document.createTextNode(i);o.appendChild(u),o.className=c,o.addEventListener("click",(function(){this.resetZoom(e)}).bind(this)),e.canvas.parentNode.appendChild(o),e.crosshair.button=o}e.options.scales.x.min=t,e.options.scales.x.max=n;var h=e.crosshair.originalData.length===0,d=e.config.options.scales.x.type!=="category";if(d)for(var l=0;l<e.data.datasets.length;l++){var p=[],f=0,b=!1,v=!1;h&&(e.crosshair.originalData[l]=e.data.datasets[l].data);for(var k=e.crosshair.originalData[l],j=0;j<k.length;j++){var S=k[j],_=S.x!==void 0?S.x:NaN;_>=t&&!b&&f>0&&(p.push(k[f-1]),b=!0),_>=t&&_<=n&&p.push(S),_>n&&!v&&f<k.length&&(p.push(S),v=!0),f+=1}e.data.datasets[l].data=p}if(e.crosshair.start=t,e.crosshair.end=n,h){var I=this.getXScale(e);e.crosshair.min=I.min,e.crosshair.max=I.max}e.crosshair.ignoreNextEvents=2,e.update("none");var V=this.getOption(e,"callbacks","afterZoom");V(t,n)},drawZoombox:function(e){var t=this.getYScale(e),n=this.getOption(e,"zoom","zoomboxBorderColor"),r=this.getOption(e,"zoom","zoomboxBackgroundColor");e.ctx.beginPath(),e.ctx.rect(e.crosshair.dragStartX,t.getPixelForValue(t.max),e.crosshair.x-e.crosshair.dragStartX,t.getPixelForValue(t.min)-t.getPixelForValue(t.max)),e.ctx.lineWidth=1,e.ctx.strokeStyle=n,e.ctx.fillStyle=r,e.ctx.fill(),e.ctx.fillStyle="",e.ctx.stroke(),e.ctx.closePath()},drawTraceLine:function(e){var t=this.getYScale(e),n=this.getOption(e,"line","width"),r=this.getOption(e,"line","color"),a=this.getOption(e,"line","dashPattern"),o=this.getOption(e,"snap","enabled"),i=e.crosshair.x;o&&e._active.length&&(i=e._active[0].element.x),e.ctx.beginPath(),e.ctx.setLineDash(a),e.ctx.moveTo(i,t.getPixelForValue(t.max)),e.ctx.lineWidth=n,e.ctx.strokeStyle=r,e.ctx.lineTo(i,t.getPixelForValue(t.min)),e.ctx.stroke(),e.ctx.setLineDash([])},drawTracePoints:function(e){for(var t=0;t<e.data.datasets.length;t++){var n=e.data.datasets[t],r=e.getDatasetMeta(t),a=e.scales[r.yAxisID];r.hidden||!n.interpolate||(e.ctx.beginPath(),e.ctx.arc(e.crosshair.x,a.getPixelForValue(n.interpolatedValue),3,0,2*Math.PI,!1),e.ctx.fillStyle="white",e.ctx.lineWidth=2,e.ctx.strokeStyle=n.borderColor,e.ctx.fill(),e.ctx.stroke())}},interpolateValues:function(e){for(var t=0;t<e.data.datasets.length;t++){var n=e.data.datasets[t],r=e.getDatasetMeta(t),a=e.scales[r.xAxisID],o=a.getValueForPixel(e.crosshair.x);if(!(r.hidden||!n.interpolate)){var i=n.data,c=i.findIndex(function(l){return l.x>=o}),u=i[c-1],h=i[c];if(e.data.datasets[t].steppedLine&&u)n.interpolatedValue=u.y;else if(u&&h){var d=(h.y-u.y)/(h.x-u.x);n.interpolatedValue=u.y+(o-u.x)*d}else n.interpolatedValue=NaN}}}};xt.register(bt,vt,yt,wt,$t,jt,kt,Nt,Ct,yn);function L(e,t){return F(new Date(e*1e3),t??"America/New_York")}function Ee(e,t,n){const r=L(t,n);return e.formatTime(r,{hour:"numeric",minute:"numeric"})}function wn(e,t,n){const r=L(t,n);return e.formatDate(r,{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}function U(e,t,n){const r=L(t,n);return e.formatDate(r,{month:"short",day:"numeric",year:"numeric"})}function se(e,t,n){const r=L(t,n);return e.formatDate(r,{month:"short",year:"numeric"})}function Ie(e,t,n){const r=L(t,n);return e.formatDate(r,{month:"short",day:"numeric"})}function $n(e,t,n){const r=L(t,n);return e.formatDate(r,{weekday:"short",month:"short",day:"numeric"})}function jn(e,t,n){const r=L(t,n);return e.formatDate(r,{year:"numeric"})}const kn=100,Nn=["1d","5d","1m","6m","ytd","1y","5y"],Le={"1d":{label:"1D",formatTimestampLabel:Ee,formatTimestampTooltip:Ee,maxTicksLimit:6,lineTension:.1},"5d":{label:"5D",formatTimestampLabel:Ie,formatTimestampTooltip:wn,maxTicksLimit:6,lineTension:.1},"1m":{label:"1M",formatTimestampLabel:Ie,formatTimestampTooltip:$n,maxTicksLimit:6,lineTension:.1,useUtc:!0},"6m":{label:"6M",formatTimestampLabel:se,formatTimestampTooltip:U,maxTicksLimit:5,lineTension:.1,useUtc:!0},ytd:{label:"YTD",formatTimestampLabel:se,formatTimestampTooltip:U,maxTicksLimit:5,lineTension:.1,useUtc:!0},"1y":{label:"1Y",formatTimestampLabel:se,formatTimestampTooltip:U,maxTicksLimit:5,lineTension:.2,useUtc:!0},"5y":{label:"5Y",formatTimestampLabel:jn,formatTimestampTooltip:U,maxTicksLimit:5,lineTension:.2,useUtc:!0}};function Cn({isUp:e,histories:t,defaultInterval:n,onSelectHistoryInterval:r,latestTradingPeriod:a,timezone:o}){return s.jsx(s.Fragment,{children:t&&n&&a?s.jsx(Sn,{isUp:e,histories:t,defaultInterval:n,onSelectHistoryInterval:r,latestTradingPeriod:a,timezone:o}):s.jsx(H,{className:"h-full",index:1,width:100})})}function Sn({isUp:e,histories:t,defaultInterval:n,onSelectHistoryInterval:r,latestTradingPeriod:a,timezone:o}){const[i,c]=m.useState(null),[u,h]=m.useState(!1),[d,l]=m.useState(n),p=d==="1d",f=m.useMemo(()=>{let g=t.quotes[d].filter(w=>w.close>=0);if(p&&a){const w=a.regular.start_timestamp,C=a.regular.end_timestamp;if(g=g.filter(T=>T.timestamp>=w&&T.timestamp<=C),g.length===0||g[g.length-1].timestamp<C){let q=g.length>0?g[g.length-1].timestamp:w-600;for(;q<C;)q+=600,g.push({timestamp:q,close:null})}}return g},[t,d,p,a]),b=Object.keys(t.quotes),v=Le[d],{formatTimestampTooltip:k,maxTicksLimit:j,useUtc:S=!1}=v,_=M(),I=m.useMemo(()=>{const{formatTimestampLabel:g,lineTension:w}=v;return{labels:f.map(C=>g(_,C.timestamp,S?"UTC":o)),datasets:[{data:f.map(C=>C.close),borderColor:e?Me:Ae,pointRadius:0,pointHoverRadius:4,pointStyle:"circle",backgroundColor:e?Me:Ae,borderWidth:3,lineTension:w??.4}]}},[v,f,e,S,o,_]),V=Ks(),ge=W().theme==="dark";return s.jsxs("div",{className:"flex h-full flex-col gap-6",children:[s.jsx("div",{className:"flex items-center justify-between text-xs font-semibold text-token-text-tertiary sm:justify-start sm:gap-6",children:b.map(g=>s.jsx("button",{onClick:()=>{l(g),r?.(g)},className:y("px-2 py-1 uppercase hover:text-token-text-secondary",{"border-b-2 border-solid border-token-text-primary !text-token-text-primary":d===g}),children:Le[g].label},g))}),s.jsxs("div",{className:"relative h-full",onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),children:[s.jsx(St,{options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},hover:{mode:u?"nearest":"point"},animation:!1,scales:{x:{afterBuildTicks:g=>{if(g.ticks.length>j)if(p)g.ticks=g.ticks.filter((w,C)=>f[C].timestamp%(V?3600:7200)===0);else{const w=Math.ceil(g.ticks.length/(j-1));g.ticks=g.ticks.filter((C,T)=>T>0&&(T%w===0||T===g.ticks.length-1))}},grid:{display:!1},ticks:{align:"end"}},y:{ticks:{maxTicksLimit:7},border:{display:!1},grid:{color:ge?"rgba(255, 255, 255, 0.1)":"rgba(229, 229, 229, 0.5)"}}},plugins:{datalabels:{display:!1},legend:{display:!1},tooltip:{enabled:!1,animation:!1,displayColors:!1,callbacks:{title:function(g){const w=g[0];if(!w)return"";const C=f[w.dataIndex].timestamp;return k(_,C,S?"UTC":o)}},external:({tooltip:g})=>{c(w=>{const C=g.chart.width,T=g.caretX>C-kn;return!w||w.x!==g.caretX||w.y!==g.caretY||w.opacity!==g.opacity||w.flip!==T?{...w,x:g.caretX,y:g.caretY,dateLabel:g.title[0],value:ce(g.dataPoints[0].parsed.y),opacity:g.opacity,flip:T}:w})}},dropShadow:!1,crosshair:{line:{color:ge?"rgba(255, 255, 255, 0.3)":"rgba(0, 0, 0, 0.3)",width:.5},zoom:{enabled:!1}}}},data:I}),s.jsx(_n,{tooltipData:i})]})]})}function _n({tooltipData:e}){return!e||!e.opacity?null:s.jsxs("div",{style:{left:e.flip?e.x-5:e.x+5,top:e.y-5},className:y("pointer-events-none absolute translate-y-[-100%] whitespace-nowrap bg-black p-2.5",e.flip?"translate-x-[-100%] rounded-bl-xl rounded-tl-xl rounded-tr-xl":"rounded-br-xl rounded-tl-xl rounded-tr-xl"),children:[s.jsx("div",{className:"text-white",children:e.value}),s.jsx("div",{className:"text-xs text-gray-400",children:e.dateLabel})]})}function Pn(e){return e?Nn.filter(n=>n in e.quotes).find(n=>e.quotes[n].length>0):void 0}function ce(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e)}function Dn({contentReference:e,trackContentReferenceEvent:t}){const n=M();m.useEffect(()=>{t(x.searchContentReferenceShown,"search_content_reference_shown","stock")},[t]);const r=Pn(e?.stock?.histories),a=e?.stock,[o,i]=m.useState(r),c=o==="1d",u=a?.histories?.quotes?.[o??""]?.[0],h=o&&o in le?o:void 0,d=a&&(u&&!c?{changePercentage:(a.price.price-u.close)/u.close*100,changeAmount:a.price.price-u.close,changeLabel:h?n.formatMessage(le[h]):"",isUp:a.price.price>u.close}:{changePercentage:a.price.change_percent*100,changeAmount:a.price.change,changeLabel:Tn(a.price.latest_trade_timestamp,a.asset.timezone,n),isUp:a.price.change>0});return s.jsxs("div",{className:"flex h-[340px] flex-col gap-6",children:[s.jsx("div",{className:"shrink-0 grow-0",children:s.jsx(Mn,{data:a??null,priceChange:d??null,url:e?.url??null})}),s.jsx("div",{className:"h-full",children:s.jsx(Cn,{isUp:d?.isUp??!1,defaultInterval:r,histories:a?.histories,onSelectHistoryInterval:l=>i(l),latestTradingPeriod:a?.asset.latest_trading_period,timezone:a?.asset.timezone??null})})]})}function Tn(e,t,n){function r(a,o){const c=F(new Date,o),u=n.formatDate(c,{year:"numeric",month:"2-digit",day:"2-digit"}),h=ie(a*1e3),d=F(h,o),l=n.formatDate(d,{year:"numeric",month:"2-digit",day:"2-digit"});return u===l}if(!e||!t||r(e,t))return n.formatMessage(le["1d"]);{const a=ie(e*1e3),o=F(a,t);return n.formatDate(o,{month:"long",day:"numeric"})}}function Mn({data:e,priceChange:t,url:n}){function r(a){const{isUp:o,changePercentage:i,changeLabel:c,changeAmount:u}=a,h=Math.abs(i).toFixed(2),d=ce(u);return s.jsxs("span",{className:y("flex items-center gap-1 text-sm",o?bn:vn),children:[s.jsx("span",{className:"font-semibold",children:s.jsx($,{id:"3x4Lkl",defaultMessage:"{sign}{changeAmount}",values:{changeAmount:d,sign:o?"+":""}})}),s.jsx($,{id:"KkjxiB",defaultMessage:"{sign}{changePercentage}%",values:{changePercentage:h,sign:o?"+":"-"}}),s.jsx("span",{className:"text-token-text-primary",children:c})]})}return s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-lg font-semibold",children:e?s.jsx($,{id:"+2WHuv",defaultMessage:"{name} ({ticker})",values:{name:e.asset.name,ticker:e.asset.ticker}}):s.jsx("div",{className:"w-32",children:s.jsx(H,{index:9,width:100})})}),s.jsx("div",{className:"text-sm text-token-text-tertiary",children:e?s.jsxs(s.Fragment,{children:[e.asset.name,n!=null&&s.jsxs(s.Fragment,{children:[" · ",s.jsx(A,{href:n,className:"text-token-link hover:underline",children:ls(n,"hostname")})]})]}):s.jsx("div",{className:"mt-2 w-36",children:s.jsx(H,{index:6,width:100})})})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-end text-lg font-semibold",children:e?s.jsx($,{id:"s+1uly",defaultMessage:"{price}",values:{price:ce(e.price.price)}}):s.jsx("div",{className:"w-32",children:s.jsx(H,{index:0,width:100})})}),s.jsx("div",{className:"flex items-center gap-1",children:t?r(t):s.jsx("div",{className:"mt-2 w-40",children:s.jsx(H,{index:3,width:100})})})]})]})}const le=de({"1d":{id:"SMdcuo",defaultMessage:"Today"},"5d":{id:"HCA6lr",defaultMessage:"Past 5 days"},"1m":{id:"DJpPMq",defaultMessage:"Past month"},"6m":{id:"1mUJ2L",defaultMessage:"Past 6 months"},ytd:{id:"b9KkhV",defaultMessage:"Year to date"},"1y":{id:"XnvD9A",defaultMessage:"Past year"},"5y":{id:"DfI1RB",defaultMessage:"Past 5 years"}}),An=4;function En({metadata:e,analyticsMetadata:t,trackContentReferenceEvent:n}){const r=Js(),a=e.images,o=a.map(d=>d.thumbnail_url),i=Ts({queries:o.map(d=>Ls(d)),combine:d=>{const l=new Set;return d.forEach((p,f)=>{p.isSuccess&&l.add(o[f])}),l}}),c=a.filter(d=>i.has(d.thumbnail_url)),u=e.images.length;if(u===0)return null;if(u===1){const d=e.images[0];return s.jsx(Fe,{image:d,imageSource:be.Turn,analyticsMetadata:t,trackContentReferenceEvent:n,className:"float-image z-10 float-right clear-right mb-7 ml-7 mt-1 min-w-32 max-w-[22%] overflow-hidden rounded-xl border-[0.5px] border-token-border-light"},d.content_url)}const h=r?c.length:Math.min(c.length,An);return s.jsx("div",{className:"no-scrollbar mb-6 mt-1 flex flex-nowrap gap-0.5 overflow-auto sm:gap-1 sm:overflow-hidden",children:c.slice(0,h).map((d,l)=>s.jsx("div",{className:y("relative aspect-square max-h-48 w-32 shrink-0 overflow-hidden rounded-xl border-[0.5px] border-token-border-light sm:w-[calc((100%-1rem)/4)] md:shrink",l===0&&"rounded-l-xl",l===h-1&&"rounded-r-xl"),children:s.jsx(Fe,{image:d,imageSource:be.Turn,analyticsMetadata:t,trackContentReferenceEvent:n,className:"h-full w-full"},d.thumbnail_url)},d.thumbnail_url))})}const In=m.memo(En,(e,t)=>e.numImageResults===t.numImageResults&&e.analyticsMetadata===t.analyticsMetadata&&e.trackContentReferenceEvent===t.trackContentReferenceEvent&&e.metadata.images.length===t.metadata.images.length&&e.metadata.images.every((n,r)=>n.content_url===t.metadata.images[r].content_url));function Fe({image:e,imageSource:t,className:n,imgClassName:r,style:a,analyticsMetadata:o,trackContentReferenceEvent:i}){const c=Fs(e),{isSuccess:u}=Ke(c),h=m.useMemo(()=>({url:e?.url,title:e?.title}),[e]);m.useEffect(()=>{e&&u&&i(x.searchContentReferenceShown,"search_content_reference_shown","image_v2",h)},[i,e,u,h]);const d=Qs.useStore();return s.jsx("button",{className:y("relative aspect-square overflow-hidden",n),style:a,onClick:()=>{i(x.searchContentReferenceClicked,"search_content_reference_clicked","image_v2",h),d.setCurrentImage(e?{image:e,source:t,turnIndex:o.turnIndex}:void 0)},children:e?u?s.jsx(zs,{children:s.jsx("img",{src:c,alt:e?.content_url,className:y("m-0 h-full w-full bg-token-main-surface-tertiary object-cover",r)})}):s.jsx("div",{className:"h-full w-full animate-pulse bg-token-main-surface-tertiary"}):s.jsx("div",{className:"aspect-square h-full w-full animate-pulse bg-token-main-surface-tertiary"})})}const Ln={google_maps:{title:"Google Maps"}};function Fn({metadata:e,trackContentReferenceEvent:t}){m.useEffect(()=>{t(x.searchContentReferenceShown,"search_content_reference_shown",e.type)},[t,e.type]);const n=Ln[e.provider]?.title??"Maps";return s.jsx("span",{children:s.jsx($,{id:"ZSUz1k",defaultMessage:" ({link}) ",values:{link:s.jsx(A,{href:e.url,children:n})}})})}function pe({url:e}){const t=_t(e).data??ls(e,"short");return s.jsx(s.Fragment,{children:t})}function zn({metadata:e,trackContentReferenceEvent:t}){return e.items.length===0?null:s.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[e.title&&s.jsx("div",{className:"-mb-1 font-semibold text-token-text-primary",children:e.title}),e.items.map((n,r)=>s.jsx(Hn,{item:n,index:r,trackContentReferenceEvent:t},r))]})}function Hn({item:e,index:t,trackContentReferenceEvent:n}){const{isSuccess:r}=Ke(e.thumbnail_url??void 0),a={url:e.url,title:e.title,index:t};m.useEffect(()=>{n(x.searchContentReferenceShown,"search_content_reference_shown","nav_list",a)},[]);const i=M().locale,c=e.pub_date!=null?new Date(e.pub_date*1e3):null,u=new Intl.RelativeTimeFormat(i,{numeric:"auto"}),h=c?Math.max(Math.floor((Date.now()-c.getTime())/(1e3*60*60*24)),0):null;let d=h!=null?u.format(-h,"day"):null;return i.startsWith("en")&&d&&(d=d.charAt(0).toUpperCase()+d.slice(1)),s.jsxs(A,{className:"group/nav-list relative flex items-center gap-6 py-1.5",href:e.url,onClick:()=>{n(x.searchContentReferenceClicked,"search_content_reference_clicked","nav_list",a)},children:[s.jsx("div",{className:"absolute bottom-0 left-0 top-0 w-[3px] rounded-b-lg rounded-t-lg bg-black/10"}),s.jsxs("div",{className:"ml-4 flex grow flex-col gap-1 overflow-hidden text-ellipsis",children:[s.jsxs("div",{className:"flex items-center gap-1.5 text-sm text-token-text-primary",children:[s.jsx(G,{url:e.url,size:32,minSize:16,className:"icon-sm my-0 rounded-full"}),e.attribution??s.jsx(pe,{url:e.url})]}),s.jsx("div",{className:"line-clamp-2 font-semibold text-token-link decoration-token-link group-hover/nav-list:underline",children:e.title}),d&&s.jsx("div",{className:"text-xs text-token-text-tertiary",children:d})]}),r&&e.thumbnail_url&&s.jsx("div",{className:"h-16 w-16 flex-shrink-0 self-start overflow-hidden",children:s.jsx("img",{src:e.thumbnail_url,className:"m-0 h-full w-full rounded-lg object-cover",alt:e.title})})]})}const Rn=5;function Un({sourcesFootnote:e,onShowSearchResults:t,trackContentReferenceEvent:n}){const r={urls:e.sources.map(a=>a.url).toString(),has_images:e.has_images};return m.useEffect(()=>{n(x.searchCitationShown,"search_citation_shown","sources_footnote",r),n(x.searchContentReferenceShown,"search_content_reference_shown","sources_footnote",r)},[]),s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute h-[60px]",children:s.jsxs("button",{className:y("not-prose group/footnote mb-2 mt-3 flex w-fit items-center gap-1.5 rounded-xl border border-token-border-light bg-token-main-surface-primary py-2 hover:bg-token-main-surface-secondary","pl-3 pr-2.5"),onClick:()=>{n(x.searchCitationClicked,"search_citation_clicked","sources_footnote",r),n(x.searchContentReferenceClicked,"search_content_reference_clicked","sources_footnote",r),t(Pt.Sources)},children:[s.jsx("div",{className:"flex items-center gap-0.5 text-sm font-medium",children:s.jsx($,{id:"/48IOP",defaultMessage:"Sources"})}),e.sources.length>0&&s.jsx("div",{className:"flex flex-row-reverse",children:e.sources.slice(0,Rn).reverse().map((a,o)=>s.jsx("div",{className:y("flex items-center overflow-hidden rounded-full border-token-main-surface-primary bg-token-main-surface-primary","-mr-1.5 first:mr-0","border-2","group-hover/footnote:border-token-main-surface-secondary","relative"),children:s.jsx(G,{url:a.url,size:32,minSize:16,className:"icon-md"})},o))})]})}),s.jsx("div",{className:"h-[60px]"})]})}const On="webp",Yn=250,Bn=187,Wn="srgb",Zn=4,Gn="uchar",Vn=72,qn=!1,Xn=!1,Kn=!0,Jn="https://cdn.oaistatic.com/assets/missing-logo-h96s4tk9.webp",ze={format:On,width:Yn,height:Bn,space:Wn,channels:Zn,depth:Gn,density:Vn,isProgressive:qn,hasProfile:Xn,hasAlpha:Kn,src:Jn};function fs({team:e,className:t}){const[n,r]=m.useState(e.logo??ze.src),a=()=>{Ms.addError("Unable to load sports widget logo",{name:e.name,logo:e.logo}),r(ze.src)};return s.jsx("img",{src:n,alt:e.name,className:t,onError:a})}const He=6;function Qn({scheduleRef:e,trackContentReferenceEvent:t}){const[n,r]=m.useState(!0),{isLoading:a,value:o}=qe("1684776951"),i=e.games.length>0&&o&&!a;if(m.useEffect(()=>{i&&t(x.searchContentReferenceShown,"search_content_reference_shown","sports",{hasSchedule:!0})},[i]),!i)return null;let c=e.games;const u=d=>Math.abs(new Date().getTime()-new Date(d.date).getTime());u(c[0])>u(c[c.length-1])&&(c=c.slice().reverse());const h=n?c.slice(0,He):c;return s.jsxs("div",{className:"not-prose mb-3",children:[s.jsx("div",{className:"font-semibold",children:s.jsx($,{id:"LA6z9q",defaultMessage:"{league} Schedule",values:{league:e.league.display_name}})}),s.jsx("div",{className:"text-sm text-token-text-secondary",children:tr}),h.length===1?s.jsx("div",{children:s.jsx(ve,{children:s.jsx(we.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0},exit:{opacity:0,y:-15},transition:{duration:.2},children:s.jsx("div",{className:"mt-3 rounded-xl border border-token-border-medium py-3",children:s.jsx(sr,{game:h[0]})})})})}):s.jsx("div",{className:"grid grid-cols-1 pt-3 lg:grid-cols-2",children:s.jsx(ve,{children:h.map((d,l)=>s.jsx(we.div,{initial:{opacity:0,y:15},animate:{opacity:1,y:0,transition:{delay:l*.04}},exit:{opacity:0,y:-15},transition:{duration:.2},children:s.jsx("div",{className:y("py-3",l<h.length-1&&"border-b border-token-border-medium",l===h.length-2&&"lg:border-0",l%2===0&&"lg:border-r lg:pr-4",l%2===1&&"lg:pl-4"),children:s.jsx(er,{game:d})})},l))})}),c.length>He&&s.jsx("div",{className:"mt-2 flex items-center justify-between",children:s.jsx("button",{className:"flex items-center text-sm font-semibold",onClick:()=>r(!n),children:n?s.jsx($,{id:"BH/Ee5",defaultMessage:"Show more {icon}",values:{icon:s.jsx(ut,{className:"mb-[-2px]"})}}):s.jsx($,{id:"Z9BlEu",defaultMessage:"Show less {icon}",values:{icon:s.jsx(ft,{className:"mb-[-2px]"})}})})})]})}function er({game:e}){const t=ps(e),n=[e.first_team_info,e.second_team_info],r=n.find(c=>c.location==="home")??e.first_team_info,a=n.find(c=>c.location==="away")??e.second_team_info,o=t?.team.name===r?.team.name,i=t?.team.name===a?.team.name;return s.jsxs("div",{className:"flex w-full gap-1.5 py-3 text-base",children:[s.jsxs("div",{className:"flex flex-col items-start gap-1 pr-3",children:[s.jsx(Y,{team:r.team,isWinner:o,logoSize:"small"}),s.jsx(Y,{team:a.team,isWinner:i,logoSize:"small"})]}),s.jsxs("div",{className:"flex flex-1 flex-col items-start gap-1",children:[s.jsx(B,{score:r.score,isWinner:o}),s.jsx(B,{score:a.score,isWinner:i})]}),s.jsx("div",{className:"flex w-32 flex-col items-end justify-center gap-1 text-sm",children:s.jsx(gs,{game:e})})]})}function sr({game:e}){const t=ps(e),n=[e.first_team_info,e.second_team_info],r=n.find(c=>c.location==="home")??e.first_team_info,a=n.find(c=>c.location==="away")??e.second_team_info,o=t?.team.name===r?.team.name,i=t?.team.name===a?.team.name;return s.jsxs("div",{className:"flex w-full py-3 text-base",children:[s.jsx("div",{className:"flex flex-1 items-center justify-center px-2",children:s.jsx(Y,{team:r.team,isWinner:o})}),s.jsx("div",{className:"mr-8 flex items-center justify-end",children:s.jsx(B,{score:r.score,isWinner:o,className:"text-lg font-semibold"})}),s.jsx("div",{className:"flex w-24 shrink flex-col items-center justify-center gap-1 align-middle text-sm",children:s.jsx(gs,{game:e})}),s.jsx("div",{className:"ml-8 flex items-center justify-start",children:s.jsx(B,{score:a.score,isWinner:i,className:"text-lg font-semibold"})}),s.jsx("div",{className:"flex flex-1 items-center justify-center px-2",children:s.jsx(Y,{team:a.team,isWinner:i})})]})}function ms(e){return e.live?"live":new Date(e.date)<new Date?"complete":"scheduled"}function ps(e){return ms(e)!=="complete"||e.first_team_info.score==null||e.second_team_info.score==null?null:e.first_team_info.score>e.second_team_info.score?e.first_team_info:e.second_team_info}function Y({team:e,isWinner:t,logoSize:n}){return s.jsxs("span",{className:y("flex items-center gap-1",t&&"font-semibold","max-w-64 lg:max-w-52 xl:max-w-64"),children:[e.logo&&s.jsx(fs,{team:{name:e.name,logo:e.logo},className:y(n==="small"?"w-6":"w-8")}),s.jsx("span",{className:"truncate",children:e.name})]})}function B({score:e,isWinner:t,className:n}){return e==null?null:s.jsx("span",{className:y(t&&"font-semibold",n),children:e})}function gs({game:e}){const t=M();switch(ms(e)){case"live":return s.jsxs(s.Fragment,{children:[s.jsx(nr,{}),s.jsx("div",{children:e.details})]});case"complete":return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"font-semibold",children:s.jsx($,{id:"q/iMZL",defaultMessage:"Final"})}),s.jsx("div",{className:"text-token-text-secondary",children:Re(t,new Date(e.date))})]});case"scheduled":{const n=new Date(e.date);return isNaN(n.getTime())?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{children:Re(t,n)}),s.jsx("div",{className:"text-token-text-secondary",children:t.formatDate(n,{timeStyle:"short"})})]})}}}const tr=(Intl.DateTimeFormat(void 0,{timeZoneName:"long"}).formatToParts(new Date)?.find(t=>t.type==="timeZoneName")?.value??Intl.DateTimeFormat().resolvedOptions().timeZone).replace(/Daylight|Standard/g,"");function Re(e,t){return os(t)?s.jsx($,{id:"d1AF7T",defaultMessage:"Today"}):e.formatDate(t,{month:"long",day:"numeric"})}function nr(){return s.jsx("div",{className:"rounded-[4px] bg-token-surface-error px-1.5 py-1 text-xs font-semibold text-white",children:s.jsx($,{id:"vObALn",defaultMessage:"Live"})})}function rr({standingsRef:e,trackContentReferenceEvent:t}){const[n,r]=m.useState(0),{isLoading:a,value:o}=qe("1684776951"),i=e.conferences.length>0&&o&&!a;m.useEffect(()=>{i&&t(x.searchContentReferenceShown,"search_content_reference_shown","sports",{hasStandings:!0})},[i]);const c=e.conferences[n],u=e.conferences.length>1?e.conferences.map((h,d)=>s.jsx("button",{className:y(n===d?"text-token-text-primary":"text-token-text-tertiary","text-sm font-semibold"),onClick:()=>r(d),children:h.name},h.name)):null;return s.jsxs(s.Fragment,{children:[u&&s.jsx("div",{className:"flex gap-4",children:u}),s.jsx("div",{className:"mt-3",children:c.divisions.map(h=>h.name?s.jsx("div",{className:"mt-3",children:s.jsx(Ue,{division:h,teamsColumnHeader:h.name})},h.name):s.jsx(Ue,{division:h}))})]})}function Ue({division:e,teamsColumnHeader:t}){const n=e.headers.map(r=>r.key);return s.jsxs(D.Root,{size:"compact",className:"not-prose",children:[s.jsxs(D.Header,{children:[s.jsx(ar,{children:t??s.jsx($,{id:"kKSGje",defaultMessage:"Team"})}),e.headers.map(r=>s.jsx(xs,{textAlign:"center",className:"min-w-11 !px-0",children:s.jsx(Oe,{data:r})},r.key))]}),s.jsx(D.Body,{children:e.teams.map(({team:r,data:a},o)=>{const i=a.reduce((c,u)=>(c[u.key]=u,c),{});return s.jsxs(D.Row,{children:[s.jsx(D.Cell,{className:"w-full !border-0 !py-0 !pl-0",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"mr-2 w-4 whitespace-nowrap tabular-nums text-token-text-tertiary",children:o+1}),s.jsxs("div",{className:"flex items-center justify-start gap-2",children:[s.jsx(fs,{team:r,className:"w-6"}),s.jsx("span",{className:"whitespace-nowrap text-base",children:r.name})]})]})}),n.map(c=>s.jsx(D.Cell,{className:"min-w-11 whitespace-nowrap !border-0 !px-0 !py-0 text-left tabular-nums",textAlign:"center",children:s.jsx(Oe,{data:i[c]})},c))]},r.name)})})]})}function Oe({data:e}){switch(e.type){case"text":return s.jsx(s.Fragment,{children:e.text});default:return s.jsx(s.Fragment,{children:e.alt})}}const xs=Xe(D.HeaderCell)`text-token-text-secondary !font-normal text-sm !static !bg-transparent !border-token-border-light !border-t-0 !border-l-0 !border-r-0`,ar=Xe(xs)`text-token-text-primary !pl-0`;function or({metadata:e,trackContentReferenceEvent:t}){m.useEffect(()=>{t(x.searchContentReferenceShown,"search_content_reference_shown",e.type)},[t,e.type]);const n=M(),r=F(e.utc_time,e.utc_offset),a=n.formatDate(r,{hour:"numeric",minute:"numeric"});return s.jsx("span",{children:a})}function ir({webpageRef:e,index:t,node:n,trackContentReferenceEvent:r}){const a=me(),o=is(),[i,c]=m.useState(o?a.getStaticStyles(n):{}),[u,h]=m.useState(null);return m.useEffect(()=>{if(!n||!u||!o)return;async function d(){if(!n)return;const l=await a.processElementForStyles(n);m.startTransition(()=>{c(l)})}d()},[o,n,u,a]),e.status==="loading"?s.jsx("span",{style:i,ref:h,children:s.jsx(cr,{})}):s.jsx("span",{style:i,ref:h,children:e.items.map((d,l)=>s.jsx(lr,{webpageItem:d,contentRef:e,index:t,trackContentReferenceEvent:r},`${l}-${d.url}`))})}function cr(){return s.jsx("div",{className:"inline-flex items-center gap-1.5",children:s.jsx("div",{className:"h-[22px] w-20 animate-pulse rounded-full bg-[#f4f4f4] dark:bg-token-main-surface-secondary"})})}function lr({webpageItem:e,contentRef:t,index:n,className:r,trackContentReferenceEvent:a}){const o={url:e.url,title:e.title,pub_date:hr(e.pub_date)},i=()=>{a(x.searchCitationClicked,"search_citation_clicked","webpage",o),a(x.browsingClickCitation,"chatgpt_browsing_click_citation","webpage",o)},c=m.useContext(z),u=rs(),h=s.jsx("div",{className:"relative inline-flex items-center",children:s.jsx(A,{href:e.url,className:y("flex h-[22px] items-center rounded-xl px-2 text-[0.5em] !font-medium uppercase","bg-[#f4f4f4] !text-token-text-secondary hover:bg-token-text-primary hover:!text-token-main-surface-secondary dark:bg-token-main-surface-secondary dark:hover:bg-token-text-primary","relative top-[-0.1875rem]",r),onClick:i,onMouseEnter:()=>{e.attributions!=null&&P.setHighlight(c?.message.id,e.attributions?.slice(0,u)?.map(({attribution_index:d,probability:l})=>({index:d,probability:l})))},onMouseLeave:()=>{P.clearHighlights()},children:s.jsx("span",{className:"truncate",children:e.attribution??s.jsx(pe,{url:e.url})})})});return s.jsx(dr,{webpageItem:e,contentRef:t,index:n,eventMetadata:o,trackContentReferenceEvent:a,children:h})}function dr({webpageItem:e,eventMetadata:t,children:n,trackContentReferenceEvent:r}){return m.useEffect(()=>{r(x.searchCitationShown,"search_citation_shown","webpage",t),r(x.browsingDisplayCitation,"chatgpt_browsing_display_citation","webpage",t)},[]),s.jsx(bs,{webpageItem:e,onClick:()=>{r(x.searchCitationClicked,"search_citation_clicked","webpage",t),r(x.browsingClickCitation,"chatgpt_browsing_click_citation","webpage",t)},onOpenChange:a=>{a&&(r(x.searchCitationHovered,"search_citation_hovered","webpage",t),r(x.browsingHoverCitation,"chatgpt_browsing_hover_citation","webpage",t))},children:n})}function bs({webpageItem:e,onClick:t,onOpenChange:n,children:r,className:a}){const o=W().resolvedTheme==="dark",i=fe(),c=e.pub_date!=null&&new Date(e.pub_date*1e3);return s.jsx(Z,{label:s.jsxs(A,{href:e.url,className:y("flex max-w-80 flex-col gap-1 text-left text-xs font-normal text-token-text-primary !no-underline",a),onClick:t,children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:"h-4 w-4 shrink-0 overflow-hidden rounded-full",children:s.jsx(G,{url:e.url,size:32,minSize:16})}),s.jsx("div",{className:"truncate text-token-text-primary",children:e.attribution??s.jsx(pe,{url:e.url})})]}),s.jsx("div",{className:"line-clamp-2 text-sm font-medium",children:e.title}),s.jsxs("div",{className:"line-clamp-2 text-sm text-token-text-secondary",children:[c&&c.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),c&&e.snippet&&" — ",e.snippet]}),i&&s.jsx(Dt,{item:e})]}),onOpenChange:n,side:"bottom",sideOffset:10,withArrow:!1,delayDuration:150,theme:o?"default":"white",align:"start",customPaddingClassName:"p-3",cornerRadius:"xl",customBorderClassName:"border-token-border-light border",wide:!0,children:r})}function hr(e){if(e!=null)return new Date(e*1e3).toISOString()}function ur({metadata:e,trackContentReferenceEvent:t}){return m.useEffect(()=>{t(x.searchContentReferenceShown,"search_content_reference_shown",e.type)},[t,e.type]),s.jsx("div",{children:e.url?s.jsx(bs,{webpageItem:{url:e.url,title:e.description,pub_date:null,snippet:"",attributions:null},className:"inline-flex flex-col",children:s.jsx(A,{href:e.url,className:"!font-semibold",children:e.description})}):s.jsx("div",{className:"!font-semibold",children:e.description})})}function fr({tldr:e,trackContentReferenceEvent:t}){const n={url:e.url,title:e.display_title};return m.useEffect(()=>{t(x.searchContentReferenceShown,"search_content_reference_shown",e.type,n)},[]),e.url==null||e.url===""?null:s.jsx("div",{className:"not-prose mb-3 flex flex-col gap-4 text-base",children:s.jsx(A,{href:e.url,onClick:()=>t(x.searchContentReferenceClicked,"search_content_reference_clicked",e.type,n),className:"group/tldr",children:s.jsxs("div",{className:"grid max-w-full shrink grid-cols-[1fr,auto] items-center gap-x-8 sm:gap-x-16",children:[s.jsxs("div",{className:"flex shrink flex-col overflow-hidden",children:[s.jsx("div",{className:"shrink text-lg font-semibold text-token-text-primary 2xl:text-xl",children:e.display_title}),s.jsx("div",{className:"flex items-center truncate text-token-link [overflow-wrap:anywhere] group-hover/tldr:opacity-70",children:cs(e.breadcrumbs)?.map((r,a)=>s.jsxs(m.Fragment,{children:[a!==0&&s.jsx(mt,{className:"h-4 w-4 shrink-0"}),s.jsx("div",{className:"truncate",children:r.toLowerCase()})]},a))})]}),s.jsx(G,{url:e.url,size:128,minSize:32,className:"mr-[0.1875rem] h-7 w-7 shrink-0 rounded"}),e.snippet&&s.jsx("div",{className:"line-clamp-3 overflow-hidden text-ellipsis text-sm text-token-text-tertiary",children:e.snippet})]})})})}function mr({url:e,className:t}){let n;const r="aspect-video w-full rounded-lg",a=pr(e);a&&(n=s.jsx(gr,{videoId:a,className:r}));const o=xr(e);return o&&(n=s.jsx(br,{videoId:o,className:r})),n?s.jsx("div",{className:t,children:n}):null}function pr(e){const t=/^(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,n=e.match(t);return n?n[1]:null}function gr({videoId:e,className:t}){return s.jsx("iframe",{className:t,src:`https://www.youtube.com/embed/${e}`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerPolicy:"strict-origin-when-cross-origin",allowFullScreen:!0})}function xr(e){const t=/vimeo\.com\/(?:channels\/(?:\w+\/)?|groups\/[^/]+\/videos\/|video\/|)(\d+)/,n=e.match(t);return n?n[1]:null}function br({videoId:e,className:t}){return s.jsx(s.Fragment,{children:s.jsx("iframe",{className:t,src:`https://player.vimeo.com/video/${e}`,frameBorder:"0",allow:"autoplay; fullscreen; picture-in-picture",allowFullScreen:!0})})}function vr({video:e,trackContentReferenceEvent:t}){const n={url:e.url,title:e.title};return m.useEffect(()=>{t(x.searchContentReferenceShown,"search_content_reference_shown",e.type,n)},[]),e.url==null||e.url===""?null:s.jsx("div",{className:"not-prose mb-3 flex flex-col gap-4 text-base",children:s.jsx(mr,{url:e.url})})}function vs(e,t){const n=et(e),r=t<0?"-":"+",a=Math.abs(t),o=Math.floor(a/3600).toString().padStart(2,"0"),i=Math.floor(a%3600/60).toString().padStart(2,"0"),c=`${r}${o}:${i}`;return F(n,c)}const yr="webp",wr=96,$r=96,jr="srgb",kr=4,Nr="uchar",Cr=288,Sr=!1,_r=!1,Pr=!0,Dr="https://cdn.oaistatic.com/assets/cloud-foggy-o4a3hmky.webp",Tr={format:yr,width:wr,height:$r,space:jr,channels:kr,depth:Nr,density:Cr,isProgressive:Sr,hasProfile:_r,hasAlpha:Pr,src:Dr},Mr="webp",Ar=96,Er=96,Ir="srgb",Lr=4,Fr="uchar",zr=288,Hr=!1,Rr=!1,Ur=!0,Or="https://cdn.oaistatic.com/assets/cloudy-co8vwrk7.webp",Yr={format:Mr,width:Ar,height:Er,space:Ir,channels:Lr,depth:Fr,density:zr,isProgressive:Hr,hasProfile:Rr,hasAlpha:Ur,src:Or},Br="webp",Wr=96,Zr=96,Gr="srgb",Vr=4,qr="uchar",Xr=288,Kr=!1,Jr=!1,Qr=!0,ea="https://cdn.oaistatic.com/assets/heavy-snow-mke52kag.webp",sa={format:Br,width:Wr,height:Zr,space:Gr,channels:Vr,depth:qr,density:Xr,isProgressive:Kr,hasProfile:Jr,hasAlpha:Qr,src:ea},ta="webp",na=96,ra=96,aa="srgb",oa=4,ia="uchar",ca=288,la=!1,da=!1,ha=!0,ua="https://cdn.oaistatic.com/assets/light-snow-mcy1l7t9.webp",fa={format:ta,width:na,height:ra,space:aa,channels:oa,depth:ia,density:ca,isProgressive:la,hasProfile:da,hasAlpha:ha,src:ua},ma="webp",pa=96,ga=96,xa="srgb",ba=4,va="uchar",ya=288,wa=!1,$a=!1,ja=!0,ka="https://cdn.oaistatic.com/assets/moon-drizzle-cplxr2ub.webp",Na={format:ma,width:pa,height:ga,space:xa,channels:ba,depth:va,density:ya,isProgressive:wa,hasProfile:$a,hasAlpha:ja,src:ka},Ca="webp",Sa=96,_a=96,Pa="srgb",Da=4,Ta="uchar",Ma=288,Aa=!1,Ea=!1,Ia=!0,La="https://cdn.oaistatic.com/assets/moon-hazy-jvgt25bp.webp",Fa={format:Ca,width:Sa,height:_a,space:Pa,channels:Da,depth:Ta,density:Ma,isProgressive:Aa,hasProfile:Ea,hasAlpha:Ia,src:La},za="webp",Ha=96,Ra=96,Ua="srgb",Oa=4,Ya="uchar",Ba=288,Wa=!1,Za=!1,Ga=!0,Va="https://cdn.oaistatic.com/assets/moon-mostly-cloudy-cia3do0v.webp",qa={format:za,width:Ha,height:Ra,space:Ua,channels:Oa,depth:Ya,density:Ba,isProgressive:Wa,hasProfile:Za,hasAlpha:Ga,src:Va},Xa="webp",Ka=96,Ja=96,Qa="srgb",eo=4,so="uchar",to=288,no=!1,ro=!1,ao=!0,oo="https://cdn.oaistatic.com/assets/moon-mostly-sunny-n3mh1b6a.webp",io={format:Xa,width:Ka,height:Ja,space:Qa,channels:eo,depth:so,density:to,isProgressive:no,hasProfile:ro,hasAlpha:ao,src:oo},co="webp",lo=96,ho=96,uo="srgb",fo=4,mo="uchar",po=288,go=!1,xo=!1,bo=!0,vo="https://cdn.oaistatic.com/assets/moon-shower-ntzhti9o.webp",yo={format:co,width:lo,height:ho,space:uo,channels:fo,depth:mo,density:po,isProgressive:go,hasProfile:xo,hasAlpha:bo,src:vo},wo="webp",$o=96,jo=96,ko="srgb",No=4,Co="uchar",So=288,_o=!1,Po=!1,Do=!0,To="https://cdn.oaistatic.com/assets/moon-sunny-eg2emh4d.webp",Mo={format:wo,width:$o,height:jo,space:ko,channels:No,depth:Co,density:So,isProgressive:_o,hasProfile:Po,hasAlpha:Do,src:To},Ao="webp",Eo=96,Io=96,Lo="srgb",Fo=4,zo="uchar",Ho=288,Ro=!1,Uo=!1,Oo=!0,Yo="https://cdn.oaistatic.com/assets/rain-thunder-bx7a0l5g.webp",Bo={format:Ao,width:Eo,height:Io,space:Lo,channels:Fo,depth:zo,density:Ho,isProgressive:Ro,hasProfile:Uo,hasAlpha:Oo,src:Yo},Wo="webp",Zo=96,Go=96,Vo="srgb",qo=4,Xo="uchar",Ko=288,Jo=!1,Qo=!1,ei=!0,si="https://cdn.oaistatic.com/assets/rain-cxs76xuj.webp",ti={format:Wo,width:Zo,height:Go,space:Vo,channels:qo,depth:Xo,density:Ko,isProgressive:Jo,hasProfile:Qo,hasAlpha:ei,src:si},ni="webp",ri=96,ai=96,oi="srgb",ii=4,ci="uchar",li=288,di=!1,hi=!1,ui=!0,fi="https://cdn.oaistatic.com/assets/sleet-gc63vwmo.webp",mi={format:ni,width:ri,height:ai,space:oi,channels:ii,depth:ci,density:li,isProgressive:di,hasProfile:hi,hasAlpha:ui,src:fi},pi="webp",gi=96,xi=96,bi="srgb",vi=4,yi="uchar",wi=288,$i=!1,ji=!1,ki=!0,Ni="https://cdn.oaistatic.com/assets/snow-d0k6tmmc.webp",Ci={format:pi,width:gi,height:xi,space:bi,channels:vi,depth:yi,density:wi,isProgressive:$i,hasProfile:ji,hasAlpha:ki,src:Ni},Si="webp",_i=96,Pi=96,Di="srgb",Ti=4,Mi="uchar",Ai=288,Ei=!1,Ii=!1,Li=!0,Fi="https://cdn.oaistatic.com/assets/sun-drizzle-g94obr5e.webp",zi={format:Si,width:_i,height:Pi,space:Di,channels:Ti,depth:Mi,density:Ai,isProgressive:Ei,hasProfile:Ii,hasAlpha:Li,src:Fi},Hi="webp",Ri=96,Ui=96,Oi="srgb",Yi=4,Bi="uchar",Wi=288,Zi=!1,Gi=!1,Vi=!0,qi="https://cdn.oaistatic.com/assets/sun-hazy-c3z1j0hy.webp",Xi={format:Hi,width:Ri,height:Ui,space:Oi,channels:Yi,depth:Bi,density:Wi,isProgressive:Zi,hasProfile:Gi,hasAlpha:Vi,src:qi},Ki="webp",Ji=96,Qi=96,ec="srgb",sc=4,tc="uchar",nc=288,rc=!1,ac=!1,oc=!0,ic="https://cdn.oaistatic.com/assets/sun-mostly-cloudy-d4o4zkga.webp",cc={format:Ki,width:Ji,height:Qi,space:ec,channels:sc,depth:tc,density:nc,isProgressive:rc,hasProfile:ac,hasAlpha:oc,src:ic},lc="webp",dc=96,hc=96,uc="srgb",fc=4,mc="uchar",pc=288,gc=!1,xc=!1,bc=!0,vc="https://cdn.oaistatic.com/assets/sun-mostly-sunny-livrdkgu.webp",yc={format:lc,width:dc,height:hc,space:uc,channels:fc,depth:mc,density:pc,isProgressive:gc,hasProfile:xc,hasAlpha:bc,src:vc},wc="webp",$c=96,jc=96,kc="srgb",Nc=4,Cc="uchar",Sc=288,_c=!1,Pc=!1,Dc=!0,Tc="https://cdn.oaistatic.com/assets/sun-shower-lvtjthah.webp",Mc={format:wc,width:$c,height:jc,space:kc,channels:Nc,depth:Cc,density:Sc,isProgressive:_c,hasProfile:Pc,hasAlpha:Dc,src:Tc},Ac="webp",Ec=96,Ic=96,Lc="srgb",Fc=4,zc="uchar",Hc=288,Rc=!1,Uc=!1,Oc=!0,Yc="https://cdn.oaistatic.com/assets/sun-sunny-kqjpjzd8.webp",Bc={format:Ac,width:Ec,height:Ic,space:Lc,channels:Fc,depth:zc,density:Hc,isProgressive:Rc,hasProfile:Uc,hasAlpha:Oc,src:Yc},Wc="webp",Zc=96,Gc=96,Vc="srgb",qc=4,Xc="uchar",Kc=288,Jc=!1,Qc=!1,el=!0,sl="https://cdn.oaistatic.com/assets/thunder-jgjqg9ai.webp",tl={format:Wc,width:Zc,height:Gc,space:Vc,channels:qc,depth:Xc,density:Kc,isProgressive:Jc,hasProfile:Qc,hasAlpha:el,src:sl},nl="webp",rl=96,al=96,ol="srgb",il=4,cl="uchar",ll=288,dl=!1,hl=!1,ul=!0,fl="https://cdn.oaistatic.com/assets/tornado-opa24tq3.webp",ml={format:nl,width:rl,height:al,space:ol,channels:il,depth:cl,density:ll,isProgressive:dl,hasProfile:hl,hasAlpha:ul,src:fl},pl="webp",gl=96,xl=96,bl="srgb",vl=4,yl="uchar",wl=288,$l=!1,jl=!1,kl=!0,Nl="https://cdn.oaistatic.com/assets/windy-mw0a3u21.webp",Cl={format:pl,width:gl,height:xl,space:bl,channels:vl,depth:yl,density:wl,isProgressive:$l,hasProfile:jl,hasAlpha:kl,src:Nl},Sl="webp",_l=96,Pl=96,Dl="srgb",Tl=4,Ml="uchar",Al=288,El=!1,Il=!1,Ll=!0,Fl="https://cdn.oaistatic.com/assets/cloud-foggy-fhg0jn0w.webp",zl={format:Sl,width:_l,height:Pl,space:Dl,channels:Tl,depth:Ml,density:Al,isProgressive:El,hasProfile:Il,hasAlpha:Ll,src:Fl},Hl="webp",Rl=96,Ul=96,Ol="srgb",Yl=4,Bl="uchar",Wl=288,Zl=!1,Gl=!1,Vl=!0,ql="https://cdn.oaistatic.com/assets/cloudy-disd26f3.webp",Xl={format:Hl,width:Rl,height:Ul,space:Ol,channels:Yl,depth:Bl,density:Wl,isProgressive:Zl,hasProfile:Gl,hasAlpha:Vl,src:ql},Kl="webp",Jl=96,Ql=96,ed="srgb",sd=4,td="uchar",nd=288,rd=!1,ad=!1,od=!0,id="https://cdn.oaistatic.com/assets/heavy-snow-g6jjwo2d.webp",cd={format:Kl,width:Jl,height:Ql,space:ed,channels:sd,depth:td,density:nd,isProgressive:rd,hasProfile:ad,hasAlpha:od,src:id},ld="webp",dd=96,hd=96,ud="srgb",fd=4,md="uchar",pd=288,gd=!1,xd=!1,bd=!0,vd="https://cdn.oaistatic.com/assets/light-snow-iz0efpkh.webp",yd={format:ld,width:dd,height:hd,space:ud,channels:fd,depth:md,density:pd,isProgressive:gd,hasProfile:xd,hasAlpha:bd,src:vd},wd="webp",$d=96,jd=96,kd="srgb",Nd=4,Cd="uchar",Sd=288,_d=!1,Pd=!1,Dd=!0,Td="https://cdn.oaistatic.com/assets/moon-drizzle-b1nfv39c.webp",Md={format:wd,width:$d,height:jd,space:kd,channels:Nd,depth:Cd,density:Sd,isProgressive:_d,hasProfile:Pd,hasAlpha:Dd,src:Td},Ad="webp",Ed=96,Id=96,Ld="srgb",Fd=4,zd="uchar",Hd=288,Rd=!1,Ud=!1,Od=!0,Yd="https://cdn.oaistatic.com/assets/moon-hazy-nfnzea7a.webp",Bd={format:Ad,width:Ed,height:Id,space:Ld,channels:Fd,depth:zd,density:Hd,isProgressive:Rd,hasProfile:Ud,hasAlpha:Od,src:Yd},Wd="webp",Zd=96,Gd=96,Vd="srgb",qd=4,Xd="uchar",Kd=288,Jd=!1,Qd=!1,eh=!0,sh="https://cdn.oaistatic.com/assets/moon-mostly-cloudy-e56e3z55.webp",th={format:Wd,width:Zd,height:Gd,space:Vd,channels:qd,depth:Xd,density:Kd,isProgressive:Jd,hasProfile:Qd,hasAlpha:eh,src:sh},nh="webp",rh=96,ah=96,oh="srgb",ih=4,ch="uchar",lh=288,dh=!1,hh=!1,uh=!0,fh="https://cdn.oaistatic.com/assets/moon-mostly-sunny-ffu4gzf4.webp",mh={format:nh,width:rh,height:ah,space:oh,channels:ih,depth:ch,density:lh,isProgressive:dh,hasProfile:hh,hasAlpha:uh,src:fh},ph="webp",gh=96,xh=96,bh="srgb",vh=4,yh="uchar",wh=288,$h=!1,jh=!1,kh=!0,Nh="https://cdn.oaistatic.com/assets/moon-shower-e5dy9u48.webp",Ch={format:ph,width:gh,height:xh,space:bh,channels:vh,depth:yh,density:wh,isProgressive:$h,hasProfile:jh,hasAlpha:kh,src:Nh},Sh="webp",_h=96,Ph=96,Dh="srgb",Th=4,Mh="uchar",Ah=288,Eh=!1,Ih=!1,Lh=!0,Fh="https://cdn.oaistatic.com/assets/moon-sunny-d9o08xiw.webp",zh={format:Sh,width:_h,height:Ph,space:Dh,channels:Th,depth:Mh,density:Ah,isProgressive:Eh,hasProfile:Ih,hasAlpha:Lh,src:Fh},Hh="webp",Rh=96,Uh=96,Oh="srgb",Yh=4,Bh="uchar",Wh=288,Zh=!1,Gh=!1,Vh=!0,qh="https://cdn.oaistatic.com/assets/rain-thunder-eplemvu1.webp",Xh={format:Hh,width:Rh,height:Uh,space:Oh,channels:Yh,depth:Bh,density:Wh,isProgressive:Zh,hasProfile:Gh,hasAlpha:Vh,src:qh},Kh="webp",Jh=96,Qh=96,eu="srgb",su=4,tu="uchar",nu=288,ru=!1,au=!1,ou=!0,iu="https://cdn.oaistatic.com/assets/rain-ogayr6kt.webp",cu={format:Kh,width:Jh,height:Qh,space:eu,channels:su,depth:tu,density:nu,isProgressive:ru,hasProfile:au,hasAlpha:ou,src:iu},lu="webp",du=96,hu=96,uu="srgb",fu=4,mu="uchar",pu=288,gu=!1,xu=!1,bu=!0,vu="https://cdn.oaistatic.com/assets/sleet-o8noil7l.webp",yu={format:lu,width:du,height:hu,space:uu,channels:fu,depth:mu,density:pu,isProgressive:gu,hasProfile:xu,hasAlpha:bu,src:vu},wu="webp",$u=96,ju=96,ku="srgb",Nu=4,Cu="uchar",Su=288,_u=!1,Pu=!1,Du=!0,Tu="https://cdn.oaistatic.com/assets/snow-lq4cl3uc.webp",Mu={format:wu,width:$u,height:ju,space:ku,channels:Nu,depth:Cu,density:Su,isProgressive:_u,hasProfile:Pu,hasAlpha:Du,src:Tu},Au="webp",Eu=96,Iu=96,Lu="srgb",Fu=4,zu="uchar",Hu=288,Ru=!1,Uu=!1,Ou=!0,Yu="https://cdn.oaistatic.com/assets/sun-drizzle-htsohv65.webp",Bu={format:Au,width:Eu,height:Iu,space:Lu,channels:Fu,depth:zu,density:Hu,isProgressive:Ru,hasProfile:Uu,hasAlpha:Ou,src:Yu},Wu="webp",Zu=96,Gu=96,Vu="srgb",qu=4,Xu="uchar",Ku=288,Ju=!1,Qu=!1,ef=!0,sf="https://cdn.oaistatic.com/assets/sun-hazy-nfj7clcd.webp",tf={format:Wu,width:Zu,height:Gu,space:Vu,channels:qu,depth:Xu,density:Ku,isProgressive:Ju,hasProfile:Qu,hasAlpha:ef,src:sf},nf="webp",rf=96,af=96,of="srgb",cf=4,lf="uchar",df=288,hf=!1,uf=!1,ff=!0,mf="https://cdn.oaistatic.com/assets/sun-mostly-cloudy-e3pqqgs7.webp",pf={format:nf,width:rf,height:af,space:of,channels:cf,depth:lf,density:df,isProgressive:hf,hasProfile:uf,hasAlpha:ff,src:mf},gf="webp",xf=96,bf=96,vf="srgb",yf=4,wf="uchar",$f=288,jf=!1,kf=!1,Nf=!0,Cf="https://cdn.oaistatic.com/assets/sun-mostly-sunny-o99k1c7a.webp",Sf={format:gf,width:xf,height:bf,space:vf,channels:yf,depth:wf,density:$f,isProgressive:jf,hasProfile:kf,hasAlpha:Nf,src:Cf},_f="webp",Pf=96,Df=96,Tf="srgb",Mf=4,Af="uchar",Ef=288,If=!1,Lf=!1,Ff=!0,zf="https://cdn.oaistatic.com/assets/sun-shower-ldwl4jbp.webp",Hf={format:_f,width:Pf,height:Df,space:Tf,channels:Mf,depth:Af,density:Ef,isProgressive:If,hasProfile:Lf,hasAlpha:Ff,src:zf},Rf="webp",Uf=96,Of=96,Yf="srgb",Bf=4,Wf="uchar",Zf=!1,Gf=!1,Vf=!0,qf="https://cdn.oaistatic.com/assets/sun-sunny-kqjpjzd8.webp",Xf={format:Rf,width:Uf,height:Of,space:Yf,channels:Bf,depth:Wf,isProgressive:Zf,hasProfile:Gf,hasAlpha:Vf,src:qf},Kf="webp",Jf=96,Qf=96,em="srgb",sm=4,tm="uchar",nm=288,rm=!1,am=!1,om=!0,im="https://cdn.oaistatic.com/assets/thunder-xzn1cku3.webp",cm={format:Kf,width:Jf,height:Qf,space:em,channels:sm,depth:tm,density:nm,isProgressive:rm,hasProfile:am,hasAlpha:om,src:im},lm="webp",dm=96,hm=96,um="srgb",fm=4,mm="uchar",pm=288,gm=!1,xm=!1,bm=!0,vm="https://cdn.oaistatic.com/assets/tornado-diqu61wg.webp",ym={format:lm,width:dm,height:hm,space:um,channels:fm,depth:mm,density:pm,isProgressive:gm,hasProfile:xm,hasAlpha:bm,src:vm},wm="webp",$m=96,jm=96,km="srgb",Nm=4,Cm="uchar",Sm=288,_m=!1,Pm=!1,Dm=!0,Tm="https://cdn.oaistatic.com/assets/windy-n2v8wtyp.webp",Mm={format:wm,width:$m,height:jm,space:km,channels:Nm,depth:Cm,density:Sm,isProgressive:_m,hasProfile:Pm,hasAlpha:Dm,src:Tm},Am={foggy:{default:Tr},cloudy:{default:Yr},"heavy-snow":{default:sa},"light-snow":{default:fa},sleet:{default:mi},drizzle:{default:zi,night:Na},hazy:{default:Xi,night:Fa},"mostly-cloudy":{default:cc,night:qa},"mostly-sunny":{default:yc,night:io},shower:{default:Mc,night:yo},sunny:{default:Bc,night:Mo},"rain-thunder":{default:Bo},rain:{default:ti},snow:{default:Ci},thunder:{default:tl},tornado:{default:ml},windy:{default:Cl}},Em={foggy:{default:zl},cloudy:{default:Xl},"heavy-snow":{default:cd},"light-snow":{default:yd},sleet:{default:yu},drizzle:{default:Bu,night:Md},hazy:{default:tf,night:Bd},"mostly-cloudy":{default:pf,night:th},"mostly-sunny":{default:Sf,night:mh},shower:{default:Hf,night:Ch},sunny:{default:Xf,night:zh},"rain-thunder":{default:Xh},rain:{default:cu},snow:{default:Mu},thunder:{default:cm},tornado:{default:ym},windy:{default:Mm}};function Im({weatherCode:e,isDarkMode:t,isNight:n}){const r=t?Em:Am,a=Lm(e),o=r[a];return o.night&&n?o.night:o.default}function Lm(e){switch(e){case 1:case 33:return"sunny";case 2:case 3:case 34:case 35:case 36:return"mostly-sunny";case 4:case 6:case 13:case 14:case 38:return"mostly-cloudy";case 5:case 37:return"hazy";case 7:case 8:return"cloudy";case 11:return"foggy";case 12:case 39:case 40:return"shower";case 15:case 16:case 17:case 41:case 42:return"thunder";case 18:return"rain";case 19:case 20:case 21:case 43:return"light-snow";case 22:case 23:case 44:return"snow";case 24:case 25:case 26:case 29:return"sleet";case 32:return"windy";default:return"cloudy"}}const Fm="C";function zm(e,t){return Math.round(e==="F"?t*9/5+32:(t-32)*5/9)}function Ye(e,t,n=Fm){return e===n?`${Math.round(t)}°`:`${zm(e,t)}°`}const Hm=7,Rm=m.memo(function({weatherResults:t,dateRange:n,turnIndex:r,trackContentReferenceEvent:a}){const[o,i]=Zm();m.useEffect(()=>{a(x.searchContentReferenceShown,"search_content_reference_shown","forecast")},[a]);const{daily:c,hourly:u}=t,h=n!=null,d=M(),l=h?u.filter(f=>f.timestamp>=n.start_timestamp&&f.timestamp<n.end_timestamp):c.slice(0,Hm);function p(){const{current:f}=t;if(!f)return null;const b=f.temperature.current,v=f.description,k=cs([b&&O(d,b,o),v.description]).join(" · ");return s.jsxs("div",{className:"not-prose flex items-center gap-4",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx("div",{className:"text-lg font-semibold",children:k}),s.jsx("div",{className:"text-token-text-secondary",children:Wm(t.location)})]}),s.jsxs("div",{className:"flex",children:[s.jsx(Om,{onTemperatureUnitChange:i,temperatureUnit:o}),s.jsx(Be,{weatherDescriptionData:v,isNight:f.night})]})]})}return s.jsxs(s.Fragment,{children:[p(),s.jsx(Um,{turnIndex:r}),l.length>1&&s.jsx("div",{className:"no-scrollbar not-prose mt-1 overflow-auto sm:overflow-hidden",children:s.jsx(D.Root,{className:"min-w-0",children:s.jsx(D.Body,{className:"border-b-[0.5px] border-token-border-medium [&_tr:last-child]:border-b-0",children:l.map((f,b)=>s.jsxs(D.Row,{children:[s.jsxs(te,{className:y(h?"w-[180px]":"w-[150px]"),children:[s.jsx(Be,{weatherDescriptionData:f.description,isNight:f.night,size:"small"}),s.jsx("div",{className:"ml-3",children:h?s.jsx("span",{className:"lowercase",children:Bm(d,f)}):Ym(d,f)})]}),s.jsx(te,{className:y("tabular-nums",h&&"w-[60px]"),children:h?s.jsx("div",{children:O(d,f.temperature.current,o)}):s.jsxs(s.Fragment,{children:[s.jsx("div",{children:O(d,f.temperature.max,o)}),s.jsx("div",{className:"ml-1 text-token-text-secondary",children:O(d,f.temperature.min,o)})]})}),s.jsx(te,{children:f.description.description})]},b))})})})]})});function te({className:e,children:t}){return s.jsx(D.Cell,{className:y("!border-l-0 !border-r-0 !border-token-border-xlight !py-2 !pl-4 !pr-3 first:!pl-0 last:!pr-0",e),divClassName:"items-start leading-relaxed",children:t})}function Um({turnIndex:e}){const t=st(r=>r.thread?.turns[e]?.use_location),[n]=at();return!n.useLocation&&t?s.jsx("div",{className:"mt-3",children:s.jsx(As,{color:"secondary",icon:pt,onClick:()=>{rt.setSettingsModalOpen(!0)},children:s.jsx($,{id:"f47VEc",defaultMessage:"Share precise location"})})}):null}function Om({temperatureUnit:e,onTemperatureUnitChange:t}){const n=r=>e===r?"font-bold":"font-light";return s.jsx(Tt,{size:"small",triggerButton:s.jsx("button",{className:"flex items-center justify-center p-1.5 text-token-text-tertiary hover:text-token-text-primary",children:s.jsx(gt,{className:"icon-sm-heavy"})}),children:s.jsxs(Mt.Item,{onClick:()=>{t(e==="C"?"F":"C")},className:"text-token-text-primary",children:[s.jsx($,{id:"bQIoe/",defaultMessage:"Temperature"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:n("F"),children:s.jsx($,{id:"bvDeBB",defaultMessage:"°F"})}),s.jsx("div",{className:"mx-1 h-4 border-l border-gray-300"}),s.jsx("div",{className:n("C"),children:s.jsx($,{id:"iNiz6O",defaultMessage:"°C"})})]})]})})}function Be({weatherDescriptionData:e,isNight:t=!1,size:n="normal"}){const r=tt(),a=n==="small"?30:50;return s.jsx("img",{draggable:!1,alt:e.description,src:Im({weatherCode:e.id,isDarkMode:r,isNight:t}).src,width:a,height:a})}function Ym(e,t){const n=vs(t.timestamp,t.utc_offset_sec);return os(n)?s.jsx($,{id:"uQNFk/",defaultMessage:"Today"}):e.formatDate(n,{weekday:"long"})}function Bm(e,t){const n=vs(t.timestamp,t.utc_offset_sec);return e.formatDate(n,{hour:"numeric"})}function O(e,t,n){return t==null?"-":Ye(n?n??"F":ys(e),t)}function ys(e){const t=["en-US","en-BZ","en-BS","en-KY","en-PW"],n=e.locale||"en-US";return t.includes(n)?"F":"C"}function Wm(e){const t=e.name.split(",").map(n=>n.trim());return e.country&&!t.includes(e.country)&&t.push(e.country),t.join(", ")}const Zm=()=>{const e=M(),[t,n]=ot("USER_TEMPERATURE_UNIT",ys(e),r=>["F","C"].includes(r));return[t,n]};function Gm({index:e,FormattedText:t,node:n}){const r=parseInt(e,10),a=m.useContext(z),o=m.useRef(new Set),i=m.useCallback((b,v,k,j,S)=>{if(a?.analyticsMetadata){const _={...it(a.analyticsMetadata),type:k,index:r?.toString(),...j??{}},I=`${b}-${JSON.stringify(_)}`;(!o.current.has(I)||b!==x.searchContentReferenceShown)&&(o.current.add(I),ne.logEventWithStatsig(b,v,_),S?.(a.analyticsMetadata))}},[a?.analyticsMetadata,r]);if(a==null)return null;const{contentReferences:c,onShowSearchResults:u,numImageResults:h,analyticsMetadata:d}=a,l=c?.[r],p=d?.clientThreadId==null;if(!l||d.turnIndex===void 0||l.type===void 0)return null;let f=null;switch(l.type){case"title_citation":f=s.jsx(ur,{metadata:l,trackContentReferenceEvent:i});break;case"location_search":f=s.jsx(Fn,{metadata:l,trackContentReferenceEvent:i});break;case"time":f=s.jsx(or,{metadata:l,trackContentReferenceEvent:i});break;case"image_v2":f=s.jsx(In,{metadata:l,numImageResults:h??0,analyticsMetadata:d,trackContentReferenceEvent:i});break;case"nav_list":f=s.jsx(zn,{metadata:l,trackContentReferenceEvent:i});break;case"file":f=s.jsx(qt,{fileRef:l,index:r,trackContentReferenceEvent:i});break;case"grouped_webpages":f=s.jsx(ir,{webpageRef:l,index:r,node:n,trackContentReferenceEvent:i});break;case"tldr":f=s.jsx(fr,{tldr:l,trackContentReferenceEvent:i});break;case"stock":f=s.jsx(Dn,{contentReference:l,trackContentReferenceEvent:i});break;case"calculator":f=s.jsx(Rt,{data:l,trackContentReferenceEvent:i});break;case"code_execution":f=s.jsx(Wt,{FormattedText:t,displayInfo:l,trackContentReferenceEvent:i});break;case"forecast":f=l?.forecast&&s.jsx(Rm,{weatherResults:l.forecast,dateRange:l.date_range,turnIndex:d.turnIndex,trackContentReferenceEvent:i});break;case"businesses_map":f=s.jsx(Et,{businesses:l.businesses});break;case"video":f=s.jsx(vr,{video:l,trackContentReferenceEvent:i});break;case"sources_footnote":f=s.jsx(Un,{sourcesFootnote:l,onShowSearchResults:u,trackContentReferenceEvent:i,isSearchGptApp:p});break;case"sports_standings":f=s.jsx(rr,{standingsRef:l,trackContentReferenceEvent:i});break;case"sports_schedule":f=s.jsx(Qn,{scheduleRef:l,trackContentReferenceEvent:i});break;case"attribution":f=s.jsx(It,{attribution:l});break;case"attribution_footer":f=s.jsx(zt,{attributionFooter:l});break;case"debug":f=s.jsx(s.Fragment,{children:Object.entries(l).map(([b,v])=>s.jsx("sub",{className:"ml-1 w-fit rounded-md border-2 border-solid border-orange-500 px-1 leading-none",children:v},b))});break}return s.jsx(he,{name:"content-reference-renderer",fallback:()=>(i(x.searchContentReferenceFailed,"search_content_reference_failed",l.type),l?.alt?s.jsx(ue,{components:{img:({src:b,alt:v})=>s.jsx("img",{src:b,alt:v,className:"max-h-28"})},children:l.alt}):s.jsx("span",{className:`errored-object-${l.type}`})),children:f})}function E(e){const{addListStyles:t,children:n,node:r,tag:a,...o}=e,i=me(),[c,u]=m.useState(t?{"--marker-color":"transparent"}:{});return m.useEffect(()=>{r&&u(i.createBlockstyles(i.batch)),t&&r?.tagName==="li"&&u(i.createMarkerStyles(r))},[t,r,i]),m.cloneElement(a,{...o,children:r?i.processChildren({children:n,element:r}):n,style:{...o.style,...c}})}const Vm={p:e=>s.jsx(E,{tag:s.jsx("p",{}),...e}),h1:e=>s.jsx(E,{tag:s.jsx("h1",{}),...e}),h2:e=>s.jsx(E,{tag:s.jsx("h2",{}),...e}),h3:e=>s.jsx(E,{tag:s.jsx("h3",{}),...e}),h4:e=>s.jsx(E,{tag:s.jsx("h4",{}),...e}),h5:e=>s.jsx(E,{tag:s.jsx("h5",{}),...e}),h6:e=>s.jsx(E,{tag:s.jsx("h6",{}),...e}),li:e=>s.jsx(E,{tag:s.jsx("li",{}),addListStyles:!0,...e})},We={},Ze={};function ws(e,t,n=!0){const r=Hs(t,500);return Rs(e,r,n)}function qm({node:e,onClick:t,clientThreadId:n,messageId:r,href:a,...o}){let i=t;const c=e?.properties?.href,u=Je(),h=me(),[d,l]=m.useState(h.getStaticStyles(e)),[p,f]=m.useState(o.children),b=m.useRef(void 0);b.current=o.children,m.useEffect(()=>{e&&(f(h.processChildren({children:b.current,element:e})),l(h.createBlockstyles(h.batch)))},[e,h]);const v=m.useContext(z),k=Qe(n),j=ws(k,a,v?.useSafeUrls);return r!=null&&typeof c=="string"&&c.includes("/bing/redirect")&&(We[r]||(ne.logEvent(x.browsingShowBingLink,{id:r,content:c}),We[r]=!0),i=S=>{Ze[r]||(ne.logEvent(x.browsingClickBingLink,{id:r,content:c}),Ze[r]=!0),t?.(S)}),s.jsx("a",{onClick:i,...o,href:j,rel:u?"noopener noreferrer":"noopener",style:{...o.style,...d},children:p})}function Xm(e){const{src:t,clientThreadId:n,...r}=e,a=Qe(n),o=m.useContext(z),i=ws(a,t,o?.useSafeUrls);return i==null?s.jsx("div",{}):s.jsx("img",{...r,src:i})}function Km(e){return s.jsx(Gm,{...e,FormattedText:Jm})}function Jm({size:e="medium",children:t,className:n,clientThreadId:r,messageId:a,isStreamingOrProcessing:o,interpolateCitations:i=!1,componentOverrides:c}){const{resolvedTheme:u}=W(),h=Je(),d=is(),l=m.useMemo(()=>({pre:({children:f})=>s.jsx("pre",{className:"!overflow-visible",children:f}),code:f=>s.jsx(Us,{...f,clientThreadId:r}),[nt]:Km,[Os]:Ys,a:f=>{const{node:b,children:v,...k}=f,j=b?.properties?.href;return typeof j=="string"&&j.startsWith(xe)?h?s.jsx(Bs,{...k}):r!=null&&a!=null?s.jsx(Ws,{...k,clientThreadId:r,messageId:a,href:j,children:v}):null:j&&typeof j=="string"&&At(j)?v:s.jsx(qm,{...f,clientThreadId:r,messageId:a,interpolateCitations:i})},td:({children:f})=>s.jsx("td",{children:m.Children.map(f,(b,v)=>b==="<br>"?s.jsx("br",{},v):b)}),img:({node:f,...b})=>{const v=f?.properties?.src;return typeof v=="string"&&(v.startsWith(xe)||v.startsWith("attachment:"))?null:s.jsx(Xm,{...b,clientThreadId:r})},...c}),[c,r,a,i,h]),p=m.useMemo(()=>({...l,...d&&o?Vm:{}}),[l,o,d]);return s.jsx(he,{name:"formatted_text_error",fallback:()=>s.jsx(s.Fragment,{children:t}),children:s.jsx(sp,{rehypePlugins:es,remarkPlugins:ss,className:y(n,"markdown prose w-full break-words dark:prose-invert",u==="dark"?"dark":"light",e==="small"&&"prose-xs"),urlTransform:ts,components:p,children:t})})}function Qm(e,t){return e===Es.SystemHint?s.jsx("span",{className:"hint-pill",children:t}):null}function jp({text:e,customSymbolOffsets:t}){return s.jsx(he,{name:"formatted_text_error",fallback:()=>s.jsx(s.Fragment,{children:e}),children:s.jsx(ep,{text:e,customSymbolOffsets:t})})}const ep=({text:e,customSymbolOffsets:t=[]})=>{const n=/(```[\s\S]*?```|`[^`\n]+`|```[\s\S]*|`[^`\n]*\n|`[^`\n]*$)/g;let r=0;const a=e.split(n).flatMap((o,i)=>{const c=r;if(r+=o.length,o.startsWith("```")&&o.endsWith("```"))return s.jsx("pre",{className:"overflow-x-auto",children:s.jsx("code",{children:o.slice(3,-3).trim()})},i);if(o.startsWith("```"))return s.jsx("pre",{className:"overflow-x-auto",children:s.jsx("code",{children:o.slice(3).trim()})},i);if(o.startsWith("`")&&o.endsWith("`"))return s.jsx("code",{children:o.slice(1,-1)},i);if(o.startsWith("`"))return s.jsx("code",{children:o.slice(1)},i);{const u=t.find(h=>c<=h.startIndex&&h.endIndex<=r);if(u){const h=u.startIndex-c,d=u.endIndex-c,l=o.slice(0,h),p=o.slice(d),f=o.slice(h,d);return[l,Qm(u.symbol,f),p].filter(b=>!!b)}return o}});return s.jsx("div",{className:"whitespace-pre-wrap",children:a})},sp=m.memo(ue);export{Jm as FormattedText,jp as UserFormattedText};
//# sourceMappingURL=dbq2olyc4n11lvp4.js.map
