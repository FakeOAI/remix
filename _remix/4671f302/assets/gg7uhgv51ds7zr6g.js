import{dK as b,bo as m,r as s,ag as E,j as O,bT as u,bU as h}from"./cya1ek7zbsww3e8p.js";import"./m1h3d66e9x9d8av7.js";function _(){const{pluginId:e}=b(),t=m(),l=s.useRef(!1),[p,R]=s.useState(""),{code:r,error:n,error_description:i,state:c}=Object.fromEntries(new URLSearchParams(p.substring(1)).entries());s.useEffect(()=>{R(window.location.hash)},[]),s.useEffect(()=>{if(l.current)return;if(e&&r&&c)l.current=!0;else{t("/");return}async function d(){const S=`https://chatgpt.com/ccc/${e}/oauth/callback`;if(!(!e||!r||!c))try{const a=await O.connectorOauthCallback(e,r,S,c);if(a.success){const o=new URL(u(h.OAUTH_SUCCESS,a.redirect_path),location.origin);o.searchParams.set("oauth_success","true"),t(o.pathname+o.search+o.hash)}else t(u(h.CUSTOM_ERROR,a.redirect_path,a.error??a.message))}catch{t(u(h.CUSTOM_ERROR))}}d()},[e,r,c,t]);const f=E();return s.useEffect(()=>{n&&f.danger(`${n}${i?`: ${i}`:""}`)},[n,i,f]),null}export{_ as default};
//# sourceMappingURL=gg7uhgv51ds7zr6g.js.map
