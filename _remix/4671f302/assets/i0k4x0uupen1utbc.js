import{a3 as M,aj as _,r as n,t as e,a8 as S,aV as T,P as A,d as V,ax as F,cQ as E,bH as C}from"./cya1ek7zbsww3e8p.js";import{K as L,aS as B,aT as O,aU as I,J as q,aV as z}from"./m1h3d66e9x9d8av7.js";import{cM as y,a4 as w,c as Q,dG as U}from"./o02kugc5eyp7bzuk.js";import{z as D}from"./ji313uzrpltya54g.js";import{V as G,u as H,a as K,b as W,c as Y}from"./nkdjm34ba9ti9kp3.js";import{d as R}from"./cnkyxf781f12fdb9.js";import"./lxcl4lkoqrle7fky.js";import"./m0ufyovf28ile0yl.js";import"./ck6f40emr7l3i0b3.js";import"./dg59tnhw4y7axib5.js";import"./beqhh5k54ufxbjqa.js";import"./gq7tdevv4xdhasrb.js";import"./n0s5m6clrqpu2fmq.js";import"./cnlquey73j7uw8fu.js";function X({conversationId:t}){const s=M(),a=y(w.hasSeenAdvancedVoiceNuxFullPage),i=_(),l=i?.isPlus()??!1,r=i?.isEnterprisey()??!1,d=!l&&!r,x="https://help.openai.com/en/articles/8400625-voice-mode-faq#h_c5d6fe534b",[h,c]=n.useState(!1),[u,m]=n.useState(!1);n.useEffect(()=>{requestAnimationFrame(()=>m(!0))},[]);const p=()=>{c(!0)},g=()=>{a.markAsViewed()},v=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(L,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"TFfx7w",defaultMessage:"Natural conversations"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"qR+v5Q",defaultMessage:"Senses and responds to interruptions, humor, and more."})})]})]}),N=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(B,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"br49Gd",defaultMessage:"Free monthly preview"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"LhOfga",defaultMessage:"Use advanced voice for a short period each month."})})]})]}),b=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(O,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"84QiAT",defaultMessage:"Multiple voices"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"yYgwEW",defaultMessage:"Offers an expanded set of voices to choose from."})})]})]}),o=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"M/x7uJ",defaultMessage:"Personalized to you"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"QZXq7u",defaultMessage:"Can use memory and custom instructions to shape responses."})})]})]}),k=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(q,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"e6n5kr",defaultMessage:"You’re in control"})}),e.jsx("p",{className:"text-token-text-secondary",children:r?e.jsx(S,{id:"4szv66",defaultMessage:"Your audio recordings are saved but not used for training. Learn how to <link>manage recordings</link>.",values:{link:f=>e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"underline",children:f})}}):e.jsx(S,{id:"M/k4S5",defaultMessage:"Audio recordings are saved, and you can delete them at any time. Learn how to <link>manage recordings</link>.",values:{link:f=>e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",className:"underline",children:f})}})})]})]}),j=d?[N,v,o,k]:[v,b,o,k];return h?e.jsx(G,{conversationId:t,onClose:g,cameFromNux:!0}):e.jsx("div",{className:`fixed left-0 top-0 z-50 flex h-full w-full flex-col items-center justify-center bg-token-main-surface-primary transition-opacity duration-300 ${u?"opacity-100":"opacity-0"}`,children:e.jsxs("div",{className:"mx-auto w-full max-w-lg px-4 text-center",children:[e.jsx("h1",{className:"mb-9 text-2xl font-semibold text-token-text-primary",children:d?s.formatMessage({id:"XV3+9K",defaultMessage:"Sneak a peek at advanced voice mode"}):s.formatMessage({id:"9YnxDX",defaultMessage:"Say hello to advanced voice mode"})}),e.jsx("div",{className:"mb-9 space-y-5",children:j.map((f,P)=>e.jsx("div",{children:f},P))}),e.jsxs("p",{className:"mb-9 text-sm text-token-text-primary",children:[s.formatMessage({id:"vtcf3s",defaultMessage:"Voice mode can make mistakes — check important info."}),e.jsx("br",{}),s.formatMessage({id:"4nw2S2",defaultMessage:"Usage limits may change."})]}),e.jsx(T,{className:"rounded-full bg-token-text-primary px-20 py-3 font-semibold",onClick:p,children:e.jsx(S,{id:"ppi93b",defaultMessage:"Continue"})})]})})}const J={default_voice_mode:"advanced",modes:[{mode:"advanced",default_model_slug:D,disabled_mode_metadata:null,description:"Advanced Voice Mode",display_name:"Advanced Voice",info_message:{actions:[],buttons:[],hint:"Advanced Voice",message_markdown:"Advanced Voice",message:"Advanced Voice",title:"Advanced Voice",display_at_launch:!1},disclosure_message:null,resets_after:"None"}]};function Z(){const t=C("2775516364").value,s=y(w.hasSeenAdvancedVoiceNuxFullPage);return!s.isLoading&&s.eligible&&t}function $(){const t=C("562926978").value,s=y(w.hasSeenAdvancedVoiceWebNuxTooltip);return{shouldShowTooltipNux:!s.isLoading&&s.eligible&&t,tooltipAnnouncement:s}}function he({clientThreadId:t,gizmoId:s}){const a=R(t),l=M().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),[r,d]=n.useState(!1),[x,h]=n.useState(!1),c=Z(),{shouldShowTooltipNux:u,tooltipAnnouncement:m}=$(),{refetch:p}=H({conversationId:a??null,requestedVoiceMode:"advanced",gizmoId:s,eventSource:"composer_speech_button",fetchImmediately:!1}),g=K(),v=a??t,N=W(o=>o.isVoiceModeActive);n.useEffect(()=>{c||h(!1)},[c]);const b=n.useCallback(async()=>{if(A.logEvent(V.composerSpeechButtonClicked),u&&m.markAsViewed(),c){h(!0);return}let o;d(!0);try{o=await p()}finally{d(!1)}const k=o.data??g??J;Y.setState(j=>{j.voiceStatus=k,j.isVoiceModeActive=!0})},[g,p,c,u,m]);return e.jsxs(e.Fragment,{children:[x&&e.jsx(X,{conversationId:v}),e.jsx(ee,{showNuxTooltip:u,tooltipAnnouncement:m,children:e.jsx("button",{"data-testid":"composer-speech-button",onClick:b,"aria-label":l,disabled:N||r,className:"flex h-8 w-8 items-center justify-center rounded-full bg-black text-white transition-colors hover:opacity-70 focus-visible:outline-none focus-visible:outline-black disabled:text-[#f4f4f4] disabled:hover:opacity-100 dark:bg-white dark:text-black dark:focus-visible:outline-white disabled:dark:bg-token-text-quaternary dark:disabled:text-token-main-surface-secondary",children:r?e.jsx(F,{}):e.jsx(z,{})})})]})}function ee({children:t,showNuxTooltip:s,tooltipAnnouncement:a}){const i=M();return s?e.jsx(U,{side:"top",show:!0,badge:"new",dismissOnOutsideClick:!0,title:i.formatMessage({id:"DQ6CAP",defaultMessage:"Try advanced voice mode"}),contentAlign:"center",onDismiss:a.markAsViewed,sideOffset:2,children:e.jsx("div",{children:t})}):e.jsx(Q,{sideOffset:14,label:i.formatMessage({id:"i4P/ix",defaultMessage:"Use voice mode"}),side:"top",onOpenChange:l=>{l&&(A.logEvent(V.composerSpeechButtonHovered),E.composerSpeechButton.hover())},children:t})}export{he as ComposerSpeechButton};
//# sourceMappingURL=i0k4x0uupen1utbc.js.map
