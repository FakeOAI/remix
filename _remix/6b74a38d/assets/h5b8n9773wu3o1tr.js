import{U as E,r as s,a4 as S,E as d,aK as o,aL as i,j as O}from"./nkav6u5sgjh9k32o.js";import"./nk3ns16telurqv2s.js";function m(){const t=E(),l=s.useRef(!1),[f,p]=s.useState(""),{code:a,error:u,error_description:n,state:c}=Object.fromEntries(new URLSearchParams(f.substring(1)).entries()),e=t.query.pluginId;return s.useEffect(()=>{p(window.location.hash)},[]),s.useEffect(()=>{if(l.current)return;e&&a&&c&&(l.current=!0);async function R(){const C=`https://chatgpt.com/ccc/${e}/oauth/callback`;if(!(!e||!a||!c))try{const r=await d.connectorOauthCallback(e,a,C,c);if(r.success){const h=new URL(o(i.OAUTH_SUCCESS,r.redirect_path));h.searchParams.set("oauth_success","true"),t.push(h.toString())}else t.push(o(i.CUSTOM_ERROR,r.redirect_path,r.error??r.message))}catch{t.push(o(i.CUSTOM_ERROR))}}R()},[e,a,c,t]),s.useEffect(()=>{u&&S.danger(`${u}${n?`: ${n}`:""}`)},[u,n]),null}function U(){return O.jsx(m,{})}export{U as default};
//# sourceMappingURL=h5b8n9773wu3o1tr.js.map
