import{ba as k,bb as f,af as C,g as M,s as A,a4 as y,bc as b,bd as v}from"./ibpo4l2zkh6u1ih1.js";import{t as S}from"./l10u0lbuaglz65cp.js";import{bc as B,r as K,Q as w,b as L,P as D,F as T,D as P,V as x}from"./iryvtox9frru8zal.js";import{T as d}from"./i7imfmvlw2tpm5ab.js";const E=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function R(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const e={Mod:"mod",Comma:",",...k.Key},F={[e.Mod]:R()?"⌘":"Ctrl",[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"},$=t=>t.map(o=>F[o]??o),n=x({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),V=new f,G=({resetThreadAction:t,clientThreadId:o,toaster:s})=>[{key:"newChat",action:t||w,actionMessageDescriptor:n.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:[[e.Mod,"k"]]},{key:"focusPromptTextarea",action:S,actionMessageDescriptor:n.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:a=>{if(o!=null){const i=d.getThreadCurrentLeafId(o),r=d.getThreadConversationTurns(o,i);for(let g=r.length-1;g>=0;g--){const{messages:m}=r[g],l=[...m.reduce((u,c)=>c.err==null&&c.message.author.role===L.Assistant&&c.message.recipient==="all"?u+(u?`

`:"")+M(c.message):u,"").matchAll(E)],p=l.length?l[l.length-1][1]:null;if(p!=null){A(p,s,a).then(()=>{s.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:n.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:a=>{o!=null&&d.copyLastMessageToClipboard(o,s,a,"keyboard").then(()=>{s.success("Last response copied to clipboard")})},actionMessageDescriptor:n.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>y.toggleModal(b.UserContext),actionMessageDescriptor:n.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>y.toggleNavSidebar(),actionMessageDescriptor:n.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(o){const a=d.getServerThreadId(o);a&&V.publish({kind:"deleteChat",serverThreadId:a})}},actionMessageDescriptor:n.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"toggleKeyboardActions",action:()=>y.toggleModal(b.KeyboardActions),actionMessageDescriptor:n.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]}],h=t=>v(t,o=>{D.logEvent(T.keyboardShortcut,{keyboardActionKey:o.key}),P.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:o.key})},{enabled:!0}),U=({resetThreadAction:t,clientThreadId:o}={})=>{const s=B();return K.useMemo(()=>G({resetThreadAction:t,clientThreadId:o,toaster:s}).filter(({enabled:i=!0})=>i),[s,o,t])},j=({resetThreadAction:t,clientThreadId:o})=>{const s=U({resetThreadAction:t,clientThreadId:o}),i=C(r=>r.isVoiceActive)?[]:s;h(i)},q=({setSelectedVoiceIndex:t,previousVoiceIndex:o,nextVoiceIndex:s,setDirection:a})=>{const i=[{key:"selectPreviousVoice",action:()=>{a(-1),t(o)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{a(1),t(s)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[e.ArrowRight]}];h(i)};export{V as G,j as a,U as b,$ as g,R as i,q as u};
//# sourceMappingURL=pb7o16o1rkgxr48m.js.map
