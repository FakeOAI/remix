import{as as C,at as M,au as A,b as v,H as S,av as B}from"./gne0fkkyhu79w0cj.js";import{t as K}from"./ia6dvimohnab119m.js";import{a9 as w,r as D,br as L,R as P,P as T,b as E,D as x,a6 as R}from"./mvabgae368c8ppg9.js";import{T as g}from"./hrszfqnlwp1fnoth.js";import{u as F,U as p,G as k}from"./cgk4v2mv167tmqt6.js";const G=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function U(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const e={Mod:"mod",Comma:",",...C.Key},V={[e.Mod]:U()?"⌘":"Ctrl",[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"},J=t=>t.map(o=>V[o]??o),i=R({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),N=new M,_=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n,toaster:a,isFannyPackEnabled:r})=>[{key:"newChat",action:t||L,actionMessageDescriptor:i.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:r?[]:[[e.Mod,"k"]]},{key:"focusPromptTextarea",action:n??K,actionMessageDescriptor:i.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:s=>{if(o!=null){const c=g.getThreadCurrentLeafId(o),b=g.getThreadConversationTurns(o,c);for(let l=b.length-1;l>=0;l--){const{messages:f}=b[l],u=[...f.reduce((y,d)=>d.err==null&&d.message.author.role===P.Assistant&&d.message.recipient==="all"?y+(y?`

`:"")+v(d.message):y,"").matchAll(G)],h=u.length?u[u.length-1][1]:null;if(h!=null){S(h,a,s).then(()=>{a.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:i.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:s=>{o!=null&&g.copyLastMessageToClipboard(o,a,s,"keyboard").then(()=>{a.success("Last response copied to clipboard")})},actionMessageDescriptor:i.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>p.toggleModal(k.UserContext),actionMessageDescriptor:i.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>p.toggleNavSidebar(),actionMessageDescriptor:i.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(o){const s=g.getServerThreadId(o);s&&N.publish({kind:"deleteChat",serverThreadId:s})}},actionMessageDescriptor:i.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"toggleKeyboardActions",action:()=>p.toggleModal(k.KeyboardActions),actionMessageDescriptor:i.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]}],m=t=>B(t,o=>{T.logEvent(E.keyboardShortcut,{keyboardActionKey:o.key}),x.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:o.key})},{enabled:!0}),H=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n}={})=>{const a=w(),{isFannyPackEnabled:r}=A();return D.useMemo(()=>_({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n,toaster:a,isFannyPackEnabled:r}).filter(({enabled:c=!0})=>c),[a,o,t,r,n])},Q=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n})=>{const a=H({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:n}),s=F(c=>c.isVoiceActive)?[]:a;m(s)},W=({setSelectedVoiceIndex:t,prevVoiceIndex:o,nextVoiceIndex:n})=>{const a=[{key:"selectPrevVoice",action:()=>{t(o)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{t(n)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[e.ArrowRight]}];m(a)};export{N as G,W as a,H as b,J as g,U as i,Q as u};
//# sourceMappingURL=jcldnvik6qpgpua8.js.map
