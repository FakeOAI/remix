import{t as D,r as b,j as e,b8 as _,b9 as G,a$ as K,b2 as W,ak as p,aw as S,P as g,aF as M,aB as o,by as q,I as Q,W as V,dP as Y,aW as m,u as Z,aQ as $,aK as N,an as w,aU as J}from"./mj0lqn4ze2fljnbl.js";import{cG as v,a8 as c,k as X,i as ee,h as B,j as te,ek as ae,f1 as k,f2 as ne,a7 as se,f3 as ie,F as oe,f4 as re,c3 as le,cD as ce}from"./eufwkg2s3wcyxsss.js";import{aA as de,K as ue,bc as fe,b3 as ge,ai as xe}from"./n88p71sdmouzlavs.js";import{U as he}from"./f2rh7g4htghtm7d6.js";import{d as me,N as U}from"./h5drv49qlmfjlq5f.js";import{m as A}from"./ezr4n9w03trmg6g9.js";function Ie({onClick:a,className:n,...t}){return e.jsx(me,{onClick:a,className:p(n,"flex-grow overflow-hidden"),...t})}function Fe({onNewChatButtonClick:a}){const{isUnauthenticated:n,isLoading:t}=S();return t||!n?null:e.jsx(U,{className:"mr-3",onClick:()=>{g.logNewChatButtonClicked({location:"Mobile header"}),a()}})}function Re({onNewChatButtonClick:a}){const{isUnauthenticated:n,isLoading:t}=S(),s=ee();return t?null:n?s?e.jsx(pe,{}):e.jsx(be,{}):e.jsx(U,{onClick:()=>{g.logNewChatButtonClicked({location:"Mobile header"}),a()}})}function be(){const a=B(),n=te(L.signUpButtonText);return e.jsx(M,{as:"button",size:"small",color:"primary",onClick:()=>{a({authType:"signup",callback:t=>{g.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:t})}})},children:e.jsx(o,{...n})})}function pe(){const a=B();return e.jsx(M,{as:"button",size:"small",color:"primary",onClick:()=>{a({authType:"login",callback:n=>{g.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:n})}})},"data-testid":"mobile-login-button",children:e.jsx(o,{...q.logInButtonText})})}function Se({onClick:a}){return e.jsxs("button",{type:"button",className:"inline-flex rounded-md hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:a,"data-testid":"open-sidebar-button",children:[e.jsx("span",{className:"sr-only",children:e.jsx(o,{...L.openSidebar})}),e.jsx(de,{className:"icon-lg mx-2 text-token-text-secondary"})]})}const ve=({onClickOpenSidebar:a,children:n,showNavSidebar:t,leftContent:s,rightContent:d,bottomContent:u})=>{const f=v(l=>l.activeSidebar),r=D(),x=r.pathname+r.search+r.hash;return b.useEffect(()=>{f==="popover-nav"&&c.setActiveSidebar(!1)},[x]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"draggable sticky top-0 z-10 flex min-h-[60px] items-center justify-center border-transparent bg-token-main-surface-primary pl-0 md:hidden",children:[(t||s)&&e.jsxs("div",{className:"no-draggable absolute bottom-0 left-0 top-0 ml-3 inline-flex items-center justify-center",children:[t&&e.jsx(Se,{onClick:a}),s]}),e.jsx("div",{className:"no-draggable",children:n}),d&&e.jsx("div",{className:"no-draggable absolute bottom-0 right-0 top-0 mr-3 inline-flex items-center justify-center",children:d})]}),u&&e.jsx("div",{className:"no-draggable flex w-full items-center justify-center bg-token-main-surface-primary md:hidden",children:u})]})};function je({isPopoverOnDesktop:a=!1,isExpanded:n=!1,children:t}){const s=X();return e.jsxs(e.Fragment,{children:[!s||a?e.jsx(Ce,{children:t}):null,e.jsx(ye,{isExpanded:!a&&n,children:t})]})}function ye({isExpanded:a,children:n}){const t=b.useRef(null);return e.jsx(A.div,{className:"z-[21] flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary max-md:!w-0",ref:t,initial:!1,animate:{width:a?"260px":0,transition:{type:"spring",bounce:.12,duration:.64}},onAnimationStart:()=>{t.current&&(t.current.style.visibility="visible")},onAnimationComplete:()=>{t.current&&(a||(t.current.style.visibility="hidden"))},children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col",children:n})})})}function Ce({children:a}){const n=v(t=>t.activeSidebar);return e.jsx(_,{open:n==="popover-nav",onOpenChange:t=>{t||c.setActiveSidebar(!1)},children:e.jsxs(G,{children:[e.jsx(K,{className:"fixed inset-0 z-10 bg-gray-50/50 radix-state-open:animate-show dark:bg-black/50"}),e.jsx(W,{className:"fixed left-0 top-0 z-50 h-full max-w-xs border-r border-gray-200 bg-token-sidebar-surface-primary shadow-[0_0_64px_0_rgba(0,0,0,0.07)] focus:outline-none radix-state-closed:animate-sidebarHide radix-state-open:animate-sidebarShow dark:border-gray-800",children:a})]})})}const L=Q({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}}),Ne=()=>{const{openSettings:a}=ae(),n=Z("3376455464")?.value,t=V();return e.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[e.jsx(k,{icon:ue,onClick:()=>{ne(t),c.closeActiveSidebar()},children:e.jsx(o,{id:"0FupYP",defaultMessage:"New chat"})}),e.jsx("div",{className:"flex grow items-center justify-center",children:e.jsx(he,{})}),e.jsxs(Y,{contentClassName:"w-[298px]",triggerButton:e.jsx(k,{icon:fe,children:e.jsx(o,{id:"y4Lkp7",defaultMessage:"Settings and more"})}),children:[e.jsx(m.Item,{onClick:()=>a(),icon:ge,children:e.jsx(o,{id:"HrRLkZ",defaultMessage:"Settings"})}),n&&e.jsx(m.Item,{icon:xe,onClick:()=>{c.openModal(se.ReportConversation)},children:e.jsx(o,{id:"thread.report.0",defaultMessage:"Report illegal content"})}),e.jsx(m.Separator,{}),e.jsx(ie,{})]})]})};function we({isExpanded:a,children:n}){const t=b.useRef(null);return e.jsx(oe,{children:e.jsx(A.div,{className:"z-[1] flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary max-md:!w-0",ref:t,initial:!1,animate:{width:a?"400px":0,transition:{type:"spring",bounce:.12,duration:.3}},onAnimationStart:()=>{t.current&&(t.current.style.visibility="visible")},onAnimationComplete:()=>{t.current&&(a||(t.current.style.visibility="hidden"))},children:e.jsx("div",{className:p("absolute h-full w-[400px]",!a&&"pointer-events-none"),children:e.jsx("div",{className:"flex h-full flex-col",children:n})})})})}function T({children:a,hideNavigation:n=!1,mobileHeaderContent:t,mobileHeaderLeftContent:s,mobileHeaderRightContent:d,mobileHeaderBottomContent:u,sidebar:f,threadFlyout:r,forceOpenDesktopSidebar:x=!1}){const{isUnauthenticated:l}=S(),[I,F]=v(i=>[i.activeStageSidebar,i.activeSidebar]),R=re(),{isOpen:H}=le(),P=ce(),j=$(),E=(j?.includes(N.SearchTool)&&!j?.includes(N.SearchToolHoldout))??!1,y=[];let C=null;w.Children.forEach(a,i=>{w.isValidElement(i)&&(i.type===T.Sidebars?C=i:y.push(i))});const h=!l&&!n&&f!=null,z=!n&&(h||l),O=H&&R&&E;return e.jsxs("div",{className:p("relative flex h-full w-full overflow-hidden transition-colors",F!=="popover-nav"&&"z-0"),children:[h&&e.jsx(je,{isExpanded:x||!P,isPopoverOnDesktop:I,children:l?e.jsx(Ne,{}):f}),e.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[z&&e.jsx(ve,{onClickOpenSidebar:()=>c.togglePopoverNavSidebar(),showNavSidebar:h,leftContent:s,rightContent:d,bottomContent:u,children:t}),e.jsx("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:y})]}),e.jsx(J,{children:e.jsx(we,{isExpanded:O,children:r})}),C]})}function ke({children:a}){return e.jsx(e.Fragment,{children:a})}T.Sidebars=ke;export{T as S,Ie as a,Fe as b,Re as c};
//# sourceMappingURL=jv3t3x364zuew19y.js.map
