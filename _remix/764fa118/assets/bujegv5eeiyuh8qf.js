import{r as a,W as Ke,eW as V,ey as nA,g as ee,V as O,cj as te,m as o,hH as He,ae as $e,am as z,dg as At,dt as et,cp as oe,bo as ne,aJ as oA,cl as sA,ba as tt,D as ot,f1 as se,f2 as nt,bQ as st,u as at,bO as it,b9 as rt,bh as ct,hI as lt}from"./bzsxfft2e75s6cf0.js";import{n as ae,az as ut,a6 as dt,bK as mt,bL as ft,bM as gt,bN as pt,au as ht,ab as xt,l as bt,bO as vt,at as ie,bP as kt,bq as Ct,H as Et,bQ as St,bR as It,h as Mt}from"./b0e06n5epk14vt92.js";import{iV as OA,er as wt,iU as re,bw as jA,dM as ZA,fg as gA,aN as yt,fh as VA,fb as Bt,j$ as jt,k0 as Vt,A as N,jR as Qt,f9 as Rt,cl as Tt,fa as FA,jS as ce,fc as le,k1 as YA,k2 as Dt,k3 as Nt,N as Ot}from"./dwphlg8irwtl8o08.js";import{$ as Zt,C as Ft,_ as Q,R as fA,f as G,M as Yt,m as WA,y as Wt,W as aA,T as J,O as ue,N as Gt,S as lA,n as de,o as MA,p as wA,q as Lt,Y as Jt,F as Pt,x as Xt,b as pA,k as vA,r as kA,s as me,l as fe,u as I,t as ge,v as Ut,d as QA,e as RA,w as pe,g as _t,h as qt,V as R,X as GA,z as yA,A as zt,E as Kt}from"./fkrofygwm9t03u6s.js";import{u as TA,a as Ht,V as $t}from"./id7kmwg82bxu4o6l.js";import{M as he}from"./d3ezpdsj2erd0p2d.js";import{m as y}from"./hkdrdrg6srigcrd5.js";import{W as Ao}from"./lqyyrucidp4ah11u.js";import{u as eo,s as to,B as xe,a as uA,b as dA,c as oo,d as no,e as so,T as ao,n as io,V as ro,f as co}from"./o1no5zmdx9gl3wjj.js";import"./hrr7eio53n4i1hyy.js";import"./kfkt56bu7sh625vg.js";import"./gwxay7gfawi7pcah.js";import"./b99cice2lh422wqt.js";import"./jxtvltxb4nff1jqb.js";import"./giim8fw5iqsll3of.js";import"./n9r2jc86s5yfs6gh.js";import"./klhg459p9p0x4831.js";import"./lf8ann18sefxbx3c.js";import"./c4bxzbp1808foto4.js";function be(A){var e,t,s="";if(typeof A=="string"||typeof A=="number")s+=A;else if(typeof A=="object")if(Array.isArray(A)){var n=A.length;for(e=0;e<n;e++)A[e]&&(t=be(A[e]))&&(s&&(s+=" "),s+=t)}else for(t in A)A[t]&&(s&&(s+=" "),s+=t);return s}function lo(){for(var A,e,t=0,s="",n=arguments.length;t<n;t++)(A=arguments[t])&&(e=be(A))&&(s&&(s+=" "),s+=e);return s}function uo(...A){return(...e)=>{for(const t of A)if(typeof t=="function")try{t(...e)}catch(s){console.error(s)}}}function ve(...A){const e={...A[0]};for(let t=1;t<A.length;t++){const s=A[t];for(const n in s){const r=e[n],l=s[n];typeof r=="function"&&typeof l=="function"&&n[0]==="o"&&n[1]==="n"&&n.charCodeAt(2)>=65&&n.charCodeAt(2)<=90?e[n]=uo(r,l):(n==="className"||n==="UNSAFE_className")&&typeof r=="string"&&typeof l=="string"?e[n]=lo(r,l):e[n]=l!==void 0?l:r}}return e}const mo={connect:!0,audio:!1,video:!1};function fo(A){const{token:e,serverUrl:t,options:s,room:n,connectOptions:r,connect:l,audio:i,video:c,screen:u,onConnected:m,onDisconnected:d,onError:f,onMediaDeviceFailure:b,onEncryptionError:g,simulateParticipants:h,...p}={...mo,...A};s&&n&&Q.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[x,M]=a.useState();a.useEffect(()=>{M(n??new fA(s))},[n]);const w=a.useMemo(()=>{const{className:k}=Wt();return ve(p,{className:k})},[p]);return a.useEffect(()=>{if(!x)return;const k=()=>{const S=x.localParticipant;Q.debug("trying to publish local tracks"),Promise.all([S.setMicrophoneEnabled(!!i,typeof i!="boolean"?i:void 0),S.setCameraEnabled(!!c,typeof c!="boolean"?c:void 0),S.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(B=>{Q.warn(B),f?.(B)})},C=S=>{const B=Yt.getFailure(S);b?.(B)},E=S=>{g?.(S)};return x.on(G.SignalConnected,k).on(G.MediaDevicesError,C).on(G.EncryptionError,E),()=>{x.off(G.SignalConnected,k).off(G.MediaDevicesError,C).off(G.EncryptionError,E)}},[x,i,c,u,f,g,b]),a.useEffect(()=>{if(x){if(h){x.simulateParticipants({participants:{count:h},publish:{audio:!0,useRealTracks:!0}});return}if(!e){Q.debug("no token yet");return}if(!t){Q.warn("no livekit url provided"),f?.(Error("no livekit url provided"));return}l?(Q.debug("connecting"),x.connect(t,e,r).catch(k=>{Q.warn(k),f?.(k)})):(Q.debug("disconnecting because connect is false"),x.disconnect())}},[l,e,JSON.stringify(r),x,f,t,h]),a.useEffect(()=>{if(!x)return;const k=C=>{switch(C){case WA.Disconnected:d&&d();break;case WA.Connected:m&&m();break}};return x.on(G.ConnectionStateChanged,k),()=>{x.off(G.ConnectionStateChanged,k)}},[e,m,d,x]),a.useEffect(()=>{if(x)return()=>{Q.info("disconnecting on onmount"),x.disconnect()}},[x]),{room:x,htmlProps:w}}const go=a.forwardRef(function(A,e){const{room:t,htmlProps:s}=fo(A);return a.createElement("div",{ref:e,...s},t&&a.createElement(Zt.Provider,{value:t},a.createElement(Ft.Provider,{value:A.featureFlags},A.children)))});function po(A){return A!==void 0}function ho(...A){return ve(...A.filter(po))}function ke(A,e={}){const[t,s]=a.useState(Lt(A)),[n,r]=a.useState(t?.isMuted),[l,i]=a.useState(t?.isSubscribed),[c,u]=a.useState(t?.track),[m,d]=a.useState("landscape"),f=a.useRef(),{className:b,trackObserver:g}=a.useMemo(()=>Jt(A),[A.participant.sid??A.participant.identity,A.source,Pt(A)&&A.publication.trackSid]);return a.useEffect(()=>{const h=g.subscribe(p=>{Q.debug("update track",p),s(p),r(p?.isMuted),i(p?.isSubscribed),u(p?.track)});return()=>h?.unsubscribe()},[g]),a.useEffect(()=>{var h,p;return c&&(f.current&&c.detach(f.current),(h=e.element)!=null&&h.current&&!(ue(A.participant)&&c?.kind==="audio")&&c.attach(e.element.current)),f.current=(p=e.element)==null?void 0:p.current,()=>{f.current&&c?.detach(f.current)}},[c,e.element]),a.useEffect(()=>{var h,p;if(typeof((h=t?.dimensions)==null?void 0:h.width)=="number"&&typeof((p=t?.dimensions)==null?void 0:p.height)=="number"){const x=t.dimensions.width>t.dimensions.height?"landscape":"portrait";d(x)}},[t]),{publication:t,isMuted:n,isSubscribed:l,track:c,elementProps:ho(e.props,{className:b,"data-lk-local-participant":A.participant.isLocal,"data-lk-source":t?.source,...t?.kind==="video"&&{"data-lk-orientation":m}})}}var xo="Expected a function",LA=NaN,bo="[object Symbol]",vo=/^\s+|\s+$/g,ko=/^[-+]0x[0-9a-f]+$/i,Co=/^0b[01]+$/i,Eo=/^0o[0-7]+$/i,So=parseInt,Io=typeof lA=="object"&&lA&&lA.Object===Object&&lA,Mo=typeof self=="object"&&self&&self.Object===Object&&self,wo=Io||Mo||Function("return this")(),yo=Object.prototype,Bo=yo.toString,jo=Math.max,Vo=Math.min,CA=function(){return wo.Date.now()};function Qo(A,e,t){var s,n,r,l,i,c,u=0,m=!1,d=!1,f=!0;if(typeof A!="function")throw new TypeError(xo);e=JA(e)||0,BA(t)&&(m=!!t.leading,d="maxWait"in t,r=d?jo(JA(t.maxWait)||0,e):r,f="trailing"in t?!!t.trailing:f);function b(E){var S=s,B=n;return s=n=void 0,u=E,l=A.apply(B,S),l}function g(E){return u=E,i=setTimeout(x,e),m?b(E):l}function h(E){var S=E-c,B=E-u,Z=e-S;return d?Vo(Z,r-B):Z}function p(E){var S=E-c,B=E-u;return c===void 0||S>=e||S<0||d&&B>=r}function x(){var E=CA();if(p(E))return M(E);i=setTimeout(x,h(E))}function M(E){return i=void 0,f&&s?b(E):(s=n=void 0,l)}function w(){i!==void 0&&clearTimeout(i),u=0,s=c=n=i=void 0}function k(){return i===void 0?l:M(CA())}function C(){var E=CA(),S=p(E);if(s=arguments,n=this,c=E,S){if(i===void 0)return g(c);if(d)return i=setTimeout(x,e),b(c)}return i===void 0&&(i=setTimeout(x,e)),l}return C.cancel=w,C.flush=k,C}function BA(A){var e=typeof A;return!!A&&(e=="object"||e=="function")}function Ro(A){return!!A&&typeof A=="object"}function To(A){return typeof A=="symbol"||Ro(A)&&Bo.call(A)==bo}function JA(A){if(typeof A=="number")return A;if(To(A))return LA;if(BA(A)){var e=typeof A.valueOf=="function"?A.valueOf():A;A=BA(e)?e+"":e}if(typeof A!="string")return A===0?A:+A;A=A.replace(vo,"");var t=Co.test(A);return t||Eo.test(A)?So(A.slice(2),t?2:8):ko.test(A)?LA:+A}var Do=Qo;const PA=Xt(Do);function No(A){const e=a.useRef(A);e.current=A,a.useEffect(()=>()=>{e.current()},[])}function Oo(A,e=500,t){const s=a.useRef();No(()=>{s.current&&s.current.cancel()});const n=a.useMemo(()=>{const r=PA(A,e,t),l=(...i)=>r(...i);return l.cancel=()=>{r.cancel()},l.isPending=()=>!!s.current,l.flush=()=>r.flush(),l},[A,e,t]);return a.useEffect(()=>{s.current=PA(A,e,t)},[A,e,t]),n}function Zo(A,e,t){const s=(u,m)=>u===m,n=A instanceof Function?A():A,[r,l]=a.useState(n),i=a.useRef(n),c=Oo(l,e,t);return s(i.current,n)||(c(n),i.current=n),[r,c]}function Fo({threshold:A=0,root:e=null,rootMargin:t="0%",freezeOnceVisible:s=!1,initialIsIntersecting:n=!1,onChange:r}={}){var l;const[i,c]=a.useState(null),[u,m]=a.useState(()=>({isIntersecting:n,entry:void 0})),d=a.useRef();d.current=r;const f=((l=u.entry)==null?void 0:l.isIntersecting)&&s;a.useEffect(()=>{if(!i||!("IntersectionObserver"in window)||f)return;let h;const p=new IntersectionObserver(x=>{const M=Array.isArray(p.thresholds)?p.thresholds:[p.thresholds];x.forEach(w=>{const k=w.isIntersecting&&M.some(C=>w.intersectionRatio>=C);m({isIntersecting:k,entry:w}),d.current&&d.current(k,w),k&&s&&h&&(h(),h=void 0)})},{threshold:A,root:e,rootMargin:t});return p.observe(i),()=>{p.disconnect()}},[i,JSON.stringify(A),e,t,f,s]);const b=a.useRef(null);a.useEffect(()=>{var h;!i&&(h=u.entry)!=null&&h.target&&!s&&!f&&b.current!==u.entry.target&&(b.current=u.entry.target,m({isIntersecting:n,entry:void 0}))},[i,u.entry,s,f,n]);const g=[c,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}const Ce=a.forwardRef(function({onTrackClick:A,onClick:e,onSubscriptionStatusChanged:t,trackRef:s,manageSubscription:n,...r},l){const i=de(s),c=a.useRef(null);a.useImperativeHandle(l,()=>c.current);const u=Fo({root:c.current}),[m]=Zo(u,3e3);a.useEffect(()=>{n&&i.publication instanceof MA&&m?.isIntersecting===!1&&u?.isIntersecting===!1&&i.publication.setSubscribed(!1)},[m,i,n]),a.useEffect(()=>{n&&i.publication instanceof MA&&u?.isIntersecting===!0&&i.publication.setSubscribed(!0)},[u,i,n]);const{elementProps:d,publication:f,isSubscribed:b}=ke(i,{element:c,props:r});a.useEffect(()=>{t?.(!!b)},[b,t]);const g=h=>{e?.(h),A?.({participant:i?.participant,track:f})};return a.createElement("video",{ref:c,...d,muted:!0,onClick:g})}),Yo=a.forwardRef(function({trackRef:A,onSubscriptionStatusChanged:e,volume:t,muted:s,...n},r){const l=de(A),i=a.useRef(null);a.useImperativeHandle(r,()=>i.current);const{elementProps:c,isSubscribed:u,track:m,publication:d}=ke(l,{element:i,props:n});return a.useEffect(()=>{e?.(!!u)},[u,e]),a.useEffect(()=>{m===void 0||t===void 0||(m instanceof wA?m.setVolume(t):Q.warn("Volume can only be set on remote audio tracks."))},[t,m]),a.useEffect(()=>{d===void 0||s===void 0||(d instanceof MA?d.setEnabled(!s):Q.warn("Can only call setEnabled on remote track publications."))},[s,d,m]),a.createElement("audio",{ref:i,...c})});function Wo({volume:A,muted:e}){const t=aA([J.Source.Microphone,J.Source.ScreenShareAudio,J.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(s=>!ue(s.participant)&&s.publication.kind===J.Kind.Audio);return a.createElement("div",{style:{display:"none"}},t.map(s=>a.createElement(Yo,{key:Gt(s),trackRef:s,volume:A,muted:e})))}const Ee=()=>{const A=Ke(),e=a.useCallback(()=>pA.getState().isVoiceModeActive,[]);return a.useMemo(()=>new Proxy(A,{get(t,s){const n=t[s];return e()||s==="closeAll"?n:()=>{}}}),[e,A])};function Go(){const A=Ee(),e=a.useCallback(()=>{vA.debug("disconnected from room"),kA()},[]),t=a.useCallback(n=>{A.danger("Something went wrong"),vA.error("an error occurred within the room",n);const r=OA(pA.getState());V.voiceMode.error({...r,error:n.message}),kA()},[A]),s=a.useCallback(n=>{A.danger("Something went wrong"),vA.error("an encryption error occurred within the room",n);const r=OA(pA.getState());V.voiceMode.error({encryptionError:n.message,eventSource:"voice-session",...r}),kA()},[A]);return{onDisconnected:e,onError:t,onEncryptionError:s}}function Se({conversationId:A}){const{shouldDelayDisconnect:e,delayDisconnect:t,immediateDisconnect:s}=TA({refetchLater:!0}),{toggleMute:n}=me(),r=nA(A);return a.useCallback(async()=>{V.voiceSessionEndedByUser.click(),wt.setState({voiceFeedbackThread:r,lastVoiceSessionEndTime:new Date}),e?(await n(),t()):s()},[t,s,r,e,n])}var Lo={webm:"data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4EEQoWBAhhTgGcBAAAAAAAVkhFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsghV17AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjMzLjEwMFdBjUxhdmY1NS4zMy4xMDBzpJBlrrXf3DCDVB8KcgbMpcr+RImIQJBgAAAAAAAWVK5rAQAAAAAAD++uAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEAmJaAOABAAAAAAAABrCBsLqBkK4BAAAAAAAPq9eBAnPFgQKcgQAitZyDdW5khohBX1ZPUkJJU4OBAuEBAAAAAAAAEZ+BArWIQOdwAAAAAABiZIEgY6JPbwIeVgF2b3JiaXMAAAAAAoC7AAAAAAAAgLUBAAAAAAC4AQN2b3JiaXMtAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAxMDExMDEgKFNjaGF1ZmVudWdnZXQpAQAAABUAAABlbmNvZGVyPUxhdmM1NS41Mi4xMDIBBXZvcmJpcyVCQ1YBAEAAACRzGCpGpXMWhBAaQlAZ4xxCzmvsGUJMEYIcMkxbyyVzkCGkoEKIWyiB0JBVAABAAACHQXgUhIpBCCGEJT1YkoMnPQghhIg5eBSEaUEIIYQQQgghhBBCCCGERTlokoMnQQgdhOMwOAyD5Tj4HIRFOVgQgydB6CCED0K4moOsOQghhCQ1SFCDBjnoHITCLCiKgsQwuBaEBDUojILkMMjUgwtCiJqDSTX4GoRnQXgWhGlBCCGEJEFIkIMGQcgYhEZBWJKDBjm4FITLQagahCo5CB+EIDRkFQCQAACgoiiKoigKEBqyCgDIAAAQQFEUx3EcyZEcybEcCwgNWQUAAAEACAAAoEiKpEiO5EiSJFmSJVmSJVmS5omqLMuyLMuyLMsyEBqyCgBIAABQUQxFcRQHCA1ZBQBkAAAIoDiKpViKpWiK54iOCISGrAIAgAAABAAAEDRDUzxHlETPVFXXtm3btm3btm3btm3btm1blmUZCA1ZBQBAAAAQ0mlmqQaIMAMZBkJDVgEACAAAgBGKMMSA0JBVAABAAACAGEoOogmtOd+c46BZDppKsTkdnEi1eZKbirk555xzzsnmnDHOOeecopxZDJoJrTnnnMSgWQqaCa0555wnsXnQmiqtOeeccc7pYJwRxjnnnCateZCajbU555wFrWmOmkuxOeecSLl5UptLtTnnnHPOOeecc84555zqxekcnBPOOeecqL25lpvQxTnnnE/G6d6cEM4555xzzjnnnHPOOeecIDRkFQAABABAEIaNYdwpCNLnaCBGEWIaMulB9+gwCRqDnELq0ehopJQ6CCWVcVJKJwgNWQUAAAIAQAghhRRSSCGFFFJIIYUUYoghhhhyyimnoIJKKqmooowyyyyzzDLLLLPMOuyssw47DDHEEEMrrcRSU2011lhr7jnnmoO0VlprrbVSSimllFIKQkNWAQAgAAAEQgYZZJBRSCGFFGKIKaeccgoqqIDQkFUAACAAgAAAAABP8hzRER3RER3RER3RER3R8RzPESVREiVREi3TMjXTU0VVdWXXlnVZt31b2IVd933d933d+HVhWJZlWZZlWZZlWZZlWZZlWZYgNGQVAAACAAAghBBCSCGFFFJIKcYYc8w56CSUEAgNWQUAAAIACAAAAHAUR3EcyZEcSbIkS9IkzdIsT/M0TxM9URRF0zRV0RVdUTdtUTZl0zVdUzZdVVZtV5ZtW7Z125dl2/d93/d93/d93/d93/d9XQdCQ1YBABIAADqSIymSIimS4ziOJElAaMgqAEAGAEAAAIriKI7jOJIkSZIlaZJneZaomZrpmZ4qqkBoyCoAABAAQAAAAAAAAIqmeIqpeIqoeI7oiJJomZaoqZoryqbsuq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq7ruq4LhIasAgAkAAB0JEdyJEdSJEVSJEdygNCQVQCADACAAAAcwzEkRXIsy9I0T/M0TxM90RM901NFV3SB0JBVAAAgAIAAAAAAAAAMybAUy9EcTRIl1VItVVMt1VJF1VNVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVN0zRNEwgNWQkAkAEAkBBTLS3GmgmLJGLSaqugYwxS7KWxSCpntbfKMYUYtV4ah5RREHupJGOKQcwtpNApJq3WVEKFFKSYYyoVUg5SIDRkhQAQmgHgcBxAsixAsiwAAAAAAAAAkDQN0DwPsDQPAAAAAAAAACRNAyxPAzTPAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAA0DwP8DwR8EQRAAAAAAAAACzPAzTRAzxRBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABA0jRA8zxA8zwAAAAAAAAAsDwP8EQR0DwRAAAAAAAAACzPAzxRBDzRAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAEOAAABBgIRQasiIAiBMAcEgSJAmSBM0DSJYFTYOmwTQBkmVB06BpME0AAAAAAAAAAAAAJE2DpkHTIIoASdOgadA0iCIAAAAAAAAAAAAAkqZB06BpEEWApGnQNGgaRBEAAAAAAAAAAAAAzzQhihBFmCbAM02IIkQRpgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGHAAAAgwoQwUGrIiAIgTAHA4imUBAIDjOJYFAACO41gWAABYliWKAABgWZooAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAYcAAACDChDBQashIAiAIAcCiKZQHHsSzgOJYFJMmyAJYF0DyApgFEEQAIAAAocAAACLBBU2JxgEJDVgIAUQAABsWxLE0TRZKkaZoniiRJ0zxPFGma53meacLzPM80IYqiaJoQRVE0TZimaaoqME1VFQAAUOAAABBgg6bE4gCFhqwEAEICAByKYlma5nmeJ4qmqZokSdM8TxRF0TRNU1VJkqZ5niiKommapqqyLE3zPFEURdNUVVWFpnmeKIqiaaqq6sLzPE8URdE0VdV14XmeJ4qiaJqq6roQRVE0TdNUTVV1XSCKpmmaqqqqrgtETxRNU1Vd13WB54miaaqqq7ouEE3TVFVVdV1ZBpimaaqq68oyQFVV1XVdV5YBqqqqruu6sgxQVdd1XVmWZQCu67qyLMsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBimFFPKMCYhpBAaxiSEFEImJaXSUqogpFJSKRWEVEoqJaOUUmopVRBSKamUCkIqJZVSAADYgQMA2IGFUGjISgAgDwCAMEYpxhhzTiKkFGPOOScRUoox55yTSjHmnHPOSSkZc8w556SUzjnnnHNSSuacc845KaVzzjnnnJRSSuecc05KKSWEzkEnpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZmuZ5omialiRpmud5niiapiZJmuZ5nieKqsnzPE8URdE0VZXneZ4oiqJpqirXFUXTNE1VVV2yLIqmaZqq6rowTdNUVdd1XZimaaqq67oubFtVVdV1ZRm2raqq6rqyDFzXdWXZloEsu67s2rIAAPAEBwCgAhtWRzgpGgssNGQlAJABAEAYg5BCCCFlEEIKIYSUUggJAAAYcAAACDChDBQashIASAUAAIyx1lprrbXWQGettdZaa62AzFprrbXWWmuttdZaa6211lJrrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmuttdZaa6211lprrbXWWmstpZRSSimllFJKKaWUUkoppZRSSgUA+lU4APg/2LA6wknRWGChISsBgHAAAMAYpRhzDEIppVQIMeacdFRai7FCiDHnJKTUWmzFc85BKCGV1mIsnnMOQikpxVZjUSmEUlJKLbZYi0qho5JSSq3VWIwxqaTWWoutxmKMSSm01FqLMRYjbE2ptdhqq7EYY2sqLbQYY4zFCF9kbC2m2moNxggjWywt1VprMMYY3VuLpbaaizE++NpSLDHWXAAAd4MDAESCjTOsJJ0VjgYXGrISAAgJACAQUooxxhhzzjnnpFKMOeaccw5CCKFUijHGnHMOQgghlIwx5pxzEEIIIYRSSsaccxBCCCGEkFLqnHMQQgghhBBKKZ1zDkIIIYQQQimlgxBCCCGEEEoopaQUQgghhBBCCKmklEIIIYRSQighlZRSCCGEEEIpJaSUUgohhFJCCKGElFJKKYUQQgillJJSSimlEkoJJYQSUikppRRKCCGUUkpKKaVUSgmhhBJKKSWllFJKIYQQSikFAAAcOAAABBhBJxlVFmGjCRcegEJDVgIAZAAAkKKUUiktRYIipRikGEtGFXNQWoqocgxSzalSziDmJJaIMYSUk1Qy5hRCDELqHHVMKQYtlRhCxhik2HJLoXMOAAAAQQCAgJAAAAMEBTMAwOAA4XMQdAIERxsAgCBEZohEw0JweFAJEBFTAUBigkIuAFRYXKRdXECXAS7o4q4DIQQhCEEsDqCABByccMMTb3jCDU7QKSp1IAAAAAAADADwAACQXAAREdHMYWRobHB0eHyAhIiMkAgAAAAAABcAfAAAJCVAREQ0cxgZGhscHR4fICEiIyQBAIAAAgAAAAAggAAEBAQAAAAAAAIAAAAEBB9DtnUBAAAAAAAEPueBAKOFggAAgACjzoEAA4BwBwCdASqwAJAAAEcIhYWIhYSIAgIABhwJ7kPfbJyHvtk5D32ych77ZOQ99snIe+2TkPfbJyHvtk5D32ych77ZOQ99YAD+/6tQgKOFggADgAqjhYIAD4AOo4WCACSADqOZgQArADECAAEQEAAYABhYL/QACIBDmAYAAKOFggA6gA6jhYIAT4AOo5mBAFMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAGSADqOFggB6gA6jmYEAewAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAj4AOo5mBAKMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAKSADqOFggC6gA6jmYEAywAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIAz4AOo4WCAOSADqOZgQDzADECAAEQEAAYABhYL/QACIBDmAYAAKOFggD6gA6jhYIBD4AOo5iBARsAEQIAARAQFGAAYWC/0AAiAQ5gGACjhYIBJIAOo4WCATqADqOZgQFDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggFPgA6jhYIBZIAOo5mBAWsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAXqADqOFggGPgA6jmYEBkwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIBpIAOo4WCAbqADqOZgQG7ADECAAEQEAAYABhYL/QACIBDmAYAAKOFggHPgA6jmYEB4wAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIB5IAOo4WCAfqADqOZgQILADECAAEQEAAYABhYL/QACIBDmAYAAKOFggIPgA6jhYICJIAOo5mBAjMAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAjqADqOFggJPgA6jmYECWwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYICZIAOo4WCAnqADqOZgQKDADECAAEQEAAYABhYL/QACIBDmAYAAKOFggKPgA6jhYICpIAOo5mBAqsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCArqADqOFggLPgA6jmIEC0wARAgABEBAUYABhYL/QACIBDmAYAKOFggLkgA6jhYIC+oAOo5mBAvsAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCAw+ADqOZgQMjADECAAEQEAAYABhYL/QACIBDmAYAAKOFggMkgA6jhYIDOoAOo5mBA0sAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA0+ADqOFggNkgA6jmYEDcwAxAgABEBAAGAAYWC/0AAiAQ5gGAACjhYIDeoAOo4WCA4+ADqOZgQObADECAAEQEAAYABhYL/QACIBDmAYAAKOFggOkgA6jhYIDuoAOo5mBA8MAMQIAARAQABgAGFgv9AAIgEOYBgAAo4WCA8+ADqOFggPkgA6jhYID+oAOo4WCBA+ADhxTu2sBAAAAAAAAEbuPs4EDt4r3gQHxghEr8IEK",mp4:"data:video/mp4;base64,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"};const{webm:Jo,mp4:Po}=Lo,EA=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,SA=()=>"wakeLock"in navigator;class Xo{constructor(){if(this.enabled=!1,SA()){this._wakeLock=null;const e=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else EA()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",Jo),this._addSourceToVideo(this.noSleepVideo,"mp4",Po),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(e,t,s){var n=document.createElement("source");n.src=s,n.type=`video/${t}`,e.appendChild(n)}get isEnabled(){return this.enabled}enable(){return SA()?navigator.wakeLock.request("screen").then(e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e}):EA()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(t=>(this.enabled=!0,t)).catch(t=>{throw this.enabled=!1,t})}disable(){SA()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):EA()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}var Uo=Xo;const _o=ee(Uo);function qo(A){const e=A.default_voice_mode,t=A.modes.find(s=>s.mode===e);if(!t)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return t.default_model_slug}function DA(){const A=O(),e=Ee(),{startVoiceMode:t,stopVoiceMode:s,isConnected:n,isVoiceModeActive:r}=fe(),l=a.useCallback(async i=>{const c={conversation_id:i.serverThreadId,parent_message_id:i.parentMessageId,model_slug:i.modelSlug,model_slug_advanced:i.isAdvancedMode?i.modelSlug:void 0,voice_mode:i.isAdvancedMode?"advanced":"standard",eventSource:i.eventSource,clientThreadId:i.clientThreadId,gizmo_id:i.gizmoId,voice:i.voice},u=A.formatMessage({id:"useVoiceModeButtonAction.error",defaultMessage:"Failed to start voice mode"});try{await t(c)}catch{if(i.isAdvancedMode&&i.retryWithStandard)try{await t({...c,voice_mode:"standard"})}catch{e.danger(u),V.voiceMode.error({error:u})}else e.danger(u),V.voiceMode.error({error:u})}},[A,t,e]);return{isVoiceModeActive:r,isConnected:n,toggleVoiceMode:l,stopVoiceMode:s}}const Ie="inline-flex items-center bg-transparent text-token-text-secondary hover:text-token-text-primary",zo=({message:A,onClick:e,type:t})=>{const s=O(),n=re()&&te;if(!A)return null;switch(t){case"microphone_denied":return n?o.jsxs("a",{href:"ms-settings:privacy-microphone",className:Ie,children:[A,o.jsx(ae,{className:"icon-sm ml-1"})]}):o.jsx(XA,{onClick:e,message:A});case"connection_quality":return o.jsxs("div",{className:"inline-flex items-center",children:[A,o.jsx("button",{onClick:e,className:"ml-1",children:o.jsx("strong",{children:s.formatMessage(Me.retry)})})]});case"normal":return o.jsx(XA,{onClick:e,message:A})}},XA=({message:A,onClick:e})=>{const t=O();return o.jsxs("button",{onClick:e,className:Ie,"aria-label":t.formatMessage(Me.openInfoModal),children:[A,o.jsx(ae,{className:"icon-sm ml-1"})]})},Me={openInfoModal:{id:"hintMessage.openInfoModal",defaultMessage:"Open info modal",description:"Open info modal about voice mode usage"},retry:{id:"hintMessage.retry",defaultMessage:"Retry",description:"Retry text next to lost connection message"}};function Ko(A){const{button:e,conversationId:t,modelId:s,onClick:n}=A,r=nA(t),l=jA(t),i=e.action==="new_chat"?l:s,{toggleVoiceMode:c}=DA(),u=$e(),m=a.useCallback(()=>{switch(e.action){case"new_chat":{const d=i??gA;yt(`/?model=${d}`),c({serverThreadId:void 0,modelSlug:d,isAdvancedMode:!0,eventSource:`modal_${e.action}`,parentMessageId:void 0,retryWithStandard:!1,clientThreadId:At(),gizmoId:void 0});break}case"switch_to_standard":r&&s&&c({serverThreadId:r,modelSlug:i??gA,isAdvancedMode:!1,eventSource:`modal_${e.action}`,parentMessageId:void 0,retryWithStandard:!1,clientThreadId:r,gizmoId:z.getGizmoId(t)});break;case"upgrade_to_plus":ZA(u,"Voice Mode Upgrade To Plus Modal");break;case"upgrade_to_pro":ZA(u,"Voice Mode Upgrade To Pro Modal");break}n?.()},[e.action,t,i,s,u,n,r,c]);return o.jsx(et.Button,{onClick:m,title:e.title,color:A.color})}const Ho={primary:"primary",secondary:"secondary",tertiary:"ghost"};function we({buttons:A,conversationId:e,modelId:t,onClick:s}){let n,r,l;const i=a.useCallback(c=>()=>{c==="upgrade_to_plus"?V.upsell.upgradeToPlus():c==="upgrade_to_pro"&&V.upsell.upgradeToPro(),s()},[s]);return!A||A.length===0?{primary:void 0,secondary:void 0,tertiary:void 0}:(A.forEach(c=>{if(!He.includes(c.action))return;const m=o.jsx(Ko,{button:c,conversationId:e,modelId:t,onClick:i(c.action),color:Ho[c.style]});switch(c.style){case"primary":n=m;break;case"secondary":r=m;break;case"tertiary":l=m;break}}),{primary:n,secondary:r,tertiary:l})}function $o({conversationId:A,modelId:e,isOpen:t,onClose:s,buttons:n,title:r,description_markdown:l}){const i=we({buttons:n,conversationId:A,modelId:e,onClick:s}),c=o.jsx(he,{className:"markdown mb-6 text-token-text-secondary",urlTransform:u=>u,children:l});return o.jsx(oe,{title:r,isOpen:t,onClose:s,size:"custom",className:"max-w-[550px]",type:"warning",showCloseButton:!0,children:o.jsxs("div",{className:"w-full",children:[c,o.jsxs("div",{className:"flex flex-row justify-end gap-6",children:[i.primary,i.secondary,i.tertiary]})]})})}function An({conversationId:A,currentModelId:e}){const t=O(),s=Se({conversationId:A}),n=I(v=>v.server.usage),r=I(v=>v.server.voiceConnectionQuality),l=v=>v===pe.Lost,i=I(v=>v.server.connectionState),c=ge(),{voiceName:u}=VA(),[m,d]=a.useState(!1),f=I(v=>v.server.toolUpdate),[b,g]=a.useState(!1),[h,p]=a.useState(!0),[x,M]=a.useState(null),[w,k]=a.useState(null),[C,E]=a.useState(null),[S,B]=a.useState(!1),[Z,T]=a.useState(!1),iA=a.useRef(!1),X=nA(A),{stopVoiceMode:H,toggleVoiceMode:L,isVoiceModeActive:F}=DA(),$=Ut();a.useEffect(()=>{Z||$().then(v=>{B(v)}).finally(()=>{T(!0)})},[$,Z]);const rA=I(v=>v.dev.room?.localParticipant.isMicrophoneEnabled);a.useEffect(()=>{F&&(S&&!rA)&&(T(!1),B(!1))},[F,rA,S]);const hA=re()&&te,j=F&&Z&&!S,AA=F&&S&&!i&&c;a.useEffect(()=>{j&&(d(!1),E(null),M(t.formatMessage(IA.hint)),k({title:t.formatMessage(IA.title),description_markdown:t.formatMessage(IA.description_markdown),buttons:[]}))},[t,hA,j]),a.useEffect(()=>{if(AA&&!iA.current){iA.current=!0,M(null),k(null);const v=qo(c),W=z.getCurrentNode(A)?.id,U={serverThreadId:X,modelSlug:v,parentMessageId:W,isAdvancedMode:c.default_voice_mode==="advanced",retryWithStandard:!0,eventSource:"composer_speech_button",clientThreadId:A,gizmoId:z.getGizmoId(A)};V.voiceSessionStarted.click({voice:u}),L(U)}},[A,AA,c,X,L,u]);const{reaching_limit_disclosure:eA,exceed_limit_message:Y}=n?.rate_limit_message??{},cA=c?.modes.find(v=>v.mode===c?.default_voice_mode),xA=cA?.disclosure_message,bA=l(r)?"Lost connection.":eA?.hint??Y?.title??xA?.hint??null;a.useEffect(()=>{cA&&!j&&M(cA.disclosure_message?.hint??null)},[cA,j]),a.useEffect(()=>{const v=f?.text;let W,U,_;return v&&(p(!1),W=setTimeout(()=>{g(!0),U=setTimeout(()=>{g(!1),_=setTimeout(()=>{p(!0),pA.setState(ze=>{ze.server.toolUpdate=null})},750)},3e3)},750)),()=>{clearTimeout(W),clearTimeout(U),clearTimeout(_)}},[f]),a.useEffect(()=>{if(!j){if(bA&&M(bA),Y&&F){H();const v={title:Y.title,description_markdown:Y.description_markdown,buttons:Y.buttons};m?E(v):(k(v),d(!0));const W=Y.buttons.some(_=>_.action==="upgrade_to_plus"),U=Y.buttons.some(_=>_.action==="upgrade_to_pro");V.rateLimitReached.success({upgrade_to_plus:W,upgrade_to_pro:U})}else if(!w){const v=eA??xA;v&&k({title:v.title,description_markdown:v.message_markdown,buttons:v.buttons})}}},[xA,Y,bA,m,F,w,eA,H,j]);const Je=a.useCallback(()=>{C&&(k(C),E(null)),d(!0)},[C]),Pe=a.useCallback(()=>{d(!1)},[]),{startVoiceMode:Xe}=fe(),Ue=jA(A),_e=I(v=>v.voiceMode),qe=async()=>{try{M(null),await Xe({conversation_id:X,model_slug:Ue??gA,eventSource:"lost_connection_hint_message",voice_mode:_e,voice:u,clientThreadId:A,gizmo_id:z.getGizmoId(A)})}catch(v){const W=v instanceof Error?v.message:String(v);V.voiceMode.error({error:W,eventSource:"lost_connection_hint_message"})}};let tA;return j?tA="microphone_denied":l(r)?tA="connection_quality":tA="normal",o.jsxs("div",{className:"flex w-full flex-col items-center",children:[o.jsxs("div",{className:"relative mb-6 flex min-h-5 w-full items-center justify-center text-xs text-token-text-secondary",children:[f?.text&&o.jsx(y.div,{initial:{opacity:0},animate:{opacity:b?1:0},transition:{duration:.5},style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center"},children:o.jsxs("div",{className:"flex items-center",children:[f?.text&&o.jsx(ut,{className:"icon-sm mr-1"}),f?.text]})}),o.jsx(y.div,{initial:{opacity:0},animate:{opacity:h?1:0},transition:{duration:.5},style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center",pointerEvents:f?.text?"none":"auto",cursor:f?.text?"default":"pointer"},children:o.jsx("div",{className:"flex items-center",children:o.jsx(zo,{type:tA,message:x,onClick:tA==="connection_quality"?qe:Je})})})]}),o.jsxs("div",{className:oA("flex flex-row items-center gap-6","rounded-full px-3 py-1","transition-width duration-200 ease-in-out"),children:[o.jsx(UA,{capability:"video",children:o.jsx(en,{})}),o.jsx(on,{shouldQueryDevices:!!AA,hideTooltip:j}),o.jsx(UA,{capability:"screenshare",children:o.jsx(nn,{})}),o.jsx(NA,{onClick:s})]}),o.jsx($o,{conversationId:A,modelId:e,isOpen:m,onClose:Pe,title:w?.title,description_markdown:w?.description_markdown,buttons:w?.buttons??[]})]})}function UA({children:A,capability:e}){const t=Ht();return!t.av||!t[e]?null:o.jsx(o.Fragment,{children:A})}function en(){const{isVideoEnabled:A,isStartingVideo:e,toggleVideo:t}=QA();let s=null;e?s=sA:s=mt;const n=A?"bg-gray-900 hover:bg-gray-800 active:bg-gray-700":"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",r=A?"text-token-main-surface-primary":"text-token-main-surface-primary-inverse";return o.jsx(K,{onClick:()=>t("ControlButton"),disabled:e,icon:s,className:n,iconColor:r})}const tn=async()=>{try{return(await _t("audioinput"))?.label??""}catch(A){return console.warn("Error fetching default media device:",A),ot.addError("Failed to fetch default media device",{error:A}),"Error accessing microphone devices"}};function on({shouldQueryDevices:A,hideTooltip:e}){const{isMicrophoneEnabled:t,isMuting:s,toggleMute:n}=me(),r=O(),{disconnectPending:l}=TA(),[i,c]=a.useState(""),u=t?ft:gt,m=t?"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10":"bg-red-500/10 hover:bg-red-500/15 active:bg-red-500/20 dark:bg-red-500/10 dark:hover:bg-red-500/15 dark:active:bg-red-500/20",d=t?"text-token-main-surface-primary-inverse":"text-danger";a.useEffect(()=>{A&&tn().then(b=>c(b))},[A]);const f=t?r.formatMessage({id:"PJzixV",defaultMessage:"Turn off microphone"}):r.formatMessage({id:"nbbUMb",defaultMessage:"Turn on microphone"});return o.jsx(K,{"aria-label":f,onClick:n,icon:u,disabled:s||l,className:m,iconColor:d,tooltipPrimaryLabel:!e&&i?f:"",tooltipSecondaryLabel:i})}function nn(){const{isScreenshareEnabled:A,isScreenshareStarting:e,toggleScreenShare:t}=RA();let s=null;e?s=sA:s=pt;const n=A?"bg-gray-900 hover:bg-gray-800 active:bg-gray-700":"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",r=A?"text-token-main-surface-primary":"text-token-main-surface-primary-inverse";return o.jsx(K,{onClick:()=>t("ControlButton"),disabled:e,icon:s,className:n,iconColor:r})}function NA({className:A,onClick:e}){const t=O(),{disconnectPending:s}=TA(),n="bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",r=t.formatMessage({id:"9Mto0a",defaultMessage:"End"});return o.jsx(K,{disabled:s,onClick:e,icon:s?sA:dt,iconColor:"text-token-main-surface-primary-inverse",className:A??n,"aria-label":t.formatMessage({id:"7/8k4Y",defaultMessage:"End voice mode"}),tooltipPrimaryLabel:r})}function K(A){const{icon:e,disabled:t,className:s,iconColor:n="text-current",iconSize:r="icon-xl",buttonSize:l="h-16 w-16",tooltipPrimaryLabel:i,tooltipSecondaryLabel:c,...u}=A,[m,d]=a.useState(!1),f=a.useRef(void 0),b=a.useCallback(()=>{const p=window.setTimeout(()=>{d(!0)},Bt);f.current=p},[]),g=a.useCallback(()=>{clearTimeout(f.current),d(!1)},[]),h=o.jsx(sn,{className:oA(s,l,"overflow-hidden rounded-full border-none p-0.5 text-token-text-primary transition-colors duration-200 ease-in-out hover:text-token-text-secondary"),disabled:t,...u,children:o.jsx(e,{className:oA(r,n)})});return i?o.jsx(tt,{sideOffset:14,label:i,secondaryLabel:c,contentClassName:"flex flex-col items-center justify-center",className:"flex",open:m,side:"top",children:o.jsx("span",{onPointerEnter:b,onPointerLeave:g,children:h})}):h}const sn=y.create(ne),IA={hint:{id:"micMessages.hint",defaultMessage:"Enable microphone access in Settings",description:"Hint to the user to manually enable microphone access for voice mode"},title:{id:"micMessages.title",defaultMessage:"Microphone access required",description:"Title for modal that informs the user that microphone access is required for voice mode"},description_markdown:{id:"micMessages.description_markdown",defaultMessage:"To use voice mode, you'll need to enable your microphone and try again.",description:"Description for modal that informs the user that microphone access is required for voice mode"}};function an(A,e,t,s){var n=-1,r=A==null?0:A.length;for(s&&r&&(t=A[++n]);++n<r;)t=e(t,A[n],n,A);return t}var rn=an;function cn(A){return function(e){return A?.[e]}}var ln=cn,un=ln,dn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mn=un(dn),fn=mn,gn=fn,pn=se,hn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xn="\\u0300-\\u036f",bn="\\ufe20-\\ufe2f",vn="\\u20d0-\\u20ff",kn=xn+bn+vn,Cn="["+kn+"]",En=RegExp(Cn,"g");function Sn(A){return A=pn(A),A&&A.replace(hn,gn).replace(En,"")}var In=Sn,Mn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function wn(A){return A.match(Mn)||[]}var yn=wn,Bn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function jn(A){return Bn.test(A)}var Vn=jn,ye="\\ud800-\\udfff",Qn="\\u0300-\\u036f",Rn="\\ufe20-\\ufe2f",Tn="\\u20d0-\\u20ff",Dn=Qn+Rn+Tn,Be="\\u2700-\\u27bf",je="a-z\\xdf-\\xf6\\xf8-\\xff",Nn="\\xac\\xb1\\xd7\\xf7",On="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Zn="\\u2000-\\u206f",Fn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ve="A-Z\\xc0-\\xd6\\xd8-\\xde",Yn="\\ufe0e\\ufe0f",Qe=Nn+On+Zn+Fn,Re="['’]",_A="["+Qe+"]",Wn="["+Dn+"]",Te="\\d+",Gn="["+Be+"]",De="["+je+"]",Ne="[^"+ye+Qe+Te+Be+je+Ve+"]",Ln="\\ud83c[\\udffb-\\udfff]",Jn="(?:"+Wn+"|"+Ln+")",Pn="[^"+ye+"]",Oe="(?:\\ud83c[\\udde6-\\uddff]){2}",Ze="[\\ud800-\\udbff][\\udc00-\\udfff]",q="["+Ve+"]",Xn="\\u200d",qA="(?:"+De+"|"+Ne+")",Un="(?:"+q+"|"+Ne+")",zA="(?:"+Re+"(?:d|ll|m|re|s|t|ve))?",KA="(?:"+Re+"(?:D|LL|M|RE|S|T|VE))?",Fe=Jn+"?",Ye="["+Yn+"]?",_n="(?:"+Xn+"(?:"+[Pn,Oe,Ze].join("|")+")"+Ye+Fe+")*",qn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kn=Ye+Fe+_n,Hn="(?:"+[Gn,Oe,Ze].join("|")+")"+Kn,$n=RegExp([q+"?"+De+"+"+zA+"(?="+[_A,q,"$"].join("|")+")",Un+"+"+KA+"(?="+[_A,q+qA,"$"].join("|")+")",q+"?"+qA+"+"+zA,q+"+"+KA,zn,qn,Te,Hn].join("|"),"g");function As(A){return A.match($n)||[]}var es=As,ts=yn,os=Vn,ns=se,ss=es;function as(A,e,t){return A=ns(A),e=t?void 0:e,e===void 0?os(A)?ss(A):ts(A):A.match(e)||[]}var is=as,rs=rn,cs=In,ls=is,us="['’]",ds=RegExp(us,"g");function ms(A){return function(e){return rs(ls(cs(e).replace(ds,"")),A,"")}}var fs=ms,gs=fs,ps=jt,hs=gs(function(A,e,t){return A+(t?" ":"")+ps(e)}),xs=hs;const bs=ee(xs);function vs({conversationId:A}){const e=at("1426009137")?.value,t=nA(A),s=jA(A),n=z.getCurrentNode(A)?.id,r=ge();return!e||!s?null:o.jsx(P,{conversationId:t??A,parentMessageId:n,status:r})}function P(A){const e=A?.status?.modes,[t,s]=a.useState(!1),[n,r]=a.useState(),l=a.useCallback(u=>{r(u),s(!0)},[]),i=O(),c=a.useCallback(()=>s(!1),[]);return o.jsxs(o.Fragment,{children:[o.jsx(nt,{contentAlign:"center",triggerButton:o.jsx(P.Trigger,{}),children:e?e.map(u=>{const m=u.default_model_slug;return a.createElement(P.Item,{...A,modelSlug:m,key:u.mode,voiceStatusMode:u,onShowModal:l})}):o.jsx("div",{role:"progressbar","aria-valuetext":i.formatMessage({defaultMessage:"Loading voice modes",id:"voiceModeButton.loadingModes"}),"aria-busy":"true","aria-live":"assertive","aria-valuemin":0,"aria-valuemax":100,children:o.jsx(sA,{"aria-hidden":"true",className:"my-4 min-w-full"})})}),o.jsx(P.Modal,{conversationId:A.conversationId,disabledModeMetadata:n,isOpen:t,onClose:c})]})}P.Modal=function(e){const t=e.disabledModeMetadata?.buttons??[],s=we({buttons:t,conversationId:e.conversationId,modelId:gA,onClick:e.onClose}),n=o.jsx(he,{children:e.disabledModeMetadata?.description_markdown});return o.jsx(oe,{title:e.disabledModeMetadata?.title,description:n,isOpen:e.isOpen,onClose:e.onClose,type:"success",primaryButton:s.primary,secondaryButton:s.secondary})};P.Trigger=a.forwardRef(function(e,t){const s=I(n=>n.voiceMode);return o.jsxs(Vt,{ref:t,...e,children:[bs(s)??o.jsx(sA,{}),o.jsx(ht,{className:"icon-md text-token-text-tertiary"})]})});P.Item=function({conversationId:e,modelSlug:t,parentMessageId:s,voiceStatusMode:n,onShowModal:r}){const{disabled_mode_metadata:l,mode:i}=n,{toggleVoiceMode:c}=DA(),u=nA(e),m=a.useCallback(async()=>{l?r(l.disabled_message):c({serverThreadId:u,modelSlug:t,parentMessageId:s,isAdvancedMode:i==="advanced"&&!l,eventSource:"voice_mode_picker",retryWithStandard:!1,clientThreadId:e,gizmoId:z.getGizmoId(e)})},[e,l,i,t,r,s,u,c]);return o.jsx(st.Item,{onClick:m,children:o.jsxs("div",{children:[n.display_name,o.jsx("div",{className:"text-xs text-token-text-tertiary",children:n.description})]})})};function ks({conversationId:A}){const e=I(t=>t.voiceSessionId);return o.jsx("div",{className:"relative h-full",children:o.jsx(y.div,{className:"absolute hidden h-full max-w-[500px] overflow-y-hidden rounded-xl border-l border-l-token-sidebar-surface-secondary bg-token-main-surface-secondary pt-4 shadow-inner md:block",initial:{opacity:0,x:520,width:"0px"},animate:{opacity:1,x:0,width:"500px",left:"-520px"},exit:{opacity:0,x:520,width:"0px",left:"0px"},transition:{type:"tween"},children:o.jsx(N,{children:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex w-full items-center justify-center",children:o.jsx(vs,{conversationId:A})}),o.jsx("div",{className:"p-4 py-2 text-sm",children:o.jsx(D,{name:"Voice Session ID",text:e??"n/a"})}),o.jsxs("div",{className:"flex h-full w-full flex-col flex-nowrap gap-4",children:[o.jsx("div",{className:"px-4",children:o.jsxs("div",{className:"flex flex-col flex-nowrap gap-4",children:[o.jsx(Cs,{}),o.jsx(Ss,{})]})}),o.jsx(Es,{})]})]})})})})}function Cs(){const A=I(n=>n.server.messages.filter(r=>r.type===qt.Performance)),e=A[A.length-1],t=a.useCallback(n=>n>=1e3?`${(n/1e3).toFixed(2)}s`:`${n.toFixed(1)}ms`,[]);if(!e)return null;const s=[...e.payload.metrics].sort((n,r)=>n.name.localeCompare(r.name));return o.jsx(We,{title:"Performance",children:o.jsx("div",{className:"flex flex-col flex-nowrap gap-1",children:s.map(n=>o.jsx(D,{name:n.name,text:t(n.ms)},n.name))})})}function Es(){const A=I(e=>e.server.messages);return o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"px-4 py-2 text-lg font-semibold text-token-text-secondary",children:"Messages"}),o.jsx("div",{className:"grow overflow-hidden",children:o.jsx(Ao,{children:o.jsx(y.ul,{className:"pointer-events-none flex w-full flex-col gap-4 pb-24 pt-4",initial:"initial",animate:"animate",exit:"exit",variants:Ge,transition:{delayChildren:.25,staggerChildren:.05},children:A.map((e,t)=>o.jsx(ws,{index:t,message:e},t))})})})]})}function Ss(){const A=I(i=>i.server.connectionState),e=I(i=>i.dev.room),[t,s]=a.useState("Unknown"),n=e?.localParticipant,r=e?.numParticipants??"Unknown",l=e?.activeSpeakers??[];return a.useEffect(()=>{if(n){const i=c=>{s(c)};return n.on("connectionQualityChanged",i),()=>{n.off("connectionQualityChanged",i)}}},[n]),o.jsxs(We,{title:"Room",open:!1,children:[o.jsx(D,{name:"Connection Quality",text:String(t)}),o.jsx(D,{name:"Connection State",text:String(A)}),o.jsx(D,{name:"Participants",text:r}),o.jsx(D,{name:"Speakers",text:l.length}),o.jsx(Is,{})]})}function Is(){const A=I(m=>m.dev.room),[e,t]=a.useState(null),[s,n]=a.useState(null),[r,l]=a.useState(null),i=A?.getActiveDevice("audioinput"),c=A?.getActiveDevice("audiooutput"),u=A?.getActiveDevice("videoinput");return a.useEffect(()=>{async function m(){const d=await fA.getLocalDevices("audioinput"),f=await fA.getLocalDevices("audiooutput"),b=await fA.getLocalDevices("videoinput"),g=d.find(x=>x.deviceId===i),h=f.find(x=>x.deviceId===c),p=b.find(x=>x.deviceId===u);t(g?.label??"Unknown"),n(h?.label??"Unknown"),l(p?.label??null)}m()},[i,c,u]),o.jsxs(o.Fragment,{children:[o.jsx(Ms,{text:"Devices"}),r?o.jsx(D,{icon:xt,name:"Video Input",text:r}):null,o.jsx(D,{icon:bt,name:"Audio Input",text:e??"Unknown"}),o.jsx(D,{icon:vt,name:"Audio Output",text:s??"Unknown"})]})}function We({title:A,titleClassName:e,children:t,open:s}){const[n,r]=a.useState(s??!0);return o.jsxs("div",{children:[o.jsxs("h3",{className:oA("flex cursor-pointer items-center py-2 text-lg font-semibold text-token-text-secondary",e),onClick:()=>r(!n),children:[o.jsx("span",{children:A}),o.jsx("span",{className:"ml-2",children:n?o.jsx(ie,{className:"h-4 w-4"}):o.jsx(kt,{className:"h-4 w-4"})})]}),o.jsx(N,{initial:!1,children:n&&o.jsx(y.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{height:"auto",opacity:1},collapsed:{height:0,opacity:0}},transition:{duration:.3,ease:"easeInOut"},layout:!0,children:t},"content")})]})}function Ms({text:A}){return o.jsx("h4",{className:"py-2 text-sm font-semibold",children:A})}function D(A){return o.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-2",children:[o.jsx("span",{className:"opacity-85",children:A.icon?o.jsx(A.icon,{className:"h-[0.75rem] w-[0.75rem]"}):o.jsxs("span",{className:"text-sm",children:[A.name,":"]})}),A.content??o.jsx("span",{className:"line-clamp-1 rounded-lg bg-token-main-surface-tertiary p-0.5 px-1 font-mono text-xs",children:A.text})]})}function ws({index:A,message:e}){const[t,s]=a.useState(!1),n=O();let r=null;switch(e.source){case"remote":r=Et;break;case"local":r=Ct;break}return o.jsx(y.div,{className:"w-full border-t border-token-main-surface-tertiary p-4",variants:Ge,children:o.jsxs("div",{className:"flex w-full flex-col gap-2 rounded-lg bg-token-main-surface-secondary",children:[o.jsxs("div",{className:"font-mono text-[0.65rem] font-semibold text-token-text-secondary",children:[o.jsxs("div",{className:"flex w-full flex-row flex-nowrap items-center justify-between",children:[o.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[o.jsx(r,{className:"h-3 w-3 text-token-text-secondary"}),o.jsx("span",{children:` | ${A+1} | ${n.formatDate(e.timestamp,{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:2})}`})]}),o.jsx("div",{className:"flex flex-row flex-nowrap items-center gap-2",children:o.jsx(ne,{className:"rounded-full p-0.5",color:"ghost",size:"small",onClick:()=>s(l=>!l),children:o.jsx(ie,{className:`transform transition-transform ${t?"rotate-180":""}`})})})]}),o.jsx("div",{className:"mt-1 text-xs font-bold",children:e.type})]}),o.jsx(N,{children:t?o.jsx(y.pre,{initial:{opacity:0,transform:"blur(4px)"},animate:{opacity:1,transform:"blur(0px)"},exit:{opacity:0,transform:"blur(4px)"},className:"overflow-x-auto rounded-md bg-token-main-surface-tertiary p-2 text-xs text-token-text-secondary",children:JSON.stringify(e.payload,null,2)}):null})]})})}const Ge={hidden:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100}};function ys({children:A}){const{isVideoEnabled:e}=QA(),{isScreenshareEnabled:t}=RA(),s=e||t;return o.jsx(N,{mode:"wait",children:s?o.jsx("div",{className:"flex h-full w-full flex-nowrap items-center",children:e?o.jsx(Bs,{}):o.jsx(js,{})}):o.jsx(y.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:A},"children")})}function Bs(){const{isVideoEnabled:A,isStartingVideo:e,toggleVideo:t}=QA(),n=aA([J.Source.Camera]).find(l=>l.participant.isLocal),r=A&&!e&&n;return a.useEffect(()=>{const l=n?.publication?.track;if(l){const i=()=>{t("Browser Video Controls")};return l.on("ended",i),()=>{l.off("ended",i)}}},[n,t]),o.jsx(N,{children:r&&o.jsx(Le,{children:o.jsxs("div",{className:"aspect-w-16 aspect-h-9 group relative max-h-[95%] w-fit max-w-[60%] overflow-hidden rounded-3xl shadow-md",children:[o.jsx("div",{className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-90",children:o.jsx(NA,{onClick:()=>t("StopButton"),className:"bg-gray-900 bg-opacity-20 backdrop-blur-lg hover:bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-20 dark:backdrop-blur-lg dark:hover:bg-opacity-30"})}),o.jsx(Ce,{className:"h-full w-full object-contain",trackRef:n})]})},"camera-renderer")})}function js(){const{isScreenshareEnabled:A,isScreenshareStarting:e,toggleScreenShare:t}=RA(),n=aA([J.Source.ScreenShare]).find(l=>l.participant.isLocal),r=A&&!e&&n;return a.useEffect(()=>{const l=n?.publication?.track;if(l){const i=()=>{t("Browser ScreenShare Controls")};return l.on("ended",i),()=>{l.off("ended",i)}}},[n,t]),o.jsx(N,{children:r&&o.jsx(Le,{children:o.jsxs("div",{className:"aspect-w-16 aspect-h-9 group relative max-h-[95%] w-fit max-w-[60%] overflow-hidden rounded-3xl shadow-md",children:[o.jsx("div",{className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-90",children:o.jsx(NA,{onClick:()=>t("StopButton"),className:"bg-gray-900 bg-opacity-20 backdrop-blur-lg hover:bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-20 dark:backdrop-blur-lg dark:hover:bg-opacity-30"})}),o.jsx(Ce,{className:"h-full w-full object-contain",trackRef:n})]})},"screenshare-renderer")})}function Le({children:A,key:e}){return o.jsx(y.div,{className:"flex h-full w-full flex-col items-center justify-center gap-2 bg-token-main-surface-primary",initial:{opacity:0,transform:"blur(12px)",scale:.75},animate:{opacity:1,transform:"blur(0px)",scale:1},exit:{opacity:0,transform:"blur(12px)",scale:.75},transition:{duration:.2},children:A},e)}const HA=A=>{const[e,t]=a.useState({audioData:[0,0,0,0],cumulativeAudioData:[0,0,0,0]}),s=a.useRef([0,0,0,0]),n=a.useRef(void 0),r=a.useRef(performance.now()),{bandMagnitudes:l,cumulativeMagnitude:i}=eo(A,{bands:3,bins:1,gainMultipliers:[10,1,1]});s.current=[...l,i].flat();const c=a.useCallback(()=>{const u=performance.now(),m=(u-r.current)/1e3;r.current=u;const d=s.current,{audioData:f,cumulativeAudioData:b}=e,g=to({deltaTimeS:m,audioDataRaw:d,prevAudioData:f,prevCumulativeAudioData:b});t(g)},[e]);return a.useEffect(()=>(n.current||(n.current=window.setInterval(c,xe)),()=>{clearInterval(n.current),n.current=void 0}),[c]),e};function $A({className:A}){return o.jsx(Zs,{className:A})}const Vs=1.55,Qs=1.4,Rs="voice-wav",Ts="shout",Ds="User",Ns={bands:4,loPass:0,hiPass:400},Ae=[300,300];function Os(){const{resolvedTheme:A}=it(),e=A==="dark",t=I(g=>g.voiceMode==="advanced"),s=aA([J.Source.Microphone]),n=s.find(g=>g.publication.trackName===Rs),r=s.find(g=>g.publication.trackName===Ts);let l=GA(r?.publication.audioTrack,Ns);l.length===0&&(l=[0,0,0,0]),l.map(g=>g*Qs);let i=HA(r?.publication.audioTrack),c=HA(n?.publication.audioTrack);const u=i.audioData.map((g,h)=>{const p=c.audioData[h];return g>0&&p>0?(g+p)/2:g>0?g:p}),m=i.cumulativeAudioData.map((g,h)=>{const p=c.cumulativeAudioData[h];return g>0&&p>0?(g+p)/2:g>0?g:p}),d=I(g=>g.server.remoteState),f=s.find(g=>g.participant.identity===Ds),b=(GA(f,{bands:1,loPass:0,hiPass:400})[0]??0)*Vs;return{remoteState:d,userVolume:b,isAdvanced:t,avgMag:u,cumulativeAudio:m,isDarkMode:e,standardBloopVolumes:l}}function Zs({className:A}){const{remoteState:e,userVolume:t,isAdvanced:s,avgMag:n,cumulativeAudio:r,isDarkMode:l,standardBloopVolumes:i}=Os(),[c,u]=a.useState(Ae),{canvasSizeRef:m,handleCanvasSizeUpdate:d}=Qt(Ae),f=a.useRef(void 0),b=a.useCallback(j=>{u([j.width,j.height])},[]),g=a.useRef([0,0,0,0]);a.useEffect(()=>{e===R.Connecting&&(g.current=[0,0,0,0])},[e]);const h=a.useRef(performance.now());a.useEffect(()=>{const j=performance.now();e===R.Speaking&&j-h.current>50&&(h.current=j,g.current=g.current.map((AA,eA)=>AA+n[eA]))},[e,n]);const[p,x]=uA(dA(R.Listening,e)),[M,w]=uA(dA(R.Speaking,e)),[k,C]=uA(dA(R.Thinking,e)),[E,S]=uA(dA(R.Halted,e)),[B,Z]=a.useState(performance.now()/1e3);a.useEffect(()=>{const j=setInterval(()=>{Z(performance.now()/1e3)},xe);return()=>clearInterval(j)},[]);const T=a.useMemo(()=>performance.now()/1e3,[]),[iA,X]=a.useState(1e5),H=a.useRef(e);a.useEffect(()=>{e===R.Connecting?X(1e5):H.current===R.Connecting&&X(B),H.current=e},[e,B]);const L=oo(s),F=s?n:i,$=p===1||M===1,rA=no({viewport:c,canvasSize:m.current,shouldMeasurePerf:$,source:"VoiceMode"}),hA=so({shouldCalibrate:$,viewport:c,initialScale:1});return f.current={time:B-T,micLevel:t,stateListen:p,listenTimestamp:Math.max(x-T,0),stateThink:k,thinkTimestamp:Math.max(C-T,0),stateSpeak:M,speakTimestamp:Math.max(w-T,0),readyTimestamp:iA-T,stateHalt:E,haltTimestamp:Math.max(S-T,0),touchDownTimestamp:0,touchUpTimestamp:0,stateFailedToConnect:0,failedToConnectTimestamp:0,avgMag:F,cumulativeAudio:r??g.current,isNewBloop:!0,isAdvancedBloop:s,bloopColorMain:Array.from(L.bloopColorMain),bloopColorLow:Array.from(L.bloopColorLow),bloopColorMid:Array.from(L.bloopColorMid),bloopColorHigh:Array.from(L.bloopColorHigh),isDarkMode:l,screenScaleFactor:window.devicePixelRatio,viewport:c,silenceAmount:0,silenceTimestamp:0,fadeBloopWhileListening:!1},o.jsx(ao,{className:oA("flex items-center justify-center",A),variablesRef:f,onViewportUpdate:b,textureImage:io,textureName:"uTextureNoise",onGlAvailable:rA,onCanvasSizeUpdate:d,scale:hA})}function Fs(){const A=Rt(Tt()?FA.hasStartedElectronVoiceModeStraw:FA.hasStartedWebVoiceModeStraw),e=ce(),t=!A.isLoading&&A.eligible&&e,[s,n]=a.useState(!1),[r,l]=a.useState(!1),[i,c]=a.useState(""),[u,m]=a.useState(!1),d=a.useCallback(()=>{s?(c(le),m(!0),V.strawVoicePickerSnowflake.click()):c("")},[s]);return{shouldShowVoicePickerSnowflake:t,showSnowflake:s,setShowSnowflake:n,enableFadeInPickerIcon:r,setEnableFadeInPickerIcon:l,initialVoiceName:i,hasShownSnowflake:u,handleStrawVoiceEntry:d}}const Ys=({conversationId:A})=>{const e=aA(),[t,s]=a.useState(!1),[n,r]=a.useState(!1),{voiceName:l}=VA(),{shouldShowVoicePickerSnowflake:i,showSnowflake:c,setShowSnowflake:u,enableFadeInPickerIcon:m,setEnableFadeInPickerIcon:d,initialVoiceName:f,hasShownSnowflake:b,handleStrawVoiceEntry:g}=Fs(),h=I(k=>k.server.remoteState===R.Listening||k.server.remoteState===R.ListeningIntently);a.useEffect(()=>{if(i&&h&&!b){const k=setTimeout(()=>{u(!0),d(!1),V.strawVoicePickerSnowflake.success()},YA),C=setTimeout(()=>{u(!1),d(!0)},YA+Dt);return()=>{clearTimeout(k),clearTimeout(C)}}else d(!1),u(!1)},[b,h,d,u,i]);const p=a.useCallback(()=>{e&&e.length>0&&e.forEach(k=>{const{publication:C}=k;C.audioTrack instanceof yA?(r(C.audioTrack.isMuted),C.audioTrack.mute()):C.audioTrack instanceof wA&&C.audioTrack.setMuted(!0)})},[e]),x=a.useCallback(()=>{e&&e.length>0&&e.forEach(k=>{const{publication:C}=k;C.audioTrack instanceof yA?n||C.audioTrack.unmute():C.audioTrack instanceof wA&&C.audioTrack.setMuted(!1)})},[e,n]),M=()=>{V.voiceSelectionShown.click({voice:l}),g(),p(),s(!0)},w=()=>{x(),s(!1)};return o.jsxs("div",{className:"relative h-[40px] w-[40px]",children:[o.jsx(N,{mode:"wait",children:c?o.jsx(y.div,{initial:{opacity:0,scale:.5,rotate:0},animate:{opacity:1,scale:1,rotate:360},exit:{opacity:0,scale:.5},transition:{opacity:{duration:.5},scale:{duration:.3,ease:"easeInOut"},rotate:{duration:24,ease:"linear"}},className:"absolute inset-0 flex items-center justify-center",children:o.jsx(K,{onClick:M,icon:St,iconColor:"text-token-text-secondary",className:"h-[40px] w-[40px] bg-transparent hover:bg-black/10 active:bg-black/20 dark:bg-transparent dark:hover:bg-white/5 dark:active:bg-white/10",iconSize:"icon-lg"})},"snowflake"):o.jsx(y.div,{initial:m?{opacity:0,scale:.5}:{},animate:m?{opacity:1,scale:1}:{},exit:{opacity:0,scale:.5},transition:{opacity:{duration:.5},scale:{duration:.3,ease:"easeInOut"}},className:"absolute inset-0 flex items-center justify-center",children:o.jsx(K,{onClick:M,icon:It,iconColor:"text-token-text-secondary",className:"h-[40px] w-[40px] bg-transparent hover:bg-black/10 active:bg-black/20 dark:bg-transparent dark:hover:bg-white/5 dark:active:bg-white/10",iconSize:"icon-md"})},"voicePickerIcon")}),t&&o.jsx(ro,{conversationId:A,onClose:w,initialVoiceName:f})]})};class Ws extends Worker{constructor(e,t){const s=String(e);super(s.includes("://")&&!s.startsWith(location.origin)?URL.createObjectURL(new Blob([`import("${s}")`],{type:"text/javascript"})):e,t)}}function Gs(A={}){const[e,t]=a.useState(!1),[s,n]=a.useState(!1),[r,l]=a.useState(!1);let i=zt().microphoneTrack;const[c,u]=a.useState();A.trackRef&&(i=A.trackRef.publication);const m=a.useCallback(async d=>{if(d){const{KrispNoiseFilter:f,isKrispNoiseFilterSupported:b}=await rt(async()=>{const{KrispNoiseFilter:g,isKrispNoiseFilterSupported:h}=await import("./cdeb6wdntgjfxjgj.js");return{KrispNoiseFilter:g,isKrispNoiseFilterSupported:h}},[]);if(!b()){console.warn("Krisp noise filter is not supported in this browser");return}c||u(f(A.filterOptions))}t(f=>(f!==d&&n(!0),d))},[]);return a.useEffect(()=>{var d;if(i&&i.track instanceof yA&&c){const f=i.track.getProcessor();f&&f.name==="livekit-noise-filter"?(n(!0),f.setEnabled(e).finally(()=>{n(!1),l(e)})):!f&&e&&(n(!0),(d=i?.track)==null||d.setProcessor(c).then(()=>c.setEnabled(e)).then(()=>{l(!0)}).catch(b=>{l(!1),console.error(b)}).finally(()=>{n(!1)}))}},[e,i,c]),{setNoiseFilterEnabled:m,isNoiseFilterEnabled:r,isNoiseFilterPending:s,processor:c}}const Ls=a.memo(function(){const e=ct("989226566").value,{setNoiseFilterEnabled:t}=Gs();return a.useEffect(()=>{t(e)},[e,t]),null}),Js=new Ws(new URL("https://cdn.oaistatic.com/assets/livekit-client.e2ee.worker-DK0iMXIf.js",import.meta.url),{type:"module"}),Ps=a.memo(function({children:e}){const t=a.useRef({keyProvider:new Kt}).current,[s,n]=a.useState(!1),{token:r,url:l,e2eeKey:i}=I(d=>d.credentials),c=Go(),u=I(d=>d.isVoiceModeActive),m=I(d=>d.audioInputDevice?.deviceId);return a.useEffect(()=>{const d=r&&l&&i;!s&&d?t.keyProvider.setKey(i).then(()=>{n(!0)}):s&&!d&&n(!1)},[r,l,i,s,t]),u?o.jsxs(go,{...c,connect:!0,token:r??void 0,serverUrl:l??void 0,audio:{deviceId:{ideal:m,exact:m},noiseSuppression:!0,echoCancellation:!0},options:{e2ee:{keyProvider:t.keyProvider,worker:Js}},children:[e,s&&r&&l&&o.jsx($t,{}),s&&r&&l&&o.jsx(Wo,{}),s&&r&&l&&o.jsx(Ls,{})]}):null});function ua({conversationId:A,currentModelId:e,isActiveWindow:t}){const{voiceName:s}=VA(),n=s===le,r=ce(),[l,i]=a.useState(!1),c=I(p=>p.isVoiceModeActive),u=I(p=>p.server.voiceConnectionQuality),m=Nt(),d=I(p=>p.screenshare!=null),f=I(p=>p.video!=null),b=O(),g=Se({conversationId:A});lt(g),a.useEffect(()=>{if(!t)return;const p=new _o;return c?p.enable():p.disable(),()=>{p.disable()}},[c,t]);const h=a.useMemo(()=>({name:r?"straw":"normal",themeActive:n?"yes":"no"}),[r,n]);return t&&o.jsxs(Ps,{children:[o.jsx(N,{children:o.jsx(co,{value:h,children:c?o.jsx(y.div,{className:"fixed left-0 top-0 z-50 flex h-full w-full flex-col bg-token-main-surface-primary",initial:"hidden",animate:"visible",exit:"hidden",variants:mA,children:o.jsxs(y.div,{className:"relative h-full w-full",variants:mA,children:[o.jsxs(y.div,{variants:mA,className:"flex h-full w-full flex-col justify-between gap-6",children:[o.jsxs(y.div,{className:"relative mt-6 flex w-full justify-center",children:[o.jsx("div",{className:"flex w-full items-center justify-center",children:(d||f)&&o.jsx($A,{className:"h-16 w-16"})}),o.jsx("div",{className:"mr-4",children:o.jsx(Ys,{conversationId:A})})]}),o.jsxs("div",{className:"flex h-full min-h-0 items-center justify-center",children:[o.jsx(ys,{children:o.jsx($A,{className:"h-max min-h-52 w-max min-w-52"})}),o.jsx(N,{children:l?o.jsx(ks,{conversationId:A}):null})]}),o.jsx(y.div,{className:"mb-6 flex justify-center",children:o.jsx(An,{conversationId:A,currentModelId:e})})]}),o.jsx(y.div,{className:"absolute bottom-0 right-0 flex w-auto items-center justify-end p-4",variants:mA,children:m?o.jsx(Ot,{onClick:()=>i(p=>!p),icon:Mt}):null})]})}):null})}),u===pe.Poor&&o.jsx("div",{className:"absolute left-1/2 top-6 z-50 -translate-x-1/2 transform",children:o.jsx("div",{className:"inline-flex flex-col items-center rounded-full border border-token-border-light bg-token-main-surface-primary px-6 py-3",children:o.jsx("span",{className:"text-token-text-secondary",children:b.formatMessage({id:"YE2Eng",defaultMessage:"Poor connection"})})})})]})}const mA={hidden:{opacity:0,transform:"blur(4px)"},visible:{transform:"blur(0px)",opacity:1},exit:{opacity:0,transform:"blur(4px)"}};export{ua as VoiceModeLayout};
//# sourceMappingURL=bujegv5eeiyuh8qf.js.map
