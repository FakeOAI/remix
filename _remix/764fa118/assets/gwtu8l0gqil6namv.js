const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ne8l50zu7982kn81.js","assets/bzsxfft2e75s6cf0.js","assets/b0e06n5epk14vt92.js","assets/root-oi643vj1.css","assets/dwphlg8irwtl8o08.js","assets/conversation-small-lkohtmkm.css","assets/hkdrdrg6srigcrd5.js","assets/s6gpycspuh46ki90.js","assets/facluyjkg2qnyaow.js"])))=>i.map(i=>d[i]);
import{V as w,W as J,r as f,ck as va,m as e,dt as ae,cp as K,bi as n,A as es,a0 as B,cl as Ne,B as Ye,dF as zn,dD as zt,cc as cs,cd as ds,aO as ve,bB as yt,bo as Z,U as V,br as qs,D as he,dQ as $n,a9 as xe,c7 as jt,aJ as Ve,P as j,d as S,au as ie,e7 as Y,n as Qs,$ as ee,bN as Ms,bM as Ws,c as Sa,bG as Zs,ae as ms,ba as fe,h_ as qn,f2 as ka,bQ as Cs,dw as Pe,bh as Hs,eU as wa,fY as Qn,bK as Zn,gG as Ct,ad as Pa,fe as Jn,eY as us,eo as le,af as Xn,bc as eo,bq as Js,bO as so,u as vt,h$ as to,g6 as ys,g7 as $t,i0 as Ta,ce as As,cf as Ns,dB as pt,dC as ft,i1 as ao,c9 as Ue,ax as no,F as Xs,cQ as oo,bs as io,bt as Gs,q as Oe,ds as St,dr as gs,dq as Aa,du as Ks,i2 as qt,i3 as lo,dG as ro,b8 as co,b9 as uo}from"./bzsxfft2e75s6cf0.js";import{bj as kt,U as ue,bU as go,aM as Vs,bY as rs,az as Na,er as ht,E as Ce,D as Ys,mO as mo,mP as po,mQ as fo,eV as zs,mR as ho,ct as wt,mS as xt,mT as et,mU as ks,bT as Mt,mV as Ea,mW as re,mX as _a,mY as st,mZ as tt,aP as vs,cx as R,m_ as Pt,dM as Ia,A as La,m$ as xo,n0 as Mo,n1 as bo,hI as pe,cc as yo,hJ as jo,hK as Qt,hL as Co,hM as vo,hO as So,bV as ko,hP as wo,hQ as Zt,n2 as Po,n3 as Da,n4 as Fa,n5 as To,n6 as Ao,n7 as Ba,e6 as at,n8 as No,il as Ua,aU as Tt,n9 as M,cl as Oa,na as ye,nb as Eo,h as Es,eI as At,c7 as _o,c9 as Io,dN as ws,cv as se,nc as Lo,nd as Do,ne as dt,I as Ra,cb as Q,nf as Fo,ng as Bo,fa as Uo,f9 as Wa,hq as Oo,nh as Ro,jk as Wo,k7 as Go,k8 as Ho,jm as Ko,is as Vo,iu as Yo,ni as zo,nj as $o,cg as qo,nk as Ga,aR as Ss,cO as Qo,bZ as js,nl as Zo,dT as Jo,lN as Ha,nm as Xo,d3 as ei,d4 as si,cu as Re,cw as Le,nn as ti,hS as Jt,v as ai,no as ni,np as oi}from"./dwphlg8irwtl8o08.js";import{N as ii,t as li,bX as Ka,bh as ri,bY as ci,aD as Va,m as Nt,bZ as Ya,ar as di,at as ui,aT as gi,bw as mi,b_ as pi,T as fi,U as hi,a1 as xi,Z as za,b$ as Mi,p as $a,n as qa,aq as bt,an as bi,ao as yi,am as ji,c0 as Ci,G as Qa,bE as vi,F as Za,d as Si,aR as ki,bn as wi,h as Pi,L as Ti,aV as Ai,aU as Ni,ak as Ei,c1 as _i,D as Ii,aH as Li,b6 as Di,b8 as Fi,c2 as Bi,z as Ui}from"./b0e06n5epk14vt92.js";import{R as Oi,I as Ri}from"./kkam33jk6gg9czub.js";import{m as Et}from"./hkdrdrg6srigcrd5.js";import{S as te,B as Wi}from"./lf8ann18sefxbx3c.js";import{P as ce,p as v,u as nt,m as A}from"./emoxvfjuqtwfi7a1.js";import{a as Ja,c as _t,b as Gi,u as Hi,d as Xa}from"./lmp3gimyr3u26kc4.js";import{c as Ki}from"./iej0cupg2dqkmejt.js";import{S as Xt}from"./klhg459p9p0x4831.js";import{H as en,M as Vi}from"./g4tl5lt9yqf20m4s.js";import{j as Yi}from"./jk8w36bsokizpx57.js";import{M as zi,a as $i,R as qi}from"./gmu36nggzzonv3rw.js";import"./c4bxzbp1808foto4.js";function Qi(s){return es({queryKey:["workspace",s,"owner_count"],queryFn:async()=>await B.getWorkspaceOwnerCount(s)})}function Zi({workspace:s}){const t=w(),a=J(),o=kt(),[i,l]=f.useState(""),r=s.isOwnerOfAccount(),d=Qi(s.id),{data:c}=va(),[g,m]=f.useState(!1),[u,p]=f.useState(!1);if(!c)return null;const b=c.accountItems.find(E=>E.id!=s.id),y=()=>{ue.setLeaveWorkspaceData(null)},k=async()=>{if(o!=null){p(!0);try{await B.removeWorkspaceUser(s.id,o.id),m(!0)}catch{a.danger(t.formatMessage({id:"leaveWorkspaceModal.leaveFailed",defaultMessage:"Failed to leave workspace"}))}p(!1)}};if(g)return e.jsx(el,{workspace:s,fallbackWorkspace:b,onClose:y});if(!d.data)return e.jsx(Ji,{onClose:y});const N=d.data.total_count,P=d.data.owner_count;if(r&&P<2)return e.jsx(Xi,{workspace:s,onClose:y});const L=e.jsx(ae.Button,{onClick:()=>{ue.setLeaveWorkspaceData(null)},title:t.formatMessage({id:"leaveWorkspaceModal.cancel",defaultMessage:"Cancel"})}),D=e.jsx(ae.Button,{color:"danger",disabled:o==null||u||i==""||i.toLowerCase()!=o?.email?.toLowerCase(),title:t.formatMessage({id:"leaveWorkspaceModal.leaveButton",defaultMessage:"Leave workspace"}),onClick:()=>{k()}}),_=t.formatMessage({id:"leaveWorkspaceModal.leaveButton",defaultMessage:"Leave workspace"});return e.jsx(K,{isOpen:!0,onClose:y,showCloseButton:!0,type:"danger",title:t.formatMessage({id:"leaveWorkspaceModal.leaveWorkspace",defaultMessage:"Leave the {workspaceName} workspace"},{workspaceName:s.data.name}),primaryButton:D,secondaryButton:L,children:e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-row gap-3",children:[e.jsx(go,{size:"large",src:s.data.profilePictureUrl}),e.jsxs("div",{className:"flex flex-col justify-around",children:[e.jsx("div",{className:"text-base font-semibold",children:s.data.name}),e.jsx("div",{className:"text-sm text-token-text-tertiary",children:e.jsx(n,{id:"leaveWorkspaceModal.memberCount",defaultMessage:`{memberCount, plural,
                  one {1 member}
                  other {{memberCount} members}
                }`,values:{memberCount:N}})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base font-semibold",children:e.jsx(n,{id:"leaveWorkspaceModal.leaveAreYouSure",defaultMessage:"Are you sure?"})}),e.jsxs("ul",{className:"ml-3 list-disc text-sm text-token-text-secondary",children:[e.jsx("li",{className:"mb-2",children:e.jsx(n,{id:"leaveWorkspaceModal.leaveWorkspaceWarning1",defaultMessage:"This will remove you from your workspace and you won't be able to access all data, including profile, settings, and chat history."})}),e.jsx("li",{children:e.jsx(n,{id:"leaveWorkspaceModal.leaveWorkspaceWarning2",defaultMessage:"You will lose access to all channels and messages in this workspace."})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base",children:_}),e.jsx(Vs,{ariaLabel:_,name:"typeEmailConfirm",value:i,onChange:E=>{l(E.target.value)}})]})]})})}function Ji({onClose:s}){return e.jsx(K,{isOpen:!0,onClose:s,showCloseButton:!0,type:"warning",children:e.jsx("div",{className:"flex flex-row justify-center",children:e.jsx(Ne,{})})})}function Xi({workspace:s,onClose:t}){const a=w(),o=e.jsx(ae.Button,{onClick:()=>{ue.setLeaveWorkspaceData(null)},title:a.formatMessage({id:"leaveWorkspaceModal.ok",defaultMessage:"OK"})});return e.jsx(K,{isOpen:!0,onClose:t,showCloseButton:!0,type:"danger",title:a.formatMessage({id:"leaveWorkspaceModal.cantLeaveWorkspace",defaultMessage:"Couldn't leave the {workspaceName} workspace"},{workspaceName:s.data.name}),secondaryButton:o,children:e.jsx(n,{id:"leaveWorkspaceModal.lastOwnerWarning",defaultMessage:"Because you're the only owner in the {workspaceName} workspace, assign the owner role to another member before leaving.",values:{workspaceName:s.data.name}})})}function el({workspace:s,fallbackWorkspace:t,onClose:a}){const o=Ye(),i=w(),l=J(),r=rs(m=>m.currentWorkspace),d=Na(),c=()=>{if(t!=null&&r)if(ue.setLeaveWorkspaceData(null),r.id==s.id){const{willRedirect:m}=zn(o,t.id,d,i,l);m||zt()}else o.invalidateQueries({queryKey:["account-status"]});else ue.setLeaveWorkspaceData(null),cs.deleteCookie(ds.Workspace),cs.deleteCookie(ds.WorkspaceResidencyRegion),zt();a()},g=t!=null?e.jsx(ae.Button,{color:"primary",onClick:c,title:i.formatMessage({id:"leaveWorkspaceModal.done",defaultMessage:"Done"})}):e.jsx(ae.Button,{color:"primary",onClick:c,title:i.formatMessage({id:"leaveWorkspaceModal.startPersonalAccount",defaultMessage:"Start using ChatGPT for free"})});return e.jsx(K,{isOpen:!0,onClose:c,primaryButton:g,type:"success",title:i.formatMessage({id:"leaveWorkspaceModal.leftWorkspaceTitle",defaultMessage:"Successfully left the {workspaceName} workspace"},{workspaceName:s.data.name}),children:e.jsx("div",{className:"flex flex-col gap-5",children:e.jsx("p",{children:t!=null?e.jsx(n,{id:"leaveWorkspaceModal.leftWorkspaceDescription",defaultMessage:"You have successfully left the {workspaceName} workspace.",values:{workspaceName:s.data.name}}):e.jsx(n,{id:"leaveWorkspaceModal.leftWorkspaceDescriptionNoOtherWorkspaces",defaultMessage:"You have successfully left the {workspaceName} workspace. This will create your personal workspace automatically.",values:{workspaceName:s.data.name}})})})})}function sl(){const s=w(),t=ht(o=>o.activeModals.has(Ce.AgeVerificationInterstitial));return e.jsxs(K,{type:"success",isOpen:t,onClose:yt,title:s.formatMessage(Ae.title),children:[e.jsxs("div",{className:"text-token-text-secondary",children:[e.jsx("p",{className:"mb-4",children:e.jsx(n,{...Ae.description0})}),e.jsx(ea,{children:e.jsx(n,{...Ae.subtitle1})}),e.jsxs("ol",{className:"mb-4 ml-4 list-decimal",children:[e.jsx("li",{className:"",children:e.jsx(n,{...Ae.description1Bullet1})}),e.jsx("li",{children:e.jsx(n,{...Ae.description1Bullet2})})]}),e.jsx("p",{className:"mb-4 font-semibold",children:e.jsx(n,{...Ae.description1a})}),e.jsx("p",{className:"mb-4",children:e.jsx(n,{...Ae.description1b})}),e.jsx(ea,{children:e.jsx(n,{...Ae.subtitle2})}),e.jsx("p",{className:"mb-4",children:e.jsx(n,{...Ae.description2,values:{learnMoreLink:o=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:o})}})})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx(Z,{color:"primary",as:"link",to:"https://platform.openai.com/verify-age",openNewTab:!0,onClick:()=>ue.closeModal(Ce.AgeVerificationInterstitial),icon:ii,children:e.jsx(n,{...Ae.redirect})})})]})}const ea=ve.h3`text-token-text-primary text-base mb-1`,Ae=V({title:{id:"AgeVerificationInterstitial.title",defaultMessage:"Please verify your age"},redirect:{id:"AgeVerificationInterstitial.redirect",defaultMessage:"Sign in on platform.openai.com"},description0:{id:"AgeVerificationInterstitial.description0",defaultMessage:"To continue using ChatGPT, you need to complete a brief age verification check"},subtitle1:{id:"AgeVerificationInterstitial.title1",defaultMessage:"What will happen next?"},description1Bullet1:{id:"AgeVerificationInterstitial.description1",defaultMessage:"You will be redirected to platform.openai.com where you will need to sign in."},description1Bullet2:{id:"AgeVerificationInterstitial.description2",defaultMessage:"You will then be redirected to Yoti, our age verification provider, to verify your age."},description1a:{id:"AgeVerificationInterstitial.description1a",defaultMessage:"If you are between the ages of 13 and 17, your parent or guardian must complete the age verification check on your behalf."},description1b:{id:"AgeVerificationInterstitial.description1b",defaultMessage:"The process is quick and secure."},subtitle2:{id:"AgeVerificationInterstitial.title2",defaultMessage:"Why do I need to do this?"},description2:{id:"AgeVerificationInterstitial.description2-v3",defaultMessage:"We are required to verify that our users in Italy are old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."}});function tl(){return Ys(Ce.CookieManagement)?e.jsx(al,{onClose:()=>{ue.closeModal(Ce.CookieManagement)}}):null}function al({onClose:s}){const t=w(),a=J(),{isUnauthenticated:o}=qs(),{data:i}=mo(),l=i?.serverPrimedAllowBrowserStorageValue??!1,r=i?.isStorageComplianceEnabled??!1,d=po({serverPrimedAllowBrowserStorageValue:l,enabled:r&&!o}),[c,g]=f.useState(l),m=o?c:d,u=h=>{cs.setCookie(ds.AllowNonessential,h,{maxAge:ho,domain:$n}),o?g(h):p.mutateAsync({analytics_cookies_accepted:h},{onSuccess(){a.success(t.formatMessage(be.updateSuccess))},onError(){a.danger(t.formatMessage(be.updateFailure))}})};f.useEffect(()=>{if(o){const h=cs.getCookie(ds.AllowNonessential)??l;g(h)}},[o,l]),f.useEffect(()=>{he.addAction("privacy_policy.show_manage_cookies_modal")},[]);const p=fo();return e.jsx(K,{type:"success",isOpen:!0,onClose:s,title:t.formatMessage(be.title),showCloseButton:!0,children:e.jsxs("div",{className:"text-sm text-token-text-secondary",children:[e.jsx(n,{...be.description,values:{cookiePolicy:h=>e.jsx("a",{className:"underline",href:"https://openai.com/policies/privacy-policy",children:h})}}),e.jsxs(sa,{children:[e.jsxs(ta,{children:[e.jsx(aa,{children:t.formatMessage(be.preference1title)}),e.jsx(na,{children:t.formatMessage(be.preference1desc)})]}),e.jsx(zs,{onChange:yt,enabled:!0,disabled:!0,label:t.formatMessage(be.preference1toggle)})]}),e.jsxs(sa,{children:[e.jsxs(ta,{children:[e.jsx(aa,{children:t.formatMessage(be.preference2title)}),e.jsx(na,{children:t.formatMessage(be.preference2desc)})]}),e.jsx(zs,{onChange:u,enabled:!!m,label:t.formatMessage(be.preference2toggle)})]}),e.jsxs("div",{className:"flex justify-end gap-3 border-t border-black/10 pt-4 dark:border-white/10",children:[e.jsx(Z,{color:"secondary",onClick:()=>u(!1),children:e.jsx(n,{...be.reject})}),e.jsx(Z,{color:"secondary",onClick:()=>u(!0),children:e.jsx(n,{...be.accept})})]})]})})}const sa=ve.div`flex gap-4 border-t last:border-b border-black/10 dark:border-white/10 py-4 mt-4 text-token-text-secondary`,ta=ve.div`flex gap-2 flex-col `,aa=ve.p`font-semibold text-sm text-token-text-primary`,na=ve.p`text-xs`,be=V({title:{id:"ManageCookiesModal.title",defaultMessage:"Manage cookies"},description:{id:"ManageCookiesModal.description",defaultMessage:"OpenAI uses cookies to improve your experience and analyze site traffic. For more information, read our <cookiePolicy>cookie policy</cookiePolicy>."},preference1title:{id:"ManageCookiesModal.preference1title",defaultMessage:"Essential"},preference1desc:{id:"ManageCookiesModal.preference1desc.0",defaultMessage:"These cookies are required to operate our Services. For example, they allow us to authenticate users or enable specific features within the Services, including for security purposes."},preference1toggle:{id:"ManageCookiesModal.preference1toggle",defaultMessage:"Allow essential cookies"},preference2title:{id:"ManageCookiesModal.preference2title",defaultMessage:"Analytics"},preference2desc:{id:"ManageCookiesModal.preference2desc.0",defaultMessage:"These cookies help us analyze and understand how our Services perform and are used, such as the number of users, how they interact with our Services, and time spent using the Services."},preference2toggle:{id:"ManageCookiesModal.preference2toggle",defaultMessage:"Allow analytics cookies"},reject:{id:"ManageCookiesModal.reject",defaultMessage:"Reject all"},accept:{id:"ManageCookiesModal.accept",defaultMessage:"Accept all"},updateSuccess:{id:"ManageCookiesModal.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"ManageCookiesModal.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}});function It(){const s=xe(),{layer:t}=jt("468168202");return{isSplitBetweenPersonalAndBusinessEnabled:t.get("is_split_between_personal_and_business_enabled",!1),isModalFullscreen:t.get("is_modal_fullscreen",!1),isTeamEnabled:t.get("is_team_enabled",!0)||s?.isTeam(),isV2ToggleLabelsEnabled:t.get("is_v2_toggle_labels_enabled",!1)}}function nl({ariaLabel:s,className:t,leftItem:a,onChange:o,rightItem:i,value:l}){const r=w(),d=l===a.value;return e.jsx(Oi,{type:"single","aria-label":r.formatMessage(s),onClick:()=>{o(d?i.value:a.value)},value:l,className:Ve("cursor-pointer select-none rounded-full border border-solid border-token-border-light bg-token-main-surface-tertiary p-0.5",t),children:e.jsxs("div",{className:"relative grid grid-cols-2",children:[e.jsx(oa,{...a,isSelected:l===a.value}),e.jsx(oa,{...i,isSelected:l===i.value})]})})}function oa({ariaLabel:s,isSelected:t,label:a,value:o}){const i=w();return e.jsxs("div",{className:"relative z-10 px-3 py-1.5 text-center text-sm font-semibold",children:[e.jsx(Ri,{"aria-label":i.formatMessage(s),className:Ve({"text-token-text-primary":t,"text-token-text-tertiary":!t}),value:o,children:e.jsx(n,{...a})}),t?e.jsx(Et.div,{transition:{duration:.05},layoutId:"SegmentedControlToggleItem-selectedBackground",className:"absolute inset-0 -z-10 rounded-full bg-token-main-surface-primary"}):null]})}function ia({value:s,onChange:t}){const{isV2ToggleLabelsEnabled:a}=It();return e.jsx(nl,{value:s,onChange:t,ariaLabel:De.toggleArialabel,leftItem:{ariaLabel:a?De.toggleForIndividualsArialabel:De.togglePersonalArialabel,label:a?De.toggleForIndividualsLabel:De.togglePersonalLabel,value:"personal"},rightItem:{ariaLabel:a?De.toggleForTeamsArialabel:De.toggleBusinessArialabel,label:a?De.toggleForTeamsLabel:De.toggleBusinessLabel,value:"business"}})}const De=V({toggleArialabel:{id:"U4v2Gf",defaultMessage:"Toggle for switching between Personal and Business plans"},togglePersonalArialabel:{id:"6Wikht",defaultMessage:"Toggle for switching to Personal plans"},toggleForIndividualsArialabel:{id:"DNEy0d",defaultMessage:"Toggle for switching to plans for individuals"},toggleBusinessArialabel:{id:"uzlEV0",defaultMessage:"Toggle for switching to Business plans"},toggleForTeamsArialabel:{id:"ADnxet",defaultMessage:"Toggle for switching to plans for teams"},togglePersonalLabel:{id:"cGDsaD",defaultMessage:"Personal"},toggleForIndividualsLabel:{id:"FLfLeO",defaultMessage:"For Individuals"},toggleBusinessLabel:{id:"sgisa2",defaultMessage:"Business"},toggleForTeamsLabel:{id:"VKVfzi",defaultMessage:"For Teams"}}),sn=["AF","AL","DZ","AS","AD","AO","AI","AQ","AG","AR","AM","AW","AU","AT","AZ","BS","BH","BD","BB","BY","BE","BZ","BJ","BM","BT","BO","BQ","BA","BW","BV","BR","IO","BN","BG","BF","BI","CV","KH","CM","CA","KY","CF","TD","CL","CN","CX","CC","CO","KM","CD","CG","CK","CR","HR","CU","CW","CY","CZ","CI","DK","DJ","DM","DO","EC","EG","SV","GQ","ER","EE","SZ","ET","FK","FO","FJ","FI","FR","GF","PF","TF","GA","GM","GE","DE","GH","GI","GR","GL","GD","GP","GU","GT","GG","GN","GW","GY","HT","HM","VA","HN","HK","HU","IS","IN","ID","IR","IQ","IE","IM","IL","IT","JM","JP","JE","JO","KZ","KE","KI","KP","KR","KW","KG","LA","LV","LB","LS","LR","LY","LI","LT","LU","MO","MG","MW","MY","MV","ML","MT","MH","MQ","MR","MU","YT","MX","FM","MD","MC","MN","ME","MS","MA","MZ","MM","NA","NR","NP","NL","NC","NZ","NI","NE","NG","NU","NF","MP","NO","OM","PK","PW","PS","PA","PG","PY","PE","PH","PN","PL","PT","PR","QA","MK","RO","RU","RW","RE","BL","SH","KN","LC","MF","PM","VC","WS","SM","ST","SA","SN","RS","SC","SL","SG","SX","SK","SI","SB","SO","ZA","GS","SS","ES","LK","SD","SR","SJ","SE","CH","SY","TW","TJ","TZ","TH","TL","TG","TK","TO","TT","TN","TR","TM","TC","TV","UG","UA","AE","GB","UM","US","UY","UZ","VU","VE","VN","VG","VI","WF","EH","YE","ZM","ZW","AX"],ol=new Set(["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IS","IE","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","RO","SK","SI","ES","SE"]),_s="US",il="GB",ll="CH",rl={AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua & Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BQ:"Caribbean Netherlands",BA:"Bosnia & Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",CV:"Cape Verde",KH:"Cambodia",CM:"Cameroon",CA:"Canada",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (Keeling) Islands",CO:"Colombia",KM:"Comoros",CD:"Congo - Kinshasa",CG:"Congo - Brazzaville",CK:"Cook Islands",CR:"Costa Rica",HR:"Croatia",CU:"Cuba",CW:"Curaçao",CY:"Cyprus",CZ:"Czechia",CI:"Côte d’Ivoire",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",SZ:"Eswatini",ET:"Ethiopia",FK:"Falkland Islands (Islas Malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard & McDonald Islands",VA:"Vatican City",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"North Korea",KR:"South Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar (Burma)",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn Islands",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",MK:"North Macedonia",RO:"Romania",RU:"Russia",RW:"Rwanda",RE:"Réunion",BL:"St. Barthélemy",SH:"St. Helena",KN:"St. Kitts & Nevis",LC:"St. Lucia",MF:"St. Martin",PM:"St. Pierre & Miquelon",VC:"St. Vincent & Grenadines",WS:"Samoa",SM:"San Marino",ST:"São Tomé & Príncipe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia & South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard & Jan Mayen",SE:"Sweden",CH:"Switzerland",SY:"Syria",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TL:"Timor-Leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad & Tobago",TN:"Tunisia",TR:"Türkiye",TM:"Turkmenistan",TC:"Turks & Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",UM:"U.S. Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Venezuela",VN:"Vietnam",VG:"British Virgin Islands",VI:"U.S. Virgin Islands",WF:"Wallis & Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe",AX:"Åland Islands"};function cl(s){return sn.includes(s)}function dl(s,t){return t?(he.addAction(`Force using ${_s}`,{user_country:s}),_s):s==null||!cl(s)?(he.addError(`User country is null or unrecognized - will use ${_s}`,{user_country:s}),_s):s}function ul(s){try{const t=new Intl.DisplayNames([s],{type:"region"});return a=>t.of(a)??""}catch(t){return he.addError("Failed to create country display name formatter, will fallback to en_US locale display name",{cause:t}),a=>rl[a]??""}}function gl(s){return ol.has(s)}function ml({value:s,onValueChange:t,displayNameFormatterFn:a,testId:o}){const i=[s],l=sn.filter(r=>r!=s);return e.jsx("div",{"data-testid":o,children:e.jsxs(te.Root,{value:s,onValueChange:t,children:[e.jsxs(te.Trigger,{children:[e.jsx(te.Value,{}),e.jsx(te.Icon,{})]}),e.jsx(te.Portal,{children:e.jsxs(te.Content,{side:void 0,sideOffset:void 0,position:"popper",style:{maxHeight:480},children:[i.map(r=>e.jsx(te.Item,{value:r,children:a(r)},r)),e.jsx(te.Separator,{}),l.map(r=>e.jsx(te.Item,{value:r,children:a(r)},r))]})})]})})}const Ps=()=>{j.logEvent(S.clickAccountPaymentGetHelp)};function pl(s,t){switch(s){case ie.FREE:return"green";case ie.PLUS:return"green";case ie.TEAM:return t?"primary":"blue";case ie.ENTERPRISE:return"secondary";case ie.EDU:return"secondary";case ie.QUORUM:return"secondary"}}function Ke({isCurrentPlan:s,planType:t,disabled:a,onClick:o,children:i,testId:l,isProduceDesign:r,activeColor:d,...c}){return e.jsx(Z,{fullWidth:!0,size:"large",color:s?"secondary":d||pl(t,r),disabled:a,onClick:o,"data-testid":l,className:r&&a?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary":r?"font-semibold":"",...c,children:i})}const fl=ve.div`${s=>s.plusInactiveProduce?"mt-4":""} text-sm relative flex-1 flex gap-5 flex-col border-token-border-light ${s=>{const t=s.isModalFullscreen?"border-t border-l border-r border-b rounded-xl md:min-h-[30rem] md:rounded-none md:border-r-0 md:last:border-r md:first:rounded-tl-xl md:first:rounded-bl-xl md:last:rounded-tr-xl md:last:rounded-br-xl md:max-w-96 justify-center px-6 pt-6 pb-10 md:pb-6":"md:border-r last:border-r-0 md:border-t-0 border-t py-4 px-6",a=s.plusInactiveProduce?"border-t border-l border-r border-b rounded-xl md:first:rounded-tl-xl md:first:rounded-bl-xl md:last:rounded-tr-xl md:last:rounded-br-xl md:max-w-96 justify-center px-6 pt-6 pb-10 md:pb-6 md:min-h-[20rem] -mt-4 -mb-4 border-green-600 bg-green-600 bg-opacity-5":"";return`${s.plusInactiveProduce?a:t}`}}`,Is=ve.div`
  relative flex flex-col ${s=>s.plusInactiveProduce?"":"bg-token-main-surface-primary"}
`,hl=ve.div`flex flex-col flex-grow gap-2`,xl=ve.div`
  relative ${s=>s.plusInactiveProduce?"":"bg-token-main-surface-primary"}
`,la=ve.div`
  relative flex flex-col text-xs text-token-text-secondary ${s=>s.plusInactiveProduce?"":"bg-token-main-surface-primary"}
`,ps=({planName:s,pricingPlan:t,callToActionButton:a,className:o,showForLine:i=!0,icon:l=void 0,additionalLinks:r=[],plusInactive:d=!1,selectedCountry:c})=>{const{isModalFullscreen:g}=It(),{layer:m}=jt("3768341700"),u=m.get("is_produce_design",!1),p=d&&u,h=wt(),[b,y,k,N]=gl(c)?[t.cost.costInEuros,t.cost.costInEurosSubtitle,We.euroSign,We.euroCode]:c==ll?[t.cost.costInEuros,t.cost.costInEurosSubtitle,We.euroSign,We.euroCode]:c==il?[t.cost.costInPounds,t.cost.costInPoundsSubtitle,We.poundSign,We.poundCode]:[t.cost.costInDollars,t.cost.costInDollarsSubtitle,We.dollarSign,We.dollarCode];return e.jsxs(fl,{className:o,"data-testid":`${s}-pricing-modal-column`,isModalFullscreen:g,plusInactiveProduce:p,children:[u?e.jsx(Is,{plusInactiveProduce:p,className:p?"mt-4":"",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center gap-2 text-2xl font-semibold",children:[u?"":l??"",e.jsx(n,{...t.name}),p&&e.jsx("span",{className:"ml-1 rounded border border-green-600 px-1 py-0 text-xs font-bold text-green-600",children:e.jsx(n,{id:"popular",defaultMessage:"POPULAR"})})]}),b&&e.jsx("div",{className:"ml-4 mt-2 flex items-baseline gap-1.5",children:e.jsxs("div",{className:"relative",children:[e.jsx("p",{className:"absolute -left-4 -top-0 text-2xl text-token-text-secondary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{...k})}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("p",{className:"text-5xl text-token-text-primary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{...b})}),e.jsxs("div",{className:"flex flex-col items-start justify-center",children:[e.jsx("p",{className:"absolute mb-6 text-xs text-token-text-tertiary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{...N})}),e.jsx("p",{className:"text-xs text-token-text-tertiary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{id:"frequency",defaultMessage:"month"})})]})]})]})}),y&&h?e.jsx("p",{className:"mb-3 mt-6 text-sm text-token-text-tertiary","data-testid":`${s}-pricing-column-cost-subtitle`,children:e.jsx(n,{...y})}):null,t.summary?e.jsx("p",{className:"mr-2 mt-2 text-base text-token-text-primary","data-testid":`${s}-pricing-column-cost-subtitle`,children:e.jsx(n,{...t.summary})}):null]})}):e.jsx(Is,{children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("p",{className:"flex items-center gap-2 text-xl font-semibold",children:[l??"",e.jsx(n,{...t.name})]}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("p",{className:"text-base text-token-text-tertiary","data-testid":`${s}-pricing-column-cost`,children:e.jsx(n,{...b})}),y?e.jsx("p",{className:"text-xs text-token-text-tertiary","data-testid":`${s}-pricing-column-cost-subtitle`,children:e.jsx(n,{...y})}):null]})]})}),e.jsx(Is,{children:a}),e.jsxs(hl,{children:[i&&t.forLine&&e.jsx(Is,{children:e.jsx("p",{className:"text-l font-semibold",children:e.jsx(n,{...t.forLine})})}),t.advertisedFeatures?.map((P,L)=>e.jsx(xl,{plusInactiveProduce:p,children:e.jsxs("div",{className:"text-l flex justify-start gap-2",children:[e.jsx(li,{className:"mt-0.5 h-4 w-4 shrink-0"}),e.jsx("span",{children:e.jsx(n,{...P,values:{link:D=>e.jsx(Y,{className:"underline",target:"_blank",rel:"noreferrer",to:P.link??"",children:D}),article:D=>e.jsx(Y,{className:"underline",target:"_blank",rel:"noreferrer",to:P.article??"",children:D}),modelName:"GPT‑4o"}})})]})},L))]}),e.jsxs("div",{children:[r.length>0&&e.jsx(la,{plusInactiveProduce:p,children:r.map((P,L)=>e.jsx("div",{children:P},L))}),t.disclaimer&&e.jsx(la,{plusInactiveProduce:p,className:"px-2",children:e.jsx("div",{children:e.jsx(n,{...t.disclaimer,values:{link:P=>e.jsx(Y,{className:"underline",target:"_blank",rel:"noreferrer",to:t.disclaimer?.link??"",children:P}),article:P=>e.jsx(Y,{className:"underline",target:"_blank",rel:"noreferrer",to:t?.disclaimer?.article??"",children:P})}})})})]})]})},We=V({dollarSign:{id:"PricingModalColumn.dollarSign",defaultMessage:"$"},dollarCode:{id:"PricingModalColumn.dollarCode",defaultMessage:"USD/"},poundSign:{id:"PricingModalColumn.poundSign",defaultMessage:"£"},poundCode:{id:"PricingModalColumn.poundCode",defaultMessage:"GBP/"},euroSign:{id:"PricingModalColumn.euroSign",defaultMessage:"€"},euroCode:{id:"PricingModalColumn.euroCode",defaultMessage:"EUR/"}}),ra=ie.ENTERPRISE,Ml={[ce.Default]:v.enterprise,[ce.Scallion]:v.enterprise,[ce.Chive]:v.enterprise,[ce.ProduceDesign]:v.enterpriseProduceExp},tn=({isProduceDesign:s=!1,enterprisePricingPlanProduce:t=null,selectedCountry:a})=>{const i=xe()?.isEnterprisey(),l=nt(),r=t||Qs(Ml[l]);return e.jsx(ps,{icon:e.jsx(Ka,{className:"icon-md text-brand-purple"}),planName:"enterprise",pricingPlan:r,showForLine:!0,callToActionButton:i?e.jsx(Z,{color:"secondary",disabled:!0,size:"large",className:s?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:e.jsx(n,{...v.free.callToAction.inactive})}):e.jsx(Ke,{planType:ra,as:"link",to:xt,openNewTab:!0,onClick:()=>{j.logEvent(S.clickEnterpriseContactSalesButton),ee.logEvent("chatgpt_account_payment_modal_enterprise_sales_button_clicked",ra)},isCurrentPlan:!1,testId:"select-plan-button-enterprise",isProduceDesign:s,children:e.jsx("div",{className:"flex items-center gap-1",children:e.jsx(n,{...v.enterprise.callToAction.inactive})})}),selectedCountry:a})},bl={[ce.Default]:v.freeDefault,[ce.Scallion]:v.freeNeptune,[ce.Chive]:v.freeChive,[ce.ProduceDesign]:v.freeProduceExp},an=({isProduceDesign:s=!1,freePricingPlanProduce:t=null,selectedCountry:a})=>{const o=et(),i=nt(),l=t||Qs(bl[i]);return e.jsx(ps,{planName:"free",pricingPlan:l,icon:e.jsx(ri,{className:"icon-md"}),showForLine:!o,callToActionButton:e.jsx(Z,{color:"secondary",disabled:!0,size:"large",className:s?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:e.jsx(n,{...v.free.callToAction.inactive})}),additionalLinks:[e.jsx(n,{...yl.haveExistingPlan,values:{link:r=>e.jsx(Y,{target:"_blank",to:ks,onClick:Ps,className:"underline",children:r},"row-plus-plan-help-link")}},"existing-plan-help")],selectedCountry:a})},yl=V({haveExistingPlan:{id:"FreeColumn.haveExistingPlan",defaultMessage:"Have an existing plan? See <link>billing help</link>"}}),jl=Ms.HasDismissedUpgradeInviteModal,Cl={hasDismissedUpgradeInviteModal:!!Ws.getItem(jl)};Sa()(()=>({...Cl}));const vl=()=>{const{isUnauthenticated:s,isLoading:t}=qs();return es({queryKey:["updateInvites",s],queryFn:async()=>s?{plus:null,team:null}:await B.getUpgradeInvites(),enabled:!t})},ca=V({plusWaitlistSignupSuccess:{id:"pricingPlanConstants.plusWaitlistSignupSuccess",defaultMessage:"You've been added to the waitlist to upgrade to Plus"},teamWaitlistSignupSuccess:{id:"pricingPlanConstants.teamWaitlistSignupSuccess",defaultMessage:"You've been added to the waitlist to upgrade to Team"}}),Sl={[ie.PLUS]:{localStorageKeyByVersion:{V1:Ms.HasSignedUpForPlusUpgradeWaitlistV1,V2:Ms.HasSignedUpForPlusUpgradeWaitlistV2},onSuccessMessage:ca.plusWaitlistSignupSuccess},[ie.TEAM]:{localStorageKeyByVersion:{V1:Ms.HasSignedUpForTeamUpgradeWaitlistV1,V2:Ms.HasSignedUpForTeamUpgradeWaitlistV2},onSuccessMessage:ca.teamWaitlistSignupSuccess}},Lt=s=>{const t=w(),a=J(),{localStorageKeyByVersion:o,onSuccessMessage:i}=Sl[s],l=o.V1,r=o.V2,[d]=f.useState(!!Ws.getItem(l)),[c,g]=f.useState(!!Ws.getItem(r)),{data:m}=vl(),u=()=>{g(!0),Ws.setItem(r,!0),a.success(t.formatMessage(i),{hasCloseButton:!0,duration:5}),j.logEvent(S.upgradePlanWaitlistSignup,{plan:s})};return{hasSignedUpForWaitlist:d||c,isEligibleToUpgrade:!!m?.plus||d,signUpForWaitlist:u}},os=ie.TEAM,nn=({analyticsParams:s,isPlanLoading:t,isProduceDesign:a=!1,teamPricingPlanProduce:o=null,selectedCountry:i})=>{const r=Zs()?.includes("disable_team_upgrade_ui"),d=w(),c=xe(),g=ms(),{hasSignedUpForWaitlist:m,signUpForWaitlist:u}=Lt(os),p=c&&c.isTeam(),h=c&&c.isPlus(),b={...s,planType:os,isUpgradeUiDisabled:r},y=et(),k=o||(a?v.teamsProduceExp:y?v.teamsNeptune:v.teams),N=()=>{j.logEvent(S.clickAccountPaymentCheckout,b),ee.logEvent("chatgpt_account_payment_modal_upgrade_button_click",os),ue.setPurchaseWorkspaceData({minimumSeats:Mt}),Ea(g)};return e.jsx(ps,{planName:"team",pricingPlan:k,icon:e.jsx(ci,{className:"icon-md text-brand-blue-800"}),callToActionButton:e.jsxs("div",{className:"flex flex-col gap-2",children:[p&&e.jsx(Ke,{planType:os,isCurrentPlan:!0,disabled:t||p,onClick:N,testId:"select-plan-button-teams-upgrade",isProduceDesign:a,children:d.formatMessage(v.teams.callToAction.active)}),r?e.jsx("div",{className:"relative w-full",children:e.jsx(fe,{side:"bottom",sideOffset:20,label:d.formatMessage(v.disabledHighDemand.hoverText),children:e.jsx(Ke,{planType:os,isCurrentPlan:!1,disabled:m,onClick:u,testId:"select-plan-button-teams-waitlist",isProduceDesign:a,children:e.jsx(n,{...m?v.signUpForWaitlist.inactive:v.signUpForWaitlist.active})})})}):e.jsx("div",{className:"w-full",children:e.jsx(Ke,{planType:os,isCurrentPlan:!1,disabled:t,onClick:N,testId:"select-plan-button-teams-create",isProduceDesign:a,children:p||h?d.formatMessage(k.callToAction.create):d.formatMessage(k.callToAction.inactive)})})]}),selectedCountry:i})},$=V({freeAdvertisedFeaturesProduce1:{id:"pricingPlanConstants.free.freeAdvertisedFeaturesProduce1",defaultMessage:"Limited access to GPT-4o"},plusAdvertisedFeaturesProduce3:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce3",defaultMessage:"Limited access to o1 and o1-mini"},plusAdvertisedFeaturesProduce4:{id:"pricingPlanConstants.plus.plusAdvertisedFeaturesProduce4",defaultMessage:"Opportunities to test new features"},plusInactiveProduce:{id:"pricingPlanConstants.plus.callToAction.inactivePaymentProduce",defaultMessage:"Get Plus"},teamPlanAdvertisedFeaturesProduce3:{id:"pricingPlanConstants.teams.teamPlanAdvertisedFeaturesProduce3",defaultMessage:"Limited preview of GPT-4.5"},teamPlanInactiveProduce:{id:"pricingPlanConstants.teams.callToAction.inactivePaymentProduce",defaultMessage:"Get Team"},enterpriseAdvertisedFeaturesProduce0:{id:"pricingPlanConstants.enterprise.enterpriseAdvertisedFeaturesProduce0",defaultMessage:"Everything in Team"},enterpriseAdvertisedFeaturesProduce3:{id:"pricingPlanConstants.enterprise.enterprisePlanAdvertisedFeaturesproduce3",defaultMessage:"Most intelligent models with longer context windows"},enterpriseAdvertisedFeaturesProduce4:{id:"pricingPlanConstants.enterprise.enterprisePlanAdvertisedFeaturesProduce4",defaultMessage:"No peak hour limits for ChatGPT"},proName:{id:"pricingPlanConstants.pro.name",defaultMessage:"Pro"},proActive:{id:"pricingPlanConstants.pro.callToAction.active",defaultMessage:"Your current plan"},proInactive:{id:"pricingPlanConstants.pro.callToAction.inactive",defaultMessage:"Get Pro"},proSummary:{id:"pricingPlanConstants.pro.proPlanSummary",defaultMessage:"Get the best of OpenAI with the highest level of access"},proCost:{id:"pricingPlanConstants.pro.costInDollars",defaultMessage:"200"},proCostInPounds:{id:"pricingPlanConstants.pro.costInPounds",defaultMessage:"200"},proCostInEuros:{id:"pricingPlanConstants.pro.costInEuros",defaultMessage:"229"},proAdvertisedFeatures0:{id:"pricingPlanConstants.pro.proAdvertisedFeatures0",defaultMessage:"Everything in Plus"},proAdvertisedFeatures1:{id:"pricingPlanConstants.pro.proAdvertisedFeatures1",defaultMessage:"Unlimited access to o1, o1-mini, and GPT-4o"},proAdvertisedFeatures2:{id:"pricingPlanConstants.pro.proAdvertisedFeatures2",defaultMessage:"Unlimited access to advanced voice"},proAdvertisedFeatures3:{id:"pricingPlanConstants.pro.proAdvertisedFeatures3",defaultMessage:"Access to o1 pro mode, which uses more compute for the best answers to the hardest questions"},proPricingDisclaimer:{id:"pricingPlanConstants.pro.proPricingDisclaimer",defaultMessage:"Usage must be reasonable and comply with our <link>policies</link>",link:"https://help.openai.com/en/articles/9793128"}}),kl=[$.proAdvertisedFeatures0,$.proAdvertisedFeatures1,$.proAdvertisedFeatures2,$.proAdvertisedFeatures3],wl=[A.plusAdvertisedFeaturesProduce0,A.plusAdvertisedFeaturesProduce1,A.plusAdvertisedFeaturesProduce2,$.plusAdvertisedFeaturesProduce3,A.plusAdvertisedFeaturesNeptune4],Pl={...v.freeChive,summary:A.freeSummary,cost:{costInDollars:A.freeCostProduce,costInPounds:A.freeCostInPoundsProduce,costInEuros:A.freeCostInEurosProduce},advertisedFeatures:[A.basicModelAccess,A.freeAdvertisedFeaturesProduce0,$.freeAdvertisedFeaturesProduce1,A.freeAdvertisedFeaturesProduce2,A.freeAdvertisedFeaturesProduce3]},Tl={...v.plusChiveForPlusUsers,callToAction:{active:A.plusActive,create:A.plusActive,inactive:$.plusInactiveProduce},summary:A.plusSummary,cost:{costInDollars:A.plusCostProduce,costInPounds:A.plusCostInPoundsProduce,costInEuros:A.plusCostInEurosProduce},forLine:void 0,advertisedFeatures:[A.plusAdvertisedFeaturesProduce0,A.plusAdvertisedFeaturesProduce1,A.plusAdvertisedFeaturesProduce2,$.plusAdvertisedFeaturesProduce3,$.plusAdvertisedFeaturesProduce4,A.plusAdvertisedFeaturesNeptune4]},Al={...v.teamsNeptune,forLine:void 0,summary:A.teamPlanSummary,cost:{costInDollars:A.teamPlanCostProduce,costInPounds:A.teamPlanCostInPoundsProduce,costInEuros:A.teamPlanCostInEurosProduce},advertisedFeatures:[A.teamAdvertisedFeaturesProduce0,A.teamsAdvertisedFeaturesDefault0,$.plusAdvertisedFeaturesProduce3,A.teamsAdvertisedFeaturesNeptune1,A.teamsAdvertisedFeaturesNeptune2,A.teamsAdvertisedFeaturesNeptune3],disclaimer:A.teamPricingDisclaimerProduce,callToAction:{active:A.teamPlanActive,create:A.teamPlanCreate,inactive:$.teamPlanInactiveProduce}},Nl={...v.enterprise,summary:A.enterpriseSummary,forLine:void 0,cost:{costInDollars:void 0,costInPounds:void 0,costInEuros:void 0,costInDollarsSubtitle:A.enterpriseCost,costInPoundsSubtitle:A.enterpriseCostInPounds,costInEurosSubtitle:A.enterpriseCostInEuros},advertisedFeatures:[$.enterpriseAdvertisedFeaturesProduce0,A.enterpriseAdvertisedFeatures1,A.enterpriseAdvertisedFeatures2,A.enterpriseAdvertisedFeatures3,A.enterpriseAdvertisedFeatures4,A.enterpriseAdvertisedFeatures5]},Ls={name:$.proName,callToAction:{active:$.proActive,create:$.proActive,inactive:$.proInactive},forLine:void 0,summary:$.proSummary,cost:{costInDollars:$.proCost,costInPounds:$.proCostInPounds,costInEuros:$.proCostInEuros},advertisedFeatures:[$.proAdvertisedFeatures0,$.proAdvertisedFeatures1,$.proAdvertisedFeatures2,$.proAdvertisedFeatures3],disclaimer:$.proPricingDisclaimer};function Dt({isOpen:s,onClose:t,onContinue:a}){return e.jsx(K,{isOpen:s,onClose:t,type:"warning",icon:Va,title:e.jsx(n,{...Ds.checkSubscriptionHeader}),primaryButton:e.jsx(ae.Button,{title:Ds.dismissModal.defaultMessage,color:"primary",onClick:t}),secondaryButton:e.jsx(ae.Button,{title:Ds.continueToNextStep.defaultMessage,color:"secondary",onClick:a}),children:e.jsx("span",{className:"gap-2 text-gray-600",children:Ds.checkSubscriptionBody.defaultMessage})})}const Ds=V({checkSubscriptionHeader:{id:"mobileSubscriptionWarningModal.checkSubscriptionHeader",defaultMessage:"Check your App Store subscription"},checkSubscriptionBody:{id:"mobileSubscriptionWarningModal.checkSubscriptionBody",defaultMessage:"Your subscription through the Apple App Store is currently on pause due to a payment issue. Please resolve that issue to resume using ChatGPT Plus and avoid duplicate charges."},dismissModal:{id:"mobileSubscriptionWarningModal.dismissModal",defaultMessage:"Cancel"},continueToNextStep:{id:"mobileSubscriptionWarningModal.continueToNextStep",defaultMessage:"I understand, continue anyways"}}),El=ie.PLUS;function on({isOpen:s,onClose:t,onCancelationComplete:a,analyticsParams:o}){const i=w(),l=J(),r=xe(),{data:d,isLoading:c}=Ja(),g=_t(r?.id),m=f.useMemo(()=>({...o,planType:El}),[o]),u=f.useCallback(()=>{t(),g.isSuccess||j.logEventWithStatsig(S.cancelPlusAbort,"cancel_plus_modal_abort",m)},[t,g.isSuccess,m]),p=async()=>{if(!r)throw new Error("No account!");j.logEventWithStatsig(S.cancelPlusConfirm,"cancel_plus_modal_confirm",m),await g.mutateAsync(r?.id,{onError:()=>{l.danger(i.formatMessage(ge.cancelFailure),{duration:2}),j.logEventWithStatsig(S.cancelPlusError,"cancel_plus_modal_error",m)},onSuccess:()=>{j.logEventWithStatsig(S.cancelPlusSuccess,"cancel_plus_modal_success",m),a?.(),l.info(i.formatMessage(ge.cancelSuccess),{duration:2}),t()}})};f.useEffect(()=>{g.isSuccess},[g.isSuccess,t]);const h=d?.active_until;return e.jsx(K,{type:"success",onClose:u,isOpen:s,className:"",title:e.jsx(n,{...ge.cancelPlan}),children:c||!r?e.jsx(Ne,{}):g.isSuccess?e.jsx(n,{...ge.cancelSuccess}):e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm",children:[!!h&&e.jsx("p",{className:"mb-4",children:e.jsx(n,{...ge.planActiveUntil,values:{expirationDate:new Date(h)}})}),e.jsx("p",{className:"mb-2",children:e.jsx(n,{...ge.cancelListHeader})}),e.jsx("div",{children:Ll.map(b=>e.jsxs("div",{className:"text-l mb-2 flex justify-start gap-2",children:[e.jsx(Nt,{className:"h-5 w-5 flex-shrink-0 align-top text-gray-500"}),e.jsx("span",{children:e.jsx(n,{...b,values:{learnMoreLink:_l,mainModel:Il}})})]},b.id))})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(Z,{onClick:u,color:"secondary",children:e.jsx(n,{...ge.closeModal})}),e.jsx(Z,{color:"danger",onClick:p,disabled:g.isPending||g.isSuccess,children:e.jsx(n,{...g.isPending?ge.cancellingInProgress:ge.cancelButton})})]})]})})}const _l=s=>e.jsx("a",{target:"_blank",href:"https://help.openai.com/en/articles/9280126-what-happens-to-my-gpts-if-i-cancel-my-subscription",rel:"noreferrer",className:"underline",children:s}),Il="GPT-4",ge=V({cancelPlan:{id:"cancelPlusModal.cancelPlan",defaultMessage:"Cancel your Plus subscription?"},cancelListHeader:{id:"cancelPlusModal.cancelText",defaultMessage:"When your subscription ends, you'll no longer have:"},planActiveUntil:{id:"cancelPlusModal.planActiveUntil",defaultMessage:"If you cancel your subscription, you’ll be downgraded to the free plan on {expirationDate, date, long}."},cancelButton:{id:"cancelPlusModal.cancelButton",defaultMessage:"Cancel subscription"},cancellingInProgress:{id:"cancelPlusModal.cancellingInProgress",defaultMessage:"Cancelling..."},cancelSuccess:{id:"cancelPlusModal.cancelSuccess",defaultMessage:"Successfully cancelled your plan. Sorry to see you go!"},cancelFailure:{id:"cancelPlusModal.cancelFailure",defaultMessage:"Something went wrong while cancelling your plan. Please reach out to support"},lostFeatureGPTModels:{id:"0w7d5w",defaultMessage:"Access to {mainModel} and {liteModel}"},lostFeatureGPTModelSingular:{id:"cancelPlusModal.lostFeature.gptModelSingular",defaultMessage:"Access to {mainModel}"},lostFeatureNewModelUsageLimits:{id:"TjftEV",defaultMessage:"Higher usage limits for {limitedModel}"},lostFeatureDataAnalysisV2:{id:"cancelPlusModal.lostFeature.dataAnalysisV2",defaultMessage:"Access to advanced data analysis, file uploads, vision, and web browsing"},lostFeatureDataAnalysisLimits:{id:"dlGufV",defaultMessage:"Higher usage limits for advanced data analysis, file uploads, vision, and web browsing"},lostFeatureImageGeneration:{id:"cancelPlusModal.lostFeature.imageGeneration",defaultMessage:"DALL·E image generation"},lostFeatureCustomGPTs:{id:"cancelPlusModal.lostFeature.customGPTs",defaultMessage:"Custom GPT creation"},lostFeaturePersonalGPTs:{id:"cancelPlusModal.lostFeature.personalGPTs",defaultMessage:"GPTs you’ve created (<learnMoreLink>learn more</learnMoreLink>)"},closeModal:{id:"cancelPlusModal.close",defaultMessage:"Close"}}),Ll=[ge.lostFeatureGPTModelSingular,ge.lostFeatureDataAnalysisV2,ge.lostFeatureImageGeneration,ge.lostFeatureCustomGPTs,ge.lostFeaturePersonalGPTs],ln=()=>es({queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:async()=>await B.hasAppStoreSubscriptionInBillingRetryResponse()}),Dl={[ce.Default]:v.plusDefaultForFreeUsers,[ce.Scallion]:v.plusNeptuneForFreeUsers,[ce.Chive]:v.plusChiveForFreeUsers,[ce.ProduceDesign]:v.plusProduceForFreeUsersExp},Fl={[ce.Default]:v.plusDefaultForPlusUsers,[ce.Scallion]:v.plusNeptuneForPlusUsers,[ce.Chive]:v.plusChiveForPlusUsers,[ce.ProduceDesign]:v.plusProduceForPlusUsersExp},rn=({currentAccount:s,pricingType:t})=>{const{data:{subscriptionStatus:a}}=s;return a.hasPaidSubscription&&a.subscriptionPlan===qn.PLUS?a.billingPeriod==="yearly"?v.plusYearly:Fl[t]:Dl[t]},is=ie.PLUS,Bl=({analyticsParams:s,currentAccount:t,isPlanLoading:a,onSubmit:o,setIsPlanLoading:i,shouldShowAdditionalLinks:l=!0,upgradeButtonText:r=v.plus.callToAction.inactive,isProduceDesign:d=!1,plusPricingPlanProduce:c=null,selectedCountry:g})=>{const{data:m,isError:u}=ln(),p=t.features,h=w(),b=J(),[y,k]=f.useState(!1),[N,P]=f.useState(!1),[L,D]=f.useState(!1),_=[],E=t.isOrWasPaidCustomer(),F=t.hasPaidSubscription()&&t.isPlus(),q=t.getLastActiveSubscription(),{hasSignedUpForWaitlist:U,signUpForWaitlist:z}=Lt(is),H=et(),X=p.includes("disable_plus_upgrade_ui")&&!E,O=p.includes("show_cancel_plus_ui"),T={...s,planType:is,isUpgradeUiDisabled:X},C=async()=>{i(!0),j.logEvent(S.clickAccountPaymentCheckout,T),ee.logEvent("chatgpt_account_payment_modal_upgrade_button_click",is);try{const Se=await B.getCheckoutLink(p);o?.(),j.logEvent(S.navigatingToAccountPaymentCheckout,{...T,url:Se.url}),ee.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",is,{url:Se.url}),window.location.href=Se.url}catch{b.warning(h.formatMessage(we.paymentErrorWarning),{hasCloseButton:!0})}i(!1)},Te=()=>{k(!0),j.logEventWithStatsig(S.cancelPlusStart,"cancel_plus_start",{...T,cancel_start_source:"manage plan"})},Ee=async()=>{i(!0),j.logEvent(S.clickAccountCustomerPortal,T);try{const Se=await B.fetchCustomerPortalUrl();j.logEvent(S.navigatingToAccountCustomerPortal,T),location.href=Se.url}catch{b.warning(h.formatMessage(we.accountErrorWarning),{hasCloseButton:!0})}i(!1)},ze=()=>{j.logEvent(S.clickAccountManageIos,T)},I=()=>{j.logEvent(S.clickAccountManageAndroid,T)},ss=F&&q.purchase_origin_platform===re.MOBILE_IOS,ts=F&&q.purchase_origin_platform===re.MOBILE_ANDROID,_e=(q.purchase_origin_platform===re.WEBAPP||q.purchase_origin_platform===re.GRANTED)&&t?.hasCustomerObject(),Ie=_e&&!N&&F&&t.willRenewSubscription(),as=nt(),ns=c||Qs(rn({currentAccount:t,pricingType:as}));H&&!F&&_.push(e.jsx(Y,{to:_a,target:"_blank",className:"px-2 underline",children:e.jsx(n,{...we.limitsApply})},"row-plus-plan-usage-limits")),ss&&_.push(e.jsx(Y,{to:st,target:"_blank",onClick:ze,className:"px-2 underline",children:h.formatMessage(v.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),ts&&_.push(e.jsx(Y,{to:tt,target:"_blank",onClick:I,children:h.formatMessage(v.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),_e&&(_.push(e.jsx(Y,{to:"#",onClick:Ee,className:"px-2 underline",children:e.jsx(n,{...v.manageSubscriptionWeb.callToAction})},"row-manage-subscription-link")),Ie&&O&&_.push(e.jsxs("button",{children:[e.jsx("span",{onClick:Te,className:"cursor-pointer px-2 underline",children:e.jsx(n,{...v.cancelSubscriptionWeb.callToAction})}),e.jsx(on,{isOpen:y,onClose:()=>k(!1),onCancelationComplete:()=>P(!0),analyticsParams:T})]},"row-cancel-subscription-link"))),E&&_.push(e.jsx(Y,{target:"_blank",to:ks,onClick:Ps,className:"px-2 underline",children:e.jsx(n,{...we.billingHelp})},"row-plus-plan-help-link"));const $e=function(){D(!L)},qe=u||!m||!m.value?C:()=>{$e()};return e.jsx(ps,{planName:"plus",pricingPlan:ns,icon:e.jsx(Ya,{className:"icon-md text-green-600"}),showForLine:!F&&!H,callToActionButton:X?e.jsx("div",{className:"relative w-full",children:e.jsx(fe,{side:"bottom",sideOffset:20,label:h.formatMessage(v.disabledHighDemand.hoverText),children:e.jsx(Ke,{planType:is,disabled:U,onClick:z,isCurrentPlan:F,testId:"select-plan-button-plus-waitlist",isProduceDesign:d,children:e.jsx(n,{...U?v.signUpForWaitlist.inactive:v.signUpForWaitlist.active})})})}):e.jsxs("div",{children:[e.jsx(Ke,{planType:is,isCurrentPlan:F,disabled:F||a,onClick:qe,testId:"select-plan-button-plus-upgrade",isProduceDesign:d,children:F?h.formatMessage(v.plus.callToAction.active):h.formatMessage(r)}),e.jsx(Dt,{isOpen:L,onClose:$e,onContinue:C})]}),additionalLinks:l?_:[],selectedCountry:g})},we=V({haveExistingPlan:{id:"AccountPaymentModal.haveExistingPlan",defaultMessage:"Have an existing plan?"},billingHelp:{id:"AccountPaymentModel.billingHelp",defaultMessage:"I need help with a billing issue"},paymentErrorWarning:{id:"AccountPaymentModal.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},accountErrorWarning:{id:"AccountPaymentModal.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},limitsApply:{id:"xda4i3",defaultMessage:"Limits apply"}}),Ft=Sa(s=>({recentlyDowngraded:!1,recentlyUpgraded:!1,recentlyCanceled:!1,setRecentlyDowngraded:t=>s({recentlyDowngraded:t}),setRecentlyUpgraded:t=>s({recentlyUpgraded:t}),setRecentlyCanceled:t=>s({recentlyCanceled:t})}));var me=(s=>(s.FREE="free",s.PLUS="plus",s.PRO="pro",s.ENTERPRISE="enterprise",s.TEAM="team",s.EDU="edu",s.QUORUM="quorum",s))(me||{});function Ul({currentAccount:s}){const t=ms(),a=s.data.subscriptionStatus.planType,o=s.willRenewSubscription(),i=a==="plus"?e.jsx(n,{id:"hLd2Ar",defaultMessage:"Upgrade plan"}):a==="pro"&&o?e.jsx(n,{id:"/4GuNx",defaultMessage:"Change plan"}):e.jsx(n,{id:"4Bc5M+",defaultMessage:"View plans"}),l=()=>{Ia(t,"Subscription settings manage button")};return e.jsxs(Cs.Item,{className:"flex items-center pl-2 pr-0 font-normal",onClick:l,children:[e.jsx(gi,{className:"h-5 w-5"}),i]})}function Ol({currentAccount:s,onCancelSubscriptionClick:t}){const a=s.willRenewSubscription(),o=s.willPlanChange();return!a||o?null:e.jsxs(e.Fragment,{children:[e.jsx(Cs.Separator,{className:"px-1"}),e.jsxs(Cs.Item,{className:"flex items-center pl-2 pr-3 font-normal text-token-text-error",onClick:t,children:[e.jsx(Nt,{className:"h-5 w-5"}),e.jsx(n,{id:"icBiUI",defaultMessage:"Cancel Subscription"})]})]})}function Rl(s,t){return s==="free"||s==="plus"&&t==="pro"}function Wl({currentAccount:s,onRenewSubscriptionClick:t}){const a=s.data.subscriptionStatus.planType,o=vs(a.toLowerCase()),i=s.willRenewSubscription(),l=s.getNextPlanType();if(!(!i||l&&Rl(l,a)))return null;const d=()=>{t()};return e.jsx(e.Fragment,{children:e.jsxs(Cs.Item,{className:"flex items-center pl-2 pr-3 font-normal text-token-text-primary",onClick:d,children:[e.jsx(mi,{className:"h-5 w-5"}),e.jsx(n,{id:"L6UCRY",defaultMessage:"Renew {planName} Plan",values:{planName:o}})]})})}function Gl({currentAccount:s,onCancelSubscriptionClick:t,onRenewSubscriptionClick:a}){return e.jsxs(ka,{triggerButton:e.jsxs(Z,{onClick:()=>{},color:"secondary",children:[e.jsx(n,{id:"g3k4Zt",defaultMessage:"Manage"}),e.jsx(ui,{className:"-mr-1 ml-1 h-4 w-4"})]}),contentAlign:"end",size:"auto",sideOffset:2,contentClassName:"py-1",children:[e.jsx(Ul,{currentAccount:s}),e.jsx(Wl,{currentAccount:s,onRenewSubscriptionClick:a}),e.jsx(Ol,{currentAccount:s,onCancelSubscriptionClick:t})]})}function Hl({currentAccount:s}){const t=s.subscriptionAnalyticsParams,o=s.getLastActiveSubscription().purchase_origin_platform,i=J(),l=w(),r=async()=>{j.logEvent(S.clickAccountCustomerPortal,t);try{const c=await B.fetchCustomerPortalUrl();j.logEvent(S.navigatingToAccountCustomerPortal,t),location.href=c.url}catch{i.warning(l.formatMessage(Ge.accountErrorWarning),{hasCloseButton:!0})}},d=(c,g)=>e.jsx(Y,{to:c,target:"_blank",className:"inline-block",children:e.jsx(Z,{onClick:()=>j.logEvent(g,t),color:"secondary",children:e.jsx(n,{id:"eQL80k",defaultMessage:"Manage"})})});switch(o){case re.MOBILE_IOS:return d(st,S.clickAccountManageIos);case re.MOBILE_ANDROID:return d(tt,S.clickAccountManageAndroid);default:if(s.hasCustomerObject())return e.jsx(Z,{onClick:r,color:"secondary",children:e.jsx(n,{id:"eQL80k",defaultMessage:"Manage"})});break}}function Kl({currentAccount:s,onCancelSubscriptionClick:t,onRenewSubscriptionClick:a}){const o=w(),i=s.data.subscriptionStatus.planType,l=s.willRenewSubscription(),r=s.willPlanChange(),d=s.getDaysUntilPlanChanges(),c=s.getDaysUntilPlanExpires(),g=s.getNextPlanType(),m=b=>{const y=Pt(new Date,b);return new Intl.DateTimeFormat(o.locale,{year:"numeric",month:"short",day:"numeric"}).format(y)},u=vs(i.toLowerCase()),p=g?vs(g.toLowerCase()):null,h=i==="pro"?kl:wl;return e.jsxs(e.Fragment,{children:[e.jsxs(R,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-bold",children:e.jsx(n,{...Ge.subscriptionTitle,values:{planName:u}})}),e.jsxs("div",{className:"text-token-text-secondary",children:[r&&d&&p&&e.jsx("span",{children:e.jsx(n,{...Ge.planChangeMessage,values:{planName:p,date:m(d)}})}),l&&!r&&c&&e.jsx("span",{children:e.jsx(n,{...Ge.renewMessage,values:{date:m(c)}})}),!l&&!r&&c&&e.jsx("span",{children:e.jsx(n,{...Ge.planCanceledMessage,values:{date:m(c)}})})]})]}),e.jsx(Gl,{currentAccount:s,onCancelSubscriptionClick:t,onRenewSubscriptionClick:a})]}),e.jsxs("div",{className:"mt-4 rounded-lg bg-gray-50 p-4 text-token-text-secondary dark:bg-gray-900",children:[e.jsx(n,{...Ge.thanksMessage,values:{planName:u}}),h?.map((b,y)=>e.jsxs("div",{className:"text-l mt-2 flex justify-start gap-2",children:[e.jsx(di,{className:"mt-0.5 h-4 w-4 shrink-0 text-token-text-primary"}),e.jsx("span",{children:e.jsx(n,{...b,values:{link:k=>e.jsx(Y,{className:"underline",target:"_blank",rel:"noreferrer",to:b.link??"",children:k}),article:k=>e.jsx(Y,{className:"underline",target:"_blank",rel:"noreferrer",to:b.article??"",children:k}),modelName:"GPT‑4o"}})})]},y))]})]}),e.jsx(R,{children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-base",children:e.jsx(n,{...Ge.managePaymentTitle,values:{planName:u}})}),e.jsx(Hl,{currentAccount:s})]}),e.jsx(Y,{target:"_blank",to:ks,onClick:Ps,className:"-mb-2 pt-3 text-sm text-token-link",children:e.jsx(n,{...Ge.billingHelp})},"row-plus-plan-help-link")]})})]})}const Ge=V({subscriptionTitle:{id:"settingsModal.subscriptionTitle",defaultMessage:"ChatGPT {planName}"},managePaymentTitle:{id:"settingsModal.managePaymentTitle",defaultMessage:"Payment"},billingHelp:{id:"settingsModal.billingHelp",defaultMessage:"Need help with billing?"},accountErrorWarning:{id:"AccountPaymentModal.accountErrorWarning",defaultMessage:"The account management page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},planChangeMessage:{id:"settingsModal.planChangeMessage",defaultMessage:"Your plan changes to {planName} on {date}"},planCanceledMessage:{id:"settingsModal.planCanceledMessage",defaultMessage:"Your plan will be canceled on {date}"},renewMessage:{id:"settingsModal.renewMessage",defaultMessage:"Your plan auto-renews on {date}"},thanksMessage:{id:"settingsModal.thanksMessage",defaultMessage:"Thanks for subscribing to ChatGPT {planName}! Your {planName} plan includes:"},paymentMethodMessage:{id:"settingsModal.paymentMethodMessage",defaultMessage:"Payment method"}}),Vl={[me.FREE]:"chatgptfreeplan",[me.PLUS]:"chatgptplusplan",[me.PRO]:"chatgptpro",[me.ENTERPRISE]:"chatgptenterpriseplan",[me.TEAM]:"chatgptteamplan",[me.EDU]:"chatgpteduplan",[me.QUORUM]:"chatgptquorumplan"};function Bt({isOpen:s,onClose:t,accountId:a,initialPlanType:o,updatedPlanType:i}){const l=w(),r=J(),d=xe(),[c,g]=f.useState(!1),m=o===i,u=o===me.PLUS&&i===me.PRO,p=Vl[i];f.useEffect(()=>{j.logTogglePlanManagementModal({isOpen:!0})},[]);const h=()=>{j.logTogglePlanManagementModal({isOpen:!1}),t()},b=Gi(a),y=Hi(a),k=_t(a),{data:N,isError:P,isLoading:L}=Xa(a,void 0,p);!m&&P&&(r.warning(l.formatMessage({id:"planManagement.errorFetchingPreview",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),t());const D=X=>{const O=Pt(new Date,X);return new Intl.DateTimeFormat(l.locale,{year:"numeric",month:"short",day:"numeric"}).format(O)},_=d?.getDaysUntilPlanExpires(),E=_?D(_):"N/A",{recentlyCanceled:G,setRecentlyUpgraded:F,setRecentlyDowngraded:q}=Ft(),U=d?.willRenewSubscription()||G,z=Ye();if(!d)return null;const H=async X=>{g(!0);try{if(m)await y.mutateAsync(a),r.success(l.formatMessage({id:"planManagement.successfullyRenewedSubscription",defaultMessage:"Your subscription has been renewed. Your subscription will auto-renew on {expirationDate}."},{expirationDate:E}),{hasCloseButton:!0});else{if(U||await y.mutateAsync(a),await b.mutateAsync({accountId:a,updatedPlan:p,updatedPriceInterval:void 0,updatedSeats:void 0}),X!==i){const C=u?S.upgradePlanSuccess:S.downgradePlanSuccess,Te=u?"chatgpt_upgrade_plan_success":"chatgpt_downgrade_plan_success";j.logEvent(C,{fromPlan:X,toPlan:i}),ee.logEvent(Te,null,{fromPlan:X,toPlan:i}),u?F(!0):q(!0)}const O=N?.renewal_date?new Date(N?.renewal_date).toLocaleDateString(l.locale,{year:"numeric",month:"long",day:"numeric"}):"N/A",T=u?l.formatMessage({id:"planManagement.successfullyUpdatedSubscription",defaultMessage:"You're now subscribed to ChatGPT Pro"}):l.formatMessage({id:"planManagement.updatedSubscriptionToPlus",defaultMessage:"Your subscription has been updated. Your subscription will change to Plus on {renewalDateFormatted}."},{renewalDateFormatted:O});localStorage.setItem(`subscriptionUpdateMessage_${d.id}`,T)}z.invalidateQueries({queryKey:["account-status"]}),t()}catch{r.warning(l.formatMessage({id:"planManagement.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0}),await k.mutateAsync(a)}finally{g(!1)}};return e.jsx(K,{type:"success",isOpen:s,onClose:h,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:l.formatMessage({id:"planManagementModal.title",defaultMessage:"Confirm changes"}),isProduceDesign:!0,children:L?e.jsx(cn,{}):m&&d?e.jsx(Xl,{account:d,expirationDate:E,handleUpdate:()=>H(o),isUpdating:c,onClose:h}):P||!N?null:u?e.jsx(zl,{accountId:a,handleUpdate:()=>H(o),isUpdating:c,onClose:h}):e.jsx(Jl,{renewalDate:N.renewal_date,handleUpdate:()=>H(o),isUpdating:c,onClose:h})})}function cn(){return e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsx(Ne,{})})}function Yl({adjustmentMessage:s,proratedCreditMessage:t,proratedCreditInfoMessage:a}){return e.jsxs("div",{children:[e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:s}),e.jsx("span",{className:"font-semibold text-green-600",children:t})]}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:a})]})}function zl({accountId:s,handleUpdate:t,isUpdating:a,onClose:o}){const i=w(),{data:l,isError:r,isLoading:d}=Xa(s,void 0,me.PRO);if(d)return e.jsx(cn,{});if(r||!l)return null;const c=$l(l);return e.jsxs("div",{className:"p-6",children:[e.jsx(ql,{data:l}),c.filter(g=>g.value!==0).map((g,m)=>e.jsx(Yl,{adjustmentMessage:g.adjustmentMessage,proratedCreditMessage:g.proratedCreditMessage,proratedCreditInfoMessage:g.proratedCreditInfoMessage},m)),e.jsx("hr",{className:"mb-4 mt-4"}),e.jsx(Ql,{data:l}),l.default_payment_method&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{className:"mb-4 mt-4"}),e.jsx(Zl,{defaultPaymentMethod:l.default_payment_method})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(Pe,{title:i.formatMessage({id:"planUpgradeModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:o}),e.jsx(Pe,{title:i.formatMessage({id:"planUpgradeModal.payNow",defaultMessage:"Pay now"}),color:"primary",onClick:t,loading:a})]})]})}function $l(s){return[{adjustmentMessage:e.jsx(n,{id:"planUpgradeModal.adjustment",defaultMessage:"Adjustment"}),proratedCreditMessage:e.jsx(n,{id:"planUpgradeModal.proratedCredit",defaultMessage:"-${adjustment}",values:{adjustment:(-s.negative_line_item_total/100).toFixed(2)}}),proratedCreditInfoMessage:e.jsx(n,{id:"planUpgradeModal.proratedCreditInfo",defaultMessage:"Prorated credit for the remainder of your Plus subscription"}),value:s.negative_line_item_total},{adjustmentMessage:e.jsx(n,{id:"planUpgradeModal.discount",defaultMessage:"Adjustment"}),proratedCreditMessage:e.jsx(n,{id:"planUpgradeModal.discountAmount",defaultMessage:"-${discount}",values:{discount:(s.discount_amount/100).toFixed(2)}}),proratedCreditInfoMessage:e.jsx(n,{id:"planUpgradeModal.discountInfo",defaultMessage:"Account discount applied"}),value:s.discount_amount},{adjustmentMessage:e.jsx(n,{id:"planUpgradeModal.credits",defaultMessage:"Adjustments"}),proratedCreditMessage:e.jsx(n,{id:"planUpgradeModal.creditsAmount",defaultMessage:"-${credits}",values:{credits:(s.applied_balance/100).toFixed(2)}}),proratedCreditInfoMessage:e.jsx(n,{id:"planUpgradeModal.creditsInfo",defaultMessage:"Credits applied"}),value:s.applied_balance}]}function ql({data:s}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.subscription",defaultMessage:"ChatGPT Pro subscription"})}),e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.subscriptionCost",defaultMessage:"${totalCost}",values:{totalCost:(s.positive_line_item_total/100).toFixed(2)}})})]}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(n,{id:"planUpgradeModal.billingCycle",defaultMessage:"Billed monthly, starting today"})})]})}function Ql({data:s}){return e.jsxs(e.Fragment,{children:[s.amount_due.tax_amount>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.subTotal",defaultMessage:"Subtotal"})}),e.jsx("span",{children:e.jsx(n,{id:"planUpgradeModal.subtotalPrice",defaultMessage:"${totalCost}",values:{totalCost:(s.amount_due.amount_excluding_tax/100).toFixed(2)}})})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsxs("span",{className:"font-semibold",children:[e.jsx(n,{id:"planUpgradeModal.tax",defaultMessage:"Tax"}),e.jsx("span",{className:"font-normal text-token-text-secondary",children:e.jsx(n,{id:"planUpgradeModal.taxPercent",defaultMessage:" {taxPercent}%",values:{taxPercent:(s.amount_due.tax_amount/s.amount_due.amount_excluding_tax*100).toFixed(0)}})})]}),e.jsx("span",{children:e.jsx(n,{id:"planUpgradeModal.taxAmount",defaultMessage:"${tax}",values:{tax:(s.amount_due.tax_amount/100).toFixed(2)}})})]})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.totalDueToday",defaultMessage:"Total due today"})}),e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.totalDueTodayAmount",defaultMessage:"${totalCost}",values:{totalCost:(s.amount_due.amount/100).toFixed(2)}})})]})]})}function Zl({defaultPaymentMethod:s}){return e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planUpgradeModal.paymentMethod",defaultMessage:"Payment Method"})}),e.jsxs("span",{className:"text-token-text-secondary",children:[s.card_brand.toUpperCase()," *",s.card_last4]})]})}function Jl({renewalDate:s,handleUpdate:t,isUpdating:a,onClose:o}){const i=w(),l=s?new Date(s).toLocaleDateString(i.locale,{year:"numeric",month:"long",day:"numeric"}):"N/A";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planDowngradeModal.currentSubscription",defaultMessage:"Your current Pro subscription will remain active until {renewalDateFormatted}, when it will change to Plus.",values:{renewalDateFormatted:l}})}),e.jsxs("div",{className:"mt-4 rounded-md bg-token-main-surface-secondary p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planDowngradeModal.newPlan",defaultMessage:"ChatGPT Plus"})}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planDowngradeModal.newPlanCost",defaultMessage:"USD $20/month"})})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planDowngradeModal.billingStart",defaultMessage:"Billing will start on {renewalDateFormatted}",values:{renewalDateFormatted:l}})})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(Pe,{title:i.formatMessage({id:"planDowngradeModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:o}),e.jsx(Pe,{title:i.formatMessage({id:"planDowngradeModal.confirm",defaultMessage:"Confirm"}),color:"primary",onClick:t,loading:a})]})]})})}function Xl({account:s,expirationDate:t,handleUpdate:a,isUpdating:o,onClose:i}){const l=w(),r=s.data.subscriptionStatus.planType,d=vs(r.toLowerCase()),c=d==="Pro"?"200":"20";return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planRenewalModal.currentSubscription",defaultMessage:"Your current {planName} subscription will auto-renew on {expirationDate}.",values:{planName:d,expirationDate:t}})}),e.jsxs("div",{className:"mt-4 rounded-md bg-token-main-surface-secondary p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"planRenewalModal.newPlan",defaultMessage:"ChatGPT {planName}",values:{planName:d}})}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planRenewalModal.newPlanCost",defaultMessage:"USD ${planCost}/month",values:{planCost:c}})})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(n,{id:"planRenewalModal.billingStart",defaultMessage:"Billing will auto-renew on {expirationDate}",values:{expirationDate:t}})})]}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(Pe,{title:l.formatMessage({id:"planRenewalModal.cancel",defaultMessage:"Cancel"}),color:"secondary",onClick:i}),e.jsx(Pe,{title:l.formatMessage({id:"planRenewalModal.confirm",defaultMessage:"Confirm"}),color:"primary",onClick:a,loading:o})]})]})})}const Qe=ie.PLUS;function dn(s,t){const a=s.data.subscriptionStatus.planType,o=s.getNextPlanType();let i=s.getDaysUntilPlanChanges(),l=o===ie.PLUS&&a===me.PRO;return t&&!l&&(i=s.getDaysUntilPlanExpires(),l=!0),{daysUntilPlanChanges:i,isDowngradeScheduled:l}}function un(s,t){const a=Pt(new Date,s);return new Intl.DateTimeFormat(t,{year:"numeric",month:"short",day:"numeric"}).format(a)}const er=({analyticsParams:s,currentAccount:t,isPlanLoading:a,onSubmit:o,setIsPlanLoading:i,shouldShowAdditionalLinks:l=!0,isProduceDesign:r=!0,plusPricingPlanProduce:d=null,selectedCountry:c})=>{const{data:g,isError:m}=ln(),u=t.features,p=w(),h=J(),[b,y]=f.useState(!1),[k,N]=f.useState(!1),[P,L]=f.useState(!1),{recentlyDowngraded:D,recentlyCanceled:_,setRecentlyCanceled:E}=Ft(),G=[],F=t.isOrWasPaidCustomer(),q=t.hasPaidSubscription(),U=q&&t.isPlus(),z=q&&!(t.isPlus()||t.isWorkspacePlan()),H=t.getLastActiveSubscription(),{hasSignedUpForWaitlist:X,signUpForWaitlist:O}=Lt(Qe),T=et(),C=u.includes("disable_plus_upgrade_ui")&&!F,Te=u.includes("show_cancel_plus_ui"),{daysUntilPlanChanges:Ee,isDowngradeScheduled:ze}=dn(t,D),I={...s,planType:Qe,isUpgradeUiDisabled:C},ss=async()=>{i(!0),j.logEvent(S.clickAccountPaymentCheckout,I),ee.logEvent("chatgpt_account_payment_modal_upgrade_button_click",Qe);try{const Me=await B.getCheckoutLink(u);o?.(),j.logEvent(S.navigatingToAccountPaymentCheckout,{...I,url:Me.url}),ee.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",Qe,{url:Me.url}),window.location.href=Me.url}catch{h.warning(p.formatMessage(we.paymentErrorWarning),{hasCloseButton:!0})}i(!1)},ts=()=>{y(!0),j.logEventWithStatsig(S.cancelPlusStart,"cancel_plus_start",{...I,cancel_start_source:"manage plan"})},_e=async()=>{i(!0),j.logEvent(S.clickAccountCustomerPortal,I);try{const Me=await B.fetchCustomerPortalUrl();j.logEvent(S.navigatingToAccountCustomerPortal,I),location.href=Me.url}catch{h.warning(p.formatMessage(we.accountErrorWarning),{hasCloseButton:!0})}i(!1)},Ie=()=>{j.logEvent(S.clickAccountManageIos,I)},as=()=>{j.logEvent(S.clickAccountManageAndroid,I)},ns=U&&H.purchase_origin_platform===re.MOBILE_IOS,$e=U&&H.purchase_origin_platform===re.MOBILE_ANDROID,qe=U&&(H.purchase_origin_platform===re.WEBAPP||H.purchase_origin_platform===re.GRANTED)&&t?.hasCustomerObject(),Se=qe&&!_&&U&&t.willRenewSubscription(),fs=nt(),Ts=d||Qs(rn({currentAccount:t,pricingType:fs}));T&&!U&&G.push(e.jsx(Y,{to:_a,target:"_blank",className:"px-2 underline",children:e.jsx(n,{...we.limitsApply})},"row-plus-plan-usage-limits")),ns&&G.push(e.jsx(Y,{to:st,target:"_blank",onClick:Ie,className:"px-2 underline",children:p.formatMessage(v.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),$e&&G.push(e.jsx(Y,{to:tt,target:"_blank",onClick:as,children:p.formatMessage(v.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),qe&&(G.push(e.jsx(Y,{to:"#",onClick:_e,className:"px-2 underline",children:e.jsx(n,{...v.manageSubscriptionWeb.callToAction})},"row-manage-subscription-link")),Se&&Te&&G.push(e.jsxs("button",{children:[e.jsx("span",{onClick:ts,className:"cursor-pointer px-2 underline",children:e.jsx(n,{...v.cancelSubscriptionWeb.callToAction})}),e.jsx(on,{isOpen:b,onClose:()=>y(!1),onCancelationComplete:()=>E(!0),analyticsParams:I})]},"row-cancel-subscription-link"))),U&&F&&G.push(e.jsx(Y,{target:"_blank",to:ks,onClick:Ps,className:"px-2 underline",children:e.jsx(n,{...we.billingHelp})},"row-plus-plan-help-link"));const hs=function(){N(!k)},ot=()=>{z?(j.logEvent(S.clickAccountPaymentCheckout,I),ee.logEvent("chatgpt_account_payment_modal_upgrade_button_click",Qe),L(!0)):ss()},it=m||!g||!g.value?ot:()=>{hs()},Fe=(Me,lt)=>e.jsx(Ke,{planType:Qe,isCurrentPlan:U,disabled:Me,onClick:lt,testId:"select-plan-button-plus-upgrade",isProduceDesign:r,activeColor:z?"secondary":void 0,children:a&&!P?e.jsx(Ne,{}):U?p.formatMessage(Ts.callToAction.active):p.formatMessage(Ts.callToAction.inactive)});return e.jsx(ps,{planName:"plus",pricingPlan:Ts,icon:e.jsx(Ya,{className:"icon-md text-green-600"}),showForLine:!U&&!T,callToActionButton:C?e.jsx("div",{className:"relative w-full",children:e.jsx(fe,{side:"bottom",sideOffset:20,label:p.formatMessage(v.disabledHighDemand.hoverText),children:e.jsx(Ke,{planType:Qe,disabled:X,onClick:O,isCurrentPlan:U,testId:"select-plan-button-plus-waitlist",isProduceDesign:r,activeColor:z?"secondary":void 0,children:e.jsx(n,{...X?v.signUpForWaitlist.inactive:v.signUpForWaitlist.active})})})}):e.jsxs("div",{children:[Ee&&ze?e.jsx(fe,{side:"top",sideOffset:20,label:e.jsx(n,{id:"8/N1rV",defaultMessage:"Your subscription will change to Plus on {date}.",values:{date:un(Ee,p.locale)}}),children:Fe(!0,()=>{})}):e.jsx("div",{className:U?"":"bg-green-600 bg-opacity-5",children:Fe(U||a,it)}),e.jsx(Dt,{isOpen:k,onClose:hs,onContinue:ss}),P&&e.jsx(Bt,{isOpen:P,onClose:()=>L(!1),accountId:t.id,initialPlanType:me.PRO,updatedPlanType:ie.PLUS})]}),additionalLinks:l?G:[],plusInactive:!q,selectedCountry:c})},sr=()=>es({queryKey:["has-app-store-subscription-in-billing-retry"],queryFn:async()=>await B.hasAppStoreSubscriptionInBillingRetryResponse()}),Fs="pro",tr=({analyticsParams:s,currentAccount:t,isPlanLoading:a,onSubmit:o,setIsPlanLoading:i,upgradeButtonText:l=Ls.callToAction.inactive,selectedCountry:r})=>{const{data:d,isError:c}=sr(),g=t.features,m=w(),u=J(),[p,h]=f.useState(!1),[b,y]=f.useState(!1),k=t.getLastActiveSubscription(),N=t.isOrWasPaidCustomer(),P=t.hasPaidSubscription()&&!(t.isPlus()||t.isWorkspacePlan()),{recentlyDowngraded:L}=Ft(),{daysUntilPlanChanges:D,isDowngradeScheduled:_}=dn(t,L),E=Ls,G=[],F={...s,planType:Fs},q=P&&k.purchase_origin_platform===re.MOBILE_IOS,U=P&&k.purchase_origin_platform===re.MOBILE_ANDROID,z=P&&(k.purchase_origin_platform===re.WEBAPP||k.purchase_origin_platform===re.GRANTED)&&t?.hasCustomerObject(),H=async()=>{i(!0),j.logEvent(S.clickAccountPaymentCheckout,F),ee.logEvent("chatgpt_account_payment_modal_upgrade_button_click",Fs);try{const I=await B.getCheckoutLink(g,{plan_name:"chatgptpro"});o?.(),j.logEvent(S.navigatingToAccountPaymentCheckout,{...F,url:I.url}),ee.logEvent("chatgpt_account_payment_modal_navigating_to_checkout",Fs,{url:I.url}),window.location.href=I.url}catch{u.warning(m.formatMessage(we.paymentErrorWarning),{hasCloseButton:!0})}i(!1)},X=async()=>{i(!0),j.logEvent(S.clickAccountCustomerPortal,F);try{const I=await B.fetchCustomerPortalUrl();j.logEvent(S.navigatingToAccountCustomerPortal,F),location.href=I.url}catch{u.warning(m.formatMessage(we.accountErrorWarning),{hasCloseButton:!0})}i(!1)},O=()=>{j.logEvent(S.clickAccountManageIos,F)},T=()=>{j.logEvent(S.clickAccountManageAndroid,F)};q&&G.push(e.jsx(Y,{to:st,target:"_blank",onClick:O,className:"px-2 underline",children:m.formatMessage(v.manageSubscriptionIos.callToAction)},"row-plus-plan-manage-ios")),U&&G.push(e.jsx(Y,{to:tt,target:"_blank",onClick:T,children:m.formatMessage(v.manageSubscriptionAndroid.callToAction)},"row-plus-plan-manage-android")),z&&G.push(e.jsx(Y,{to:"#",onClick:X,className:"px-2 underline",children:e.jsx(n,{...v.manageSubscriptionWeb.callToAction})},"row-manage-subscription-link")),N&&G.push(e.jsx(Y,{target:"_blank",to:ks,onClick:Ps,className:"px-2 underline",children:e.jsx(n,{...we.billingHelp})},"row-plus-plan-help-link"));const C=function(){h(!p)},Te=function(){y(!b)},Ee=()=>{t.hasPaidSubscription()&&t.isPlus()?(j.logEvent(S.clickAccountPaymentCheckout,F),ee.logEvent("chatgpt_account_payment_modal_upgrade_button_click",Fs),y(!0)):H()},ze=c||!d||!d.value?Ee:()=>{C()};return e.jsx(ps,{planName:"pro",pricingPlan:E,icon:e.jsx(pi,{className:"icon-md primary"}),showForLine:!1,callToActionButton:e.jsxs("div",{children:[_&&D?e.jsx(fe,{side:"top",sideOffset:20,label:e.jsx(n,{id:"jgTAPh",defaultMessage:"Your subscription will remain active until {date}, when it will change to Plus.",values:{date:un(D,m.locale)}}),children:e.jsx(Z,{fullWidth:!0,size:"large",color:"primary",disabled:P||a,"data-testid":"select-plan-button-pro-upgrade",className:P||a?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:a&&!b?e.jsx(Ne,{}):P?m.formatMessage(Ls.callToAction.active):m.formatMessage(l)})}):e.jsx(Z,{fullWidth:!0,size:"large",color:"primary",disabled:P||a,onClick:ze,"data-testid":"select-plan-button-pro-upgrade",className:P||a?"border-none bg-token-sidebar-surface-tertiary font-semibold text-token-text-primary hover:bg-token-sidebar-surface-tertiary dark:bg-token-text-tertiary dark:text-token-text-primary dark:hover:bg-token-text-tertiary":"",children:a&&!b?e.jsx(Ne,{}):P?m.formatMessage(Ls.callToAction.active):m.formatMessage(l)}),e.jsx(Dt,{isOpen:p,onClose:C,onContinue:H}),b&&e.jsx(Bt,{isOpen:b,onClose:Te,accountId:t.id,initialPlanType:ie.PLUS,updatedPlanType:me.PRO})]}),additionalLinks:G,className:"bg-token-main-surface-primary",selectedCountry:r})},ar=({analyticsParams:s,currentAccount:t,isPlanLoading:a,isTeamEnabled:o,selectedTab:i,setIsPlanLoading:l,shouldSplitBetweenPersonalAndBusiness:r,isProduceDesign:d,isProduceEnabled:c,selectedCountry:g})=>{const m=nr({analyticsParams:s,currentAccount:t,isPlanLoading:a,isTeamEnabled:o,selectedTab:i,setIsPlanLoading:l,shouldSplitBetweenPersonalAndBusiness:r,isProduceDesign:d,isEnterpriseEnabled:!1,isProduceEnabled:c,selectedCountry:g});return e.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-3 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:m})};function nr({analyticsParams:s,currentAccount:t,isPlanLoading:a,isTeamEnabled:o,selectedTab:i,setIsPlanLoading:l,shouldSplitBetweenPersonalAndBusiness:r,isProduceDesign:d,isEnterpriseEnabled:c,isProduceEnabled:g,selectedCountry:m}){const u=[],p=t.hasPaidSubscription();return r?i==="personal"?(p||u.push("free"),u.push("plus"),g&&u.push("pro")):(o&&u.push("team"),c&&u.push("enterprise")):(p||u.push("free"),(!t.isTeam()||!t.isEnterprisey()&&c)&&(u.push("plus"),u.push("pro")),o&&u.push("team"),c&&u.push("enterprise")),u.length===0&&he.addError(new Error("Account payment modal missing columns")),u.map(h=>{switch(h){case"free":return e.jsx(an,{isProduceDesign:d,freePricingPlanProduce:Pl,selectedCountry:m},h);case"plus":return e.jsx(er,{analyticsParams:s,currentAccount:t,setIsPlanLoading:l,isPlanLoading:a,isProduceDesign:d,plusPricingPlanProduce:Tl,selectedCountry:m},h);case"team":return e.jsx(nn,{analyticsParams:s,isPlanLoading:a,isProduceDesign:d,teamPricingPlanProduce:Al,selectedCountry:m},h);case"enterprise":return e.jsx(tn,{isProduceDesign:d,enterprisePricingPlanProduce:Nl,selectedCountry:m},h);case"pro":return e.jsx(tr,{analyticsParams:s,currentAccount:t,setIsPlanLoading:l,isPlanLoading:a,selectedCountry:m},h)}})}function or(s){return s.split("#")[1]===xo}function ut(s){return s.split("#")[1]===Mo}function ir({currentAccount:s,initTab:t}){const[a,o]=f.useState(!1),i=s.hasPaidSubscription()&&!(s.isPlus()||s.isWorkspacePlan()),{layer:l}=jt("3768341700"),r=l.get("is_produce_design",!1),d=l.get("is_country_selector_enabled",!1),c=d,g=f.useMemo(()=>s.subscriptionAnalyticsParams,[s]),m=ms(),u=J(),p=f.useCallback(()=>{j.logEvent(S.closeAccountPaymentModal,g),Ea(m)},[g,m]);f.useEffect(()=>{const C=bo();j.logEvent(S.accountPaymentModalShow,{...g,location:C}),ee.logEvent("chatgpt_account_payment_modal_show",null,{location:C??""})},[g]),f.useEffect(()=>{const C=localStorage.getItem(`subscriptionUpdateMessage_${s.id}`);if(C){localStorage.removeItem(`subscriptionUpdateMessage_${s.id}`),u.success(C,{hasCloseButton:!0});const Te=setTimeout(()=>{p()},5e3);return()=>{clearTimeout(Te)}}},[s.id,u,p]);const h=t??(s.isPersonalAccount()?"personal":"business"),{isSplitBetweenPersonalAndBusinessEnabled:b,isModalFullscreen:y,isTeamEnabled:k}=It(),[N,P]=f.useState(h),L=wt(),D=b&&L,_=C=>{P(C),j.logEvent(S.accountPaymentModalToggleClicked,{selectedTab:C}),ee.logEvent("chatgpt_account_payment_modal_toggle_clicked",null,{selectedTab:C})},{value:E}=Hs("1028682714"),{currentLocale:G}=wa(),F=ul(G),q=Qn();let U="";"userCountry"in q&&(U=q.userCountry);const z=dl(U,!c),[H,X]=f.useState(z),O=C=>{he.addAction("User has changed selected country in pricing modal",{old_selected_country:H,new_selected_country:C}),j.logEvent(S.selectedCountryChangedInPricingModal,{old_selected_country:H,new_selected_country:C}),ee.logEvent("chatgpt_selected_country_changed_in_pricing_modal",C,{old_selected_country:H,new_selected_country:C}),X(C)},T=lr({analyticsParams:g,currentAccount:s,isModalFullscreen:y,isPlanLoading:a,isTeamEnabled:k,selectedTab:N,setIsPlanLoading:o,shouldSplitBetweenPersonalAndBusiness:D,isProduceDesign:r,isEnterpriseEnabled:!1,selectedCountry:H});return y?e.jsxs(K,{size:"fullscreen",isOpen:!0,onClose:p,type:"success",className:"flex flex-col",isProduceDesign:r,children:[e.jsxs("div",{className:"relative grid grid-cols-[1fr_auto_1fr] px-6 py-4 md:pb-10 md:pt-[4.5rem]",children:[e.jsx("div",{}),e.jsx("span",{className:"mb-1 mt-1 text-2xl font-semibold md:mb-0 md:mt-0 md:text-3xl",children:i?e.jsx(n,{...Ze.proModalTitle}):e.jsx(n,{...Ze.modalTitle})}),e.jsx("button",{className:"justify-self-end text-token-text-primary opacity-50 transition hover:opacity-75 md:absolute md:right-6 md:top-6",onClick:()=>{p()},children:e.jsx(Nt,{className:Ve({"h-5 w-5":!L,"icon-lg":L})})})]}),s.isPersonalAccount()&&D?e.jsx("div",{className:"mb-3 flex justify-center md:mb-10",children:e.jsx("div",{className:"w-[fit-content]",children:e.jsx(ia,{value:N,onChange:_})})}):null,e.jsx("div",{children:E?e.jsx(ar,{analyticsParams:g,currentAccount:s,isPlanLoading:a,isTeamEnabled:k,selectedTab:N,setIsPlanLoading:o,shouldSplitBetweenPersonalAndBusiness:D,isProduceDesign:r,isProduceEnabled:E,selectedCountry:H}):e.jsx("div",{className:"flex flex-col justify-center gap-4 px-3 py-3 md:min-h-[30rem] md:flex-row md:gap-0 md:py-0",children:T})}),e.jsxs("div",{className:"relative grid grid-cols-[1fr_auto_1fr]",children:[e.jsx("div",{}),e.jsxs("div",{className:"mb-12 mt-8 flex flex-col items-center justify-center gap-2 text-sm text-token-text-secondary md:mb-8 md:mt-8",children:[e.jsx(Ka,{}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(n,{...Ze.needMoreCapabilities}),e.jsx("div",{children:e.jsx(n,{...Ze.seeChatGptEnterprise,values:{link:C=>e.jsx(Y,{target:"_blank",to:xt,onClick:()=>{j.logEvent(S.clickSeeEnterpriseLink),ee.logEvent("chatgpt_account_payment_modal_enterprise_link_clicked")},className:"mx-1 underline",children:C})}})})]})]}),e.jsx("div",{className:"mb-12 mt-8 flex flex-col items-end justify-end pr-3 opacity-50 transition hover:opacity-75 md:mb-8 md:mt-8",children:c?e.jsx(ml,{value:H,onValueChange:O,displayNameFormatterFn:F,testId:"country-selector-in-pricing-modal"}):null})]})]}):e.jsx(K,{size:"custom",noPadding:!0,isOpen:!0,onClose:p,type:"success",className:Ve("focus-none !bg-transparent !shadow-none outline-none transition-width duration-0",T.length===1&&"md:max-w-lg",T.length===2&&"md:max-w-3xl",T.length===3&&"md:max-w-5xl"),children:e.jsxs("div",{className:"popover relative flex grow flex-col items-start justify-center overflow-hidden rounded-md border border-token-border-light bg-token-main-surface-primary shadow-md",children:[e.jsxs("div",{className:"flex w-full flex-row items-center justify-between border-b border-token-border-light px-8 py-6",children:[e.jsx("span",{className:"text-xl font-semibold",children:i?e.jsx(n,{...Ze.proModalTitle}):e.jsx(n,{...Ze.modalTitle})}),e.jsxs("div",{className:"flex gap-4",children:[s.isPersonalAccount()&&D?e.jsx(ia,{value:N,onChange:_}):null,e.jsx(Zn,{onClick:()=>{p()}})]})]}),D?e.jsx(La,{children:e.jsx("div",{className:"w-full",children:e.jsx(Et.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},exit:{opacity:0},children:e.jsx("div",{className:"center flex flex-col md:min-h-[30rem] md:flex-row",children:T})},N)})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex w-full flex-col md:flex-row",children:T}),e.jsx("div",{className:"flex w-full items-center justify-center border-t border-token-border-light px-8 py-6",children:e.jsx("div",{className:"text-sm text-token-text-primary sm:flex sm:items-center",children:e.jsx(n,{...Ze.modalFooterCapabilities,values:{link:C=>e.jsx(Y,{target:"_blank",to:xt,onClick:()=>{j.logEvent(S.clickSeeEnterpriseLink),ee.logEvent("chatgpt_account_payment_modal_enterprise_link_clicked")},className:"mx-1 underline",children:C})}})})})]})]})})}function lr({analyticsParams:s,currentAccount:t,isPlanLoading:a,isModalFullscreen:o,isTeamEnabled:i,selectedTab:l,setIsPlanLoading:r,shouldSplitBetweenPersonalAndBusiness:d,isProduceDesign:c,isEnterpriseEnabled:g,selectedCountry:m}){const u=[],p=t.hasPaidSubscription();return d?l==="personal"?(p||u.push("free"),u.push("plus")):(i&&u.push("team"),(!o||g)&&u.push("enterprise")):(p||u.push("free"),t.isTeam()||u.push("plus"),i&&u.push("team"),g&&u.push("enterprise")),u.length===0&&he.addError(new Error("Account payment modal missing columns")),u.map(h=>{switch(h){case"free":return e.jsx(an,{isProduceDesign:c,selectedCountry:m},h);case"plus":return e.jsx(Bl,{analyticsParams:s,currentAccount:t,setIsPlanLoading:r,isPlanLoading:a,isProduceDesign:c,selectedCountry:m},h);case"team":return e.jsx(nn,{analyticsParams:s,isPlanLoading:a,isProduceDesign:c,selectedCountry:m},h);case"enterprise":return e.jsx(tn,{isProduceDesign:c,selectedCountry:m},h)}})}const Ze=V({modalTitle:{id:"AccountPaymentModal.modalTitle",defaultMessage:"Upgrade your plan"},proModalTitle:{id:"AccountPaymentModal.proModalTitle",defaultMessage:"Choose your plan"},modalFooterCapabilities:{id:"AccountPaymentModal.modalFooterCapabilities",defaultMessage:"Need more capabilities? See <link> ChatGPT Enterprise </link>"},needMoreCapabilities:{id:"SdJWr7",defaultMessage:"Need more capabilities for your business?"},seeChatGptEnterprise:{id:"7C5fuF",defaultMessage:"See<link>ChatGPT Enterprise</link>"}});function rr({workspaceName:s,onChangeWorkspaceName:t}){const a=w();return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 flex-wrap",children:[e.jsx("label",{htmlFor:"workspace-name",className:"block pb-1 text-lg font-semibold text-token-text-primary",children:e.jsx(n,{...gt.workspaceNameLabel})}),e.jsx("p",{className:"font-base text-sm text-token-text-secondary",children:e.jsx(n,{...gt.workspaceNameDescription})})]}),e.jsx(Vs,{ariaLabel:!1,type:"text",name:"workspace-name",placeholder:a.formatMessage(gt.exampleTeamWorkspaceName),value:s,onChange:o=>t(o.target.value),maxLength:64})]})}const gt=V({workspaceNameLabel:{id:"createWorkspace.workspaceNameLabel",defaultMessage:"Workspace name"},workspaceNameDescription:{id:"createWorkspace.workspaceNameDescription",defaultMessage:"Set a workspace name for your team. The name can be changed at any time."},exampleTeamWorkspaceName:{id:"createWorkspace.exampleTeamWorkspaceName",defaultMessage:"Acme Inc."}});var gn=(s=>(s.FLEXIBLE="month",s.ANNUAL="year",s))(gn||{});const cr=25*12,dr=30,ur=Ki(gn),gr=({isOpen:s,onClose:t,onSubmit:a})=>{const[o,i]=f.useState(""),l=w();return e.jsxs(K,{type:"success",isOpen:s,onClose:t,className:"max-w-lg",showCloseButton:!0,title:e.jsx(n,{...pe.createWorkspace}),children:[e.jsx("div",{className:"flex flex-col justify-center bg-token-main-surface-primary pb-2",children:e.jsx(rr,{workspaceName:o,onChangeWorkspaceName:i})}),e.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[e.jsx(Pe,{title:l.formatMessage(pe.cancel),onClick:t}),e.jsx(Pe,{title:l.formatMessage(pe.selectBillingOption),onClick:()=>{a(o)},disabled:o=="",color:"primary",className:"ml-4"})]})]})},mr=ve.p`text-base font-semibold mb-3 mt-3`,pr=({isOpen:s,onClose:t,onSubmit:a,minimumSeats:o})=>{const[i,l]=f.useState("year"),[r,d]=f.useState(!1),c=w(),[g,m]=f.useState(o),[u]=f.useState(new Date),p=hr[i],h=o>Mt?o:Mt;return e.jsx(K,{type:"success",isOpen:s,onClose:t,size:"custom",noPadding:!0,className:"max-w-3xl",showCloseButton:!0,title:c.formatMessage(pe.selectTeamPlanModalTitle),children:e.jsxs("div",{className:"grid grid-flow-row grid-cols-3",children:[e.jsxs(jo,{className:"col-span-3 grid md:col-span-2 md:grid-cols-2",defaultValue:i,onValueChange:b=>{ur(b)&&l(b)},children:[e.jsx(Qt,{billingType:"month",...Co}),e.jsx(Qt,{billingType:"year",...vo})]}),e.jsxs("div",{className:"col-span-3 overflow-hidden border-l border-token-main-surface-tertiary bg-token-main-surface-secondary p-6 md:col-span-1",children:[e.jsx("label",{className:"mb-3 block text-base font-semibold",htmlFor:"seats",children:e.jsx(n,{...pe.seatsTitle})}),e.jsx(So,{numSeats:g,minSeats:h,setNumSeats:m}),e.jsx(ko,{}),e.jsx(mr,{children:e.jsx(n,{...pe.summaryTitle})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"mb-2",children:e.jsx(n,{...p.name})}),e.jsxs(wo,{children:[e.jsx(Zt,{children:e.jsx(n,{...p.billed,values:{date:e.jsx(Ct,{value:u})}})}),e.jsx(Zt,{children:e.jsx("b",{children:e.jsx(n,{...p.total,values:{totalCost:(g||0)*(i==="year"?cr:dr)}})})})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(Pe,{title:c.formatMessage(pe.continueToBillingButton),onClick:()=>{d(!0),a(i,g)},disabled:!1,loading:r,color:"primary"})})]})]})})};function fr({isOpen:s,onClose:t,minimumSeats:a,existingAccount:o=void 0}){const i=w(),l=J(),[r,d]=f.useState(o?yo(i,o):""),c=Zs(),g=async(m,u)=>{try{const p=await B.getCheckoutLink(c,{plan_name:"chatgptteamplan",team_plan_data:{workspace_name:r,price_interval:m,seat_quantity:u,existing_workspace_id:o?.id}});window.location.href=p.url}catch{l.warning(i.formatMessage(pe.paymentErrorWarning),{hasCloseButton:!0})}};return r==""?e.jsx(gr,{isOpen:s,onClose:t,onSubmit:m=>{d(m)}}):e.jsx(pr,{isOpen:s,onClose:t,onSubmit:(m,u)=>{g(m,u)},minimumSeats:a})}const hr={month:{name:pe.flexiblePlanSelected,billed:pe.flexiblePlanBilled,total:pe.flexiblePlanTotal},year:{name:pe.annualPlanSelected,billed:pe.annualPlanBilled,total:pe.annualPlanTotal}};function xr(){const{isUnauthenticated:s}=qs(),t=ms(),{pathname:a,hash:o}=Pa(),i=Na(),l=ut(o)?"3686510565":"423371448",{config:r}=Jn(l),d=r.get("enabled",!1),c=ut(o)&&d,g=(or(o)||ut(o))&&!s;return f.useEffect(()=>{!c||!s||i({authType:"signup",callbackUrl:window.location.href})},[c,s,i]),f.useEffect(()=>{a.startsWith("/auth")||cs.getCookie(ds.ShowPaymentModal)&&(cs.deleteCookie(ds.ShowPaymentModal),Ia(t,"Show payment modal cookie"))},[]),f.useEffect(()=>{g?(ue.closeAllActiveModals(),ue.openModal(Ce.AccountPayment)):ue.closeModal(Ce.AccountPayment)},[g]),{isOpen:g,isTeamAccountIntent:c}}function Mr(s){return s.type===us.GDRIVE_SYNC_CONNECTOR||s.type===us.SLACK_SYNC_CONNECTOR?`${window.location.origin}/ca/${s.id}/oauth/callback`:`${window.location.origin}/ccc/${s.id}/oauth/callback`}const mn=({entry:s,isConnected:t,onDisconnect:a,onConnect:o,redirectUri:i})=>t?e.jsx(Z,{onClick:()=>a(s?.type),color:"danger-outline",size:"small",children:e.jsx(n,{...da.disconnect})}):e.jsx(Z,{onClick:()=>o({id:s.id},"settings_connected_apps",Mr(s),i),color:"secondary",size:"small",children:e.jsx(n,{...da.connect})}),da=V({connect:{id:"connectorSettings.connect",defaultMessage:"Connect"},disconnect:{id:"connectorSettings.disconnect",defaultMessage:"Disconnect"}});function mt({entry:s,description:t}){let a;switch(s.type){case le.GDRIVE:a=za;break;case le.O365:case le.O365_PERSONAL:case le.O365_BUSINESS:a=xi;break;case le.CONFLUENCE:a=hi;break;case le.JIRA:a=fi;break}const o=w();return e.jsx(R,{children:e.jsxs("div",{className:"flex flex-col gap-2 pb-1 pt-3",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(a,{className:"icon-lg"}),e.jsx("p",{className:"text-md flex-1 font-semibold text-token-text-primary",children:Po(s.type,o)}),e.jsx(mn,{entry:s,isConnected:!!s.access_token,onDisconnect:Da,onConnect:Fa,redirectUri:"#settings/ConnectorSettings"})]}),e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{...t})})]})})}function ua({type:s}){let t,a=ls.googleDriveSyncName,o=ls.googleDriveSyncDesc;switch(s){case us.GDRIVE_SYNC_CONNECTOR:t=za;break;case us.SLACK_SYNC_CONNECTOR:t=g=>e.jsx("img",{src:Ao,...g}),a=ls.slackSyncName,o=ls.slackSyncDesc;break}const[i]=Xn(),l=i.get("model")??"gpt-4o-gdrive",r=w(),{connectors:d}=To([s]),c=d.get(s);return c?e.jsx("div",{children:e.jsx(R,{children:e.jsxs("div",{className:"flex flex-col gap-2 pb-1 pt-3",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(t,{className:"icon-lg"}),e.jsx("p",{className:"text-md flex-1 font-semibold text-token-text-primary",children:r?.formatMessage(a)}),e.jsx(mn,{entry:c,isConnected:!!c.access_token,onDisconnect:Da,onConnect:Fa,redirectUri:`?model=${l}#settings/ConnectorSettings`})]}),e.jsx("p",{className:"text-xs text-token-text-secondary",children:e.jsx(n,{...o})})]})})}):null}function br(){return e.jsx("div",{children:e.jsxs(R,{children:[e.jsx("div",{className:"my-2 font-bold text-token-text-primary",children:e.jsx(n,{...ls.knowledgeDesc})}),e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{...ls.contextualAnswerDesc})})]})})}const ls=V({knowledgeDesc:{id:"connectorSettings.knowledgeDesc.1",defaultMessage:"Knowledge"},contextualAnswerDesc:{id:"connectorSettings.contextualAnswerDesc.1",defaultMessage:"Add context to your ChatGPT's knowledge."},googleDriveSyncDesc:{id:"connectorSettings.googleDriveSyncDesc.1",defaultMessage:"Sync Google Docs, Sheets, Slides and other files to your ChatGPT workspace."},googleDriveSyncName:{id:"connectorSettings.googleDriveSyncName.1",defaultMessage:"Google Drive"},slackSyncDesc:{id:"connectorSettings.slackSyncDesc.1",defaultMessage:"Sync Slack public channels, private channels, and direct messages to your ChatGPT workspace."},slackSyncName:{id:"connectorSettings.slackSyncName.1",defaultMessage:"Slack"}});function yr({clientApplications:s,isGdriveEnabled:t,isO365Enabled:a,isConfluenceEnabled:o,isJiraEnabled:i}){const{connectorConfig:l,isLoading:r}=Ba();return r?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ne,{})}):!l.size&&!s?.length?e.jsx(at,{type:"info",children:e.jsx(n,{...Xe.noConnectorSettings})}):e.jsx(jr,{clientApplications:s,connectorConfig:l,isGdriveEnabled:t,isO365Enabled:a,isConfluenceEnabled:o,isJiraEnabled:i})}function jr({clientApplications:s,connectorConfig:t,isGdriveEnabled:a,isO365Enabled:o,isConfluenceEnabled:i,isJiraEnabled:l}){const r=t.get(le.GDRIVE),d=t.get(le.O365_PERSONAL),c=t.get(le.O365_BUSINESS);t.get(le.CONFLUENCE),t.get(le.JIRA);const g=a&&!!r,m=o&&!!d,u=o&&!!c,{config:p}=eo("1001765573"),h=p.get("ca_enabled",!1),b=p.get("ca_sk_enabled",!1),[y,k]=f.useState(!1),[N,P]=f.useState(!1),[L,D]=f.useState(!1);f.useEffect(()=>{(async()=>{if(h)try{const[F,q,U]=await Promise.all([B.checkOrgExist(),B.getKnowledgeStoreStatus("google_drive"),B.getKnowledgeStoreStatus("slack")]);k(F.exist),P(q.credential_type==="user_oauth"),D(U.credential_type==="user_oauth")}catch{k(!1),P(!1),D(!1)}})()},[h]);const _=s?.filter(({type:G})=>G==="apple"),E=y&&(N||L);return e.jsxs("div",{className:"flex flex-col",children:[e.jsx(R,{children:e.jsx("div",{className:"my-2",children:e.jsx(n,{...Xe.connectorsTitle})})}),r&&g&&e.jsx(mt,{entry:r,description:Xe.googleDriveDesc}),d&&m&&e.jsx(mt,{entry:d,description:Xe.o365Desc}),c&&u&&e.jsx(mt,{entry:c,description:Xe.o365BusinessDesc}),!1,!1,_&&e.jsx(Cr,{clientApplications:_}),h&&E&&e.jsxs(e.Fragment,{children:[e.jsx(br,{}),N&&e.jsx(ua,{type:us.GDRIVE_SYNC_CONNECTOR}),b&&L&&e.jsx(ua,{type:us.SLACK_SYNC_CONNECTOR})]})]})}function Cr({clientApplications:s}){const{mutate:t,isPending:a}=No();return e.jsx(e.Fragment,{children:s.map(o=>e.jsx(vr,{clientApplication:o,disabled:a,onDisconnect:()=>{j.logEventWithStatsig(S.connectorSettingsClientApplicationDisconnectButtonClicked,"chatgpt_connector_settings_client_application_disconnect_button_clicked",{id:o.id,name:o.name,type:o.type}),t(o.id)}},o.id))})}function vr({clientApplication:s,disabled:t,onDisconnect:a}){return e.jsx(R,{children:e.jsxs("div",{className:"flex flex-col gap-2 pb-1 pt-3",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx(Mi,{className:"icon-lg"}),e.jsx("p",{className:"text-md flex-1 font-semibold text-token-text-primary",children:s.name}),e.jsx(Z,{onClick:a,color:"danger-outline",size:"small",disabled:t,children:e.jsx(n,{...Xe.disconnect})})]}),e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{...Xe.appleDesc})})]})})}const Xe=V({connectorsTitle:{id:"connectorSettings.connectorsTitle",defaultMessage:"Connect apps to access their information in ChatGPT."},googleDriveDesc:{id:"connectorSettings.googleDriveDesc.1",defaultMessage:"Upload Google Docs, Sheets, Slides and other files."},o365Desc:{id:"connectorSettings.o365Desc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint and other files."},o365BusinessDesc:{id:"connectorSettings.o365BusinessDesc.1",defaultMessage:"Upload Microsoft Word, Excel, PowerPoint, and other files, including those from SharePoint sites."},noConnectorSettings:{id:"connectorSettings.noConnectorSettings",defaultMessage:"Unable to get connected apps"},appleDesc:{id:"P5OVxG",defaultMessage:"Get personalized ChatGPT responses and Plus benefits when using Siri and Writing Tools."},disconnect:{id:"connectorSettings.disconnectButton",defaultMessage:"Disconnect"}});function Sr({isOpen:s,onClose:t}){const a=w(),o=J(),i=xe(),{data:l}=Ja(),r=_t(i?.id),d=i?.data.subscriptionStatus.planType,c=vs(d.toLowerCase()),g=Ye(),m=async()=>{if(!i)throw new Error("No account!");await r.mutateAsync(i?.id,{onError:()=>{o.danger(a.formatMessage(ga.cancelFailure),{duration:5})},onSuccess:()=>{g.invalidateQueries({queryKey:["account-status"]}),o.info(a.formatMessage(ga.cancelSuccess),{duration:5}),setTimeout(()=>{t()},5e3)}})};f.useEffect(()=>{r.isSuccess&&t()},[r.isSuccess,t]);const u=l?.active_until?new Date(l.active_until).toLocaleDateString(a.locale,{year:"numeric",month:"short",day:"numeric"}):"";return e.jsx(K,{type:"success",isOpen:s,onClose:t,size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:a.formatMessage({id:"cancelSubscriptionModal.title",defaultMessage:"Subscription Cancellation"}),isProduceDesign:!0,children:e.jsxs("div",{className:"p-5",children:[e.jsx("p",{className:"text-token-text-secondary",children:e.jsx(n,{id:"cancelSubscriptionModal.canceledSubscription",defaultMessage:"Your {planName} subscription will be canceled but will remain active until the end of your billing period on {expirationDate}.",values:{planName:c,expirationDate:u}})}),e.jsxs("div",{className:"mt-8 flex justify-end gap-2",children:[e.jsx(Pe,{title:a.formatMessage({id:"cancelSubscriptionModal.goBack",defaultMessage:"Go Back"}),color:"secondary",onClick:t}),e.jsx(Pe,{title:a.formatMessage({id:"cancelSubscriptionModal.cancel",defaultMessage:"Cancel subscription"}),color:"danger",onClick:()=>m()})]})]})})}const ga=V({cancelSuccess:{id:"cancelSubscriptionModal.cancelSuccess",defaultMessage:"Your subscription has been canceled."},cancelFailure:{id:"cancelSubscriptionModal.cancelFailure",defaultMessage:"Something went wrong while canceling your subscription."}});function kr(){return new URL(window.location.href).searchParams.get("disable_mfa")!=null}function wr({onClose:s,onConfirm:t}){const a=w();return e.jsx(Ua,{isOpen:!0,title:a.formatMessage(ma.disableConfimationTitle),confirmText:a.formatMessage(ma.disable),onConfirm:t,onClose:s,primaryButtonColor:"danger",children:e.jsx("div",{children:e.jsx(n,{id:"postSigninDisableConfimationModal.description.1",defaultMessage:"Are you sure you want to disable multi-factor authentication? You will no longer need to provide a verification code when you log into your account."})})})}function Pr(s){const t=s.map(a=>Tt[a]).filter(a=>a!==void 0);return t.length===1?t[0]:e.jsx(n,{id:"confirmEnableMfaForByPassModal.otherAccount",defaultMessage:"another account"})}function Tr({mfaInfo:s,onEnableMFA:t,onCancel:a}){const o=w(),{session:i}=Js(),r=i?.user?.idp,d=(r?Tt[r]:void 0)??e.jsx(n,{id:"confirmEnableMfaForByPassModal.yourAccount",defaultMessage:"your current account"}),c=Pr(s.otherProvidersWithoutMfa??[]);return e.jsx(Ua,{isOpen:!0,title:o.formatMessage({id:"confirmEnableMfaForByPassModal.title",defaultMessage:"Enable multi-factor authentication (MFA)"}),confirmText:o.formatMessage({id:"confirmEnableMfaForByPassModal.enableMfa",defaultMessage:"Enable MFA"}),onConfirm:t,onClose:a,primaryButtonColor:"primary",children:e.jsxs("div",{children:[e.jsx("p",{className:"mb-6",children:e.jsx(n,{id:"confirmEnableMfaForByPassModal.description0",defaultMessage:"You'll only be able to log in using {currentIdp} while MFA is on.",values:{currentIdp:d}})}),e.jsx("p",{children:e.jsx(n,{id:"confirmEnableMfaForByPassModal.description1",defaultMessage:"If you prefer to have MFA enabled for your account when logging in with {otherNonMfaIdp}, please sign out and log in again through that method before enabling.",values:{otherNonMfaIdp:c}})})]})})}const ma=V({disableConfimationTitle:{id:"mfaDisableConfirmationModal.title.0",defaultMessage:"Disable multi-factor authentication (MFA)"},disable:{id:"mfaDisableConfirmationModal.button",defaultMessage:"Disable MFA"}});function pn(){const{theme:s,setTheme:t}=so(),a=w();return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(n,{...Bs.theme})}),e.jsx(Wi,{value:s,onValueChange:o=>t(o),options:[{label:a.formatMessage(Bs.system),value:"system"},{label:a.formatMessage(Bs.dark),value:"dark"},{label:a.formatMessage(Bs.light),value:"light"}]})]})}const Bs=V({theme:{id:"settingsModal.theme",defaultMessage:"Theme"},system:{id:"settingsModal.system",defaultMessage:"System"},dark:{id:"settingsModal.dark",defaultMessage:"Dark"},light:{id:"settingsModal.light",defaultMessage:"Light"}});async function Ar(){let s;"keyboard"in navigator&&(s=navigator.keyboard);const t=await s?.getLayoutMap()??new Map;return s?.lock&&await s?.lock(),new Promise(a=>{const o=new Set,i=new Set;let l=!0;const r=p=>{const h=pa(p,t);h&&!o.has(h)&&(o.add(h),i.add(h))},d=p=>{const h=pa(p,t);h&&o.delete(h),o.size===0&&l&&m()},c=p=>{l&&(g(),a(void 0))},g=()=>{window.removeEventListener("keydown",r),window.removeEventListener("keyup",d),window.removeEventListener("mousedown",c),window.removeEventListener("click",c),window.removeEventListener("blur",c),clearTimeout(u),s?.unlock&&s?.unlock(),l=!1},m=()=>{g();const p=Nr(Array.from(i));a(fn({webKeys:p}))};window.addEventListener("keydown",r),window.addEventListener("keyup",d),window.addEventListener("mousedown",c),window.addEventListener("click",c),window.addEventListener("blur",c);const u=setTimeout(()=>{l&&(g(),a(void 0))},1e4)})}function Nr(s){return s.toSorted((t,a)=>{const o=Object.values($s).indexOf(t),i=o===-1?Number.MAX_SAFE_INTEGER:o,l=Object.values($s).indexOf(a),r=l===-1?Number.MAX_SAFE_INTEGER:l;return i===r?t.charCodeAt(0)-a.charCodeAt(0):i-r})}const Er=s=>/^[a-zA-Z]$/.test(s);function pa(s,t){const a=t.get(s.code)??s.key;let o;return M[s.key]?o=M[s.key]:Er(a)?o=a.toUpperCase():o=a,o}function fn(s){return s.webKeys?(s.electronAcceleratorKeys=s.webKeys.map(Ir),s.electronAcceleratorString=fa(s.electronAcceleratorKeys)):s.electronAcceleratorKeys?(s.webKeys=s.electronAcceleratorKeys.map(_r),s.electronAcceleratorString=fa(s.electronAcceleratorKeys)):s={webKeys:[],electronAcceleratorKeys:[],electronAcceleratorString:void 0},s}function _r(s){return $s[s]??s}function Ir(s){return Dr[s]??s}function hn(s){const t=new Set(Object.keys(xn)),a=s.filter(i=>!t.has(i)).length,o=s.length-a;return a===1&&o>0}const Lr=s=>{const t=s.split("+");return hn(t)?t:void 0},fa=s=>hn(s)?s.join("+"):void 0,xn={Meta:M.Meta,CmdOrCtrl:M.Mod,CommandOrControl:M.Mod,Ctrl:M.Control,Control:M.Control,Cmd:M.Mod,Command:M.Mod,Alt:M.Alt,Option:M.Alt,AltGr:M.AltGraph,Shift:M.Shift,Super:M.Super},$s={...xn,Capslock:M.CapsLock,Space:M.Space,Tab:M.Tab,Numlock:M.NumLock,Scrolllock:M.ScrollLock,Backspace:M.Backspace,Delete:M.Delete,Insert:M.Insert,Return:M.Enter,Enter:M.Enter,Home:M.Home,End:M.End,PageUp:M.PageUp,PageDown:M.PageDown,Up:M.ArrowUp,Down:M.ArrowDown,Left:M.ArrowLeft,Right:M.ArrowRight,Esc:M.Escape,Escape:M.Escape,VolumeUp:M.AudioVolumeUp,VolumeDown:M.AudioVolumeDown,VolumeMute:M.AudioVolumeMute,MediaNextTrack:M.MediaTrackNext,MediaPreviousTrack:M.MediaTrackPrevious,MediaStop:M.MediaStop,MediaPlayPause:M.MediaPlayPause,PrintScreen:M.PrintScreen,numadd:M.Add,numsub:M.Subtract,nummult:M.Multiply,numdiv:M.Divide,numdec:M.Decimal,F1:M.F1,F2:M.F2,F3:M.F3,F4:M.F4,F5:M.F5,F6:M.F6,F7:M.F7,F8:M.F8,F9:M.F9,F10:M.F10,F11:M.F11,F12:M.F12,F13:M.F13,F14:M.F14,F15:M.F15,F16:M.F16,F17:M.F17,F18:M.F18,F19:M.F19,F20:M.F20},Dr=Object.fromEntries(Object.entries($s).map(([s,t])=>[t,s]));function Fr(){const s=Oa(),t=Mn(),a=bn();return s&&(t||a)}function Br(){return e.jsxs(e.Fragment,{children:[e.jsx(Or,{}),e.jsx(Wr,{}),e.jsx(Gr,{})]})}function Mn(){const{value:s}=vt("2923133196");return s}async function Ur(){await ys?.checkForUpdates()}function Or(){const s=Mn(),[t,a]=f.useState(!1);return s&&e.jsx(e.Fragment,{children:e.jsx(R,{children:e.jsx(ye,{label:e.jsx(n,{...He.updatesSettingLabel}),disabled:t,buttonLabel:t?e.jsx(n,{...He.updateInProgressButtonLabel}):e.jsx(n,{...He.updateButtonLabel}),onClick:async()=>{try{a(!0),await Ur()}catch(o){he.addError(new Error("Sidetron Settings: Error checking for updates"),{cause:o})}finally{a(!1)}},description:e.jsx(n,{...He.updateSettingDescription,values:{version:to(navigator.userAgent)??"Unknown"}})})})})}const Rr=async()=>{let s="";const t=await ys?.getSettingValue("companionWindowShortcut");t?s=t:he.addError(new Error("Sidetron Settings: No companion chat hotkey found over IPC"));const a=Lr(s);return Promise.resolve(fn({electronAcceleratorKeys:a}))};function bn(){const{value:s}=vt("603035019");return s}function Wr(){const s=bn(),[t,a]=f.useState(!1),[o,i]=f.useState(void 0);return f.useEffect(()=>{(async()=>{const r=await Rr();i(r)})()},[]),f.useEffect(()=>{ys?.publish($t.HOTKEY_RECORDING_STATE,{inProgress:t})},[t]),s&&e.jsx(e.Fragment,{children:e.jsx(R,{children:e.jsx(ye,{label:e.jsx(n,{...He.companionChatHotkeyLabel}),disabled:o===void 0||t,buttonLabel:t?e.jsx(n,{...He.companionChatHotkeyRecordingLabel}):o?e.jsx(Hr,{keyboardBinding:o.webKeys}):e.jsx(n,{...He.companionChatHotkeyLoadingLabel}),onClick:async()=>{a(!0);const l=await Ar();l?l.electronAcceleratorString?(i(l),ys&&(ys.publish($t.DESKTOP_SETTING_CHANGED,{setting:"companionWindowShortcut",value:l.electronAcceleratorString}),he.addAction(`Sidetron Settings: User recorded a new hotkey: ${l.electronAcceleratorString}`))):he.addError(new Error(`Sidetron Settings: Invalid companion chat hotkey registered: ${l}`)):he.addAction("Sidetron Settings: User did not record a hotkey"),a(!1)}})})})}function Gr(){return e.jsx(e.Fragment,{children:e.jsx(R,{children:e.jsx(pn,{})})})}function Hr({keyboardBinding:s}){return e.jsx(e.Fragment,{children:Eo(s).map((t,a)=>e.jsxs("span",{className:"text-xs",children:[t,a<s.length-1&&e.jsx(Kr,{})]},a))})}function Kr(){return e.jsx("span",{className:"mx-1",children:e.jsx(n,{...He.hotkeySeparator})})}const He=V({updatesSettingLabel:{id:"desktopAppSettingsModal.updatesSettingLabel",defaultMessage:"App updates"},updateButtonLabel:{id:"desktopAppSettingsModal.updateButtonLabel",defaultMessage:"Check for updates"},updateInProgressButtonLabel:{id:"desktopAppSettingsModal.updateInProgressButtonLabel",defaultMessage:"Checking for updates..."},updateSettingDescription:{id:"desktopAppSettingsModal.updateSettingDescription",defaultMessage:"Current version: {version}"},companionChatHotkeyLabel:{id:"desktopAppSettingsModal.companionChatHotkeyLabel",defaultMessage:"Companion window hotkey"},companionChatHotkeyLoadingLabel:{id:"desktopAppSettingsModal.companionChatHotkeyLoadingLabel",defaultMessage:"Loading..."},companionChatHotkeyRecordingLabel:{id:"desktopAppSettingsModal.companionChatHotkeyRecordingLabel",defaultMessage:"Recording..."},hotkeySeparator:{id:"desktopAppSettingsModal.hotkeySeparator",defaultMessage:"+"}});function Vr(){const t=Zs()?.includes(Ta);return es({queryKey:["mfaInfo"],queryFn:()=>B.getMfaInfo(),enabled:t})}var oe=(s=>(s.DISABLED="DISABLED",s.ENABLED="ENABLED",s.LOADING="LOADING",s))(oe||{});function Yr(){const s=Vr();let t;return s.isLoading?t="LOADING":s.data?.mfa_enabled?t="ENABLED":t="DISABLED",{status:t,otherProvidersWithoutMfa:s.data?.other_providers_without_mfa,use_native_mfa:!!s.data?.use_native_mfa,native_default_factor_id:s.data?.native_default_factor_id,auth0_user_exists:!!s.data?.auth0_user_exists}}const zr=new Set(["google-oauth2","windowslive","apple"]),$r="Username-Password-Authentication",qr=4*60;function Us(s){return s?.idp&&zr.has(s.idp)?{connection:s.idp,...s.email&&{login_hint:s.email}}:s?.idp==="auth0"?{connection:$r,...s.email&&{login_hint:s.email}}:s?.email?{...s.email&&{login_hint:s.email}}:{}}function ha(s){if(!s)throw new Error("No session found, cannot enable MFA");if(s.authProvider==="mocked")throw new Error("Mock users can't enable MFA! Please setup Auth0 following the instructions in the README")}function xa(s){try{return Yi(s)}catch{throw new Error("Unable to decode access token")}}function Qr(s){return s.pwd_auth_time}function Ma(s){const t=Qr(s);if(!t)return!0;const a=t/1e3;return Date.now()/1e3-a>qr}function Zr(s){return s[ao]?.required==="yes"}function Jr(s){return s===Ue.OpenAI?Ue.LoginWebAuth0:s===Ue.OpenAIDev?Ue.LoginWebAuth0Dev:s===Ue.OpenAISidetron?Ue.Auth0Sidetron:s===Ue.OpenAISidetronDev?Ue.Auth0SidetronDev:s}function Xr(s){const{session:t}=Js(),a=ms(),o=t?.user?.idp==="auth0",i=!!t?.user?.mfa,l=t?.authProvider?Jr(t?.authProvider):void 0,{useNativeProvider:r,auth0UserExists:d}=s,c=f.useCallback(async()=>{ha(t);const m=new URL("/auth/enroll_mfa",window.location.origin).toString();let u=!0;if(t?.accessToken){const h=xa(t.accessToken);u=Ma(h)||!d}if(r&&u){As.signIn(l,{callbackUrl:m},{max_age:"0",...Es(Ns()),...Us(t?.user)});return}if(r){window.location.href=m;return}const p=new URL(pt(ft.MFA_ENABLED,"/#settings/Security"),location.origin).toString();As.signIn(l,{callbackUrl:p},{...Us(t?.user),max_age:"0",oai_enforce_mfa:"true",...Es(Ns())})},[t,r,d,l]),g=f.useCallback(async()=>{ha(t);const m=new URL("/auth/disable_mfa",window.location.origin).toString();let u=!0;if(t?.accessToken){const p=xa(t.accessToken);u=Ma(p)||!Zr(p)}if(r&&u){As.signIn(t?.authProvider,{callbackUrl:m},{max_age:"0",...Us(t?.user),...Es(Ns())});return}if(r){a("/?disable_mfa=true#settings/Security");return}As.signIn(t?.authProvider,{callbackUrl:m},{...Us(t?.user),max_age:"0",...Es(Ns())})},[t,a,r]);return{setupMfa:c,isUsernamePassword:o,isLoggedInWithMfa:i,removeMfa:g}}const ec=()=>{const{openSettings:s}=ws();return e.jsx("button",{onClick:()=>s(se.BuilderProfile),children:e.jsx($a,{className:"icon-sm"})})};function sc({gizmoId:s,gizmoName:t,gizmoAvatar:a,canEdit:o,socials:i}){const{data:l,isLoading:r}=At();return r?null:l?e.jsxs(e.Fragment,{children:[o&&s&&e.jsx("span",{className:"absolute right-2 top-2",children:e.jsx(ec,{})}),e.jsx(_o,{src:a,isFirstParty:!1,className:"h-8 w-8"}),e.jsx("div",{className:"mt-1 text-center text-sm font-semibold text-token-text-primary",children:t}),e.jsx(Io,{builderName:l.display_name,builderUrl:l.website_url,socials:i,className:"text-xs"})]}):e.jsx(at,{type:"info",children:e.jsx(n,{id:"gizmo.builderProfile.unableToLoadProfile",defaultMessage:"Unable to load your builder profile"})})}function tc(){const{data:s,isLoading:t}=At(),a=xe();return t?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ne,{})}):s===void 0||a?.canInteractWithGizmos()===!1?e.jsx(at,{type:"info",children:e.jsx(n,{...ne.noCreatorProfile})}):e.jsx(oc,{data:s})}function ac({gizmoName:s,canEdit:t,gizmoAvatar:a}){const o=w(),{openSettings:i}=ws(),{data:l}=At();return l?e.jsxs("div",{className:"relative flex w-full flex-col items-center justify-stretch rounded-lg bg-token-main-surface-primary p-4",children:[e.jsx(sc,{gizmoAvatar:a,gizmoName:s??o.formatMessage(ne.placeholderGPT),canEdit:t,socials:[l.socials.linkedin,l.socials.github,l.socials.twitter]}),e.jsx("div",{className:"absolute right-4 top-3 text-xs text-token-text-tertiary",children:t?e.jsx("button",{onClick:()=>{i(se.BuilderProfile)},children:e.jsx($a,{className:"icon-sm"})}):e.jsx(n,{...ne.preview})})]}):null}function nc(s,t){if(s.website_url&&t.length>0){const a=t.find(o=>o.url===s.website_url);return a?a.hostname:t[0].hostname}else{if(t.length>0)return t[0].hostname;if(s.website_url)return}}function oc({data:s}){const t=w(),a=Lo(),o=xe()?.isEnterprisey(),i=xe()?.isWorkspaceAccount(),l=kt(),r=s.domains.reduce((u,p)=>p.status==="verified"?[...u,{id:p.id,hostname:p.hostname,url:p.hostname}]:u,[]),d=nc(s,r),{value:c}=vt("2256850471"),g=s.name==null||a.isPending,m=e.jsx(zs,{size:"small",onChange:u=>{a.mutateAsync({hideName:!u})},disabled:g,enabled:!s.hide_name,label:s.hide_name?t.formatMessage(ne.showNameToggle):t.formatMessage(ne.hideNameToggle)});return e.jsxs("div",{className:"flex flex-col items-stretch",children:[e.jsx("div",{className:"mb-2",children:e.jsx(n,{...ne.creatorProfileDescription})}),e.jsx(ac,{canEdit:!1}),e.jsx(R,{children:e.jsxs("div",{className:"flex flex-col",children:[!s.is_verified&&e.jsxs(at,{type:"info",children:[e.jsx("div",{children:e.jsx(n,{...ne.creatorProfileUnverifiedDisclaimer})}),e.jsx("div",{children:i?e.jsx(n,{...ne.creatorProfileBusinessUnverifiedDisclaimer}):e.jsx(n,{...ne.creatorProfilePersonalUnverifiedDisclaimer})})]}),s.name&&e.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("b",{children:e.jsx(n,{...ne.creatorProfileNameLabel})}),g?e.jsx(fe,{side:"left",label:t.formatMessage(ne.linkDisabledTooltip),children:m}):m]}),e.jsxs("div",{className:"flex flex-row items-center space-x-2",children:[e.jsx("span",{children:s.name}),e.jsx(fe,{side:"top",className:"ml-auto",label:t.formatMessage(ne.nameSourceReason),children:e.jsx(qa,{className:"icon-sm text-token-text-tertiary"})})]})]}),!o&&e.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[e.jsx("hr",{className:"my-3 border-token-border-light"}),e.jsx("div",{className:"flex flex-row justify-between",children:e.jsx("b",{children:e.jsx(n,{...ne.creatorProfileLinkHeader})})}),e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-2",children:[e.jsx(bt,{className:"icon-sm"}),e.jsx("div",{children:e.jsx(Do,{selectedDomain:d,domains:s.domains,verifiedDomains:r,onChangeDomain:u=>{a.mutateAsync({websiteUrl:u})}})})]}),c&&e.jsxs(e.Fragment,{children:[e.jsx(dt,{socialData:s.socials.linkedin,icon:bi}),e.jsx(dt,{socialData:s.socials.github,icon:yi}),e.jsx(dt,{socialData:s.socials.twitter,icon:ji})]})]}),!o&&l&&e.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[e.jsx("hr",{className:"my-3 border-token-border-light"}),e.jsx("div",{className:"flex flex-row justify-between",children:e.jsx("b",{children:e.jsx(n,{...ne.creatorProfileEmailHeader})})}),e.jsxs("div",{className:"my-1 flex flex-row items-center space-x-2",children:[e.jsx(Ci,{className:"icon-sm"}),e.jsx("span",{children:l.email})]}),e.jsx(fe,{label:t.formatMessage(ne.feedbackEmailTooltip),children:e.jsx(Ra,{className:"rounded-xl",id:"receive-support-emails",onChange:u=>{a.mutateAsync({willReceiveSupportEmails:u.currentTarget.checked})},checked:s.will_receive_support_emails,label:t.formatMessage(ne.receiveFeedbackEmails)})})]})]})})]})}const ne=V({gizmoTab:{id:"settingsModal.gizmoTab",defaultMessage:"Builder profile"},creatorProfileDescription:{id:"settingsModal.creatorProfileDescription",defaultMessage:"Personalize your builder profile to connect with users of your GPTs. These settings apply to publicly shared GPTs."},creatorProfileUnverifiedDisclaimer:{id:"settingsModal.createrProfileUnverifiedDisclaimer",defaultMessage:"Complete verification to publish GPTs to everyone."},creatorProfilePersonalUnverifiedDisclaimer:{id:"settingsModal.creatorProfilePersonalUnverifiedDisclaimer",defaultMessage:"Verify your identity by adding billing details or verifying ownership of a public domain name."},creatorProfileBusinessUnverifiedDisclaimer:{id:"settingsModal.creatorProfileBusinessUnverifiedDisclaimer",defaultMessage:"Contact your workspace administrator to set up a builder profile"},creatorProfileNameLabel:{id:"settingsModal.creatorProfileNameLabel",defaultMessage:"Name"},placeholderGPT:{id:"settingsModal.placeholderGPT",defaultMessage:"PlaceholderGPT"},byName:{id:"settingsModal.byName",defaultMessage:"by {name}"},preview:{id:"settingsModal.preview",defaultMessage:"Preview"},noCreatorProfile:{id:"settingsModal.noCreatorProfile",defaultMessage:"Unable to retrieve builder profile"},creatorProfileLinkHeader:{id:"settingsModal.creatorProfileLinkHeader.1",defaultMessage:"Links"},creatorProfileEmailHeader:{id:"settingsModal.creatorProfileEmailHeader.0",defaultMessage:"Email"},nameDisabledTooltip:{id:"settingsModal.nameDisabledTooltip",defaultMessage:"You must have a verified name to enable displaying a name"},linkDisabledTooltip:{id:"settingsModal.linkDisabledTooltip",defaultMessage:"You must have a verified domain to enable displaying a link"},addDomain:{id:"settingsModal.addDomain",defaultMessage:"Verify new domain"},nameSourceReason:{id:"settingsModal.nameSourceReason",defaultMessage:"Name is populated from your billing details"},hideNameToggle:{id:"settingsModal.hideNameToggle",defaultMessage:"Hide your name in your builder profile"},showNameToggle:{id:"settingsModal.showNameToggle",defaultMessage:"Show your name in your builder profile"},hideWebsiteToggle:{id:"settingsModal.hideWebsiteToggle",defaultMessage:"Hide your website in your builder profile"},showWebsiteToggle:{id:"settingsModal.showWebsiteToggle",defaultMessage:"Show your website in your builder profile"},feedbackEmailTooltip:{id:"settingsModal.feedbackEmailTooltip",defaultMessage:"Allow users of your GPTs to send feedback to your ChatGPT login email. Your email will never be shared publicly."},receiveFeedbackEmails:{id:"settingsModal.receiveFeedbackEmails.1",defaultMessage:"Receive feedback emails"}});function ic(){return e.jsx(n,{...ne.gizmoTab})}const yn=["archivedConversations"],lc=30,rc=3;function cc({conversation:s,elementRef:t,closeParentModal:a}){const o=w(),i=J(),l=Ye(),{mutate:r,isPending:d}=Xs({mutationFn:async({conversationId:u,...p})=>B.patchConversation(u,p),onSettled:()=>{l.invalidateQueries({queryKey:[yn]}),l.invalidateQueries({queryKey:[Fo]})},onError:()=>{i.danger(o.formatMessage(je.deleteFailed))}}),[c,g]=f.useState(!1),m=`/c/${s.id}`;return e.jsxs(e.Fragment,{children:[e.jsxs(Q.Row,{disabled:d,children:[e.jsx(Q.Cell,{children:e.jsxs("a",{href:m,rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",ref:t,children:[e.jsx(Qa,{className:"icon-md flex-shrink-0"}),s.title]})}),e.jsx(Q.Cell,{children:s.create_time!=null?e.jsx(Ct,{value:s.create_time,month:"long",year:"numeric",day:"numeric"}):null}),e.jsx(Q.Cell,{textAlign:"right",children:e.jsxs(Q.Actions,{children:[e.jsx(fe,{label:o.formatMessage(je.unarchiveConversation),sideOffset:4,side:"top",children:e.jsx("button",{"aria-label":o.formatMessage(je.unarchiveConversation),className:"cursor-pointer text-[18px] text-token-text-tertiary hover:text-token-text-secondary",onClick:()=>{r({conversationId:s.id,is_archived:!1})},children:e.jsx(vi,{className:"icon-sm"})})}),e.jsx(fe,{label:o.formatMessage(je.deleteConversation),sideOffset:4,side:"top",children:e.jsx("button",{onClick:()=>g(!0),"aria-label":o.formatMessage(je.deleteConversation),className:"text-token-text-tertiary hover:text-token-text-secondary",children:e.jsx(Za,{className:"icon-sm"})})})]})})]}),c&&e.jsx(Bo,{title:s.title,handleDelete:()=>{r({conversationId:s.id,is_visible:!1})},onClose:u=>{g(!1),u?.closeParentModal&&a()}})]})}function dc({onClose:s}){const{data:t,isLoading:a,isError:o,refetch:i,fetchNextPage:l,hasNextPage:r}=no({queryKey:[yn],queryFn:({pageParam:p})=>B.getConversations({offset:p,limit:lc,isArchived:!0}),initialPageParam:0,getNextPageParam:p=>{const h=p.offset+p.limit;return h<p.total?h:void 0},refetchOnMount:"always"}),d=f.useRef(null),c=f.useCallback(p=>{a||p==null||(d.current?.disconnect(),d.current=new IntersectionObserver(h=>{h[0].isIntersecting&&r&&l()}),d.current.observe(p))},[a,r,l]);f.useEffect(()=>()=>{d.current?.disconnect()},[]);const g=f.useMemo(()=>t?.pages.flatMap(p=>p.items)??[],[t]),m=w();let u;return a?u=e.jsx("div",{className:"pb-8 text-token-text-secondary",children:e.jsx(n,{...je.loading})}):o?u=e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 text-red-500",children:e.jsx(n,{...je.somethingWentWrong})}),e.jsx("div",{children:e.jsx(Z,{color:"secondary",onClick:()=>{i()},children:e.jsx(n,{...je.retry})})})]}):g.length===0?u=e.jsx("div",{className:"pb-8 text-token-text-tertiary",children:e.jsx(n,{...je.noArchivedConversations})}):u=e.jsxs(Q.Root,{className:"max-h-[28rem]",size:"compact",children:[e.jsxs(Q.Header,{children:[e.jsx(Q.HeaderCell,{children:e.jsx(n,{...je.name})}),e.jsx(Q.HeaderCell,{children:e.jsx(n,{...je.dateCreated})}),e.jsx(Q.HeaderCell,{})]}),e.jsx(Q.Body,{children:g.map((p,h)=>e.jsx(cc,{conversation:p,elementRef:h===g.length-rc?c:void 0,closeParentModal:s},p.id))})]}),e.jsx(K,{isOpen:!0,onClose:s,size:"custom",className:"max-w-5xl",type:"success",title:m.formatMessage(je.title),showCloseButton:!0,children:u})}const je=V({name:{id:"archivedConversationsModal.name",defaultMessage:"Name"},dateCreated:{id:"archivedConversationsModal.dateCreated",defaultMessage:"Date created"},loading:{id:"archivedConversationsModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"archivedConversationsModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"archivedConversationsModal.retry",defaultMessage:"Retry"},noArchivedConversations:{id:"archivedConversationsModal.noArchivedConversations",defaultMessage:"You have no archived conversations."},title:{id:"archivedConversationsModal.title",defaultMessage:"Archived Chats"},unarchiveConversation:{id:"archivedConversationsModal.unarchiveConversation",defaultMessage:"Unarchive conversation"},deleteConversation:{id:"archivedConversationsModal.deleteConversation",defaultMessage:"Delete conversation"},deleteFailed:{id:"archivedConversationsModal.deleteFailed",defaultMessage:"Deleting failed"}}),jn=Uo.FirstTimeUsingUserContext;function uc(){const{eligible:s}=Wa(jn);return s}const gc=({onClose:s})=>{const t=w(),{markAsViewed:a}=Wa(jn),o=f.useCallback(()=>{a(),s()},[a,s]);return e.jsxs(K,{isOpen:!0,onClose:yt,size:"custom",className:"max-w-xl",type:"success",title:t.formatMessage(xs.title),primaryButton:e.jsx(ae.Button,{onClick:o,title:t.formatMessage(xs.ok),color:"primary"}),children:[e.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[e.jsx("p",{children:e.jsx(n,{...xs.body1})}),e.jsx("p",{children:e.jsx(n,{...xs.body2})})]}),e.jsx("div",{className:"flex flex-col gap-3 text-sm text-token-text-tertiary",children:e.jsx("p",{children:e.jsx(n,{...xs.legal1,values:{article:i=>e.jsx("a",{href:en,target:"_blank",className:"underline",rel:"noopener noreferrer",children:i})}})})})]})},xs=V({title:{id:"UserContextFirstTimeModal.title",defaultMessage:"Introducing Custom Instructions"},body1:{id:"UserContextFirstTimeModal.body1",defaultMessage:"Customize your interactions with ChatGPT by providing specific details and guidelines for your chats."},body2:{id:"UserContextFirstTimeModal.body2",defaultMessage:"Whenever you edit your custom instructions, they'll take effect in all new chats you create. Existing chats won't be updated."},legal1:{id:"UserContextFirstTimeModal.legal1",defaultMessage:"Your instructions will be used to make our models better unless you've opted out and may be shared with any plugins you've enabled. Visit our <article>Help Center</article> to learn more."},ok:{id:"UserContextFirstTimeModal.ok",defaultMessage:"OK"}});function mc({onSuccess:s,onError:t}){const a=Ye();return Xs({mutationFn:({userContext:o})=>B.createOrUpdateUserSystemMessage(o),onSettled:(o,i)=>{const l=["userContext"];o!==null&&!i?a.setQueryData(l,o):a.invalidateQueries({queryKey:l})},onSuccess:s,onError:t})}function Cn(s){const t=w(),a=J();return es({queryKey:["userContext"],queryFn:()=>B.getUserSystemMessage().catch(o=>{throw a.danger(t.formatMessage({id:"userContextModal.getCustomInstructionsError",defaultMessage:"Failed to get your settings"})),o}),enabled:s,select:o=>({aboutUserMessage:o?.about_user_message??"",aboutModelMessage:o?.about_model_message??"",disabledTools:o?.disabled_tools??[],enabled:o?.enabled??!0})})}const ba={aboutUserMessage:void 0,aboutModelMessage:void 0,disabledTools:void 0,enabled:void 0};function pc({isModalOpen:s}){const t=w(),a=J(),o=uc(),[i,l]=f.useState(!1),{isLoading:r,data:d}=Cn(s),{aboutUserMessage:c="",aboutModelMessage:g="",disabledTools:m=[],enabled:u}=d??{},[p,h]=f.useState(ba),{aboutUserMessage:b,aboutModelMessage:y,disabledTools:k,enabled:N}=p,P=N??!!u,[L,D]=f.useState(null),_=f.useCallback(()=>{ue.closeModal(Ce.UserContext),h(ba),D(null)},[]),{isPending:E,mutate:G}=mc({onSuccess:()=>{_()},onError:T=>(T.response?.reason==="content_policy"&&T.response?.field?D(T.response?.field):a.danger(t.formatMessage({id:"userContextModal.saveError",defaultMessage:"Failed to update settings"})),T)}),[F,q]=f.useState(!1),U=bs(b??"")||bs(y??""),z=y!==void 0&&y!==g||b!==void 0&&b!==c||k!==void 0&&!oo(k,m)||N!==void 0&&N!==u,H=f.useCallback(()=>{z?q(!0):_()},[_,z]),X=f.useCallback(async()=>{E||(D(null),G({userContext:{aboutUserMessage:b??"",aboutModelMessage:y??"",disabledTools:k??[],enabled:!!N}}))},[E,y,b,k,N,G]),O=f.useCallback(()=>{if(U){const T=bs(b??""),C=bs(y??"");T&&(ee.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_user_message",limit:Je.toString(),character_length:b?.length.toString()??""}),j.logEvent(S.userContextModelMessagePastLimit,{type:"about_user_message",limit:Je.toString(),character_length:b?.length.toString()??""})),C&&(ee.logEvent("chatgpt_user_context_modal__message_past_limit",void 0,{type:"about_model_message",limit:Je.toString(),character_length:y?.length.toString()??""}),j.logEvent(S.userContextModelMessagePastLimit,{type:"about_model_message",limit:Je.toString(),character_length:y?.length.toString()??""})),a.danger(t.formatMessage(W.messageLimitError,{limit:Je}),{duration:4,hasCloseButton:!0});return}X()},[t,U,y,b,X,a]);if(s&&o&&!i)return e.jsx(gc,{onClose:()=>{l(!0)}});if(s&&F){const T=()=>{q(!1)};return e.jsx(K,{isOpen:!0,onClose:T,type:"success",title:t.formatMessage(W.confirmCloseTitle),primaryButton:e.jsx(ae.Button,{title:t.formatMessage(W.confirmCloseOk),color:"danger",onClick:()=>{_(),T()}}),secondaryButton:e.jsx(ae.Button,{title:t.formatMessage(W.confirmCloseCancel),color:"secondary",onClick:T}),children:e.jsx("div",{className:"text-sm",children:e.jsx(n,{...W.confirmCloseBody})})},"confirm-close")}return e.jsxs(K,{isOpen:s,onClose:H,type:"success",size:"custom",className:"max-w-lg xl:max-w-xl",title:e.jsx(n,{...W.profileTitle}),children:[r?e.jsx("div",{className:"flex h-14 items-center justify-center",children:e.jsx(Ne,{})}):e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto md:max-h-[calc(100vh-300px)]",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm font-semibold",children:e.jsx(n,{...W.customInstructionsTitle})}),e.jsx(vn,{label:e.jsx(n,{...W.customInstructionsTooltip,values:{article:T=>e.jsx("a",{href:en,target:"_blank",className:"underline",rel:"noreferrer",children:T})}})})]}),e.jsx("p",{className:"text-muted pb-3 pt-2 text-sm text-token-text-primary",children:e.jsx(n,{...W.aboutYouHelpText})}),e.jsx(ja,{className:"mb-3",onSubmit:O,disabled:!P,tip:e.jsx(ya,{children:e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{children:e.jsx(n,{...W.aboutUserTip1})}),e.jsx("li",{children:e.jsx(n,{...W.aboutUserTip2})}),e.jsx("li",{children:e.jsx(n,{...W.aboutUserTip3})}),e.jsx("li",{children:e.jsx(n,{...W.aboutUserTip4})}),e.jsx("li",{children:e.jsx(n,{...W.aboutUserTip5})})]})}),hasModError:L==="about_user_message",value:b??c,onChange:T=>h(C=>({aboutModelMessage:C.aboutModelMessage??g,aboutUserMessage:T.target.value,enabled:C.enabled??P,disabledTools:C.disabledTools??m}))}),e.jsx("p",{className:"text-muted py-3 text-sm text-token-text-primary",children:e.jsx(n,{...W.modelHelpText})}),e.jsx(ja,{onSubmit:O,disabled:!P,tip:e.jsx(ya,{children:e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{children:e.jsx(n,{...W.modelTip1})}),e.jsx("li",{children:e.jsx(n,{...W.modelTip2})}),e.jsx("li",{children:e.jsx(n,{...W.modelTip3})}),e.jsx("li",{children:e.jsx(n,{...W.modelTip4})})]})}),hasModError:L==="about_model_message",value:y??g,onChange:T=>h(C=>({aboutUserMessage:C.aboutUserMessage??c,aboutModelMessage:T.target.value,enabled:C.enabled??P,disabledTools:C.disabledTools??m}))}),e.jsx("div",{className:"my-6 h-px bg-token-border-light"}),e.jsx(fc,{disabledTools:p.disabledTools??m??[],onDisabledToolsChanged:T=>h(C=>({aboutUserMessage:C.aboutUserMessage??c,aboutModelMessage:C.aboutModelMessage??g,enabled:C.enabled??P,disabledTools:T}))})]}),e.jsx("div",{className:"mt-4 md:mt-5",children:e.jsxs("div",{className:"flex flex-grow flex-col items-stretch justify-between gap-0 sm:flex-row sm:items-center sm:gap-3",children:[e.jsxs("label",{className:"mt-5 flex cursor-pointer flex-row justify-between gap-2 sm:mt-4",children:[e.jsx("div",{className:"self-center text-sm text-token-text-primary",children:e.jsx(n,{...W.chatPreferencesEnable})}),e.jsx(zs,{enabled:P,onChange:T=>{h(C=>({aboutUserMessage:C.aboutUserMessage??c,aboutModelMessage:C.aboutModelMessage??g,enabled:T,disabledTools:C.disabledTools??m}))},label:P?t.formatMessage(W.disableToggleLabel):t.formatMessage(W.enableToggleLabel)})]}),e.jsx(ae.Actions,{secondaryButton:e.jsx(ae.Button,{onClick:H,children:e.jsx(n,{...W.cancel})}),primaryButton:e.jsx(ae.Button,{loading:E,onClick:O,color:"primary",visuallyDisabled:U,disabled:!z,children:e.jsx(n,{...W.save})})})]})})]},"user-context")}const ya=({children:s})=>e.jsx("div",{className:"whitespace-pre-line",children:s}),Je=1500,bs=s=>s.length>Je,ja=({disabled:s,onChange:t,onSubmit:a,placeholder:o,value:i,tip:l,hasModError:r,className:d})=>{const c=w(),g=f.useRef(null),m=Oo(),u=Ro(),p=!m,[h,b]=f.useState(!1),[y,k]=f.useState(p),N=!p&&h&&!y,P=p&&!y,L=bs(i),D=E=>{!s&&E.key==="Enter"&&E.metaKey&&!E.shiftKey&&!E.nativeEvent.isComposing&&(E.preventDefault(),a())},_=f.useRef(null);return e.jsxs(e.Fragment,{children:[e.jsx(K,{isOpen:P,type:"success",size:"custom",className:"max-w-lg",title:c.formatMessage(W.tipsHeader),showCloseButton:!0,onClose:()=>{k(!0)},children:l}),e.jsxs(Wo,{open:N,children:[e.jsxs("div",{className:d,ref:_,children:[e.jsx(Go,{asChild:!0,children:e.jsx("textarea",{ref:g,className:Ve("w-full resize-none rounded bg-token-main-surface-primary p-4 placeholder:text-gray-300",{"border-orange-400 focus:border-orange-400":r,"border-red-500 focus:border-red-500":L&&!r,"focus-token-border-heavy border-token-border-light":!L&&!r,"opacity-30":s}),disabled:s,placeholder:o,onKeyDown:D,rows:m&&!u?6:5,value:i,onChange:t,onBlur:()=>{b(!1)},onFocus:()=>{b(!0)}})}),e.jsx("div",{className:Ve("flex items-center justify-between px-1 text-xs tabular-nums",L?"text-red-600":"text-token-text-tertiary"),children:r?e.jsx("div",{className:"visible mt-2 text-left text-xs text-orange-400",children:e.jsx(n,{...W.modApiVoilation,values:{policyLink:E=>e.jsx("a",{href:"https://platform.openai.com/docs/usage-policies/content-policy",className:"underline",target:"_blank",rel:"noreferrer",children:E}),feedbackLink:E=>e.jsx("a",{href:"https://forms.gle/3gyAMj5r5rTEcgbs5",className:"underline",target:"_blank",rel:"noreferrer",children:E})}})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{children:`${i.length}/${Je}`}),e.jsx("button",{className:"flex items-center gap-1",onClick:()=>{g.current?.focus(),k(!y)},tabIndex:-1,children:e.jsx(La,{initial:!1,children:h&&e.jsx(Et.div,{className:"flex items-center gap-1",initial:{opacity:0},animate:{opacity:1,transition:{duration:.2,ease:"easeIn"}},exit:{opacity:0,transition:{duration:.2,ease:"easeIn"}},children:y?e.jsxs(e.Fragment,{children:[e.jsx(n,{...W.showTips}),e.jsx(Si,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{...W.hideTips}),e.jsx(ki,{className:"icon-xs"})]})},"show-hide")})})]})})]}),e.jsx(Ho,{container:_.current?.ownerDocument.body,children:e.jsx(Ko,{side:"right",align:"start",sideOffset:12,className:"popover relative z-50 max-w-[220px] animate-slideLeftAndFade select-none rounded-xl border border-token-border-light bg-token-main-surface-primary p-4 text-sm text-token-text-primary shadow-[0px_4px_14px_rgba(0,0,0,0.06)] xl:max-w-xs",onOpenAutoFocus:E=>{E.preventDefault()},onCloseAutoFocus:E=>{E.preventDefault()},children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("strong",{children:e.jsx(n,{...W.tipsHeader})}),l]})})})]})]})};function vn({label:s,side:t="bottom"}){return e.jsx(fe,{sideOffset:4,interactive:!0,label:e.jsx("div",{children:s}),side:t,children:e.jsx(qa,{className:"h-4 w-4 text-token-text-tertiary"})})}function fc({disabledTools:s,onDisabledToolsChanged:t}){f.useEffect(()=>{j.logEvent(S.userContextGpt4CapabilitiesShown)},[]);const o=xe()?.isEnterprisey()??!1,i=!io(Gs.BrowsingAvailable)&&o,l=c=>{const g=s.includes(c)?s.filter(m=>m!==c):[...s,c];t(g)},r=Zs();var d;return r?.includes(Gs.SearchTool)&&!r?.includes(Gs.SearchToolHoldout)?d=e.jsx(Os,{title:e.jsx(n,{id:"userContextModal.tools.web",defaultMessage:"Web Search"}),tooltipLabel:i?e.jsx(n,{id:"Osf0vy",defaultMessage:"Web Search is disabled by your organization"}):e.jsx(n,{id:"userContexModal.tools.webSearchTooltip",defaultMessage:"Automatically search the web to get answers"}),tool:Oe.BROWSER,onClick:l,Icon:bt,checked:!s.includes(Oe.BROWSER)&&!i,disabled:i}):d=e.jsx(Os,{title:e.jsx(n,{id:"userContextModal.tools.browse",defaultMessage:"Browsing"}),tooltipLabel:i?e.jsx(n,{id:"5SuA2c",defaultMessage:"Browsing is disabled by your organization"}):e.jsx(n,{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"}),tool:Oe.BROWSER,onClick:l,Icon:bt,checked:!s.includes(Oe.BROWSER)&&!i,disabled:i}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm font-semibold",children:e.jsx(n,{id:"userContextModal.gpt4CapabilitiesTitle",defaultMessage:"GPT-4 Capabilities"})}),e.jsx(vn,{label:e.jsx(n,{id:"userContextModal.tools.capabilitiesInfo.1",defaultMessage:"Choose which tools can be used with GPT-4"}),side:"top"})]}),e.jsxs("div",{className:"mt-2 flex flex-col gap-3 md:flex-row",children:[d,e.jsx(Os,{title:e.jsx(n,{id:"userContextModal.tools.dalle",defaultMessage:"DALL·E"}),tooltipLabel:e.jsx(n,{id:"userContextModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL·E"}),tool:Oe.DALLE,onClick:l,Icon:wi,checked:!s.includes(Oe.DALLE)}),e.jsx(Os,{title:e.jsx(n,{id:"userContextModal.tools.codeInterpreter.1",defaultMessage:"Code"}),tooltipLabel:e.jsx(n,{id:"userContextModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}),tool:Oe.PYTHON,onClick:l,Icon:Pi,checked:!s.includes(Oe.PYTHON)})]})]})}function Os({tool:s,title:t,tooltipLabel:a,Icon:o,onClick:i,checked:l,disabled:r}){return e.jsx(fe,{className:"block flex-1",label:a,side:"top",sideOffset:4,children:e.jsxs("button",{className:Ve("flex w-full items-center justify-between rounded border border-token-border-medium p-2",{"cursor-not-allowed text-token-text-quaternary":r}),onClick:()=>i(s),disabled:r,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{className:"h-4 w-4 text-token-text-tertiary"}),e.jsx("div",{className:"text-sm font-semibold",children:t})]}),e.jsx(Ra,{id:s,checked:l&&!r,disabled:r})]})})}const W=V({tipsHeader:{id:"userContextModal.tipsHeader",defaultMessage:"Thought starters"},aboutUserTip1:{id:"userContextModal.aboutUserTip1",defaultMessage:"Where are you based?"},aboutUserTip2:{id:"userContextModal.aboutUserTip2",defaultMessage:"What do you do for work?"},aboutUserTip3:{id:"userContextModal.aboutUserTip3",defaultMessage:"What are your hobbies and interests?"},aboutUserTip4:{id:"userContextModal.aboutUserTip4",defaultMessage:"What subjects can you talk about for hours?"},aboutUserTip5:{id:"userContextModal.aboutUserTip5",defaultMessage:"What are some goals you have?"},modelTip1:{id:"userContextModal.modelTip1",defaultMessage:"How formal or casual should ChatGPT be?"},modelTip2:{id:"userContextModal.modelTip2",defaultMessage:"How long or short should responses generally be?"},modelTip3:{id:"userContextModal.modelTip3",defaultMessage:"How do you want to be addressed?"},modelTip4:{id:"userContextModal.modelTip4",defaultMessage:"Should ChatGPT have opinions on topics or remain neutral?"},save:{id:"userContextModal.save",defaultMessage:"Save"},chatPreferencesEnable:{id:"userContextModal.chatPreferencesEnable",defaultMessage:"Enable for new chats"},enableToggleLabel:{id:"userContextModal.enableToggleLabel",defaultMessage:"Enable chat preferences"},disableToggleLabel:{id:"userContextModal.disableToggleLabel",defaultMessage:"Disable chat preferences"},cancel:{id:"userContextModal.cancel",defaultMessage:"Cancel"},aboutYouHelpText:{id:"userContextModal.aboutYouHelpText",defaultMessage:"What would you like ChatGPT to know about you to provide better responses?"},modelHelpText:{id:"userContextModal.modelHelpText",defaultMessage:"How would you like ChatGPT to respond?"},profileTitle:{id:"userContextModal.title.1",defaultMessage:"Customize ChatGPT"},customInstructionsTitle:{id:"userContextModal.customInstructionsTitle",defaultMessage:"Custom Instructions"},customInstructionsTooltip:{id:"userContextModal.customInstructionsTooltip",defaultMessage:"<article>Learn more</article> about Custom Instructions and how they’re used to help ChatGPT provide better responses."},messageLimitError:{id:"userContextModal.messageLimitError",defaultMessage:"Please limit your responses to {limit} characters or less."},showTips:{id:"userContextModal.showTips",defaultMessage:"Show tips"},hideTips:{id:"userContextModal.hideTips",defaultMessage:"Hide tips"},confirmCloseTitle:{id:"userContextModal.confirmCloseTitle",defaultMessage:"You have unsaved changes."},confirmCloseBody:{id:"userContextModal.confirmCloseBody",defaultMessage:"Are you sure you want to exit? Any changes you made will be permanently lost."},confirmCloseCancel:{id:"userContextModal.confirmCloseCancel",defaultMessage:"Back"},confirmCloseOk:{id:"userContextModal.confirmCloseOk",defaultMessage:"Exit"},modApiVoilation:{id:"userContextModal.modApiVoilation",defaultMessage:"This content may violate our <policyLink>content policy</policyLink>. If you believe this to be in error, please <feedbackLink>submit your feedback</feedbackLink> — your input will aid our research in this area."},browser:{id:"userContexModal.tools.browserTooltip",defaultMessage:"Browse the internet to find answers"},dalle:{id:"userContexModal.tools.dalleTooltip",defaultMessage:"Generate images using DALL·E"},python:{id:"userContexModal.tools.codeInterpreterTooltip",defaultMessage:"Execute code using Code Interpreter"}});function Rs({children:s}){return e.jsxs("li",{children:["“",s,"”"]})}function hc(){const[s,t]=f.useState(!1),a=w(),o=Vo(),{isLoading:i,data:l}=Cn(!0),r=St(),{data:d}=Yo(void 0,!1,o),c=zo(),g=$o(),m=qo();return i?e.jsx("div",{className:"flex justify-center",children:e.jsx(Ne,{})}):e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsx(Ga,{label:e.jsx(n,{...ke.customInstructions}),stateLabel:l?.enabled?a.formatMessage(ke.on):a.formatMessage(ke.off),onClick:()=>ue.openModal(Ce.UserContext)})}),e.jsxs(R,{children:[e.jsx(Ss,{label:a.formatMessage(ke.toggleLabel),enabled:o,onChange:u=>{r.mutate({setting:gs.Sunshine,value:u})},description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(n,{...ke.exampleDescription1,values:{link:u=>e.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-in-chatgpt-faq",target:"_blank",className:"underline",rel:"noreferrer",children:u})}})}),e.jsx("p",{className:"mt-3",children:e.jsx(n,{...ke.exampleDescription2})}),e.jsxs("ul",{className:"my-2 flex list-disc flex-col gap-1 pl-5",children:[e.jsx(Rs,{children:e.jsx(n,{...ke.exampleMessage1})}),e.jsx(Rs,{children:e.jsx(n,{...ke.exampleMessage2})}),e.jsx(Rs,{children:e.jsx(n,{...ke.exampleMessage3})}),e.jsx(Rs,{children:e.jsx(n,{...ke.exampleMessage4})})]})]})}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx(Z,{onClick:()=>{t(!0),j.logEvent(S.memorySettingsManageClicked)},color:"secondary",children:e.jsx(n,{...ke.manageMemoriesButton})}),e.jsx(zi,{memoryFullPct:d?.memoryFullPct}),s&&e.jsx($i,{onClose:()=>t(!1)})]})]}),m&&e.jsx(R,{children:e.jsx(Ss,{label:a.formatMessage({id:"APWP2z",defaultMessage:"Enable memory in search"}),enabled:c,onChange:u=>{r.mutate({setting:gs.MemoryInSearch,value:u})},disabled:!g})}),e.jsx("span",{children:e.jsx(qi,{memoryName:"ChatGPT"})})]})}const ke=V({toggleLabel:{id:"settingsModal.myChagtGptToggleLabel.2",defaultMessage:"Memory"},exampleDescription1:{id:"settingsModal.exampleDescription1.1",defaultMessage:"ChatGPT will become more helpful as you chat, picking up on details and preferences to tailor its responses to you. <link>Learn more</link>"},exampleDescription2:{id:"settingsModal.exampleDescription2.2",defaultMessage:"To understand what ChatGPT remembers or teach it something new, just chat with it:"},exampleMessage1:{id:"settingsModal.exampleMessage1.1",defaultMessage:"Remember that I like concise responses."},exampleMessage2:{id:"settingsModal.exampleMessage2.1",defaultMessage:"I just got a puppy!"},exampleMessage3:{id:"settingsModal.exampleMessage3.2",defaultMessage:"What do you remember about me?"},exampleMessage4:{id:"settingsModal.exampleMessage4",defaultMessage:"Where did we leave off on my last project?"},reset:{id:"settingsModal.reset",defaultMessage:"Reset memories"},resetModalTitle:{id:"settingsModal.resetModalTitle",defaultMessage:"Are you sure?"},resetModalDescription:{id:"settingsModal.resetModalDescription",defaultMessage:"Your GPT will forget what it has learned from your previous chats. This can't be undone."},resetModalConfirm:{id:"settingsModal.resetModalConfirm",defaultMessage:"Confirm reset"},resetModalCancel:{id:"settingsModal.resetModalCancel",defaultMessage:"Cancel"},resetSuccessful:{id:"settingsModal.resetSuccessful",defaultMessage:"Your GPT's memory has been reset."},resetFailed:{id:"settingsModal.resetFailed",defaultMessage:"Failed to reset your GPT's memory."},on:{id:"personalizationSettings.on",defaultMessage:"On"},off:{id:"personalizationSettings.off",defaultMessage:"Off"},customInstructions:{id:"personalizationSettings.customInstructions",defaultMessage:"Custom instructions"},manageMemoriesButton:{id:"personalizationSettings.manageMemoriesButton",defaultMessage:"Manage"}}),Ut=["sharedConversations"],de=V({name:{id:"sharedConversationModal.name",defaultMessage:"Name"},dateShared:{id:"sharedConversationModal.dateShared",defaultMessage:"Date shared"},loading:{id:"sharedConversationModal.loading",defaultMessage:"Loading..."},somethingWentWrong:{id:"sharedConversationModal.somethingWentWrong",defaultMessage:"Something went wrong..."},retry:{id:"sharedConversationModal.retry",defaultMessage:"Retry"},noSharedConversations:{id:"sharedConversationModal.noSharedConversations",defaultMessage:"You have no shared links."},title:{id:"sharedConversationModal.title",defaultMessage:"Shared Links"},goToOriginConversation:{id:"sharedConversationModal.goToOriginConversation",defaultMessage:"View source chat"},deleteSharedLink:{id:"sharedConversationModal.deleteSharedLink",defaultMessage:"Delete shared link"},deleteSharedLinkFailed:{id:"sharedConversationModal.deleteSharedLinkFailed",defaultMessage:"Deleting shared link failed"},deleteAllSharedLinks:{id:"sharedConversationModal.deleteSharedAllConversations",defaultMessage:"Delete all shared links"},deleteAllSharedLinksConfirm:{id:"sharedConversationModal.deleteSharedAllConversationsConfirm",defaultMessage:"Are you sure you want to delete all your shared links?"},deleteAllSharedLinksFailed:{id:"sharedConversationModal.deleteSharedAllConversationsFailed",defaultMessage:"Deleting shared links failed"}});function xc(){const s=Ye(),t=w(),a=J(),{mutate:o}=Xs({mutationFn:()=>B.deleteAllSharedConversations(),onSettled:()=>{s.invalidateQueries({queryKey:Ut})},onError:()=>{a.danger(t.formatMessage(de.deleteAllSharedLinksFailed))}});return e.jsx(ka,{side:"bottom",sideOffset:4,triggerButton:e.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-secondary radix-state-open:text-token-text-tertiary dark:radix-state-open:text-gray-400",children:e.jsx(Ti,{className:"icon-sm"})}),children:e.jsx(Cs.Item,{onClick:()=>{window.confirm(t.formatMessage(de.deleteAllSharedLinksConfirm))&&o()},color:"danger",children:e.jsx(n,{...de.deleteAllSharedLinks})})})}function Mc(){return B.getSharedConversations()}function bc(){return es({queryKey:Ut,queryFn:Mc,refetchOnMount:"always"})}function yc({sharedConversation:s}){const t=w(),a=J(),o=Ye(),{mutate:i,isPending:l}=Xs({mutationFn:async({sharedConversationId:d})=>B.deleteShareLink({share_id:d}),onSettled:()=>{o.invalidateQueries({queryKey:Ut})},onError:()=>{a.danger(t.formatMessage(de.deleteSharedLinkFailed))}}),r=s.workspace_id!=null?`/share/e/${s.id}`:`/share/${s.id}`;return e.jsxs(Q.Row,{disabled:l,children:[e.jsx(Q.Cell,{children:e.jsxs("a",{href:r,target:"_blank",rel:"noreferrer",className:"inline-flex items-center gap-2 align-top text-blue-500 dark:text-blue-400",children:[e.jsx(Ai,{className:"icon-sm flex-shrink-0"}),s.title]})}),e.jsx(Q.Cell,{children:s.create_time!=null?e.jsx(Ct,{value:s.create_time,month:"long",year:"numeric",day:"numeric"}):null}),e.jsx(Q.Cell,{textAlign:"right",children:e.jsxs(Q.Actions,{children:[e.jsx(fe,{label:t.formatMessage(de.goToOriginConversation),sideOffset:4,side:"top",children:e.jsx("a",{href:Qo(s.conversation_id),target:"_blank",rel:"noreferrer","aria-label":t.formatMessage(de.goToOriginConversation),className:"cursor-pointer text-token-text-tertiary hover:text-token-text-secondary",children:e.jsx(Qa,{className:"icon-sm"})})}),e.jsx(fe,{label:t.formatMessage(de.deleteSharedLink),sideOffset:4,side:"top",children:e.jsx("button",{onClick:()=>{i({sharedConversationId:s.id})},"aria-label":t.formatMessage(de.deleteSharedLink),className:"text-token-text-tertiary hover:text-token-text-secondary",children:e.jsx(Za,{className:"icon-sm"})})})]})})]})}function jc({onClose:s}){const{data:t,isLoading:a,isError:o,refetch:i}=bc(),l=w();let r;return a?r=e.jsx("div",{className:"pb-8 text-token-text-secondary",children:e.jsx(n,{...de.loading})}):o?r=e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 text-red-500",children:e.jsx(n,{...de.somethingWentWrong})}),e.jsx("div",{children:e.jsx(Z,{color:"secondary",onClick:()=>{i()},children:e.jsx(n,{...de.retry})})})]}):t?.total===0?r=e.jsx("div",{className:"pb-8 text-token-text-tertiary",children:e.jsx(n,{...de.noSharedConversations})}):r=e.jsxs(Q.Root,{className:"max-h-[28rem]",size:"compact",children:[e.jsxs(Q.Header,{children:[e.jsx(Q.HeaderCell,{children:e.jsx(n,{...de.name})}),e.jsx(Q.HeaderCell,{children:e.jsx(n,{...de.dateShared})}),e.jsx(Q.HeaderCell,{textAlign:"right",children:e.jsx(xc,{})})]}),e.jsx(Q.Body,{children:t?.items.map(d=>e.jsx(yc,{sharedConversation:d},d.id))})]}),e.jsx(K,{isOpen:!0,onClose:s,size:"custom",className:"max-w-5xl",type:"success",title:l.formatMessage(de.title),showCloseButton:!0,children:r})}const Sn="https://help.openai.com/en/articles/5722486";function Cc(){const s=rs(js.isBusinessWorkspace),t=xe(),{value:a}=Hs("3650277116");return a?(t==null?!0:t.isPermittedToImproveModel())?"enabled":"disabled":!s?"enabled":"disabled"}function vc(){const s=w(),t=rs(js.isBusinessWorkspace),[a,o]=f.useState(!1),i=rs(js.isTeamPlan),l=rs(js.isEduPlan),{data:r}=Aa(gs.TrainingAllowed),d=St(),c=Cc(),g=c==="disabled"?!1:!!r;return e.jsxs(R,{children:[e.jsx(Ga,{onClick:()=>o(!0),label:s.formatMessage(x.chatTrainingAllowedToggleLabel),stateLabel:g?s.formatMessage({id:"settingsModal.trainingEnabled",defaultMessage:"On"}):s.formatMessage({id:"settingsModal.trainingDisabled",defaultMessage:"Off"}),testId:"improve-model-open-modal-button"}),a&&e.jsx(K,{isOpen:!0,onClose:()=>o(!1),title:s.formatMessage({id:"settingsModal.trainingToggleModalTitle",defaultMessage:"Model improvement"}),type:"success",secondaryButton:e.jsx(Z,{color:"secondary",onClick:()=>o(!1),"data-testid":"improve-model-done-button",children:e.jsx(n,{id:"settingsModal.trainingToggleModalDoneButton",defaultMessage:"Done"})}),children:e.jsx(Ss,{label:s.formatMessage(x.chatTrainingAllowedToggleLabel),disabled:c==="disabled",enabled:g,onChange:m=>{d.mutate({setting:gs.TrainingAllowed,value:m})},toggleTooltip:t?e.jsx(n,{...i?x.chatTrainingTeamsTooltip:l?x.chatTrainingEduTooltip:x.chatTrainingEnterpriseTooltip}):null,description:e.jsx(n,{...x.trainingAllowedDescription,values:{link:m=>e.jsx("a",{href:Sn,target:"_blank",className:"underline",rel:"noreferrer",children:m})}}),testId:"improve-model-toggle"})})]})}const Sc=()=>{const s=w(),t=J(),a=wt(),{pathname:o}=Pa(),i=ms(),{closeSettings:l,currentTab:r,openSettings:d}=ws(),[c,g]=f.useState(!1),[m,u]=f.useState(!1),[p,h]=f.useState(!1),[b,y]=f.useState(!1),[k,N]=f.useState(!1),[P,L]=f.useState(!1),[D,_]=f.useState(!1),[E,G]=f.useState(!1),[F,q]=f.useState(!1),U=kr(),z=Yr(),{setupMfa:H,removeMfa:X}=Xr({useNativeProvider:z.use_native_mfa,auth0UserExists:z.auth0_user_exists}),O=z.status,T=z.otherProvidersWithoutMfa&&z.otherProvidersWithoutMfa.length>0,{session:C}=Js(),Ee=C?.user?.idp,ze=(Ee?Tt[Ee]:void 0)??e.jsx(n,{id:"confirmEnableMfaForByPassModal.yourAccount",defaultMessage:"your current account"}),I=xe(),ss=I?.features,ts=rs(js.isBusinessWorkspace),_e=Oa(),{connectorConfig:Ie}=Ba(),as=Ie.has(le.GDRIVE)&&!_e,ns=(Ie.has(le.O365_PERSONAL)||Ie.has(le.O365_BUSINESS))&&!_e,$e=Ie.has(le.CONFLUENCE)&&!_e,qe=Ie.has(le.JIRA)&&!_e,Se=as||ns||$e||qe,{clientApplications:fs}=Zo(),hs=fs!=null&&fs.length>0||Se,ot=Jo(Gs.WorkspaceShareLinks),it=Ys(Ce.CookieManagement),{data:Fe}=Aa(gs.ShowExpandedCodeView),Me=Fe===void 0,[lt,Ot]=f.useState(Me?!1:Fe),kn=St(),Rt=Ha(),wn=I?.isTeam(),{data:Pn}=va(),Tn=Pn?.accountItems.some(Be=>Be.isPersonalAccount()),An=ss?.includes(Ta)&&(O===oe.LOADING||O===oe.DISABLED)||O===oe.ENABLED,rt=Fr(),Wt=I&&I.hasPaidSubscription()&&!I.isWorkspacePlan(),[Gt,Ht]=f.useState(!1),[Kt,Vt]=f.useState(!1);f.useEffect(()=>{Fe!==void 0&&Ot(Fe)},[Fe]);const Nn=f.useCallback(()=>{g(!1)},[]),En=f.useCallback(()=>{u(!1)},[]),_n=f.useCallback(()=>{y(!1)},[]),In=f.useCallback(()=>{g(!0)},[]),Ln=f.useCallback(()=>{u(!0)},[]),Dn=f.useCallback(()=>{h(!0)},[]),Fn=f.useCallback(()=>{y(!0)},[]),Bn=f.useCallback(()=>{q(!0)},[]),Un=f.useCallback(()=>{Ht(!0)},[]),On=f.useCallback(()=>{Vt(!0)},[]),Rn=f.useCallback(()=>{G(!0),B.logoutAll().then(()=>{t.success(s.formatMessage(x.logoutAllSuccess),{testId:"logout-all-success-toaster"}),Ks()}).catch(Be=>{he.addError(new Error("Failed logging out all accounts: ",{cause:Be})),t.danger(s.formatMessage(x.logoutAllFailed),{hasCloseButton:!0}),G(!1)})},[s,t]),ct=Ye(),Wn=()=>{B.deleteConversations().then(()=>{Jt(ct)}),o!=="/"&&i("/",{replace:!0})},Gn=()=>{B.archiveConversations().then(()=>{t.info(s.formatMessage(x.archiveHistorySuccess)),Jt(ct)}),o!=="/"&&i("/",{replace:!0})},Hn=z.status!==oe.LOADING,{native_default_factor_id:Yt,use_native_mfa:Kn}=z,Vn=()=>{if(z.status!==oe.ENABLED)throw new Error("MFA is not enabled");if(Kn){if(!Yt)throw new Error("No factor ID found");return B.disableNativeMFA(Yt)}else return B.disableMfa()},Yn=()=>{Vn().then(()=>{ct.invalidateQueries({queryKey:["mfaInfo"]}),i(pt(ft.DISABLE_MFA_SUCCESS,"/#settings/Security"))}).catch(()=>{i(pt(ft.DISABLE_MFA_TIMEOUT,"/#settings/Security"))})};return Hs("730601627"),Hs("3325813340"),c?e.jsx(Nc,{onClose:Nn}):m?e.jsx(Tc,{onClose:En,onDeleteHistory:Wn}):p?e.jsx(Ac,{onClose:()=>h(!1),onArchiveHistory:Gn}):b?e.jsx(Ec,{onClose:_n}):k?e.jsx(jc,{onClose:()=>{N(!1)}}):F?e.jsx(Tr,{mfaInfo:z,onCancel:()=>{q(!1)},onEnableMFA:H}):U?Hn?e.jsx(wr,{onClose:()=>i("/",{replace:!0}),onConfirm:Yn}):null:P?e.jsx(Xo,{onClose:()=>{L(!1)},fromSettings:!0}):D?e.jsx(dc,{onClose:()=>{_(!1)}}):it?null:Gt&&I?e.jsx(Sr,{isOpen:Gt,onClose:()=>Ht(!1)}):Kt&&I?e.jsx(Bt,{isOpen:Kt,onClose:()=>Vt(!1),accountId:I.id,initialPlanType:I.data.subscriptionStatus.planType,updatedPlanType:I.data.subscriptionStatus.planType}):e.jsx(K,{isOpen:!0,onClose:l,size:"custom",className:"md:max-w-[680px]",type:"success",title:s.formatMessage(x.settings),showCloseButton:!0,noPadding:!0,children:e.jsxs(ei,{className:"flex flex-col gap-6 md:flex-row",defaultValue:r,orientation:a?"vertical":void 0,onValueChange:Be=>{d(Be)},children:[e.jsxs(si,{className:Ve("m-2 md:m-0 md:px-4 md:pl-6 md:pt-4","flex flex-shrink-0 flex-wrap md:ml-[-8px] md:min-w-[180px]",a?"max-w-[200px] flex-col gap-2":"flex-row overflow-x-auto rounded-lg bg-token-main-surface-secondary"),children:[e.jsx(Re,{value:se.General,icon:e.jsx(Ni,{className:"icon-sm"}),label:e.jsx(n,{...x.generalTab})}),!1,rt&&e.jsx(Re,{value:se.DesktopApp,icon:e.jsx(Ei,{className:"icon-sm"}),label:e.jsx(n,{...x.desktopAppTab}),testId:"desktop-app-tab"}),Rt&&e.jsx(Re,{value:se.Personalization,icon:e.jsx(_i,{className:"icon-sm"}),label:e.jsx(n,{...x.personalizationTab}),testId:"personalization-tab"}),e.jsx(Xt.Trigger,{}),e.jsx(Re,{value:se.DataControls,icon:e.jsx(Ii,{className:"icon-sm"}),label:e.jsx(n,{...x.dataControlsTab}),testId:"data-controls-tab"}),I?.canInteractWithGizmos()&&e.jsx(Re,{value:se.BuilderProfile,icon:e.jsx(Li,{className:"icon-sm"}),label:e.jsx(ic,{})}),hs&&e.jsx(Re,{value:se.ConnectorSettings,icon:e.jsx(Di,{className:"icon-sm"}),label:e.jsx(n,{...x.connectorsTab})}),e.jsx(Re,{value:se.Security,icon:e.jsx(Fi,{className:"icon-sm"}),label:e.jsx(n,{...x.securityTab}),testId:"security-tab"}),Wt&&e.jsx(Re,{value:se.Subscription,icon:e.jsx(Bi,{className:"icon-sm"}),label:e.jsx(n,{...x.subscriptionTab}),testId:"subscription-tab"})]}),e.jsxs(Le,{value:se.General,children:[!rt&&e.jsx(R,{children:e.jsx(pn,{})}),!1,e.jsx(R,{children:e.jsx(Ss,{label:s.formatMessage(x.alwaysExpandCodeOutput),enabled:lt,isLoading:Me,onChange:Be=>{kn.mutate({setting:gs.ShowExpandedCodeView,value:Be}),Ot(Be)}})}),e.jsx(R,{children:e.jsx(wc,{})}),e.jsx(R,{children:e.jsx(ye,{label:s.formatMessage(x.archivedConversations),buttonLabel:s.formatMessage(x.manageButton),onClick:()=>{_(!0)},testId:"manage-archived-conversations-button"})}),e.jsx(R,{children:e.jsx(ye,{label:s.formatMessage(x.archiveChatsLabel),buttonLabel:s.formatMessage(x.archiveChatsButton),onClick:Dn,testId:"archive-all-chats-button"})}),e.jsx(R,{children:e.jsx(ye,{color:"danger",label:s.formatMessage(x.deleteChatLabel),buttonLabel:s.formatMessage(x.deleteChatButton),onClick:Ln,testId:"delete-all-chats-button"})}),e.jsx(R,{children:e.jsx(ye,{label:s.formatMessage(x.logOutLabel),buttonLabel:s.formatMessage(x.logOutButton),onClick:()=>Ks(),testId:"logout-button"})})]}),!1,rt&&e.jsx(Le,{value:se.DesktopApp,children:e.jsx(Br,{})}),!ts&&e.jsx(Le,{value:se.BetaFeatures,children:e.jsx(kc,{})}),e.jsxs(Le,{value:se.DataControls,children:[e.jsx(vc,{}),ot&&e.jsx(R,{children:e.jsx(ye,{label:s.formatMessage(x.sharedConversations),buttonLabel:s.formatMessage(x.manageButton),onClick:()=>{N(!0)},testId:"manage-shared-conversations-button"})}),wn&&Tn&&e.jsx(R,{children:e.jsx(ye,{label:s.formatMessage(x.mergePersonalData),buttonLabel:s.formatMessage(x.mergeButton),onClick:()=>{L(!0)}})}),!ts&&e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsx(ye,{label:s.formatMessage(x.exportData),buttonLabel:s.formatMessage(x.exportButton),onClick:In,testId:"export-data-button"})}),e.jsx(R,{children:e.jsx(ye,{label:s.formatMessage(x.deleteAccount),buttonLabel:s.formatMessage(x.deleteAccountButton),color:"danger",onClick:Fn,testId:"delete-account-button"})})]})]}),Rt&&e.jsx(Le,{value:se.Personalization,children:e.jsx(hc,{})}),e.jsx(Le,{value:se.BuilderProfile,children:e.jsx(tc,{})}),hs&&e.jsx(Le,{value:se.ConnectorSettings,children:e.jsx(yr,{clientApplications:fs,isGdriveEnabled:as,isO365Enabled:ns,isConfluenceEnabled:$e,isJiraEnabled:qe})}),e.jsx(Xt.Content,{}),e.jsxs(Le,{value:se.Security,children:[An&&e.jsx(R,{children:e.jsx(ye,{label:e.jsxs(e.Fragment,{children:[e.jsx(n,{id:"settingsModal.toggleMfa",defaultMessage:"Multi-factor authentication"}),O===oe.ENABLED&&e.jsx("span",{className:"mx-1.5 rounded bg-green-50 px-1 py-0.5 text-xs font-semibold text-green-700",children:e.jsx(n,{id:"settingsModal.mfaEnabled",defaultMessage:"Enabled"})})]}),disabled:O===oe.LOADING,buttonLabel:e.jsxs(e.Fragment,{children:[O===oe.LOADING&&e.jsx(n,{id:"settingsModal.loadingMfa",defaultMessage:"Loading..."}),O===oe.ENABLED&&e.jsx(n,{id:"settingsModal.disable",defaultMessage:"Disable"}),O===oe.DISABLED&&e.jsx(n,{id:"settingsModal.enable",defaultMessage:"Enable"})]}),onClick:()=>{O===oe.ENABLED?X():O===oe.DISABLED&&T?Bn():O===oe.DISABLED&&H()},description:e.jsxs(e.Fragment,{children:[O===oe.DISABLED&&e.jsx(n,{id:"settingsModal.toggleMfaDescriptionDisabled",defaultMessage:"Require an extra security challenge when logging in. If you are unable to pass this challenge, you will have the option to recover your account via email."}),O===oe.ENABLED&&e.jsxs(e.Fragment,{children:[e.jsx(n,{id:"settingsModal.toggleMfaDescriptionEnabled",defaultMessage:"You'll only be able to log in using {currentIdp} while this is on.",values:{currentIdp:ze}})," ",e.jsx("a",{className:"underline",target:"_blank",rel:"noreferrer",href:Vi,children:e.jsx(n,{id:"settingsModal.toggleMfaDescriptionLearnMore",defaultMessage:"Learn more"})}),"."]})]})})}),e.jsx(R,{children:e.jsx(ye,{label:e.jsx(n,{id:"settingsModal.logoutAllLabel",defaultMessage:"Log out of all devices"}),buttonLabel:e.jsx("div",{style:{whiteSpace:"nowrap"},children:e.jsx(n,{id:"settingsModal.logoutAllButton",defaultMessage:"Log out all"})}),description:e.jsx(n,{id:"settingsModal.logoutAllDescription",defaultMessage:"Log out of all active sessions across all devices, including your current session. It may take up to 30 minutes for other devices to be logged out."}),onClick:()=>{j.logLogOutButtonClicked({location:"settings_modal_log_out_all"}),Rn()},disabled:E,testId:"logout-all-button"})})]}),Wt&&e.jsx(Le,{value:se.Subscription,children:e.jsx(Kl,{currentAccount:I,onCancelSubscriptionClick:Un,onRenewSubscriptionClick:On})})]})})};function kc(){return e.jsx(e.Fragment,{children:e.jsx(R,{children:e.jsx("p",{children:e.jsx(n,{...x.betaIntro})})})})}function wc(){const{localeList:s,localPreferenceLocale:t,setLocale:a,suggestedLocale:o,currentLocale:i,unsanitizedBrowserLocale:l}=wa(),r=[...new Set([t,o])].filter(c=>c!=null),d=s.filter(c=>!r.includes(c));return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(n,{...x.locale})}),e.jsxs(te.Root,{value:t??"auto",onValueChange:c=>{j.logEvent(S.localeUpdatedByUser,{from_locale:i,to_locale:c,raw_browser_locale:l??"",suggested_locale:o??""}),ee.logEvent("chatgpt_locale_updated_by_user",c,{from_locale:i,to_locale:c,raw_browser_locale:l??"",suggested_locale:o??""}),a(c==="auto"?null:c)},children:[e.jsxs(te.Trigger,{children:[e.jsx(te.Value,{}),e.jsx(te.Icon,{})]}),e.jsx(te.Portal,{children:e.jsxs(te.Content,{side:void 0,sideOffset:void 0,position:"item-aligned",children:[e.jsx(te.Item,{value:"auto",children:e.jsx(n,{...x.localeAuto})}),r.map(c=>e.jsx(te.Item,{value:c,children:qt[c]??c},c)),e.jsx(te.Separator,{}),d.map(c=>e.jsx(te.Item,{value:c,children:qt[c]??c},c))]})})]})]})}function Pc(){const s=w(),t=lo(),{closeSettings:a}=ws();return f.useEffect(()=>{ee.logEvent("chatgpt_unauthenticated_settings_modal_shown"),j.logEvent(S.unauthSettingsModal)},[]),e.jsx(K,{isOpen:!0,onClose:a,type:"success",showCloseButton:!0,title:s.formatMessage(x.settings),children:e.jsx(R,{children:e.jsx(Ss,{label:s.formatMessage({id:"settingsModal.unauthChatTrainingToggleLabel",defaultMessage:"Improve the model for everyone"}),enabled:t,onChange:o=>{ro.setIsNoAuthChatTrainingEnabled(o),j.logEvent(S.noAuthChatTrainingToggled,{isEnabled:o})},description:e.jsx(n,{id:"rtxsI1",defaultMessage:"Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>.",values:{link:o=>e.jsx("a",{href:Sn,target:"_blank",className:"underline",rel:"noreferrer",children:o})}})})})})}function Tc({onClose:s,onDeleteHistory:t}){const a=w(),o=Ha();return e.jsx(K,{isOpen:!0,onClose:s,type:"success",title:a.formatMessage(x.deleteHistoryModalTitle),description:o&&e.jsx(n,{id:"settingsModal.deleteHistoryModalMemoryDisclaimer",defaultMessage:"To clear any memories from your chats, visit your <link>settings</link>.",values:{link:i=>e.jsx(Y,{onClick:()=>s(),to:"#settings/Personalization",className:"underline",children:i})}}),primaryButton:e.jsx(ae.Button,{title:a.formatMessage(x.deleteHistoryModalConfirm),color:"danger",onClick:()=>{t(),s()},"data-testid":"confirm-delete-all-chats-button"}),secondaryButton:e.jsx(ae.Button,{title:a.formatMessage(x.deleteHistoryModalCancel),color:"secondary",onClick:s})})}function Ac({onClose:s,onArchiveHistory:t}){const a=w();return e.jsx(K,{isOpen:!0,onClose:s,type:"success",title:a.formatMessage(x.archiveHistoryModalTitle),primaryButton:e.jsx(ae.Button,{title:a.formatMessage(x.archiveHistoryModalConfirm),color:"primary",onClick:()=>{t(),s()}}),secondaryButton:e.jsx(ae.Button,{title:a.formatMessage(x.archiveHistoryModalCancel),color:"secondary",onClick:s})})}function Nc({onClose:s}){const t=w(),a=J(),o=f.useCallback(()=>{try{B.submitDataExport().then(()=>{a.success(t.formatMessage(x.dataExportRequested),{testId:"data-export-success-toaster"}),s()})}catch{a.warning(t.formatMessage(x.dataExportFailed),{hasCloseButton:!0})}},[t,a,s]);return e.jsx(K,{isOpen:!0,onClose:s,type:"success",title:t.formatMessage(x.dataExportModalTitle),primaryButton:e.jsx(ae.Button,{title:t.formatMessage(x.dataExportModalConfirm),color:"primary",onClick:o,"data-testid":"confirm-data-export-button"}),secondaryButton:e.jsx(ae.Button,{title:t.formatMessage(x.dataExportModalCancel),color:"secondary",onClick:s}),children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("ul",{className:"my-3 flex list-disc flex-col gap-1 pl-3",children:[e.jsx("li",{children:e.jsx(n,{...x.dataExportModalDescription1})}),e.jsx("li",{children:e.jsx(n,{...x.dataExportModalDescription2})}),e.jsx("li",{children:e.jsx(n,{...x.dataExportModalDescription3})}),e.jsx("li",{children:e.jsx(n,{...x.dataExportModalDescription4})})]}),e.jsx("div",{children:e.jsx(n,{...x.dataExportModalDescription5})})]})})}function Ec({onClose:s}){const t=w(),a=J(),{session:o}=Js(),l=kt()?.email,[r,d]=f.useState(""),[c,g]=f.useState(""),m=f.useCallback(()=>{const N=o?.user?.iat;return N===void 0||Date.now()/1e3-N<600},[o]),u=f.useCallback(()=>{try{m()?B.deactivateAccount().then(()=>{Ks()}):a.warning(t.formatMessage(x.deleteAccountSessionTooOld),{hasCloseButton:!0})}catch{a.warning(t.formatMessage(x.deleteAccountFailed),{hasCloseButton:!0})}},[t,a,m]),p=f.useCallback(()=>{Ks()},[]),h=c==="DELETE"&&(l===void 0||r.toLowerCase()===l.toLowerCase()),[b]=f.useState(()=>m()),y=ti();return e.jsx(K,{isOpen:!0,onClose:s,type:"success",title:t.formatMessage(x.deleteAccountTitle),showCloseButton:!0,children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("ul",{className:"mb-6 mt-4 flex list-disc flex-col gap-1 pl-3",children:[e.jsx("li",{children:e.jsx(n,{...x.deleteAccountWarning})}),e.jsx("li",{children:e.jsx(n,{...x.apiAccessDeletionWarning})}),e.jsx("li",{children:e.jsx(n,{...x.reuseEmailPhoneWarning})}),e.jsx("li",{children:e.jsx(n,{...x.dataRemovalWarning})}),y?.purchase_origin_platform===re.MOBILE_IOS&&e.jsx("li",{children:e.jsx(n,{...x.iapSubscriptionWarning})}),y?.purchase_origin_platform===re.MOBILE_ANDROID&&e.jsx("li",{children:e.jsx(n,{...x.playStoreSubscriptionWarning})}),e.jsx("li",{children:e.jsx(n,{...x.deleteHelpCenter,values:{article:k=>e.jsx("a",{href:"https://help.openai.com/en/articles/6378407-how-to-delete-your-account",target:"_blank",className:"underline",rel:"noopener noreferrer",children:k})}})})]}),b?e.jsxs(e.Fragment,{children:[l!==void 0?e.jsxs("div",{className:"mb-4",children:[e.jsx(Ca,{htmlFor:"email",children:e.jsx(n,{...x.typeEmailLabel})}),e.jsx(Vs,{ariaLabel:!1,value:r,placeholder:l,name:"email",onChange:k=>{d(k.target.value)}})]}):null,e.jsxs("div",{className:"mb-4",children:[e.jsx(Ca,{htmlFor:"delete",children:e.jsx(n,{...x.typeDeleteInputLabel})}),e.jsx(Vs,{ariaLabel:!1,value:c,onChange:k=>{g(k.target.value)},name:"delete",className:"mb-4"})]}),e.jsx(Z,{color:h?"danger":"disabled",onClick:u,disabled:!h,fullWidth:!0,icon:h?Va:Ui,children:h?e.jsx(n,{...x.deleteAccountButtonLabel}):e.jsx(n,{...x.lockedButtonLabel})})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"pb-4 text-xs text-token-text-tertiary",children:e.jsx(n,{...x.recentLoginMessage})}),e.jsx(Z,{color:"primary",onClick:p,fullWidth:!0,children:e.jsx(n,{...x.refreshLoginButtonLabel})})]})]})})}const Ca=ve.label`block text-sm font-semibold mb-1`,x=V({settings:{id:"settingsModal.settings",defaultMessage:"Settings"},locale:{id:"settingsModal.locale_alpha",defaultMessage:"Language"},localeAuto:{id:"settingsModal.localeAuto",defaultMessage:"Auto-detect"},archivedConversations:{id:"settingsModal.archivedConversations",defaultMessage:"Archived chats"},sharedConversations:{id:"settingsModal.sharedConversations",defaultMessage:"Shared links"},manageButton:{id:"settingsModal.manageButton",defaultMessage:"Manage"},mergePersonalData:{id:"settingsModal.mergePersonalData",defaultMessage:"Merge data from your personal workspace"},mergeButton:{id:"settingsModal.mergeButton",defaultMessage:"Merge"},cookieManagement:{id:"settingsModal.cookieManagement",defaultMessage:"Cookie preferences"},cookieManagementButton:{id:"settingsModal.cookieManagementButton",defaultMessage:"Manage"},exportData:{id:"settingsModal.exportData",defaultMessage:"Export data"},exportButton:{id:"settingsModal.exportButton",defaultMessage:"Export"},deleteAccount:{id:"settingsModal.deleteAccount",defaultMessage:"Delete account"},deleteAccountButton:{id:"settingsModal.deleteButton",defaultMessage:"Delete"},alwaysExpandCodeOutput:{id:"settingsModal.alwaysShowDataAnalystOutput",defaultMessage:"Always show code when using data analyst"},trainingAllowedDescription:{id:"Qalmv5",defaultMessage:"Allow your content to be used to train our models, which makes ChatGPT better for you and everyone who uses it. We take steps to protect your privacy. <link>Learn more</link>"},deleteHistoryModalTitle:{id:"settingsModal.deleteHistoryModalTitle",defaultMessage:"Clear your chat history - are you sure?"},deleteHistoryModalConfirm:{id:"settingsModal.deleteHistoryModalConfirm",defaultMessage:"Confirm deletion"},deleteHistoryModalCancel:{id:"settingsModal.deleteHistoryModalCancel",defaultMessage:"Cancel"},archiveHistoryModalTitle:{id:"settingsModal.archiveHistoryModalTitle",defaultMessage:"Archive your chat history - are you sure?"},archiveHistoryModalConfirm:{id:"settingsModal.archiveHistoryModalConfirm",defaultMessage:"Confirm archive"},archiveHistoryModalCancel:{id:"settingsModal.archiveHistoryModalCancel",defaultMessage:"Cancel"},archiveHistorySuccess:{id:"settingsModal.archiveHistorySuccess",defaultMessage:"Successfully archived chats. You can view your archived chats in Settings."},dataExportRequested:{id:"settingsModal.dataExportRequested",defaultMessage:"Successfully exported data. You should receive an email shortly with your data."},dataExportFailed:{id:"settingsModal.dataExportFailed",defaultMessage:"We were unable to process your export at this time. Please try again later."},dataExportModalTitle:{id:"settingsModal.dataExportModalTitle",defaultMessage:"Request data export - are you sure?"},dataExportModalConfirm:{id:"settingsModal.dataExportModalConfirm",defaultMessage:"Confirm export"},dataExportModalCancel:{id:"settingsModal.dataExportModalCancel",defaultMessage:"Cancel"},dataExportModalDescription1:{id:"settingsModal.dataExportModalDescription1",defaultMessage:"Your account details and chats will be included in the export."},dataExportModalDescription2:{id:"settingsModal.dataExportModalDescription2",defaultMessage:"The data will be sent to your registered email in a downloadable file."},dataExportModalDescription3:{id:"settingsModal.dataExportModalDescription3",defaultMessage:"The download link will expire 24 hours after you receive it."},dataExportModalDescription4:{id:"settingsModal.dataExportModalDescription4",defaultMessage:"Processing may take some time. You'll be notified when it's ready."},dataExportModalDescription5:{id:"settingsModal.dataExportModalDescription5",defaultMessage:'To proceed, click "Confirm export" below.'},deleteAccountSessionTooOld:{id:"settingsModal.deleteAccountSessionTooOld",defaultMessage:"Your login session is too old. Please log in again before deleting your account."},deleteAccountFailed:{id:"settingsModal.deleteAccountFailed",defaultMessage:"Failed to delete account. Please try again later."},deleteAccountTitle:{id:"settingsModal.deleteAccountTitle",defaultMessage:"Delete account - are you sure?"},deleteAccountWarning:{id:"settingsModal.deleteAccountWarning",defaultMessage:"Deleting your account is permanent and cannot be undone."},reuseEmailPhoneWarning:{id:"settingsModal.reuseEmailPhoneWarning-2",defaultMessage:"You cannot create a new account using the same email address."},dataRemovalWarning:{id:"settingsModal.dataRemovalWarning-2",defaultMessage:"Your data will be deleted within 30 days, except we may retain a limited set of data for longer where required or permitted by law."},apiAccessDeletionWarning:{id:"settingsModal.apiAccessDeletionWarning-2",defaultMessage:"Deletion will prevent you from accessing OpenAI services, including ChatGPT, API, and DALL·E."},deleteHelpCenter:{id:"settingsModal.deleteHelpCenter",defaultMessage:"Read our <article>help center article</article> for more information."},iapSubscriptionWarning:{id:"settingsModal.iapSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Apple App Store. We cannot cancel your subscription for you."},playStoreSubscriptionWarning:{id:"settingsModal.playStoreSubscriptionWarning",defaultMessage:"You will need to cancel your in-app purchase subscription in the Google Play Store. We cannot cancel your subscription for you."},typeEmailLabel:{id:"settingsModal.typeEmailLabel",defaultMessage:"Please type your account email."},typeDeleteInputLabel:{id:"settingsModal.typeDeleteInputLabel",defaultMessage:'To proceed, type "DELETE" in the input field below.'},lockedButtonLabel:{id:"settingsModal.lockedButtonLabel",defaultMessage:"Locked"},deleteAccountButtonLabel:{id:"settingsModal.deleteAccountButtonLabel",defaultMessage:"Permanently delete my account"},recentLoginMessage:{id:"settingsModal.recentLoginMessage",defaultMessage:"You may only delete your account if you have logged in within the last 10 minutes. Please log in again, then return here to continue."},refreshLoginButtonLabel:{id:"settingsModal.refreshLoginButtonLabel",defaultMessage:"Refresh login"},chatTrainingAllowedToggleLabel:{id:"settingsModal.trainingAllowedToggleLabel",defaultMessage:"Improve the model for everyone"},chatTrainingEnterpriseTooltip:{id:"settingsModal.chatTrainingEnterpriseTooltip",defaultMessage:"ChatGPT Enterprise automatically disables training."},chatTrainingEduTooltip:{id:"settingsModal.chatTrainingEduTooltip",defaultMessage:"ChatGPT Edu automatically disables training."},chatTrainingTeamsTooltip:{id:"settingsModal.chatTrainingTeamsTooltip",defaultMessage:"ChatGPT Team automatically disables training."},dataControlsTab:{id:"settingsModal.dataControls",defaultMessage:"Data controls"},cookiesTab:{id:"settingsModal.cookies",defaultMessage:"Cookie Preferences"},personalizationTab:{id:"settingsModal.personalization",defaultMessage:"Personalization"},betaIntro:{id:"settingsModal.betaIntro",defaultMessage:"As a Plus user, enjoy early access to experimental new features, which may change during development."},betaSettingsUpdateFailed:{id:"settingsModal.betaSettingsUpdateFailed",defaultMessage:"Failed to update your beta setting"},generalTab:{id:"settingsModal.generalTab",defaultMessage:"General"},desktopAppTab:{id:"settingsModal.desktopAppTab",defaultMessage:"App"},betaTab:{id:"settingsModal.betaTab",defaultMessage:"Beta features"},connectorsTab:{id:"settingsModal.connectorsTab",defaultMessage:"Connected apps"},securityTab:{id:"settingsModal.securityTab",defaultMessage:"Security"},subscriptionTab:{id:"settingsModal.subscriptionTab",defaultMessage:"Subscription"},logoutAllSuccess:{id:"settingsModal.logoutAllSuccess",defaultMessage:"Successfully logged out of all devices."},logoutAllFailed:{id:"settingsModal.logoutAllFailed",defaultMessage:"We were unable to process your request at this time. Please try again later."},deleteChatLabel:{id:"settingsModal.deleteChatLabel",defaultMessage:"Delete all chats"},deleteChatButton:{id:"settingsModal.deleteChatButton",defaultMessage:"Delete all"},logOutLabel:{id:"settingsModal.logOutLabel",defaultMessage:"Log out on this device"},logOutButton:{id:"settingsModal.logoutButton",defaultMessage:"Log out"},archiveChatsLabel:{id:"settingsModal.archiveChatsLabel",defaultMessage:"Archive all chats"},archiveChatsButton:{id:"settingsModal.archiveChatsButton",defaultMessage:"Archive all"},chatHistoryDescription:{id:"settingsModal.chatHistoryDescription",defaultMessage:"Save new chats on this browser to your history and allow them to be used to improve our models. Unsaved chats will be deleted from our systems within 30 days. This setting does not sync across browsers or devices. <link>Learn more</link>"}});function _c(){const{isOpen:s}=ws(),{isUnauthenticated:t}=qs();return s?t?e.jsx(Pc,{}):e.jsx(Sc,{}):null}const Ic=co(()=>uo(()=>import("./ne8l50zu7982kn81.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(s=>s.FannyPackModalContainer));function $c(){const s=ht(g=>g.purchaseWorkspaceData),t=ht(g=>g.leaveWorkspaceData),a=s!=null,o=Ys(Ce.UserContext),i=Ys(Ce.GlobalMemoryOnboarding),l=xe();let{isOpen:r,isTeamAccountIntent:d}=xr();const{isFannyPackEnabled:c}=ai();return e.jsxs(e.Fragment,{children:[e.jsx(_c,{}),e.jsx(sl,{}),r&&l&&e.jsx(ir,{currentAccount:l,initTab:d?"business":void 0}),e.jsx(ni,{}),e.jsx(tl,{}),a&&e.jsx(fr,{isOpen:a,onClose:()=>ue.setPurchaseWorkspaceData(null),...s}),t&&e.jsx(Zi,{workspace:t}),o&&e.jsx(pc,{isModalOpen:o}),i&&e.jsx(oi,{onClose:()=>ue.closeModal(Ce.GlobalMemoryOnboarding)}),c&&e.jsx(Ic,{})]})}export{$c as GlobalModalsComponent};
//# sourceMappingURL=gwtu8l0gqil6namv.js.map
