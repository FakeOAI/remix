import{dC as p,av as E,r as a,a4 as C,E as O,aX as i,aY as u}from"./hwf9zvd1aw2q6bni.js";import"./o9jymz7vdhi3lqx8.js";function g(){const{pluginId:t}=p(),s=E(),l=a.useRef(!1),[h,R]=a.useState(""),{code:r,error:n,error_description:o,state:c}=Object.fromEntries(new URLSearchParams(h.substring(1)).entries());return a.useEffect(()=>{R(window.location.hash)},[]),a.useEffect(()=>{if(l.current)return;t&&r&&c&&(l.current=!0);async function S(){const d=`https://chatgpt.com/ccc/${t}/oauth/callback`;if(!(!t||!r||!c))try{const e=await O.connectorOauthCallback(t,r,d,c);if(e.success){const f=new URL(i(u.OAUTH_SUCCESS,e.redirect_path));f.searchParams.set("oauth_success","true"),s(f.toString())}else s(i(u.CUSTOM_ERROR,e.redirect_path,e.error??e.message))}catch{s(i(u.CUSTOM_ERROR))}}S()},[t,r,c,s]),a.useEffect(()=>{n&&C.danger(`${n}${o?`: ${o}`:""}`)},[n,o]),null}export{g as default};
//# sourceMappingURL=mkj0tfmfle9lxm0c.js.map
