const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/fhw0icz4f08aif72.js","assets/gnjg6cp4ioz25f31.js","assets/im20d4w70qcxq81l.js","assets/root-kay5jwyu.css","assets/9gfvdo9p41crlm24.js","assets/conversation-small-ile61fj8.css","assets/ukecv4exve4a1tyo.js","assets/k90bpdco15yxz9xv.js","assets/fygt0p0hztlvvjc4.js","assets/dp0334i9wib2cn47.js","assets/iysuoma6r82ghglw.js","assets/6rapfslc0yzn6it4.js","assets/epcstfwu2oslfru5.js","assets/nte8br2ke32d8n4n.js","assets/lszn2d672usb7oh3.js","assets/f0ewhcjs6psljgmp.js","assets/jfrxc39qf4oecq33.js","assets/fzrn137102spawew.js","assets/nb6zzwdbuejocp2r.js","assets/dsdly0t9b2b257p8.js","assets/m457twa106m3ccnl.js","assets/cyrpiy9l4mu4i6qb.js","assets/io46uqpetevvzuig.js","assets/ic3imqtxafxohs3p.js","assets/e38x4meayh6909hn.js","assets/pftj34y9vdt9pcyk.js","assets/kqwdyvkaaavvn8k3.js","assets/lwjozw270yb72dpd.js","assets/dafwseq3gpq84z5d.js","assets/983a0dy92b3ronpv.js","assets/d0hhlirkptk9mpoo.js","assets/dt522ox3jq1n80du.js","assets/b3w3mptw17ldnfnn.js","assets/c4bxzbp1808foto4.js","assets/cta3wgowyajs3gdb.js","assets/b2eua8ra8t68p8og.js","assets/nha3zjls52bos322.js","assets/dxevk8ut3l4ymp8g.js","assets/evtrytf1miijr248.js","assets/e61fz2jrpf9brksi.js","assets/ihupx2lf6ror0k7y.js","assets/1ind0yyqj7jsns72.js","assets/lrjxw81vo5kmz4f3.js","assets/ojug1lhrlkfmgukz.js","assets/oeh8fxn2ptvbo85p.js","assets/bpanbkafmw208sol.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{r as l,Z as Te,dk as De,dj as _e,dh as Ie,x as ye,ab as Ne,gl as Le,y as L,c3 as Be,aR as Fe,hg as oe,m as e,G as Ve,c9 as Re,ba as We,F as He,aH as f,aI as m,aq as Ge,bf as Ue,b2 as te,fo as pe,gY as ne,eW as re,aD as ze,gR as y,bp as qe,ap as Ke,a2 as ie,a4 as Qe,d3 as de,D as Ye,ci as Je,cj as Ze,ck as $e,dt as Xe,g0 as ea,s as aa,L as sa}from"./gnjg6cp4ioz25f31.js";import{h1 as oa,h2 as ta,bN as k,h3 as na,h4 as ra,h5 as ia,h6 as da,h7 as la,h8 as ca,h9 as ua,e7 as ha,ha as ga,hb as fa,hc as ma,hd as pa,he as ba,hf as Sa,hg as xa,hh as Ca,hi as Ma,hj as ja,hk as wa,hl as va,hm as Aa,hn as Oa,ho as ka,hp as Ea,hq as Pa,hr as Ta,hs as Da,ht as _a,bY as be,p as N,U as le,bO as F,hu as Ia,hv as ya,cC as Se,ba as Na,cD as La,T as xe,hw as Ce,hx as Ba,hy as Fa,fz as Me,hz as je,hA as we,hB as Va,ao as ve,aC as Ra,bb as Ae,hC as ce,hD as A,ff as Wa,bq as B,br as ue,n as Ha,hE as Ga,u as Ua,eP as za,em as qa,eO as Ka,hF as Qa,hG as Ya,hH as Ja,hI as Za,hJ as $a,hK as Xa,hL as he,hM as es,am as as,hN as ss,hO as os,b8 as ts,cA as ns,cB as rs,hP as is,hQ as ds,cE as ls,hR as cs}from"./9gfvdo9p41crlm24.js";import{S as ge,b as us,c as hs}from"./cta3wgowyajs3gdb.js";import{S as gs,C as fs}from"./nha3zjls52bos322.js";import{T as Oe,C as ke}from"./dxevk8ut3l4ymp8g.js";import{N as ms}from"./b2eua8ra8t68p8og.js";import{m as O}from"./fygt0p0hztlvvjc4.js";import{C as ps}from"./lrjxw81vo5kmz4f3.js";const bs=({onClose:a})=>{const s=Ve(),o=k(F.isBusinessWorkspace),t=k(i=>i.currentWorkspace),r=o?s.formatMessage(fe.workspaceWelcome,{workspaceName:t?.name}):"ChatGPT";return e.jsx(Re,{isOpen:!0,onClose:We,type:"success",title:r,size:"custom",noPadding:!0,className:"max-w-3xl",description:s.formatMessage(fe.personalOnboardingSubheading),children:e.jsx(Ia,{onClose:a,scope:ya.Personal})})};function Ss({clientThreadId:a}){const[s,o]=l.useState(0),{hasSeenOnboardingDate:t}=oa(),{hasSeenTeamOwnerOnboardingDate:r}=ta(),i=k(F.isBusinessWorkspace),u=Te(),[n,h]=l.useState(!1),{data:E,isPending:P,isEnabled:T}=na(),b=ra(E,P&&T),{eligible:v}=ia(),S=De(),x=_e(),C=Ie(),D=ye(()=>Ne.getThread(a)),M=Le(a)||!D,j=L.getConversationOrigin(a),{data:d,isError:w}=Be(),g=d!=null,V=d&&d?.accountItems.length>1&&d.currentAccountId==null,R=d?.accountItems.some(c=>c.isPersonalAccount()),W=!!d?.accountItems&&d.accountItems.length>0&&d.accountItems.every(({canAccessWithCurrentSession:c})=>!c),{eligible:H,isLoading:G}=da(),{value:U}=Fe("1542198993"),{punchOutRequireLoginInfo:z}=la(),{state:q}=ca(),{isOpen:K,isLoading:Q}=ua(),{isOpen:Y,isLoading:J}=ha(),{isOpen:Z,isLoading:$}=ga(),{isOpen:X,isLoading:ee}=fa(),{state:ae}=ma(),p=l.useMemo(()=>[{Component:pa,getModalState:()=>z?"show":"hide",isDeferrable:!1},{Component:ba,getModalState:()=>q,isDeferrable:!1},{Component:Sa,getModalState:()=>ae,isDeferrable:!1},{Component:xa,getModalState:()=>Q||M?"loading":j===oe.APPLE?"hide":K?"show":"hide",isDeferrable:!1},{Component:Ca,getModalState:()=>ee||M?"loading":j===oe.APPLE?"hide":X?"show":"hide",isDeferrable:!1},{Component:bs,getModalState:()=>i?"hide":t===null?"loading":t===!1?"show":"hide",isDeferrable:!0},{Component:Ma,getModalState:()=>w?"hide":V?"show":g?"hide":"loading",isDeferrable:!1},{Component:ja,getModalState:()=>S!==null?"show":w||g?"hide":"loading",isDeferrable:!1},{Component:wa,getModalState:()=>x!==null?"show":w||g?"hide":"loading",isDeferrable:!1},{Component:va,getModalState:()=>C!=null?"show":w||g?"hide":"loading",isDeferrable:!1},{Component:Aa,getModalState:()=>g?W?"show":"hide":"loading",isDeferrable:!1},{Component:Oa,getModalState:()=>J?"loading":Y?"show":"hide",isDeferrable:!1},{Component:ka,getModalState:()=>$?"loading":Z?"show":"hide",isDeferrable:!1},{Component:Ea,getModalState:()=>"hide",isDeferrable:!1},{Component:Pa,getModalState:()=>!u?.isTeam()||!u?.isOwnerOfAccount()||!R?"hide":!g||r===null?"loading":r===!1?"show":"hide",isDeferrable:!1},{Component:Ta,getModalState:()=>i?t===null?"loading":t===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Da,getModalState:()=>G?"loading":H&&U?"show":"hide",isDeferrable:!1},{Component:_a,getModalState:()=>b,isDeferrable:!1}].filter(c=>!(c.isDeferrable&&n)),[v,z,q,C,g,t,r,R,i,w,S,x,u,W,V,b,n,U,H,G,K,Q,X,ee,ae,J,Y,Z,$,j,M]);l.useEffect(()=>{if(p[s]&&p[s].getModalState()==="hide"){const c=p.findIndex(Pe=>Pe.getModalState()!=="hide");o(c)}},[s,p]);const _=p[s],I=_?.getModalState()==="show";if(l.useEffect(()=>{const c=be.getState().activeModals.has(N.BlockingInitialComponent);I!==c&&(I?le.openModal(N.BlockingInitialComponent):le.closeModal(N.BlockingInitialComponent))},[I]),_==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const se=_.getModalState();if(se==="loading")return null;se==="hide"&&o(c=>c+1);const Ee=p[s].Component;return e.jsx(Ee,{onClose:()=>{h(!0),o(c=>c+1)}})}const fe=He({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),xs=f(()=>m(()=>import("./fhw0icz4f08aif72.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(a=>a.CanvasFocusedViewManager)),Cs=f(()=>m(()=>import("./io46uqpetevvzuig.js"),__vite__mapDeps([22,1,2,3,23,4,5,24,25,26,27,28,8,29])).then(a=>a.SearchResultsModal));function Ms({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){const r=Ge();Se({clientThreadId:a});const{createNewThread:i,onThreadCreated:u,resetThread:n}=Na({clientThreadId:a,setClientThreadId:s});return La({resetThreadAction:n,clientThreadId:a}),e.jsxs(xe,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(Ce,{clientThreadId:a,urlThreadId:o}),e.jsxs(ge,{hideNavigation:r,mobileHeaderContent:e.jsx(Ba,{clientThreadId:a,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Fa,{clientThreadId:a}),mobileHeaderLeftContent:e.jsx(us,{onNewChatButtonClick:n}),mobileHeaderRightContent:e.jsx(hs,{onNewChatButtonClick:n}),sidebar:e.jsx(ms,{navHeader:a?e.jsx(gs,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:i}):null,children:e.jsx(fs,{clientThreadId:a,onNewThread:i})}),threadFlyout:e.jsx(Me,{clientThreadId:a}),children:[e.jsx(je,{}),e.jsx(Oe,{clientThreadId:a,onCreate:u,prefetchSearch:t},a),e.jsxs(ge.Sidebars,{children:[e.jsx(xs,{clientThreadId:a}),e.jsx(we,{clientThreadId:a})]})]}),e.jsx(js,{clientThreadId:a})]})}function js({clientThreadId:a}){const s=Ue(),o=s?.includes(te.SearchTool)&&!s?.includes(te.SearchToolHoldout),t=Va();return pe()&&(!t||!o)&&e.jsx(Cs,{clientThreadId:a})}const me=450;function ws({children:a,clientThreadId:s,isOpen:o,onClose:t}){const r=ve();return e.jsxs(Ra,{children:[o&&r&&e.jsx(Ae,{clientThreadId:s,children:e.jsx(ne,{children:e.jsx(ce.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(O.div,{className:"h-full w-full bg-token-main-surface-secondary",...A}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(O.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:me},...A,children:e.jsx(ke,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:a})]})]})})})}),o&&!r&&e.jsx(ne,{children:e.jsx(ce.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(O.div,{className:"h-full w-full bg-token-main-surface-secondary",...A}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(O.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:me},...A,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Oe,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const vs=f(()=>m(()=>import("./d0hhlirkptk9mpoo.js"),__vite__mapDeps([30,1,2,3,4,5]))),As=f(()=>m(()=>import("./dt522ox3jq1n80du.js"),__vite__mapDeps([31,1,2,3,4,5,32,33,8,34,35,19,36,37,9,38,15,39,40,41,42])).then(a=>a.ImageEditor));function Os({clientThreadId:a}){const s=Wa();l.useEffect(()=>{B.close()},[a]);let o;return s?.type===ue.ADAVisualization?o=e.jsx(vs,{clientThreadId:a,visualization:s.visualization}):s?.type===ue.Image&&(o=e.jsx(As,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(ws,{clientThreadId:a,isOpen:s!=null,onClose:B.close,children:o})}const ks=f(()=>m(()=>import("./fhw0icz4f08aif72.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(a=>a.CanvasFocusedViewManager));function Es(){const{focusedObject:a,clientThreadId:s}=Ha();re(void 0);const o=l.useRef(null);Ga(o);const t=Ua(),r=re("searchSources"),i=pe(),[u,n]=l.useState(!1),h=!t&&!!a;return e.jsx(za,{className:ze(y.application,{[y.withCanvasFocusedView]:!!t,[y.withEmbeddedFocusedView]:h}),banner:e.jsx(qe,{children:e.jsx(qa,{setIsMobileAppUpsellBannerVisible:n})}),sidebar:e.jsx(ps,{}),thread:e.jsx(ke,{ref:o},s),details:e.jsx(ks,{clientThreadId:s}),threadExtendedInfo:i&&e.jsxs(e.Fragment,{children:[!1,r&&e.jsx(Me,{clientThreadId:s})]}),debugger:e.jsx(we,{clientThreadId:s}),name:"application-root",style:{"--screen-height-offset":u?"64px":""}})}function Ps({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){return Se({clientThreadId:a}),e.jsx(Ae,{clientThreadId:a,setClientThreadId:s,prefetchSearch:t,children:e.jsxs(Ka,{children:[e.jsx(Qa,{}),e.jsx(Ya,{}),e.jsxs(xe,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(Ce,{clientThreadId:a,urlThreadId:o}),e.jsx(je,{}),e.jsx(Es,{})]})]})})}var Ts={};const Ds=f(()=>m(()=>import("./ojug1lhrlkfmgukz.js"),__vite__mapDeps([43,1,2,3,4,5,44]))),_s=f(()=>m(()=>import("./bpanbkafmw208sol.js"),__vite__mapDeps([45,1,2,3,4,5,37,9,8,38,19,15,39,40,41,46])));function Gs(a){const{urlThreadId:s,clientThreadId:o,prefetchSearch:t}=a;ys();const r=Ke(),i=ie(),[u]=Qe(),[n,h]=l.useState(()=>s!==void 0?s:o!==void 0?o:de());s!==void 0&&n!==s&&L.getServerThreadId(n)!==s&&h(s);const E=Ja(ie());l.useEffect(()=>{s===void 0&&L.getServerThreadId(n)!==void 0&&h(de())},[s,n,E]);const P=k(F.workspaceId),T=ve(),{eligible:b,isLoading:v,markAsViewed:S}=Za(),x=$a();l.useEffect(()=>{(i.pathname==="/"||i.pathname.startsWith("/c/"))&&Xa({namespace:he.ChatPageLoad})==null&&(es({namespace:he.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),Ye.addTiming("chatgpt.web.chatPage.mounted"))},[]);const C=as();l.useEffect(()=>{Je(!0).then(d=>{d.force_login&&C({authType:"login"}),Ze.initializeAndGatherData(d),ss.initializeAndGatherData(d),$e.initializeAndGatherData(d)})},[C]),l.useEffect(()=>{const d=u.get(os)==="true";r!==d&&Xe.setIsTemporaryChatEnabled(d)},[r,u]),l.useEffect(()=>{i.state?.focusObject&&B.setFocusedObject(i.state.focusObject)},[i.state?.focusObject]),l.useEffect(()=>{!v&&b&&(S(),x())},[b,v,S,x]);const{isOpen:D,isLoading:M}=ts(),j=T?Ps:Ms;return e.jsx(ea.Provider,{value:null,children:e.jsx(ns,{children:e.jsxs(rs,{clientThreadId:n,children:[e.jsx(Ss,{clientThreadId:n},P),!M&&D&&e.jsx(_s,{clientThreadId:n,setClientThreadId:h}),e.jsx(is,{}),e.jsx(ds,{}),e.jsx(j,{urlThreadId:s,clientThreadId:n,setClientThreadId:h,prefetchSearch:t}),e.jsx(Os,{clientThreadId:n}),e.jsx(ls,{clientThreadId:n}),e.jsx(Is,{}),e.jsx(cs,{})]})})})}function Is(){const a=be(s=>s.sharingModalThreadId);return a?e.jsx(Ds,{serverThreadId:a}):null}function ys(){aa({queryKey:["pingEdge"],queryFn:()=>sa.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Ts.GOKU_SERVICE);export{Gs as C,me as F};
//# sourceMappingURL=c02a1if1qqig4aj3.js.map
