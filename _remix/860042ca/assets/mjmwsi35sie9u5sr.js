import{l as g,aA as m,r as x,D as a,bn as D,dX as p}from"./egi9yqe8h527q0wn.js";import{u as f}from"./ddb1tx8lx2qgy0qt.js";import"./e6itquh41uv61tg7.js";const l=async e=>{await D.signOut({callbackUrl:e}),p()},i=(e,o)=>{l(e).then(()=>a.addTiming(o?"chatgpt.web.logout.shouldClearIndexedDB":"chatgpt.web.logout.default")).catch(t=>{a.addError(new Error("Failed to logout",{cause:t}))})};function h({federatedLogoutUri:e}){const{value:o}=m("4017530922");return x.useEffect(()=>{const t=e??window.location.origin;window&&window.indexedDB&&o&&typeof window.indexedDB.databases=="function"?(async()=>{const u=(await window.indexedDB.databases()).map(n=>new Promise((r,w)=>{if(n.name){const d=window.indexedDB.deleteDatabase(n.name);d.onsuccess=()=>r(),d.onerror=()=>w(),d.onblocked=()=>{a.addError(new Error(`Delete IndexedDB blocked for database ${n.name}`)),r()}}else a.addError(new Error(`Invalid database name ${n.name}`)),r()}));await Promise.all(u)})().then(()=>{a.addTiming("chatgpt.web.logout.clearedIndexedDB"),i(t,o)}).catch(c=>{a.addError(new Error("Failed to clear IndexedDB",{cause:c})),i(t,o)}):l(e??window.location.origin).catch(s=>a.addError(new Error("Failed to logout",{cause:s})))},[o,e]),null}function I(){const e=f();return g.jsx(h,{...e})}export{I as default};
//# sourceMappingURL=mjmwsi35sie9u5sr.js.map
