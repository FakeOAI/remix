const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-y24qlvpjvdevd8x6.js","assets/otclk14vst88v95n.js","assets/cqauunpqwnjujx3i.js","assets/root-cn1q1n2n.css","assets/f6bdrzwk5aclba0b.js","assets/cef20f49k9y1cwjs.js","assets/conversation-small-mclg7qvi.css","assets/nrpg61rmusf8o8ub.js","assets/fjotlmkpidhbg5lv.js","assets/dnzexkfcmjpqmtba.js","assets/m5be5ov74xrjmrp3.js","assets/ge4estcii3ilqp3x.js","assets/dz5d6zj45kdshiom.js","assets/fk3u4mjp5mpw70zy.js","assets/bj5ozoczrnueocbo.js","assets/k1bybifg8757yvsg.js","assets/bj84hod8soycdu5o.js","assets/kgpt3malt6eqacih.js","assets/hxegvzgw7bblgaxl.js","assets/eayiiad2l5prvvwc.js","assets/i3lhp0y9ixfjs84k.js","assets/mmxiwemqqtmqbesv.js","assets/j6i8vfg92lbcflka.js","assets/n9r8w67q4d2shpjh.js","assets/fg1cceh1nyryady0.js","assets/gadgua8tzgpajxqz.js","assets/itghwucfyv5ciib7.js","assets/nzal8atexc0mul29.js","assets/hj6cj7m5qcsoqxlf.js","assets/g2mu0f7itg7huslu.js","assets/lbcnuoctupcnvlt2.js","assets/983a0dy92b3ronpv.js","assets/dppwq2udw3en7vdg.js","assets/mi7ib6zg2mtczyia.js","assets/kqwdyvkaaavvn8k3.js","assets/g0g7owg6j7cwi23a.js","assets/hvmghhep8rwhhb5m.js","assets/edllx3ycekthkzxl.js","assets/k634wtly9qqhfuwz.js","assets/jxgasw6r93foshbs.js","assets/nhwwej1nq0zrd7sc.js","assets/j2ohic1668qrk25b.js","assets/dumt5x10tr8cp7v9.js","assets/igvvklrr5qpdyj7e.js","assets/frpk4161je4wyyc5.js","assets/lkvsxcy06l4nodjs.js","assets/j6hkozum2eq0un17.js","assets/mdtn63qxb80mixss.js","assets/jymfcxvqtjbkrst6.js","assets/cy19cl7z1ypv8mks.js","assets/o0zm8r4ulpygvxzt.js","assets/eg3uwjflf5osl97h.js","assets/j2wfs46bm5ondumk.js","assets/iej0cupg2dqkmejt.js","assets/06o75hql6ljdmcq5.js","assets/lw5mafjeq59vrl67.js","assets/jk8w36bsokizpx57.js","assets/g3t9mr0690be3awb.js","assets/bs15anz3z72ppl2r.js","assets/f5b9dpiw5iadkbq2.js","assets/npw1l0xd4g5ieuef.js","assets/dnz4j21u8t8m6fvq.js","assets/n6wvh22fesvcbzv1.js","assets/inqphz7z0wez6nc0.js","assets/swiper-kmk1dd5x.css"])))=>i.map(i=>d[i]);
import{bK as Ve,u as xn,r as l,b as vn,t as n,R as hn,ft as vt,n as ht,a4 as J,fu as Ae,bh as oe,bi as bn,eI as Mn,T as ie,bA as bt,bB as In,a9 as C,ae as je,Q as xe,U as ke,cd as Cn,ak as Z,bq as de,P as j,d as D,a2 as yn,a6 as Mt,a7 as It,a as Ct,aX as Ee,ah as Sn,b_ as Tn,bY as jn,ay as ye,er as yt,S as Q,bO as St,bm as Tt,by as tt,bz as nt,ce as kn,bF as Oe,aV as En,aU as re,cp as jt,s as wn,ec as Pn,ed as _n,a_ as Se,bN as Nn,ag as kt}from"./otclk14vst88v95n.js";import{ip as An,iq as On,ir as Fn,is as Rn,it as Bn,iu as Et,cz as Dn,iv as Wn,iw as Ln,ix as $n,ft as st,iy as Un,iz as Hn,iA as Vn,iB as Gn,iC as Me,iD as zn,iE as qn,iF as Qn,iG as Kn,iH as Jn,iI as Yn,iJ as ve,iK as ot,iL as Xn,iM as Ie,iN as Zn,iO as es,iP as at,dx as ts,fu as ns,fx as ss,iQ as os,iR as as,iS as wt,iT as Ge,am as ze,fE as rs,iU as is,iV as Pt,c as ce,N as we,iW as cs,iX as Ce,iY as ls,iZ as _t,i_ as Fe,i$ as us,j0 as ds,bh as ae,j1 as ms,j2 as fs,j3 as ps,aV as B,j4 as Nt,aO as rt,aP as le,aQ as Pe,a_ as gs,bp as xs,bq as vs,b1 as hs,b2 as At,b3 as Te,b4 as ue,bg as bs,br as R,j5 as L,bs as Ms,b5 as Is,b6 as Cs,b7 as ys,b9 as Ot,b8 as Ss,aS as Ts,bd as js,be as ks,bi as Es,bj as ws,j6 as Ps,j7 as _s,j8 as Ns,j9 as As,bl as it,ja as Ft,bm as Os,bf as Fs,bo as Rs,jb as Bs,jc as Ds,jd as Ws,je as Rt,jf as Ls,jg as $s,jh as Re,ji as Us,cO as Hs,cN as Vs,f2 as Gs,A as qe,v as Qe,av as Ke,d as zs,h2 as Je,cP as Bt,cc as ct,y as Dt,aI as qs,bJ as Qs,jj as Ks,bw as Wt,x as Lt,jk as Js,u as Ys,w as Xs}from"./cef20f49k9y1cwjs.js";import{r as Zs,K as $t,J as eo,u as to}from"./m5be5ov74xrjmrp3.js";import{T as $e,j as no,r as so,A as oo,d as ao}from"./ge4estcii3ilqp3x.js";import{u as Ye,a5 as ro,bG as Ut,a1 as Ht,aP as io,ae as co,q as lo,J as uo,a8 as mo,p as fo,aY as Vt,bl as Gt,br as zt,bH as qt,I as po,bm as go,b7 as xo,b2 as lt,aH as vo,V as ho}from"./cqauunpqwnjujx3i.js";import{D as P,B as bo}from"./g2mu0f7itg7huslu.js";import{a as Qt,b as Kt}from"./o0zm8r4ulpygvxzt.js";import{u as Mo}from"./grwsm8tx5qgi12pr.js";import{a as Jt,G as K,U as $,u as Yt,b as Xt}from"./fk3u4mjp5mpw70zy.js";import{A as Io}from"./ibb3ldlzt4z2r22d.js";const Co=()=>{const{value:e}=Ve("44045625");return e},lr=()=>{const{value:e}=Ve("3700195277");return e||!1},Xe=e=>{const t=Zs(e);return Co()&&!!t?.includes("canmore")},yo=e=>vn.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),So=async e=>{const t=await yo(e),s=new Map(t?.map(r=>[r.id,r])),o=[];for(const{id:r,content:i,version:c,textdoc_type:m,title:f,comments:p}of t)o.push({textdocId:r,messageId:null,type:Rn(m),comments:Bn(p,i),title:f,content:i,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(o.map(r=>[r.textdocId,r])),persistedTextdocVersions:o,persistedTextdocById:s}};function To({clientThreadId:e,isEnabled:t}){const s=$e.getServerThreadId(e),{data:o,error:a,isLoading:r,isFetching:i,refetch:c}=xn({queryKey:[s,"textdocs"],enabled:!!s&&t,gcTime:0,queryFn:()=>s&&So(s)});return l.useEffect(()=>{if(!o)return;const{persistedTextdocVersions:m}=o;An(m),On(m),Fn(m)},[o]),[{...o,error:a,isLoading:r,isFetching:i},c]}const Zt=Et(null),he=Et(null);function me(e=vt){return ve(Zt,e)}function jo(e=vt){return ve(he,e)}function ur(){return me(e=>e?.isFetchingFromPersistence)}function dr(){return me(e=>e?.isEnabled)}function en(){return ve(he,e=>e?.resolveTempTextdocId)}function mr(){return ve(he,e=>e?.resolveTempCommentId)}function fr(){return ve(he,e=>e?.latestTextdocId??null)}function pr(e){const t=en();return me(s=>wt(s,t??{},e))}function tn(e){const t=en();return me(s=>wt(s,t??{},e)?.metadata??null)}function nn(){const e=me(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function gr(){return me(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function xr({clientThreadId:e,children:t}){const s=Xe(e),{textdocStore:o,optimisticTextdocStore:a}=ko({clientThreadId:e,isEnabled:s});return n.jsx(he.Provider,{value:a,children:n.jsx(Zt.Provider,{value:o,children:t})})}function ko({clientThreadId:e,isEnabled:t}){const s=no(e),o=so(e,s),a=oo(e),r=Dn(a),[{error:i,persistedTextdocVersionById:c,isLoading:m,isFetching:f},p]=To({clientThreadId:e,isEnabled:t}),v=Wn(),[u,d]=l.useState(!1),g=Ln(),[x,h]=l.useState(!0);$n(()=>{if(!t)return;const I=$e.getThreadCurrentLeafId(e),T=$e.getThreadConversationTurns(e,I),W=st(T)?.messages??[],A=ot(W);if(A==null)return;const F=A.message.metadata?.canvas?.textdoc_id,ne=A.message.metadata?.canvas?.version;F!=null&&ne!=null&&v(F,ne),d(!0),p().finally(()=>d(!1))});const[k,_]=l.useState(c);l.useEffect(()=>{r&&_(c)},[r]);const b=t&&(r||!x||f&&!m&&u),y=st(o),N=l.useMemo(()=>{if(!y)return null;const{messages:I}=y,T=Un(I??[],({message:W})=>W.author.role===hn.System),w=T===-1?I:I?.slice(T+1);return b&&w&&Hn(w)?w:null},[b,y]),U=!!N?k:c,S=Vn(),E=Gn(),G=l.useMemo(()=>{let I=Xn();return!U||(I=Me(I,T=>{for(const[w,W]of U.entries()){T.allTextdocIdSet[w]=w;const A=g.get(w);let F=A&&(A.versionInt??Ie)>(W.versionInt??Ie)?{...W,...A}:W;const ne=E.filter(q=>q.textdocId===w&&q.kind===Zn.REMOVE_COMMENT);let be=F.versionInt;for(const q of ne)F=es(F,q),be=Math.max(be??Ie,q.versionInt??Ie);F={...F,versionInt:be},T.textdocById[w]=void 0,at(T,F)}}),!S)?I:Me(I,T=>{at(T,S,!1)})},[U,g,S,E]),V=l.useMemo(()=>Me(G,I=>{I.fetchError=i,I.isFetchingFromPersistence=f}),[G,i,f]),[H,Y]=l.useState(zn),z=l.useMemo(()=>N?.length?qn(r,G,H,N):null,[N,r,H,G]),ee=Qn(r,z,h),te=l.useMemo(()=>ee?Kn(V,ee):V,[V,ee]);return l.useEffect(()=>{if(!t)return;const I=Jn(H,o);I&&Y(I)},[e,t,o.length]),l.useEffect(()=>{const I=Yn(H,z);I&&Y(I)},[z]),{textdocStore:l.useMemo(()=>Me(te,I=>{I.isEnabled!==t&&(I.isEnabled=t);const T=ts(o,A=>A.messages),w={},W=ns(T);for(let A=W.length-1;A>=0;A--){const F=W[A];if(F.type!==ss.Canmore)continue;const ne=os(F.messages),q=ot(F.messages)?.message.metadata?.canvas?.textdoc_id??as(T);q&&ne!=null&&!w[q]&&(w[q]=!0,ne.nodeId!==I.lastCanvasAssistantMessageById[q]&&(I.lastCanvasAssistantMessageById[q]=ne.nodeId))}}),[te,o,t]),optimisticTextdocStore:H}}function sn(){return Ge(e=>e.focusedObject)}function vr(){const e=Ge(t=>t.focusedObject);return e?.type!==ze.Textdoc?null:e}function hr(){const e=Ge(t=>t.focusedObject);return e?.type!==ze.Textdoc?null:e.history??null}function on(){return sn()!=null}function br(e){const t=sn();return jo(s=>{if(!e||t?.type!==ze.Textdoc)return!1;const o=s?.resolveTempTextdocId??{},a=o[t.textdocId]??t.textdocId,r=o[e]??e;return a===r})}const Eo=({children:e})=>{const t=nn();return t?.length?n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"h-10 px-2",children:e}),n.jsx(P.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:t.map(s=>n.jsx(wo,{textdocId:s},s))})]}):null},wo=({textdocId:e})=>{const t=ht(tn(e));return n.jsx(P.Item,{icon:Ye,onClick:()=>{rs.logButtonClick(is.FILE_DRAWER_ITEM),Pt(t.textdocId)},children:t.title})},Po=()=>{const e=J(),t=nn(),s=on();if(!t||s)return null;const o=t.length;return o===1?n.jsx(_o,{textdocId:t[0]}):n.jsx(Eo,{children:n.jsx(ce,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[n.jsx(Ye,{className:"icon-xl-heavy"}),o]})})})},_o=({textdocId:e})=>{const t=J(),s=ht(tn(e));return n.jsx(ce,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsx(we,{onClick:()=>Pt(s.textdocId),icon:Ye})})},No=({children:e})=>on()?null:n.jsx(n.Fragment,{children:e}),Ao=({clientThreadId:e,children:t})=>Xe(e)?n.jsx(No,{children:t}):t,an={...bn},Oo=an.useInsertionEffect,Fo=Oo||(e=>e());function rn(e){const t=l.useRef(()=>{});return Fo(()=>{t.current=e}),l.useCallback(function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t.current==null?void 0:t.current(...o)},[])}var Ue=typeof document<"u"?l.useLayoutEffect:l.useEffect;let ut=!1,Ro=0;const dt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ro++;function Bo(){const[e,t]=l.useState(()=>ut?dt():void 0);return Ue(()=>{e==null&&t(dt())},[]),l.useEffect(()=>{ut=!0},[]),e}const Do=an.useId,Wo=Do||Bo;function Lo(){const e=new Map;return{emit(t,s){var o;(o=e.get(t))==null||o.forEach(a=>a(s))},on(t,s){e.set(t,[...e.get(t)||[],s])},off(t,s){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(a=>a!==s))||[])}}}const $o=l.createContext(null),Uo=l.createContext(null),Ho=()=>{var e;return((e=l.useContext($o))==null?void 0:e.id)||null},Vo=()=>l.useContext(Uo),Go="data-floating-ui-focusable";function zo(e){const{open:t=!1,onOpenChange:s,elements:o}=e,a=Wo(),r=l.useRef({}),[i]=l.useState(()=>Lo()),c=Ho()!=null,[m,f]=l.useState(o.reference),p=rn((d,g,x)=>{r.current.openEvent=d?g:void 0,i.emit("openchange",{open:d,event:g,reason:x,nested:c}),s?.(d,g,x)}),v=l.useMemo(()=>({setPositionReference:f}),[]),u=l.useMemo(()=>({reference:m||o.reference||null,floating:o.floating||null,domReference:o.reference}),[m,o.reference,o.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:p,elements:u,events:i,floatingId:a,refs:v}),[t,p,u,i,a,v])}function qo(e){e===void 0&&(e={});const{nodeId:t}=e,s=zo({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||s,a=o.elements,[r,i]=l.useState(null),[c,m]=l.useState(null),p=a?.reference||r,v=l.useRef(null),u=Vo();Ue(()=>{p&&(v.current=p)},[p]);const d=cs({...e,elements:{...a,...c&&{reference:c}}}),g=l.useCallback(b=>{const y=Ce(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;m(y),d.refs.setReference(y)},[d.refs]),x=l.useCallback(b=>{(Ce(b)||b===null)&&(v.current=b,i(b)),(Ce(d.refs.reference.current)||d.refs.reference.current===null||b!==null&&!Ce(b))&&d.refs.setReference(b)},[d.refs]),h=l.useMemo(()=>({...d.refs,setReference:x,setPositionReference:g,domReference:v}),[d.refs,x,g]),k=l.useMemo(()=>({...d.elements,domReference:p}),[d.elements,p]),_=l.useMemo(()=>({...d,...o,refs:h,elements:k,nodeId:t}),[d,h,k,t,o]);return Ue(()=>{o.dataRef.current.floatingContext=_;const b=u?.nodesRef.current.find(y=>y.id===t);b&&(b.context=_)}),l.useMemo(()=>({...d,context:_,refs:h,elements:k}),[d,h,k,_])}const mt="active",ft="selected";function Be(e,t,s){const o=new Map,a=s==="item";let r=e;if(a&&e){const{[mt]:i,[ft]:c,...m}=e;r=m}return{...s==="floating"&&{tabIndex:-1,[Go]:""},...r,...t.map(i=>{const c=i?i[s]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((i,c)=>(c&&Object.entries(c).forEach(m=>{let[f,p]=m;if(!(a&&[mt,ft].includes(f)))if(f.indexOf("on")===0){if(o.has(f)||o.set(f,[]),typeof p=="function"){var v;(v=o.get(f))==null||v.push(p),i[f]=function(){for(var u,d=arguments.length,g=new Array(d),x=0;x<d;x++)g[x]=arguments[x];return(u=o.get(f))==null?void 0:u.map(h=>h(...g)).find(h=>h!==void 0)}}}else i[f]=p}),i),{})}}function Qo(e){e===void 0&&(e=[]);const t=e.map(c=>c?.reference),s=e.map(c=>c?.floating),o=e.map(c=>c?.item),a=l.useCallback(c=>Be(c,e,"reference"),t),r=l.useCallback(c=>Be(c,e,"floating"),s),i=l.useCallback(c=>Be(c,e,"item"),o);return l.useMemo(()=>({getReferenceProps:a,getFloatingProps:r,getItemProps:i}),[a,r,i])}function pt(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Ko=e=>({name:"inner",options:e,async fn(t){const{listRef:s,overflowRef:o,onFallbackChange:a,offset:r=0,index:i=0,minItemsVisible:c=4,referenceOverflowThreshold:m=0,scrollRef:f,...p}=ls(e,t),{rects:v,elements:{floating:u}}=t,d=s.current[i],g=f?.current||u,x=u.clientTop||g.clientTop,h=u.clientTop!==0,k=g.clientTop!==0,_=u===g;if(!d)return{};const b={...t,...await _t(-d.offsetTop-u.clientTop-v.reference.height/2-d.offsetHeight/2-r).fn(t)},y=await Ae(pt(b,g.scrollHeight+x+u.clientTop),p),N=await Ae(b,{...p,elementContext:"reference"}),O=Fe(0,y.top),U=b.y+O,S=us(Fe(0,g.scrollHeight+(h&&_||k?x*2:0)-O-Fe(0,y.bottom)));if(g.style.maxHeight=S+"px",g.scrollTop=O,a){const E=g.scrollHeight>g.offsetHeight&&g.offsetHeight<d.offsetHeight*c-1||N.top>=-m||N.bottom>=-m;oe.flushSync(()=>a(E))}return o&&(o.current=await Ae(pt({...b,y:U},g.offsetHeight+x+u.clientTop),p)),{y:U}}});function Jo(e,t){const{open:s,elements:o}=e,{enabled:a=!0,overflowRef:r,scrollRef:i,onChange:c}=t,m=rn(c),f=l.useRef(!1),p=l.useRef(null),v=l.useRef(null);l.useEffect(()=>{if(!a)return;function d(x){if(x.ctrlKey||!g||r.current==null)return;const h=x.deltaY,k=r.current.top>=-.5,_=r.current.bottom>=-.5,b=g.scrollHeight-g.clientHeight,y=h<0?-1:1,N=h<0?"max":"min";g.scrollHeight<=g.clientHeight||(!k&&h>0||!_&&h<0?(x.preventDefault(),oe.flushSync(()=>{m(O=>O+Math[N](h,b*y))})):/firefox/i.test(ds())&&(g.scrollTop+=h))}const g=i?.current||o.floating;if(s&&g)return g.addEventListener("wheel",d),requestAnimationFrame(()=>{p.current=g.scrollTop,r.current!=null&&(v.current={...r.current})}),()=>{p.current=null,v.current=null,g.removeEventListener("wheel",d)}},[a,s,o.floating,r,i,m]);const u=l.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const d=i?.current||o.floating;if(!(!r.current||!d||!f.current)){if(p.current!==null){const g=d.scrollTop-p.current;(r.current.bottom<-.5&&g<-1||r.current.top<-.5&&g>1)&&oe.flushSync(()=>m(x=>x+g))}requestAnimationFrame(()=>{p.current=d.scrollTop})}}}),[o.floating,m,r,i]);return l.useMemo(()=>a?{floating:u}:{},[a,u])}let fe=l.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});fe.displayName="FloatingContext";let Ze=l.createContext(null);Ze.displayName="PlacementContext";function Yo(e){return l.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function Xo(){return l.useContext(fe).setReference}function Zo(){return l.useContext(fe).getReferenceProps}function ea(){let{getFloatingProps:e,slot:t}=l.useContext(fe);return l.useCallback((...s)=>Object.assign({},e(...s),{"data-anchor":t.anchor}),[e,t])}function ta(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=l.useContext(Ze),s=l.useMemo(()=>e,[JSON.stringify(e,(a,r)=>{var i;return(i=r?.outerHTML)!=null?i:r})]);ae(()=>{t?.(s??null)},[t,s]);let o=l.useContext(fe);return l.useMemo(()=>[o.setFloating,e?o.styles:{}],[o.setFloating,e,o.styles])}let gt=4;function na({children:e,enabled:t=!0}){let[s,o]=l.useState(null),[a,r]=l.useState(0),i=l.useRef(null),[c,m]=l.useState(null);sa(c);let f=t&&s!==null&&c!==null,{to:p="bottom",gap:v=0,offset:u=0,padding:d=0,inner:g}=oa(s,c),[x,h="center"]=p.split(" ");ae(()=>{f&&r(0)},[f]);let{refs:k,floatingStyles:_,context:b}=qo({open:f,placement:x==="selection"?h==="center"?"bottom":`bottom-${h}`:h==="center"?`${x}`:`${x}-${h}`,strategy:"absolute",transform:!1,middleware:[_t({mainAxis:x==="selection"?0:v,crossAxis:u}),ms({padding:d}),x!=="selection"&&fs({padding:d}),x==="selection"&&g?Ko({...g,padding:d,overflowRef:i,offset:a,minItemsVisible:gt,referenceOverflowThreshold:d,onFallbackChange(V){var H,Y;if(!V)return;let z=b.elements.floating;if(!z)return;let ee=parseFloat(getComputedStyle(z).scrollPaddingBottom)||0,te=Math.min(gt,z.childElementCount),M=0,I=0;for(let T of(Y=(H=b.elements.floating)==null?void 0:H.childNodes)!=null?Y:[])if(T instanceof HTMLElement){let w=T.offsetTop,W=w+T.clientHeight+ee,A=z.scrollTop,F=A+z.clientHeight;if(w>=A&&W<=F)te--;else{I=Math.max(0,Math.min(W,F)-Math.max(w,A)),M=T.clientHeight;break}}te>=1&&r(T=>{let w=M*te-I+ee;return T>=w?T:w})}}):null,ps({padding:d,apply({availableWidth:V,availableHeight:H,elements:Y}){Object.assign(Y.floating.style,{overflow:"auto",maxWidth:`${V}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${H}px)`})}})].filter(Boolean),whileElementsMounted:Mn}),[y=x,N=h]=b.placement.split("-");x==="selection"&&(y="selection");let O=l.useMemo(()=>({anchor:[y,N].filter(Boolean).join(" ")}),[y,N]),U=Jo(b,{overflowRef:i,onChange:r}),{getReferenceProps:S,getFloatingProps:E}=Qo([U]),G=B(V=>{m(V),k.setFloating(V)});return l.createElement(Ze.Provider,{value:o},l.createElement(fe.Provider,{value:{setFloating:G,setReference:k.setReference,styles:_,getReferenceProps:S,getFloatingProps:E,slot:O}},e))}function sa(e){ae(()=>{if(!e)return;let t=new MutationObserver(()=>{let s=window.getComputedStyle(e).maxHeight,o=parseFloat(s);if(isNaN(o))return;let a=parseInt(s);isNaN(a)||o!==a&&(e.style.maxHeight=`${Math.ceil(o)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function oa(e,t){var s,o,a;let r=De((s=e?.gap)!=null?s:"var(--anchor-gap, 0)",t),i=De((o=e?.offset)!=null?o:"var(--anchor-offset, 0)",t),c=De((a=e?.padding)!=null?a:"var(--anchor-padding, 0)",t);return{...e,gap:r,offset:i,padding:c}}function De(e,t,s=void 0){let o=Nt(),a=B((m,f)=>{if(m==null)return[s,null];if(typeof m=="number")return[m,null];if(typeof m=="string"){if(!f)return[s,null];let p=xt(m,f);return[p,v=>{let u=cn(m);{let d=u.map(g=>window.getComputedStyle(f).getPropertyValue(g));o.requestAnimationFrame(function g(){o.nextFrame(g);let x=!1;for(let[k,_]of u.entries()){let b=window.getComputedStyle(f).getPropertyValue(_);if(d[k]!==b){d[k]=b,x=!0;break}}if(!x)return;let h=xt(m,f);p!==h&&(v(h),p=h)})}return o.dispose}]}return[s,null]}),r=l.useMemo(()=>a(e,t)[0],[e,t]),[i=r,c]=l.useState();return ae(()=>{let[m,f]=a(e,t);if(c(m),!!f)return f(c)},[e,t]),i}function cn(e){let t=/var\((.*)\)/.exec(e);if(t){let s=t[1].indexOf(",");if(s===-1)return[t[1]];let o=t[1].slice(0,s).trim(),a=t[1].slice(s+1).trim();return a?[o,...cn(a)]:[o]}return[]}function xt(e,t){let s=document.createElement("div");t.appendChild(s),s.style.setProperty("margin-top","0px","important"),s.style.setProperty("margin-top",e,"important");let o=parseFloat(window.getComputedStyle(s).marginTop)||0;return t.removeChild(s),o}var aa=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(aa||{}),ra=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ra||{}),ia=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(ia||{});function We(e,t=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,o=Us(t(e.items.slice()),r=>r.dataRef.current.domRef.current),a=s?o.indexOf(s):null;return a===-1&&(a=null),{items:o,activeItemIndex:a}}let ca={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var s,o,a,r,i;if(e.menuState===1)return e;let c={...e,searchQuery:"",activationTrigger:(s=t.trigger)!=null?s:1,__demoMode:!1};if(t.focus===L.Nothing)return{...c,activeItemIndex:null};if(t.focus===L.Specific)return{...c,activeItemIndex:e.items.findIndex(p=>p.id===t.id)};if(t.focus===L.Previous){let p=e.activeItemIndex;if(p!==null){let v=e.items[p].dataRef.current.domRef,u=Re(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((o=v.current)==null?void 0:o.previousElementSibling)===d.current||((a=d.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeItemIndex:u}}}}else if(t.focus===L.Next){let p=e.activeItemIndex;if(p!==null){let v=e.items[p].dataRef.current.domRef,u=Re(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((r=v.current)==null?void 0:r.nextElementSibling)===d.current||((i=d.current)==null?void 0:i.nextElementSibling)===null)return{...c,activeItemIndex:u}}}}let m=We(e),f=Re(t,{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...m,activeItemIndex:f}},3:(e,t)=>{let s=e.searchQuery!==""?0:1,o=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(i=>{var c;return((c=i.dataRef.current.textValue)==null?void 0:c.startsWith(o))&&!i.dataRef.current.disabled}),r=a?e.items.indexOf(a):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let s=We(e,o=>[...o,{id:t.id,dataRef:t.dataRef}]);return{...e,...s}},6:(e,t)=>{let s=We(e,o=>{let a=o.findIndex(r=>r.id===t.id);return a!==-1&&o.splice(a,1),o});return{...e,...s,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},et=l.createContext(null);et.displayName="MenuContext";function _e(e){let t=l.useContext(et);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,_e),s}return t}function la(e,t){return At(t.type,ca,e,t)}let ua=l.Fragment;function da(e,t){let{__demoMode:s=!1,...o}=e,a=l.useReducer(la,{__demoMode:s,menuState:s?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsElement:i,buttonElement:c},m]=a,f=Pe(t);gs(r===0,[c,i],(d,g)=>{m({type:1}),xs(g,vs.Loose)||(d.preventDefault(),c?.focus())});let p=B(()=>{m({type:1})}),v=l.useMemo(()=>({open:r===0,close:p}),[r,p]),u={ref:f};return ie.createElement(na,null,ie.createElement(et.Provider,{value:a},ie.createElement(hs,{value:At(r,{0:Te.Open,1:Te.Closed})},ue({ourProps:u,theirProps:o,slot:v,defaultTag:ua,name:"Menu"}))))}let ma="button";function fa(e,t){var s;let o=l.useId(),{id:a=`headlessui-menu-button-${o}`,disabled:r=!1,autoFocus:i=!1,...c}=e,[m,f]=_e("Menu.Button"),p=Zo(),v=bs(),u=Pe(t,Xo(),B(S=>f({type:7,element:S}))),d=B(S=>{switch(S.key){case R.Space:case R.Enter:case R.ArrowDown:S.preventDefault(),S.stopPropagation(),oe.flushSync(()=>f({type:0})),f({type:2,focus:L.First});break;case R.ArrowUp:S.preventDefault(),S.stopPropagation(),oe.flushSync(()=>f({type:0})),f({type:2,focus:L.Last});break}}),g=B(S=>{switch(S.key){case R.Space:S.preventDefault();break}}),x=B(S=>{var E;if(Ms(S.currentTarget))return S.preventDefault();r||(m.menuState===0?(oe.flushSync(()=>f({type:1})),(E=m.buttonElement)==null||E.focus({preventScroll:!0})):(S.preventDefault(),f({type:0})))}),{isFocusVisible:h,focusProps:k}=Is({autoFocus:i}),{isHovered:_,hoverProps:b}=Cs({isDisabled:r}),{pressed:y,pressProps:N}=ys({disabled:r}),O=l.useMemo(()=>({open:m.menuState===0,active:y||m.menuState===0,disabled:r,hover:_,focus:h,autofocus:i}),[m,_,h,y,r,i]),U=Ot(p(),{ref:u,id:a,type:Ss(e,m.buttonElement),"aria-haspopup":"menu","aria-controls":(s=m.itemsElement)==null?void 0:s.id,"aria-expanded":m.menuState===0,disabled:r||void 0,autoFocus:i,onKeyDown:d,onKeyUp:g,onClick:x},k,b,N);return ue({mergeRefs:v,ourProps:U,theirProps:c,slot:O,defaultTag:ma,name:"Menu.Button"})}let pa="div",ga=rt.RenderStrategy|rt.Static;function xa(e,t){var s,o;let a=l.useId(),{id:r=`headlessui-menu-items-${a}`,anchor:i,portal:c=!1,modal:m=!0,transition:f=!1,...p}=e,v=Yo(i),[u,d]=_e("Menu.Items"),[g,x]=ta(v),h=ea(),[k,_]=l.useState(null),b=Pe(t,v?g:null,B(M=>d({type:8,element:M})),_),y=Ts(u.itemsElement);v&&(c=!0);let N=js(),[O,U]=ks(f,k,N!==null?(N&Te.Open)===Te.Open:u.menuState===0);Es(O,u.buttonElement,()=>{d({type:1})});let S=u.__demoMode?!1:m&&u.menuState===0;ws(S,y);let E=u.__demoMode?!1:m&&u.menuState===0;Ps(E,{allowed:l.useCallback(()=>[u.buttonElement,u.itemsElement],[u.buttonElement,u.itemsElement])});let G=u.menuState!==0,V=_s(G,u.buttonElement)?!1:O;l.useEffect(()=>{let M=u.itemsElement;M&&u.menuState===0&&M!==y?.activeElement&&M.focus({preventScroll:!0})},[u.menuState,u.itemsElement,y]),Ns(u.menuState===0,{container:u.itemsElement,accept(M){return M.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:M.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(M){M.setAttribute("role","none")}});let H=Nt(),Y=B(M=>{var I,T,w;switch(H.dispose(),M.key){case R.Space:if(u.searchQuery!=="")return M.preventDefault(),M.stopPropagation(),d({type:3,value:M.key});case R.Enter:if(M.preventDefault(),M.stopPropagation(),d({type:1}),u.activeItemIndex!==null){let{dataRef:W}=u.items[u.activeItemIndex];(T=(I=W.current)==null?void 0:I.domRef.current)==null||T.click()}Ft(u.buttonElement);break;case R.ArrowDown:return M.preventDefault(),M.stopPropagation(),d({type:2,focus:L.Next});case R.ArrowUp:return M.preventDefault(),M.stopPropagation(),d({type:2,focus:L.Previous});case R.Home:case R.PageUp:return M.preventDefault(),M.stopPropagation(),d({type:2,focus:L.First});case R.End:case R.PageDown:return M.preventDefault(),M.stopPropagation(),d({type:2,focus:L.Last});case R.Escape:M.preventDefault(),M.stopPropagation(),oe.flushSync(()=>d({type:1})),(w=u.buttonElement)==null||w.focus({preventScroll:!0});break;case R.Tab:M.preventDefault(),M.stopPropagation(),oe.flushSync(()=>d({type:1})),As(u.buttonElement,M.shiftKey?it.Previous:it.Next);break;default:M.key.length===1&&(d({type:3,value:M.key}),H.setTimeout(()=>d({type:4}),350));break}}),z=B(M=>{switch(M.key){case R.Space:M.preventDefault();break}}),ee=l.useMemo(()=>({open:u.menuState===0}),[u.menuState]),te=Ot(v?h():{},{"aria-activedescendant":u.activeItemIndex===null||(s=u.items[u.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(o=u.buttonElement)==null?void 0:o.id,id:r,onKeyDown:Y,onKeyUp:z,role:"menu",tabIndex:u.menuState===0?0:void 0,ref:b,style:{...p.style,...x,"--button-width":Os(u.buttonElement,!0).width},...Fs(U)});return ie.createElement(Rs,{enabled:c?e.static||O:!1},ue({ourProps:te,theirProps:p,slot:ee,defaultTag:pa,features:ga,visible:V,name:"Menu.Items"}))}let va=l.Fragment;function ha(e,t){let s=l.useId(),{id:o=`headlessui-menu-item-${s}`,disabled:a=!1,...r}=e,[i,c]=_e("Menu.Item"),m=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===o:!1,f=l.useRef(null),p=Pe(t,f);ae(()=>{if(!i.__demoMode&&i.menuState===0&&m&&i.activationTrigger!==0)return Bs().requestAnimationFrame(()=>{var E,G;(G=(E=f.current)==null?void 0:E.scrollIntoView)==null||G.call(E,{block:"nearest"})})},[i.__demoMode,f,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let v=Ds(f),u=l.useRef({disabled:a,domRef:f,get textValue(){return v()}});ae(()=>{u.current.disabled=a},[u,a]),ae(()=>(c({type:5,id:o,dataRef:u}),()=>c({type:6,id:o})),[u,o]);let d=B(()=>{c({type:1})}),g=B(E=>{if(a)return E.preventDefault();c({type:1}),Ft(i.buttonElement)}),x=B(()=>{if(a)return c({type:2,focus:L.Nothing});c({type:2,focus:L.Specific,id:o})}),h=Ws(),k=B(E=>{h.update(E),!a&&(m||c({type:2,focus:L.Specific,id:o,trigger:0}))}),_=B(E=>{h.wasMoved(E)&&(a||m||c({type:2,focus:L.Specific,id:o,trigger:0}))}),b=B(E=>{h.wasMoved(E)&&(a||m&&c({type:2,focus:L.Nothing}))}),[y,N]=Rt(),[O,U]=Ls(),S=l.useMemo(()=>({active:m,focus:m,disabled:a,close:d}),[m,a,d]);return ie.createElement(N,null,ie.createElement(U,null,ue({ourProps:{id:o,ref:p,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":y,"aria-describedby":O,disabled:void 0,onClick:g,onFocus:x,onPointerEnter:k,onMouseEnter:k,onPointerMove:_,onMouseMove:_,onPointerLeave:b,onMouseLeave:b},theirProps:r,slot:S,defaultTag:va,name:"Menu.Item"})))}let ba="div";function Ma(e,t){let[s,o]=Rt();return ie.createElement(o,null,ue({ourProps:{ref:t,"aria-labelledby":s,role:"group"},theirProps:e,slot:{},defaultTag:ba,name:"Menu.Section"}))}let Ia="header";function Ca(e,t){let s=l.useId(),{id:o=`headlessui-menu-heading-${s}`,...a}=e,r=$s();ae(()=>r.register(o),[o,r.register]);let i={id:o,ref:t,role:"presentation",...r.props};return ue({ourProps:i,theirProps:a,slot:{},defaultTag:Ia,name:"Menu.Heading"})}let ya="div";function Sa(e,t){return ue({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:ya,name:"Menu.Separator"})}let Ta=le(da),ja=le(fa),ka=le(xa),Ea=le(ha),wa=le(Ma),Pa=le(Ca),_a=le(Sa),ge=Object.assign(Ta,{Button:ja,Items:ka,Item:Ea,Section:wa,Heading:Pa,Separator:_a});function ln({workspace:e}){const t=J(),s=Jt(K.InviteUsersToWorkspace),o=Hs()??!0,a=Vs()?.map(r=>r.hostname);return n.jsx(bt,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:In,type:"success",title:e.data.name!=null?t.formatMessage(pe.inviteMemberModalTitle,{workspaceName:e.data.name}):t.formatMessage(pe.inviteMemberModalTitleUntitledWorkspace),description:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx(C,{...pe.inviteMemberModalDescription})}),!!a?.length&&!o&&n.jsxs("p",{className:"mt-2",children:[n.jsx(C,{...pe.prohibitExternalDomainsDescription})," ",n.jsx("b",{children:a.join(", ")})]})]}),children:n.jsx(Io,{workspace:e,canResendInviteEmails:!0,onCancel:()=>$.closeModal(K.InviteUsersToWorkspace),onSuccess:()=>$.closeModal(K.InviteUsersToWorkspace),cancelButtonText:t.formatMessage(pe.inviteMemberInviteCancelButton)})})}const pe=je({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},prohibitExternalDomainsDescription:{id:"ky8nVd",defaultMessage:"Only users from the following emails can be added to this workspace:"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}}),Na=Object.freeze(Object.defineProperty({__proto__:null,default:ln},Symbol.toStringTag,{value:"Module"}));function Aa({show:e,appear:t,children:s}){return n.jsx(Gs,{as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",show:e,appear:t,children:s})}function se({onClick:e,href:t,target:s,children:o,disabled:a,icon:r,testId:i}){return n.jsx(ge.Item,{disabled:a,children:({active:c})=>n.jsxs(Ne,{onClick:e,href:t,target:s,className:ke({"bg-token-sidebar-surface-secondary":c,"hover:bg-token-sidebar-surface-secondary":!c&&!a}),"data-testid":i,children:[r&&n.jsx(r,{className:"icon-md"}),o]})})}function Oa({to:e,children:t,icon:s}){return n.jsx(ge.Item,{children:({active:o})=>n.jsx(Cn,{to:e,children:n.jsxs(Ne,{$as:"span",className:ke(o?"bg-token-sidebar-surface-secondary":"cursor-pointer"),children:[s&&n.jsx(s,{className:"icon-md"}),t]})})})}xe.a`p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer`;const Ne=xe.a`flex gap-2 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group items-center`,Mr=xe(Ne)`border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]`,He=xe.div`h-px bg-token-border-light my-1.5`,Ir=xe(Ne)`${e=>e.$active?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`;function un({menuItemComponent:e}){const t=Z(),s=de(),o=l.useCallback(()=>{j.logEvent(D.clickSidebarAccountPortalMenuItem),qe(s,"Sidebar account menu item")},[s]),{value:a}=yn("1028682714"),r=Mt(()=>It(()=>import("./sso-y24qlvpjvdevd8x6.js").then(i=>i.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64])).then(i=>i.default));return n.jsxs(n.Fragment,{children:[t?.hasPaidSubscription()&&(a?n.jsx(r,{handleClickCustomerPortal:o,menuItemComponent:e}):n.jsx(e,{onClick:o,icon:ro,children:n.jsx(C,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),t?.canInteractWithGizmos()&&n.jsx(e,{onClick:()=>{j.logEvent(D.accountMenuClickMyGPTs),s($t())},icon:Ut,children:n.jsx(C,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),n.jsx(e,{icon:Ht,onClick:()=>{$.openModal(K.UserContext),j.logEvent(D.accountMenuClickCustomizeChatGPT)},children:n.jsx(C,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function dn({menuItemComponent:e,routedMenuItemComponent:t}){const s=Z(),o=Ve("2756095923")?.value&&s?.isEdu()&&s?.isStandardUserOfAccount();return n.jsxs(n.Fragment,{children:[!o&&n.jsx(t,{to:"/admin",icon:io,children:n.jsx(C,{...Le.myWorkspaceSettings})}),n.jsx(t,{to:$t(),onClick:()=>{j.logEvent(D.accountMenuClickMyGPTs)},icon:Ut,children:n.jsx(C,{...Le.myGpts})}),n.jsx(e,{onClick:()=>{$.openModal(K.UserContext),j.logEvent(D.accountMenuClickCustomizeChatGPT)},icon:Ht,children:n.jsx(C,{...Le.chatPreferences})})]})}const Le=je({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});function Cr({onClickSettings:e}){return n.jsxs(ge,{as:"div",className:"group relative",children:[n.jsx(Da,{}),n.jsx(Aa,{children:n.jsx(ge.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:n.jsx(Ba,{onClickSettings:e})})})]})}function mn(){const e=!Z()?.isEnterprisey()&&!Tt,t=J(),s=Ke(),o=de();return s?n.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[n.jsx("div",{className:"text-sm text-token-text-secondary",children:s?.email}),e&&n.jsx(ce,{label:t.formatMessage(X.addWorkspaceTooltip),side:"right",children:n.jsx("button",{onClick:()=>qe(o,"profile menu"),children:n.jsx(po,{className:"icon-sm text-token-text-primary"})})})]}):null}function Fa(){const e=Z();return e==null?n.jsx(n.Fragment,{children:n.jsx("div",{className:"w-full px-3 py-2",children:n.jsx(ye,{})})}):n.jsxs(n.Fragment,{children:[n.jsx(mn,{}),n.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:n.jsx(pn,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})})]})}function fn({menuItemComponent:e}){const t=Qe(),s=Ct(),{data:o}=Ee(),a=Z(),[r,i]=l.useState(!1),c=Ke(),m=J(),f=Sn();if(!a||!o)return null;const p=a.isWorkspaceAccount(),v=o.accountItems.length>1,u=o.accountItems,d=zs([u.find(x=>x.isPersonalAccount()),...u.filter(x=>!x.isPersonalAccount())]);if(d.sort((x,h)=>x.isPersonalAccount()?1:h.isPersonalAccount()?-1:0),!v)return p?n.jsx(Fa,{}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:c?.email})});const g=d.map(x=>n.jsx(e,{disabled:x.isDeactivated(),onClick:()=>{if(x.isDeactivated()||x.id===a?.id)return;i(!0);const{willRedirect:h}=Tn(s,x.id,t,m,f);h||jn()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:x.isDeactivated()?n.jsx(Ra,{workspace:x,isLoading:r}):n.jsx(pn,{workspace:x,isLoading:r,currentWorkspaceId:a?.id})},x.id));return n.jsxs(n.Fragment,{children:[n.jsx(mn,{}),n.jsx(P.Separator,{}),g]})}function pn({workspace:e,isLoading:t,currentWorkspaceId:s,showCheck:o=!0}){const a=e.canAccessWithCurrentSession,r=!t&&o&&e.id===s;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(Je,{iconSize:"small",workspace:e,className:ke({"flex-shrink-0":!0})})}),n.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:Bt(J(),e)}),t&&n.jsx(ye,{}),r&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(co,{className:"icon-sm"})}),!a&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(lo,{className:"icon-sm"})})]}),!a&&n.jsx("div",{className:"rowDivClassName",children:n.jsx("small",{className:"text-token-text-secondary",children:n.jsx(C,{...e.ssoConnectionName?X.authenticateWithSSOToAccessWorkspace:X.authenticateWithoutSSOToAccessWorkspace})})})]})}function Ra({workspace:e,isLoading:t}){const s=J(),o=e.isOwnerOfAccount(),[a,r]=l.useState(!1),i=Mo(e.id);return l.useEffect(()=>{i!=null&&a&&($.setPurchaseWorkspaceData({minimumSeats:Math.max(i,ct),existingAccount:e}),r(!1))},[i,a,e]),n.jsxs(n.Fragment,{children:[n.jsxs(ce,{className:"flex w-full flex-1 items-center gap-2.5",label:s.formatMessage(X.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(uo,{className:"icon-sm flex-shrink-0 opacity-30"})}),n.jsx("div",{className:"truncate opacity-30",children:Bt(s,e)})]}),t&&n.jsx(ye,{}),!t&&n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:n.jsx(mo,{className:"icon-sm m-1"})}),n.jsx(P.Portal,{children:n.jsxs(P.Content,{children:[o&&n.jsx(n.Fragment,{children:n.jsx(P.Item,{onClick:()=>{i==null?r(!0):$.setPurchaseWorkspaceData({minimumSeats:Math.max(i,ct),existingAccount:e})},children:a?n.jsx(ye,{}):n.jsx(C,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),n.jsx(P.Item,{onClick:()=>{$.setLeaveWorkspaceData(e)},children:n.jsx(C,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function Ba({onClickSettings:e}){const{data:t}=Ee(),s=Z(),o=Dt(),a=Qt(),{openModal:r}=Kt(),i=yt("3905879930");var c=s?.canInviteMembers()??!1,m=!1;if(c&&(m=i.config.get("enabled",!1)),!s||!t)return null;const f=s.isWorkspaceAccount(),p=!o;return n.jsxs("nav",{children:[n.jsx(fn,{menuItemComponent:se}),n.jsx(He,{}),f?n.jsx(dn,{menuItemComponent:se,routedMenuItemComponent:Oa}):n.jsx(un,{menuItemComponent:se}),p&&n.jsx(se,{href:qs(),target:"_blank",onClick:()=>{j.logEvent(D.clickFaqLink)},icon:fo,children:n.jsx(C,{...X.helpAndFaq})}),n.jsx(se,{onClick:e,icon:Vt,testId:"accounts-settings-button",children:n.jsx(C,{...X.settings})}),c&&m&&n.jsxs(n.Fragment,{children:[n.jsx(se,{onClick:()=>{$.openModal(K.InviteUsersToWorkspace),j.logEvent(D.accountMemberInviteButton,{location:"dropdown-menu-click"}),Q.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Gt,children:n.jsx(C,{...X.addTeammatesButton})}),n.jsx(ln,{workspace:s})]}),a&&n.jsx(Wa,{openDownloadModal:r}),n.jsx(He,{}),n.jsx(se,{onClick:()=>{j.logEvent(D.clickLogOut,{eventSource:"mouse"}),St()},icon:zt,children:n.jsx(C,{...X.logOut})})]})}function Da(){return Ke()?n.jsx(La,{}):null}function Wa({openDownloadModal:e}){return n.jsxs("span",{children:[n.jsx(He,{}),n.jsx(se,{icon:qt,onClick:()=>{j.logEvent(D.accountMenuClickDownloadApp),e()},children:n.jsx(C,{...X.downloadApp})})]})}function La(){const{data:e}=Ee(),t=Z(),s=Qs(),o=Ks();if(!t||!e)return null;const a=t.isWorkspaceAccount(),r=e.accountItems.length>1;return n.jsxs(ge.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Je,{iconSize:"gizmo"})}),n.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[n.jsx("div",{dir:"auto",children:o}),a||r?n.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:s}):null]})]})}const X=je({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});function $a(e){Q.logEvent("chatgpt_web_thread_tap_new_thread"),tt.getItem(nt.HasSeenNewChatModal)===!0?Wt(e):(tt.setItem(nt.HasSeenNewChatModal,!0),$.openModal(K.NoAuthNewChat))}function yr(){return Jt(K.NoAuthNewChat)?n.jsx(Ua,{onClose:()=>{$.closeModal(K.NoAuthNewChat)}}):null}function Ua({onClose:e}){const t=Qe(),s=de(),o=kn("1934819688"),a=o.config.get("is_redesign_enabled",!1),r=o.config.get("secondary_button_type","cancel"),i=Lt(Oe.signUpButtonText),c=v=>{v.preventDefault(),t({authType:"signup",callback:u=>{Q.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),j.logSignUpButtonClicked({location:"New chat modal",provider:u})}})},m=v=>{v.preventDefault(),t({authType:"login",callback:u=>{Q.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),j.logLogInButtonClicked({location:"New chat modal",provider:u})}})},f=()=>{Q.logEvent("chatgpt_new_chat_modal_cancel_button_clicked"),j.logEvent(D.newChatModalCancelButtonClicked),e()},p=()=>{Q.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),j.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),Wt(s),e()};return l.useEffect(()=>{Q.logEvent("chatgpt_new_chat_modal_shown"),j.logEvent(D.newChatModalShown)},[]),n.jsx(bt,{isOpen:!0,type:"success",onClose:e,noPadding:!0,size:"custom",className:"max-w-sm",children:n.jsxs("div",{className:"flex flex-col justify-center p-6",children:[n.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[n.jsx("div",{}),n.jsx("div",{className:"text-xl font-medium",children:n.jsx(C,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),n.jsx("div",{className:"flex justify-end",children:a?n.jsx(En,{onClick:e}):null})]}),n.jsx("p",{className:"mb-6 text-center text-token-text-secondary",children:n.jsx(C,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:v=>n.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:c,children:v}),login:v=>n.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:m,children:v})}})}),n.jsx(re,{className:"mb-3",color:a?"primary":"danger",size:"giant",onClick:p,children:n.jsx(C,{id:"cBGbrD",defaultMessage:"Clear chat"})}),r==="cancel"?n.jsx(re,{size:"giant",onClick:f,color:"secondary",children:n.jsx(C,{...Oe.cancelButtonText})}):null,r==="login"?n.jsx(re,{size:"giant",onClick:()=>{t({authType:"login",callback:v=>{j.logLogInButtonClicked({location:"New chat modal",provider:v})}})},color:"ghost",children:n.jsx(C,{...Oe.logInButtonText})}):null,r==="signup"?n.jsx(re,{size:"giant",onClick:()=>{t({authType:"signup",callback:v=>{j.logSignUpButtonClicked({location:"New chat modal",provider:v})}})},color:"ghost",children:n.jsx(C,{...i})}):null]})})}function Ha({clientThreadId:e,location:t}){const s=Ct(),{id:o}=eo(e),a=to(!0),r=de(),i=jt(),c=wn();return l.useCallback(()=>{Pn(_n(s))?$a(r):i?r({pathname:c.pathname,search:c.search},{state:Js()}):(a({modelId:o,location:t}),Q.logEvent("chatgpt_web_thread_tap_new_thread"))},[s,t,o,a,r,i,c])}const Va=Mt(()=>It(()=>Promise.resolve().then(()=>Na),void 0));function Sr({showShareButton:e,showProfileDropdown:t,clientThreadId:s}){const o=ao(s),a=J(),r=Xe(s),{layer:i}=Se("1547743984"),c=i.get("show_share_button_text",!1),m=a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"});return n.jsxs(n.Fragment,{children:[!1,r&&n.jsx(Po,{}),e&&o&&n.jsx(Ao,{clientThreadId:s,children:c?n.jsx(re,{onClick:()=>$.openSharingModal(o),icon:lt,label:m,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",children:n.jsx("span",{style:{display:"var(--screen-size-hidden-on-compact-mode,)"},children:m})}):n.jsx(ce,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:n.jsx(we,{"data-testid":"share-chat-button",onClick:()=>$.openSharingModal(o),icon:lt})})}),t&&n.jsx(za,{})]})}function Ga({to:e,children:t,icon:s}){const o=de();return n.jsx(P.Item,{icon:s,onSelect:()=>o(e),children:t})}function za(){const{isUnauthenticated:e}=kt();return e?n.jsx(Xa,{}):n.jsx(qa,{})}function qa(){const{data:e}=Ee(),t=Z(),s=t?.isPlus()??!1,o=t?.isWorkspaceAccount()??!1,{openSettings:a}=Ys(),r=Qt(),{openModal:i}=Kt(),{layer:c}=Se("2888142241"),m=yt("3905879930");var f=t?.canInviteMembers()??!1,p=!1;f&&(p=m.config.get("enabled",!1));const{doesUserHaveAnyAccountsWithPlusFeatures:v}=Nn(),{layer:u}=Se("2670443078");if(!t||!e)return null;const d=e.accountItems.length>1;let g=s;!o&&!s&&v&&u.get("is_gating_fix_enabled",!1)&&(g=v);const x=!o&&!g&&!Tt&&c.get("is_upgrade_in_settings",!1);return n.jsxs(bo,{triggerButton:n.jsx("button",{onClick:()=>{j.logEvent(D.accountOpenProfileMenu),Q.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",style:{display:"var(--screen-size-hidden-on-compact-mode, flex)"},children:n.jsx(Je,{iconSize:"medium"})}),children:[d&&n.jsx(fn,{menuItemComponent:P.Item}),d?n.jsx(P.Separator,{}):null,o?n.jsx(dn,{menuItemComponent:P.Item,routedMenuItemComponent:Ga}):n.jsx(un,{menuItemComponent:P.Item}),n.jsx(P.Item,{icon:Vt,onClick:()=>a(),"data-testid":"settings-menu-item",children:n.jsx(C,{defaultMessage:"Settings",id:"navigation.settings.0"})}),n.jsx(P.Separator,{}),f&&p&&n.jsxs(n.Fragment,{children:[n.jsx(P.Item,{"data-testid":"settings-menu-item-invite-teammates",onClick:()=>{$.openModal(K.InviteUsersToWorkspace),j.logEvent(D.accountMemberInviteButton,{eventSource:"mouse",location:"profile_drop_down"}),Q.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Gt,children:n.jsx(C,{...gn.addTeammatesButton})}),n.jsx(Va,{workspace:t})]}),r&&n.jsx(Ka,{openDownloadModal:i}),x&&n.jsx(Ja,{}),(x||r)&&n.jsx(P.Separator,{}),n.jsx(P.Item,{onClick:()=>{j.logEvent(D.clickLogOut,{eventSource:"mouse"}),j.logLogOutButtonClicked({location:"profile_drop_down"}),St()},"data-testid":"log-out-menu-item",icon:zt,children:n.jsx(C,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function Qa({onClick:e,className:t,testId:s}){const o=J(),a=jt(),r=a?o.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):o.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return n.jsx(ce,{sideOffset:4,label:r,className:ke("flex",t),children:n.jsx(we,{onClick:()=>{$.closePopoverNavSidebar(),e()},icon:a?vo:ho,surfaceContext:"secondary","aria-label":r,"data-testid":s})})}function Tr({clientThreadId:e}){const[t]=Yt(a=>[a.activeStageSidebar]),s=Xt(),o=Ha({clientThreadId:e,location:"Navigation actions"});return!s&&!t?null:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ya,{}),n.jsx(Qa,{onClick:o})]})}function Ka({openDownloadModal:e}){return n.jsx("span",{children:n.jsx(P.Item,{icon:qt,onClick:()=>{e(),j.logEvent(D.accountMenuClickDownloadApp)},children:n.jsx(C,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function Ja(){const e=de(),s=Z()?.wasPaidCustomer()??!1,o=()=>{Q.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),j.logEvent(D.plusUpgradeInSettingsMenuClicked),qe(e,"Upper right settings menu")};return n.jsx(P.Item,{icon:go,onClick:o,children:s?n.jsx(C,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):n.jsx(C,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Ya(){const e=J(),[t]=Yt(r=>[r.activeStageSidebar]),s=Xt(),o=Dt(),{isUnauthenticated:a}=kt();return!t&&!s||!o||a?null:n.jsx(ce,{label:e.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:n.jsx(we,{"aria-label":e.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:$.toggleNavSidebar,icon:xo,surfaceContext:"primary"})})}function Xa(){const e=Qe(),t=Xs(),s=Lt(gn.signUpCta),{layer:o}=Se("3637408529"),a=o.get("is_desktop_primary_auth_button_on_right",!1),r=()=>{e({authType:"login",callback:p=>{j.logLogInButtonClicked({location:"Chat header",provider:p})}})},i=()=>{e({authType:"signup",callback:p=>{j.logSignUpButtonClicked({location:"Chat header",provider:p})}})},c=n.jsx(re,{onClick:r,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:n.jsx(C,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),m=n.jsx(re,{color:t?"secondary":"primary",onClick:i,size:"small","data-testid":"signup-button",children:n.jsx(C,{...s})},"signup"),f=t?[c,m]:[m,c];return n.jsx("div",{className:"flex items-center justify-center gap-2",children:a?f.reverse():f})}const gn=je({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});export{Tr as A,yr as B,Sr as C,Na as D,Ya as E,za as L,na as M,Qa as N,Aa as P,ta as R,xr as T,Ir as U,qa as a,ea as b,Cr as c,Ne as d,fr as e,vr as f,en as g,$a as h,Mr as i,Ha as j,Xe as k,lr as l,pr as m,ur as n,mr as o,br as p,tn as q,on as r,hr as s,gr as t,sn as u,dr as v,me as w,Yo as x,Xo as y,Co as z};
//# sourceMappingURL=d9zyifn8newo7zbx.js.map
