const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/oof4e1d1zybt8su9.js","assets/otclk14vst88v95n.js","assets/cqauunpqwnjujx3i.js","assets/root-cn1q1n2n.css","assets/d9zyifn8newo7zbx.js","assets/cef20f49k9y1cwjs.js","assets/conversation-small-mclg7qvi.css","assets/m5be5ov74xrjmrp3.js","assets/ge4estcii3ilqp3x.js","assets/fjotlmkpidhbg5lv.js","assets/dz5d6zj45kdshiom.js","assets/g2mu0f7itg7huslu.js","assets/o0zm8r4ulpygvxzt.js","assets/frpk4161je4wyyc5.js","assets/grwsm8tx5qgi12pr.js","assets/fk3u4mjp5mpw70zy.js","assets/mmxiwemqqtmqbesv.js","assets/ibb3ldlzt4z2r22d.js","assets/k634wtly9qqhfuwz.js"])))=>i.map(i=>d[i]);
import{u as _,j as y,a4 as f,ah as q,a as N,h as w,ae as P,a6 as A,a7 as E,r as h,t as e,a9 as m,bK as J,aU as I,Q as X,ak as Y,bq as ee,b0 as se,S as te,U as ae}from"./otclk14vst88v95n.js";import{D as v,B as ne}from"./g2mu0f7itg7huslu.js";import{U,G as re}from"./fk3u4mjp5mpw70zy.js";import{aw as W,ax as T,_ as n,az as D,aB as F,c as ie,aC as oe,fp as le,e as ce,cN as de,cU as ue}from"./cef20f49k9y1cwjs.js";import{c as me}from"./iej0cupg2dqkmejt.js";import{a8 as C,t as ge,I as xe}from"./cqauunpqwnjujx3i.js";import{a as ve,b as pe}from"./dayvl6fssjenim1y.js";import{A as B,W as H,u as fe,U as he}from"./grwsm8tx5qgi12pr.js";import{u as je}from"./f6kpdkw7xoo83xoa.js";import"./dz5d6zj45kdshiom.js";import"./ge4estcii3ilqp3x.js";import"./fjotlmkpidhbg5lv.js";import"./httn24yor539nbee.js";import"./d9zyifn8newo7zbx.js";import"./m5be5ov74xrjmrp3.js";import"./o0zm8r4ulpygvxzt.js";import"./frpk4161je4wyyc5.js";import"./ibb3ldlzt4z2r22d.js";import"./k634wtly9qqhfuwz.js";import"./mmxiwemqqtmqbesv.js";import"./j3d76yxy2o2fg9b6.js";import"./gsn4al4j966dpy7s.js";import"./j2wfs46bm5ondumk.js";const M=25;function Me(s,t,a){return _({queryKey:["workspace",s,"invites",t,a],queryFn:async()=>await y.getWorkspaceInvites(s,t,M,a)})}function be(s,t,a){return _({queryKey:["workspace",s,"invites","requests",t,a],queryFn:async()=>await y.getWorkspaceInviteRequests(s,t,M,a)})}function O(s){const t=f(),a=q(),r=N();return w({mutationFn:({inviteId:l,role:i,acceptRequest:o})=>y.patchWorkspaceInvite(s,l,{role:i,acceptRequest:o}).catch(c=>{a.danger(t.formatMessage(k.updateInviteError,{error:c.message}))}),onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",s,"invites"]}),r.invalidateQueries({queryKey:["workspace",s,"invites","requests"]}),r.invalidateQueries({queryKey:["workspace",s]})}})}function Q(s){const t=f(),a=q(),r=N();return w({mutationFn:({email:l})=>y.deleteWorkspaceInvite(s,l).catch(i=>{a.danger(t.formatMessage(k.deleteInviteError,{email:l,error:i.message}))}),onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",s,"invites"]}),r.invalidateQueries({queryKey:["workspace",s,"invites","requests"]})}})}function Ie(s){const t=f(),a=q(),r=N();return w({mutationFn:({role:l,email:i})=>y.addWorkspaceUsers(s,[i],l,!0).then(({account_invites:o,errored_emails:c})=>{if(c.length>0)throw new Error(c[0].error);o.length>0&&a.success(t.formatMessage(k.resendInviteSuccess,{email:i}))}).catch(o=>{a.danger(t.formatMessage(k.resendInviteError,{email:i,error:o.message}))}),onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",s,"invites"]}),r.invalidateQueries({queryKey:["workspace",s,"invites","requests"]})}})}const k=P({updateInviteError:{id:"WorkspaceInvites.updateInviteError",defaultMessage:"Unable to update invite from workspace: {error}"},deleteInviteError:{id:"WorkspaceInvites.deleteInviteError",defaultMessage:"Unable to remove user ({email}) from workspace: {error}"},resendInviteSuccess:{id:"WorkspaceInvites.resendInviteSuccess",defaultMessage:"Sent a new invite to {email}"},resendInviteError:{id:"WorkspaceInvites.resendInviteError",defaultMessage:"Unable to resend invite to ({email}) from workspace: {error}"}}),ye=A(()=>E(()=>import("./oof4e1d1zybt8su9.js"),__vite__mapDeps([0,1,2,3])).then(s=>s.DirectorySyncResourceManagedIndication));function Re({workspaceId:s,filterInputValue:t}){const[a,r]=h.useState(0),l=W(s),i=T(s),o=l||i,{data:c}=Me(s,a*M,t);if(c===void 0)return e.jsx(B,{});const d=c.items,u=Math.ceil((c.total??0)/M);return a>=u&&u!==0&&r(Math.max(u-1,0)),e.jsxs("div",{children:[e.jsxs(n.Root,{fixed:!0,size:"normal",children:[e.jsxs(n.Header,{children:[e.jsx(n.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(m,{...b.email})}),e.jsx(n.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:e.jsx("span",{className:o?"pl-3":"",children:e.jsx(m,{...b.role})})}),o&&e.jsx(n.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),e.jsxs(n.Body,{children:[d.map(g=>e.jsx(ke,{workspaceId:s,invite:g,isCurrentUserOwner:l,currentUserHasAdminRights:o},g.id)),d.length===0&&e.jsx(n.Row,{children:e.jsx(n.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(m,{...b.noResults})})})})]})]}),u>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(D,{currentPage:a,onChangeIndex:r,length:u})})]})}function ke({workspaceId:s,invite:t,isCurrentUserOwner:a,currentUserHasAdminRights:r}){const l=F(),i=O(s),o=Q(s),c=Ie(s),{value:d}=J("3999712942");return e.jsxs(n.Row,{disabled:i.isPending||o.isPending||o.isSuccess||c.isPending,children:[e.jsx(n.Cell,{children:e.jsxs("span",{className:"flex flex-grow justify-between",children:[e.jsx("span",{children:t.email_address}),d&&t.is_scim_managed&&e.jsx(ye,{})]})}),e.jsx(n.Cell,{children:a?e.jsx(H,{currentRole:t.role,onUpdateUserRole:u=>{i.mutate({inviteId:t.id,role:u})}}):l[t.role]}),r&&e.jsx(e.Fragment,{children:e.jsx(n.Cell,{children:e.jsx(Pe,{onDeleteUser:()=>{o.mutate({email:t.email_address??""})},onResendInvite:()=>{c.mutate({email:t.email_address??"",role:t.role??""})},disabled:t.is_scim_managed})})})]})}function Pe({onDeleteUser:s,onResendInvite:t,disabled:a}){const r=f();return e.jsx(e.Fragment,{children:a?e.jsx(v.Root,{children:e.jsx(v.Trigger,{disabled:!0,children:e.jsx(ie,{sideOffset:0,label:r.formatMessage(oe.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(C,{className:"icon-sm"})})})}):e.jsxs(v.Root,{children:[e.jsx(v.Trigger,{children:e.jsx(C,{className:"icon-sm"})}),e.jsx(v.Portal,{children:e.jsxs(v.Content,{children:[e.jsx(v.Item,{onClick:t,children:e.jsx(m,{...b.resendInvite})}),e.jsx(v.Item,{onClick:s,children:e.jsx(m,{...b.revokeInvite})})]})})]})})}const b=P({email:{id:"InviteManager.email",defaultMessage:"Email"},role:{id:"InviteManager.role",defaultMessage:"Role"},resendInvite:{id:"InviteManager.resendInvite",defaultMessage:"Resend invite"},revokeInvite:{id:"InviteManager.revokeInvite",defaultMessage:"Revoke invite"},noResults:{id:"InviteManager.noResults",defaultMessage:"No results"}});function Ce({workspaceId:s,filterInputValue:t}){const[a,r]=h.useState(0),{data:l}=be(s,a*M,t),i=W(s),o=T(s),c=f(),d=i||o;if(l===void 0)return e.jsx(B,{});const u=l.items,g=Math.ceil(l.total/M);return a>=g&&g!==0&&r(Math.max(g-1,0)),e.jsxs("div",{children:[e.jsxs(n.Root,{fixed:!0,size:"normal",children:[e.jsxs(n.Header,{children:[e.jsx(n.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(m,{...j.email})}),e.jsx(n.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:e.jsx("span",{className:d?"pl-3":"",children:e.jsx(m,{...j.role})})}),d&&e.jsx(n.HeaderCell,{className:"w-40 bg-token-main-surface-primary",children:c.formatMessage(j.actions)})]}),e.jsxs(n.Body,{children:[u.map(R=>e.jsx(qe,{workspaceId:s,invite:R,isCurrentUserOwner:i,currentUserHasAdminRights:d},R.id)),u.length===0&&e.jsx(n.Row,{children:e.jsx(n.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(m,{...j.noResults})})})})]})]}),g>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(D,{currentPage:a,onChangeIndex:r,length:g})})]})}function qe({workspaceId:s,invite:t,isCurrentUserOwner:a,currentUserHasAdminRights:r}){const l=F(),i=O(s),o=Q(s),c=f();return e.jsxs(n.Row,{disabled:i.isPending||o.isPending||o.isPending,children:[e.jsx(n.Cell,{children:t.email_address}),e.jsx(n.Cell,{children:a?e.jsx(H,{currentRole:t.role,onUpdateUserRole:d=>{i.mutate({inviteId:t.id,role:d})}}):l[t.role]}),r&&e.jsx(e.Fragment,{children:e.jsx(n.Cell,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{onClick:()=>i.mutate({inviteId:t.id,acceptRequest:!0}),children:c.formatMessage(j.accept)}),e.jsx(I,{color:"secondary",onClick:()=>o.mutate({email:t.email_address}),children:c.formatMessage(j.reject)})]})})})]})}const j=P({email:{id:"RequestInviteManager.email",defaultMessage:"Email"},role:{id:"RequestInviteManager.role",defaultMessage:"Role"},actions:{id:"RequestInviteManager.actions",defaultMessage:"Actions"},accept:{id:"RequestInviteManager.accept",defaultMessage:"Accept"},reject:{id:"RequestInviteManager.reject",defaultMessage:"Reject"},noResults:{id:"RequestInviteManager.noResults",defaultMessage:"No results"}}),Ne=A(()=>E(()=>import("./d9zyifn8newo7zbx.js").then(s=>s.D),__vite__mapDeps([4,1,2,3,5,6,7,8,9,10,11,12,13,14,15,16,17,18])));var K=(s=>(s.Members="members",s.Invites="invites",s.Requests="requests",s))(K||{});function we({tab:s}){switch(s){case"members":return e.jsx(m,{...p.allMembers});case"invites":return e.jsx(m,{...p.pendingInvites});case"requests":return e.jsx(m,{...p.pendingRequests})}}function Se({tab:s,filterInputValue:t,workspaceId:a}){switch(s){case"members":return e.jsx(he,{workspaceId:a,filterInputValue:t});case"invites":return e.jsx(Re,{workspaceId:a,filterInputValue:t});case"requests":return e.jsx(Ce,{workspaceId:a,filterInputValue:t})}}const Ue=me(K);function _e({currentWorkspaceId:s}){const t=f(),a=Y(),r=fe(s)??"?",l=le(a),i=a?.isTeam(),o=ee(),[c]=se(),d=c.get("tab"),u=d&&Ue(d)?d:"members",[g,R]=h.useState(""),[L,S]=h.useState("");h.useEffect(()=>{S("")},[u]);const V=h.useCallback(ce(x=>{S(x)},250),[]),G=!!de()?.length;if(!a)return null;const $=a.isAdminOfAccount(),z=a.isOwnerOfAccount(),Z=i||!G?["members","invites"]:["members","invites","requests"];return e.jsxs(e.Fragment,{children:[e.jsx(ue,{children:e.jsx("title",{children:t.formatMessage(p.adminBrowserPageTitle)})}),e.jsx(ve,{title:t.formatMessage(p.adminPageTitle),subtitle:e.jsx(m,{values:{totalMembers:r,planName:l},...p.totalMembers})}),e.jsxs(pe,{children:[e.jsxs(Ee,{children:[e.jsx("div",{className:"mb-6 flex gap-2",children:Z.map(x=>e.jsx(Ae,{onClick:()=>{o(x!=null?`/admin?tab=${x}`:"/admin")},isSelected:u===x,children:e.jsx(we,{tab:x})},x))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ge,{className:"icon-sm absolute left-2 top-1/2 -translate-y-1/2 transform text-token-text-tertiary"}),e.jsx("input",{type:"text",value:g,onChange:x=>{R(x.target.value),V(x.target.value)},placeholder:t.formatMessage(p.search),className:"w-48 rounded-lg border border-token-border-light bg-token-main-surface-primary pl-8 placeholder:text-token-text-tertiary"})]}),($||z||i)&&e.jsx(I,{onClick:()=>{U.openModal(re.InviteUsersToWorkspace),te.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"workspace-admin-click",text:"InviteMember",step:"OpenModal"})},icon:xe,children:e.jsx(m,{...p.inviteMemberButton})}),i?e.jsx(ne,{triggerButton:e.jsx(I,{color:"secondary",icon:C}),children:e.jsx(v.Item,{onClick:()=>{a&&U.setLeaveWorkspaceData(a)},children:e.jsx(m,{...p.leaveWorkspace})})}):null]})]}),e.jsx(Se,{workspaceId:s,tab:u,filterInputValue:L})]}),a!=null?e.jsx(Ne,{workspace:a}):null]})}function Ae({children:s,isSelected:t,onClick:a}){return e.jsx(I,{color:"ghost",className:ae(t?"bg-token-main-surface-tertiary":"hover:bg-token-main-surface-tertiary"),onClick:a,children:s})}const Ee=X.div`mb-4 py-6 flex flex-col gap-4 lg:flex-row md:items-start lg:justify-between`,p=P({adminBrowserPageTitle:{id:"adminPage.adminBrowserPageTitle",defaultMessage:"ChatGPT - Member admin"},adminPageTitle:{id:"adminPage.adminPageTitle.0",defaultMessage:"Members"},workspaceNotFound:{id:"adminPage.workspaceNotFound",defaultMessage:"Workspace not found"},totalMembers:{id:"adminPage.totalMembers",defaultMessage:"{planName} Â· {totalMembers} {totalMembers, plural, one {member} other {members}}"},backToChat:{id:"adminPage.backToChat",defaultMessage:"Back to chat"},allMembers:{id:"adminPage.allMembers",defaultMessage:"All members"},pendingInvites:{id:"adminPage.pendingInvites",defaultMessage:"Pending invites"},pendingRequests:{id:"adminPage.pendingRequests",defaultMessage:"Pending requests"},analytics:{id:"adminPage.analytics",defaultMessage:"Analytics"},inviteMemberButton:{id:"adminPage.inviteMemberButton",defaultMessage:"Invite member"},leaveWorkspace:{id:"adminPage.leaveWorkspace",defaultMessage:"Leave workspace"},search:{id:"adminPage.search",defaultMessage:"Search"}});function is(){const s=je();return e.jsx(_e,{...s})}export{is as default};
//# sourceMappingURL=g0r762nqydlpch34.js.map
