import{a4 as g,t as e,U as k,a9 as p,aB as y,r as f,d as m,P as j}from"./otclk14vst88v95n.js";import{dw as v,dx as S,dy as _,dz as x,bR as R,c as M}from"./cef20f49k9y1cwjs.js";import{S as E,a as N}from"./mi7ib6zg2mtczyia.js";import{o as w,p as C}from"./ge4estcii3ilqp3x.js";import{g as D}from"./kqwdyvkaaavvn8k3.js";import{a as A}from"./g0g7owg6j7cwi23a.js";import{b as L}from"./dz5d6zj45kdshiom.js";import{E as T}from"./panubdxtdwlf1evd.js";import{m as P}from"./fjotlmkpidhbg5lv.js";import"./cqauunpqwnjujx3i.js";import"./m5be5ov74xrjmrp3.js";function z({date:t}){const a=g(),s=t instanceof Date?t:new Date(t*1e3),n=v(s,new Date);if(n<4&&n>-4){const r=a.formatRelativeTime(n,"day",{numeric:"auto"});return r.charAt(0).toUpperCase()+r.slice(1)}else return a.formatDate(s,{year:"numeric",month:"long",day:"numeric"})}function X({clientThreadId:t,turnIndex:a,messageId:s,isInSidebar:n=!1}){const r=w(t,a),o=C(t,a),l={clientThreadId:t,messageId:s,turnIndex:a},c=S(o,i=>i.entries).toSorted((i,d)=>(d?.pub_date??0)-(i?.pub_date??0)),u=r.toSorted((i,d)=>(d?.pub_date??0)-(i?.pub_date??0));return e.jsxs("div",{className:k("flex w-full flex-col bg-token-main-surface-primary",n?"mt-[-56px]":"mt-0"),children:[e.jsx(h,{title:e.jsx(p,{id:"dlVlo6",defaultMessage:"Citations"}),items:u,analyticsMetadata:l,messageId:s}),e.jsx(h,{title:e.jsx(p,{id:"iUafP7",defaultMessage:"Search Results"}),items:c,analyticsMetadata:l,messageId:s})]},`${a}-${t}`)}function h({title:t,items:a,analyticsMetadata:s,messageId:n}){return!a||a.length===0?null:e.jsxs("div",{children:[e.jsx(b,{className:"sticky top-0 z-[1] h-[56px] border-y border-token-border-light bg-token-main-surface-primary px-6 py-4 text-sm font-medium text-token-text-primary",children:t}),e.jsx("div",{className:"flex flex-col px-3 py-2",children:a.map((r,o)=>e.jsx(b,{index:o,children:e.jsx(F,{item:r,analyticsMetadata:s,index:o,messageId:n},o)},`${t}-${o}`))})]})}function b({children:t,index:a=0,className:s=""}){return e.jsx(P.div,{className:s,initial:{opacity:0},animate:{opacity:1},transition:{delay:(a+1)*.03},children:t})}function F({item:t,index:a,analyticsMetadata:s,messageId:n}){const r=A(t.url).data??D(t.url,"short"),o=i=>"ref_id"in i&&"content_type"in i,l=_(),c=y().resolvedTheme==="dark",u=e.jsxs(U,{analyticsMetadata:s,href:t.url,position:a,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{t.attributions&&x.setHighlight(n,t.attributions.map(({attribution_index:i,probability:d})=>({index:i,probability:d})))},onMouseLeave:()=>{x.clearHighlights()},children:[e.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[e.jsx(R,{url:t.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:e.jsx(E,{className:"icon-sm text-token-text-quaternary"})}),r,o(t)&&e.jsx(N,{searchResult:t,className:"inline h-4 w-4 text-token-text-tertiary"})]}),e.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:t.title}),(t.pub_date??t.snippet)&&e.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[t.pub_date&&e.jsx(z,{date:t.pub_date}),t.pub_date&&t.snippet&&" â€” ",t.snippet]})]});return l?e.jsx(M,{label:e.jsx(T,{item:t}),className:"text-left text-xs",theme:c?"default":"white",children:u}):u}const U=f.forwardRef(function(a,s){const{analyticsMetadata:n,position:r,...o}=a;function l(c,u){a.href&&j.logEventWithStatsig(c,u,{...L(n),url:a.href,raw_position:r.toString()})}return f.useEffect(()=>{l(m.searchLinkShown,"search_link_shown")},[]),e.jsx("a",{ref:s,...o,onClick:c=>{a.onClick?.(c),c.stopPropagation(),l(m.searchLinkClicked,"search_link_clicked")}})});export{X as SearchSources,h as SourcesListGroup};
//# sourceMappingURL=iwn6s49cbqbk7w9k.js.map
