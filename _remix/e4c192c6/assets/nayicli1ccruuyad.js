import{m as e,r as c,bo as h,aK as j,aC as p}from"./c2lgex2wl5f4pr2u.js";import{bf as g,bg as v,bh as m,bi as f,bj as N,bk as _}from"./ofnn5mxnc0bbo8rs.js";function A({item:i}){const l=g(),d=v();let x=i.attributions_debug&&m(i.attributions_debug,i.attributions_debug.influence_temperature??void 0,void 0,d);const o=i.attributions_debug&&l!==i.attributions_debug.influence_temperature&&m(i.attributions_debug,l,void 0,d);return e.jsxs("div",{className:"text-left text-xs text-token-text-secondary",children:[e.jsx("div",{className:"font-bold",children:"Highlighted Segments"}),e.jsx("ul",{children:i.attribution_segments?.map((s,t)=>e.jsx("li",{children:s},t))}),o&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:i.attributions_debug?.ref_id}),e.jsxs("label",{className:"font-bold",children:["Probabilities (temperature: ",l,")"]}),e.jsxs("div",{className:"grid grid-cols-[auto,auto,auto] place-items-start gap-1",children:[e.jsx("div",{children:"Segment"}),e.jsx("div",{children:"Probability"}),e.jsx("div",{children:"Influence"}),o?.map(({attribution_index:s,probability:t,influence:n})=>e.jsxs(c.Fragment,{children:[e.jsx("div",{children:s}),e.jsx("div",{children:t.toPrecision(4)}),e.jsx("div",{children:n?.toPrecision(4)})]},s))]})]}),e.jsxs("label",{className:"font-bold",children:["Probabilities (default temp"," ",i.attributions_debug?.influence_temperature,")"]}),e.jsxs("div",{className:"grid grid-cols-[auto,1fr] place-items-start gap-1",children:[e.jsx("div",{children:"Segment"}),e.jsx("div",{children:"Probability"}),x?.map(({attribution_index:s,probability:t})=>e.jsxs(c.Fragment,{children:[e.jsx("div",{children:s}),e.jsx("div",{children:t.toPrecision(4)})]},s))]}),i.attributions_debug?.timings&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-bold",children:"Timings"}),e.jsx("div",{className:"grid grid-cols-[auto,1fr] place-items-start gap-1",children:Object.entries(i.attributions_debug.timings).map(([s,t])=>e.jsxs(c.Fragment,{children:[e.jsx("div",{children:s}),e.jsxs("div",{children:[t.toFixed(0),"ms"]})]},s))})]}),e.jsx("label",{className:"font-bold",children:"Debug info"}),e.jsxs("div",{className:"grid grid-cols-[auto,1fr] place-items-start gap-1",children:[e.jsx("div",{children:"Segment start idx"}),e.jsx("div",{children:i.attributions_debug?.start_idx}),e.jsx("div",{children:"Segment end idx"}),e.jsx("div",{children:i.attributions_debug?.end_idx})]})]})}function F({attributions:i,attributionsDebug:l,children:d}){const x=f(),o=h().resolvedTheme==="dark",s=c.useMemo(()=>i?.map((r,a)=>({...r,originalIndex:a}))?.toSorted((r,a)=>a.probability-r.probability),[i]),t=g(),n=l&&i&&l.influence_temperature!==t&&N(i,t);return!s||!x?d:e.jsx(j,{label:e.jsxs("div",{className:"text-left text-xs font-normal text-token-text-primary",children:[e.jsx("div",{className:"font-bold",children:"Attributions (Debug)"}),e.jsxs("div",{className:"grid grid-cols-[200px,1fr,1fr] gap-1",children:[e.jsx("div",{children:"Source"}),e.jsxs("div",{children:["τ=",l?.influence_temperature]}),e.jsx("div",{children:n&&`τ=${t}`}),s.map((r,a)=>{const b=r.source_type==="prior",u=b?"text-red-500":r.url?"":"text-gray-500";return e.jsxs(c.Fragment,{children:[e.jsx("div",{className:p("flex flex-col",u),children:b?e.jsx("div",{className:"line-clamp-1 font-bold",children:"Model Prior"}):r.url?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"line-clamp-1 font-bold",children:e.jsx(_,{url:r.url})}),"(",r.source_type,")"]}),e.jsx("div",{className:"line-clamp-1 text-xs",children:r.url})]}):e.jsxs("div",{className:"text-xxs line-clamp-1",children:["(",r.source_type,")"]})}),e.jsxs("div",{className:u,children:[(r.probability*100).toFixed(2),"%"]}),e.jsx("div",{className:u,children:n&&`${(n[r.originalIndex].probability*100).toFixed(2)}%`})]},a)})]})]}),theme:o?"default":"white",delayDuration:0,className:"inline",side:"left",children:d})}export{F as A,A as E};
//# sourceMappingURL=nayicli1ccruuyad.js.map
