import{r as d,a1 as C,cF as I,cG as N,aK as E,cJ as j,m as e,bd as L,a5 as u,bL as D,bO as F,bM as v,cK as f,bN as y}from"./cbv020t7gzp4f872.js";import{aA as k,a5 as A,aX as T}from"./kq3cjnjkkiu42wsi.js";import{ah as U,ai as b,aj as R,ae as S,J,ck as G,cl as z,cm as H}from"./gpe91l6ql3o0s610.js";import{S as a}from"./fte4amidzwa0x0i9.js";function K({voice:s}){const[l,c]=d.useState(!1),i=C(),t=I(),g=s.voice,r=s.preview_url,n=d.useRef({playPromise:null}).current,o=N(x=>x.isPlaying&&x.sourceUrl===r),h=E(),m=d.useCallback(async()=>{if(!t)return;const x={voice:g,source:r};j.previews.click(x);try{c(!0),t.changeSource(r),n.playPromise=t.play(),c(!1)}catch(P){j.previews.error(P,x),h.danger(i.formatMessage({id:"DeIYxH",defaultMessage:"Something went wrong playing preview"}))}},[i,t,r,g,n,h]),p=d.useCallback(()=>{t&&(n.playPromise?n.playPromise.then(()=>{t.stop(),n.playPromise=null}):t.stop())},[t,n]),w=d.useCallback(()=>{o?p():l||m()},[p,m,l,o]);return d.useEffect(()=>()=>{o&&p()},[s,o,p]),e.jsx(L,{onClick:w,color:"secondary",className:"flex flex-row flex-nowrap items-center gap-1 border-none font-normal",loading:l,icon:o?k:A,children:o?e.jsx(u,{id:"yGpEMJ",defaultMessage:"Stop"}):e.jsx(u,{id:"JwYDVp",defaultMessage:"Play"})})}const Z={Trigger:O,Content:Y};function V(){var s;return(s=y("174366048"))==null?void 0:s.value}function O(){return V()?e.jsx(U,{value:b.Speech,icon:e.jsx(T,{className:"icon-sm"}),label:e.jsx(u,{id:"speechSettings.trigger",defaultMessage:"Speech"})}):null}function Y(){var c;const s=V(),l=(c=y("1426009137"))==null?void 0:c.value;return s?e.jsxs(R,{value:b.Speech,children:[e.jsx(S,{children:e.jsx(_,{})}),l?e.jsx(S,{children:e.jsx(B,{})}):null]}):null}function M(s){const{data:l,isLoading:c}=D(s)||{},i=F();return{isLoading:c,value:l,setValue:t=>{i.mutate({setting:s,value:t})}}}function _(){const{isLoading:s,value:l,setValue:c}=M(v.VoiceName),i=J(),t=G(),g=s?"":z(l,t),r=i.find(({voice:n})=>n===g);return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col flex-nowrap gap-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(u,{id:"speechSettings.content.voice",defaultMessage:"Voice"})}),e.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[r?e.jsxs(e.Fragment,{children:[e.jsx(K,{voice:r}),e.jsx("div",{className:"h-4 border-l"})]}):null,e.jsxs(a.Root,{value:g,onValueChange:n=>c(n),disabled:s,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsx(a.Content,{children:i.map(({voice:n,name:o})=>e.jsx(a.Item,{value:n,children:o},n))})})]})]})]})})})}function B(){const{isLoading:s,value:l,setValue:c}=M(v.VoiceMainLanguage);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx(u,{id:"speechSettings.content.language",defaultMessage:"Main Language"})}),e.jsxs(a.Root,{value:s?"":l??f.Auto,onValueChange:i=>c(i),disabled:s,children:[e.jsxs(a.Trigger,{children:[e.jsx(a.Value,{}),e.jsx(a.Icon,{})]}),e.jsx(a.Portal,{children:e.jsxs(a.Content,{position:"popper",style:{maxHeight:"calc(var(--radix-select-content-available-height) - 5rem)"},children:[e.jsx(a.Item,{value:f.Auto,children:e.jsx(u,{id:"speechSettings.content.autoDetect",defaultMessage:"Auto-Detect"})}),Object.entries(f).filter(([i,t])=>t!==f.Auto).map(([i,t])=>e.jsx(a.Item,{value:t,className:"capitalize",children:i},t))]})})]})]}),e.jsx(H,{children:e.jsx(u,{id:"speechSettings.content.autoDetectDescription",defaultMessage:"For best results, select the language you mainly speak. If it's not listed, it may still be supported via auto-detection."})})]})}export{Z as S,M as u};
//# sourceMappingURL=dmw8xeoorsgvt2jn.js.map
