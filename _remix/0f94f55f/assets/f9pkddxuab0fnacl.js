import{r as p,fq as R,aH as M,bo as W,ca as P,m as l,eF as _,fr as K,fs as H,ft as U,bN as $,fu as V,fv as X,bp as G,fw as z,fx as Q}from"./cbv020t7gzp4f872.js";import{C as Y}from"./b8qkpw5ble1uwwqm.js";import{bK as Z,bL as J}from"./kq3cjnjkkiu42wsi.js";import{iv as ee,by as te,bl as T,hl as ne}from"./gpe91l6ql3o0s610.js";import{d as se}from"./op9obis5fwukoa18.js";import{u as re}from"./m9c7p1d7qbcooudb.js";import{d as oe,a as ie,i as ce}from"./lw9lle2awfx0m3zh.js";import{a as ae}from"./cf35vab9q82m0zj4.js";import{C as x}from"./gmiirouoqe0oqavl.js";import"./n1m1f2dq4jbayfm0.js";import"./jcecw02o1g7i3lgl.js";import"./eprwd5wd9a7hvvfw.js";import"./hte00x4vz53jf7hc.js";import"./c039xathbpqv7hjp.js";import"./4kmoegar8udth7vh.js";import"./fte4amidzwa0x0i9.js";import"./jaab2qdql5x1ymip.js";import"./dtgyxk1jks2sr306.js";import"./hpiio21pr81kn19y.js";import"./caan1pg3ww016xl8.js";import"./lnjq7tpfav8s4s8h.js";import"./le0igyxp535xhyki.js";import"./ihhnf33zws1gyw0j.js";import"./j1mltnb4g3et1nfv.js";import"./l29l32kuno0zg8js.js";import"./lwyj5zt61cufjetj.js";import"./h73djwrxeutdwgij.js";import"./gjpw3bbtuwvhdku2.js";import"./nbel0869cnaupjnl.js";import"./dwg1uidtx2z6dpb7.js";import"./nriec8vah7hgye40.js";import"./k41xbylswt58q6cl.js";import"./gxxn630wwaiwqexe.js";import"./hryykjcwq4fvumfr.js";const w=p.createContext(void 0),le={};w.Provider;const ue=()=>p.useContext(w)?p.useContext(w):le,S=typeof window>"u"?global:window,v="@griffel/";function de(e,t){return S[Symbol.for(v+e)]||(S[Symbol.for(v+e)]=t),S[Symbol.for(v+e)]}const b=de("DEFINITION_LOOKUP_TABLE",{}),y="data-make-styles-bucket",fe="data-priority",E=7,N="___",me=N.length+E,he=0,pe=1;function ge(e){const t=e.length;if(t===E)return e;for(let s=t;s<E;s++)e+="0";return e}function k(e,t,s=[]){return N+ge(ee(e+t))}function q(e,t){let s="",n="";for(const o in e){const r=e[o];if(r===0){n+=o+" ";continue}const i=Array.isArray(r),c=t==="rtl"?(i?r[1]:r)+" ":(i?r[0]:r)+" ";s+=c,n+=c}return[s.slice(0,-1),n.slice(0,-1)]}function I(e,t){const s={};for(const n in e){const[o,r]=q(e[n],t);if(r===""){s[n]="";continue}const i=k(r,t),c=i+(o===""?"":" "+o);b[i]=[e[n],t],s[n]=c}return s}const A={};function Ce(){let e=null,t="",s="";const n=new Array(arguments.length);for(let a=0;a<arguments.length;a++){const h=arguments[a];if(typeof h=="string"&&h!==""){const m=h.indexOf(N);if(m===-1)t+=h+" ";else{const C=h.substr(m,me);m>0&&(t+=h.slice(0,m)),s+=C,n[a]=C}}}if(s==="")return t.slice(0,-1);const o=A[s];if(o!==void 0)return t+o;const r=[];for(let a=0;a<arguments.length;a++){const h=n[a];if(h){const m=b[h];m&&(r.push(m[he]),e=m[pe])}}const i=Object.assign.apply(Object,[{}].concat(r)),[c,u]=q(i,e),d=k(u,e,n),f=d+" "+c;return A[s]=f,b[d]=[i,e],t+f}function ye(e){return Array.isArray(e)?e:[e]}function Se(e,t,s,n){const o=[];if(n[y]=t,n[fe]=String(s),e)for(const i in n)e.setAttribute(i,n[i]);function r(i){return e!=null&&e.sheet?e.sheet.insertRule(i,e.sheet.cssRules.length):o.push(i)}return{elementAttributes:n,insertRule:r,element:e,bucketName:t,cssRules(){return e!=null&&e.sheet?Array.from(e.sheet.cssRules).map(i=>i.cssText):o}}}const ve=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],O=ve.reduce((e,t,s)=>(e[t]=s,e),{});function xe(e,t,s){return(e==="m"?e+t:e)+s}function we(e,t,s,n,o={}){var r,i;const c=e==="m",u=(r=o.m)!==null&&r!==void 0?r:"0",d=(i=o.p)!==null&&i!==void 0?i:0,f=xe(e,u,d);if(!n.stylesheets[f]){const a=t&&t.createElement("style"),h=Se(a,e,d,Object.assign({},n.styleElementAttributes,c&&{media:u}));n.stylesheets[f]=h,t&&a&&t.head.insertBefore(a,Ee(t,s,e,n,o))}return n.stylesheets[f]}function be(e,t,s){var n,o;const r=t+((n=s.m)!==null&&n!==void 0?n:""),i=e.getAttribute(y)+((o=e.media)!==null&&o!==void 0?o:"");return r===i}function Ee(e,t,s,n,o={}){var r,i;const c=O[s],u=(r=o.m)!==null&&r!==void 0?r:"",d=(i=o.p)!==null&&i!==void 0?i:0;let f=g=>c-O[g.getAttribute(y)],a=e.head.querySelectorAll(`[${y}]`);if(s==="m"){const g=e.head.querySelectorAll(`[${y}="${s}"]`);g.length&&(a=g,f=B=>n.compareMediaQueries(u,B.media))}const h=g=>be(g,s,o)?d-Number(g.getAttribute("data-priority")):f(g),m=a.length;let C=m-1;for(;C>=0;){const g=a.item(C);if(h(g)>0)return g.nextSibling;C--}return m>0?a.item(0):t?t.nextSibling:null}function D(e,t){try{e.insertRule(t)}catch{}}let _e=0;const Ne=(e,t)=>e<t?-1:e>t?1:0;function Re(e=typeof document>"u"?void 0:document,t={}){const{classNameHashSalt:s,unstable_filterCSSRule:n,insertionPoint:o,styleElementAttributes:r,compareMediaQueries:i=Ne}=t,c={classNameHashSalt:s,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(r),compareMediaQueries:i,id:`d${_e++}`,insertCSSRules(u){for(const d in u){const f=u[d];for(let a=0,h=f.length;a<h;a++){const[m,C]=ye(f[a]),g=we(d,e,o||null,c,C);c.insertionCache[m]||(c.insertionCache[m]=d,n?n(m)&&D(g,m):D(g,m))}}}};return c}const Te=()=>{const e={};return function(s,n){e[s.id]===void 0&&(s.insertCSSRules(n),e[s.id]=!0)}};function Ie(e,t,s=Te){const n=s();let o=null,r=null;function i(c){const{dir:u,renderer:d}=c,f=u==="ltr";return f?o===null&&(o=I(e,u)):r===null&&(r=I(e,u)),n(d,t),f?o:r}return i}function Ae(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const j=R.useInsertionEffect?R.useInsertionEffect:void 0,Oe=()=>{const e={};return function(s,n){if(j&&Ae()){j(()=>{s.insertCSSRules(n)},[s,n]);return}e[s.id]===void 0&&(s.insertCSSRules(n),e[s.id]=!0)}},De=p.createContext(Re());function je(){return p.useContext(De)}const Le=p.createContext("ltr");function Fe(){return p.useContext(Le)}function Pe(e,t){const s=Ie(e,t,Oe);return function(){const o=Fe(),r=je();return s({dir:o,renderer:r})}}const ke=Pe({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),qe=(e,t)=>{const{title:s,primaryFill:n="currentColor",...o}=e,r={...o,title:void 0,fill:n},i=ke(),c=ue();return r.className=Ce(i.root,(t==null?void 0:t.flipInRtl)&&(c==null?void 0:c.textDirection)==="rtl"&&i.rtl,r.className),s&&(r["aria-label"]=s),!r["aria-label"]&&!r["aria-labelledby"]?r["aria-hidden"]=!0:r.role="img",r},Be=(e,t,s,n)=>{const o=t==="1em"?"20":t,r=p.forwardRef((i,c)=>{const u={...qe(i,{flipInRtl:void 0}),ref:c,width:t,height:t,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"};return p.createElement("svg",u,...s.map(d=>p.createElement("path",{d,fill:u.fill})))});return r.displayName=e,r},Me=Be("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function We({onNewThread:e,onOpenInMainWindow:t}){return l.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex h-8 w-full items-center justify-between px-2",children:[l.jsxs("div",{children:[l.jsx("button",{onClick:e,className:"text-token-text-tertiary hover:text-token-text-primary",children:l.jsx(Z,{})}),t&&l.jsx("button",{onClick:t,className:"pl-2 text-token-text-tertiary hover:text-token-text-primary",children:l.jsx(J,{})})]}),l.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-primary",onClick:()=>{_(!1)},children:l.jsx(Me,{className:"text-token-text-tertiary hover:text-token-text-primary"})})]})}function Ke({onNewThread:e,onOpenInMainWindow:t,children:s}){const n=p.useRef(null);return p.useEffect(()=>{if(n.current){const o=n.current.ownerDocument,r=i=>{i.key==="Escape"&&!i.shiftKey&&!i.ctrlKey&&!i.metaKey&&_(!1)};return o.addEventListener("keydown",r),()=>{o.removeEventListener("keydown",r)}}},[]),l.jsxs("div",{className:"flex h-full w-full flex-col pt-8",ref:n,children:[l.jsx(We,{onNewThread:e,onOpenInMainWindow:t}),s]})}function He(){const e=x.useStore(),{clientThreadId:t}=x.useState();re(t,{kind:M.PrimaryAssistant});const s=W(),n=oe(r=>ie.resolveThreadId(t,r)),o=P();return p.useEffect(()=>{const r=()=>{var i;(i=o.document.getElementById("prompt-textarea"))==null||i.focus()};return o.addEventListener("focus",r),()=>{o.removeEventListener("focus",r)}},[o]),l.jsx(Ke,{onNewThread:()=>{e.newThread()},onOpenInMainWindow:n!==t||!ce(t)?()=>{s(`/c/${t}`),_(!1,{focusMainWindow:!0})}:void 0,children:l.jsx(K,{children:l.jsx(te,{children:l.jsx(T.Provider,{store:()=>new T,children:l.jsx(Y,{clientThreadId:t,children:l.jsx(Ue,{clientThreadId:t})})},t)})})})}function Ue({clientThreadId:e}){const t=x.useStore(),s=P();return ae({resetThreadAction:()=>t.newThread(),clientThreadId:e,focusPromptTextareaAction:()=>{var n;return(n=s.document.getElementById("prompt-textarea"))==null?void 0:n.focus()}}),l.jsxs(l.Fragment,{children:[l.jsx(se,{clientThreadId:e,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},e),l.jsx(ne,{clientThreadId:e})]})}let L=!1;function Rt(){var e;(e=H)==null||e.registerObserver(U)}function F(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function $e(e,t){e.head.querySelectorAll("link, style").forEach(o=>{F(o)&&t.head.appendChild(o.cloneNode(!0))});const s=new WeakMap,n=new MutationObserver(o=>{o.forEach(r=>{r.type==="childList"&&(r.addedNodes.forEach(i=>{if(F(i)){const c=t.head.appendChild(i.cloneNode(!0));if(s.set(i,c),i instanceof HTMLStyleElement&&i.dataset.emotion){const{sheet:u}=i,{sheet:d}=c;if(u&&d)for(const f of u.cssRules)d.insertRule(f.cssText)}}}),r.removedNodes.forEach(i=>{const c=s.get(i);c&&t.head.removeChild(c)}))})});return n.observe(e.head,{childList:!0}),()=>{n.disconnect()}}function Ve(e,t){for(const n of e.attributes)t.setAttribute(n.name,n.value);const s=new MutationObserver(n=>{n.forEach(o=>{if(o.type==="attributes"&&o.attributeName!=null){const r=e.getAttribute(o.attributeName);r==null?t.removeAttribute(o.attributeName):t.setAttribute(o.attributeName,r)}})});return s.observe(e,{attributes:!0}),()=>{s.disconnect()}}function Tt(){const[e,t]=p.useState(null),{value:s}=$("3653083604");return p.useEffect(()=>{if(!s||L||typeof window>"u")return;const n=window.open("about:blank","_blank",`${V}=${X.COMPANION}`);if(!n)throw new Error("ChatBar: window.open() did not create a window");L=!0,$e(document,n.document),Ve(document.documentElement,n.document.documentElement),t(n.document.body.appendChild(n.document.createElement("div"))),n.addEventListener("unload",o=>{n.close()})},[s]),e&&e.ownerDocument.defaultView&&G.createPortal(l.jsx(z,{window:e.ownerDocument.defaultView,children:l.jsx(He,{})}),e,Q)}export{Tt as DesktopChatBar,Rt as initDesktop};
//# sourceMappingURL=f9pkddxuab0fnacl.js.map
