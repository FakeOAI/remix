const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/o5065y18g8vf0h13.js","assets/cbv020t7gzp4f872.js","assets/kq3cjnjkkiu42wsi.js","assets/root-bcm2adyk.css","assets/gpe91l6ql3o0s610.js","assets/conversation-small-eplmind9.css","assets/j1mltnb4g3et1nfv.js","assets/lw9lle2awfx0m3zh.js","assets/fte4amidzwa0x0i9.js","assets/hryykjcwq4fvumfr.js","assets/hewlejwoarda2nb0.js","assets/6belyjcnc0rvmzmg.js","assets/h627sded8tilmz3i.js","assets/nm04jgpfyxi6pn12.js","assets/jcecw02o1g7i3lgl.js","assets/m9c7p1d7qbcooudb.js","assets/nriec8vah7hgye40.js","assets/n1m1f2dq4jbayfm0.js","assets/eprwd5wd9a7hvvfw.js","assets/hte00x4vz53jf7hc.js","assets/c039xathbpqv7hjp.js","assets/4kmoegar8udth7vh.js","assets/le0igyxp535xhyki.js","assets/ihhnf33zws1gyw0j.js","assets/ivzgi1rmd3frkuuq.js"])))=>i.map(i=>d[i]);
var Ec=Object.defineProperty;var Vs=e=>{throw TypeError(e)};var Tc=(e,t,n)=>t in e?Ec(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fe=(e,t,n)=>Tc(e,typeof t!="symbol"?t+"":t,n),Ic=(e,t,n)=>t.has(e)||Vs("Cannot "+n);var Ys=(e,t,n)=>t.has(e)?Vs("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n);var Bo=(e,t,n)=>(Ic(e,t,"access private method"),n);import{m as E,a5 as Tt,r as d,D as so,q as Ot,a1 as cs,g as ci,gi as Fc,O as St,aE as Hl,P as Gn,a as Zn,Z as Dc,aG as Ac,a$ as Ll,a7 as zc,aN as Hc,cb as Lc,eV as Pc,bo as $c,eE as _c,eF as Nc}from"./cbv020t7gzp4f872.js";import{c6 as us,c7 as Oc,c8 as Bc,C as Wc,G as jc,a9 as Xc,p as Vc,o as Yc,c9 as Pl,bS as $l,ca as Uc,cb as Kc,cc as qc}from"./kq3cjnjkkiu42wsi.js";import{G as _l,mg as Gc,mh as Zc,aE as Qc,mi as Jc,H as eu,mj as tu,mk as nu,ml as ru,mm as ou,mn as iu,mo as su,mp as lu,mq as au,mr as cu,ms as uu,mt as du,mu as fu,mv as hu,eo as gu,mw as mu,df as pu,mx as yu,e6 as wu,my as bu,mz as xu,mA as vu,mB as Us,mC as ku,mD as Cu,mE as Su,mF as Mu,mG as Ru,mH as Eu,mI as Tu,mJ as Iu,mK as Fu,mL as Du,mM as Au,mN as zu,d as Nl,mO as Hu,be as Lu,mP as Pu,mQ as $u,_ as _u,hW as yn,bz as Nu,fq as Ou,mR as Bu,mS as Wu,mT as ju,aQ as Xu,aO as Ol,bk as ui,em as Vu,T as lo,f_ as Bl,bj as Ks}from"./gpe91l6ql3o0s610.js";import{m as Jo}from"./j1mltnb4g3et1nfv.js";import{b as Yu}from"./lw9lle2awfx0m3zh.js";import{S as Dr}from"./fte4amidzwa0x0i9.js";import{c as Wl}from"./hryykjcwq4fvumfr.js";import{e as Uu,d as Ku,f as qu,m as wo,t as Gu,r as Ct,g as Zu,h as Qu,v as Ju,i as jl,j as ao,A as Xl,P as Vl,B as Yl,k as ed,l as td,n as nd,S as rd,C as od,a as id,L as sd,p as ld,b as ad,c as cd,o as ud,q as dd,T as fd}from"./hewlejwoarda2nb0.js";import{i as Oi}from"./6belyjcnc0rvmzmg.js";import{j as hd}from"./h627sded8tilmz3i.js";import{D as Qn}from"./jcecw02o1g7i3lgl.js";import{a2 as gd,a3 as md,a4 as pd,a5 as yd,a6 as wd}from"./m9c7p1d7qbcooudb.js";const bd=({isHovered:e=!1})=>E.jsx(_l,{children:e&&E.jsxs(Jo.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.2},className:"absolute bottom-2 right-2 flex items-center justify-center rounded-md border border-token-border-light bg-token-main-surface-primary px-3 py-2 text-xs text-token-text-secondary",children:[E.jsx(us,{className:"icon-md mr-2"}),E.jsx(Tt,{id:"ILz2tL",defaultMessage:"Interactive charts of this type not yet supported"})]})});function xd(e){const t=d.useRef(!1);return()=>{t.current||(e(),t.current=!0)}}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const vd={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Uu._date.override({_id:"date-fns",formats:function(){return vd},parse:function(e,t){if(e===null||typeof e>"u")return null;const n=typeof e;return n==="number"||e instanceof Date?e=Gc(e):n==="string"&&(typeof t=="string"?e=Zc(e,t,new Date,this.options):e=Qc(e,this.options)),Jc(e)?e.getTime():null},format:function(e,t){return eu(e,t,this.options)},add:function(e,t,n){switch(n){case"millisecond":return cu(e,t);case"second":return au(e,t);case"minute":return lu(e,t);case"hour":return su(e,t);case"day":return iu(e,t);case"week":return ou(e,t);case"month":return ru(e,t);case"quarter":return nu(e,t);case"year":return tu(e,t);default:return e}},diff:function(e,t,n){switch(n){case"millisecond":return wu(e,t);case"second":return yu(e,t);case"minute":return pu(e,t);case"hour":return mu(e,t);case"day":return gu(e,t);case"week":return hu(e,t);case"month":return fu(e,t);case"quarter":return du(e,t);case"year":return uu(e,t);default:return 0}},startOf:function(e,t,n){switch(t){case"second":return Mu(e);case"minute":return Su(e);case"hour":return Cu(e);case"day":return ku(e);case"week":return Us(e);case"isoWeek":return Us(e,{weekStartsOn:+n});case"month":return vu(e);case"quarter":return xu(e);case"year":return bu(e);default:return e}},endOf:function(e,t){switch(t){case"second":return zu(e);case"minute":return Au(e);case"hour":return Du(e);case"day":return Fu(e);case"week":return Iu(e);case"month":return Tu(e);case"quarter":return Eu(e);case"year":return Ru(e);default:return e}}});const kd=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/,ds=e=>e.length===0?!1:e.reduce((t,n)=>t&&kd.test(n),!0),Ul=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>n.map(o=>{const{data:i,label:s,colors:l}=o;return{label:s,data:i,backgroundColor:l,borderColor:l,borderRadius:4}}),[n]);return E.jsx(Ku,{ref:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1,text:e.title},tooltip:{enabled:!0,animation:{duration:0},mode:"point",position:"nearest",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:6,left:16,right:16},yAlign:"bottom",callbacks:{title:function(o){return o[0].formattedValue},label:()=>""}}},scales:{x:{title:{display:!1},grid:{display:!1},time:{unit:"day",displayFormats:{day:"yyyy-MM-dd"},tooltipFormat:"yyyy-MM-dd"},ticks:{display:!0,autoSkip:!1},...ds(e.labels)?{type:"time"}:{}},y:{title:{display:!1},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}}},data:{labels:e.labels,datasets:r}})});Ul.displayName="BarChart";const Kl=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=n.length;return n.map(i=>{const{data:s,label:l,colors:a}=i,c=s.length;return{label:l,data:s,backgroundColor:a,borderColor:a,pointRadius:0,pointHoverRadius:5,pointHitRadius:10,tension:.2,borderWidth:Cd(o,c),pointBackgroundColor:["rgba(255, 255, 255, 1)"],pointBorderWidth:3,pointHoverBorderWidth:3}})},[n]);return E.jsx(qu,{ref:t,options:{maintainAspectRatio:!1,scales:{x:{title:{display:!1,text:e.x_label},time:{unit:"day",displayFormats:{day:"yyyy-MM-dd"},tooltipFormat:"yyyy-MM-dd"},grid:{display:!1},ticks:{display:!0},...ds(e.labels)?{type:"time"}:{}},y:{title:{display:!1,text:e.y_label},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}},plugins:{legend:{display:!1},title:{display:!1,text:e.title},tooltip:{enabled:!0,mode:"point",animation:{duration:0},position:"nearest",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:function(o){return o[0].label},label:function(o){const{dataset:{label:i},parsed:{y:s}}=o;return`${i?`${i}: `:""}${s.toFixed(2)}`}}}}},data:{labels:e.labels,datasets:r}})}),Cd=(e,t)=>t>15?1:e>10?e>50?.5:1:3;Kl.displayName="LineChart";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var qs=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),co={toTextLines:function(e){var t=[],n;for(e=[].concat(e);e.length;)n=e.pop(),typeof n=="string"?t.unshift.apply(t,n.split(`
`)):Array.isArray(n)?e.push.apply(e,n):ao(e)||t.unshift(""+n);return t},textSize:function(e,t,n){var r=[].concat(t),o=r.length,i=e.font,s=0,l;for(e.font=n.string,l=0;l<o;++l)s=Math.max(e.measureText(r[l]).width,s);return e.font=i,{height:o*n.lineHeight,width:s}},bound:function(e,t,n){return Math.max(e,Math.min(t,n))},arrayDiff:function(e,t){var n=e.slice(),r=[],o,i,s,l;for(o=0,s=t.length;o<s;++o)l=t[o],i=n.indexOf(l),i===-1?r.push([l,1]):n.splice(i,1);for(o=0,s=n.length;o<s;++o)r.push([n[o],-1]);return r},rasterize:function(e){return Math.round(e*qs)/qs}};function Bi(e,t){var n=t.x,r=t.y;if(n===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var o=e.x-n,i=e.y-r,s=Math.sqrt(o*o+i*i);return{x:s?o/s:0,y:s?i/s:-1}}function Sd(e,t,n,r,o){switch(o){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:o*=Math.PI/180,n=Math.cos(o),r=Math.sin(o);break}return{x:e,y:t,vx:n,vy:r}}var Md=0,ql=1,Gl=2,Zl=4,Ql=8;function Wo(e,t,n){var r=Md;return e<n.left?r|=ql:e>n.right&&(r|=Gl),t<n.top?r|=Ql:t>n.bottom&&(r|=Zl),r}function Rd(e,t){for(var n=e.x0,r=e.y0,o=e.x1,i=e.y1,s=Wo(n,r,t),l=Wo(o,i,t),a,c,u;!(!(s|l)||s&l);)a=s||l,a&Ql?(c=n+(o-n)*(t.top-r)/(i-r),u=t.top):a&Zl?(c=n+(o-n)*(t.bottom-r)/(i-r),u=t.bottom):a&Gl?(u=r+(i-r)*(t.right-n)/(o-n),c=t.right):a&ql&&(u=r+(i-r)*(t.left-n)/(o-n),c=t.left),a===s?(n=c,r=u,s=Wo(n,r,t)):(o=c,i=u,l=Wo(o,i,t));return{x0:n,x1:o,y0:r,y1:i}}function jo(e,t){var n=t.anchor,r=e,o,i;return t.clamp&&(r=Rd(r,t.area)),n==="start"?(o=r.x0,i=r.y0):n==="end"?(o=r.x1,i=r.y1):(o=(r.x0+r.x1)/2,i=(r.y0+r.y1)/2),Sd(o,i,e.vx,e.vy,t.align)}var Xo={arc:function(e,t){var n=(e.startAngle+e.endAngle)/2,r=Math.cos(n),o=Math.sin(n),i=e.innerRadius,s=e.outerRadius;return jo({x0:e.x+r*i,y0:e.y+o*i,x1:e.x+r*s,y1:e.y+o*s,vx:r,vy:o},t)},point:function(e,t){var n=Bi(e,t.origin),r=n.x*e.options.radius,o=n.y*e.options.radius;return jo({x0:e.x-r,y0:e.y-o,x1:e.x+r,y1:e.y+o,vx:n.x,vy:n.y},t)},bar:function(e,t){var n=Bi(e,t.origin),r=e.x,o=e.y,i=0,s=0;return e.horizontal?(r=Math.min(e.x,e.base),i=Math.abs(e.base-e.x)):(o=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),jo({x0:r,y0:o+s,x1:r+i,y1:o,vx:n.x,vy:n.y},t)},fallback:function(e,t){var n=Bi(e,t.origin);return jo({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:n.x,vy:n.y},t)}},Pn=co.rasterize;function Ed(e){var t=e.borderWidth||0,n=e.padding,r=e.size.height,o=e.size.width,i=-o/2,s=-r/2;return{frame:{x:i-n.left-t,y:s-n.top-t,w:o+n.width+t*2,h:r+n.height+t*2},text:{x:i,y:s,w:o,h:r}}}function Td(e,t){var n=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function Id(e){return e instanceof Xl?Xo.arc:e instanceof Vl?Xo.point:e instanceof Yl?Xo.bar:Xo.fallback}function Fd(e,t,n,r,o,i){var s=Math.PI/2;if(i){var l=Math.min(i,o/2,r/2),a=t+l,c=n+l,u=t+r-l,h=n+o-l;e.moveTo(t,c),a<u&&c<h?(e.arc(a,c,l,-Math.PI,-s),e.arc(u,c,l,-s,0),e.arc(u,h,l,0,s),e.arc(a,h,l,s,Math.PI)):a<u?(e.moveTo(a,n),e.arc(u,c,l,-s,s),e.arc(a,c,l,s,Math.PI+s)):c<h?(e.arc(a,c,l,-Math.PI,0),e.arc(a,h,l,0,Math.PI)):e.arc(a,c,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,o)}function Dd(e,t,n){var r=n.backgroundColor,o=n.borderColor,i=n.borderWidth;!r&&(!o||!i)||(e.beginPath(),Fd(e,Pn(t.x)+i/2,Pn(t.y)+i/2,Pn(t.w)-i,Pn(t.h)-i,n.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),o&&i&&(e.strokeStyle=o,e.lineWidth=i,e.lineJoin="miter",e.stroke()))}function Ad(e,t,n){var r=n.lineHeight,o=e.w,i=e.x,s=e.y+r/2;return t==="center"?i+=o/2:(t==="end"||t==="right")&&(i+=o),{h:r,w:o,x:i,y:s}}function zd(e,t,n){var r=e.shadowBlur,o=n.stroked,i=Pn(n.x),s=Pn(n.y),l=Pn(n.w);o&&e.strokeText(t,i,s,l),n.filled&&(r&&o&&(e.shadowBlur=0),e.fillText(t,i,s,l),r&&o&&(e.shadowBlur=r))}function Hd(e,t,n,r){var o=r.textAlign,i=r.color,s=!!i,l=r.font,a=t.length,c=r.textStrokeColor,u=r.textStrokeWidth,h=c&&u,m;if(!(!a||!s&&!h))for(n=Ad(n,o,l),e.font=l.string,e.textAlign=o,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,s&&(e.fillStyle=i),h&&(e.lineJoin="round",e.lineWidth=u,e.strokeStyle=c),m=0,a=t.length;m<a;++m)zd(e,t[m],{stroked:h,filled:s,w:n.w,x:n.x,y:n.y+n.h*m})}var Jl=function(e,t,n,r){var o=this;o._config=e,o._index=r,o._model=null,o._rects=null,o._ctx=t,o._el=n};wo(Jl.prototype,{_modelize:function(e,t,n,r){var o=this,i=o._index,s=Gu(Ct([n.font,{}],r,i)),l=Ct([n.color,Zu.color],r,i);return{align:Ct([n.align,"center"],r,i),anchor:Ct([n.anchor,"center"],r,i),area:r.chart.chartArea,backgroundColor:Ct([n.backgroundColor,null],r,i),borderColor:Ct([n.borderColor,null],r,i),borderRadius:Ct([n.borderRadius,0],r,i),borderWidth:Ct([n.borderWidth,0],r,i),clamp:Ct([n.clamp,!1],r,i),clip:Ct([n.clip,!1],r,i),color:l,display:e,font:s,lines:t,offset:Ct([n.offset,4],r,i),opacity:Ct([n.opacity,1],r,i),origin:Td(o._el,r),padding:Qu(Ct([n.padding,4],r,i)),positioner:Id(o._el),rotation:Ct([n.rotation,0],r,i)*(Math.PI/180),size:co.textSize(o._ctx,t,s),textAlign:Ct([n.textAlign,"start"],r,i),textShadowBlur:Ct([n.textShadowBlur,0],r,i),textShadowColor:Ct([n.textShadowColor,l],r,i),textStrokeColor:Ct([n.textStrokeColor,l],r,i),textStrokeWidth:Ct([n.textStrokeWidth,0],r,i)}},update:function(e){var t=this,n=null,r=null,o=t._index,i=t._config,s,l,a,c=Ct([i.display,!0],e,o);c&&(s=e.dataset.data[o],l=Ju(jl(i.formatter,[s,e]),s),a=ao(l)?[]:co.toTextLines(l),a.length&&(n=t._modelize(c,a,i,e),r=Ed(n))),t._model=n,t._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n=this,r=e.ctx,o=n._model,i=n._rects,s;this.visible()&&(r.save(),o.clip&&(s=o.area,r.beginPath(),r.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),r.clip()),r.globalAlpha=co.bound(0,o.opacity,1),r.translate(Pn(t.x),Pn(t.y)),r.rotate(o.rotation),Dd(r,i.frame,o),Hd(r,o.lines,i.text,o),r.restore())}});var Ld=Number.MIN_SAFE_INTEGER||-9007199254740991,Pd=Number.MAX_SAFE_INTEGER||9007199254740991;function eo(e,t,n){var r=Math.cos(n),o=Math.sin(n),i=t.x,s=t.y;return{x:i+r*(e.x-i)-o*(e.y-s),y:s+o*(e.x-i)+r*(e.y-s)}}function Gs(e,t){var n=Pd,r=Ld,o=t.origin,i,s,l,a,c;for(i=0;i<e.length;++i)s=e[i],l=s.x-o.x,a=s.y-o.y,c=t.vx*l+t.vy*a,n=Math.min(n,c),r=Math.max(r,c);return{min:n,max:r}}function Vo(e,t){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return{vx:(t.x-e.x)/o,vy:(t.y-e.y)/o,origin:e,ln:o}}var ea=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};wo(ea.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,n=1,r=t._rect;return e=eo(e,t.center(),-t._rotation),!(e.x<r.x-n||e.y<r.y-n||e.x>r.x+r.w+n*2||e.y>r.y+r.h+n*2)},intersects:function(e){var t=this._points(),n=e._points(),r=[Vo(t[0],t[1]),Vo(t[0],t[3])],o,i,s;for(this._rotation!==e._rotation&&r.push(Vo(n[0],n[1]),Vo(n[0],n[3])),o=0;o<r.length;++o)if(i=Gs(t,r[o]),s=Gs(n,r[o]),i.max<s.min||s.max<i.min)return!1;return!0},_points:function(){var e=this,t=e._rect,n=e._rotation,r=e.center();return[eo({x:t.x,y:t.y},r,n),eo({x:t.x+t.w,y:t.y},r,n),eo({x:t.x+t.w,y:t.y+t.h},r,n),eo({x:t.x,y:t.y+t.h},r,n)]}});function ta(e,t,n){var r=t.positioner(e,t),o=r.vx,i=r.vy;if(!o&&!i)return{x:r.x,y:r.y};var s=n.w,l=n.h,a=t.rotation,c=Math.abs(s/2*Math.cos(a))+Math.abs(l/2*Math.sin(a)),u=Math.abs(s/2*Math.sin(a))+Math.abs(l/2*Math.cos(a)),h=1/Math.max(Math.abs(o),Math.abs(i));return c*=o*h,u*=i*h,c+=t.offset*o,u+=t.offset*i,{x:r.x+c,y:r.y+u}}function $d(e,t){var n,r,o,i;for(n=e.length-1;n>=0;--n)for(o=e[n].$layout,r=n-1;r>=0&&o._visible;--r)i=e[r].$layout,i._visible&&o._box.intersects(i._box)&&t(o,i);return e}function _d(e){var t,n,r,o,i,s,l;for(t=0,n=e.length;t<n;++t)r=e[t],o=r.$layout,o._visible&&(l=new Proxy(r._el,{get:(a,c)=>a.getProps([c],!0)[c]}),i=r.geometry(),s=ta(l,r.model(),i),o._box.update(s,i,r.rotation()));return $d(e,function(a,c){var u=a._hidable,h=c._hidable;u&&h||h?c._visible=!1:u&&(a._visible=!1)})}var uo={prepare:function(e){var t=[],n,r,o,i,s;for(n=0,o=e.length;n<o;++n)for(r=0,i=e[n].length;r<i;++r)s=e[n][r],t.push(s),s.$layout={_box:new ea,_hidable:!1,_visible:!0,_set:n,_idx:s._index};return t.sort(function(l,a){var c=l.$layout,u=a.$layout;return c._idx===u._idx?u._set-c._set:u._idx-c._idx}),this.update(t),t},update:function(e){var t=!1,n,r,o,i,s;for(n=0,r=e.length;n<r;++n)o=e[n],i=o.model(),s=o.$layout,s._hidable=i&&i.display==="auto",s._visible=o.visible(),t|=s._hidable;t&&_d(e)},lookup:function(e,t){var n,r;for(n=e.length-1;n>=0;--n)if(r=e[n].$layout,r&&r._visible&&r._box.contains(t))return e[n];return null},draw:function(e,t){var n,r,o,i,s,l;for(n=0,r=t.length;n<r;++n)o=t[n],i=o.$layout,i._visible&&(s=o.geometry(),l=ta(o._el,o.model(),s),i._box.update(l,s,o.rotation()),o.draw(e,l))}},Nd=function(e){if(ao(e))return null;var t=e,n,r,o;if(td(e))if(!ao(e.label))t=e.label;else if(!ao(e.r))t=e.r;else for(t="",n=Object.keys(e),o=0,r=n.length;o<r;++o)t+=(o!==0?", ":"")+n[o]+": "+e[n[o]];return""+t},Od={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Nd,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},Gt="$datalabels",na="$default";function Bd(e,t){var n=e.datalabels,r={},o=[],i,s;return n===!1?null:(n===!0&&(n={}),t=wo({},[t,n]),i=t.labels||{},s=Object.keys(i),delete t.labels,s.length?s.forEach(function(l){i[l]&&o.push(wo({},[t,i[l],{_key:l}]))}):o.push(t),r=o.reduce(function(l,a){return ed(a.listeners||{},function(c,u){l[u]=l[u]||{},l[u][a._key||na]=c}),delete a.listeners,l},{}),{labels:o,listeners:r})}function Qi(e,t,n,r){if(t){var o=n.$context,i=n.$groups,s;t[i._set]&&(s=t[i._set][i._key],s&&jl(s,[o,r])===!0&&(e[Gt]._dirty=!0,n.update(o)))}}function Wd(e,t,n,r,o){var i,s;!n&&!r||(n?r?n!==r&&(s=i=!0):s=!0:i=!0,s&&Qi(e,t.leave,n,o),i&&Qi(e,t.enter,r,o))}function jd(e,t){var n=e[Gt],r=n._listeners,o,i;if(!(!r.enter&&!r.leave)){if(t.type==="mousemove")i=uo.lookup(n._labels,t);else if(t.type!=="mouseout")return;o=n._hovered,n._hovered=i,Wd(e,r,o,i,t)}}function Xd(e,t){var n=e[Gt],r=n._listeners.click,o=r&&uo.lookup(n._labels,t);o&&Qi(e,r,o,t)}var Vd={id:"datalabels",defaults:Od,beforeInit:function(e){e[Gt]={_actives:[]}},beforeUpdate:function(e){var t=e[Gt];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var r=t.index,o=e[Gt],i=o._datasets[r]=[],s=e.isDatasetVisible(r),l=e.data.datasets[r],a=Bd(l,n),c=t.meta.data||[],u=e.ctx,h,m,p,g,y,w,k,b;for(u.save(),h=0,p=c.length;h<p;++h)if(k=c[h],k[Gt]=[],s&&k&&e.getDataVisibility(h)&&!k.skip)for(m=0,g=a.labels.length;m<g;++m)y=a.labels[m],w=y._key,b=new Jl(y,u,k,h),b.$groups={_set:r,_key:w||na},b.$context={active:!1,chart:e,dataIndex:h,dataset:l,datasetIndex:r},b.update(b.$context),k[Gt].push(b),i.push(b);u.restore(),wo(o._listeners,a.listeners,{merger:function(R,M,x){M[R]=M[R]||{},M[R][t.index]=x[R],o._listened=!0}})},afterUpdate:function(e){e[Gt]._labels=uo.prepare(e[Gt]._datasets)},afterDatasetsDraw:function(e){uo.draw(e,e[Gt]._labels)},beforeEvent:function(e,t){if(e[Gt]._listened){var n=t.event;switch(n.type){case"mousemove":case"mouseout":jd(e,n);break;case"click":Xd(e,n);break}}},afterEvent:function(e){var t=e[Gt],n=t._actives,r=t._actives=e.getActiveElements(),o=co.arrayDiff(n,r),i,s,l,a,c,u,h;for(i=0,s=o.length;i<s;++i)if(c=o[i],c[1])for(h=c[0].element[Gt]||[],l=0,a=h.length;l<a;++l)u=h[l],u.$context.active=c[1]===1,u.update(u.$context);(t._dirty||o.length)&&(uo.update(t._labels),e.render()),delete t._dirty}};const ra=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=getComputedStyle(document.documentElement);return n.map(i=>{const{data:s,colors:l,label:a}=i;return{label:a,data:s,backgroundColor:l,borderWidth:2,borderColor:[o.getPropertyValue("--main-surface-primary").trim()]}})},[n]);return E.jsx("div",{className:"h-full w-full py-2",children:E.jsx(nd,{ref:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!0,animation:{duration:0},mode:"index",position:"average",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:o=>o[0].formattedValue,label:function(o){const i=e.labels[o.dataIndex],s=n[0],l=s.data[o.dataIndex],a=s.data.reduce((u,h)=>Number(u)+Number(h),0),c=parseFloat((l/Number(a)*100).toFixed(2));return`${i} · ${c}%`}}},datalabels:{color:"white",textAlign:"center",font:{weight:"bold",size:16},backgroundColor:function(o){const i=o.dataset.data[o.dataIndex],s=o.dataset.data.reduce((a,c)=>Number(a)+Number(c),0);return i/Number(s)*100>=15?"rgba(0, 0, 0, 0.1)":"transparent"},borderRadius:15,padding:{top:6,bottom:6,left:8,right:8},formatter:(o,i)=>{const s=i.dataset.data.reduce((a,c)=>Number(a)+Number(c),0);return o/Number(s)*100>=15?o.toFixed(2):""}}}},plugins:[Vd],data:{labels:e.labels,datasets:r}})})});ra.displayName="PieChart";const oa=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=n.reduce((i,s)=>i+s.data.length,0);return n.map(i=>{const{data:s,label:l,colors:a}=i;return{label:l,data:s,backgroundColor:a,borderColor:a,pointRadius:o>50?o>200?2:4:8,pointHoverRadius:o>50?4:8}})},[n]);return E.jsx(rd,{ref:t,options:{maintainAspectRatio:!1,scales:{x:{title:{display:!1},time:{unit:"day",displayFormats:{day:"yyyy-MM-dd"},tooltipFormat:"yyyy-MM-dd"},grid:{display:!1},ticks:{display:!0},...ds(e.labels)?{type:"time"}:{}},y:{title:{display:!1},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}},elements:{point:{radius:0}},plugins:{legend:{display:!1},title:{display:!1,text:e.title},tooltip:{enabled:!0,mode:"point",position:"nearest",animation:{duration:0},backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:function(){return""},label:function(o){return`${o.dataset.label?`${o.dataset.label}: `:""} X=${o.parsed.x.toFixed(2)}, Y=${o.parsed.y.toFixed(2)} 
`}}}}},data:{labels:e.labels,datasets:r}})});oa.displayName="ScatterChart";od.register(Xl,id,sd,Yl,ld,ad,cd,ud,Vl,dd,fd);const ia=16,Zs={bar:Ul,pie:ra,line:Kl,scatter:oa};function Qs({item:e,formattedName:t}){return E.jsxs("div",{className:"inline-flex items-center gap-1",children:[E.jsx("div",{className:"h-3 w-3 rounded-sm",style:{backgroundColor:e.color}}),t]})}function Yd({items:e,hideAxisLabels:t=!1,xLabel:n="",yLabel:r=""}){const o=cs();function i(s,l){const a=l.indexOf(s);return a<l.length-2?`${s.name}, `:a===l.length-2?`${s.name}${l.length>2?", ":" "} ${o.formatMessage({id:"Gt7UQw",defaultMessage:"and"})}`:s.name}return E.jsxs("div",{className:"flex w-full flex-wrap items-center gap-1 px-4 text-xs text-token-text-primary",children:[!t&&E.jsx(Tt,{id:"Wn04Wd",defaultMessage:"{yLabel} by {xLabel}",values:{xLabel:E.jsxs("div",{className:"inline-flex items-center gap-0.5",children:[E.jsx(Oc,{className:"icon-sm text-token-text-secondary"}),n]}),yLabel:E.jsxs("div",{className:"inline-flex items-center gap-0.5",children:[E.jsx(Bc,{className:"icon-sm text-token-text-secondary"}),r]})}}),e.length>1&&e.length<ia&&(t?E.jsx(Tt,{id:"WKJKdH",defaultMessage:"For {legendItems}",values:{legendItems:e.map((s,l)=>E.jsx(Qs,{item:s,formattedName:i(s,e)},l))}}):E.jsx(Tt,{id:"Isulib",defaultMessage:"for {legendItems}",values:{legendItems:e.map((s,l)=>E.jsx(Qs,{item:s,formattedName:i(s,e)},l))}}))]})}const sa=d.forwardRef(({chart:e},t)=>{const n=d.useRef(null);d.useImperativeHandle(t,()=>({getBase64Image:()=>{if(!n.current){so.addError("Chart instance is not yet available.");return}return n.current.toBase64Image()}}));const r=d.useCallback(()=>{if(e.chart_type==="pie"){const i=e.datasets[0].colors;if(i&&Array.isArray(i))return e.labels.map((s,l)=>({name:s,color:i[l]??""}))}else return e.datasets.map(i=>({name:i.label,color:Array.isArray(i.colors)?i.colors[0]:i.colors}));return[]},[e]);if(!(e.chart_type in Zs))return E.jsx(Tt,{id:"Chart.invalidChartType",defaultMessage:"Invalid chart type"});const o=Zs[e.chart_type];return E.jsxs("div",{className:"flex h-full w-full flex-col items-center",children:[E.jsx("div",{className:"w-full flex-initial",style:{flexBasis:"28px"},children:E.jsx(Yd,{xLabel:e.x_label,yLabel:e.y_label,items:r(),hideAxisLabels:e.chart_type==="pie"})}),E.jsx("div",{className:Ot("flex w-full flex-grow items-center justify-center px-4 pb-3"),style:{minHeight:"0"},children:E.jsx(o,{chart:e,ref:n})})]})});sa.displayName="Chart";function la(e="This should not happen"){throw new Error(e)}function rn(e,t="Assertion failed"){if(!e)return la(t)}function bo(e,t){return la(t??"Hell froze over")}function Ud(e,t){try{return e()}catch{return t}}const Js=Object.prototype.hasOwnProperty;function Nr(e,t){let n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Nr(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Js.call(e,n)&&++r&&!Js.call(t,n)||!(n in t)||!Nr(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}var Kd=Object.prototype,qd=Kd.hasOwnProperty;function Gd(e,t){return e!=null&&qd.call(e,t)}var Zd=Gd,Qd=Zd,Jd=Fc;function ef(e,t){return e!=null&&Jd(e,t,Qd)}var tf=ef;const nf=ci(tf),ei=null,fs=void 0;var re;(function(e){e.Uri="uri",e.Text="text",e.Image="image",e.RowID="row-id",e.Number="number",e.Bubble="bubble",e.Boolean="boolean",e.Loading="loading",e.Markdown="markdown",e.Drilldown="drilldown",e.Protected="protected",e.Custom="custom"})(re||(re={}));var el;(function(e){e.HeaderRowID="headerRowID",e.HeaderCode="headerCode",e.HeaderNumber="headerNumber",e.HeaderString="headerString",e.HeaderBoolean="headerBoolean",e.HeaderAudioUri="headerAudioUri",e.HeaderVideoUri="headerVideoUri",e.HeaderEmoji="headerEmoji",e.HeaderImage="headerImage",e.HeaderUri="headerUri",e.HeaderPhone="headerPhone",e.HeaderMarkdown="headerMarkdown",e.HeaderDate="headerDate",e.HeaderTime="headerTime",e.HeaderEmail="headerEmail",e.HeaderReference="headerReference",e.HeaderIfThenElse="headerIfThenElse",e.HeaderSingleValue="headerSingleValue",e.HeaderLookup="headerLookup",e.HeaderTextTemplate="headerTextTemplate",e.HeaderMath="headerMath",e.HeaderRollup="headerRollup",e.HeaderJoinStrings="headerJoinStrings",e.HeaderSplitString="headerSplitString",e.HeaderGeoDistance="headerGeoDistance",e.HeaderArray="headerArray",e.RowOwnerOverlay="rowOwnerOverlay",e.ProtectedColumnOverlay="protectedColumnOverlay"})(el||(el={}));var ti;(function(e){e.Triangle="triangle",e.Dots="dots"})(ti||(ti={}));const di="___gdg_header_cell_",aa=di+"checked",ca=di+"unchecked",rf=di+"indeterminate";function Yo(e){return"width"in e&&typeof e.width=="number"}async function tl(e){return typeof e=="object"?e:await e()}function Hr(e){return!(e.kind===re.Loading||e.kind===re.Bubble||e.kind===re.RowID||e.kind===re.Protected||e.kind===re.Drilldown)}function Pr(e){return e.kind===cn.Marker||e.kind===cn.NewRow}function io(e){if(!Hr(e)||e.kind===re.Image)return!1;if(e.kind===re.Text||e.kind===re.Number||e.kind===re.Markdown||e.kind===re.Uri||e.kind===re.Custom||e.kind===re.Boolean)return e.readonly!==!0;bo(e,"A cell was passed with an invalid kind")}function of(e){return nf(e,"editor")}function Ji(e){return!(e.readonly??!1)}var cn;(function(e){e.NewRow="new-row",e.Marker="marker"})(cn||(cn={}));function sf(e){if(e.length===0)return[];const t=[...e],n=[];t.sort(function(r,o){return r[0]-o[0]}),n.push([...t[0]]);for(const r of t.slice(1)){const o=n[n.length-1];o[1]<r[0]?n.push([...r]):o[1]<r[1]&&(o[1]=r[1])}return n}let nl;const Hn=class Hn{constructor(t){fe(this,"items");this.items=t}offset(t){if(t===0)return this;const n=this.items.map(r=>[r[0]+t,r[1]+t]);return new Hn(n)}add(t){const n=typeof t=="number"?[t,t+1]:t,r=sf([...this.items,n]);return new Hn(r)}remove(t){const n=[...this.items],r=typeof t=="number"?t:t[0],o=typeof t=="number"?t+1:t[1];for(const[i,s]of n.entries()){const[l,a]=s;if(l<=o&&r<=a){const c=[];l<r&&c.push([l,r]),o<a&&c.push([o,a]),n.splice(i,1,...c)}}return new Hn(n)}first(){if(this.items.length!==0)return this.items[0][0]}last(){if(this.items.length!==0)return this.items.slice(-1)[0][1]-1}hasIndex(t){for(let n=0;n<this.items.length;n++){const[r,o]=this.items[n];if(t>=r&&t<o)return!0}return!1}hasAll(t){for(let n=t[0];n<t[1];n++)if(!this.hasIndex(n))return!1;return!0}some(t){for(const n of this)if(t(n))return!0;return!1}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(let n=0;n<this.items.length;n++){const r=t.items[n],o=this.items[n];if(r[0]!==o[0]||r[1]!==o[1])return!1}return!0}toArray(){const t=[];for(const[n,r]of this.items)for(let o=n;o<r;o++)t.push(o);return t}get length(){let t=0;for(const[n,r]of this.items)t+=r-n;return t}*[Symbol.iterator](){for(const[t,n]of this.items)for(let r=t;r<n;r++)yield r}};fe(Hn,"empty",()=>nl??(nl=new Hn([]))),fe(Hn,"fromSingleSelection",t=>Hn.empty().add(t));let qe=Hn;var lf=function(){const t=Array.prototype.slice.call(arguments).filter(Boolean),n={},r=[];t.forEach(i=>{(i?i.split(" "):[]).forEach(l=>{if(l.startsWith("atm_")){const[,a]=l.split("_");n[a]=l}else r.push(l)})});const o=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.push(n[i]);return o.push(...r),o.join(" ")},rl=lf,af=e=>e.toUpperCase()===e,cf=e=>t=>e.indexOf(t)===-1,ua=(e,t)=>{const n={};return Object.keys(e).filter(cf(t)).forEach(r=>{n[r]=e[r]}),n};function uf(e,t,n){const r=ua(t,n);if(!e){const o=typeof Oi=="function"?{default:Oi}:Oi;Object.keys(r).forEach(i=>{o.default(i)||delete r[i]})}return r}var df=(e,t)=>{};function ff(e){let t="";return n=>{const r=(i,s)=>{const{as:l=e,class:a=t}=i,c=n.propsAsIs===void 0?!(typeof l=="string"&&l.indexOf("-")===-1&&!af(l[0])):n.propsAsIs,u=uf(c,i,["as","class"]);u.ref=s,u.className=n.atomic?rl(n.class,u.className||a):rl(u.className||a,n.class);const{vars:h}=n;if(h){const m={};for(const y in h){const w=h[y],k=w[0],b=w[1]||"",R=typeof k=="function"?k(i):k;df(R,n.name),m[`--${y}`]=`${R}${b}`}const p=u.style||{},g=Object.keys(p);g.length>0&&g.forEach(y=>{m[y]=p[y]}),u.style=m}return e.__linaria&&e!==l?(u.as=l,St.createElement(e,u)):St.createElement(l,u)},o=St.forwardRef?St.forwardRef(r):i=>{const s=ua(i,["innerRef"]);return r(s,i.innerRef)};return o.displayName=n.name,o.__linaria={className:n.class||t,extends:e},o}}var sn=ff;const hf=sn("div")({name:"ImageOverlayEditorStyle",class:"gdg-i2iowwq",propsAsIs:!1});function Ft(e,t,n,r,o=!1){const i=d.useRef();i.current=t,d.useEffect(()=>{if(n===null||n.addEventListener===void 0)return;const s=n,l=a=>{var c;(c=i.current)==null||c.call(s,a)};return s.addEventListener(e,l,{passive:r,capture:o}),()=>{s.removeEventListener(e,l,{capture:o})}},[e,n,r,o])}function Ar(e,t){return e===void 0?void 0:t}const gf=Math.PI;function ol(e){return e*gf/180}const da=(e,t,n)=>({x1:e-n/2,y1:t-n/2,x2:e+n/2,y2:t+n/2}),fa=(e,t,n,r,o)=>{switch(e){case"left":return Math.floor(t)+r+o/2;case"center":return Math.floor(t+n/2);case"right":return Math.floor(t+n)-r-o/2}},ha=(e,t,n)=>Math.min(e,t-n*2),ga=(e,t,n)=>n.x1<=e&&e<=n.x2&&n.y1<=t&&t<=n.y2,hs=e=>{const t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),d.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},mf=e=>{const t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function pf(e,t,n){const[r,o]=d.useState(e),i=d.useRef(!0);d.useEffect(()=>()=>{i.current=!1},[]);const s=d.useRef(Nl(l=>{i.current&&o(l)},n));return d.useLayoutEffect(()=>{i.current&&s.current(()=>e())},t),r}const yf="֑-߿יִ-﷽ﹰ-ﻼ",wf="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",bf=new RegExp("^[^"+wf+"]*["+yf+"]");function gs(e){return bf.test(e)?"rtl":"not-rtl"}let Uo;function es(){if(typeof document>"u")return 0;if(Uo!==void 0)return Uo;const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.id="testScrollbar",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.append(e),document.body.append(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),t.remove(),Uo=n-r,Uo}const dr=Symbol();function xf(e){const t=d.useRef([dr,e]);t.current[1]!==e&&(t.current[0]=e),t.current[1]=e;const[n,r]=d.useState(e),[,o]=d.useState(),i=d.useCallback(l=>{const a=t.current[0];a!==dr&&(l=typeof l=="function"?l(a):l,l===a)||(a!==dr&&o({}),r(c=>typeof l=="function"?l(a===dr?c:a):l),t.current[0]=dr)},[]),s=d.useCallback(()=>{t.current[0]=dr,o({})},[]);return[t.current[0]===dr?n:t.current[0],i,s]}function ma(e){if(e.length===0)return"";let t=0,n=0;for(const r of e){if(n+=r.length,n>1e4)break;t++}return e.slice(0,t).join(", ")}function vf(e){const t=d.useRef(e);return Nr(e,t.current)||(t.current=e),d.useMemo(()=>t.current,[t.current])}const kf=e=>{const{urls:t,canWrite:n,onEditClick:r,renderImage:o}=e,i=t.filter(l=>l!=="");if(i.length===0)return null;const s=i.length>1;return d.createElement(hf,{"data-testid":"GDG-default-image-overlay-editor"},d.createElement(hd.Carousel,{showArrows:s,showThumbs:!1,swipeable:s,emulateTouch:s,infiniteLoop:s},i.map(l=>{const a=(o==null?void 0:o(l))??d.createElement("img",{draggable:!1,src:l});return d.createElement("div",{className:"gdg-centering-container",key:l},a)})),n&&r&&d.createElement("button",{className:"gdg-edit-icon",onClick:r},d.createElement(hs,null)))};function ms(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let pr=ms();function pa(e){pr=e}const ya=/[&<>"']/,Cf=new RegExp(ya.source,"g"),wa=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Sf=new RegExp(wa.source,"g"),Mf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},il=e=>Mf[e];function tn(e,t){if(t){if(ya.test(e))return e.replace(Cf,il)}else if(wa.test(e))return e.replace(Sf,il);return e}const Rf=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function Ef(e){return e.replace(Rf,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const Tf=/(^|[^\[])\^/g;function ot(e,t){let n=typeof e=="string"?e:e.source;t=t||"";const r={replace:(o,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(Tf,"$1"),n=n.replace(o,s),r},getRegex:()=>new RegExp(n,t)};return r}function sl(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const fo={exec:()=>null};function ll(e,t){const n=e.replace(/\|/g,(i,s,l)=>{let a=!1,c=s;for(;--c>=0&&l[c]==="\\";)a=!a;return a?"|":" |"}),r=n.split(/ \|/);let o=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(/\\\|/g,"|");return r}function Ko(e,t,n){const r=e.length;if(r===0)return"";let o=0;for(;o<r;){const i=e.charAt(r-o-1);if(i===t&&!n)o++;else if(i!==t&&n)o++;else break}return e.slice(0,r-o)}function If(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}function al(e,t,n,r){const o=t.href,i=t.title?tn(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:o,title:i,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:o,title:i,text:tn(s)}}function Ff(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const r=n[1];return t.split(`
`).map(o=>{const i=o.match(/^\s+/);if(i===null)return o;const[s]=i;return s.length>=r.length?o.slice(r.length):o}).join(`
`)}class ni{constructor(t){fe(this,"options");fe(this,"rules");fe(this,"lexer");this.options=t||pr}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Ko(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],o=Ff(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(/#$/.test(r)){const o=Ko(r,"#");(this.options.pedantic||!o||/ $/.test(o))&&(r=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const r=Ko(n[0].replace(/^ *>[ \t]?/gm,""),`
`),o=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(r);return this.lexer.state.top=o,{type:"blockquote",raw:n[0],tokens:i,text:r}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim();const o=r.length>1,i={type:"list",raw:"",ordered:o,start:o?+r.slice(0,-1):"",loose:!1,items:[]};r=o?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=o?r:"[*+-]");const s=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",a="",c=!1;for(;t;){let u=!1;if(!(n=s.exec(t))||this.rules.block.hr.test(t))break;l=n[0],t=t.substring(l.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,k=>" ".repeat(3*k.length)),m=t.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,a=h.trimStart()):(p=n[2].search(/[^ ]/),p=p>4?1:p,a=h.slice(p),p+=n[1].length);let g=!1;if(!h&&/^ *$/.test(m)&&(l+=m+`
`,t=t.substring(m.length+1),u=!0),!u){const k=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),b=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),R=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),M=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;t;){const x=t.split(`
`,1)[0];if(m=x,this.options.pedantic&&(m=m.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),R.test(m)||M.test(m)||k.test(m)||b.test(t))break;if(m.search(/[^ ]/)>=p||!m.trim())a+=`
`+m.slice(p);else{if(g||h.search(/[^ ]/)>=4||R.test(h)||M.test(h)||b.test(h))break;a+=`
`+m}!g&&!m.trim()&&(g=!0),l+=x+`
`,t=t.substring(x.length+1),h=m.slice(p)}}i.loose||(c?i.loose=!0:/\n *\n *$/.test(l)&&(c=!0));let y=null,w;this.options.gfm&&(y=/^\[[ xX]\] /.exec(a),y&&(w=y[0]!=="[ ] ",a=a.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:l,task:!!y,checked:w,loose:!1,text:a,tokens:[]}),i.raw+=l}i.items[i.items.length-1].raw=l.trimEnd(),i.items[i.items.length-1].text=a.trimEnd(),i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){const h=i.items[u].tokens.filter(p=>p.type==="space"),m=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));i.loose=m}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:o,title:i}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const r=ll(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),i=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===o.length){for(const l of o)/^ *-+: *$/.test(l)?s.align.push("right"):/^ *:-+: *$/.test(l)?s.align.push("center"):/^ *:-+ *$/.test(l)?s.align.push("left"):s.align.push(null);for(const l of r)s.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of i)s.rows.push(ll(l,s.header.length).map(a=>({text:a,tokens:this.lexer.inline(a)})));return s}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:tn(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=Ko(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=If(n[2],"()");if(s>-1){const a=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let o=n[2],i="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);s&&(o=s[1],i=s[3])}else i=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(r)?o=o.slice(1):o=o.slice(1,-1)),al(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){const o=(r[2]||r[1]).replace(/\s+/g," "),i=n[o.toLowerCase()];if(!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return al(r,i,r[0],this.lexer)}}emStrong(t,n,r=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(!o||o[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...o[0]].length-1;let l,a,c=s,u=0;const h=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*t.length+s);(o=h.exec(n))!=null;){if(l=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!l)continue;if(a=[...l].length,o[3]||o[4]){c+=a;continue}else if((o[5]||o[6])&&s%3&&!((s+a)%3)){u+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+u);const m=[...o[0]][0].length,p=t.slice(0,s+o.index+m+a);if(Math.min(s,a)%2){const y=p.slice(1,-1);return{type:"em",raw:p,text:y,tokens:this.lexer.inlineTokens(y)}}const g=p.slice(2,-2);return{type:"strong",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(/\n/g," ");const o=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return o&&i&&(r=r.substring(1,r.length-1)),r=tn(r,!0),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let r,o;return n[2]==="@"?(r=tn(n[1]),o="mailto:"+r):(r=tn(n[1]),o=r),{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(t){var r;let n;if(n=this.rules.inline.url.exec(t)){let o,i;if(n[2]==="@")o=tn(n[0]),i="mailto:"+o;else{let s;do s=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(s!==n[0]);o=tn(n[0]),n[1]==="www."?i="http://"+n[0]:i=n[0]}return{type:"link",raw:n[0],text:o,href:i,tokens:[{type:"text",raw:o,text:o}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=tn(n[0]),{type:"text",raw:n[0],text:r}}}}const Df=/^(?: *(?:\n|$))+/,Af=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,zf=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,vo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Hf=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ba=/(?:[*+-]|\d{1,9}[.)])/,xa=ot(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ba).getRegex(),ps=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Lf=/^[^\n]+/,ys=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Pf=ot(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",ys).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),$f=ot(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ba).getRegex(),fi="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ws=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,_f=ot("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ws).replace("tag",fi).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),va=ot(ps).replace("hr",vo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fi).getRegex(),Nf=ot(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",va).getRegex(),bs={blockquote:Nf,code:Af,def:Pf,fences:zf,heading:Hf,hr:vo,html:_f,lheading:xa,list:$f,newline:Df,paragraph:va,table:fo,text:Lf},cl=ot("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",vo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fi).getRegex(),Of={...bs,table:cl,paragraph:ot(ps).replace("hr",vo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",cl).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fi).getRegex()},Bf={...bs,html:ot(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ws).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:fo,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ot(ps).replace("hr",vo).replace("heading",` *#{1,6} *[^
]`).replace("lheading",xa).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ka=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Wf=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ca=/^( {2,}|\\)\n(?!\s*$)/,jf=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ko="\\p{P}$+<=>`^|~",Xf=ot(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ko).getRegex(),Vf=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Yf=ot(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ko).getRegex(),Uf=ot("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ko).getRegex(),Kf=ot("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ko).getRegex(),qf=ot(/\\([punct])/,"gu").replace(/punct/g,ko).getRegex(),Gf=ot(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Zf=ot(ws).replace("(?:-->|$)","-->").getRegex(),Qf=ot("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Zf).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ri=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Jf=ot(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",ri).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Sa=ot(/^!?\[(label)\]\[(ref)\]/).replace("label",ri).replace("ref",ys).getRegex(),Ma=ot(/^!?\[(ref)\](?:\[\])?/).replace("ref",ys).getRegex(),eh=ot("reflink|nolink(?!\\()","g").replace("reflink",Sa).replace("nolink",Ma).getRegex(),xs={_backpedal:fo,anyPunctuation:qf,autolink:Gf,blockSkip:Vf,br:Ca,code:Wf,del:fo,emStrongLDelim:Yf,emStrongRDelimAst:Uf,emStrongRDelimUnd:Kf,escape:ka,link:Jf,nolink:Ma,punctuation:Xf,reflink:Sa,reflinkSearch:eh,tag:Qf,text:jf,url:fo},th={...xs,link:ot(/^!?\[(label)\]\((.*?)\)/).replace("label",ri).getRegex(),reflink:ot(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ri).getRegex()},ts={...xs,escape:ot(ka).replace("])","~|])").getRegex(),url:ot(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},nh={...ts,br:ot(Ca).replace("{2,}","*").getRegex(),text:ot(ts.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},qo={normal:bs,gfm:Of,pedantic:Bf},to={normal:xs,gfm:ts,breaks:nh,pedantic:th};class Rn{constructor(t){fe(this,"tokens");fe(this,"options");fe(this,"state");fe(this,"tokenizer");fe(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||pr,this.options.tokenizer=this.options.tokenizer||new ni,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:qo.normal,inline:to.normal};this.options.pedantic?(n.block=qo.pedantic,n.inline=to.pedantic):this.options.gfm&&(n.block=qo.gfm,this.options.breaks?n.inline=to.breaks:n.inline=to.gfm),this.tokenizer.rules=n}static get rules(){return{block:qo,inline:to}}static lex(t,n){return new Rn(n).lex(t)}static lexInline(t,n){return new Rn(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(l,a,c)=>a+"    ".repeat(c.length));let r,o,i,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const a=t.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},a),typeof c=="number"&&c>=0&&(l=Math.min(l,c))}),l<1/0&&l>=0&&(i=t.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){o=n[n.length-1],s&&o.type==="paragraph"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r),s=i.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(t){const l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r,o,i,s=t,l,a,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,l.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(a||(c=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(t,s,c)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),n.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let m;this.options.extensions.startInline.forEach(p=>{m=p.call({lexer:this},h),typeof m=="number"&&m>=0&&(u=Math.min(u,m))}),u<1/0&&u>=0&&(i=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(i)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),a=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class oi{constructor(t){fe(this,"options");this.options=t||pr}code(t,n,r){var i;const o=(i=(n||"").match(/^\S*/))==null?void 0:i[0];return t=t.replace(/\n$/,"")+`
`,o?'<pre><code class="language-'+tn(o)+'">'+(r?t:tn(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:tn(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,r){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,r){const o=n?"ol":"ul",i=n&&r!==1?' start="'+r+'"':"";return"<"+o+i+`>
`+t+"</"+o+`>
`}listitem(t,n,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,r){const o=sl(t);if(o===null)return r;t=o;let i='<a href="'+t+'"';return n&&(i+=' title="'+n+'"'),i+=">"+r+"</a>",i}image(t,n,r){const o=sl(t);if(o===null)return r;t=o;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=">",i}text(t){return t}}class vs{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,r){return""+r}image(t,n,r){return""+r}br(){return""}}class En{constructor(t){fe(this,"options");fe(this,"renderer");fe(this,"textRenderer");this.options=t||pr,this.options.renderer=this.options.renderer||new oi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new vs}static parse(t,n){return new En(n).parse(t)}static parseInline(t,n){return new En(n).parseInline(t)}parse(t,n=!0){let r="";for(let o=0;o<t.length;o++){const i=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=i,l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){r+=l||"";continue}}switch(i.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const s=i;r+=this.renderer.heading(this.parseInline(s.tokens),s.depth,Ef(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{const s=i;r+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{const s=i;let l="",a="";for(let u=0;u<s.header.length;u++)a+=this.renderer.tablecell(this.parseInline(s.header[u].tokens),{header:!0,align:s.align[u]});l+=this.renderer.tablerow(a);let c="";for(let u=0;u<s.rows.length;u++){const h=s.rows[u];a="";for(let m=0;m<h.length;m++)a+=this.renderer.tablecell(this.parseInline(h[m].tokens),{header:!1,align:s.align[m]});c+=this.renderer.tablerow(a)}r+=this.renderer.table(l,c);continue}case"blockquote":{const s=i,l=this.parse(s.tokens);r+=this.renderer.blockquote(l);continue}case"list":{const s=i,l=s.ordered,a=s.start,c=s.loose;let u="";for(let h=0;h<s.items.length;h++){const m=s.items[h],p=m.checked,g=m.task;let y="";if(m.task){const w=this.renderer.checkbox(!!p);c?m.tokens.length>0&&m.tokens[0].type==="paragraph"?(m.tokens[0].text=w+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&m.tokens[0].tokens[0].type==="text"&&(m.tokens[0].tokens[0].text=w+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:w+" "}):y+=w+" "}y+=this.parse(m.tokens,c),u+=this.renderer.listitem(y,g,!!p)}r+=this.renderer.list(u,l,a);continue}case"html":{const s=i;r+=this.renderer.html(s.text,s.block);continue}case"paragraph":{const s=i;r+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=i,l=s.tokens?this.parseInline(s.tokens):s.text;for(;o+1<t.length&&t[o+1].type==="text";)s=t[++o],l+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);r+=n?this.renderer.paragraph(l):l;continue}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}parseInline(t,n){n=n||this.renderer;let r="";for(let o=0;o<t.length;o++){const i=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=this.options.extensions.renderers[i.type].call({parser:this},i);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=s||"";continue}}switch(i.type){case"escape":{const s=i;r+=n.text(s.text);break}case"html":{const s=i;r+=n.html(s.text);break}case"link":{const s=i;r+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{const s=i;r+=n.image(s.href,s.title,s.text);break}case"strong":{const s=i;r+=n.strong(this.parseInline(s.tokens,n));break}case"em":{const s=i;r+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{const s=i;r+=n.codespan(s.text);break}case"br":{r+=n.br();break}case"del":{const s=i;r+=n.del(this.parseInline(s.tokens,n));break}case"text":{const s=i;r+=n.text(s.text);break}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}}class ho{constructor(t){fe(this,"options");this.options=t||pr}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}fe(ho,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var mr,ns,Ra;class rh{constructor(...t){Ys(this,mr);fe(this,"defaults",ms());fe(this,"options",this.setOptions);fe(this,"parse",Bo(this,mr,ns).call(this,Rn.lex,En.parse));fe(this,"parseInline",Bo(this,mr,ns).call(this,Rn.lexInline,En.parseInline));fe(this,"Parser",En);fe(this,"Renderer",oi);fe(this,"TextRenderer",vs);fe(this,"Lexer",Rn);fe(this,"Tokenizer",ni);fe(this,"Hooks",ho);this.use(...t)}walkTokens(t,n){var o,i;let r=[];for(const s of t)switch(r=r.concat(n.call(this,s)),s.type){case"table":{const l=s;for(const a of l.header)r=r.concat(this.walkTokens(a.tokens,n));for(const a of l.rows)for(const c of a)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{const l=s;r=r.concat(this.walkTokens(l.items,n));break}default:{const l=s;(i=(o=this.defaults.extensions)==null?void 0:o.childTokens)!=null&&i[l.type]?this.defaults.extensions.childTokens[l.type].forEach(a=>{r=r.concat(this.walkTokens(l[a],n))}):l.tokens&&(r=r.concat(this.walkTokens(l.tokens,n)))}}return r}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const o={...r};if(o.async=this.defaults.async||o.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=n.renderers[i.name];s?n.renderers[i.name]=function(...l){let a=i.renderer.apply(this,l);return a===!1&&(a=s.apply(this,l)),a}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=n[i.level];s?s.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),o.extensions=n),r.renderer){const i=this.defaults.renderer||new oi(this.defaults);for(const s in r.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;const l=s,a=r.renderer[l],c=i[l];i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h||""}}o.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new ni(this.defaults);for(const s in r.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const l=s,a=r.tokenizer[l],c=i[l];i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}o.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new ho;for(const s in r.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;const l=s,a=r.hooks[l],c=i[l];ho.passThroughHooks.has(s)?i[l]=u=>{if(this.defaults.async)return Promise.resolve(a.call(i,u)).then(m=>c.call(i,m));const h=a.call(i,u);return c.call(i,h)}:i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}o.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,s=r.walkTokens;o.walkTokens=function(l){let a=[];return a.push(s.call(this,l)),i&&(a=a.concat(i.call(this,l))),a}}this.defaults={...this.defaults,...o}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return Rn.lex(t,n??this.defaults)}parser(t,n){return En.parse(t,n??this.defaults)}}mr=new WeakSet,ns=function(t,n){return(r,o)=>{const i={...o},s={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const l=Bo(this,mr,Ra).call(this,!!s.silent,!!s.async);if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(a=>t(a,s)).then(a=>s.hooks?s.hooks.processAllTokens(a):a).then(a=>s.walkTokens?Promise.all(this.walkTokens(a,s.walkTokens)).then(()=>a):a).then(a=>n(a,s)).then(a=>s.hooks?s.hooks.postprocess(a):a).catch(l);try{s.hooks&&(r=s.hooks.preprocess(r));let a=t(r,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let c=n(a,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(a){return l(a)}}},Ra=function(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const o="<p>An error occurred:</p><pre>"+tn(r.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(r);throw r}};const gr=new rh;function nt(e,t){return gr.parse(e,t)}nt.options=nt.setOptions=function(e){return gr.setOptions(e),nt.defaults=gr.defaults,pa(nt.defaults),nt};nt.getDefaults=ms;nt.defaults=pr;nt.use=function(...e){return gr.use(...e),nt.defaults=gr.defaults,pa(nt.defaults),nt};nt.walkTokens=function(e,t){return gr.walkTokens(e,t)};nt.parseInline=gr.parseInline;nt.Parser=En;nt.parser=En.parse;nt.Renderer=oi;nt.TextRenderer=vs;nt.Lexer=Rn;nt.lexer=Rn.lex;nt.Tokenizer=ni;nt.Hooks=ho;nt.parse=nt;nt.options;nt.setOptions;nt.use;nt.walkTokens;nt.parseInline;En.parse;Rn.lex;const oh=sn("div")({name:"MarkdownContainer",class:"gdg-mnuv029",propsAsIs:!1});class ih extends St.PureComponent{constructor(){super(...arguments);fe(this,"targetElement",null);fe(this,"containerRefHook",n=>{this.targetElement=n,this.renderMarkdownIntoDiv()})}renderMarkdownIntoDiv(){const{targetElement:n,props:r}=this;if(n===null)return;const{contents:o,createNode:i}=r,s=nt(o),l=document.createRange();l.selectNodeContents(n),l.deleteContents();let a=i==null?void 0:i(s);if(a===void 0){const u=document.createElement("template");u.innerHTML=s,a=u.content}n.append(a);const c=n.getElementsByTagName("a");for(const u of c)u.target="_blank",u.rel="noreferrer noopener"}render(){return this.renderMarkdownIntoDiv(),St.createElement(oh,{ref:this.containerRefHook})}}const sh=sn("textarea")({name:"InputBox",class:"gdg-izpuzkl",propsAsIs:!1}),lh=sn("div")({name:"ShadowBox",class:"gdg-s69h75o",propsAsIs:!1}),ah=sn("div")({name:"GrowingEntryStyle",class:"gdg-g1y0xocz",propsAsIs:!1});let ul=0;const hi=e=>{const{placeholder:t,value:n,onKeyDown:r,highlight:o,altNewline:i,validatedSelection:s,...l}=e,{onChange:a,className:c}=l,u=d.useRef(null),h=n??"";rn(a!==void 0,"GrowingEntry must be a controlled input area");const[m]=d.useState(()=>"input-box-"+(ul=(ul+1)%1e7));d.useEffect(()=>{const g=u.current;if(g===null||g.disabled)return;const y=h.toString().length;g.focus(),g.setSelectionRange(o?0:y,y)},[]),d.useLayoutEffect(()=>{var g;if(s!==void 0){const y=typeof s=="number"?[s,null]:s;(g=u.current)==null||g.setSelectionRange(y[0],y[1])}},[s]);const p=d.useCallback(g=>{g.key==="Enter"&&g.shiftKey&&i===!0||r==null||r(g)},[i,r]);return d.createElement(ah,{className:"gdg-growing-entry"},d.createElement(lh,{className:c},h+`
`),d.createElement(sh,{...l,className:(c??"")+" gdg-input",id:m,ref:u,onKeyDown:p,value:h,placeholder:t,dir:"auto"}))},Wi={};let Un=null;function ch(){const e=document.createElement("div");return e.style.opacity="0",e.style.pointerEvents="none",e.style.position="fixed",document.body.append(e),e}function rs(e){const t=e.toLowerCase().trim();if(Wi[t]!==void 0)return Wi[t];Un=Un||ch(),Un.style.color="#000",Un.style.color=t;const n=getComputedStyle(Un).color;Un.style.color="#fff",Un.style.color=t;const r=getComputedStyle(Un).color;if(r!==n)return[0,0,0,1];let o=r.replace(/[^\d.,]/g,"").split(",").map(Number.parseFloat);return o.length<4&&o.push(1),o=o.map(i=>Number.isNaN(i)?0:i),Wi[t]=o,o}function Or(e,t){const[n,r,o]=rs(e);return`rgba(${n}, ${r}, ${o}, ${t})`}function on(e,t){if(t===void 0)return e;const[n,r,o,i]=rs(e);if(i===1)return e;const[s,l,a,c]=rs(t),u=i+c*(1-i),h=(i*n+c*s*(1-i))/u,m=(i*r+c*l*(1-i))/u,p=(i*o+c*a*(1-i))/u;return`rgba(${h}, ${m}, ${p}, ${u})`}var Lr=new Map,$r=new Map,os=new Map;function uh(){Lr.clear(),os.clear(),$r.clear()}function dh(e,t,n,r,o){var i,s,l;let a=0,c={};for(let h of e)a+=(i=n.get(h))!=null?i:o,c[h]=((s=c[h])!=null?s:0)+1;let u=t-a;for(let h of Object.keys(c)){let m=c[h],p=(l=n.get(h))!=null?l:o,g=p*m/a,y=u*g*r/m,w=p+y;n.set(h,w)}}function fh(e,t){var n;let r=new Map,o=0;for(let c of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let u=e.measureText(c).width;r.set(c,u),o+=u}let i=o/r.size,s=3,l=(t/i+s)/(s+1),a=r.keys();for(let c of a)r.set(c,((n=r.get(c))!=null?n:i)*l);return r}function go(e,t,n,r){var o,i;let s=$r.get(n);if(r&&s!==void 0&&s.count>2e4){let c=os.get(n);if(c===void 0&&(c=fh(e,s.size),os.set(n,c)),s.count>5e5){let h=0;for(let m of t)h+=(o=c.get(m))!=null?o:s.size;return h*1.01}let u=e.measureText(t);return dh(t,u.width,c,Math.max(.05,1-s.count/2e5),s.size),$r.set(n,{count:s.count+t.length,size:s.size}),u.width}let l=e.measureText(t),a=l.width/t.length;if(((i=s==null?void 0:s.count)!=null?i:0)>2e4)return l.width;if(s===void 0)$r.set(n,{count:t.length,size:a});else{let c=a-s.size,u=t.length/(s.count+t.length),h=s.size+c*u;$r.set(n,{count:s.count+t.length,size:h})}return l.width}function hh(e,t,n,r,o,i,s,l){if(t.length<=1)return t.length;if(o<n)return-1;let a=Math.floor(n/o*i),c=go(e,t.slice(0,Math.max(0,a)),r,s);if(c!==n)if(c<n){for(;c<n;)a++,c=go(e,t.slice(0,Math.max(0,a)),r,s);a--}else for(;c>n;){let u=t.lastIndexOf(" ",a-1);u>0?a=u:a--,c=go(e,t.slice(0,Math.max(0,a)),r,s)}if(t[a]!==" "){let u=0;u=t.lastIndexOf(" ",a),u>0&&(a=u)}return a}function gh(e,t,n,r,o,i){let s=`${t}_${n}_${r}px`,l=Lr.get(s);if(l!==void 0)return l;if(r<=0)return[];let a=[],c=t.split(`
`),u=$r.get(n),h=u===void 0?t.length:r/u.size*1.5,m=o&&u!==void 0&&u.count>2e4;for(let p of c){let g=go(e,p.slice(0,Math.max(0,h)),n,m),y=Math.min(p.length,h);if(g<=r)a.push(p);else{for(;g>r;){let w=hh(e,p,r,n,g,y,m),k=p.slice(0,Math.max(0,w));p=p.slice(k.length),a.push(k),g=go(e,p.slice(0,Math.max(0,h)),n,m),y=Math.min(p.length,h)}g>0&&a.push(p)}}return a=a.map((p,g)=>g===0?p.trimEnd():p.trim()),Lr.set(s,a),Lr.size>500&&Lr.delete(Lr.keys().next().value),a}function mh(e,t){return St.useMemo(()=>e.map((n,r)=>({...n,sourceIndex:r,sticky:r<t})),[e,t])}function ph(e,t){const[n,r]=t;if(e.columns.hasIndex(n)||e.rows.hasIndex(r))return!0;if(e.current!==void 0){if(mo(e.current.cell,t))return!0;const o=[e.current.range,...e.current.rangeStack];for(const i of o)if(n>=i.x&&n<i.x+i.width&&r>=i.y&&r<i.y+i.height)return!0}return!1}function xo(e,t){return(e??"")===(t??"")}function yh(e,t,n){return n.current===void 0||e[1]!==n.current.cell[1]?!1:t.span===void 0?n.current.cell[0]===e[0]:n.current.cell[0]>=t.span[0]&&n.current.cell[0]<=t.span[1]}function Ea(e,t){const[n,r]=e;return n>=t.x&&n<t.x+t.width&&r>=t.y&&r<t.y+t.height}function mo(e,t){return(e==null?void 0:e[0])===(t==null?void 0:t[0])&&(e==null?void 0:e[1])===(t==null?void 0:t[1])}function Ta(e){return[e.x+e.width-1,e.y+e.height-1]}function dl(e,t,n){const r=n.x,o=n.x+n.width-1,i=n.y,s=n.y+n.height-1,[l,a]=e;if(a<i||a>s)return!1;if(t.span===void 0)return l>=r&&l<=o;const[c,u]=t.span;return c>=r&&c<=o||u>=r&&c<=o||c<r&&u>o}function wh(e,t,n){let r=0;if(n.current===void 0)return r;dl(e,t,n.current.range)&&r++;for(const o of n.current.rangeStack)dl(e,t,o)&&r++;return r}function Ia(e,t){let n=e;if(t!==void 0){let r=[...e];const o=n[t.src];t.src>t.dest?(r.splice(t.src,1),r.splice(t.dest,0,o)):(r.splice(t.dest+1,0,o),r.splice(t.src,1)),r=r.map((i,s)=>({...i,sticky:e[s].sticky})),n=r}return n}function Br(e,t){let n=0;const r=Ia(e,t);for(let o=0;o<r.length;o++){const i=r[o];if(i.sticky)n+=i.width;else break}return n}function Wr(e,t,n){if(typeof n=="number")return t*n;{let r=0;for(let o=e-t;o<e;o++)r+=n(o);return r}}function is(e,t,n,r,o){const i=Ia(e,r),s=[];for(const c of i)if(c.sticky)s.push(c);else break;if(s.length>0)for(const c of s)n-=c.width;let l=t,a=o??0;for(;a<=n&&l<i.length;)a+=i[l].width,l++;for(let c=t;c<l;c++){const u=i[c];u.sticky||s.push(u)}return s}function bh(e,t,n){let r=0;for(const o of t){const i=o.sticky?r:r+(n??0);if(e<=i+o.width)return o.sourceIndex;r+=o.width}return-1}function xh(e,t,n,r,o,i,s,l,a,c){const u=r+o;if(n&&e<=o)return-2;if(e<=u)return-1;let h=t;for(let g=0;g<c;g++){const y=i-1-g,w=typeof s=="number"?s:s(y);if(h-=w,e>=h)return y}const m=i-c,p=e-(a??0);if(typeof s=="number"){const g=Math.floor((p-u)/s)+l;return g>=m?void 0:g}else{let g=u;for(let y=l;y<m;y++){const w=s(y);if(p<=g+w)return y;g+=w}return}}let Qo=0,po={};const vh=typeof window>"u";async function kh(){var e;vh||((e=document==null?void 0:document.fonts)==null?void 0:e.ready)===void 0||(await document.fonts.ready,Qo=0,po={},uh())}kh();function Fa(e,t,n,r){return`${e}_${r??(t==null?void 0:t.font)}_${n}`}function gi(e,t,n){const r=Fa(e,t,"middle",n);let o=po[r];return o===void 0&&(o=t.measureText(e),po[r]=o,Qo++),Qo>1e4&&(po={},Qo=0),o}function Ch(e,t){const n=Fa(e,void 0,"middle",t);return po[n]}function er(e,t){return typeof t!="string"&&(t=t.baseFontFull),Sh(e,t)}function fl(e,t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ";e.save(),e.textBaseline=t;const r=e.measureText(n);return e.restore(),r}const hl=[];function Sh(e,t){for(const i of hl)if(i.key===t)return i.val;const n=fl(e,"alphabetic"),o=-(fl(e,"middle").actualBoundingBoxDescent-n.actualBoundingBoxDescent)+n.actualBoundingBoxAscent/2;return hl.push({key:t,val:o}),o}function Mh(e,t,n,r,o,i){const{ctx:s,rect:l,theme:a}=e;let c=Number.MAX_SAFE_INTEGER;const u=500;if(t!==void 0&&(c=n-t,c<u)){const h=1-c/u;s.globalAlpha=h,s.fillStyle=a.bgSearchResult,s.fillRect(l.x+1,l.y+1,l.width-(o?2:1),l.height-(i?2:1)),s.globalAlpha=1,r!==void 0&&(r.fillStyle=a.bgSearchResult)}return c<u}function Co(e,t,n){const{ctx:r,theme:o}=e,i=t??{},s=n??o.textDark;return s!==i.fillStyle&&(r.fillStyle=s,i.fillStyle=s),i}function Da(e,t,n,r,o,i,s,l,a){a==="right"?e.fillText(t,n+o-(l.cellHorizontalPadding+.5),r+i/2+s):a==="center"?e.fillText(t,n+o/2,r+i/2+s):e.fillText(t,n+l.cellHorizontalPadding+.5,r+i/2+s)}function Aa(e,t){const n=gi("ABCi09jgqpy",e,t);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}function Rh(e,t){e.includes(`
`)&&(e=e.split(/\r?\n/,1)[0]);const n=t/4;return e.length>n&&(e=e.slice(0,n)),e}function Eh(e,t,n,r,o,i,s,l,a,c){const u=l.baseFontFull,h=gh(e,t,u,o-l.cellHorizontalPadding*2,c??!1),m=Aa(e,u),p=l.lineHeight*m,g=m+p*(h.length-1),y=g+l.cellVerticalPadding>i;y&&(e.save(),e.rect(n,r,o,i),e.clip());const w=r+i/2-g/2;let k=Math.max(r+l.cellVerticalPadding,w);for(const b of h)if(Da(e,b,n,k,o,m,s,l,a),k+=p,k>r+i)break;y&&e.restore()}function Ln(e,t,n,r,o){const{ctx:i,rect:s,theme:l}=e,{x:a,y:c,width:u,height:h}=s;r=r??!1,r||(t=Rh(t,u));const m=er(i,l),p=gs(t)==="rtl";if(n===void 0&&p&&(n="right"),p&&(i.direction="rtl"),t.length>0){let g=!1;n==="right"?(i.textAlign="right",g=!0):n!==void 0&&n!=="left"&&(i.textAlign=n,g=!0),r?Eh(i,t,a,c,u,h,m,l,n,o):Da(i,t,a,c,u,h,m,l,n),g&&(i.textAlign="start"),p&&(i.direction="inherit")}}function $n(e,t,n,r,o,i){typeof i=="number"&&(i={tl:i,tr:i,br:i,bl:i}),i={tl:Math.max(0,Math.min(i.tl,o/2,r/2)),tr:Math.max(0,Math.min(i.tr,o/2,r/2)),bl:Math.max(0,Math.min(i.bl,o/2,r/2)),br:Math.max(0,Math.min(i.br,o/2,r/2))},e.moveTo(t+i.tl,n),e.arcTo(t+r,n,t+r,n+i.tr,i.tr),e.arcTo(t+r,n+o,t+r-i.br,n+o,i.br),e.arcTo(t,n+o,t,n+o-i.bl,i.bl),e.arcTo(t,n,t+i.tl,n,i.tl)}function Th(e,t,n){e.arc(t,n-1.25*3.5,1.25,0,2*Math.PI,!1),e.arc(t,n,1.25,0,2*Math.PI,!1),e.arc(t,n+1.25*3.5,1.25,0,2*Math.PI,!1)}function Ih(e,t,n){const r=function(l,a){const c=a.x-l.x,u=a.y-l.y,h=Math.sqrt(c*c+u*u),m=c/h,p=u/h;return{x:c,y:a.y-l.y,len:h,nx:m,ny:p,ang:Math.atan2(p,m)}};let o;const i=t.length;let s=t[i-1];for(let l=0;l<i;l++){let a=t[l%i];const c=t[(l+1)%i],u=r(a,s),h=r(a,c),m=u.nx*h.ny-u.ny*h.nx,p=u.nx*h.nx-u.ny*-h.ny;let g=Math.asin(m<-1?-1:m>1?1:m),y=1,w=!1;p<0?g<0?g=Math.PI+g:(g=Math.PI-g,y=-1,w=!0):g>0&&(y=-1,w=!0),o=a.radius!==void 0?a.radius:n;const k=g/2;let b=Math.abs(Math.cos(k)*o/Math.sin(k)),R;b>Math.min(u.len/2,h.len/2)?(b=Math.min(u.len/2,h.len/2),R=Math.abs(b*Math.sin(k)/Math.cos(k))):R=o;let M=a.x+h.nx*b,x=a.y+h.ny*b;M+=-h.ny*R*y,x+=h.nx*R*y,e.arc(M,x,R,u.ang+Math.PI/2*y,h.ang-Math.PI/2*y,w),s=a,a=c}e.closePath()}function ss(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g){const y={x:0,y:i+c,width:0,height:0};if(e>=p.length||t>=u||t<-2||e<0)return y;const w=i-o;if(e>=h){const k=s>e?-1:1,b=Br(p);y.x+=b+a;for(let R=s;R!==e;R+=k)y.x+=p[k===1?R:R-1].width*k}else for(let k=0;k<e;k++)y.x+=p[k].width;if(y.width=p[e].width+1,t===-1)y.y=o,y.height=w;else if(t===-2){y.y=0,y.height=o;let k=e;const b=p[e].group,R=p[e].sticky;for(;k>0&&xo(p[k-1].group,b)&&p[k-1].sticky===R;){const x=p[k-1];y.x-=x.width,y.width+=x.width,k--}let M=e;for(;M+1<p.length&&xo(p[M+1].group,b)&&p[M+1].sticky===R;){const x=p[M+1];y.width+=x.width,M++}if(!R){const x=Br(p),L=y.x-x;L<0&&(y.x-=L,y.width+=L),y.x+y.width>n&&(y.width=n-y.x)}}else if(t>=u-m){let k=u-t;for(y.y=r;k>0;){const b=t+k-1;y.height=typeof g=="number"?g:g(b),y.y-=y.height,k--}y.height+=1}else{const k=l>t?-1:1;if(typeof g=="number"){const b=t-l;y.y+=b*g}else for(let b=l;b!==t;b+=k)y.y+=g(b)*k;y.height=(typeof g=="number"?g:g(t))+1}return y}const ks=1<<21;function wn(e,t){return(t+2)*ks+e}function za(e){return e%ks}function Cs(e){return Math.floor(e/ks)-2}function Ss(e){const t=za(e),n=Cs(e);return[t,n]}class Ha{constructor(){fe(this,"visibleWindow",{x:0,y:0,width:0,height:0});fe(this,"freezeCols",0);fe(this,"freezeRows",[]);fe(this,"isInWindow",t=>{const n=za(t),r=Cs(t),o=this.visibleWindow,i=n>=o.x&&n<=o.x+o.width||n<this.freezeCols,s=r>=o.y&&r<=o.y+o.height||this.freezeRows.includes(r);return i&&s})}setWindow(t,n,r){this.visibleWindow.x===t.x&&this.visibleWindow.y===t.y&&this.visibleWindow.width===t.width&&this.visibleWindow.height===t.height&&this.freezeCols===n&&Nr(this.freezeRows,r)||(this.visibleWindow=t,this.freezeCols=n,this.freezeRows=r,this.clearOutOfWindow())}}class Fh extends Ha{constructor(){super(...arguments);fe(this,"cache",new Map);fe(this,"setValue",(n,r)=>{this.cache.set(wn(n[0],n[1]),r)});fe(this,"getValue",n=>this.cache.get(wn(n[0],n[1])));fe(this,"clearOutOfWindow",()=>{for(const[n]of this.cache.entries())this.isInWindow(n)||this.cache.delete(n)})}}class yo{constructor(t=[]){fe(this,"cells");this.cells=new Set(t.map(n=>wn(n[0],n[1])))}add(t){this.cells.add(wn(t[0],t[1]))}has(t){return t===void 0?!1:this.cells.has(wn(t[0],t[1]))}remove(t){this.cells.delete(wn(t[0],t[1]))}clear(){this.cells.clear()}get size(){return this.cells.size}hasHeader(){for(const t of this.cells)if(Cs(t)<0)return!0;return!1}hasItemInRectangle(t){for(let n=t.y;n<t.y+t.height;n++)for(let r=t.x;r<t.x+t.width;r++)if(this.cells.has(wn(r,n)))return!0;return!1}hasItemInRegion(t){for(const n of t)if(this.hasItemInRectangle(n))return!0;return!1}*values(){for(const t of this.cells)yield Ss(t)}}function Dh(e){return{"--gdg-accent-color":e.accentColor,"--gdg-accent-fg":e.accentFg,"--gdg-accent-light":e.accentLight,"--gdg-text-dark":e.textDark,"--gdg-text-medium":e.textMedium,"--gdg-text-light":e.textLight,"--gdg-text-bubble":e.textBubble,"--gdg-bg-icon-header":e.bgIconHeader,"--gdg-fg-icon-header":e.fgIconHeader,"--gdg-text-header":e.textHeader,"--gdg-text-group-header":e.textGroupHeader??e.textHeader,"--gdg-text-header-selected":e.textHeaderSelected,"--gdg-bg-cell":e.bgCell,"--gdg-bg-cell-medium":e.bgCellMedium,"--gdg-bg-header":e.bgHeader,"--gdg-bg-header-has-focus":e.bgHeaderHasFocus,"--gdg-bg-header-hovered":e.bgHeaderHovered,"--gdg-bg-bubble":e.bgBubble,"--gdg-bg-bubble-selected":e.bgBubbleSelected,"--gdg-bg-search-result":e.bgSearchResult,"--gdg-border-color":e.borderColor,"--gdg-horizontal-border-color":e.horizontalBorderColor??e.borderColor,"--gdg-drilldown-border":e.drilldownBorder,"--gdg-link-color":e.linkColor,"--gdg-cell-horizontal-padding":`${e.cellHorizontalPadding}px`,"--gdg-cell-vertical-padding":`${e.cellVerticalPadding}px`,"--gdg-header-font-style":e.headerFontStyle,"--gdg-base-font-style":e.baseFontStyle,"--gdg-marker-font-style":e.markerFontStyle,"--gdg-font-family":e.fontFamily,"--gdg-editor-font-size":e.editorFontSize,...e.roundingRadius===void 0?{}:{"--gdg-rounding-radius":`${e.roundingRadius}px`}}}const La={accentColor:"#4F5DFF",accentFg:"#FFFFFF",accentLight:"rgba(62, 116, 253, 0.1)",textDark:"#313139",textMedium:"#737383",textLight:"#B2B2C0",textBubble:"#313139",bgIconHeader:"#737383",fgIconHeader:"#FFFFFF",textHeader:"#313139",textGroupHeader:"#313139BB",textHeaderSelected:"#FFFFFF",bgCell:"#FFFFFF",bgCellMedium:"#FAFAFB",bgHeader:"#F7F7F8",bgHeaderHasFocus:"#E9E9EB",bgHeaderHovered:"#EFEFF1",bgBubble:"#EDEDF3",bgBubbleSelected:"#FFFFFF",bgSearchResult:"#fff9e3",borderColor:"rgba(115, 116, 131, 0.16)",drilldownBorder:"rgba(0, 0, 0, 0)",linkColor:"#4F5DFF",cellHorizontalPadding:8,cellVerticalPadding:3,headerIconSize:18,headerFontStyle:"600 13px",baseFontStyle:"13px",markerFontStyle:"9px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif",editorFontSize:"13px",lineHeight:1.4};function Pa(){return La}const Ah=St.createContext(La);function Jn(e,...t){const n={...e};for(const r of t)if(r!==void 0)for(const o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);return(n.headerFontFull===void 0||e.fontFamily!==n.fontFamily||e.headerFontStyle!==n.headerFontStyle)&&(n.headerFontFull=`${n.headerFontStyle} ${n.fontFamily}`),(n.baseFontFull===void 0||e.fontFamily!==n.fontFamily||e.baseFontStyle!==n.baseFontStyle)&&(n.baseFontFull=`${n.baseFontStyle} ${n.fontFamily}`),(n.markerFontFull===void 0||e.fontFamily!==n.fontFamily||e.markerFontStyle!==n.markerFontStyle)&&(n.markerFontFull=`${n.markerFontStyle} ${n.fontFamily}`),n}const ls=150;function zh(e,t,n,r){var i;const o=r(t);return((i=o==null?void 0:o.measure)==null?void 0:i.call(o,e,t,n))??ls}function $a(e,t,n,r,o,i,s,l,a){let c=0;const u=o===void 0?[]:o.map(m=>{const p=zh(e,m[r],t,a);return c=Math.max(c,p),p});if(u.length>5&&l){c=0;let m=0;for(const g of u)m+=g;const p=m/u.length;for(let g=0;g<u.length;g++)u[g]>=p*2?u[g]=0:c=Math.max(c,u[g])}c=Math.max(c,e.measureText(n.title).width+16+(n.icon===void 0?0:28));const h=Math.max(Math.ceil(i),Math.min(Math.floor(s),Math.ceil(c)));return{...n,width:h}}function Hh(e,t,n,r,o,i,s,l,a){const c=d.useRef(t),u=d.useRef(n),h=d.useRef(s);c.current=t,u.current=n,h.current=s;const[m,p]=d.useMemo(()=>{if(typeof window>"u")return[null,null];const b=document.createElement("canvas");return b.style.display="none",b.style.opacity="0",b.style.position="fixed",[b,b.getContext("2d",{alpha:!1})]},[]);d.useLayoutEffect(()=>(m&&document.documentElement.append(m),()=>{m==null||m.remove()}),[m]);const g=d.useRef({}),y=d.useRef(),[w,k]=d.useState();return d.useLayoutEffect(()=>{const b=u.current;if(b===void 0||e.every(Yo))return;let R=Math.max(1,10-Math.floor(e.length/1e4)),M=0;R<c.current&&R>1&&(R--,M=1);const x={x:0,y:0,width:e.length,height:Math.min(c.current,R)},L={x:0,y:c.current-1,width:e.length,height:1};(async()=>{const N=b(x,a.signal),T=M>0?b(L,a.signal):void 0;let O;typeof N=="object"?O=N:O=await tl(N),T!==void 0&&(typeof T=="object"?O=[...O,...T]:O=[...O,...await tl(T)]),y.current=e,k(O)})()},[a.signal,e]),d.useMemo(()=>{let R=e.every(Yo)?e:p===null?e.map(F=>Yo(F)?F:{...F,width:ls}):(p.font=h.current.baseFontFull,e.map((F,N)=>{if(Yo(F))return F;if(g.current[F.id]!==void 0)return{...F,width:g.current[F.id]};if(w===void 0||y.current!==e||F.id===void 0)return{...F,width:ls};const T=$a(p,s,F,N,w,o,i,!0,l);return g.current[F.id]=T.width,T})),M=0,x=0;const L=[];for(const[F,N]of R.entries())M+=N.width,N.grow!==void 0&&N.grow>0&&(x+=N.grow,L.push(F));if(M<r&&L.length>0){const F=[...R],N=r-M;let T=N;for(let O=0;O<L.length;O++){const j=L[O],I=(R[j].grow??0)/x,D=O===L.length-1?T:Math.min(T,Math.floor(N*I));F[j]={...R[j],growOffset:D,width:R[j].width+D},T-=D}R=F}return{sizedColumns:R,nonGrowWidth:M}},[r,e,p,w,s,o,i,l])}var Lh=Hu;function Ph(e){return e&&e.length?Lh(e):[]}var $h=Ph;const _h=ci($h);var Nh=Lu;function Oh(e){var t=e==null?0:e.length;return t?Nh(e,1):[]}var Bh=Oh;const gl=ci(Bh);var Wh=Math.ceil,jh=Math.max;function Xh(e,t,n,r){for(var o=-1,i=jh(Wh((t-e)/(n||1)),0),s=Array(i);i--;)s[r?i:++o]=e,e+=n;return s}var Vh=Xh,Yh=Vh,Uh=Pu,ji=$u;function Kh(e){return function(t,n,r){return r&&typeof r!="number"&&Uh(t,n,r)&&(n=r=void 0),t=ji(t),n===void 0?(n=t,t=0):n=ji(n),r=r===void 0?t<n?1:-1:ji(r),Yh(t,n,r,e)}}var qh=Kh,Gh=qh,Zh=Gh(),Qh=Zh;const fr=ci(Qh),ct='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',Jh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}<rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${t}"/></svg>`},eg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}<rect x="2" y="2" width="16" height="16" rx="4" fill="${n}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${t}"/></svg>`},tg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${t}"/>
  </svg>`},ng=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${t}"/>
</svg>`},rg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
    <path
        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"
        fill="${n}"
    />
    <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"
        fill="${t}"
    />
</svg>`},_a=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${t}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${t}"/>
</svg>
  `},og=e=>{const t=e.bgColor;return`${ct}
    <path stroke="${t}" stroke-width="2" d="M12 3v14"/>
    <path stroke="${t}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>
    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${t}"/>
  </svg>
`},ig=_a,sg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${t}"/>
</svg>`},lg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${t}"/>
    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${t}"/>
    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
  </svg>`},ag=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${t}"/>
</svg>`},cg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <path fill="${t}" d="M3 3h14v14H3z"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${n}"/>
  </svg>`},ug=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${t}"/>
  </svg>`},dg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${t}"/>
</svg>`},fg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${t}"/>
    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${t}"/>
  </svg>`},hg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${t}"/>
</svg>`},gg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <rect x="2" y="8" width="10" height="8" rx="2" fill="${n}"/>
    <rect x="8" y="4" width="10" height="8" rx="2" fill="${n}"/>
    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${t}"/>
  </svg>`},mg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <path fill="${t}" d="M4 3h12v14H4z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${n}"/>
</svg>`},pg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${t}"/>
  </svg>`},yg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${t}"/>
  </svg>`},wg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${t}"/>
</svg>`},bg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${t}"/>
  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${t}"/>
</svg>`},xg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${t}"/>
  </svg>`},vg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${t}"/>
</svg>`},kg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${ct}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${t}"/>
  </svg>`},Cg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${t}"/>
</svg>`},Sg=e=>{const t=e.fgColor,n=e.bgColor;return`${ct}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${t}"/>
</svg>`},Mg=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>`},Rg=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>
`},Eg={headerRowID:Jh,headerNumber:tg,headerCode:eg,headerString:ng,headerBoolean:rg,headerAudioUri:ig,headerVideoUri:sg,headerEmoji:lg,headerImage:ag,headerUri:_a,headerPhone:cg,headerMarkdown:ug,headerDate:dg,headerTime:fg,headerEmail:hg,headerReference:gg,headerIfThenElse:mg,headerSingleValue:pg,headerLookup:yg,headerTextTemplate:wg,headerMath:bg,headerRollup:xg,headerJoinStrings:vg,headerSplitString:kg,headerGeoDistance:Cg,headerArray:Sg,rowOwnerOverlay:Mg,protectedColumnOverlay:Rg,renameIcon:og};function Tg(e,t){return e==="normal"?[t.bgIconHeader,t.fgIconHeader]:e==="selected"?["white",t.accentColor]:[t.accentColor,t.bgHeader]}class Ig{constructor(t,n){fe(this,"onSettled");fe(this,"spriteMap",new Map);fe(this,"headerIcons");fe(this,"inFlight",0);this.onSettled=n,this.headerIcons=t??{}}drawSprite(t,n,r,o,i,s,l,a=1){const[c,u]=Tg(n,l),h=s*Math.ceil(window.devicePixelRatio),m=`${c}_${u}_${h}_${t}`;let p=this.spriteMap.get(m);if(p===void 0){const g=this.headerIcons[t];if(g===void 0)return;p=document.createElement("canvas");const y=p.getContext("2d");if(y===null)return;const w=new Image;w.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(g({fgColor:u,bgColor:c}))}`,this.spriteMap.set(m,p);const k=w.decode();if(k===void 0)return;this.inFlight++,k.then(()=>{y.drawImage(w,0,0,h,h)}).finally(()=>{this.inFlight--,this.inFlight===0&&this.onSettled()})}else a<1&&(r.globalAlpha=a),r.drawImage(p,0,0,h,h,o,i,s,s),a<1&&(r.globalAlpha=1)}}function Ms(e,t,n,r,o,i,s,l,a=-20,c=-20,u=32,h="center"){const m=Math.floor(o+s/2),p=t.roundingRadius??4,g=ha(u,s,t.cellVerticalPadding),y=g/2,w=fa(h,r,i,t.cellHorizontalPadding,g),k=da(w,m,g),b=ga(r+a,o+c,k);switch(n){case!0:{e.beginPath(),$n(e,w-g/2,m-g/2,g,g,p),e.fillStyle=l?t.accentColor:t.textMedium,e.fill(),e.beginPath(),e.moveTo(w-y+g/4.23,m-y+g/1.97),e.lineTo(w-y+g/2.42,m-y+g/1.44),e.lineTo(w-y+g/1.29,m-y+g/3.25),e.strokeStyle=t.bgCell,e.lineJoin="round",e.lineCap="round",e.lineWidth=1.9,e.stroke();break}case ei:case!1:{e.beginPath(),$n(e,w-g/2+.5,m-g/2+.5,g-1,g-1,p),e.lineWidth=1,e.strokeStyle=b?t.textDark:t.textMedium,e.stroke();break}case fs:{e.beginPath(),$n(e,w-g/2,m-g/2,g,g,p),e.fillStyle=b?t.textMedium:t.textLight,e.fill(),e.beginPath(),e.moveTo(w-g/3,m),e.lineTo(w+g/3,m),e.strokeStyle=t.bgCell,e.lineCap="round",e.lineWidth=1.9,e.stroke();break}default:bo()}}function Fg(e,t,n,r){if(r==="any")return Na(e,{x:t,y:n,width:1,height:1});if(r==="vertical"&&(t=e.x),r==="horizontal"&&(n=e.y),Ea([t,n],e))return;const o=t-e.x,i=e.x+e.width-t,s=n-e.y+1,l=e.y+e.height-n,a=Math.min(r==="vertical"?Number.MAX_SAFE_INTEGER:o,r==="vertical"?Number.MAX_SAFE_INTEGER:i,r==="horizontal"?Number.MAX_SAFE_INTEGER:s,r==="horizontal"?Number.MAX_SAFE_INTEGER:l);return a===l?{x:e.x,y:e.y+e.height,width:e.width,height:n-e.y-e.height+1}:a===s?{x:e.x,y:n,width:e.width,height:e.y-n}:a===i?{x:e.x+e.width,y:e.y,width:t-e.x-e.width+1,height:e.height}:{x:t,y:e.y,width:e.x-t,height:e.height}}function Na(e,t){const n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),o=Math.max(e.x+e.width,t.x+t.width)-n,i=Math.max(e.y+e.height,t.y+t.height)-r;return{x:n,y:r,width:o,height:i}}function Dg(e,t){return e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height}function Ag(e,t,n,r){if(e.x>t||e.y>n||e.x<0&&e.y<0&&e.x+e.width>t&&e.y+e.height>n)return;if(e.x>=0&&e.y>=0&&e.x+e.width<=t&&e.y+e.height<=n)return e;const o=-4,i=-4,s=t+4,l=n+4,a=o-e.x,c=e.x+e.width-s,u=i-e.y,h=e.y+e.height-l,m=a>0?e.x+Math.floor(a/r)*r:e.x,p=c>0?e.x+e.width-Math.floor(c/r)*r:e.x+e.width,g=u>0?e.y+Math.floor(u/r)*r:e.y,y=h>0?e.y+e.height-Math.floor(h/r)*r:e.y+e.height;return{x:m,y:g,width:p-m,height:y-g}}function zg(e,t,n,r,o){const[i,s,l,a]=t,[c,u,h,m]=o,{x:p,y:g,width:y,height:w}=e,k=[];if(y<=0||w<=0)return k;const b=p+y,R=g+w,M=p<i,x=g<s,L=p+y>l,F=g+w>a,N=p>i&&p<l||b>i&&b<l||p<i&&b>l,T=g>s&&g<a||R>s&&R<a||g<s&&R>a;if(N&&T){const j=Math.max(p,i),I=Math.max(g,s),D=Math.min(b,l),P=Math.min(R,a);k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:c,y:u,width:h-c+1,height:m-u+1}})}if(M&&x){const j=p,I=g,D=Math.min(b,i),P=Math.min(R,s);k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:0,y:0,width:c+1,height:u+1}})}if(x&&N){const j=Math.max(p,i),I=g,D=Math.min(b,l),P=Math.min(R,s);k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:c,y:0,width:h-c+1,height:u+1}})}if(x&&L){const j=Math.max(p,l),I=g,D=b,P=Math.min(R,s);k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:h,y:0,width:n-h+1,height:u+1}})}if(M&&T){const j=p,I=Math.max(g,s),D=Math.min(b,i),P=Math.min(R,a);k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:0,y:u,width:c+1,height:m-u+1}})}if(L&&T){const j=Math.max(p,l),I=Math.max(g,s),D=b,P=Math.min(R,a);k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:h,y:u,width:n-h+1,height:m-u+1}})}if(M&&F){const j=p,I=Math.max(g,a),D=Math.min(b,i),P=R;k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:0,y:m,width:c+1,height:r-m+1}})}if(F&&N){const j=Math.max(p,i),I=Math.max(g,a),D=Math.min(b,l),P=R;k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:c,y:m,width:h-c+1,height:r-m+1}})}if(L&&F){const j=Math.max(p,l),I=Math.max(g,a),D=b,P=R;k.push({rect:{x:j,y:I,width:D-j,height:P-I},clip:{x:h,y:m,width:n-h+1,height:r-m+1}})}return k}const Hg={kind:re.Loading,allowOverlay:!1},no=[0,0],ro={x:0,y:0,width:0,height:0},Xi=[void 0,()=>{}];let as=!1;function Lg(){as=!0}function Oa(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,y,w,k,b,R,M,x,L,F,N){var te,he;let T,O;w!==void 0&&w[0][0]===n&&w[0][1]===r&&(T=w[1][0],O=w[1][1]);let j;no[0]=n,no[1]=r,ro.x=s,ro.y=l,ro.width=a,ro.height=c,Xi[0]=L.getValue(no),Xi[1]=de=>L.setValue(no,de),as=!1;const I={ctx:e,theme:h,col:n,row:r,cell:t,rect:ro,highlighted:u,cellFillColor:m,hoverAmount:y,frameTime:b,hoverX:T,drawState:Xi,hoverY:O,imageLoader:p,spriteManager:g,hyperWrapping:k,overrideCursor:T!==void 0?N:void 0,requestAnimationFrame:Lg},D=Mh(I,t.lastUpdated,b,M,o,i),P=F(t);if(P!==void 0){(M==null?void 0:M.renderer)!==P&&((te=M==null?void 0:M.deprep)==null||te.call(M,I),M=void 0);const de=(he=P.drawPrep)==null?void 0:he.call(P,I,M);R!==void 0&&!Pr(I.cell)?R(I,()=>P.draw(I,t)):P.draw(I,t),j=de===void 0?void 0:{deprep:de==null?void 0:de.deprep,fillStyle:de==null?void 0:de.fillStyle,font:de==null?void 0:de.font,renderer:P}}return(D||as)&&(x==null||x(no)),j}function Pg(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,y,w,k,b){const R=[];e.imageSmoothingEnabled=!1;const M=Math.min(o.cellYOffset,s),x=Math.max(o.cellYOffset,s);let L=0;if(typeof k=="number")L+=(x-M)*k;else for(let P=M;P<x;P++)L+=k(P);s>o.cellYOffset&&(L=-L),L+=a-o.translateY;const F=Math.min(o.cellXOffset,i),N=Math.max(o.cellXOffset,i);let T=0;for(let P=F;P<N;P++)T+=y[P].width;i>o.cellXOffset&&(T=-T),T+=l-o.translateX;let O=Br(w);if(O>0&&O++,T!==0&&L!==0)return{regions:[]};const j=c>0?Wr(m,c,k):0,I=u-O-Math.abs(T),D=h-p-j-Math.abs(L)-1;if(I>150&&D>150){const P={sx:0,sy:0,sw:u*g,sh:h*g,dx:0,dy:0,dw:u*g,dh:h*g};if(L>0?(P.sy=(p+1)*g,P.sh=D*g,P.dy=(L+p+1)*g,P.dh=D*g,R.push({x:0,y:p,width:u,height:L+1})):L<0&&(P.sy=(-L+p+1)*g,P.sh=D*g,P.dy=(p+1)*g,P.dh=D*g,R.push({x:0,y:h+L-j,width:u,height:-L+j})),T>0?(P.sx=O*g,P.sw=I*g,P.dx=(T+O)*g,P.dw=I*g,R.push({x:O-1,y:0,width:T+2,height:h})):T<0&&(P.sx=(O-T)*g,P.sw=I*g,P.dx=O*g,P.dw=I*g,R.push({x:u+T,y:0,width:-T,height:h})),e.setTransform(1,0,0,1,0,0),b){if(O>0&&T!==0&&L===0&&(r===void 0||(n==null?void 0:n[1])!==!1)){const te=O*g,he=h*g;e.drawImage(t,0,0,te,he,0,0,te,he)}if(j>0&&T===0&&L!==0&&(r===void 0||(n==null?void 0:n[0])!==!1)){const te=(h-j)*g,he=u*g,de=j*g;e.drawImage(t,0,te,he,de,0,te,he,de)}}e.drawImage(t,P.sx,P.sy,P.sw,P.sh,P.dx,P.dy,P.dw,P.dh),e.scale(g,g)}return e.imageSmoothingEnabled=!0,{regions:R}}function $g(e,t,n,r,o,i,s,l,a,c){const u=[];return t!==e.cellXOffset||n!==e.cellYOffset||r!==e.translateX||o!==e.translateY||tr(a,n,r,o,l,(h,m,p,g)=>{if(h.sourceIndex===c){const y=Math.max(m,g)+1;return u.push({x:y,y:0,width:i-y,height:s}),!0}}),u}function ml(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,y,w,k=!1){if(a!==void 0){e.beginPath(),e.save(),e.rect(0,0,i,s);for(const I of a)e.rect(I.x+1,I.y+1,I.width-1,I.height-1);e.clip("evenodd")}const b=w.horizontalBorderColor??w.borderColor,R=w.borderColor;let M=0,x=i,L=0,F=s;if(l!==void 0&&l.length>0){M=Number.MAX_SAFE_INTEGER,L=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER,F=Number.MIN_SAFE_INTEGER;for(const I of l)M=Math.min(M,I.x-1),x=Math.max(x,I.x+I.width+1),L=Math.min(L,I.y-1),F=Math.max(F,I.y+I.height+1)}const N=[];e.beginPath();let T=.5;for(let I=0;I<t.length;I++){const D=t[I];if(D.width===0)continue;T+=D.width;const P=D.sticky?T:T+r;P>=M&&P<=x&&p(I+1)&&N.push({x1:P,y1:Math.max(c,L),x2:P,y2:Math.min(s,F),color:R})}let O=s+.5;for(let I=y-g;I<y;I++){const D=h(I);O-=D,N.push({x1:M,y1:O,x2:x,y2:O,color:b})}if(k!==!0){let I=u+.5,D=n;const P=O;for(;I+o<P;){const te=I+o;if(te>=L&&te<=F-1){const he=m==null?void 0:m(D);N.push({x1:M,y1:te,x2:x,y2:te,color:(he==null?void 0:he.horizontalBorderColor)??(he==null?void 0:he.borderColor)??b})}I+=h(D),D++}}const j=_u(N,I=>I.color);for(const I of Object.keys(j)){e.strokeStyle=I;for(const D of j[I])e.moveTo(D.x1,D.y1),e.lineTo(D.x2,D.y2);e.stroke(),e.beginPath()}a!==void 0&&e.restore()}function Ba(e,t){const n=[];let r=e.x+e.width-26*t.length;const o=e.y+e.height/2-13,i=26,s=26;for(let l=0;l<t.length;l++)n.push({x:r,y:o,width:s,height:i}),r+=26;return n}function mi(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function _g(e,t,n,r,o,i,s,l,a,c,u,h){const[p,g]=(i==null?void 0:i[0])??[];let y=0;Va(t,n,r,o,(w,k,b,R,M,x)=>{if(h!==void 0&&!h.hasItemInRectangle({x:w[0],y:-2,width:w[1]-w[0]+1,height:1}))return;e.save(),e.beginPath(),e.rect(b,R,M,x),e.clip();const L=u(k),F=(L==null?void 0:L.overrideTheme)===void 0?s:Jn(s,L.overrideTheme),N=g===-2&&p!==void 0&&p>=w[0]&&p<=w[1],T=N?F.bgHeaderHovered:F.bgHeader;if(T!==s.bgHeader&&(e.fillStyle=T,e.fill()),e.fillStyle=F.textGroupHeader??F.textHeader,L!==void 0){let O=b;if(L.icon!==void 0&&(l.drawSprite(L.icon,"normal",e,O+8,(o-20)/2,20,F),O+=26),e.fillText(L.name,O+8,o/2+er(e,s.headerFontFull)),L.actions!==void 0&&N){const j=Ba({x:b,y:R,width:M,height:x},L.actions);e.beginPath();const I=j[0].x-10,D=b+M-I;e.rect(I,0,D,o);const P=e.createLinearGradient(I,0,I+D,0),te=Or(T,0);P.addColorStop(0,te),P.addColorStop(10/D,T),P.addColorStop(1,T),e.fillStyle=P,e.fill(),e.globalAlpha=.6;const[he,de]=(i==null?void 0:i[1])??[-1,-1];for(let pe=0;pe<L.actions.length;pe++){const je=L.actions[pe],G=j[pe],K=mi(G,he+b,de);K&&(e.globalAlpha=1),l.drawSprite(je.icon,"normal",e,G.x+G.width/2-10,G.y+G.height/2-10,20,F),K&&(e.globalAlpha=.6)}e.globalAlpha=1}}b!==0&&c(w[0])&&(e.beginPath(),e.moveTo(b+.5,0),e.lineTo(b+.5,o),e.strokeStyle=s.borderColor,e.lineWidth=1,e.stroke()),e.restore(),y=b+M}),e.beginPath(),e.moveTo(y+.5,0),e.lineTo(y+.5,o),e.moveTo(0,o+.5),e.lineTo(n,o+.5),e.strokeStyle=s.borderColor,e.lineWidth=1,e.stroke()}const zr=30;function Wa(e,t,n,r,o){return o?{x:e,y:t,width:zr,height:Math.min(zr,r)}:{x:e+n-zr,y:Math.max(t,t+r/2-zr/2),width:zr,height:Math.min(zr,r)}}function pl(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g){if(p){let M;i.title===aa&&(M=!0),i.title===ca&&(M=!1),M!==!0&&(e.globalAlpha=c),Ms(e,l,M,t,n,r,o,!1,void 0,void 0,18),M!==!0&&(e.globalAlpha=1);return}const y=l.cellHorizontalPadding,w=s?l.textHeaderSelected:l.textHeader,k=i.hasMenu===!0&&(a||h&&s),b=m?-1:1;let R=m?t+r-y:t+y;if(i.icon!==void 0){let M=s?"selected":"normal";i.style==="highlight"&&(M=s?"selected":"special");const x=l.headerIconSize;u.drawSprite(i.icon,M,e,m?R-x:R,n+(o-x)/2,x,l),i.overlayIcon!==void 0&&u.drawSprite(i.overlayIcon,s?"selected":"special",e,m?R-x+9:R+9,n+((o-18)/2+6),18,l),R+=Math.ceil(x*1.3)*b}if(k&&i.hasMenu===!0&&r>35){const x=m?35:r-35,L=m?35*.7:r-35*.7,F=x/r,N=L/r,T=e.createLinearGradient(t,0,t+r,0),O=Or(w,0);T.addColorStop(m?1:0,w),T.addColorStop(F,w),T.addColorStop(N,O),T.addColorStop(m?0:1,O),e.fillStyle=T}else e.fillStyle=w;if(m&&(e.textAlign="right"),e.fillText(i.title,R,n+o/2+er(e,l.headerFontFull)),m&&(e.textAlign="left"),k&&i.hasMenu===!0)if(i.menuIcon===void 0||i.menuIcon===ti.Triangle){e.beginPath();const M=g.x+g.width/2-5.5,x=g.y+g.height/2-3;Ih(e,[{x:M,y:x},{x:M+11,y:x},{x:M+5.5,y:x+6}],1),e.fillStyle=w,e.fill()}else if(i.menuIcon===ti.Dots){e.beginPath();const M=g.x+g.width/2,x=g.y+g.height/2;Th(e,M,x),e.fillStyle=w,e.fill()}else{const M=g.x+(g.width-l.headerIconSize)/2,x=g.y+(g.height-l.headerIconSize)/2;u.drawSprite(i.menuIcon,"normal",e,M,x,l.headerIconSize,l)}}function ja(e,t,n,r,o,i,s,l,a,c,u,h,m,p){const g=i.title.startsWith(di),y=gs(i.title)==="rtl",w=Wa(t,n,r,o,y);if(m!==void 0){let k=i;g&&(k={...i,title:""}),m({ctx:e,theme:l,rect:{x:t,y:n,width:r,height:o},column:k,columnIndex:k.sourceIndex,isSelected:s,hoverAmount:u,isHovered:a,hasSelectedCell:c,spriteManager:h,menuBounds:w},()=>pl(e,t,n,r,o,i,s,l,a,u,h,p,y,g,w))}else pl(e,t,n,r,o,i,s,l,a,u,h,p,y,g,w)}function Ng(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,y,w,k,b){const R=s+l;if(R<=0)return;e.fillStyle=h.bgHeader,e.fillRect(0,0,o,R);const[M,x]=(r==null?void 0:r[0])??[],L=h.headerFontFull;e.font=L,tr(t,0,i,0,R,(F,N,T,O)=>{var oe;if(w!==void 0&&!w.has([F.sourceIndex,-1]))return;const j=Math.max(0,O-N);e.save(),e.beginPath(),e.rect(N+j,l,F.width-j,s),e.clip();const I=y(F.group??"").overrideTheme,D=F.themeOverride===void 0&&I===void 0?h:Jn(h,I,F.themeOverride);D.bgHeader!==h.bgHeader&&(e.fillStyle=D.bgHeader,e.fill()),D!==h&&(e.font=D.baseFontFull);const P=u.columns.hasIndex(F.sourceIndex),te=a!==void 0||c,he=!te&&x===-1&&M===F.sourceIndex,de=te?0:((oe=p.find(ae=>ae.item[0]===F.sourceIndex&&ae.item[1]===-1))==null?void 0:oe.hoverAmount)??0,pe=(u==null?void 0:u.current)!==void 0&&u.current.cell[0]===F.sourceIndex,je=P?D.accentColor:pe?D.bgHeaderHasFocus:D.bgHeader,G=n?l:0,K=F.sourceIndex===0?0:1;P?(e.fillStyle=je,e.fillRect(N+K,G,F.width-K,s)):(pe||de>0)&&(e.beginPath(),e.rect(N+K,G,F.width-K,s),pe&&(e.fillStyle=D.bgHeaderHasFocus,e.fill()),de>0&&(e.globalAlpha=de,e.fillStyle=D.bgHeaderHovered,e.fill(),e.globalAlpha=1)),ja(e,N,G,F.width,s,F,P,D,he,pe,de,m,k,b),e.restore()}),n&&_g(e,t,o,i,l,r,h,m,p,g,y,w)}function ii(e,t,n,r,o,i,s,l){return e<=o+s&&o<=e+n&&t<=i+l&&i<=t+r}function Og(e,t,n,r,o,i,s,l,a){a===void 0||a.size===0||(e.beginPath(),Va(t,n,i,r,(c,u,h,m,p,g)=>{a.hasItemInRectangle({x:c[0],y:-2,width:c[1]-c[0]+1,height:1})&&e.rect(h,m,p,g)}),tr(t,l,i,s,o,(c,u,h,m)=>{const p=Math.max(0,m-u),g=u+p+1,y=c.width-p-1;a.has([c.sourceIndex,-1])&&e.rect(g,r,y,o-r)}),e.clip())}function Xa(e,t,n,r,o,i,s){var m;const[l,a]=e;let c,u;const h=((m=s.find(p=>!p.sticky))==null?void 0:m.sourceIndex)??0;if(a>h){const p=Math.max(l,h);let g=t,y=r;for(let w=i.sourceIndex-1;w>=p;w--)g-=s[w].width,y+=s[w].width;for(let w=i.sourceIndex+1;w<=a;w++)y+=s[w].width;u={x:g,y:n,width:y,height:o}}if(h>l){const p=Math.min(a,h-1);let g=t,y=r;for(let w=i.sourceIndex-1;w>=l;w--)g-=s[w].width,y+=s[w].width;for(let w=i.sourceIndex+1;w<=p;w++)y+=s[w].width;c={x:g,y:n,width:y,height:o}}return[c,u]}function yl(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,y,w,k,b,R,M,x,L,F,N,T,O,j,I,D,P,te,he,de,pe){let je=(R==null?void 0:R.size)??Number.MAX_SAFE_INTEGER;const G=performance.now();let K=D.baseFontFull;e.font=K;const oe={ctx:e},ae=[0,0],$e=w>0?Wr(a,w,c):0;let V,Me;return tr(t,l,i,s,o,(ce,Qe,Je,Xe,it)=>{const Ke=Math.max(0,Xe-Qe),be=Qe+Ke,ze=o+1,_e=ce.width-Ke,gt=r-o-1;if(b.length>0){let Z=!1;for(let Le=0;Le<b.length;Le++){const Ae=b[Le];if(ii(be,ze,_e,gt,Ae.x,Ae.y,Ae.width,Ae.height)){Z=!0;break}}if(!Z)return}const ge=()=>{e.save(),e.beginPath(),e.rect(be,ze,_e,gt),e.clip()},ue=M.columns.hasIndex(ce.sourceIndex),Ie=h(ce.group??"").overrideTheme,De=ce.themeOverride===void 0&&Ie===void 0?D:Jn(D,Ie,ce.themeOverride),xe=De.baseFontFull;xe!==K&&(K=xe,e.font=xe),ge();let He;return pi(it,Je,r,a,c,w,k,(Z,Le,Ae,ut,we)=>{var At,bn,Xt;if(Le<0||(ae[0]=ce.sourceIndex,ae[1]=Le,R!==void 0&&!R.has(ae)))return;if(b.length>0){let Re=!1;for(let lt=0;lt<b.length;lt++){const mt=b[lt];if(ii(Qe,Z,ce.width,Ae,mt.x,mt.y,mt.width,mt.height)){Re=!0;break}}if(!Re)return}const st=M.rows.hasIndex(Le),et=p.hasIndex(Le),Fe=Le<a?u(ae):Hg;let tt=Qe,rt=ce.width,Rt=!1,Dt=!1;if(Fe.span!==void 0){const[Re,lt]=Fe.span,mt=`${Le},${Re},${lt},${ce.sticky}`;if(Me===void 0&&(Me=new Set),Me.has(mt)){je--;return}else{const Fn=Xa(Fe.span,Qe,Z,ce.width,Ae,ce,n),Ge=ce.sticky?Fn[0]:Fn[1];if(!ce.sticky&&Fn[0]!==void 0&&(Dt=!0),Ge!==void 0){tt=Ge.x,rt=Ge.width,Me.add(mt),e.restore(),He=void 0,e.save(),e.beginPath();const Vt=Math.max(0,Xe-Ge.x);e.rect(Ge.x+Vt,Z,Ge.width-Vt,Ae),V===void 0&&(V=[]),V.push({x:Ge.x+Vt,y:Z,width:Ge.width-Vt,height:Ae}),e.clip(),Rt=!0}}}const $t=m==null?void 0:m(Le),Bt=we&&((At=ce.trailingRowOptions)==null?void 0:At.themeOverride)!==void 0?(bn=ce.trailingRowOptions)==null?void 0:bn.themeOverride:void 0,ft=Fe.themeOverride===void 0&&$t===void 0&&Bt===void 0?De:Jn(De,$t,Bt,Fe.themeOverride);e.beginPath();const Tn=yh(ae,Fe,M);let wt=wh(ae,Fe,M);const Wt=Fe.span!==void 0&&M.columns.some(Re=>Fe.span!==void 0&&Re>=Fe.span[0]&&Re<=Fe.span[1]);Tn&&!g&&y?wt=0:Tn&&(wt=Math.max(wt,1)),Wt&&wt++,Tn||(st&&wt++,ue&&!we&&wt++);const Zt=Fe.kind===re.Protected?ft.bgCellMedium:ft.bgCell;let Ne;if((ut||Zt!==D.bgCell)&&(Ne=on(Zt,Ne)),wt>0||et){et&&(Ne=on(ft.bgHeader,Ne));for(let Re=0;Re<wt;Re++)Ne=on(ft.accentLight,Ne)}else if(x!==void 0){for(const Re of x)if(Re[0]===ce.sourceIndex&&Re[1]===Le){Ne=on(ft.bgSearchResult,Ne);break}}if(L!==void 0)for(let Re=0;Re<L.length;Re++){const lt=L[Re],mt=lt.range;lt.style!=="solid-outline"&&mt.x<=ce.sourceIndex&&ce.sourceIndex<mt.x+mt.width&&mt.y<=Le&&Le<mt.y+mt.height&&(Ne=on(lt.color,Ne))}let jt=!1;if(R!==void 0){const Re=Z+1,mt=(ut?Re+Ae-1:Math.min(Re+Ae-1,r-$e))-Re;(mt!==Ae-1||tt+1<=Xe)&&(jt=!0,e.save(),e.beginPath(),e.rect(tt+1,Re,rt-1,mt),e.clip()),Ne=Ne===void 0?ft.bgCell:on(Ne,ft.bgCell)}const In=ce.sourceIndex===n.length-1,un=Le===a-1;Ne!==void 0&&(e.fillStyle=Ne,He!==void 0&&(He.fillStyle=Ne),R!==void 0?e.fillRect(tt+1,Z+1,rt-(In?2:1),Ae-(un?2:1)):e.fillRect(tt,Z,rt,Ae)),Fe.style==="faded"&&(e.globalAlpha=.6);let Pe;for(let Re=0;Re<T.length;Re++){const lt=T[Re];if(lt.item[0]===ce.sourceIndex&&lt.item[1]===Le){Pe=lt;break}}if(rt>pe&&!Dt){const Re=ft.baseFontFull;Re!==K&&(e.font=Re,K=Re),He=Oa(e,Fe,ce.sourceIndex,Le,In,un,tt,Z,rt,Ae,wt>0,ft,Ne??ft.bgCell,F,N,(Pe==null?void 0:Pe.hoverAmount)??0,O,I,G,j,He,P,te,he,de)}return jt&&e.restore(),Fe.style==="faded"&&(e.globalAlpha=1),je--,Rt&&(e.restore(),(Xt=He==null?void 0:He.deprep)==null||Xt.call(He,oe),He=void 0,ge(),K=xe,e.font=xe),je<=0}),e.restore(),je<=0}),V}function Bg(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,y,w,k,b){k!==void 0||t[t.length-1]!==n[t.length-1]||tr(t,a,s,l,i,(R,M,x,L,F)=>{if(R!==t[t.length-1])return;M+=R.width;const N=Math.max(M,L);N>r||(e.save(),e.beginPath(),e.rect(N,i+1,1e4,o-i-1),e.clip(),pi(F,x,o,c,u,g,y,(T,O,j,I)=>{if(!I&&w.length>0&&!w.some(de=>ii(M,T,1e4,j,de.x,de.y,de.width,de.height)))return;const D=m.hasIndex(O),P=p.hasIndex(O);e.beginPath();const te=h==null?void 0:h(O),he=te===void 0?b:Jn(b,te);he.bgCell!==b.bgCell&&(e.fillStyle=he.bgCell,e.fillRect(M,T,1e4,j)),P&&(e.fillStyle=he.bgHeader,e.fillRect(M,T,1e4,j)),D&&(e.fillStyle=he.accentLight,e.fillRect(M,T,1e4,j))}),e.restore())})}function Wg(e,t,n,r,o,i,s,l,a){let c=!1;for(const p of t)if(!p.sticky){c=s(p.sourceIndex);break}const u=a.horizontalBorderColor??a.borderColor,h=a.borderColor,m=c?Br(t):0;if(m!==0&&(e.beginPath(),e.moveTo(m+.5,0),e.lineTo(m+.5,r),e.strokeStyle=on(h,a.bgCell),e.stroke()),o>0){const p=Wr(i,o,l);e.beginPath(),e.moveTo(0,r-p+.5),e.lineTo(n,r-p+.5),e.strokeStyle=on(u,a.bgCell),e.stroke()}}function wl(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,y){const w=g==null?void 0:g.filter(F=>F.style!=="no-outline");if(w===void 0||w.length===0)return;const k=Br(l),b=Wr(p,m,h),R=[a,0,l.length,p-m],M=[k,0,t,n-b],x=w.map(F=>{const N=F.range,T=F.style??"dashed";return zg(N,R,t,n,M).map(O=>{const j=O.rect,I=ss(j.x,j.y,t,n,u,c+u,r,o,i,s,p,a,m,l,h),D=j.width===1&&j.height===1?I:ss(j.x+j.width-1,j.y+j.height-1,t,n,u,c+u,r,o,i,s,p,a,m,l,h);return j.x+j.width>=l.length&&(D.width-=1),j.y+j.height>=p&&(D.height-=1),{color:F.color,style:T,clip:O.clip,rect:Ag({x:I.x,y:I.y,width:D.x+D.width-I.x,height:D.y+D.height-I.y},t,n,8)}})}),L=()=>{e.lineWidth=1;let F=!1;for(const N of x)for(const T of N)if((T==null?void 0:T.rect)!==void 0&&ii(0,0,t,n,T.rect.x,T.rect.y,T.rect.width,T.rect.height)){const O=F,j=!Dg(T.clip,T.rect);j&&(e.save(),e.rect(T.clip.x,T.clip.y,T.clip.width,T.clip.height),e.clip()),T.style==="dashed"&&!F?(e.setLineDash([5,3]),F=!0):(T.style==="solid"||T.style==="solid-outline")&&F&&(e.setLineDash([]),F=!1),e.strokeStyle=T.style==="solid-outline"?on(on(T.color,y.borderColor),y.bgCell):Or(T.color,1),e.strokeRect(T.rect.x+.5,T.rect.y+.5,T.rect.width-1,T.rect.height-1),j&&(e.restore(),F=O)}F&&e.setLineDash([])};return L(),L}function bl(e,t,n,r,o){e.beginPath(),e.moveTo(t,n),e.lineTo(t,r),e.lineWidth=2,e.strokeStyle=o,e.stroke(),e.globalAlpha=1}function Vi(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,y,w){if(u.current===void 0)return;const k=u.current.range,b=u.current.cell,R=[k.x+k.width-1,k.y+k.height-1];if(b[1]>=w&&R[1]>=w||!s.some(te=>te.sourceIndex===b[0]||te.sourceIndex===R[0]))return;const[x,L]=u.current.cell,F=m(u.current.cell),N=F.span??[x,x],T=L>=w-p,O=p>0&&!T?Wr(w,p,h)-1:0,j=R[1];let I,D;if(tr(s,r,o,i,c,(te,he,de,pe,je)=>{if(te.sticky&&x>te.sourceIndex)return;const G=te.sourceIndex<N[0],K=te.sourceIndex>N[1],oe=te.sourceIndex===R[0];if(!(!oe&&(G||K)))return pi(je,de,n,w,h,p,g,(ae,$e,V)=>{if($e!==L&&$e!==j)return;let Me=he,ce=te.width;const Qe=te.sourceIndex===l.length-1,Je=$e===w-1;if(F.span!==void 0){const Ke=Xa(F.span,he,ae,te.width,V,te,l),be=te.sticky?Ke[0]:Ke[1];be!==void 0&&(Me=be.x,ce=be.width)}const Xe=$e===j&&oe&&y,it=$e===L&&!G&&!K&&I===void 0;return Xe&&(D=()=>{var Ke;pe>Me&&!te.sticky&&!it&&(e.beginPath(),e.rect(pe,0,t-pe,n),e.clip()),e.beginPath(),e.rect(Me+ce-4,ae+V-4,4,4),e.fillStyle=((Ke=te.themeOverride)==null?void 0:Ke.accentColor)??a.accentColor,e.fill()}),it&&(I=()=>{var Ke;pe>Me&&!te.sticky&&(e.beginPath(),e.rect(pe,0,t-pe,n),e.clip()),e.beginPath(),e.rect(Me+.5,ae+.5,ce-(Qe?1:0),V-(Je?1:0)),e.strokeStyle=((Ke=te.themeOverride)==null?void 0:Ke.accentColor)??a.accentColor,e.lineWidth=1,e.stroke()}),I!==void 0&&(y?D!==void 0:!0)}),I!==void 0&&(y?D!==void 0:!0)}),I===void 0&&D===void 0)return;const P=()=>{e.save(),e.beginPath(),e.rect(0,c,t,n-c-O),e.clip(),I==null||I(),D==null||D(),e.restore()};return P(),P}function jg(e,t,n,r,o,i,s,l,a,c){let u=0;return tr(e,i,r,o,n,(h,m,p,g,y)=>(pi(y,p,t,s,l,a,c,(w,k,b,R)=>{R||(u=Math.max(k,u))}),!0)),u}function Xg(e,t){if(t===void 0||e.width!==t.width||e.height!==t.height||e.theme!==t.theme||e.headerHeight!==t.headerHeight||e.rowHeight!==t.rowHeight||e.rows!==t.rows||e.freezeColumns!==t.freezeColumns||e.getRowThemeOverride!==t.getRowThemeOverride||e.isFocused!==t.isFocused||e.isResizing!==t.isResizing||e.verticalBorder!==t.verticalBorder||e.getCellContent!==t.getCellContent||e.highlightRegions!==t.highlightRegions||e.selection!==t.selection||e.dragAndDropState!==t.dragAndDropState||e.prelightCells!==t.prelightCells||e.touchMode!==t.touchMode||e.maxScaleFactor!==t.maxScaleFactor)return!1;if(e.mappedColumns!==t.mappedColumns){if(e.mappedColumns.length>100||e.mappedColumns.length!==t.mappedColumns.length)return!1;let n;for(let r=0;r<e.mappedColumns.length;r++){const o=e.mappedColumns[r],i=t.mappedColumns[r];if(Nr(o,i))continue;if(n!==void 0||o.width===i.width)return!1;const{width:s,...l}=o,{width:a,...c}=i;if(!Nr(l,c))return!1;n=r}return n===void 0?!0:n}return!0}function xl(e,t){var Zt;const{canvas:n,headerCanvas:r,width:o,height:i,cellXOffset:s,cellYOffset:l,translateX:a,translateY:c,mappedColumns:u,enableGroups:h,freezeColumns:m,dragAndDropState:p,theme:g,drawFocus:y,headerHeight:w,groupHeaderHeight:k,disabledRows:b,rowHeight:R,verticalBorder:M,overrideCursor:x,isResizing:L,selection:F,fillHandle:N,freezeTrailingRows:T,rows:O,getCellContent:j,getGroupDetails:I,getRowThemeOverride:D,isFocused:P,drawHeaderCallback:te,prelightCells:he,drawCellCallback:de,highlightRegions:pe,resizeCol:je,imageLoader:G,lastBlitData:K,hoverValues:oe,hyperWrapping:ae,hoverInfo:$e,spriteManager:V,maxScaleFactor:Me,hasAppendRow:ce,touchMode:Qe,enqueue:Je,renderStateProvider:Xe,getCellRenderer:it,renderStrategy:Ke,bufferA:be,bufferB:ze,damage:_e,minimumCellWidth:gt}=e;if(o===0||i===0)return;const ge=Ke==="double-buffer",ue=Math.min(Me,Math.ceil(window.devicePixelRatio??1)),Ie=Ke!=="direct"&&Xg(e,t);(n.width!==o*ue||n.height!==i*ue)&&(n.width=o*ue,n.height=i*ue,n.style.width=o+"px",n.style.height=i+"px");const De=r,xe=h?k+w:w,He=xe+1;(De.width!==o*ue||De.height!==He*ue)&&(De.width=o*ue,De.height=He*ue,De.style.width=o+"px",De.style.height=He+"px"),ge&&(be.width!==o*ue||be.height!==i*ue)&&(be.width=o*ue,be.height=i*ue,K.current!==void 0&&(K.current.aBufferScroll=void 0)),ge&&(ze.width!==o*ue||ze.height!==i*ue)&&(ze.width=o*ue,ze.height=i*ue,K.current!==void 0&&(K.current.bBufferScroll=void 0));const Z=K.current;if(Ie===!0&&s===(Z==null?void 0:Z.cellXOffset)&&l===(Z==null?void 0:Z.cellYOffset)&&a===(Z==null?void 0:Z.translateX)&&c===(Z==null?void 0:Z.translateY))return;let Le=null;ge&&(Le=n.getContext("2d",{alpha:!1}));const Ae=De.getContext("2d",{alpha:!1});let ut;ge?_e!==void 0?ut=(Z==null?void 0:Z.lastBuffer)==="b"?ze:be:ut=(Z==null?void 0:Z.lastBuffer)==="b"?be:ze:ut=n;const we=ut.getContext("2d",{alpha:!1}),st=ge?ut===be?ze:be:n;if(Ae===null||we===null)return;const et=typeof R=="number"?()=>R:R;Ae.save(),we.save(),Ae.beginPath(),we.beginPath(),Ae.textBaseline="middle",we.textBaseline="middle",ue!==1&&(Ae.scale(ue,ue),we.scale(ue,ue));const Fe=is(u,s,o,p,a);let tt=[];const rt=y&&((Zt=F.current)==null?void 0:Zt.cell[1])===l&&c===0;let Rt=!1;if(pe!==void 0){for(const Ne of pe)if(Ne.style!=="no-outline"&&Ne.range.y===l&&c===0){Rt=!0;break}}const Dt=()=>{Ng(Ae,Fe,h,$e,o,a,w,k,p,L,F,g,V,oe,M,I,_e,te,Qe),ml(Ae,Fe,l,a,c,o,i,void 0,void 0,k,xe,et,D,M,T,O,g,!0),Ae.beginPath(),Ae.moveTo(0,He-.5),Ae.lineTo(o,He-.5),Ae.strokeStyle=on(g.headerBottomBorderColor??g.horizontalBorderColor??g.borderColor,g.bgHeader),Ae.stroke(),Rt&&wl(Ae,o,i,s,l,a,c,u,m,w,k,R,T,O,pe,g),rt&&Vi(Ae,o,i,l,a,c,Fe,u,g,xe,F,et,j,T,ce,N,O)};if(_e!==void 0){const Ne=Fe[Fe.length-1].sourceIndex+1,jt=_e.hasItemInRegion([{x:s,y:-2,width:Ne,height:2},{x:s,y:l,width:Ne,height:300},{x:0,y:l,width:m,height:300},{x:s,y:O-T,width:Ne,height:T,when:T>0}]),In=un=>{yl(un,Fe,u,i,xe,a,c,l,O,et,j,I,D,b,P,y,T,ce,tt,_e,F,he,pe,G,V,oe,$e,de,ae,g,Je,Xe,it,x,gt);const Pe=F.current;N&&y&&Pe!==void 0&&_e.has(Ta(Pe.range))&&Vi(un,o,i,l,a,c,Fe,u,g,xe,F,et,j,T,ce,N,O)};jt&&(In(we),Le!==null&&(Le.save(),Le.scale(ue,ue),Le.textBaseline="middle",In(Le),Le.restore()),_e.hasHeader()&&(Og(Ae,Fe,o,k,xe,a,c,l,_e),Dt())),we.restore(),Ae.restore();return}if((Ie!==!0||s!==(Z==null?void 0:Z.cellXOffset)||a!==(Z==null?void 0:Z.translateX)||rt!==(Z==null?void 0:Z.mustDrawFocusOnHeader)||Rt!==(Z==null?void 0:Z.mustDrawHighlightRingsOnHeader))&&Dt(),Ie===!0){rn(st!==void 0&&Z!==void 0);const{regions:Ne}=Pg(we,st,st===be?Z.aBufferScroll:Z.bBufferScroll,st===be?Z.bBufferScroll:Z.aBufferScroll,Z,s,l,a,c,T,o,i,O,xe,ue,u,Fe,R,ge);tt=Ne}else Ie!==!1&&(rn(Z!==void 0),tt=$g(Z,s,l,a,c,o,i,xe,Fe,Ie));Wg(we,Fe,o,i,T,O,M,et,g);const $t=wl(we,o,i,s,l,a,c,u,m,w,k,R,T,O,pe,g),Bt=y?Vi(we,o,i,l,a,c,Fe,u,g,xe,F,et,j,T,ce,N,O):void 0;if(we.fillStyle=g.bgCell,tt.length>0){we.beginPath();for(const Ne of tt)we.rect(Ne.x,Ne.y,Ne.width,Ne.height);we.clip(),we.fill(),we.beginPath()}else we.fillRect(0,0,o,i);const ft=yl(we,Fe,u,i,xe,a,c,l,O,et,j,I,D,b,P,y,T,ce,tt,_e,F,he,pe,G,V,oe,$e,de,ae,g,Je,Xe,it,x,gt);Bg(we,Fe,u,o,i,xe,a,c,l,O,et,D,F.rows,b,T,ce,tt,_e,g),ml(we,Fe,l,a,c,o,i,tt,ft,k,xe,et,D,M,T,O,g),$t==null||$t(),Bt==null||Bt(),L&&tr(Fe,0,a,0,xe,(Ne,jt)=>Ne.sourceIndex===je?(bl(Ae,jt+Ne.width,0,xe+1,on(g.resizeIndicatorColor??g.accentLight,g.bgHeader)),bl(we,jt+Ne.width,xe,i,on(g.resizeIndicatorColor??g.accentLight,g.bgCell)),!0):!1),Le!==null&&(Le.fillStyle=g.bgCell,Le.fillRect(0,0,o,i),Le.drawImage(we.canvas,0,0));const Tn=jg(Fe,i,xe,a,c,l,O,et,T,ce);G==null||G.setWindow({x:s,y:l,width:Fe.length,height:Tn-l},m,Array.from({length:T},(Ne,jt)=>O-1-jt));const wt=Z!==void 0&&(s!==Z.cellXOffset||a!==Z.translateX),Wt=Z!==void 0&&(l!==Z.cellYOffset||c!==Z.translateY);K.current={cellXOffset:s,cellYOffset:l,translateX:a,translateY:c,mustDrawFocusOnHeader:rt,mustDrawHighlightRingsOnHeader:Rt,lastBuffer:ge?ut===be?"a":"b":void 0,aBufferScroll:ut===be?[wt,Wt]:Z==null?void 0:Z.aBufferScroll,bBufferScroll:ut===ze?[wt,Wt]:Z==null?void 0:Z.bBufferScroll},we.restore(),Ae.restore()}function pi(e,t,n,r,o,i,s,l){let a=t,c=e;const u=r-i;for(;a<n&&c<u;){const h=o(c);if(l(a,c,h,!1,s&&c===r-1)===!0)break;a+=h,c++}a=n;for(let h=0;h<i;h++){c=r-1-h;const m=o(c);a-=m,l(a,c,m,!0,s&&c===r-1)}}function tr(e,t,n,r,o,i){let s=0,l=0;const a=o+r;for(const c of e){const u=c.sticky?l:s+n;if(i(c,u,a,l,t)===!0)break;s+=c.width,l+=c.sticky?c.width:0}}function Va(e,t,n,r,o){let i=0,s=0;for(let l=0;l<e.length;l++){const a=e[l];let c=l+1,u=a.width;for(a.sticky&&(s+=u);c<e.length&&xo(e[c].group,a.group)&&e[c].sticky===e[l].sticky;){const y=e[c];u+=y.width,c++,l++,y.sticky&&(s+=y.width)}const h=a.sticky?0:n,m=i+h,p=a.sticky?0:Math.max(0,s-m),g=Math.min(u-p,t-(m+p));o([a.sourceIndex,e[c-1].sourceIndex],a.group??"",m+p,0,g,r),i+=u}}const Vg=80;function Yg(e){const t=e-1;return t*t*t+1}class Ug{constructor(t){fe(this,"callback");fe(this,"currentHoveredItem");fe(this,"leavingItems",[]);fe(this,"lastAnimationTime");fe(this,"addToLeavingItems",t=>{this.leavingItems.some(r=>mo(r.item,t.item))||this.leavingItems.push(t)});fe(this,"removeFromLeavingItems",t=>{const n=this.leavingItems.find(r=>mo(r.item,t));return this.leavingItems=this.leavingItems.filter(r=>r!==n),(n==null?void 0:n.hoverAmount)??0});fe(this,"cleanUpLeavingElements",()=>{this.leavingItems=this.leavingItems.filter(t=>t.hoverAmount>0)});fe(this,"shouldStep",()=>{const t=this.leavingItems.length>0,n=this.currentHoveredItem!==void 0&&this.currentHoveredItem.hoverAmount<1;return t||n});fe(this,"getAnimatingItems",()=>this.currentHoveredItem!==void 0?[...this.leavingItems,this.currentHoveredItem]:this.leavingItems.map(t=>({...t,hoverAmount:Yg(t.hoverAmount)})));fe(this,"step",t=>{if(this.lastAnimationTime===void 0)this.lastAnimationTime=t;else{const r=(t-this.lastAnimationTime)/Vg;for(const i of this.leavingItems)i.hoverAmount=yn(i.hoverAmount-r,0,1);this.currentHoveredItem!==void 0&&(this.currentHoveredItem.hoverAmount=yn(this.currentHoveredItem.hoverAmount+r,0,1));const o=this.getAnimatingItems();this.callback(o),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=t,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0});fe(this,"setHovered",t=>{var n;if(!mo((n=this.currentHoveredItem)==null?void 0:n.item,t)){if(this.currentHoveredItem!==void 0&&this.addToLeavingItems(this.currentHoveredItem),t!==void 0){const r=this.removeFromLeavingItems(t);this.currentHoveredItem={item:t,hoverAmount:r}}else this.currentHoveredItem=void 0;this.lastAnimationTime===void 0&&window.requestAnimationFrame(this.step)}});this.callback=t}}class Kg{constructor(t){fe(this,"fn");fe(this,"val");this.fn=t}get value(){return this.val??(this.val=this.fn())}}function Rs(e){return new Kg(e)}const qg=Rs(()=>window.navigator.userAgent.includes("Firefox")),si=Rs(()=>window.navigator.userAgent.includes("Mac OS")&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")),li=Rs(()=>window.navigator.platform.toLowerCase().startsWith("mac"));function Gg(e){const t=d.useRef([]),n=d.useRef(0),r=d.useRef(e);r.current=e;const o=d.useCallback(()=>{const i=()=>window.requestAnimationFrame(s),s=()=>{const l=t.current.map(Ss);t.current=[],r.current(new yo(l)),t.current.length>0?n.current++:n.current=0};window.requestAnimationFrame(n.current>600?i:s)},[]);return d.useCallback(i=>{t.current.length===0&&o();const s=wn(i[0],i[1]);t.current.includes(s)||t.current.push(s)},[o])}const qn="header",nn="group-header",ai="out-of-bounds";var _r;(function(e){e[e.Start=-2]="Start",e[e.StartPadding=-1]="StartPadding",e[e.Center=0]="Center",e[e.EndPadding=1]="EndPadding",e[e.End=2]="End"})(_r||(_r={}));function Ya(e,t){return e===t?!0:(e==null?void 0:e.kind)==="out-of-bounds"?(e==null?void 0:e.kind)===(t==null?void 0:t.kind)&&(e==null?void 0:e.location[0])===(t==null?void 0:t.location[0])&&(e==null?void 0:e.location[1])===(t==null?void 0:t.location[1])&&(e==null?void 0:e.region[0])===(t==null?void 0:t.region[0])&&(e==null?void 0:e.region[1])===(t==null?void 0:t.region[1]):(e==null?void 0:e.kind)===(t==null?void 0:t.kind)&&(e==null?void 0:e.location[0])===(t==null?void 0:t.location[0])&&(e==null?void 0:e.location[1])===(t==null?void 0:t.location[1])}const vl=6,Zg=(e,t)=>{if(e.kind===re.Custom)return e.copyData;const n=t==null?void 0:t(e);return(n==null?void 0:n.getAccessibilityString(e))??""},Qg=(e,t)=>{const{width:n,height:r,accessibilityHeight:o,columns:i,cellXOffset:s,cellYOffset:l,headerHeight:a,fillHandle:c=!1,groupHeaderHeight:u,rowHeight:h,rows:m,getCellContent:p,getRowThemeOverride:g,onHeaderMenuClick:y,enableGroups:w,isFilling:k,onCanvasFocused:b,onCanvasBlur:R,isFocused:M,selection:x,freezeColumns:L,onContextMenu:F,freezeTrailingRows:N,fixedShadowX:T=!0,fixedShadowY:O=!0,drawFocusRing:j=!0,onMouseDown:I,onMouseUp:D,onMouseMoveRaw:P,onMouseMove:te,onItemHovered:he,dragAndDropState:de,firstColAccessible:pe,onKeyDown:je,onKeyUp:G,highlightRegions:K,canvasRef:oe,onDragStart:ae,onDragEnd:$e,eventTargetRef:V,isResizing:Me,resizeColumn:ce,isDragging:Qe,isDraggable:Je=!1,allowResize:Xe,disabledRows:it,hasAppendRow:Ke,getGroupDetails:be,theme:ze,prelightCells:_e,headerIcons:gt,verticalBorder:ge,drawCell:ue,drawHeader:Ie,onCellFocused:De,onDragOverCell:xe,onDrop:He,onDragLeave:Z,imageWindowLoader:Le,smoothScrollX:Ae=!1,smoothScrollY:ut=!1,experimental:we,getCellRenderer:st}=e,et=e.translateX??0,Fe=e.translateY??0,tt=Math.max(L,Math.min(i.length-1,s)),rt=d.useRef(null),Rt=Le,Dt=d.useRef(),[$t,Bt]=d.useState(!1),ft=d.useRef([]),Tn=d.useRef(),[wt,Wt]=d.useState(),[Zt,Ne]=d.useState(),jt=d.useRef(null),[In,un]=d.useState(),[Pe,At]=d.useState(!1),bn=d.useRef(Pe);bn.current=Pe;const Xt=d.useMemo(()=>new Ig(gt,()=>{wr.current=void 0,dn.current()}),[gt]),Re=w?u+a:a,lt=d.useRef(-1),mt=((we==null?void 0:we.enableFirefoxRescaling)??!1)&&qg.value,Fn=((we==null?void 0:we.enableSafariRescaling)??!1)&&si.value;d.useLayoutEffect(()=>{window.devicePixelRatio===1||!mt&&!Fn||(lt.current!==-1&&Bt(!0),window.clearTimeout(lt.current),lt.current=window.setTimeout(()=>{Bt(!1),lt.current=-1},200))},[l,tt,et,Fe,mt,Fn]);const Ge=mh(i,L),Vt=T?Br(Ge,de):0,ht=d.useCallback((S,Y,J)=>{const Q=S.getBoundingClientRect();if(Y>=Ge.length||J>=m)return;const q=Q.width/n,se=ss(Y,J,n,r,u,Re,tt,l,et,Fe,m,L,N,Ge,h);return q!==1&&(se.x*=q,se.y*=q,se.width*=q,se.height*=q),se.x+=Q.x,se.y+=Q.y,se},[n,r,u,Re,tt,l,et,Fe,m,L,N,Ge,h]),bt=d.useCallback((S,Y,J,Q)=>{const q=S.getBoundingClientRect(),se=q.width/n,Ee=(Y-q.left)/se,me=(J-q.top)/se,ie=5,xt=is(Ge,tt,n,void 0,et);let ye=0,Ze=0;Q instanceof MouseEvent&&(ye=Q.button,Ze=Q.buttons);const Oe=bh(Ee,xt,et),Ve=xh(me,r,w,a,u,m,h,l,Fe,N),Te=(Q==null?void 0:Q.shiftKey)===!0,Ut=(Q==null?void 0:Q.ctrlKey)===!0,yt=(Q==null?void 0:Q.metaKey)===!0,dt=Q!==void 0&&!(Q instanceof MouseEvent)||(Q==null?void 0:Q.pointerType)==="touch",vn=[Ee<0?-1:n<Ee?1:0,me<Re?-1:r<me?1:0];let It;if(Oe===-1||me<0||Ee<0||Ve===void 0||Ee>n||me>r){const Ye=Ee>n?1:Ee<0?-1:0,Kt=me>r?1:me<0?-1:0;let _t=Ye*2,Xn=Kt*2;Ye===0&&(_t=Oe===-1?_r.EndPadding:_r.Center),Kt===0&&(Xn=Ve===void 0?_r.EndPadding:_r.Center);let hn=!1;if(Oe===-1&&Ve===-1){const kn=ht(S,Ge.length-1,-1);rn(kn!==void 0),hn=Y<kn.x+kn.width+ie}const Ur=Ee>n&&Ee<n+es()||me>r&&me<r+es();It={kind:ai,location:[Oe!==-1?Oe:Ee<0?0:Ge.length-1,Ve??m-1],region:[_t,Xn],shiftKey:Te,ctrlKey:Ut,metaKey:yt,isEdge:hn,isTouch:dt,button:ye,buttons:Ze,scrollEdge:vn,isMaybeScrollbar:Ur}}else if(Ve<=-1){let Ye=ht(S,Oe,Ve);rn(Ye!==void 0);let Kt=Ye!==void 0&&Ye.x+Ye.width-Y<=ie;const _t=Oe-1;Y-Ye.x<=ie&&_t>=0?(Kt=!0,Ye=ht(S,_t,Ve),rn(Ye!==void 0),It={kind:w&&Ve===-2?nn:qn,location:[_t,Ve],bounds:Ye,group:Ge[_t].group??"",isEdge:Kt,shiftKey:Te,ctrlKey:Ut,metaKey:yt,isTouch:dt,localEventX:Y-Ye.x,localEventY:J-Ye.y,button:ye,buttons:Ze,scrollEdge:vn}):It={kind:w&&Ve===-2?nn:qn,group:Ge[Oe].group??"",location:[Oe,Ve],bounds:Ye,isEdge:Kt,shiftKey:Te,ctrlKey:Ut,metaKey:yt,isTouch:dt,localEventX:Y-Ye.x,localEventY:J-Ye.y,button:ye,buttons:Ze,scrollEdge:vn}}else{const Ye=ht(S,Oe,Ve);rn(Ye!==void 0);const Kt=Ye!==void 0&&Ye.x+Ye.width-Y<ie;let _t=!1;if(c&&x.current!==void 0){const Xn=Ta(x.current.range),hn=ht(S,Xn[0],Xn[1]);if(hn!==void 0){const Ur=hn.x+hn.width-2,kn=hn.y+hn.height-2;_t=Math.abs(Ur-Y)<vl&&Math.abs(kn-J)<vl}}It={kind:"cell",location:[Oe,Ve],bounds:Ye,isEdge:Kt,shiftKey:Te,ctrlKey:Ut,isFillHandle:_t,metaKey:yt,isTouch:dt,localEventX:Y-Ye.x,localEventY:J-Ye.y,button:ye,buttons:Ze,scrollEdge:vn}}return It},[n,Ge,tt,et,r,w,a,u,m,h,l,Fe,N,ht,c,x,Re]),[Dn]=wt??[],So=d.useRef(()=>{}),pt=d.useRef(wt);pt.current=wt;const[nr,rr]=d.useMemo(()=>{const S=document.createElement("canvas"),Y=document.createElement("canvas");return S.style.display="none",S.style.opacity="0",S.style.position="fixed",Y.style.display="none",Y.style.opacity="0",Y.style.position="fixed",[S,Y]},[]);d.useLayoutEffect(()=>(document.documentElement.append(nr),document.documentElement.append(rr),()=>{nr.remove(),rr.remove()}),[nr,rr]);const yr=d.useMemo(()=>new Fh,[]),Mo=mt&&$t?1:Fn&&$t?2:5,Ro=(we==null?void 0:we.disableMinimumCellWidth)===!0?1:10,wr=d.useRef(),br=d.useCallback(()=>{var Ee;const S=rt.current,Y=jt.current;if(S===null||Y===null)return;let J=!1;const Q=me=>{J=!0,un(me)},q=wr.current,se={canvas:S,bufferA:nr,bufferB:rr,headerCanvas:Y,width:n,height:r,cellXOffset:tt,cellYOffset:l,translateX:Math.round(et),translateY:Math.round(Fe),mappedColumns:Ge,enableGroups:w,freezeColumns:L,dragAndDropState:de,theme:ze,headerHeight:a,groupHeaderHeight:u,disabledRows:it??qe.empty(),rowHeight:h,verticalBorder:ge,isResizing:Me,resizeCol:ce,isFocused:M,selection:x,fillHandle:c,drawCellCallback:ue,hasAppendRow:Ke,overrideCursor:Q,maxScaleFactor:Mo,freezeTrailingRows:N,rows:m,drawFocus:j,getCellContent:p,getGroupDetails:be??(me=>({name:me})),getRowThemeOverride:g,drawHeaderCallback:Ie,prelightCells:_e,highlightRegions:K,imageLoader:Rt,lastBlitData:Tn,damage:Dt.current,hoverValues:ft.current,hoverInfo:pt.current,spriteManager:Xt,scrolling:$t,hyperWrapping:(we==null?void 0:we.hyperWrapping)??!1,touchMode:Pe,enqueue:So.current,renderStateProvider:yr,renderStrategy:(we==null?void 0:we.renderStrategy)??(si.value?"double-buffer":"single-buffer"),getCellRenderer:st,minimumCellWidth:Ro};se.damage===void 0?(wr.current=se,xl(se,q)):xl(se,void 0),!J&&(se.damage===void 0||se.damage.has((Ee=pt==null?void 0:pt.current)==null?void 0:Ee[0]))&&un(void 0)},[nr,rr,n,r,tt,l,et,Fe,Ge,w,L,de,ze,a,u,it,h,ge,Me,Ke,ce,M,x,c,N,m,j,Mo,p,be,g,ue,Ie,_e,K,Rt,Xt,$t,we==null?void 0:we.hyperWrapping,we==null?void 0:we.renderStrategy,Pe,yr,st,Ro]),dn=d.useRef(br);d.useLayoutEffect(()=>{br(),dn.current=br},[br]),d.useLayoutEffect(()=>{(async()=>{var Y;((Y=document==null?void 0:document.fonts)==null?void 0:Y.ready)!==void 0&&(await document.fonts.ready,wr.current=void 0,dn.current())})()},[]);const _n=d.useCallback(S=>{Dt.current=S,dn.current(),Dt.current=void 0},[]),wi=Gg(_n);So.current=wi;const Eo=d.useCallback(S=>{_n(new yo(S.map(Y=>Y.cell)))},[_n]);Rt.setCallback(_n);const[bi,xi]=d.useState(!1),[or,Nn]=Dn??[],vi=or!==void 0&&Nn===-1,ki=or!==void 0&&Nn===-2;let To=!1,jr=!1,xr=In;if(xr===void 0&&or!==void 0&&Nn!==void 0&&Nn>-1&&Nn<m){const S=p([or,Nn],!0);To=S.kind===cn.NewRow||S.kind===cn.Marker&&S.markerKind!=="number",jr=S.kind===re.Boolean&&Ji(S),xr=S.cursor}const Io=Qe?"grabbing":(Zt??!1)||Me?"col-resize":bi||k?"crosshair":xr!==void 0?xr:vi||To||jr||ki?"pointer":"default",ir=d.useMemo(()=>({contain:"strict",display:"block",cursor:Io}),[Io]),An=d.useRef("default"),On=V==null?void 0:V.current;On!=null&&An.current!==ir.cursor&&(On.style.cursor=An.current=ir.cursor);const Bn=d.useCallback((S,Y,J,Q)=>{if(be===void 0)return;const q=be(S);if(q.actions!==void 0){const se=Ba(Y,q.actions);for(const[Ee,me]of se.entries())if(mi(me,J+Y.x,Q+me.y))return q.actions[Ee]}},[be]),sr=d.useCallback((S,Y,J,Q)=>{const q=i[Y];if(!Qe&&!Me&&q.hasMenu===!0&&!(Zt??!1)){const se=ht(S,Y,-1);rn(se!==void 0);const Ee=Wa(se.x,se.y,se.width,se.height,gs(q.title)==="rtl");if(J>Ee.x&&J<Ee.x+Ee.width&&Q>Ee.y&&Q<Ee.y+Ee.height)return se}},[i,ht,Zt,Qe,Me]),vr=d.useRef(0),lr=d.useRef(),zt=d.useRef(!1),kr=d.useCallback(S=>{const Y=rt.current,J=V==null?void 0:V.current;if(Y===null||S.target!==Y&&S.target!==J)return;zt.current=!0;let Q,q;if(S instanceof MouseEvent?(Q=S.clientX,q=S.clientY):(Q=S.touches[0].clientX,q=S.touches[0].clientY),S.target===J&&J!==null){const Ee=J.getBoundingClientRect();if(Q>Ee.right||q>Ee.bottom)return}const se=bt(Y,Q,q,S);lr.current=se.location,se.isTouch&&(vr.current=Date.now()),bn.current!==se.isTouch&&At(se.isTouch),!(se.kind===qn&&sr(Y,se.location[0],Q,q)!==void 0)&&(se.kind===nn&&Bn(se.group,se.bounds,se.localEventX,se.localEventY)!==void 0||(I==null||I(se),!se.isTouch&&Je!==!0&&Je!==se.kind&&se.button<3&&se.button!==1&&S.preventDefault()))},[V,Je,bt,Bn,sr,I]);Ft("touchstart",kr,window,!1),Ft("mousedown",kr,window,!1);const Xr=d.useRef(0),Vr=d.useCallback(S=>{var Ze,Oe;const Y=Xr.current;Xr.current=Date.now();const J=rt.current;if(zt.current=!1,D===void 0||J===null)return;const Q=V==null?void 0:V.current,q=S.target!==J&&S.target!==Q;let se,Ee,me=!0;if(S instanceof MouseEvent){if(se=S.clientX,Ee=S.clientY,me=S.button<3,S.pointerType==="touch")return}else se=S.changedTouches[0].clientX,Ee=S.changedTouches[0].clientY;let ie=bt(J,se,Ee,S);ie.isTouch&&vr.current!==0&&Date.now()-vr.current>500&&(ie={...ie,isLongTouch:!0}),Y!==0&&Date.now()-Y<(ie.isTouch?1e3:500)&&(ie={...ie,isDoubleClick:!0}),bn.current!==ie.isTouch&&At(ie.isTouch),!q&&S.cancelable&&me&&S.preventDefault();const[xt]=ie.location,ye=sr(J,xt,se,Ee);if(ie.kind===qn&&ye!==void 0){(ie.button!==0||((Ze=lr.current)==null?void 0:Ze[0])!==xt||((Oe=lr.current)==null?void 0:Oe[1])!==-1)&&D(ie,!0);return}else if(ie.kind===nn){const Ve=Bn(ie.group,ie.bounds,ie.localEventX,ie.localEventY);if(Ve!==void 0){ie.button===0&&Ve.onClick(ie);return}}D(ie,q)},[D,V,bt,sr,Bn]);Ft("mouseup",Vr,window,!1),Ft("touchend",Vr,window,!1);const Ci=d.useCallback(S=>{var ye,Ze;const Y=rt.current;if(Y===null)return;const J=V==null?void 0:V.current,Q=S.target!==Y&&S.target!==J;let q,se,Ee=!0;S instanceof MouseEvent?(q=S.clientX,se=S.clientY,Ee=S.button<3):(q=S.changedTouches[0].clientX,se=S.changedTouches[0].clientY);const me=bt(Y,q,se,S);bn.current!==me.isTouch&&At(me.isTouch),!Q&&S.cancelable&&Ee&&S.preventDefault();const[ie]=me.location,xt=sr(Y,ie,q,se);if(me.kind===qn&&xt!==void 0)me.button===0&&((ye=lr.current)==null?void 0:ye[0])===ie&&((Ze=lr.current)==null?void 0:Ze[1])===-1&&(y==null||y(ie,xt));else if(me.kind===nn){const Oe=Bn(me.group,me.bounds,me.localEventX,me.localEventY);Oe!==void 0&&me.button===0&&Oe.onClick(me)}},[V,bt,sr,y,Bn]);Ft("click",Ci,window,!1);const Si=d.useCallback(S=>{const Y=rt.current,J=V==null?void 0:V.current;if(Y===null||S.target!==Y&&S.target!==J||F===void 0)return;const Q=bt(Y,S.clientX,S.clientY,S);F(Q,()=>{S.cancelable&&S.preventDefault()})},[V,bt,F]);Ft("contextmenu",Si,(V==null?void 0:V.current)??null,!1);const fn=d.useCallback(S=>{Dt.current=new yo(S.map(Y=>Y.item)),ft.current=S,dn.current(),Dt.current=void 0},[]),zn=d.useMemo(()=>new Ug(fn),[fn]),Qt=d.useRef(zn);Qt.current=zn,d.useLayoutEffect(()=>{const S=Qt.current;if(Dn===void 0||Dn[1]<0){S.setHovered(Dn);return}const Y=p(Dn,!0),J=st(Y);S.setHovered(J===void 0&&Y.kind===re.Custom||(J==null?void 0:J.needsHover)===!0?Dn:void 0)},[p,st,Dn]);const H=d.useRef(),Et=d.useCallback(S=>{var me;const Y=rt.current;if(Y===null)return;const J=V==null?void 0:V.current,Q=S.target!==Y&&S.target!==J,q=bt(Y,S.clientX,S.clientY,S);if(q.kind!=="out-of-bounds"&&Q&&!zt.current&&!q.isTouch)return;const se=(ie,xt)=>{Wt(ye=>ye===ie||(ye==null?void 0:ye[0][0])===(ie==null?void 0:ie[0][0])&&(ye==null?void 0:ye[0][1])===(ie==null?void 0:ie[0][1])&&((ye==null?void 0:ye[1][0])===(ie==null?void 0:ie[1][0])&&(ye==null?void 0:ye[1][1])===(ie==null?void 0:ie[1][1])||!xt)?ye:ie)};if(!Ya(q,H.current))he==null||he(q),se(q.kind===ai?void 0:[q.location,[q.localEventX,q.localEventY]],!0),H.current=q;else if(q.kind==="cell"||q.kind===qn||q.kind===nn){let ie=!1,xt=!0;if(q.kind==="cell"){const Ze=p(q.location);xt=((me=st(Ze))==null?void 0:me.needsHoverPosition)??Ze.kind===re.Custom,ie=xt}else q.kind===nn&&(ie=!0);const ye=[q.location,[q.localEventX,q.localEventY]];se(ye,xt),pt.current=ye,ie&&_n(new yo([q.location]))}const Ee=q.location[0]>=(pe?0:1);Ne(q.kind===qn&&q.isEdge&&Ee&&Xe===!0),xi(q.kind==="cell"&&q.isFillHandle),P==null||P(S),te(q)},[V,bt,pe,Xe,P,te,he,p,st,_n]);Ft("mousemove",Et,window,!0);const Jt=d.useCallback(S=>{const Y=rt.current;if(Y===null)return;let J,Q;x.current!==void 0&&(J=ht(Y,x.current.cell[0],x.current.cell[1]),Q=x.current.cell),je==null||je({bounds:J,stopPropagation:()=>S.stopPropagation(),preventDefault:()=>S.preventDefault(),cancel:()=>{},ctrlKey:S.ctrlKey,metaKey:S.metaKey,shiftKey:S.shiftKey,altKey:S.altKey,key:S.key,keyCode:S.keyCode,rawEvent:S,location:Q})},[je,x,ht]),Mi=d.useCallback(S=>{const Y=rt.current;if(Y===null)return;let J,Q;x.current!==void 0&&(J=ht(Y,x.current.cell[0],x.current.cell[1]),Q=x.current.cell),G==null||G({bounds:J,stopPropagation:()=>S.stopPropagation(),preventDefault:()=>S.preventDefault(),cancel:()=>{},ctrlKey:S.ctrlKey,metaKey:S.metaKey,shiftKey:S.shiftKey,altKey:S.altKey,key:S.key,keyCode:S.keyCode,rawEvent:S,location:Q})},[G,x,ht]),Fo=d.useCallback(S=>{rt.current=S,oe!==void 0&&(oe.current=S)},[oe]),Ri=d.useCallback(S=>{const Y=rt.current;if(Y===null||Je===!1||Me){S.preventDefault();return}let J,Q;const q=bt(Y,S.clientX,S.clientY);if(Je!==!0&&q.kind!==Je){S.preventDefault();return}const se=(Ze,Oe)=>{J=Ze,Q=Oe};let Ee,me,ie;const xt=(Ze,Oe,Ve)=>{Ee=Ze,me=Oe,ie=Ve};let ye=!1;if(ae==null||ae({...q,setData:se,setDragImage:xt,preventDefault:()=>ye=!0,defaultPrevented:()=>ye}),!ye&&J!==void 0&&Q!==void 0&&S.dataTransfer!==null)if(S.dataTransfer.setData(J,Q),S.dataTransfer.effectAllowed="copyLink",Ee!==void 0&&me!==void 0&&ie!==void 0)S.dataTransfer.setDragImage(Ee,me,ie);else{const[Ze,Oe]=q.location;if(Oe!==void 0){const Ve=document.createElement("canvas"),Te=ht(Y,Ze,Oe);rn(Te!==void 0);const Ut=Math.ceil(window.devicePixelRatio??1);Ve.width=Te.width*Ut,Ve.height=Te.height*Ut;const yt=Ve.getContext("2d");yt!==null&&(yt.scale(Ut,Ut),yt.textBaseline="middle",Oe===-1?(yt.font=ze.headerFontFull,yt.fillStyle=ze.bgHeader,yt.fillRect(0,0,Ve.width,Ve.height),ja(yt,0,0,Te.width,Te.height,Ge[Ze],!1,ze,!1,!1,0,Xt,Ie,!1)):(yt.font=ze.baseFontFull,yt.fillStyle=ze.bgCell,yt.fillRect(0,0,Ve.width,Ve.height),Oa(yt,p([Ze,Oe]),0,Oe,!1,!1,0,0,Te.width,Te.height,!1,ze,ze.bgCell,Rt,Xt,1,void 0,!1,0,void 0,void 0,void 0,yr,st,()=>{}))),Ve.style.left="-100%",Ve.style.position="absolute",Ve.style.width=`${Te.width}px`,Ve.style.height=`${Te.height}px`,document.body.append(Ve),S.dataTransfer.setDragImage(Ve,Te.width/2,Te.height/2),window.setTimeout(()=>{Ve.remove()},0)}}else S.preventDefault()},[Je,Me,bt,ae,ht,ze,Ge,Xt,Ie,p,Rt,yr,st]);Ft("dragstart",Ri,(V==null?void 0:V.current)??null,!1,!1);const Yr=d.useRef(),Is=d.useCallback(S=>{const Y=rt.current;if(He!==void 0&&S.preventDefault(),Y===null||xe===void 0)return;const J=bt(Y,S.clientX,S.clientY),[Q,q]=J.location,se=Q-(pe?0:1),[Ee,me]=Yr.current??[];(Ee!==se||me!==q)&&(Yr.current=[se,q],xe([se,q],S.dataTransfer))},[pe,bt,xe,He]);Ft("dragover",Is,(V==null?void 0:V.current)??null,!1,!1);const _=d.useCallback(()=>{Yr.current=void 0,$e==null||$e()},[$e]);Ft("dragend",_,(V==null?void 0:V.current)??null,!1,!1);const Yt=d.useCallback(S=>{const Y=rt.current;if(Y===null||He===void 0)return;S.preventDefault();const J=bt(Y,S.clientX,S.clientY),[Q,q]=J.location,se=Q-(pe?0:1);He([se,q],S.dataTransfer)},[pe,bt,He]);Ft("drop",Yt,(V==null?void 0:V.current)??null,!1,!1);const Mt=d.useCallback(()=>{Z==null||Z()},[Z]);Ft("dragleave",Mt,(V==null?void 0:V.current)??null,!1,!1);const Do=d.useRef(x);Do.current=x;const Cr=d.useRef(null),Wn=d.useCallback(S=>{var Y;rt.current===null||!rt.current.contains(document.activeElement)||(S===null&&Do.current.current!==void 0?(Y=oe==null?void 0:oe.current)==null||Y.focus({preventScroll:!0}):S!==null&&S.focus({preventScroll:!0}),Cr.current=S)},[oe]);d.useImperativeHandle(t,()=>({focus:()=>{var Y;const S=Cr.current;S===null||!document.contains(S)?(Y=oe==null?void 0:oe.current)==null||Y.focus({preventScroll:!0}):S.focus({preventScroll:!0})},getBounds:(S,Y)=>{if(!(oe===void 0||oe.current===null))return ht(oe.current,S??0,Y??-1)},damage:Eo}),[oe,Eo,ht]);const Ht=d.useRef(),jn=pf(()=>{var me,ie,xt;if(n<50||(we==null?void 0:we.disableAccessibilityTree)===!0)return null;let S=is(Ge,tt,n,de,et);const Y=pe?0:-1;!pe&&((me=S[0])==null?void 0:me.sourceIndex)===0&&(S=S.slice(1));const[J,Q]=((ie=x.current)==null?void 0:ie.cell)??[],q=(xt=x.current)==null?void 0:xt.range,se=S.map(ye=>ye.sourceIndex),Ee=fr(l,Math.min(m,l+o));return J!==void 0&&Q!==void 0&&!(se.includes(J)&&Ee.includes(Q))&&Wn(null),d.createElement("table",{key:"access-tree",role:"grid","aria-rowcount":m+1,"aria-multiselectable":"true","aria-colcount":Ge.length+Y},d.createElement("thead",{role:"rowgroup"},d.createElement("tr",{role:"row","aria-rowindex":1},S.map(ye=>d.createElement("th",{role:"columnheader","aria-selected":x.columns.hasIndex(ye.sourceIndex),"aria-colindex":ye.sourceIndex+1+Y,tabIndex:-1,onFocus:Ze=>{if(Ze.target!==Cr.current)return De==null?void 0:De([ye.sourceIndex,-1])},key:ye.sourceIndex},ye.title)))),d.createElement("tbody",{role:"rowgroup"},Ee.map(ye=>d.createElement("tr",{role:"row","aria-selected":x.rows.hasIndex(ye),key:ye,"aria-rowindex":ye+2},S.map(Ze=>{const Oe=Ze.sourceIndex,Ve=wn(Oe,ye),Te=J===Oe&&Q===ye,Ut=q!==void 0&&Oe>=q.x&&Oe<q.x+q.width&&ye>=q.y&&ye<q.y+q.height,yt=`glide-cell-${Oe}-${ye}`,dt=[Oe,ye],vn=p(dt,!0);return d.createElement("td",{key:Ve,role:"gridcell","aria-colindex":Oe+1+Y,"aria-selected":Ut,"aria-readonly":Pr(vn)||!io(vn),id:yt,"data-testid":yt,onClick:()=>{const It=oe==null?void 0:oe.current;if(It!=null)return je==null?void 0:je({bounds:ht(It,Oe,ye),cancel:()=>{},preventDefault:()=>{},stopPropagation:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:dt})},onFocusCapture:It=>{var Ye,Kt;if(!(It.target===Cr.current||((Ye=Ht.current)==null?void 0:Ye[0])===Oe&&((Kt=Ht.current)==null?void 0:Kt[1])===ye))return Ht.current=dt,De==null?void 0:De(dt)},ref:Te?Wn:void 0,tabIndex:-1},Zg(vn,st))})))))},[n,Ge,tt,de,et,m,l,o,x,Wn,p,oe,je,ht,De],200),Sr=L===0||!T?0:tt>L?1:yn(-et/100,0,1),Ei=-l*32+Fe,Mr=O?yn(-Ei/100,0,1):0,Ti=d.useMemo(()=>{if(!Sr&&!Mr)return null;const S={position:"absolute",top:0,left:Vt,width:n-Vt,height:r,opacity:Sr,pointerEvents:"none",transition:Ae?void 0:"opacity 0.2s",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)"},Y={position:"absolute",top:Re,left:0,width:n,height:r,opacity:Mr,pointerEvents:"none",transition:ut?void 0:"opacity 0.2s",boxShadow:"inset 0 13px 10px -13px rgba(0, 0, 0, 0.2)"};return d.createElement(d.Fragment,null,Sr>0&&d.createElement("div",{id:"shadow-x",style:S}),Mr>0&&d.createElement("div",{id:"shadow-y",style:Y}))},[Sr,Mr,Vt,n,Ae,Re,r,ut]),xn=d.useMemo(()=>({position:"absolute",top:0,left:0}),[]);return d.createElement(d.Fragment,null,d.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:0,onKeyDown:Jt,onKeyUp:Mi,onFocus:b,onBlur:R,ref:Fo,style:ir},jn),d.createElement("canvas",{ref:jt,style:xn}),Ti)},Jg=d.memo(d.forwardRef(Qg));function oo(e,t,n,r){return yn(Math.round(t-(e.growOffset??0)),Math.ceil(n),Math.floor(r))}const e0=e=>{const[t,n]=d.useState(),[r,o]=d.useState(),[i,s]=d.useState(),[l,a]=d.useState(),[c,u]=d.useState(!1),[h,m]=d.useState(),[p,g]=d.useState(),[y,w]=d.useState(),[k,b]=d.useState(!1),[R,M]=d.useState(),{onHeaderMenuClick:x,getCellContent:L,onColumnMoved:F,onColumnResize:N,onColumnResizeStart:T,onColumnResizeEnd:O,gridRef:j,maxColumnWidth:I,minColumnWidth:D,onRowMoved:P,lockColumns:te,onColumnProposeMove:he,onMouseDown:de,onMouseUp:pe,onItemHovered:je,onDragStart:G,canvasRef:K}=e,oe=(N??O??T)!==void 0,{columns:ae,selection:$e}=e,V=$e.columns,Me=d.useCallback(ge=>{const[ue,Ie]=ge.location;i!==void 0&&l!==ue&&ue>=te?(u(!0),a(ue)):p!==void 0&&Ie!==void 0?(b(!0),w(Math.max(0,Ie))):je==null||je(ge)},[i,p,l,je,te]),ce=F!==void 0,Qe=d.useCallback(ge=>{var ue;if(ge.button===0){const[Ie,De]=ge.location;if(ge.kind==="out-of-bounds"&&ge.isEdge&&oe){const xe=(ue=j==null?void 0:j.current)==null?void 0:ue.getBounds(ae.length-1,-1);xe!==void 0&&(n(xe.x),o(ae.length-1))}else if(ge.kind==="header"&&Ie>=te){const xe=K==null?void 0:K.current;if(ge.isEdge&&oe&&xe){n(ge.bounds.x),o(Ie);const Z=xe.getBoundingClientRect().width/xe.offsetWidth,Le=ge.bounds.width/Z;T==null||T(ae[Ie],Le,Ie,Le+(ae[Ie].growOffset??0))}else ge.kind==="header"&&ce&&(m(ge.bounds.x),s(Ie))}else ge.kind==="cell"&&te>0&&Ie===0&&De!==void 0&&P!==void 0&&(M(ge.bounds.y),g(De))}de==null||de(ge)},[de,oe,te,P,j,ae,ce,T,K]),Je=d.useCallback((ge,ue)=>{c||k||x==null||x(ge,ue)},[c,k,x]),Xe=d.useRef(-1),it=d.useCallback(()=>{Xe.current=-1,g(void 0),w(void 0),M(void 0),b(!1),s(void 0),a(void 0),m(void 0),u(!1),o(void 0),n(void 0)},[]),Ke=d.useCallback((ge,ue)=>{if(ge.button===0){if(r!==void 0){if((V==null?void 0:V.hasIndex(r))===!0)for(const De of V){if(De===r)continue;const xe=ae[De],He=oo(xe,Xe.current,D,I);N==null||N(xe,He,De,He+(xe.growOffset??0))}const Ie=oo(ae[r],Xe.current,D,I);if(O==null||O(ae[r],Ie,r,Ie+(ae[r].growOffset??0)),V.hasIndex(r))for(const De of V){if(De===r)continue;const xe=ae[De],He=oo(xe,Xe.current,D,I);O==null||O(xe,He,De,He+(xe.growOffset??0))}}it(),i!==void 0&&l!==void 0&&(F==null||F(i,l)),p!==void 0&&y!==void 0&&(P==null||P(p,y))}pe==null||pe(ge,ue)},[pe,r,i,l,p,y,V,O,ae,D,I,N,F,P,it]),be=d.useMemo(()=>{if(!(i===void 0||l===void 0)&&i!==l&&(he==null?void 0:he(i,l))!==!1)return{src:i,dest:l}},[i,l,he]),ze=d.useCallback(ge=>{const ue=K==null?void 0:K.current;if(i!==void 0&&h!==void 0)Math.abs(ge.clientX-h)>20&&u(!0);else if(p!==void 0&&R!==void 0)Math.abs(ge.clientY-R)>20&&b(!0);else if(r!==void 0&&t!==void 0&&ue){const De=ue.getBoundingClientRect().width/ue.offsetWidth,xe=(ge.clientX-t)/De,He=ae[r],Z=oo(He,xe,D,I);if(N==null||N(He,Z,r,Z+(He.growOffset??0)),Xe.current=xe,(V==null?void 0:V.first())===r)for(const Le of V){if(Le===r)continue;const Ae=ae[Le],ut=oo(Ae,Xe.current,D,I);N==null||N(Ae,ut,Le,ut+(Ae.growOffset??0))}}},[i,h,p,R,r,t,ae,D,I,N,V,K]),_e=d.useCallback((ge,ue)=>{if(p===void 0||y===void 0)return L(ge,ue);let[Ie,De]=ge;return De===y?De=p:(De>y&&(De-=1),De>=p&&(De+=1)),L([Ie,De],ue)},[p,y,L]),gt=d.useCallback(ge=>{G==null||G(ge),ge.defaultPrevented()||it()},[it,G]);return d.createElement(Jg,{accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,enableGroups:e.enableGroups,eventTargetRef:e.eventTargetRef,experimental:e.experimental,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,headerIcons:e.headerIcons,height:e.height,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,resizeColumn:r,isDraggable:e.isDraggable,isFilling:e.isFilling,isFocused:e.isFocused,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDrop:e.onDrop,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,width:e.width,getCellContent:_e,isResizing:r!==void 0,onHeaderMenuClick:Je,isDragging:c,onItemHovered:Me,onDragStart:gt,onMouseDown:Qe,allowResize:oe,onMouseUp:Ke,dragAndDropState:be,onMouseMoveRaw:ze,ref:j})};function t0(e){const t=d.useRef(null),[n,r]=d.useState({width:e==null?void 0:e[0],height:e==null?void 0:e[1]});return d.useLayoutEffect(()=>{const o=s=>{for(const l of s){const{width:a,height:c}=l&&l.contentRect||{};r(u=>u.width===a&&u.height===c?u:{width:a,height:c})}},i=new window.ResizeObserver(o);return t.current&&i.observe(t.current,void 0),()=>{i.disconnect()}},[t.current]),{ref:t,...n}}const n0=(e,t,n)=>{const r=d.useRef(null),o=d.useRef(null),i=d.useRef(null),s=d.useRef(0),l=d.useRef(t);l.current=t;const a=n.current;d.useEffect(()=>{const c=()=>{var m,p;if(o.current===!1&&a!==null){const g=[a.scrollLeft,a.scrollTop];if(((m=i.current)==null?void 0:m[0])===g[0]&&((p=i.current)==null?void 0:p[1])===g[1])if(s.current>10){i.current=null,o.current=null;return}else s.current++;else s.current=0,l.current(g[0],g[1]),i.current=g;r.current=window.setTimeout(c,8.333333333333334)}},u=()=>{o.current=!0,i.current=null,r.current!==null&&(window.clearTimeout(r.current),r.current=null)},h=m=>{m.touches.length===0&&(o.current=!1,s.current=0,r.current=window.setTimeout(c,8.333333333333334))};if(e&&a!==null){const m=a;return m.addEventListener("touchstart",u),m.addEventListener("touchend",h),()=>{m.removeEventListener("touchstart",u),m.removeEventListener("touchend",h),r.current!==null&&window.clearTimeout(r.current)}}},[e,a])},r0=()=>e=>e.isSafari?"scroll":"auto",o0=sn("div")({name:"ScrollRegionStyle",class:"gdg-s1dgczr6",propsAsIs:!1,vars:{"s1dgczr6-0":[r0()]}});function i0(e){const[t,n]=d.useState(!1),r=typeof window>"u"?null:window,o=d.useRef(0);return Ft("touchstart",d.useCallback(()=>{window.clearTimeout(o.current),n(!0)},[]),r,!0,!1),Ft("touchend",d.useCallback(i=>{i.touches.length===0&&(o.current=window.setTimeout(()=>n(!1),e))},[e]),r,!0,!1),t}const s0=e=>{var ae,$e;const{children:t,clientHeight:n,scrollHeight:r,scrollWidth:o,update:i,draggable:s,className:l,preventDiagonalScrolling:a=!1,paddingBottom:c=0,paddingRight:u=0,rightElement:h,rightElementProps:m,kineticScrollPerfHack:p=!1,scrollRef:g,initialSize:y}=e,w=[],k=(m==null?void 0:m.sticky)??!1,b=(m==null?void 0:m.fill)??!1,R=d.useRef(0),M=d.useRef(0),x=d.useRef(null),L=typeof window>"u"?1:window.devicePixelRatio,F=d.useRef({scrollLeft:0,scrollTop:0,lockDirection:void 0}),N=d.useRef(null),T=i0(200),[O,j]=d.useState(!0),I=d.useRef(0);d.useLayoutEffect(()=>{if(!O||T||F.current.lockDirection===void 0)return;const V=x.current;if(V===null)return;const[Me,ce]=F.current.lockDirection;Me!==void 0?V.scrollLeft=Me:ce!==void 0&&(V.scrollTop=ce),F.current.lockDirection=void 0},[T,O]);const D=d.useCallback((V,Me)=>{var ue;const ce=x.current;if(ce===null)return;Me=Me??ce.scrollTop,V=V??ce.scrollLeft;const Qe=F.current.scrollTop,Je=F.current.scrollLeft,Xe=V-Je,it=Me-Qe;T&&Xe!==0&&it!==0&&(Math.abs(Xe)>3||Math.abs(it)>3)&&a&&F.current.lockDirection===void 0&&(F.current.lockDirection=Math.abs(Xe)<Math.abs(it)?[Je,void 0]:[void 0,Qe]);const Ke=F.current.lockDirection;V=(Ke==null?void 0:Ke[0])??V,Me=(Ke==null?void 0:Ke[1])??Me,F.current.scrollLeft=V,F.current.scrollTop=Me;const be=ce.clientWidth,ze=ce.clientHeight,_e=Me,gt=M.current-_e,ge=ce.scrollHeight-ze;if(M.current=_e,ge>0&&(Math.abs(gt)>2e3||_e===0||_e===ge)&&r>ce.scrollHeight+5){const Ie=_e/ge,De=(r-ze)*Ie;R.current=De-_e}Ke!==void 0&&(window.clearTimeout(I.current),j(!1),I.current=window.setTimeout(()=>j(!0),200)),i({x:V,y:_e+R.current,width:be-u,height:ze-c,paddingRight:((ue=N.current)==null?void 0:ue.clientWidth)??0})},[c,u,r,i,a,T]);n0(p&&si.value,D,x);const P=d.useRef(D);P.current=D;const te=d.useRef(),he=d.useRef(!1);d.useLayoutEffect(()=>{he.current?D():he.current=!0},[D,c,u]);const de=d.useCallback(V=>{x.current=V,g!==void 0&&(g.current=V)},[g]);let pe=0,je=0;for(w.push(d.createElement("div",{key:pe++,style:{width:o,height:0}}));je<r;){const V=Math.min(5e6,r-je);w.push(d.createElement("div",{key:pe++,style:{width:0,height:V}})),je+=V}const{ref:G,width:K,height:oe}=t0(y);return typeof window<"u"&&(((ae=te.current)==null?void 0:ae.height)!==oe||(($e=te.current)==null?void 0:$e.width)!==K)&&(window.setTimeout(()=>P.current(),0),te.current={width:K,height:oe}),(K??0)===0||(oe??0)===0?d.createElement("div",{ref:G}):d.createElement("div",{ref:G},d.createElement(o0,{isSafari:si.value},d.createElement("div",{className:"dvn-underlay"},t),d.createElement("div",{ref:de,style:te.current,draggable:s,onDragStart:V=>{s||(V.stopPropagation(),V.preventDefault())},className:"dvn-scroller "+(l??""),onScroll:()=>D()},d.createElement("div",{className:"dvn-scroll-inner"+(h===void 0?" dvn-hidden":"")},d.createElement("div",{className:"dvn-stack"},w),h!==void 0&&d.createElement(d.Fragment,null,!b&&d.createElement("div",{className:"dvn-spacer"}),d.createElement("div",{ref:N,style:{height:oe,maxHeight:n-Math.ceil(L%1),position:"sticky",top:0,paddingLeft:1,marginBottom:-40,marginRight:u,flexGrow:b?1:void 0,right:k?u??0:void 0,pointerEvents:"auto"}},h))))))},l0=e=>{const{columns:t,rows:n,rowHeight:r,headerHeight:o,groupHeaderHeight:i,enableGroups:s,freezeColumns:l,experimental:a,nonGrowWidth:c,clientSize:u,className:h,onVisibleRegionChanged:m,scrollRef:p,preventDiagonalScrolling:g,rightElement:y,rightElementProps:w,overscrollX:k,overscrollY:b,initialSize:R,smoothScrollX:M=!1,smoothScrollY:x=!1,isDraggable:L}=e,{paddingRight:F,paddingBottom:N}=a??{},[T,O]=u,j=d.useRef(),I=d.useRef(),D=d.useRef(),P=d.useRef(),te=c+Math.max(0,k??0);let he=s?o+i:o;if(typeof r=="number")he+=n*r;else for(let G=0;G<n;G++)he+=r(G);b!==void 0&&(he+=b);const de=d.useRef(),pe=d.useCallback(()=>{var it,Ke;if(de.current===void 0)return;const G={...de.current};let K=0,oe=G.x<0?-G.x:0,ae=0,$e=0;G.x=G.x<0?0:G.x;let V=0;for(let be=0;be<l;be++)V+=t[be].width;for(const be of t){const ze=K-V;if(G.x>=ze+be.width)K+=be.width,$e++,ae++;else if(G.x>ze)K+=be.width,M?oe+=ze-G.x:$e++,ae++;else if(G.x+G.width>ze)K+=be.width,ae++;else break}let Me=0,ce=0,Qe=0;if(typeof r=="number")x?(ce=Math.floor(G.y/r),Me=ce*r-G.y):ce=Math.ceil(G.y/r),Qe=Math.ceil(G.height/r)+ce,Me<0&&Qe++;else{let be=0;for(let ze=0;ze<n;ze++){const _e=r(ze),gt=be+(x?0:_e/2);if(G.y>=be+_e)be+=_e,ce++,Qe++;else if(G.y>gt)be+=_e,x?Me+=gt-G.y:ce++,Qe++;else if(G.y+G.height>_e/2+be)be+=_e,Qe++;else break}}const Je={x:$e,y:ce,width:ae-$e,height:Qe-ce},Xe=j.current;(Xe===void 0||Xe.y!==Je.y||Xe.x!==Je.x||Xe.height!==Je.height||Xe.width!==Je.width||I.current!==oe||D.current!==Me||G.width!==((it=P.current)==null?void 0:it[0])||G.height!==((Ke=P.current)==null?void 0:Ke[1]))&&(m==null||m({x:$e,y:ce,width:ae-$e,height:Qe-ce},G.width,G.height,G.paddingRight??0,oe,Me),j.current=Je,I.current=oe,D.current=Me,P.current=[G.width,G.height])},[t,r,n,m,l,M,x]),je=d.useCallback(G=>{de.current=G,pe()},[pe]);return d.useEffect(()=>{pe()},[pe]),d.createElement(s0,{scrollRef:p,className:h,kineticScrollPerfHack:a==null?void 0:a.kineticScrollPerfHack,preventDiagonalScrolling:g,draggable:L===!0||typeof L=="string",scrollWidth:te+(F??0),scrollHeight:he+(N??0),clientHeight:O,rightElement:y,paddingBottom:N,paddingRight:F,rightElementProps:w,update:je,initialSize:R},d.createElement(e0,{eventTargetRef:p,width:T,height:O,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,onColumnProposeMove:e.onColumnProposeMove,verticalBorder:e.verticalBorder,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY}))},a0=sn("div")({name:"SearchWrapper",class:"gdg-seveqep",propsAsIs:!1}),c0=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),u0=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),d0=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})),f0=10,h0=e=>{const{canvasRef:t,cellYOffset:n,rows:r,columns:o,searchInputRef:i,searchValue:s,searchResults:l,onSearchValueChange:a,getCellsForSelection:c,onSearchResultsChanged:u,showSearch:h=!1,onSearchClose:m}=e,[p]=d.useState(()=>"search-box-"+Math.round(Math.random()*1e3)),[g,y]=d.useState(""),w=s??g,k=d.useCallback(K=>{y(K),a==null||a(K)},[a]),[b,R]=d.useState(),M=d.useRef(b);M.current=b,d.useEffect(()=>{l!==void 0&&(l.length>0?R(K=>({rowsSearched:r,results:l.length,selectedIndex:(K==null?void 0:K.selectedIndex)??-1})):R(void 0))},[r,l]);const x=d.useRef(new AbortController),L=d.useRef(),[F,N]=d.useState([]),T=l??F,O=d.useCallback(()=>{L.current!==void 0&&(window.cancelAnimationFrame(L.current),L.current=void 0,x.current.abort())},[]),j=d.useRef(n);j.current=n;const I=d.useCallback(K=>{const oe=new RegExp(K.replace(/([$()*+.?[\\\]^{|}-])/g,"\\$1"),"i");let ae=j.current,$e=Math.min(10,r),V=0;R(void 0),N([]);const Me=[],ce=async()=>{var ge;if(c===void 0)return;const Qe=performance.now(),Je=r-V;let Xe=c({x:0,y:ae,width:o.length,height:Math.min($e,Je,r-ae)},x.current.signal);typeof Xe=="function"&&(Xe=await Xe());let it=!1;for(const[ue,Ie]of Xe.entries())for(const[De,xe]of Ie.entries()){let He;switch(xe.kind){case re.Text:case re.Number:He=xe.displayData;break;case re.Uri:case re.Markdown:He=xe.data;break;case re.Boolean:He=typeof xe.data=="boolean"?xe.data.toString():void 0;break;case re.Image:case re.Bubble:He=xe.data.join("🐳");break;case re.Custom:He=xe.copyData;break}He!==void 0&&oe.test(He)&&(Me.push([De,ue+ae]),it=!0)}const Ke=performance.now();it&&N([...Me]),V+=Xe.length,rn(V<=r);const be=((ge=M.current)==null?void 0:ge.selectedIndex)??-1;R({results:Me.length,rowsSearched:V,selectedIndex:be}),u==null||u(Me,be),ae+$e>=r?ae=0:ae+=$e;const ze=Ke-Qe,_e=Math.max(ze,1),gt=f0/_e;$e=Math.ceil($e*gt),V<r&&Me.length<1e3&&(L.current=window.requestAnimationFrame(ce))};O(),L.current=window.requestAnimationFrame(ce)},[O,o.length,c,u,r]),D=d.useCallback(()=>{var K;m==null||m(),R(void 0),N([]),u==null||u([],-1),O(),(K=t==null?void 0:t.current)==null||K.focus()},[O,t,m,u]),P=d.useCallback(K=>{k(K.target.value),l===void 0&&(K.target.value===""?(R(void 0),N([]),O()):I(K.target.value))},[I,O,k,l]);d.useEffect(()=>{h&&i.current!==null&&(k(""),i.current.focus({preventScroll:!0}))},[h,i,k]);const te=d.useCallback(K=>{var ae;if((ae=K==null?void 0:K.stopPropagation)==null||ae.call(K),b===void 0)return;const oe=(b.selectedIndex+1)%b.results;R({...b,selectedIndex:oe}),u==null||u(T,oe)},[b,u,T]),he=d.useCallback(K=>{var ae;if((ae=K==null?void 0:K.stopPropagation)==null||ae.call(K),b===void 0)return;let oe=(b.selectedIndex-1)%b.results;oe<0&&(oe+=b.results),R({...b,selectedIndex:oe}),u==null||u(T,oe)},[u,T,b]),de=d.useCallback(K=>{(K.ctrlKey||K.metaKey)&&K.nativeEvent.code==="KeyF"||K.key==="Escape"?(D(),K.stopPropagation(),K.preventDefault()):K.key==="Enter"&&(K.shiftKey?he():te())},[D,te,he]);d.useEffect(()=>()=>{O()},[O]);const[pe,je]=d.useState(!1);d.useEffect(()=>{if(h)je(!0);else{const K=setTimeout(()=>je(!1),150);return()=>clearTimeout(K)}},[h]);const G=d.useMemo(()=>{if(!h&&!pe)return null;let K;b!==void 0&&(K=b.results>=1e3?"over 1000":`${b.results} result${b.results!==1?"s":""}`,b.selectedIndex>=0&&(K=`${b.selectedIndex+1} of ${K}`));const oe=V=>{V.stopPropagation()},$e={width:`${Math.floor(((b==null?void 0:b.rowsSearched)??0)/r*100)}%`};return d.createElement(a0,{className:h?"":"out",onMouseDown:oe,onMouseMove:oe,onMouseUp:oe,onClick:oe},d.createElement("div",{className:"gdg-search-bar-inner"},d.createElement("input",{id:p,"aria-hidden":!h,"data-testid":"search-input",ref:i,onChange:P,value:w,tabIndex:h?void 0:-1,onKeyDownCapture:de}),d.createElement("button",{"aria-label":"Previous Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:he,disabled:((b==null?void 0:b.results)??0)===0},c0),d.createElement("button",{"aria-label":"Next Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:te,disabled:((b==null?void 0:b.results)??0)===0},u0),m!==void 0&&d.createElement("button",{"aria-label":"Close Search","aria-hidden":!h,"data-testid":"search-close-button",tabIndex:h?void 0:-1,onClick:D},d0)),b!==void 0?d.createElement(d.Fragment,null,d.createElement("div",{className:"gdg-search-status"},d.createElement("div",{"data-testid":"search-result-area"},K)),d.createElement("div",{className:"gdg-search-progress",style:$e})):d.createElement("div",{className:"gdg-search-status"},d.createElement("label",{htmlFor:p},"Type to search")))},[h,pe,b,r,p,i,P,w,de,he,te,m,D]);return d.createElement(d.Fragment,null,d.createElement(l0,{prelightCells:T,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,className:e.className,clientSize:e.clientSize,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,nonGrowWidth:e.nonGrowWidth,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,initialSize:e.initialSize,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onMouseMove:e.onMouseMove,onVisibleRegionChanged:e.onVisibleRegionChanged,overscrollX:e.overscrollX,overscrollY:e.overscrollY,preventDiagonalScrolling:e.preventDiagonalScrolling,rightElement:e.rightElement,rightElementProps:e.rightElementProps,rowHeight:e.rowHeight,rows:e.rows,scrollRef:e.scrollRef,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,onColumnProposeMove:e.onColumnProposeMove,drawFocusRing:e.drawFocusRing,drawCell:e.drawCell,drawHeader:e.drawHeader,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY}),G)};class g0 extends d.PureComponent{constructor(){super(...arguments);fe(this,"wrapperRef",d.createRef());fe(this,"clickOutside",n=>{if(!(this.props.isOutsideClick&&!this.props.isOutsideClick(n))&&this.wrapperRef.current!==null&&!this.wrapperRef.current.contains(n.target)){let r=n.target;for(;r!==null;){if(r.classList.contains("click-outside-ignore"))return;r=r.parentElement}this.props.onClickOutside()}})}componentDidMount(){document.addEventListener("touchend",this.clickOutside,!0),document.addEventListener("mousedown",this.clickOutside,!0),document.addEventListener("contextmenu",this.clickOutside,!0)}componentWillUnmount(){document.removeEventListener("touchend",this.clickOutside,!0),document.removeEventListener("mousedown",this.clickOutside,!0),document.removeEventListener("contextmenu",this.clickOutside,!0)}render(){const{onClickOutside:n,isOutsideClick:r,...o}=this.props;return d.createElement("div",{...o,ref:this.wrapperRef},this.props.children)}}const m0=()=>e=>Math.max(16,e.targetHeight-10),p0=sn("input")({name:"RenameInput",class:"gdg-r17m35ur",propsAsIs:!1,vars:{"r17m35ur-0":[m0(),"px"]}}),y0=e=>{const{bounds:t,group:n,onClose:r,canvasBounds:o,onFinish:i}=e,[s,l]=St.useState(n);return St.createElement(g0,{style:{position:"absolute",left:t.x-o.left+1,top:t.y-o.top,width:t.width-2,height:t.height},className:"gdg-c1tqibwd",onClickOutside:r},St.createElement(p0,{targetHeight:t.height,"data-testid":"group-rename-input",value:s,onBlur:r,onFocus:a=>a.target.setSelectionRange(0,s.length),onChange:a=>l(a.target.value),onKeyDown:a=>{a.key==="Enter"?i(s):a.key==="Escape"&&r()},autoFocus:!0}))};function w0(e,t){return e===void 0?!1:e.length>1&&e.startsWith("_")?Number.parseInt(e.slice(1))===t.keyCode:e.length===1&&e>="a"&&e<="z"?e.toUpperCase().codePointAt(0)===t.keyCode:e===t.key}function Be(e,t,n){const r=Ua(e,t);return r&&(n.didMatch=!0),r}function Ua(e,t){if(e.length===0)return!1;if(e.includes("|")){const a=e.split("|");for(const c of a)if(Ua(c,t))return!0;return!1}let n=!1,r=!1,o=!1,i=!1;const s=e.split("+"),l=s.pop();if(!w0(l,t))return!1;if(s[0]==="any")return!0;for(const a of s)switch(a){case"ctrl":n=!0;break;case"shift":r=!0;break;case"alt":o=!0;break;case"meta":i=!0;break;case"primary":li.value?i=!0:n=!0;break}return t.altKey===o&&t.ctrlKey===n&&t.shiftKey===r&&t.metaKey===i}function b0(e,t,n,r,o,i){const s=St.useCallback((c,u,h,m)=>{var b;(i==="cell"||i==="multi-cell")&&c!==void 0&&(c={...c,range:{x:c.cell[0],y:c.cell[1],width:1,height:1}});const p=n==="mixed"&&(h||m==="drag"),g=r==="mixed"&&p,y=o==="mixed"&&p;let w={current:c===void 0?void 0:{...c,rangeStack:m==="drag"?((b=e.current)==null?void 0:b.rangeStack)??[]:[]},columns:g?e.columns:qe.empty(),rows:y?e.rows:qe.empty()};h&&(i==="multi-rect"||i==="multi-cell")&&w.current!==void 0&&e.current!==void 0&&(w={...w,current:{...w.current,rangeStack:[...e.current.rangeStack,e.current.range]}}),t(w,u)},[r,e,n,i,o,t]),l=St.useCallback((c,u,h)=>{c=c??e.rows,u!==void 0&&(c=c.add(u));let m;if(o==="exclusive"&&c.length>0)m={current:void 0,columns:qe.empty(),rows:c};else{const p=h&&n==="mixed",g=h&&r==="mixed";m={current:p?e.current:void 0,columns:g?e.columns:qe.empty(),rows:c}}t(m,!1)},[r,e,n,o,t]),a=St.useCallback((c,u,h)=>{c=c??e.columns,u!==void 0&&(c=c.add(u));let m;if(r==="exclusive"&&c.length>0)m={current:void 0,rows:qe.empty(),columns:c};else{const p=h&&n==="mixed",g=h&&o==="mixed";m={current:p?e.current:void 0,rows:g?e.rows:qe.empty(),columns:c}}t(m,!1)},[r,e,n,o,t]);return[s,l,a]}function x0(e,t,n,r,o){const i=d.useCallback(c=>{if(e===!0){const u=[];for(let h=c.y;h<c.y+c.height;h++){const m=[];for(let p=c.x;p<c.x+c.width;p++)p<0||h>=o?m.push({kind:re.Loading,allowOverlay:!1}):m.push(t([p,h]));u.push(m)}return u}return(e==null?void 0:e(c,r.signal))??[]},[r.signal,t,e,o]),s=e!==void 0?i:void 0,l=d.useCallback(c=>{if(s===void 0)return[];const u={...c,x:c.x-n};if(u.x<0){u.x=0,u.width--;const h=s(u,r.signal);return typeof h=="function"?async()=>(await h()).map(m=>[{kind:re.Loading,allowOverlay:!1},...m]):h.map(m=>[{kind:re.Loading,allowOverlay:!1},...m])}return s(u,r.signal)},[r.signal,s,n]);return[e!==void 0?l:void 0,s]}function v0(e){if(e.copyData!==void 0)return{formatted:e.copyData,rawValue:e.copyData,format:"string"};switch(e.kind){case re.Boolean:return{formatted:e.data===!0?"TRUE":e.data===!1?"FALSE":e.data===fs?"INDETERMINATE":"",rawValue:e.data,format:"boolean"};case re.Custom:return{formatted:e.copyData,rawValue:e.copyData,format:"string"};case re.Image:case re.Bubble:return{formatted:e.data,rawValue:e.data,format:"string-array"};case re.Drilldown:return{formatted:e.data.map(t=>t.text),rawValue:e.data.map(t=>t.text),format:"string-array"};case re.Text:return{formatted:e.displayData??e.data,rawValue:e.data,format:"string"};case re.Uri:return{formatted:e.displayData??e.data,rawValue:e.data,format:"url"};case re.Markdown:case re.RowID:return{formatted:e.data,rawValue:e.data,format:"string"};case re.Number:return{formatted:e.displayData,rawValue:e.data,format:"number"};case re.Loading:return{formatted:"#LOADING",rawValue:"",format:"string"};case re.Protected:return{formatted:"************",rawValue:"",format:"string"};default:bo()}}function k0(e,t){return e.map((r,o)=>{const i=t[o];return r.map(s=>s.span!==void 0&&s.span[0]!==i?{formatted:"",rawValue:"",format:"string"}:v0(s))})}function kl(e,t){return(t?/[\t\n",]/:/[\t\n"]/).test(e)&&(e=`"${e.replace(/"/g,'""')}"`),e}function C0(e){var n;const t=[];for(const r of e){const o=[];for(const i of r)i.format==="url"?o.push(((n=i.rawValue)==null?void 0:n.toString())??""):i.format==="string-array"?o.push(i.formatted.map(s=>kl(s,!0)).join(",")):o.push(kl(i.formatted,!1));t.push(o.join("	"))}return t.join(`
`)}function Yi(e){return e.replace(/\t/g,"    ").replace(/ {2,}/g,t=>"<span> </span>".repeat(t.length))}function Cl(e){return'"'+e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"'}function S0(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function M0(e){var n;const t=[];t.push('<style type="text/css"><!--br {mso-data-placement:same-cell;}--></style>',"<table><tbody>");for(const r of e){t.push("<tr>");for(const o of r){const i=`gdg-format="${o.format}"`;o.format==="url"?t.push(`<td ${i}><a href="${o.rawValue}">${Yi(o.formatted)}</a></td>`):o.format==="string-array"?t.push(`<td ${i}><ol>${o.formatted.map((s,l)=>`<li gdg-raw-value=${Cl(o.rawValue[l])}>`+Yi(s)+"</li>").join("")}</ol></td>`):t.push(`<td gdg-raw-value=${Cl(((n=o.rawValue)==null?void 0:n.toString())??"")} ${i}>${Yi(o.formatted)}</td>`)}t.push("</tr>")}return t.push("</tbody></table>"),t.join("")}function R0(e,t){const n=k0(e,t),r=C0(n),o=M0(n);return{textPlain:r,textHtml:o}}function Sl(e){var s;const t=document.createElement("html");t.innerHTML=e.replace(/&nbsp;/g," ");const n=t.querySelector("table");if(n===null)return;const r=[n],o=[];let i;for(;r.length>0;){const l=r.pop();if(l===void 0)break;if(l instanceof HTMLTableElement||l.nodeName==="TBODY")r.push(...[...l.children].reverse());else if(l instanceof HTMLTableRowElement)i!==void 0&&o.push(i),i=[],r.push(...[...l.children].reverse());else if(l instanceof HTMLTableCellElement){const a=l.cloneNode(!0),u=a.children.length===1&&a.children[0].nodeName==="P"?a.children[0]:null,h=(u==null?void 0:u.children.length)===1&&u.children[0].nodeName==="FONT",m=a.querySelectorAll("br");for(const y of m)y.replaceWith(`
`);const p=a.getAttribute("gdg-raw-value"),g=a.getAttribute("gdg-format")??"string";if(a.querySelector("a")!==null)i==null||i.push({rawValue:((s=a.querySelector("a"))==null?void 0:s.getAttribute("href"))??"",formatted:a.textContent??"",format:g});else if(a.querySelector("ol")!==null){const y=a.querySelectorAll("li");i==null||i.push({rawValue:[...y].map(w=>w.getAttribute("gdg-raw-value")??""),formatted:[...y].map(w=>w.textContent??""),format:"string-array"})}else if(p!==null)i==null||i.push({rawValue:S0(p),formatted:a.textContent??"",format:g});else{let y=a.textContent??"";h&&(y=y.replace(/\n(?!\n)/g,"")),i==null||i.push({rawValue:y??"",formatted:y??"",format:g})}}}return i!==void 0&&o.push(i),o}function E0(e,t,n,r,o){var l;const i=e;if(r==="allowPartial"||e.current===void 0||t===void 0)return e;let s=!1;do{if((e==null?void 0:e.current)===void 0)break;const a=(l=e.current)==null?void 0:l.range,c=[];if(a.width>2){const m=t({x:a.x,y:a.y,width:1,height:a.height},o.signal);if(typeof m=="function")return i;c.push(...m);const p=t({x:a.x+a.width-1,y:a.y,width:1,height:a.height},o.signal);if(typeof p=="function")return i;c.push(...p)}else{const m=t({x:a.x,y:a.y,width:a.width,height:a.height},o.signal);if(typeof m=="function")return i;c.push(...m)}let u=a.x-n,h=a.x+a.width-1-n;for(const m of c)for(const p of m)p.span!==void 0&&(u=Math.min(p.span[0],u),h=Math.max(p.span[1],h));u===a.x-n&&h===a.x+a.width-1-n?s=!0:e={current:{cell:e.current.cell??[0,0],range:{x:u+n,y:a.y,width:h-u+1,height:a.height},rangeStack:e.current.rangeStack},columns:e.columns,rows:e.rows}}while(!s);return e}function Ml(e){return e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1).replace(/""/g,'"')),e}function T0(e){let t;(function(l){l[l.None=0]="None",l[l.inString=1]="inString",l[l.inStringPostQuote=2]="inStringPostQuote"})(t||(t={}));const n=[];let r=[],o=0,i=t.None;e=e.replace(/\r\n/g,`
`);let s=0;for(const l of e){switch(i){case t.None:l==="	"||l===`
`?(r.push(e.slice(o,s)),o=s+1,l===`
`&&(n.push(r),r=[])):l==='"'&&(i=t.inString);break;case t.inString:l==='"'&&(i=t.inStringPostQuote);break;case t.inStringPostQuote:l==='"'?i=t.inString:((l==="	"||l===`
`)&&(r.push(Ml(e.slice(o,s))),o=s+1,l===`
`&&(n.push(r),r=[])),i=t.None);break}s++}return o<e.length&&r.push(Ml(e.slice(o,e.length))),n.push(r),n.map(l=>l.map(a=>({rawValue:a,formatted:a,format:"string"})))}function Rl(e,t,n){var l;const r=R0(e,t),o=a=>{var c;(c=window.navigator.clipboard)==null||c.writeText(a)},i=(a,c)=>{var u;return((u=window.navigator.clipboard)==null?void 0:u.write)===void 0?!1:(window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([a],{type:"text/plain"}),"text/html":new Blob([c],{type:"text/html"})})]),!0)},s=(a,c)=>{var u,h;try{if(n===void 0||n.clipboardData===null)throw new Error("No clipboard data");(u=n==null?void 0:n.clipboardData)==null||u.setData("text/plain",a),(h=n==null?void 0:n.clipboardData)==null||h.setData("text/html",c)}catch{i(a,c)||o(a)}};((l=window.navigator.clipboard)==null?void 0:l.write)!==void 0||(n==null?void 0:n.clipboardData)!==void 0?s(r.textPlain,r.textHtml):o(r.textPlain),n==null||n.preventDefault()}function Ka(e){return e!==!0}function El(e){return typeof e=="string"?e:`${e}px`}const I0=()=>e=>e.innerWidth,F0=()=>e=>e.innerHeight,D0=sn("div")({name:"Wrapper",class:"gdg-wmyidgi",propsAsIs:!1,vars:{"wmyidgi-0":[I0()],"wmyidgi-1":[F0()]}}),A0=e=>{const{inWidth:t,inHeight:n,children:r,...o}=e;return d.createElement(D0,{innerHeight:El(n),innerWidth:El(t),...o},r)},z0=2,H0=1300;function L0(e,t,n){const r=St.useRef(0),[o,i]=e??[0,0];St.useEffect(()=>{if(o===0&&i===0){r.current=0;return}let s=!1,l=0;const a=c=>{var u;if(!s){if(l===0)l=c;else{const h=c-l;r.current=Math.min(1,r.current+h/H0);const m=r.current**1.618*h*z0;(u=t.current)==null||u.scrollBy(o*m,i*m),l=c,n==null||n()}window.requestAnimationFrame(a)}};return window.requestAnimationFrame(a),()=>{s=!0}},[t,o,i,n])}function P0({rowHeight:e,headerHeight:t,groupHeaderHeight:n,theme:r,overscrollX:o,overscrollY:i,scaleToRem:s,remSize:l}){const[a,c,u,h,m,p]=St.useMemo(()=>{if(!s||l===16)return[e,t,n,r,o,i];const g=l/16,y=e,w=Pa();return[typeof y=="number"?y*g:k=>Math.ceil(y(k)*g),Math.ceil(t*g),Math.ceil(n*g),{...r,headerIconSize:((r==null?void 0:r.headerIconSize)??w.headerIconSize)*g,cellHorizontalPadding:((r==null?void 0:r.cellHorizontalPadding)??w.cellHorizontalPadding)*g,cellVerticalPadding:((r==null?void 0:r.cellVerticalPadding)??w.cellVerticalPadding)*g},Math.ceil((o??0)*g),Math.ceil((i??0)*g)]},[n,t,o,i,l,e,s,r]);return{rowHeight:a,headerHeight:c,groupHeaderHeight:u,theme:h,overscrollX:m,overscrollY:p}}const Kn={downFill:!1,rightFill:!1,clear:!0,closeOverlay:!0,acceptOverlayDown:!0,acceptOverlayUp:!0,acceptOverlayLeft:!0,acceptOverlayRight:!0,copy:!0,paste:!0,cut:!0,search:!1,delete:!0,activateCell:!0,scrollToSelectedCell:!0,goToFirstCell:!0,goToFirstColumn:!0,goToFirstRow:!0,goToLastCell:!0,goToLastColumn:!0,goToLastRow:!0,goToNextPage:!0,goToPreviousPage:!0,selectToFirstCell:!0,selectToFirstColumn:!0,selectToFirstRow:!0,selectToLastCell:!0,selectToLastColumn:!0,selectToLastRow:!0,selectAll:!0,selectRow:!0,selectColumn:!0,goUpCell:!0,goRightCell:!0,goDownCell:!0,goLeftCell:!0,goUpCellRetainSelection:!0,goRightCellRetainSelection:!0,goDownCellRetainSelection:!0,goLeftCellRetainSelection:!0,selectGrowUp:!0,selectGrowRight:!0,selectGrowDown:!0,selectGrowLeft:!0};function We(e,t){return e===!0?t:e===!1?"":e}function Tl(e){const t=li.value;return{activateCell:We(e.activateCell," |Enter|shift+Enter"),clear:We(e.clear,"any+Escape"),closeOverlay:We(e.closeOverlay,"any+Escape"),acceptOverlayDown:We(e.acceptOverlayDown,"Enter"),acceptOverlayUp:We(e.acceptOverlayUp,"shift+Enter"),acceptOverlayLeft:We(e.acceptOverlayLeft,"shift+Tab"),acceptOverlayRight:We(e.acceptOverlayRight,"Tab"),copy:e.copy,cut:e.cut,delete:We(e.delete,t?"Backspace|Delete":"Delete"),downFill:We(e.downFill,"primary+_68"),scrollToSelectedCell:We(e.scrollToSelectedCell,"primary+Enter"),goDownCell:We(e.goDownCell,"ArrowDown"),goDownCellRetainSelection:We(e.goDownCellRetainSelection,"alt+ArrowDown"),goLeftCell:We(e.goLeftCell,"ArrowLeft|shift+Tab"),goLeftCellRetainSelection:We(e.goLeftCellRetainSelection,"alt+ArrowLeft"),goRightCell:We(e.goRightCell,"ArrowRight|Tab"),goRightCellRetainSelection:We(e.goRightCellRetainSelection,"alt+ArrowRight"),goUpCell:We(e.goUpCell,"ArrowUp"),goUpCellRetainSelection:We(e.goUpCellRetainSelection,"alt+ArrowUp"),goToFirstCell:We(e.goToFirstCell,"primary+Home"),goToFirstColumn:We(e.goToFirstColumn,"Home|primary+ArrowLeft"),goToFirstRow:We(e.goToFirstRow,"primary+ArrowUp"),goToLastCell:We(e.goToLastCell,"primary+End"),goToLastColumn:We(e.goToLastColumn,"End|primary+ArrowRight"),goToLastRow:We(e.goToLastRow,"primary+ArrowDown"),goToNextPage:We(e.goToNextPage,"PageDown"),goToPreviousPage:We(e.goToPreviousPage,"PageUp"),paste:e.paste,rightFill:We(e.rightFill,"primary+_82"),search:We(e.search,"primary+f"),selectAll:We(e.selectAll,"primary+a"),selectColumn:We(e.selectColumn,"ctrl+ "),selectGrowDown:We(e.selectGrowDown,"shift+ArrowDown"),selectGrowLeft:We(e.selectGrowLeft,"shift+ArrowLeft"),selectGrowRight:We(e.selectGrowRight,"shift+ArrowRight"),selectGrowUp:We(e.selectGrowUp,"shift+ArrowUp"),selectRow:We(e.selectRow,"shift+ "),selectToFirstCell:We(e.selectToFirstCell,"primary+shift+Home"),selectToFirstColumn:We(e.selectToFirstColumn,"primary+shift+ArrowLeft"),selectToFirstRow:We(e.selectToFirstRow,"primary+shift+ArrowUp"),selectToLastCell:We(e.selectToLastCell,"primary+shift+End"),selectToLastColumn:We(e.selectToLastColumn,"primary+shift+ArrowRight"),selectToLastRow:We(e.selectToLastRow,"primary+shift+ArrowDown")}}function $0(e){const t=vf(e);return St.useMemo(()=>{if(t===void 0)return Tl(Kn);const n={...t,goToNextPage:(t==null?void 0:t.goToNextPage)??(t==null?void 0:t.pageDown)??Kn.goToNextPage,goToPreviousPage:(t==null?void 0:t.goToPreviousPage)??(t==null?void 0:t.pageUp)??Kn.goToPreviousPage,goToFirstCell:(t==null?void 0:t.goToFirstCell)??(t==null?void 0:t.first)??Kn.goToFirstCell,goToLastCell:(t==null?void 0:t.goToLastCell)??(t==null?void 0:t.last)??Kn.goToLastCell,selectToFirstCell:(t==null?void 0:t.selectToFirstCell)??(t==null?void 0:t.first)??Kn.selectToFirstCell,selectToLastCell:(t==null?void 0:t.selectToLastCell)??(t==null?void 0:t.last)??Kn.selectToLastCell};return Tl({...Kn,...n})},[t])}const _0=d.lazy(async()=>await Hl(()=>import("./o5065y18g8vf0h13.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])));let N0=0;function O0(e){return _h(gl(gl(e).filter(t=>t.span!==void 0).map(t=>{var n,r;return fr((((n=t.span)==null?void 0:n[0])??0)+1,(((r=t.span)==null?void 0:r[1])??0)+1)})))}function Go(e,t){return e===void 0||t===0||e.columns.length===0&&e.current===void 0?e:{current:e.current===void 0?void 0:{cell:[e.current.cell[0]+t,e.current.cell[1]],range:{...e.current.range,x:e.current.range.x+t},rangeStack:e.current.rangeStack.map(n=>({...n,x:n.x+t}))},rows:e.rows,columns:e.columns.offset(t)}}const Ui={kind:re.Loading,allowOverlay:!1},Zo={columns:qe.empty(),rows:qe.empty(),current:void 0},B0=(e,t)=>{var js,Xs;const[n,r]=d.useState(Zo),[o,i]=d.useState(),s=d.useRef(null),l=d.useRef(null),[a,c]=d.useState(),u=d.useRef(null),h=d.useRef(),m=typeof window>"u"?null:window,{rowMarkers:p="none",rowMarkerWidth:g,imageEditorOverride:y,getRowThemeOverride:w,markdownDivCreateNode:k,width:b,height:R,columns:M,rows:x,getCellContent:L,onCellClicked:F,onCellActivated:N,onFillPattern:T,onFinishedEditing:O,coercePasteValue:j,drawHeader:I,drawCell:D,onHeaderClicked:P,onColumnProposeMove:te,spanRangeBehavior:he="default",onGroupHeaderClicked:de,onCellContextMenu:pe,className:je,onHeaderContextMenu:G,getCellsForSelection:K,onGroupHeaderContextMenu:oe,onGroupHeaderRenamed:ae,onCellEdited:$e,onCellsEdited:V,onSearchResultsChanged:Me,searchResults:ce,onSearchValueChange:Qe,searchValue:Je,onKeyDown:Xe,onKeyUp:it,keybindings:Ke,onRowAppended:be,onColumnMoved:ze,validateCell:_e,highlightRegions:gt,rangeSelect:ge="rect",columnSelect:ue="multi",rowSelect:Ie="multi",rangeSelectionBlending:De="exclusive",columnSelectionBlending:xe="exclusive",rowSelectionBlending:He="exclusive",onDelete:Z,onDragStart:Le,onMouseMove:Ae,onPaste:ut,copyHeaders:we=!1,freezeColumns:st=0,cellActivationBehavior:et="second-click",rowSelectionMode:Fe="auto",rowMarkerStartIndex:tt=1,rowMarkerTheme:rt,onHeaderMenuClick:Rt,getGroupDetails:Dt,onSearchClose:$t,onItemHovered:Bt,onSelectionCleared:ft,showSearch:Tn,onVisibleRegionChanged:wt,gridSelection:Wt,onGridSelectionChange:Zt,minColumnWidth:Ne=50,maxColumnWidth:jt=500,maxColumnAutoWidth:In,provideEditor:un,trailingRowOptions:Pe,freezeTrailingRows:At=0,allowedFillDirections:bn="orthogonal",scrollOffsetX:Xt,scrollOffsetY:Re,verticalBorder:lt,onDragOverCell:mt,onDrop:Fn,onColumnResize:Ge,onColumnResizeEnd:Vt,onColumnResizeStart:ht,customRenderers:bt,fillHandle:Dn,drawFocusRing:So,experimental:pt,fixedShadowX:nr,fixedShadowY:rr,headerIcons:yr,imageWindowLoader:Mo,initialSize:Ro,isDraggable:wr,onDragLeave:br,onRowMoved:dn,overscrollX:_n,overscrollY:wi,preventDiagonalScrolling:Eo,rightElement:bi,rightElementProps:xi,trapFocus:or=!1,smoothScrollX:Nn,smoothScrollY:vi,scaleToRem:ki=!1,rowHeight:To=34,headerHeight:jr=36,groupHeaderHeight:xr=jr,theme:Ts,isOutsideClick:Io,renderers:ir}=e,An=Math.max(Ne,20),On=Math.max(jt,An),Bn=Math.max(In??On,An),vr=d.useMemo(()=>typeof window>"u"?{fontSize:"16px"}:window.getComputedStyle(document.documentElement),[]).fontSize,lr=d.useMemo(()=>Number.parseFloat(vr),[vr]),{rowHeight:zt,headerHeight:kr,groupHeaderHeight:Xr,theme:Vr,overscrollX:Ci,overscrollY:Si}=P0({groupHeaderHeight:xr,headerHeight:jr,overscrollX:_n,overscrollY:wi,remSize:lr,rowHeight:To,scaleToRem:ki,theme:Ts}),fn=$0(Ke),zn=g??(x>1e4?48:x>1e3?44:x>100?36:32),Qt=p!=="none",H=Qt?1:0,Et=be!==void 0,Jt=(Pe==null?void 0:Pe.sticky)===!0,[Mi,Fo]=d.useState(!1),Ri=Tn??Mi,Yr=d.useCallback(()=>{$t!==void 0?$t():Fo(!1)},[$t]),_=d.useMemo(()=>Wt===void 0?void 0:Go(Wt,H),[Wt,H])??n,Yt=d.useRef(new AbortController);d.useEffect(()=>()=>{Yt==null||Yt.current.abort()},[]);const[Mt,Do]=x0(K,L,H,Yt.current,x),Cr=d.useCallback((f,C,v)=>{if(_e===void 0)return!0;const A=[f[0]-H,f[1]];return _e==null?void 0:_e(A,C,v)},[H,_e]),Wn=d.useRef(Wt),Ht=d.useCallback((f,C)=>{C&&(f=E0(f,Mt,H,he,Yt.current)),Zt!==void 0?(Wn.current=Go(f,-H),Zt(Wn.current)):r(f)},[Zt,Mt,H,he]),jn=Ar(Ge,d.useCallback((f,C,v,A)=>{Ge==null||Ge(M[v-H],C,v-H,A)},[Ge,H,M])),Sr=Ar(Vt,d.useCallback((f,C,v,A)=>{Vt==null||Vt(M[v-H],C,v-H,A)},[Vt,H,M])),Ei=Ar(ht,d.useCallback((f,C,v,A)=>{ht==null||ht(M[v-H],C,v-H,A)},[ht,H,M])),Mr=Ar(I,d.useCallback((f,C)=>(I==null?void 0:I({...f,columnIndex:f.columnIndex-H},C))??!1,[I,H])),Ti=Ar(D,d.useCallback((f,C)=>(D==null?void 0:D({...f,col:f.col-H},C))??!1,[D,H])),xn=d.useCallback(f=>{if(Z!==void 0){const C=Z(Go(f,-H));return typeof C=="boolean"?C:Go(C,H)}return!0},[Z,H]),[S,Y,J]=b0(_,Ht,De,xe,He,ge),Q=d.useMemo(()=>Jn(Pa(),Vr),[Vr]),[q,se]=d.useState([0,0,0]),Ee=d.useMemo(()=>{if(ir===void 0)return{};const f={};for(const C of ir)f[C.kind]=C;return f},[ir]),me=d.useCallback(f=>f.kind!==re.Custom?Ee[f.kind]:bt==null?void 0:bt.find(C=>C.isMatch(f)),[bt,Ee]);let{sizedColumns:ie,nonGrowWidth:xt}=Hh(M,x,Do,q[0]-(H===0?0:zn)-q[2],An,Bn,Q,me,Yt.current);p!=="none"&&(xt+=zn);const ye=d.useMemo(()=>ie.some(f=>f.group!==void 0),[ie]),Ze=ye?kr+Xr:kr,Oe=_.rows.length,Ve=p==="none"?"":Oe===0?ca:Oe===x?aa:rf,Te=d.useMemo(()=>p==="none"?ie:[{title:Ve,width:zn,icon:void 0,hasMenu:!1,style:"normal",themeOverride:rt},...ie],[ie,zn,p,Ve,rt]),[Ut,yt]=d.useMemo(()=>[Re!==void 0&&typeof zt=="number"?Math.floor(Re/zt):0,Re!==void 0&&typeof zt=="number"?-(Re%zt):0],[Re,zt]),dt=d.useRef({height:1,width:1,x:0,y:0}),vn=d.useMemo(()=>({x:dt.current.x,y:Ut,width:dt.current.width??1,height:dt.current.height??1,ty:yt}),[yt,Ut]),It=d.useRef(!1),[Ye,Kt,_t]=xf(vn);dt.current=Ye;const Xn=(Ye.height??1)>1;d.useLayoutEffect(()=>{if(Re!==void 0&&u.current!==null&&Xn){if(u.current.scrollTop===Re)return;u.current.scrollTop=Re,u.current.scrollTop!==Re&&_t(),It.current=!0}},[Re,Xn,_t]);const hn=(Ye.width??1)>1;d.useLayoutEffect(()=>{if(Xt!==void 0&&u.current!==null&&hn){if(u.current.scrollLeft===Xt)return;u.current.scrollLeft=Xt,u.current.scrollLeft!==Xt&&_t(),It.current=!0}},[Xt,hn,_t]);const Ur=Ye.x+H,kn=Ye.y,qt=d.useRef(null),Nt=d.useCallback(f=>{var C;f===!0?(C=qt.current)==null||C.focus():window.requestAnimationFrame(()=>{var v;(v=qt.current)==null||v.focus()})},[]),Lt=Et?x+1:x,ln=d.useCallback(f=>{const C=H===0?f:f.map(A=>({...A,location:[A.location[0]-H,A.location[1]]})),v=V==null?void 0:V(C);if(v!==!0)for(const A of C)$e==null||$e(A.location,A.value);return v},[$e,V,H]),[ar,Ii]=d.useState(),Ao=_.current!==void 0&&_.current.range.width*_.current.range.height>1?_.current.range:void 0,ec=d.useMemo(()=>{if((gt===void 0||gt.length===0)&&Ao===void 0&&ar===void 0)return;const f=[];if(gt!==void 0)for(const C of gt){const v=Te.length-C.range.x-H;v>0&&f.push({color:C.color,range:{...C.range,x:C.range.x+H,width:Math.min(v,C.range.width)},style:C.style})}return ar!==void 0&&f.push({color:Or(Q.accentColor,0),range:ar,style:"dashed"}),Ao!==void 0&&f.push({color:Or(Q.accentColor,.5),range:Ao,style:"solid-outline"}),f.length>0?f:void 0},[ar,Ao,gt,Te.length,Q.accentColor,H]),Fs=d.useRef(Te);Fs.current=Te;const en=d.useCallback(([f,C],v=!1)=>{var W,$,B,U,X,ne,le;const A=Et&&C===Lt-1;if(f===0&&Qt)return A?Ui:{kind:cn.Marker,allowOverlay:!1,checked:(_==null?void 0:_.rows.hasIndex(C))===!0,markerKind:p==="clickable-number"?"number":p,row:tt+C,drawHandle:dn!==void 0,cursor:p==="clickable-number"?"pointer":void 0};if(A){const ke=f===H?(Pe==null?void 0:Pe.hint)??"":"",Ce=Fs.current[f];if(((W=Ce==null?void 0:Ce.trailingRowOptions)==null?void 0:W.disabled)===!0)return Ui;{const Ue=(($=Ce==null?void 0:Ce.trailingRowOptions)==null?void 0:$.hint)??ke,Se=((B=Ce==null?void 0:Ce.trailingRowOptions)==null?void 0:B.addIcon)??(Pe==null?void 0:Pe.addIcon);return{kind:cn.NewRow,hint:Ue,allowOverlay:!1,icon:Se}}}else{const ee=f-H;if(v||(pt==null?void 0:pt.strict)===!0){const Ce=dt.current,Ue=Ce.x>ee||ee>Ce.x+Ce.width||Ce.y>C||C>Ce.y+Ce.height||C>=Di.current,Se=ee===((X=(U=Ce.extras)==null?void 0:U.selected)==null?void 0:X[0])&&C===((ne=Ce.extras)==null?void 0:ne.selected[1]);let ve=!1;if(((le=Ce.extras)==null?void 0:le.freezeRegions)!==void 0){for(const at of Ce.extras.freezeRegions)if(mi(at,ee,C)){ve=!0;break}}if(Ue&&!Se&&!ve)return Ui}let ke=L([ee,C]);return H!==0&&ke.span!==void 0&&(ke={...ke,span:[ke.span[0]+H,ke.span[1]+H]}),ke}},[Et,Lt,Qt,_==null?void 0:_.rows,dn,p,H,Pe==null?void 0:Pe.hint,Pe==null?void 0:Pe.addIcon,pt==null?void 0:pt.strict,L,tt]),Fi=d.useCallback(f=>{let C=(Dt==null?void 0:Dt(f))??{name:f};return ae!==void 0&&f!==""&&(C={icon:C.icon,name:C.name,overrideTheme:C.overrideTheme,actions:[...C.actions??[],{title:"Rename",icon:"renameIcon",onClick:v=>zi({group:C.name,bounds:v.bounds})}]}),C},[Dt,ae]),zo=d.useCallback(f=>{var B;const[C,v]=f.cell,A=Te[C],z=(A==null?void 0:A.group)!==void 0?(B=Fi(A.group))==null?void 0:B.overrideTheme:void 0,W=A==null?void 0:A.themeOverride,$=w==null?void 0:w(v);i({...f,theme:Jn(Q,z,W,$,f.content.themeOverride)})},[w,Te,Fi,Q]),Rr=d.useCallback((f,C,v)=>{var $;if(_.current===void 0)return;const[A,z]=_.current.cell,W=en([A,z]);if(W.kind!==re.Boolean&&W.allowOverlay){let B=W;if(v!==void 0)switch(B.kind){case re.Number:{const U=Ud(()=>v==="-"?-0:Number.parseFloat(v),0);B={...B,data:Number.isNaN(U)?0:U};break}case re.Text:case re.Markdown:case re.Uri:B={...B,data:v};break}zo({target:f,content:B,initialValue:v,cell:[A,z],highlight:v===void 0,forceEditMode:v!==void 0})}else W.kind===re.Boolean&&C&&W.readonly!==!0&&(ln([{location:_.current.cell,value:{...W,data:Ka(W.data)}}]),($=qt.current)==null||$.damage([{cell:_.current.cell}]))},[en,_,ln,zo]),Ds=d.useCallback((f,C)=>{var z;const v=(z=qt.current)==null?void 0:z.getBounds(f,C);if(v===void 0||u.current===null)return;const A=en([f,C]);A.allowOverlay&&zo({target:v,content:A,initialValue:void 0,highlight:!0,cell:[f,C],forceEditMode:!0})},[en,zo]),vt=d.useCallback((f,C,v="both",A=0,z=0,W=void 0)=>{if(u.current!==null){const $=qt.current,B=l.current,U=typeof f!="number"?f.unit==="cell"?f.amount:void 0:f,X=typeof C!="number"?C.unit==="cell"?C.amount:void 0:C,ne=typeof f!="number"&&f.unit==="px"?f.amount:void 0,le=typeof C!="number"&&C.unit==="px"?C.amount:void 0;if($!==null&&B!==null){let ee={x:0,y:0,width:0,height:0},ke=0,Ce=0;if((U!==void 0||X!==void 0)&&(ee=$.getBounds((U??0)+H,X??0)??ee,ee.width===0||ee.height===0))return;const Ue=B.getBoundingClientRect(),Se=Ue.width/B.offsetWidth;if(ne!==void 0&&(ee={...ee,x:ne-Ue.left-u.current.scrollLeft,width:1}),le!==void 0&&(ee={...ee,y:le+Ue.top-u.current.scrollTop,height:1}),ee!==void 0){const ve={x:ee.x-A,y:ee.y-z,width:ee.width+2*A,height:ee.height+2*z};let at=0;for(let Ni=0;Ni<st;Ni++)at+=ie[Ni].width;let Pt=0;const kt=At+(Jt?1:0);kt>0&&(Pt=Wr(Lt,kt,zt));let mn=at*Se+Ue.left+H*zn*Se,Sn=Ue.right,pn=Ue.top+Ze*Se,Mn=Ue.bottom-Pt*Se;const No=ee.width+A*2;switch(W==null?void 0:W.hAlign){case"start":Sn=mn+No;break;case"end":mn=Sn-No;break;case"center":mn=Math.floor((mn+Sn)/2)-No/2,Sn=mn+No;break}const Oo=ee.height+z*2;switch(W==null?void 0:W.vAlign){case"start":Mn=pn+Oo;break;case"end":pn=Mn-Oo;break;case"center":pn=Math.floor((pn+Mn)/2)-Oo/2,Mn=pn+Oo;break}mn>ve.x?ke=ve.x-mn:Sn<ve.x+ve.width&&(ke=ve.x+ve.width-Sn),pn>ve.y?Ce=ve.y-pn:Mn<ve.y+ve.height&&(Ce=ve.y+ve.height-Mn),v==="vertical"||typeof f=="number"&&f<st?ke=0:(v==="horizontal"||typeof C=="number"&&C>=Lt-kt)&&(Ce=0),(ke!==0||Ce!==0)&&(Se!==1&&(ke/=Se,Ce/=Se),u.current.scrollTo(ke+u.current.scrollLeft,Ce+u.current.scrollTop))}}}},[H,At,zn,Ze,st,ie,Lt,Jt,zt]),As=d.useRef(Ds),zs=d.useRef(L),Di=d.useRef(x);As.current=Ds,zs.current=L,Di.current=x;const Er=d.useCallback(async(f,C=!0)=>{var U;const v=Te[f];if(((U=v==null?void 0:v.trailingRowOptions)==null?void 0:U.disabled)===!0)return;const A=be==null?void 0:be();let z,W=!0;A!==void 0&&(z=await A,z==="top"&&(W=!1),typeof z=="number"&&(W=!1));let $=0;const B=()=>{if(Di.current<=x){$<500&&window.setTimeout(B,$),$=50+$*2;return}const X=typeof z=="number"?z:W?x:0;_o.current(f-H,X),S({cell:[f,X],range:{x:f,y:X,width:1,height:1}},!1,!1,"edit");const ne=zs.current([f-H,X]);ne.allowOverlay&&io(ne)&&ne.readonly!==!0&&C&&window.setTimeout(()=>{As.current(f,X)},0)};B()},[Te,be,H,x,S]),Ho=d.useCallback(f=>{var v,A;const C=((A=(v=ie[f])==null?void 0:v.trailingRowOptions)==null?void 0:A.targetColumn)??(Pe==null?void 0:Pe.targetColumn);if(typeof C=="number")return C+(Qt?1:0);if(typeof C=="object"){const z=M.indexOf(C);if(z>=0)return z+(Qt?1:0)}},[ie,M,Qt,Pe==null?void 0:Pe.targetColumn]),Vn=d.useRef(),Tr=d.useRef(),Kr=d.useCallback((f,C)=>{var z;const[v,A]=C;return Jn(Q,(z=Te[v])==null?void 0:z.themeOverride,w==null?void 0:w(A),f.themeOverride)},[w,Te,Q]),qr=d.useCallback(f=>{var ne,le,ee;const C=li.value?f.metaKey:f.ctrlKey,v=C&&Ie==="multi",A=C&&ue==="multi",[z,W]=f.location,$=_.columns,B=_.rows,[U,X]=((ne=_.current)==null?void 0:ne.cell)??[];if(f.kind==="cell"){if(Tr.current=void 0,cr.current=[z,W],z===0&&Qt){if(Et===!0&&W===x||p==="number"||Ie==="none")return;const ke=en(f.location);if(ke.kind!==cn.Marker)return;if(dn!==void 0){const Se=me(ke);rn((Se==null?void 0:Se.kind)===cn.Marker);const ve=(le=Se==null?void 0:Se.onClick)==null?void 0:le.call(Se,{...f,cell:ke,posX:f.localEventX,posY:f.localEventY,bounds:f.bounds,theme:Kr(ke,f.location),preventDefault:()=>{}});if(ve===void 0||ve.checked===ke.checked)return}i(void 0),Nt();const Ce=B.hasIndex(W),Ue=Vn.current;if(Ie==="multi"&&(f.shiftKey||f.isLongTouch===!0)&&Ue!==void 0&&B.hasIndex(Ue)){const Se=[Math.min(Ue,W),Math.max(Ue,W)+1];v||Fe==="multi"?Y(void 0,Se,!0):Y(qe.fromSingleSelection(Se),void 0,v)}else v||f.isTouch||Fe==="multi"?Ce?Y(B.remove(W),void 0,!0):(Y(void 0,W,!0),Vn.current=W):Ce&&B.length===1?Y(qe.empty(),void 0,C):(Y(qe.fromSingleSelection(W),void 0,C),Vn.current=W)}else if(z>=H&&Et&&W===x){const ke=Ho(z);Er(ke??z)}else if(U!==z||X!==W){const ke=en(f.location),Ce=me(ke);if((Ce==null?void 0:Ce.onSelect)!==void 0){let ve=!1;if(Ce.onSelect({...f,cell:ke,posX:f.localEventX,posY:f.localEventY,bounds:f.bounds,preventDefault:()=>ve=!0,theme:Kr(ke,f.location)}),ve)return}const Ue=Jt&&W===x,Se=Jt&&_!==void 0&&((ee=_.current)==null?void 0:ee.cell[1])===x;if((f.shiftKey||f.isLongTouch===!0)&&U!==void 0&&X!==void 0&&_.current!==void 0&&!Se){if(Ue)return;const ve=Math.min(z,U),at=Math.max(z,U),Pt=Math.min(W,X),kt=Math.max(W,X);S({..._.current,range:{x:ve,y:Pt,width:at-ve+1,height:kt-Pt+1}},!0,C,"click"),Vn.current=void 0,Nt()}else S({cell:[z,W],range:{x:z,y:W,width:1,height:1}},!0,C,"click"),Vn.current=void 0,i(void 0),Nt()}}else if(f.kind==="header")if(cr.current=[z,W],i(void 0),Qt&&z===0)Vn.current=void 0,Tr.current=void 0,Ie==="multi"&&(B.length!==x?Y(qe.fromSingleSelection([0,x]),void 0,C):Y(qe.empty(),void 0,C),Nt());else{const ke=Tr.current;if(ue==="multi"&&(f.shiftKey||f.isLongTouch===!0)&&ke!==void 0&&$.hasIndex(ke)){const Ce=[Math.min(ke,z),Math.max(ke,z)+1];A?J(void 0,Ce,C):J(qe.fromSingleSelection(Ce),void 0,C)}else A?($.hasIndex(z)?J($.remove(z),void 0,C):J(void 0,z,C),Tr.current=z):ue!=="none"&&(J(qe.fromSingleSelection(z),void 0,C),Tr.current=z);Vn.current=void 0,Nt()}else f.kind===nn?cr.current=[z,W]:f.kind===ai&&!f.isMaybeScrollbar&&(Ht(Zo,!1),i(void 0),Nt(),ft==null||ft(),Vn.current=void 0,Tr.current=void 0)},[Er,ue,Nt,me,Ho,en,_,Qt,Jt,ft,dn,H,p,Ie,Fe,x,S,Ht,J,Y,Et,Kr]),Gr=d.useRef(!1),cr=d.useRef(),Hs=d.useRef(Ye),an=d.useRef(),tc=d.useCallback(f=>{if(Ir.current=!1,Hs.current=dt.current,f.button!==0&&f.button!==1){an.current=void 0;return}const C=performance.now();an.current={button:f.button,time:C,location:f.location},(f==null?void 0:f.kind)==="header"&&(Gr.current=!0);const v=f.kind==="cell"&&f.isFillHandle;!v&&f.kind!=="cell"&&f.isEdge||(c({previousSelection:_,fillHandle:v}),cr.current=void 0,!f.isTouch&&f.button===0&&!v?qr(f):!f.isTouch&&f.button===1&&(cr.current=f.location))},[_,qr]),[Ai,zi]=d.useState(),Ls=d.useCallback(f=>{if(f.kind!==nn||ue!=="multi")return;const C=li.value?f.metaKey:f.ctrlKey,[v]=f.location,A=_.columns;if(v<H)return;const z=Te[v];let W=v,$=v;for(let B=v-1;B>=H&&xo(z.group,Te[B].group);B--)W--;for(let B=v+1;B<Te.length&&xo(z.group,Te[B].group);B++)$++;if(Nt(),C)if(A.hasAll([W,$+1])){let B=A;for(let U=W;U<=$;U++)B=B.remove(U);J(B,void 0,C)}else J(void 0,[W,$+1],C);else J(qe.fromSingleSelection([W,$+1]),void 0,C)},[ue,Nt,_.columns,Te,H,J]),Ir=d.useRef(!1),Lo=d.useCallback(async f=>{if(Mt!==void 0&&jn!==void 0){const C=dt.current.y,v=dt.current.height;let A=Mt({x:f,y:C,width:1,height:Math.min(v,x-C)},Yt.current.signal);typeof A!="object"&&(A=await A());const z=ie[f-H],$=document.createElement("canvas").getContext("2d",{alpha:!1});if($!==null){$.font=Q.baseFontFull;const B=$a($,Q,z,0,A,An,On,!1,me);jn==null||jn(z,B.width,f,B.width)}}},[ie,Mt,On,Q,An,jn,H,x,me]),[nc,Hi]=d.useState(),Fr=d.useCallback(async(f,C)=>{var B,U;const v=(B=f.current)==null?void 0:B.range;if(v===void 0||Mt===void 0||C.current===void 0)return;const A=C.current.range;if(T!==void 0){let X=!1;if(T({fillDestination:{...A,x:A.x-H},patternSource:{...v,x:v.x-H},preventDefault:()=>X=!0}),X)return}let z=Mt(v,Yt.current.signal);typeof z!="object"&&(z=await z());const W=z,$=[];for(let X=0;X<A.width;X++)for(let ne=0;ne<A.height;ne++){const le=[A.x+X,A.y+ne];if(Ea(le,v))continue;const ee=W[ne%v.height][X%v.width];Pr(ee)||!io(ee)||$.push({location:le,value:{...ee}})}ln($),(U=qt.current)==null||U.damage($.map(X=>({cell:X.location})))},[Mt,ln,T,H]),Ps=d.useCallback(()=>{if(_.current===void 0||_.current.range.width<=1)return;const f={..._,current:{..._.current,range:{..._.current.range,width:1}}};Fr(f,_)},[Fr,_]),$s=d.useCallback(()=>{if(_.current===void 0||_.current.range.height<=1)return;const f={..._,current:{..._.current,range:{..._.current.range,height:1}}};Fr(f,_)},[Fr,_]),rc=d.useCallback((f,C)=>{var ne,le;const v=a;if(c(void 0),Ii(void 0),Hi(void 0),Gr.current=!1,C)return;if((v==null?void 0:v.fillHandle)===!0&&_.current!==void 0&&((ne=v.previousSelection)==null?void 0:ne.current)!==void 0){if(ar===void 0)return;const ee={..._,current:{..._.current,range:Na(v.previousSelection.current.range,ar)}};Fr(v.previousSelection,ee),Ht(ee,!0);return}const[A,z]=f.location,[W,$]=cr.current??[],B=()=>{Ir.current=!0},U=ee=>{var Ce,Ue,Se;const ke=ee.isTouch||W===A&&$===z;if(ke&&(F==null||F([A-H,z],{...ee,preventDefault:B})),ee.button===1)return!Ir.current;if(!Ir.current){const ve=en(f.location),at=me(ve);if(at!==void 0&&at.onClick!==void 0&&ke){const kt=at.onClick({...ee,cell:ve,posX:ee.localEventX,posY:ee.localEventY,bounds:ee.bounds,theme:Kr(ve,f.location),preventDefault:B});kt!==void 0&&!Pr(kt)&&Hr(kt)&&(ln([{location:ee.location,value:kt}]),(Ce=qt.current)==null||Ce.damage([{cell:ee.location}]))}if(Ir.current||_.current===void 0)return!1;let Pt=!1;switch(et){case"double-click":case"second-click":{if(((Se=(Ue=v==null?void 0:v.previousSelection)==null?void 0:Ue.current)==null?void 0:Se.cell)===void 0)break;const[kt,mn]=_.current.cell,[Sn,pn]=v.previousSelection.current.cell;Pt=A===kt&&A===Sn&&z===mn&&z===pn&&(ee.isDoubleClick===!0||et==="second-click");break}case"single-click":{Pt=!0;break}}if(Pt)return N==null||N([A-H,z]),Rr(ee.bounds,!1),!0}return!1},X=f.location[0]-H;if(f.isTouch){const ee=dt.current,ke=Hs.current;if(ee.x!==ke.x||ee.y!==ke.y)return;if(f.isLongTouch===!0){if(f.kind==="cell"&&mo((le=_.current)==null?void 0:le.cell,f.location)){pe==null||pe([X,f.location[1]],{...f,preventDefault:B});return}else if(f.kind==="header"&&_.columns.hasIndex(A)){G==null||G(X,{...f,preventDefault:B});return}else if(f.kind===nn){if(X<0)return;oe==null||oe(X,{...f,preventDefault:B});return}}f.kind==="cell"?U(f)||qr(f):f.kind===nn?de==null||de(X,{...f,preventDefault:B}):(f.kind===qn&&(P==null||P(X,{...f,preventDefault:B})),qr(f));return}if(f.kind==="header"){if(X<0)return;f.isEdge?f.isDoubleClick===!0&&Lo(A):f.button===0&&A===W&&z===$&&(P==null||P(X,{...f,preventDefault:B}))}if(f.kind===nn){if(X<0)return;f.button===0&&A===W&&z===$&&(de==null||de(X,{...f,preventDefault:B}),Ir.current||Ls(f))}f.kind==="cell"&&(f.button===0||f.button===1)&&U(f),cr.current=void 0},[a,_,H,ar,Fr,Ht,F,en,me,et,Kr,ln,N,Rr,pe,G,oe,qr,de,P,Lo,Ls]),oc=d.useCallback(f=>{const C={...f,location:[f.location[0]-H,f.location[1]]};Ae==null||Ae(C),a!==void 0&&f.buttons===0&&(c(void 0),Ii(void 0),Hi(void 0),Gr.current=!1),Hi(v=>{var A;return Gr.current?[f.scrollEdge[0],0]:f.scrollEdge[0]===(v==null?void 0:v[0])&&f.scrollEdge[1]===v[1]?v:a===void 0||(((A=an.current)==null?void 0:A.location[0])??0)<H?void 0:f.scrollEdge})},[a,Ae,H]),ic=d.useCallback((f,C)=>{Rt==null||Rt(f-H,C)},[Rt,H]),Cn=(js=_==null?void 0:_.current)==null?void 0:js.cell,sc=d.useCallback((f,C,v,A,z,W)=>{It.current=!1;let $=Cn;$!==void 0&&($=[$[0]-H,$[1]]);const B=st===0?void 0:{x:0,y:f.y,width:st,height:f.height},U=[];B!==void 0&&U.push(B),At>0&&(U.push({x:f.x-H,y:x-At,width:f.width,height:At}),st>0&&U.push({x:0,y:x-At,width:st,height:At}));const X={x:f.x-H,y:f.y,width:f.width,height:Et&&f.y+f.height>=x?f.height-1:f.height,tx:z,ty:W,extras:{selected:$,freezeRegion:B,freezeRegions:U}};dt.current=X,Kt(X),se([C,v,A]),wt==null||wt(X,X.tx,X.ty,X.extras)},[Cn,H,Et,x,st,At,Kt,wt]),lc=Ar(ze,d.useCallback((f,C)=>{ze==null||ze(f-H,C-H),ue!=="none"&&J(qe.fromSingleSelection(C),void 0,!0)},[ue,ze,H,J])),Li=d.useRef(!1),ac=d.useCallback(f=>{if(f.location[0]===0&&H>0){f.preventDefault();return}Le==null||Le({...f,location:[f.location[0]-H,f.location[1]]}),f.defaultPrevented()||(Li.current=!0),c(void 0)},[Le,H]),cc=d.useCallback(()=>{Li.current=!1},[]),Pi=d.useRef(),$i=d.useCallback(f=>{var C,v,A;if(!Ya(f,Pi.current)&&(Pi.current=f,!(((C=an==null?void 0:an.current)==null?void 0:C.button)!==void 0&&an.current.button>=1))){if(f.buttons!==0&&a!==void 0&&((v=an.current)==null?void 0:v.location[0])===0&&f.location[0]===0&&H===1&&Ie==="multi"&&a.previousSelection&&!a.previousSelection.rows.hasIndex(an.current.location[1])&&_.rows.hasIndex(an.current.location[1])){const z=Math.min(an.current.location[1],f.location[1]),W=Math.max(an.current.location[1],f.location[1])+1;Y(qe.fromSingleSelection([z,W]),void 0,!1)}if(f.buttons!==0&&a!==void 0&&_.current!==void 0&&!Li.current&&!Gr.current&&(ge==="rect"||ge==="multi-rect")){const[z,W]=_.current.cell;let[$,B]=f.location;if(B<0&&(B=dt.current.y),a.fillHandle===!0&&((A=a.previousSelection)==null?void 0:A.current)!==void 0){const U=a.previousSelection.current.range;B=Math.min(B,Jt?x-1:x);const X=Fg(U,$,B,bn);Ii(X)}else{if(Jt&&W===x)return;if(Jt&&B===x)if(f.kind===ai)B--;else return;$=Math.max($,H);const ne=$-z,le=B-W,ee={x:ne>=0?z:$,y:le>=0?W:B,width:Math.abs(ne)+1,height:Math.abs(le)+1};S({..._.current,range:ee},!0,!1,"drag")}}Bt==null||Bt({...f,location:[f.location[0]-H,f.location[1]]})}},[bn,a,H,Ie,_,ge,Bt,Y,Jt,x,S]),uc=d.useCallback(()=>{var $,B;const f=Pi.current;if(f===void 0)return;const[C,v]=f.scrollEdge;let[A,z]=f.location;const W=dt.current;C===-1?A=((B=($=W.extras)==null?void 0:$.freezeRegion)==null?void 0:B.x)??W.x:C===1&&(A=W.x+W.width),v===-1?z=Math.max(0,W.y):v===1&&(z=Math.min(x-1,W.y+W.height)),A=yn(A,0,Te.length-1),z=yn(z,0,x-1),$i({...f,location:[A,z]})},[Te.length,$i,x]);L0(nc,u,uc);const gn=d.useCallback(f=>{if(_.current===void 0)return;const[C,v]=f,[A,z]=_.current.cell,W=_.current.range;let $=W.x,B=W.x+W.width,U=W.y,X=W.y+W.height;if(v!==0)switch(v){case 2:{X=x,U=z,vt(0,X,"vertical");break}case-2:{U=0,X=z+1,vt(0,U,"vertical");break}case 1:{U<z?(U++,vt(0,U,"vertical")):(X=Math.min(x,X+1),vt(0,X,"vertical"));break}case-1:{X>z+1?(X--,vt(0,X,"vertical")):(U=Math.max(0,U-1),vt(0,U,"vertical"));break}default:bo()}if(C!==0)if(C===2)B=Te.length,$=A,vt(B-1-H,0,"horizontal");else if(C===-2)$=H,B=A+1,vt($-H,0,"horizontal");else{let ne=[];if(Mt!==void 0){const le=Mt({x:$,y:U,width:B-$-H,height:X-U},Yt.current.signal);typeof le=="object"&&(ne=O0(le))}if(C===1){let le=!1;if($<A){if(ne.length>0){const ee=fr($+1,A+1).find(ke=>!ne.includes(ke-H));ee!==void 0&&($=ee,le=!0)}else $++,le=!0;le&&vt($,0,"horizontal")}le||(B=Math.min(Te.length,B+1),vt(B-1-H,0,"horizontal"))}else if(C===-1){let le=!1;if(B>A+1){if(ne.length>0){const ee=fr(B-1,A,-1).find(ke=>!ne.includes(ke-H));ee!==void 0&&(B=ee,le=!0)}else B--,le=!0;le&&vt(B-H,0,"horizontal")}le||($=Math.max(H,$-1),vt($-H,0,"horizontal"))}else bo()}S({cell:_.current.cell,range:{x:$,y:U,width:B-$,height:X-U}},!0,!1,"keyboard-select")},[Mt,_,Te.length,H,x,vt,S]),Yn=d.useCallback((f,C,v,A)=>{const z=Lt-(v?0:1);if(f=yn(f,H,ie.length-1+H),C=yn(C,0,z),f===(Cn==null?void 0:Cn[0])&&C===(Cn==null?void 0:Cn[1]))return!1;if(A&&_.current!==void 0){const W=[..._.current.rangeStack];(_.current.range.width>1||_.current.range.height>1)&&W.push(_.current.range),Ht({..._,current:{cell:[f,C],range:{x:f,y:C,width:1,height:1},rangeStack:W}},!0)}else S({cell:[f,C],range:{x:f,y:C,width:1,height:1}},!0,!1,"keyboard-nav");return h.current!==void 0&&h.current[0]===f&&h.current[1]===C&&(h.current=void 0),vt(f-H,C),!0},[Lt,H,ie.length,Cn,_,vt,Ht,S]),dc=d.useCallback((f,C)=>{(o==null?void 0:o.cell)!==void 0&&f!==void 0&&Hr(f)&&(ln([{location:o.cell,value:f}]),window.requestAnimationFrame(()=>{var z;(z=qt.current)==null||z.damage([{cell:o.cell}])})),Nt(!0),i(void 0);const[v,A]=C;if(_.current!==void 0&&(v!==0||A!==0)){const z=_.current.cell[1]===Lt-1&&f!==void 0;Yn(yn(_.current.cell[0]+v,0,Te.length-1),yn(_.current.cell[1]+A,0,Lt-1),z,!1)}O==null||O(f,C)},[o==null?void 0:o.cell,Nt,_,O,ln,Lt,Yn,Te.length]),fc=d.useMemo(()=>`gdg-overlay-${N0++}`,[]),ur=d.useCallback(f=>{var v,A,z,W;Nt();const C=[];for(let $=f.x;$<f.x+f.width;$++)for(let B=f.y;B<f.y+f.height;B++){const U=L([$-H,B]);if(!U.allowOverlay&&U.kind!==re.Boolean)continue;let X;if(U.kind===re.Custom){const ne=me(U),le=(v=ne==null?void 0:ne.provideEditor)==null?void 0:v.call(ne,U);(ne==null?void 0:ne.onDelete)!==void 0?X=ne.onDelete(U):of(le)&&(X=(A=le==null?void 0:le.deletedValue)==null?void 0:A.call(le,U))}else if(Hr(U)&&U.allowOverlay||U.kind===re.Boolean){const ne=me(U);X=(z=ne==null?void 0:ne.onDelete)==null?void 0:z.call(ne,U)}X!==void 0&&!Pr(X)&&Hr(X)&&C.push({location:[$,B],value:X})}ln(C),(W=qt.current)==null||W.damage(C.map($=>({cell:$.location})))},[Nt,L,me,ln,H]),Zr=o!==void 0,_s=d.useCallback(f=>{var ke,Ce;const C=()=>{f.stopPropagation(),f.preventDefault()},v={didMatch:!1},{bounds:A}=f,z=_.columns,W=_.rows,$=fn;if(!Zr&&Be($.clear,f,v))Ht(Zo,!1),ft==null||ft();else if(!Zr&&Be($.selectAll,f,v))Ht({columns:qe.empty(),rows:qe.empty(),current:{cell:((ke=_.current)==null?void 0:ke.cell)??[H,0],range:{x:H,y:0,width:M.length,height:x},rangeStack:[]}},!1);else if(Be($.search,f,v))(Ce=s==null?void 0:s.current)==null||Ce.focus({preventScroll:!0}),Fo(!0);else if(Be($.delete,f,v)){const Ue=(xn==null?void 0:xn(_))??!0;if(Ue!==!1){const Se=Ue===!0?_:Ue;if(Se.current!==void 0){ur(Se.current.range);for(const ve of Se.current.rangeStack)ur(ve)}for(const ve of Se.rows)ur({x:H,y:ve,width:M.length,height:1});for(const ve of Se.columns)ur({x:ve,y:0,width:1,height:x})}}if(v.didMatch)return C(),!0;if(_.current===void 0)return!1;let[B,U]=_.current.cell,X=!1,ne=!1;Be($.scrollToSelectedCell,f,v)?_o.current(B-H,U):ue!=="none"&&Be($.selectColumn,f,v)?z.hasIndex(B)?J(z.remove(B),void 0,!0):ue==="single"?J(qe.fromSingleSelection(B),void 0,!0):J(void 0,B,!0):Ie!=="none"&&Be($.selectRow,f,v)?W.hasIndex(U)?Y(W.remove(U),void 0,!0):Ie==="single"?Y(qe.fromSingleSelection(U),void 0,!0):Y(void 0,U,!0):!Zr&&A!==void 0&&Be($.activateCell,f,v)?U===x&&Et?window.setTimeout(()=>{const Ue=Ho(B);Er(Ue??B)},0):(N==null||N([B-H,U]),Rr(A,!0)):_.current.range.height>1&&Be($.downFill,f,v)?$s():_.current.range.width>1&&Be($.rightFill,f,v)?Ps():Be($.goToNextPage,f,v)?U+=Math.max(1,dt.current.height-4):Be($.goToPreviousPage,f,v)?U-=Math.max(1,dt.current.height-4):Be($.goToFirstCell,f,v)?(i(void 0),U=0,B=0):Be($.goToLastCell,f,v)?(i(void 0),U=Number.MAX_SAFE_INTEGER,B=Number.MAX_SAFE_INTEGER):Be($.selectToFirstCell,f,v)?(i(void 0),gn([-2,-2])):Be($.selectToLastCell,f,v)?(i(void 0),gn([2,2])):Zr?(Be($.closeOverlay,f,v)&&i(void 0),Be($.acceptOverlayDown,f,v)&&(i(void 0),U++),Be($.acceptOverlayUp,f,v)&&(i(void 0),U--),Be($.acceptOverlayLeft,f,v)&&(i(void 0),B--),Be($.acceptOverlayRight,f,v)&&(i(void 0),B++)):(Be($.goDownCell,f,v)?U+=1:Be($.goUpCell,f,v)?U-=1:Be($.goRightCell,f,v)?B+=1:Be($.goLeftCell,f,v)?B-=1:Be($.goDownCellRetainSelection,f,v)?(U+=1,X=!0):Be($.goUpCellRetainSelection,f,v)?(U-=1,X=!0):Be($.goRightCellRetainSelection,f,v)?(B+=1,X=!0):Be($.goLeftCellRetainSelection,f,v)?(B-=1,X=!0):Be($.goToLastRow,f,v)?U=x-1:Be($.goToFirstRow,f,v)?U=Number.MIN_SAFE_INTEGER:Be($.goToLastColumn,f,v)?B=Number.MAX_SAFE_INTEGER:Be($.goToFirstColumn,f,v)?B=Number.MIN_SAFE_INTEGER:(ge==="rect"||ge==="multi-rect")&&(Be($.selectGrowDown,f,v)?gn([0,1]):Be($.selectGrowUp,f,v)?gn([0,-1]):Be($.selectGrowRight,f,v)?gn([1,0]):Be($.selectGrowLeft,f,v)?gn([-1,0]):Be($.selectToLastRow,f,v)?gn([0,2]):Be($.selectToFirstRow,f,v)?gn([0,-2]):Be($.selectToLastColumn,f,v)?gn([2,0]):Be($.selectToFirstColumn,f,v)&&gn([-2,0])),ne=v.didMatch);const le=Yn(B,U,!1,X),ee=v.didMatch;return ee&&(le||!ne||or)&&C(),ee},[Zr,_,fn,ue,Ie,ge,H,x,Yn,Ht,ft,M.length,xn,or,ur,J,Y,Et,Ho,Er,N,Rr,$s,Ps,gn]),Qr=d.useCallback(f=>{let C=!1;if(Xe!==void 0&&Xe({...f,cancel:()=>{C=!0}}),C||_s(f)||_.current===void 0)return;const[v,A]=_.current.cell,z=dt.current;if(!f.metaKey&&!f.ctrlKey&&_.current!==void 0&&f.key.length===1&&/[ -~]/g.test(f.key)&&f.bounds!==void 0&&io(L([v-H,Math.max(0,Math.min(A,x-1))]))){if((!Jt||A!==x)&&(z.y>A||A>z.y+z.height||z.x>v||v>z.x+z.width))return;Rr(f.bounds,!0,f.key),f.stopPropagation(),f.preventDefault()}},[Xe,_s,_,L,H,x,Jt,Rr]),hc=d.useCallback((f,C)=>{const v=f.location[0]-H;if(f.kind==="header"&&(G==null||G(v,{...f,preventDefault:C})),f.kind===nn){if(v<0)return;oe==null||oe(v,{...f,preventDefault:C})}if(f.kind==="cell"){const[A,z]=f.location;pe==null||pe([v,z],{...f,preventDefault:C}),ph(_,f.location)||Yn(A,z,!1,!1)}},[_,pe,oe,G,H,Yn]),_i=d.useCallback(async f=>{var $,B,U;if(!fn.paste)return;function C(X,ne,le,ee){var Ce,Ue;const ke=typeof le=="object"?(le==null?void 0:le.join(`
`))??"":(le==null?void 0:le.toString())??"";if(!Pr(X)&&io(X)&&X.readonly!==!0){const Se=j==null?void 0:j(ke,X);if(Se!==void 0&&Hr(Se))return{location:ne,value:Se};const ve=me(X);if(ve===void 0)return;if(ve.kind===re.Custom){rn(X.kind===re.Custom);const at=(Ce=ve.onPaste)==null?void 0:Ce.call(ve,ke,X.data);return at===void 0?void 0:{location:ne,value:{...X,data:at}}}else{const at=(Ue=ve.onPaste)==null?void 0:Ue.call(ve,ke,X,{formatted:ee,formattedString:typeof ee=="string"?ee:ee==null?void 0:ee.join(`
`),rawValue:le});return at===void 0?void 0:(rn(at.kind===X.kind),{location:ne,value:at})}}}const v=_.columns,A=_.rows,z=(($=u.current)==null?void 0:$.contains(document.activeElement))===!0||((B=l.current)==null?void 0:B.contains(document.activeElement))===!0;let W;if(_.current!==void 0?W=[_.current.range.x,_.current.range.y]:v.length===1?W=[v.first()??0,0]:A.length===1&&(W=[H,A.first()??0]),z&&W!==void 0){let X,ne;const le="text/plain",ee="text/html";if(navigator.clipboard.read!==void 0){const Se=await navigator.clipboard.read();for(const ve of Se){if(ve.types.includes(ee)){const Pt=await(await ve.getType(ee)).text(),kt=Sl(Pt);if(kt!==void 0){X=kt;break}}ve.types.includes(le)&&(ne=await(await ve.getType(le)).text())}}else if(navigator.clipboard.readText!==void 0)ne=await navigator.clipboard.readText();else if(f!==void 0&&(f==null?void 0:f.clipboardData)!==null){if(f.clipboardData.types.includes(ee)){const Se=f.clipboardData.getData(ee);X=Sl(Se)}X===void 0&&f.clipboardData.types.includes(le)&&(ne=f.clipboardData.getData(le))}else return;const[ke,Ce]=W,Ue=[];do{if(ut===void 0){const Se=en(W),ve=ne??(X==null?void 0:X.map(Pt=>Pt.map(kt=>kt.rawValue).join("	")).join("	"))??"",at=C(Se,W,ve,void 0);at!==void 0&&Ue.push(at);break}if(X===void 0){if(ne===void 0)return;X=T0(ne)}if(ut===!1||typeof ut=="function"&&(ut==null?void 0:ut([W[0]-H,W[1]],X.map(Se=>Se.map(ve=>{var at;return((at=ve.rawValue)==null?void 0:at.toString())??""}))))!==!0)return;for(const[Se,ve]of X.entries()){if(Se+Ce>=x)break;for(const[at,Pt]of ve.entries()){const kt=[at+ke,Se+Ce],[mn,Sn]=kt;if(mn>=Te.length||Sn>=Lt)continue;const pn=en(kt),Mn=C(pn,kt,Pt.rawValue,Pt.formatted);Mn!==void 0&&Ue.push(Mn)}}}while(!1);ln(Ue),(U=qt.current)==null||U.damage(Ue.map(Se=>({cell:Se.location})))}},[j,me,en,_,fn.paste,Te.length,ln,Lt,ut,H,x]);Ft("paste",_i,m,!1,!0);const Jr=d.useCallback(async(f,C)=>{var $,B;if(!fn.copy)return;const v=C===!0||(($=u.current)==null?void 0:$.contains(document.activeElement))===!0||((B=l.current)==null?void 0:B.contains(document.activeElement))===!0,A=_.columns,z=_.rows,W=(U,X)=>{if(!we)Rl(U,X,f);else{const ne=X.map(le=>({kind:re.Text,data:M[le].title,displayData:M[le].title,allowOverlay:!1}));Rl([ne,...U],X,f)}};if(v&&Mt!==void 0){if(_.current!==void 0){let U=Mt(_.current.range,Yt.current.signal);typeof U!="object"&&(U=await U()),W(U,fr(_.current.range.x-H,_.current.range.x+_.current.range.width-H))}else if(z!==void 0&&z.length>0){const X=[...z].map(ne=>{const le=Mt({x:H,y:ne,width:M.length,height:1},Yt.current.signal);return typeof le=="object"?le[0]:le().then(ee=>ee[0])});if(X.some(ne=>ne instanceof Promise)){const ne=await Promise.all(X);W(ne,fr(M.length))}else W(X,fr(M.length))}else if(A.length>0){const U=[],X=[];for(const ne of A){let le=Mt({x:ne,y:0,width:1,height:x},Yt.current.signal);typeof le!="object"&&(le=await le()),U.push(le),X.push(ne-H)}if(U.length===1)W(U[0],X);else{const ne=U.reduce((le,ee)=>le.map((ke,Ce)=>[...ke,...ee[Ce]]));W(ne,X)}}}},[M,Mt,_,fn.copy,H,x,we]);Ft("copy",Jr,m,!1,!1);const gc=d.useCallback(async f=>{var v,A;if(!(!fn.cut||!(((v=u.current)==null?void 0:v.contains(document.activeElement))===!0||((A=l.current)==null?void 0:A.contains(document.activeElement))===!0))&&(await Jr(f),_.current!==void 0)){let z={current:{cell:_.current.cell,range:_.current.range,rangeStack:[]},rows:qe.empty(),columns:qe.empty()};const W=xn==null?void 0:xn(z);if(W===!1||(z=W===!0?z:W,z.current===void 0))return;ur(z.current.range)}},[ur,_,fn.cut,Jr,xn]);Ft("cut",gc,m,!1,!1);const mc=d.useCallback((f,C)=>{if(Me!==void 0){H!==0&&(f=f.map(z=>[z[0]-H,z[1]])),Me(f,C);return}if(f.length===0||C===-1)return;const[v,A]=f[C];h.current!==void 0&&h.current[0]===v&&h.current[1]===A||(h.current=[v,A],Yn(v,A,!1,!1))},[Me,H,Yn]),[Po,$o]=((Xs=Wt==null?void 0:Wt.current)==null?void 0:Xs.cell)??[],_o=d.useRef(vt);_o.current=vt,d.useLayoutEffect(()=>{var f,C,v,A;!It.current&&Po!==void 0&&$o!==void 0&&(Po!==((C=(f=Wn.current)==null?void 0:f.current)==null?void 0:C.cell[0])||$o!==((A=(v=Wn.current)==null?void 0:v.current)==null?void 0:A.cell[1]))&&_o.current(Po,$o),It.current=!1},[Po,$o]);const Ns=_.current!==void 0&&(_.current.cell[0]>=Te.length||_.current.cell[1]>=Lt);d.useLayoutEffect(()=>{Ns&&Ht(Zo,!1)},[Ns,Ht]);const pc=d.useMemo(()=>Et===!0&&(Pe==null?void 0:Pe.tint)===!0?qe.fromSingleSelection(Lt-1):qe.empty(),[Lt,Et,Pe==null?void 0:Pe.tint]),yc=d.useCallback(f=>typeof lt=="boolean"?lt:(lt==null?void 0:lt(f-H))??!0,[H,lt]),wc=d.useMemo(()=>{if(Ai===void 0||l.current===null)return null;const{bounds:f,group:C}=Ai,v=l.current.getBoundingClientRect();return d.createElement(y0,{bounds:f,group:C,canvasBounds:v,onClose:()=>zi(void 0),onFinish:A=>{zi(void 0),ae==null||ae(C,A)}})},[ae,Ai]),bc=Math.min(Te.length,st+(Qt?1:0));d.useImperativeHandle(t,()=>({appendRow:(f,C)=>Er(f+H,C),updateCells:f=>{var C;return H!==0&&(f=f.map(v=>({cell:[v.cell[0]+H,v.cell[1]]}))),(C=qt.current)==null?void 0:C.damage(f)},getBounds:(f,C)=>{var v;if(!((l==null?void 0:l.current)===null||(u==null?void 0:u.current)===null)){if(f===void 0&&C===void 0){const A=l.current.getBoundingClientRect(),z=A.width/u.current.clientWidth;return{x:A.x-u.current.scrollLeft*z,y:A.y-u.current.scrollTop*z,width:u.current.scrollWidth*z,height:u.current.scrollHeight*z}}return(v=qt.current)==null?void 0:v.getBounds((f??0)+H,C)}},focus:()=>{var f;return(f=qt.current)==null?void 0:f.focus()},emit:async f=>{switch(f){case"delete":Qr({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!1,key:"Delete",keyCode:46,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-right":Qr({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"r",keyCode:82,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-down":Qr({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"d",keyCode:68,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"copy":await Jr(void 0,!0);break;case"paste":await _i();break}},scrollTo:vt,remeasureColumns:f=>{for(const C of f)Lo(C+H)}}),[Er,Lo,Jr,Qr,_i,H,vt]);const[Os,Bs]=Cn??[],xc=d.useCallback(f=>{const[C,v]=f;if(v===-1){ue!=="none"&&(J(qe.fromSingleSelection(C),void 0,!1),Nt());return}Os===C&&Bs===v||(S({cell:f,range:{x:C,y:v,width:1,height:1}},!0,!1,"keyboard-nav"),vt(C,v))},[ue,Nt,vt,Os,Bs,S,J]),[vc,kc]=d.useState(!1),Ws=d.useRef(Nl(f=>{kc(f)},5)),Cc=d.useCallback(()=>{Ws.current(!0),_.current===void 0&&_.columns.length===0&&_.rows.length===0&&a===void 0&&S({cell:[H,kn],range:{x:H,y:kn,width:1,height:1}},!0,!1,"keyboard-select")},[kn,_,a,H,S]),Sc=d.useCallback(()=>{Ws.current(!1)},[]),[Mc,Rc]=d.useMemo(()=>{let f;const C=(pt==null?void 0:pt.scrollbarWidthOverride)??es(),v=x+(Et?1:0);if(typeof zt=="number")f=Ze+v*zt;else{let z=0;const W=Math.min(v,10);for(let $=0;$<W;$++)z+=zt($);z=Math.floor(z/W),f=Ze+v*z}f+=C;const A=Te.reduce((z,W)=>W.width+z,0)+C;return[`${Math.min(1e5,A)}px`,`${Math.min(1e5,f)}px`]},[Te,pt==null?void 0:pt.scrollbarWidthOverride,zt,x,Et,Ze]);return d.createElement(Ah.Provider,{value:Q},d.createElement(A0,{style:Dh(Q),className:je,inWidth:b??Mc,inHeight:R??Rc},d.createElement(h0,{fillHandle:Dn,drawFocusRing:So,experimental:pt,fixedShadowX:nr,fixedShadowY:rr,getRowThemeOverride:w,headerIcons:yr,imageWindowLoader:Mo,initialSize:Ro,isDraggable:wr,onDragLeave:br,onRowMoved:dn,overscrollX:Ci,overscrollY:Si,preventDiagonalScrolling:Eo,rightElement:bi,rightElementProps:xi,smoothScrollX:Nn,smoothScrollY:vi,className:je,enableGroups:ye,onCanvasFocused:Cc,onCanvasBlur:Sc,canvasRef:l,onContextMenu:hc,theme:Q,cellXOffset:Ur,cellYOffset:kn,accessibilityHeight:Ye.height,onDragEnd:cc,columns:Te,nonGrowWidth:xt,drawHeader:Mr,onColumnProposeMove:te,drawCell:Ti,disabledRows:pc,freezeColumns:bc,lockColumns:H,firstColAccessible:H===0,getCellContent:en,minColumnWidth:An,maxColumnWidth:On,searchInputRef:s,showSearch:Ri,onSearchClose:Yr,highlightRegions:ec,getCellsForSelection:Mt,getGroupDetails:Fi,headerHeight:kr,isFocused:vc,groupHeaderHeight:ye?Xr:0,freezeTrailingRows:At+(Et&&(Pe==null?void 0:Pe.sticky)===!0?1:0),hasAppendRow:Et,onColumnResize:jn,onColumnResizeEnd:Sr,onColumnResizeStart:Ei,onCellFocused:xc,onColumnMoved:lc,onDragStart:ac,onHeaderMenuClick:ic,onItemHovered:$i,isFilling:(a==null?void 0:a.fillHandle)===!0,onMouseMove:oc,onKeyDown:Qr,onKeyUp:it,onMouseDown:tc,onMouseUp:rc,onDragOverCell:mt,onDrop:Fn,onSearchResultsChanged:mc,onVisibleRegionChanged:sc,clientSize:q,rowHeight:zt,searchResults:ce,searchValue:Je,onSearchValueChange:Qe,rows:Lt,scrollRef:u,selection:_,translateX:Ye.tx,translateY:Ye.ty,verticalBorder:yc,gridRef:qt,getCellRenderer:me}),wc,o!==void 0&&d.createElement(d.Suspense,{fallback:null},d.createElement(_0,{...o,validateCell:Cr,id:fc,getCellRenderer:me,className:(pt==null?void 0:pt.isSubGrid)===!0?"click-outside-ignore":void 0,provideEditor:un,imageEditorOverride:y,onFinishEditing:dc,markdownDivCreateNode:k,isOutsideClick:Io}))))},W0=d.forwardRef(B0),Il=20,j0={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??"false"},kind:re.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,measure:()=>50,draw:e=>X0(e,e.cell.data,Ji(e.cell),e.cell.maxSize??Il),onDelete:e=>({...e,data:!1}),onClick:e=>{const{cell:t,posX:n,posY:r,bounds:o,theme:i}=e,{width:s,height:l,x:a,y:c}=o,u=t.maxSize??Il,h=Math.floor(o.y+l/2),m=ha(u,l,i.cellVerticalPadding),p=fa(t.contentAlign??"center",a,s,i.cellHorizontalPadding,m),g=da(p,h,m),y=ga(a+n,c+r,g);if(Ji(t)&&y)return{...t,data:Ka(t.data)}},onPaste:(e,t)=>{let n=ei;return e.toLowerCase()==="true"?n=!0:e.toLowerCase()==="false"?n=!1:e.toLowerCase()==="indeterminate"&&(n=fs),n===t.data?void 0:{...t,data:n}}};function X0(e,t,n,r){if(!n&&t===ei)return;const{ctx:o,hoverAmount:i,theme:s,rect:l,highlighted:a,hoverX:c,hoverY:u,cell:{contentAlign:h}}=e,{x:m,y:p,width:g,height:y}=l,w=.35;let k=n?1-w+w*i:.4;t===ei&&(k*=i),k!==0&&(o.globalAlpha=k,Ms(o,s,t,m,p,g,y,a,c,u,r,h),o.globalAlpha=1)}const V0=sn("div")({name:"BubblesOverlayEditorStyle",class:"gdg-b1ygi5by",propsAsIs:!1}),Y0=e=>{const{bubbles:t}=e;return d.createElement(V0,null,t.map((n,r)=>d.createElement("div",{key:r,className:"boe-bubble"},n)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))},U0={getAccessibilityString:e=>ma(e.data),kind:re.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((r,o)=>e.measureText(o).width+r+20,0)+2*n.cellHorizontalPadding-4,draw:e=>q0(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return d.createElement(Y0,{bubbles:t.data})},onPaste:()=>{}},K0=4;function q0(e,t){const{rect:n,theme:r,ctx:o,highlighted:i}=e,{x:s,y:l,width:a,height:c}=n,u=20,h=8,m=K0;let p=s+r.cellHorizontalPadding;const g=[];for(const y of t){if(p>s+a)break;const w=gi(y,o,r.baseFontFull).width;g.push({x:p,width:w}),p+=w+h*2+m}o.beginPath();for(const y of g)$n(o,y.x,l+(c-u)/2,y.width+h*2,u,r.roundingRadius??u/2);o.fillStyle=i?r.bgBubbleSelected:r.bgBubble,o.fill();for(const[y,w]of g.entries())o.beginPath(),o.fillStyle=r.textBubble,o.fillText(t[y],w.x+h,l+c/2+er(o,r))}const G0=sn("div")({name:"DrilldownOverlayEditorStyle",class:"gdg-d4zsq0x",propsAsIs:!1}),Z0=e=>{const{drilldowns:t}=e;return d.createElement(G0,null,t.map((n,r)=>d.createElement("div",{key:r,className:"doe-bubble"},n.img!==void 0&&d.createElement("img",{src:n.img}),d.createElement("div",null,n.text))))},Q0={getAccessibilityString:e=>ma(e.data.map(t=>t.text)),kind:re.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((r,o)=>e.measureText(o.text).width+r+20+(o.img!==void 0?18:0),0)+2*n.cellHorizontalPadding-4,draw:e=>t1(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return d.createElement(Z0,{drilldowns:t.data})},onPaste:()=>{}},J0=4,Ki={};function e1(e,t,n,r){const o=Math.ceil(window.devicePixelRatio),i=5,s=n-i*2,l=4,a=n*o,c=r+i,u=r*3,h=(u+i*2)*o,m=`${e},${t},${o},${n}`;if(Ki[m]!==void 0)return{el:Ki[m],height:a,width:h,middleWidth:l*o,sideWidth:c*o,padding:i*o,dpr:o};const p=document.createElement("canvas"),g=p.getContext("2d");return g===null?null:(p.width=h,p.height=a,g.scale(o,o),Ki[m]=p,g.beginPath(),$n(g,i,i,u,s,r),g.shadowColor="rgba(24, 25, 34, 0.4)",g.shadowBlur=1,g.fillStyle=e,g.fill(),g.shadowColor="rgba(24, 25, 34, 0.3)",g.shadowOffsetY=1,g.shadowBlur=5,g.fillStyle=e,g.fill(),g.shadowOffsetY=0,g.shadowBlur=0,g.shadowBlur=0,g.beginPath(),$n(g,i+.5,i+.5,u,s,r),g.strokeStyle=t,g.lineWidth=1,g.stroke(),{el:p,height:a,width:h,sideWidth:c*o,middleWidth:r*o,padding:i*o,dpr:o})}function t1(e,t){const{rect:n,theme:r,ctx:o,imageLoader:i,col:s,row:l}=e,{x:a,width:c}=n,u=r.baseFontFull,h=Aa(o,u),m=Math.min(n.height,Math.max(16,Math.ceil(h*r.lineHeight)*2)),p=Math.floor(n.y+(n.height-m)/2),g=m-10,y=8,w=J0;let k=a+r.cellHorizontalPadding;const b=r.roundingRadius??6,R=e1(r.bgCell,r.drilldownBorder,m,b),M=[];for(const x of t){if(k>a+c)break;const F=gi(x.text,o,u).width;let N=0;x.img!==void 0&&i.loadOrGetImage(x.img,s,l)!==void 0&&(N=g-8+4);const T=F+N+y*2;M.push({x:k,width:T}),k+=T+w}if(R!==null){const{el:x,height:L,middleWidth:F,sideWidth:N,width:T,dpr:O,padding:j}=R,I=N/O,D=j/O;for(const P of M){const te=Math.floor(P.x),he=Math.floor(P.width),de=he-(I-D)*2;o.imageSmoothingEnabled=!1,o.drawImage(x,0,0,N,L,te-D,p,I,m),de>0&&o.drawImage(x,N,0,F,L,te+(I-D),p,de,m),o.drawImage(x,T-N,0,N,L,te+he-(I-D),p,I,m),o.imageSmoothingEnabled=!0}}o.beginPath();for(const[x,L]of M.entries()){const F=t[x];let N=L.x+y;if(F.img!==void 0){const T=i.loadOrGetImage(F.img,s,l);if(T!==void 0){const O=g-8;let j=0,I=0,D=T.width,P=T.height;D>P?(j+=(D-P)/2,D=P):P>D&&(I+=(P-D)/2,P=D),o.beginPath(),$n(o,N,p+m/2-O/2,O,O,r.roundingRadius??3),o.save(),o.clip(),o.drawImage(T,j,I,D,P,N,p+m/2-O/2,O,O),o.restore(),N+=O+4}}o.beginPath(),o.fillStyle=r.textBubble,o.fillText(F.text,N,p+m/2+er(o,r))}}const n1={getAccessibilityString:e=>e.data.join(", "),kind:re.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,draw:e=>r1(e,e.cell.displayData??e.cell.data,e.cell.rounding??e.theme.roundingRadius??4,e.cell.contentAlign),measure:(e,t)=>t.data.length*50,onDelete:e=>({...e,data:[]}),provideEditor:()=>e=>{const{value:t,onFinishedEditing:n,imageEditorOverride:r}=e,o=r??kf;return d.createElement(o,{urls:t.data,canWrite:t.readonly!==!1,onCancel:n,onChange:i=>{n({...t,data:[i]})}})},onPaste:(e,t)=>{e=e.trim();const r=e.split(",").map(o=>{try{return new URL(o),o}catch{return}}).filter(o=>o!==void 0);if(!(r.length===t.data.length&&r.every((o,i)=>o===t.data[i])))return{...t,data:r}}},qi=4;function r1(e,t,n,r){const{rect:o,col:i,row:s,theme:l,ctx:a,imageLoader:c}=e,{x:u,y:h,height:m,width:p}=o,g=m-l.cellVerticalPadding*2,y=[];let w=0;for(let b=0;b<t.length;b++){const R=t[b];if(R.length===0)continue;const M=c.loadOrGetImage(R,i,s);if(M!==void 0){y[b]=M;const x=M.width*(g/M.height);w+=x+qi}}if(w===0)return;w-=qi;let k=u+l.cellHorizontalPadding;r==="right"?k=Math.floor(u+p-l.cellHorizontalPadding-w):r==="center"&&(k=Math.floor(u+p/2-w/2));for(const b of y){if(b===void 0)continue;const R=b.width*(g/b.height);n>0&&(a.beginPath(),$n(a,k,h+l.cellVerticalPadding,R,g,n),a.save(),a.clip()),a.drawImage(b,k,h+l.cellVerticalPadding,R,g),n>0&&a.restore(),k+=R+qi}}function o1(e,t){let n=e*49632+t*325176;return n^=n<<13,n^=n>>17,n^=n<<5,n/4294967295*2}const i1={getAccessibilityString:()=>"",kind:re.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:()=>120,draw:e=>{const{cell:t,col:n,row:r,ctx:o,rect:i,theme:s}=e;if(t.skeletonWidth===void 0||t.skeletonWidth===0)return;let l=t.skeletonWidth;t.skeletonWidthVariability!==void 0&&t.skeletonWidthVariability>0&&(l+=Math.round(o1(n,r)*t.skeletonWidthVariability));const a=s.cellHorizontalPadding,c=t.skeletonHeight??Math.min(18,i.height-2*s.cellVerticalPadding);$n(o,i.x+a,i.y+(i.height-c)/2,l,c,s.roundingRadius??3),o.fillStyle=Or(s.textDark,.1),o.fill()},onPaste:()=>{}},s1=()=>e=>e.targetWidth,Fl=sn("div")({name:"MarkdownOverlayEditorStyle",class:"gdg-m1pnx84e",propsAsIs:!1,vars:{"m1pnx84e-0":[s1(),"px"]}}),l1=e=>{const{value:t,onChange:n,forceEditMode:r,createNode:o,targetRect:i,onFinish:s,validatedSelection:l}=e,a=t.data,c=t.readonly===!0,[u,h]=d.useState(a===""||r),m=d.useCallback(()=>{h(g=>!g)},[]),p=a?"gdg-ml-6":"";return u?d.createElement(Fl,{targetWidth:i.width-20},d.createElement(hi,{autoFocus:!0,highlight:!1,validatedSelection:l,value:a,onKeyDown:g=>{g.key==="Enter"&&g.stopPropagation()},onChange:n}),d.createElement("div",{className:`gdg-edit-icon gdg-checkmark-hover ${p}`,onClick:()=>s(t)},d.createElement(mf,null))):d.createElement(Fl,{targetWidth:i.width},d.createElement(ih,{contents:a,createNode:o}),!c&&d.createElement(d.Fragment,null,d.createElement("div",{className:"spacer"}),d.createElement("div",{className:`gdg-edit-icon gdg-edit-hover ${p}`,onClick:m},d.createElement(hs,null))),d.createElement("textarea",{className:"gdg-md-edit-textarea gdg-input",autoFocus:!0}))},a1={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:re.Markdown,needsHover:!1,needsHoverPosition:!1,drawPrep:Co,measure:(e,t,n)=>{const r=t.data.split(`
`)[0];return e.measureText(r).width+2*n.cellHorizontalPadding},draw:e=>Ln(e,e.cell.data,e.cell.contentAlign),onDelete:e=>({...e,data:""}),provideEditor:()=>e=>{const{onChange:t,value:n,target:r,onFinishedEditing:o,markdownDivCreateNode:i,forceEditMode:s,validatedSelection:l}=e;return d.createElement(l1,{onFinish:o,targetRect:r,value:n,validatedSelection:l,onChange:a=>t({...n,data:a.target.value}),forceEditMode:s,createNode:i})},onPaste:(e,t)=>e===t.data?void 0:{...t,data:e}},c1={getAccessibilityString:e=>e.row.toString(),kind:cn.Marker,needsHover:!0,needsHoverPosition:!1,drawPrep:u1,measure:()=>44,draw:e=>f1(e,e.cell.row,e.cell.checked,e.cell.markerKind,e.cell.drawHandle),onClick:e=>{const{bounds:t,cell:n,posX:r,posY:o}=e,{width:i,height:s}=t,l=n.drawHandle?7+(i-7)/2:i/2,a=s/2;if(Math.abs(r-l)<=10&&Math.abs(o-a)<=10)return{...n,checked:!n.checked}},onPaste:()=>{}};function u1(e,t){const{ctx:n,theme:r}=e,o=r.markerFontFull,i=t??{};return(i==null?void 0:i.font)!==o&&(n.font=o,i.font=o),i.deprep=d1,n.textAlign="center",i}function d1(e){const{ctx:t}=e;t.textAlign="start"}function f1(e,t,n,r,o){const{ctx:i,rect:s,hoverAmount:l,theme:a}=e,{x:c,y:u,width:h,height:m}=s,p=n?1:r==="checkbox-visible"?.6+.4*l:l;if(r!=="number"&&p>0){i.globalAlpha=p;const g=7*(n?l:1);if(Ms(i,a,n,o?c+g:c,u,o?h-g:h,m,!0,void 0,void 0,18),o){i.globalAlpha=l,i.beginPath();for(const y of[3,6])for(const w of[-5,-1,3])i.rect(c+y,u+m/2+w,2,2);i.fillStyle=a.textLight,i.fill(),i.beginPath()}i.globalAlpha=1}if(r==="number"||r==="both"&&!n){const g=t.toString(),y=a.markerFontFull,w=c+h/2;r==="both"&&l!==0&&(i.globalAlpha=1-l),i.fillStyle=a.textLight,i.font=y,i.fillText(g,w,u+m/2+er(i,y)),l!==0&&(i.globalAlpha=1)}}const h1={getAccessibilityString:()=>"",kind:cn.NewRow,needsHover:!0,needsHoverPosition:!1,measure:()=>200,draw:e=>g1(e,e.cell.hint,e.cell.icon),onPaste:()=>{}};function g1(e,t,n){const{ctx:r,rect:o,hoverAmount:i,theme:s,spriteManager:l}=e,{x:a,y:c,width:u,height:h}=o;r.beginPath(),r.globalAlpha=i,r.rect(a+1,c+1,u,h-2),r.fillStyle=s.bgHeaderHovered,r.fill(),r.globalAlpha=1,r.beginPath();const m=t!=="";let p=0;if(n!==void 0){const y=h-8,w=a+8/2,k=c+8/2;l.drawSprite(n,"normal",r,w,k,y,s,m?1:i),p=y}else{p=24;const g=12,y=m?g:i*g,w=m?0:(1-i)*g*.5,k=s.cellHorizontalPadding+4;y>0&&(r.moveTo(a+k+w,c+h/2),r.lineTo(a+k+w+y,c+h/2),r.moveTo(a+k+w+y*.5,c+h/2-y*.5),r.lineTo(a+k+w+y*.5,c+h/2+y*.5),r.lineWidth=2,r.strokeStyle=s.bgIconHeader,r.lineCap="round",r.stroke())}r.fillStyle=s.textMedium,r.fillText(t,p+a+s.cellHorizontalPadding+.5,c+h/2+er(r,s)),r.beginPath()}const m1=d.lazy(async()=>await Hl(()=>import("./ivzgi1rmd3frkuuq.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),p1={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:re.Number,needsHover:!1,needsHoverPosition:!1,useLabel:!0,drawPrep:Co,draw:e=>Ln(e,e.cell.displayData,e.cell.contentAlign),measure:(e,t,n)=>e.measureText(t.displayData).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:void 0}),provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,value:r,validatedSelection:o}=e;return d.createElement(d.Suspense,{fallback:null},d.createElement(m1,{highlight:t,disabled:r.readonly===!0,value:r.data,fixedDecimals:r.fixedDecimals,allowNegative:r.allowNegative,thousandSeparator:r.thousandSeparator,decimalSeparator:r.decimalSeparator,validatedSelection:o,onChange:i=>n({...r,data:Number.isNaN(i.floatValue??0)?0:i.floatValue})}))},onPaste:(e,t,n)=>{const r=typeof n.rawValue=="number"?n.rawValue:Number.parseFloat(typeof n.rawValue=="string"?n.rawValue:e);if(!(Number.isNaN(r)||t.data===r))return{...t,data:r,displayData:n.formattedString??t.displayData}}},y1={getAccessibilityString:()=>"",measure:()=>108,kind:re.Protected,needsHover:!1,needsHoverPosition:!1,draw:w1,onPaste:()=>{}};function w1(e){const{ctx:t,theme:n,rect:r}=e,{x:o,y:i,height:s}=r;t.beginPath();const l=2.5;let a=o+n.cellHorizontalPadding+l;const c=i+s/2,u=Math.cos(ol(30))*l,h=Math.sin(ol(30))*l;for(let m=0;m<12;m++)t.moveTo(a,c-l),t.lineTo(a,c+l),t.moveTo(a+u,c-h),t.lineTo(a-u,c+h),t.moveTo(a-u,c-h),t.lineTo(a+u,c+h),a+=8;t.lineWidth=1.1,t.lineCap="square",t.strokeStyle=n.textLight,t.stroke()}const b1={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:re.RowID,needsHover:!1,needsHoverPosition:!1,drawPrep:(e,t)=>Co(e,t,e.theme.textLight),draw:e=>Ln(e,e.cell.data,e.cell.contentAlign),measure:(e,t,n)=>e.measureText(t.data).width+n.cellHorizontalPadding*2,provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,value:r,validatedSelection:o}=e;return St.createElement(hi,{highlight:t,autoFocus:r.readonly!==!0,disabled:r.readonly!==!1,value:r.data,validatedSelection:o,onChange:i=>n({...r,data:i.target.value})})},onPaste:()=>{}},x1={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:re.Text,needsHover:!1,needsHoverPosition:!1,drawPrep:Co,useLabel:!0,draw:e=>(Ln(e,e.cell.displayData,e.cell.contentAlign,e.cell.allowWrapping,e.hyperWrapping),!0),measure:(e,t,n)=>{const r=t.displayData.split(`
`,t.allowWrapping===!0?void 0:1);return Math.max(...r.map(o=>e.measureText(o).width))+2*n.cellHorizontalPadding},onDelete:e=>({...e,data:""}),provideEditor:e=>({disablePadding:e.allowWrapping===!0,editor:t=>{const{isHighlighted:n,onChange:r,value:o,validatedSelection:i}=t;return d.createElement(hi,{style:e.allowWrapping===!0?{padding:"3px 8.5px"}:void 0,highlight:n,autoFocus:o.readonly!==!0,disabled:o.readonly===!0,altNewline:!0,value:o.data,validatedSelection:i,onChange:s=>r({...o,data:s.target.value})})}}),onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},v1=sn("div")({name:"UriOverlayEditorStyle",class:"gdg-u1rrojo",propsAsIs:!1}),k1=e=>{const{uri:t,onChange:n,forceEditMode:r,readonly:o,validatedSelection:i,preview:s}=e,[l,a]=d.useState(t===""||r),c=d.useCallback(()=>{a(!0)},[]);return l?d.createElement(hi,{validatedSelection:i,highlight:!0,autoFocus:!0,value:t,onChange:n}):d.createElement(v1,null,d.createElement("a",{className:"gdg-link-area",href:t,target:"_blank",rel:"noopener noreferrer"},s),!o&&d.createElement("div",{className:"gdg-edit-icon",onClick:c},d.createElement(hs,null)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))};function Dl(e,t,n,r){let o=n.cellHorizontalPadding;const i=t.height/2-e.actualBoundingBoxAscent/2,s=e.width,l=e.actualBoundingBoxAscent;return r==="right"?o=t.width-s-n.cellHorizontalPadding:r==="center"&&(o=t.width/2-s/2),{x:o,y:i,width:s,height:l}}const C1={getAccessibilityString:e=>{var t;return((t=e.data)==null?void 0:t.toString())??""},kind:re.Uri,needsHover:!0,needsHoverPosition:!0,useLabel:!0,drawPrep:Co,draw:e=>{const{cell:t,theme:n,overrideCursor:r,hoverX:o,hoverY:i,rect:s,ctx:l}=e,a=t.displayData??t.data;if(r!==void 0&&t.hoverEffect===!0&&o!==void 0&&i!==void 0){const c=gi(a,l,n.baseFontFull),u=Dl(c,s,n,t.contentAlign),{x:h,y:m,width:p,height:g}=u;if(o>=h-4&&o<=h-4+p+8&&i>=m-4&&i<=m-4+g+8){const y=er(l,n.baseFontFull);r("pointer");const w=5,k=m-y;l.beginPath(),l.moveTo(s.x+h,Math.floor(s.y+k+g+w)+.5),l.lineTo(s.x+h+p,Math.floor(s.y+k+g+w)+.5),l.strokeStyle=n.textDark,l.stroke(),l.save(),l.fillStyle=e.cellFillColor,Ln({...e,rect:{...s,x:s.x-1}},a,t.contentAlign),Ln({...e,rect:{...s,x:s.x-2}},a,t.contentAlign),Ln({...e,rect:{...s,x:s.x+1}},a,t.contentAlign),Ln({...e,rect:{...s,x:s.x+2}},a,t.contentAlign),l.restore()}}Ln(e,a,t.contentAlign)},onClick:e=>{const{cell:t,bounds:n,posX:r,posY:o,theme:i}=e,s=t.displayData??t.data;if(t.hoverEffect!==!0||t.onClickUri===void 0)return;const l=Ch(s,i.baseFontFull);if(l===void 0)return;const a=Dl(l,n,i,t.contentAlign);mi({x:a.x-4,y:a.y-4,width:a.width+8,height:a.height+8},r,o)&&t.onClickUri(e)},measure:(e,t,n)=>e.measureText(t.displayData??t.data).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:""}),provideEditor:e=>t=>{const{onChange:n,value:r,forceEditMode:o,validatedSelection:i}=t;return d.createElement(k1,{forceEditMode:o||e.hoverEffect===!0&&e.onClickUri!==void 0,uri:r.data,preview:r.displayData??r.data,validatedSelection:i,readonly:r.readonly===!0,onChange:s=>n({...r,data:s.target.value})})},onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},S1=[c1,h1,j0,U0,Q0,n1,i1,a1,p1,y1,b1,x1,C1],Gi=[];class M1 extends Ha{constructor(){super(...arguments);fe(this,"imageLoaded",()=>{});fe(this,"loadedLocations",[]);fe(this,"cache",{});fe(this,"sendLoaded",Nu(()=>{this.imageLoaded(new yo(this.loadedLocations)),this.loadedLocations=[]},20));fe(this,"clearOutOfWindow",()=>{const n=Object.keys(this.cache);for(const r of n){const o=this.cache[r];let i=!1;for(let s=0;s<o.cells.length;s++){const l=o.cells[s];if(this.isInWindow(l)){i=!0;break}}i?o.cells=o.cells.filter(this.isInWindow):(o.cancel(),delete this.cache[r])}})}setCallback(n){this.imageLoaded=n}loadImage(n,r,o,i){let s=!1;const l=Gi.pop()??new Image;let a=!1;const c={img:void 0,cells:[wn(r,o)],url:n,cancel:()=>{a||(a=!0,Gi.length<12?Gi.unshift(l):s||(l.src=""))}},u=new Promise(h=>l.addEventListener("load",()=>h(null)));requestAnimationFrame(async()=>{try{l.src=n,await u,await l.decode();const h=this.cache[i];if(h!==void 0&&!a){h.img=l;for(const m of h.cells)this.loadedLocations.push(Ss(m));s=!0,this.sendLoaded()}}catch{c.cancel()}}),this.cache[i]=c}loadOrGetImage(n,r,o){const i=n,s=this.cache[i];if(s!==void 0){const l=wn(r,o);return s.cells.includes(l)||s.cells.push(l),s.img}else this.loadImage(n,r,o,i)}}const R1=(e,t)=>{const n=d.useMemo(()=>({...Eg,...e.headerIcons}),[e.headerIcons]),r=d.useMemo(()=>e.imageWindowLoader??new M1,[e.imageWindowLoader]);return d.createElement(W0,{...e,renderers:S1,headerIcons:n,ref:t,imageWindowLoader:r})},E1=d.forwardRef(R1);function T1(e){switch(e){case"number":return re.Number;case"imageUrl":return re.Image;default:return re.Text}}const Al=40,zl=500;function I1({table:e,height:t,width:n,isInFocusedView:r=!1,className:o=""}){const{targetedContent:i,setTargetedContent:s}=Ou(),[l,a]=d.useState([]),c=getComputedStyle(document.documentElement),u=cs();d.useEffect(()=>{e.columnNames.length>0&&a(e.columnNames.map((k,b)=>({id:`id:${b}`,title:k,maxWidth:500})))},[e.columnNames]);const[h,m]=d.useState({columns:qe.empty(),rows:qe.empty()}),p=d.useCallback(function([b,R]){const M=e.rows[R];return{kind:T1(e.columnTypes[b]),data:M[b],allowOverlay:!0,readonly:!0,displayData:String(M[b]),allowWrapping:!0,contentAlignment:"left"}},[e.columnTypes,e.rows]),g=d.useCallback(k=>{if(k.columns.length>0){const b=k.columns.items.flatMap(M=>e.columnNames.slice(M[0],M[1]));Gn.logEvent(Zn.adaColumnTargeted);const R=b.length>1?u.formatMessage({id:"B+HlXu",defaultMessage:"{totalColumns} columns"},{totalColumns:b.length}):u.formatMessage({id:"KnFSJb",defaultMessage:'"{columnName}" column'},{columnName:b[0]});s({type:"object",label:R,isFocusedViewContent:r,createNewCompletionParams:M=>Zi(M,`The user has selected the columns:  ${b.map(x=>`"${x}"`).join(", ")} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,R)})}else if(k.rows.length>0){const b=k.rows.items.flatMap(M=>{const[x,L]=M,F=[];for(let N=x;N<L;N++)F.push(N);return F}),R=b.length>1?u.formatMessage({id:"vFstNk",defaultMessage:"{totalRows} rows"},{totalRows:b.length}):u.formatMessage({id:"43/z2q",defaultMessage:"#{rowIndex} row"},{rowIndex:b[0]+1});Gn.logEvent(Zn.adaRowTargeted),s({type:"object",label:R,isFocusedViewContent:r,createNewCompletionParams:M=>Zi(M,`The user has selected rows at the following indices: ${b.map(x=>`"${x}"`).join(", ")} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,R)})}else if(k.current){const b=k.current.range.x,R=k.current.range.y,M=k.current.range.x+k.current.range.width,x=k.current.range.y+k.current.range.height,L=(M-b)*(x-R);let F="";L===1&&(F=e.rows[k.current.cell[1]][k.current.cell[0]]),Gn.logEvent(Zn.adaRangeTargeted);const N=L>1?u.formatMessage({id:"Ia9GsC",defaultMessage:"{totalCells} cells"},{totalCells:L}):u.formatMessage({id:"MEl4hN",defaultMessage:'"{cellContent}" cell'},{cellContent:F});s({type:"object",isFocusedViewContent:r,label:N,createNewCompletionParams:T=>Zi(T,`The user has selected a range at the iloc: ${R}:${x}, ${b}:${M} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,N)})}k.columns.length===0&&k.rows.length===0&&k.current===void 0&&s(void 0),m(k)},[e.columnNames,s,r,e.rows,u,e.name,e.sheetName]);d.useEffect(()=>{i===void 0&&m({columns:qe.empty(),rows:qe.empty()})},[i]);const y=d.useCallback(k=>{const x=e.rows[k];if(!x)return 44;const L=x.reduce((I,D)=>{const P=(I==null?void 0:I.length)||0,te=(D==null?void 0:D.length)||0;return P>te?I:D})??"",F=l[x.indexOf(L)],T=((F==null?void 0:F.width)||150)/8,O=Math.ceil(L.length/T);return 24+(O<4?O:4)*20},[e.rows,l]);d.useEffect(()=>{if(!document.getElementById("portal")){const k=document.createElement("div");k.id="portal",k.style.position="fixed",k.style.left="0",k.style.top="0",k.style.zIndex="9999",document.body.appendChild(k)}return()=>{const k=document.getElementById("portal");k&&document.body.removeChild(k)}},[]);const w=d.useCallback(()=>e.rows&&e.rows.length>999?10+10*String(e.rows.length).length:30,[e.rows]);return E.jsx(E1,{getCellContent:p,columns:l,rows:e.rows.length,gridSelection:h,onGridSelectionChange:g,smoothScrollX:!0,smoothScrollY:!0,overscrollX:50,className:o,rowMarkers:"clickable-number",height:t,width:n,rowMarkerTheme:{bgCell:c.getPropertyValue("--main-surface-secondary").trim(),textLight:c.getPropertyValue("--text-primary").trim()},theme:{textDark:c.getPropertyValue("--text-primary").trim(),textMedium:c.getPropertyValue("--text-primary").trim(),textLight:c.getPropertyValue("--text-primary").trim(),textHeader:c.getPropertyValue("--text-primary").trim(),bgHeader:c.getPropertyValue("--main-surface-secondary").trim(),bgCell:c.getPropertyValue("--main-surface-primary").trim(),bgBubbleSelected:c.getPropertyValue("--main-surface-tertiary").trim(),bgHeaderHovered:c.getPropertyValue("--main-surface-tertiary").trim(),bgHeaderHasFocus:c.getPropertyValue("--main-surface-tertiary").trim(),accentColor:c.getPropertyValue("--selection").trim(),drilldownBorder:c.getPropertyValue("--selection").trim(),editorFontSize:"400 14px",baseFontStyle:"400 14px",markerFontStyle:"400 14px",headerFontStyle:"500 14px",cellHorizontalPadding:12,cellVerticalPadding:10},rowMarkerWidth:w(),rowHeight:y,verticalBorder:!0,minColumnWidth:Al,maxColumnWidth:zl,onColumnResize:(k,b,R)=>{b>=Al&&b<=zl&&a(M=>{const x=[...M];return x[R]={...k,width:b},x})}})}function Zi(e,t,n){const r=Bu(t);return{...e,messageMetadata:{...e.messageMetadata,targeted_reply:t,targeted_reply_label:n},appendMessages:e.appendMessages==null?[r]:[...e.appendMessages,r]}}const hr=["#FFAF00","#F46920","#F53255","#F857C1","#29BDFD","#00CBBF","#01C159","#9DCA1C"];function qa({colorList:e,label:t,color:n,onColorUpdate:r}){return E.jsxs(Qn.Root,{children:[E.jsx(Qn.Trigger,{asChild:!0,children:E.jsxs("div",{className:"flex w-full items-center justify-between py-2 pl-4 pr-3.5 hover:bg-token-main-surface-secondary",children:[E.jsx("span",{className:"max-w-28 truncate text-sm",children:t||E.jsx(Tt,{id:"UnyV2o",defaultMessage:"Dataset"})}),E.jsxs("div",{className:"flex gap-1",children:[E.jsx("div",{className:"h-4 w-4 rounded-sm",style:{backgroundColor:n}}),E.jsx(Wc,{className:"icon-sm"})]})]})}),E.jsx(Qn.Portal,{children:E.jsx(Qn.Content,{className:"flex min-w-36 flex-col gap-4 p-4 align-middle",sideOffset:5,side:"right",children:E.jsx(F1,{currentColor:n,colorList:e,onUpdate:r})})})]})}function F1({colorList:e,currentColor:t,onUpdate:n}){const[r,o]=d.useState(t??""),i=cs(),s=l=>/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(l);return E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"grid grid-cols-4 flex-wrap gap-2",children:e.map((l,a)=>E.jsx("button",{onClick:()=>{o(l),n(l)},className:Ot("flex h-6 w-6 items-center justify-center rounded-md"),style:{backgroundColor:l},children:t===l&&E.jsx(jc,{className:"text-white"})},a))}),E.jsxs("div",{className:"flex h-6 rounded-md border border-token-border-light",children:[E.jsx("div",{className:"flex w-6 items-center justify-center bg-gray-200 px-2 py-1 text-sm text-gray-500",children:"#"}),E.jsx("input",{className:Ot("w-16 flex-1 rounded-r-md border-0 p-2 text-xs uppercase leading-6 outline-none"),placeholder:i.formatMessage({id:"3xKVHs",defaultMessage:"F1B023"}),value:r.slice(1),onChange:l=>{const a=`#${l.target.value}`;o(a),s(a)&&n(a)}})]})]})}function D1({chartData:e,setChartData:t}){let n=e.datasets[0].colors?[...e.datasets[0].colors]:[...hr];return E.jsx(E.Fragment,{children:e.labels.map((r,o)=>E.jsx(qa,{label:r,colorList:hr,color:n[o],onColorUpdate:i=>{Array.isArray(n)?n[o]=i:n=[i],e.datasets[0].colors=n,t==null||t({...e})}},o))})}function A1({chartData:e,setChartData:t}){return E.jsx(E.Fragment,{children:e.datasets.map((n,r)=>E.jsx(qa,{label:n.label,colorList:hr,color:n.colors?Array.isArray(n.colors)?n.colors[0]:n.colors:"",onColorUpdate:o=>{n.colors=[o],t==null||t({...e})}},r))})}function z1({chartData:e,setChartData:t}){return E.jsxs(Qn.Root,{children:[E.jsx(Qn.Trigger,{className:"h-5 px-0 hover:bg-transparent",asChild:!0,children:E.jsx("button",{children:E.jsx(Xc,{className:Ot("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),E.jsx(Qn.Portal,{children:E.jsx(Qn.Content,{className:"flex min-w-48 max-w-xs flex-col px-0 py-1",sideOffset:7,children:e&&e.datasets.length<ia&&E.jsxs(E.Fragment,{children:[E.jsx("span",{className:"py-2 pl-4 pr-3.5 text-xs font-semibold text-token-text-quaternary",children:E.jsx(Tt,{id:"yYiKvS",defaultMessage:"Colors"})}),E.jsx("div",{className:"flex max-h-36 flex-col overflow-auto",children:e.chart_type==="pie"?E.jsx(D1,{chartData:e,setChartData:t}):E.jsx(A1,{chartData:e,setChartData:t})})]})})})]})}const H1=(e,t,n)=>{const{colors:r}=t;let o;return r&&r.length>0?o=r:e==="pie"?o=t.data.map((i,s)=>hr[s%hr.length]):o=hr[n%hr.length],Array.isArray(o)?o:[o]},L1=e=>{const{file_name:t="",context_connector_info:n}=e,{source_url:r=null,context_connector:o,synthetic_extension:i}=n??{};let s=null;if(n&&o){const l=i??Wu(t)??null;s=ju(o,l)}return{sourceUrl:r,contextConnectorName:s}},Ga=async e=>{if(e.image_url==null){so.addError("No image url provided for download");return}const t=Xu(e.image_url),n=await Dc.getFileDownloadLink(t);if(n.status===Ac.Success){const o=await(await fetch(n.download_url)).blob();Es(URL.createObjectURL(o),"output.png")}},Es=(e,t="")=>{const n=document.createElement("a");n.href=e,t&&(n.download=t),n.click()},Za=300,P1=350;function $1({visualization:e,clientThreadId:t,expanded:n=!1}){return e.type==="chart"?e.fallback_image==null?(so.addError("Chart visualizations require a fallback image message"),null):e.fallback_to_image?e.fallback_image==null?(so.addError("No fallback image message provided for fallback chart"),null):E.jsx(j1,{visualization:e,expanded:n,clientThreadId:t}):E.jsx(W1,{visualization:e,clientThreadId:t,expanded:n}):e.type==="table"?E.jsx(_1,{visualization:e,expanded:n,clientThreadId:t}):(so.addError("Unsupported visualization type",e.type),null)}function _1({visualization:e,expanded:t,clientThreadId:n}){const r=Ol(),o=r&&!t,{isLoading:i,data:s,isError:l}=gd(e),[a,c]=d.useState(),u=d.useCallback(()=>{s&&Es(s.download_url)},[s]),[h,m]=d.useState(0),[p,g]=d.useState(0),y=d.useRef(null);let w;s&&(Array.isArray(s.content)?w=s.content.find(b=>b.name===a)??s.content[0]:w=s.content);const k=()=>{y.current&&g(y.current.offsetWidth)};return d.useEffect(()=>(k(),window.addEventListener("resize",k),()=>window.removeEventListener("resize",k)),[]),d.useEffect(()=>{const b=()=>{const M=window.innerHeight-48;m(M)};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),l?E.jsx(Qa,{fileName:e.title}):E.jsx(yi,{ref:y,focusObject:{type:ui.ADAVisualization,visualization:e},title:E.jsxs(E.Fragment,{children:[e.title,!o&&Array.isArray(s==null?void 0:s.content)&&E.jsxs(Dr.Root,{defaultValue:a,onValueChange:b=>{c(b)},children:[E.jsxs(Dr.Trigger,{className:"m-0 h-4 bg-transparent p-1 text-xs font-semibold",children:[a??s.content[0].name,E.jsx(Dr.Icon,{})]}),E.jsx(Dr.Portal,{children:E.jsx(Dr.Content,{children:s.content.map(b=>E.jsx(Dr.Item,{className:"text-xs font-semibold",value:b.name??"",children:b.name},b.name))})})]})]}),onDownload:u,expanded:t,clientThreadId:n,children:i||w==null?E.jsx("div",{className:"flex w-full items-center justify-center",children:E.jsx(Ll,{})}):E.jsx("div",{className:"border-t border-token-border-light",children:E.jsx(I1,{table:{...w,name:e.title,sheetName:a},height:t?h:Za,width:p,isInFocusedView:r})})})}function N1({showStatic:e,setShowStatic:t}){return E.jsx(lo,{side:"top",sideOffset:4,label:e?E.jsx(Tt,{id:"o0thnT",defaultMessage:"Switch to interactive chart"}):E.jsx(Tt,{id:"cigiQO",defaultMessage:"Switch to static chart"}),children:E.jsx("button",{className:"flex",onClick:()=>{t(!e)},children:e?E.jsx(Uc,{className:"icon-md text-token-text-tertiary hover:text-token-text-primary"}):E.jsx(us,{className:"icon-md text-token-text-tertiary hover:text-token-text-primary"})})})}function O1({type:e}){return E.jsx(B1,{children:e==="chart"?E.jsxs(E.Fragment,{children:[E.jsx(Tt,{id:"XBhWwK",defaultMessage:"Now interactive! (Beta)"})," ",E.jsx(us,{className:"icon-md"})]}):E.jsx(Tt,{id:"N0TMRs",defaultMessage:"Now interactive!"})})}const B1=zc.div`flex flex-shrink-0 cursor-pointer flex-nowrap items-center gap-1 rounded-lg bg-blue-selection/[0.1] py-1 pl-2 pr-1.5 text-xs font-semibold text-blue-selection`;function W1({visualization:e,clientThreadId:t,expanded:n}){const{isLoading:r,data:o,isError:i}=md(e),s=d.useRef(null),l=pd(),[a,c]=d.useState(!l),u=d.useCallback(async()=>{if(a&&e.fallback_image)Gn.logEvent(Zn.adaDownloadedStaticChart),await Ga(e.fallback_image);else if(s.current){const w=s.current.getBase64Image();w&&(Gn.logEvent(Zn.adaDownloadedInteractiveChart),Es(w,`${e.title}.png`))}},[e.fallback_image,a,s,e.title]),[h,m]=d.useState(void 0),p=Yu(t),g=xd(()=>{Gn.logEvent(Zn.adaToggledInteractiveChart,{conversationId:p})}),y=w=>{g(),c(w)};return d.useEffect(()=>{Gn.logEvent(Zn.adaInteractiveChartShown)},[]),d.useEffect(()=>{if(o&&o.content!==h){const{chart_type:w,datasets:k,labels:b}=o.content,R=o.content;R.datasets=k.map((M,x)=>{const L=H1(w,M,x);return{...M,colors:L}}),R.labels=Array.isArray(b)?b:[b],m(R)}},[h,o]),i?E.jsx(Qa,{fileName:e.title}):E.jsx(yi,{focusObject:{type:ui.ADAVisualization,visualization:e},title:e.title,onDownload:u,additionalActions:[E.jsx(N1,{showStatic:a,setShowStatic:y},0),E.jsx(z1,{chartData:h,setChartData:m},1)],expanded:n,clientThreadId:t,children:r||h==null?E.jsx("div",{className:"flex w-full items-center justify-center",children:E.jsx(Ll,{})}):a&&e.fallback_image?E.jsx(Wl,{jupyterMessage:e.fallback_image}):E.jsx(sa,{ref:s,chart:h})})}function j1({visualization:e,expanded:t,clientThreadId:n}){const[r,o]=d.useState(!1),i=yd(),s=d.useCallback(async()=>{e.fallback_image&&await Ga(e.fallback_image)},[e.fallback_image]);return e.fallback_image==null?null:E.jsx(yi,{focusObject:{type:ui.ADAVisualization,visualization:e},title:e.title,onDownload:s,expanded:t,clientThreadId:n,children:E.jsx("div",{className:Ot("h-full w-full",t&&"cursor-pointer items-center justify-center"),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:E.jsxs("div",{className:Ot("relative flex h-full cursor-pointer items-center justify-center",!t&&"w-full"),children:[E.jsx(Wl,{jupyterMessage:e.fallback_image}),i&&E.jsx(bd,{isHovered:r})]})})})}const yi=St.forwardRef(({focusObject:e,title:t="",onDownload:n=()=>{},additionalActions:r=[],expanded:o=!1,clientThreadId:i,children:s},l)=>{const a=Ol(),c=Vu(),u=c&&c.type===ui.ADAVisualization&&c.type===e.type&&c.visualization.file_id===e.visualization.file_id&&e.visualization.title===c.visualization.title,h=Hc(),m=e.visualization.type,[p,g]=wd(m,(h==null?void 0:h.id)??""),y=Lc(),w=Pc(),k=$c(),b=e.visualization.type,{sourceUrl:R,contextConnectorName:M}=L1(e.visualization);if(a&&!o||y)return E.jsx(X1,{focusObject:e,title:t,type:b,isFocused:u??!1,disabled:y});const x=E.jsxs(E.Fragment,{children:[r.map((L,F)=>E.jsx("div",{className:"flex p-0",children:L},F)),R&&M&&E.jsx(lo,{side:"top",sideOffset:4,label:E.jsx(Tt,{id:"KG958Q",defaultMessage:"Open in {contextConnectorName}",values:{contextConnectorName:M}}),children:E.jsx("a",{className:"flex items-center text-xs",href:R,target:"_blank",rel:"noreferrer",children:E.jsx(Vc,{className:Ot("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),n&&E.jsx(lo,{side:"top",sideOffset:4,label:E.jsx(Tt,{id:"X0SJIT",defaultMessage:"Download {type}",values:{type:b}}),children:E.jsx("button",{onClick:n,className:"flex items-center text-xs",children:E.jsx(Yc,{className:Ot("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),E.jsx(lo,{side:"top",sideOffset:4,label:u?E.jsx(Tt,{id:"vilGuu",defaultMessage:"Collapse {type}",values:{type:b}}):E.jsx(Tt,{id:"7kLyF5",defaultMessage:"Expand {type}",values:{type:b}}),children:E.jsx("button",{onClick:()=>{_c&&w?(k(`/c/${i}`,{state:{focusObject:e}}),Nc(!1,{focusMainWindow:!0})):Ja(u??!1,e)},className:"flex items-center text-xs",children:u?E.jsx(Pl,{className:Ot("icon-md text-token-text-tertiary hover:text-token-text-primary")}):E.jsx($l,{className:Ot("icon-md text-token-text-tertiary hover:text-token-text-primary")})})})]});return E.jsxs(Jo.div,{className:Ot("relative overflow-hidden border-token-border-light text-token-text-primary",!o&&"rounded-2xl border"),ref:l,onMouseEnter:()=>{g(!0)},...Bl,children:[E.jsxs("div",{className:Ot("flex items-center justify-between gap-2 bg-token-main-surface-primary px-4 py-3"),children:[E.jsx("span",{className:"flex-grow items-center truncate font-semibold capitalize",children:t}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx(_l,{children:!p&&E.jsx(Jo.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.2},className:"absolute right-3 top-3",children:E.jsx(O1,{type:b})})}),p&&x]})]}),E.jsx("div",{className:"flex items-center justify-center bg-token-main-surface-primary",style:{height:o?"calc(100vh - 48px)":`${b==="table"?Za:P1}px`},children:s})]})});yi.displayName="ADAVisualizationWrapper";function X1({focusObject:e,title:t="",type:n,isFocused:r,disabled:o=!1}){const[i,s]=d.useState(!1),l=n==="chart"?Kc:qc,a=r||i||o;return E.jsx(Jo.div,{className:Ot("relative w-52 overflow-hidden rounded-2xl border",r&&"border-blue-selection/[.3]",a?"text-token-text-primary":"text-token-text-secondary",!o&&"cursor-pointer"),onMouseEnter:()=>{o||s(!0)},onMouseLeave:()=>{o||s(!1)},onClick:()=>{o||Ja(r,e)},...Bl,children:E.jsxs("div",{className:"flex justify-between bg-token-main-surface-primary px-3 py-2",children:[E.jsxs("div",{className:"my-0 flex w-full items-center gap-2 overflow-hidden text-sm font-semibold capitalize",children:[E.jsx(l,{className:Ot("icon-lg flex-shrink-0",a?"text-brand-green-800":"text-token-text-quaternary")}),E.jsx("span",{className:"flex-grow truncate",children:t})]}),i&&E.jsx("div",{className:"flex items-center gap-2",children:E.jsx(lo,{side:"top",sideOffset:4,label:r?E.jsx(Tt,{id:"vilGuu",defaultMessage:"Collapse {type}",values:{type:n}}):E.jsx(Tt,{id:"7kLyF5",defaultMessage:"Expand {type}",values:{type:n}}),children:r?E.jsx(Pl,{className:"icon-md icon-md text-token-text-secondary"}):E.jsx($l,{className:Ot("icon-md text-token-text-secondary")})})})]})})}function Qa({fileName:e=""}){return E.jsx("div",{className:"w-full rounded-2xl border border-red-600 p-3",children:E.jsxs("div",{className:"my-0 flex items-center justify-between",children:[E.jsx("div",{className:"flex items-center gap-2",children:E.jsx("p",{className:"m-0 p-0 text-lg font-semibold capitalize",children:e})}),E.jsx("span",{className:"text-sm text-red-600",children:E.jsx(Tt,{id:"ADAVisualzationComponent.unableToLoadOutput",defaultMessage:"Unable to display visualization"})})]})})}const Ja=(e,t)=>{Gn.logEvent(Zn.adaFocusModeToggled),e?Ks.close():Ks.setFocusedObject(t)},om=Object.freeze(Object.defineProperty({__proto__:null,default:$1},Symbol.toStringTag,{value:"Module"}));export{om as A,g0 as C,Ah as T,Pr as a,of as b,Hr as i,Dh as m,sn as s};
//# sourceMappingURL=i13yvb7mip3btqm2.js.map
