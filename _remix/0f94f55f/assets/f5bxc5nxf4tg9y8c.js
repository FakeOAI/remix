const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dvk7x0xdt5uick4p.js","assets/o6lj0uze9vcjvyjf.js","assets/gpe91l6ql3o0s610.js","assets/cbv020t7gzp4f872.js","assets/kq3cjnjkkiu42wsi.js","assets/root-bcm2adyk.css","assets/conversation-small-eplmind9.css","assets/mhs57eaqa1m5tkcf.js","assets/m9c7p1d7qbcooudb.js","assets/nriec8vah7hgye40.js","assets/j1mltnb4g3et1nfv.js","assets/n1m1f2dq4jbayfm0.js","assets/lw9lle2awfx0m3zh.js","assets/jcecw02o1g7i3lgl.js","assets/eprwd5wd9a7hvvfw.js","assets/hte00x4vz53jf7hc.js","assets/c039xathbpqv7hjp.js","assets/4kmoegar8udth7vh.js","assets/fte4amidzwa0x0i9.js","assets/hryykjcwq4fvumfr.js","assets/le0igyxp535xhyki.js","assets/ihhnf33zws1gyw0j.js","assets/hpiio21pr81kn19y.js","assets/n7z7p9t677plyher.js","assets/pcwsuim2es0x993n.js","assets/mck1y82xl91yl0wc.js","assets/fjoavygc0mozv20n.js","assets/iw6eikdd7w5geui8.js","assets/iuyzwum5kmlzqo9c.js","assets/j6o9w2uanazp0m7r.js","assets/fqn392x2qxsyg8av.js","assets/cpat5st2u74tspdk.js","assets/ni10axqjqcymid87.js","assets/fpklwjevwagc7bw4.js","assets/0hx2ejj1ex0ag5bj.js","assets/osbq56ootabni99s.js","assets/dem60z9c5nvmk633.js"])))=>i.map(i=>d[i]);
import{d as rs,ku as M,ba as Wo,cE as $o,bz as Go,kv as ce,kw as Yo,kx as Pt,hB as we,ky as ss,kz as os,G as Ue,fD as se,gF as Ye,kA as Ko,kB as Xo,kC as qo,ih as lr,hA as Wt,fs as yn,hD as ar,T as Jo}from"./gpe91l6ql3o0s610.js";import{a6 as Zo,aE as D,_ as is,r as B,cY as ls,d as Qo,g as ei,f$ as ti,m as g,q as W,a1 as On,f5 as ni,bd as ri,n as Ot,a7 as et}from"./cbv020t7gzp4f872.js";import{d as We,F as ee,E as H,D as $,y as Bt,f as lt,c as te,V as Bn,z as as,B as si,G as cs,H as $t,W as Dn,I as oi,R as fs,J as cr,P as us,K as Gt,T as _n,L as It,k as ii,M as li,A as Rn,a as N,N as Ne,O as fe,Q as xn,U as ai,X as bn,Y as hs,Z as ci,_ as fi,$ as ui,a0 as ft,a1 as Yt,a2 as hi,b as di,u as pi,C as X,x as Pe,e as mi,a3 as gi,v as Ve,a4 as ds,S as ps,a5 as jn,a6 as Kt}from"./mhs57eaqa1m5tkcf.js";import{b as yi}from"./hpiio21pr81kn19y.js";import{P as ms,f as xi,c as bi,I as ki,q as Ci,D as fr,p as gs,d as vi}from"./m9c7p1d7qbcooudb.js";import{m as q}from"./j1mltnb4g3et1nfv.js";import{bT as wi,bU as Si,bG as Ai,a as Ei,bV as Ni}from"./kq3cjnjkkiu42wsi.js";import{i as Ti}from"./n7z7p9t677plyher.js";const Au=4e4,Pi="max-length-toast",Ii=rs((n,e)=>n.info(e,{duration:1.5,id:Pi}),500,{leading:!0,trailing:!1});function Eu(n,e,t){Ii(n,e.formatMessage(Mi.exceededMaxLength,{maxLength:t}))}const Mi=Zo({exceededMaxLength:{id:"cJ/Ddq",defaultMessage:"This document is longer than a canvas can currently handle. To edit, please reduce the length."}}),Li="_modelCursor_1mtn0_1",Nu={modelCursor:Li},Oi=1024;let Bi=0;class oe{constructor(e,t){this.from=e,this.to=t}}class T{constructor(e={}){this.id=Bi++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=J.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}T.closedBy=new T({deserialize:n=>n.split(" ")});T.openedBy=new T({deserialize:n=>n.split(" ")});T.group=new T({deserialize:n=>n.split(" ")});T.isolate=new T({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});T.contextHash=new T({perNode:!0});T.lookAhead=new T({perNode:!0});T.mounted=new T({perNode:!0});class ut{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[T.mounted.id]}}const Di=Object.create(null);class J{constructor(e,t,r,s=0){this.name=e,this.props=t,this.id=r,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):Di,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new J(e.name||"",t,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(s)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(T.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let s of r.split(" "))t[s]=e[r];return r=>{for(let s=r.prop(T.group),o=-1;o<(s?s.length:0);o++){let i=t[o<0?r.name:s[o]];if(i)return i}}}}J.none=new J("",Object.create(null),0,8);class Fn{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let s=null;for(let o of e){let i=o(r);i&&(s||(s=Object.assign({},r.props)),s[i[0].id]=i[1])}t.push(s?new J(r.name,s,r.id,r.flags):r)}return new Fn(t)}}const vt=new WeakMap,ur=new WeakMap;var V;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(V||(V={}));class F{constructor(e,t,r,s,o){if(this.type=e,this.children=t,this.positions=r,this.length=s,this.props=null,o&&o.length){this.props=Object.create(null);for(let[i,l]of o)this.props[typeof i=="number"?i:i.id]=l}}toString(){let e=ut.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let s=r.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Dt(this.topNode,e)}cursorAt(e,t=0,r=0){let s=vt.get(this)||this.topNode,o=new Dt(s);return o.moveTo(e,t),vt.set(this,o._tree),o}get topNode(){return new Y(this,0,0,null)}resolve(e,t=0){let r=ht(vt.get(this)||this.topNode,e,t,!1);return vt.set(this,r),r}resolveInner(e,t=0){let r=ht(ur.get(this)||this.topNode,e,t,!0);return ur.set(this,r),r}resolveStack(e,t=0){return ji(this,e,t)}iterate(e){let{enter:t,leave:r,from:s=0,to:o=this.length}=e,i=e.mode||0,l=(i&V.IncludeAnonymous)>0;for(let a=this.cursor(i|V.IncludeAnonymous);;){let c=!1;if(a.from<=o&&a.to>=s&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;c=!0}for(;c&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:zn(J.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,s)=>new F(this.type,t,r,s,this.propValues),e.makeTree||((t,r,s)=>new F(J.none,t,r,s)))}static build(e){return Fi(e)}}F.empty=new F(J.none,[],[],0);class Vn{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Vn(this.buffer,this.index)}}class Ie{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return J.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],s=this.set.types[t],o=s.name;if(/\W/.test(o)&&!s.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let i=[];for(;e<r;)i.push(this.childString(e)),e=this.buffer[e+3];return o+"("+i.join(",")+")"}findChild(e,t,r,s,o){let{buffer:i}=this,l=-1;for(let a=e;a!=t&&!(ys(o,s,i[a+1],i[a+2])&&(l=a,r>0));a=i[a+3]);return l}slice(e,t,r){let s=this.buffer,o=new Uint16Array(t-e),i=0;for(let l=e,a=0;l<t;){o[a++]=s[l++],o[a++]=s[l++]-r;let c=o[a++]=s[l++]-r;o[a++]=s[l++]-e,i=Math.max(i,c)}return new Ie(o,i,this.set)}}function ys(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function ht(n,e,t,r){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let i=!r&&n instanceof Y&&n.index<0?null:n.parent;if(!i)return n;n=i}let o=r?0:V.IgnoreOverlays;if(r)for(let i=n,l=i.parent;l;i=l,l=i.parent)i instanceof Y&&i.index<0&&((s=l.enter(e,t,o))===null||s===void 0?void 0:s.from)!=i.from&&(n=l);for(;;){let i=n.enter(e,t,o);if(!i)return n;n=i}}class xs{cursor(e=0){return new Dt(this,e)}getChild(e,t=null,r=null){let s=hr(this,e,t,r);return s.length?s[0]:null}getChildren(e,t=null,r=null){return hr(this,e,t,r)}resolve(e,t=0){return ht(this,e,t,!1)}resolveInner(e,t=0){return ht(this,e,t,!0)}matchContext(e){return kn(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(r=t,t=s.prevSibling):t=s}return r}get node(){return this}get next(){return this.parent}}class Y extends xs{constructor(e,t,r,s){super(),this._tree=e,this.from=t,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,s,o=0){for(let i=this;;){for(let{children:l,positions:a}=i._tree,c=t>0?l.length:-1;e!=c;e+=t){let f=l[e],u=a[e]+i.from;if(ys(s,r,u,u+f.length)){if(f instanceof Ie){if(o&V.ExcludeBuffers)continue;let h=f.findChild(0,f.buffer.length,t,r-u,s);if(h>-1)return new xe(new _i(i,f,e,u),null,h)}else if(o&V.IncludeAnonymous||!f.type.isAnonymous||Hn(f)){let h;if(!(o&V.IgnoreMounts)&&(h=ut.get(f))&&!h.overlay)return new Y(h.tree,u,e,i);let p=new Y(f,u,e,i);return o&V.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?f.children.length-1:0,t,r,s)}}}if(o&V.IncludeAnonymous||!i.type.isAnonymous||(i.index>=0?e=i.index+t:e=t<0?-1:i._parent._tree.children.length,i=i._parent,!i))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let s;if(!(r&V.IgnoreOverlays)&&(s=ut.get(this._tree))&&s.overlay){let o=e-this.from;for(let{from:i,to:l}of s.overlay)if((t>0?i<=o:i<o)&&(t<0?l>=o:l>o))return new Y(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function hr(n,e,t,r){let s=n.cursor(),o=[];if(!s.firstChild())return o;if(t!=null){for(let i=!1;!i;)if(i=s.type.is(t),!s.nextSibling())return o}for(;;){if(r!=null&&s.type.is(r))return o;if(s.type.is(e)&&o.push(s.node),!s.nextSibling())return r==null?o:[]}}function kn(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class _i{constructor(e,t,r,s){this.parent=e,this.buffer=t,this.index=r,this.start=s}}class xe extends xs{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,r);return o<0?null:new xe(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&V.ExcludeBuffers)return null;let{buffer:s}=this.context,o=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new xe(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new xe(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new xe(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,s=this.index+4,o=r.buffer[this.index+3];if(o>s){let i=r.buffer[this.index+1];e.push(r.slice(s,o,i)),t.push(0)}return new F(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function bs(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let i=n[o];(i.from>t.from||i.to<t.to)&&(t=i,e=o)}let r=t instanceof Y&&t.index<0?null:t.parent,s=n.slice();return r?s[e]=r:s.splice(e,1),new Ri(s,t)}class Ri{constructor(e,t){this.heads=e,this.node=t}get next(){return bs(this.heads)}}function ji(n,e,t){let r=n.resolveInner(e,t),s=null;for(let o=r instanceof Y?r:r.context.parent;o;o=o.parent)if(o.index<0){let i=o.parent;(s||(s=[r])).push(i.resolve(e,t)),o=i}else{let i=ut.get(o.tree);if(i&&i.overlay&&i.overlay[0].from<=e&&i.overlay[i.overlay.length-1].to>=e){let l=new Y(i.tree,i.overlay[0].from+o.from,-1,o);(s||(s=[r])).push(ht(l,e,t,!1))}}return s?bs(s):r}class Dt{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Y)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof Y?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:s}=this.buffer,o=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&V.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&V.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&V.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(s.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:r}=s)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let o=t+e,i=e<0?-1:r._tree.children.length;o!=i;o+=e){let l=r._tree.children[o];if(this.mode&V.IncludeAnonymous||l instanceof Ie||!l.type.isAnonymous||Hn(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,o=this.stack.length;o>=0;){for(let i=e;i;i=i._parent)if(i.index==s){if(s==this.index)return i;t=i,r=o+1;break e}s=this.stack[--o]}for(let s=r;s<this.stack.length;s++)t=new xe(this.buffer,t,this.stack[s]);return this.bufferNode=new xe(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;s&&t&&t(this),s=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return kn(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let s=e.length-1,o=this.stack.length-1;s>=0;o--){if(o<0)return kn(this.node,e,s);let i=r[t.buffer[this.stack[o]]];if(!i.isAnonymous){if(e[s]&&e[s]!=i.name)return!1;s--}}return!0}}function Hn(n){return n.children.some(e=>e instanceof Ie||!e.type.isAnonymous||Hn(e))}function Fi(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:s=Oi,reused:o=[],minRepeatType:i=r.types.length}=n,l=Array.isArray(t)?new Vn(t,t.length):t,a=r.types,c=0,f=0;function u(y,A,S,_,R,L){let{id:P,start:I,end:j,size:O}=l,Z=f;for(;O<0;)if(l.next(),O==-1){let ve=o[P];S.push(ve),_.push(I-y);return}else if(O==-3){c=P;return}else if(O==-4){f=P;return}else throw new RangeError(`Unrecognized record size: ${O}`);let Be=a[P],$e,De,or=I-y;if(j-I<=s&&(De=v(l.pos-A,R))){let ve=new Uint16Array(De.size-De.skip),ne=l.pos-De.size,he=ve.length;for(;l.pos>ne;)he=E(De.start,ve,he);$e=new Ie(ve,j-De.start,r),or=De.start-y}else{let ve=l.pos-O;l.next();let ne=[],he=[],_e=P>=i?P:-1,Ge=0,Ct=j;for(;l.pos>ve;)_e>=0&&l.id==_e&&l.size>=0?(l.end<=Ct-s&&(m(ne,he,I,Ge,l.end,Ct,_e,Z),Ge=ne.length,Ct=l.end),l.next()):L>2500?h(I,ve,ne,he):u(I,ve,ne,he,_e,L+1);if(_e>=0&&Ge>0&&Ge<ne.length&&m(ne,he,I,Ge,I,Ct,_e,Z),ne.reverse(),he.reverse(),_e>-1&&Ge>0){let ir=p(Be);$e=zn(Be,ne,he,0,ne.length,0,j-I,ir,ir)}else $e=b(Be,ne,he,j-I,Z-j)}S.push($e),_.push(or)}function h(y,A,S,_){let R=[],L=0,P=-1;for(;l.pos>A;){let{id:I,start:j,end:O,size:Z}=l;if(Z>4)l.next();else{if(P>-1&&j<P)break;P<0&&(P=O-s),R.push(I,j,O),L++,l.next()}}if(L){let I=new Uint16Array(L*4),j=R[R.length-2];for(let O=R.length-3,Z=0;O>=0;O-=3)I[Z++]=R[O],I[Z++]=R[O+1]-j,I[Z++]=R[O+2]-j,I[Z++]=Z;S.push(new Ie(I,R[2]-j,r)),_.push(j-y)}}function p(y){return(A,S,_)=>{let R=0,L=A.length-1,P,I;if(L>=0&&(P=A[L])instanceof F){if(!L&&P.type==y&&P.length==_)return P;(I=P.prop(T.lookAhead))&&(R=S[L]+P.length+I)}return b(y,A,S,_,R)}}function m(y,A,S,_,R,L,P,I){let j=[],O=[];for(;y.length>_;)j.push(y.pop()),O.push(A.pop()+S-R);y.push(b(r.types[P],j,O,L-R,I-L)),A.push(R-S)}function b(y,A,S,_,R=0,L){if(c){let P=[T.contextHash,c];L=L?[P].concat(L):[P]}if(R>25){let P=[T.lookAhead,R];L=L?[P].concat(L):[P]}return new F(y,A,S,_,L)}function v(y,A){let S=l.fork(),_=0,R=0,L=0,P=S.end-s,I={size:0,start:0,skip:0};e:for(let j=S.pos-y;S.pos>j;){let O=S.size;if(S.id==A&&O>=0){I.size=_,I.start=R,I.skip=L,L+=4,_+=4,S.next();continue}let Z=S.pos-O;if(O<0||Z<j||S.start<P)break;let Be=S.id>=i?4:0,$e=S.start;for(S.next();S.pos>Z;){if(S.size<0)if(S.size==-3)Be+=4;else break e;else S.id>=i&&(Be+=4);S.next()}R=$e,_+=O,L+=Be}return(A<0||_==y)&&(I.size=_,I.start=R,I.skip=L),I.size>4?I:void 0}function E(y,A,S){let{id:_,start:R,end:L,size:P}=l;if(l.next(),P>=0&&_<i){let I=S;if(P>4){let j=l.pos-(P-4);for(;l.pos>j;)S=E(y,A,S)}A[--S]=I,A[--S]=L-y,A[--S]=R-y,A[--S]=_}else P==-3?c=_:P==-4&&(f=_);return S}let C=[],w=[];for(;l.pos>0;)u(n.start||0,n.bufferStart||0,C,w,-1,0);let k=(e=n.length)!==null&&e!==void 0?e:C.length?w[0]+C[0].length:0;return new F(a[n.topID],C.reverse(),w.reverse(),k)}const dr=new WeakMap;function Mt(n,e){if(!n.isAnonymous||e instanceof Ie||e.type!=n)return 1;let t=dr.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof F)){t=1;break}t+=Mt(n,r)}dr.set(e,t)}return t}function zn(n,e,t,r,s,o,i,l,a){let c=0;for(let m=r;m<s;m++)c+=Mt(n,e[m]);let f=Math.ceil(c*1.5/8),u=[],h=[];function p(m,b,v,E,C){for(let w=v;w<E;){let k=w,y=b[w],A=Mt(n,m[w]);for(w++;w<E;w++){let S=Mt(n,m[w]);if(A+S>=f)break;A+=S}if(w==k+1){if(A>f){let S=m[k];p(S.children,S.positions,0,S.children.length,b[k]+C);continue}u.push(m[k])}else{let S=b[w-1]+m[w-1].length-y;u.push(zn(n,m,b,k,w,y,S,null,a))}h.push(y+C-o)}}return p(e,t,r,s,0),(l||a)(u,h,i)}class Tu{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let s=this.map.get(e);s||this.map.set(e,s=new Map),s.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof xe?this.setBuffer(e.context.buffer,e.index,t):e instanceof Y&&this.map.set(e.tree,t)}get(e){return e instanceof xe?this.getBuffer(e.context.buffer,e.index):e instanceof Y?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class Se{constructor(e,t,r,s,o=!1,i=!1){this.from=e,this.to=t,this.tree=r,this.offset=s,this.open=(o?1:0)|(i?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let s=[new Se(0,e.length,e,0,!1,r)];for(let o of t)o.to>e.length&&s.push(o);return s}static applyChanges(e,t,r=128){if(!t.length)return e;let s=[],o=1,i=e.length?e[0]:null;for(let l=0,a=0,c=0;;l++){let f=l<t.length?t[l]:null,u=f?f.fromA:1e9;if(u-a>=r)for(;i&&i.from<u;){let h=i;if(a>=h.from||u<=h.to||c){let p=Math.max(h.from,a)-c,m=Math.min(h.to,u)-c;h=p>=m?null:new Se(p,m,h.tree,h.offset+c,l>0,!!f)}if(h&&s.push(h),i.to>u)break;i=o<e.length?e[o++]:null}if(!f)break;a=f.toA,c=f.toA-f.toB}return s}}class ks{startParse(e,t,r){return typeof e=="string"&&(e=new Vi(e)),r=r?r.length?r.map(s=>new oe(s.from,s.to)):[new oe(0,0)]:[new oe(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let s=this.startParse(e,t,r);for(;;){let o=s.advance();if(o)return o}}}class Vi{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function Pu(n){return(e,t,r,s)=>new zi(e,n,t,r,s)}class pr{constructor(e,t,r,s,o){this.parser=e,this.parse=t,this.overlay=r,this.target=s,this.from=o}}function mr(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class Hi{constructor(e,t,r,s,o,i,l){this.parser=e,this.predicate=t,this.mounts=r,this.index=s,this.start=o,this.target=i,this.prev=l,this.depth=0,this.ranges=[]}}const Cn=new T({perNode:!0});class zi{constructor(e,t,r,s,o){this.nest=t,this.input=r,this.fragments=s,this.ranges=o,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let s of this.inner)s.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new F(r.type,r.children,r.positions,r.length,r.propValues.concat([[Cn,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[T.mounted.id]=new ut(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new $i(this.fragments),t=null,r=null,s=new Dt(new Y(this.baseTree,this.ranges[0].from,0,null),V.IncludeAnonymous|V.IgnoreMounts);e:for(let o,i;;){let l=!0,a;if(this.stoppedAt!=null&&s.from>=this.stoppedAt)l=!1;else if(e.hasNode(s)){if(t){let c=t.mounts.find(f=>f.frag.from<=s.from&&f.frag.to>=s.to&&f.mount.overlay);if(c)for(let f of c.mount.overlay){let u=f.from+c.pos,h=f.to+c.pos;u>=s.from&&h<=s.to&&!t.ranges.some(p=>p.from<h&&p.to>u)&&t.ranges.push({from:u,to:h})}}l=!1}else if(r&&(i=Ui(r.ranges,s.from,s.to)))l=i!=2;else if(!s.type.isAnonymous&&(o=this.nest(s,this.input))&&(s.from<s.to||!o.overlay)){s.tree||Wi(s);let c=e.findMounts(s.from,o.parser);if(typeof o.overlay=="function")t=new Hi(o.parser,o.overlay,c,this.inner.length,s.from,s.tree,t);else{let f=xr(this.ranges,o.overlay||(s.from<s.to?[new oe(s.from,s.to)]:[]));f.length&&mr(f),(f.length||!o.overlay)&&this.inner.push(new pr(o.parser,f.length?o.parser.startParse(this.input,br(c,f),f):o.parser.startParse(""),o.overlay?o.overlay.map(u=>new oe(u.from-s.from,u.to-s.from)):null,s.tree,f.length?f[0].from:s.from)),o.overlay?f.length&&(r={ranges:f,depth:0,prev:r}):l=!1}}else t&&(a=t.predicate(s))&&(a===!0&&(a=new oe(s.from,s.to)),a.from<a.to&&t.ranges.push(a));if(l&&s.firstChild())t&&t.depth++,r&&r.depth++;else for(;!s.nextSibling();){if(!s.parent())break e;if(t&&!--t.depth){let c=xr(this.ranges,t.ranges);c.length&&(mr(c),this.inner.splice(t.index,0,new pr(t.parser,t.parser.startParse(this.input,br(t.mounts,c),c),t.ranges.map(f=>new oe(f.from-t.start,f.to-t.start)),t.target,c[0].from))),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}}function Ui(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function gr(n,e,t,r,s,o){if(e<t){let i=n.buffer[e+1];r.push(n.slice(e,t,i)),s.push(i-o)}}function Wi(n){let{node:e}=n,t=[],r=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let s=n.tree,o=s.children.indexOf(r),i=s.children[o],l=i.buffer,a=[o];function c(f,u,h,p,m,b){let v=t[b],E=[],C=[];gr(i,f,v,E,C,p);let w=l[v+1],k=l[v+2];a.push(E.length);let y=b?c(v+4,l[v+3],i.set.types[l[v]],w,k-w,b-1):e.toTree();return E.push(y),C.push(w-p),gr(i,l[v+3],u,E,C,p),new F(h,E,C,m)}s.children[o]=c(0,l.length,J.none,0,i.length,t.length-1);for(let f of a){let u=n.tree.children[f],h=n.tree.positions[f];n.yield(new Y(u,h+n.from,f,n._tree))}}class yr{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(V.IncludeAnonymous|V.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,V.IgnoreOverlays|V.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof F)t=t.children[0];else break}return!1}}class $i{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(Cn))!==null&&t!==void 0?t:r.to,this.inner=new yr(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(Cn))!==null&&e!==void 0?e:t.to,this.inner=new yr(t.tree,-t.offset)}}findMounts(e,t){var r;let s=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let o=this.inner.cursor.node;o;o=o.parent){let i=(r=o.tree)===null||r===void 0?void 0:r.prop(T.mounted);if(i&&i.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=o.to)break;a.tree==this.curFrag.tree&&s.push({frag:a,pos:o.from-a.offset,mount:i})}}}return s}}function xr(n,e){let t=null,r=e;for(let s=1,o=0;s<n.length;s++){let i=n[s-1].to,l=n[s].from;for(;o<r.length;o++){let a=r[o];if(a.from>=l)break;a.to<=i||(t||(r=t=e.slice()),a.from<i?(t[o]=new oe(a.from,i),a.to>l&&t.splice(o+1,0,new oe(l,a.to))):a.to>l?t[o--]=new oe(l,a.to):t.splice(o--,1))}}return r}function Gi(n,e,t,r){let s=0,o=0,i=!1,l=!1,a=-1e9,c=[];for(;;){let f=s==n.length?1e9:i?n[s].to:n[s].from,u=o==e.length?1e9:l?e[o].to:e[o].from;if(i!=l){let h=Math.max(a,t),p=Math.min(f,u,r);h<p&&c.push(new oe(h,p))}if(a=Math.min(f,u),a==1e9)break;f==a&&(i?(i=!1,s++):i=!0),u==a&&(l?(l=!1,o++):l=!0)}return c}function br(n,e){let t=[];for(let{pos:r,mount:s,frag:o}of n){let i=r+(s.overlay?s.overlay[0].from:0),l=i+s.tree.length,a=Math.max(o.from,i),c=Math.min(o.to,l);if(s.overlay){let f=s.overlay.map(h=>new oe(h.from+r,h.to+r)),u=Gi(e,f,a,c);for(let h=0,p=a;;h++){let m=h==u.length,b=m?c:u[h].from;if(b>p&&t.push(new Se(p,b,s.tree,-i,o.from>=p||o.openStart,o.to<=b||o.openEnd)),m)break;p=u[h].to}}else t.push(new Se(a,c,s.tree,-i,o.from>=i||o.openStart,o.to<=l||o.openEnd))}return t}let Yi=0;class ge{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=Yi++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new ge([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new _t;return t=>t.modified.indexOf(e)>-1?t:_t.get(t.base||t,t.modified.concat(e).sort((r,s)=>r.id-s.id))}}let Ki=0;class _t{constructor(){this.instances=[],this.id=Ki++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(l=>l.base==e&&Xi(t,l.modified));if(r)return r;let s=[],o=new ge(s,e,t);for(let l of t)l.instances.push(o);let i=qi(t);for(let l of e.set)if(!l.modified.length)for(let a of i)s.push(_t.get(l,a));return o}}function Xi(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function qi(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Ji(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let s of t.split(" "))if(s){let o=[],i=2,l=s;for(let u=0;;){if(l=="..."&&u>0&&u+3==s.length){i=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!h)throw new RangeError("Invalid path: "+s);if(o.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),u+=h[0].length,u==s.length)break;let p=s[u++];if(u==s.length&&p=="!"){i=0;break}if(p!="/")throw new RangeError("Invalid path: "+s);l=s.slice(u)}let a=o.length-1,c=o[a];if(!c)throw new RangeError("Invalid path: "+s);let f=new Rt(r,i,a>0?o.slice(0,a):null);e[c]=f.sort(e[c])}}return Cs.add(e)}const Cs=new T;class Rt{constructor(e,t,r,s){this.tags=e,this.mode=t,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Rt.empty=new Rt([],2,null);function vs(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let i of o.tag)t[i.id]=o.class;let{scope:r,all:s=null}=e||{};return{style:o=>{let i=s;for(let l of o)for(let a of l.set){let c=t[a.id];if(c){i=i?i+" "+c:c;break}}return i},scope:r}}function Zi(n,e){let t=null;for(let r of n){let s=r.style(e);s&&(t=t?t+" "+s:s)}return t}function Qi(n,e,t,r=0,s=n.length){let o=new el(r,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),r,s,"",o.highlighters),o.flush(s)}class el{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,s,o){let{type:i,from:l,to:a}=e;if(l>=r||a<=t)return;i.isTop&&(o=this.highlighters.filter(p=>!p.scope||p.scope(i)));let c=s,f=tl(e)||Rt.empty,u=Zi(o,f.tags);if(u&&(c&&(c+=" "),c+=u,f.mode==1&&(s+=(s?" ":"")+u)),this.startSpan(Math.max(t,l),c),f.opaque)return;let h=e.tree&&e.tree.prop(T.mounted);if(h&&h.overlay){let p=e.node.enter(h.overlay[0].from+l,1),m=this.highlighters.filter(v=>!v.scope||v.scope(h.tree.type)),b=e.firstChild();for(let v=0,E=l;;v++){let C=v<h.overlay.length?h.overlay[v]:null,w=C?C.from+l:a,k=Math.max(t,E),y=Math.min(r,w);if(k<y&&b)for(;e.from<y&&(this.highlightRange(e,k,y,s,o),this.startSpan(Math.min(y,e.to),c),!(e.to>=w||!e.nextSibling())););if(!C||w>r)break;E=C.to+l,E>t&&(this.highlightRange(p.cursor(),Math.max(t,C.from+l),Math.min(r,E),"",m),this.startSpan(Math.min(r,E),c))}b&&e.parent()}else if(e.firstChild()){h&&(s="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,s,o),this.startSpan(Math.min(r,e.to),c)}while(e.nextSibling());e.parent()}}}function tl(n){let e=n.type.prop(Cs);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const x=ge.define,wt=x(),Ae=x(),kr=x(Ae),Cr=x(Ae),Ee=x(),St=x(Ee),on=x(Ee),me=x(),Re=x(me),de=x(),pe=x(),vn=x(),st=x(vn),At=x(),d={comment:wt,lineComment:x(wt),blockComment:x(wt),docComment:x(wt),name:Ae,variableName:x(Ae),typeName:kr,tagName:x(kr),propertyName:Cr,attributeName:x(Cr),className:x(Ae),labelName:x(Ae),namespace:x(Ae),macroName:x(Ae),literal:Ee,string:St,docString:x(St),character:x(St),attributeValue:x(St),number:on,integer:x(on),float:x(on),bool:x(Ee),regexp:x(Ee),escape:x(Ee),color:x(Ee),url:x(Ee),keyword:de,self:x(de),null:x(de),atom:x(de),unit:x(de),modifier:x(de),operatorKeyword:x(de),controlKeyword:x(de),definitionKeyword:x(de),moduleKeyword:x(de),operator:pe,derefOperator:x(pe),arithmeticOperator:x(pe),logicOperator:x(pe),bitwiseOperator:x(pe),compareOperator:x(pe),updateOperator:x(pe),definitionOperator:x(pe),typeOperator:x(pe),controlOperator:x(pe),punctuation:vn,separator:x(vn),bracket:st,angleBracket:x(st),squareBracket:x(st),paren:x(st),brace:x(st),content:me,heading:Re,heading1:x(Re),heading2:x(Re),heading3:x(Re),heading4:x(Re),heading5:x(Re),heading6:x(Re),contentSeparator:x(me),list:x(me),quote:x(me),emphasis:x(me),strong:x(me),link:x(me),monospace:x(me),strikethrough:x(me),inserted:x(),deleted:x(),changed:x(),invalid:x(),meta:At,documentMeta:x(At),annotation:x(At),processingInstruction:x(At),definition:ge.defineModifier(),constant:ge.defineModifier(),function:ge.defineModifier(),standard:ge.defineModifier(),local:ge.defineModifier(),special:ge.defineModifier()};vs([{tag:d.link,class:"tok-link"},{tag:d.heading,class:"tok-heading"},{tag:d.emphasis,class:"tok-emphasis"},{tag:d.strong,class:"tok-strong"},{tag:d.keyword,class:"tok-keyword"},{tag:d.atom,class:"tok-atom"},{tag:d.bool,class:"tok-bool"},{tag:d.url,class:"tok-url"},{tag:d.labelName,class:"tok-labelName"},{tag:d.inserted,class:"tok-inserted"},{tag:d.deleted,class:"tok-deleted"},{tag:d.literal,class:"tok-literal"},{tag:d.string,class:"tok-string"},{tag:d.number,class:"tok-number"},{tag:[d.regexp,d.escape,d.special(d.string)],class:"tok-string2"},{tag:d.variableName,class:"tok-variableName"},{tag:d.local(d.variableName),class:"tok-variableName tok-local"},{tag:d.definition(d.variableName),class:"tok-variableName tok-definition"},{tag:d.special(d.variableName),class:"tok-variableName2"},{tag:d.definition(d.propertyName),class:"tok-propertyName tok-definition"},{tag:d.typeName,class:"tok-typeName"},{tag:d.namespace,class:"tok-namespace"},{tag:d.className,class:"tok-className"},{tag:d.macroName,class:"tok-macroName"},{tag:d.propertyName,class:"tok-propertyName"},{tag:d.operator,class:"tok-operator"},{tag:d.comment,class:"tok-comment"},{tag:d.meta,class:"tok-meta"},{tag:d.invalid,class:"tok-invalid"},{tag:d.punctuation,class:"tok-punctuation"}]);var ln;const je=new T;function ws(n){return ee.define({combine:n?e=>e.concat(n):void 0})}const nl=new T;class ie{constructor(e,t,r=[],s=""){this.data=e,this.name=s,lt.prototype.hasOwnProperty("tree")||Object.defineProperty(lt.prototype,"tree",{get(){return z(this)}}),this.parser=t,this.extension=[Me.of(this),lt.languageData.of((o,i,l)=>{let a=vr(o,i,l),c=a.type.prop(je);if(!c)return[];let f=o.facet(c),u=a.type.prop(nl);if(u){let h=a.resolve(i-a.from,l);for(let p of u)if(p.test(h,o)){let m=o.facet(p.facet);return p.type=="replace"?m:m.concat(f)}}return f})].concat(r)}isActiveAt(e,t,r=-1){return vr(e,t,r).type.prop(je)==this.data}findRegions(e){let t=e.facet(Me);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(o,i)=>{if(o.prop(je)==this.data){r.push({from:i,to:i+o.length});return}let l=o.prop(T.mounted);if(l){if(l.tree.prop(je)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+i,to:a.to+i});else r.push({from:i,to:i+o.length});return}else if(l.overlay){let a=r.length;if(s(l.tree,l.overlay[0].from+i),r.length>a)return}}for(let a=0;a<o.children.length;a++){let c=o.children[a];c instanceof F&&s(c,o.positions[a]+i)}};return s(z(e),0),r}get allowsNesting(){return!0}}ie.setState=te.define();function vr(n,e,t){let r=n.facet(Me),s=z(n).topNode;if(!r||r.allowsNesting)for(let o=s;o;o=o.enter(e,t,V.ExcludeBuffers))o.type.isTop&&(s=o);return s}class wn extends ie{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=ws(e.languageData);return new wn(t,e.parser.configure({props:[je.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new wn(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function z(n){let e=n.field(ie.state,!1);return e?e.tree:F.empty}class rl{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let ot=null;class Je{constructor(e,t,r=[],s,o,i,l,a){this.parser=e,this.state=t,this.fragments=r,this.tree=s,this.treeLen=o,this.viewport=i,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Je(e,t,[],F.empty,0,r,[],null)}startParse(){return this.parser.startParse(new rl(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=F.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Se.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Se.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ot;ot=this;try{return e()}finally{ot=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=wr(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:s,treeLen:o,viewport:i,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((c,f,u,h)=>a.push({fromA:c,toA:f,fromB:u,toB:h})),r=Se.applyChanges(r,a),s=F.empty,o=0,i={from:e.mapPos(i.from,-1),to:e.mapPos(i.to,1)},this.skipped.length){l=[];for(let c of this.skipped){let f=e.mapPos(c.from,1),u=e.mapPos(c.to,-1);f<u&&l.push({from:f,to:u})}}}return new Je(this.parser,t,r,s,o,i,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:o}=this.skipped[r];s<e.to&&o>e.from&&(this.fragments=wr(this.fragments,s,o),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends ks{createParse(t,r,s){let o=s[0].from,i=s[s.length-1].to;return{parsedPos:o,advance(){let a=ot;if(a){for(let c of s)a.tempSkipped.push(c);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=i,new F(J.none,[],[],i-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ot}}function wr(n,e,t){return Se.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ze{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Ze(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Je.create(e.facet(Me).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Ze(r)}}ie.state=We.define({create:Ze.init,update(n,e){for(let t of e.effects)if(t.is(ie.setState))return t.value;return e.startState.facet(Me)!=e.state.facet(Me)?Ze.init(e.state):n.apply(e)}});let Ss=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Ss=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const an=typeof navigator<"u"&&(!((ln=navigator.scheduling)===null||ln===void 0)&&ln.isInputPending)?()=>navigator.scheduling.isInputPending():null,sl=Bn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ie.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ie.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Ss(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,o=r.field(ie.state);if(o.tree==o.context.tree&&o.context.isDone(s+1e5))return;let i=Date.now()+Math.min(this.chunkBudget,100,e&&!an?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<s&&r.doc.length>s+1e3,a=o.context.work(()=>an&&an()||Date.now()>i,s+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:ie.setState.of(new Ze(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>as(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Me=ee.define({combine(n){return n.length?n[0]:null},enables:n=>[ie.state,sl,H.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class ol{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const As=ee.define(),Xt=ee.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function He(n){let e=n.facet(Xt);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function dt(n,e){let t="",r=n.tabSize,s=n.facet(Xt)[0];if(s=="	"){for(;e>=r;)t+="	",e-=r;s=" "}for(let o=0;o<e;o++)t+=s;return t}function Un(n,e){n instanceof lt&&(n=new qt(n));for(let r of n.state.facet(As)){let s=r(n,e);if(s!==void 0)return s}let t=z(n.state);return t.length>=e?ll(n,t,e):null}class qt{constructor(e,t={}){this.state=e,this.options=t,this.unit=He(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:o}=this.options;return s!=null&&s>=r.from&&s<=r.to?o&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),o=this.countColumn(r,e-s),i=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return i>-1&&(o+=i-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,t=e.length){return Gt(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let i=o(s);if(i>-1)return i}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const il=new T;function ll(n,e,t){let r=e.resolveStack(t),s=r.node.enterUnfinishedNodesBefore(t);if(s!=r.node){let o=[];for(let i=s;i!=r.node;i=i.parent)o.push(i);for(let i=o.length-1;i>=0;i--)r={node:o[i],next:r}}return Es(r,n,t)}function Es(n,e,t){for(let r=n;r;r=r.next){let s=cl(r.node);if(s)return s(Wn.create(e,t,r))}return 0}function al(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function cl(n){let e=n.type.prop(il);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(T.closedBy))){let s=n.lastChild,o=s&&r.indexOf(s.name)>-1;return i=>Ns(i,!0,1,void 0,o&&!al(i)?s.from:void 0)}return n.parent==null?fl:null}function fl(){return 0}class Wn extends qt{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new Wn(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(ul(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return Es(this.context.next,this.base,this.pos)}}function ul(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function hl(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),i=s==null||s<=o.from?o.to:Math.min(o.to,s);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped)return a.from<i?t:null;l=a.to}}function Mu({closing:n,align:e=!0,units:t=1}){return r=>Ns(r,e,t,n)}function Ns(n,e,t,r,s){let o=n.textAfter,i=o.match(/^\s*/)[0].length,l=r&&o.slice(i,i+r.length)==r||s==n.pos+i,a=e?hl(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}const Lu=n=>n.baseIndent;function Ou({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const dl=200;function Bu(){return lt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,s=t.lineAt(r);if(r>s.from+dl)return n;let o=t.sliceString(s.from,r);if(!e.some(c=>c.test(o)))return n;let{state:i}=n,l=-1,a=[];for(let{head:c}of i.selection.ranges){let f=i.doc.lineAt(c);if(f.from==l)continue;l=f.from;let u=Un(i,f.from);if(u==null)continue;let h=/^\s*/.exec(f.text)[0],p=dt(i,u);h!=p&&a.push({from:f.from,to:f.from+h.length,insert:p})}return a.length?[n,{changes:a,sequential:!0}]:n})}const pl=ee.define(),ml=new T;function Du(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function gl(n,e,t){let r=z(n);if(r.length<t)return null;let s=r.resolveStack(t,1),o=null;for(let i=s;i;i=i.next){let l=i.node;if(l.to<=t||l.from>t)continue;if(o&&l.from<e)break;let a=l.type.prop(ml);if(a&&(l.to<r.length-50||r.length==n.doc.length||!yl(l))){let c=a(l,n);c&&c.from<=t&&c.from>=e&&c.to>t&&(o=c)}}return o}function yl(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function jt(n,e,t){for(let r of n.facet(pl)){let s=r(n,e,t);if(s)return s}return gl(n,e,t)}function Ts(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const Jt=te.define({map:Ts}),yt=te.define({map:Ts});function Ps(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const ze=We.define({create(){return $.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(Jt)&&!xl(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(Ls),s=r?$.replace({widget:new Sl(r(e.state,t.value))}):Sr;n=n.update({add:[s.range(t.value.from,t.value.to)]})}else t.is(yt)&&(n=n.update({filter:(r,s)=>t.value.from!=r||t.value.to!=s,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(s,o)=>{s<r&&o>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(s,o)=>o<=r||s>=r}))}return n},provide:n=>H.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,s)=>{t.push(r,s)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],s=n[t++];if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid JSON for fold state");e.push(Sr.range(r,s))}return $.set(e,!0)}});function Ft(n,e,t){var r;let s=null;return(r=n.field(ze,!1))===null||r===void 0||r.between(e,t,(o,i)=>{(!s||s.from>o)&&(s={from:o,to:i})}),s}function xl(n,e,t){let r=!1;return n.between(e,e,(s,o)=>{s==e&&o==t&&(r=!0)}),r}function Is(n,e){return n.field(ze,!1)?e:e.concat(te.appendConfig.of(Os()))}const bl=n=>{for(let e of Ps(n)){let t=jt(n.state,e.from,e.to);if(t)return n.dispatch({effects:Is(n.state,[Jt.of(t),Ms(n,t)])}),!0}return!1},kl=n=>{if(!n.state.field(ze,!1))return!1;let e=[];for(let t of Ps(n)){let r=Ft(n.state,t.from,t.to);r&&e.push(yt.of(r),Ms(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function Ms(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,s=n.state.doc.lineAt(e.to).number;return H.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${s}.`)}const Cl=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let s=n.lineBlockAt(r),o=jt(e,s.from,s.to);o&&t.push(Jt.of(o)),r=(o?n.lineBlockAt(o.to):s).to+1}return t.length&&n.dispatch({effects:Is(n.state,t)}),!!t.length},vl=n=>{let e=n.state.field(ze,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,s)=>{t.push(yt.of({from:r,to:s}))}),n.dispatch({effects:t}),!0},_u=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:bl},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:kl},{key:"Ctrl-Alt-[",run:Cl},{key:"Ctrl-Alt-]",run:vl}],wl={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Ls=ee.define({combine(n){return $t(n,wl)}});function Os(n){return[ze,El]}function Bs(n,e){let{state:t}=n,r=t.facet(Ls),s=i=>{let l=n.lineBlockAt(n.posAtDOM(i.target)),a=Ft(n.state,l.from,l.to);a&&n.dispatch({effects:yt.of(a)}),i.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,s,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=s,o}const Sr=$.replace({widget:new class extends Dn{toDOM(n){return Bs(n,null)}}});class Sl extends Dn{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Bs(e,this.value)}}const Al={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class cn extends oi{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Ru(n={}){let e=Object.assign(Object.assign({},Al),n),t=new cn(e,!0),r=new cn(e,!1),s=Bn.fromClass(class{constructor(i){this.from=i.viewport.from,this.markers=this.buildMarkers(i)}update(i){(i.docChanged||i.viewportChanged||i.startState.facet(Me)!=i.state.facet(Me)||i.startState.field(ze,!1)!=i.state.field(ze,!1)||z(i.startState)!=z(i.state)||e.foldingChanged(i))&&(this.markers=this.buildMarkers(i.view))}buildMarkers(i){let l=new fs;for(let a of i.viewportLineBlocks){let c=Ft(i.state,a.from,a.to)?r:jt(i.state,a.from,a.to)?t:null;c&&l.add(a.from,a.from,c)}return l.finish()}}),{domEventHandlers:o}=e;return[s,si({class:"cm-foldGutter",markers(i){var l;return((l=i.plugin(s))===null||l===void 0?void 0:l.markers)||cs.empty},initialSpacer(){return new cn(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(i,l,a)=>{if(o.click&&o.click(i,l,a))return!0;let c=Ft(i.state,l.from,l.to);if(c)return i.dispatch({effects:yt.of(c)}),!0;let f=jt(i.state,l.from,l.to);return f?(i.dispatch({effects:Jt.of(f)}),!0):!1}})}),Os()]}const El=H.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class xt{constructor(e,t){this.specs=e;let r;function s(l){let a=cr.newName();return(r||(r=Object.create(null)))["."+a]=l,a}const o=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,i=t.scope;this.scope=i instanceof ie?l=>l.prop(je)==i.data:i?l=>l==i:void 0,this.style=vs(e.map(l=>({tag:l.tag,class:l.class||s(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=r?new cr(r):null,this.themeType=t.themeType}static define(e,t){return new xt(e,t||{})}}const Sn=ee.define(),Ds=ee.define({combine(n){return n.length?[n[0]]:null}});function fn(n){let e=n.facet(Sn);return e.length?e:n.facet(Ds)}function Nl(n,e){let t=[Pl],r;return n instanceof xt&&(n.module&&t.push(H.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(Ds.of(n)):r?t.push(Sn.computeN([H.darkTheme],s=>s.facet(H.darkTheme)==(r=="dark")?[n]:[])):t.push(Sn.of(n)),t}class Tl{constructor(e){this.markCache=Object.create(null),this.tree=z(e.state),this.decorations=this.buildDeco(e,fn(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=z(e.state),r=fn(e.state),s=r!=fn(e.startState),{viewport:o}=e.view,i=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!s&&t.type==this.tree.type&&i>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=i):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return $.none;let r=new fs;for(let{from:s,to:o}of e.visibleRanges)Qi(this.tree,t,(i,l,a)=>{r.add(i,l,this.markCache[a]||(this.markCache[a]=$.mark({class:a})))},s,o);return r.finish()}}const Pl=us.high(Bn.fromClass(Tl,{decorations:n=>n.decorations})),ju=xt.define([{tag:d.meta,color:"#404740"},{tag:d.link,textDecoration:"underline"},{tag:d.heading,textDecoration:"underline",fontWeight:"bold"},{tag:d.emphasis,fontStyle:"italic"},{tag:d.strong,fontWeight:"bold"},{tag:d.strikethrough,textDecoration:"line-through"},{tag:d.keyword,color:"#708"},{tag:[d.atom,d.bool,d.url,d.contentSeparator,d.labelName],color:"#219"},{tag:[d.literal,d.inserted],color:"#164"},{tag:[d.string,d.deleted],color:"#a11"},{tag:[d.regexp,d.escape,d.special(d.string)],color:"#e40"},{tag:d.definition(d.variableName),color:"#00f"},{tag:d.local(d.variableName),color:"#30a"},{tag:[d.typeName,d.namespace],color:"#085"},{tag:d.className,color:"#167"},{tag:[d.special(d.variableName),d.macroName],color:"#256"},{tag:d.definition(d.propertyName),color:"#00c"},{tag:d.comment,color:"#940"},{tag:d.invalid,color:"#f00"}]),Il=H.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_s=1e4,Rs="()[]{}",js=ee.define({combine(n){return $t(n,{afterCursor:!0,brackets:Rs,maxScanDistance:_s,renderMatch:Ol})}}),Ml=$.mark({class:"cm-matchingBracket"}),Ll=$.mark({class:"cm-nonmatchingBracket"});function Ol(n){let e=[],t=n.matched?Ml:Ll;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const Bl=We.define({create(){return $.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(js);for(let s of e.state.selection.ranges){if(!s.empty)continue;let o=be(e.state,s.head,-1,r)||s.head>0&&be(e.state,s.head-1,1,r)||r.afterCursor&&(be(e.state,s.head,1,r)||s.head<e.state.doc.length&&be(e.state,s.head+1,-1,r));o&&(t=t.concat(r.renderMatch(o,e.state)))}return $.set(t,!0)},provide:n=>H.decorations.from(n)}),Dl=[Bl,Il];function Fu(n={}){return[js.of(n),Dl]}const _l=new T;function An(n,e,t){let r=n.prop(e<0?T.openedBy:T.closedBy);if(r)return r;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function En(n){let e=n.type.prop(_l);return e?e(n.node):n}function be(n,e,t,r={}){let s=r.maxScanDistance||_s,o=r.brackets||Rs,i=z(n),l=i.resolveInner(e,t);for(let a=l;a;a=a.parent){let c=An(a.type,t,o);if(c&&a.from<a.to){let f=En(a);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return Rl(n,e,t,a,f,c,o)}}return jl(n,e,t,i,l.type,s,o)}function Rl(n,e,t,r,s,o,i){let l=r.parent,a={from:s.from,to:s.to},c=0,f=l==null?void 0:l.cursor();if(f&&(t<0?f.childBefore(r.from):f.childAfter(r.to)))do if(t<0?f.to<=r.from:f.from>=r.to){if(c==0&&o.indexOf(f.type.name)>-1&&f.from<f.to){let u=En(f);return{start:a,end:u?{from:u.from,to:u.to}:void 0,matched:!0}}else if(An(f.type,t,i))c++;else if(An(f.type,-t,i)){if(c==0){let u=En(f);return{start:a,end:u&&u.from<u.to?{from:u.from,to:u.to}:void 0,matched:!1}}c--}}while(t<0?f.prevSibling():f.nextSibling());return{start:a,matched:!1}}function jl(n,e,t,r,s,o,i){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=i.indexOf(l);if(a<0||a%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),u=0;for(let h=0;!f.next().done&&h<=o;){let p=f.value;t<0&&(h+=p.length);let m=e+h*t;for(let b=t>0?0:p.length-1,v=t>0?p.length:-1;b!=v;b+=t){let E=i.indexOf(p[b]);if(!(E<0||r.resolveInner(m+b,1).type!=s))if(E%2==0==t>0)u++;else{if(u==1)return{start:c,end:{from:m+b,to:m+b+1},matched:E>>1==a>>1};u--}}t>0&&(h+=p.length)}return f.done?{start:c,matched:!1}:null}function Ar(n,e,t,r=0,s=0){e==null&&(e=n.search(/[^\s\u00a0]/),e==-1&&(e=n.length));let o=s;for(let i=r;i<e;i++)n.charCodeAt(i)==9?o+=t-o%t:o++;return o}class Fs{constructor(e,t,r,s){this.string=e,this.tabSize=t,this.indentUnit=r,this.overrideIndent=s,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(e){let t=this.string.charAt(this.pos),r;if(typeof e=="string"?r=t==e:r=t&&(e instanceof RegExp?e.test(t):e(t)),r)return++this.pos,t}eatWhile(e){let t=this.pos;for(;this.eat(e););return this.pos>t}eatSpace(){let e=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e}skipToEnd(){this.pos=this.string.length}skipTo(e){let t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0}backUp(e){this.pos-=e}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Ar(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){var e;return(e=this.overrideIndent)!==null&&e!==void 0?e:Ar(this.string,null,this.tabSize)}match(e,t,r){if(typeof e=="string"){let s=i=>r?i.toLowerCase():i,o=this.string.substr(this.pos,e.length);return s(o)==s(e)?(t!==!1&&(this.pos+=e.length),!0):null}else{let s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}}current(){return this.string.slice(this.start,this.pos)}}function Fl(n){return{name:n.name||"",token:n.token,blankLine:n.blankLine||(()=>{}),startState:n.startState||(()=>!0),copyState:n.copyState||Vl,indent:n.indent||(()=>null),languageData:n.languageData||{},tokenTable:n.tokenTable||Yn}}function Vl(n){if(typeof n!="object")return n;let e={};for(let t in n){let r=n[t];e[t]=r instanceof Array?r.slice():r}return e}const Er=new WeakMap;class $n extends ie{constructor(e){let t=ws(e.languageData),r=Fl(e),s,o=new class extends ks{createParse(i,l,a){return new zl(s,i,l,a)}};super(t,o,[As.of((i,l)=>this.getIndent(i,l))],e.name),this.topNode=$l(t),s=this,this.streamParser=r,this.stateAfter=new T({perNode:!0}),this.tokenTable=e.tokenTable?new Us(r.tokenTable):Wl}static define(e){return new $n(e)}getIndent(e,t){let r=z(e.state),s=r.resolve(t);for(;s&&s.type!=this.topNode;)s=s.parent;if(!s)return null;let o,{overrideIndentation:i}=e.options;i&&(o=Er.get(e.state),o!=null&&o<t-1e4&&(o=void 0));let l=Gn(this,r,0,s.from,o??t),a,c;if(l?(c=l.state,a=l.pos+1):(c=this.streamParser.startState(e.unit),a=0),t-a>1e4)return null;for(;a<t;){let u=e.state.doc.lineAt(a),h=Math.min(t,u.to);if(u.length){let p=i?i(u.from):-1,m=new Fs(u.text,e.state.tabSize,e.unit,p<0?void 0:p);for(;m.pos<h-u.from;)Hs(this.streamParser.token,m,c)}else this.streamParser.blankLine(c,e.unit);if(h==t)break;a=u.to+1}let f=e.lineAt(t);return i&&o==null&&Er.set(e.state,f.from),this.streamParser.indent(c,/^\s*(.*)/.exec(f.text)[1],e)}get allowsNesting(){return!1}}function Gn(n,e,t,r,s){let o=t>=r&&t+e.length<=s&&e.prop(n.stateAfter);if(o)return{state:n.streamParser.copyState(o),pos:t+e.length};for(let i=e.children.length-1;i>=0;i--){let l=e.children[i],a=t+e.positions[i],c=l instanceof F&&a<s&&Gn(n,l,a,r,s);if(c)return c}return null}function Vs(n,e,t,r,s){if(s&&t<=0&&r>=e.length)return e;!s&&e.type==n.topNode&&(s=!0);for(let o=e.children.length-1;o>=0;o--){let i=e.positions[o],l=e.children[o],a;if(i<r&&l instanceof F){if(!(a=Vs(n,l,t-i,r-i,s)))break;return s?new F(e.type,e.children.slice(0,o).concat(a),e.positions.slice(0,o+1),i+a.length):a}}return null}function Hl(n,e,t,r){for(let s of e){let o=s.from+(s.openStart?25:0),i=s.to-(s.openEnd?25:0),l=o<=t&&i>t&&Gn(n,s.tree,0-s.offset,t,i),a;if(l&&(a=Vs(n,s.tree,t+s.offset,l.pos+s.offset,!1)))return{state:l.state,tree:a}}return{state:n.streamParser.startState(r?He(r):4),tree:F.empty}}class zl{constructor(e,t,r,s){this.lang=e,this.input=t,this.fragments=r,this.ranges=s,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=s[s.length-1].to;let o=Je.get(),i=s[0].from,{state:l,tree:a}=Hl(e,r,i,o==null?void 0:o.state);this.state=l,this.parsedPos=this.chunkStart=i+a.length;for(let c=0;c<a.children.length;c++)this.chunks.push(a.children[c]),this.chunkPos.push(a.positions[c]);o&&this.parsedPos<o.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(He(o.state)),o.skipUntilInView(this.parsedPos,o.viewport.from),this.parsedPos=o.viewport.from),this.moveRangeIndex()}advance(){let e=Je.get(),t=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),r=Math.min(t,this.chunkStart+2048);for(e&&(r=Math.min(r,e.viewport.to));this.parsedPos<r;)this.parseLine(e);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=t?this.finish():e&&this.parsedPos>=e.viewport.to?(e.skipUntilInView(this.parsedPos,t),this.finish()):null}stopAt(e){this.stoppedAt=e}lineAfter(e){let t=this.input.chunk(e);if(this.input.lineChunks)t==`
`&&(t="");else{let r=t.indexOf(`
`);r>-1&&(t=t.slice(0,r))}return e+t.length<=this.to?t:t.slice(0,this.to-e)}nextLine(){let e=this.parsedPos,t=this.lineAfter(e),r=e+t.length;for(let s=this.rangeIndex;;){let o=this.ranges[s].to;if(o>=r||(t=t.slice(0,o-(r-t.length)),s++,s==this.ranges.length))break;let i=this.ranges[s].from,l=this.lineAfter(i);t+=l,r=i+l.length}return{line:t,end:r}}skipGapsTo(e,t,r){for(;;){let s=this.ranges[this.rangeIndex].to,o=e+t;if(r>0?s>o:s>=o)break;let i=this.ranges[++this.rangeIndex].from;t+=i-s}return t}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(e,t,r,s,o){if(this.ranges.length>1){o=this.skipGapsTo(t,o,1),t+=o;let i=this.chunk.length;o=this.skipGapsTo(r,o,-1),r+=o,s+=this.chunk.length-i}return this.chunk.push(e,t,r,s),o}parseLine(e){let{line:t,end:r}=this.nextLine(),s=0,{streamParser:o}=this.lang,i=new Fs(t,e?e.state.tabSize:4,e?He(e.state):2);if(i.eol())o.blankLine(this.state,i.indentUnit);else for(;!i.eol();){let l=Hs(o.token,i,this.state);if(l&&(s=this.emitToken(this.lang.tokenTable.resolve(l),this.parsedPos+i.start,this.parsedPos+i.pos,4,s)),i.start>1e4)break}this.parsedPos=r,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let e=F.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:Ul,topID:0,maxBufferLength:2048,reused:this.chunkReused});e=new F(e.type,e.children,e.positions,e.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(e),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new F(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Hs(n,e,t){e.start=e.pos;for(let r=0;r<10;r++){let s=n(e,t);if(e.pos>e.start)return s}throw new Error("Stream parser failed to advance stream.")}const Yn=Object.create(null),pt=[J.none],Ul=new Fn(pt),Nr=[],Tr=Object.create(null),zs=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])zs[n]=Ws(Yn,e);class Us{constructor(e){this.extra=e,this.table=Object.assign(Object.create(null),zs)}resolve(e){return e?this.table[e]||(this.table[e]=Ws(this.extra,e)):0}}const Wl=new Us(Yn);function un(n,e){Nr.indexOf(n)>-1||(Nr.push(n),console.warn(e))}function Ws(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let c of l.split(".")){let f=n[c]||d[c];f?typeof f=="function"?a.length?a=a.map(f):un(c,`Modifier ${c} used at start of tag`):a.length?un(c,`Tag ${c} used as modifier`):a=Array.isArray(f)?f:[f]:un(c,`Unknown highlighting tag ${c}`)}for(let c of a)t.push(c)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+t.map(l=>l.id),o=Tr[s];if(o)return o.id;let i=Tr[s]=J.define({id:pt.length,name:r,props:[Ji({[r]:t})]});return pt.push(i),i.id}function $l(n){let e=J.define({id:pt.length,name:"Document",props:[je.add(()=>n)],top:!0});return pt.push(e),e}Bt.RTL,Bt.LTR;class Gl{constructor(e,t,r,s){this.state=e,this.pos=t,this.explicit=r,this.view=s,this.abortListeners=[]}tokenBefore(e){let t=z(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),s=t.text.slice(r-t.from,this.pos-t.from),o=s.search($s(e,!1));return o<0?null:{from:r+o,to:this.pos,text:s.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Pr(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Yl(n){let e=Object.create(null),t=Object.create(null);for(let{label:s}of n){e[s[0]]=!0;for(let o=1;o<s.length;o++)t[s[o]]=!0}let r=Pr(e)+Pr(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Kl(n){let e=n.map(s=>typeof s=="string"?{label:s}:s),[t,r]=e.every(s=>/^\w+$/.test(s.label))?[/\w*$/,/\w+$/]:Yl(e);return s=>{let o=s.matchBefore(r);return o||s.explicit?{from:o?o.from:s.pos,options:e,validFor:t}:null}}function Vu(n,e){return t=>{for(let r=z(t.state).resolveInner(t.pos,-1);r;r=r.parent){if(n.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(t)}}class Ir{constructor(e,t,r,s){this.completion=e,this.source=t,this.match=r,this.score=s}}function qe(n){return n.selection.main.from}function $s(n,e){var t;let{source:r}=n,s=e&&r[0]!="^",o=r[r.length-1]!="$";return!s&&!o?n:new RegExp(`${s?"^":""}(?:${r})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const Kn=Rn.define();function Xl(n,e,t,r){let{main:s}=n.selection,o=t-s.from,i=r-s.from;return Object.assign(Object.assign({},n.changeByRange(l=>l!=s&&t!=r&&n.sliceDoc(l.from+o,l.from+i)!=n.sliceDoc(t,r)?{range:l}:{changes:{from:l.from+o,to:r==s.from?l.to:l.from+i,insert:e},range:N.cursor(l.from+o+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const Mr=new WeakMap;function ql(n){if(!Array.isArray(n))return n;let e=Mr.get(n);return e||Mr.set(n,e=Kl(n)),e}const Gs=te.define(),Xn=te.define();class Jl{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=fe(e,t),s=Ne(r);this.chars.push(r);let o=e.slice(t,t+s),i=o.toUpperCase();this.folded.push(fe(i==o?o.toLowerCase():i,0)),t+=s}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:s,precise:o,byWord:i}=this;if(t.length==1){let C=fe(e,0),w=Ne(C),k=w==e.length?0:-100;if(C!=t[0])if(C==r[0])k+=-200;else return null;return this.ret(k,[0,w])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,c=0;if(l<0){for(let C=0,w=Math.min(e.length,200);C<w&&c<a;){let k=fe(e,C);(k==t[c]||k==r[c])&&(s[c++]=C),C+=Ne(k)}if(c<a)return null}let f=0,u=0,h=!1,p=0,m=-1,b=-1,v=/[a-z]/.test(e),E=!0;for(let C=0,w=Math.min(e.length,200),k=0;C<w&&u<a;){let y=fe(e,C);l<0&&(f<a&&y==t[f]&&(o[f++]=C),p<a&&(y==t[p]||y==r[p]?(p==0&&(m=C),b=C+1,p++):p=0));let A,S=y<255?y>=48&&y<=57||y>=97&&y<=122?2:y>=65&&y<=90?1:0:(A=hs(y))!=A.toLowerCase()?1:A!=A.toUpperCase()?2:0;(!C||S==1&&v||k==0&&S!=0)&&(t[u]==y||r[u]==y&&(h=!0)?i[u++]=C:i.length&&(E=!1)),k=S,C+=Ne(y)}return u==a&&i[0]==0&&E?this.result(-100+(h?-200:0),i,e):p==a&&m==0?this.ret(-200-e.length+(b==e.length?0:-100),[0,b]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[m,b]):u==a?this.result(-100+(h?-200:0)+-700+(E?0:-1100),i,e):t.length==2?null:this.result((s[0]?-700:0)+-200+-1100,s,e)}result(e,t,r){let s=[],o=0;for(let i of t){let l=i+(this.astral?Ne(fe(r,i)):1);o&&s[o-1]==i?s[o-1]=l:(s[o++]=i,s[o++]=l)}return this.ret(e-r.length,s)}}class Zl{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const ye=ee.define({combine(n){return $t(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Ql,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>Lr(e(r),t(r)),optionClass:(e,t)=>r=>Lr(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Lr(n,e){return n?e?n+" "+e:n:e}function Ql(n,e,t,r,s,o){let i=n.textDirection==Bt.RTL,l=i,a=!1,c="top",f,u,h=e.left-s.left,p=s.right-e.right,m=r.right-r.left,b=r.bottom-r.top;if(l&&h<Math.min(m,p)?l=!1:!l&&p<Math.min(m,h)&&(l=!0),m<=(l?h:p))f=Math.max(s.top,Math.min(t.top,s.bottom-b))-e.top,u=Math.min(400,l?h:p);else{a=!0,u=Math.min(400,(i?e.right:s.right-e.left)-30);let C=s.bottom-e.bottom;C>=b||C>e.top?f=t.bottom-e.top:(c="bottom",f=e.bottom-t.top)}let v=(e.bottom-e.top)/o.offsetHeight,E=(e.right-e.left)/o.offsetWidth;return{style:`${c}: ${f/v}px; max-width: ${u/E}px`,class:"cm-completionInfo-"+(a?i?"left-narrow":"right-narrow":l?"left":"right")}}function ea(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(s=>"cm-completionIcon-"+s)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,s,o){let i=document.createElement("span");i.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let c=0;c<o.length;){let f=o[c++],u=o[c++];f>a&&i.appendChild(document.createTextNode(l.slice(a,f)));let h=i.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(l.slice(f,u))),h.className="cm-completionMatchedText",a=u}return a<l.length&&i.appendChild(document.createTextNode(l.slice(a))),i},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function hn(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let s=Math.floor(e/t);return{from:s*t,to:(s+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class ta{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let s=e.state.field(t),{options:o,selected:i}=s.open,l=e.state.facet(ye);this.optionContent=ea(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=hn(o.length,i,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:c}=e.state.field(t).open;for(let f=a.target,u;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(u=/-(\d+)$/.exec(f.id))&&+u[1]<c.length){this.applyCompletion(e,c[+u[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(ye).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:Xn.of(null)})}),this.showOptions(o,s.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),s=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=s){let{options:o,selected:i,disabled:l}=r.open;(!s.open||s.open.options!=o)&&(this.range=hn(o.length,i,e.state.facet(ye).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),l!=((t=s.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=hn(t.options.length,t.selected,this.view.state.facet(ye).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:s}=r;if(!s)return;let o=typeof s=="string"?document.createTextNode(s):s(r);if(!o)return;"then"in o?o.then(i=>{i&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(i,r)}).catch(i=>as(this.view.state,i,"completion info")):this.addInfoPane(o,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:s,destroy:o}=e;r.appendChild(s),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,s=this.range.from;r;r=r.nextSibling,s++)r.nodeName!="LI"||!r.id?s--:s==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&ra(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),s=e.getBoundingClientRect(),o=this.space;if(!o){let i=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:i.innerWidth,bottom:i.innerHeight}}return s.top>Math.min(o.bottom,t.bottom)-10||s.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(ye).positionInfo(this.view,t,s,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const s=document.createElement("ul");s.id=t,s.setAttribute("role","listbox"),s.setAttribute("aria-expanded","true"),s.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let i=r.from;i<r.to;i++){let{completion:l,match:a}=e[i],{section:c}=l;if(c){let h=typeof c=="string"?c:c.name;if(h!=o&&(i>r.from||r.from==0))if(o=h,typeof c!="string"&&c.header)s.appendChild(c.header(c));else{let p=s.appendChild(document.createElement("completion-section"));p.textContent=h}}const f=s.appendChild(document.createElement("li"));f.id=t+"-"+i,f.setAttribute("role","option");let u=this.optionClass(l);u&&(f.className=u);for(let h of this.optionContent){let p=h(l,this.view.state,this.view,a);p&&f.appendChild(p)}}return r.from&&s.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&s.classList.add("cm-completionListIncompleteBottom"),s}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function na(n,e){return t=>new ta(t,n,e)}function ra(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),s=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/s:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/s)}function Or(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function sa(n,e){let t=[],r=null,s=c=>{t.push(c);let{section:f}=c.completion;if(f){r||(r=[]);let u=typeof f=="string"?f:f.name;r.some(h=>h.name==u)||r.push(typeof f=="string"?{name:u}:f)}},o=e.facet(ye);for(let c of n)if(c.hasResult()){let f=c.result.getMatch;if(c.result.filter===!1)for(let u of c.result.options)s(new Ir(u,c.source,f?f(u):[],1e9-t.length));else{let u=e.sliceDoc(c.from,c.to),h,p=o.filterStrict?new Zl(u):new Jl(u);for(let m of c.result.options)if(h=p.match(m.label)){let b=m.displayLabel?f?f(m,h.matched):[]:h.matched;s(new Ir(m,c.source,b,h.score+(m.boost||0)))}}}if(r){let c=Object.create(null),f=0,u=(h,p)=>{var m,b;return((m=h.rank)!==null&&m!==void 0?m:1e9)-((b=p.rank)!==null&&b!==void 0?b:1e9)||(h.name<p.name?-1:1)};for(let h of r.sort(u))f-=1e5,c[h.name]=f;for(let h of t){let{section:p}=h.completion;p&&(h.score+=c[typeof p=="string"?p:p.name])}}let i=[],l=null,a=o.compareCompletions;for(let c of t.sort((f,u)=>u.score-f.score||a(f.completion,u.completion))){let f=c.completion;!l||l.label!=f.label||l.detail!=f.detail||l.type!=null&&f.type!=null&&l.type!=f.type||l.apply!=f.apply||l.boost!=f.boost?i.push(c):Or(c.completion)>Or(l)&&(i[i.length-1]=c),l=c.completion}return i}class Ke{constructor(e,t,r,s,o,i){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=s,this.selected=o,this.disabled=i}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Ke(this.options,Br(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,s,o){let i=sa(e,t);if(!i.length)return s&&e.some(a=>a.state==1)?new Ke(s.options,s.attrs,s.tooltip,s.timestamp,s.selected,!0):null;let l=t.facet(ye).selectOnOpen?0:-1;if(s&&s.selected!=l&&s.selected!=-1){let a=s.options[s.selected].completion;for(let c=0;c<i.length;c++)if(i[c].completion==a){l=c;break}}return new Ke(i,Br(r,l),{pos:e.reduce((a,c)=>c.hasResult()?Math.min(a,c.from):a,1e8),create:ha,above:o.aboveCursor},s?s.timestamp:Date.now(),l,!1)}map(e){return new Ke(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class Vt{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new Vt(aa,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(ye),o=(r.override||t.languageDataAt("autocomplete",qe(t)).map(ql)).map(l=>(this.active.find(c=>c.source==l)||new re(l,this.active.some(c=>c.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((l,a)=>l==this.active[a])&&(o=this.active);let i=this.open;i&&e.docChanged&&(i=i.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!oa(o,this.active)?i=Ke.build(o,t,this.id,i,r):i&&i.disabled&&!o.some(l=>l.state==1)&&(i=null),!i&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new re(l.source,0):l));for(let l of e.effects)l.is(Ys)&&(i=i&&i.setSelected(l.value,this.id));return o==this.active&&i==this.open?this:new Vt(o,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?ia:la}}function oa(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let s=t==n.length,o=r==e.length;if(s||o)return s==o;if(n[t++].result!=e[r++].result)return!1}}const ia={"aria-autocomplete":"list"},la={};function Br(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const aa=[];function ca(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(Kn);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class re{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=ca(e,t),s=this;(r&8||r&16&&this.touches(e))&&(s=new re(s.source,0)),r&4&&s.state==0&&(s=new re(this.source,1)),s=s.updateFor(e,r);for(let o of e.effects)if(o.is(Gs))s=new re(s.source,1,o.value?qe(e.state):-1);else if(o.is(Xn))s=new re(s.source,0);else if(o.is(ua))for(let i of o.value)i.source==s.source&&(s=i);return s}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new re(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(qe(e.state))}}class at extends re{constructor(e,t,r,s,o){super(e,2,t),this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let s=this.result;s.map&&!e.changes.empty&&(s=s.map(s,e.changes));let o=e.changes.mapPos(this.from),i=e.changes.mapPos(this.to,1),l=qe(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>i||!s||t&2&&qe(e.startState)==this.from)return new re(this.source,t&4?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return fa(s.validFor,e.state,o,i)?new at(this.source,a,s,o,i):s.update&&(s=s.update(s,o,i,new Gl(e.state,l,a>=0)))?new at(this.source,a,s,s.from,(r=s.to)!==null&&r!==void 0?r:qe(e.state)):new re(this.source,1,a)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new at(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new re(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function fa(n,e,t,r){if(!n)return!1;let s=e.sliceDoc(t,r);return typeof n=="function"?n(s,t,r,e):$s(n,!0).test(s)}const ua=te.define({map(n,e){return n.map(t=>t.map(e))}}),Ys=te.define(),tt=We.define({create(){return Vt.start()},update(n,e){return n.update(e)},provide:n=>[ci.from(n,e=>e.tooltip),H.contentAttributes.from(n,e=>e.attrs)]});function Ks(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(tt).active.find(s=>s.source==e.source);return r instanceof at?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},Xl(n.state,t,r.from,r.to)),{annotations:Kn.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const ha=na(tt,Ks);function Et(n,e="option"){return t=>{let r=t.state.field(tt,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(ye).interactionDelay)return!1;let s=1,o;e=="page"&&(o=ai(t,r.open.tooltip))&&(s=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:i}=r.open.options,l=r.open.selected>-1?r.open.selected+s*(n?1:-1):n?0:i-1;return l<0?l=e=="page"?0:i-1:l>=i&&(l=e=="page"?i-1:0),t.dispatch({effects:Ys.of(l)}),!0}}const da=n=>{let e=n.state.field(tt,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(ye).interactionDelay?!1:Ks(n,e.open.options[e.open.selected])},pa=n=>n.state.field(tt,!1)?(n.dispatch({effects:Gs.of(!0)}),!0):!1,ma=n=>{let e=n.state.field(tt,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Xn.of(null)}),!0)},ga=H.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ya{constructor(e,t,r,s){this.field=e,this.line=t,this.from=r,this.to=s}}class qn{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,bn.TrackDel),r=e.mapPos(this.to,1,bn.TrackDel);return t==null||r==null?null:new qn(this.field,t,r)}}class Jn{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],s=[t],o=e.doc.lineAt(t),i=/^\s*/.exec(o.text)[0];for(let a of this.lines){if(r.length){let c=i,f=/^\t*/.exec(a)[0].length;for(let u=0;u<f;u++)c+=e.facet(Xt);s.push(t+c.length-f),a=c+a.slice(f)}r.push(a),t+=a.length+1}let l=this.fieldPositions.map(a=>new qn(a.field,s[a.line]+a.from,s[a.line]+a.to));return{text:r,ranges:l}}static parse(e){let t=[],r=[],s=[],o;for(let i of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(i);){let l=o[1]?+o[1]:null,a=o[2]||o[3]||"",c=-1,f=a.replace(/\\[{}]/g,u=>u[1]);for(let u=0;u<t.length;u++)(l!=null?t[u].seq==l:f&&t[u].name==f)&&(c=u);if(c<0){let u=0;for(;u<t.length&&(l==null||t[u].seq!=null&&t[u].seq<l);)u++;t.splice(u,0,{seq:l,name:f}),c=u;for(let h of s)h.field>=c&&h.field++}s.push(new ya(c,r.length,o.index,o.index+f.length)),i=i.slice(0,o.index)+a+i.slice(o.index+o[0].length)}i=i.replace(/\\([{}])/g,(l,a,c)=>{for(let f of s)f.line==r.length&&f.from>c&&(f.from--,f.to--);return a}),r.push(i)}return new Jn(r,s)}}let xa=$.widget({widget:new class extends Dn{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),ba=$.mark({class:"cm-snippetField"});class nt{constructor(e,t){this.ranges=e,this.active=t,this.deco=$.set(e.map(r=>(r.from==r.to?xa:ba).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let s=r.map(e);if(!s)return null;t.push(s)}return new nt(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const bt=te.define({map(n,e){return n&&n.map(e)}}),ka=te.define(),mt=We.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(bt))return t.value;if(t.is(ka)&&n)return new nt(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>H.decorations.from(n,e=>e?e.deco:$.none)});function Zn(n,e){return N.create(n.filter(t=>t.field==e).map(t=>N.range(t.from,t.to)))}function Ca(n){let e=Jn.parse(n);return(t,r,s,o)=>{let{text:i,ranges:l}=e.instantiate(t.state,s),a={changes:{from:s,to:o,insert:_n.of(i)},scrollIntoView:!0,annotations:r?[Kn.of(r),It.userEvent.of("input.complete")]:void 0};if(l.length&&(a.selection=Zn(l,0)),l.some(c=>c.field>0)){let c=new nt(l,0),f=a.effects=[bt.of(c)];t.state.field(mt,!1)===void 0&&f.push(te.appendConfig.of([mt,Ea,Na,ga]))}t.dispatch(t.state.update(a))}}function Xs(n){return({state:e,dispatch:t})=>{let r=e.field(mt,!1);if(!r||n<0&&r.active==0)return!1;let s=r.active+n,o=n>0&&!r.ranges.some(i=>i.field==s+n);return t(e.update({selection:Zn(r.ranges,s),effects:bt.of(o?null:new nt(r.ranges,s)),scrollIntoView:!0})),!0}}const va=({state:n,dispatch:e})=>n.field(mt,!1)?(e(n.update({effects:bt.of(null)})),!0):!1,wa=Xs(1),Sa=Xs(-1),Aa=[{key:"Tab",run:wa,shift:Sa},{key:"Escape",run:va}],Dr=ee.define({combine(n){return n.length?n[0]:Aa}}),Ea=us.highest(ii.compute([Dr],n=>n.facet(Dr)));function Hu(n,e){return Object.assign(Object.assign({},e),{apply:Ca(n)})}const Na=H.domEventHandlers({mousedown(n,e){let t=e.state.field(mt,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let s=t.ranges.find(o=>o.from<=r&&o.to>=r);return!s||s.field==t.active?!1:(e.dispatch({selection:Zn(t.ranges,s.field),effects:bt.of(t.ranges.some(o=>o.field>s.field)?new nt(t.ranges,s.field):null),scrollIntoView:!0}),!0)}}),gt={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Fe=te.define({map(n,e){let t=e.mapPos(n,-1,bn.TrackAfter);return t??void 0}}),Qn=new class extends li{};Qn.startSide=1;Qn.endSide=-1;const qs=We.define({create(){return cs.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(Fe)&&(n=n.update({add:[Qn.range(t.value,t.value+1)]}));return n}});function zu(){return[Pa,qs]}const dn="()[]{}<>";function Js(n){for(let e=0;e<dn.length;e+=2)if(dn.charCodeAt(e)==n)return dn.charAt(e+1);return hs(n<128?n:n+1)}function Zs(n,e){return n.languageDataAt("closeBrackets",e)[0]||gt}const Ta=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Pa=H.inputHandler.of((n,e,t,r)=>{if((Ta?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let s=n.state.selection.main;if(r.length>2||r.length==2&&Ne(fe(r,0))==1||e!=s.from||t!=s.to)return!1;let o=Ma(n.state,r);return o?(n.dispatch(o),!0):!1}),Ia=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=Zs(n,n.selection.main.head).brackets||gt.brackets,s=null,o=n.changeByRange(i=>{if(i.empty){let l=La(n.doc,i.head);for(let a of r)if(a==l&&Zt(n.doc,i.head)==Js(fe(a,0)))return{changes:{from:i.head-a.length,to:i.head+a.length},range:N.cursor(i.head-a.length)}}return{range:s=i}});return s||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!s},Uu=[{key:"Backspace",run:Ia}];function Ma(n,e){let t=Zs(n,n.selection.main.head),r=t.brackets||gt.brackets;for(let s of r){let o=Js(fe(s,0));if(e==s)return o==s?Da(n,s,r.indexOf(s+s+s)>-1,t):Oa(n,s,o,t.before||gt.before);if(e==o&&Qs(n,n.selection.main.from))return Ba(n,s,o)}return null}function Qs(n,e){let t=!1;return n.field(qs).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function Zt(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Ne(fe(t,0)))}function La(n,e){let t=n.sliceString(e-2,e);return Ne(fe(t,0))==t.length?t:t.slice(1)}function Oa(n,e,t,r){let s=null,o=n.changeByRange(i=>{if(!i.empty)return{changes:[{insert:e,from:i.from},{insert:t,from:i.to}],effects:Fe.of(i.to+e.length),range:N.range(i.anchor+e.length,i.head+e.length)};let l=Zt(n.doc,i.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+t,from:i.head},effects:Fe.of(i.head+e.length),range:N.cursor(i.head+e.length)}:{range:s=i}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Ba(n,e,t){let r=null,s=n.changeByRange(o=>o.empty&&Zt(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:N.cursor(o.head+t.length)}:r={range:o});return r?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function Da(n,e,t,r){let s=r.stringPrefixes||gt.stringPrefixes,o=null,i=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Fe.of(l.to+e.length),range:N.range(l.anchor+e.length,l.head+e.length)};let a=l.head,c=Zt(n.doc,a),f;if(c==e){if(_r(n,a))return{changes:{insert:e+e,from:a},effects:Fe.of(a+e.length),range:N.cursor(a+e.length)};if(Qs(n,a)){let h=t&&n.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+h.length,insert:h},range:N.cursor(a+h.length)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(f=Rr(n,a-2*e.length,s))>-1&&_r(n,f))return{changes:{insert:e+e+e+e,from:a},effects:Fe.of(a+e.length),range:N.cursor(a+e.length)};if(n.charCategorizer(a)(c)!=xn.Word&&Rr(n,a,s)>-1&&!_a(n,a,e,s))return{changes:{insert:e+e,from:a},effects:Fe.of(a+e.length),range:N.cursor(a+e.length)}}return{range:o=l}});return o?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function _r(n,e){let t=z(n).resolveInner(e+1);return t.parent&&t.from==e}function _a(n,e,t,r){let s=z(n).resolveInner(e,-1),o=r.reduce((i,l)=>Math.max(i,l.length),0);for(let i=0;i<5;i++){let l=n.sliceDoc(s.from,Math.min(s.to,s.from+t.length+o)),a=l.indexOf(t);if(!a||a>-1&&r.indexOf(l.slice(0,a))>-1){let f=s.firstChild;for(;f&&f.from==s.from&&f.to-f.from>t.length+a;){if(n.sliceDoc(f.to-t.length,f.to)==t)return!1;f=f.firstChild}return!0}let c=s.to==e&&s.parent;if(!c)break;s=c}return!1}function Rr(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=xn.Word)return e;for(let s of t){let o=e-s.length;if(n.sliceDoc(o,e)==s&&r(n.sliceDoc(o-1,o))!=xn.Word)return o}return-1}const Wu=[{key:"Ctrl-Space",run:pa},{key:"Escape",run:ma},{key:"ArrowDown",run:Et(!0)},{key:"ArrowUp",run:Et(!1)},{key:"PageDown",run:Et(!0,"page")},{key:"PageUp",run:Et(!1,"page")},{key:"Enter",run:da}],Ra=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=tr(n.state,t.from);return r.line?ja(n):r.block?Va(n):!1};function er(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(r(t.update(s)),!0):!1}}const ja=er(Ua,0),Fa=er(eo,0),Va=er((n,e)=>eo(n,e,za(e)),0);function tr(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const it=50;function Ha(n,{open:e,close:t},r,s){let o=n.sliceDoc(r-it,r),i=n.sliceDoc(s,s+it),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(i)[0].length,c=o.length-l;if(o.slice(c-e.length,c)==e&&i.slice(a,a+t.length)==t)return{open:{pos:r-l,margin:l&&1},close:{pos:s+a,margin:a&&1}};let f,u;s-r<=2*it?f=u=n.sliceDoc(r,s):(f=n.sliceDoc(r,r+it),u=n.sliceDoc(s-it,s));let h=/^\s*/.exec(f)[0].length,p=/\s*$/.exec(u)[0].length,m=u.length-p-t.length;return f.slice(h,h+e.length)==e&&u.slice(m,m+t.length)==t?{open:{pos:r+h+e.length,margin:/\s/.test(f.charAt(h+e.length))?1:0},close:{pos:s-p-t.length,margin:/\s/.test(u.charAt(m-1))?1:0}}:null}function za(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=t.to<=r.to?r:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function eo(n,e,t=e.selection.ranges){let r=t.map(o=>tr(e,o.from).block);if(!r.every(o=>o))return null;let s=t.map((o,i)=>Ha(e,r[i],o.from,o.to));if(n!=2&&!s.every(o=>o))return{changes:e.changes(t.map((o,i)=>s[i]?[]:[{from:o.from,insert:r[i].open+" "},{from:o.to,insert:" "+r[i].close}]))};if(n!=1&&s.some(o=>o)){let o=[];for(let i=0,l;i<s.length;i++)if(l=s[i]){let a=r[i],{open:c,close:f}=l;o.push({from:c.pos-a.open.length,to:c.pos+c.margin},{from:f.pos-f.margin,to:f.pos+a.close.length})}return{changes:o}}return null}function Ua(n,e,t=e.selection.ranges){let r=[],s=-1;for(let{from:o,to:i}of t){let l=r.length,a=1e9,c=tr(e,o).line;if(c){for(let f=o;f<=i;){let u=e.doc.lineAt(f);if(u.from>s&&(o==i||i>u.from)){s=u.from;let h=/^\s*/.exec(u.text)[0].length,p=h==u.length,m=u.text.slice(h,h+c.length)==c?h:-1;h<u.text.length&&h<a&&(a=h),r.push({line:u,comment:m,token:c,indent:h,empty:p,single:!1})}f=u.to+1}if(a<1e9)for(let f=l;f<r.length;f++)r[f].indent<r[f].line.text.length&&(r[f].indent=a);r.length==l+1&&(r[l].single=!0)}}if(n!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:c,empty:f,single:u}of r)(u||!f)&&o.push({from:l.from+c,insert:a+" "});let i=e.changes(o);return{changes:i,selection:e.selection.map(i,1)}}else if(n!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:i,comment:l,token:a}of r)if(l>=0){let c=i.from+l,f=c+a.length;i.text[f-i.from]==" "&&f++,o.push({from:c,to:f})}return{changes:o}}return null}const Nn=Rn.define(),Wa=Rn.define(),$a=ee.define(),to=ee.define({combine(n){return $t(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,s)=>e(r,s)||t(r,s)})}}),no=We.define({create(){return ke.empty},update(n,e){let t=e.state.facet(to),r=e.annotation(Nn);if(r){let a=Q.fromTransaction(e,r.selection),c=r.side,f=c==0?n.undone:n.done;return a?f=Ht(f,f.length,t.minDepth,a):f=oo(f,e.startState.selection),new ke(c==0?r.rest:f,c==0?f:r.rest)}let s=e.annotation(Wa);if((s=="full"||s=="before")&&(n=n.isolate()),e.annotation(It.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=Q.fromTransaction(e),i=e.annotation(It.time),l=e.annotation(It.userEvent);return o?n=n.addChanges(o,i,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,i,l,t.newGroupDelay)),(s=="full"||s=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new ke(n.done.map(Q.fromJSON),n.undone.map(Q.fromJSON))}});function $u(n={}){return[no,to.of(n),H.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?ro:e.inputType=="historyRedo"?Tn:null;return r?(e.preventDefault(),r(t)):!1}})]}function Qt(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let s=t.field(no,!1);if(!s)return!1;let o=s.pop(n,t,e);return o?(r(o),!0):!1}}const ro=Qt(0,!1),Tn=Qt(1,!1),Ga=Qt(0,!0),Ya=Qt(1,!0);class Q{constructor(e,t,r,s,o){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=s,this.selectionsAfter=o}setSelAfter(e){return new Q(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(s=>s.toJSON())}}static fromJSON(e){return new Q(e.changes&&fi.fromJSON(e.changes),[],e.mapped&&ui.fromJSON(e.mapped),e.startSelection&&N.fromJSON(e.startSelection),e.selectionsAfter.map(N.fromJSON))}static fromTransaction(e,t){let r=le;for(let s of e.startState.facet($a)){let o=s(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new Q(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,le)}static selection(e){return new Q(void 0,le,void 0,void 0,e)}}function Ht(n,e,t,r){let s=e+1>t+20?e-t-1:0,o=n.slice(s,e);return o.push(r),o}function Ka(n,e){let t=[],r=!1;return n.iterChangedRanges((s,o)=>t.push(s,o)),e.iterChangedRanges((s,o,i,l)=>{for(let a=0;a<t.length;){let c=t[a++],f=t[a++];l>=c&&i<=f&&(r=!0)}}),r}function Xa(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function so(n,e){return n.length?e.length?n.concat(e):n:e}const le=[],qa=200;function oo(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-qa));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),Ht(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Q.selection([e])]}function Ja(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function pn(n,e){if(!n.length)return n;let t=n.length,r=le;for(;t;){let s=Za(n[t-1],e,r);if(s.changes&&!s.changes.empty||s.effects.length){let o=n.slice(0,t);return o[t-1]=s,o}else e=s.mapped,t--,r=s.selectionsAfter}return r.length?[Q.selection(r)]:le}function Za(n,e,t){let r=so(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):le,t);if(!n.changes)return Q.selection(r);let s=n.changes.map(e),o=e.mapDesc(n.changes,!0),i=n.mapped?n.mapped.composeDesc(o):o;return new Q(s,te.mapEffects(n.effects,e),i,n.startSelection.map(o),r)}const Qa=/^(input\.type|delete)($|\.)/;class ke{constructor(e,t,r=0,s=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=s}isolate(){return this.prevTime?new ke(this.done,this.undone):this}addChanges(e,t,r,s,o){let i=this.done,l=i[i.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||Qa.test(r))&&(!l.selectionsAfter.length&&t-this.prevTime<s.newGroupDelay&&s.joinToEvent(o,Ka(l.changes,e.changes))||r=="input.type.compose")?i=Ht(i,i.length-1,s.minDepth,new Q(e.changes.compose(l.changes),so(e.effects,l.effects),l.mapped,l.startSelection,le)):i=Ht(i,i.length,s.minDepth,e),new ke(i,le,t,r)}addSelection(e,t,r,s){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:le;return o.length>0&&t-this.prevTime<s&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&Xa(o[o.length-1],e)?this:new ke(oo(this.done,e),this.undone,t,r)}addMapping(e){return new ke(pn(this.done,e),pn(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let s=e==0?this.done:this.undone;if(s.length==0)return null;let o=s[s.length-1],i=o.selectionsAfter[0]||t.selection;if(r&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Nn.of({side:e,rest:Ja(s),selection:i}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=s.length==1?le:s.slice(0,s.length-1);return o.mapped&&(l=pn(l,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Nn.of({side:e,rest:l,selection:i}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}ke.empty=new ke(le,le);const Gu=[{key:"Mod-z",run:ro,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Tn,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Tn,preventDefault:!0},{key:"Mod-u",run:Ga,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Ya,preventDefault:!0}];function rt(n,e){return N.create(n.ranges.map(e),n.mainIndex)}function Ce(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ue({state:n,dispatch:e},t){let r=rt(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Ce(n,r)),!0)}function en(n,e){return N.cursor(e?n.to:n.from)}function io(n,e){return ue(n,t=>t.empty?n.moveByChar(t,e):en(t,e))}function K(n){return n.textDirectionAt(n.state.selection.main.head)==Bt.LTR}const lo=n=>io(n,!K(n)),ao=n=>io(n,K(n));function co(n,e){return ue(n,t=>t.empty?n.moveByGroup(t,e):en(t,e))}const ec=n=>co(n,!K(n)),tc=n=>co(n,K(n));function nc(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function tn(n,e,t){let r=z(n).resolveInner(e.head),s=t?T.closedBy:T.openedBy;for(let a=e.head;;){let c=t?r.childAfter(a):r.childBefore(a);if(!c)break;nc(n,c,s)?r=c:a=t?c.to:c.from}let o=r.type.prop(s),i,l;return o&&(i=t?be(n,r.from,1):be(n,r.to,-1))&&i.matched?l=t?i.end.to:i.end.from:l=t?r.to:r.from,N.cursor(l,t?-1:1)}const rc=n=>ue(n,e=>tn(n.state,e,!K(n))),sc=n=>ue(n,e=>tn(n.state,e,K(n)));function fo(n,e){return ue(n,t=>{if(!t.empty)return en(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const uo=n=>fo(n,!1),ho=n=>fo(n,!0);function po(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,s;if(e){for(let o of n.state.facet(H.scrollMargins)){let i=o(n);i!=null&&i.top&&(t=Math.max(i==null?void 0:i.top,t)),i!=null&&i.bottom&&(r=Math.max(i==null?void 0:i.bottom,r))}s=n.scrollDOM.clientHeight-t-r}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function mo(n,e){let t=po(n),{state:r}=n,s=rt(r.selection,i=>i.empty?n.moveVertically(i,e,t.height):en(i,e));if(s.eq(r.selection))return!1;let o;if(t.selfScroll){let i=n.coordsAtPos(r.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,c=l.bottom-t.marginBottom;i&&i.top>a&&i.bottom<c&&(o=H.scrollIntoView(s.main.head,{y:"start",yMargin:i.top-a}))}return n.dispatch(Ce(r,s),{effects:o}),!0}const jr=n=>mo(n,!1),Pn=n=>mo(n,!0);function Le(n,e,t){let r=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?r.to:r.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==r.from&&r.length){let o=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(s=N.cursor(r.from+o))}return s}const oc=n=>ue(n,e=>Le(n,e,!0)),ic=n=>ue(n,e=>Le(n,e,!1)),lc=n=>ue(n,e=>Le(n,e,!K(n))),ac=n=>ue(n,e=>Le(n,e,K(n))),cc=n=>ue(n,e=>N.cursor(n.lineBlockAt(e.head).from,1)),fc=n=>ue(n,e=>N.cursor(n.lineBlockAt(e.head).to,-1));function uc(n,e,t){let r=!1,s=rt(n.selection,o=>{let i=be(n,o.head,-1)||be(n,o.head,1)||o.head>0&&be(n,o.head-1,1)||o.head<n.doc.length&&be(n,o.head+1,-1);if(!i||!i.end)return o;r=!0;let l=i.start.from==o.head?i.end.to:i.end.from;return N.cursor(l)});return r?(e(Ce(n,s)),!0):!1}const hc=({state:n,dispatch:e})=>uc(n,e);function ae(n,e){let t=rt(n.state.selection,r=>{let s=e(r);return N.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Ce(n.state,t)),!0)}function go(n,e){return ae(n,t=>n.moveByChar(t,e))}const yo=n=>go(n,!K(n)),xo=n=>go(n,K(n));function bo(n,e){return ae(n,t=>n.moveByGroup(t,e))}const dc=n=>bo(n,!K(n)),pc=n=>bo(n,K(n)),mc=n=>ae(n,e=>tn(n.state,e,!K(n))),gc=n=>ae(n,e=>tn(n.state,e,K(n)));function ko(n,e){return ae(n,t=>n.moveVertically(t,e))}const Co=n=>ko(n,!1),vo=n=>ko(n,!0);function wo(n,e){return ae(n,t=>n.moveVertically(t,e,po(n).height))}const Fr=n=>wo(n,!1),Vr=n=>wo(n,!0),yc=n=>ae(n,e=>Le(n,e,!0)),xc=n=>ae(n,e=>Le(n,e,!1)),bc=n=>ae(n,e=>Le(n,e,!K(n))),kc=n=>ae(n,e=>Le(n,e,K(n))),Cc=n=>ae(n,e=>N.cursor(n.lineBlockAt(e.head).from)),vc=n=>ae(n,e=>N.cursor(n.lineBlockAt(e.head).to)),Hr=({state:n,dispatch:e})=>(e(Ce(n,{anchor:0})),!0),zr=({state:n,dispatch:e})=>(e(Ce(n,{anchor:n.doc.length})),!0),Ur=({state:n,dispatch:e})=>(e(Ce(n,{anchor:n.selection.main.anchor,head:0})),!0),Wr=({state:n,dispatch:e})=>(e(Ce(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),wc=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),Sc=({state:n,dispatch:e})=>{let t=nn(n).map(({from:r,to:s})=>N.range(r,Math.min(s+1,n.doc.length)));return e(n.update({selection:N.create(t),userEvent:"select"})),!0},Ac=({state:n,dispatch:e})=>{let t=rt(n.selection,r=>{var s;let o=z(n).resolveStack(r.from,1);for(let i=o;i;i=i.next){let{node:l}=i;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&(!((s=l.parent)===null||s===void 0)&&s.parent))return N.range(l.to,l.from)}return r});return e(Ce(n,t)),!0},Ec=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=N.create([t.main]):t.main.empty||(r=N.create([N.cursor(t.main.head)])),r?(e(Ce(n,r)),!0):!1};function kt(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,s=r.changeByRange(o=>{let{from:i,to:l}=o;if(i==l){let a=e(o);a<i?(t="delete.backward",a=Nt(n,a,!1)):a>i&&(t="delete.forward",a=Nt(n,a,!0)),i=Math.min(i,a),l=Math.max(l,a)}else i=Nt(n,i,!1),l=Nt(n,l,!0);return i==l?{range:o}:{changes:{from:i,to:l},range:N.cursor(i,i<o.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(r.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?H.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Nt(n,e,t){if(n instanceof H)for(let r of n.state.facet(H.atomicRanges).map(s=>s(n)))r.between(e,e,(s,o)=>{s<e&&o>e&&(e=t?o:s)});return e}const So=(n,e,t)=>kt(n,r=>{let s=r.from,{state:o}=n,i=o.doc.lineAt(s),l,a;if(t&&!e&&s>i.from&&s<i.from+200&&!/[^ \t]/.test(l=i.text.slice(0,s-i.from))){if(l[l.length-1]=="	")return s-1;let c=Gt(l,o.tabSize),f=c%He(o)||He(o);for(let u=0;u<f&&l[l.length-1-u]==" ";u++)s--;a=s}else a=ft(i.text,s-i.from,e,e)+i.from,a==s&&i.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(i.text.slice(a-i.from,s-i.from))&&(a=ft(i.text,a-i.from,!1,!1)+i.from);return a}),In=n=>So(n,!1,!0),Ao=n=>So(n,!0,!1),Eo=(n,e)=>kt(n,t=>{let r=t.head,{state:s}=n,o=s.doc.lineAt(r),i=s.charCategorizer(r);for(let l=null;;){if(r==(e?o.to:o.from)){r==t.head&&o.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let a=ft(o.text,r-o.from,e)+o.from,c=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),f=i(c);if(l!=null&&f!=l)break;(c!=" "||r!=t.head)&&(l=f),r=a}return r}),No=n=>Eo(n,!1),Nc=n=>Eo(n,!0),Tc=n=>kt(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),Pc=n=>kt(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),Ic=n=>kt(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),Mc=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:_n.of(["",""])},range:N.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},Lc=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let s=r.from,o=n.doc.lineAt(s),i=s==o.from?s-1:ft(o.text,s-o.from,!1)+o.from,l=s==o.to?s+1:ft(o.text,s-o.from,!0)+o.from;return{changes:{from:i,to:l,insert:n.doc.slice(s,l).append(n.doc.slice(i,s))},range:N.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function nn(n){let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=n.doc.lineAt(r.to-1)),t>=s.number){let i=e[e.length-1];i.to=o.to,i.ranges.push(r)}else e.push({from:s.from,to:o.to,ranges:[r]});t=o.number+1}return e}function To(n,e,t){if(n.readOnly)return!1;let r=[],s=[];for(let o of nn(n)){if(t?o.to==n.doc.length:o.from==0)continue;let i=n.doc.lineAt(t?o.to+1:o.from-1),l=i.length+1;if(t){r.push({from:o.to,to:i.to},{from:o.from,insert:i.text+n.lineBreak});for(let a of o.ranges)s.push(N.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{r.push({from:i.from,to:o.from},{from:o.to,insert:n.lineBreak+i.text});for(let a of o.ranges)s.push(N.range(a.anchor-l,a.head-l))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:N.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Oc=({state:n,dispatch:e})=>To(n,e,!1),Bc=({state:n,dispatch:e})=>To(n,e,!0);function Po(n,e,t){if(n.readOnly)return!1;let r=[];for(let s of nn(n))t?r.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):r.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Dc=({state:n,dispatch:e})=>Po(n,e,!1),_c=({state:n,dispatch:e})=>Po(n,e,!0),Rc=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(nn(e).map(({from:s,to:o})=>(s>0?s--:o<e.doc.length&&o++,{from:s,to:o}))),r=rt(e.selection,s=>{let o;if(n.lineWrapping){let i=n.lineBlockAt(s.head),l=n.coordsAtPos(s.head,s.assoc||1);l&&(o=i.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,o)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function jc(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=z(n).resolveInner(e),r=t.childBefore(e),s=t.childAfter(e),o;return r&&s&&r.to<=e&&s.from>=e&&(o=r.type.prop(T.closedBy))&&o.indexOf(s.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const Fc=Io(!1),Vc=Io(!0);function Io(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:o,to:i}=s,l=e.doc.lineAt(o),a=!n&&o==i&&jc(e,o);n&&(o=i=(i<=l.to?l:e.doc.lineAt(i)).to);let c=new qt(e,{simulateBreak:o,simulateDoubleBreak:!!a}),f=Un(c,o);for(f==null&&(f=Gt(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));i<l.to&&/\s/.test(l.text[i-l.from]);)i++;a?{from:o,to:i}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let u=["",dt(e,f)];return a&&u.push(dt(e,c.lineIndent(l.from,-1))),{changes:{from:o,to:i,insert:_n.of(u)},range:N.cursor(o+1+u[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function nr(n,e){let t=-1;return n.changeByRange(r=>{let s=[];for(let i=r.from;i<=r.to;){let l=n.doc.lineAt(i);l.number>t&&(r.empty||r.to>l.from)&&(e(l,s,r),t=l.number),i=l.to+1}let o=n.changes(s);return{changes:s,range:N.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const Hc=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new qt(n,{overrideIndentation:o=>{let i=t[o];return i??-1}}),s=nr(n,(o,i,l)=>{let a=Un(r,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let c=/^\s*/.exec(o.text)[0],f=dt(n,a);(c!=f||l.from<o.from+c.length)&&(t[o.from]=a,i.push({from:o.from,to:o.from+c.length,insert:f}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},Mo=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(nr(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Xt)})}),{userEvent:"input.indent"})),!0),Lo=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(nr(n,(t,r)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let o=Gt(s,n.tabSize),i=0,l=dt(n,Math.max(0,o-He(n)));for(;i<s.length&&i<l.length&&s.charCodeAt(i)==l.charCodeAt(i);)i++;r.push({from:t.from+i,to:t.from+s.length,insert:l.slice(i)})}),{userEvent:"delete.dedent"})),!0),zc=n=>(n.setTabFocusMode(),!0),Uc=[{key:"Ctrl-b",run:lo,shift:yo,preventDefault:!0},{key:"Ctrl-f",run:ao,shift:xo},{key:"Ctrl-p",run:uo,shift:Co},{key:"Ctrl-n",run:ho,shift:vo},{key:"Ctrl-a",run:cc,shift:Cc},{key:"Ctrl-e",run:fc,shift:vc},{key:"Ctrl-d",run:Ao},{key:"Ctrl-h",run:In},{key:"Ctrl-k",run:Tc},{key:"Ctrl-Alt-h",run:No},{key:"Ctrl-o",run:Mc},{key:"Ctrl-t",run:Lc},{key:"Ctrl-v",run:Pn}],Wc=[{key:"ArrowLeft",run:lo,shift:yo,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:ec,shift:dc,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:lc,shift:bc,preventDefault:!0},{key:"ArrowRight",run:ao,shift:xo,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:tc,shift:pc,preventDefault:!0},{mac:"Cmd-ArrowRight",run:ac,shift:kc,preventDefault:!0},{key:"ArrowUp",run:uo,shift:Co,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Hr,shift:Ur},{mac:"Ctrl-ArrowUp",run:jr,shift:Fr},{key:"ArrowDown",run:ho,shift:vo,preventDefault:!0},{mac:"Cmd-ArrowDown",run:zr,shift:Wr},{mac:"Ctrl-ArrowDown",run:Pn,shift:Vr},{key:"PageUp",run:jr,shift:Fr},{key:"PageDown",run:Pn,shift:Vr},{key:"Home",run:ic,shift:xc,preventDefault:!0},{key:"Mod-Home",run:Hr,shift:Ur},{key:"End",run:oc,shift:yc,preventDefault:!0},{key:"Mod-End",run:zr,shift:Wr},{key:"Enter",run:Fc},{key:"Mod-a",run:wc},{key:"Backspace",run:In,shift:In},{key:"Delete",run:Ao},{key:"Mod-Backspace",mac:"Alt-Backspace",run:No},{key:"Mod-Delete",mac:"Alt-Delete",run:Nc},{mac:"Mod-Backspace",run:Pc},{mac:"Mod-Delete",run:Ic}].concat(Uc.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Yu=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:rc,shift:mc},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:sc,shift:gc},{key:"Alt-ArrowUp",run:Oc},{key:"Shift-Alt-ArrowUp",run:Dc},{key:"Alt-ArrowDown",run:Bc},{key:"Shift-Alt-ArrowDown",run:_c},{key:"Escape",run:Ec},{key:"Mod-Enter",run:Vc},{key:"Alt-l",mac:"Ctrl-l",run:Sc},{key:"Mod-i",run:Ac,preventDefault:!0},{key:"Mod-[",run:Lo},{key:"Mod-]",run:Mo},{key:"Mod-Alt-\\",run:Hc},{key:"Shift-Mod-k",run:Rc},{key:"Shift-Mod-\\",run:hc},{key:"Mod-/",run:Ra},{key:"Alt-A",run:Fa},{key:"Ctrl-m",mac:"Shift-Alt-m",run:zc}].concat(Wc),Ku={key:"Tab",run:Mo,shift:Lo},$c=(...n)=>e=>{n.forEach(t=>{if(typeof t=="function")t(e);else if(t){const r=t;r.current=e}})};function G(n){return new ol($n.define(n))}const $r=()=>D(()=>import("./pbl95wx6493wq92j.js"),[]).then(n=>G(n.shell)),Oo={[M.bash]:$r,[M.zsh]:$r,[M.swift]:()=>D(()=>import("./pijqfo56g5y7ss6b.js"),[]).then(n=>G(n.swift)),[M.css]:()=>D(()=>import("./dvk7x0xdt5uick4p.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.css()),[M.html]:()=>D(()=>import("./mck1y82xl91yl0wc.js"),__vite__mapDeps([25,1,0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26])).then(n=>n.html()),[M.javascript]:()=>D(()=>import("./fjoavygc0mozv20n.js"),__vite__mapDeps([26,1,7,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.javascript({jsx:!0,typescript:!1})),[M.typescript]:()=>D(()=>import("./fjoavygc0mozv20n.js"),__vite__mapDeps([26,1,7,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.javascript({jsx:!0,typescript:!0})),[M.json]:()=>D(()=>import("./iw6eikdd7w5geui8.js"),__vite__mapDeps([27,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.json()),[M.python]:()=>D(()=>import("./iuyzwum5kmlzqo9c.js"),__vite__mapDeps([28,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.python()),[M.sql]:()=>D(()=>import("./j6o9w2uanazp0m7r.js"),__vite__mapDeps([29,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.sql()),[M.go]:()=>D(()=>import("./fqn392x2qxsyg8av.js"),__vite__mapDeps([30,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.go()),[M.yaml]:()=>D(()=>import("./cpat5st2u74tspdk.js"),__vite__mapDeps([31,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.yaml()),[M.java]:()=>D(()=>import("./ni10axqjqcymid87.js"),__vite__mapDeps([32,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.java()),[M.rust]:()=>D(()=>import("./fpklwjevwagc7bw4.js"),__vite__mapDeps([33,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.rust()),[M.cpp]:()=>D(()=>import("./0hx2ejj1ex0ag5bj.js"),__vite__mapDeps([34,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.cpp()),[M.php]:()=>D(()=>import("./osbq56ootabni99s.js"),__vite__mapDeps([35,1,25,0,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26])).then(n=>n.php()),[M.xml]:()=>D(()=>import("./dem60z9c5nvmk633.js"),__vite__mapDeps([36,1,7,2,3,4,5,6,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24])).then(n=>n.xml()),[M.ruby]:()=>D(()=>import("./e4lhyu305wu0fcut.js"),[]).then(n=>G(n.ruby)),[M.haskell]:()=>D(()=>import("./bf6r3t2rw7f01so5.js"),[]).then(n=>G(n.haskell)),[M.kotlin]:()=>D(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>G(n.kotlin)),[M.csharp]:()=>D(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>G(n.csharp)),[M.c]:()=>D(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>G(n.c)),[M.objectivec]:()=>D(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>G(n.objectiveC)),[M.r]:()=>D(()=>import("./n0t2rpizlasjzcxa.js"),[]).then(n=>G(n.r)),[M.lua]:()=>D(()=>import("./harowmpdmpnd9wki.js"),[]).then(n=>G(n.lua)),[M.dart]:()=>D(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>G(n.dart)),[M.scala]:()=>D(()=>import("./rlk4qi7ndmxxmstb.js"),[]).then(n=>G(n.scala)),[M.perl]:()=>D(()=>import("./gq1ss5v2zpbborxl.js"),[]).then(n=>G(n.perl)),[M.commonlisp]:()=>D(()=>import("./jr6cjysmysifr6mr.js"),[]).then(n=>G(n.commonLisp)),[M.clojure]:()=>D(()=>import("./gf1tfl9d2himhfic.js"),[]).then(n=>G(n.clojure)),[M.ocaml]:()=>D(()=>import("./khji33iw1sxityyt.js"),[]).then(n=>G(n.oCaml)),[M.other]:()=>null},Gc=n=>n in Oo,Lt={},Xu=async n=>{if(Lt[n]!=null)return Lt[n];if(Gc(n)){const e=await Oo[n]();return Lt[n]=e,e}return null},qu=n=>Lt[n]??null;var Bo=n=>{var{theme:e,settings:t={},styles:r=[]}=n,s={".cm-gutters":{}},o={};t.background&&(o.backgroundColor=t.background),t.backgroundImage&&(o.backgroundImage=t.backgroundImage),t.foreground&&(o.color=t.foreground),t.fontSize&&(o.fontSize=t.fontSize),(t.background||t.foreground)&&(s["&"]=o),t.fontFamily&&(s["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(s[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(s[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(s[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(s[".cm-content"]={caretColor:t.caret},s[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var i={};t.gutterActiveForeground&&(i.color=t.gutterActiveForeground),t.lineHighlight&&(s[".cm-activeLine"]={backgroundColor:t.lineHighlight},i.backgroundColor=t.lineHighlight),s[".cm-activeLineGutter"]=i,t.selection&&(s["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(s["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var l=H.theme(s,{dark:e==="dark"}),a=xt.define(r),c=[l,Nl(a)];return c},Yc={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#f0f0f0",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Kc=[{tag:[d.keyword,d.operatorKeyword,d.modifier,d.color,d.constant(d.name),d.standard(d.name),d.standard(d.tagName),d.special(d.brace),d.atom,d.bool,d.special(d.variableName)],color:"#0000ff"},{tag:[d.moduleKeyword,d.controlKeyword],color:"#af00db"},{tag:[d.name,d.deleted,d.character,d.macroName,d.propertyName,d.variableName,d.labelName,d.definition(d.name)],color:"#0070c1"},{tag:d.heading,fontWeight:"bold",color:"#0070c1"},{tag:[d.typeName,d.className,d.tagName,d.number,d.changed,d.annotation,d.self,d.namespace],color:"#267f99"},{tag:[d.function(d.variableName),d.function(d.propertyName)],color:"#795e26"},{tag:[d.number],color:"#098658"},{tag:[d.operator,d.punctuation,d.separator,d.url,d.escape,d.regexp],color:"#383a42"},{tag:[d.regexp],color:"#af00db"},{tag:[d.special(d.string),d.processingInstruction,d.string,d.inserted],color:"#a31515"},{tag:[d.angleBracket],color:"#383a42"},{tag:d.strong,fontWeight:"bold"},{tag:d.emphasis,fontStyle:"italic"},{tag:d.strikethrough,textDecoration:"line-through"},{tag:[d.meta,d.comment],color:"#008000"},{tag:d.link,color:"#4078f2",textDecoration:"underline"},{tag:d.invalid,color:"#e45649"}];function Xc(n){var{theme:e="dark",settings:t={},styles:r=[]}=n||{};return Bo({theme:e,settings:is({},Yc,t),styles:[...Kc,...r]})}var Ju=Xc(),qc={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},Jc=[{tag:[d.keyword,d.operatorKeyword,d.modifier,d.color,d.constant(d.name),d.standard(d.name),d.standard(d.tagName),d.special(d.brace),d.atom,d.bool,d.special(d.variableName)],color:"#569cd6"},{tag:[d.controlKeyword,d.moduleKeyword],color:"#c586c0"},{tag:[d.name,d.deleted,d.character,d.macroName,d.propertyName,d.variableName,d.labelName,d.definition(d.name)],color:"#9cdcfe"},{tag:d.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[d.typeName,d.className,d.tagName,d.number,d.changed,d.annotation,d.self,d.namespace],color:"#4ec9b0"},{tag:[d.function(d.variableName),d.function(d.propertyName)],color:"#dcdcaa"},{tag:[d.number],color:"#b5cea8"},{tag:[d.operator,d.punctuation,d.separator,d.url,d.escape,d.regexp],color:"#d4d4d4"},{tag:[d.regexp],color:"#d16969"},{tag:[d.special(d.string),d.processingInstruction,d.string,d.inserted],color:"#ce9178"},{tag:[d.angleBracket],color:"#808080"},{tag:d.strong,fontWeight:"bold"},{tag:d.emphasis,fontStyle:"italic"},{tag:d.strikethrough,textDecoration:"line-through"},{tag:[d.meta,d.comment],color:"#6a9955"},{tag:d.link,color:"#6a9955",textDecoration:"underline"},{tag:d.invalid,color:"#ff0000"}];function Zc(n){var{theme:e="dark",settings:t={},styles:r=[]}=n||{};return Bo({theme:e,settings:is({},qc,t),styles:[...Jc,...r]})}var Zu=Zc(),Te=(n=>(n[n.up=-1]="up",n[n.down=1]="down",n))(Te||{}),zt=(n=>(n.COMMENT="comment",n.COMPOSER="composer",n))(zt||{}),U=(n=>(n.COLLAPSED="collapsed",n.EXPANDED="expanded",n))(U||{});const Do=([n,e],[t,r])=>{const s=n+e,o=t+r;return n<o&&t<s},Mn=([n,e])=>n+e,Qe=n=>{if(n.type===U.COLLAPSED)return[n.offsetY??0,0];const{offsetY:e,shiftY:t=0,height:r=0}=n,s=e+t;return t<0?[s,r+Math.abs(t)]:[s,r]},Qc=(n,e,t)=>{if(!Do(n,e))return null;const[r,s]=n,o=r+s,[i,l]=e,a=i+l,c=i-o,f=a-r;return t===Te.up?c:f};function _o(n,e){return e?n.getState(e)??null:null}function ef(n){return n.nodeSize-2}function tf(n,e){return e>=0&&e<=ef(n)}class Oe{constructor(e,t,r={}){this.match=e,this.match=e,this.handler=typeof t=="string"?nf(t):t,this.undoable=r.undoable!==!1,this.inCode=r.inCode||!1}}function nf(n){return function(e,t,r,s){let o=n;if(t[1]){let i=t[0].lastIndexOf(t[1]);o+=t[0].slice(i+t[1].length),r+=i;let l=r-s;l>0&&(o=t[0].slice(i-l,i)+o,r=s)}return e.tr.insertText(o,r,s)}}const rf=500;function Qu({rules:n}){let e=new ms({state:{init(){return null},apply(t,r){let s=t.getMeta(this);return s||(t.selectionSet||t.docChanged?null:r)}},props:{handleTextInput(t,r,s,o){return Gr(t,r,s,o,n,e)},handleDOMEvents:{compositionend:t=>{setTimeout(()=>{let{$cursor:r}=t.state.selection;r&&Gr(t,r.pos,r.pos,"",n,e)})}}},isInputRules:!0});return e}function Gr(n,e,t,r,s,o){if(n.composing)return!1;let i=n.state,l=i.doc.resolve(e),a=l.parent.textBetween(Math.max(0,l.parentOffset-rf),l.parentOffset,null,"")+r;for(let c=0;c<s.length;c++){let f=s[c];if(l.parent.type.spec.code){if(!f.inCode)continue}else if(f.inCode==="only")continue;let u=f.match.exec(a),h=u&&f.handler(i,u,e-(u[0].length-r.length),t);if(h)return f.undoable&&h.setMeta(o,{transform:h,from:e,to:t,text:r}),n.dispatch(h),!0}return!1}new Oe(/--$/,"");new Oe(/\.\.\.$/,"");new Oe(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"");new Oe(/"$/,"");new Oe(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"");new Oe(/'$/,"");function eh(n,e,t=null,r){return new Oe(n,(s,o,i,l)=>{let a=t instanceof Function?t(o):t,c=s.tr.delete(i,l),f=c.doc.resolve(i),u=f.blockRange(),h=u&&xi(u,e,a);if(!h)return null;c.wrap(u,h);let p=c.doc.resolve(i-1).nodeBefore;return p&&p.type==e&&bi(c.doc,i-1)&&(!r||r(o,p))&&c.join(i-1),c})}function sf(n,e,t=null){return new Oe(n,(r,s,o,i)=>{let l=r.doc.resolve(o),a=t instanceof Function?t(s):t;return l.node(-1).canReplaceWith(l.index(-1),l.indexAfter(-1),e)?r.tr.delete(o,i).setBlockType(o,o,e,a):null})}function rr(n,e,t,r={}){if(n==null)return null;const s=(Array.isArray(t)?t:[t]).filter(Wo),o=e.nodes[n].createAndFill(r,s);return o??null}const of={content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM(){return["p",0]}},lf="paragraph";class Ro extends Yt{unistNodeName(){return lf}static proseMirrorNodeName(){return"paragraph"}proseMirrorNodeSpec(){return of}unistNodeToProseMirrorNodes({schema:e,convertedChildren:t,attrs:r}){return rr(this.proseMirrorNodeName(),e,t,r)}proseMirrorNodeToUnistNodes(e,t){return[{type:this.unistNodeName(),children:t}]}}const af=(n,e,t,r)=>n.value?e.text(n.value,[e.marks.startend.create(t),...r??[]]):null;class cf extends Yt{unistNodeName(){return"text"}static proseMirrorNodeName(){return"text"}proseMirrorNodeSpec(){return{group:"inline"}}unistNodeToProseMirrorNodes({node:e,schema:t,attrs:r}){return af(e,t,r)}proseMirrorNodeToUnistNodes(e){return[{type:this.unistNodeName(),value:e.text??""}]}}class Xe extends Yt{static isAtStart(e,t){return e.selection.empty?t!==void 0?t.endOfTextblock("backward",e):e.selection.$anchor.parentOffset>0:!1}static headingLevelCommandBuilder(e,t,r){return(s,o,i)=>{if(r&&!Xe.isAtStart(s,i))return!1;const{$anchor:l}=s.selection,a=l.parent;if(a.type.name!=="heading")return!1;const c=a.attrs.level+t;if(c<0||c>6)return!1;if(o===void 0)return!0;const f=l.before(l.depth);return c>0?o(s.tr.setNodeMarkup(f,void 0,{level:c})):o(s.tr.setNodeMarkup(f,e.nodes.paragraph)),!0}}dependencies(){return[new Ro,new cf]}unistNodeName(){return"heading"}static proseMirrorNodeName(){return"heading"}proseMirrorNodeSpec(){return{attrs:{level:{default:1}},content:"text*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM(e){return["h"+e.attrs.level.toString(),0]}}}proseMirrorInputRules(e){return[sf(/^\s{0,3}(#{1,6})\s$/,e.nodes[this.proseMirrorNodeName()],t=>({level:t[1].length}))]}proseMirrorKeymap(e){const t={Tab:Xe.headingLevelCommandBuilder(e,1,!1),"#":Xe.headingLevelCommandBuilder(e,1,!0),"Shift-Tab":Xe.headingLevelCommandBuilder(e,-1,!1)};for(let r=1;r<=6;r++)t[`Shift-Mod-${r.toString()}`]=yi(e.nodes[this.proseMirrorNodeName()],{level:r});return t}unistNodeToProseMirrorNodes({node:e,schema:t,convertedChildren:r,attrs:s}){const{depth:o}=e;return rr(this.proseMirrorNodeName(),t,r,{...s,level:o})}proseMirrorNodeToUnistNodes(e,t){return[{type:this.unistNodeName(),depth:e.attrs.level,children:t}]}}class ff extends Yt{unistNodeName(){return"root"}static proseMirrorNodeName(){return"doc"}proseMirrorNodeSpec(){return{content:"block+"}}unistNodeToProseMirrorNodes({schema:e,convertedChildren:t,attrs:r}){return rr(this.proseMirrorNodeName(),e,t,r)}proseMirrorNodeToUnistNodes(e,t){return[{type:this.unistNodeName(),children:t}]}}function Ln(n,e,t=0,r=null){let s=!1;return n.forEach((o,i)=>{Ln(o,e,t+i+(n.type.name===ff.proseMirrorNodeName()?0:1),n)===!1&&(s=!0)}),s?s?!1:void 0:e(n,t,r)}function uf(n,e){const t=new Array(e.length).fill(-1),r=()=>!t.includes(-1);let s=!1;const o=(i,l)=>{var u;const a=hi(i);if(a==null)return;const{start:c,end:f}=a;for(let h=0;h<e.length;h++){const p=e[h];t[h]===-1&&(p>=c&&p<f&&(i.type.name!=="doc"||s)||p==f&&s||p<c&&p<f&&s&&p>=0)&&(p===f&&(t[h]=l+i.nodeSize),i.content.size===0&&(((u=i.text)==null?void 0:u.length)??0)===0?t[h]=l:t[h]=Math.min(l+Math.max(p-c,0),l+i.nodeSize))}if(r())return!1};Ln(n,o),s=!0,r()||Ln(n,o);for(let i=0;i<t.length;i++)t[i]===-1&&(e[i]<=0?t[i]=0:t[i]=n.nodeSize-2);return t}function hf(n,e){const t=mf(n);if(t.length===0)return e;let r=e;return t.forEach(s=>{r=df(s,r)}),r}function df(n,e){return di(e,{start:n.from,end:n.to},pf(n))}function pf(n){return n.slice.size-(n.to-n.from)}function mf(n){return n.steps.filter(e=>e instanceof ki)}const Ut=new Ci("comments");function Yr(n,e){const t=e.map(o=>o.at.start),r=e.map(o=>o.at.end),s=uf(n,[...t,...r]);return new Map(e.map((o,i)=>[o.id,{start:s[i],end:s[i+e.length]}]))}function gf(n,e){var o;const{type:t}=e;if(t===Pe.SELECTION){const{from:i,to:l}=e;return[i,l]}const{pos:r}=e,s=r+(((o=n.nodeAt(r))==null?void 0:o.nodeSize)??0);return[r,s]}const Kr=(n,e=null,t=null)=>{const r=[],s=Array.from(n.entries()).reverse();for(const[o,i]of s){const c=mi({isHovered:e===o,isFocused:t===o,isCode:!1});r.push(gs.inline(i.start,i.end,{class:c,"data-comment-id":o,nodeName:"span"}))}return r},th=n=>new ms({key:Ut,state:{init:(e,{doc:t})=>{const r=Yr(t,n);return{comments:n,commentingOn:null,hoveredOnBlock:null,hoveredCommentId:null,focusedCommentId:null,decorations:Kr(r),positions:r}},apply:(e,t)=>{const r=e.getMeta(Ut)??{},s=r.comments,o=s??t.comments,i=s!=null?Yr(e.doc,o):t.positions;let l=r.commentingOn;l===void 0&&(l=t.commentingOn);let a=r.hoveredCommentId;a===void 0&&(a=t.hoveredCommentId);let c=r.focusedCommentId;c===void 0&&(c=t.focusedCommentId);const f=hf(e,i);return{comments:pi(o,f),commentingOn:l,hoveredCommentId:a,focusedCommentId:c,decorations:Kr(f,a,c),positions:f}}},props:{handleClickOn:(e,t,r,s,o)=>{const{target:i}=o;if(i instanceof HTMLElement){const{commentId:l}=i.dataset;if(!l)return;X.focusComment(l)}},handleDOMEvents:{mouseover(e,t){const{target:r}=t;if(r instanceof HTMLElement){const{commentId:s}=r.dataset;s?X.mouseEnterComment(s):X.mouseLeaveComment()}}},decorations(e){const t=this.getState(e);if(!t)return fr.empty;const{commentingOn:r,decorations:s}=t,{doc:o}=e;if(r){const[i,l]=gf(o,r);i!=null&&l!=null&&s.push(gs.inline(i,l,{class:$o.document},{comment:{pattern:r}}))}return fr.create(o,s.concat())}}});function yf(n,e,t){const r=n+e;for(const s of t.values()){const o=s.start,i=s.end;if(n<i&&o<r)return!0}return!1}const xf=50,bf=200,kf=[Ro.proseMirrorNodeName(),Xe.proseMirrorNodeName()],Cf=n=>n?n.isBlock:!1,vf=n=>{if(!n)return!1;const{isBlock:e,type:{name:t}}=n;return e&&kf.includes(t)},wf=(n,e,t,r)=>{const s=n.posAtCoords({left:e,top:t});if(s==null)return;const{pos:o,inside:i}=s;if(i===-1)return;const{state:l}=n;let a=o,c=l.doc.nodeAt(a);for(;!Cf(c)&&a>=0;)a--,c=l.doc.nodeAt(a);if(!c||!vf(c))return;const f=r!=null&&yf(a,c.nodeSize,r);return{node:c,nodeHasComment:f,pos:a}};function Sf(n,e,t){const r=wf(n,e.x,e.y,t);if(r==null)return null;const{node:s,pos:o,nodeHasComment:i}=r,{top:l}=n.coordsAtPos(0);function a(){const p=o+1;if(tf(n.state.doc,p)){const m=n.state.doc.nodeAt(p);if(m!=null&&m.isText)return n.coordsAtPos(p).top}return n.coordsAtPos(o).top}const c=a(),f=c-l;return{height:n.coordsAtPos(o+s.nodeSize-1).bottom-c,nodeHasComment:i,mouseEnteredAt:Date.now(),yOffset:f,pos:o}}function Af(n){var c;const e=B.useRef(!1),t=B.useRef(!1),[r,s]=B.useState(null),o=gi(),i=(c=o())==null?void 0:c.dom,l=B.useCallback(Go(f=>{var y;e.current=!0;const u=Ve.getState().commentingOn;if(t.current||u!=null)return;const h=o();if(h==null||!e.current)return s(null);const{dom:p,state:m}=h,b=(y=_o(Ut,m))==null?void 0:y.positions;if(b==null)return s(null);const v=Sf(h,f,b);if(v==null||v.nodeHasComment&&n===ce.COLLAPSED){s(null);return}const E=h.coordsAtPos(0),C=p.getBoundingClientRect().width,k=(f.x-E.left)/C>=xf/100;s(k?v:null)},bf),[o]);B.useEffect(()=>{if(i!=null)return ls(i,{mouseenter:()=>{e.current=!0,t.current=!1},mouseleave:({relatedTarget:f})=>{if(l.cancel(),f instanceof HTMLElement&&f.closest("[data-block-comment-launcher]")){t.current=!0;return}t.current=!1,e.current=!1,Ve.getState().commentingOn==null&&s(null)},mousemove:l})},[o,i,n,l]);const a=B.useCallback(({relatedTarget:f})=>{const{commentingOn:u}=Ve.getState();u==null&&f!==i&&(t.current=!1,s(null))},[i]);return[r,a]}var Ef=Qo;function Nf(n){return typeof n=="function"?n:Ef}var Tf=Nf,Pf=ti,If=Tf,Mf=Yo,Lf=9007199254740991,mn=4294967295,Of=Math.min;function Bf(n,e){if(n=Mf(n),n<1||n>Lf)return[];var t=mn,r=Of(n,mn);e=If(e),n-=mn;for(var s=Pf(r,e);++t<n;)e(t);return s}var Df=Bf;const _f=ei(Df),Rf=n=>g.jsx(q.div,{className:"dark:bg-white-400 aspect-square rounded-full bg-gray-400",animate:{translateY:["0%","-50%","0%","0%","0%"]},style:{translateX:.5,width:3,height:3},transition:{repeat:1/0,type:"keyframes",delay:n/10,duration:.7}},n),jf=()=>g.jsx(q.div,{className:"grid h-full max-w-full flex-1 grid-cols-3 items-center gap-[0.4] p-1",children:_f(3,n=>Rf(n))});function Ff(n){switch(n){case"dark_gray":return{normal:"text-token-text-secondary dark:text-white-400",hover:"cursor-pointer hover:text-token-text-primary group-hover:text-token-text-primary"};case"light_gray":return{normal:"text-gray-400",hover:"cursor-pointer hover:text-token-text-secondary group-hover:text-token-text-secondary"}}}function sr({children:n,className:e,onClick:t,isClickable:r=!1,theme:s="dark_gray"}){const o=Ff(s),i=(t!=null||r)&&o.hover;return g.jsxs("div",{className:W("relative inline-block h-[20px] w-[20px] shrink-0 transition-opacity",e,i,o.normal),onClick:t,children:[n?g.jsx(wi,{className:"h-[20px] w-[20px] shrink-0"}):g.jsx(Si,{className:"h-[20px] w-[20px] shrink-0"}),g.jsx("span",{className:W("absolute inset-0 flex items-center justify-center text-[8px] font-black",i,o.normal),children:n})]})}function rn(){return g.jsx(sr,{theme:"light_gray",children:g.jsx(jf,{})})}function Vf({count:n,isLoading:e,onClick:t}){return e?g.jsx(rn,{}):g.jsx(sr,{onClick:t,theme:"dark_gray",children:n})}function Hf({isLoading:n=!1,onClick:e}){return n?g.jsx(rn,{}):g.jsx(sr,{isClickable:!0,onClick:e,theme:"light_gray"})}const Xr=360,zf=250,jo=44,qr=.5,Jr=[.5,.9,1],Uf=[1,.75,.2],Wf=({onClose:n,onSubmit:e,opensOverDocument:t=!1,opensFromGutter:r=!1,gutterHasComments:s=!1},o)=>{const i=On(),l=B.useRef(null),a=B.useRef(!1),[c,f]=B.useState(""),[u,h]=B.useState(!0),p=()=>{f(""),n==null||n(a.current)},m=(y=c)=>{a.current=!0,e==null||e(y),f("")},b=ni(({windowWidth:y})=>t?y<Xr+100?zf:Xr:Pt,0),v={};r&&(v.top=-12),t&&r?v.right=0:v.left=0;let E="";r&&!t?E="8px 50%":r&&t?E="calc(100% + 8px) 50%":t&&(E="center left");let C=0;r&&!t&&s&&(C=os);const w=y=>{const{metaKey:A,shiftKey:S,key:_}=y;_==="Enter"&&c&&!(S||A)?(m(),y.preventDefault()):_==="Escape"&&(f(""),n==null||n(!1))},k=i.formatMessage({id:"VvfbvY",defaultMessage:"Edit or explain..."});return g.jsx(q.div,{ref:$c(l,o),className:W("absolute flex items-center",we.commentComposer),style:{...v,minHeight:jo},transition:{type:"spring",bounce:.18,duration:.48},initial:{translateX:0},animate:{translateX:C},exit:{translateX:0},children:g.jsx(q.div,{className:W("no-scrollbar relative z-10 flex items-center overflow-x-hidden border border-token-border-light",ss,{"rounded-full":u,"rounded-2xl":!u}),initial:{width:t?Pt:24,scaleX:t?qr:void 0,scale:t?void 0:qr},animate:{width:b,scaleX:t?Jr:void 0,scale:t?void 0:Jr},exit:{filter:"blur(16px)",scale:t?void 0:Uf,width:t?Pt:24,opacity:t?0:[1,1,0]},transition:{type:"spring",bounce:t?.14:0,duration:.28,scale:{type:"tween",duration:.2},opacity:{type:"tween",time:[0,.95,1]}},style:{transformOrigin:E},children:g.jsxs(q.div,{className:"relative z-0 flex w-full items-center bg-token-main-surface-primary px-4 py-2.5",children:[g.jsx(q.div,{className:"backdrop-saturate-25 absolute inset-0 z-[-1] bg-gray-50/75 backdrop-blur-3xl dark:bg-gray-700/75",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",duration:.2}}),g.jsx(Ti,{"aria-placeholder":k,value:c,className:"w-full resize-none border-0 bg-transparent px-1 py-0 pr-2 text-token-text-primary outline-0 placeholder:text-token-text-secondary focus:ring-0 focus-visible:ring-0",autoFocus:!0,maxRows:4,onBlur:p,onHeightChange:(y,{rowHeight:A})=>{h(Math.floor(y/A)<=1)},onChange:({target:{value:y}})=>f(y),onKeyDown:w}),!c&&g.jsx("span",{"aria-hidden":!0,className:"absolute inline-block text-nowrap pl-1 text-token-text-secondary",children:k}),g.jsx(q.button,{className:W("-mr-1.5 h-6 w-6 rounded-full bg-black text-center dark:bg-white",{"self-end":!u}),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",duration:.1},onMouseDown:()=>m(),children:g.jsx(Ai,{className:"h-6 w-6 text-white dark:text-black"})})]})})})},Fo=B.forwardRef(Wf),$f=({isWaitingForCommentResponse:n=!1,opensOverDocument:e=!1,hasComments:t=!1,activeBlockComment:r,composerRef:s,onMouseLeave:o,onSubmit:i})=>{const[l,a]=B.useState(!1),{yOffset:c,height:f,pos:u}=r,h=()=>{a(!0),se.logButtonClick(Ye.BLOCK_COMMENT_LAUNCHER),X.startCommentingOn({type:Pe.BLOCK,pos:u})},p=v=>{v||(a(!1),X.cancelCommentingOn())},m=v=>{a(!1),i==null||i(v)};B.useEffect(()=>()=>{X.mouseLeaveBlock()},[]);const b=t&&l?e?-88:88:0;return g.jsx(q.div,{className:W("pointer-events-auto absolute flex h-6 w-5 origin-[14px_50%] items-start after:absolute after:-inset-4 after:content-['']",we.commentComposer),initial:!1,animate:{opacity:1},exit:{opacity:0},transition:{type:"spring",duration:.2,bounce:.1},style:{top:0,height:f,translateY:c},onMouseLeave:o,"data-block-comment-launcher":!0,children:g.jsxs(Ue,{children:[l?g.jsx(Fo,{ref:s,opensFromGutter:!0,onClose:p,onSubmit:m,gutterHasComments:t,opensOverDocument:e},"composer"):null,g.jsx(q.button,{initial:{opacity:0},animate:{opacity:l?0:1,translateX:b},transition:{duration:.15,translateX:{type:"spring",bounce:.18,duration:.48}},className:"group absolute z-10 flex h-6 gap-1 bg-transparent after:absolute after:-inset-y-4 after:-left-1 after:-right-4 after:content-['']",onClick:h,onMouseEnter:()=>X.mouseEnterBlock(u),onMouseLeave:()=>X.mouseLeaveBlock(),disabled:l||n,children:g.jsx(Hf,{isLoading:n})},"launcer")]})})},Gf=({isWaitingForCommentResponse:n=!1,isRequestActive:e=!1,hasComments:t=!1,composerRef:r,gutterMode:s,onAddComment:o})=>{const i=ds(),[l,a]=Af(s),c=f=>{if(!l||!i)return;const{doc:u}=i,{pos:h}=l,p=u.nodeAt(h);if(!p)return;const{attrs:{start:m,end:b}}=p;o==null||o(f,ps.ASK,{start:m,end:b},Pe.BLOCK)};return g.jsx(Ue,{children:l&&i&&(n||!e)&&g.jsx($f,{composerRef:r,isWaitingForCommentResponse:n,opensOverDocument:s===ce.COLLAPSED,activeBlockComment:l,hasComments:t,onSubmit:c,onMouseLeave:a},"launcher")})},Vo={type:"spring",bounce:.12,duration:.5},Yf=({count:n,offsetY:e,isLoading:t=!1,onClick:r})=>g.jsx(q.div,{className:W("absolute",we.collapsedComment),initial:{opacity:0},animate:{opacity:1},style:{translateY:e},transition:Vo,exit:{opacity:0},children:g.jsx(Vf,{count:n,isLoading:t,onClick:r})}),Kf=({isFocused:n,isHovered:e})=>{const t=n||e?"grow font-medium text-token-text-primary transition-colors":"grow font-medium text-token-text-secondary transition-colors",r=n||e?"opacity-100 transition":"opacity-75 transition";return g.jsxs(g.Fragment,{children:[g.jsx("div",{className:r,children:g.jsx("div",{className:"gizmo-bot-avatar rounded-full",children:g.jsx(Ko,{size:"gizmoConversation",iconName:"openai"})})}),g.jsx("span",{className:t,children:"ChatGPT"})]})},Xf=({comment:n,isFocused:e,isSomeCommentFocused:t,isHovered:r})=>g.jsx("div",{className:W("mt-2 text-token-text-primary transition-all",{"opacity-80":!e&&!t&&!r,"opacity-40":!e&&t&&!r}),children:n.content}),qf=({left:n,right:e,comment:t,disableAnimations:r=!1,onClick:s,onMouseEnter:o,onMouseLeave:i,onAccept:l,onDismiss:a,translateY:c,isFocused:f=!1,isSomeCommentFocused:u=!1,disableActions:h=!1,isHovered:p=!1},m)=>{const[b,v]=B.useState(!1),E=()=>{v(!0),o==null||o()},C=()=>{v(!1),i==null||i()},w=On(),k=f||b&&!u;return g.jsx(q.div,{ref:m,className:W("absolute",we.expandedComment,{"cursor-default":f,"cursor-pointer":!f,[we.expandedCommentFocused]:f,[we.expandedCommentHovered]:p}),style:{left:n,right:e},initial:r?!1:{translateY:c,scale:.85,opacity:0},animate:r?void 0:{translateY:c,scale:f?1:.97,opacity:1},exit:r?void 0:{scale:.85,opacity:0,filter:"blur(16px)"},transition:Vo,onClick:s,onMouseEnter:E,onMouseLeave:C,"data-comment-id":t.id,children:g.jsxs("div",{className:W("flex min-h-8 flex-col rounded-2xl border p-4 pt-2 text-left text-sm transition-all",{"border-transparent bg-gray-50 dark:bg-gray-800":!f&&!p,"border-token-border-light bg-token-main-surface-primary":p&&!f,"border-token-border-light bg-token-main-surface-primary shadow-xl":f||b&&!u}),style:{width:Pt},children:[g.jsxs("div",{className:"flex h-8 flex-row items-center gap-2.5",children:[g.jsx(Kf,{isFocused:f,isHovered:p}),g.jsx("button",{className:W("-mr-1 rounded-full bg-transparent p-1 text-token-text-secondary hover:bg-gray-100 hover:text-token-text-primary dark:hover:bg-gray-700",!h&&"cursor-pointer"),onClick:a,disabled:h,"aria-label":w.formatMessage({id:"fYDa3C",defaultMessage:"Dismiss comment"}),children:g.jsx(Ei,{className:"icon-sm"})})]}),g.jsx(Xf,{comment:t,isFocused:f,isHovered:p,isSomeCommentFocused:u}),g.jsx(Ue,{initial:!1,children:k&&g.jsx(q.div,{initial:r?!1:{opacity:0,height:0},animate:{opacity:1,height:"auto",transition:{opacity:{delay:.14,duration:.2},height:{bounce:0,duration:.2}}},exit:r?void 0:{opacity:0,height:0,transition:{opacity:{duration:.08},height:{bounce:0,duration:.2}}},className:"flex items-center justify-start",children:g.jsx("div",{className:"mt-2.5",children:g.jsx(ri,{color:"secondary",onClick:l,disabled:h,children:w.formatMessage({id:"WIW5OL",defaultMessage:"Apply"})})})})})]})})},Ho=B.forwardRef(qf),Jf=({offsetY:n,opensOverDocument:e=!1,disableActions:t=!1,isFocused:r=!1,isSomeCommentFocused:s=!1,onAccept:o,onClick:i,onDismiss:l,onMouseEnter:a,onMouseLeave:c,comment:f,isHovered:u=!1})=>{const h=B.useRef(null);return B.useEffect(()=>ls(document,{mousedown:({target:p})=>{var m;p instanceof HTMLElement&&!p.closest("[data-comment-id]")&&!((m=h.current)!=null&&m.contains(p))&&X.blurComment()}})),g.jsx(Ho,{ref:h,comment:f,disableActions:t,onAccept:o,onDismiss:l,onMouseEnter:a,onMouseLeave:c,isSomeCommentFocused:s,isHovered:u,onClick:i,translateY:n,isFocused:r,left:e?void 0:os,right:e?Xo:void 0})},Zf=({onAcceptComment:n,onDismissComment:e,disableActions:t=!1,entry:r,isGutterCollapsed:s=!1,isHovered:o=!1,isFocused:i=!1,isSomeCommentFocused:l=!1})=>{const{offsetY:a,type:c}=r,[f,u]=qo();let h=null;if(c===U.COLLAPSED)h=!i&&g.jsx(Yf,{offsetY:a,count:r.count,onClick:()=>{se.logButtonClick(Ye.COLLAPSED_COMMENT),X.focusComment(r.children[0])}},"collapsed");else{const{comment:p}=r;if(p==null||p.content===""||p.status===lr.DISMISSED)h=null;else if(p.status===lr.ACCEPT_INITIATED)h=g.jsx("div",{className:"absolute",style:{top:a},children:g.jsx(rn,{})},"loading");else{const{id:m}=p;h=g.jsx(Jf,{isSomeCommentFocused:l,isHovered:o,isFocused:i,offsetY:a,disableActions:t,onClick:()=>{se.logButtonClick(Ye.EXPANDED_COMMENT),X.focusComment(m)},onMouseEnter:()=>X.mouseEnterComment(m),onMouseLeave:()=>X.mouseLeaveComment(),comment:p,onAccept:()=>{se.logButtonClick(Ye.COMMENT_ACCEPT,{commentId:m}),n==null||n(m)},onDismiss:()=>{se.logButtonClick(Ye.COMMENT_DISMISS,{commentId:m}),e==null||e(m)},opensOverDocument:s},"expanded")}}return g.jsx(Ue,{onExitComplete:()=>u==null?void 0:u(),children:f&&h})},Zr=({onMeasureHeight:n,comment:e,isFocused:t=!1})=>{const[{height:r},s]=Wt();return B.useLayoutEffect(()=>{n==null||n(r)},[r]),g.jsx(Ho,{ref:s,comment:e,isFocused:t,disableAnimations:!0})},Qf=({comments:n,onMeasure:e,getStableCommentId:t})=>{const r=B.useRef(new Map),s=B.useRef(new Map),o=B.useRef(null),i=(l,a,c=!1)=>{a&&(c?s.current.set(t(l),a):r.current.set(t(l),a),o.current&&cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{e==null||e({focusedHeights:new Map(s.current),heights:new Map(r.current)}),o.current=null}))};return n!=null&&n.length?g.jsxs("div",{className:"pointer-events-none invisible fixed left-0 top-0 overflow-clip","aria-hidden":"true",children:[n.map(l=>g.jsx(Zr,{comment:l,onMeasureHeight:a=>i(l.id,a)},t(l.id))),n.map(l=>g.jsx(Zr,{isFocused:!0,comment:l,onMeasureHeight:a=>i(l.id,a,!0)},`${t(l.id)}-focused`))]}):null},Qr=(n,e,t)=>{let r=t+e;for(;e===Te.down?r<n.length:r>-1;){const s=n[r],o=n[r-e],i=Qc(Qe(s),Qe(o),e);if(i!=null&&s.type!==U.COLLAPSED)s.shiftY+=i;else break;r+=e}},es=(n,e)=>{for(const t of e){const{index:r,amount:s}=t,o=n[r];o.type===U.EXPANDED&&(o.shiftY+=s),Qr(n,Te.down,r),Qr(n,Te.up,r);for(const i of n)i.type!==U.COLLAPSED&&(i.offsetY+=i.shiftY,i.shiftY=0)}},eu=(n,e)=>{const t=[],[r,s]=e,o=r+s;for(let i=0;i<n.length;i++){const l=n[i],[a]=Qe(l),c=[a,l.type===U.EXPANDED?l.height:0],[f,u]=c;if(Do(c,e)){const h=f+u,p=r-h,m=o-f,v=(Math.abs(p)<Math.abs(m)?Te.up:Te.down)===Te.up?p:m;t.push({index:i,amount:v})}}return t},tu=({gutterMode:n,focusedCommentId:e,gutterPositions:t,getCommentKey:r,getComment:s})=>{var f,u,h;if(!(t!=null&&t.size))return[];const o=new Map,i=[];let l=null,a=-1;for(const p of t.values()){if(p.type===zt.COMPOSER){l=[p.offsetY,p.height];continue}const{commentId:m,height:b,collapsedOffsetY:v,offsetY:E}=p;if(n===ce.EXPANDED){const k=yn(i),y=k?Mn(Qe(k)):0;let A=E;k&&A<=y&&(A=y),o.set(m,{originalOffsetY:E,offsetY:A}),e===m&&(a=i.length),i.push({key:r(m),comment:s(m),type:U.EXPANDED,height:b,offsetY:A,shiftY:0});continue}let C=i.findIndex(({offsetY:k,type:y})=>y===U.COLLAPSED&&k===v),w=i[C]??null;if(!w)w={key:i.length,type:U.COLLAPSED,offsetY:E,count:1,children:[m]},C=i.length,i.push(w);else{if(w.type!==U.COLLAPSED)throw new Error("Collapsed parent type expected to be collapsed");w.count+=1,w.children.push(m),w.offsetY=v}e===m&&(a=C)}const c=i[a];if(n===ce.COLLAPSED&&(c==null?void 0:c.type)===U.COLLAPSED){const p=[];for(let m=0;m<c.children.length;m++){const b=c.children[m];b===e&&(a+=m+1);const v=yn(p),E=v?Mn(Qe(v)):0,C=((f=t.get(b))==null?void 0:f.offsetY)??0,w=Math.max(E,C);o.set(b,{originalOffsetY:C,offsetY:w}),p.push({type:U.EXPANDED,key:r(b),comment:s(b),offsetY:w,height:((u=t.get(b))==null?void 0:u.height)??0,shiftY:0})}i.splice(a,0,...p)}if(e){const p=o.get(e);if(!p)return i;const{offsetY:m,originalOffsetY:b}=p,v=b-m,E=[{amount:v,index:a}];let C=a+1;for(;C<i.length;){const w=i[C],{type:k}=w;let y=v;if(k===U.EXPANDED&&((h=w.comment)!=null&&h.id)){const{offsetY:A,originalOffsetY:S}=Ot(o.get(w.comment.id));if(A===S)break;y=Math.max(S-A,v)}else break;E.push({amount:y,index:C}),C++}E.length&&es(i,E)}else if(n!==ce.COLLAPSED&&l){const p=eu(i,l);es(i,p)}return i},nu=n=>{try{return tu(n)}catch(e){return se.logError("Generating comment gutter entries",e),[]}};function ct(n,e){return Ot(n.coordsAtPos(e))}const ru=n=>"length"in n?n.length===0:n.nodeSize===0,gn=12,su=({composerHeight:n,getCommentHeight:e,getCollapsedStartPos:t,commentingOn:r,commentPositions:s,view:o})=>{if(!s||!o||ru(o.state.doc))return null;const{top:i}=o.dom.getBoundingClientRect(),l=Array.from(s.entries()).sort(([c,f],[u,h])=>f.start-h.start),a=new Map;for(const[c,{start:f}]of l)try{const u=(t==null?void 0:t(f))??f,{top:h}=ct(o,u),{top:p}=ct(o,f),m=p-i,b=h-i,v=(e(c)??0)+gn;a.set(c,{commentId:c,height:v,collapsedOffsetY:b,offsetY:m,type:zt.COMMENT})}catch{continue}if((r==null?void 0:r.type)===Pe.BLOCK){const{pos:c}=r;try{const{top:f}=ct(o,c),h=f-i-gn;a.set("block-composer",{type:zt.COMPOSER,height:(n??0)+gn,offsetY:h})}catch{}}return a},zo=(n,e)=>{const t=e.nodeAt(n);return t!=null&&t.isBlock?n+1:zo(n-1,e)};function ou(n){const e=ds(),t=jn(),r=t==null?void 0:t();if(!r)return null;if(Kt(r)){if(!e)return null;const s=_o(Ut,e);return s?s.positions:null}return new Map(n.map(s=>[s.id,s.at]))}const iu=({gutterMode:n,focusedCommentId:e,commentingOn:t,comments:r,getStableId:s})=>{const[{height:o},i]=Wt(),l=jn(),[a,c]=B.useState(()=>new Map),[f,u]=B.useState(()=>new Map),h=B.useCallback(({focusedHeights:k,heights:y})=>{c(k),u(y)},[]),p=k=>{const y=s(k);return k===e?a.get(y)??0:f.get(y)??0},m=l(),b=m!=null&&Kt(m)?k=>zo(k,m.state.doc):void 0,v=new Map(r==null?void 0:r.map(k=>[s(k.id),k])),E=ou(r),C=su({composerHeight:o,commentingOn:t,getCommentHeight:p,getCollapsedStartPos:b,commentPositions:E,view:m}),w=nu({gutterMode:n,gutterPositions:C,focusedCommentId:e,getComment:k=>v.get(s(k))??null,getCommentKey:s});return{blockComposerRef:i,onMeasureComments:h,gutterEntries:w}},lu=n=>g.jsx("div",{className:"absolute",style:{top:Mn(Qe(n))},children:g.jsx("div",{className:"h-[max(3rem,18vh)] w-1"})}),nh=({availableWidth:n,comments:e,disableBlockComments:t=!1,isRequestActive:r=!1,isWaitingForCommentResponse:s=!1,onAddComment:o,onAcceptComment:i,onDismissComment:l,getStableCommentId:a})=>{const c=Ve(({focusedCommentId:A})=>A),f=Ve(({hoveredCommentId:A})=>A),u=Ve(({commentingOn:A})=>A),h=n<ar?ce.COLLAPSED:ce.EXPANDED,{onMeasureComments:p,blockComposerRef:m,gutterEntries:b}=iu({comments:e,getStableId:a,gutterMode:h,focusedCommentId:c,commentingOn:u}),v=b.length>0,E=u!=null&&!s&&u.type!=="selection"||v,w=(()=>{if(!E)return 0;switch(h){case ce.COLLAPSED:return n/2>32?0:32;case ce.EXPANDED:return ar}})(),k=(u==null?void 0:u.type)==="selection",y=yn(b);return g.jsxs(q.div,{className:W("pointer-events-none relative flex h-full flex-shrink-0",we.commentGutter,h===ce.COLLAPSED&&w?"basis-[32px]":"basis-0"),initial:{width:0,opacity:0},animate:{width:w,opacity:1},exit:{width:0,opacity:0},children:[g.jsx(Qf,{getStableCommentId:a,comments:e,onMeasure:p}),g.jsxs("div",{className:W("pointer-events-auto absolute bottom-0 left-0 top-0 w-0 overflow-visible",{"pl-2":E}),children:[g.jsx(Ue,{children:b.map(A=>{var P,I;const{key:S,type:_}=A,R=!!c&&_===U.EXPANDED&&((P=A.comment)==null?void 0:P.id)===c,L=!!c&&A.type===U.COLLAPSED&&A.children.includes(c);return g.jsx(Zf,{isGutterCollapsed:h===ce.COLLAPSED,isSomeCommentFocused:!!u||!!c,isHovered:_===U.EXPANDED&&((I=A.comment)==null?void 0:I.id)===f,isFocused:R||L,entry:A,disableActions:r||s,onAcceptComment:j=>{try{i==null||i(Ot(e==null?void 0:e.find(O=>O.id===j)))}catch(O){se.logError(`Comment ${j} not found`,O)}},onDismissComment:j=>{try{l==null||l(Ot(e==null?void 0:e.find(O=>O.id===j)))}catch(O){se.logError(`Comment ${j} not found`,O)}}},S)})}),v&&y&&g.jsx(lu,{...y}),!k&&!t&&g.jsx(Gf,{composerRef:m,gutterMode:h,onAddComment:o,isWaitingForCommentResponse:s,isRequestActive:r,hasComments:v})]})]})},au=et.ol`m-0 w-fit flex-shrink min-w-0 flex items-center border border-token-border-light rounded-xl h-10 bg-token-main-surface-primary overflow-hidden`,ts=et.li`m-0 list-none group h-full`,cu=et.button`flex items-center gap-1 h-full px-2.5 rounded-lg hover:bg-[#f5f5f5] dark:hover:bg-token-main-surface-secondary`,fu=et.div`text-token-text-primary`,uu=et.span`text-sm text-token-text-primary truncate`;var hu=(n=>(n.CODE="code",n.WRITING="writing",n))(hu||{});const sn=({children:n,toolbarType:e})=>g.jsx(au,{className:W(ss,e==="code"?"p-0":"p-1"),children:n}),du=({label:n,tooltip:e,icon:t,onClick:r})=>{const s=g.jsxs(cu,{onClick:r,children:[g.jsx(fu,{children:g.jsx(t,{className:W("icon-sm",{"mr-0.5 text-token-text-tertiary":n,"text-token-text-primary":!n})})}),n&&g.jsx(uu,{children:n})]});return e?g.jsx(ts,{children:g.jsx(Jo,{label:e,side:"top",children:s})}):g.jsx(ts,{children:s})};sn.Separator=et.li`mx-1 p-0 list-none h-full w-[1px] bg-token-border-light`;sn.Action=du;var Uo=(n=>(n.ABOVE="above",n.BELOW="below",n))(Uo||{});const ns=(n,e)=>{if((e==null?void 0:e.type)!==Pe.SELECTION)return null;try{const{from:t,to:r}=e,{top:s}=n.dom.getBoundingClientRect(),{bottom:o,top:i}=ct(n,t),{bottom:l}=ct(n,r),a=Kt(n)?-30:-24;let c=o-s+a;const f=i-s;return c=l-s+8,{composerTop:c,loadingTop:f}}catch(t){return se.logError("Invalid position in SelectionCommentComposer",t),null}},pu=({toolbarPosition:n,composerRect:e,commentingOn:t,view:r})=>{var h;let{width:s,height:o}=e;if(o||(o=jo),r==null)return null;if(n==null)return ns(r,t);const{right:i}=r.dom.getBoundingClientRect(),{left:l,top:a,aboveOrBelow:c,toolbarSize:f}=n,u=a-(c===Uo.ABOVE&&o!==0?o-f.height:0);return{left:Math.min(l,i-s),composerTop:u,loadingTop:((h=ns(r,t))==null?void 0:h.loadingTop)??a,aboveOrBelow:c}},mu=({toolbarPosition:n,commentingOn:e,isWaitingForCommentResponse:t=!1,onAddComment:r})=>{const s=jn()(),[o,i]=Wt(),l=pu({commentingOn:e,view:s,toolbarPosition:n,composerRect:o});if(s==null||l==null)return null;const{left:a,composerTop:c,loadingTop:f}=l,u=h=>{if((e==null?void 0:e.type)!==Pe.SELECTION)return;const{action:p,sourceRange:m}=e;r==null||r(h,p,m,e.type)};return g.jsx(Ue,{children:(e==null?void 0:e.type)===Pe.SELECTION&&(t?g.jsx(q.div,{className:"absolute",style:{top:f},initial:!1,animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{delay:.2},children:g.jsx(rn,{})},"loading"):g.jsx("div",{className:W("absolute",we.commentComposer),style:{left:a,top:c},children:g.jsx(Fo,{opensOverDocument:!0,onClose:h=>{var p;h||(X.cancelCommentingOn(),s&&Kt(s)&&!s.state.selection.empty&&s.dispatch(s.state.tr.setSelection(new vi(s.state.selection.$from))),(p=document.getSelection())==null||p.removeAllRanges())},onSubmit:u,ref:i})},"composer"))})},gu=({getSelectionRange:n})=>{const e=On(),t=()=>{const r=n();if(r==null)return;const{from:s,to:o,sourceFrom:i,sourceTo:l}=r;if(s==null||o==null||i==null||l==null){se.logError("Missing selection range on targeted edit",r);return}const a=ps.ASK;se.logButtonClick(Ye.TOOLBAR_ASK_CHATGPT,{action:a,sourceFrom:i,sourceTo:l}),X.startCommentingOn({type:Pe.SELECTION,from:s,to:o,sourceRange:{start:i,end:l},action:a})};return g.jsx(sn.Action,{label:e.formatMessage({id:"wOaJUU",defaultMessage:"Ask ChatGPT"}),onClick:t,icon:Ni})},rh=({getEditorDom:n,getToolbarPosition:e,getSelectionRange:t,toolbarType:r,children:s,onAddComment:o,isWaitingForCommentResponse:i=!1})=>{const[{height:l,width:a},c]=Wt(),[f,u]=B.useState(!0),[h,p]=B.useState(!1),m=n(),b=Ve(({commentingOn:k})=>k),[v,E]=B.useState(null),C=B.useCallback(()=>{const k=n(),y=document.getSelection();return!y||y.type!=="Range"||y.isCollapsed||!(k!=null&&k.contains(y.anchorNode))},[n]);B.useEffect(()=>{const k=rs(()=>{p(!0)},200,{leading:!0}),y=()=>{k.cancel(),p(!1)};return m==null||m.addEventListener("pointerdown",k,{passive:!0}),document.addEventListener("pointerup",y,{passive:!0}),()=>{m==null||m.removeEventListener("pointerdown",k),document.removeEventListener("pointerup",y)}},[m]),B.useEffect(()=>{const k=()=>{u(C())};return document.addEventListener("selectionchange",k,{passive:!0}),()=>{document.removeEventListener("selectionchange",k)}},[C]),B.useLayoutEffect(()=>{if(f||C())return u(!0);try{const k=e({width:a,height:l});k!=null&&E(k)}catch(k){se.logError("Invalid position in getToolbarPosition",k)}},[l,a,f,C,e]);const w=g.jsxs(sn,{toolbarType:r,children:[g.jsx(gu,{getSelectionRange:t}),s]});return g.jsxs(g.Fragment,{children:[g.jsx("div",{"aria-hidden":"true",className:"pointer-events-none invisible fixed left-0 top-0 h-0 overflow-clip",children:g.jsx("div",{ref:c,children:w})}),g.jsx(Ue,{children:!f&&!b&&v!=null&&g.jsx(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:h?0:1,scale:h?.95:1},style:{top:v.top,left:v.left},exit:{opacity:0,scale:.95},transition:{type:"spring",bounce:.1,duration:.1,delay:h?0:.1},className:W("absolute",we.toolbar,h?"pointer-events-none":"pointer-events-auto"),children:w})}),g.jsx(mu,{toolbarPosition:v,commentingOn:b,isWaitingForCommentResponse:i,onAddComment:o})]})};let Tt=null;function sh(){if(Tt!=null)return Tt;if(typeof window>"u")return 0;const n=document.createElement("div");n.style.width="100px",n.style.height="100px",n.style.overflow="scroll",n.style.position="absolute",n.style.top="-9999px",document.body.appendChild(n);try{Tt=n.offsetWidth-n.clientWidth}finally{document.body.removeChild(n)}return Tt}function oh(n){return n==null?null:n.scrollHeight>n.clientHeight}export{Oe as $,Ru as A,Uu as B,Yu as C,Oi as D,_u as E,Wu as F,Gu as G,Ku as H,V as I,Au as J,ju as K,wn as L,Zc as M,Fn as N,Ju as O,ks as P,$c as Q,Xu as R,rh as S,F as T,hu as U,Uo as V,oh as W,nh as X,sh as Y,eh as Z,rr as _,J as a,cf as a0,sf as a1,af as a2,of as a3,lf as a4,Ro as a5,Xe as a6,ff as a7,Qu as a8,uf as a9,Xc as aa,qu as ab,Zu as ac,Bu as ad,tf as ae,th as af,_o as ag,Ut as ah,ef as ai,ru as aj,sn as ak,T as b,ol as c,Kl as d,il as e,Ou as f,ml as g,z as h,Vu as i,Du as j,Tu as k,_l as l,Hu as m,Lu as n,Mu as o,Pu as p,nl as q,ws as r,Ji as s,d as t,Eu as u,Nu as v,$u as w,zu as x,Nl as y,Fu as z};
//# sourceMappingURL=f5bxc5nxf4tg9y8c.js.map
