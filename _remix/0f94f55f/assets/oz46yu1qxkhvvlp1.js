const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/i9se2v4v0vls6je7.js","assets/cbv020t7gzp4f872.js","assets/kq3cjnjkkiu42wsi.js","assets/root-bcm2adyk.css"])))=>i.map(i=>d[i]);
import{dH as c,aw as u,Z as S,aE as b,br as f,r as l}from"./cbv020t7gzp4f872.js";import{d as y,a as m,T as w}from"./lw9lle2awfx0m3zh.js";import{d as g}from"./gpe91l6ql3o0s610.js";async function d(e){const t=await b(()=>import("./i9se2v4v0vls6je7.js").then(a=>a.i),__vite__mapDeps([0,1,2,3]));if(f!=null&&(e!=null&&e.startsWith(f)))return!0;try{return t.get(new URL(e??"").hostname)==="openai.com"}catch{return!1}}function D(e,t){const a=c();return u({queryKey:["safe-url",{serverThreadId:e,url:t,isHistoryAndTrainingDisabled:a}],queryFn:async()=>{var s;return await d(t)||(s=w.getThreadSafeUrls(e))!=null&&s.includes(t)?{safe:!0}:S.getConversationSafeUrls(e,t,a)},enabled:e!=null&&t!=null})}function q(e,t,a=!0){const s=y(o=>e!=null&&t!=null&&m.isThreadUrlSafe(e,t,o)),{data:{safe:i}={}}=D(e,s?void 0:t);return s||i||!a?t:void 0}function C(e,t){const[a,s]=l.useState(void 0),[i]=l.useState(()=>g(o=>{s(o)},t));return l.useEffect(()=>{i(e)},[i,e]),a===e?e:void 0}function F(e,t){const a=c(),s=y(o=>{var r;return e==null?[]:((r=m.getThread(e,o))==null?void 0:r.safeUrls)??[]}),{data:i=[]}=u({queryKey:["safe-urls",e,t,a,s],queryFn:async()=>{const o=s.filter(n=>t.includes(n)),r=t.filter(n=>!o.includes(n)),p=(await Promise.allSettled(r.map(async n=>{if(await d(n))return n;if(e==null)return null;try{return(await S.getConversationSafeUrls(e,n,a)).safe?n:null}catch{return null}}))).map(n=>n.status==="fulfilled"?n.value:null).filter(n=>n!=null);return o.concat(p)},enabled:e!=null&&t.length>0});return i}export{C as a,q as b,F as u};
//# sourceMappingURL=oz46yu1qxkhvvlp1.js.map
