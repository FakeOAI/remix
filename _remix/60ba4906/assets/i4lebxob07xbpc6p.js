const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-hduqfxtrd6s43ynn.js","assets/eljox9y9liclbxjs.js","assets/mov0dqfy71k4mkbp.js","assets/root-bcm2adyk.css","assets/bpx8yk8lhvr4hu9a.js","assets/q02ioa5nz1msdn73.js","assets/conversation-small-eplmind9.css","assets/m2j9a5yzu7labkem.js","assets/gej2wzszabjtgedr.js","assets/btkmfibrorj6h94u.js","assets/ei22way1wz63smda.js","assets/pc41wgyozijgyqnw.js","assets/gs0p62cga8ydkujk.js","assets/d0c0dt6og7lcobfn.js","assets/m6ilxompj3fnes7l.js","assets/ow04wph7q6xkuj3u.js","assets/lkrs9bzy98t3lee7.js","assets/d6zp3a3jsn0b88yi.js","assets/b8l3jqv9odf8i4mq.js","assets/l8i26s1xmppsfy7d.js","assets/ctsnqzq3j1yqmvvc.js","assets/jpx7ejllqx3yl41p.js","assets/d820bszvx27g88kl.js","assets/giivv0xpxvo76oax.js","assets/l0xkd1ou0a6b53wu.js","assets/ggrvr9r1gu20rf2q.js","assets/mwbzozg0qkuzyepz.js","assets/e96k3w93tyq7t2u1.js","assets/kqwdyvkaaavvn8k3.js","assets/m4xp63j9cd26sbls.js","assets/l8z2opwgitcatoxc.js","assets/c68tnvv0qd4vcwem.js","assets/j3u8i3fdvoanfpp8.js","assets/e9lafxuzyeh4418f.js","assets/grq6wh9rfw6h032k.js","assets/bcz6n5r22j2h0hv3.js","assets/c5gvt8q7f24peczb.js","assets/mgrbq3je1py3ecpp.js","assets/fzssjzn99nommze0.js","assets/nhwwej1nq0zrd7sc.js","assets/nai7uzc1mbc8odvj.js","assets/fb8bzww78xjykbmy.js","assets/irrvkq10i9llfozb.js","assets/fcaomb8s02a8f95w.js","assets/4mneme74sx5vv6xg.js","assets/otsqj6ya0ikst6d2.js","assets/hyxwkwiq2oxw44sy.js","assets/m4j20u3qgodeqw68.js","assets/fasuo28jixbbnpd5.js","assets/flw0fkcmy569vfyz.js","assets/lbkxvh2j8v6u8rsk.js","assets/fphgzrxvxpvbyfjc.js","assets/hz3enuoki16jl2vh.js","assets/nw6t0rw3r15r9w6i.js","assets/b95h5qpojnpnsit0.js","assets/ot39ij2rbh5whqm7.js","assets/c5akq4et0q0a7yrk.js","assets/bjk5v8pcckrz53jc.js","assets/lnscq9wmi2sbfhh5.js","assets/my4v7hox2b9am5gs.js","assets/iej0cupg2dqkmejt.js","assets/jgmpleh350fcfvwp.js","assets/jk8w36bsokizpx57.js","assets/lnc45axa1t8mmi2j.js","assets/k9wogyut28o8gksp.js","assets/carousel-bss5aguy.css","assets/d1fxt9cydsoyqcs3.js","assets/nm04jgpfyxi6pn12.js"])))=>i.map(i=>d[i]);
import{aw as ts,r as u,f as ns,m as e,R as as,fb as os,bN as re,n as Se,a1 as T,aN as y,bo as H,P as x,a as j,aA as is,aD as cs,aE as rs,a5 as d,a6 as le,u as ke,bf as $,aK as ls,b_ as ds,bY as us,q as Te,a$ as q,bu as ye,bS as Ie,eE as be,cf as Pe,da as gs,eQ as ms,eN as ps,S as de,bg as z,dX as xs,W as Ne,ad as fs,bd as oe}from"./eljox9y9liclbxjs.js";import{gd as hs,ge as vs,gf as js,gg as Cs,gh as Ms,gi as Ss,gj as Ae,de as ks,gk as Ts,gl as ys,fs as Is,gm as bs,gn as Ps,go as Ns,gp as As,gq as G,fH as ws,gr as Es,gs as Os,gt as Ws,gu as _s,gv as Bs,gw as Fs,gx as we,gy as Ds,gz as V,gA as Ls,gB as Us,gC as je,ep as Rs,ft as Gs,fw as Vs,gD as qs,gE as zs,fD as Hs,gF as $s,gG as Ee,gH as Qs,T as A,N as Q,gI as Ks,w as ue,Z as k,aC as Oe,gJ as ie,g9 as Xs,q as We,ay as ge,c as Js,g4 as me,c8 as _e,bp as Ce,gK as N,gL as ce,gM as Zs,ga as Ys,gN as et,d$ as st,gO as tt,aM as nt,D as Be,dX as Fe,r as at,t as ot}from"./q02ioa5nz1msdn73.js";import{T as it,q as ct,r as rt,o as lt,b as dt}from"./ei22way1wz63smda.js";import{u as pe,a1 as ut,bw as De,$ as Le,aW as gt,ac as mt,q as pt,S as xt,a4 as ft,p as ht,aK as Ue,bs as Re,bx as Ge,I as vt,bm as jt,bh as Ct,b0 as Mt,T as St,b2 as Me}from"./mov0dqfy71k4mkbp.js";import{D as l,$ as kt,B as Tt}from"./l0xkd1ou0a6b53wu.js";import{a as yt,H as Ve,I as It,u as bt}from"./btkmfibrorj6h94u.js";import{c as qe,d as ze}from"./gs0p62cga8ydkujk.js";import{u as Pt}from"./fjii1rhgftspjqgz.js";const Nt=s=>ns.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:s}}}),At=async s=>{const t=await Nt(s),n=new Map(t==null?void 0:t.map(i=>[i.id,i])),a=[];for(const{id:i,content:c,version:r,textdoc_type:p,title:f,comments:h}of t)a.push({textdocId:i,messageId:null,type:Cs(p),comments:Ms(h,c),title:f,content:c,versionInt:r,createdAt:0});return{persistedTextdocVersionById:new Map(a.map(i=>[i.textdocId,i])),persistedTextdocVersions:a,persistedTextdocById:n}};function wt({clientThreadId:s,isEnabled:t}){const n=it.getServerThreadId(s),{data:a,error:o,isLoading:i,isFetching:c,refetch:r}=ts({queryKey:[n,"textdocs"],enabled:!!n&&t,gcTime:0,queryFn:()=>n&&At(n)});return u.useEffect(()=>{if(!a)return;const{persistedTextdocVersions:p}=a;hs(p),vs(p),js(p)},[a]),[{...a,error:o,isLoading:i,isFetching:c},r]}const He=Ss(null);function L(s=os){return Fs(He,s)}function un(){return L(s=>s==null?void 0:s.isFetchingFromPersistence)}function gn(s){const t=Ae();return L(n=>we(n,t,s))}function $e(s){const t=Ae();return L(n=>{var a;return((a=we(n,t,s))==null?void 0:a.metadata)??null})}function Qe(){const s=L(t=>t==null?void 0:t.allTextdocIdSet);return s?Object.keys(s):null}function mn(){return L(s=>s?Object.keys(s.allTextdocIdSet).length>1:!1)}function pn({clientThreadId:s,children:t,isEnabled:n}){const a=Et({clientThreadId:s,isEnabled:n});return e.jsx(He.Provider,{value:a,children:t})}function Et({clientThreadId:s,isEnabled:t}){const n=ct(s),a=rt(s,n),o=lt(s),i=ks(o),[{error:c,persistedTextdocVersionById:r,isLoading:p,isFetching:f},h]=wt({clientThreadId:s,isEnabled:t}),[w,I]=u.useState(!1),B=Ts(),[K,m]=u.useState(!0);ys(()=>{I(!0),h().finally(()=>I(!1))});const[F,ss]=u.useState(r);u.useEffect(()=>{i&&ss(r)},[i]);const xe=t&&(i||!K||f&&!p&&w),X=Is(a),E=u.useMemo(()=>{if(!X)return null;const{messages:g}=X,M=bs(g??[],({message:b})=>b.author.role===as.System),v=M===-1?g:g==null?void 0:g.slice(M+1);return xe&&v&&Ps(v)?v:null},[xe,X]),J=!!E?F:r,Z=Ns(),fe=As(),U=u.useMemo(()=>{let g=Ds();return!J||(g=G(g,M=>{for(const[v,b]of J.entries()){M.allTextdocIdSet[v]=v;const O=B.get(v);let S=O&&(O.versionInt??V)>(b.versionInt??V)?{...b,...O}:b;const R=fe.filter(C=>C.textdocId===v&&C.kind===Ls.REMOVE_COMMENT);let W=S.versionInt;for(const C of R)S=Us(S,C),W=Math.max(W??V,C.versionInt??V);S={...S,versionInt:W},M.textdocById[v]=void 0,je(M,S)}}),!Z)?g:G(g,M=>{je(M,Z,!1)})},[J,B,Z,fe]),Y=u.useMemo(()=>G(U,g=>{g.fetchError=c,g.isFetchingFromPersistence=f}),[U,c,f]),he=ws(),ee=u.useMemo(()=>E!=null&&E.length?Es(i,U,he,E):null,[E,i,he,U]),se=Os(i,ee,m),ve=u.useMemo(()=>se?Ws(Y,se):Y,[Y,se]);return u.useEffect(()=>{t&&_s(a)},[s,t,a.length]),u.useEffect(()=>{Bs(ee)},[ee]),u.useMemo(()=>G(ve,g=>{var O,S,R,W;const M=Rs(a,C=>C.messages),v={},b=Gs(M);for(let C=b.length-1;C>=0;C--){const te=b[C];if(te.type!==Vs.Canmore)continue;const _=qs(te.messages),ne=zs(te.messages),D=((S=(O=_==null?void 0:_.message.metadata)==null?void 0:O.canvas)==null?void 0:S.textdoc_id)??((W=(R=ne==null?void 0:ne.message.metadata)==null?void 0:R.canvas)==null?void 0:W.textdoc_id);D&&_!=null&&!v[D]&&(v[D]=!0,_.nodeId!==g.lastCanvasAssistantMessageById[D]&&(g.lastCanvasAssistantMessageById[D]=_.nodeId))}}),[ve,a])}const Ot=()=>{const{value:s}=re("44045625");return s},xn=()=>{const{value:s}=re("3700195277");return s||!1},Ke=s=>{const t=yt(s);return Ot()&&!!(t!=null&&t.includes("canmore"))},Wt=({children:s})=>{const t=Qe();return t!=null&&t.length?e.jsxs(l.Root,{children:[e.jsx(l.Trigger,{className:"h-10 px-2",children:s}),e.jsx(l.Content,{align:"end",onCloseAutoFocus:n=>n.preventDefault(),children:t.map(n=>e.jsx(_t,{textdocId:n},n))})]}):null},_t=({textdocId:s})=>{const t=Se($e(s));return e.jsx(l.Item,{icon:pe,onClick:()=>{Hs.logButtonClick($s.FILE_DRAWER_ITEM),Ee(t.textdocId)},children:t.title})},Bt=()=>{const s=T(),t=Qe(),n=Qs();if(!t||n)return null;const a=t.length;return a===1?e.jsx(Ft,{textdocId:t[0]}):e.jsx(Wt,{children:e.jsx(A,{label:s.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:e.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[e.jsx(pe,{className:"icon-xl-heavy"}),a]})})})},Ft=({textdocId:s})=>{const t=T(),n=Se($e(s));return e.jsx(A,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:e.jsx(Q,{onClick:()=>Ee(n.textdocId),icon:pe})})},Dt=({clientThreadId:s,children:t})=>Ke(s)?e.jsx(Ks,{children:t}):t;function Xe({menuItemComponent:s}){const t=y(),n=H(),a=u.useCallback(()=>{x.logEvent(j.clickSidebarAccountPortalMenuItem),ue(n,"Sidebar account menu item")},[n]),{value:o}=is("1028682714"),i=cs(()=>rs(()=>import("./sso-hduqfxtrd6s43ynn.js").then(c=>c.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67])).then(c=>c.default));return e.jsxs(e.Fragment,{children:[(t==null?void 0:t.hasPaidSubscription())&&(o?e.jsx(i,{handleClickCustomerPortal:a,menuItemComponent:s}):e.jsx(s,{onClick:a,icon:ut,children:e.jsx(d,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),(t==null?void 0:t.canInteractWithGizmos())&&e.jsx(s,{onClick:()=>{x.logEvent(j.accountMenuClickMyGPTs),n(Ve())},icon:De,children:e.jsx(d,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),e.jsx(s,{icon:Le,onClick:()=>{k.openModal(Oe.UserContext),x.logEvent(j.accountMenuClickCustomizeChatGPT)},children:e.jsx(d,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function Je({menuItemComponent:s,routedMenuItemComponent:t}){var o;const n=y(),a=((o=re("2756095923"))==null?void 0:o.value)&&(n==null?void 0:n.isEdu())&&(n==null?void 0:n.isStandardUserOfAccount());return e.jsxs(e.Fragment,{children:[!a&&e.jsx(t,{href:"/admin",icon:gt,children:e.jsx(d,{...ae.myWorkspaceSettings})}),e.jsx(t,{href:Ve(),onClick:()=>{x.logEvent(j.accountMenuClickMyGPTs)},icon:De,children:e.jsx(d,{...ae.myGpts})}),e.jsx(s,{onClick:()=>{k.openModal(Oe.UserContext),x.logEvent(j.accountMenuClickCustomizeChatGPT)},icon:Le,children:e.jsx(d,{...ae.chatPreferences})})]})}const ae=le({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});function fn({onClickSettings:s}){return e.jsxs(ie,{as:"div",className:"group relative",children:[e.jsx(Gt,{}),e.jsx(Xs,{children:e.jsx(ie.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:e.jsx(Rt,{onClickSettings:s})})})]})}function Ze(){var o;const s=!((o=y())!=null&&o.isEnterprisey())&&!be,t=T(),n=ge(),a=H();return n?e.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[e.jsx("div",{className:"text-sm text-token-text-secondary",children:n==null?void 0:n.email}),s&&e.jsx(A,{label:t.formatMessage(P.addWorkspaceTooltip),side:"right",children:e.jsx("button",{onClick:()=>ue(a,"profile menu"),children:e.jsx(vt,{className:"icon-sm text-token-text-primary"})})})]}):null}function Lt(){const s=y();return s==null?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full px-3 py-2",children:e.jsx(q,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{}),e.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:e.jsx(es,{workspace:s,isLoading:!1,currentWorkspaceId:s.id,showCheck:!1})})]})}function Ye({menuItemComponent:s}){const t=We(),n=ke(),{data:a}=$(),o=y(),[i,c]=u.useState(!1),r=ge(),p=T(),f=ls();if(!o||!a)return null;const h=o.isWorkspaceAccount(),w=a.accountItems.length>1,I=a.accountItems,B=Js([I.find(m=>m.isPersonalAccount()),...I.filter(m=>!m.isPersonalAccount())]);if(B.sort((m,F)=>m.isPersonalAccount()?1:F.isPersonalAccount()?-1:0),!w)return h?e.jsx(Lt,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:r==null?void 0:r.email})});const K=B.map(m=>e.jsx(s,{disabled:m.isDeactivated(),onClick:()=>{if(m.isDeactivated()||m.id===(o==null?void 0:o.id))return;c(!0);const{willRedirect:F}=ds(n,m.id,t,p,f);F||us()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:m.isDeactivated()?e.jsx(Ut,{workspace:m,isLoading:i}):e.jsx(es,{workspace:m,isLoading:i,currentWorkspaceId:o==null?void 0:o.id})},m.id));return e.jsxs(e.Fragment,{children:[e.jsx(Ze,{}),e.jsx(l.Separator,{}),K]})}function es({workspace:s,isLoading:t,currentWorkspaceId:n,showCheck:a=!0}){const o=s.canAccessWithCurrentSession,i=!t&&a&&s.id===n;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:e.jsx(me,{iconSize:"small",workspace:s,className:Te({"flex-shrink-0":!0})})}),e.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:_e(T(),s)}),t&&e.jsx(q,{}),i&&e.jsx("span",{className:"text-token-text-primary",children:e.jsx(mt,{className:"icon-sm"})}),!o&&e.jsx("span",{className:"text-token-text-primary",children:e.jsx(pt,{className:"icon-sm"})})]}),!o&&e.jsx("div",{className:"rowDivClassName",children:e.jsx("small",{className:"text-token-text-secondary",children:e.jsx(d,{...s.ssoConnectionName?P.authenticateWithSSOToAccessWorkspace:P.authenticateWithoutSSOToAccessWorkspace})})})]})}function Ut({workspace:s,isLoading:t}){const n=T(),a=s.isOwnerOfAccount(),[o,i]=u.useState(!1),c=Pt(s.id);return u.useEffect(()=>{c!=null&&o&&(k.setPurchaseWorkspaceData({minimumSeats:Math.max(c,Ce),existingAccount:s}),i(!1))},[c,o,s]),e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"flex w-full flex-1 items-center gap-2.5",label:n.formatMessage(P.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:e.jsx(xt,{className:"icon-sm flex-shrink-0 opacity-30"})}),e.jsx("div",{className:"truncate opacity-30",children:_e(n,s)})]}),t&&e.jsx(q,{}),!t&&e.jsxs(l.Root,{children:[e.jsx(kt,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:e.jsx(ft,{className:"icon-sm m-1"})}),e.jsx(l.Portal,{children:e.jsxs(l.Content,{children:[a&&e.jsx(e.Fragment,{children:e.jsx(l.Item,{onClick:()=>{c==null?i(!0):k.setPurchaseWorkspaceData({minimumSeats:Math.max(c,Ce),existingAccount:s})},children:o?e.jsx(q,{}):e.jsx(d,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),e.jsx(l.Item,{onClick:()=>{k.setLeaveWorkspaceData(s)},children:e.jsx(d,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function Rt({onClickSettings:s}){const{data:t}=$(),n=y(),a=ye(),o=qe(),{openModal:i}=ze();if(!n||!t)return null;const c=n.isWorkspaceAccount(),r=!a;return e.jsxs("nav",{children:[e.jsx(Ye,{menuItemComponent:N}),e.jsx(ce,{}),c?e.jsx(Je,{menuItemComponent:N,routedMenuItemComponent:Zs}):e.jsx(Xe,{menuItemComponent:N}),r&&e.jsx(N,{href:"https://help.openai.com/en/collections/3742473-chatgpt",target:"_blank",onClick:()=>{x.logEvent(j.clickFaqLink)},icon:ht,children:e.jsx(d,{...P.helpAndFaq})}),e.jsx(N,{onClick:s,icon:Ue,testId:"accounts-settings-button",children:e.jsx(d,{...P.settings})}),o&&e.jsx(Vt,{openDownloadModal:i}),e.jsx(ce,{}),e.jsx(N,{onClick:()=>{x.logEvent(j.clickLogOut,{eventSource:"mouse"}),Ie()},icon:Re,children:e.jsx(d,{...P.logOut})})]})}function Gt(){return ge()?e.jsx(qt,{}):null}function Vt({openDownloadModal:s}){return e.jsxs("span",{children:[e.jsx(ce,{}),e.jsx(N,{icon:Ge,onClick:()=>{x.logEvent(j.accountMenuClickDownloadApp),s()},children:e.jsx(d,{...P.downloadApp})})]})}function qt(){const{data:s}=$(),t=y(),n=Ys(),a=et();if(!t||!s)return null;const o=t.isWorkspaceAccount(),i=s.accountItems.length>1;return e.jsxs(ie.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(me,{iconSize:"gizmo"})}),e.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[e.jsx("div",{dir:"auto",children:a}),o||i?e.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:n}):null]})]})}const P=le({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"}});function zt({clientThreadId:s,location:t}){const n=ke(),{id:a}=It(s),o=bt(!0),i=H(),c=Pe(),r=gs();return u.useCallback(()=>{ms(ps(n))?st(i):c?i({pathname:r.pathname,search:r.search},{state:tt()}):(o({modelId:a,location:t}),de.logEvent("chatgpt_web_thread_tap_new_thread"))},[n,t,a,o,i,c,r])}function hn({showShareButton:s,showProfileDropdown:t,clientThreadId:n}){const a=dt(n),o=T(),i=Ke(n),{layer:c}=z("1547743984"),r=c.get("show_share_button_text",!1);return e.jsxs(e.Fragment,{children:[!1,i&&e.jsx(Bt,{}),s&&a&&e.jsx(Dt,{clientThreadId:n,children:r?e.jsx(oe,{onClick:()=>k.openSharingModal(a),icon:Me,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",children:o.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"})}):e.jsx(A,{label:o.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx(Q,{"data-testid":"share-chat-button",onClick:()=>k.openSharingModal(a),icon:Me})})}),t&&e.jsx($t,{})]})}function Ht({href:s,children:t,icon:n}){const a=fs();return e.jsx(l.Item,{icon:n,onSelect:()=>a.push(s),children:t})}function $t(){const{isUnauthenticated:s}=Ne();return s?e.jsx(Yt,{}):e.jsx(Qt,{})}function Qt(){const{data:s}=$(),t=y(),n=(t==null?void 0:t.isPlus())??!1,a=(t==null?void 0:t.isWorkspaceAccount())??!1,{openSettings:o}=nt(),i=qe(),{openModal:c}=ze(),{layer:r}=z("2888142241"),{doesUserHaveAnyAccountsWithPlusFeatures:p}=xs(),{layer:f}=z("2670443078");if(!t||!s)return null;const h=s.accountItems.length>1;let w=n;!a&&!n&&p&&f.get("is_gating_fix_enabled",!1)&&(w=p);const I=!a&&!w&&!be&&r.get("is_upgrade_in_settings",!1);return e.jsxs(Tt,{triggerButton:e.jsx("button",{onClick:()=>{x.logEvent(j.accountOpenProfileMenu),de.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",children:e.jsx(me,{iconSize:"medium"})}),children:[h&&e.jsx(Ye,{menuItemComponent:l.Item}),h?e.jsx(l.Separator,{}):null,a?e.jsx(Je,{menuItemComponent:l.Item,routedMenuItemComponent:Ht}):e.jsx(Xe,{menuItemComponent:l.Item}),e.jsx(l.Item,{icon:Ue,onClick:()=>o(),"data-testid":"settings-menu-item",children:e.jsx(d,{defaultMessage:"Settings",id:"navigation.settings.0"})}),e.jsx(l.Separator,{}),i&&e.jsx(Xt,{openDownloadModal:c}),I&&e.jsx(Jt,{}),(I||i)&&e.jsx(l.Separator,{}),e.jsx(l.Item,{onClick:()=>{x.logEvent(j.clickLogOut,{eventSource:"mouse"}),x.logLogOutButtonClicked({location:"profile_drop_down"}),Ie()},"data-testid":"log-out-menu-item",icon:Re,children:e.jsx(d,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function Kt({onClick:s,className:t,testId:n}){const a=T(),o=Pe(),i=o?a.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):a.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return e.jsx(A,{sideOffset:4,label:i,className:Te("flex",t),children:e.jsx(Q,{onClick:()=>{k.closePopoverNavSidebar(),s()},icon:o?Mt:St,surfaceContext:"secondary","aria-label":i,"data-testid":n})})}function vn({clientThreadId:s}){const[t]=Be(o=>[o.activeStageSidebar]),n=Fe(),a=zt({clientThreadId:s,location:"Navigation actions"});return!n&&!t?null:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zt,{}),e.jsx(Kt,{onClick:a})]})}function Xt({openDownloadModal:s}){return e.jsx("span",{children:e.jsx(l.Item,{icon:Ge,onClick:()=>{s(),x.logEvent(j.accountMenuClickDownloadApp)},children:e.jsx(d,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function Jt(){const s=H(),t=y(),n=(t==null?void 0:t.wasPaidCustomer())??!1,a=()=>{de.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),x.logEvent(j.plusUpgradeInSettingsMenuClicked),ue(s,"Upper right settings menu")};return e.jsx(l.Item,{icon:jt,onClick:a,children:n?e.jsx(d,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):e.jsx(d,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Zt(){const s=T(),[t]=Be(i=>[i.activeStageSidebar]),n=Fe(),a=ye(),{isUnauthenticated:o}=Ne();return!t&&!n||!a||o?null:e.jsx(A,{label:s.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx(Q,{"aria-label":s.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:k.toggleNavSidebar,icon:Ct,surfaceContext:"primary"})})}function Yt(){const s=We(),t=at(),n=ot(en.signUpCta),{layer:a}=z("3637408529"),o=a.get("is_desktop_primary_auth_button_on_right",!1),i=()=>{s({authType:"login",callback:h=>{x.logLogInButtonClicked({location:"Chat header",provider:h})}})},c=()=>{s({authType:"signup",callback:h=>{x.logSignUpButtonClicked({location:"Chat header",provider:h})}})},r=e.jsx(oe,{onClick:i,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:e.jsx(d,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),p=e.jsx(oe,{color:t?"secondary":"primary",onClick:c,size:"small","data-testid":"signup-button",children:e.jsx(d,{...n})},"signup"),f=t?[r,p]:[p,r];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:o?f.reverse():f})}const en=le({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{hn as C,Zt as E,$t as L,Kt as N,Qt as P,pn as T,Ot as a,Ke as b,fn as c,vn as d,xn as e,gn as f,un as g,$e as h,mn as i,L as j,zt as u};
//# sourceMappingURL=i4lebxob07xbpc6p.js.map
