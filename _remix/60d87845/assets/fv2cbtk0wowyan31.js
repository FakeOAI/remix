import{r as u,bi as f,l as i,eo as h,bX as v,aG as y,U as w,ep as C,dX as S}from"./dwkd3b3c7kg0ot7l.js";import{T as W}from"./npagvawotm2a2fuv.js";import{ce as g,cY as P,aG as j,cZ as A}from"./ok65lib68mghk0mk.js";import{C as L}from"./f5t4vo9mgm56agwx.js";import{a as N}from"./inoare35495u9m9k.js";import{u as M}from"./nov0yn9oognrye5r.js";import{u as T}from"./hu9vn59esh734ymj.js";function m(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function p(e,t){e.head.querySelectorAll("link, style").forEach(r=>{m(r)&&t.head.appendChild(r.cloneNode(!0))});const s=new WeakMap,o=new MutationObserver(r=>{r.forEach(n=>{n.type==="childList"&&(n.addedNodes.forEach(c=>{if(m(c)){const a=t.head.appendChild(c.cloneNode(!0));if(s.set(c,a),c instanceof HTMLStyleElement&&c.dataset.emotion){const{sheet:d}=c,{sheet:l}=a;if(d&&l)for(const E of d.cssRules)l.insertRule(E.cssText)}}}),n.removedNodes.forEach(c=>{const a=s.get(c);a&&t.head.removeChild(a)}))})});return o.observe(e.head,{childList:!0}),()=>{o.disconnect()}}function b(e,t){for(const o of e.attributes)t.setAttribute(o.name,o.value);const s=new MutationObserver(o=>{o.forEach(r=>{if(r.type==="attributes"&&r.attributeName!=null){const n=e.getAttribute(r.attributeName);n==null?t.removeAttribute(r.attributeName):t.setAttribute(r.attributeName,n)}})});return s.observe(e,{attributes:!0}),()=>{s.disconnect()}}const x=e=>{const t=u.useRef(!1);u.useEffect(()=>{t.current||(e(),t.current=!0)},[e])};function q({children:e,target:t="_blank",features:s}){const[o,r]=u.useState(null);return x(()=>{const n=window.open("about:blank",t,s);if(!n){v.error("Unable to create child window");return}p(document,n.document),b(document.documentElement,n.document.documentElement),r(n);function c(){n?.close()}return window.addEventListener("unload",c),()=>{window.removeEventListener("unload",c),n.close()}}),o&&f.createPortal(i.jsx(h,{window:o,children:e}),o.document.body)}function G({children:e}){const[t,s]=u.useState(null);return x(()=>{let o=!1,r=null;return async function(){const n=await window.documentPictureInPicture?.requestWindow({width:400,height:600});if(n){if(o){n.close();return}r=()=>n.close(),p(document,n.document),b(document.documentElement,n.document.documentElement),s(n)}}(),()=>{o=!0,r?.()}}),t&&f.createPortal(i.jsx(h,{window:t,children:e}),t.document.body)}function k({clientThreadId:e}){const t=S.useStore(),s=w();T({resetThreadAction:()=>t.newThread(),clientThreadId:e,focusPromptTextareaAction:()=>s.document.getElementById("prompt-textarea")?.focus()});const o=j();return i.jsxs(i.Fragment,{children:[o?i.jsx(L,{clientThreadId:e,onThreadCreated:function(r){},onNewThread:function(){},hideHeader:!0}):i.jsx(N,{clientThreadId:e,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},e),i.jsx(A,{clientThreadId:e})]})}function K({clientThreadId:e}){M(e,{kind:y.PrimaryAssistant});const t=w();return u.useEffect(()=>{const s=()=>{t.document.getElementById("prompt-textarea")?.focus()};return t.addEventListener("focus",s),()=>{t.removeEventListener("focus",s)}},[t]),i.jsx(C,{children:i.jsx(g,{children:i.jsx(P,{clientThreadId:e,children:i.jsx(W,{clientThreadId:e,children:i.jsx(k,{clientThreadId:e})})})})})}export{K as C,G as D,q as a};
//# sourceMappingURL=fv2cbtk0wowyan31.js.map
