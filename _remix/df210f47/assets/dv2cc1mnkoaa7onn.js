const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/i5yi0v8880s4f77b.js","assets/in4yvrl95oipp0rj.js","assets/ejbuirid83yf5ft7.js","assets/root-k00fc8j4.css"])))=>i.map(i=>d[i]);
import{a5 as E,a6 as O,c as H,r as p,t as e,a8 as d,a3 as D,bx as P,bJ as C,bH as F,T as J,am as m,ag as k,h as S,j as A,a as $,ax as z,ad as G}from"./in4yvrl95oipp0rj.js";import{av as T,aw as V,ax as q,ay as L,az as y,a0 as l,aA as Q,aB as K,aC as _,c as Y,aD as Z}from"./k2c8mioruw1313fx.js";import{U as X,G as ee}from"./mfgzn1jhi2xd7sig.js";import{D as c}from"./n6dys2u7db6rw80x.js";import{B as ae}from"./llxcpj0rjw7c8suw.js";import{I as se,a8 as N}from"./ejbuirid83yf5ft7.js";const re=E(()=>O(()=>import("./i5yi0v8880s4f77b.js"),__vite__mapDeps([0,1,2,3])).then(a=>a.DirectorySyncResourceManagedIndication)),M=H(()=>({confirmModalUserData:null})),h={openModalForUser:a=>{M.setState({confirmModalUserData:a})},closeModal:()=>{M.setState({confirmModalUserData:null})}};function je({workspaceId:a,filterInputValue:r}){const[n,s]=p.useState(0),g=V()?.id,u=q(a),v=L(a),f=u||v,j=ie(),U=de(a),{data:b}=T(a,n*y,r),I=p.useCallback(o=>{h.openModalForUser(o)},[]),W=p.useCallback(()=>{const o=M.getState().confirmModalUserData?.id;o!==void 0&&U.mutate({userId:o}),h.closeModal()},[U]),w=p.useCallback((o,B)=>{j.mutate({userId:o,value:B,workspaceId:a})},[j,a]);if(b===void 0)return e.jsx(ce,{});const R=b.items,x=Math.ceil((b.total??0)/y);return n>=x&&x!==0&&s(Math.max(x-1,0)),e.jsxs(e.Fragment,{children:[e.jsxs(l.Root,{fixed:!0,size:"normal",children:[e.jsxs(l.Header,{children:[e.jsx(l.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(d,{...i.name})}),e.jsx(l.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(d,{...i.email})}),e.jsx(l.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:e.jsx("span",{className:u?"pl-3":"",children:e.jsx(d,{...i.role})})}),f&&e.jsx(l.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),e.jsxs(l.Body,{children:[R.map(o=>e.jsx(ne,{isCurrentUser:g!==void 0&&o.id===g,user:o,currentUserHasAdminRights:f,isCurrentUserOwner:u,onRemoveUserClick:()=>I({id:o.id,name:o.name??"",email:o.email??"",created_time:o.created_time}),onUpdateUserRole:w},o.id)),R.length===0&&e.jsx(l.Row,{children:e.jsx(l.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(d,{...i.noResults})})})})]})]}),e.jsxs("div",{className:"relative mb-8 mt-4 min-h-[20px]",children:[u&&e.jsxs("button",{onClick:()=>X.openModal(ee.InviteUsersToWorkspace),className:"flex items-center gap-2 text-token-text-secondary hover:text-token-text-primary",children:[e.jsx(se,{className:"icon-sm"}),e.jsx(d,{...i.inviteMemberButton})]}),x>1&&e.jsx("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:e.jsx(Q,{currentPage:n,onChangeIndex:s,length:x})})]}),e.jsx(te,{onDeleteConfirm:W})]})}function te({onDeleteConfirm:a}){const r=D(),n=M(t=>t.confirmModalUserData!==null),s=M(t=>t.confirmModalUserData===null?{}:{userId:t.confirmModalUserData.id,email:t.confirmModalUserData.email,name:t.confirmModalUserData.name,dateAdded:K(t.confirmModalUserData.created_time)});return e.jsx(P,{isOpen:n,title:r.formatMessage(i.removeMemberModalTitle),onClose:()=>h.closeModal(),type:"success",primaryButton:e.jsx(C.Button,{title:r.formatMessage(i.removeMemberModalConfirm),color:"danger",onClick:a}),secondaryButton:e.jsx(C.Button,{title:r.formatMessage(i.removeMemberModalCancel),color:"secondary",onClick:()=>h.closeModal()}),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.name??s.email,e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(d,{...i.dateJoined,values:{dateAdded:r.formatDate(s.dateAdded,{year:"numeric",month:"long",day:"numeric"})}})})]})})}function ne({user:a,currentUserHasAdminRights:r,isCurrentUserOwner:n,isCurrentUser:s,onRemoveUserClick:t,onUpdateUserRole:g}){const v=_()[a.role],f=a.name==null||a.name==="",{value:j}=F("3999712942");return e.jsxs(l.Row,{children:[e.jsx(l.Cell,{children:e.jsxs("span",{className:J("flex flex-grow items-center justify-between gap-2",f&&"text-token-text-tertiary"),children:[e.jsx("span",{children:a.name??e.jsx(d,{...i.missingName})}),s&&e.jsx("span",{children:e.jsx(d,{...i.youSpecifier})}),j&&a.is_scim_managed&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-grow"}),e.jsx(re,{})]})]})}),e.jsx(l.Cell,{children:a.email}),e.jsx(l.Cell,{children:n?e.jsx(oe,{currentRole:a.role,onUpdateUserRole:U=>{g(a.id,U)},disabled:s}):v}),r&&e.jsx(l.Cell,{children:e.jsx(le,{userId:a.id,onRemoveUserClick:t,disabled:s,isScimManaged:a.is_scim_managed})})]})}function oe({currentRole:a,onUpdateUserRole:r,disabled:n=!1}){const s=_();return e.jsx(ae,{disabled:n,defaultValue:a,onValueChange:t=>{r(t)},options:[{label:s[m.STANDARD],value:m.STANDARD},{label:s[m.ADMIN],value:m.ADMIN},{label:s[m.OWNER],value:m.OWNER}]})}function le({disabled:a,onRemoveUserClick:r,userId:n,isScimManaged:s}){const t=D();return a?null:s?e.jsx(c.Root,{children:e.jsx(c.Trigger,{disabled:!0,children:e.jsx(Y,{sideOffset:0,label:t.formatMessage(Z.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(N,{className:"icon-sm"})})})}):e.jsxs(c.Root,{children:[e.jsx(c.Trigger,{className:"-my-2",children:e.jsx(N,{className:"icon-sm"})}),e.jsx(c.Portal,{children:e.jsx(c.Content,{children:e.jsx(c.Item,{onClick:()=>{r(n)},children:e.jsx(d,{...i.removeMemberModalTitle})})})})]})}function Ue(a){const{data:r}=T(a);return r?.total??0}function ie(){const a=k();return S({mutationFn:({userId:r,workspaceId:n,value:s})=>A.updateWorkspaceUserRole(n,r,s).catch(t=>{a.danger(`Unable to update user (${r}) role: ${t.message}`)})})}function de(a){const r=$(),n=k();return S({mutationFn:({userId:s})=>A.removeWorkspaceUser(a,s).catch(t=>{n.danger(`Unable to remove user (${s}) from workspace: ${t.message}`)}),onSuccess:()=>{r.invalidateQueries({queryKey:["workspace",a]})}})}function ce(){return e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx(z,{})})}const i=G({name:{id:"UserManager.name",defaultMessage:"Name"},email:{id:"UserManager.email",defaultMessage:"Email"},role:{id:"UserManager.role",defaultMessage:"Role"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)"},removeUser:{id:"UserManager.removeUser",defaultMessage:"Remove user from workspace"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member"},noResults:{id:"UserManager.noResults",defaultMessage:"No results"}});export{ce as A,je as U,oe as W,Ue as u};
//# sourceMappingURL=dv2cc1mnkoaa7onn.js.map
