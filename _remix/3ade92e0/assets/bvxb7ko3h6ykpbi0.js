const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/howl1x3nefx9h8u1.js","assets/jipkz7wahhvzzuqx.js","assets/n5nz8vnsxibd6bik.js","assets/root-fm8m2265.css","assets/e6zhtx99a7i1g9zc.js","assets/conversation-small-cll5buey.css","assets/efad9c3t7hoskfux.js","assets/lb2bw82esu8k4ire.js","assets/lbv1zpv4g2ap41f2.js","assets/hu4ya3hu1q2mtj3c.js","assets/fwm14uzkyzsxflxc.js","assets/fqai4h0y4a7y6yiz.js","assets/kgz011geyku0c84g.js","assets/hv5nz92w1es0l9ir.js","assets/npl77qwfuvi2jyha.js","assets/j4lmoxl30s4i5iwl.js","assets/e9lafxuzyeh4418f.js","assets/1nuz69lmcqqsmutm.js","assets/j2c3u9esu2do2tqk.js","assets/pbn5sog0n00cseog.js","assets/m02oxzinki55f1a4.js","assets/c78o8wyvzedeoudw.js","assets/gecwa6udk6b6d8e5.js","assets/g70459ispqthxwkc.js","assets/kl3gqai6eyrksb78.js","assets/ojtyfghvwqol77ni.js","assets/it892upc0b17konk.js","assets/gf1rzma6lb3hhiaa.js","assets/n7shmditr84egzzk.js","assets/ncnmvo4fatoh9z2b.js","assets/l6n2tuza1m4x9jmr.js","assets/jwoa39qbou2pb90k.js","assets/lxkd2uemxq651aut.js","assets/f2w9prfaqv5jn6b6.js","assets/dp98tj9u73hn9ufz.js","assets/k5lnvw1mrt1nlhku.js","assets/nsw6odx5xh6i9cc3.js","assets/dp2xls1tq8hl6hdd.js","assets/o8ne9dgj82ugno4a.js","assets/erjy4zyeqfne1prk.js","assets/hpwzwf5t45kgizxl.js","assets/fcr06eqoxz5nj0zr.js","assets/h2b96bnbvo6g8ecm.js","assets/chvpkj96n5ix27m5.js","assets/kqwdyvkaaavvn8k3.js","assets/eckxh6cogpyr8kwq.js","assets/imupulrqwct7j1xb.js","assets/m9flwqzcay0nmkeq.js","assets/hbvevel7ejsm5ipq.js","assets/lh0w0h06l78eqw2a.js","assets/k1vhmz33m4d7khp6.js","assets/ftbr7b6asun2cswc.js","assets/9zepvw9noc8l3zt8.js","assets/osvuj4hxmi493ts8.js","assets/gk7v9kvqosww0qjc.js","assets/hjcna9n05dqgdvsx.js","assets/ongosyshiqqs2lcq.js","assets/983a0dy92b3ronpv.js","assets/b2xjhnvcfu84hrmp.js","assets/mfznpip9xyiu43tj.js","assets/j625ckqact10y3my.js","assets/i21elbjdr0dt7siq.js","assets/nh5giofbgo8o5iz3.js","assets/hz1kryv1rsw2w11f.js","assets/cyzxbqfgo2fnhaph.js","assets/f1ccpn6bozgd3iqc.js","assets/m5dixe5n71jzyt0l.js","assets/ifx68p1cwmj10rjy.js","assets/ez1fwv0osp45hahb.js","assets/ffc9avibz9qmhla9.js","assets/k38gx6dypfb4xini.js","assets/no3x1y5b9qnb9gat.js"])))=>i.map(i=>d[i]);
import{x as e,bx as oe,a_ as ie,a$ as re,aY as Ve,r,D as J,aw as F,W as Re,S as Y,P as je,b as ke,a2 as E,a7 as H,X as ds,Y as G,aa as us,a8 as gs,$ as b,a0 as C,ah as ce,bJ as hs,bI as fs,bG as ms,aS as ps,t as Fe,ec as ve,br as We,bs as xs,a4 as bs,av as Cs,O as p,ax as Ss,u as ys,f4 as js,ce as He,as as ks,aA as Ge,a9 as $e,d1 as m,e8 as vs,c3 as Ms,fh as As,w as Me,aX as ws,dI as Ae,bj as _s,bk as Ts,bl as Es,bR as Os,N as Ps}from"./jipkz7wahhvzzuqx.js";import{hU as le,eJ as Ns,hV as ze,hW as Ue,hX as Ls,hY as Ke,u as qe,hZ as Is,h_ as Ds,S as Bs,h$ as Vs,i0 as Rs,ci as Q,i1 as Fs,i2 as Ws,i3 as Hs,i4 as Gs,eB as $s,i5 as zs,i6 as Us,i7 as Ks,i8 as qs,i9 as Ys,ia as Qs,ib as Xs,ic as Js,id as Zs,ie as ea,ig as sa,ih as aa,ii as ta,ij as na,ik as oa,il as ia,im as ra,io as ca,cj as de,ip as la,iq as da,eS as ua,gd as Ye,ht as X,eW as we,dC as ue,ir as Qe,is as Xe,h9 as ga,aI as ha,it as fa,hi as _e,fJ as ma,bX as te,bY as Te,c1 as Je,ca as pa,iu as xa,c2 as Ee,iv as ba,iw as Ca,ix as Ze,ai as R,iy as Sa,hv as ne,iz as ya,hs as ja,iA as ka,iB as va,aw as Ma,cb as Aa,gc as wa,iC as _a,iD as Ta,iE as Ea,iF as Oa,c5 as Pa,c6 as Oe,iG as Na,r as La,cm as Ia,iH as Da,cy as Ba,cn as Va,de as Ra,iI as Fa,df as Wa,iJ as Ha}from"./e6zhtx99a7i1g9zc.js";import{U as x,G as D,u as _,c as es,b as Ga}from"./npl77qwfuvi2jyha.js";import{a as $a,b as za,A as Ua,T as W,c as Ka,d as qa,k as Ya}from"./lbv1zpv4g2ap41f2.js";import{u as Qa,a as ss}from"./fqai4h0y4a7y6yiz.js";import{L as Xa}from"./kgz011geyku0c84g.js";import{S as Pe,b as Ja,c as Za,N as et,U as st}from"./j625ckqact10y3my.js";import{u as as,b as at,g as tt}from"./i21elbjdr0dt7siq.js";import{S as nt,C as ot}from"./nh5giofbgo8o5iz3.js";import{d as it,f as rt,T as ts}from"./m02oxzinki55f1a4.js";import{T as ns}from"./cyzxbqfgo2fnhaph.js";import{r as ct,n as lt,f as ge,C as dt}from"./ojtyfghvwqol77ni.js";import{m as Ne}from"./hu4ya3hu1q2mtj3c.js";import{a as Le}from"./hz1kryv1rsw2w11f.js";import{bI as ut,bJ as gt,bv as ht,bK as ft,V as mt}from"./n5nz8vnsxibd6bik.js";import{u as pt}from"./f1ccpn6bozgd3iqc.js";import{C as xt}from"./ifx68p1cwmj10rjy.js";const bt=60*60*24;function Ct(s,a=!1){return oe()==null||a?"loading":!s||ie.getCookie(re.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function St({onClose:s}){const{data:{ageVerificationType:a,ageVerificationDeadline:t}={}}=le();return a==="passive"?e.jsx(yt,{onClose:s}):a==="countdown"&&t!=null?e.jsx(jt,{onClose:s,ageVerificationDeadline:t}):null}const yt=({onClose:s})=>{const{country:a}=Ve();return r.useEffect(()=>{J.addAction("privacy_policy.show_age_verification_modal",{country:a})},[a]),e.jsx(Ns,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(F,{color:"primary",onClick:async()=>{await Re.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(F,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},jt=({onClose:s,ageVerificationDeadline:a})=>{const t=a!=null?Math.floor(a/60/60/24):0;r.useEffect(()=>{Y.logEvent("chatgpt_compliance_age_verification_seen"),je.logEvent(ke.complianceAgeVerificationSeen)},[]);const{country:n}=Ve();return r.useEffect(()=>{J.addAction("privacy_policy.show_age_verification_countdown",{country:n})},[n]),e.jsxs(ze,{children:[e.jsx(Ue,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(E,{...Ie.ageVerificationTitle,values:{deadline:t,learnMoreLink:c=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:c})}})}),e.jsx(Ls,{altText:"Dismiss notification",asChild:!0,children:e.jsx(F,{color:"primary",size:"small",onClick:()=>{Y.logEvent("chatgpt_compliance_age_verification_clicked"),je.logEvent(ke.complianceAgeVerificationClicked),ie.setCookie(re.AgeVerification,"true",{maxAge:bt,path:"/"}),s(),x.openModal(D.AgeVerificationInterstitial)},children:e.jsx(E,{...Ie.startVerification})})}),e.jsx(Ke,{})]})},Ie=H({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function kt({onClose:s}){const a=G(),t=us(),{openSettings:n}=qe(),c=Is(),{session:i}=gs(),{data:{isStorageComplianceEnabled:l}={}}=le(),{data:o,isLoading:d}=Ds({enabled:!!(l&&i),select:g=>!g.cookie_consent.is_required});return r.useEffect(()=>{o===!0&&s()},[o,s]),d?null:e.jsx(vt,{onReject:()=>{c.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){t.success(a.formatMessage(I.updateSuccess))},onError(){t.danger(a.formatMessage(I.updateFailure))}}),s()},onAccept:()=>{c.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){t.success(a.formatMessage(I.updateSuccess))},onError(){t.danger(a.formatMessage(I.updateFailure))}}),s()},children:e.jsx(E,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:g=>e.jsx(Xa,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:g}),manageLink:g=>e.jsx(Mt,{onClick:()=>{n(Bs.DataControls)},children:g})}})})}function vt({children:s,onAccept:a,onReject:t}){return r.useEffect(()=>{J.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs(ze,{children:[e.jsxs(Ue,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(F,{color:"secondary",size:"small",onClick:t,children:e.jsx(E,{...I.reject})}),e.jsx(F,{color:"secondary",size:"small",onClick:a,children:e.jsx(E,{...I.accept})})]})]}),e.jsx(Ke,{})]})}const Mt=ds.button`underline font-normal text-green-600`,I=H({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),At=b(()=>C(async()=>{const{ModelOnboardingNUXModal:s}=await import("./howl1x3nefx9h8u1.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(({ModelOnboardingNUXModal:s})=>s)),wt=({onClose:s})=>{const a=G(),t=Q(de.isBusinessWorkspace),n=Q(i=>i.currentWorkspace),c=t?a.formatMessage(De.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx(We,{isOpen:!0,onClose:xs,type:"success",title:c,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(De.personalOnboardingSubheading),children:e.jsx(la,{onClose:s,scope:da.Personal})})};function _t({clientThreadId:s}){const[a,t]=r.useState(0),{hasSeenOnboardingDate:n}=Vs(),{hasSeenTeamOwnerOnboardingDate:c}=Rs(),i=Q(de.isBusinessWorkspace),l=ce(),[o,d]=r.useState(!1),{data:g,isPending:B}=le(),O=Ct(g,B),{eligible:k,isLoading:y}=Qa(),v=hs(),T=fs(),M=ms(),P=$a(()=>za.getThread(s)),h=Ua(s)||!P,N=W.getConversationOrigin(s),{data:S,isError:w}=ps(),A=S!=null,$=S&&S?.accountItems.length>1&&S.currentAccountId==null,z=S?.accountItems.some(u=>u.isPersonalAccount()),V=!!S?.accountItems&&S.accountItems.length>0&&S.accountItems.every(({canAccessWithCurrentSession:u})=>!u),{eligible:U,isLoading:Z}=Fs(),{value:K}=Fe("1542198993"),{punchOutRequireLoginInfo:f}=Ws(),{state:j}=Hs(),{isOpen:q,isLoading:he}=Gs(),{isOpen:fe,isLoading:me}=$s(),{isOpen:pe,isLoading:xe}=zs(),{isOpen:be,isLoading:Ce}=Us(),{state:Se}=Ks(),L=r.useMemo(()=>[{Component:qs,getModalState:()=>f?"show":"hide",isDeferrable:!1},{Component:Ys,getModalState:()=>j,isDeferrable:!1},{Component:Qs,getModalState:()=>Se,isDeferrable:!1},{Component:Xs,getModalState:()=>he||h?"loading":N===ve.APPLE?"hide":q?"show":"hide",isDeferrable:!1},{Component:Js,getModalState:()=>Ce||h?"loading":N===ve.APPLE?"hide":be?"show":"hide",isDeferrable:!1},{Component:wt,getModalState:()=>i?"hide":n===null?"loading":n===!1?"show":"hide",isDeferrable:!0},{Component:Zs,getModalState:()=>w?"hide":$?"show":A?"hide":"loading",isDeferrable:!1},{Component:ea,getModalState:()=>v!==null?"show":w||A?"hide":"loading",isDeferrable:!1},{Component:sa,getModalState:()=>T!==null?"show":w||A?"hide":"loading",isDeferrable:!1},{Component:aa,getModalState:()=>M!=null?"show":w||A?"hide":"loading",isDeferrable:!1},{Component:ta,getModalState:()=>A?V?"show":"hide":"loading",isDeferrable:!1},{Component:na,getModalState:()=>me?"loading":fe?"show":"hide",isDeferrable:!1},{Component:oa,getModalState:()=>xe?"loading":pe?"show":"hide",isDeferrable:!1},{Component:kt,getModalState:()=>"hide",isDeferrable:!1},{Component:ia,getModalState:()=>!l?.isTeam()||!l?.isOwnerOfAccount()||!z?"hide":!A||c===null?"loading":c===!1?"show":"hide",isDeferrable:!1},{Component:ra,getModalState:()=>i?n===null?"loading":n===!1?"show":"hide":"hide",isDeferrable:!0},{Component:ca,getModalState:()=>Z?"loading":U&&K?"show":"hide",isDeferrable:!1},{Component:St,getModalState:()=>O,isDeferrable:!1},{Component:At,getModalState:()=>y?"loading":k?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(u=>!(u.isDeferrable&&o)&&(!u.expiresAt||u.expiresAt.getTime()>Date.now())),[f,j,M,A,n,c,z,y,i,w,v,T,l,V,$,O,k,o,K,U,Z,q,he,be,Ce,Se,me,fe,pe,xe,N,h]);r.useEffect(()=>{if(L[a]&&L[a].getModalState()==="hide"){const u=L.findIndex(ls=>ls.getModalState()!=="hide");t(u)}},[a,L]);const ee=L[a],se=ee?.getModalState()==="show";if(r.useEffect(()=>{const u=_.getState().activeModals.has(D.BlockingInitialComponent);se!==u&&(se?x.openModal(D.BlockingInitialComponent):x.closeModal(D.BlockingInitialComponent))},[se]),ee==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const ye=ee.getModalState();if(ye==="loading")return null;ye==="hide"&&t(u=>u+1);const cs=L[a].Component;return e.jsx(cs,{onClose:()=>{d(!0),t(u=>u+1)}})}const De=H({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Tt=b(()=>C(()=>import("./hv5nz92w1es0l9ir.js"),__vite__mapDeps([13,1,2,3,8,4,5,9,7,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,6,30,31,32,33,34,35,36,37,38,39,40,41])).then(s=>s.DebugConversationSidebar));function os({clientThreadId:s}){Et();const a=oe(),t=a?.includes("debug"),n=bs(),c=_(l=>l.activeSidebar),i=a?.includes("debug")&&c==="debug";return!t||!i?null:e.jsx(Tt,{clientThreadId:s,slideOver:!ua(n),onClose:()=>x.toggleActiveSidebar("debug"),isOpen:!0})}function Et(){const a=oe()?.includes("debug");r.useEffect(()=>{if(!a)return;const t=new AbortController;return document.addEventListener("keydown",n=>{n.target instanceof HTMLElement&&["input","textarea","select","button"].includes(n.target.tagName.toLowerCase())||n.key==="\\"&&x.toggleActiveSidebar("debug")},{signal:t.signal}),()=>{t.abort()}},[a])}const Ot=b(()=>C(()=>import("./h2b96bnbvo6g8ecm.js"),__vite__mapDeps([42,1,2,3,4,5,43,8,9,44,45,7,10,46])).then(s=>s.SearchSources));function is({clientThreadId:s}){const{resolvedTheme:a}=Cs(),t=a==="dark",{turnIndex:n,messageId:c,isOpen:i}=es(),l=r.useCallback(()=>{x.closeChatThreadFlyout(s,c)},[s,c]);return!c||!n||!i?null:e.jsx(Ye,{anchor:"top",className:p("relative flex-1 border-l",t?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(X,{name:"search-sources-header",type:"primary",className:p("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(Ss,{onClick:l})})}),children:e.jsx(Ot,{clientThreadId:s,turnIndex:n,messageId:c,isInSidebar:!0})})}function rs({clientThreadId:s}){r.useEffect(()=>{x.closeSharingModal()},[s]);const a=ys();r.useEffect(()=>(W.retainThread(s),()=>{setTimeout(()=>{a.invalidateQueries({queryKey:["conversation",s]})},0),W.releaseThread(s)}),[s,a]),r.useEffect(()=>()=>{Y.checkGate("3922476776")||we.abortAllRequests()},[s]);const t=r.useRef(s);r.useEffect(()=>{s!==t.current&&(Y.checkGate("3922476776")||we.clear(),t.current=s)},[s])}const Pt=b(()=>C(()=>import("./m9flwqzcay0nmkeq.js"),__vite__mapDeps([47,1,2,3,4,5,22,23,9,24,7,8,10,14,25,26,11,12,27,28,29,6,48,49,50,51,52,53,54,17,55])).then(s=>s.CanvasFocusedViewManager)),Nt=b(()=>C(()=>import("./ongosyshiqqs2lcq.js"),__vite__mapDeps([56,1,2,3,14,4,5,10,8,9,42,43,44,45,7,46,57])).then(s=>s.SearchResultsModal));function Lt({clientThreadId:s,setClientThreadId:a,urlThreadId:t,prefetchSearch:n}){const c=Ka();rs({clientThreadId:s});const{createNewThread:i,onThreadCreated:l,resetThread:o}=ct({clientThreadId:s,setClientThreadId:a});as({resetThreadAction:o,clientThreadId:s});const d=ue();return e.jsxs(ns,{clientThreadId:s,children:[e.jsx(Qe,{clientThreadId:s,urlThreadId:t}),e.jsxs(Pe,{hideNavigation:c,mobileHeaderContent:e.jsx(it,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(rt,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(Ja,{onNewChatButtonClick:o}),mobileHeaderRightContent:e.jsx(Za,{onNewChatButtonClick:o}),sidebar:e.jsx(et,{navHeader:s?e.jsx(nt,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:i}):null,children:e.jsx(ot,{clientThreadId:s,onNewThread:i})}),threadFlyout:e.jsx(is,{clientThreadId:s}),children:[e.jsx(Xe,{}),e.jsx(ts,{clientThreadId:s,onCreate:l,prefetchSearch:n},s),e.jsxs(Pe.Sidebars,{children:[d&&e.jsx(Pt,{clientThreadId:s}),e.jsx(os,{clientThreadId:s}),!1]})]}),e.jsx(It,{clientThreadId:s})]})}function It({clientThreadId:s}){const{value:a}=Fe("218782548"),t=ga(),{isOpen:n}=es();return n&&(!t||!a)&&e.jsx(Nt,{clientThreadId:s})}const Dt=450;function Bt({children:s,clientThreadId:a,isOpen:t,onClose:n}){return e.jsx(ha,{children:t&&e.jsx(js,{children:e.jsx(fa.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(Ne.div,{className:"h-full w-full bg-token-main-surface-secondary",..._e}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(Ne.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:Dt},..._e,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(ts,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})})}const Vt=b(()=>C(()=>import("./b2xjhnvcfu84hrmp.js"),__vite__mapDeps([58,1,2,3,4,5,25,26,11,12,8,9,7,10,27,14,28,29,6]))),Rt=b(()=>C(()=>import("./mfznpip9xyiu43tj.js"),__vite__mapDeps([59,1,2,3,4,5,37,25,26,11,12,8,9,7,10,27,14,28,29,6,60,39,61,62,63,20,21,22,23,24,30,31,32,33,34,35,36,38,40,41,64,65,66,67])).then(s=>s.ImageEditor));function Ft({clientThreadId:s}){const a=ma();r.useEffect(()=>{te.close()},[s]);let t;return a?.type===Te.ADAVisualization?t=e.jsx(Vt,{clientThreadId:s,visualization:a.visualization}):a?.type===Te.Image&&(t=e.jsx(Rt,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(Bt,{clientThreadId:s,isOpen:a!=null,onClose:te.close,children:t})}const Wt=()=>{const s=G(),a=_(i=>i.activeModals.has(D.KeyboardActions)),t=()=>{x.closeModal(D.KeyboardActions)},n=at(),c=r.useMemo(()=>{const i=Math.ceil(n.length/2);return[n.slice(0,i),n.slice(i)]},[n]);return e.jsx(We,{isOpen:a,onClose:t,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage($t.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:c.map((i,l)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:i.map(o=>e.jsx(Ht,{action:o},o.key))},`col-${l}`))})})})},Ht=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(E,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:tt(s.keyboardBinding).map((a,t)=>e.jsx(Gt,{keyName:a},`${s.key}-${t}`))})]}),Gt=({keyName:s})=>{const a=p("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:p(a,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:p(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:p(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},$t=H({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function zt(){const s=Je(),{conversations:a}=ss();return{isCollapsible:s&&a.length>5,recentConversationLimit:5}}function Ut({clientThreadId:s}){const a=qa(s),t=He(),{isCollapsible:n,recentConversationLimit:c}=zt(),i={buckets:n,recentConversationLimit:c},l=r.useRef(!1),o=_(f=>f.isHistoryCollapsed),{conversations:d,buckets:g,hasNextPage:B,fetchNextPage:O,data:k,isLoading:y,isFetchingNextPage:v,isError:T,recents:M,refetch:P}=ss(i),[h,N]=r.useState(!0),S=r.useCallback(function(j){j===void 0&&N(!1),P({cancelRefetch:!0})},[P,N]),w=t?void 0:a,A=o&&M.items.length>0,$=!o&&g.length>0,z=d.length===0,V=T||k===void 0&&!y&&!v&&l.current,U=!V&&(k===void 0||y||v);k===void 0&&!y&&!l.current&&(l.current=!0,S(!0)),r.useMemo(()=>{pa.publish({kind:"refreshHistory",conversations:d})},[d]);const K=B&&!z&&!o&&!y&&!v;return e.jsxs(e.Fragment,{children:[V&&e.jsx(xa,{showRetry:h,refetch:S}),A&&e.jsx(Ee,{header:M.label,children:M.items.map((f,j)=>e.jsx(Le,{item:f,isActive:f.id===w,testId:`history-item-${j}`},f.id))}),$&&g.map(f=>e.jsx(Ee,{header:f.label,children:f.items.map((j,q)=>e.jsx(Le,{item:j,isActive:j.id===w,testId:`history-item-${q}`},j.id))},f.key)),U&&e.jsx(ks,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),n&&e.jsx(Ge,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!o,className:p(!o&&"hidden"),children:e.jsx(ba,{type:"more",onClick:x.expandHistory})})})}),K&&e.jsx(Ca,{onPaginate:O})]})}const Kt=b(()=>C(()=>import("./ez1fwv0osp45hahb.js"),__vite__mapDeps([68,1,2,3,33,7,4,5,8,9,10,14,62,26,63,11,12,6,61,25,27,28,29])).then(s=>s.GizmoSidebarList));function qt({clientThreadId:s}){const a=ce(),t=Ya(s),{isUnauthenticated:n}=$e();return n?null:e.jsxs("div",{className:p(m.screenContent),children:[null,e.jsx(Ut,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(Kt,{currentGizmoId:t}):null]})}function Yt(){const s=ce(),a=s?.data==null,{isUnauthenticated:t}=$e(),{openSettings:n}=qe(),[c]=r.useState(()=>{const d=ie.getCookie(re.Workspace);return typeof d=="string"&&d!==vs}),i=G(),l=_(d=>d.sidebarState);if(!s||c&&a)return null;const o=t?e.jsx(st,{}):e.jsx(lt,{onClickSettings:()=>n()});return e.jsxs(X,{name:"user-profile-bar",className:"z-10 grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[o,e.jsx("div",{className:m.togglePinWrapper,children:e.jsx(Ze,{tooltipSideOffset:14,className:p(m.pinSidebarAction),checked:l===R.Floating,onChange:d=>{const g=d.currentTarget.checked?R.Floating:R.Pinned;Sa({css:ya,update:()=>{x.setSidebarState(g)}})},icon:l===R.Pinned?e.jsx(ut,{}):e.jsx(gt,{}),label:i.formatMessage({id:"JZfuR3",defaultMessage:"Toggle Sidebar Pin"}),group:ne.FloatingOrPinned})})]})}function Qt(){const s=_(a=>a.isHistoryCollapsed);return e.jsxs(ja,{className:p(m.screenTrailingBarContainer),children:[e.jsx(Ge,{children:e.jsx(ka,{hidden:s,onClick:x.collapseHistory,children:e.jsx(E,{id:"1poXLj",defaultMessage:"See less"})})}),e.jsx(Yt,{})]})}const Xt=b(()=>C(()=>import("./ffc9avibz9qmhla9.js"),__vite__mapDeps([69,1,2,3,4,5,65,66,8,9,61,6,7,10,11,12,14])).then(s=>s.FannyPackIconButton)),Be=b(()=>C(()=>import("./jipkz7wahhvzzuqx.js").then(s=>s.gk),__vite__mapDeps([1,2,3])).then(s=>s.Tooltip),{ssr:!0});function Jt({onNewThread:s}){const a=G(),t=Ga(),n=_(o=>o.sidebarState===R.Floating);va({checkElement:o=>o?.tagName==="NAV",enabled:!t&&n,onLightDismiss(){const o=document.querySelector(`input[name="${ne.OpenOrClosed}"]`);o&&(o.checked=!1)}});const{isFannyPackEnabled:c}=Ma(),{searchMsg:i,shortcutMsg:l}=pt();return e.jsxs(e.Fragment,{children:[e.jsx(X,{type:"primary",className:p(m.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[9px]",children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(Ze,{className:p(m.closeSidebarAction),checked:!t,onChange:o=>{o.currentTarget.checked?x.openSidebar():x.closeSidebar()},icon:e.jsx(ht,{className:m.sidebarIcon}),label:a.formatMessage(ae.closeSidebar),group:ne.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center gap-3",children:[c&&e.jsx(Be,{label:e.jsxs("div",{children:[i,e.jsx("div",{className:"text-sm font-normal text-token-text-secondary",children:l})]}),children:e.jsx(Xt,{className:m.searchAction,icon:e.jsx(ft,{className:m.sidebarIcon})})}),e.jsx(Be,{label:a.formatMessage(ae.newChat),children:e.jsx(Ms,{to:"/",onClick:o=>{o.preventDefault(),s()},children:e.jsx(Aa,{icon:e.jsx(mt,{className:m.sidebarIcon}),className:m.searchAction,label:a.formatMessage(ae.newChat)})})})]})]})}),e.jsx(X,{type:"primary",className:m.bucketBar,disableSizeTracking:!0,children:" "})]})}const ae=H({newChat:{id:"NUNaGU",defaultMessage:"New chat"},closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function Zt(){const{clientThreadId:s,onNewThread:a}=ge();return e.jsx(Ye,{anchor:"vertical",className:p(m.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Jt,{onNewThread:a}),trackLeading:!0,trailing:e.jsx(Qt,{}),children:e.jsx(qt,{clientThreadId:s})})}const en=b(()=>C(()=>import("./m9flwqzcay0nmkeq.js"),__vite__mapDeps([47,1,2,3,4,5,22,23,9,24,7,8,10,14,25,26,11,12,27,28,29,6,48,49,50,51,52,53,54,17,55])).then(s=>s.CanvasFocusedViewManager));function sn(){const{clientThreadId:s,resetThread:a}=ge();return as({resetThreadAction:a,clientThreadId:s}),null}function an(){const{clientThreadId:s,currentModelId:a,isCompanionWindow:t}=ge();return e.jsx(_a,{conversationId:s,currentModelId:a,isActiveWindow:!t})}function tn({clientThreadId:s,setClientThreadId:a,urlThreadId:t}){rs({clientThreadId:s});const n=ue();return e.jsxs(dt,{clientThreadId:s,setClientThreadId:a,children:[e.jsx(an,{}),e.jsx(sn,{}),e.jsxs(ns,{clientThreadId:s,children:[e.jsx(Qe,{clientThreadId:s,urlThreadId:t}),e.jsx(Xe,{}),e.jsx(wa,{className:As.application,sidebar:e.jsx(Zt,{}),thread:e.jsx(xt,{}),details:n&&e.jsx(en,{clientThreadId:s}),threadExtendedInfo:e.jsx(is,{clientThreadId:s}),debugger:e.jsx(os,{clientThreadId:s}),name:"application-root"})]})]})}var nn={};const on=b(()=>C(()=>import("./k38gx6dypfb4xini.js"),__vite__mapDeps([70,1,2,3,4,5,25,26,11,12,8,9,7,10,27,14,28,29,6,71])));function An(s){const{urlThreadId:a,clientThreadId:t,prefetchSearch:n}=s;cn();const c=He(),i=Me(),[l]=ws(),[o,d]=r.useState(()=>a!==void 0?a:t!==void 0?t:Ae());a!==void 0&&o!==a&&W.getServerThreadId(o)!==a&&d(a);const g=Ta(Me());r.useEffect(()=>{a===void 0&&W.getServerThreadId(o)!==void 0&&d(Ae())},[a,o,g]);const B=Q(de.workspaceId);ue();const O=Je(),{eligible:k,isLoading:y,markAsViewed:v}=Ea(),T=Oa();r.useEffect(()=>{(i.pathname==="/"||i.pathname.startsWith("/c/"))&&Pa({namespace:Oe.ChatPageLoad})==null&&(Na({namespace:Oe.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),J.addTiming("chatgpt.web.chatPage.mounted"))},[]);const M=La();r.useEffect(()=>{_s(!0).then(h=>{h.force_login&&M({authType:"login"}),Ts.initializeAndGatherData(h),Ia.initializeAndGatherData(h),Es.initializeAndGatherData(h)})},[M]),r.useEffect(()=>{const h=l.get(Da)==="true";c!==h&&Os.setIsTemporaryChatEnabled(h)},[c,l]),r.useEffect(()=>{i.state?.focusObject&&te.setFocusedObject(i.state.focusObject)},[i.state?.focusObject]),r.useEffect(()=>{!y&&k&&(v(),T())},[k,y,v,T]);const P=O?tn:Lt;return e.jsx(Ba.Provider,{value:null,children:e.jsx(Va,{children:e.jsxs(Ra,{clientThreadId:o,children:[e.jsx(_t,{clientThreadId:o},B),e.jsx(Wt,{}),e.jsx(Fa,{}),e.jsx(P,{urlThreadId:a,clientThreadId:o,setClientThreadId:d,prefetchSearch:n}),e.jsx(Ft,{clientThreadId:o}),e.jsx(Wa,{clientThreadId:o}),e.jsx(rn,{}),!1,e.jsx(Ha,{})]})})})}function rn(){const s=_(a=>a.sharingModalThreadId);return s?e.jsx(on,{serverThreadId:s}):null}function cn(){Ps({queryKey:["pingEdge"],queryFn:()=>Re.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=nn.GOKU_SERVICE);export{An as C,Dt as F,is as a};
//# sourceMappingURL=bvxb7ko3h6ykpbi0.js.map
