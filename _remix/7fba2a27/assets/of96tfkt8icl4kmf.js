import{O as E,H as G,r as d,j as e,K as c,I as P,bt as A}from"./mcyyoqk6c65s5m7y.js";import{B as z,A as L,X as U}from"./eqi5dfq4lqgt3gmd.js";import{a as _}from"./j6bdhpkfr2kjp58j.js";import{m as y}from"./dwfbwyjm7zopu5av.js";const $=5,D="Default";function R(i){const n={};return i.forEach(o=>{const a=o.group??D;n[a]||(n[a]=[]),n[a].push(o)}),n}function q({tagOptions:i,onSubmit:n,onMoreClicked:o,onCancel:a,maxInlineTags:N=$,modalOnly:u=!1,modalTitle:M,multiple:F,children:I,allowEmptySubmit:S=!1}){const B=G(),[m,r]=d.useState(u?"modal":"inline"),[l,h]=d.useState([]),[x,C]=d.useState(void 0),b=d.useCallback(s=>{n(s),r("submitted"),setTimeout(()=>{r("closed")},1500)},[n]),p=d.useMemo(()=>z(b,500),[b]),g=s=>{let t=[];return F?t=l.includes(s)?l.filter(w=>w!==s):[...l,s]:t=[s],h(t),t},v=()=>{b({tags:l,textFeedback:x,tagChoices:j,source:"modal"})},j=i.map(s=>s.value),k=R(i),T=Object.keys(k);return e.jsxs(e.Fragment,{children:[!u&&e.jsx(L,{children:m!=="closed"&&e.jsxs(y.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[m==="submitted"&&e.jsx(y.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:e.jsx("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:e.jsx("div",{className:"text-sm",children:e.jsx(c,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(m)&&e.jsxs("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[e.jsx("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{r("closed"),p.cancel(),a==null||a()},children:e.jsx(_,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),e.jsx("div",{className:"text-sm text-token-text-secondary",children:e.jsx(c,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[i.slice(0,N).map(s=>e.jsx(f,{$selected:l.includes(s.value),onClick:()=>{const t=g(s.value);p({tags:t,tagChoices:j,source:"inline"})},children:s.label},s.value)),e.jsx(f,{onClick:()=>{o==null||o(),p.cancel(),r("modal")},children:e.jsx(c,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),m==="modal"&&e.jsxs(P,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:M??e.jsx(c,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{h([]),r(u?"closed":"inline"),u&&(a==null||a())},showCloseButton:!0,primaryButton:e.jsx(A,{color:"primary",disabled:l.length===0&&!x&&!S,onClick:v,children:e.jsx(c,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[e.jsx("div",{className:"flex flex-col gap-6",children:T.map(s=>e.jsxs("div",{children:[T.length>1&&e.jsx("div",{className:"mb-3 text-sm font-semibold",children:s}),e.jsx("div",{className:"flex flex-wrap gap-3",children:k[s].map(t=>e.jsx(f,{$selected:l.includes(t.value),onClick:()=>g(t.value),children:t.label},t.value))},s)]},s))}),e.jsx(U,{name:"feedback",type:"text",className:"mt-6",placeholder:B.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:x??"",onChange:s=>C(s.target.value),onPressEnter:v}),I]})]})}const f=E.button`
  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary
  ${({$selected:i})=>i&&"!bg-token-text-primary !text-token-main-surface-primary"}
`;export{q as I,f as T};
//# sourceMappingURL=of96tfkt8icl4kmf.js.map
