import{r,aJ as L,hu as T,dw as H,dx as I,dy as U,O as G,m as e,cR as Q,bD as V,aE as g,x as F,ac as Z,hv as j,bA as B,a9 as E,c0 as c,bs as q,en as $,bV as W,N as z,cQ as J,ef as K,aL as O,D as Y}from"./krztd3t6ncse43d8.js";import{B as u,e as X,S as ee}from"./n0p1zife6ph5gs73.js";import{gD as k,aY as te,fP as se,bc as ne,k5 as R,k6 as ae,k7 as oe,eI as ie}from"./jdhd0kwf4sgg62y9.js";import{S as re}from"./dinhnpvd98xxfk1b.js";import{S as l}from"./nm9vzqnj0187n4cp.js";import{L as f}from"./fclu4wswjj2r2nt8.js";import{u as le}from"./laxj7m03o7r3u47h.js";import{u as ce,b as y,d as i,c as de,I as ue,e as he}from"./fiwep407990vhkqy.js";import{S as me}from"./ewwbfyzusdoot6ic.js";const ge=s=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 7C12.5523 7 13 7.44772 13 8V11H16C16.5523 11 17 11.4477 17 12C17 12.5523 16.5523 13 16 13H13V16C13 16.5523 12.5523 17 12 17C11.4477 17 11 16.5523 11 16V13H8C7.44772 13 7 12.5523 7 12C7 11.4477 7.44772 11 8 11H11V8C11 7.44772 11.4477 7 12 7Z",fill:"currentColor"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.5 6C2.5 4.067 4.067 2.5 6 2.5H18C19.933 2.5 21.5 4.067 21.5 6V18C21.5 19.933 19.933 21.5 18 21.5H6C4.067 21.5 2.5 19.933 2.5 18V6ZM6 4.5C5.17157 4.5 4.5 5.17157 4.5 6V18C4.5 18.8284 5.17157 19.5 6 19.5H18C18.8284 19.5 19.5 18.8284 19.5 18V6C19.5 5.17157 18.8284 4.5 18 4.5H6Z",fill:"currentColor"})),xe="https://openai.com/index/searchgpt-prototype/",b={debug_mode:!1,base_config:u.SCALLION,completion_model:"production",eval_preset:"production",use_labrador:!0,show_image_to_model:!0,emulated_location:void 0,emulated_date:void 0};function Se({children:s,...t}){return e.jsx(l.Content,{...t,className:g("z-50",t.className),children:s})}function fe(s){return F({mutationFn:X,onSuccess:s})}function Ze({onClose:s}){const[t,n]=T(),{data:a}=H(I.TrainingAllowed),o=U(),d=G(),x=fe(()=>d.success("All search logs have been deleted",{duration:3})),[h,P]=ce(),w=le();return e.jsx(Q,{isOpen:!0,onClose:s,type:"success",size:"custom",className:"max-w-2xl",title:"SearchGPT Settings",showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs(C,{children:[e.jsx(f,{htmlFor:"theme",className:"text-sm",children:"Theme"}),e.jsxs(l.Root,{value:t,onValueChange:n,children:[e.jsxs(l.Trigger,{id:"theme",children:[e.jsx(l.Value,{}),e.jsx(l.Icon,{})]}),e.jsx(l.Portal,{children:e.jsxs(Se,{children:[e.jsx(l.Item,{value:"light",children:"Light"}),e.jsx(l.Item,{value:"dark",children:"Dark"}),e.jsx(l.Item,{value:"system",children:"System"})]})})]})]}),e.jsxs("div",{className:"flex flex-col border-t border-token-border-medium pt-1",children:[e.jsxs(C,{children:[e.jsx(f,{htmlFor:"location",className:"text-sm",children:"Share precise location"}),e.jsx(k,{onChange:p=>{P({...h,useLocation:p})},enabled:h.useLocation,disabled:!w||w==="denied",label:"Use location from browser"})]}),e.jsx("div",{className:"text-xs text-token-text-secondary",children:"Improve searches using precise location data from your device e.g. “restaurants near me” will try to show you restaurants near your current location. (When precise location is off, we’ll still use general location info based on your IP address so we can help you search local weather, etc.)"})]}),e.jsxs("div",{className:"flex flex-col border-t border-token-border-medium pt-1",children:[e.jsxs(C,{children:[e.jsx(f,{htmlFor:"trainingAllowed",className:"text-sm",children:"Improve search for everyone"}),e.jsx(k,{onChange:p=>{o.mutate({setting:I.TrainingAllowed,value:p})},enabled:a??!0,label:"Use location from browser"})]}),e.jsxs("div",{className:"text-xs text-token-text-secondary",children:["Allow your conversations to be used to improve our search functionality, which makes our services better for you and everyone who uses them. We take steps to protect your privacy."," ",e.jsx("a",{className:"underline",href:"https://openai.com/policies/privacy-policy/",target:"_blank",rel:"noreferrer",children:"Learn more"})]})]}),e.jsx("div",{className:"flex flex-col border-t border-token-border-medium pt-2",children:e.jsxs(C,{children:[e.jsx(f,{htmlFor:"deleteLogs",className:"text-sm",children:"Delete search logs"}),e.jsx(V,{color:"danger",loading:x.isPending,onClick:()=>x.mutate(),children:"Delete All"})]})})]})})}const C=L.div`flex justify-between items-center gap-2 min-h-[36px]`;var Ce=(s=>(s[s.InitialPending=0]="InitialPending",s[s.Active=1]="Active",s))(Ce||{});class S extends Z()(t=>({queryInput:t?.initialQuery??"",followupQueryInput:"",initialQuery:t?.initialQuery??void 0,shouldShowComposer:!1,agentSettingsOverrides:t?.initialAgentSettingsOverrides??je(t?.isUserAdmin??!1),currentSearch:t?.initialQuery?{config:{threadId:t.initialThreadId??null,query:t.initialQuery,isFollowup:!1,querySource:"url_query"},state:0}:void 0,lastPrefetchedQuery:void 0,shouldShowAddToHomePopover:!1,hasSearched:localStorage.getItem("oai/apps/hasSearched")==="1",hasDismissedExtensionUpsell:localStorage.getItem("oai/apps/dismissExtensionUpsell")==="1",hasDismissedAddToHome:localStorage.getItem("oai/apps/dismissAddToHome")==="1"})){static selectQueryInput=t=>t.queryInput;static selectFollowupQueryInput=t=>t.followupQueryInput;static selectAgentSettingsOverrides=t=>t.agentSettingsOverrides;static selectLastSubmittedQuery=t=>t.currentSearch?.config.query;static selectWasCurrentSearchPrefetched=t=>t.currentSearch?.config.query===t.lastPrefetchedQuery;static selectProductsSearchContext=t=>t.productsSearchContext;setQueryInput(t){this.setState({queryInput:t})}setFollowupQueryInput(t){this.setState({followupQueryInput:t})}setCurrentSearch(t){this.setState({currentSearch:t})}setLastPrefetchedQuery(t){this.setState({lastPrefetchedQuery:t})}setProductsSearchContext(t){this.setState({productsSearchContext:t})}handlePendingInitialSearch(){const t=this.getState();if(t.currentSearch?.state===0){const n={...t.currentSearch,state:1};return this.setState({currentSearch:n}),n}}updateAgentSettingsOverrides(t){const n={...this.getState().agentSettingsOverrides,...t};this.setState({agentSettingsOverrides:n}),ye(n)}markHasSearched(){this.getState().hasSearched||(this.setState({hasSearched:!0}),localStorage.setItem("oai/apps/hasSearched","1"))}dismissExtensionUpsell(){this.getState().hasDismissedExtensionUpsell||(this.setState({hasDismissedExtensionUpsell:!0}),localStorage.setItem("oai/apps/dismissExtensionUpsell","1"))}dismissAddToHomePrompt(){this.getState().hasDismissedAddToHome||(this.setState({hasDismissedAddToHome:!0}),localStorage.setItem("oai/apps/dismissAddToHome","1"))}}function Be({children:s,serverProps:t}){return e.jsx(S.Provider,{store:()=>new S(t),children:s})}const N="agent_overrides";function pe(s,t){switch(s){case"scallion-prod":return u.SCALLION;case"scallion-rc":return u.SCALLION_RC;case"scallion":return t?u.SCALLION_RC:u.SCALLION}}function ve(s){switch(s){case u.SCALLION:return"scallion-prod";case u.SCALLION_RC:return"scallion-rc"}}function je(s,t){let n={};try{const a=j.getCookie(N,t);let o={};typeof a=="string"&&(o=JSON.parse(a)),n={...o,base_config:o.base_config?pe(o.base_config,s):o.base_config}}catch{}return{...b,...n}}function ye(s){if(s===b)j.deleteCookie(N);else{const t={...s,base_config:ve(s.base_config)};j.setCookie(N,JSON.stringify(t),{maxAge:te})}}function _(){return B("2000076788")?.value}const m=c.Item;function Ne(){const s=S.useStore();return oe()?e.jsx(m,{onClick:()=>{s.setState({shouldShowAddToHomePopover:!0})},icon:e.jsx(ge,{className:"icon-md-heavy text-token-text-primary"}),children:"Add to home screen"}):null}function be({className:s,iconSize:t,children:n}){_();const a=E();return e.jsxs(c.Root,{modal:!1,children:[e.jsx(D,{className:s,iconSize:t,children:n}),e.jsx(c.Portal,{children:e.jsxs(c.Content,{collisionPadding:10,children:[e.jsx(m,{onClick:()=>y.toggleSettingsModalOpen(),icon:e.jsx(se,{className:"icon-md-heavy text-token-text-primary"}),children:"Settings"}),e.jsx(m,{onClick:()=>window.open(xe,"_blank"),icon:e.jsx(re,{className:"icon-md-heavy text-token-text-primary"}),children:"About SearchGPT"}),e.jsx(m,{onClick:()=>window.open("https://chatgpt.com","_blank"),icon:e.jsx(ne,{className:"icon-md-heavy text-token-text-primary"}),children:"Open ChatGPT"}),e.jsx(Ne,{}),e.jsx(c.Separator,{}),e.jsx(m,{onClick:()=>a("/auth/logout"),icon:e.jsx(R,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"}),!1]})})]})}function we({className:s,iconSize:t}){const n=E();return e.jsxs(c.Root,{modal:!1,children:[e.jsx(D,{className:s,iconSize:t}),e.jsx(c.Portal,{children:e.jsx(c.Content,{collisionPadding:10,children:e.jsx(m,{onClick:()=>n("/auth/logout"),icon:e.jsx(R,{className:"icon-md-heavy text-token-text-primary"}),children:"Log out"})})})]})}function D({className:s,iconSize:t,children:n}){return e.jsx(c.Trigger,{className:"group border-0 !bg-transparent p-0",children:e.jsx("div",{className:"rounded-full",children:n??e.jsx(ae,{iconSize:t,className:s})})})}const Ie={[i.ReadyState.CONNECTING]:"Connecting",[i.ReadyState.OPEN]:"Open",[i.ReadyState.CLOSING]:"Closing",[i.ReadyState.CLOSED]:"Closed",[i.ReadyState.UNINSTANTIATED]:"Uninstantiated"};function ke({readyState:s,className:t}){const[n,a]=r.useState(!0);return r.useEffect(()=>{setTimeout(()=>{a(!0)},1e3)},[]),s===i.ReadyState.OPEN||!n?null:e.jsx("div",{className:g("flex items-center gap-2 p-3 text-sm",t),children:e.jsx(q,{label:Ie[s],sideOffset:0,side:"right",children:e.jsx("div",{className:g("h-2 w-2 rounded-full",(s===i.ReadyState.CLOSING||s===i.ReadyState.CONNECTING)&&"bg-yellow-500",(s===i.ReadyState.CLOSED||s===i.ReadyState.UNINSTANTIATED)&&"bg-red-500",n?"block":"hidden")})})})}const Ae=s=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.7836 2.47048C12.9676 2.76512 12.9855 3.13415 12.8309 3.44525C12.2994 4.51497 12 5.7211 12 7.00001C12 11.4183 15.5817 15 20 15L20.0575 14.9998C20.4049 14.9974 20.7287 15.1754 20.9127 15.47C21.0968 15.7647 21.1147 16.1337 20.9601 16.4448C19.325 19.7352 15.9279 22 12 22C6.47715 22 2 17.5229 2 12C2 6.50107 6.43841 2.03886 11.9284 2.00027C12.2758 1.99783 12.5995 2.17584 12.7836 2.47048ZM10.4099 4.15803C6.75344 4.8954 4 8.12619 4 12C4 16.4183 7.58172 20 12 20C14.587 20 16.8886 18.7721 18.3516 16.8648C13.6131 16.0789 10 11.9614 10 7.00001C10 6.01361 10.1431 5.05953 10.4099 4.15803Z",fill:"currentColor"})),Le=s=>r.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 1C12.5523 1 13 1.44772 13 2V4C13 4.55228 12.5523 5 12 5C11.4477 5 11 4.55228 11 4V2C11 1.44772 11.4477 1 12 1ZM4.22183 4.22183C4.61235 3.8313 5.24551 3.8313 5.63604 4.22183L7.05025 5.63604C7.44078 6.02656 7.44078 6.65973 7.05025 7.05025C6.65973 7.44078 6.02656 7.44078 5.63604 7.05025L4.22183 5.63604C3.8313 5.24551 3.8313 4.61235 4.22183 4.22183ZM19.7782 4.22183C20.1687 4.61235 20.1687 5.24551 19.7782 5.63604L18.364 7.05025C17.9734 7.44078 17.3403 7.44078 16.9497 7.05025C16.5592 6.65973 16.5592 6.02656 16.9497 5.63604L18.364 4.22183C18.7545 3.8313 19.3876 3.8313 19.7782 4.22183ZM12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9ZM7 12C7 9.23858 9.23858 7 12 7C14.7614 7 17 9.23858 17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12ZM1 12C1 11.4477 1.44772 11 2 11H4C4.55228 11 5 11.4477 5 12C5 12.5523 4.55228 13 4 13H2C1.44772 13 1 12.5523 1 12ZM19 12C19 11.4477 19.4477 11 20 11H22C22.5523 11 23 11.4477 23 12C23 12.5523 22.5523 13 22 13H20C19.4477 13 19 12.5523 19 12ZM7.05025 16.9497C7.44078 17.3403 7.44078 17.9734 7.05025 18.364L5.63604 19.7782C5.24551 20.1687 4.61235 20.1687 4.22183 19.7782C3.8313 19.3876 3.8313 18.7545 4.22183 18.364L5.63604 16.9497C6.02656 16.5592 6.65973 16.5592 7.05025 16.9497ZM16.9497 16.9497C17.3403 16.5592 17.9734 16.5592 18.364 16.9497L19.7782 18.364C20.1687 18.7545 20.1687 19.3876 19.7782 19.7782C19.3877 20.1687 18.7545 20.1687 18.364 19.7782L16.9497 18.364C16.5592 17.9734 16.5592 17.3403 16.9497 16.9497ZM12 19C12.5523 19 13 19.4477 13 20V22C13 22.5523 12.5523 23 12 23C11.4477 23 11 22.5523 11 22V20C11 19.4477 11.4477 19 12 19Z",fill:"currentColor"}));function v({label:s,labelSide:t="right",className:n,onClick:a,children:o,...d}){return e.jsx($,{label:s,sideOffset:0,side:t,disabled:!s,children:e.jsx("button",{onClick:a,className:g("flex items-center justify-center p-1.5 text-token-text-tertiary hover:text-token-text-primary",n),...d,children:o})})}function A(s,t){return Object.keys(s).reduce((n,a)=>(J(s[a],t[a])||(n[a]=t[a]),n),{})}function Te(){const s=W(),[,t]=T(),n=S.useState(S.selectAgentSettingsOverrides),[a]=de(),o=A(b,n),d=A(ue,a),x={...o,...d},h=Object.keys(x).length>0;return e.jsxs(e.Fragment,{children:[e.jsx(v,{"data-testid":"sonic-debug-button",label:"Debug (Internal)",onClick:()=>y.toggleDebugModalOpen(),children:e.jsx(me,{className:"icon-sm-heavy"})}),e.jsx(v,{label:"Theme (Internal)",onClick:()=>{t(s?"light":"dark")},children:e.jsx(z,{children:s?e.jsx(Le,{className:"icon-md-heavy"}):e.jsx(Ae,{className:"icon-md-heavy"})})}),e.jsx(v,{label:h?["Config (Internal) - Changes:",Object.keys(x).join(", ")].join(`
`):"Config (Internal)",onClick:()=>y.toggleInternalSettingsModalOpen(),children:e.jsx(ie,{className:g(h?"icon-lg-heavy":"icon-md-heavy",{"text-red-500":h})})})]})}function Ee({hideReadyState:s=!1,onResultsPage:t=!1,children:n}){const{readyState:a,resetSearch:o}=he(),d=_();return e.jsxs("div",{className:g("hidden w-20 shrink-0 flex-col items-center justify-between border-r py-6 sm:flex",t?"relative border-token-border-light":"absolute bottom-0 left-0 top-0 border-transparent"),children:[e.jsxs(K,{onClick:()=>o(),to:"/search",className:"text-token-text-primary hover:text-token-text-secondary",title:"Go to SearchGPT",children:[e.jsx(O,{className:"h-8 w-8"}),d&&!s&&e.jsx(ke,{readyState:a})]}),d&&e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsx(Te,{})}),e.jsx("div",{className:"absolute top-1/2 -translate-y-1/2",children:n})]})}function Oe(){return e.jsx("div",{className:"absolute right-5 top-5 hidden sm:block",children:e.jsx(be,{className:"h-8 w-8"})})}function qe(){return e.jsx(M,{$side:"left",children:e.jsx(O,{className:"h-8 w-8"})})}function $e({className:s}){return e.jsx(M,{$side:"right",className:`${s}`,children:e.jsx(we,{className:"h-8 w-8"})})}const M=L.div`absolute ${s=>s.$side==="left"?"left-5":"right-5"} bottom-5 top-5 z-10 w-10 flex-col justify-between items-center hidden sm:flex`;function Re({children:s}){return e.jsx("div",{className:"flex h-full w-full items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-1 text-sm font-semibold text-token-text-tertiary",children:[e.jsx(ee,{className:"icon-2xl"}),s]})})}function _e({onClickRetry:s,children:t}){return e.jsxs(Re,{children:[e.jsxs("div",{children:["Error."," ",e.jsx("button",{onClick:s,className:"inline font-semibold text-token-text-primary hover:opacity-70",children:"Try again?"})]}),t]})}function We({resetError:s,componentStack:t,error:n}){return r.useEffect(()=>{Y.addError(n)},[n]),e.jsxs(_e,{onClickRetry:s,children:[e.jsx("div",{className:"fixed left-2 top-2",children:e.jsx(Ee,{})}),e.jsx("div",{className:"fixed right-2 top-2",children:e.jsx(Oe,{})}),!1]})}export{be as A,_e as D,Ze as E,We as G,qe as L,Oe as R,Be as S,S as a,$e as b,xe as c,Ee as d,Ce as e,Re as f,_ as u};
//# sourceMappingURL=kmoulngzzq2c58vr.js.map
