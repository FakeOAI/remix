import{r as h,bv as k,l,fz as H,cZ as K,bw as T,a1 as W,aH as U,bp as $,ch as F,eR as v,fA as z,V as X,fB as G,fC as V,bU as Q,fD as Y,fE as Z}from"./dr7d3iwdkso0acad.js";import{T as J}from"./gfbiklbu7iwavqxk.js";import{bL as ee,bM as te}from"./nk93elwanh2qmq79.js";import{jA as ne,cj as se,ht as re,hv as oe,T as S}from"./dmeh4acfgftb4ocn.js";import{e as ie}from"./iv84q11r14kab89f.js";import{u as ce}from"./mdvtv1mc8g2bqrsl.js";import{d as le,a as ae,i as ue}from"./mhaqcfmmdyzdbeu3.js";import{a as de}from"./8pfb0n8794aflxhe.js";import{C as x}from"./lu206ujtbbqbzmfv.js";import"./l97vil97vij75d6c.js";import"./fs94t0nwpxhmz7ny.js";import"./hy5i8xpuojx9el7d.js";import"./oj5tgfeg398yhzr0.js";import"./ctrx0vgo31qa9ogh.js";import"./nq80e3tcpxxq4d3f.js";import"./nl6ip7vqdicyo7ft.js";import"./f3crnwkkooc1qt8j.js";import"./g5r4uw1ha4jdomj8.js";import"./hqsn6fl6ox5vdywd.js";import"./dnerd8yjozxoav5t.js";import"./h0b0g9dhtxr8nqps.js";import"./b1hq3c1bpnuzezc2.js";import"./kk83ngqx38127x2h.js";import"./d1veu52dtlvwcp39.js";import"./kjb8it55yehajb6f.js";import"./mhpy1qyey3xezj1x.js";import"./h62pe8fe08qj5t7t.js";import"./imbbv5wyb3glk606.js";import"./kfk2tyi4iksp0sol.js";import"./gb15fzh9avxbwr73.js";import"./h2xl7y1tmngskeb7.js";import"./oa2dss9sig21dsm0.js";import"./mb3598k4l6kvjexj.js";function O(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function fe(e,t){e.head.querySelectorAll("link, style").forEach(o=>{O(o)&&t.head.appendChild(o.cloneNode(!0))});const s=new WeakMap,r=new MutationObserver(o=>{o.forEach(n=>{n.type==="childList"&&(n.addedNodes.forEach(i=>{if(O(i)){const c=t.head.appendChild(i.cloneNode(!0));if(s.set(i,c),i instanceof HTMLStyleElement&&i.dataset.emotion){const{sheet:u}=i,{sheet:d}=c;if(u&&d)for(const f of u.cssRules)d.insertRule(f.cssText)}}}),n.removedNodes.forEach(i=>{const c=s.get(i);c&&t.head.removeChild(c)}))})});return r.observe(e.head,{childList:!0}),()=>{r.disconnect()}}function me(e,t){for(const r of e.attributes)t.setAttribute(r.name,r.value);const s=new MutationObserver(r=>{r.forEach(o=>{if(o.type==="attributes"&&o.attributeName!=null){const n=e.getAttribute(o.attributeName);n==null?t.removeAttribute(o.attributeName):t.setAttribute(o.attributeName,n)}})});return s.observe(e,{attributes:!0}),()=>{s.disconnect()}}const he=e=>{const t=h.useRef(!1);h.useEffect(()=>{t.current||(e(),t.current=!0)},[e])};function ge({children:e,target:t="_blank",features:s}){const[r,o]=h.useState(null);return he(()=>{const n=window.open("about:blank",t,s);if(!n){K.error("Unable to create child window");return}fe(document,n.document),me(document.documentElement,n.document.documentElement),o(n);function i(){n?.close()}return window.addEventListener("unload",i),()=>{window.removeEventListener("unload",i),n.close()}}),r&&k.createPortal(l.jsx(H,{window:r,children:e}),r.document.body)}const E=h.createContext(void 0),pe={};E.Provider;const Ce=()=>h.useContext(E)?h.useContext(E):pe,w=typeof window>"u"?global:window,y="@griffel/";function be(e,t){return w[Symbol.for(y+e)]||(w[Symbol.for(y+e)]=t),w[Symbol.for(y+e)]}const _=be("DEFINITION_LOOKUP_TABLE",{}),b="data-make-styles-bucket",Se="data-priority",R=7,N="___",we=N.length+R,ye=0,ve=1;function xe(e){const t=e.length;if(t===R)return e;for(let s=t;s<R;s++)e+="0";return e}function B(e,t,s=[]){return N+xe(ne(e+t))}function P(e,t){let s="",r="";for(const o in e){const n=e[o];if(n===0){r+=o+" ";continue}const i=Array.isArray(n),c=t==="rtl"?(i?n[1]:n)+" ":(i?n[0]:n)+" ";s+=c,r+=c}return[s.slice(0,-1),r.slice(0,-1)]}function I(e,t){const s={};for(const r in e){const[o,n]=P(e[r],t);if(n===""){s[r]="";continue}const i=B(n,t),c=i+(o===""?"":" "+o);_[i]=[e[r],t],s[r]=c}return s}const j={};function Ee(){let e=null,t="",s="";const r=new Array(arguments.length);for(let a=0;a<arguments.length;a++){const g=arguments[a];if(typeof g=="string"&&g!==""){const m=g.indexOf(N);if(m===-1)t+=g+" ";else{const C=g.substr(m,we);m>0&&(t+=g.slice(0,m)),s+=C,r[a]=C}}}if(s==="")return t.slice(0,-1);const o=j[s];if(o!==void 0)return t+o;const n=[];for(let a=0;a<arguments.length;a++){const g=r[a];if(g){const m=_[g];m&&(n.push(m[ye]),e=m[ve])}}const i=Object.assign.apply(Object,[{}].concat(n)),[c,u]=P(i,e),d=B(u,e,r),f=d+" "+c;return j[s]=f,_[d]=[i,e],t+f}function _e(e){return Array.isArray(e)?e:[e]}function Re(e,t,s,r){const o=[];if(r[b]=t,r[Se]=String(s),e)for(const i in r)e.setAttribute(i,r[i]);function n(i){return e?.sheet?e.sheet.insertRule(i,e.sheet.cssRules.length):o.push(i)}return{elementAttributes:r,insertRule:n,element:e,bucketName:t,cssRules(){return e?.sheet?Array.from(e.sheet.cssRules).map(i=>i.cssText):o}}}const Ne=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],A=Ne.reduce((e,t,s)=>(e[t]=s,e),{});function Te(e,t,s){return(e==="m"?e+t:e)+s}function Oe(e,t,s,r,o={}){var n,i;const c=e==="m",u=(n=o.m)!==null&&n!==void 0?n:"0",d=(i=o.p)!==null&&i!==void 0?i:0,f=Te(e,u,d);if(!r.stylesheets[f]){const a=t&&t.createElement("style"),g=Re(a,e,d,Object.assign({},r.styleElementAttributes,c&&{media:u}));r.stylesheets[f]=g,t&&a&&t.head.insertBefore(a,je(t,s,e,r,o))}return r.stylesheets[f]}function Ie(e,t,s){var r,o;const n=t+((r=s.m)!==null&&r!==void 0?r:""),i=e.getAttribute(b)+((o=e.media)!==null&&o!==void 0?o:"");return n===i}function je(e,t,s,r,o={}){var n,i;const c=A[s],u=(n=o.m)!==null&&n!==void 0?n:"",d=(i=o.p)!==null&&i!==void 0?i:0;let f=p=>c-A[p.getAttribute(b)],a=e.head.querySelectorAll(`[${b}]`);if(s==="m"){const p=e.head.querySelectorAll(`[${b}="${s}"]`);p.length&&(a=p,f=q=>r.compareMediaQueries(u,q.media))}const g=p=>Ie(p,s,o)?d-Number(p.getAttribute("data-priority")):f(p),m=a.length;let C=m-1;for(;C>=0;){const p=a.item(C);if(g(p)>0)return p.nextSibling;C--}return m>0?a.item(0):t?t.nextSibling:null}function D(e,t){try{e.insertRule(t)}catch{}}let Ae=0;const De=(e,t)=>e<t?-1:e>t?1:0;function Le(e=typeof document>"u"?void 0:document,t={}){const{classNameHashSalt:s,unstable_filterCSSRule:r,insertionPoint:o,styleElementAttributes:n,compareMediaQueries:i=De}=t,c={classNameHashSalt:s,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(n),compareMediaQueries:i,id:`d${Ae++}`,insertCSSRules(u){for(const d in u){const f=u[d];for(let a=0,g=f.length;a<g;a++){const[m,C]=_e(f[a]),p=Oe(d,e,o||null,c,C);c.insertionCache[m]||(c.insertionCache[m]=d,r?r(m)&&D(p,m):D(p,m))}}}};return c}const Me=()=>{const e={};return function(s,r){e[s.id]===void 0&&(s.insertCSSRules(r),e[s.id]=!0)}};function We(e,t,s=Me){const r=s();let o=null,n=null;function i(c){const{dir:u,renderer:d}=c,f=u==="ltr";return f?o===null&&(o=I(e,u)):n===null&&(n=I(e,u)),r(d,t),f?o:n}return i}function Fe(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const L=T.useInsertionEffect?T.useInsertionEffect:void 0,Be=()=>{const e={};return function(s,r){if(L&&Fe()){L(()=>{s.insertCSSRules(r)},[s,r]);return}e[s.id]===void 0&&(s.insertCSSRules(r),e[s.id]=!0)}},Pe=h.createContext(Le());function qe(){return h.useContext(Pe)}const ke=h.createContext("ltr");function He(){return h.useContext(ke)}function Ke(e,t){const s=We(e,t,Be);return function(){const o=He(),n=qe();return s({dir:o,renderer:n})}}const Ue=Ke({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),$e=(e,t)=>{const{title:s,primaryFill:r="currentColor",...o}=e,n={...o,title:void 0,fill:r},i=Ue(),c=Ce();return n.className=Ee(i.root,t?.flipInRtl&&c?.textDirection==="rtl"&&i.rtl,n.className),s&&(n["aria-label"]=s),!n["aria-label"]&&!n["aria-labelledby"]?n["aria-hidden"]=!0:n.role="img",n},ze=(e,t,s,r)=>{const o=t==="1em"?"20":t,n=h.forwardRef((i,c)=>{const u={...$e(i,{flipInRtl:void 0}),ref:c,width:t,height:t,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"};return h.createElement("svg",u,...s.map(d=>h.createElement("path",{d,fill:u.fill})))});return n.displayName=e,n},Xe=ze("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function Ge({onNewThread:e,onOpenInMainWindow:t,onClose:s}){const r=X(),o=r.formatMessage({id:"cHkwhd",defaultMessage:"New chat"}),n=r.formatMessage({id:"BzpJ40",defaultMessage:"Open in Main Window"}),i=r.formatMessage({id:"63wWYx",defaultMessage:"Close"});return l.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex h-[32px] w-full justify-between",children:[l.jsx(S,{label:o,sideOffset:4,side:"bottom",children:l.jsx(M,{onClick:e,"aria-label":o,children:l.jsx(ee,{})})}),t&&l.jsx(S,{label:n,sideOffset:4,side:"bottom",className:"ml-auto",children:l.jsx(M,{onClick:t,"aria-label":n,children:l.jsx(te,{})})}),l.jsx(S,{label:i,sideOffset:4,side:"bottom",children:l.jsx(Ve,{onClick:s,"aria-label":i,children:l.jsx(Xe,{})})})]})}const M=W.button`flex h-full w-[46px] cursor-default items-center justify-center hover:bg-gray-200 active:bg-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-700`,Ve=W.button`flex h-full w-[46px] cursor-default items-center justify-center hover:bg-red-500 hover:text-white active:bg-red-400 active:text-white`;function Qe({onNewThread:e,onOpenInMainWindow:t,onClose:s,children:r}){const o=h.useRef(null);return h.useEffect(()=>{if(o.current){const n=o.current.ownerDocument,i=c=>{c.key==="Escape"&&!c.shiftKey&&!c.ctrlKey&&!c.metaKey&&v(!1)};return n.addEventListener("keydown",i),()=>{n.removeEventListener("keydown",i)}}},[]),l.jsxs("div",{className:"flex h-full w-full flex-col pt-8",ref:o,children:[l.jsx(Ge,{onNewThread:e,onOpenInMainWindow:t,onClose:s}),r]})}function Ye(){const e=x.useStore(),{clientThreadId:t}=x.useState();ce(t,{kind:U.PrimaryAssistant});const s=$(),r=le(n=>ae.resolveThreadId(t,n)),o=F();return h.useEffect(()=>{const n=()=>{o.document.getElementById("prompt-textarea")?.focus()};return o.addEventListener("focus",n),()=>{o.removeEventListener("focus",n)}},[o]),l.jsx(Qe,{onNewThread:()=>{e.newThread()},onOpenInMainWindow:r!==t||!ue(t)?()=>{s(`/c/${t}`),v(!1,{focusMainWindow:!0}),e.newThread()}:void 0,onClose:()=>{v(!1)},children:l.jsx(z,{children:l.jsx(se,{children:l.jsx(re,{clientThreadId:t,children:l.jsx(J,{clientThreadId:t,children:l.jsx(Ze,{clientThreadId:t})})})})})})}function Ze({clientThreadId:e}){const t=x.useStore(),s=F();return de({resetThreadAction:()=>t.newThread(),clientThreadId:e,focusPromptTextareaAction:()=>s.document.getElementById("prompt-textarea")?.focus()}),l.jsxs(l.Fragment,{children:[l.jsx(ie,{clientThreadId:e,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},e),l.jsx(oe,{clientThreadId:e})]})}function At(){G?.registerObserver(V)}function Dt(){const{value:e}=Q("3653083604");if(e)return l.jsx(ge,{features:`${Y}=${Z.COMPANION}`,children:l.jsx(Ye,{})})}export{Dt as DesktopChatBar,At as initDesktop};
//# sourceMappingURL=ki7b7r4hwc51azqz.js.map
