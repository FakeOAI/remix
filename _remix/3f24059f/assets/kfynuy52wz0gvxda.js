import{r as x,V as v,aK as I,l as e,W as U,Z as n,ex as F,bX as w,aN as _,a0 as D,a1 as B,a$ as Y,be as q,bU as X,m as E,h as se,j as V,a8 as ae}from"./dr7d3iwdkso0acad.js";import{u as K,c as k,d as te,a as ne}from"./eljpdu84qvojex8r.js";import{gw as m,j as G,gx as z,gy as Q,gz as Z,gA as ie,aA as le,cb as oe,I as re,gB as ce,cc as de,gC as ue,gD as W,T as J,bM as ge,bU as me}from"./dmeh4acfgftb4ocn.js";import{c as xe}from"./iej0cupg2dqkmejt.js";import{L as fe}from"./oj5tgfeg398yhzr0.js";import{B as pe,D as L}from"./fs94t0nwpxhmz7ny.js";import{a9 as he,bg as je,bq as Me,br as ve,F as be,C as ye,p as Se}from"./nk93elwanh2qmq79.js";import{a as Ne,b as we}from"./bjiex4jdu79qnlkg.js";import{a as Ce,d as A,e as O,g as H,f as Be,c as Ie,A as Pe}from"./i3h2zefxzuctzyk4.js";import{b as Le}from"./j0hi5wbj4hbk0prx.js";import"./mhaqcfmmdyzdbeu3.js";import"./dnerd8yjozxoav5t.js";import"./houi8rstn4p87qaa.js";import"./gfbiklbu7iwavqxk.js";import"./l97vil97vij75d6c.js";import"./hy5i8xpuojx9el7d.js";import"./ctrx0vgo31qa9ogh.js";import"./nq80e3tcpxxq4d3f.js";import"./kfk2tyi4iksp0sol.js";import"./exrv1rsxbcly0rx1.js";var C=(s=>(s.FLEXIBLE="month",s.ANNUAL="year",s))(C||{});const Te=xe(C);function Ee({isOpen:s,onClose:i,initialTeamBillingType:a,renewalDate:t,accountId:l}){const[r,o]=x.useState(a),[c,u]=x.useState(!1),f=function(){u(!c)},[h,g]=x.useState(!1),j=ke[r],M=v(),b=I(),y=K(l),S=async()=>{g(!0);try{await y.mutateAsync({accountId:l,updatedPriceInterval:r==="month"?"month":"year",updatedSeats:void 0}),g(!1),b.success(M.formatMessage({id:"teamBilling.successfullyUpdatedSubscription",defaultMessage:"Your subscription was updated successfully"}),{hasCloseButton:!0}),u(!1),i()}catch{b.warning(M.formatMessage({id:"teamBilling.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0})}finally{g(!1)}};return e.jsx(U,{type:"success",isOpen:s,onClose:()=>{u(!1),o(a),i()},size:"custom",className:"max-w-xl",noPadding:!0,title:c?M.formatMessage({id:"teamBilling.changeBillingScheduleConfirmTitle",defaultMessage:"Confirm changes"}):M.formatMessage({id:"teamBilling.changeBillingScheduleTitle",defaultMessage:"Change billing schedule"}),showCloseButton:!0,children:c?e.jsx(De,{selectedPlan:r,initialTeamBillingType:a,renewalDate:t,selectedPlanData:j,handleUpdate:S,isUpdating:h}):e.jsx(_e,{setSelectedPlan:o,selectedPlan:r,initialTeamBillingType:a,toggleConfirmPage:f,renewalDate:t})})}function _e({selectedPlan:s,setSelectedPlan:i,initialTeamBillingType:a,toggleConfirmPage:t,renewalDate:l}){const r=v();return e.jsxs("div",{children:[e.jsx("div",{className:"grid grid-flow-row grid-cols-2",children:e.jsxs(G,{className:"col-span-2 grid md:col-span-2 md:grid-cols-2",defaultValue:s,onValueChange:o=>{Te(o)&&i(o)},children:[e.jsx(z,{billingType:"month",...Q}),e.jsx(z,{billingType:"year",...Z})]})}),e.jsx("hr",{}),e.jsxs("div",{className:"m-4 flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(n,{...m.changeEffectDate,values:{date:e.jsx(F,{value:l,year:"numeric",month:"long",day:"numeric"})}})}),e.jsx(w,{title:r.formatMessage(m.continueToPricePreview),disabled:s===a,color:"primary",onClick:()=>{t()}})]})]})}function De({initialTeamBillingType:s,selectedPlan:i,renewalDate:a,selectedPlanData:t,handleUpdate:l,isUpdating:r}){const o=v();return e.jsxs("div",{className:"p-4",children:[e.jsx("span",{className:"text-sm",children:e.jsx(n,{...m.confirmPageChangeEffectDate,values:{current_plan:s==="month"?"Flexible (monthly)":"Annual",new_plan:i==="month"?"Flexible (monthly)":"Annual",date:e.jsx(F,{value:a,year:"numeric",month:"long",day:"numeric"})}})}),e.jsxs("div",{className:"mt-4 flex flex-col bg-token-main-surface-secondary p-4",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{...t.name})}),e.jsx("span",{className:"text-sm",children:e.jsx(n,{...t.cost,values:{s:(...c)=>e.jsx(ie,{children:c})}})}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(n,{...t.structure})})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx(w,{title:o.formatMessage(m.confirmChange),color:"primary",onClick:l,loading:r})})]})}const ke={month:{name:m.flexiblePlanName,cost:m.flexiblePlanCost,structure:m.teamsCostStructure},year:{name:m.annualPlanName,cost:m.annualPlanCost,structure:m.teamsCostStructure}};function ze({isOpen:s,onClose:i}){const a=v(),t=I(),{data:l,isLoading:r}=k(),o=_(),c=te(o?.id),u=le(),[f,h]=x.useState(""),[g,j]=x.useState(!1),M=u?.email&&f.toLowerCase()==u.email.toLowerCase(),[b,y]=x.useState(l&&!l.will_renew);if(r||!o||!l)return null;const S=async()=>{j(!0);try{await c.mutateAsync(o.id),y(!0)}catch{t.warning(a.formatMessage(p.errorCancellingSubscription),{hasCloseButton:!0})}finally{j(!1)}};return e.jsx(U,{type:"success",onClose:i,showCloseButton:!0,isOpen:s,className:"",title:e.jsx("span",{className:"text-lg",children:e.jsx(n,{...p.cancelPlan})}),children:b?e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base font-semibold text-token-text-primary",children:e.jsx(n,{...p.successfullyCanceled})}),l.active_until!=null&&e.jsx("p",{className:"text-sm text-token-text-primary",children:e.jsx(n,{...p.retainUntil,values:{expiryDate:new Date(l.active_until)}})}),e.jsx("div",{className:"mt-6 flex w-full flex-row justify-end",children:e.jsx(w,{title:a.formatMessage(p.doneButton),color:"primary",onClick:i,disabled:g})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4",children:[e.jsx(oe,{src:o.data.profilePictureUrl,size:"large"}),e.jsxs("div",{className:"flex-col",children:[e.jsx("p",{className:"font-semibold",children:o.data.name}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(n,{...p.membersCount,values:{count:l.seats_entitled}})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"mb-2 text-base font-semibold text-token-text-primary",children:e.jsx(n,{...p.areYouSure})}),e.jsxs("ul",{className:"list-disc pl-5 text-sm text-token-text-secondary",children:[e.jsx("li",{className:"my-2",children:e.jsx(n,{...p.dataUnavailable})}),l.active_until!=null&&e.jsx("li",{className:"my-2",children:e.jsx(n,{...p.retainUntil,values:{expiryDate:new Date(l.active_until)}})}),e.jsx("li",{className:"my-2",children:e.jsx(n,{...p.retainEmailAccess})})]})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"mb-2 text-base font-semibold text-token-text-primary",children:e.jsx(n,{...p.enterEmailToConfirm})}),e.jsx(re,{type:"text",name:"user-email",placeholder:"abcd@acme.com",onChange:N=>{h(N.target.value)}})]})]}),e.jsxs("div",{className:"mt-6 flex w-full flex-row justify-end",children:[e.jsx(w,{title:a.formatMessage(p.keepSubscriptionButton),onClick:i,disabled:g}),e.jsx(w,{title:a.formatMessage(p.cancelSubscriptionButton),onClick:S,disabled:!M,loading:g,color:"danger",className:"ml-2"})]})]})})}const p=D({dataUnavailable:{id:"cancelTeamPlanModal.dataUnavailable",defaultMessage:"All workspace data including chat history and settings will not be available."},cancelPlan:{id:"cancelTeamPlanModal.cancelPlan",defaultMessage:"Cancel subscription"},retainUntil:{id:"cancelTeamPlanModal.retainUntil",defaultMessage:"You will retain access to the workspace until the end of your billing cycle on {expiryDate, date, long}."},retainEmailAccess:{id:"cancelTeamPlanModal.retainEmailAccess",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},errorCancellingSubscription:{id:"cancelTeamPlanModal.errorCancellingSubscription",defaultMessage:"There was a problem cancelling your subscription."},areYouSure:{id:"cancelTeamPlanModal.areYouSure",defaultMessage:"Are you sure?"},enterEmailToConfirm:{id:"cancelTeamPlanModal.enterEmailToConfirm",defaultMessage:"Enter your Email address to confirm"},emailPlaceholder:{id:"cancelTeamPlanModal.emailPlaceholder",defaultMessage:"abcd@acme.com"},doneButton:{id:"cancelTeamPlanModal.doneButton",defaultMessage:"Done"},keepSubscriptionButton:{id:"cancelTeamPlanModal.keepSubscriptionButton",defaultMessage:"Keep subscription"},cancelSubscriptionButton:{id:"cancelTeamPlanModal.cancelSubscriptionButton",defaultMessage:"Cancel subscription"},successfullyCanceled:{id:"cancelTeamPlanModal.successfullyCanceled",defaultMessage:"You have successfully canceled your subscription."},membersCount:{id:"yourComponent.membersCount",defaultMessage:"{count, plural, one {# member} other {# members}}"}}),Ae=25*12,Oe=30,Ue=B.p`text-base font-semibold mb-3 mt-3`;function Fe({isOpen:s,onClose:i,initialTeamBillingType:a,initialSeats:t,accountId:l,renewalDate:r}){const o=v(),c=I(),[u,f]=x.useState(t),[h,g]=x.useState(!1),j=function(){g(!h)},[M,b]=x.useState(!1),y=We[a],S=a==="month"?Q:Z,N=K(l),P=async()=>{b(!0);try{await N.mutateAsync({accountId:l,updatedPriceInterval:void 0,updatedSeats:u}),b(!1),c.success(o.formatMessage({id:"teamBilling.successfullyUpdatedSubscription",defaultMessage:"Your subscription was updated successfully"}),{hasCloseButton:!0}),g(!1),i()}catch{c.warning(o.formatMessage({id:"teamBilling.errorUpdatingSubscription",defaultMessage:"There was a problem updating your subscription"}),{hasCloseButton:!0})}finally{b(!1)}};return e.jsx(U,{type:"success",isOpen:s,onClose:()=>{g(!1),f(t),i()},size:"custom",noPadding:!0,className:"max-w-xl",showCloseButton:!0,title:h?o.formatMessage({id:"teamsManageSeatsModal.title",defaultMessage:"Manage seats"}):o.formatMessage({id:"teamsManageSeatsModalConfirmPage.title",defaultMessage:"Review"}),children:h?e.jsx(Re,{numSeats:u,initialSeats:t,handleUpdate:P,isUpdating:M,renewalDate:r,accountId:l}):e.jsx($e,{initialTeamBillingType:a,selectedPlanBillingInfo:S,numSeats:u,initialSeats:t,setNumSeats:f,selectedPlanData:y,toggleConfirmPage:j})})}function $e({initialTeamBillingType:s,selectedPlanBillingInfo:i,numSeats:a,initialSeats:t,setNumSeats:l,selectedPlanData:r,toggleConfirmPage:o}){const c=v();return e.jsxs("div",{className:"grid grid-flow-row grid-cols-2",children:[e.jsx(G,{className:"col-span-2 grid md:col-span-1 md:grid-cols-1",defaultValue:s,children:e.jsx(z,{billingType:s,...i})}),e.jsxs("div",{className:"col-span-3 overflow-hidden border-l border-token-main-surface-tertiary bg-token-main-surface-secondary p-6 md:col-span-1",children:[e.jsx("label",{className:"mb-3 block text-base font-semibold",htmlFor:"seats",children:e.jsx(n,{...m.seatsTitle})}),e.jsx(ce,{numSeats:a,minSeats:t,setNumSeats:l}),e.jsx(de,{}),e.jsx(Ue,{children:e.jsx(n,{...m.summaryTitle})}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"mb-2",children:e.jsx(n,{...r.name})}),e.jsxs(ue,{children:[e.jsx(W,{children:e.jsx(n,{...r.billed})}),e.jsx(W,{children:e.jsx("b",{children:e.jsx(n,{...r.total,values:{totalCost:(a||0)*(s==="year"?Ae:Oe)}})})})]})]})]}),e.jsx("hr",{}),e.jsx("div",{className:"m-4 flex justify-end",children:e.jsx(w,{title:c.formatMessage({id:"teamsManageSeatsModal.continue",defaultMessage:"Continue"}),disabled:a===t,onClick:()=>{o()},color:"primary"})})]})}function Re({numSeats:s,initialSeats:i,renewalDate:a,handleUpdate:t,isUpdating:l,accountId:r}){const o=v(),{data:c,isError:u,isLoading:f}=ne(r,s);if(f)return e.jsx("div",{className:"flex items-center justify-center p-6",children:e.jsx(Y,{})});if(!(u||!c))return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"teamsManageSeatsModal.additionalSeats",defaultMessage:"{additionalSeats} additional seats",values:{additionalSeats:s-i}})}),e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"teamsManageSeatsModal.additionalSeatsTotal",defaultMessage:"${totalCost}",values:{totalCost:(c.total_amount/100).toFixed(2)}})})]}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(n,{id:"teamsManageSeatsModal.proratedAmountMessage",defaultMessage:"Prorated amount until next billing cycle"})}),e.jsx("span",{className:"mt-4 flex flex-col bg-token-main-surface-secondary p-4 text-sm text-token-text-secondary",children:e.jsx(n,{id:"teamsManageSeatsModal.chargeMessage",defaultMessage:"You will be charged for {numSeats} total seats at your next renewal on {date}",values:{numSeats:s,date:e.jsx(F,{value:a,year:"numeric",month:"long",day:"numeric"})}})}),e.jsx("hr",{className:"mt-4"}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"teamsManageSeatsModal.subTotal",defaultMessage:"Subtotal"})}),e.jsx("span",{children:e.jsx(n,{id:"teamsManageSeatsModal.subtotalPrice",defaultMessage:"${totalCost}",values:{totalCost:(c.amount_excluding_tax/100).toFixed(2)}})})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"teamsManageSeatsModal.tax",defaultMessage:"Tax"})}),e.jsx("span",{children:e.jsx(n,{id:"teamsManageSeatsModal.taxAmount",defaultMessage:"${tax}",values:{tax:(c.tax_amount/100).toFixed(2)}})})]}),e.jsxs("div",{className:"mt-2 flex justify-between",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"teamsManageSeatsModal.totalDueToday",defaultMessage:"Total due today"})}),e.jsx("span",{className:"font-semibold",children:e.jsx(n,{id:"teamsManageSeatsModal.totalDueTodayAmount",defaultMessage:"${totalCost}",values:{totalCost:(c.total_amount/100).toFixed(2)}})})]}),e.jsx("hr",{className:"mt-4"}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx(w,{title:o.formatMessage({id:"teamsManageSeatsModal.payNow",defaultMessage:"Pay now"}),color:"primary",onClick:t,loading:l})})]})}const We={month:{name:m.flexiblePlanSelected,billed:{id:"teamManageSeatsModal.flexiblePlanBilled",defaultMessage:"Price billed monthly",description:"Summary billing of selected plan"},total:m.flexiblePlanTotal},year:{name:m.annualPlanSelected,billed:{id:"teamManageSeatsModal.flexiblePlanBilled",defaultMessage:"Price billed annually",description:"Summary billing of selected plan"},total:m.annualPlanTotal}};function He({numInUse:s,numAllocated:i,isTeam:a,subscriptionWillRenew:t,subscriptionBillingPeriod:l,accountId:r,subscriptionRenewalDate:o}){const u=Math.max(i,s)>10?Ye:Ke,f=X("3954884439")?.value,[h,g]=x.useState(!1),j=function(){g(!h)},M=l==="monthly"?C.FLEXIBLE:C.ANNUAL;return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"mt-1 text-left text-sm",children:e.jsx(n,{...R.description,values:{num:`${s}/${i}`}})}),a&&t&&f&&e.jsx(q,{color:"secondary",className:"text-right",onClick:j,children:e.jsx(n,{id:"components.business.NumSeats.manageSeats",defaultMessage:"Manage seats"})}),e.jsx(Fe,{isOpen:h,onClose:j,initialTeamBillingType:M,initialSeats:i,accountId:r,renewalDate:o})]}),e.jsx(u,{numInUse:s,numAllocated:i})]})}function Ye({numAllocated:s,numInUse:i}){const a=v(),t=i>s,l=t?100:i/s*100,r=t?s/i*100:100;return e.jsx("div",{className:E("relative w-full rounded-full",t?"bg-orange-500":"bg-token-main-surface-primary"),children:e.jsxs("div",{className:"relative h-4",style:{width:`${r}%`},children:[e.jsx("div",{className:E("h-4 overflow-hidden rounded-l-full bg-green-600",i===s&&"rounded-r-full"),style:{width:`${l}%`}}),i!==s&&t&&e.jsx("div",{className:"absolute right-0 top-[-3px] bg-token-main-surface-primary",children:e.jsx(J,{label:a.formatMessage(R.dividerTooltip,{count:s}),children:e.jsx(ee,{className:"px-1 py-0.5"})})})]})})}const ee=({className:s})=>e.jsxs("div",{className:E("flex flex-col gap-0.5",s),children:[e.jsx(T,{}),e.jsx(T,{}),e.jsx(T,{}),e.jsx(T,{})]}),$=B.div`h-4 w-4 rounded-full`,qe=B($)`bg-green-600`,Xe=B($)`bg-token-main-surface-tertiary`,Ve=B($)`bg-orange-500`,T=B.span`w-[3px] h-[3px] bg-gray-400 dark:bg-gray-500 rounded-full`;function Ke({numAllocated:s,numInUse:i}){const a=v(),t=i>s,l=x.useMemo(()=>Array.from(Array(t?i:s).keys()),[t,s,i]);return e.jsx("div",{className:"flex items-center gap-2",children:l.map(r=>{let o=Ve,c=null;return r<i&&!t?o=qe:r<s&&!t&&(o=Xe),r===s-1&&(c=e.jsx(J,{label:a.formatMessage(R.dividerTooltip,{count:s}),children:e.jsx(ee,{})})),e.jsxs(e.Fragment,{children:[e.jsx(o,{},r),c]})})})}const R=D({dividerTooltip:{defaultMessage:"Your team has {count, plural, =0 {no seats} one {# seat} other {# seats}} purchased",id:"components.business.NumSeats.dividerTooltip"},description:{defaultMessage:"{num} seats in use",id:"components.business.NumSeats.description"}});function Ge(s,i){const a=v(),t=I();return se({queryKey:["organization-invoices",{...s,options:i}],queryFn:async()=>await V.getInvoices(s,i).catch(l=>{throw t.danger(a.formatMessage(Ze.invoicesLoadError,{error:l.message})),l}),enabled:"account_id"in s||"organization_id"in s})}function Qe(s){const i=_(),a=i?.id,t=i?.data.organizationId??void 0,l=i?.isEnterprisey();return Ge(l?{organization_id:t}:{account_id:a},s)}const Ze=D({invoicesLoadError:{id:"organizationBillingInfo.invoicesLoadError.0",defaultMessage:"Failed to load invoices. Contact support@openai.com if error persists."}});function Je(){const{data:s,isLoading:i,isError:a}=k(),t=_(),[l,r]=x.useState(!1),o=function(){r(!l)};if(i)return e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx(Y,{})});if(a||!s||!t)return null;const c=s.active_until!=null,u=s?.seats_in_use>s?.seats_entitled;return e.jsx(e.Fragment,{children:e.jsxs(A,{children:[e.jsx(O,{children:e.jsx(n,{...d.planTitle})}),e.jsx("hr",{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(H,{children:t?.isEnterprise()?c?e.jsx(n,{...d.activeEnterpriseLicense}):t?.isResellerHosted()?e.jsx(n,{...d.resellerHostedEnterpriseLicense}):e.jsx(n,{...d.pendingEnterpriseLicense}):t?.isEdu()?c?e.jsx(n,{...d.activeEduLicense}):t?.isResellerHosted()?e.jsx(n,{...d.resellerHostedEduLicense}):e.jsx(n,{...d.pendingEduLicense}):c?s.non_profit_org_discount_applied?e.jsx(n,{...d.activeTeamLicenseNonProfitOrg}):e.jsx(n,{...d.activeTeamLicense}):e.jsx(n,{...d.pendingTeamLicense})}),s.active_until!=null&&e.jsx(Be,{className:"mt-1",children:t?.isEnterprisey()?e.jsx(n,{...d.licenseExpiry,values:{expiryDate:new Date(s.active_until)}}):s.will_renew?e.jsx(n,{...d.renewalDate,values:{expiryDate:new Date(s.active_until)}}):e.jsx(n,{...d.deactivateDate,values:{expiryDate:new Date(s.active_until)}})})]}),e.jsx(es,{isOpen:l,onDropdownOpen:o})]}),e.jsx("hr",{}),c&&e.jsxs("div",{children:[e.jsx(H,{children:e.jsx(n,{...d.seatsTitle})}),e.jsx(ts,{isTeam:t?.isTeam()??!1,accountId:t.id}),t?.isTeam()&&u&&e.jsxs("span",{className:"text-sm text-token-text-secondary",children:[e.jsx(n,{...d.teamsAutochargeMessage}),e.jsx(fe,{className:"pl-1",openNewTab:!0,href:"https://help.openai.com/en/articles/8792536-manage-billing-on-the-chatgpt-team-subscription-plan",children:e.jsx(n,{...d.billingLearnMore})})]})]}),e.jsx("hr",{})]})})}function es({isOpen:s,onDropdownOpen:i}){const[a,t]=x.useState(!1),l=ae(),r=v(),o=I(),c=_(),{data:u}=k(),[f,h]=x.useState(!1),g=function(){h(!f)},[j,M]=x.useState(!1),b=function(){M(!j)},y=X("1318146997")?.value;if(!c||!c.isTeam()||!u)return;const S=async()=>{t(!0);try{const P=await V.fetchCustomerPortalUrl(c?.getWorkspaceId());l.push(P.url)}catch{o.warning(r.formatMessage(d.stripeErrorWarning),{hasCloseButton:!0})}finally{t(!1)}},N=u?.billing_period==="monthly"?C.FLEXIBLE:C.ANNUAL;return e.jsxs(pe,{open:s,size:"default",triggerButton:e.jsx(q,{color:"secondary",onClick:i,icon:he,children:e.jsx(n,{...d.manageLicenseBtn})}),children:[e.jsx(L.Item,{icon:je,onClick:S,children:e.jsx(n,{...d.managePaymentMethod})}),u.will_renew&&y&&e.jsx(L.Item,{icon:Me,onClick:()=>{b()},children:e.jsx(n,{...d.manageBillingSchedule})}),u.active_until!=null&&e.jsx(Ee,{isOpen:j,onClose:b,initialTeamBillingType:N,renewalDate:new Date(u.active_until),accountId:c.id}),u?.will_renew&&e.jsx(L.Separator,{}),u?.will_renew&&e.jsx(L.Item,{icon:ve,color:"danger",onClick:()=>{g()},children:e.jsx(n,{...d.cancelSubscriptionBtn})}),e.jsx(ze,{isOpen:f,onClose:g})]})}function ss({invoice:s}){const i=s?.status_transitions.paid_at!=null&&new Date(s.status_transitions.paid_at*1e3),a=s&&new Date(s.due_date*1e3),t=s&&new Date(s.created*1e3);return e.jsxs(Pe,{className:"items-center",children:[e.jsxs("div",{className:"flex grow flex-col gap-1",children:[e.jsx("span",{children:t?e.jsx(n,{...d.invoiceName,values:{createdDate:t}}):e.jsx(n,{...d.defaultInvoiceName})}),s?.paid&&i!=null?e.jsx("div",{className:"text-xs text-token-text-secondary",children:e.jsx(n,{...d.paidInvoice,values:{invoiceDate:i}})}):s&&e.jsx("div",{className:"text-xs text-green-600",children:e.jsx(n,{...d.upcomingInvoice,values:{invoiceDate:a}})})]}),e.jsx("a",{href:s?.hosted_invoice_url,className:E("mx-auto",s?.hosted_invoice_url==null&&"cursor-not-allowed opacity-20"),target:"_blank",rel:"noreferrer",children:e.jsx(Se,{className:"icon-sm text-green-600"})})]})}function as(){const[s,i]=x.useState({limit:5}),{data:a,isError:t}=Qe(s),l=s.startingAfter!=null||s.endingBefore!=null&&a?.has_more,r=s.endingBefore!=null||a?.has_more&&s.endingBefore==null;return t||a==null?e.jsxs(A,{children:[e.jsx(O,{children:e.jsx(n,{...d.invoicesTitle})}),e.jsx(me,{children:e.jsx(n,{...d.noInvoices})})]}):e.jsxs(A,{children:[e.jsx(O,{children:e.jsx(n,{...d.invoicesTitle})}),e.jsx(Ie,{children:a.data.map(o=>e.jsx(ss,{invoice:o},o.id))}),e.jsxs("div",{className:"flex",children:[l&&e.jsx("button",{onClick:()=>{a&&i(o=>({...o,endingBefore:a.data[0].id,startingAfter:void 0}))},children:e.jsx(be,{className:"icon-sm"})}),e.jsx("div",{className:"flex-grow"}),r&&e.jsx("button",{onClick:()=>{a&&i(o=>({...o,startingAfter:a.data[a.data.length-1].id,endingBefore:void 0}))},children:e.jsx(ye,{className:"icon-sm"})})]})]})}function ts({isTeam:s,accountId:i}){const{data:a,isLoading:t,isError:l}=k();return l||!a||t||!a.billing_period||!a.active_until?null:e.jsx(He,{numInUse:a.seats_in_use,numAllocated:a.seats_entitled,isTeam:s,subscriptionWillRenew:a.will_renew,subscriptionBillingPeriod:a.billing_period,subscriptionRenewalDate:new Date(a.active_until),accountId:i})}function ns(){const i=ge(t=>t.currentWorkspace)?.organizationId,a=v();return i===void 0?null:e.jsxs(e.Fragment,{children:[e.jsx(Ne,{title:a.formatMessage(d.title),subtitle:a.formatMessage(d.subtitle)}),e.jsx(we,{children:e.jsxs(Ce,{children:[e.jsx(Je,{}),e.jsx(as,{})]})})]})}const d=D({title:{id:"organizationBillingInfo.title.1",defaultMessage:"Billing"},subtitle:{id:"organizationBillingInfo.subtitle",defaultMessage:"Only workspace owners can view and change these settings"},planTitle:{id:"organizationBillingInfo.planTitle",defaultMessage:"Plan"},activeEnterpriseLicense:{id:"organizationBillingInfo.activeEnterpriseLicense",defaultMessage:"Enterprise License"},pendingEnterpriseLicense:{id:"organizationBillingInfo.pendingEnterpriseLicense",defaultMessage:"Enterprise License (pending activation)"},resellerHostedEnterpriseLicense:{id:"organizationBillingInfo.resellerHostedEnterpriseLicense",defaultMessage:"Enterprise License"},activeEduLicense:{id:"organizationBillingInfo.activeEduLicense",defaultMessage:"Edu License"},pendingEduLicense:{id:"organizationBillingInfo.pendingEduLicense",defaultMessage:"Edu License (pending activation)"},resellerHostedEduLicense:{id:"organizationBillingInfo.resellerHostedEduLicense",defaultMessage:"Edu License"},activeTeamLicense:{id:"organizationBillingInfo.activeTeamLicense",defaultMessage:"Team License"},activeTeamLicenseNonProfitOrg:{id:"organizationBillingInfo.activeTeamLicenseNonProfitOrg",defaultMessage:"Team License (Non Profit Discount)"},pendingTeamLicense:{id:"organizationBillingInfo.pendingTeamLicense",defaultMessage:"Team License (pending activation)"},licenseExpiry:{id:"organizationBillingInfo.licenseExpiry",defaultMessage:"Active until {expiryDate, date, long}"},renewalDate:{id:"organizationBillingInfo.renewalDate",defaultMessage:"Renews on {expiryDate, date, long}"},deactivateDate:{id:"organizationBillingInfo.deactivateDate",defaultMessage:"Deactivates on {expiryDate, date, long}"},seatsTitle:{id:"organizationBillingInfo.seatsTitle",defaultMessage:"Seats"},seatsInUse:{id:"organizationBillingInfo.seatsInUse",defaultMessage:"{numSeats} in use ({numSeatsPct})"},invoicesTitle:{id:"organizationBillingInfo.invoicesTitle",defaultMessage:"Invoices"},invoiceName:{id:"organizationBillingInfo.invoiceName",defaultMessage:"Invoice: {createdDate, date, long}"},defaultInvoiceName:{id:"organizationBillingInfo.defaultInvoiceName",defaultMessage:"Invoice"},paidInvoice:{id:"organizationBillingInfo.paidInvoice",defaultMessage:"Paid: {invoiceDate, date, long}"},upcomingInvoice:{id:"organizationBillingInfo.upcomingInvoice",defaultMessage:"Due: {invoiceDate, date, long}"},noInvoices:{id:"organizationBillingInfo.noInvoices",defaultMessage:"No invoices found"},manageSubscription:{id:"organizationBillingInfo.manageSubscription",defaultMessage:"Manage subscription"},cancelSubscriptionBtn:{id:"organizationBillingInfo.cancelSubscriptionBtn",defaultMessage:"Cancel subscription"},manageLicenseBtn:{id:"organizationBillingInfo.manageLicenseBtn",defaultMessage:"Manage license"},managePaymentMethod:{id:"organizationBillingInfo.managePaymentMethod",defaultMessage:"Payment method"},manageBillingSchedule:{id:"organizationBillingInfo.manageSchedule",defaultMessage:"Billing schedule"},stripeErrorWarning:{id:"organizationBillingInfo.stripeErrorWarning",defaultMessage:"Error loading account information"},teamsAutochargeMessage:{id:"organizationBillingInfo.teamsAutochargeMessage",defaultMessage:"Your additional seats will be included on your next invoice."},billingLearnMore:{id:"organizationBillingInfo.billingLearnMore",defaultMessage:"Learn more"}});function Cs(){return Le(),e.jsx(ns,{})}export{Cs as default};
//# sourceMappingURL=kfynuy52wz0gvxda.js.map
