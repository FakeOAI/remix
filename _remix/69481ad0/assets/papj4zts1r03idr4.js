import{r as g,bu as N,a1 as B,aG as k,bn as K,cf as P,l as a,eL as w,fw as H,fx as U,fy as $,bS as X,fz as G,fA as V,cX as z,bt as Q,fB as Y,fC as Z}from"./ges7pegusuwm6s29.js";import{T as J}from"./hd9drzcqk9yulir7.js";import{bK as ee,bL as te}from"./ddplc2knho8ipd47.js";import{jv as ne,cg as se,ho as re,hq as oe}from"./ca47xldfgc4qco9w.js";import{c as ie}from"./m0irv1lzqocj6bu2.js";import{u as ce}from"./ipdnjzvc9qgu9d8m.js";import{d as le,a as ae,i as ue}from"./nbmwj2w4tsu04xko.js";import{a as de}from"./gy46wyrftjy0vuyn.js";import{C as b}from"./n4iqh1srd6d89drz.js";import"./k0upi5o9s0wxrxei.js";import"./mbqafqf3tbml80kd.js";import"./o4lcgjydo2knimi5.js";import"./dbyqp2ocz19sykzs.js";import"./hrrdboulwb58im0p.js";import"./cv7ysa9ok6nmnkmn.js";import"./laecjf8sqlrz2ajc.js";import"./ddzr9naub0c5k7na.js";import"./cnhszz2eeox4dicf.js";import"./nyi7dujrkajwpd2b.js";import"./ojzazouyqbkuftb8.js";import"./djmszy2iioxhbkk3.js";import"./kutgoz5e2ft4h13s.js";import"./itg578mfa0m3728l.js";import"./b46ufj41564w3gyi.js";import"./9r9hhfxpviddcp3a.js";import"./bydaueymoybbf1x8.js";import"./k0f0opsm8n8rg6qn.js";import"./o55ydas7txiq2jhm.js";import"./iaes68sjohkx12ca.js";import"./n6hdedz3y3c5s7lr.js";import"./5pio3zrqia6prnei.js";import"./bx10za4jc3z39hna.js";import"./d9edd7y5hgrectk0.js";const x=g.createContext(void 0),fe={};x.Provider;const me=()=>g.useContext(x)?g.useContext(x):fe,y=typeof window>"u"?global:window,v="@griffel/";function he(e,t){return y[Symbol.for(v+e)]||(y[Symbol.for(v+e)]=t),y[Symbol.for(v+e)]}const E=he("DEFINITION_LOOKUP_TABLE",{}),S="data-make-styles-bucket",ge="data-priority",_=7,R="___",pe=R.length+_,Ce=0,Se=1;function ye(e){const t=e.length;if(t===_)return e;for(let n=t;n<_;n++)e+="0";return e}function q(e,t,n=[]){return R+ye(ne(e+t))}function M(e,t){let n="",s="";for(const o in e){const r=e[o];if(r===0){s+=o+" ";continue}const i=Array.isArray(r),c=t==="rtl"?(i?r[1]:r)+" ":(i?r[0]:r)+" ";n+=c,s+=c}return[n.slice(0,-1),s.slice(0,-1)]}function T(e,t){const n={};for(const s in e){const[o,r]=M(e[s],t);if(r===""){n[s]="";continue}const i=q(r,t),c=i+(o===""?"":" "+o);E[i]=[e[s],t],n[s]=c}return n}const I={};function ve(){let e=null,t="",n="";const s=new Array(arguments.length);for(let l=0;l<arguments.length;l++){const h=arguments[l];if(typeof h=="string"&&h!==""){const m=h.indexOf(R);if(m===-1)t+=h+" ";else{const C=h.substr(m,pe);m>0&&(t+=h.slice(0,m)),n+=C,s[l]=C}}}if(n==="")return t.slice(0,-1);const o=I[n];if(o!==void 0)return t+o;const r=[];for(let l=0;l<arguments.length;l++){const h=s[l];if(h){const m=E[h];m&&(r.push(m[Ce]),e=m[Se])}}const i=Object.assign.apply(Object,[{}].concat(r)),[c,u]=M(i,e),d=q(u,e,s),f=d+" "+c;return I[n]=f,E[d]=[i,e],t+f}function we(e){return Array.isArray(e)?e:[e]}function be(e,t,n,s){const o=[];if(s[S]=t,s[ge]=String(n),e)for(const i in s)e.setAttribute(i,s[i]);function r(i){return e?.sheet?e.sheet.insertRule(i,e.sheet.cssRules.length):o.push(i)}return{elementAttributes:s,insertRule:r,element:e,bucketName:t,cssRules(){return e?.sheet?Array.from(e.sheet.cssRules).map(i=>i.cssText):o}}}const xe=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],A=xe.reduce((e,t,n)=>(e[t]=n,e),{});function Ee(e,t,n){return(e==="m"?e+t:e)+n}function _e(e,t,n,s,o={}){var r,i;const c=e==="m",u=(r=o.m)!==null&&r!==void 0?r:"0",d=(i=o.p)!==null&&i!==void 0?i:0,f=Ee(e,u,d);if(!s.stylesheets[f]){const l=t&&t.createElement("style"),h=be(l,e,d,Object.assign({},s.styleElementAttributes,c&&{media:u}));s.stylesheets[f]=h,t&&l&&t.head.insertBefore(l,Ne(t,n,e,s,o))}return s.stylesheets[f]}function Re(e,t,n){var s,o;const r=t+((s=n.m)!==null&&s!==void 0?s:""),i=e.getAttribute(S)+((o=e.media)!==null&&o!==void 0?o:"");return r===i}function Ne(e,t,n,s,o={}){var r,i;const c=A[n],u=(r=o.m)!==null&&r!==void 0?r:"",d=(i=o.p)!==null&&i!==void 0?i:0;let f=p=>c-A[p.getAttribute(S)],l=e.head.querySelectorAll(`[${S}]`);if(n==="m"){const p=e.head.querySelectorAll(`[${S}="${n}"]`);p.length&&(l=p,f=W=>s.compareMediaQueries(u,W.media))}const h=p=>Re(p,n,o)?d-Number(p.getAttribute("data-priority")):f(p),m=l.length;let C=m-1;for(;C>=0;){const p=l.item(C);if(h(p)>0)return p.nextSibling;C--}return m>0?l.item(0):t?t.nextSibling:null}function O(e,t){try{e.insertRule(t)}catch{}}let Te=0;const Ie=(e,t)=>e<t?-1:e>t?1:0;function Ae(e=typeof document>"u"?void 0:document,t={}){const{classNameHashSalt:n,unstable_filterCSSRule:s,insertionPoint:o,styleElementAttributes:r,compareMediaQueries:i=Ie}=t,c={classNameHashSalt:n,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(r),compareMediaQueries:i,id:`d${Te++}`,insertCSSRules(u){for(const d in u){const f=u[d];for(let l=0,h=f.length;l<h;l++){const[m,C]=we(f[l]),p=_e(d,e,o||null,c,C);c.insertionCache[m]||(c.insertionCache[m]=d,s?s(m)&&O(p,m):O(p,m))}}}};return c}const Oe=()=>{const e={};return function(n,s){e[n.id]===void 0&&(n.insertCSSRules(s),e[n.id]=!0)}};function De(e,t,n=Oe){const s=n();let o=null,r=null;function i(c){const{dir:u,renderer:d}=c,f=u==="ltr";return f?o===null&&(o=T(e,u)):r===null&&(r=T(e,u)),s(d,t),f?o:r}return i}function je(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const D=N.useInsertionEffect?N.useInsertionEffect:void 0,Le=()=>{const e={};return function(n,s){if(D&&je()){D(()=>{n.insertCSSRules(s)},[n,s]);return}e[n.id]===void 0&&(n.insertCSSRules(s),e[n.id]=!0)}},Fe=g.createContext(Ae());function Be(){return g.useContext(Fe)}const Pe=g.createContext("ltr");function qe(){return g.useContext(Pe)}function Me(e,t){const n=De(e,t,Le);return function(){const o=qe(),r=Be();return n({dir:o,renderer:r})}}const We=Me({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),ke=(e,t)=>{const{title:n,primaryFill:s="currentColor",...o}=e,r={...o,title:void 0,fill:s},i=We(),c=me();return r.className=ve(i.root,t?.flipInRtl&&c?.textDirection==="rtl"&&i.rtl,r.className),n&&(r["aria-label"]=n),!r["aria-label"]&&!r["aria-labelledby"]?r["aria-hidden"]=!0:r.role="img",r},Ke=(e,t,n,s)=>{const o=t==="1em"?"20":t,r=g.forwardRef((i,c)=>{const u={...ke(i,{flipInRtl:void 0}),ref:c,width:t,height:t,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"};return g.createElement("svg",u,...n.map(d=>g.createElement("path",{d,fill:u.fill})))});return r.displayName=e,r},He=Ke("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function Ue({onNewThread:e,onOpenInMainWindow:t,onClose:n}){return a.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex h-[32px] w-full justify-between",children:[a.jsx(j,{onClick:e,children:a.jsx(ee,{})}),t&&a.jsx(j,{onClick:t,className:"ml-auto",children:a.jsx(te,{})}),a.jsx($e,{onClick:n,children:a.jsx(He,{})})]})}const j=B.button`flex h-full w-[46px] cursor-default items-center justify-center hover:bg-gray-200 active:bg-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-700`,$e=B.button`flex h-full w-[46px] cursor-default items-center justify-center hover:bg-red-500 hover:text-white active:bg-red-400 active:text-white`;function Xe({onNewThread:e,onOpenInMainWindow:t,onClose:n,children:s}){const o=g.useRef(null);return g.useEffect(()=>{if(o.current){const r=o.current.ownerDocument,i=c=>{c.key==="Escape"&&!c.shiftKey&&!c.ctrlKey&&!c.metaKey&&w(!1)};return r.addEventListener("keydown",i),()=>{r.removeEventListener("keydown",i)}}},[]),a.jsxs("div",{className:"flex h-full w-full flex-col pt-8",ref:o,children:[a.jsx(Ue,{onNewThread:e,onOpenInMainWindow:t,onClose:n}),s]})}function Ge(){const e=b.useStore(),{clientThreadId:t}=b.useState();ce(t,{kind:k.PrimaryAssistant});const n=K(),s=le(r=>ae.resolveThreadId(t,r)),o=P();return g.useEffect(()=>{const r=()=>{o.document.getElementById("prompt-textarea")?.focus()};return o.addEventListener("focus",r),()=>{o.removeEventListener("focus",r)}},[o]),a.jsx(Xe,{onNewThread:()=>{e.newThread()},onOpenInMainWindow:s!==t||!ue(t)?()=>{n(`/c/${t}`),w(!1,{focusMainWindow:!0}),e.newThread()}:void 0,onClose:()=>{w(!1)},children:a.jsx(H,{children:a.jsx(se,{children:a.jsx(re,{clientThreadId:t,children:a.jsx(J,{clientThreadId:t,children:a.jsx(Ve,{clientThreadId:t})})})})})})}function Ve({clientThreadId:e}){const t=b.useStore(),n=P();return de({resetThreadAction:()=>t.newThread(),clientThreadId:e,focusPromptTextareaAction:()=>n.document.getElementById("prompt-textarea")?.focus()}),a.jsxs(a.Fragment,{children:[a.jsx(ie,{clientThreadId:e,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},e),a.jsx(oe,{clientThreadId:e})]})}let L=!1;function At(){U?.registerObserver($)}function F(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function ze(e,t){e.head.querySelectorAll("link, style").forEach(o=>{F(o)&&t.head.appendChild(o.cloneNode(!0))});const n=new WeakMap,s=new MutationObserver(o=>{o.forEach(r=>{r.type==="childList"&&(r.addedNodes.forEach(i=>{if(F(i)){const c=t.head.appendChild(i.cloneNode(!0));if(n.set(i,c),i instanceof HTMLStyleElement&&i.dataset.emotion){const{sheet:u}=i,{sheet:d}=c;if(u&&d)for(const f of u.cssRules)d.insertRule(f.cssText)}}}),r.removedNodes.forEach(i=>{const c=n.get(i);c&&t.head.removeChild(c)}))})});return s.observe(e.head,{childList:!0}),()=>{s.disconnect()}}function Qe(e,t){for(const s of e.attributes)t.setAttribute(s.name,s.value);const n=new MutationObserver(s=>{s.forEach(o=>{if(o.type==="attributes"&&o.attributeName!=null){const r=e.getAttribute(o.attributeName);r==null?t.removeAttribute(o.attributeName):t.setAttribute(o.attributeName,r)}})});return n.observe(e,{attributes:!0}),()=>{n.disconnect()}}function Ot(){const[e,t]=g.useState(null),{value:n}=X("3653083604");return g.useEffect(()=>{if(!n||L||typeof window>"u")return;const s=window.open("about:blank","_blank",`${G}=${V.COMPANION}`);if(!s){z.warn("ChatBar: window.open() did not create a window");return}L=!0,ze(document,s.document),Qe(document.documentElement,s.document.documentElement),t(s.document.body.appendChild(s.document.createElement("div"))),s.addEventListener("unload",o=>{s.close()})},[n]),e&&e.ownerDocument.defaultView&&Q.createPortal(a.jsx(Y,{window:e.ownerDocument.defaultView,children:a.jsx(Ge,{})}),e,Z)}export{Ot as DesktopChatBar,At as initDesktop};
//# sourceMappingURL=papj4zts1r03idr4.js.map
