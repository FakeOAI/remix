import{p4 as ke,p5 as Ye,p6 as I,p7 as l,p8 as U,p9 as R,pa as ue,pb as W,pc as _e,pd as Ke,pe as We,pf as v,pg as ze,ph as jt,pi as zt,pj as K}from"./kuzdys3rw3ix3a3q.js";import{gt as qe}from"./fozyys57b6461bwr.js";import"./lek82h8c0bbwxe65.js";var ce=ke("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function $e(t){return t.setValue(ce,!0)}function Ft(t){return t.getValue(ce)===!0}var Qe="=",wt=";",pt=",",Lt="baggage",Je=180,Ze=4096,tr=8192,er=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};function rr(t){return t.reduce(function(e,r){var n=""+e+(e!==""?pt:"")+r;return n.length>tr?e:n},"")}function nr(t){return t.getAllEntries().map(function(e){var r=er(e,2),n=r[0],i=r[1],a=encodeURIComponent(n)+"="+encodeURIComponent(i.value);return i.metadata!==void 0&&(a+=wt+i.metadata.toString()),a})}function fe(t){var e=t.split(wt);if(!(e.length<=0)){var r=e.shift();if(r){var n=r.indexOf(Qe);if(!(n<=0)){var i=decodeURIComponent(r.substring(0,n).trim()),a=decodeURIComponent(r.substring(n+1).trim()),o;return e.length>0&&(o=Ye(e.join(wt))),{key:i,value:a,metadata:o}}}}}function Ee(t){return typeof t!="string"||t.length===0?{}:t.split(pt).map(function(e){return fe(e)}).filter(function(e){return e!==void 0&&e.value.length>0}).reduce(function(e,r){return e[r.key]=r.value,e},{})}var ir=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=I.getBaggage(e);if(!(!i||Ft(e))){var a=nr(i).filter(function(s){return s.length<=Ze}).slice(0,Je),o=rr(a);o.length>0&&n.set(r,Lt,o)}},t.prototype.extract=function(e,r,n){var i=n.get(r,Lt),a=Array.isArray(i)?i.join(pt):i;if(!a)return e;var o={};if(a.length===0)return e;var s=a.split(pt);return s.forEach(function(u){var _=fe(u);if(_){var c={value:_.value};_.metadata&&(c.metadata=_.metadata),o[_.key]=c}}),Object.entries(o).length===0?e:I.setBaggage(e,I.createBaggage(o))},t.prototype.fields=function(){return[Lt]},t}(),de=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ar=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};function _t(t){var e,r,n={};if(typeof t!="object"||t==null)return n;try{for(var i=de(Object.entries(t)),a=i.next();!a.done;a=i.next()){var o=ar(a.value,2),s=o[0],u=o[1];if(!or(s)){l.warn("Invalid attribute key: "+s);continue}if(!pe(u)){l.warn("Invalid attribute value set for key: "+s);continue}Array.isArray(u)?n[s]=u.slice():n[s]=u}}catch(_){e={error:_}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function or(t){return typeof t=="string"&&t.length>0}function pe(t){return t==null?!0:Array.isArray(t)?sr(t):le(t)}function sr(t){var e,r,n;try{for(var i=de(t),a=i.next();!a.done;a=i.next()){var o=a.value;if(o!=null){if(!n){if(le(o)){n=typeof o;continue}return!1}if(typeof o!==n)return!1}}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return!0}function le(t){switch(typeof t){case"number":case"boolean":case"string":return!0}return!1}function ur(){return function(t){l.error(_r(t))}}function _r(t){return typeof t=="string"?t:JSON.stringify(cr(t))}function cr(t){for(var e={},r=t;r!==null;)Object.getOwnPropertyNames(r).forEach(function(n){if(!e[n]){var i=r[n];i&&(e[n]=String(i))}}),r=Object.getPrototypeOf(r);return e}var fr=ur();function lt(t){try{fr(t)}catch{}}var b;(function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"})(b||(b={}));var X=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},qt={},Er=",",dr=["OTEL_SDK_DISABLED"];function pr(t){return dr.indexOf(t)>-1}var lr=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Tr(t){return lr.indexOf(t)>-1}var hr=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function Sr(t){return hr.indexOf(t)>-1}var ct=1/0,ft=128,vr=128,Or=128,Te={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:U.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:ct,OTEL_ATTRIBUTE_COUNT_LIMIT:ft,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:ct,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:ft,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:ct,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:ft,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:vr,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:Or,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:b.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function Ar(t,e,r){if(!(typeof r[t]>"u")){var n=String(r[t]);e[t]=n.toLowerCase()==="true"}}function mr(t,e,r,n,i){if(n===void 0&&(n=-1/0),i===void 0&&(i=1/0),typeof r[t]<"u"){var a=Number(r[t]);isNaN(a)||(a<n?e[t]=n:a>i?e[t]=i:e[t]=a)}}function Rr(t,e,r,n){n===void 0&&(n=Er);var i=r[t];typeof i=="string"&&(e[t]=i.split(n).map(function(a){return a.trim()}))}var yr={ALL:U.ALL,VERBOSE:U.VERBOSE,DEBUG:U.DEBUG,INFO:U.INFO,WARN:U.WARN,ERROR:U.ERROR,NONE:U.NONE};function gr(t,e,r){var n=r[t];if(typeof n=="string"){var i=yr[n.toUpperCase()];i!=null&&(e[t]=i)}}function Dt(t){var e={};for(var r in Te){var n=r;switch(n){case"OTEL_LOG_LEVEL":gr(n,e,t);break;default:if(pr(n))Ar(n,e,t);else if(Tr(n))mr(n,e,t);else if(Sr(n))Rr(n,e,t);else{var i=t[n];typeof i<"u"&&i!==null&&(e[n]=String(i))}}}return e}function Lr(){return Dt(typeof process<"u"&&process&&qt?qt:X)}function A(){var t=Dt(X);return Object.assign({},Te,t)}function et(t){for(var e=t.length,r="",n=0;n<e;n+=2){var i=t.substring(n,n+2),a=parseInt(i,16);r+=String.fromCharCode(a)}return btoa(r)}var C=performance,Nr="1.17.1",O={AWS_LAMBDA_INVOKED_ARN:"aws.lambda.invoked_arn",DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",NET_HOST_CONNECTION_TYPE:"net.host.connection.type",NET_HOST_CONNECTION_SUBTYPE:"net.host.connection.subtype",NET_HOST_CARRIER_NAME:"net.host.carrier.name",NET_HOST_CARRIER_MCC:"net.host.carrier.mcc",NET_HOST_CARRIER_MNC:"net.host.carrier.mnc",NET_HOST_CARRIER_ICC:"net.host.carrier.icc",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_CONSUMER_ID:"messaging.consumer_id",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message",MESSAGE_TYPE:"message.type",MESSAGE_ID:"message.id",MESSAGE_COMPRESSED_SIZE:"message.compressed_size",MESSAGE_UNCOMPRESSED_SIZE:"message.uncompressed_size"},P={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"},Pr={CPP:"cpp",DOTNET:"dotnet",ERLANG:"erlang",GO:"go",JAVA:"java",NODEJS:"nodejs",PHP:"php",PYTHON:"python",RUBY:"ruby",WEBJS:"webjs"},k,Nt=(k={},k[P.TELEMETRY_SDK_NAME]="opentelemetry",k[P.PROCESS_RUNTIME_NAME]="browser",k[P.TELEMETRY_SDK_LANGUAGE]=Pr.WEBJS,k[P.TELEMETRY_SDK_VERSION]=Nr,k);var Cr=9,Ir=6,br=Math.pow(10,Ir),Tt=Math.pow(10,Cr);function M(t){var e=t/1e3,r=Math.trunc(e),n=Math.round(t%1e3*br);return[r,n]}function kt(){var t=C.timeOrigin;if(typeof t!="number"){var e=C;t=e.timing&&e.timing.fetchStart}return t}function z(t){var e=M(kt()),r=M(typeof t=="number"?t:C.now());return he(e,r)}function rt(t){if(Yt(t))return t;if(typeof t=="number")return t<kt()?z(t):M(t);if(t instanceof Date)return M(t.getTime());throw TypeError("Invalid input type")}function wr(t,e){var r=e[0]-t[0],n=e[1]-t[1];return n<0&&(r-=1,n+=Tt),[r,n]}function B(t){return t[0]*Tt+t[1]}function Yt(t){return Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"}function $t(t){return Yt(t)||typeof t=="number"||t instanceof Date}function he(t,e){var r=[t[0]+e[0],t[1]+e[1]];return r[1]>=Tt&&(r[1]-=Tt,r[0]+=1),r}var V;(function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"})(V||(V={}));var Dr=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Se=function(){function t(e){e===void 0&&(e={});var r;this._propagators=(r=e.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,i){return n.concat(i)},[])))}return t.prototype.inject=function(e,r,n){var i,a;try{for(var o=Dr(this._propagators),s=o.next();!s.done;s=o.next()){var u=s.value;try{u.inject(e,r,n)}catch(_){l.warn("Failed to inject with "+u.constructor.name+". Err: "+_.message)}}}catch(_){i={error:_}}finally{try{s&&!s.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}},t.prototype.extract=function(e,r,n){return this._propagators.reduce(function(i,a){try{return a.extract(i,r,n)}catch(o){l.warn("Failed to inject with "+a.constructor.name+". Err: "+o.message)}return i},e)},t.prototype.fields=function(){return this._fields.slice()},t}(),Mt="[_0-9a-z-*/]",Mr="[a-z]"+Mt+"{0,255}",Ur="[a-z0-9]"+Mt+"{0,240}@[a-z]"+Mt+"{0,13}",xr=new RegExp("^(?:"+Mr+"|"+Ur+")$"),Br=/^[ -~]{0,255}[!-~]$/,Gr=/,|=/;function Hr(t){return xr.test(t)}function Vr(t){return Br.test(t)&&!Gr.test(t)}var Qt=32,Xr=512,Jt=",",Zt="=",jr=function(){function t(e){this._internalState=new Map,e&&this._parse(e)}return t.prototype.set=function(e,r){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,r),n},t.prototype.unset=function(e){var r=this._clone();return r._internalState.delete(e),r},t.prototype.get=function(e){return this._internalState.get(e)},t.prototype.serialize=function(){var e=this;return this._keys().reduce(function(r,n){return r.push(n+Zt+e.get(n)),r},[]).join(Jt)},t.prototype._parse=function(e){e.length>Xr||(this._internalState=e.split(Jt).reverse().reduce(function(r,n){var i=n.trim(),a=i.indexOf(Zt);if(a!==-1){var o=i.slice(0,a),s=i.slice(a+1,n.length);Hr(o)&&Vr(s)&&r.set(o,s)}return r},new Map),this._internalState.size>Qt&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Qt))))},t.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},t.prototype._clone=function(){var e=new t;return e._internalState=new Map(this._internalState),e},t}(),Et="traceparent",Pt="tracestate",Fr="00",kr="(?!ff)[\\da-f]{2}",Yr="(?![0]{32})[\\da-f]{32}",Kr="(?![0]{16})[\\da-f]{16}",Wr="[\\da-f]{2}",zr=new RegExp("^\\s?("+kr+")-("+Yr+")-("+Kr+")-("+Wr+")(-.*)?\\s?$");function qr(t){var e=zr.exec(t);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var ve=function(){function t(){}return t.prototype.inject=function(e,r,n){var i=R.getSpanContext(e);if(!(!i||Ft(e)||!ue(i))){var a=Fr+"-"+i.traceId+"-"+i.spanId+"-0"+Number(i.traceFlags||W.NONE).toString(16);n.set(r,Et,a),i.traceState&&n.set(r,Pt,i.traceState.serialize())}},t.prototype.extract=function(e,r,n){var i=n.get(r,Et);if(!i)return e;var a=Array.isArray(i)?i[0]:i;if(typeof a!="string")return e;var o=qr(a);if(!o)return e;o.isRemote=!0;var s=n.get(r,Pt);if(s){var u=Array.isArray(s)?s.join(","):s;o.traceState=new jr(typeof u=="string"?u:void 0)}return R.setSpanContext(e,o)},t.prototype.fields=function(){return[Et,Pt]},t}(),$r="[object Object]",Qr="[object Null]",Jr="[object Undefined]",Zr=Function.prototype,Oe=Zr.toString,tn=Oe.call(Object),en=rn(Object.getPrototypeOf,Object),Ae=Object.prototype,me=Ae.hasOwnProperty,G=Symbol?Symbol.toStringTag:void 0,Re=Ae.toString;function rn(t,e){return function(r){return t(e(r))}}function te(t){if(!nn(t)||an(t)!==$r)return!1;var e=en(t);if(e===null)return!0;var r=me.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Oe.call(r)===tn}function nn(t){return t!=null&&typeof t=="object"}function an(t){return t==null?t===void 0?Jr:Qr:G&&G in Object(t)?on(t):sn(t)}function on(t){var e=me.call(t,G),r=t[G],n=!1;try{t[G]=void 0,n=!0}catch{}var i=Re.call(t);return n&&(e?t[G]=r:delete t[G]),i}function sn(t){return Re.call(t)}var un=20;function _n(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t.shift(),n=new WeakMap;t.length>0;)r=ye(r,t.shift(),0,n);return r}function Ct(t){return ht(t)?t.slice():t}function ye(t,e,r,n){r===void 0&&(r=0);var i;if(!(r>un)){if(r++,dt(t)||dt(e)||ge(e))i=Ct(e);else if(ht(t)){if(i=t.slice(),ht(e))for(var a=0,o=e.length;a<o;a++)i.push(Ct(e[a]));else if(J(e))for(var s=Object.keys(e),a=0,o=s.length;a<o;a++){var u=s[a];i[u]=Ct(e[u])}}else if(J(t))if(J(e)){if(!cn(t,e))return e;i=Object.assign({},t);for(var s=Object.keys(e),a=0,o=s.length;a<o;a++){var u=s[a],_=e[u];if(dt(_))typeof _>"u"?delete i[u]:i[u]=_;else{var c=i[u],f=_;if(ee(t,u,n)||ee(e,u,n))delete i[u];else{if(J(c)&&J(f)){var E=n.get(c)||[],p=n.get(f)||[];E.push({obj:t,key:u}),p.push({obj:e,key:u}),n.set(c,E),n.set(f,p)}i[u]=ye(i[u],_,r,n)}}}}else i=e;return i}}function ee(t,e,r){for(var n=r.get(t[e])||[],i=0,a=n.length;i<a;i++){var o=n[i];if(o.key===e&&o.obj===t)return!0}return!1}function ht(t){return Array.isArray(t)}function ge(t){return typeof t=="function"}function J(t){return!dt(t)&&!ht(t)&&!ge(t)&&typeof t=="object"}function dt(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t>"u"||t instanceof Date||t instanceof RegExp||t===null}function cn(t,e){return!(!te(t)||!te(e))}var fn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Le(t,e){return typeof e=="string"?t===e:!!t.match(e)}function Ne(t,e){var r,n;if(!e)return!1;try{for(var i=fn(e),a=i.next();!a.done;a=i.next()){var o=a.value;if(Le(t,o))return!0}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return!1}var En=function(){function t(){var e=this;this._promise=new Promise(function(r,n){e._resolve=r,e._reject=n})}return Object.defineProperty(t.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),t.prototype.resolve=function(e){this._resolve(e)},t.prototype.reject=function(e){this._reject(e)},t}(),dn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},pn=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},Pe=function(){function t(e,r){this._callback=e,this._that=r,this._isCalled=!1,this._deferred=new En}return Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var e,r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,pn([this._that],dn(n),!1))).then(function(a){return r._deferred.resolve(a)},function(a){return r._deferred.reject(a)})}catch(a){this._deferred.reject(a)}}return this._deferred.promise},t}(),ln=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Ce=1e4,Tn=5,hn=1e3,Sn=5e3,vn=1.5;function On(t){t===void 0&&(t={});var e={};return Object.entries(t).forEach(function(r){var n=ln(r,2),i=n[0],a=n[1];typeof a<"u"?e[i]=String(a):l.warn('Header "'+i+'" has wrong value and will be ignored')}),e}function An(t,e){return t.endsWith("/")||(t=t+"/"),t+e}function mn(t){try{var e=new URL(t);return e.pathname===""&&(e.pathname=e.pathname+"/"),e.toString()}catch{return l.warn("Could not parse export URL: '"+t+"'"),t}}function Rn(t){return typeof t=="number"?t<=0?Ie(t,Ce):t:yn()}function yn(){var t,e=Number((t=A().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&t!==void 0?t:A().OTEL_EXPORTER_OTLP_TIMEOUT);return e<=0?Ie(e,Ce):e}function Ie(t,e){return l.warn("Timeout must be greater than 0",t),e}function gn(t){var e=[429,502,503,504];return e.includes(t)}function Ln(t){if(t==null)return-1;var e=Number.parseInt(t,10);if(Number.isInteger(e))return e>0?e*1e3:-1;var r=new Date(t).getTime()-Date.now();return r>=0?r:0}var Nn=function(){function t(e){e===void 0&&(e={}),this._sendingPromises=[],this.url=this.getDefaultUrl(e),typeof e.hostname=="string"&&(this.hostname=e.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new Pe(this._shutdown,this),this._concurrencyLimit=typeof e.concurrencyLimit=="number"?e.concurrencyLimit:1/0,this.timeoutMillis=Rn(e.timeoutMillis),this.onInit(e)}return t.prototype.export=function(e,r){if(this._shutdownOnce.isCalled){r({code:V.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){r({code:V.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(e).then(function(){r({code:V.SUCCESS})}).catch(function(n){r({code:V.FAILED,error:n})})},t.prototype._export=function(e){var r=this;return new Promise(function(n,i){try{l.debug("items to be sent",e),r.send(e,n,i)}catch(a){i(a)}})},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then(function(){})},t.prototype._shutdown=function(){return l.debug("shutdown started"),this.onShutdown(),this.forceFlush()},t}(),Pn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tt=function(t){Pn(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.name="OTLPExporterError",a.data=i,a.code=n,a}return e}(Error),St=function(){return St=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},St.apply(this,arguments)},Cn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};function In(t,e,r,n,i){if(navigator.sendBeacon(e,new Blob([t],r)))l.debug("sendBeacon - can send",t),n();else{var a=new tt("sendBeacon - cannot send "+t);i(a)}}function bn(t,e,r,n,i,a){var o,s,u=!1,_=setTimeout(function(){if(clearTimeout(o),u=!0,s.readyState===XMLHttpRequest.DONE){var f=new tt("Request Timeout");a(f)}else s.abort()},n),c=function(f,E){f===void 0&&(f=Tn),E===void 0&&(E=hn),s=new XMLHttpRequest,s.open("POST",e);var p={Accept:"application/json","Content-Type":"application/json"};Object.entries(St(St({},p),r)).forEach(function(T){var S=Cn(T,2),g=S[0],h=S[1];s.setRequestHeader(g,h)}),s.send(t),s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.DONE&&u===!1)if(s.status>=200&&s.status<=299)l.debug("xhr success",t),i(),clearTimeout(_),clearTimeout(o);else if(s.status&&gn(s.status)&&f>0){var T=void 0;E=vn*E,s.getResponseHeader("Retry-After")?T=Ln(s.getResponseHeader("Retry-After")):T=Math.round(Math.random()*(Sn-E)+E),o=setTimeout(function(){c(f-1,E)},T)}else{var S=new tt("Failed to export with XHR (status: "+s.status+")",s.status);a(S),clearTimeout(_),clearTimeout(o)}},s.onabort=function(){if(u){var T=new tt("Request Timeout");a(T)}clearTimeout(_),clearTimeout(o)},s.onerror=function(){if(u){var T=new tt("Request Timeout");a(T)}clearTimeout(_),clearTimeout(o)}};c()}var wn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dn=function(t){wn(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r)||this;return n._useXHR=!1,n._useXHR=!!r.headers||typeof navigator.sendBeacon!="function",n._useXHR?n._headers=Object.assign({},On(r.headers),Ee(A().OTEL_EXPORTER_OTLP_HEADERS)):n._headers={},n}return e.prototype.onInit=function(){X.addEventListener("unload",this.shutdown)},e.prototype.onShutdown=function(){X.removeEventListener("unload",this.shutdown)},e.prototype.send=function(r,n,i){var a=this;if(this._shutdownOnce.isCalled){l.debug("Shutdown already started. Cannot send objects");return}var o=this.convert(r),s=JSON.stringify(o),u=new Promise(function(c,f){a._useXHR?bn(s,a.url,a._headers,a.timeoutMillis,c,f):In(s,a.url,{type:"application/json"},c,f)}).then(n,i);this._sendingPromises.push(u);var _=function(){var c=a._sendingPromises.indexOf(u);a._sendingPromises.splice(c,1)};u.then(_,_)},e}(Nn),Mn=65536*65536,Ut=function(){function t(e,r){this.low=e,this.high=r}return t.fromU32=function(e){return new t(e%Mn|0,0)},t.prototype.multiply=function(e){var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,s=e.high&65535,u=e.low>>>16,_=e.low&65535,c=0,f=0,E=0,p=0;return p+=a*_,E+=p>>>16,p&=65535,E+=i*_,f+=E>>>16,E&=65535,E+=a*u,f+=E>>>16,E&=65535,f+=n*_,c+=f>>>16,f&=65535,f+=i*u,c+=f>>>16,f&=65535,f+=a*s,c+=f>>>16,f&=65535,c+=r*_+n*u+i*s+a*o,c&=65535,new t(E<<16|p,c<<16|f)},t.prototype.add=function(e){var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,a=this.low&65535,o=e.high>>>16,s=e.high&65535,u=e.low>>>16,_=e.low&65535,c=0,f=0,E=0,p=0;return p+=a+_,E+=p>>>16,p&=65535,E+=i+u,f+=E>>>16,E&=65535,f+=n+s,c+=f>>>16,f&=65535,c+=r+o,c&=65535,new t(E<<16|p,c<<16|f)},t.fromString=function(e){for(var r=t.fromU32(0),n=0;n<e.length;n+=8){var i=Math.min(8,e.length-n),a=parseInt(e.substring(n,n+i));if(i<8){var o=t.fromU32(Math.pow(10,i));r=r.multiply(o).add(t.fromU32(a))}else r=r.multiply(t.fromU32(1e8)),r=r.add(t.fromU32(a))}return r},t}(),Un=Ut.fromU32(1e9);function xt(t){return Ut.fromU32(t[0]).multiply(Un).add(Ut.fromU32(t[1]))}var xn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};function Rt(t){return Object.keys(t).map(function(e){return be(e,t[e])})}function be(t,e){return{key:t,value:we(e)}}function we(t){var e=typeof t;return e==="string"?{stringValue:t}:e==="number"?Number.isInteger(t)?{intValue:t}:{doubleValue:t}:e==="boolean"?{boolValue:t}:t instanceof Uint8Array?{bytesValue:t}:Array.isArray(t)?{arrayValue:{values:t.map(we)}}:e==="object"&&t!=null?{kvlistValue:{values:Object.entries(t).map(function(r){var n=xn(r,2),i=n[0],a=n[1];return be(i,a)})}}:{}}function Bn(t,e){var r,n=t.spanContext(),i=t.status,a=e?t.parentSpanId:t.parentSpanId!=null?et(t.parentSpanId):void 0;return{traceId:e?n.traceId:et(n.traceId),spanId:e?n.spanId:et(n.spanId),parentSpanId:a,traceState:(r=n.traceState)===null||r===void 0?void 0:r.serialize(),name:t.name,kind:t.kind==null?0:t.kind+1,startTimeUnixNano:xt(t.startTime),endTimeUnixNano:xt(t.endTime),attributes:Rt(t.attributes),droppedAttributesCount:t.droppedAttributesCount,events:t.events.map(Hn),droppedEventsCount:t.droppedEventsCount,status:{code:i.code,message:i.message},links:t.links.map(function(o){return Gn(o,e)}),droppedLinksCount:t.droppedLinksCount}}function Gn(t,e){var r;return{attributes:t.attributes?Rt(t.attributes):[],spanId:e?t.context.spanId:et(t.context.spanId),traceId:e?t.context.traceId:et(t.context.traceId),traceState:(r=t.context.traceState)===null||r===void 0?void 0:r.serialize(),droppedAttributesCount:t.droppedAttributesCount||0}}function Hn(t){return{attributes:t.attributes?Rt(t.attributes):[],name:t.name,timeUnixNano:xt(t.time),droppedAttributesCount:t.droppedAttributesCount||0}}var Vn=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a};function jn(t,e){return{resourceSpans:kn(t,e)}}function Fn(t){var e,r,n=new Map;try{for(var i=Vn(t),a=i.next();!a.done;a=i.next()){var o=a.value,s=n.get(o.resource);s||(s=new Map,n.set(o.resource,s));var u=o.instrumentationLibrary.name+"@"+(o.instrumentationLibrary.version||"")+":"+(o.instrumentationLibrary.schemaUrl||""),_=s.get(u);_||(_=[],s.set(u,_)),_.push(o)}}catch(c){e={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return n}function kn(t,e){for(var r=Fn(t),n=[],i=r.entries(),a=i.next();!a.done;){for(var o=Xn(a.value,2),s=o[0],u=o[1],_=[],c=u.values(),f=c.next();!f.done;){var E=f.value;if(E.length>0){var p=E[0].instrumentationLibrary,T=p.name,S=p.version,g=p.schemaUrl,h=E.map(function(N){return Bn(N,e)});_.push({scope:{name:T,version:S},spans:h,schemaUrl:g})}f=c.next()}var m={resource:{attributes:Rt(s.attributes),droppedAttributesCount:0},scopeSpans:_,schemaUrl:void 0};n.push(m),a=i.next()}return n}function Yn(){return"unknown_service"}var x=function(){return x=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},x.apply(this,arguments)},Kn=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function s(c){try{_(n.next(c))}catch(f){o(f)}}function u(c){try{_(n.throw(c))}catch(f){o(f)}}function _(c){c.done?a(c.value):i(c.value).then(s,u)}_((n=n.apply(t,e||[])).next())})},Wn=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(_){return function(c){return u([_,c])}}function u(_){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=_[0]&2?i.return:_[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,_[1])).done)return a;switch(i=0,a&&(_=[_[0]&2,a.value]),_[0]){case 0:case 1:a=_;break;case 4:return r.label++,{value:_[1],done:!1};case 5:r.label++,i=_[1],_=[0];continue;case 7:_=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(_[0]===6||_[0]===2)){r=0;continue}if(_[0]===3&&(!a||_[1]>a[0]&&_[1]<a[3])){r.label=_[1];break}if(_[0]===6&&r.label<a[1]){r.label=a[1],a=_;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(_);break}a[2]&&r.ops.pop(),r.trys.pop();continue}_=e.call(t,r)}catch(c){_=[6,c],i=0}finally{n=a=0}if(_[0]&5)throw _[1];return{value:_[0]?_[1]:void 0,done:!0}}},zn=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Bt=function(){function t(e,r){var n=this,i;this._attributes=e,this.asyncAttributesPending=r!=null,this._syncAttributes=(i=this._attributes)!==null&&i!==void 0?i:{},this._asyncAttributesPromise=r?.then(function(a){return n._attributes=Object.assign({},n._attributes,a),n.asyncAttributesPending=!1,a},function(a){return l.debug("a resource's async attributes promise rejected: %s",a),n.asyncAttributesPending=!1,{}})}return t.empty=function(){return t.EMPTY},t.default=function(){var e;return new t((e={},e[P.SERVICE_NAME]=Yn(),e[P.TELEMETRY_SDK_LANGUAGE]=Nt[P.TELEMETRY_SDK_LANGUAGE],e[P.TELEMETRY_SDK_NAME]=Nt[P.TELEMETRY_SDK_NAME],e[P.TELEMETRY_SDK_VERSION]=Nt[P.TELEMETRY_SDK_VERSION],e))},Object.defineProperty(t.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&l.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return Kn(this,void 0,void 0,function(){return Wn(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},t.prototype.merge=function(e){var r=this,n;if(!e)return this;var i=x(x({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(i);var a=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(o){var s,u=zn(o,2),_=u[0],c=u[1];return x(x(x(x({},r._syncAttributes),_),(s=e._syncAttributes)!==null&&s!==void 0?s:e.attributes),c)});return new t(i,a)},t.EMPTY=new t({}),t}(),qn=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),De="v1/traces",$n="http://localhost:4318/"+De,Qn=function(t){qn(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r)||this;return n._headers=Object.assign(n._headers,Ee(A().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),n}return e.prototype.convert=function(r){return jn(r,!0)},e.prototype.getDefaultUrl=function(r){return typeof r.url=="string"?r.url:A().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?mn(A().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):A().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?An(A().OTEL_EXPORTER_OTLP_ENDPOINT,De):$n},e}(Dn);function Me(t){t===void 0&&(t=[]);for(var e=[],r=0,n=t.length;r<n;r++){var i=t[r];if(Array.isArray(i)){var a=Me(i);e=e.concat(a.instrumentations)}else typeof i=="function"?e.push(new i):i.instrumentationName&&e.push(i)}return{instrumentations:e}}function Jn(t,e,r){for(var n=0,i=t.length;n<i;n++){var a=t[n];e&&a.setTracerProvider(e),r&&a.setMeterProvider(r),a.getConfig().enabled||a.enable()}}function Zn(t){t.forEach(function(e){return e.disable()})}function ti(t){var e=Me(t.instrumentations).instrumentations,r=t.tracerProvider||R.getTracerProvider(),n=t.meterProvider||_e.getMeterProvider();return Jn(e,r,n),function(){Zn(e)}}function Gt(t){return typeof t=="function"}var L=console.error.bind(console);function Z(t,e,r){var n=!!t[e]&&t.propertyIsEnumerable(e);Object.defineProperty(t,e,{configurable:!0,enumerable:n,writable:!0,value:r})}function it(t){t&&t.logger&&(Gt(t.logger)?L=t.logger:L("new logger isn't a function, not replacing"))}function Ue(t,e,r){if(!t||!t[e]){L("no original function "+e+" to wrap");return}if(!r){L("no wrapper function"),L(new Error().stack);return}if(!Gt(t[e])||!Gt(r)){L("original object and wrapper must be functions");return}var n=t[e],i=r(n,e);return Z(i,"__original",n),Z(i,"__unwrap",function(){t[e]===i&&Z(t,e,n)}),Z(i,"__wrapped",!0),Z(t,e,i),i}function ei(t,e,r){if(t)Array.isArray(t)||(t=[t]);else{L("must provide one or more modules to patch"),L(new Error().stack);return}if(!(e&&Array.isArray(e))){L("must provide one or more functions to wrap on modules");return}t.forEach(function(n){e.forEach(function(i){Ue(n,i,r)})})}function xe(t,e){if(!t||!t[e]){L("no function to unwrap."),L(new Error().stack);return}if(!t[e].__unwrap)L("no original to unwrap to -- has "+e+" already been unwrapped?");else return t[e].__unwrap()}function ri(t,e){if(t)Array.isArray(t)||(t=[t]);else{L("must provide one or more modules to patch"),L(new Error().stack);return}if(!(e&&Array.isArray(e))){L("must provide one or more functions to unwrap on modules");return}t.forEach(function(r){e.forEach(function(n){xe(r,n)})})}it.wrap=Ue;it.massWrap=ei;it.unwrap=xe;it.massUnwrap=ri;var ot=it,Ht=function(){return Ht=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Ht.apply(this,arguments)},ni=function(){function t(e,r,n){n===void 0&&(n={}),this.instrumentationName=e,this.instrumentationVersion=r,this._wrap=ot.wrap,this._unwrap=ot.unwrap,this._massWrap=ot.massWrap,this._massUnwrap=ot.massUnwrap,this._config=Ht({enabled:!0},n),this._diag=l.createComponentLogger({namespace:e}),this._tracer=R.getTracer(e,r),this._meter=_e.getMeter(e,r),this._updateMetricInstruments()}return Object.defineProperty(t.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),t.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},t.prototype._updateMetricInstruments=function(){},t.prototype.getConfig=function(){return this._config},t.prototype.setConfig=function(e){e===void 0&&(e={}),this._config=Object.assign({},e)},t.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(t.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),t}(),ii=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kt=function(t){ii(e,t);function e(r,n,i){i===void 0&&(i={});var a=t.call(this,r,n,i)||this;return a._config.enabled&&a.enable(),a}return e}(ni);function vt(t,e,r){var n,i;try{i=t()}catch(a){n=a}finally{if(e(n,i),n&&!r)throw n;return i}}function Vt(t){return typeof t=="function"&&typeof t.__original=="function"&&typeof t.__unwrap=="function"&&t.__wrapped===!0}var ai="exception",oi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},si=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},ui=function(){function t(e,r,n,i,a,o,s,u,_){s===void 0&&(s=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Ke.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=o,this.kind=a,this.links=s;var c=Date.now();this._performanceStartTime=C.now(),this._performanceOffset=c-(this._performanceStartTime+kt()),this._startTimeProvided=u!=null,this.startTime=this._getTime(u??c),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0}return t.prototype.spanContext=function(){return this._spanContext},t.prototype.setAttribute=function(e,r){return r==null||this._isSpanEnded()?this:e.length===0?(l.warn("Invalid attribute key: "+e),this):pe(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(r),this):(l.warn("Invalid attribute value set for key: "+e),this)},t.prototype.setAttributes=function(e){var r,n;try{for(var i=oi(Object.entries(e)),a=i.next();!a.done;a=i.next()){var o=si(a.value,2),s=o[0],u=o[1];this.setAttribute(s,u)}}catch(_){r={error:_}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return this},t.prototype.addEvent=function(e,r,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return l.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(l.warn("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),$t(r)&&($t(n)||(n=r),r=void 0);var i=_t(r);return this.events.push({name:e,attributes:i,time:this._getTime(n),droppedAttributesCount:0}),this},t.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=e,this)},t.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},t.prototype.end=function(e){if(this._isSpanEnded()){l.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=wr(this.startTime,this.endTime),this._duration[0]<0&&(l.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._spanProcessor.onEnd(this)},t.prototype._getTime=function(e){if(typeof e=="number"&&e<C.now())return z(e+this._performanceOffset);if(typeof e=="number")return M(e);if(e instanceof Date)return M(e.getTime());if(Yt(e))return e;if(this._startTimeProvided)return M(Date.now());var r=C.now()-this._performanceStartTime;return he(this.startTime,M(r))},t.prototype.isRecording=function(){return this._ended===!1},t.prototype.recordException=function(e,r){var n={};typeof e=="string"?n[O.EXCEPTION_MESSAGE]=e:e&&(e.code?n[O.EXCEPTION_TYPE]=e.code.toString():e.name&&(n[O.EXCEPTION_TYPE]=e.name),e.message&&(n[O.EXCEPTION_MESSAGE]=e.message),e.stack&&(n[O.EXCEPTION_STACKTRACE]=e.stack)),n[O.EXCEPTION_TYPE]||n[O.EXCEPTION_MESSAGE]?this.addEvent(ai,n,r):l.warn("Failed to record an exception "+e)},Object.defineProperty(t.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),t.prototype._isSpanEnded=function(){return this._ended&&l.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},t.prototype._truncateToLimitUtil=function(e,r){return e.length<=r?e:e.substr(0,r)},t.prototype._truncateToSize=function(e){var r=this,n=this._attributeValueLengthLimit;return n<=0?(l.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(i){return typeof i=="string"?r._truncateToLimitUtil(i,n):i}):e},t}(),q;(function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(q||(q={}));var Ot=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:q.NOT_RECORD}},t.prototype.toString=function(){return"AlwaysOffSampler"},t}(),j=function(){function t(){}return t.prototype.shouldSample=function(){return{decision:q.RECORD_AND_SAMPLED}},t.prototype.toString=function(){return"AlwaysOnSampler"},t}(),It=function(){function t(e){var r,n,i,a;this._root=e.root,this._root||(lt(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new j),this._remoteParentSampled=(r=e.remoteParentSampled)!==null&&r!==void 0?r:new j,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new Ot,this._localParentSampled=(i=e.localParentSampled)!==null&&i!==void 0?i:new j,this._localParentNotSampled=(a=e.localParentNotSampled)!==null&&a!==void 0?a:new Ot}return t.prototype.shouldSample=function(e,r,n,i,a,o){var s=R.getSpanContext(e);return!s||!ue(s)?this._root.shouldSample(e,r,n,i,a,o):s.isRemote?s.traceFlags&W.SAMPLED?this._remoteParentSampled.shouldSample(e,r,n,i,a,o):this._remoteParentNotSampled.shouldSample(e,r,n,i,a,o):s.traceFlags&W.SAMPLED?this._localParentSampled.shouldSample(e,r,n,i,a,o):this._localParentNotSampled.shouldSample(e,r,n,i,a,o)},t.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},t}(),re=function(){function t(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return t.prototype.shouldSample=function(e,r){return{decision:We(r)&&this._accumulate(r)<this._upperBound?q.RECORD_AND_SAMPLED:q.NOT_RECORD}},t.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},t.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},t.prototype._accumulate=function(e){for(var r=0,n=0;n<e.length/8;n++){var i=n*8,a=parseInt(e.slice(i,i+8),16);r=(r^a)>>>0}return r},t}(),_i=A(),ci=b.AlwaysOn,Y=1;function Be(){return{sampler:Ge(_i),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:A().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:A().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:A().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:A().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:A().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:A().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:A().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:A().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Ge(t){switch(t===void 0&&(t=A()),t.OTEL_TRACES_SAMPLER){case b.AlwaysOn:return new j;case b.AlwaysOff:return new Ot;case b.ParentBasedAlwaysOn:return new It({root:new j});case b.ParentBasedAlwaysOff:return new It({root:new Ot});case b.TraceIdRatio:return new re(ne(t));case b.ParentBasedTraceIdRatio:return new It({root:new re(ne(t))});default:return l.error('OTEL_TRACES_SAMPLER value "'+t.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+ci+'".'),new j}}function ne(t){if(t.OTEL_TRACES_SAMPLER_ARG===void 0||t.OTEL_TRACES_SAMPLER_ARG==="")return l.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Y+"."),Y;var e=Number(t.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(l.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Y+"."),Y):e<0||e>1?(l.error("OTEL_TRACES_SAMPLER_ARG="+t.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Y+"."),Y):e}function fi(t){var e={sampler:Ge()},r=Be(),n=Object.assign({},r,e,t);return n.generalLimits=Object.assign({},r.generalLimits,t.generalLimits||{}),n.spanLimits=Object.assign({},r.spanLimits,t.spanLimits||{}),n}function Ei(t){var e,r,n,i,a,o,s,u,_,c,f,E,p=Object.assign({},t.spanLimits),T=Lr();return p.attributeCountLimit=(o=(a=(i=(r=(e=t.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&r!==void 0?r:(n=t.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&i!==void 0?i:T.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:T.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&o!==void 0?o:ft,p.attributeValueLengthLimit=(E=(f=(c=(u=(s=t.spanLimits)===null||s===void 0?void 0:s.attributeValueLengthLimit)!==null&&u!==void 0?u:(_=t.generalLimits)===null||_===void 0?void 0:_.attributeValueLengthLimit)!==null&&c!==void 0?c:T.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:T.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&E!==void 0?E:ct,Object.assign({},t,{spanLimits:p})}var di=function(){function t(e,r){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=A();this._maxExportBatchSize=typeof r?.maxExportBatchSize=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof r?.maxQueueSize=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof r?.scheduledDelayMillis=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof r?.exportTimeoutMillis=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new Pe(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(l.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return t.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&W.SAMPLED&&this._addToBuffer(e)},t.prototype.shutdown=function(){return this._shutdownOnce.call()},t.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},t.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&l.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(l.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},t.prototype._flushAll=function(){var e=this;return new Promise(function(r,n){for(var i=[],a=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),o=0,s=a;o<s;o++)i.push(e._flushOneBatch());Promise.all(i).then(function(){r()}).catch(n)})},t.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(r,n){var i=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);v.with($e(v.active()),function(){var a=e._finishedSpans.splice(0,e._maxExportBatchSize),o=function(){return e._exporter.export(a,function(u){var _;clearTimeout(i),u.code===V.SUCCESS?r():n((_=u.error)!==null&&_!==void 0?_:new Error("BatchSpanProcessor: span export failed"))})},s=a.map(function(u){return u.resource}).filter(function(u){return u.asyncAttributesPending});s.length===0?o():Promise.all(s.map(function(u){var _;return(_=u.waitForAsyncAttributes)===null||_===void 0?void 0:_.call(u)})).then(o,function(u){lt(u),n(u)})})})},t.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var r=function(){e._isExporting=!0,e._flushOneBatch().then(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(n){e._isExporting=!1,lt(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return r();this._timer===void 0&&(this._timer=setTimeout(function(){return r()},this._scheduledDelayMillis),this._timer,void 0)}},t.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},t}(),pi=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),He=function(t){pi(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.onInit(n),i}return e.prototype.onInit=function(r){var n=this;r?.disableAutoFlushOnDocumentHide!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush()},this._pageHideListener=function(){n.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(di),li=8,Ti=16,hi=function(){function t(){this.generateTraceId=ie(Ti),this.generateSpanId=ie(li)}return t}(),st=Array(32);function ie(t){return function(){for(var r=0;r<t*2;r++)st[r]=Math.floor(Math.random()*16)+48,st[r]>=58&&(st[r]+=39);return String.fromCharCode.apply(null,st.slice(0,t*2))}}var Si=function(){function t(e,r,n){this._tracerProvider=n;var i=fi(r);this._sampler=i.sampler,this._generalLimits=i.generalLimits,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new hi,this.resource=n.resource,this.instrumentationLibrary=e}return t.prototype.startSpan=function(e,r,n){var i,a,o;r===void 0&&(r={}),n===void 0&&(n=v.active()),r.root&&(n=R.deleteSpan(n));var s=R.getSpan(n);if(Ft(n)){l.debug("Instrumentation suppressed, returning Noop Span");var u=R.wrapSpanContext(ze);return u}var _=s?.spanContext(),c=this._idGenerator.generateSpanId(),f,E,p;!_||!R.isSpanContextValid(_)?f=this._idGenerator.generateTraceId():(f=_.traceId,E=_.traceState,p=_.spanId);var T=(i=r.kind)!==null&&i!==void 0?i:jt.INTERNAL,S=((a=r.links)!==null&&a!==void 0?a:[]).map(function(Q){return{context:Q.context,attributes:_t(Q.attributes)}}),g=_t(r.attributes),h=this._sampler.shouldSample(n,f,e,T,g,S);E=(o=h.traceState)!==null&&o!==void 0?o:E;var m=h.decision===zt.RECORD_AND_SAMPLED?W.SAMPLED:W.NONE,N={traceId:f,spanId:c,traceFlags:m,traceState:E};if(h.decision===zt.NOT_RECORD){l.debug("Recording is off, propagating context in a non-recording span");var u=R.wrapSpanContext(N);return u}var at=new ui(this,n,e,N,T,p,S,r.startTime),yt=_t(Object.assign(g,h.attributes));return at.setAttributes(yt),at},t.prototype.startActiveSpan=function(e,r,n,i){var a,o,s;if(!(arguments.length<2)){arguments.length===2?s=r:arguments.length===3?(a=r,s=n):(a=r,o=n,s=i);var u=o??v.active(),_=this.startSpan(e,a,u),c=R.setSpan(u,_);return v.with(c,s,void 0,_)}},t.prototype.getGeneralLimits=function(){return this._generalLimits},t.prototype.getSpanLimits=function(){return this._spanLimits},t.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},t}(),ut=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},vi=function(){function t(e){this._spanProcessors=e}return t.prototype.forceFlush=function(){var e,r,n=[];try{for(var i=ut(this._spanProcessors),a=i.next();!a.done;a=i.next()){var o=a.value;n.push(o.forceFlush())}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(s){Promise.all(n).then(function(){s()}).catch(function(u){lt(u||new Error("MultiSpanProcessor: forceFlush failed")),s()})})},t.prototype.onStart=function(e,r){var n,i;try{for(var a=ut(this._spanProcessors),o=a.next();!o.done;o=a.next()){var s=o.value;s.onStart(e,r)}}catch(u){n={error:u}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.onEnd=function(e){var r,n;try{for(var i=ut(this._spanProcessors),a=i.next();!a.done;a=i.next()){var o=a.value;o.onEnd(e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.shutdown=function(){var e,r,n=[];try{for(var i=ut(this._spanProcessors),a=i.next();!a.done;a=i.next()){var o=a.value;n.push(o.shutdown())}}catch(s){e={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}return new Promise(function(s,u){Promise.all(n).then(function(){s()},u)})},t}(),Oi=function(){function t(){}return t.prototype.onStart=function(e,r){},t.prototype.onEnd=function(e){},t.prototype.shutdown=function(){return Promise.resolve()},t.prototype.forceFlush=function(){return Promise.resolve()},t}(),H;(function(t){t[t.resolved=0]="resolved",t[t.timeout=1]="timeout",t[t.error=2]="error",t[t.unresolved=3]="unresolved"})(H||(H={}));var Ai=function(){function t(e){e===void 0&&(e={});var r;this._registeredSpanProcessors=[],this._tracers=new Map;var n=_n({},Be(),Ei(e));this.resource=(r=n.resource)!==null&&r!==void 0?r:Bt.empty(),this.resource=Bt.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});var i=this._buildExporterFromEnv();if(i!==void 0){var a=new He(i);this.activeSpanProcessor=a}else this.activeSpanProcessor=new Oi}return t.prototype.getTracer=function(e,r,n){var i=e+"@"+(r||"")+":"+(n?.schemaUrl||"");return this._tracers.has(i)||this._tracers.set(i,new Si({name:e,version:r,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(i)},t.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(r){return l.error("Error while trying to shutdown current span processor",r)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new vi(this._registeredSpanProcessors)},t.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},t.prototype.register=function(e){e===void 0&&(e={}),R.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&v.setGlobalContextManager(e.contextManager),e.propagator&&I.setGlobalPropagator(e.propagator)},t.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(function(n){return new Promise(function(i){var a,o=setTimeout(function(){i(new Error("Span processor did not completed within timeout period of "+e+" ms")),a=H.timeout},e);n.forceFlush().then(function(){clearTimeout(o),a!==H.timeout&&(a=H.resolved,i(a))}).catch(function(s){clearTimeout(o),a=H.error,i(s)})})});return new Promise(function(n,i){Promise.all(r).then(function(a){var o=a.filter(function(s){return s!==H.resolved});o.length>0?i(o):n()}).catch(function(a){return i([a])})})},t.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},t.prototype._getPropagator=function(e){var r;return(r=this.constructor._registeredPropagators.get(e))===null||r===void 0?void 0:r()},t.prototype._getSpanExporter=function(e){var r;return(r=this.constructor._registeredExporters.get(e))===null||r===void 0?void 0:r()},t.prototype._buildPropagatorFromEnv=function(){var e=this,r=Array.from(new Set(A().OTEL_PROPAGATORS)),n=r.map(function(a){var o=e._getPropagator(a);return o||l.warn('Propagator "'+a+'" requested through environment variable is unavailable.'),o}),i=n.reduce(function(a,o){return o&&a.push(o),a},[]);if(i.length!==0)return r.length===1?i[0]:new Se({propagators:i})},t.prototype._buildExporterFromEnv=function(){var e=A().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var r=this._getSpanExporter(e);return r||l.error('Exporter "'+e+'" requested through environment variable is unavailable.'),r}},t._registeredPropagators=new Map([["tracecontext",function(){return new ve}],["baggage",function(){return new ir}]]),t._registeredExporters=new Map,t}(),mi=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a},Ri=function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))},yi=function(){function t(){this._enabled=!1,this._currentContext=K}return t.prototype._bindFunction=function(e,r){e===void 0&&(e=K);var n=this,i=function(){for(var a=this,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];return n.with(e,function(){return r.apply(a,o)})};return Object.defineProperty(i,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),i},t.prototype.active=function(){return this._currentContext},t.prototype.bind=function(e,r){return e===void 0&&(e=this.active()),typeof r=="function"?this._bindFunction(e,r):r},t.prototype.disable=function(){return this._currentContext=K,this._enabled=!1,this},t.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=K,this)},t.prototype.with=function(e,r,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];var o=this._currentContext;this._currentContext=e||K;try{return r.call.apply(r,Ri([n],mi(i),!1))}finally{this._currentContext=o}},t}(),gi=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Li=function(t){gi(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,r)||this;if(r.contextManager)throw"contextManager should be defined in register method not in constructor";if(r.propagator)throw"propagator should be defined in register method not in constructor";return n}return e.prototype.register=function(r){r===void 0&&(r={}),r.contextManager===void 0&&(r.contextManager=new yi),r.contextManager&&r.contextManager.enable(),t.prototype.register.call(this,r)},e}(Ai),d;(function(t){t.CONNECT_END="connectEnd",t.CONNECT_START="connectStart",t.DECODED_BODY_SIZE="decodedBodySize",t.DOM_COMPLETE="domComplete",t.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",t.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",t.DOM_INTERACTIVE="domInteractive",t.DOMAIN_LOOKUP_END="domainLookupEnd",t.DOMAIN_LOOKUP_START="domainLookupStart",t.ENCODED_BODY_SIZE="encodedBodySize",t.FETCH_START="fetchStart",t.LOAD_EVENT_END="loadEventEnd",t.LOAD_EVENT_START="loadEventStart",t.NAVIGATION_START="navigationStart",t.REDIRECT_END="redirectEnd",t.REDIRECT_START="redirectStart",t.REQUEST_START="requestStart",t.RESPONSE_END="responseEnd",t.RESPONSE_START="responseStart",t.SECURE_CONNECTION_START="secureConnectionStart",t.UNLOAD_EVENT_END="unloadEventEnd",t.UNLOAD_EVENT_START="unloadEventStart"})(d||(d={}));var bt;function Ni(){return bt||(bt=document.createElement("a")),bt}function F(t,e){return e in t}function y(t,e,r){if(F(r,e)&&typeof r[e]=="number")return t.addEvent(e,r[e]),t}function $(t,e){y(t,d.FETCH_START,e),y(t,d.DOMAIN_LOOKUP_START,e),y(t,d.DOMAIN_LOOKUP_END,e),y(t,d.CONNECT_START,e),F(e,"name")&&e.name.startsWith("https:")&&y(t,d.SECURE_CONNECTION_START,e),y(t,d.CONNECT_END,e),y(t,d.REQUEST_START,e),y(t,d.RESPONSE_START,e),y(t,d.RESPONSE_END,e);var r=e[d.ENCODED_BODY_SIZE];r!==void 0&&t.setAttribute(O.HTTP_RESPONSE_CONTENT_LENGTH,r);var n=e[d.DECODED_BODY_SIZE];n!==void 0&&r!==n&&t.setAttribute(O.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,n)}function Pi(t){return t.slice().sort(function(e,r){var n=e[d.FETCH_START],i=r[d.FETCH_START];return n>i?1:n<i?-1:0})}function Ve(t,e,r,n,i,a){i===void 0&&(i=new WeakSet);var o=D(t);t=o.toString();var s=Ii(t,e,r,n,i,a);if(s.length===0)return{mainRequest:void 0};if(s.length===1)return{mainRequest:s[0]};var u=Pi(s);if(o.origin!==location.origin&&u.length>1){var _=u[0],c=Ci(u,_[d.RESPONSE_END],r),f=_[d.RESPONSE_END],E=c[d.FETCH_START];return E<f&&(c=_,_=void 0),{corsPreFlightRequest:_,mainRequest:c}}else return{mainRequest:s[0]}}function Ci(t,e,r){for(var n=B(r),i=B(rt(e)),a=t[1],o,s=t.length,u=1;u<s;u++){var _=t[u],c=B(rt(_[d.FETCH_START])),f=B(rt(_[d.RESPONSE_END])),E=n-f;c>=i&&(!o||E<o)&&(o=E,a=_)}return a}function Ii(t,e,r,n,i,a){var o=B(e),s=B(r),u=n.filter(function(_){var c=B(rt(_[d.FETCH_START])),f=B(rt(_[d.RESPONSE_END]));return _.initiatorType.toLowerCase()===(a||"xmlhttprequest")&&_.name===t&&c>=o&&f<=s});return u.length>0&&(u=u.filter(function(_){return!i.has(_)})),u}function D(t){if(typeof URL=="function")return new URL(t,typeof document<"u"?document.baseURI:typeof location<"u"?location.href:void 0);var e=Ni();return e.href=t,e}function Xe(t,e){var r=e||[];(typeof r=="string"||r instanceof RegExp)&&(r=[r]);var n=D(t);return n.origin===location.origin?!0:r.some(function(i){return Le(t,i)})}var nt;(function(t){t.DOCUMENT_LOAD="documentLoad",t.DOCUMENT_FETCH="documentFetch",t.RESOURCE_FETCH="resourceFetch"})(nt||(nt={}));var bi="0.33.2",At;(function(t){t.FIRST_PAINT="firstPaint",t.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(At||(At={}));var wi=function(){var t,e,r={},n=(e=(t=C).getEntriesByType)===null||e===void 0?void 0:e.call(t,"navigation")[0];if(n){var i=Object.values(d);i.forEach(function(s){if(F(n,s)){var u=n[s];typeof u=="number"&&(r[s]=u)}})}else{var a=C,o=a.timing;if(o){var i=Object.values(d);i.forEach(function(u){if(F(o,u)){var _=o[u];typeof _=="number"&&(r[u]=_)}})}}return r},ae={"first-paint":At.FIRST_PAINT,"first-contentful-paint":At.FIRST_CONTENTFUL_PAINT},Di=function(t){var e,r,n=(r=(e=C).getEntriesByType)===null||r===void 0?void 0:r.call(e,"paint");n&&n.forEach(function(i){var a=i.name,o=i.startTime;F(ae,a)&&t.addEvent(ae[a],o)})},Mi=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ui=function(t){Mi(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,"@opentelemetry/instrumentation-document-load",bi,r)||this;return n.component="document-load",n.version="1",n.moduleName=n.component,n}return e.prototype.init=function(){},e.prototype._onDocumentLoaded=function(){var r=this;window.setTimeout(function(){r._collectPerformance()})},e.prototype._addResourcesSpans=function(r){var n=this,i,a,o=(a=(i=C).getEntriesByType)===null||a===void 0?void 0:a.call(i,"resource");o&&o.forEach(function(s){n._initResourceSpan(s,r)})},e.prototype._collectPerformance=function(){var r=this,n=Array.from(document.getElementsByTagName("meta")).find(function(o){return o.getAttribute("name")===Et}),i=wi(),a=n&&n.content||"";v.with(I.extract(K,{traceparent:a}),function(){var o,s=r._startSpan(nt.DOCUMENT_LOAD,d.FETCH_START,i);s&&(v.with(R.setSpan(v.active(),s),function(){var u=r._startSpan(nt.DOCUMENT_FETCH,d.FETCH_START,i);u&&(u.setAttribute(O.HTTP_URL,location.href),v.with(R.setSpan(v.active(),u),function(){var _;$(u,i),r._addCustomAttributesOnSpan(u,(_=r._getConfig().applyCustomAttributesOnSpan)===null||_===void 0?void 0:_.documentFetch),r._endSpan(u,d.RESPONSE_END,i)}))}),s.setAttribute(O.HTTP_URL,location.href),s.setAttribute(O.HTTP_USER_AGENT,navigator.userAgent),r._addResourcesSpans(s),y(s,d.FETCH_START,i),y(s,d.UNLOAD_EVENT_START,i),y(s,d.UNLOAD_EVENT_END,i),y(s,d.DOM_INTERACTIVE,i),y(s,d.DOM_CONTENT_LOADED_EVENT_START,i),y(s,d.DOM_CONTENT_LOADED_EVENT_END,i),y(s,d.DOM_COMPLETE,i),y(s,d.LOAD_EVENT_START,i),y(s,d.LOAD_EVENT_END,i),Di(s),r._addCustomAttributesOnSpan(s,(o=r._getConfig().applyCustomAttributesOnSpan)===null||o===void 0?void 0:o.documentLoad),r._endSpan(s,d.LOAD_EVENT_END,i))})},e.prototype._endSpan=function(r,n,i){r&&(F(i,n)?r.end(i[n]):r.end())},e.prototype._initResourceSpan=function(r,n){var i,a=this._startSpan(nt.RESOURCE_FETCH,d.FETCH_START,r,n);a&&(a.setAttribute(O.HTTP_URL,r.name),$(a,r),this._addCustomAttributesOnResourceSpan(a,r,(i=this._getConfig().applyCustomAttributesOnSpan)===null||i===void 0?void 0:i.resourceFetch),this._endSpan(a,d.RESPONSE_END,r))},e.prototype._startSpan=function(r,n,i,a){if(F(i,n)&&typeof i[n]=="number"){var o=this.tracer.startSpan(r,{startTime:i[n]},a?R.setSpan(v.active(),a):void 0);return o}},e.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},e.prototype._getConfig=function(){return this._config},e.prototype._addCustomAttributesOnSpan=function(r,n){var i=this;n&&vt(function(){return n(r)},function(a){a&&i._diag.error("addCustomAttributesOnSpan",a)},!0)},e.prototype._addCustomAttributesOnResourceSpan=function(r,n,i){var a=this;i&&vt(function(){return i(r,n)},function(o){o&&a._diag.error("addCustomAttributesOnResourceSpan",o)},!0)},e.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},e.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},e}(Kt),mt;(function(t){t.COMPONENT="component",t.HTTP_ERROR_NAME="http.error_name",t.HTTP_STATUS_TEXT="http.status_text"})(mt||(mt={}));var oe="0.44.0",xi=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bi=300,Gi=function(t){xi(e,t);function e(r){var n=t.call(this,"@opentelemetry/instrumentation-fetch",oe,r)||this;return n.component="fetch",n.version=oe,n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return e.prototype.init=function(){},e.prototype._getConfig=function(){return this._config},e.prototype._addChildSpan=function(r,n){var i=this.tracer.startSpan("CORS Preflight",{startTime:n[d.FETCH_START]},R.setSpan(v.active(),r));this._getConfig().ignoreNetworkEvents||$(i,n),i.end(n[d.RESPONSE_END])},e.prototype._addFinalSpanAttributes=function(r,n){var i=D(n.url);r.setAttribute(O.HTTP_STATUS_CODE,n.status),n.statusText!=null&&r.setAttribute(mt.HTTP_STATUS_TEXT,n.statusText),r.setAttribute(O.HTTP_HOST,i.host),r.setAttribute(O.HTTP_SCHEME,i.protocol.replace(":","")),r.setAttribute(O.HTTP_USER_AGENT,navigator.userAgent)},e.prototype._addHeaders=function(r,n){if(!Xe(n,this._getConfig().propagateTraceHeaderCorsUrls)){var i={};I.inject(v.active(),i),Object.keys(i).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(r instanceof Request)I.inject(v.active(),r.headers,{set:function(a,o,s){return a.set(o,typeof s=="string"?s:String(s))}});else if(r.headers instanceof Headers)I.inject(v.active(),r.headers,{set:function(a,o,s){return a.set(o,typeof s=="string"?s:String(s))}});else{var i={};I.inject(v.active(),i),r.headers=Object.assign({},i,r.headers||{})}},e.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},e.prototype._createSpan=function(r,n){var i;if(n===void 0&&(n={}),Ne(r,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var a=(n.method||"GET").toUpperCase(),o="HTTP "+a;return this.tracer.startSpan(o,{kind:jt.CLIENT,attributes:(i={},i[mt.COMPONENT]=this.moduleName,i[O.HTTP_METHOD]=a,i[O.HTTP_URL]=r,i)})},e.prototype._findResourceAndAddNetworkEvents=function(r,n,i){var a=n.entries;if(!a.length){if(!performance.getEntriesByType)return;a=performance.getEntriesByType("resource")}var o=Ve(n.spanUrl,n.startTime,i,a,this._usedResources,"fetch");if(o.mainRequest){var s=o.mainRequest;this._markResourceAsUsed(s);var u=o.corsPreFlightRequest;u&&(this._addChildSpan(r,u),this._markResourceAsUsed(u)),this._getConfig().ignoreNetworkEvents||$(r,s)}},e.prototype._markResourceAsUsed=function(r){this._usedResources.add(r)},e.prototype._endSpan=function(r,n,i){var a=this,o=M(Date.now()),s=z();this._addFinalSpanAttributes(r,i),setTimeout(function(){var u;(u=n.observer)===null||u===void 0||u.disconnect(),a._findResourceAndAddNetworkEvents(r,n,s),a._tasksCount--,a._clearResources(),r.end(o)},Bi)},e.prototype._patchConstructor=function(){var r=this;return function(n){var i=r;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=this,_=D(o[0]instanceof Request?o[0].url:String(o[0])).href,c=o[0]instanceof Request?o[0]:o[1]||{},f=i._createSpan(_,c);if(!f)return n.apply(this,o);var E=i._prepareSpanData(_);function p(h,m){i._applyAttributesAfterFetch(h,c,m),i._endSpan(h,E,{status:m.status||0,statusText:m.message,url:_})}function T(h,m){i._applyAttributesAfterFetch(h,c,m),m.status>=200&&m.status<400?i._endSpan(h,E,m):i._endSpan(h,E,{status:m.status,statusText:m.statusText,url:_})}function S(h,m,N){try{var at=N.clone(),yt=N.clone(),Q=at.body;if(Q){var je=Q.getReader(),Wt=function(){je.read().then(function(gt){var Fe=gt.done;Fe?T(h,yt):Wt()},function(gt){p(h,gt)})};Wt()}else T(h,N)}finally{m(N)}}function g(h,m,N){try{p(h,N)}finally{m(N)}}return new Promise(function(h,m){return v.with(R.setSpan(v.active(),f),function(){return i._addHeaders(c,_),i._tasksCount++,n.apply(u,c instanceof Request?[c]:[_,c]).then(S.bind(u,f,h),g.bind(u,f,m))})})}}},e.prototype._applyAttributesAfterFetch=function(r,n,i){var a=this,o=this._getConfig().applyCustomAttributesOnSpan;o&&vt(function(){return o(r,n,i)},function(s){s&&a._diag.error("applyCustomAttributesOnSpan",s)},!0)},e.prototype._prepareSpanData=function(r){var n=z(),i=[];if(typeof PerformanceObserver!="function")return{entries:i,startTime:n,spanUrl:r};var a=new PerformanceObserver(function(o){var s=o.getEntries();s.forEach(function(u){u.initiatorType==="fetch"&&u.name===r&&i.push(u)})});return a.observe({entryTypes:["resource"]}),{entries:i,observer:a,startTime:n,spanUrl:r}},e.prototype.enable=function(){Vt(fetch)&&(this._unwrap(X,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(X,"fetch",this._patchConstructor())},e.prototype.disable=function(){this._unwrap(X,"fetch"),this._usedResources=new WeakSet},e}(Kt),w;(function(t){t.METHOD_OPEN="open",t.METHOD_SEND="send",t.EVENT_ABORT="abort",t.EVENT_ERROR="error",t.EVENT_LOAD="loaded",t.EVENT_TIMEOUT="timeout"})(w||(w={}));var se="0.44.0",Xt;(function(t){t.HTTP_STATUS_TEXT="http.status_text"})(Xt||(Xt={}));var Hi=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vi=300,Xi=function(t){Hi(e,t);function e(r){var n=t.call(this,"@opentelemetry/instrumentation-xml-http-request",se,r)||this;return n.component="xml-http-request",n.version=se,n.moduleName=n.component,n._tasksCount=0,n._xhrMem=new WeakMap,n._usedResources=new WeakSet,n}return e.prototype.init=function(){},e.prototype._getConfig=function(){return this._config},e.prototype._addHeaders=function(r,n){var i=D(n).href;if(!Xe(i,this._getConfig().propagateTraceHeaderCorsUrls)){var a={};I.inject(v.active(),a),Object.keys(a).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}var o={};I.inject(v.active(),o),Object.keys(o).forEach(function(s){r.setRequestHeader(s,String(o[s]))})},e.prototype._addChildSpan=function(r,n){var i=this;v.with(R.setSpan(v.active(),r),function(){var a=i.tracer.startSpan("CORS Preflight",{startTime:n[d.FETCH_START]});$(a,n),a.end(n[d.RESPONSE_END])})},e.prototype._addFinalSpanAttributes=function(r,n,i){if(typeof i=="string"){var a=D(i);n.status!==void 0&&r.setAttribute(O.HTTP_STATUS_CODE,n.status),n.statusText!==void 0&&r.setAttribute(Xt.HTTP_STATUS_TEXT,n.statusText),r.setAttribute(O.HTTP_HOST,a.host),r.setAttribute(O.HTTP_SCHEME,a.protocol.replace(":","")),r.setAttribute(O.HTTP_USER_AGENT,navigator.userAgent)}},e.prototype._applyAttributesAfterXHR=function(r,n){var i=this,a=this._getConfig().applyCustomAttributesOnSpan;typeof a=="function"&&vt(function(){return a(r,n)},function(o){o&&i._diag.error("applyCustomAttributesOnSpan",o)},!0)},e.prototype._addResourceObserver=function(r,n){var i=this._xhrMem.get(r);!i||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(i.createdResources={observer:new PerformanceObserver(function(a){var o=a.getEntries(),s=D(n);o.forEach(function(u){u.initiatorType==="xmlhttprequest"&&u.name===s.href&&i.createdResources&&i.createdResources.entries.push(u)})}),entries:[]},i.createdResources.observer.observe({entryTypes:["resource"]}))},e.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(C.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},e.prototype._findResourceAndAddNetworkEvents=function(r,n,i,a,o){if(!(!i||!a||!o||!r.createdResources)){var s=r.createdResources.entries;(!s||!s.length)&&(s=C.getEntriesByType("resource"));var u=Ve(D(i).href,a,o,s,this._usedResources);if(u.mainRequest){var _=u.mainRequest;this._markResourceAsUsed(_);var c=u.corsPreFlightRequest;c&&(this._addChildSpan(n,c),this._markResourceAsUsed(c)),$(n,_)}}},e.prototype._cleanPreviousSpanInformation=function(r){var n=this._xhrMem.get(r);if(n){var i=n.callbackToRemoveEvents;i&&i(),this._xhrMem.delete(r)}},e.prototype._createSpan=function(r,n,i){var a;if(Ne(n,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var o=i.toUpperCase(),s=this.tracer.startSpan(o,{kind:jt.CLIENT,attributes:(a={},a[O.HTTP_METHOD]=i,a[O.HTTP_URL]=D(n).toString(),a)});return s.addEvent(w.METHOD_OPEN),this._cleanPreviousSpanInformation(r),this._xhrMem.set(r,{span:s,spanUrl:n}),s},e.prototype._markResourceAsUsed=function(r){this._usedResources.add(r)},e.prototype._patchOpen=function(){var r=this;return function(n){var i=r;return function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var u=o[0],_=o[1];return i._createSpan(this,_,u),n.apply(this,o)}}},e.prototype._patchSend=function(){var r=this;function n(c,f,E,p){var T=f.callbackToRemoveEvents;typeof T=="function"&&T();var S=f.span,g=f.spanUrl,h=f.sendStartTime;S&&(r._findResourceAndAddNetworkEvents(f,S,g,h,E),S.addEvent(c,p),r._addFinalSpanAttributes(S,f,g),S.end(p),r._tasksCount--),r._clearResources()}function i(c,f){var E=r._xhrMem.get(f);if(E){E.status=f.status,E.statusText=f.statusText,r._xhrMem.delete(f),E.span&&r._applyAttributesAfterXHR(E.span,f);var p=z(),T=Date.now();setTimeout(function(){n(c,E,p,T)},Vi)}}function a(){i(w.EVENT_ERROR,this)}function o(){i(w.EVENT_ABORT,this)}function s(){i(w.EVENT_TIMEOUT,this)}function u(){this.status<299?i(w.EVENT_LOAD,this):i(w.EVENT_ERROR,this)}function _(c){c.removeEventListener("abort",o),c.removeEventListener("error",a),c.removeEventListener("load",u),c.removeEventListener("timeout",s);var f=r._xhrMem.get(c);f&&(f.callbackToRemoveEvents=void 0)}return function(c){return function(){for(var E=this,p=[],T=0;T<arguments.length;T++)p[T]=arguments[T];var S=r._xhrMem.get(this);if(!S)return c.apply(this,p);var g=S.span,h=S.spanUrl;return g&&h&&v.with(R.setSpan(v.active(),g),function(){r._tasksCount++,S.sendStartTime=z(),g.addEvent(w.METHOD_SEND),E.addEventListener("abort",o),E.addEventListener("error",a),E.addEventListener("load",u),E.addEventListener("timeout",s),S.callbackToRemoveEvents=function(){_(E),S.createdResources&&S.createdResources.observer.disconnect()},r._addHeaders(E,h),r._addResourceObserver(E,h)}),c.apply(this,p)}}},e.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),Vt(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),Vt(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},e.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},e}(Kt);async function Yi(){if(typeof window>"u")return;const t=new Bt({[P.SERVICE_NAME]:"chatgpt-web"}),e=new Li({resource:t,sampler:new j});e.addSpanProcessor(new He(new Qn({url:"https://chatgpt.com/backend-api/o11y/v1/traces"}))),e.register({propagator:new Se({propagators:[new ve]})});const r=[new RegExp(".*/api/lat(/.*)?"),new RegExp(".*/ces(/.*)?")],n=[new RegExp("https?://.*.openai.com/"),new RegExp("https?://.*.openai.org/"),new RegExp("http://localhost:8000/")],i=a=>{window.location.pathname==="/search"&&a.setAttribute("http.url",qe(window.location.href))};ti({instrumentations:[new Ui({applyCustomAttributesOnSpan:{documentLoad:i,documentFetch:i}}),new Xi({propagateTraceHeaderCorsUrls:n,ignoreUrls:r}),new Gi({propagateTraceHeaderCorsUrls:n,ignoreUrls:r})]})}export{Yi as initOpenTelemetry};
//# sourceMappingURL=jflnb0v7verax3ac.js.map
