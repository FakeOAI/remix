import{dq as g,bp as m,r as o,ag as R,t as S,j as b,bV as p,bW as h}from"./ius2rjc8aciuj2rl.js";import"./lzyd9n5t1klxadwf.js";function _(){const{pluginId:t,code:i,state:n,error:r,errorDesc:c}=g(),e=m(),u=o.useRef(!1);o.useEffect(()=>{if(u.current===!0)return;u.current=!0;async function f(){const d=`https://chat.openai.com/aip/${t}/oauth/callback`;try{const a=await b.pluginOauthCallback(t,i,d,n);if(a.success){const s=new URL(p(h.OAUTH_SUCCESS,a.redirect_path),location.origin);s.searchParams.set("oauth_success","true"),e(s.pathname+s.search+s.hash)}else e(p(h.CUSTOM_ERROR,a.redirect_path,a.error??a.message))}catch{e(`/?model=gpt-4-plugins&loginAip=${t}&loginSuccess=false`)}}f()},[t,i,n,e]);const l=R();return o.useEffect(()=>{r&&l.danger(`${r}${c?`: ${c}`:""}`,{duration:5})},[r,c,l]),S.jsx("div",{})}export{_ as default};
//# sourceMappingURL=oiywvje27g0svasf.js.map
