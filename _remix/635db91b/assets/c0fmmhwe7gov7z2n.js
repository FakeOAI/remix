const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/f56dv5sz4ulg9sgm.js","assets/j18nlqm348px4nxa.js","assets/cpvd0jqo6wbwcv7c.js","assets/root-k8lflb3j.css","assets/hc8non16qyh1ycvz.js","assets/conversation-small-ict01xsi.css","assets/joa8jajuiu4xqpzn.js"])))=>i.map(i=>d[i]);
import{r as c,b8 as Ee,b9 as R,bd as ye,bb as I,bg as T,bf as F,bq as Ce,bc as De,aw as ae,aj as O,a6 as a,ar as G,aG as V,a7 as se,aK as je,aY as Ie,S as Me,P as Pe,d as _e,aE as ke,aF as Te,j as Re,M as Ae,a_ as Ne,D as Ve}from"./j18nlqm348px4nxa.js";import{F as Be}from"./l3gmwm1hk2cq39e0.js";import{cn as Ke,co as Le,cp as re,v as Fe,hX as ie,hY as Oe,hZ as He,fP as ze,fJ as ce,bL as L,h_ as Ue,B as We,dB as Ge,F as Ye,fQ as Xe,h$ as qe,dG as Qe,d$ as Ze,fW as Je,eT as Z,eU as J,bx as et,dk as tt,fT as nt,i0 as ot,i1 as at,bM as le,dp as st,i2 as rt}from"./hc8non16qyh1ycvz.js";import{q as it,c as de,b as ct,af as lt,H as dt,E as ut}from"./cpvd0jqo6wbwcv7c.js";import{m as ue}from"./bwe24t3vlnfvd060.js";import"./booq20derfx12m7l.js";import"./mbhjywfydzkfdscr.js";import"./gfh3dbx3087v98sc.js";import"./k88rmqm6iuqaust8.js";import"./nm8z1leg9dhha3op.js";import"./ddl6w8k77zmhi7w7.js";import"./nwd7nny9amzb1avc.js";import"./f85nc18lmxal1qfx.js";import"./lgsl3dysdbxpkr2z.js";import"./gt8993fxmxhixsk7.js";import"./hov7gjsa7oriz6xr.js";import"./gngfhgwki5dmrcxm.js";import"./jnfuxw56ct2r9x2a.js";import"./ddk7aelm51dpp13k.js";import"./o6r234vjvtljygvx.js";import"./ndhsb6vrb8xgu7vo.js";import"./c6t6bi75jysvfh53.js";import"./hcmntarvmmg3l0rz.js";import"./k7wp4f2ai8b9g3jk.js";import"./n7p4alt692kzr50o.js";import"./fzc1w2tjj1tkynoz.js";function ft(){const[e,t]=c.useState({undoStack:[],currentIndex:-1});function n(r){t(l=>({undoStack:[...l.undoStack.slice(0,l.currentIndex+1),r],currentIndex:l.currentIndex+1}))}function s(){t(r=>({undoStack:r.undoStack,currentIndex:Math.max(r.currentIndex-1,-1)}))}function i(){t(r=>({undoStack:r.undoStack,currentIndex:Math.min(r.currentIndex+1,r.undoStack.length-1)}))}function o(){t({undoStack:[],currentIndex:-1})}return{currentDrawnShape:e.undoStack.length>0?e.undoStack[e.currentIndex]:null,onNewDrawnShape:n,canUndoDrawing:e.currentIndex>=0,undoDrawing:s,canRedoDrawing:e.currentIndex<e.undoStack.length-1,redoDrawing:i,clearAllDrawings:o}}const fe=["PageUp","PageDown"],me=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],pe={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},B="Slider",[W,mt,pt]=Ke(B),[ge,bn]=Ee(B,[pt]),[gt,H]=ge(B),ht=c.forwardRef((e,t)=>{const{name:n,min:s=0,max:i=100,step:o=1,orientation:r="horizontal",disabled:l=!1,minStepsBetweenThumbs:u=0,defaultValue:p=[s],value:m,onValueChange:d=()=>{},onValueCommit:f=()=>{},inverted:S=!1,...b}=e,[h,x]=c.useState(null),w=R(t,v=>x(v)),j=c.useRef(new Set),g=c.useRef(0),C=r==="horizontal",$=h?!!h.closest("form"):!0,_=C?xt:St,[E=[],z]=ye({prop:m,defaultProp:p,onChange:v=>{var D;(D=[...j.current][g.current])===null||D===void 0||D.focus(),d(v)}}),X=c.useRef(E);function be(v){const D=jt(E,v);A(v,D)}function ve(v){A(v,g.current)}function we(){const v=X.current[g.current];E[g.current]!==v&&f(E)}function A(v,D,{commit:K}={commit:!1}){const q=_t(o),U=kt(Math.round((v-s)/o)*o+s,q),N=re(U,[s,i]);z((k=[])=>{const P=Ct(k,N,D);if(Pt(P,u*o)){g.current=P.indexOf(N);const Q=String(P)!==String(k);return Q&&K&&f(P),Q?P:k}else return k})}return c.createElement(gt,{scope:e.__scopeSlider,disabled:l,min:s,max:i,valueIndexToChangeRef:g,thumbs:j.current,values:E,orientation:r},c.createElement(W.Provider,{scope:e.__scopeSlider},c.createElement(W.Slot,{scope:e.__scopeSlider},c.createElement(_,I({"aria-disabled":l,"data-disabled":l?"":void 0},b,{ref:w,onPointerDown:T(b.onPointerDown,()=>{l||(X.current=E)}),min:s,max:i,inverted:S,onSlideStart:l?void 0:be,onSlideMove:l?void 0:ve,onSlideEnd:l?void 0:we,onHomeKeyDown:()=>!l&&A(s,0,{commit:!0}),onEndKeyDown:()=>!l&&A(i,E.length-1,{commit:!0}),onStepKeyDown:({event:v,direction:D})=>{if(!l){const U=fe.includes(v.key)||v.shiftKey&&me.includes(v.key)?10:1,N=g.current,k=E[N],P=o*U*D;A(k+P,N,{commit:!0})}}})))),$&&E.map((v,D)=>c.createElement(yt,{key:D,name:n?n+(E.length>1?"[]":""):void 0,value:v})))}),[he,xe]=ge(B,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xt=c.forwardRef((e,t)=>{const{min:n,max:s,dir:i,inverted:o,onSlideStart:r,onSlideMove:l,onSlideEnd:u,onStepKeyDown:p,...m}=e,[d,f]=c.useState(null),S=R(t,g=>f(g)),b=c.useRef(),h=De(i),x=h==="ltr",w=x&&!o||!x&&o;function j(g){const C=b.current||d.getBoundingClientRect(),$=[0,C.width],E=Y($,w?[n,s]:[s,n]);return b.current=C,E(g-C.left)}return c.createElement(he,{scope:e.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width"},c.createElement(Se,I({dir:h,"data-orientation":"horizontal"},m,{ref:S,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:g=>{const C=j(g.clientX);r?.(C)},onSlideMove:g=>{const C=j(g.clientX);l?.(C)},onSlideEnd:()=>{b.current=void 0,u?.()},onStepKeyDown:g=>{const $=pe[w?"from-left":"from-right"].includes(g.key);p?.({event:g,direction:$?-1:1})}})))}),St=c.forwardRef((e,t)=>{const{min:n,max:s,inverted:i,onSlideStart:o,onSlideMove:r,onSlideEnd:l,onStepKeyDown:u,...p}=e,m=c.useRef(null),d=R(t,m),f=c.useRef(),S=!i;function b(h){const x=f.current||m.current.getBoundingClientRect(),w=[0,x.height],g=Y(w,S?[s,n]:[n,s]);return f.current=x,g(h-x.top)}return c.createElement(he,{scope:e.__scopeSlider,startEdge:S?"bottom":"top",endEdge:S?"top":"bottom",size:"height",direction:S?1:-1},c.createElement(Se,I({"data-orientation":"vertical"},p,{ref:d,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:h=>{const x=b(h.clientY);o?.(x)},onSlideMove:h=>{const x=b(h.clientY);r?.(x)},onSlideEnd:()=>{f.current=void 0,l?.()},onStepKeyDown:h=>{const w=pe[S?"from-bottom":"from-top"].includes(h.key);u?.({event:h,direction:w?-1:1})}})))}),Se=c.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:r,onEndKeyDown:l,onStepKeyDown:u,...p}=e,m=H(B,n);return c.createElement(F.span,I({},p,{ref:t,onKeyDown:T(e.onKeyDown,d=>{d.key==="Home"?(r(d),d.preventDefault()):d.key==="End"?(l(d),d.preventDefault()):fe.concat(me).includes(d.key)&&(u(d),d.preventDefault())}),onPointerDown:T(e.onPointerDown,d=>{const f=d.target;f.setPointerCapture(d.pointerId),d.preventDefault(),m.thumbs.has(f)?f.focus():s(d)}),onPointerMove:T(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:T(e.onPointerUp,d=>{const f=d.target;f.hasPointerCapture(d.pointerId)&&(f.releasePointerCapture(d.pointerId),o(d))})}))}),$t="SliderTrack",bt=c.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=H($t,n);return c.createElement(F.span,I({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},s,{ref:t}))}),ee="SliderRange",vt=c.forwardRef((e,t)=>{const{__scopeSlider:n,...s}=e,i=H(ee,n),o=xe(ee,n),r=c.useRef(null),l=R(t,r),u=i.values.length,p=i.values.map(f=>$e(f,i.min,i.max)),m=u>1?Math.min(...p):0,d=100-Math.max(...p);return c.createElement(F.span,I({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},s,{ref:l,style:{...e.style,[o.startEdge]:m+"%",[o.endEdge]:d+"%"}}))}),te="SliderThumb",wt=c.forwardRef((e,t)=>{const n=mt(e.__scopeSlider),[s,i]=c.useState(null),o=R(t,l=>i(l)),r=c.useMemo(()=>s?n().findIndex(l=>l.ref.current===s):-1,[n,s]);return c.createElement(Et,I({},e,{ref:o,index:r}))}),Et=c.forwardRef((e,t)=>{const{__scopeSlider:n,index:s,...i}=e,o=H(te,n),r=xe(te,n),[l,u]=c.useState(null),p=R(t,x=>u(x)),m=Ce(l),d=o.values[s],f=d===void 0?0:$e(d,o.min,o.max),S=Dt(s,o.values.length),b=m?.[r.size],h=b?It(b,f,r.direction):0;return c.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),c.createElement("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[r.startEdge]:`calc(${f}% + ${h}px)`}},c.createElement(W.ItemSlot,{scope:e.__scopeSlider},c.createElement(F.span,I({role:"slider","aria-label":e["aria-label"]||S,"aria-valuemin":o.min,"aria-valuenow":d,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0},i,{ref:p,style:d===void 0?{display:"none"}:e.style,onFocus:T(e.onFocus,()=>{o.valueIndexToChangeRef.current=s})}))))}),yt=e=>{const{value:t,...n}=e,s=c.useRef(null),i=Le(t);return c.useEffect(()=>{const o=s.current,r=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(r,"value").set;if(i!==t&&u){const p=new Event("input",{bubbles:!0});u.call(o,t),o.dispatchEvent(p)}},[i,t]),c.createElement("input",I({style:{display:"none"}},n,{ref:s,defaultValue:t}))};function Ct(e=[],t,n){const s=[...e];return s[n]=t,s.sort((i,o)=>i-o)}function $e(e,t,n){const o=100/(n-t)*(e-t);return re(o,[0,100])}function Dt(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function jt(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),s=Math.min(...n);return n.indexOf(s)}function It(e,t,n){const s=e/2,o=Y([0,50],[0,s]);return(s-o(t)*n)*n}function Mt(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function Pt(e,t){if(t>0){const n=Mt(e);return Math.min(...n)>=t}return!0}function Y(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(n-e[0])}}function _t(e){return(String(e).split(".")[1]||"").length}function kt(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}const Tt=ht,Rt=bt,At=vt,Nt=wt;var y=(e=>(e[e.Default=0]="Default",e[e.Inpaint=1]="Inpaint",e))(y||{});function Vt({imageAsset:e,mode:t,setMode:n,clientThreadId:s,messageId:i,cursorWidth:o,setCursorWidth:r,inpaintingDrawingState:l,isLoadingNewImage:u}){const p=Fe.getServerThreadId(s),{canUndoDrawing:m,undoDrawing:d,canRedoDrawing:f,redoDrawing:S,clearAllDrawings:b}=l,h=O();return a.jsxs(ue.div,{className:"flex h-16 w-full justify-between px-4",...ie,children:[a.jsx("div",{className:"flex items-center",children:t===y.Inpaint&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:G("flex items-center gap-3",u&&"opacity-50"),children:[a.jsx(oe,{className:"h-[11px] w-[11px]"}),a.jsxs(Tt,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[o],onValueChange:x=>r(x[0]),disabled:u,children:[a.jsx(Rt,{className:"relative h-[2px] grow bg-token-text-quaternary",children:a.jsx(At,{className:"absolute h-full bg-token-text-secondary"})}),a.jsx(Nt,{className:"block h-[11px] w-[11px] rounded-full bg-token-text-secondary"})]}),a.jsx(oe,{className:"h-6 w-6"})]}),a.jsx(ne,{}),a.jsx(M,{disabled:!m||u,onClick:d,children:a.jsx(Oe,{})}),a.jsx(M,{disabled:!f||u,onClick:S,children:a.jsx(He,{})}),a.jsx(ne,{}),a.jsx(M,{disabled:!m||u,onClick:b,children:a.jsx(V,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),a.jsx("div",{className:"flex items-center",children:t===y.Inpaint?a.jsx(M,{onClick:()=>n(y.Default),disabled:u,children:a.jsx(V,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):a.jsxs(a.Fragment,{children:[a.jsx(Kt,{imageAsset:e,setMode:n,messageId:i,serverThreadId:p}),a.jsx(M,{tooltip:h.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>ze(e,p,i),children:a.jsx(it,{})}),a.jsx(Bt,{prompt:ce(e),children:a.jsx(M,{tooltip:h.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:a.jsx(de,{})})}),a.jsx(M,{tooltip:h.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:L.close,children:a.jsx(ct,{className:"icon-lg"})})]})})]})}function Bt({prompt:e,children:t}){const[n,s]=c.useState(!1),i=O(),o=se();return a.jsx(Ue,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:a.jsx("div",{className:"group",children:t}),className:"z-10",size:"none",children:a.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[a.jsx("div",{className:"text-token-text-secondary",children:a.jsx(V,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),a.jsx("div",{children:e}),a.jsx("div",{children:a.jsx(je,{color:"secondary",disabled:n,onClick:r=>{s(!0),We(e,o,r),setTimeout(()=>s(!1),2e3)},icon:lt,children:n?i.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):i.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function M({children:e,tooltip:t,disabled:n,onClick:s}){const i=a.jsx("button",{className:G("rounded p-2 font-semibold hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary",n?"text-token-text-quaternary":"text-token-text-secondary"),disabled:n,onClick:s,children:e});return t!=null?a.jsx(Ie,{label:t,sideOffset:4,children:i}):i}function Kt({imageAsset:e,setMode:t,messageId:n,serverThreadId:s,disabled:i}){const o=O(),r=Ge(Ye.DalleEditingOnboarding),l=r.eligible&&!r.isLoading,u=a.jsx(M,{tooltip:l?void 0:o.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:()=>{t(y.Inpaint),Me.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:e.metadata?.dalle?.edit_op??"none",hasParent:e.metadata?.dalle?.parent_gen_id!=null?"true":"false"}),Pe.logEvent(_e.dalleImageClickInpaint,{conversationId:s,messageId:n,generationId:e.metadata?.dalle?.gen_id,fileId:Xe(e.asset_pointer),parentGenerationId:e.metadata?.dalle?.parent_gen_id,sourceOperation:e.metadata?.dalle?.edit_op})},disabled:i,children:a.jsx(qe,{})});return l?a.jsx(Qe,{show:!0,side:"bottom",sideOffset:0,title:o.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:o.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:r.markAsViewed,children:a.jsx("div",{children:u})}):u}const ne=ae.div`mx-3 w-[1px] h-6 bg-token-border-light`,oe=ae.div`rounded-full border-2 border-token-text-secondary`;function Lt({mode:e,imageIndex:t,allImages:n,onSwitchImage:s,isLoadingNewImage:i}){const o=t>0,r=c.useCallback(()=>{o&&s(n[t-1])},[o,n,t,s]),l=t<n.length-1,u=c.useCallback(()=>{l&&s(n[t+1])},[l,n,t,s]);return c.useEffect(()=>{function p(m){m.target instanceof HTMLTextAreaElement||e===y.Default&&(m.key==="ArrowLeft"?r():m.key==="ArrowRight"&&u())}return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}},[e,r,u]),a.jsx("div",{className:"flex h-16 w-full items-center justify-center gap-3 font-semibold text-token-text-secondary",children:e===y.Inpaint?!i&&a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(V,{id:"imageEditor.selectArea",defaultMessage:"Select an area to edit"}),a.jsx("a",{href:"https://help.openai.com/en/articles/9055440",target:"_blank",rel:"noreferrer",children:a.jsx(de,{className:"icon-md"})})]}):n.length>1?a.jsxs(a.Fragment,{children:[a.jsx("button",{disabled:!o,className:"disabled:text-token-text-tertiary",onClick:r,children:a.jsx(dt,{className:"icon-lg"})}),a.jsx("div",{children:a.jsx(V,{id:"imageEditor.imageNumber",defaultMessage:"Image {num} of {numImages}",values:{num:t+1,numImages:n.length}})}),a.jsx("button",{disabled:!l,className:"disabled:text-token-text-tertiary",onClick:u,children:a.jsx(ut,{className:"icon-lg"})})]}):null})}const Ft=0,Ot=64;function Ht({imageAsset:e,children:t,containerDimensions:n,isLoadingNewImage:s}){return a.jsxs(ue.div,{className:"absolute",style:zt(e,n),...ie,children:[t,a.jsx("div",{className:G("absolute inset-0 flex items-center justify-center bg-token-main-surface-primary transition-opacity duration-1000",s?"pointer-events-auto opacity-60":"pointer-events-none opacity-0")})]})}function zt(e,t){const{width:n,height:s}=e,{width:i,height:o}=t,r=i-2*Ft,l=o-2*Ot,u=n/s,p=r/l,m=u>p,d=m?r:l*u,f=m?r/u:l,S=(o-f)/2,b=(i-d)/2;return{top:S,left:b,width:d,height:f}}const Ut=ke(()=>Te(()=>import("./f56dv5sz4ulg9sgm.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>e.DynamicDrawingCanvas));function vn({clientThreadId:e,messageId:t,image:n,allImages:s}){const i=Ze(e),o=Je(e,i),r=o?.messages[o.messages.length-1],l=r!=null&&Z(r.message)===J.Dalle&&!et(r.message),u=Re();return c.useEffect(()=>{async function p(m,d){try{const f=await rt(u,m);L.setFocusedObject({type:le.Image,image:f[0],allImages:f,messageId:d})}catch(f){Ve.addError(new Error("Failed to load newly created images:",{cause:f}))}}if(r!=null&&Z(r.message)===J.DalleTool&&r.message.content.content_type===Ae.MultimodalText){const m=tt.getImageAssetPointers(r.message);p(m,r.message.id)}},[u,r]),a.jsx(Wt,{image:n,allImages:s,isLoadingNewImage:l,clientThreadId:e,messageId:t})}function Wt({image:e,allImages:t,isLoadingNewImage:n,clientThreadId:s,messageId:i}){const[o,r]=c.useState(y.Default),[l,u]=c.useState({width:window.innerWidth-Be,height:window.innerHeight}),p=c.useRef(null),[m,d]=c.useState(136),f=ft(),{currentDrawnShape:S,onNewDrawnShape:b,clearAllDrawings:h}=f,x=c.useRef(null),w=O(),j=se(),{setTargetedContent:g}=nt();c.useEffect(()=>{const $=new ResizeObserver(_=>{const{width:E,height:z}=_[0].contentRect;u({width:E,height:z})});return p.current&&$.observe(p.current),()=>{$.disconnect()}},[]),c.useEffect(()=>{function $(_){_.key==="Escape"&&(o===y.Inpaint?r(y.Default):L.close())}return document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)}},[o]),c.useEffect(()=>(S==null?g({type:"object",placeholderTextOverride:Ne({id:"imageEditor.transformationTextareaPlaceholder",defaultMessage:"Edit image…"}),shouldPersistAcrossMessages:!0,isFocusedViewContent:!0,createNewCompletionParams:$=>ot($,e)}):g({type:"object",label:w.formatMessage({id:"imageEditor.inpaintingTargetedContentLabel",defaultMessage:"Edit selection"}),isFocusedViewContent:!0,createNewCompletionParams:async $=>await at($,e,x.current?.getImageData(),w,j),onCleared:()=>r(y.Default)}),()=>{g(void 0)}),[e,w,g,S,j]),c.useEffect(()=>{o!==y.Inpaint&&h()},[o]),c.useEffect(()=>{r(y.Default)},[e]);const C=t.findIndex($=>$.asset_pointer===e.asset_pointer);return a.jsxs("div",{ref:p,className:"flex h-full w-full flex-col justify-between",children:[a.jsx(Vt,{imageAsset:e,mode:o,setMode:r,clientThreadId:s,messageId:i,cursorWidth:m,setCursorWidth:d,inpaintingDrawingState:f,isLoadingNewImage:n}),a.jsx(Lt,{mode:o,imageIndex:C,allImages:t,onSwitchImage:$=>{L.setFocusedObject({type:le.Image,image:$,allImages:t,messageId:i})},isLoadingNewImage:n}),a.jsxs(Ht,{imageAsset:e,containerDimensions:l,isLoadingNewImage:n,children:[a.jsx(st,{className:"h-full w-full",alt:ce(e),src:e.url,width:e.width,height:e.height,fadeIn:!1}),o===y.Inpaint&&a.jsx("div",{className:"absolute inset-0",children:a.jsx(Ut,{drawingCanvasRef:x,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:m,canvasWidth:e.width,canvasHeight:e.height,currentDrawnShape:S,onNewDrawnShape:b})})]})]})}export{vn as ImageEditor};
//# sourceMappingURL=c0fmmhwe7gov7z2n.js.map
