const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/mpg03trlkqybu0k5.js","assets/j18nlqm348px4nxa.js","assets/cpvd0jqo6wbwcv7c.js","assets/root-k8lflb3j.css","assets/hc8non16qyh1ycvz.js","assets/conversation-small-ict01xsi.css","assets/mbhjywfydzkfdscr.js","assets/bwe24t3vlnfvd060.js","assets/gfh3dbx3087v98sc.js","assets/k88rmqm6iuqaust8.js","assets/nm8z1leg9dhha3op.js","assets/ddl6w8k77zmhi7w7.js","assets/nwd7nny9amzb1avc.js","assets/gt8993fxmxhixsk7.js","assets/booq20derfx12m7l.js","assets/f85nc18lmxal1qfx.js","assets/hov7gjsa7oriz6xr.js","assets/kgwfnqupee1kyjjj.js","assets/j9bbcllick27fbp6.js"])))=>i.map(i=>d[i]);
import{U as ne,a6 as e,r as d,ar as u,aG as G,aE as S,aF as j,aj as v,aL as ie,a9 as re,aY as w,a3 as y,aB as M,an as D,b6 as R,b0 as oe,dM as c,az as ce,aA as le,eJ as de,w as ue,v as L,bR as me,cF as he,ak as be}from"./j18nlqm348px4nxa.js";import{dB as A,F as T,bX as ge,j8 as fe,dG as xe,f2 as pe,j9 as Se,ja as je,bZ as ve,cw as ye,jb as Ce,br as H,bR as ke,jc as Ne,U as z,bc as U,ds as V,ba as Ie,bb as W,jd as K,je as we,jf as Me,eS as Ae,jg as Te,bU as _e,jh as Fe,aj as Oe,gd as _,b8 as p,ji as q,jj as Pe,jk as X,jl as $,gy as Ee,jm as Le,jn as B,jo as f,jp as ze,jq as Be,ca as Ge,jr as De,js as Re,f7 as He}from"./hc8non16qyh1ycvz.js";import{r as Ue,a0 as Y,by as Ve,aj as J,ai as We,bz as Ke,$ as qe}from"./cpvd0jqo6wbwcv7c.js";import{B as Z,D as Xe}from"./mbhjywfydzkfdscr.js";import{m as $e}from"./bwe24t3vlnfvd060.js";import{N as Ye,u as Q,g as Je}from"./gfh3dbx3087v98sc.js";import{u as Ze}from"./gt8993fxmxhixsk7.js";import{U as Qe,P as es}from"./booq20derfx12m7l.js";import{F as N}from"./hov7gjsa7oriz6xr.js";function ss(){const s=A(T.SonicSidebar),[t,a]=d.useState(!1);return s.isLoading||!s.eligible?null:e.jsx($e.div,{className:"no-draggable group pb-0",whileTap:{scale:.98},children:e.jsx(as,{children:e.jsx(ge,{href:"/search",target:"_blank",icon:e.jsx("div",{className:u("gizmo-shadow-stroke mr-[0.5] flex h-[18px] w-[18px] items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:e.jsx(fe,{})}),label:"SearchGPT",hoverRightIcon:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ns,{isOpen:t,setIsOpen:a,onDismiss:()=>s.markAsViewed()}),e.jsx(Ue,{className:u("icon-md text-token-text-tertiary",!t&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function ts(){const s=pe(),t=A(T.hasSeenSncSidebarTooltip),a=Se(),n=je(),{activeModals:o}=ve(),i=ye();return!t.isLoading&&t.eligible&&!a&&o.size===0&&!s&&!n&&!i}function as({children:s}){const t=ts(),a=A(T.hasSeenSncSidebarTooltip);return t?e.jsx(xe,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:a.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:e.jsx("div",{className:"w-full",children:s})}):e.jsx(e.Fragment,{children:s})}function ns({isOpen:s,setIsOpen:t,onDismiss:a}){return e.jsx(Z,{open:s,onOpenChange:t,triggerButton:e.jsx("button",{className:u("flex text-token-text-tertiary",s?"":"invisible group-hover:visible"),onClick:n=>{n.preventDefault()},children:e.jsx(Y,{className:"icon-md"})}),children:e.jsx(Xe.Item,{onClick:n=>{n.preventDefault(),a()},children:e.jsx(G,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}function is(){const s=ne("114024");return!s.value||s.isLoading?null:e.jsx(ss,{})}const rs=S(()=>j(()=>import("./mpg03trlkqybu0k5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(s=>s.FannyPackAction)),os=S(()=>j(()=>import("./kgwfnqupee1kyjjj.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(s=>s.GizmoSidebarList));function As({clientThreadId:s,onNewThread:t}){const a=U(s),n=y(),{isUnauthenticated:o}=M(),i=V(s),r=D();return o?null:e.jsxs(e.Fragment,{children:[e.jsx(Ie,{onNewThread:t}),n?.canInteractWithGizmos()?e.jsx(os,{currentGizmoId:i}):e.jsx(is,{}),!1,!o&&e.jsx(W,{activeId:r?void 0:a})]})}function Ts({className:s,onNewThread:t}){const a=v(),n=ie(),o=Ce(),i=re(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:r}=H();return e.jsxs("div",{className:u("flex",i?.visible&&i.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(w,{sideOffset:4,label:a.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(ke,{className:"no-draggable","aria-label":a.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{Ne(n)?z.toggleNavSidebar():z.togglePopoverNavSidebar()},icon:Ve,mobileIcon:J,surfaceContext:"secondary","data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[r&&e.jsx(rs,{}),!o&&e.jsx(Ye,{onClick:t,testId:"create-new-chat-button"})]})]})}function cs({onClick:s}){const{clientThreadId:t}=Q(),{isSidebarFlyoutOpen:a,onSidebarFlyoutOpenChange:n}=K();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(Z,{onOpenChange:n,side:"right",sideOffset:4,open:a,contentAlign:"end",triggerButton:e.jsxs("button",{className:u("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2.5 text-sm tracking-condensed text-token-text-secondary hover:bg-token-main-surface-secondary focus:ring-0",a&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(Y,{className:u("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(G,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(R,{children:e.jsx(W,{activeId:t,hideOverflowMenu:!0})})})})})}function ls({clientThreadId:s}){const t=U(s),a=D(),{isCollapsible:n,recentConversationLimit:o}=we(),i={recentConversationLimit:o},r=d.useRef(!1),l=!0,{conversations:b,data:m,isLoading:g,isError:C,recents:h,refetch:F}=Me(i),[ee,O]=d.useState(!0),P=d.useCallback(function(k){k===void 0&&O(!1),F({cancelRefetch:!0})},[F,O]),se=a?void 0:t,te=b.length===0,E=C||m===void 0&&!g&&r.current,ae=!E&&(m===void 0||g);return m===void 0&&!g&&!r.current&&(r.current=!0,P(!0)),d.useMemo(()=>{Ae.publish({kind:"refreshHistory",conversations:b})},[b]),e.jsxs(e.Fragment,{children:[E&&e.jsx(Te,{showRetry:ee,refetch:P}),!te&&e.jsx(_e,{header:h.label,isLastInGroup:!0,children:h.items.map((x,k)=>e.jsx(Fe,{item:x,isActive:x.id===se,testId:`history-item-${k}`},x.id))}),ae&&e.jsx(oe,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),n&&e.jsx(R,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!l,className:u(!l),children:e.jsx(cs,{})})})})]})}const ds=S(()=>j(()=>import("./kgwfnqupee1kyjjj.js"),__vite__mapDeps([17,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(s=>s.GizmoSidebarList));function us({clientThreadId:s}){const t=y(),a=V(s),{isUnauthenticated:n}=M();return n?null:e.jsxs("div",{className:u(c.screenContent),children:[null,e.jsx(ls,{clientThreadId:s}),t?.canInteractWithGizmos()?e.jsx(ds,{currentGizmoId:a}):null]})}function ms(){const s=y(),t=s?.data==null,{isUnauthenticated:a}=M(),{openSettings:n}=Oe(),[o]=d.useState(()=>{const m=ce.getCookie(le.Workspace);return typeof m=="string"&&m!==de}),i=v(),{store:r}=_(),l=r(m=>m.mode);if(!s||o&&t)return null;const b=a?e.jsx(Qe,{}):e.jsx(Je,{onClickSettings:()=>n()});return e.jsxs(p,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[b,e.jsx("div",{className:c.togglePinWrapper,children:e.jsx(q,{tooltipSideOffset:14,className:c.pinSidebarAction,icon:e.jsx(Pe,{}),label:l===X.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:$.FloatingOrPinned})})]})}function hs(){return e.jsx(p,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(es,{})})}function bs(){return e.jsxs(Ee,{className:u(c.screenTrailingBarContainer),children:[e.jsx(hs,{}),e.jsx(ms,{})]})}function gs(){return(ze()?"⌘":"Ctrl")+" K"}function fs(){const s=y(),t=Le(i=>i.isActive),a=v(),{value:n}=ue("1422501431");return d.useEffect(()=>{s&&(n?N.setCurrentAccountV2(s):N.setCurrentAccount(s),N.init())},[s,n]),d.useEffect(()=>{const i=r=>{r.metaKey&&r.key==="k"&&(t?f.logClose("shortcut"):(f.setSessionId(L()),f.logOpen("shortcut")),B.setIsActive(!t))};return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[t]),{openSearch:d.useCallback(()=>{B.setIsActive(!0),f.setSessionId(L()),f.logOpen("button")},[]),searchMsg:a.formatMessage({id:"jmd8WH",defaultMessage:"Search chats"}),shortcutMsg:gs()}}const xs=S(()=>j(()=>import("./j9bbcllick27fbp6.js"),__vite__mapDeps([18,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16])).then(s=>s.FannyPackIconButton));function ps({onNewThread:s}){const t=v(),a=d.useRef(null),{store:n,actions:o}=_(),i=n(h=>h.isSidebarOpen),{isSidebarFlyoutOpen:r}=K(),l=i&&!r;function b(){a.current&&getComputedStyle(a.current)?.getPropertyValue("--sidebar_should_light_dismiss")==="1"&&o.closeSidebar()}Be({checkElement:h=>h?.tagName==="NAV",enabled:l,onLightDismiss:b});const{isFannyPackEnabled:m}=H(),{searchMsg:g,shortcutMsg:C}=fs();return me(),e.jsxs(e.Fragment,{children:[e.jsx(p,{type:"primary",className:u(c.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[9px]",ref:a,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(q,{className:u(c.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},icon:e.jsxs(e.Fragment,{children:[e.jsx(We,{className:c.sidebarIcon,style:{display:"var(--screen-size-hidden-on-compact-mode)"}}),e.jsx(J,{className:c.sidebarIcon,style:{display:"var(--screen-size-hidden-on-wide-mode)"}})]}),label:t.formatMessage(I.closeSidebar),htmlFor:$.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center gap-3",children:[!1,m&&e.jsx(w,{label:e.jsxs("div",{children:[g,e.jsx("div",{className:"text-sm font-normal text-token-text-secondary",children:C})]}),children:e.jsx(xs,{className:c.searchAction,icon:e.jsx(Ke,{className:c.sidebarIcon})})}),e.jsx(w,{label:t.formatMessage(I.newChat),children:e.jsx(he,{to:"/",onClick:h=>{h.preventDefault(),s()},children:e.jsx(Ge,{icon:e.jsx(qe,{style:{viewTransitionName:"var(--vt_new_chat_sidebar)"},className:c.sidebarIcon}),className:c.searchAction,label:t.formatMessage(I.newChat)})})})]})]})}),e.jsx(p,{type:"primary",className:c.bucketBar,disableSizeTracking:!0,children:" "})]})}const I=be({newChat:{id:"NUNaGU",defaultMessage:"New chat"},closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function _s(){const{clientThreadId:s,onNewThread:t}=Q(),[a,n]=d.useState(!1),{store:o,actions:i}=_(),r=d.useCallback(l=>{if(l){n(l);return}setTimeout(()=>{n(l)},100)},[]);return Ze({onConversationChanged:()=>{n(!1),window.matchMedia("(max-width: 700px)").matches&&o.getState().mode===X.Floating&&setTimeout(()=>{i.closeSidebar()},100)}}),e.jsxs(De,{value:{isSidebarFlyoutOpen:a,onSidebarFlyoutOpenChange:r},children:[e.jsx(Re,{}),e.jsx(He,{anchor:"vertical",className:u(c.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(ps,{onNewThread:t}),trackLeading:!0,trailing:e.jsx(bs,{}),children:e.jsx(us,{clientThreadId:s})})]})}export{_s as C,Ts as S,is as a,As as b,fs as u};
//# sourceMappingURL=lgsl3dysdbxpkr2z.js.map
