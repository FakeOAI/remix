import{r as p,bc as O,W,d_ as C,bh as q,a3 as B,y as f,X as P,an as b,bF as K,fz as k,fA as U}from"./ddcjry37y0ueobh3.js";import{C as H,a as $}from"./c75f5xwzulywtmba.js";import{a as X}from"./g4zv2i39jomarudz.js";import"./g4wu3h1jwsoyejhb.js";import{ke as V,kf as z,hS as G}from"./mlzz6djcph5fthpz.js";import{bW as Q,bX as Y}from"./ostblj7tqg38i6fa.js";import{a as Z,b as J,l as ee}from"./dcc45rtf5i4crsq0.js";import"./jyv5zdd59fvjmr5a.js";import"./bo5lt597wbofkr1p.js";import"./dqx1biyivpsf3few.js";import"./m780wk85gg28bdfy.js";import"./s8ck5rhbggwsgpvb.js";import"./lw8c0noczs2rbs9j.js";import"./iwvyrmtfz5lkn9sl.js";import"./h9z74bskym3ttzc8.js";import"./lxw6kvlkbnjsbx5r.js";import"./jj3i5x6opi4xqiiv.js";import"./bwn9p8wp0adpm8es.js";import"./nx9wnt9smxe2g0dl.js";import"./bxx2v26g0ixhwt30.js";import"./l8l7uk0yjieckxyc.js";import"./k0grrgmz3usnffhd.js";import"./kg9tfaw6um1c8diz.js";import"./kbm6e58dnhlxymg3.js";import"./g232mik5xb95sf81.js";import"./b9g8fafm8dztbaej.js";import"./ocsskvgpfcir594a.js";import"./h74tyzi0cj9cuq81.js";import"./fkdtydvtm9fd2xtc.js";import"./fcpw5nyxo3dqdqna.js";import"./fh2qut1d6jaeqbdt.js";import"./nf5bsp4k1f7qe67v.js";import"./mqe35afes8nd9uyx.js";import"./keci48n6z79r4j2q.js";import"./ei3g7ngsfh3a3pcd.js";import"./l952ehdra11s231p.js";import"./kjpomzzo4yfokr9t.js";import"./d49wvahwdw5ygt2y.js";import"./cu8ha0xsn15q3kuh.js";const x=p.createContext(void 0),te={};x.Provider;const ne=()=>p.useContext(x)?p.useContext(x):te,v=typeof window>"u"?global:window,w="@griffel/";function se(e,t){return v[Symbol.for(w+e)]||(v[Symbol.for(w+e)]=t),v[Symbol.for(w+e)]}const _=se("DEFINITION_LOOKUP_TABLE",{}),y="data-make-styles-bucket",oe="data-priority",E=7,R="___",ie=R.length+E,re=0,le=1;function ce(e){const t=e.length;if(t===E)return e;for(let n=t;n<E;n++)e+="0";return e}function F(e,t,n=[]){return R+ce(V(e+t))}function L(e,t){let n="",s="";for(const i in e){const o=e[i];if(o===0){s+=i+" ";continue}const r=Array.isArray(o),l=t==="rtl"?(r?o[1]:o)+" ":(r?o[0]:o)+" ";n+=l,s+=l}return[n.slice(0,-1),s.slice(0,-1)]}function I(e,t){const n={};for(const s in e){const[i,o]=L(e[s],t);if(o===""){n[s]="";continue}const r=F(o,t),l=r+(i===""?"":" "+i);_[r]=[e[s],t],n[s]=l}return n}const N={};function ae(){let e=null,t="",n="";const s=new Array(arguments.length);for(let c=0;c<arguments.length;c++){const h=arguments[c];if(typeof h=="string"&&h!==""){const a=h.indexOf(R);if(a===-1)t+=h+" ";else{const S=h.substr(a,ie);a>0&&(t+=h.slice(0,a)),n+=S,s[c]=S}}}if(n==="")return t.slice(0,-1);const i=N[n];if(i!==void 0)return t+i;const o=[];for(let c=0;c<arguments.length;c++){const h=s[c];if(h){const a=_[h];a&&(o.push(a[re]),e=a[le])}}const r=Object.assign.apply(Object,[{}].concat(o)),[l,u]=L(r,e),d=F(u,e,s),m=d+" "+l;return N[n]=m,_[d]=[r,e],t+m}function ue(e){return Array.isArray(e)?e:[e]}function fe(e,t,n,s){const i=[];if(s[y]=t,s[oe]=String(n),e)for(const r in s)e.setAttribute(r,s[r]);function o(r){return e?.sheet?e.sheet.insertRule(r,e.sheet.cssRules.length):i.push(r)}return{elementAttributes:s,insertRule:o,element:e,bucketName:t,cssRules(){return e?.sheet?Array.from(e.sheet.cssRules).map(r=>r.cssText):i}}}const de=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],T=de.reduce((e,t,n)=>(e[t]=n,e),{});function me(e,t,n){return(e==="m"?e+t:e)+n}function he(e,t,n,s,i={}){var o,r;const l=e==="m",u=(o=i.m)!==null&&o!==void 0?o:"0",d=(r=i.p)!==null&&r!==void 0?r:0,m=me(e,u,d);if(!s.stylesheets[m]){const c=t&&t.createElement("style"),h=fe(c,e,d,Object.assign({},s.styleElementAttributes,l&&{media:u}));s.stylesheets[m]=h,t&&c&&t.head.insertBefore(c,pe(t,n,e,s,i))}return s.stylesheets[m]}function ge(e,t,n){var s,i;const o=t+((s=n.m)!==null&&s!==void 0?s:""),r=e.getAttribute(y)+((i=e.media)!==null&&i!==void 0?i:"");return o===r}function pe(e,t,n,s,i={}){var o,r;const l=T[n],u=(o=i.m)!==null&&o!==void 0?o:"",d=(r=i.p)!==null&&r!==void 0?r:0;let m=g=>l-T[g.getAttribute(y)],c=e.head.querySelectorAll(`[${y}]`);if(n==="m"){const g=e.head.querySelectorAll(`[${y}="${n}"]`);g.length&&(c=g,m=M=>s.compareMediaQueries(u,M.media))}const h=g=>ge(g,n,i)?d-Number(g.getAttribute("data-priority")):m(g),a=c.length;let S=a-1;for(;S>=0;){const g=c.item(S);if(h(g)>0)return g.nextSibling;S--}return a>0?c.item(0):t?t.nextSibling:null}function A(e,t){try{e.insertRule(t)}catch{}}let Se=0;const Ce=(e,t)=>e<t?-1:e>t?1:0;function ye(e=typeof document>"u"?void 0:document,t={}){const{classNameHashSalt:n,unstable_filterCSSRule:s,insertionPoint:i,styleElementAttributes:o,compareMediaQueries:r=Ce}=t,l={classNameHashSalt:n,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(o),compareMediaQueries:r,id:`d${Se++}`,insertCSSRules(u){for(const d in u){const m=u[d];for(let c=0,h=m.length;c<h;c++){const[a,S]=ue(m[c]),g=he(d,e,i||null,l,S);l.insertionCache[a]||(l.insertionCache[a]=d,s?s(a)&&A(g,a):A(g,a))}}}};return l}const be=()=>{const e={};return function(n,s){e[n.id]===void 0&&(n.insertCSSRules(s),e[n.id]=!0)}};function ve(e,t,n=be){const s=n();let i=null,o=null;function r(l){const{dir:u,renderer:d}=l,m=u==="ltr";return m?i===null&&(i=I(e,u)):o===null&&(o=I(e,u)),s(d,t),m?i:o}return r}function we(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const D=O.useInsertionEffect?O.useInsertionEffect:void 0,xe=()=>{const e={};return function(n,s){if(D&&we()){D(()=>{n.insertCSSRules(s)},[n,s]);return}e[n.id]===void 0&&(n.insertCSSRules(s),e[n.id]=!0)}},_e=p.createContext(ye());function Ee(){return p.useContext(_e)}const Re=p.createContext("ltr");function Oe(){return p.useContext(Re)}function Ie(e,t){const n=ve(e,t,xe);return function(){const i=Oe(),o=Ee();return n({dir:i,renderer:o})}}const Ne=Ie({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),Te=(e,t)=>{const{title:n,primaryFill:s="currentColor",...i}=e,o={...i,title:void 0,fill:s},r=Ne(),l=ne();return o.className=ae(r.root,t?.flipInRtl&&l?.textDirection==="rtl"&&r.rtl,o.className),n&&(o["aria-label"]=n),!o["aria-label"]&&!o["aria-labelledby"]?o["aria-hidden"]=!0:o.role="img",o},Ae=(e,t,n,s)=>{const i=t==="1em"?"20":t,o=p.forwardRef((r,l)=>{const u={...Te(r,{flipInRtl:void 0}),ref:l,width:t,height:t,viewBox:`0 0 ${i} ${i}`,xmlns:"http://www.w3.org/2000/svg"};return p.createElement("svg",u,...n.map(d=>p.createElement("path",{d,fill:u.fill})))});return o.displayName=e,o},De=Ae("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function je({onNewThread:e,onOpenInMainWindow:t,onClose:n}){const s=P(),i=s.formatMessage({id:"cHkwhd",defaultMessage:"New chat"}),o=s.formatMessage({id:"BzpJ40",defaultMessage:"Open in Main Window"}),r=s.formatMessage({id:"63wWYx",defaultMessage:"Close"});return f.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex h-[32px] w-full justify-between",children:[f.jsx(b,{label:i,sideOffset:4,side:"bottom",children:f.jsx(j,{onClick:e,"aria-label":i,children:f.jsx(Q,{})})}),t&&f.jsx(b,{label:o,sideOffset:4,side:"bottom",className:"ml-auto",children:f.jsx(j,{onClick:t,"aria-label":o,children:f.jsx(Y,{})})}),f.jsx(b,{label:r,sideOffset:4,side:"bottom",children:f.jsx(We,{onClick:n,"aria-label":r,children:f.jsx(De,{})})})]})}const j=W.button`flex h-full w-[46px] cursor-default items-center justify-center hover:bg-gray-200 active:bg-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-700`,We=W.button`flex h-full w-[46px] cursor-default items-center justify-center hover:bg-red-500 hover:text-white active:bg-red-400 active:text-white`;function Fe({onNewThread:e,onOpenInMainWindow:t,onClose:n,children:s}){const i=p.useRef(null);return f.jsxs("div",{className:"flex h-full w-full flex-col pt-[32px]",ref:i,children:[f.jsx(je,{onNewThread:e,onOpenInMainWindow:t,onClose:n}),s]})}function Le({clientThreadId:e}){const t=C.useStore(),n=q(),s=Z(o=>J.resolveThreadId(e,o)),i=B();return p.useEffect(()=>{if(!i)return;function o(l){l.key==="Escape"&&!l.shiftKey&&!l.ctrlKey&&!l.metaKey&&!l.altKey&&C.hide()}function r(){i&&z()&&C.hide()}return i.document.addEventListener("keydown",o),i.addEventListener("blur",r),()=>{i.document.removeEventListener("keydown",o),i.removeEventListener("blur",r)}},[i]),f.jsx(Fe,{onNewThread:()=>{t.newThread(!0)},onOpenInMainWindow:s!==e||!ee(e)?()=>{n(`/c/${e}`),t.newThread(!0),C.focusMainWindow()}:void 0,onClose:()=>{C.hide()},children:f.jsx(H,{clientThreadId:e})})}function wt(){const{value:e}=K("3653083604"),{isOpen:t}=G(),n=X(r=>r.isVoiceModeActive),s=e&&!t&&!n,{clientThreadId:i}=C.useState(),o=C.useStore();if(p.useEffect(()=>{s&&!i&&o.newThread(!1)},[s,i,o]),!(!s||!i))return f.jsx($,{features:`${k}=${U.COMPANION}`,children:f.jsx(Le,{clientThreadId:i})})}export{wt as DesktopCompanionWindowController};
//# sourceMappingURL=nxfu4i1rzp3u5opk.js.map
