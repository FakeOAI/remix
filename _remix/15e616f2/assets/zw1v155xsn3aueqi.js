import{L as v,H as M,eM as S,I as _,g as j,gU as R,m as a,aD as y,aU as h,r as f,bn as A,aL as E,d as m,y as C,ag as D,P as L,ac as N}from"./jof5w6fcuovfw2f6.js";import{f1 as w,f2 as T,f3 as F,ap as k,c_ as P,f4 as x,aW as $,f5 as U,f6 as z}from"./kmoqtqt6p506agf3.js";import{S as I,a as H}from"./d5kkdo5l0wsmwch4.js";import{g as O}from"./kqwdyvkaaavvn8k3.js";import{a as V}from"./bchxijn78hyhpl2w.js";import{E as W}from"./h9uu1pkyxeenez8s.js";import{m as q}from"./dgilq6jvxf40af3o.js";import"./lb45hkrxnjv7cybt.js";function B({date:e}){const t=v(),s=e instanceof Date?e:new Date(e*1e3),n=w(s,new Date);if(n<4&&n>-4){const r=t.formatRelativeTime(n,"day",{numeric:"auto"});return r.charAt(0).toUpperCase()+r.slice(1)}else return t.formatDate(s,{year:"numeric",month:"long",day:"numeric"})}var G=S,J=M,K=T,Q=_;function X(e,t){var s=Q(e)?G:K;return s(e,J(t))}var Y=X,Z=F,ee=Y;function te(e,t){return Z(ee(e,t),1)}var ae=te;const se=j(ae),ne=(e,t)=>{const s=U();return C(()=>{const n=D.getMessageContentReferences(e,t);return z(n,s)})};function me({clientThreadId:e,turnIndex:t,messageId:s,scrollToHeader:n,isInSidebar:r=!1}){const i=ne(e,s),o=k(),u=R(e,s),c={clientThreadId:e,messageId:s,turnIndex:t},l=se(u,d=>d.entries).toSorted((d,p)=>(p?.pub_date??0)-(d?.pub_date??0));return a.jsxs("div",{className:y("flex w-full flex-col bg-token-main-surface-primary",r?"mt-[calc(var(--threadFlyOut-leading-height,57px)*-1)]":"mt-0",!o||!r?"border-t border-token-border-light":""),children:[a.jsx(b,{title:a.jsx(h,{id:"dlVlo6",defaultMessage:"Citations"}),items:i,analyticsMetadata:{...c,linkType:"citation"},scrollToHeader:n!=="search_results",messageId:s}),a.jsx(b,{title:a.jsx(h,{id:"iUafP7",defaultMessage:"Search Results"}),scrollToHeader:n==="search_results",items:l,analyticsMetadata:{...c,linkType:"search_result"},messageId:s,analyticsIndexOffset:i.length})]},`${t}-${e}`)}function b({title:e,items:t,analyticsMetadata:s,analyticsIndexOffset:n=0,scrollToHeader:r,messageId:i}){const o=f.useRef(null),u=k();return f.useEffect(()=>{o.current&&r&&o.current.scrollIntoView({behavior:"instant"})},[r]),!t||t.length===0?null:a.jsxs("div",{ref:o,children:[a.jsx(g,{className:y("sticky top-0 z-[1] flex h-[calc(var(--screen-thread-header-min-height,60px)+1px)] items-center border-b border-token-border-sharp bg-token-main-surface-primary px-6 pt-4 font-medium text-token-text-primary",u?"pb-3.5 text-panel-title":"pb-4 text-sm"),children:e}),a.jsx("div",{className:"flex flex-col px-3 py-2",children:t.map((c,l)=>a.jsx(g,{index:l,children:a.jsx(re,{item:c,analyticsMetadata:{...s,groupIndex:l,entireListIndex:l+n},messageId:i},l)},`${e}-${l}`))})]})}function g({children:e,index:t=0,className:s=""}){return a.jsx(q.div,{className:s,initial:{opacity:0},animate:{opacity:1},transition:{delay:(t+1)*.03+.2},children:e})}function re({item:e,analyticsMetadata:t,messageId:s}){const n=V(e.url).data??O(e.url,"short"),r=c=>"ref_id"in c&&"content_type"in c,i=P(),o=A().resolvedTheme==="dark",u=a.jsxs(oe,{analyticsMetadata:t,href:e.url,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{x.setHighlightBySource(s,e)},onMouseLeave:()=>{x.clearHighlights()},children:[a.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[a.jsx($,{url:e.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:a.jsx(I,{className:"icon-sm text-token-text-quaternary"})}),n,r(e)&&a.jsx(H,{searchResult:e,className:"inline h-4 w-4 text-token-text-tertiary"})]}),a.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:e.title}),(e.pub_date??e.snippet)&&a.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[e.pub_date&&a.jsx(B,{date:e.pub_date}),e.pub_date&&e.snippet&&" â€” ",e.snippet]})]});return i?a.jsx(E,{label:a.jsx(W,{item:e}),className:"text-left text-xs",theme:o?"default":"white",children:u}):u}const oe=f.forwardRef(function(t,s){const{analyticsMetadata:n,...r}=t;function i(o,u){if(!t.href)return;const{entireListIndex:c,groupIndex:l,linkType:d,...p}=n;L.logEventWithStatsig(o,u,{...N(p),url:t.href,global_index:c.toString(),local_index:l.toString(),type:d})}return f.useEffect(()=>{i(m.searchLinkShown,"search_link_shown")},[]),a.jsx("a",{ref:s,...r,onClick:o=>{t.onClick?.(o),o.stopPropagation(),i(m.searchLinkClicked,"search_link_clicked")}})});export{me as SearchSources,b as SourcesListGroup};
//# sourceMappingURL=zw1v155xsn3aueqi.js.map
