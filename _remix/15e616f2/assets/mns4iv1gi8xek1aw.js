import{m as t,aY as g,aU as d,s as v,o as m,d as p}from"./jof5w6fcuovfw2f6.js";import{b5 as x,b6 as f,b7 as h,b8 as M}from"./kmoqtqt6p506agf3.js";import{u as C}from"./jmc1r5pfdofiywcx.js";import{f as b}from"./lb45hkrxnjv7cybt.js";import{m as T}from"./dgilq6jvxf40af3o.js";const O=s=>{for(const e of s.concat().reverse()){if("messages"in e)return e.messages[e.messages.length-1].nodeId;if("message"in e)return e.message.nodeId}},k=({clientThreadId:s,lastMessageNodeId:e})=>{const o=g(s),n=x({clientThreadId:s,conversationMode:o}),r=async()=>{f();const a=[v.CANMORE],i=new h;n({id:e,eventMetadata:{eventSource:"mouse"},systemMessage:"The user has requested the canvas tool be disabled for this conversation. You should not call the tool again.",systemMessageMetadata:{disable_tool_ids:a},turnTracker:i});const c=m.getTree(s),u=c.getConversationTurns(e).length,l=c.getParentPromptNode(e).message.id;M.logEventWithStatsig(p.canvasOptOutClicked,"chatgpt_canvas_opt_out_clicked",{num_turns:String(u),user_message_id:l}),m.setDisabledToolsForThread(s,a)};return t.jsxs(T.div,{className:"flex flex-wrap gap-2 pt-[3px]",initial:{opacity:0},animate:{opacity:1},children:[t.jsx(d,{id:"9NFVc4",defaultMessage:"Don't want me to use canvas?"}),t.jsxs("button",{onClick:r,className:"inline-flex min-h-5 w-fit select-none items-center text-start text-token-text-secondary hover:text-token-text-primary",children:[t.jsx(d,{id:"cXTG4f",defaultMessage:"I can answer in chat instead"}),t.jsx(b,{className:"icon-md text-token-text-secondary"})]})]})},R=({clientThreadId:s,groupedMessages:e,isFinalTurn:o,hasActiveRequest:n})=>{const r=C(s),a=O(e);return o&&!n&&!r&&a&&t.jsx(k,{clientThreadId:s,lastMessageNodeId:a})};export{R as CanvasOptOutMessage};
//# sourceMappingURL=mns4iv1gi8xek1aw.js.map
