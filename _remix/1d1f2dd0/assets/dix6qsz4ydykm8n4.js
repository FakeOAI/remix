const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cd9eucsuq0aas1co.js","assets/lyvmbpf7ocwbhkqv.js","assets/c7ci0rjyj4htmm6k.js","assets/root-dcq62fgs.css","assets/g6lhcxpyem234o4q.js","assets/conversation-small-ict01xsi.css","assets/fum5k2u9xxdkha3i.js","assets/gcvp947cimzkwurk.js","assets/j5w4166bn3c02o6l.js","assets/m3k5i8krxehsrqef.js","assets/f69pl2edykiyk8xr.js","assets/ADAVisualizationComponent-mi6em660.css","assets/l6ss2jkc65rztymu.js","assets/mgblivg7zbb6krjc.js","assets/nf0lyo87fmthbxnm.js","assets/g2ca5q7bw0mlea5j.js","assets/nt5kldbs86twq8fl.js","assets/ns9k7sl61bz9mbwg.js","assets/gfdmwiegiz3ub2a0.js","assets/jl8vvc055uss7wx6.js","assets/g6e4ej4vgqebtwo0.js","assets/l9tsuad24k7geoja.js","assets/nw3jrqq4fv08urtb.js","assets/pe4aj9ozwm980tws.js","assets/lpy7saf4hg8wyjas.js"])))=>i.map(i=>d[i]);
import{Y as ne,r as E,j as t,aY as fe,ar as j,aw as U,aE as N,aF as b,M as oe,cg as he,ch as xe,aG as W,T as pe,P as K,d as Y,K as z,dD as Ee}from"./lyvmbpf7ocwbhkqv.js";import{hd as Me,he as Te,fH as Ie,fI as ye,fA as _e,hf as Ce,hg as Ae,hh as ve,hi as je,hj as Ne,hk as be,hl as Se,hm as we,hn as Re,ho as De,hp as Fe,a8 as Oe,fN as Pe,fK as u,fJ as k,hq as G,hr as J,hs as ke,ht as Le,hu as Q,hv as ie,br as V,fa as re,hw as Ve,hx as ze,hy as We,hz as Ue,bo as le,hA as Be,hB as He,hC as Ke,ad as Ye,hD as Ge,hE as Je,hF as Qe,hG as de,hH as $e,hI as ce,hJ as Xe,c as Ze,hK as qe,bs as es,hL as ss,v as ts,bn as as,fi as ns,hM as os,fG as r,A as is,df as rs,hN as ls,hO as ds,cD as cs}from"./g6lhcxpyem234o4q.js";import{e as $,f as ms}from"./mgblivg7zbb6krjc.js";import{m as L}from"./fum5k2u9xxdkha3i.js";import{aK as gs,ae as us}from"./c7ci0rjyj4htmm6k.js";const fs=(e,a)=>e?.textdocId?e.textdocId:e?.function===k.CreateTextdoc?ke(e):a??void 0,hs=({messages:e,isRequestActive:a,clientThreadId:s})=>{const o=ne(),d=Me(e),c=Te(e),n=E.useMemo(()=>{if(Ie(d?.message))return ye(a,d.message,c?.message??null)},[a,d,c]),g=_e(),i=fs(n,g),f=Ce(i),m=Ae(),p=ve(i),h=je(),M=Ne(),x=be(),T=Se(),y=we(),v=Re(),S=De({textdocId:i,toolResponseMessage:c}),F=Fe(()=>{const A=Oe.getThreadModelId(s);Pe.logError("Textdoc missing from conversation",null,{clientThreadId:s,modelId:A,textdocId:i,latestTextdocId:g,toolCallTextdocId:n?.textdocId,toolCallStatus:n?.status,toolCallFunction:n?.function})});if(E.useEffect(()=>{a||n&&n.status!==u.COMPLETE||f||F()},[n,f]),!n)return null;const w=n.status===u.REDACTED||!T&&!f&&n.status!==u.STREAMING&&n.status!==u.WAITING&&y;let l,I;if(n.status!==u.REDACTED&&n.status!==u.FAILED&&!w&&i){const A=v&&n.function===k.UpdateTextdoc&&n.status===u.COMPLETE;l=()=>{A&&n.versionInt?Le(i,n.versionInt,h):G(i)},I=()=>{A&&n.versionInt&&x(i,n.versionInt)}}const R=xs(n,f);if(n.function===k.CreateTextdoc){if(n.status===u.STREAMING||n.status===u.WAITING||n.status===u.COMPLETE){const H=T===!0&&(n.status===u.STREAMING||n.status===u.WAITING);return t.jsx($,{isInlinePreview:S,isFetching:H,type:n.type??null,name:R,isFocused:p,isStreaming:n.status===u.STREAMING,onClick:l,isCanvasOpen:m,textdocId:i})}let A;switch(n.status){case u.FAILED:A=o.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case u.CANCELED:A=o.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case u.REDACTED:A=t.jsx(fe,{align:"start",label:o.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:o.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return t.jsx(X,{children:A})}const _=w||n.status===u.REDACTED,D=M&&!_?R:null,P=t.jsx(X,{onClick:l,onMouseOver:I,isStreaming:n.status===u.STREAMING,children:n.function===k.CommentTextdoc?Es(o,n,D):ps(o,n,D)});return S&&!m&&!w?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx($,{isInlinePreview:!0,isFetching:!1,type:f?.type??null,name:R,isFocused:p,isStreaming:n.status===u.STREAMING,onClick:i!=null?()=>G(i):void 0,isCanvasOpen:m,textdocId:i}),P]}):P};function xs(e,a){return a?.title?J(a.title):e.function===k.CreateTextdoc&&e.title?J(e.title):null}const X=({isStreaming:e=!1,onClick:a,onMouseOver:s,children:o})=>t.jsx("button",{disabled:!a,className:j(e&&"loading-shimmer","flex min-h-5 w-fit select-none pt-[3px] text-start text-token-text-secondary",a&&"hover:text-token-text-primary"),onClick:a,onMouseOver:s,children:o}),me=9;function ps(e,a,s){if(a.status===u.STREAMING)return s?e.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(a.status===u.FAILED)return s?e.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(a.status===u.CANCELED)return s?e.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const o=a.updates?.length;return a.status===u.REDACTED||!o||o>me?s?e.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):s?e.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:o,documentTitle:s}):e.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:o})}function Es(e,a,s){if(a.status===u.STREAMING)return s?e.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(a.status===u.FAILED)return s?e.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(a.status===u.CANCELED)return s?e.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const o=a.comments?.length;return a.status===u.REDACTED||!o||o>me?s?e.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):s?e.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:o,documentTitle:s}):e.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:o})}const Ms=2e3,ge=.4,Ts=.45,Is=.2,ys=.1,_s=.25;var C=(e=>(e[e.Running=0]="Running",e[e.Finished=1]="Finished",e[e.Error=2]="Error",e[e.Stopped=3]="Stopped",e[e.Paused=4]="Paused",e))(C||{});function Xs({conversationMessages:e,icon:a,status:s,text:o,estimatedToolDurationMs:d,animationLoopDurationMs:c=Ms,shouldPersistAfterFinished:n=!1}){const[g,i]=E.useState(s===0?0:s===1&&!n?7:1),[f,m]=E.useState(0);E.useEffect(()=>{s===2?i(8):s===3?i(9):s===4?i(10):s===1?i(g===2?3:7):s===0&&g===10&&(i(2),m(h=>h+1))},[s]);const p=vs(g);return E.useEffect(()=>{const h=e[0].message.id;if(p)return Q.addDelayedRenderingMessage(h),()=>{Q.removeDelayedRenderingMessage(h)}},[p]),ie(()=>{O(g)&&m(h=>h+1)},c),g===7&&!n?null:t.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[t.jsx(Cs,{icon:a,status:s,uiState:g,estimatedToolDurationMs:d,animationLoopCounter:f,shouldPersistAfterFinished:n,onFillProgressBarAnimationComplete:()=>i(4),onFinishAnimationComplete:()=>{i(5),setTimeout(()=>{i(n?7:6)},ys*1e3)},onHideAnimationComplete:()=>i(7)}),t.jsx(As,{text:o,uiState:g,animationLoopCounter:f,onEnterAnimationComplete:()=>i(2)})]})}const Z=50;function Cs({icon:e,status:a,uiState:s,estimatedToolDurationMs:o,animationLoopCounter:d,shouldPersistAfterFinished:c,onFillProgressBarAnimationComplete:n,onFinishAnimationComplete:g,onHideAnimationComplete:i}){const[f,m]=E.useState(0);ie(()=>{O(s)?m(S=>S+Z):s===10&&m(0)},Z);let p,h,M;O(s)||s===10?(p="running",h=t.jsx(e,{animationLoopCounter:d}),M="bg-transparent"):s===4||s===5||s===7&&c?(p="finished",h=t.jsx(Ve,{}),M="bg-brand-purple"):a===2?(p="error",h=t.jsx(ze,{}),M="bg-orange-500"):a===3&&(p="stopped",h=t.jsx(We,{}),M="bg-gray-300");let x={opacity:0,scale:0,rotate:-180,x:0},T={type:"spring",bounce:.3,duration:Ts},y={opacity:0,scale:.6,rotate:0,x:0};s===0?(x={opacity:0,scale:.5,rotate:-180,x:-8},T={type:"spring",bounce:.3,duration:ge}):s===1?x=!1:s===5&&(y={opacity:0,scale:0,rotate:0,x:0},T={type:"spring",bounce:.3,duration:_s});const v=Ue(f,o);return t.jsx("div",{className:"relative h-5 w-5 shrink-0",children:t.jsx(V,{onExitComplete:()=>{s===6&&i()},children:p!=null&&t.jsxs(L.div,{className:j("absolute left-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",M),initial:x,animate:{opacity:1,scale:1,rotate:0,x:0},exit:y,transition:T,onAnimationComplete:()=>{s===4&&g()},children:[h,(O(s)||s===10)&&t.jsx(re,{percentage:s===3?100:v,thickness:1.5/23,className:"absolute left-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2 text-brand-purple",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:s===3?`${(100-v)/100*Is}s`:void 0,transitionTimingFunction:s===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{s===3&&n()}})]},p)})})}function As({text:e,uiState:a,animationLoopCounter:s,onEnterAnimationComplete:o}){const[d,c]=E.useState(e);E.useEffect(()=>{a===2&&c(e)},[s]),E.useEffect(()=>{O(a)||c(e)},[a,e]);let n={opacity:0,x:0,y:15},g={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};a===0?(n={opacity:0,x:-8,y:0},g={type:"spring",bounce:.3,duration:ge,delay:.15}):a===1&&(n=!1);const i=d??void 0;return t.jsx("div",{className:j("relative h-5 w-full leading-5",a===8||a===9?"text-token-text-tertiary":"text-token-text-secondary"),children:t.jsx(V,{children:i!=null&&t.jsx(L.div,{className:"absolute left-0 top-0 line-clamp-1 overflow-visible",initial:n,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:g,onAnimationComplete:()=>{a===0&&o()},children:i},i.toString())})})}function O(e){return e===0||e===2||e===3}function vs(e){return O(e)||e===4||e===5||e===6||e===10}const q=U.div`group absolute left-0 top-0 mr-1.5 h-8 overflow-hidden mt-1`;function B({highlightedCommand:e,status:a,children:s,showWorkUserSetting:o=!1,hideOnlyIfNotInteractedWith:d=!1,onOpenAnalytics:c}){const n=s!=null,[g]=E.useState(o),[i,f]=E.useState(o),[m,p]=E.useState(!1),h=a===C.Finished||a===C.Error,M=d?g?!1:!m:!1,x=a===C.Running&&"loading-shimmer";return h&&M?null:n?t.jsxs(t.Fragment,{children:[t.jsx(ee,{$canShowWork:!0,children:t.jsx(V,{children:t.jsx(q,{children:t.jsx(L.button,{onClick:()=>{i||c?.(),f(T=>!T),p(!0)},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:j(x),children:t.jsxs("div",{className:"flex items-center justify-start gap-1",children:[t.jsx("span",{children:e}),i?t.jsx(gs,{className:"icon-md"}):t.jsx(us,{className:"icon-md"})]})},e?.toString())})})}),t.jsx(V,{children:i&&s&&t.jsx(L.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s})})]}):t.jsx(ee,{$canShowWork:!1,children:t.jsx(q,{className:j(x),children:e})})}const ee=U.p`first:mt-0 relative h-8
${({$canShowWork:e})=>e?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary"}`,se=N(()=>b(()=>import("./cd9eucsuq0aas1co.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(e=>e.default));function js({messages:e,isRequestActive:a,clientThreadId:s}){const[o,d]=e,c=le(o.message),n=d?.message.metadata?.aggregate_result,g=Be(),i=He(),f=d?.message?Ke(d.message):[],m=d?.message.metadata?.aggregate_result?.messages.filter(Ye)??[],h=(f.filter(T=>T.type==="chart")??[]).length!==m.length,M=i&&!h;let x=C.Running;return n?.status==="success"?x=C.Finished:d!=null&&d.message.content.content_type!==oe.ExecutionOutput||n!=null&&n.status!=="running"?x=C.Error:(c||!a)&&(x=C.Stopped),t.jsxs(t.Fragment,{children:[t.jsx(Ns,{messages:e,status:x,isRequestActive:a}),M&&f.map((T,y)=>{const{type:v}=T;return v==="chart"&&!g?(T.fallback_to_image=!0,t.jsx(te,{children:t.jsx(se,{clientThreadId:s,visualization:T})},y)):t.jsx(te,{children:t.jsx(se,{clientThreadId:s,visualization:T})},y)}),!M&&d!=null&&t.jsx(Ge,{message:d.message})]})}const te=U.div`mb-3 max-w-[80%]`;function Ns({messages:e,status:a,isRequestActive:s}){const[o,d]=e,c=ne(),n=d?.message.metadata?.aggregate_result,g=le(o.message),{data:i,error:f}=he(xe.ShowExpandedCodeView);let m=c.formatMessage({id:"message.tools.data-analysis.running",defaultMessage:"Analyzing"});if(n?.status==="success"?m=c.formatMessage({id:"message.tools.data-analysis.finished",defaultMessage:"Analyzed"}):d!=null&&d.message.content.content_type!==oe.ExecutionOutput||n!=null&&n.status!=="running"?m=c.formatMessage({id:"message.tools.data-analysis.error",defaultMessage:"Analysis errored"}):(g||!s)&&(m=c.formatMessage({id:"message.tools.data-analysis.stopped",defaultMessage:"Analysis paused"})),i!==void 0||f){const p=Je(o.message)!=null;return t.jsx(B,{status:a,highlightedCommand:m,showWorkUserSetting:i??!1,hideOnlyIfNotInteractedWith:!0,children:p?t.jsxs("div",{className:"mb-3 mt-0.5 overflow-hidden rounded-xl bg-black",children:[t.jsx(Qe,{message:o.message,FormattedText:de}),d!=null&&t.jsx($e,{message:d.message})]}):null})}return null}const bs=3,Ss=.1,ae=[0,.26,.4];function ws({nextMessage:e,isLastMessage:a,isRequestActive:s}){let o=a||!e||e&&!ce(e.message);const d=Xe(e?.message),c=Ze(d.slice(0,bs).map(n=>n.entries[0].url));if(e?.message.id&&qe(e?.message.id),o){const n=s?t.jsxs("div",{className:"flex items-center gap-1",children:[c.map((g,i)=>t.jsx(L.div,{className:j("-ml-1.5 first:ml-0 last:mr-1.5","relative"),initial:{width:i===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:Ss,delay:ae[Math.min(i,ae.length-1)]},children:t.jsx("div",{className:j("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-2 border-token-main-surface-primary bg-token-main-surface-primary"),children:t.jsx(es,{url:g,size:32,minSize:16,className:"icon-md rounded-full"})})},g)),t.jsx(W,{id:"jjx8Qg",defaultMessage:"Searching the web"})]}):t.jsx(W,{id:"fssXGM",defaultMessage:"Error while searching"});return t.jsx(B,{highlightedCommand:n,status:s?C.Running:C.Error})}return null}const Rs={strong:e=>{const{node:a,children:s,...o}=e;return t.jsx("strong",{...o,className:j(o.className,"font-semibold text-token-text-primary"),children:s})},p:e=>{const{node:a,children:s,...o}=e;return t.jsx("p",{...o,className:j(o.className,"text-base","has-[strong]:mb-1 [&:not(:first-child)]:has-[strong]:mt-3 [&:not(:has(strong))]:mb-3"),children:s})}};function Ds({headline:e,message:a}){const o=a.create_time?new Date(a.create_time*1e3):Date.now(),d=+new Date-+o,c=ns(a.id,48e4,os(48e4,d));return t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx(re,{percentage:c,thickness:1/8,className:"h-5 w-5 text-token-text-primary",backgroundStrokeClassName:"stroke-token-main-surface-tertiary",transitionDuration:`${(100-c)/100*.2}s`,transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}),e]})}function Fs({messages:e,isStreaming:a,clientThreadId:s}){const[o,d]=E.useState(""),[c,n]=E.useState(!1),f=ss(s)===pe.STREAMING||a,m=e[0].message,p=m.id,h=ts.getServerThreadId(s),M=as(m),x=m.metadata?.summarization_headline,T=a&&x!=null;E.useEffect(()=>{const S=/\*\*(.*?)(?:\*\*|\n|$)/g;let F,w="";for(;(F=S.exec(M))!=null;)w=F[1].trim();w?d(w):m.metadata?.initial_text!=null&&d(m.metadata.initial_text)},[M,m.metadata?.initial_text]),E.useEffect(()=>{M.length>0&&!x&&n(!0)},[M,x]);const y=E.useMemo(()=>({client_thread_id:s,message_id:p,conversationId:h}),[s,p,h]);E.useEffect(()=>{c&&K.logEvent(Y.receivedA8KM123Message,y)},[c]);const v=E.useCallback(()=>{K.logEvent(Y.openedA8KM123Message,{...y,isStreaming:a})},[y,a]);return t.jsx(B,{status:f?C.Running:C.Finished,highlightedCommand:f?x==null?o:t.jsx(Ds,{headline:x,message:m}):m.metadata?.finished_text??"",onOpenAnalytics:v,children:c&&!T?t.jsx("div",{className:"mb-4 border-l-2 pl-4 dark:border-token-text-secondary",children:t.jsx(de,{componentOverrides:Rs,className:"not-prose leading-6",children:M})}):null})}const Os=N(()=>b(()=>import("./l6ss2jkc65rztymu.js"),__vite__mapDeps([12,1,2,3,4,5,13,14,6,15]))),Ps=N(()=>b(()=>import("./nt5kldbs86twq8fl.js"),__vite__mapDeps([16,1,2,3,4,5]))),ks=N(()=>b(()=>import("./ns9k7sl61bz9mbwg.js"),__vite__mapDeps([17,1,2,3,4,5,13,14,6,15]))),Ls=N(()=>b(()=>import("./gfdmwiegiz3ub2a0.js"),__vite__mapDeps([18,1,2,3,4,5])).then(e=>e.TextMessageEditor)),Vs=N(()=>b(()=>import("./jl8vvc055uss7wx6.js"),__vite__mapDeps([19,1,2,3,4,5,6,13,14,15]))),zs=N(()=>b(()=>import("./g6e4ej4vgqebtwo0.js"),__vite__mapDeps([20,1,2,3,4,5,13,14,6,15]))),Ws=N(()=>b(()=>import("./l9tsuad24k7geoja.js"),__vite__mapDeps([21,1,2,3,4,5,22,6,13,14,15])).then(e=>e.BrowsingMessage)),Us=N(()=>b(()=>import("./pe4aj9ozwm980tws.js"),__vite__mapDeps([23,1,2,3,4,5])).then(e=>e.SearchResultMessage)),Bs=N(()=>b(()=>import("./lpy7saf4hg8wyjas.js"),__vite__mapDeps([24,1,2,3,4,5,13,14,6,15])).then(e=>e.JITPluginMessage));function Zs(e){switch(e.type){case r.Text:case r.Debug:return[e.message];case r.MultiText:case r.Browsing:case r.CodeInterpreter:case r.JITPlugin:case r.RetrievalBrowsing:case r.ParallelBrowsing:case r.Dalle:case r.GizmoEditor:case r.SearchResult:case r.a8km123:case r.f959b8c:case r.b1de6e2:case r.b1de6e2_c:case r.Canmore:case r.de1d73e:case r.SearchGPTQuery:return e.messages;default:throw new Error("Bad")}}function qs({groupedMessagesToRender:e,allGroupedMessages:a,clientThreadId:s,isEditing:o,isUserTurn:d,isCompletionRequestInProgress:c,isFeedbackEnabled:n,isFinalTurn:g,turnIndex:i,hasActiveRequest:f,showEditButton:m=!1,handleEnterEdit:p,handleExitEdit:h,onChangeItemInView:M,onRequestMoreCompletions:x,onRequestCompletion:T,shouldGrowContainer:y=!0}){const{showDebugConversationTurns:v}=is(),S=rs(s),F=a.some(l=>ls.includes(l.type)),w=e.map((l,I)=>{const R=I===a.length-1;switch(l.type){case r.Text:case r.MultiText:{const _=e[I-1],D=_?.type,P=_&&"messages"in _?_.messages:void 0;if(l.type===r.Text){const A=l?.message&&!ce(l.message.message),ue=o?t.jsx(Ls,{message:l.message,clientThreadId:s,onChangeItemInView:M,onRequestCompletion:T,onRequestMoreCompletions:x,onExitEdit:h,disabled:f}):F&&A?null:t.jsx(ms,{className:"min-h-8",message:l.message,isFeedbackEnabled:n,isCompletionInProgress:R&&c,turnIndex:i,clientThreadId:s,showEditButton:m,onEnterEdit:p,isUserTurn:d,onRequestMoreCompletions:x,prevGroupedMessageType:D,prevGroupedMessages:P});return t.jsxs(E.Fragment,{children:[ue,t.jsx(ds,{isUserTurn:d,message:l.message.message})]},"group-"+l.message.nodeId)}else return l.type===r.MultiText?t.jsx(ks,{clientThreadId:s,messages:l.messages,isCompletionInProgress:R&&c,isFeedbackEnabled:n,onRequestMoreCompletions:x,prevGroupedMessageType:D,prevGroupedMessages:P},"multitext-"+(l.messages[0]?.nodeId??I)):l.type}case r.Browsing:case r.RetrievalBrowsing:{const _=S!=null&&[z.GizmoInteraction,z.GizmoMagicCreate,z.GizmoTest].includes(S.kind);return t.jsx(Ws,{messages:l.messages,isRequestActive:f,isLastMessageInTurn:R,isUsingGizmo:_,isRetrieval:l.type===r.RetrievalBrowsing},"browsing-"+(l.messages[0]?.nodeId??I))}case r.SearchGPTQuery:{const _=a.slice(I+1).find(D=>D.type===r.Text);return t.jsx(ws,{isRequestActive:f,isLastMessage:R,nextMessage:_&&_.type===r.Text?_.message:void 0},"searchquery-"+(l.messages[0]?.nodeId??I))}case r.a8km123:return t.jsx(Fs,{messages:l.messages,isStreaming:R&&c,clientThreadId:s},"sum-"+(l.messages[0]?.nodeId??I));case r.f959b8c:return null;case r.b1de6e2:return null;case r.b1de6e2_c:return null;case r.de1d73e:return null;case r.ParallelBrowsing:return t.jsx(zs,{messages:l.messages},"parallel-"+(l.messages[0]?.nodeId??I));case r.CodeInterpreter:return t.jsx(js,{messages:l.messages,isRequestActive:f,clientThreadId:s},"ada-"+(l.messages[0]?.nodeId??I));case r.JITPlugin:return t.jsx(Bs,{messages:l.messages,clientThreadId:s,isLastTurnInConversation:g,onRequestCompletion:T},"jit-"+(l.messages[0]?.nodeId??I));case r.Dalle:return t.jsx(Vs,{messages:l.messages,clientThreadId:s},"dalle-"+(l.messages[0]?.nodeId??I));case r.GizmoEditor:return t.jsx(Os,{messages:l.messages},"gizmo-editor-"+(l.messages[0]?.nodeId??I));case r.Canmore:return t.jsx(hs,{messages:l.messages,isRequestActive:f,clientThreadId:s},"canmore-"+(l.messages[0]?.nodeId??I));case r.Debug:return v?t.jsx(Ps,{message:l.message},"debug-"+l.message.nodeId):null;case r.SearchResult:return t.jsx(Us,{messages:l.messages},"search-result-"+(l.messages[0]?.nodeId??I))}});return t.jsx(Ks,{shouldGrowContainer:y,children:w})}function Hs(){return t.jsx(cs,{type:"danger",children:t.jsx(W,{id:"daIg0P",defaultMessage:"Unable to display this message due to a error."})})}function Ks({children:e,shouldGrowContainer:a}){return t.jsx("div",{className:j({"flex max-w-full flex-col":!0,"flex-grow":a}),children:t.jsx(Ee,{name:"GroupedMessages",fallback:Hs,children:e})})}export{qs as C,C as T,B as a,Xs as b,Zs as g};
//# sourceMappingURL=dix6qsz4ydykm8n4.js.map
