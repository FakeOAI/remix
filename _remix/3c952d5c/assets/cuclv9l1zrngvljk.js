import{a as Ae,F as $,E as R,D as z,e as ot,b as ze,S as G,V as Jt,f as Kn,g as ci,j as Xn,m as mt,W as Kt,G as ui,R as Yn,n as mn,P as Qn,o as gt,T as Xt,q as rt,k as hi,r as di,A as Yt,c as w,s as me,u as Q,v as Et,x as pi,M as Rt,y as Zn,z as mi,B as gi,H as yi,J as je}from"./6way6wo9xhakptf0.js";import{_ as er,cg as bi,Y as tr,ff as ki,cO as xi,cP as wi}from"./lmxm7n9d5wiypftj.js";import{gP as vi}from"./mkzh4liwzbq0my17.js";const ia=(...n)=>e=>{n.forEach(t=>{if(typeof t=="function")t(e);else if(t){const r=t;r.current=e}})},Ci=1024;let Si=0;class K{constructor(e,t){this.from=e,this.to=t}}class v{constructor(e={}){this.id=Si++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=V.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}v.closedBy=new v({deserialize:n=>n.split(" ")});v.openedBy=new v({deserialize:n=>n.split(" ")});v.group=new v({deserialize:n=>n.split(" ")});v.isolate=new v({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});v.contextHash=new v({perNode:!0});v.lookAhead=new v({perNode:!0});v.mounted=new v({perNode:!0});class He{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[v.mounted.id]}}const Ai=Object.create(null);class V{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):Ai,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new V(e.name||"",t,e.id,r);if(e.props){for(let o of e.props)if(Array.isArray(o)||(o=o(i)),o){if(o[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[o[0].id]=o[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(v.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(v.group),o=-1;o<(i?i.length:0);o++){let s=t[o<0?r.name:i[o]];if(s)return s}}}}V.none=new V("",Object.create(null),0,8);class nr{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let o of e){let s=o(r);s&&(i||(i=Object.assign({},r.props)),i[s[0].id]=s[1])}t.push(i?new V(r.name,i,r.id,r.flags):r)}return new nr(t)}}const Ye=new WeakMap,gn=new WeakMap;var D;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(D||(D={}));class F{constructor(e,t,r,i,o){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,o&&o.length){this.props=Object.create(null);for(let[s,l]of o)this.props[typeof s=="number"?s:s.id]=l}}toString(){let e=He.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new st(this.topNode,e)}cursorAt(e,t=0,r=0){let i=Ye.get(this)||this.topNode,o=new st(i);return o.moveTo(e,t),Ye.set(this,o._tree),o}get topNode(){return new j(this,0,0,null)}resolve(e,t=0){let r=We(Ye.get(this)||this.topNode,e,t,!1);return Ye.set(this,r),r}resolveInner(e,t=0){let r=We(gn.get(this)||this.topNode,e,t,!0);return gn.set(this,r),r}resolveStack(e,t=0){return Ii(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:o=this.length}=e,s=e.mode||0,l=(s&D.IncludeAnonymous)>0;for(let a=this.cursor(s|D.IncludeAnonymous);;){let f=!1;if(a.from<=o&&a.to>=i&&(!l&&a.type.isAnonymous||t(a)!==!1)){if(a.firstChild())continue;f=!0}for(;f&&r&&(l||!a.type.isAnonymous)&&r(a),!a.nextSibling();){if(!a.parent())return;f=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:en(V.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new F(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new F(V.none,t,r,i)))}static build(e){return Ti(e)}}F.empty=new F(V.none,[],[],0);class Qt{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Qt(this.buffer,this.index)}}class ge{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return V.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],o=i.name;if(/\W/.test(o)&&!i.isError&&(o=JSON.stringify(o)),e+=4,r==e)return o;let s=[];for(;e<r;)s.push(this.childString(e)),e=this.buffer[e+3];return o+"("+s.join(",")+")"}findChild(e,t,r,i,o){let{buffer:s}=this,l=-1;for(let a=e;a!=t&&!(rr(o,i,s[a+1],s[a+2])&&(l=a,r>0));a=s[a+3]);return l}slice(e,t,r){let i=this.buffer,o=new Uint16Array(t-e),s=0;for(let l=e,a=0;l<t;){o[a++]=i[l++],o[a++]=i[l++]-r;let f=o[a++]=i[l++]-r;o[a++]=i[l++]-e,s=Math.max(s,f)}return new ge(o,s,this.set)}}function rr(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function We(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let s=!r&&n instanceof j&&n.index<0?null:n.parent;if(!s)return n;n=s}let o=r?0:D.IgnoreOverlays;if(r)for(let s=n,l=s.parent;l;s=l,l=s.parent)s instanceof j&&s.index<0&&((i=l.enter(e,t,o))===null||i===void 0?void 0:i.from)!=s.from&&(n=l);for(;;){let s=n.enter(e,t,o);if(!s)return n;n=s}}class ir{cursor(e=0){return new st(this,e)}getChild(e,t=null,r=null){let i=yn(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return yn(this,e,t,r)}resolve(e,t=0){return We(this,e,t,!1)}resolveInner(e,t=0){return We(this,e,t,!0)}matchContext(e){return Ft(this,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}}class j extends ir{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,o=0){for(let s=this;;){for(let{children:l,positions:a}=s._tree,f=t>0?l.length:-1;e!=f;e+=t){let c=l[e],h=a[e]+s.from;if(rr(i,r,h,h+c.length)){if(c instanceof ge){if(o&D.ExcludeBuffers)continue;let d=c.findChild(0,c.buffer.length,t,r-h,i);if(d>-1)return new le(new Bi(s,c,e,h),null,d)}else if(o&D.IncludeAnonymous||!c.type.isAnonymous||Zt(c)){let d;if(!(o&D.IgnoreMounts)&&(d=He.get(c))&&!d.overlay)return new j(d.tree,h,e,s);let p=new j(c,h,e,s);return o&D.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?c.children.length-1:0,t,r,i)}}}if(o&D.IncludeAnonymous||!s.type.isAnonymous||(s.index>=0?e=s.index+t:e=t<0?-1:s._parent._tree.children.length,s=s._parent,!s))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&D.IgnoreOverlays)&&(i=He.get(this._tree))&&i.overlay){let o=e-this.from;for(let{from:s,to:l}of i.overlay)if((t>0?s<=o:s<o)&&(t<0?l>=o:l>o))return new j(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function yn(n,e,t,r){let i=n.cursor(),o=[];if(!i.firstChild())return o;if(t!=null){for(let s=!1;!s;)if(s=i.type.is(t),!i.nextSibling())return o}for(;;){if(r!=null&&i.type.is(r))return o;if(i.type.is(e)&&o.push(i.node),!i.nextSibling())return r==null?o:[]}}function Ft(n,e,t=e.length-1){for(let r=n.parent;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class Bi{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}}class le extends ir{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return o<0?null:new le(this.context,this,o)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&D.ExcludeBuffers)return null;let{buffer:i}=this.context,o=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return o<0?null:new le(this.context,this,o)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new le(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new le(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,o=r.buffer[this.index+3];if(o>i){let s=r.buffer[this.index+1];e.push(r.slice(i,o,s)),t.push(0)}return new F(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function or(n){if(!n.length)return null;let e=0,t=n[0];for(let o=1;o<n.length;o++){let s=n[o];(s.from>t.from||s.to<t.to)&&(t=s,e=o)}let r=t instanceof j&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new Mi(i,t)}class Mi{constructor(e,t){this.heads=e,this.node=t}get next(){return or(this.heads)}}function Ii(n,e,t){let r=n.resolveInner(e,t),i=null;for(let o=r instanceof j?r:r.context.parent;o;o=o.parent)if(o.index<0){let s=o.parent;(i||(i=[r])).push(s.resolve(e,t)),o=s}else{let s=He.get(o.tree);if(s&&s.overlay&&s.overlay[0].from<=e&&s.overlay[s.overlay.length-1].to>=e){let l=new j(s.tree,s.overlay[0].from+o.from,-1,o);(i||(i=[r])).push(We(l,e,t,!1))}}return i?or(i):r}class st{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof j)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof j?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,o=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return o<0?!1:(this.stack.push(this.index),this.yieldBuf(o))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&D.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&D.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&D.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let o=0;o<this.index;o++)if(i.buffer.buffer[o+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let o=t+e,s=e<0?-1:r._tree.children.length;o!=s;o+=e){let l=r._tree.children[o];if(this.mode&D.IncludeAnonymous||l instanceof ge||!l.type.isAnonymous||Zt(l))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,o=this.stack.length;o>=0;){for(let s=e;s;s=s._parent)if(s.index==i){if(i==this.index)return s;t=s,r=o+1;break e}i=this.stack[--o]}for(let i=r;i<this.stack.length;i++)t=new le(this.buffer,t,this.stack[i]);return this.bufferNode=new le(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;i&&t&&t(this),i=this.type.isAnonymous,!this.nextSibling();){if(!r)return;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return Ft(this.node,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,o=this.stack.length-1;i>=0;o--){if(o<0)return Ft(this.node,e,i);let s=r[t.buffer[this.stack[o]]];if(!s.isAnonymous){if(e[i]&&e[i]!=s.name)return!1;i--}}return!0}}function Zt(n){return n.children.some(e=>e instanceof ge||!e.type.isAnonymous||Zt(e))}function Ti(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=Ci,reused:o=[],minRepeatType:s=r.types.length}=n,l=Array.isArray(t)?new Qt(t,t.length):t,a=r.types,f=0,c=0;function h(b,B,y,L,T,M){let{id:C,start:S,end:E,size:N}=l,W=c;for(;N<0;)if(l.next(),N==-1){let ue=o[C];y.push(ue),L.push(S-b);return}else if(N==-3){f=C;return}else if(N==-4){c=C;return}else throw new RangeError(`Unrecognized record size: ${N}`);let ke=a[C],Be,xe,dn=S-b;if(E-S<=i&&(xe=O(l.pos-B,T))){let ue=new Uint16Array(xe.size-xe.skip),q=l.pos-xe.size,te=ue.length;for(;l.pos>q;)te=I(xe.start,ue,te);Be=new ge(ue,E-xe.start,r),dn=xe.start-b}else{let ue=l.pos-N;l.next();let q=[],te=[],we=C>=s?C:-1,Me=0,Xe=E;for(;l.pos>ue;)we>=0&&l.id==we&&l.size>=0?(l.end<=Xe-i&&(g(q,te,S,Me,l.end,Xe,we,W),Me=q.length,Xe=l.end),l.next()):M>2500?d(S,ue,q,te):h(S,ue,q,te,we,M+1);if(we>=0&&Me>0&&Me<q.length&&g(q,te,S,Me,S,Xe,we,W),q.reverse(),te.reverse(),we>-1&&Me>0){let pn=p(ke);Be=en(ke,q,te,0,q.length,0,E-S,pn,pn)}else Be=k(ke,q,te,E-S,W-E)}y.push(Be),L.push(dn)}function d(b,B,y,L){let T=[],M=0,C=-1;for(;l.pos>B;){let{id:S,start:E,end:N,size:W}=l;if(W>4)l.next();else{if(C>-1&&E<C)break;C<0&&(C=N-i),T.push(S,E,N),M++,l.next()}}if(M){let S=new Uint16Array(M*4),E=T[T.length-2];for(let N=T.length-3,W=0;N>=0;N-=3)S[W++]=T[N],S[W++]=T[N+1]-E,S[W++]=T[N+2]-E,S[W++]=W;y.push(new ge(S,T[2]-E,r)),L.push(E-b)}}function p(b){return(B,y,L)=>{let T=0,M=B.length-1,C,S;if(M>=0&&(C=B[M])instanceof F){if(!M&&C.type==b&&C.length==L)return C;(S=C.prop(v.lookAhead))&&(T=y[M]+C.length+S)}return k(b,B,y,L,T)}}function g(b,B,y,L,T,M,C,S){let E=[],N=[];for(;b.length>L;)E.push(b.pop()),N.push(B.pop()+y-T);b.push(k(r.types[C],E,N,M-T,S-M)),B.push(T-y)}function k(b,B,y,L,T=0,M){if(f){let C=[v.contextHash,f];M=M?[C].concat(M):[C]}if(T>25){let C=[v.lookAhead,T];M=M?[C].concat(M):[C]}return new F(b,B,y,L,M)}function O(b,B){let y=l.fork(),L=0,T=0,M=0,C=y.end-i,S={size:0,start:0,skip:0};e:for(let E=y.pos-b;y.pos>E;){let N=y.size;if(y.id==B&&N>=0){S.size=L,S.start=T,S.skip=M,M+=4,L+=4,y.next();continue}let W=y.pos-N;if(N<0||W<E||y.start<C)break;let ke=y.id>=s?4:0,Be=y.start;for(y.next();y.pos>W;){if(y.size<0)if(y.size==-3)ke+=4;else break e;else y.id>=s&&(ke+=4);y.next()}T=Be,L+=N,M+=ke}return(B<0||L==b)&&(S.size=L,S.start=T,S.skip=M),S.size>4?S:void 0}function I(b,B,y){let{id:L,start:T,end:M,size:C}=l;if(l.next(),C>=0&&L<s){let S=y;if(C>4){let E=l.pos-(C-4);for(;l.pos>E;)y=I(b,B,y)}B[--y]=S,B[--y]=M-b,B[--y]=T-b,B[--y]=L}else C==-3?f=L:C==-4&&(c=L);return y}let x=[],A=[];for(;l.pos>0;)h(n.start||0,n.bufferStart||0,x,A,-1,0);let P=(e=n.length)!==null&&e!==void 0?e:x.length?A[0]+x[0].length:0;return new F(a[n.topID],x.reverse(),A.reverse(),P)}const bn=new WeakMap;function it(n,e){if(!n.isAnonymous||e instanceof ge||e.type!=n)return 1;let t=bn.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof F)){t=1;break}t+=it(n,r)}bn.set(e,t)}return t}function en(n,e,t,r,i,o,s,l,a){let f=0;for(let g=r;g<i;g++)f+=it(n,e[g]);let c=Math.ceil(f*1.5/8),h=[],d=[];function p(g,k,O,I,x){for(let A=O;A<I;){let P=A,b=k[A],B=it(n,g[A]);for(A++;A<I;A++){let y=it(n,g[A]);if(B+y>=c)break;B+=y}if(A==P+1){if(B>c){let y=g[P];p(y.children,y.positions,0,y.children.length,k[P]+x);continue}h.push(g[P])}else{let y=k[A-1]+g[A-1].length-b;h.push(en(n,g,k,P,A,b,y,null,a))}d.push(b+x-o)}}return p(e,t,r,i,0),(l||a)(h,d,s)}class oa{constructor(){this.map=new WeakMap}setBuffer(e,t,r){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,r)}getBuffer(e,t){let r=this.map.get(e);return r&&r.get(t)}set(e,t){e instanceof le?this.setBuffer(e.context.buffer,e.index,t):e instanceof j&&this.map.set(e.tree,t)}get(e){return e instanceof le?this.getBuffer(e.context.buffer,e.index):e instanceof j?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}class he{constructor(e,t,r,i,o=!1,s=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(o?1:0)|(s?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new he(0,e.length,e,0,!1,r)];for(let o of t)o.to>e.length&&i.push(o);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],o=1,s=e.length?e[0]:null;for(let l=0,a=0,f=0;;l++){let c=l<t.length?t[l]:null,h=c?c.fromA:1e9;if(h-a>=r)for(;s&&s.from<h;){let d=s;if(a>=d.from||h<=d.to||f){let p=Math.max(d.from,a)-f,g=Math.min(d.to,h)-f;d=p>=g?null:new he(p,g,d.tree,d.offset+f,l>0,!!c)}if(d&&i.push(d),s.to>h)break;s=o<e.length?e[o++]:null}if(!c)break;a=c.toA,f=c.toA-c.toB}return i}}class Oi{startParse(e,t,r){return typeof e=="string"&&(e=new Ni(e)),r=r?r.length?r.map(i=>new K(i.from,i.to)):[new K(0,0)]:[new K(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let o=i.advance();if(o)return o}}}class Ni{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function sa(n){return(e,t,r,i)=>new Pi(e,n,t,r,i)}class kn{constructor(e,t,r,i,o){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.from=o}}function xn(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}class Di{constructor(e,t,r,i,o,s,l){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=o,this.target=s,this.prev=l,this.depth=0,this.ranges=[]}}const zt=new v({perNode:!0});class Pi{constructor(e,t,r,i,o){this.nest=t,this.input=r,this.fragments=i,this.ranges=o,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new F(r.type,r.children,r.positions,r.length,r.propValues.concat([[zt,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[v.mounted.id]=new He(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new Ri(this.fragments),t=null,r=null,i=new st(new j(this.baseTree,this.ranges[0].from,0,null),D.IncludeAnonymous|D.IgnoreMounts);e:for(let o,s;;){let l=!0,a;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)l=!1;else if(e.hasNode(i)){if(t){let f=t.mounts.find(c=>c.frag.from<=i.from&&c.frag.to>=i.to&&c.mount.overlay);if(f)for(let c of f.mount.overlay){let h=c.from+f.pos,d=c.to+f.pos;h>=i.from&&d<=i.to&&!t.ranges.some(p=>p.from<d&&p.to>h)&&t.ranges.push({from:h,to:d})}}l=!1}else if(r&&(s=Li(r.ranges,i.from,i.to)))l=s!=2;else if(!i.type.isAnonymous&&(o=this.nest(i,this.input))&&(i.from<i.to||!o.overlay)){i.tree||Ei(i);let f=e.findMounts(i.from,o.parser);if(typeof o.overlay=="function")t=new Di(o.parser,o.overlay,f,this.inner.length,i.from,i.tree,t);else{let c=Cn(this.ranges,o.overlay||(i.from<i.to?[new K(i.from,i.to)]:[]));c.length&&xn(c),(c.length||!o.overlay)&&this.inner.push(new kn(o.parser,c.length?o.parser.startParse(this.input,Sn(f,c),c):o.parser.startParse(""),o.overlay?o.overlay.map(h=>new K(h.from-i.from,h.to-i.from)):null,i.tree,c.length?c[0].from:i.from)),o.overlay?c.length&&(r={ranges:c,depth:0,prev:r}):l=!1}}else t&&(a=t.predicate(i))&&(a===!0&&(a=new K(i.from,i.to)),a.from<a.to&&t.ranges.push(a));if(l&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let f=Cn(this.ranges,t.ranges);f.length&&(xn(f),this.inner.splice(t.index,0,new kn(t.parser,t.parser.startParse(this.input,Sn(t.mounts,f),f),t.ranges.map(c=>new K(c.from-t.start,c.to-t.start)),t.target,f[0].from))),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}}function Li(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function wn(n,e,t,r,i,o){if(e<t){let s=n.buffer[e+1];r.push(n.slice(e,t,s)),i.push(s-o)}}function Ei(n){let{node:e}=n,t=[],r=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let i=n.tree,o=i.children.indexOf(r),s=i.children[o],l=s.buffer,a=[o];function f(c,h,d,p,g,k){let O=t[k],I=[],x=[];wn(s,c,O,I,x,p);let A=l[O+1],P=l[O+2];a.push(I.length);let b=k?f(O+4,l[O+3],s.set.types[l[O]],A,P-A,k-1):e.toTree();return I.push(b),x.push(A-p),wn(s,l[O+3],h,I,x,p),new F(d,I,x,g)}i.children[o]=f(0,l.length,V.none,0,s.length,t.length-1);for(let c of a){let h=n.tree.children[c],d=n.tree.positions[c];n.yield(new j(h,d+n.from,c,n._tree))}}class vn{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(D.IncludeAnonymous|D.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,D.IgnoreOverlays|D.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof F)t=t.children[0];else break}return!1}}class Ri{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(zt))!==null&&t!==void 0?t:r.to,this.inner=new vn(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(zt))!==null&&e!==void 0?e:t.to,this.inner=new vn(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let o=this.inner.cursor.node;o;o=o.parent){let s=(r=o.tree)===null||r===void 0?void 0:r.prop(v.mounted);if(s&&s.parser==t)for(let l=this.fragI;l<this.fragments.length;l++){let a=this.fragments[l];if(a.from>=o.to)break;a.tree==this.curFrag.tree&&i.push({frag:a,pos:o.from-a.offset,mount:s})}}}return i}}function Cn(n,e){let t=null,r=e;for(let i=1,o=0;i<n.length;i++){let s=n[i-1].to,l=n[i].from;for(;o<r.length;o++){let a=r[o];if(a.from>=l)break;a.to<=s||(t||(r=t=e.slice()),a.from<s?(t[o]=new K(a.from,s),a.to>l&&t.splice(o+1,0,new K(l,a.to))):a.to>l?t[o--]=new K(l,a.to):t.splice(o--,1))}}return r}function Fi(n,e,t,r){let i=0,o=0,s=!1,l=!1,a=-1e9,f=[];for(;;){let c=i==n.length?1e9:s?n[i].to:n[i].from,h=o==e.length?1e9:l?e[o].to:e[o].from;if(s!=l){let d=Math.max(a,t),p=Math.min(c,h,r);d<p&&f.push(new K(d,p))}if(a=Math.min(c,h),a==1e9)break;c==a&&(s?(s=!1,i++):s=!0),h==a&&(l?(l=!1,o++):l=!0)}return f}function Sn(n,e){let t=[];for(let{pos:r,mount:i,frag:o}of n){let s=r+(i.overlay?i.overlay[0].from:0),l=s+i.tree.length,a=Math.max(o.from,s),f=Math.min(o.to,l);if(i.overlay){let c=i.overlay.map(d=>new K(d.from+r,d.to+r)),h=Fi(e,c,a,f);for(let d=0,p=a;;d++){let g=d==h.length,k=g?f:h[d].from;if(k>p&&t.push(new he(p,k,i.tree,-s,o.from>=p||o.openStart,o.to<=k||o.openEnd)),g)break;p=h[d].to}}else t.push(new he(a,f,i.tree,-s,o.from>=s||o.openStart,o.to<=l||o.openEnd))}return t}let zi=0;class oe{constructor(e,t,r){this.set=e,this.base=t,this.modified=r,this.id=zi++}static define(e){if(e!=null&&e.base)throw new Error("Can not derive from a modified tag");let t=new oe([],null,[]);if(t.set.push(t),e)for(let r of e.set)t.set.push(r);return t}static defineModifier(){let e=new lt;return t=>t.modified.indexOf(e)>-1?t:lt.get(t.base||t,t.modified.concat(e).sort((r,i)=>r.id-i.id))}}let _i=0;class lt{constructor(){this.instances=[],this.id=_i++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(l=>l.base==e&&ji(t,l.modified));if(r)return r;let i=[],o=new oe(i,e,t);for(let l of t)l.instances.push(o);let s=Hi(t);for(let l of e.set)if(!l.modified.length)for(let a of s)i.push(lt.get(l,a));return o}}function ji(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function Hi(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Wi(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let o=[],s=2,l=i;for(let h=0;;){if(l=="..."&&h>0&&h+3==i.length){s=1;break}let d=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!d)throw new RangeError("Invalid path: "+i);if(o.push(d[0]=="*"?"":d[0][0]=='"'?JSON.parse(d[0]):d[0]),h+=d[0].length,h==i.length)break;let p=i[h++];if(h==i.length&&p=="!"){s=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);l=i.slice(h)}let a=o.length-1,f=o[a];if(!f)throw new RangeError("Invalid path: "+i);let c=new at(r,s,a>0?o.slice(0,a):null);e[f]=c.sort(e[f])}}return sr.add(e)}const sr=new v;class at{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}at.empty=new at([],2,null);function lr(n,e){let t=Object.create(null);for(let o of n)if(!Array.isArray(o.tag))t[o.tag.id]=o.class;else for(let s of o.tag)t[s.id]=o.class;let{scope:r,all:i=null}=e||{};return{style:o=>{let s=i;for(let l of o)for(let a of l.set){let f=t[a.id];if(f){s=s?s+" "+f:f;break}}return s},scope:r}}function Ui(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function Vi(n,e,t,r=0,i=n.length){let o=new $i(r,Array.isArray(e)?e:[e],t);o.highlightRange(n.cursor(),r,i,"",o.highlighters),o.flush(i)}class $i{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,o){let{type:s,from:l,to:a}=e;if(l>=r||a<=t)return;s.isTop&&(o=this.highlighters.filter(p=>!p.scope||p.scope(s)));let f=i,c=Gi(e)||at.empty,h=Ui(o,c.tags);if(h&&(f&&(f+=" "),f+=h,c.mode==1&&(i+=(i?" ":"")+h)),this.startSpan(Math.max(t,l),f),c.opaque)return;let d=e.tree&&e.tree.prop(v.mounted);if(d&&d.overlay){let p=e.node.enter(d.overlay[0].from+l,1),g=this.highlighters.filter(O=>!O.scope||O.scope(d.tree.type)),k=e.firstChild();for(let O=0,I=l;;O++){let x=O<d.overlay.length?d.overlay[O]:null,A=x?x.from+l:a,P=Math.max(t,I),b=Math.min(r,A);if(P<b&&k)for(;e.from<b&&(this.highlightRange(e,P,b,i,o),this.startSpan(Math.min(b,e.to),f),!(e.to>=A||!e.nextSibling())););if(!x||A>r)break;I=x.to+l,I>t&&(this.highlightRange(p.cursor(),Math.max(t,x.from+l),Math.min(r,I),"",g),this.startSpan(Math.min(r,I),f))}k&&e.parent()}else if(e.firstChild()){d&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,o),this.startSpan(Math.min(r,e.to),f)}while(e.nextSibling());e.parent()}}}function Gi(n){let e=n.type.prop(sr);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const m=oe.define,Qe=m(),de=m(),An=m(de),Bn=m(de),pe=m(),Ze=m(pe),At=m(pe),ie=m(),ve=m(ie),ne=m(),re=m(),_t=m(),Ee=m(_t),et=m(),u={comment:Qe,lineComment:m(Qe),blockComment:m(Qe),docComment:m(Qe),name:de,variableName:m(de),typeName:An,tagName:m(An),propertyName:Bn,attributeName:m(Bn),className:m(de),labelName:m(de),namespace:m(de),macroName:m(de),literal:pe,string:Ze,docString:m(Ze),character:m(Ze),attributeValue:m(Ze),number:At,integer:m(At),float:m(At),bool:m(pe),regexp:m(pe),escape:m(pe),color:m(pe),url:m(pe),keyword:ne,self:m(ne),null:m(ne),atom:m(ne),unit:m(ne),modifier:m(ne),operatorKeyword:m(ne),controlKeyword:m(ne),definitionKeyword:m(ne),moduleKeyword:m(ne),operator:re,derefOperator:m(re),arithmeticOperator:m(re),logicOperator:m(re),bitwiseOperator:m(re),compareOperator:m(re),updateOperator:m(re),definitionOperator:m(re),typeOperator:m(re),controlOperator:m(re),punctuation:_t,separator:m(_t),bracket:Ee,angleBracket:m(Ee),squareBracket:m(Ee),paren:m(Ee),brace:m(Ee),content:ie,heading:ve,heading1:m(ve),heading2:m(ve),heading3:m(ve),heading4:m(ve),heading5:m(ve),heading6:m(ve),contentSeparator:m(ie),list:m(ie),quote:m(ie),emphasis:m(ie),strong:m(ie),link:m(ie),monospace:m(ie),strikethrough:m(ie),inserted:m(),deleted:m(),changed:m(),invalid:m(),meta:et,documentMeta:m(et),annotation:m(et),processingInstruction:m(et),definition:oe.defineModifier(),constant:oe.defineModifier(),function:oe.defineModifier(),standard:oe.defineModifier(),local:oe.defineModifier(),special:oe.defineModifier()};lr([{tag:u.link,class:"tok-link"},{tag:u.heading,class:"tok-heading"},{tag:u.emphasis,class:"tok-emphasis"},{tag:u.strong,class:"tok-strong"},{tag:u.keyword,class:"tok-keyword"},{tag:u.atom,class:"tok-atom"},{tag:u.bool,class:"tok-bool"},{tag:u.url,class:"tok-url"},{tag:u.labelName,class:"tok-labelName"},{tag:u.inserted,class:"tok-inserted"},{tag:u.deleted,class:"tok-deleted"},{tag:u.literal,class:"tok-literal"},{tag:u.string,class:"tok-string"},{tag:u.number,class:"tok-number"},{tag:[u.regexp,u.escape,u.special(u.string)],class:"tok-string2"},{tag:u.variableName,class:"tok-variableName"},{tag:u.local(u.variableName),class:"tok-variableName tok-local"},{tag:u.definition(u.variableName),class:"tok-variableName tok-definition"},{tag:u.special(u.variableName),class:"tok-variableName2"},{tag:u.definition(u.propertyName),class:"tok-propertyName tok-definition"},{tag:u.typeName,class:"tok-typeName"},{tag:u.namespace,class:"tok-namespace"},{tag:u.className,class:"tok-className"},{tag:u.macroName,class:"tok-macroName"},{tag:u.propertyName,class:"tok-propertyName"},{tag:u.operator,class:"tok-operator"},{tag:u.comment,class:"tok-comment"},{tag:u.meta,class:"tok-meta"},{tag:u.invalid,class:"tok-invalid"},{tag:u.punctuation,class:"tok-punctuation"}]);var Bt;const Ie=new v;function qi(n){return $.define({combine:n?e=>e.concat(n):void 0})}const Ji=new v;class Z{constructor(e,t,r=[],i=""){this.data=e,this.name=i,ze.prototype.hasOwnProperty("tree")||Object.defineProperty(ze.prototype,"tree",{get(){return _(this)}}),this.parser=t,this.extension=[ye.of(this),ze.languageData.of((o,s,l)=>{let a=Mn(o,s,l),f=a.type.prop(Ie);if(!f)return[];let c=o.facet(f),h=a.type.prop(Ji);if(h){let d=a.resolve(s-a.from,l);for(let p of h)if(p.test(d,o)){let g=o.facet(p.facet);return p.type=="replace"?g:g.concat(c)}}return c})].concat(r)}isActiveAt(e,t,r=-1){return Mn(e,t,r).type.prop(Ie)==this.data}findRegions(e){let t=e.facet(ye);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(o,s)=>{if(o.prop(Ie)==this.data){r.push({from:s,to:s+o.length});return}let l=o.prop(v.mounted);if(l){if(l.tree.prop(Ie)==this.data){if(l.overlay)for(let a of l.overlay)r.push({from:a.from+s,to:a.to+s});else r.push({from:s,to:s+o.length});return}else if(l.overlay){let a=r.length;if(i(l.tree,l.overlay[0].from+s),r.length>a)return}}for(let a=0;a<o.children.length;a++){let f=o.children[a];f instanceof F&&i(f,o.positions[a]+s)}};return i(_(e),0),r}get allowsNesting(){return!0}}Z.setState=G.define();function Mn(n,e,t){let r=n.facet(ye),i=_(n).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(e,t,D.ExcludeBuffers))o.type.isTop&&(i=o);return i}class jt extends Z{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=qi(e.languageData);return new jt(t,e.parser.configure({props:[Ie.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new jt(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function _(n){let e=n.field(Z.state,!1);return e?e.tree:F.empty}class Ki{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Re=null;class ft{constructor(e,t,r=[],i,o,s,l,a){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=o,this.viewport=s,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new ft(e,t,[],F.empty,0,r,[],null)}startParse(){return this.parser.startParse(new Ki(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=F.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(he.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(he.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Re;Re=this;try{return e()}finally{Re=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=In(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:o,viewport:s,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((f,c,h,d)=>a.push({fromA:f,toA:c,fromB:h,toB:d})),r=he.applyChanges(r,a),i=F.empty,o=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){l=[];for(let f of this.skipped){let c=e.mapPos(f.from,1),h=e.mapPos(f.to,-1);c<h&&l.push({from:c,to:h})}}}return new ft(this.parser,t,r,i,o,s,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:o}=this.skipped[r];i<e.to&&o>e.from&&(this.fragments=In(this.fragments,i,o),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Oi{createParse(t,r,i){let o=i[0].from,s=i[i.length-1].to;return{parsedPos:o,advance(){let a=Re;if(a){for(let f of i)a.tempSkipped.push(f);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=s,new F(V.none,[],[],s-o)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Re}}function In(n,e,t){return he.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ne{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Ne(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=ft.create(e.facet(ye).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Ne(r)}}Z.state=Ae.define({create:Ne.init,update(n,e){for(let t of e.effects)if(t.is(Z.setState))return t.value;return e.startState.facet(ye)!=e.state.facet(ye)?Ne.init(e.state):n.apply(e)}});let ar=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(ar=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Mt=typeof navigator<"u"&&(!((Bt=navigator.scheduling)===null||Bt===void 0)&&Bt.isInputPending)?()=>navigator.scheduling.isInputPending():null,Xi=Jt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Z.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Z.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=ar(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,o=r.field(Z.state);if(o.tree==o.context.tree&&o.context.isDone(i+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!Mt?Math.max(25,e.timeRemaining()-5):1e9),l=o.context.treeLen<i&&r.doc.length>i+1e3,a=o.context.work(()=>Mt&&Mt()||Date.now()>s,i+(l?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(o.context.takeTree(),this.view.dispatch({effects:Z.setState.of(new Ne(o.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(o.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Kn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),ye=$.define({combine(n){return n.length?n[0]:null},enables:n=>[Z.state,Xi,R.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class aa{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const Yi=$.define(),yt=$.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function ct(n){let e=n.facet(yt);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Ue(n,e){let t="",r=n.tabSize,i=n.facet(yt)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let o=0;o<e;o++)t+=i;return t}function tn(n,e){n instanceof ze&&(n=new bt(n));for(let r of n.state.facet(Yi)){let i=r(n,e);if(i!==void 0)return i}let t=_(n.state);return t.length>=e?Zi(n,t,e):null}class bt{constructor(e,t={}){this.state=e,this.options=t,this.unit=ct(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:o}=this.options;return i!=null&&i>=r.from&&i<=r.to?o&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.countColumn(r,e-i),s=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return s>-1&&(o+=s-this.countColumn(r,r.search(/\S|$/))),o}countColumn(e,t=e.length){return gt(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),o=this.options.overrideIndentation;if(o){let s=o(i);if(s>-1)return s}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Qi=new v;function Zi(n,e,t){let r=e.resolveStack(t),i=r.node.enterUnfinishedNodesBefore(t);if(i!=r.node){let o=[];for(let s=i;s!=r.node;s=s.parent)o.push(s);for(let s=o.length-1;s>=0;s--)r={node:o[s],next:r}}return fr(r,n,t)}function fr(n,e,t){for(let r=n;r;r=r.next){let i=to(r.node);if(i)return i(nn.create(e,t,r))}return 0}function eo(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function to(n){let e=n.type.prop(Qi);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(v.closedBy))){let i=n.lastChild,o=i&&r.indexOf(i.name)>-1;return s=>cr(s,!0,1,void 0,o&&!eo(s)?i.from:void 0)}return n.parent==null?no:null}function no(){return 0}class nn extends bt{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new nn(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(ro(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return fr(this.context.next,this.base,this.pos)}}function ro(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function io(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,o=n.state.doc.lineAt(t.from),s=i==null||i<=o.from?o.to:Math.min(o.to,i);for(let l=t.to;;){let a=e.childAfter(l);if(!a||a==r)return null;if(!a.type.isSkipped)return a.from<s?t:null;l=a.to}}function fa({closing:n,align:e=!0,units:t=1}){return r=>cr(r,e,t,n)}function cr(n,e,t,r,i){let o=n.textAfter,s=o.match(/^\s*/)[0].length,l=r&&o.slice(s,s+r.length)==r||i==n.pos+s,a=e?io(n):null;return a?l?n.column(a.from):n.column(a.to):n.baseIndent+(l?0:n.unit*t)}const ca=n=>n.baseIndent;function ua({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}const oo=200;function ha(){return ze.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+oo)return n;let o=t.sliceString(i.from,r);if(!e.some(f=>f.test(o)))return n;let{state:s}=n,l=-1,a=[];for(let{head:f}of s.selection.ranges){let c=s.doc.lineAt(f);if(c.from==l)continue;l=c.from;let h=tn(s,c.from);if(h==null)continue;let d=/^\s*/.exec(c.text)[0],p=Ue(s,h);d!=p&&a.push({from:c.from,to:c.from+d.length,insert:p})}return a.length?[n,{changes:a,sequential:!0}]:n})}const so=$.define(),lo=new v;function da(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}function ao(n,e,t){let r=_(n);if(r.length<t)return null;let i=r.resolveStack(t,1),o=null;for(let s=i;s;s=s.next){let l=s.node;if(l.to<=t||l.from>t)continue;if(o&&l.from<e)break;let a=l.type.prop(lo);if(a&&(l.to<r.length-50||r.length==n.doc.length||!fo(l))){let f=a(l,n);f&&f.from<=t&&f.from>=e&&f.to>t&&(o=f)}}return o}function fo(n){let e=n.lastChild;return e&&e.to==n.to&&e.type.isError}function ut(n,e,t){for(let r of n.facet(so)){let i=r(n,e,t);if(i)return i}return ao(n,e,t)}function ur(n,e){let t=e.mapPos(n.from,1),r=e.mapPos(n.to,-1);return t>=r?void 0:{from:t,to:r}}const kt=G.define({map:ur}),Ge=G.define({map:ur});function hr(n){let e=[];for(let{head:t}of n.state.selection.ranges)e.some(r=>r.from<=t&&r.to>=t)||e.push(n.lineBlockAt(t));return e}const Se=Ae.define({create(){return z.none},update(n,e){n=n.map(e.changes);for(let t of e.effects)if(t.is(kt)&&!co(n,t.value.from,t.value.to)){let{preparePlaceholder:r}=e.state.facet(mr),i=r?z.replace({widget:new yo(r(e.state,t.value))}):Tn;n=n.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(Ge)&&(n=n.update({filter:(r,i)=>t.value.from!=r||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:r}=e.selection.main;n.between(r,r,(i,o)=>{i<r&&o>r&&(t=!0)}),t&&(n=n.update({filterFrom:r,filterTo:r,filter:(i,o)=>o<=r||i>=r}))}return n},provide:n=>R.decorations.from(n),toJSON(n,e){let t=[];return n.between(0,e.doc.length,(r,i)=>{t.push(r,i)}),t},fromJSON(n){if(!Array.isArray(n)||n.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<n.length;){let r=n[t++],i=n[t++];if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(Tn.range(r,i))}return z.set(e,!0)}});function ht(n,e,t){var r;let i=null;return(r=n.field(Se,!1))===null||r===void 0||r.between(e,t,(o,s)=>{(!i||i.from>o)&&(i={from:o,to:s})}),i}function co(n,e,t){let r=!1;return n.between(e,e,(i,o)=>{i==e&&o==t&&(r=!0)}),r}function dr(n,e){return n.field(Se,!1)?e:e.concat(G.appendConfig.of(gr()))}const uo=n=>{for(let e of hr(n)){let t=ut(n.state,e.from,e.to);if(t)return n.dispatch({effects:dr(n.state,[kt.of(t),pr(n,t)])}),!0}return!1},ho=n=>{if(!n.state.field(Se,!1))return!1;let e=[];for(let t of hr(n)){let r=ht(n.state,t.from,t.to);r&&e.push(Ge.of(r),pr(n,r,!1))}return e.length&&n.dispatch({effects:e}),e.length>0};function pr(n,e,t=!0){let r=n.state.doc.lineAt(e.from).number,i=n.state.doc.lineAt(e.to).number;return R.announce.of(`${n.state.phrase(t?"Folded lines":"Unfolded lines")} ${r} ${n.state.phrase("to")} ${i}.`)}const po=n=>{let{state:e}=n,t=[];for(let r=0;r<e.doc.length;){let i=n.lineBlockAt(r),o=ut(e,i.from,i.to);o&&t.push(kt.of(o)),r=(o?n.lineBlockAt(o.to):i).to+1}return t.length&&n.dispatch({effects:dr(n.state,t)}),!!t.length},mo=n=>{let e=n.state.field(Se,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,n.state.doc.length,(r,i)=>{t.push(Ge.of({from:r,to:i}))}),n.dispatch({effects:t}),!0},pa=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:uo},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ho},{key:"Ctrl-Alt-[",run:po},{key:"Ctrl-Alt-]",run:mo}],go={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},mr=$.define({combine(n){return mt(n,go)}});function gr(n){return[Se,ko]}function yr(n,e){let{state:t}=n,r=t.facet(mr),i=s=>{let l=n.lineBlockAt(n.posAtDOM(s.target)),a=ht(n.state,l.from,l.to);a&&n.dispatch({effects:Ge.of(a)}),s.preventDefault()};if(r.placeholderDOM)return r.placeholderDOM(n,i,e);let o=document.createElement("span");return o.textContent=r.placeholderText,o.setAttribute("aria-label",t.phrase("folded code")),o.title=t.phrase("unfold"),o.className="cm-foldPlaceholder",o.onclick=i,o}const Tn=z.replace({widget:new class extends Kt{toDOM(n){return yr(n,null)}}});class yo extends Kt{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return yr(e,this.value)}}const bo={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class It extends ui{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function ma(n={}){let e=Object.assign(Object.assign({},bo),n),t=new It(e,!0),r=new It(e,!1),i=Jt.fromClass(class{constructor(s){this.from=s.viewport.from,this.markers=this.buildMarkers(s)}update(s){(s.docChanged||s.viewportChanged||s.startState.facet(ye)!=s.state.facet(ye)||s.startState.field(Se,!1)!=s.state.field(Se,!1)||_(s.startState)!=_(s.state)||e.foldingChanged(s))&&(this.markers=this.buildMarkers(s.view))}buildMarkers(s){let l=new Yn;for(let a of s.viewportLineBlocks){let f=ht(s.state,a.from,a.to)?r:ut(s.state,a.from,a.to)?t:null;f&&l.add(a.from,a.from,f)}return l.finish()}}),{domEventHandlers:o}=e;return[i,ci({class:"cm-foldGutter",markers(s){var l;return((l=s.plugin(i))===null||l===void 0?void 0:l.markers)||Xn.empty},initialSpacer(){return new It(e,!1)},domEventHandlers:Object.assign(Object.assign({},o),{click:(s,l,a)=>{if(o.click&&o.click(s,l,a))return!0;let f=ht(s.state,l.from,l.to);if(f)return s.dispatch({effects:Ge.of(f)}),!0;let c=ut(s.state,l.from,l.to);return c?(s.dispatch({effects:kt.of(c)}),!0):!1}})}),gr()]}const ko=R.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class qe{constructor(e,t){this.specs=e;let r;function i(l){let a=mn.newName();return(r||(r=Object.create(null)))["."+a]=l,a}const o=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,s=t.scope;this.scope=s instanceof Z?l=>l.prop(Ie)==s.data:s?l=>l==s:void 0,this.style=lr(e.map(l=>({tag:l.tag,class:l.class||i(Object.assign({},l,{tag:null}))})),{all:o}).style,this.module=r?new mn(r):null,this.themeType=t.themeType}static define(e,t){return new qe(e,t||{})}}const Ht=$.define(),br=$.define({combine(n){return n.length?[n[0]]:null}});function Tt(n){let e=n.facet(Ht);return e.length?e:n.facet(br)}function xo(n,e){let t=[vo],r;return n instanceof qe&&(n.module&&t.push(R.styleModule.of(n.module)),r=n.themeType),e!=null&&e.fallback?t.push(br.of(n)):r?t.push(Ht.computeN([R.darkTheme],i=>i.facet(R.darkTheme)==(r=="dark")?[n]:[])):t.push(Ht.of(n)),t}class wo{constructor(e){this.markCache=Object.create(null),this.tree=_(e.state),this.decorations=this.buildDeco(e,Tt(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=_(e.state),r=Tt(e.state),i=r!=Tt(e.startState),{viewport:o}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<o.to&&!i&&t.type==this.tree.type&&s>=o.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=o.to)}buildDeco(e,t){if(!t||!this.tree.length)return z.none;let r=new Yn;for(let{from:i,to:o}of e.visibleRanges)Vi(this.tree,t,(s,l,a)=>{r.add(s,l,this.markCache[a]||(this.markCache[a]=z.mark({class:a})))},i,o);return r.finish()}}const vo=Qn.high(Jt.fromClass(wo,{decorations:n=>n.decorations})),ga=qe.define([{tag:u.meta,color:"#404740"},{tag:u.link,textDecoration:"underline"},{tag:u.heading,textDecoration:"underline",fontWeight:"bold"},{tag:u.emphasis,fontStyle:"italic"},{tag:u.strong,fontWeight:"bold"},{tag:u.strikethrough,textDecoration:"line-through"},{tag:u.keyword,color:"#708"},{tag:[u.atom,u.bool,u.url,u.contentSeparator,u.labelName],color:"#219"},{tag:[u.literal,u.inserted],color:"#164"},{tag:[u.string,u.deleted],color:"#a11"},{tag:[u.regexp,u.escape,u.special(u.string)],color:"#e40"},{tag:u.definition(u.variableName),color:"#00f"},{tag:u.local(u.variableName),color:"#30a"},{tag:[u.typeName,u.namespace],color:"#085"},{tag:u.className,color:"#167"},{tag:[u.special(u.variableName),u.macroName],color:"#256"},{tag:u.definition(u.propertyName),color:"#00c"},{tag:u.comment,color:"#940"},{tag:u.invalid,color:"#f00"}]),Co=R.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),kr=1e4,xr="()[]{}",wr=$.define({combine(n){return mt(n,{afterCursor:!0,brackets:xr,maxScanDistance:kr,renderMatch:Bo})}}),So=z.mark({class:"cm-matchingBracket"}),Ao=z.mark({class:"cm-nonmatchingBracket"});function Bo(n){let e=[],t=n.matched?So:Ao;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}const Mo=Ae.define({create(){return z.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(wr);for(let i of e.state.selection.ranges){if(!i.empty)continue;let o=ae(e.state,i.head,-1,r)||i.head>0&&ae(e.state,i.head-1,1,r)||r.afterCursor&&(ae(e.state,i.head,1,r)||i.head<e.state.doc.length&&ae(e.state,i.head+1,-1,r));o&&(t=t.concat(r.renderMatch(o,e.state)))}return z.set(t,!0)},provide:n=>R.decorations.from(n)}),Io=[Mo,Co];function ya(n={}){return[wr.of(n),Io]}const To=new v;function Wt(n,e,t){let r=n.prop(e<0?v.openedBy:v.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function Ut(n){let e=n.type.prop(To);return e?e(n.node):n}function ae(n,e,t,r={}){let i=r.maxScanDistance||kr,o=r.brackets||xr,s=_(n),l=s.resolveInner(e,t);for(let a=l;a;a=a.parent){let f=Wt(a.type,t,o);if(f&&a.from<a.to){let c=Ut(a);if(c&&(t>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return Oo(n,e,t,a,c,f,o)}}return No(n,e,t,s,l.type,i,o)}function Oo(n,e,t,r,i,o,s){let l=r.parent,a={from:i.from,to:i.to},f=0,c=l==null?void 0:l.cursor();if(c&&(t<0?c.childBefore(r.from):c.childAfter(r.to)))do if(t<0?c.to<=r.from:c.from>=r.to){if(f==0&&o.indexOf(c.type.name)>-1&&c.from<c.to){let h=Ut(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(Wt(c.type,t,s))f++;else if(Wt(c.type,-t,s)){if(f==0){let h=Ut(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}f--}}while(t<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function No(n,e,t,r,i,o,s){let l=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),a=s.indexOf(l);if(a<0||a%2==0!=t>0)return null;let f={from:t<0?e-1:e,to:t>0?e+1:e},c=n.doc.iterRange(e,t>0?n.doc.length:0),h=0;for(let d=0;!c.next().done&&d<=o;){let p=c.value;t<0&&(d+=p.length);let g=e+d*t;for(let k=t>0?0:p.length-1,O=t>0?p.length:-1;k!=O;k+=t){let I=s.indexOf(p[k]);if(!(I<0||r.resolveInner(g+k,1).type!=i))if(I%2==0==t>0)h++;else{if(h==1)return{start:f,end:{from:g+k,to:g+k+1},matched:I>>1==a>>1};h--}}t>0&&(d+=p.length)}return c.done?{start:f,matched:!1}:null}const Do=Object.create(null),On=[V.none],Nn=[],Dn=Object.create(null),Po=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Po[n]=Lo(Do,e);function Ot(n,e){Nn.indexOf(n)>-1||(Nn.push(n),console.warn(e))}function Lo(n,e){let t=[];for(let l of e.split(" ")){let a=[];for(let f of l.split(".")){let c=n[f]||u[f];c?typeof c=="function"?a.length?a=a.map(c):Ot(f,`Modifier ${f} used at start of tag`):a.length?Ot(f,`Tag ${f} used as modifier`):a=Array.isArray(c)?c:[c]:Ot(f,`Unknown highlighting tag ${f}`)}for(let f of a)t.push(f)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(l=>l.id),o=Dn[i];if(o)return o.id;let s=Dn[i]=V.define({id:On.length,name:r,props:[Wi({[r]:t})]});return On.push(s),s.id}ot.RTL,ot.LTR;class Eo{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[]}tokenBefore(e){let t=_(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),o=i.search(vr(e,!1));return o<0?null:{from:r+o,to:this.pos,text:i.slice(o)}}get aborted(){return this.abortListeners==null}addEventListener(e,t){e=="abort"&&this.abortListeners&&this.abortListeners.push(t)}}function Pn(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Ro(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let o=1;o<i.length;o++)t[i[o]]=!0}let r=Pn(e)+Pn(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Fo(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:Ro(e);return i=>{let o=i.matchBefore(r);return o||i.explicit?{from:o?o.from:i.pos,options:e,validFor:t}:null}}function ba(n,e){return t=>{for(let r=_(t.state).resolveInner(t.pos,-1);r;r=r.parent){if(n.indexOf(r.name)>-1)return null;if(r.type.isTop)break}return e(t)}}class Ln{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}}function Oe(n){return n.selection.main.from}function vr(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",o=r[r.length-1]!="$";return!i&&!o?n:new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}const rn=Yt.define();function zo(n,e,t,r){let{main:i}=n.selection,o=t-i.from,s=r-i.from;return Object.assign(Object.assign({},n.changeByRange(l=>l!=i&&t!=r&&n.sliceDoc(l.from+o,l.from+s)!=n.sliceDoc(t,r)?{range:l}:{changes:{from:l.from+o,to:r==i.from?l.to:l.from+s,insert:e},range:w.cursor(l.from+o+e.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}const En=new WeakMap;function _o(n){if(!Array.isArray(n))return n;let e=En.get(n);return e||En.set(n,e=Fo(n)),e}const Cr=G.define(),on=G.define();class jo{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=Q(e,t),i=me(r);this.chars.push(r);let o=e.slice(t,t+i),s=o.toUpperCase();this.folded.push(Q(s==o?o.toLowerCase():s,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:o,byWord:s}=this;if(t.length==1){let x=Q(e,0),A=me(x),P=A==e.length?0:-100;if(x!=t[0])if(x==r[0])P+=-200;else return null;return this.ret(P,[0,A])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,f=0;if(l<0){for(let x=0,A=Math.min(e.length,200);x<A&&f<a;){let P=Q(e,x);(P==t[f]||P==r[f])&&(i[f++]=x),x+=me(P)}if(f<a)return null}let c=0,h=0,d=!1,p=0,g=-1,k=-1,O=/[a-z]/.test(e),I=!0;for(let x=0,A=Math.min(e.length,200),P=0;x<A&&h<a;){let b=Q(e,x);l<0&&(c<a&&b==t[c]&&(o[c++]=x),p<a&&(b==t[p]||b==r[p]?(p==0&&(g=x),k=x+1,p++):p=0));let B,y=b<255?b>=48&&b<=57||b>=97&&b<=122?2:b>=65&&b<=90?1:0:(B=Zn(b))!=B.toLowerCase()?1:B!=B.toUpperCase()?2:0;(!x||y==1&&O||P==0&&y!=0)&&(t[h]==b||r[h]==b&&(d=!0)?s[h++]=x:s.length&&(I=!1)),P=y,x+=me(b)}return h==a&&s[0]==0&&I?this.result(-100+(d?-200:0),s,e):p==a&&g==0?this.ret(-200-e.length+(k==e.length?0:-100),[0,k]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):p==a?this.ret(-900-e.length,[g,k]):h==a?this.result(-100+(d?-200:0)+-700+(I?0:-1100),s,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],o=0;for(let s of t){let l=s+(this.astral?me(Q(r,s)):1);o&&i[o-1]==s?i[o-1]=l:(i[o++]=s,i[o++]=l)}return this.ret(e-r.length,i)}}class Ho{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}}const se=$.define({combine(n){return mt(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Wo,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>Rn(e(r),t(r)),optionClass:(e,t)=>r=>Rn(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function Rn(n,e){return n?e?n+" "+e:n:e}function Wo(n,e,t,r,i,o){let s=n.textDirection==ot.RTL,l=s,a=!1,f="top",c,h,d=e.left-i.left,p=i.right-e.right,g=r.right-r.left,k=r.bottom-r.top;if(l&&d<Math.min(g,p)?l=!1:!l&&p<Math.min(g,d)&&(l=!0),g<=(l?d:p))c=Math.max(i.top,Math.min(t.top,i.bottom-k))-e.top,h=Math.min(400,l?d:p);else{a=!0,h=Math.min(400,(s?e.right:i.right-e.left)-30);let x=i.bottom-e.bottom;x>=k||x>e.top?c=t.bottom-e.top:(f="bottom",c=e.bottom-t.top)}let O=(e.bottom-e.top)/o.offsetHeight,I=(e.right-e.left)/o.offsetWidth;return{style:`${f}: ${c/O}px; max-width: ${h/I}px`,class:"cm-completionInfo-"+(a?s?"left-narrow":"right-narrow":l?"left":"right")}}function Uo(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,o){let s=document.createElement("span");s.className="cm-completionLabel";let l=t.displayLabel||t.label,a=0;for(let f=0;f<o.length;){let c=o[f++],h=o[f++];c>a&&s.appendChild(document.createTextNode(l.slice(a,c)));let d=s.appendChild(document.createElement("span"));d.appendChild(document.createTextNode(l.slice(c,h))),d.className="cm-completionMatchedText",a=h}return a<l.length&&s.appendChild(document.createTextNode(l.slice(a))),s},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function Nt(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}class Vo{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:o,selected:s}=i.open,l=e.state.facet(se);this.optionContent=Uo(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=Nt(o.length,s,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:f}=e.state.field(t).open;for(let c=a.target,h;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(h=/-(\d+)$/.exec(c.id))&&+h[1]<f.length){this.applyCompletion(e,f[+h[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let f=e.state.field(this.stateField,!1);f&&f.tooltip&&e.state.facet(se).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:on.of(null)})}),this.showOptions(o,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:o,selected:s,disabled:l}=r.open;(!i.open||i.open.options!=o)&&(this.range=Nt(o.length,s,e.state.facet(se).maxRenderedOptions),this.showOptions(o,r.id)),this.updateSel(),l!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Nt(t.options.length,t.selected,this.view.state.facet(se).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let o=typeof i=="string"?document.createTextNode(i):i(r);if(!o)return;"then"in o?o.then(s=>{s&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(s,r)}).catch(s=>Kn(this.view.state,s,"completion info")):this.addInfoPane(o,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:o}=e;r.appendChild(i),this.infoDestroy=o||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&Go(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),o=this.space;if(!o){let s=this.dom.ownerDocument.defaultView||window;o={left:0,top:0,right:s.innerWidth,bottom:s.innerHeight}}return i.top>Math.min(o.bottom,t.bottom)-10||i.bottom<Math.max(o.top,t.top)+10?null:this.view.state.facet(se).positionInfo(this.view,t,i,r,o,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions"));let o=null;for(let s=r.from;s<r.to;s++){let{completion:l,match:a}=e[s],{section:f}=l;if(f){let d=typeof f=="string"?f:f.name;if(d!=o&&(s>r.from||r.from==0))if(o=d,typeof f!="string"&&f.header)i.appendChild(f.header(f));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=d}}const c=i.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let h=this.optionClass(l);h&&(c.className=h);for(let d of this.optionContent){let p=d(l,this.view.state,this.view,a);p&&c.appendChild(p)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function $o(n,e){return t=>new Vo(t,n,e)}function Go(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function Fn(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function qo(n,e){let t=[],r=null,i=f=>{t.push(f);let{section:c}=f.completion;if(c){r||(r=[]);let h=typeof c=="string"?c:c.name;r.some(d=>d.name==h)||r.push(typeof c=="string"?{name:h}:c)}},o=e.facet(se);for(let f of n)if(f.hasResult()){let c=f.result.getMatch;if(f.result.filter===!1)for(let h of f.result.options)i(new Ln(h,f.source,c?c(h):[],1e9-t.length));else{let h=e.sliceDoc(f.from,f.to),d,p=o.filterStrict?new Ho(h):new jo(h);for(let g of f.result.options)if(d=p.match(g.label)){let k=g.displayLabel?c?c(g,d.matched):[]:d.matched;i(new Ln(g,f.source,k,d.score+(g.boost||0)))}}}if(r){let f=Object.create(null),c=0,h=(d,p)=>{var g,k;return((g=d.rank)!==null&&g!==void 0?g:1e9)-((k=p.rank)!==null&&k!==void 0?k:1e9)||(d.name<p.name?-1:1)};for(let d of r.sort(h))c-=1e5,f[d.name]=c;for(let d of t){let{section:p}=d.completion;p&&(d.score+=f[typeof p=="string"?p:p.name])}}let s=[],l=null,a=o.compareCompletions;for(let f of t.sort((c,h)=>h.score-c.score||a(c.completion,h.completion))){let c=f.completion;!l||l.label!=c.label||l.detail!=c.detail||l.type!=null&&c.type!=null&&l.type!=c.type||l.apply!=c.apply||l.boost!=c.boost?s.push(f):Fn(f.completion)>Fn(l)&&(s[s.length-1]=f),l=f.completion}return s}class Te{constructor(e,t,r,i,o,s){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=o,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Te(this.options,zn(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,o){let s=qo(e,t);if(!s.length)return i&&e.some(a=>a.state==1)?new Te(i.options,i.attrs,i.tooltip,i.timestamp,i.selected,!0):null;let l=t.facet(se).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let a=i.options[i.selected].completion;for(let f=0;f<s.length;f++)if(s[f].completion==a){l=f;break}}return new Te(s,zn(r,l),{pos:e.reduce((a,f)=>f.hasResult()?Math.min(a,f.from):a,1e8),create:ts,above:o.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new Te(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class dt{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new dt(Yo,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(se),o=(r.override||t.languageDataAt("autocomplete",Oe(t)).map(_o)).map(l=>(this.active.find(f=>f.source==l)||new J(l,this.active.some(f=>f.state!=0)?1:0)).update(e,r));o.length==this.active.length&&o.every((l,a)=>l==this.active[a])&&(o=this.active);let s=this.open;s&&e.docChanged&&(s=s.map(e.changes)),e.selection||o.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Jo(o,this.active)?s=Te.build(o,t,this.id,s,r):s&&s.disabled&&!o.some(l=>l.state==1)&&(s=null),!s&&o.every(l=>l.state!=1)&&o.some(l=>l.hasResult())&&(o=o.map(l=>l.hasResult()?new J(l.source,0):l));for(let l of e.effects)l.is(Sr)&&(s=s&&s.setSelected(l.value,this.id));return o==this.active&&s==this.open?this:new dt(o,this.id,s)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Ko:Xo}}function Jo(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult;)t++;for(;r<e.length&&!e[r].hasResult;)r++;let i=t==n.length,o=r==e.length;if(i||o)return i==o;if(n[t++].result!=e[r++].result)return!1}}const Ko={"aria-autocomplete":"list"},Xo={};function zn(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}const Yo=[];function Qo(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(rn);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}class J{constructor(e,t,r=-1){this.source=e,this.state=t,this.explicitPos=r}hasResult(){return!1}update(e,t){let r=Qo(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new J(i.source,0)),r&4&&i.state==0&&(i=new J(this.source,1)),i=i.updateFor(e,r);for(let o of e.effects)if(o.is(Cr))i=new J(i.source,1,o.value?Oe(e.state):-1);else if(o.is(on))i=new J(i.source,0);else if(o.is(es))for(let s of o.value)s.source==i.source&&(i=s);return i}updateFor(e,t){return this.map(e.changes)}map(e){return e.empty||this.explicitPos<0?this:new J(this.source,this.state,e.mapPos(this.explicitPos))}touches(e){return e.changes.touchesRange(Oe(e.state))}}class _e extends J{constructor(e,t,r,i,o){super(e,2,t),this.result=r,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let o=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),l=Oe(e.state);if((this.explicitPos<0?l<=o:l<this.from)||l>s||!i||t&2&&Oe(e.startState)==this.from)return new J(this.source,t&4?1:0);let a=this.explicitPos<0?-1:e.changes.mapPos(this.explicitPos);return Zo(i.validFor,e.state,o,s)?new _e(this.source,a,i,o,s):i.update&&(i=i.update(i,o,s,new Eo(e.state,l,a>=0)))?new _e(this.source,a,i,i.from,(r=i.to)!==null&&r!==void 0?r:Oe(e.state)):new J(this.source,1,a)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new _e(this.source,this.explicitPos<0?-1:e.mapPos(this.explicitPos),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new J(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function Zo(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):vr(n,!0).test(i)}const es=G.define({map(n,e){return n.map(t=>t.map(e))}}),Sr=G.define(),De=Ae.define({create(){return dt.start()},update(n,e){return n.update(e)},provide:n=>[mi.from(n,e=>e.tooltip),R.contentAttributes.from(n,e=>e.attrs)]});function Ar(n,e){const t=e.completion.apply||e.completion.label;let r=n.state.field(De).active.find(i=>i.source==e.source);return r instanceof _e?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},zo(n.state,t,r.from,r.to)),{annotations:rn.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}const ts=$o(De,Ar);function tt(n,e="option"){return t=>{let r=t.state.field(De,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(se).interactionDelay)return!1;let i=1,o;e=="page"&&(o=pi(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(o.dom.offsetHeight/o.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,l=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:s-1;return l<0?l=e=="page"?0:s-1:l>=s&&(l=e=="page"?s-1:0),t.dispatch({effects:Sr.of(l)}),!0}}const ns=n=>{let e=n.state.field(De,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(se).interactionDelay?!1:Ar(n,e.open.options[e.open.selected])},rs=n=>n.state.field(De,!1)?(n.dispatch({effects:Cr.of(!0)}),!0):!1,is=n=>{let e=n.state.field(De,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:on.of(null)}),!0)},os=R.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ss{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}}class sn{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,Rt.TrackDel),r=e.mapPos(this.to,1,Rt.TrackDel);return t==null||r==null?null:new sn(this.field,t,r)}}class ln{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],o=e.doc.lineAt(t),s=/^\s*/.exec(o.text)[0];for(let a of this.lines){if(r.length){let f=s,c=/^\t*/.exec(a)[0].length;for(let h=0;h<c;h++)f+=e.facet(yt);i.push(t+f.length-c),a=f+a.slice(c)}r.push(a),t+=a.length+1}let l=this.fieldPositions.map(a=>new sn(a.field,i[a.line]+a.from,i[a.line]+a.to));return{text:r,ranges:l}}static parse(e){let t=[],r=[],i=[],o;for(let s of e.split(/\r\n?|\n/)){for(;o=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(s);){let l=o[1]?+o[1]:null,a=o[2]||o[3]||"",f=-1,c=a.replace(/\\[{}]/g,h=>h[1]);for(let h=0;h<t.length;h++)(l!=null?t[h].seq==l:c&&t[h].name==c)&&(f=h);if(f<0){let h=0;for(;h<t.length&&(l==null||t[h].seq!=null&&t[h].seq<l);)h++;t.splice(h,0,{seq:l,name:c}),f=h;for(let d of i)d.field>=f&&d.field++}i.push(new ss(f,r.length,o.index,o.index+c.length)),s=s.slice(0,o.index)+a+s.slice(o.index+o[0].length)}s=s.replace(/\\([{}])/g,(l,a,f)=>{for(let c of i)c.line==r.length&&c.from>f&&(c.from--,c.to--);return a}),r.push(s)}return new ln(r,i)}}let ls=z.widget({widget:new class extends Kt{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),as=z.mark({class:"cm-snippetField"});class Pe{constructor(e,t){this.ranges=e,this.active=t,this.deco=z.set(e.map(r=>(r.from==r.to?ls:as).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new Pe(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}}const Je=G.define({map(n,e){return n&&n.map(e)}}),fs=G.define(),Ve=Ae.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Je))return t.value;if(t.is(fs)&&n)return new Pe(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>R.decorations.from(n,e=>e?e.deco:z.none)});function an(n,e){return w.create(n.filter(t=>t.field==e).map(t=>w.range(t.from,t.to)))}function cs(n){let e=ln.parse(n);return(t,r,i,o)=>{let{text:s,ranges:l}=e.instantiate(t.state,i),a={changes:{from:i,to:o,insert:Xt.of(s)},scrollIntoView:!0,annotations:r?[rn.of(r),rt.userEvent.of("input.complete")]:void 0};if(l.length&&(a.selection=an(l,0)),l.some(f=>f.field>0)){let f=new Pe(l,0),c=a.effects=[Je.of(f)];t.state.field(Ve,!1)===void 0&&c.push(G.appendConfig.of([Ve,ms,gs,os]))}t.dispatch(t.state.update(a))}}function Br(n){return({state:e,dispatch:t})=>{let r=e.field(Ve,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,o=n>0&&!r.ranges.some(s=>s.field==i+n);return t(e.update({selection:an(r.ranges,i),effects:Je.of(o?null:new Pe(r.ranges,i)),scrollIntoView:!0})),!0}}const us=({state:n,dispatch:e})=>n.field(Ve,!1)?(e(n.update({effects:Je.of(null)})),!0):!1,hs=Br(1),ds=Br(-1),ps=[{key:"Tab",run:hs,shift:ds},{key:"Escape",run:us}],_n=$.define({combine(n){return n.length?n[0]:ps}}),ms=Qn.highest(hi.compute([_n],n=>n.facet(_n)));function ka(n,e){return Object.assign(Object.assign({},e),{apply:cs(n)})}const gs=R.domEventHandlers({mousedown(n,e){let t=e.state.field(Ve,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(o=>o.from<=r&&o.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:an(t.ranges,i.field),effects:Je.of(t.ranges.some(o=>o.field>i.field)?new Pe(t.ranges,i.field):null),scrollIntoView:!0}),!0)}}),$e={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ce=G.define({map(n,e){let t=e.mapPos(n,-1,Rt.TrackAfter);return t??void 0}}),fn=new class extends di{};fn.startSide=1;fn.endSide=-1;const Mr=Ae.define({create(){return Xn.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is(Ce)&&(n=n.update({add:[fn.range(t.value,t.value+1)]}));return n}});function xa(){return[bs,Mr]}const Dt="()[]{}<>";function Ir(n){for(let e=0;e<Dt.length;e+=2)if(Dt.charCodeAt(e)==n)return Dt.charAt(e+1);return Zn(n<128?n:n+1)}function Tr(n,e){return n.languageDataAt("closeBrackets",e)[0]||$e}const ys=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),bs=R.inputHandler.of((n,e,t,r)=>{if((ys?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&me(Q(r,0))==1||e!=i.from||t!=i.to)return!1;let o=xs(n.state,r);return o?(n.dispatch(o),!0):!1}),ks=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let r=Tr(n,n.selection.main.head).brackets||$e.brackets,i=null,o=n.changeByRange(s=>{if(s.empty){let l=ws(n.doc,s.head);for(let a of r)if(a==l&&xt(n.doc,s.head)==Ir(Q(a,0)))return{changes:{from:s.head-a.length,to:s.head+a.length},range:w.cursor(s.head-a.length)}}return{range:i=s}});return i||e(n.update(o,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},wa=[{key:"Backspace",run:ks}];function xs(n,e){let t=Tr(n,n.selection.main.head),r=t.brackets||$e.brackets;for(let i of r){let o=Ir(Q(i,0));if(e==i)return o==i?Ss(n,i,r.indexOf(i+i+i)>-1,t):vs(n,i,o,t.before||$e.before);if(e==o&&Or(n,n.selection.main.from))return Cs(n,i,o)}return null}function Or(n,e){let t=!1;return n.field(Mr).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function xt(n,e){let t=n.sliceString(e,e+2);return t.slice(0,me(Q(t,0)))}function ws(n,e){let t=n.sliceString(e-2,e);return me(Q(t,0))==t.length?t:t.slice(1)}function vs(n,e,t,r){let i=null,o=n.changeByRange(s=>{if(!s.empty)return{changes:[{insert:e,from:s.from},{insert:t,from:s.to}],effects:Ce.of(s.to+e.length),range:w.range(s.anchor+e.length,s.head+e.length)};let l=xt(n.doc,s.head);return!l||/\s/.test(l)||r.indexOf(l)>-1?{changes:{insert:e+t,from:s.head},effects:Ce.of(s.head+e.length),range:w.cursor(s.head+e.length)}:{range:i=s}});return i?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Cs(n,e,t){let r=null,i=n.changeByRange(o=>o.empty&&xt(n.doc,o.head)==t?{changes:{from:o.head,to:o.head+t.length,insert:t},range:w.cursor(o.head+t.length)}:r={range:o});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function Ss(n,e,t,r){let i=r.stringPrefixes||$e.stringPrefixes,o=null,s=n.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Ce.of(l.to+e.length),range:w.range(l.anchor+e.length,l.head+e.length)};let a=l.head,f=xt(n.doc,a),c;if(f==e){if(jn(n,a))return{changes:{insert:e+e,from:a},effects:Ce.of(a+e.length),range:w.cursor(a+e.length)};if(Or(n,a)){let d=t&&n.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+d.length,insert:d},range:w.cursor(a+d.length)}}}else{if(t&&n.sliceDoc(a-2*e.length,a)==e+e&&(c=Hn(n,a-2*e.length,i))>-1&&jn(n,c))return{changes:{insert:e+e+e+e,from:a},effects:Ce.of(a+e.length),range:w.cursor(a+e.length)};if(n.charCategorizer(a)(f)!=Et.Word&&Hn(n,a,i)>-1&&!As(n,a,e,i))return{changes:{insert:e+e,from:a},effects:Ce.of(a+e.length),range:w.cursor(a+e.length)}}return{range:o=l}});return o?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function jn(n,e){let t=_(n).resolveInner(e+1);return t.parent&&t.from==e}function As(n,e,t,r){let i=_(n).resolveInner(e,-1),o=r.reduce((s,l)=>Math.max(s,l.length),0);for(let s=0;s<5;s++){let l=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+o)),a=l.indexOf(t);if(!a||a>-1&&r.indexOf(l.slice(0,a))>-1){let c=i.firstChild;for(;c&&c.from==i.from&&c.to-c.from>t.length+a;){if(n.sliceDoc(c.to-t.length,c.to)==t)return!1;c=c.firstChild}return!0}let f=i.to==e&&i.parent;if(!f)break;i=f}return!1}function Hn(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=Et.Word)return e;for(let i of t){let o=e-i.length;if(n.sliceDoc(o,e)==i&&r(n.sliceDoc(o-1,o))!=Et.Word)return o}return-1}const va=[{key:"Ctrl-Space",run:rs},{key:"Escape",run:is},{key:"ArrowDown",run:tt(!0)},{key:"ArrowUp",run:tt(!1)},{key:"PageDown",run:tt(!0,"page")},{key:"PageUp",run:tt(!1,"page")},{key:"Enter",run:ns}],Bs=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=un(n.state,t.from);return r.line?Ms(n):r.block?Ts(n):!1};function cn(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}const Ms=cn(Ds,0),Is=cn(Nr,0),Ts=cn((n,e)=>Nr(n,e,Ns(e)),0);function un(n,e){let t=n.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const Fe=50;function Os(n,{open:e,close:t},r,i){let o=n.sliceDoc(r-Fe,r),s=n.sliceDoc(i,i+Fe),l=/\s*$/.exec(o)[0].length,a=/^\s*/.exec(s)[0].length,f=o.length-l;if(o.slice(f-e.length,f)==e&&s.slice(a,a+t.length)==t)return{open:{pos:r-l,margin:l&&1},close:{pos:i+a,margin:a&&1}};let c,h;i-r<=2*Fe?c=h=n.sliceDoc(r,i):(c=n.sliceDoc(r,r+Fe),h=n.sliceDoc(i-Fe,i));let d=/^\s*/.exec(c)[0].length,p=/\s*$/.exec(h)[0].length,g=h.length-p-t.length;return c.slice(d,d+e.length)==e&&h.slice(g,g+t.length)==t?{open:{pos:r+d+e.length,margin:/\s/.test(c.charAt(d+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(h.charAt(g-1))?1:0}}:null}function Ns(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to),o=e.length-1;o>=0&&e[o].to>r.from?e[o].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function Nr(n,e,t=e.selection.ranges){let r=t.map(o=>un(e,o.from).block);if(!r.every(o=>o))return null;let i=t.map((o,s)=>Os(e,r[s],o.from,o.to));if(n!=2&&!i.every(o=>o))return{changes:e.changes(t.map((o,s)=>i[s]?[]:[{from:o.from,insert:r[s].open+" "},{from:o.to,insert:" "+r[s].close}]))};if(n!=1&&i.some(o=>o)){let o=[];for(let s=0,l;s<i.length;s++)if(l=i[s]){let a=r[s],{open:f,close:c}=l;o.push({from:f.pos-a.open.length,to:f.pos+f.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:o}}return null}function Ds(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of t){let l=r.length,a=1e9,f=un(e,o).line;if(f){for(let c=o;c<=s;){let h=e.doc.lineAt(c);if(h.from>i&&(o==s||s>h.from)){i=h.from;let d=/^\s*/.exec(h.text)[0].length,p=d==h.length,g=h.text.slice(d,d+f.length)==f?d:-1;d<h.text.length&&d<a&&(a=d),r.push({line:h,comment:g,token:f,indent:d,empty:p,single:!1})}c=h.to+1}if(a<1e9)for(let c=l;c<r.length;c++)r[c].indent<r[c].line.text.length&&(r[c].indent=a);r.length==l+1&&(r[l].single=!0)}}if(n!=2&&r.some(o=>o.comment<0&&(!o.empty||o.single))){let o=[];for(let{line:l,token:a,indent:f,empty:c,single:h}of r)(h||!c)&&o.push({from:l.from+f,insert:a+" "});let s=e.changes(o);return{changes:s,selection:e.selection.map(s,1)}}else if(n!=1&&r.some(o=>o.comment>=0)){let o=[];for(let{line:s,comment:l,token:a}of r)if(l>=0){let f=s.from+l,c=f+a.length;s.text[c-s.from]==" "&&c++,o.push({from:f,to:c})}return{changes:o}}return null}const Vt=Yt.define(),Ps=Yt.define(),Ls=$.define(),Dr=$.define({combine(n){return mt(n,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(r,i)=>e(r,i)||t(r,i)})}}),Pr=Ae.define({create(){return fe.empty},update(n,e){let t=e.state.facet(Dr),r=e.annotation(Vt);if(r){let a=U.fromTransaction(e,r.selection),f=r.side,c=f==0?n.undone:n.done;return a?c=pt(c,c.length,t.minDepth,a):c=Rr(c,e.startState.selection),new fe(f==0?r.rest:c,f==0?c:r.rest)}let i=e.annotation(Ps);if((i=="full"||i=="before")&&(n=n.isolate()),e.annotation(rt.addToHistory)===!1)return e.changes.empty?n:n.addMapping(e.changes.desc);let o=U.fromTransaction(e),s=e.annotation(rt.time),l=e.annotation(rt.userEvent);return o?n=n.addChanges(o,s,l,t,e):e.selection&&(n=n.addSelection(e.startState.selection,s,l,t.newGroupDelay)),(i=="full"||i=="after")&&(n=n.isolate()),n},toJSON(n){return{done:n.done.map(e=>e.toJSON()),undone:n.undone.map(e=>e.toJSON())}},fromJSON(n){return new fe(n.done.map(U.fromJSON),n.undone.map(U.fromJSON))}});function Ca(n={}){return[Pr,Dr.of(n),R.domEventHandlers({beforeinput(e,t){let r=e.inputType=="historyUndo"?Lr:e.inputType=="historyRedo"?$t:null;return r?(e.preventDefault(),r(t)):!1}})]}function wt(n,e){return function({state:t,dispatch:r}){if(!e&&t.readOnly)return!1;let i=t.field(Pr,!1);if(!i)return!1;let o=i.pop(n,t,e);return o?(r(o),!0):!1}}const Lr=wt(0,!1),$t=wt(1,!1),Es=wt(0,!0),Rs=wt(1,!0);class U{constructor(e,t,r,i,o){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=o}setSelAfter(e){return new U(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new U(e.changes&&gi.fromJSON(e.changes),[],e.mapped&&yi.fromJSON(e.mapped),e.startSelection&&w.fromJSON(e.startSelection),e.selectionsAfter.map(w.fromJSON))}static fromTransaction(e,t){let r=X;for(let i of e.startState.facet(Ls)){let o=i(e);o.length&&(r=r.concat(o))}return!r.length&&e.changes.empty?null:new U(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,X)}static selection(e){return new U(void 0,X,void 0,void 0,e)}}function pt(n,e,t,r){let i=e+1>t+20?e-t-1:0,o=n.slice(i,e);return o.push(r),o}function Fs(n,e){let t=[],r=!1;return n.iterChangedRanges((i,o)=>t.push(i,o)),e.iterChangedRanges((i,o,s,l)=>{for(let a=0;a<t.length;){let f=t[a++],c=t[a++];l>=f&&s<=c&&(r=!0)}}),r}function zs(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function Er(n,e){return n.length?e.length?n.concat(e):n:e}const X=[],_s=200;function Rr(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-_s));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),pt(n,n.length-1,1e9,t.setSelAfter(r)))}else return[U.selection([e])]}function js(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Pt(n,e){if(!n.length)return n;let t=n.length,r=X;for(;t;){let i=Hs(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let o=n.slice(0,t);return o[t-1]=i,o}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[U.selection(r)]:X}function Hs(n,e,t){let r=Er(n.selectionsAfter.length?n.selectionsAfter.map(l=>l.map(e)):X,t);if(!n.changes)return U.selection(r);let i=n.changes.map(e),o=e.mapDesc(n.changes,!0),s=n.mapped?n.mapped.composeDesc(o):o;return new U(i,G.mapEffects(n.effects,e),s,n.startSelection.map(o),r)}const Ws=/^(input\.type|delete)($|\.)/;class fe{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new fe(this.done,this.undone):this}addChanges(e,t,r,i,o){let s=this.done,l=s[s.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!r||Ws.test(r))&&(!l.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(o,Fs(l.changes,e.changes))||r=="input.type.compose")?s=pt(s,s.length-1,i.minDepth,new U(e.changes.compose(l.changes),Er(e.effects,l.effects),l.mapped,l.startSelection,X)):s=pt(s,s.length,i.minDepth,e),new fe(s,X,t,r)}addSelection(e,t,r,i){let o=this.done.length?this.done[this.done.length-1].selectionsAfter:X;return o.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&zs(o[o.length-1],e)?this:new fe(Rr(this.done,e),this.undone,t,r)}addMapping(e){return new fe(Pt(this.done,e),Pt(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let o=i[i.length-1],s=o.selectionsAfter[0]||t.selection;if(r&&o.selectionsAfter.length)return t.update({selection:o.selectionsAfter[o.selectionsAfter.length-1],annotations:Vt.of({side:e,rest:js(i),selection:s}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(o.changes){let l=i.length==1?X:i.slice(0,i.length-1);return o.mapped&&(l=Pt(l,o.mapped)),t.update({changes:o.changes,selection:o.startSelection,effects:o.effects,annotations:Vt.of({side:e,rest:l,selection:s}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}fe.empty=new fe(X,X);const Sa=[{key:"Mod-z",run:Lr,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:$t,preventDefault:!0},{linux:"Ctrl-Shift-z",run:$t,preventDefault:!0},{key:"Mod-u",run:Es,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Rs,preventDefault:!0}];function Le(n,e){return w.create(n.ranges.map(e),n.mainIndex)}function ce(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ee({state:n,dispatch:e},t){let r=Le(n.selection,t);return r.eq(n.selection,!0)?!1:(e(ce(n,r)),!0)}function vt(n,e){return w.cursor(e?n.to:n.from)}function Fr(n,e){return ee(n,t=>t.empty?n.moveByChar(t,e):vt(t,e))}function H(n){return n.textDirectionAt(n.state.selection.main.head)==ot.LTR}const zr=n=>Fr(n,!H(n)),_r=n=>Fr(n,H(n));function jr(n,e){return ee(n,t=>t.empty?n.moveByGroup(t,e):vt(t,e))}const Us=n=>jr(n,!H(n)),Vs=n=>jr(n,H(n));function $s(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Ct(n,e,t){let r=_(n).resolveInner(e.head),i=t?v.closedBy:v.openedBy;for(let a=e.head;;){let f=t?r.childAfter(a):r.childBefore(a);if(!f)break;$s(n,f,i)?r=f:a=t?f.to:f.from}let o=r.type.prop(i),s,l;return o&&(s=t?ae(n,r.from,1):ae(n,r.to,-1))&&s.matched?l=t?s.end.to:s.end.from:l=t?r.to:r.from,w.cursor(l,t?-1:1)}const Gs=n=>ee(n,e=>Ct(n.state,e,!H(n))),qs=n=>ee(n,e=>Ct(n.state,e,H(n)));function Hr(n,e){return ee(n,t=>{if(!t.empty)return vt(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const Wr=n=>Hr(n,!1),Ur=n=>Hr(n,!0);function Vr(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let o of n.state.facet(R.scrollMargins)){let s=o(n);s!=null&&s.top&&(t=Math.max(s==null?void 0:s.top,t)),s!=null&&s.bottom&&(r=Math.max(s==null?void 0:s.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function $r(n,e){let t=Vr(n),{state:r}=n,i=Le(r.selection,s=>s.empty?n.moveVertically(s,e,t.height):vt(s,e));if(i.eq(r.selection))return!1;let o;if(t.selfScroll){let s=n.coordsAtPos(r.selection.main.head),l=n.scrollDOM.getBoundingClientRect(),a=l.top+t.marginTop,f=l.bottom-t.marginBottom;s&&s.top>a&&s.bottom<f&&(o=R.scrollIntoView(i.main.head,{y:"start",yMargin:s.top-a}))}return n.dispatch(ce(r,i),{effects:o}),!0}const Wn=n=>$r(n,!1),Gt=n=>$r(n,!0);function be(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let o=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;o&&e.head!=r.from+o&&(i=w.cursor(r.from+o))}return i}const Js=n=>ee(n,e=>be(n,e,!0)),Ks=n=>ee(n,e=>be(n,e,!1)),Xs=n=>ee(n,e=>be(n,e,!H(n))),Ys=n=>ee(n,e=>be(n,e,H(n))),Qs=n=>ee(n,e=>w.cursor(n.lineBlockAt(e.head).from,1)),Zs=n=>ee(n,e=>w.cursor(n.lineBlockAt(e.head).to,-1));function el(n,e,t){let r=!1,i=Le(n.selection,o=>{let s=ae(n,o.head,-1)||ae(n,o.head,1)||o.head>0&&ae(n,o.head-1,1)||o.head<n.doc.length&&ae(n,o.head+1,-1);if(!s||!s.end)return o;r=!0;let l=s.start.from==o.head?s.end.to:s.end.from;return w.cursor(l)});return r?(e(ce(n,i)),!0):!1}const tl=({state:n,dispatch:e})=>el(n,e);function Y(n,e){let t=Le(n.state.selection,r=>{let i=e(r);return w.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(ce(n.state,t)),!0)}function Gr(n,e){return Y(n,t=>n.moveByChar(t,e))}const qr=n=>Gr(n,!H(n)),Jr=n=>Gr(n,H(n));function Kr(n,e){return Y(n,t=>n.moveByGroup(t,e))}const nl=n=>Kr(n,!H(n)),rl=n=>Kr(n,H(n)),il=n=>Y(n,e=>Ct(n.state,e,!H(n))),ol=n=>Y(n,e=>Ct(n.state,e,H(n)));function Xr(n,e){return Y(n,t=>n.moveVertically(t,e))}const Yr=n=>Xr(n,!1),Qr=n=>Xr(n,!0);function Zr(n,e){return Y(n,t=>n.moveVertically(t,e,Vr(n).height))}const Un=n=>Zr(n,!1),Vn=n=>Zr(n,!0),sl=n=>Y(n,e=>be(n,e,!0)),ll=n=>Y(n,e=>be(n,e,!1)),al=n=>Y(n,e=>be(n,e,!H(n))),fl=n=>Y(n,e=>be(n,e,H(n))),cl=n=>Y(n,e=>w.cursor(n.lineBlockAt(e.head).from)),ul=n=>Y(n,e=>w.cursor(n.lineBlockAt(e.head).to)),$n=({state:n,dispatch:e})=>(e(ce(n,{anchor:0})),!0),Gn=({state:n,dispatch:e})=>(e(ce(n,{anchor:n.doc.length})),!0),qn=({state:n,dispatch:e})=>(e(ce(n,{anchor:n.selection.main.anchor,head:0})),!0),Jn=({state:n,dispatch:e})=>(e(ce(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),hl=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),dl=({state:n,dispatch:e})=>{let t=St(n).map(({from:r,to:i})=>w.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:w.create(t),userEvent:"select"})),!0},pl=({state:n,dispatch:e})=>{let t=Le(n.selection,r=>{var i;let o=_(n).resolveStack(r.from,1);for(let s=o;s;s=s.next){let{node:l}=s;if((l.from<r.from&&l.to>=r.to||l.to>r.to&&l.from<=r.from)&&(!((i=l.parent)===null||i===void 0)&&i.parent))return w.range(l.to,l.from)}return r});return e(ce(n,t)),!0},ml=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=w.create([t.main]):t.main.empty||(r=w.create([w.cursor(t.main.head)])),r?(e(ce(n,r)),!0):!1};function Ke(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(o=>{let{from:s,to:l}=o;if(s==l){let a=e(o);a<s?(t="delete.backward",a=nt(n,a,!1)):a>s&&(t="delete.forward",a=nt(n,a,!0)),s=Math.min(s,a),l=Math.max(l,a)}else s=nt(n,s,!1),l=nt(n,l,!0);return s==l?{range:o}:{changes:{from:s,to:l},range:w.cursor(s,s<o.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?R.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function nt(n,e,t){if(n instanceof R)for(let r of n.state.facet(R.atomicRanges).map(i=>i(n)))r.between(e,e,(i,o)=>{i<e&&o>e&&(e=t?o:i)});return e}const ei=(n,e,t)=>Ke(n,r=>{let i=r.from,{state:o}=n,s=o.doc.lineAt(i),l,a;if(t&&!e&&i>s.from&&i<s.from+200&&!/[^ \t]/.test(l=s.text.slice(0,i-s.from))){if(l[l.length-1]=="	")return i-1;let f=gt(l,o.tabSize),c=f%ct(o)||ct(o);for(let h=0;h<c&&l[l.length-1-h]==" ";h++)i--;a=i}else a=je(s.text,i-s.from,e,e)+s.from,a==i&&s.number!=(e?o.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(s.text.slice(a-s.from,i-s.from))&&(a=je(s.text,a-s.from,!1,!1)+s.from);return a}),qt=n=>ei(n,!1,!0),ti=n=>ei(n,!0,!1),ni=(n,e)=>Ke(n,t=>{let r=t.head,{state:i}=n,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let l=null;;){if(r==(e?o.to:o.from)){r==t.head&&o.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let a=je(o.text,r-o.from,e)+o.from,f=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(f);if(l!=null&&c!=l)break;(f!=" "||r!=t.head)&&(l=c),r=a}return r}),ri=n=>ni(n,!1),gl=n=>ni(n,!0),yl=n=>Ke(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),bl=n=>Ke(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),kl=n=>Ke(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),xl=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Xt.of(["",""])},range:w.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},wl=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,o=n.doc.lineAt(i),s=i==o.from?i-1:je(o.text,i-o.from,!1)+o.from,l=i==o.to?i+1:je(o.text,i-o.from,!0)+o.from;return{changes:{from:s,to:l,insert:n.doc.slice(i,l).append(n.doc.slice(s,i))},range:w.cursor(l)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function St(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),o=n.doc.lineAt(r.to);if(!r.empty&&r.to==o.from&&(o=n.doc.lineAt(r.to-1)),t>=i.number){let s=e[e.length-1];s.to=o.to,s.ranges.push(r)}else e.push({from:i.from,to:o.to,ranges:[r]});t=o.number+1}return e}function ii(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let o of St(n)){if(t?o.to==n.doc.length:o.from==0)continue;let s=n.doc.lineAt(t?o.to+1:o.from-1),l=s.length+1;if(t){r.push({from:o.to,to:s.to},{from:o.from,insert:s.text+n.lineBreak});for(let a of o.ranges)i.push(w.range(Math.min(n.doc.length,a.anchor+l),Math.min(n.doc.length,a.head+l)))}else{r.push({from:s.from,to:o.from},{from:o.to,insert:n.lineBreak+s.text});for(let a of o.ranges)i.push(w.range(a.anchor-l,a.head-l))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:w.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const vl=({state:n,dispatch:e})=>ii(n,e,!1),Cl=({state:n,dispatch:e})=>ii(n,e,!0);function oi(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of St(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Sl=({state:n,dispatch:e})=>oi(n,e,!1),Al=({state:n,dispatch:e})=>oi(n,e,!0),Bl=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(St(e).map(({from:i,to:o})=>(i>0?i--:o<e.doc.length&&o++,{from:i,to:o}))),r=Le(e.selection,i=>{let o;if(n.lineWrapping){let s=n.lineBlockAt(i.head),l=n.coordsAtPos(i.head,i.assoc||1);l&&(o=s.bottom+n.documentTop-l.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,o)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function Ml(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=_(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),o;return r&&i&&r.to<=e&&i.from>=e&&(o=r.type.prop(v.closedBy))&&o.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}const Il=si(!1),Tl=si(!0);function si(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:o,to:s}=i,l=e.doc.lineAt(o),a=!n&&o==s&&Ml(e,o);n&&(o=s=(s<=l.to?l:e.doc.lineAt(s)).to);let f=new bt(e,{simulateBreak:o,simulateDoubleBreak:!!a}),c=tn(f,o);for(c==null&&(c=gt(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));s<l.to&&/\s/.test(l.text[s-l.from]);)s++;a?{from:o,to:s}=a:o>l.from&&o<l.from+100&&!/\S/.test(l.text.slice(0,o))&&(o=l.from);let h=["",Ue(e,c)];return a&&h.push(Ue(e,f.lineIndent(l.from,-1))),{changes:{from:o,to:s,insert:Xt.of(h)},range:w.cursor(o+1+h[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function hn(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let s=r.from;s<=r.to;){let l=n.doc.lineAt(s);l.number>t&&(r.empty||r.to>l.from)&&(e(l,i,r),t=l.number),s=l.to+1}let o=n.changes(i);return{changes:i,range:w.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}})}const Ol=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new bt(n,{overrideIndentation:o=>{let s=t[o];return s??-1}}),i=hn(n,(o,s,l)=>{let a=tn(r,o.from);if(a==null)return;/\S/.test(o.text)||(a=0);let f=/^\s*/.exec(o.text)[0],c=Ue(n,a);(f!=c||l.from<o.from+f.length)&&(t[o.from]=a,s.push({from:o.from,to:o.from+f.length,insert:c}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},li=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(hn(n,(t,r)=>{r.push({from:t.from,insert:n.facet(yt)})}),{userEvent:"input.indent"})),!0),ai=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(hn(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let o=gt(i,n.tabSize),s=0,l=Ue(n,Math.max(0,o-ct(n)));for(;s<i.length&&s<l.length&&i.charCodeAt(s)==l.charCodeAt(s);)s++;r.push({from:t.from+s,to:t.from+i.length,insert:l.slice(s)})}),{userEvent:"delete.dedent"})),!0),Nl=n=>(n.setTabFocusMode(),!0),Dl=[{key:"Ctrl-b",run:zr,shift:qr,preventDefault:!0},{key:"Ctrl-f",run:_r,shift:Jr},{key:"Ctrl-p",run:Wr,shift:Yr},{key:"Ctrl-n",run:Ur,shift:Qr},{key:"Ctrl-a",run:Qs,shift:cl},{key:"Ctrl-e",run:Zs,shift:ul},{key:"Ctrl-d",run:ti},{key:"Ctrl-h",run:qt},{key:"Ctrl-k",run:yl},{key:"Ctrl-Alt-h",run:ri},{key:"Ctrl-o",run:xl},{key:"Ctrl-t",run:wl},{key:"Ctrl-v",run:Gt}],Pl=[{key:"ArrowLeft",run:zr,shift:qr,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Us,shift:nl,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Xs,shift:al,preventDefault:!0},{key:"ArrowRight",run:_r,shift:Jr,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Vs,shift:rl,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Ys,shift:fl,preventDefault:!0},{key:"ArrowUp",run:Wr,shift:Yr,preventDefault:!0},{mac:"Cmd-ArrowUp",run:$n,shift:qn},{mac:"Ctrl-ArrowUp",run:Wn,shift:Un},{key:"ArrowDown",run:Ur,shift:Qr,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Gn,shift:Jn},{mac:"Ctrl-ArrowDown",run:Gt,shift:Vn},{key:"PageUp",run:Wn,shift:Un},{key:"PageDown",run:Gt,shift:Vn},{key:"Home",run:Ks,shift:ll,preventDefault:!0},{key:"Mod-Home",run:$n,shift:qn},{key:"End",run:Js,shift:sl,preventDefault:!0},{key:"Mod-End",run:Gn,shift:Jn},{key:"Enter",run:Il},{key:"Mod-a",run:hl},{key:"Backspace",run:qt,shift:qt},{key:"Delete",run:ti},{key:"Mod-Backspace",mac:"Alt-Backspace",run:ri},{key:"Mod-Delete",mac:"Alt-Delete",run:gl},{mac:"Mod-Backspace",run:bl},{mac:"Mod-Delete",run:kl}].concat(Dl.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),Aa=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Gs,shift:il},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:qs,shift:ol},{key:"Alt-ArrowUp",run:vl},{key:"Shift-Alt-ArrowUp",run:Sl},{key:"Alt-ArrowDown",run:Cl},{key:"Shift-Alt-ArrowDown",run:Al},{key:"Escape",run:ml},{key:"Mod-Enter",run:Tl},{key:"Alt-l",mac:"Ctrl-l",run:dl},{key:"Mod-i",run:pl,preventDefault:!0},{key:"Mod-[",run:ai},{key:"Mod-]",run:li},{key:"Mod-Alt-\\",run:Ol},{key:"Shift-Mod-k",run:Bl},{key:"Shift-Mod-\\",run:tl},{key:"Mod-/",run:Bs},{key:"Alt-A",run:Is},{key:"Ctrl-m",mac:"Shift-Alt-m",run:Nl}].concat(Pl),Ba={key:"Tab",run:li,shift:ai};var fi=n=>{var{theme:e,settings:t={},styles:r=[]}=n,i={".cm-gutters":{}},o={};t.background&&(o.backgroundColor=t.background),t.backgroundImage&&(o.backgroundImage=t.backgroundImage),t.foreground&&(o.color=t.foreground),t.fontSize&&(o.fontSize=t.fontSize),(t.background||t.foreground)&&(i["&"]=o),t.fontFamily&&(i["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(i[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(i[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(i[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(i[".cm-content"]={caretColor:t.caret},i[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var s={};t.gutterActiveForeground&&(s.color=t.gutterActiveForeground),t.lineHighlight&&(i[".cm-activeLine"]={backgroundColor:t.lineHighlight},s.backgroundColor=t.lineHighlight),i[".cm-activeLineGutter"]=s,t.selection&&(i["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(i["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var l=R.theme(i,{dark:e==="dark"}),a=qe.define(r),f=[l,xo(a)];return f},Ll={background:"#ffffff",foreground:"#383a42",caret:"#000",selection:"#add6ff",selectionMatch:"#a8ac94",lineHighlight:"#f0f0f0",gutterBackground:"#fff",gutterForeground:"#237893",gutterActiveForeground:"#0b216f",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},El=[{tag:[u.keyword,u.operatorKeyword,u.modifier,u.color,u.constant(u.name),u.standard(u.name),u.standard(u.tagName),u.special(u.brace),u.atom,u.bool,u.special(u.variableName)],color:"#0000ff"},{tag:[u.moduleKeyword,u.controlKeyword],color:"#af00db"},{tag:[u.name,u.deleted,u.character,u.macroName,u.propertyName,u.variableName,u.labelName,u.definition(u.name)],color:"#0070c1"},{tag:u.heading,fontWeight:"bold",color:"#0070c1"},{tag:[u.typeName,u.className,u.tagName,u.number,u.changed,u.annotation,u.self,u.namespace],color:"#267f99"},{tag:[u.function(u.variableName),u.function(u.propertyName)],color:"#795e26"},{tag:[u.number],color:"#098658"},{tag:[u.operator,u.punctuation,u.separator,u.url,u.escape,u.regexp],color:"#383a42"},{tag:[u.regexp],color:"#af00db"},{tag:[u.special(u.string),u.processingInstruction,u.string,u.inserted],color:"#a31515"},{tag:[u.angleBracket],color:"#383a42"},{tag:u.strong,fontWeight:"bold"},{tag:u.emphasis,fontStyle:"italic"},{tag:u.strikethrough,textDecoration:"line-through"},{tag:[u.meta,u.comment],color:"#008000"},{tag:u.link,color:"#4078f2",textDecoration:"underline"},{tag:u.invalid,color:"#e45649"}];function Rl(n){var{theme:e="dark",settings:t={},styles:r=[]}=n||{};return fi({theme:e,settings:er({},Ll,t),styles:[...El,...r]})}var Ma=Rl(),Fl={background:"#1e1e1e",foreground:"#9cdcfe",caret:"#c6c6c6",selection:"#6199ff2f",selectionMatch:"#72a1ff59",lineHighlight:"#ffffff0f",gutterBackground:"#1e1e1e",gutterForeground:"#838383",gutterActiveForeground:"#fff",fontFamily:'Menlo, Monaco, Consolas, "Andale Mono", "Ubuntu Mono", "Courier New", monospace'},zl=[{tag:[u.keyword,u.operatorKeyword,u.modifier,u.color,u.constant(u.name),u.standard(u.name),u.standard(u.tagName),u.special(u.brace),u.atom,u.bool,u.special(u.variableName)],color:"#569cd6"},{tag:[u.controlKeyword,u.moduleKeyword],color:"#c586c0"},{tag:[u.name,u.deleted,u.character,u.macroName,u.propertyName,u.variableName,u.labelName,u.definition(u.name)],color:"#9cdcfe"},{tag:u.heading,fontWeight:"bold",color:"#9cdcfe"},{tag:[u.typeName,u.className,u.tagName,u.number,u.changed,u.annotation,u.self,u.namespace],color:"#4ec9b0"},{tag:[u.function(u.variableName),u.function(u.propertyName)],color:"#dcdcaa"},{tag:[u.number],color:"#b5cea8"},{tag:[u.operator,u.punctuation,u.separator,u.url,u.escape,u.regexp],color:"#d4d4d4"},{tag:[u.regexp],color:"#d16969"},{tag:[u.special(u.string),u.processingInstruction,u.string,u.inserted],color:"#ce9178"},{tag:[u.angleBracket],color:"#808080"},{tag:u.strong,fontWeight:"bold"},{tag:u.emphasis,fontStyle:"italic"},{tag:u.strikethrough,textDecoration:"line-through"},{tag:[u.meta,u.comment],color:"#6a9955"},{tag:u.link,color:"#6a9955",textDecoration:"underline"},{tag:u.invalid,color:"#ff0000"}];function _l(n){var{theme:e="dark",settings:t={},styles:r=[]}=n||{};return fi({theme:e,settings:er({},Fl,t),styles:[...zl,...r]})}var Ia=_l(),jl=bi;function Hl(n){return typeof n=="function"?n:jl}var Wl=Hl,Ul=ki,Vl=Wl,$l=vi,Gl=9007199254740991,Lt=4294967295,ql=Math.min;function Jl(n,e){if(n=$l(n),n<1||n>Gl)return[];var t=Lt,r=ql(n,Lt);e=Vl(e),n-=Lt;for(var i=Ul(r,e);++t<n;)e(t);return i}var Kl=Jl;const Ta=tr(Kl);var Xl=xi,Yl=wi,Ql="[object Number]";function Zl(n){return typeof n=="number"||Yl(n)&&Xl(n)==Ql}var ea=Zl;const Oa=tr(ea);export{ua as A,lo as B,Wi as C,Ci as D,u as E,_ as F,da as G,oa as H,D as I,sa as J,To as K,jt as L,ka as M,nr as N,ca as O,Oi as P,fa as Q,Ji as R,qi as S,F as T,Ia as a,ya as b,wa as c,Aa as d,xa as e,ha as f,ga as g,Oa as h,Ba as i,Ca as j,ma as k,pa as l,ia as m,va as n,Sa as o,_l as p,Ma as q,V as r,xo as s,Ta as t,v as u,Rl as v,aa as w,ba as x,Fo as y,Qi as z};
//# sourceMappingURL=cuclv9l1zrngvljk.js.map
