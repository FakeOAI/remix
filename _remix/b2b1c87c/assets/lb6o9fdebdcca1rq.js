import{aP as k,aQ as f,w as C,H as M,W as A,X as y,aJ as b,aR as v}from"./fz81i3fl330y5ew1.js";import{t as S}from"./kd847zqymupw3yev.js";import{aM as B,r as K,a3 as w,R as L,P as D,V as P,D as T,a6 as x}from"./d4leej2qw3qpt1pk.js";import{T as d}from"./hyhugnup8jw7vymu.js";const E=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function R(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const e={Mod:"mod",Comma:",",...k.Key},V={[e.Mod]:R()?"⌘":"Ctrl",[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"},Q=t=>t.map(o=>V[o]??o),n=x({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),F=new f,G=({resetThreadAction:t,clientThreadId:o,toaster:a})=>[{key:"newChat",action:t||w,actionMessageDescriptor:n.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:[[e.Mod,"k"]]},{key:"focusPromptTextarea",action:S,actionMessageDescriptor:n.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:s=>{if(o!=null){const i=d.getThreadCurrentLeafId(o),r=d.getThreadConversationTurns(o,i);for(let g=r.length-1;g>=0;g--){const{messages:m}=r[g],l=[...m.reduce((u,c)=>c.err==null&&c.message.author.role===L.Assistant&&c.message.recipient==="all"?u+(u?`

`:"")+M(c.message):u,"").matchAll(E)],p=l.length?l[l.length-1][1]:null;if(p!=null){A(p,a,s).then(()=>{a.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:n.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:s=>{o!=null&&d.copyLastMessageToClipboard(o,a,s,"keyboard").then(()=>{a.success("Last response copied to clipboard")})},actionMessageDescriptor:n.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>y.toggleModal(b.UserContext),actionMessageDescriptor:n.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>y.toggleNavSidebar(),actionMessageDescriptor:n.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(o){const s=d.getServerThreadId(o);s&&F.publish({kind:"deleteChat",serverThreadId:s})}},actionMessageDescriptor:n.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"toggleKeyboardActions",action:()=>y.toggleModal(b.KeyboardActions),actionMessageDescriptor:n.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]}],h=t=>v(t,o=>{D.logEvent(P.keyboardShortcut,{keyboardActionKey:o.key}),T.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:o.key})},{enabled:!0}),U=({resetThreadAction:t,clientThreadId:o}={})=>{const a=B();return K.useMemo(()=>G({resetThreadAction:t,clientThreadId:o,toaster:a}).filter(({enabled:i=!0})=>i),[a,o,t])},W=({resetThreadAction:t,clientThreadId:o})=>{const a=U({resetThreadAction:t,clientThreadId:o}),i=C(r=>r.isVoiceActive)?[]:a;h(i)},X=({setSelectedVoiceIndex:t,previousVoiceIndex:o,nextVoiceIndex:a,setDirection:s})=>{const i=[{key:"selectPreviousVoice",action:()=>{s(-1),t(o)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{s(1),t(a)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[e.ArrowRight]}];h(i)};export{F as G,W as a,U as b,Q as g,R as i,X as u};
//# sourceMappingURL=lb6o9fdebdcca1rq.js.map
