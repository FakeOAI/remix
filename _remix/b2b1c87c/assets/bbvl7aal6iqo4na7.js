const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/k7ffkir6kxuenvzv.js","assets/d4leej2qw3qpt1pk.js","assets/okxdn8hddblnp0ou.js","assets/root-eakuwlaq.css","assets/fz81i3fl330y5ew1.js","assets/conversation-small-eplmind9.css","assets/kd847zqymupw3yev.js","assets/dywhugbdhvsxyyf5.js","assets/hyhugnup8jw7vymu.js","assets/f2il2wfcdnz6iwbp.js","assets/c6czee0ptvr50b6w.js","assets/ohxwppau79l98jz8.js","assets/d74dxosgtjynzks4.js","assets/4e3zcddd66l56fc6.js","assets/g2ogs9oa3sb9y4ze.js","assets/n6iq8n6xr4ogpzm6.js","assets/nm04jgpfyxi6pn12.js","assets/iglrwjlxdh3icpw1.js","assets/c03cyiw531bfxkuh.js","assets/shared-mk6ngktc.css","assets/nfvveyk9d6ahnf1o.js","assets/ftyo1ydzzolwv3v6.js","assets/blb377wa0lv0gl05.js","assets/nek0ozgkk626juis.js","assets/g6n33634fp88d2bg.js","assets/goojceouqjho7tc9.js","assets/jj9lp929lmdlnrht.js","assets/deu8vhn71xpv4b83.js","assets/dnhuhqvagpobrtau.js","assets/d22uwtmjvc8us5j2.js","assets/j7c0mtgx45is0a1x.js","assets/j7c3q2fc9zcfnlpb.js","assets/kp4k2v7si1wz6dgb.js","assets/fi1eifnoy9tspxqm.js","assets/i0atr71q351gx0hb.js","assets/lb6o9fdebdcca1rq.js","assets/ca1c2m6yan238aqt.js","assets/9icnhfjc3wq4r4fn.js","assets/fsmgl5eztdhnfu5c.js","assets/lueq0mtchdfu8gcj.js","assets/kt44bkoo8dfxkuwr.js","assets/k9a54ncastppazlb.js","assets/6e9lp14n6vjshqtq.js","assets/irnny8s0apugp4gr.js","assets/mfpofkv0qdfmmagx.js","assets/d4t0vtbfqthmj7np.js","assets/gcg3s799tx64lwzh.js","assets/g3ajm57p2xx770mv.js","assets/cctl8b8dlflw1lz8.js","assets/fk7wy2tezzqjl8gq.js","assets/jesyc5hq0xl7nzpo.js","assets/j5x20e3cnotdgagr.js","assets/fnyppm81vubjiv70.js","assets/tc0115q13d1m8qvh.js","assets/cu7i7jyqvstu6net.js","assets/k6ihr90dx1d8x34z.js","assets/kqwdyvkaaavvn8k3.js","assets/b970v26y0yx4oukl.js","assets/a0rtdk725cpx3ot2.js","assets/j3aajcd1uncdq2rn.js"])))=>i.map(i=>d[i]);
import{a7 as Ue,a1 as Q,aM as ve,aL as qe,r as d,l as s,a5 as V,D as Se,b5 as ae,a6 as X,aF as N,aG as D,aP as Ke,bY as $e,bW as Ye,bU as Qe,bh as Xe,aC as Je,a2 as ye,a3 as Ze,fb as z,Q as oe,fc as es,m as P,cB as ss,fd as Me,fe as W,u as we,S as ne,aJ as re,bq as ts,f0 as as,ff as os,cj as ns,ad as rs,de as ie,cH as is,cI as cs,cJ as ls,c4 as ds,b2 as us,aw as hs,Z as fs}from"./d4leej2qw3qpt1pk.js";import{g as ms,u as gs,b as J}from"./blb377wa0lv0gl05.js";import{aS as ps,hf as xs,hg as Ae,hh as Cs,ai as bs,hi as vs,hj as Ss,hk as ys,hl as Ms,hm as ws,b6 as H,hn as As,ho as js,hp as ks,hq as Ts,hr as Es,hs as _s,ht as Ns,hu as Ds,hv as Is,hw as Ps,hx as Ls,hy as Fs,hz as Os,w as F,aJ as L,X as _,bz as Z,hA as Rs,hB as Ws,hC as Bs,e_ as Vs,fY as zs,ar as A,dh as Hs,hD as Gs,gg as K,gy as Us,hE as qs,hF as Ks,gz as q,hG as $s,hH as Ys,hI as Qs,hJ as Xs,hK as Js,hL as ce,hM as Zs,hN as et,hO as st,h9 as tt,hP as je,eN as at,hQ as ot,ap as nt,gm as rt,hR as le,A as ke,hS as de,hT as it,e2 as ct,dP as lt,dg as ue,bN as dt,hU as Te,hV as Ee,hW as ut,hX as _e,hY as ht,cx as he,cw as ft,bo as $,bp as fe,hZ as mt,c7 as gt,aF as pt,dm as xt,h_ as Ct,d_ as bt,d$ as me,h$ as vt,u as St,bC as yt,i0 as Mt,i1 as wt,bD as At,bq as ge,i2 as jt,i3 as kt,i4 as Tt,i5 as Et,i6 as _t}from"./fz81i3fl330y5ew1.js";import{o as Nt,q as Ne,G as Dt,H as It,E as Pt,I as Lt,i as Ft,T as G,g as Y,e as Ot}from"./hyhugnup8jw7vymu.js";import{a as Rt}from"./c6czee0ptvr50b6w.js";import{L as Wt}from"./ohxwppau79l98jz8.js";import{C as De}from"./j7c0mtgx45is0a1x.js";import{T as Bt}from"./j7c3q2fc9zcfnlpb.js";import{K as Vt,b as zt,L as Ht,u as Gt,n as Ut}from"./nfvveyk9d6ahnf1o.js";import{m as S}from"./f2il2wfcdnz6iwbp.js";import{a as Ie,b as qt,g as Kt}from"./lb6o9fdebdcca1rq.js";import{C as $t,S as Yt,a as Qt}from"./ca1c2m6yan238aqt.js";import{b as Pe,c as Xt,d as Jt,e as Zt,f as Le}from"./k9a54ncastppazlb.js";import{J as ea,a as sa,I as ta}from"./dywhugbdhvsxyyf5.js";import{S as pe,b as aa,c as oa,N as na}from"./lueq0mtchdfu8gcj.js";function ra({onClose:e}){const t=Q(),a=ve(),{openSettings:o}=ps(),n=xs(),{session:r}=qe(),{data:{isStorageComplianceEnabled:i}={}}=Ae(),{data:l,isLoading:u}=Cs({enabled:!!(i&&r),select:c=>!c.cookie_consent.is_required});return d.useEffect(()=>{l===!0&&e()},[l,e]),u?null:s.jsx(ia,{onReject:()=>{n.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){a.success(t.formatMessage(E.updateSuccess))},onError(){a.danger(t.formatMessage(E.updateFailure))}}),e()},onAccept:()=>{n.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){a.success(t.formatMessage(E.updateSuccess))},onError(){a.danger(t.formatMessage(E.updateFailure))}}),e()},children:s.jsx(V,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:c=>s.jsx(Wt,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:c}),manageLink:c=>s.jsx(ca,{onClick:()=>{o(bs.DataControls)},children:c})}})})}function ia({children:e,onAccept:t,onReject:a}){return d.useEffect(()=>{Se.addAction("privacy_policy.show_cookie_consent_banner")},[]),s.jsxs(vs,{children:[s.jsxs(Ss,{className:"text-sm font-semibold [grid-area:_title]",children:[e,s.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[s.jsx(ae,{color:"secondary",size:"small",onClick:a,children:s.jsx(V,{...E.reject})}),s.jsx(ae,{color:"secondary",size:"small",onClick:t,children:s.jsx(V,{...E.accept})})]})]}),s.jsx(ys,{})]})}const ca=Ue.button`underline font-normal text-green-600`,E=X({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),la=N(()=>D(async()=>{const{ModelOnboardingNUXModal:e}=await import("./k7ffkir6kxuenvzv.js");return{ModelOnboardingNUXModal:e}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(({ModelOnboardingNUXModal:e})=>e),{ssr:!1}),da=({onClose:e})=>{const t=Q(),a=H(Z.isBusinessWorkspace),o=H(r=>r.currentWorkspace),n=a?t.formatMessage(xe.workspaceWelcome,{workspaceName:o==null?void 0:o.name}):"ChatGPT";return s.jsx(ye,{isOpen:!0,onClose:Ze,type:"success",title:n,size:"custom",noPadding:!0,className:"max-w-3xl",description:t.formatMessage(xe.personalOnboardingSubheading),children:s.jsx(Rs,{onClose:e,scope:Ws.Personal})})};function ua(){const[e,t]=d.useState(0),{hasSeenOnboardingDate:a}=Ms(),{hasSeenTeamOwnerOnboardingDate:o}=ws(),n=H(Z.isBusinessWorkspace),r=Ke(),[i,l]=d.useState(!1),{data:u,isPending:c}=Ae(),m=As(u,c),{eligible:g,isLoading:M}=Rt(),y=$e(),b=Ye(),w=Qe(),{data:f,isError:v}=Xe(),p=f!=null,C=f&&(f==null?void 0:f.accountItems.length)>1&&f.currentAccountId==null,k=f==null?void 0:f.accountItems.some(x=>x.isPersonalAccount()),j=!!(f!=null&&f.accountItems)&&f.accountItems.length>0&&f.accountItems.every(({canAccessWithCurrentSession:x})=>!x),{eligible:h,isLoading:O}=js(),{value:ee}=Je("1542198993"),{punchOutRequireLoginInfo:se}=ks(),T=d.useMemo(()=>[{Component:Ts,getModalState:()=>se?"show":"hide",isDeferrable:!1},{Component:da,getModalState:()=>n?"hide":a===null?"loading":a===!1?"show":"hide",isDeferrable:!0},{Component:Es,getModalState:()=>v?"hide":C?"show":p?"hide":"loading",isDeferrable:!1},{Component:_s,getModalState:()=>y!==null?"show":v||p?"hide":"loading",isDeferrable:!1},{Component:Ns,getModalState:()=>b!==null?"show":v||p?"hide":"loading",isDeferrable:!1},{Component:Ds,getModalState:()=>w!=null?"show":v||p?"hide":"loading",isDeferrable:!1},{Component:Is,getModalState:()=>p?j?"show":"hide":"loading",isDeferrable:!1},{Component:ra,getModalState:()=>"hide",isDeferrable:!1},{Component:Ps,getModalState:()=>!(r!=null&&r.isTeam())||!(r!=null&&r.isOwnerOfAccount())||!k?"hide":!p||o===null?"loading":o===!1?"show":"hide",isDeferrable:!1},{Component:Ls,getModalState:()=>n?a===null?"loading":a===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Fs,getModalState:()=>O?"loading":h&&ee?"show":"hide",isDeferrable:!1},{Component:Os,getModalState:()=>m,isDeferrable:!1},{Component:la,getModalState:()=>M?"loading":g?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(x=>!(x.isDeferrable&&i)&&(!x.expiresAt||x.expiresAt.getTime()>Date.now())),[se,w,p,a,o,k,M,n,v,y,b,r,j,C,m,g,i,ee,h,O]);d.useEffect(()=>{if(T[e]&&T[e].getModalState()==="hide"){const x=T.findIndex(Ge=>Ge.getModalState()!=="hide");t(x)}},[e,T]);const I=T[e],U=(I==null?void 0:I.getModalState())==="show";if(d.useEffect(()=>{const x=F.getState().activeModals.has(L.BlockingInitialComponent);U!==x&&(U?_.openModal(L.BlockingInitialComponent):_.closeModal(L.BlockingInitialComponent))},[U]),I==null)return s.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const te=I.getModalState();if(te==="loading")return null;te==="hide"&&t(x=>x+1);const He=T[e].Component;return s.jsx(He,{onClose:()=>{l(!0),t(x=>x+1)}})}const xe=X({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ce="oai/apps/canmoreSidebarWidth",ha=.25,fa=400,Fe=400;function Oe(e){return e-fa}function R(e,t){return Vs(Fe,Oe(e),t??ha*e)}function ma(){const e=z.useState(z.selectWindowWidth),t=R(e,Bs(oe.DANGER_SECRET_FOLDERS_ONLY_getItem(Ce))),a=Re(),[o,n]=d.useState(t);d.useEffect(()=>{(o<Fe||o>Oe(e))&&n(R(e,o))},[e]);function r(c){n(m=>R(e,m+=c.delta.x))}function i(c){n(c),oe.DANGER_SECRET_FOLDERS_ONLY_setItem(Ce,c)}function l(){const c=R(e,void 0);i(c)}const u=`calc(100vw - ${o}px)`;return a?{chatWidth:o,canvasWidth:e-o,canvasWidthCalc:u,viewportWidth:e,handleDrag:r,handleDoubleClick:l,persist:i}:{chatWidth:0,canvasWidth:e,canvasWidthCalc:"100vw",viewportWidth:e,handleDrag:()=>{},handleDoubleClick:()=>{},persist:()=>{}}}function Re(){return z.useState(e=>z.selectWindowWidth(e)>1e3)}const ga=N(()=>D(()=>import("./d74dxosgtjynzks4.js"),__vite__mapDeps([12,1,2,3,13,4,5,9,14,15,16,17,18,19,20,21,22,8,7,10,11,23,24,25,26,6])).then(e=>e.ADAVisualizationCanvasContent)),We=({isFullScreen:e=!1,clientThreadId:t,focusedObject:a,onClose:o,isAnimating:n=!1,width:r})=>{const{setTargetedContent:i}=zs(),l=d.useRef(!1);if(d.useEffect(()=>(l.current&&i(void 0),l.current=!0,()=>{l.current=!1}),[a]),a==null)return null;switch(a.type){case A.Textdoc:return s.jsx(Bt,{isFullScreen:e,onClose:o,clientThreadId:t,focusedTextdoc:a,isAnimating:n,width:r});case A.ADAVisualization:return s.jsx(ga,{onClose:o,clientThreadId:t,...a})}},pa=300,xa=e=>(e==null?void 0:e.type)===A.Textdoc?e.textdocId:(e==null?void 0:e.type)===A.ADAVisualization?e.visualization.file_id:null;function Ca(e){const t=Nt(e),a=Hs(t),o=Ne(e),n=Dt(e,o),r=It({clientThreadId:e,conversationLeafId:o}),i=Gs(),[l,u]=d.useMemo(()=>{let g;return!r&&n&&(g=K(Us(n.messages))),ba(a,i,g)},[r,n,a,i]),c=u!=null,m=xa(u);d.useEffect(()=>{if(u&&l&&(qs(u,l),u.type===A.Textdoc)){const{textdocId:g}=u,M=Zs(g);Ks(document.getElementById(M))}},[c,m])}function ba(e,t,a){var o;switch(a==null?void 0:a.type){case q.Canmore:{const[n,r]=a.messages;if(!Qs(n==null?void 0:n.message))break;const i=Xs(e,n.message,(r==null?void 0:r.message)??null),l=i.textdocId??t;if(l&&(i.function===Js.CreateTextdoc?(i.content??"").length>pa||i.status===ce.WAITING:i.status===ce.STREAMING))return[i.messageId,{type:A.Textdoc,textdocId:l}];break}case q.CodeInterpreter:{const[n,r]=a.messages;if(!r)break;const i=K(Vt(r.message));if(!i)break;return[n.message.id,{type:A.ADAVisualization,visualization:i}]}case q.Text:{const{message:n}=a,{metadata:r}=n.message;if(!((o=r==null?void 0:r.attachments)!=null&&o.length))break;const{attachments:i}=r,l=i.filter(({name:c})=>$s(c)),u=K(l);if(!u)break;return[n.message.id,{type:A.ADAVisualization,visualization:Ys(u)}]}}return[void 0,null]}const va=260,B={type:"spring",bounce:.12,duration:.64},be={type:"spring",bounce:0,duration:.58},Sa=({clientThreadId:e,focusedObject:t,onClose:a})=>{const{chatWidth:o,canvasWidthCalc:n,handleDrag:r,handleDoubleClick:i,persist:l}=ma(),[u,c]=d.useState(!0),[m,g]=d.useState(!1),M=F(h=>h.activeSidebar),y=et(({rect:h})=>h),{windowHeight:b,windowWidth:w}=es(h=>h,{windowWidth:0,windowHeight:0});let f=y??{top:0,left:o,width:w-o,height:b},v=!1;if(y&&(f.top<0||f.top+f.height>b)){v=!0;const h={width:(w-o)*.75,height:b*.75};f={top:b/2-h.height/2,left:(w-o-h.width)/2+o,width:h.width,height:h.height}}const p=y==null?void 0:y.borderRadius,C=st(),k=(C==null?void 0:C.history)!=null||(C==null?void 0:C.showChangesAtVersion)!=null,j=F(h=>h.isDesktopNavCollapsed);return s.jsxs(s.Fragment,{children:[k&&s.jsx(S.div,{className:"fixed inset-0 z-20 bg-gray-50/50 dark:bg-black/50",initial:{opacity:0},animate:{opacity:1},onClick:()=>tt(C.textdocId)}),s.jsxs(S.div,{initial:{marginRight:j?0:-va},animate:{marginRight:0},transition:be,children:[s.jsx(S.div,{initial:{opacity:1},animate:{opacity:0},exit:{opacity:[1,0]},transition:{...B,delay:.22},className:"pointer-events-none absolute left-0 top-0 z-20 h-full w-full bg-token-main-surface-primary"}),s.jsx(S.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"pointer-events-none absolute left-0 top-0 z-10 h-full w-full bg-black/[0.025] dark:bg-transparent"}),s.jsx(S.div,{className:"relative z-20 h-full",initial:!1,style:{width:n},exit:{width:0,transition:{duration:0}},transition:be})]}),s.jsx(S.div,{className:P("absolute z-20 h-full overflow-hidden transition-shadow",M==="debug"?"md:left-[-250px] lg:left-[-300px] xl:left-[-350px] 2xl:left-[-400px]":"left-0"),initial:{opacity:v?0:1,x:f.left,y:f.top,width:f.width,height:f.height,borderRadius:p,boxShadow:"0px 12px 32px 0px rgba(0, 0, 0, 0.064)"},animate:{opacity:1,x:o,y:0,width:n,height:"100%",borderRadius:0,boxShadow:"0px 0px 18px rgba(0,0,0,0.075)"},exit:{scale:.64,opacity:0,filter:"blur(12px)",transition:{opacity:{duration:.14,bounce:.1}},borderRadius:p,boxShadow:"0px 12px 32px 0px rgba(0, 0, 0, 0.064)"},transition:m?{duration:0}:B,onAnimationComplete:()=>c(!1),children:s.jsx(S.div,{className:"h-full overflow-hidden border-l border-gray-100 dark:border-token-border-medium",initial:{borderRadius:p},animate:{borderRadius:0},exit:{borderRadius:p},transition:B,children:s.jsxs("div",{className:"h-full",children:[s.jsx(S.div,{drag:"x",className:"absolute left-[-2px] z-10 h-full w-[4px] cursor-ew-resize bg-token-text-quaternary opacity-0",whileHover:{opacity:.5},whileDrag:{opacity:.75,width:"8px",left:"-4px"},transition:{type:"tween",duration:.1},style:{x:0,y:0,transform:"translateX(0px)"},dragMomentum:!1,dragSnapToOrigin:!1,dragElastic:!1,dragConstraints:{left:0,right:0,top:0,bottom:0},onDrag:(h,O)=>{g(!0),r(O)},onDragEnd:()=>{g(!1),l(o)},onDoubleClick:()=>i()}),s.jsx(We,{onClose:a,clientThreadId:e,isAnimating:u,focusedObject:t,width:w-o})]})})})]})},ya=d.memo(Sa),Ma=({clientThreadId:e,focusedObject:t,onClose:a})=>s.jsx(Me,{children:s.jsx(S.div,{className:"fixed inset-0 z-20 overflow-hidden shadow-xl md:border-gray-100 md:dark:border-gray-700",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:B,children:s.jsx(We,{isFullScreen:!0,clientThreadId:e,focusedObject:t,onClose:a})})}),wa=({clientThreadId:e})=>{const t=Re(),a=ot(e);Ca(e);const o=nt(),n=rt(({resolveTempTextdocId:c})=>c),r=d.useMemo(()=>{let c=o;if((o==null?void 0:o.type)===A.Textdoc){const m=n==null?void 0:n[o.textdocId];m&&(c={...o,textdocId:m})}return c},[o,n]);d.useEffect(()=>{je()},[e]);const i=r&&(t?s.jsx(ya,{clientThreadId:e,onClose:de,focusedObject:r},"canvas-sidebar"):s.jsx(Ma,{clientThreadId:e,onClose:de,focusedObject:r},"canvas-modal"));d.useEffect(()=>{if(r)return le(c=>it(c,r)),()=>le(null)},[r,n]);const l=i!=null;return d.useEffect(()=>(_.setActiveStageSidebar(l),()=>_.setActiveStageSidebar(!1)),[l]),a&&a!==e?null:s.jsx(ke,{initial:!1,children:i})},Be=e=>{const t=d.useRef(null);return s.jsx(ss,{ref:t,onError:(a,o)=>{je(),setTimeout(()=>{var n;(n=t.current)==null||n.resetErrorBoundary()}),at.logError("Error boundary hit",a,{componentStack:o})},name:"canmore-focused-view",children:s.jsx(wa,{...e})})};function Aa({clientThreadId:e}){return s.jsxs("div",{className:W.header,children:[s.jsxs("div",{className:W.headerLeading,children:[s.jsx(ms,{clientThreadId:e}),s.jsx(Pe,{clientThreadId:e})]}),s.jsx("div",{className:W.headerTrailing,children:s.jsx(Xt,{clientThreadId:e})})]})}function ja({}){return s.jsx("div",{})}function ka({clientThreadId:e}){const t=ea(),a=zt(e),o=Ne(e),n=sa(e)??t.id,i=Pt(e,o)>=2,l=Lt(e,o),u=Ft(e)&&!i&&Ht(a);return s.jsx("footer",{className:W.footer,children:s.jsx(lt,{children:s.jsx(Jt,{clientThreadId:e,isNewThread:u,onRequestCompletion:()=>Promise.resolve(),showPromptStarters:u||!l,currentModelId:n})})})}function Ta({clientThreadId:e,onThreadCreated:t}){return s.jsx(ct,{anchor:"top",className:"flex-1",leading:s.jsx(Aa,{clientThreadId:e}),trailing:s.jsx(ka,{clientThreadId:e,onThreadCreated:t}),children:s.jsx(ja,{clientThreadId:e})})}function Ve({clientThreadId:e}){d.useEffect(()=>{_.closeSharingModal()},[e]);const t=we();d.useEffect(()=>(G.retainThread(e),()=>{setTimeout(()=>{t.invalidateQueries({queryKey:["conversation",e]})},0),G.releaseThread(e)}),[e,t]),d.useEffect(()=>()=>{ne.checkGate("3922476776")||ue.abortAllRequests()},[e]);const a=d.useRef(e);d.useEffect(()=>{e!==a.current&&(ne.checkGate("3922476776")||ue.clear(),a.current=e)},[e])}function ze({clientThreadId:e,setClientThreadId:t}){const a=we(),o=dt(),n=o?{kind:re.GizmoInteraction,gizmo_id:o}:{kind:re.PrimaryAssistant};Gt(e,n);const r=ts(),i=ta(e),l=d.useRef(i);l.current=i;const u=d.useCallback(()=>{t(Y());const g=l.current;r(g.tags.includes(as.GPT_4)?"/":`/?model=${g.id}`,{replace:!0})},[t,r]),c=gs({clientThreadId:e,location:"Model switcher menu item"}),m=d.useCallback(g=>{Ut(r,a,g)},[a,r]);return{createNewThread:c,onThreadCreated:m,resetThread:u}}function Ea({clientThreadId:e,setClientThreadId:t,urlThreadId:a}){Ve({clientThreadId:e});const{createNewThread:o,onThreadCreated:n,resetThread:r}=ze({clientThreadId:e,setClientThreadId:t});Ie({resetThreadAction:r,clientThreadId:e});const i=J(e);return s.jsxs(De,{clientThreadId:e,children:[s.jsx(Te,{clientThreadId:e,urlThreadId:a}),s.jsx(Ee,{}),s.jsx(ut,{className:os.screenDefaults,sidebar:s.jsx($t,{clientThreadId:e,onNewThread:o}),thread:s.jsx(Ta,{clientThreadId:e,onThreadCreated:n}),details:i&&s.jsx(Be,{clientThreadId:e}),debugger:s.jsx(_e,{clientThreadId:e})})]})}function _a({clientThreadId:e,setClientThreadId:t,urlThreadId:a,prefetchSearch:o}){const n=Ot();Ve({clientThreadId:e});const{createNewThread:r,onThreadCreated:i,resetThread:l}=ze({clientThreadId:e,setClientThreadId:t});Ie({resetThreadAction:l,clientThreadId:e});const u=J(e);return s.jsxs(De,{clientThreadId:e,children:[s.jsx(Te,{clientThreadId:e,urlThreadId:a}),s.jsxs(pe,{hideNavigation:n,mobileHeaderContent:s.jsx(Pe,{clientThreadId:e,inMobileHeader:!0}),mobileHeaderBottomContent:s.jsx(Zt,{clientThreadId:e}),mobileHeaderLeftContent:s.jsx(aa,{onNewChatButtonClick:l}),mobileHeaderRightContent:s.jsx(oa,{onNewChatButtonClick:l}),sidebar:s.jsx(na,{navHeader:e?s.jsx(Yt,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:r}):null,children:s.jsx(Qt,{clientThreadId:e,onNewThread:r})}),children:[s.jsx(Ee,{}),s.jsx(Le,{clientThreadId:e,onCreate:i,prefetchSearch:o},e),s.jsxs(pe.Sidebars,{children:[u&&s.jsx(Be,{clientThreadId:e}),s.jsx(_e,{clientThreadId:e})]})]})]})}const Na=450;function Da({children:e,clientThreadId:t,isOpen:a,onClose:o}){return s.jsx(ke,{children:a&&s.jsx(Me,{children:s.jsx(ht.Provider,{value:{isEmbeddedInFocusedView:!0},children:s.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[s.jsx(S.div,{className:"h-full w-full bg-token-main-surface-secondary",...he}),s.jsxs("div",{className:"absolute inset-0 flex",children:[s.jsx("div",{className:"flex-grow overflow-auto",children:e}),s.jsx(S.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:Na},...he,children:s.jsx("div",{className:"h-[100vh] pb-4",children:s.jsx(Le,{clientThreadId:t,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},t)})})]})]})})})})}const Ia=N(()=>D(()=>import("./deu8vhn71xpv4b83.js"),__vite__mapDeps([27,1,2,3,4,5,20,21,9,22,8,18,7,10,11,23,24,25,26,6]))),Pa=N(()=>D(()=>import("./dnhuhqvagpobrtau.js"),__vite__mapDeps([28,1,2,3,4,5,29,20,21,9,22,8,18,7,10,11,23,24,25,26,6,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])).then(e=>e.ImageEditor));function La({clientThreadId:e}){const t=ft();d.useEffect(()=>{$.close()},[e]);let a;return(t==null?void 0:t.type)===fe.ADAVisualization?a=s.jsx(Ia,{clientThreadId:e,visualization:t.visualization}):(t==null?void 0:t.type)===fe.Image&&(a=s.jsx(Pa,{clientThreadId:e,messageId:t.messageId,image:t.image,allImages:t.allImages},t.image.asset_pointer)),s.jsx(Da,{clientThreadId:e,isOpen:t!=null,onClose:$.close,children:a})}const Fa=()=>{const e=Q(),t=F(r=>r.activeModals.has(L.KeyboardActions)),a=()=>{_.closeModal(L.KeyboardActions)},o=qt(),n=d.useMemo(()=>{const r=Math.ceil(o.length/2);return[o.slice(0,r),o.slice(r)]},[o]);return s.jsx(ye,{isOpen:t,onClose:a,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:e.formatMessage(Wa.keyboardActionsModalTitle),children:s.jsx(s.Fragment,{children:s.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:n.map((r,i)=>s.jsx("div",{className:"flex flex-col overflow-hidden",children:r.map(l=>s.jsx(Oa,{action:l},l.key))},`col-${i}`))})})})},Oa=({action:e})=>s.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[s.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:s.jsx("div",{className:"truncate",children:s.jsx(V,{...e.actionMessageDescriptor})})}),s.jsx("div",{className:"ml-3 flex flex-row gap-2",children:Kt(e.keyboardBinding).map((t,a)=>s.jsx(Ra,{keyName:t},`${e.key}-${a}`))})]}),Ra=({keyName:e})=>{const t=P("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return e.length>1?e.length>3?s.jsx("div",{className:P(t,"min-w-[50px]"),children:s.jsx("span",{className:"text-xs",children:e})}):s.jsx("div",{className:P(t,"min-w-[32px]"),children:s.jsx("span",{className:"text-xs",children:e})}):s.jsx("div",{className:P(t,"min-w-[32px]"),children:s.jsx("span",{className:"text-sm",children:e})})},Wa=X({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});var Ba={};const Va=N(()=>D(()=>import("./fnyppm81vubjiv70.js"),__vite__mapDeps([52,1,2,3,41,7,4,5,8,9,42,20,21,22,18,10,11,23,24,25,26,6,43,44,45,37,46,47,48,29,49,40,50,51,53,54]))),za=N(()=>D(()=>import("./k6ihr90dx1d8x34z.js"),__vite__mapDeps([55,1,2,3,8,4,5,9,56,57,7,58,59])).then(e=>e.SearchResultsModal));function io(e){var j;const{urlThreadId:t,clientThreadId:a,prefetchSearch:o}=e,n="serviceStatus"in e?e.serviceStatus:null;Ua();const r=ns(),i=rs(),l=ie(),u=ve(),[c,m]=d.useState(()=>t!==void 0?t:a!==void 0?a:Y());t!==void 0&&c!==t&&G.getServerThreadId(c)!==t&&m(t);const g=mt(ie());d.useEffect(()=>{t===void 0&&G.getServerThreadId(c)!==void 0&&m(Y())},[t,c,g]);const M=gt(),y=H(Z.workspaceId),b=pt();J(c);const w=xt(),{eligible:f,isLoading:v,markAsViewed:p}=Ct();d.useEffect(()=>{(i.asPath==="/"||i.asPath.startsWith("/c/"))&&bt({namespace:me.ChatPageLoad})==null&&(vt({namespace:me.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),Se.addTiming("chatgpt.web.chatPage.mounted"))},[]);const C=St();d.useEffect(()=>{is(!0).then(h=>{h.force_login&&C({authType:"login"}),cs.initializeAndGatherData(h),yt.initializeAndGatherData(h),ls.initializeAndGatherData(h)})},[C]),d.useEffect(()=>{n!=null&&n.type&&M===!1&&u.warning(n.message,{hasCloseButton:!0,duration:5})},[M,n==null?void 0:n.message,n==null?void 0:n.type,u]),d.useEffect(()=>{const h=i.query[Mt]==="true";r!==h&&ds.setIsTemporaryChatEnabled(h)},[r,i.query]),d.useEffect(()=>{var h;(h=l.state)!=null&&h.focusObject&&$.setFocusedObject(l.state.focusObject)},[(j=l.state)==null?void 0:j.focusObject]),d.useEffect(()=>{!v&&f&&b&&(p(),wt(b))},[f,v,p,b]);const k=w?Ea:_a;return s.jsx(us.Provider,{value:null,children:s.jsx(At,{children:s.jsxs(ge.Provider,{store:()=>new ge,children:[s.jsx(ua,{},y),s.jsx(Fa,{}),s.jsx(jt,{}),s.jsx(k,{urlThreadId:t,clientThreadId:c,setClientThreadId:m,prefetchSearch:o}),s.jsx(La,{clientThreadId:c}),s.jsx(Ga,{clientThreadId:c}),s.jsx(kt,{clientThreadId:c}),s.jsx(Ha,{}),!1,s.jsx(Tt,{}),s.jsx(Et,{})]},c)})})}function Ha(){const e=F(t=>t.sharingModalThreadId);return e?s.jsx(Va,{serverThreadId:e}):null}function Ga({clientThreadId:e}){return _t()&&s.jsx(za,{clientThreadId:e})}function Ua(){hs({queryKey:["pingEdge"],queryFn:()=>fs.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Ba.GOKU_SERVICE);export{io as C,Na as F};
//# sourceMappingURL=bbvl7aal6iqo4na7.js.map
