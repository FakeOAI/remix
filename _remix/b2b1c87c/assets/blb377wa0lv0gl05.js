const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-fjuqtgpha7i6x4xz.js","assets/d4leej2qw3qpt1pk.js","assets/okxdn8hddblnp0ou.js","assets/root-eakuwlaq.css","assets/nfvveyk9d6ahnf1o.js","assets/fz81i3fl330y5ew1.js","assets/conversation-small-eplmind9.css","assets/ftyo1ydzzolwv3v6.js","assets/f2il2wfcdnz6iwbp.js","assets/dywhugbdhvsxyyf5.js","assets/hyhugnup8jw7vymu.js","assets/goojceouqjho7tc9.js","assets/c6czee0ptvr50b6w.js","assets/ohxwppau79l98jz8.js","assets/jj9lp929lmdlnrht.js","assets/kd847zqymupw3yev.js","assets/d880uio2c3i9bnko.js","assets/g6n33634fp88d2bg.js","assets/fbejqq6xkkp9hmt5.js","assets/c13vup0gu3tk1kv4.js","assets/mky160t22to6y8z4.js","assets/g0ggnvciiiient2f.js","assets/k9b8ibmd34l2s7rd.js","assets/ifo1gwo96o35yr3m.js","assets/c03cyiw531bfxkuh.js","assets/f491s4vcra306afi.js","assets/j5x20e3cnotdgagr.js","assets/j3aajcd1uncdq2rn.js","assets/kqwdyvkaaavvn8k3.js","assets/b970v26y0yx4oukl.js","assets/dymswf7pjm0wqy6r.js","assets/iazfttlgqgykzfz8.js","assets/f10yhb39esjv47gm.js","assets/e9lafxuzyeh4418f.js","assets/osllr6oq6akbkz8a.js","assets/nhwwej1nq0zrd7sc.js","assets/fjtjienn2n0zl6dg.js","assets/k9a54ncastppazlb.js","assets/6e9lp14n6vjshqtq.js","assets/irnny8s0apugp4gr.js","assets/mfpofkv0qdfmmagx.js","assets/d4t0vtbfqthmj7np.js","assets/9icnhfjc3wq4r4fn.js","assets/gcg3s799tx64lwzh.js","assets/g3ajm57p2xx770mv.js","assets/cctl8b8dlflw1lz8.js","assets/d22uwtmjvc8us5j2.js","assets/fk7wy2tezzqjl8gq.js","assets/kt44bkoo8dfxkuwr.js","assets/jesyc5hq0xl7nzpo.js","assets/lb6o9fdebdcca1rq.js","assets/fsmgl5eztdhnfu5c.js","assets/ejh88k8ctwkfva9x.js","assets/itpwdhausyf7xf4n.js","assets/mp1yjamy0e9l6nax.js","assets/hcrrbo4eq4gpr4et.js","assets/hv3qp4mvbheda0p7.js","assets/b9h9wk677xnlcnw9.js","assets/iej0cupg2dqkmejt.js","assets/d384fviu7zav49xw.js","assets/jk8w36bsokizpx57.js","assets/g3b9e2shfou6ou4d.js","assets/dah69ezv8syoxajs.js","assets/carousel-bss5aguy.css","assets/n6iq8n6xr4ogpzm6.js","assets/nm04jgpfyxi6pn12.js"])))=>i.map(i=>d[i]);
import{aw as es,r as u,e as ss,l as e,R as ts,fa as ns,bS as ce,n as Me,a1 as T,aP as y,bq as z,P as x,V as j,aC as as,aF as os,aG as is,a5 as d,a6 as re,u as Se,bh as H,aM as cs,c3 as rs,c1 as ls,m as ke,b0 as V,bw as Te,bX as ye,cj as Ie,de as ds,eU as us,eQ as gs,S as le,bi as q,d$ as ms,ek as ps,W as be,ad as xs,b5 as ae}from"./d4leej2qw3qpt1pk.js";import{g7 as fs,g8 as hs,g9 as vs,ga as js,gb as Cs,gc as Ms,gd as Pe,dh as Ss,ge as ks,gf as Ts,gg as ys,gh as Is,gi as bs,gj as Ps,gk as Ns,gl as R,gm as As,gn as ws,go as Es,gp as Os,gq as Ws,gr as Fs,gs as _s,gt as Ne,gu as Bs,gv as Ds,gw as Ls,gx as ve,et as Us,gy as Gs,gz as Rs,gA as Vs,gB as qs,eN as zs,eO as Hs,gC as Ae,gD as Qs,T as A,N as Q,gE as $s,o as de,X as k,aJ as we,gF as oe,g3 as Js,u as Ee,aF as ue,c as Ks,f_ as ge,cd as Oe,bu as je,gG as N,gH as ie,gI as Xs,g4 as Zs,gJ as Ys,ea as et,gK as st,aS as tt,w as We,e6 as Fe,l as nt,m as at}from"./fz81i3fl330y5ew1.js";import{T as ot,q as it,r as ct,o as rt,a as lt}from"./hyhugnup8jw7vymu.js";import{J as me,af as dt,bF as _e,ab as Be,b1 as ut,ao as gt,A as mt,S as pt,ai as xt,z as ft,aR as De,bB as Le,bG as Ue,Y as ht,bv as vt,bp as jt,bc as Ct,a8 as Mt,bd as Ce}from"./okxdn8hddblnp0ou.js";import{D as l,$ as St,B as kt}from"./c03cyiw531bfxkuh.js";import{a as Tt,H as Ge,I as yt,u as It}from"./dywhugbdhvsxyyf5.js";import{c as Re,d as Ve}from"./c6czee0ptvr50b6w.js";import{u as bt}from"./nek0ozgkk626juis.js";const Pt=s=>ss.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:s}}}),Nt=async s=>{const t=await Pt(s),n=new Map(t==null?void 0:t.map(i=>[i.id,i])),a=[];for(const{id:i,content:c,version:r,textdoc_type:p,title:f,comments:h}of t)a.push({textdocId:i,messageId:null,type:js(p),comments:Cs(h,c),title:f,content:c,versionInt:r,createdAt:0});return{persistedTextdocVersionById:new Map(a.map(i=>[i.textdocId,i])),persistedTextdocVersions:a,persistedTextdocById:n}};function At({clientThreadId:s,isEnabled:t}){const n=ot.getServerThreadId(s),{data:a,error:o,isLoading:i,isFetching:c,refetch:r}=es({queryKey:[n,"textdocs"],enabled:!!n&&t,gcTime:0,queryFn:()=>n&&Nt(n)});return u.useEffect(()=>{if(!a)return;const{persistedTextdocVersions:p}=a;fs(p),hs(p),vs(p)},[a]),[{...a,error:o,isLoading:i,isFetching:c},r]}const qe=Ms(null);function L(s=ns){return _s(qe,s)}function dn(){return L(s=>s==null?void 0:s.isFetchingFromPersistence)}function un(s){const t=Pe();return L(n=>Ne(n,t,s))}function ze(s){const t=Pe();return L(n=>{var a;return((a=Ne(n,t,s))==null?void 0:a.metadata)??null})}function He(){const s=L(t=>t==null?void 0:t.allTextdocIdSet);return s?Object.keys(s):null}function gn(){return L(s=>s?Object.keys(s.allTextdocIdSet).length>1:!1)}function mn({clientThreadId:s,children:t,isEnabled:n}){const a=wt({clientThreadId:s,isEnabled:n});return e.jsx(qe.Provider,{value:a,children:t})}function wt({clientThreadId:s,isEnabled:t}){const n=it(s),a=ct(s,n),o=rt(s),i=Ss(o),[{error:c,persistedTextdocVersionById:r,isLoading:p,isFetching:f},h]=At({clientThreadId:s,isEnabled:t}),[w,I]=u.useState(!1),_=ks(),[$,m]=u.useState(!0);Ts(()=>{I(!0),h().finally(()=>I(!1))});const[B,Ye]=u.useState(r);u.useEffect(()=>{i&&Ye(r)},[i]);const pe=t&&(i||!$||f&&!p&&w),J=ys(a),E=u.useMemo(()=>{if(!J)return null;const{messages:g}=J,M=Is(g??[],({message:b})=>b.author.role===ts.System),v=M===-1?g:g==null?void 0:g.slice(M+1);return pe&&v&&bs(v)?v:null},[pe,J]),K=!!E?B:r,X=Ps(),xe=Ns(),U=u.useMemo(()=>{let g=Bs();return!K||(g=R(g,M=>{for(const[v,b]of K.entries()){M.allTextdocIdSet[v]=v;const O=_.get(v);let S=O&&O.versionInt>b.versionInt?{...b,...O}:b;const G=xe.filter(C=>C.textdocId===v&&C.kind===Ds.REMOVE_COMMENT);let W=S.versionInt;for(const C of G)S=Ls(S,C),W=Math.max(W,C.versionInt??-1);S={...S,versionInt:W},M.textdocById[v]=void 0,ve(M,S)}}),!X)?g:R(g,M=>{ve(M,X,!1)})},[K,_,X,xe]),Z=u.useMemo(()=>R(U,g=>{g.fetchError=c,g.isFetchingFromPersistence=f}),[U,c,f]),fe=As(),Y=u.useMemo(()=>E!=null&&E.length?ws(i,U,fe,E):null,[E,i,fe,U]),ee=Es(i,Y,m),he=u.useMemo(()=>ee?Os(Z,ee):Z,[Z,ee]);return u.useEffect(()=>{t&&Ws(a)},[s,t,a.length]),u.useEffect(()=>{Fs(Y)},[Y]),u.useMemo(()=>R(he,g=>{var O,S,G,W;const M=Us(a,C=>C.messages),v={},b=Gs(M);for(let C=b.length-1;C>=0;C--){const se=b[C];if(se.type!==Rs.Canmore)continue;const F=Vs(se.messages),te=qs(se.messages),D=((S=(O=F==null?void 0:F.message.metadata)==null?void 0:O.canvas)==null?void 0:S.textdoc_id)??((W=(G=te==null?void 0:te.message.metadata)==null?void 0:G.canvas)==null?void 0:W.textdoc_id);D&&F!=null&&!v[D]&&(v[D]=!0,F.nodeId!==g.lastCanvasAssistantMessageById[D]&&(g.lastCanvasAssistantMessageById[D]=F.nodeId))}}),[he,a])}const Et=()=>{const{value:s}=ce("44045625");return s},pn=()=>{const{value:s}=ce("3700195277");return s||!1},Qe=s=>{const t=Tt(s);return Et()&&!!(t!=null&&t.includes("canmore"))},Ot=({children:s})=>{const t=He();return t!=null&&t.length?e.jsxs(l.Root,{children:[e.jsx(l.Trigger,{className:"h-10 px-2",children:s}),e.jsx(l.Content,{align:"end",onCloseAutoFocus:n=>n.preventDefault(),children:t.map(n=>e.jsx(Wt,{textdocId:n},n))})]}):null},Wt=({textdocId:s})=>{const t=Me(ze(s));return e.jsx(l.Item,{icon:me,onClick:()=>{zs.logButtonClick(Hs.FILE_DRAWER_ITEM),Ae(t.textdocId)},children:t.title})},Ft=()=>{const s=T(),t=He(),n=Qs();if(!t||n)return null;const a=t.length;return a===1?e.jsx(_t,{textdocId:t[0]}):e.jsx(Ot,{children:e.jsx(A,{label:s.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:e.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[e.jsx(me,{className:"icon-xl-heavy"}),a]})})})},_t=({textdocId:s})=>{const t=T(),n=Me(ze(s));return e.jsx(A,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:e.jsx(Q,{onClick:()=>Ae(n.textdocId),icon:me})})},Bt=({clientThreadId:s,children:t})=>Qe(s)?e.jsx($s,{children:t}):t;function $e({menuItemComponent:s}){const t=y(),n=z(),a=u.useCallback(()=>{x.logEvent(j.clickSidebarAccountPortalMenuItem),de(n,"Sidebar account menu item")},[n]),{value:o}=as("1028682714"),i=os(()=>is(()=>import("./sso-fjuqtgpha7i6x4xz.js").then(c=>c.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65])).then(c=>c.default));return e.jsxs(e.Fragment,{children:[(t==null?void 0:t.hasPaidSubscription())&&(o?e.jsx(i,{handleClickCustomerPortal:a,menuItemComponent:s}):e.jsx(s,{onClick:a,icon:dt,children:e.jsx(d,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),(t==null?void 0:t.canInteractWithGizmos())&&e.jsx(s,{onClick:()=>{x.logEvent(j.accountMenuClickMyGPTs),n(Ge())},icon:_e,children:e.jsx(d,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),e.jsx(s,{icon:Be,onClick:()=>{k.openModal(we.UserContext),x.logEvent(j.accountMenuClickCustomizeChatGPT)},children:e.jsx(d,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function Je({menuItemComponent:s,routedMenuItemComponent:t}){var o;const n=y(),a=((o=ce("2756095923"))==null?void 0:o.value)&&(n==null?void 0:n.isEdu())&&(n==null?void 0:n.isStandardUserOfAccount());return e.jsxs(e.Fragment,{children:[!a&&e.jsx(t,{href:"/admin",icon:ut,children:e.jsx(d,{...ne.myWorkspaceSettings})}),e.jsx(t,{href:Ge(),onClick:()=>{x.logEvent(j.accountMenuClickMyGPTs)},icon:_e,children:e.jsx(d,{...ne.myGpts})}),e.jsx(s,{onClick:()=>{k.openModal(we.UserContext),x.logEvent(j.accountMenuClickCustomizeChatGPT)},icon:Be,children:e.jsx(d,{...ne.chatPreferences})})]})}const ne=re({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});function xn({onClickSettings:s}){return e.jsxs(oe,{as:"div",className:"group relative",children:[e.jsx(Gt,{}),e.jsx(Js,{children:e.jsx(oe.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:e.jsx(Ut,{onClickSettings:s})})})]})}function Ke(){var o;const s=!((o=y())!=null&&o.isEnterprisey()),t=T(),n=ue(),a=z();return n?e.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[e.jsx("div",{className:"text-sm text-token-text-secondary",children:n==null?void 0:n.email}),s&&e.jsx(A,{label:t.formatMessage(P.addWorkspaceTooltip),side:"right",children:e.jsx("button",{onClick:()=>de(a,"profile menu"),children:e.jsx(ht,{className:"icon-sm text-token-text-primary"})})})]}):null}function Dt(){const s=y();return s==null?e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full px-3 py-2",children:e.jsx(V,{})})}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:e.jsx(Ze,{workspace:s,isLoading:!1,currentWorkspaceId:s.id,showCheck:!1})})]})}function Xe({menuItemComponent:s}){const t=Ee(),n=Se(),{data:a}=H(),o=y(),[i,c]=u.useState(!1),r=ue(),p=T(),f=cs();if(!o||!a)return null;const h=o.isWorkspaceAccount(),w=a.accountItems.length>1,I=a.accountItems,_=Ks([I.find(m=>m.isPersonalAccount()),...I.filter(m=>!m.isPersonalAccount())]);if(_.sort((m,B)=>m.isPersonalAccount()?1:B.isPersonalAccount()?-1:0),!w)return h?e.jsx(Dt,{}):e.jsx(e.Fragment,{children:e.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:r==null?void 0:r.email})});const $=_.map(m=>e.jsx(s,{disabled:m.isDeactivated(),onClick:()=>{if(m.isDeactivated()||m.id===(o==null?void 0:o.id))return;c(!0);const{willRedirect:B}=rs(n,m.id,t,p,f);B||ls()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:m.isDeactivated()?e.jsx(Lt,{workspace:m,isLoading:i}):e.jsx(Ze,{workspace:m,isLoading:i,currentWorkspaceId:o==null?void 0:o.id})},m.id));return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsx(l.Separator,{}),$]})}function Ze({workspace:s,isLoading:t,currentWorkspaceId:n,showCheck:a=!0}){const o=s.canAccessWithCurrentSession,i=!t&&a&&s.id===n;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:e.jsx(ge,{iconSize:"small",workspace:s,className:ke({"flex-shrink-0":!0})})}),e.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:Oe(T(),s)}),t&&e.jsx(V,{}),i&&e.jsx("span",{className:"text-token-text-primary",children:e.jsx(gt,{className:"icon-sm"})}),!o&&e.jsx("span",{className:"text-token-text-primary",children:e.jsx(mt,{className:"icon-sm"})})]}),!o&&e.jsx("div",{className:"rowDivClassName",children:e.jsx("small",{className:"text-token-text-secondary",children:e.jsx(d,{...s.ssoConnectionName?P.authenticateWithSSOToAccessWorkspace:P.authenticateWithoutSSOToAccessWorkspace})})})]})}function Lt({workspace:s,isLoading:t}){const n=T(),a=s.isOwnerOfAccount(),[o,i]=u.useState(!1),c=bt(s.id);return u.useEffect(()=>{c!=null&&o&&(k.setPurchaseWorkspaceData({minimumSeats:Math.max(c,je),existingAccount:s}),i(!1))},[c,o,s]),e.jsxs(e.Fragment,{children:[e.jsxs(A,{className:"flex w-full flex-1 items-center gap-2.5",label:n.formatMessage(P.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[e.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:e.jsx(pt,{className:"icon-sm flex-shrink-0 opacity-30"})}),e.jsx("div",{className:"truncate opacity-30",children:Oe(n,s)})]}),t&&e.jsx(V,{}),!t&&e.jsxs(l.Root,{children:[e.jsx(St,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:e.jsx(xt,{className:"icon-sm m-1"})}),e.jsx(l.Portal,{children:e.jsxs(l.Content,{children:[a&&e.jsx(e.Fragment,{children:e.jsx(l.Item,{onClick:()=>{c==null?i(!0):k.setPurchaseWorkspaceData({minimumSeats:Math.max(c,je),existingAccount:s})},children:o?e.jsx(V,{}):e.jsx(d,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),e.jsx(l.Item,{onClick:()=>{k.setLeaveWorkspaceData(s)},children:e.jsx(d,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function Ut({onClickSettings:s}){const{data:t}=H(),n=y(),a=Te(),o=Re(),{openModal:i}=Ve();if(!n||!t)return null;const c=n.isWorkspaceAccount(),r=!a;return e.jsxs("nav",{children:[e.jsx(Xe,{menuItemComponent:N}),e.jsx(ie,{}),c?e.jsx(Je,{menuItemComponent:N,routedMenuItemComponent:Xs}):e.jsx($e,{menuItemComponent:N}),r&&e.jsx(N,{href:"https://help.openai.com/en/collections/3742473-chatgpt",target:"_blank",onClick:()=>{x.logEvent(j.clickFaqLink)},icon:ft,children:e.jsx(d,{...P.helpAndFaq})}),e.jsx(N,{onClick:s,icon:De,testId:"accounts-settings-button",children:e.jsx(d,{...P.settings})}),o&&e.jsx(Rt,{openDownloadModal:i}),e.jsx(ie,{}),e.jsx(N,{onClick:()=>{x.logEvent(j.clickLogOut,{eventSource:"mouse"}),ye()},icon:Le,children:e.jsx(d,{...P.logOut})})]})}function Gt(){return ue()?e.jsx(Vt,{}):null}function Rt({openDownloadModal:s}){return e.jsxs("span",{children:[e.jsx(ie,{}),e.jsx(N,{icon:Ue,onClick:()=>{x.logEvent(j.accountMenuClickDownloadApp),s()},children:e.jsx(d,{...P.downloadApp})})]})}function Vt(){const{data:s}=H(),t=y(),n=Zs(),a=Ys();if(!t||!s)return null;const o=t.isWorkspaceAccount(),i=s.accountItems.length>1;return e.jsxs(oe.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(ge,{iconSize:"gizmo"})}),e.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[e.jsx("div",{dir:"auto",children:a}),o||i?e.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:n}):null]})]})}const P=re({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"}});function qt({clientThreadId:s,location:t}){const n=Se(),{id:a}=yt(s),o=It(!0),i=z(),c=Ie(),r=ds();return u.useCallback(()=>{us(gs(n))?et(i):c?i({pathname:r.pathname,search:r.search},{state:st()}):(o({modelId:a,location:t}),le.logEvent("chatgpt_web_thread_tap_new_thread"))},[n,t,a,o,i,c,r])}function fn({showShareButton:s,showProfileDropdown:t,clientThreadId:n}){const a=lt(n),o=T(),i=Qe(n),{layer:c}=q("1547743984"),r=c.get("show_share_button_text",!1);return e.jsxs(e.Fragment,{children:[!1,i&&e.jsx(Ft,{}),s&&a&&e.jsx(Bt,{clientThreadId:n,children:r?e.jsx(ae,{onClick:()=>k.openSharingModal(a),icon:Ce,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",children:o.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"})}):e.jsx(A,{label:o.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:e.jsx(Q,{"data-testid":"share-chat-button",onClick:()=>k.openSharingModal(a),icon:Ce})})}),t&&e.jsx(Ht,{})]})}function zt({href:s,children:t,icon:n}){const a=xs();return e.jsx(l.Item,{icon:n,onSelect:()=>a.push(s),children:t})}function Ht(){const{isUnauthenticated:s}=be();return s?e.jsx(Zt,{}):e.jsx(Qt,{})}function Qt(){const{data:s}=H(),t=y(),n=(t==null?void 0:t.isPlus())??!1,a=(t==null?void 0:t.isWorkspaceAccount())??!1,{openSettings:o}=tt(),i=Re(),{openModal:c}=Ve(),{layer:r}=q("2888142241"),{doesUserHaveAnyAccountsWithPlusFeatures:p}=ms(),{layer:f}=q("2670443078");if(!t||!s)return null;const h=s.accountItems.length>1;let w=n;!a&&!n&&p&&f.get("is_gating_fix_enabled",!1)&&(w=p);const I=!a&&!w&&!ps&&r.get("is_upgrade_in_settings",!1);return e.jsxs(kt,{triggerButton:e.jsx("button",{onClick:()=>{x.logEvent(j.accountOpenProfileMenu),le.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",children:e.jsx(ge,{iconSize:"medium"})}),children:[h&&e.jsx(Xe,{menuItemComponent:l.Item}),h?e.jsx(l.Separator,{}):null,a?e.jsx(Je,{menuItemComponent:l.Item,routedMenuItemComponent:zt}):e.jsx($e,{menuItemComponent:l.Item}),e.jsx(l.Item,{icon:De,onClick:()=>o(),"data-testid":"settings-menu-item",children:e.jsx(d,{defaultMessage:"Settings",id:"navigation.settings.0"})}),e.jsx(l.Separator,{}),i&&e.jsx(Jt,{openDownloadModal:c}),I&&e.jsx(Kt,{}),(I||i)&&e.jsx(l.Separator,{}),e.jsx(l.Item,{onClick:()=>{x.logEvent(j.clickLogOut,{eventSource:"mouse"}),x.logLogOutButtonClicked({location:"profile_drop_down"}),ye()},"data-testid":"log-out-menu-item",icon:Le,children:e.jsx(d,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function $t({onClick:s,className:t,testId:n}){const a=T(),o=Ie(),i=o?a.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):a.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return e.jsx(A,{sideOffset:4,label:i,className:ke("flex",t),children:e.jsx(Q,{onClick:()=>{k.closePopoverNavSidebar(),s()},icon:o?Ct:Mt,surfaceContext:"secondary","aria-label":i,"data-testid":n})})}function hn({clientThreadId:s}){const[t]=We(o=>[o.activeStageSidebar]),n=Fe(),a=qt({clientThreadId:s,location:"Navigation actions"});return!n&&!t?null:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xt,{}),e.jsx($t,{onClick:a})]})}function Jt({openDownloadModal:s}){return e.jsx("span",{children:e.jsx(l.Item,{icon:Ue,onClick:()=>{s(),x.logEvent(j.accountMenuClickDownloadApp)},children:e.jsx(d,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function Kt(){const s=z(),t=y(),n=(t==null?void 0:t.wasPaidCustomer())??!1,a=()=>{le.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),x.logEvent(j.plusUpgradeInSettingsMenuClicked),de(s,"Upper right settings menu")};return e.jsx(l.Item,{icon:vt,onClick:a,children:n?e.jsx(d,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):e.jsx(d,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Xt(){const s=T(),[t]=We(i=>[i.activeStageSidebar]),n=Fe(),a=Te(),{isUnauthenticated:o}=be();return!t&&!n||!a||o?null:e.jsx(A,{label:s.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:e.jsx(Q,{"aria-label":s.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:k.toggleNavSidebar,icon:jt,surfaceContext:"primary"})})}function Zt(){const s=Ee(),t=nt(),n=at(Yt.signUpCta),{layer:a}=q("3637408529"),o=a.get("is_desktop_primary_auth_button_on_right",!1),i=()=>{s({authType:"login",callback:h=>{x.logLogInButtonClicked({location:"Chat header",provider:h})}})},c=()=>{s({authType:"signup",callback:h=>{x.logSignUpButtonClicked({location:"Chat header",provider:h})}})},r=e.jsx(ae,{onClick:i,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:e.jsx(d,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),p=e.jsx(ae,{color:t?"secondary":"primary",onClick:c,size:"small","data-testid":"signup-button",children:e.jsx(d,{...n})},"signup"),f=t?[r,p]:[p,r];return e.jsx("div",{className:"flex items-center justify-center gap-2",children:o?f.reverse():f})}const Yt=re({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{fn as C,Xt as E,Ht as L,$t as N,Qt as P,mn as T,Et as a,Qe as b,xn as c,pn as d,un as e,dn as f,hn as g,ze as h,gn as i,L as j,qt as u};
//# sourceMappingURL=blb377wa0lv0gl05.js.map
