const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-jr3rp3wwrfsti2ns.js","assets/fdeezme0a1kjg5dr.js","assets/l2x363deltqu16i4.js","assets/root-nwhmkg2b.css","assets/c7dwxfs5kdj1bl15.js","assets/ogztjg6i1ufex94l.js","assets/conversation-small-ogafjggy.css","assets/nb8fog2m0zn1vkw6.js","assets/petfx4755egr0cyi.js","assets/pfbppc22n2u0bv2y.js","assets/lq8ha7xgc6dhz3qs.js","assets/hb328n8xqzp0sm9b.js","assets/esyjtlhkqh9o3cyb.js","assets/k3ysicyyg2y0bmh1.js","assets/bcqadoqnri3facm3.js","assets/m3nfayvtkdidyx64.js","assets/erjk1ajsgwn16yrn.js","assets/nemtmxhvv49w7i6z.js","assets/oh1k8tgivjfm54y4.js","assets/kfgmfu2g7njykl0w.js","assets/nub2ry8rycqs6jar.js","assets/jxqpjk5fljkvcu99.js","assets/lm70orqcpsdn1l6z.js","assets/me9sn69xj6qbgn5v.js","assets/jlc9kd4hax1nsl09.js","assets/knvzkemyozyrgt7k.js","assets/itghwucfyv5ciib7.js","assets/gvup25gd1bihgvpo.js","assets/cedm2gmsd8tvfrjl.js","assets/l6zq9bqlbc7w3rqw.js","assets/pbjkb9jukfuqbfzq.js","assets/oz3duvmaz50nbbdf.js","assets/kqwdyvkaaavvn8k3.js","assets/ng3dixsrp0u7ek0c.js","assets/ejli1n7kq5kiseuz.js","assets/effhjcbuxkvt4hf4.js","assets/ldjt4f6cu7p4unqs.js","assets/fzrn137102spawew.js","assets/e9lafxuzyeh4418f.js","assets/nwf4orjgvloty04q.js","assets/lkir15b71a4ujlx2.js","assets/nhwwej1nq0zrd7sc.js","assets/b7etkvg1v6re9epe.js","assets/bbtsv9sz643qwos2.js","assets/nd6xfjvh4k7xojtv.js","assets/b8v3r0eino5ptimr.js","assets/fxi2zv7klj8671ef.js","assets/nvxjf4dl0snwls02.js","assets/hve9s2tj89ebnfyj.js","assets/ecyh24x2bgz15kou.js","assets/k9bqu6kxetketkzo.js","assets/lwopbmp6eacvpmo0.js","assets/h4dy68s00h3jcck9.js","assets/iej0cupg2dqkmejt.js","assets/jlwerhlpcmqzxlwm.js","assets/f06odbtfacn5svve.js","assets/jk8w36bsokizpx57.js","assets/ee37mudhurosydmu.js","assets/kj4psqpvs1pe7grq.js","assets/ifafg72pxhm24i7a.js","assets/dlisjo8whjafcpn1.js","assets/eks7vzk1ggx580y4.js","assets/mh51a4q4ch8opjy0.js","assets/swiper-kmk1dd5x.css","assets/ma7y0qi6uw4n8xey.js"])))=>i.map(i=>d[i]);
import{bm as O,l as e,r as c,m as h,$ as y,a2 as R,a1 as _,a as F,dX as $,a$ as N,bg as U,a0 as V,aD as w,aE as T,X as W,U as X,eB as q,aN as Q,Q as K,cj as Y}from"./fdeezme0a1kjg5dr.js";import{cL as j,a8 as v,c5 as Z,e2 as J,du as ee,X as se,D as te,bM as ne,e3 as ae,e4 as ie,aD as H,ak as oe,q as re,e5 as ce,e6 as le,c7 as de,c8 as ue,c0 as M,e7 as C,c3 as me,e8 as he,Z as S,c1 as fe,aC as xe,c as pe,N as ge,e9 as be,bw as ye}from"./ogztjg6i1ufex94l.js";import{p as Se,L as je,a$ as ve,b0 as Ie}from"./l2x363deltqu16i4.js";import{m as Ne}from"./petfx4755egr0cyi.js";import{d as Ce,m as ke}from"./lq8ha7xgc6dhz3qs.js";import{u as we,a as A,H as Te,b as He}from"./dlisjo8whjafcpn1.js";import{u as Me,r as Ae}from"./erjk1ajsgwn16yrn.js";import{N as Ee}from"./esyjtlhkqh9o3cyb.js";function Le(){const s=j(v.SonicSidebar),[t,n]=c.useState(!1);return s.isLoading||!s.eligible?null:e.jsx(Ne.div,{className:"no-draggable group pb-0",whileTap:{scale:.98},children:e.jsx(Pe,{children:e.jsx(Z,{href:"/search",target:"_blank",icon:e.jsx("div",{className:h("gizmo-shadow-stroke mr-[0.5] flex h-6 w-6 items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:e.jsx(J,{})}),label:"SearchGPT",hoverRightIcon:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Be,{isOpen:t,setIsOpen:n,onDismiss:()=>s.markAsViewed()}),e.jsx(Se,{className:h("icon-md text-token-text-tertiary",!t&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function Ge(){const s=ne(),t=j(v.hasSeenSncSidebarTooltip),n=ae(),i=ie(),{activeModals:o}=H(),a=oe();return!t.isLoading&&t.eligible&&!n&&o.size===0&&!s&&!i&&!a}function Pe({children:s}){const t=Ge(),n=j(v.hasSeenSncSidebarTooltip);return t?e.jsx(ee,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:n.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:e.jsx("div",{className:"w-full",children:s})}):e.jsx(e.Fragment,{children:s})}function Be({isOpen:s,setIsOpen:t,onDismiss:n}){return e.jsx(se,{open:s,onOpenChange:t,triggerButton:e.jsx("button",{className:h("flex text-token-text-tertiary",s?"":"invisible group-hover:visible"),onClick:i=>{i.preventDefault()},children:e.jsx(je,{className:"icon-md"})}),children:e.jsx(te.Item,{onClick:i=>{i.preventDefault(),n()},children:e.jsx(y,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}function De(){const s=O("114024");return!s.value||s.isLoading?null:e.jsx(Le,{})}const k=V({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function ze({activeId:s,isPrimaryBackgroundColor:t}){const n=F(),[i,o]=c.useState(!1),[a,l]=c.useState(0),r=$(),{conversations:d,hasNextPage:f,fetchNextPage:p,isLoading:x,isFetchingNextPage:E,isError:I}=Me(),g=c.useRef(null),L=c.useCallback(m=>{x||m==null||(g.current?.disconnect(),g.current=new IntersectionObserver(z=>{z[0].isIntersecting&&f&&p()}),g.current.observe(m))},[x,f,p]);c.useEffect(()=>()=>{g.current?.disconnect()},[]),c.useMemo(()=>{re.publish({kind:"refreshHistory",conversations:d})},[d]);const b=d;c.useEffect(()=>{const m=ce(le(),Date.now());r(()=>{l(a+1)},m+1e3)},[a,r]);const u=b.length===0;c.useEffect(()=>{u||de({namespace:ue.ChatPageLoad})?.logTiming("render_history_items")},[u]);const G=we(b,a),{isCollapsible:P}=A(),B=H(m=>m.isHistoryCollapsed),D=M();return e.jsxs(_e,{$centered:x||I||u,$screenArch:D,children:[u&&x&&e.jsx(N,{className:"m-auto"}),u&&I&&e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(y,{...k.unableToLoadHistory}),!i&&e.jsx("div",{className:"mt-1",children:e.jsx(U,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{o(!0),Ae(n)},children:e.jsx(y,{...k.retryButton})})})]}),!x&&!u&&e.jsx("div",{children:P&&B?e.jsx(Oe,{activeId:s,items:b,isPrimaryBackgroundColor:t}):e.jsx(Te,{activeId:s,bucketedItems:G,hasNextPage:f,items:b,isPrimaryBackgroundColor:t,infiniteScrollTriggerElementRef:L})}),E&&e.jsx("div",{className:"m-4 mb-5 flex justify-center",children:e.jsx(N,{})})]})}function Oe({activeId:s,items:t,isPrimaryBackgroundColor:n}){const{isCollapsible:i,recentConversationLimit:o}=A(),a=M(),l=t.slice(0,o);if(s){const r=t.findIndex(d=>d.id===s);r>o-1&&l.push(t[r])}return e.jsxs("div",{className:h(n&&!a&&"first:mt-0",!a&&"relative mt-5 last:mb-5"),children:[e.jsx("div",{className:h("sticky top-[--sidebar-sticky-threshold]",a&&["z-5",C.historyHeading,C.historyHeadingTimeline],!a&&"z-20"),children:e.jsx("span",{className:"flex h-9 items-center",children:e.jsx(me,{$screenArch:a,children:e.jsx(y,{id:"VbQeVG",defaultMessage:"Recent"})})})}),e.jsx("ol",{className:a?"mt-1 flex flex-col gap-0.5":void 0,children:l.map((r,d)=>{const f=s===r.id,p=d===0;return e.jsx(He,{item:r,isActive:f,isFirstItem:p,isInRecents:!0,isPrimaryBackgroundColor:n,testId:`history-item-${d}`},`history-item-${r.id}`)})}),i&&e.jsx(he,{type:"more",onClick:S.toggleHistoryCollapsed})]})}const Re=R.memo(ze),_e=_.div`flex flex-col gap-2 pb-2 text-token-text-primary text-sm
${({$centered:s,$screenArch:t})=>[s&&"h-full justify-center items-center empty:hidden",t?"mt-0 pb-8":"mt-5"]}`,Fe=w(()=>T(()=>import("./sso-jr3rp3wwrfsti2ns.js").then(s=>s.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63])).then(s=>s.FannyPackAction)),$e=w(()=>T(()=>import("./ma7y0qi6uw4n8xey.js"),__vite__mapDeps([64,1,2,3,5,6,45,9,10,8,60,16,18,44,12,13,14])).then(s=>s.GizmoSidebarList));function Ze({clientThreadId:s,onNewThread:t}){const n=Ce(s),i=Q(),{isUnauthenticated:o}=K(),a=ke(s),l=Y();return o?null:e.jsxs(e.Fragment,{children:[e.jsx(ye,{onNewThread:t}),i?.canInteractWithGizmos()?e.jsx($e,{currentGizmoId:a}):e.jsx(De,{}),!o&&e.jsx(Re,{activeId:l?void 0:n})]})}function Je({className:s,onNewThread:t}){const n=W(),i=X(),o=fe(),a=q(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:l}=xe();return e.jsxs("div",{className:h("flex",a?.visible&&a.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(pe,{sideOffset:4,label:n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(ge,{className:"no-draggable","aria-label":n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{be(i)?S.toggleNavSidebar():S.togglePopoverNavSidebar()},icon:ve,mobileIcon:Ie,surfaceContext:"secondary","data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[l&&e.jsx(Fe,{}),!o&&e.jsx(Ee,{onClick:t,testId:"create-new-chat-button"})]})]})}export{Ze as C,Re as H,Je as S,De as a};
//# sourceMappingURL=ig6jcpehopp4zwor.js.map
