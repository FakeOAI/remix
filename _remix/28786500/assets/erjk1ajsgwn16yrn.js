import{c as m,i as p,ei as A,bR as g,ej as R,aN as h,dh as C,j as I,r as u}from"./fdeezme0a1kjg5dr.js";import{T}from"./lq8ha7xgc6dhz3qs.js";const c=m(p(()=>({statusMap:{}}))),N=s=>c(t=>t.statusMap[s]),F=(s,t)=>{c.setState(n=>{n.statusMap[s]=t;const e=T.getServerThreadId(s);e&&(n.statusMap[e]=t)})},f=s=>{c.setState(t=>{for(const{id:n,async_status:e}of s)e!=null&&(t.statusMap[n]={source:A.SERVER,value:e})})},_=28,y="conversationHistory";function H(){const t=g()?.includes(R)??!1,n=h(),e=!t&&!!n?.data,{data:r,fetchNextPage:S,hasNextPage:d,isInitialLoading:v,isFetchingNextPage:E,isError:l}=C({queryKey:[y],queryFn:async({pageParam:a})=>{const o=await I.getConversations({offset:a,limit:_});return f(o.items),o},initialPageParam:0,getNextPageParam:a=>{const o=a.offset+a.limit;return o<a.total?o:void 0},enabled:e}),i=u.useMemo(()=>r?.pages.flatMap(a=>a.items)??[],[r]);return u.useEffect(()=>{f(i)},[i]),{conversations:i,data:r,fetchNextPage:S,hasNextPage:d,isLoading:v,isFetchingNextPage:E,isError:l}}function P(s){s.invalidateQueries({queryKey:[y]})}export{y as C,N as a,P as r,F as s,H as u};
//# sourceMappingURL=erjk1ajsgwn16yrn.js.map
