import{m as e,r as o,bo as g,aJ as j,aC as h}from"./g92hdia1euilhv3m.js";import{bf as b,bg as p,bh as f,bi as v,bj as N,bk as _}from"./l912w0bwi7cbhgoi.js";function A({item:s}){const l=b(),d=p();let x=s.attributions_debug&&l!==s.attributions_debug.influence_temperature&&f(s.attributions_debug,l,void 0,d),n=s.attributions;const a=s.attributions_debug?.filtered_segments;return d&&a&&(n=n?.filter(({attribution_index:t})=>a.includes(t))),e.jsxs("div",{className:"text-left text-xs text-token-text-secondary",children:[x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{children:s.attributions_debug?.ref_id}),e.jsxs("label",{className:"font-bold",children:["Probabilities (temperature: ",l,")"]}),e.jsxs("div",{className:"grid grid-cols-[auto,auto,auto] place-items-start gap-1",children:[e.jsx("div",{children:"Segment"}),e.jsx("div",{children:"Probability"}),e.jsx("div",{children:"Influence"}),x?.map(({attribution_index:t,probability:r,influence:i})=>e.jsxs(o.Fragment,{children:[e.jsx("div",{children:t}),e.jsx("div",{children:r.toPrecision(4)}),e.jsx("div",{children:i?.toPrecision(4)})]},t))]})]}),e.jsxs("label",{className:"font-bold",children:["Probabilities (default temp"," ",s.attributions_debug?.influence_temperature,")"]}),e.jsxs("div",{className:"grid grid-cols-[auto,1fr] place-items-start gap-1",children:[e.jsx("div",{children:"Segment"}),e.jsx("div",{children:"Probability"}),n?.map(({attribution_index:t,probability:r})=>e.jsxs(o.Fragment,{children:[e.jsx("div",{children:t}),e.jsx("div",{children:r.toPrecision(4)})]},t))]}),s.attributions_debug?.timings&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"font-bold",children:"Timings"}),e.jsx("div",{className:"grid grid-cols-[auto,1fr] place-items-start gap-1",children:Object.entries(s.attributions_debug.timings).map(([t,r])=>e.jsxs(o.Fragment,{children:[e.jsx("div",{children:t}),e.jsxs("div",{children:[r.toFixed(0),"ms"]})]},t))})]}),e.jsx("label",{className:"font-bold",children:"Debug info"}),e.jsxs("div",{className:"grid grid-cols-[auto,1fr] place-items-start gap-1",children:[e.jsx("div",{children:"Segment start idx"}),e.jsx("div",{children:s.attributions_debug?.start_idx}),e.jsx("div",{children:"Segment end idx"}),e.jsx("div",{children:s.attributions_debug?.end_idx})]})]})}function F({attributions:s,attributionsDebug:l,children:d}){const x=v(),n=g().resolvedTheme==="dark",a=o.useMemo(()=>s?.map((i,c)=>({...i,originalIndex:c}))?.toSorted((i,c)=>c.probability-i.probability),[s]),t=b(),r=l&&s&&l.influence_temperature!==t&&N(s,t);return!a||!x?d:e.jsx(j,{label:e.jsxs("div",{className:"text-left text-xs font-normal text-token-text-primary",children:[e.jsx("div",{className:"font-bold",children:"Attributions (Debug)"}),e.jsxs("div",{className:"grid grid-cols-[200px,1fr,1fr] gap-1",children:[e.jsx("div",{children:"Source"}),e.jsxs("div",{children:["τ=",l?.influence_temperature]}),e.jsx("div",{children:r&&`τ=${t}`}),a.map((i,c)=>{const m=i.source_type==="prior",u=m?"text-red-500":i.url?"":"text-gray-500";return e.jsxs(o.Fragment,{children:[e.jsx("div",{className:h("flex flex-col",u),children:m?e.jsx("div",{className:"line-clamp-1 font-bold",children:"Model Prior"}):i.url?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"line-clamp-1 font-bold",children:e.jsx(_,{url:i.url})}),"(",i.source_type,")"]}),e.jsx("div",{className:"line-clamp-1 text-xs",children:i.url})]}):e.jsxs("div",{className:"text-xxs line-clamp-1",children:["(",i.source_type,")"]})}),e.jsxs("div",{className:u,children:[(i.probability*100).toFixed(2),"%"]}),e.jsx("div",{className:u,children:r&&`${(r[i.originalIndex].probability*100).toFixed(2)}%`})]},c)})]})]}),theme:n?"default":"white",delayDuration:0,className:"inline",side:"left",children:d})}export{F as A,A as E};
//# sourceMappingURL=ftq5cjmm9nctlu5n.js.map
