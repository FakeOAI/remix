import{aW as h,aX as m,p as k,aY as C,ae as f,J as M,U as u,aZ as p}from"./i3a1yy64f4q7ldra.js";import{P as A,y as S,a2 as K,r as v,I as B,cI as D,cv as L,a5 as b,K as w}from"./l6uyzplo1iial8dt.js";import{T as c}from"./l4esj4hluvw92hog.js";const T=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function P(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const e={Mod:"mod",Comma:",",...h.Key},x={[e.Mod]:P()?"⌘":"Ctrl",[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"},O=t=>t.map(o=>x[o]??o),a=w({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),E=new m,R=({resetThreadAction:t,clientThreadId:o})=>[{key:"newChat",action:t||B,actionMessageDescriptor:a.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:[[e.Mod,"k"]]},{key:"focusPromptTextarea",action:f,actionMessageDescriptor:a.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:()=>{if(o!=null){const s=c.getThreadCurrentLeafId(o),n=c.getThreadConversationTurns(o,s);for(let r=n.length-1;r>=0;r--){const{messages:d}=n[r],g=[...d.reduce((l,i)=>i.err==null&&i.message.author.role===D.Assistant&&i.message.recipient==="all"?l+(l?`

`:"")+L(i.message):l,"").matchAll(T)],y=g.length?g[g.length-1][1]:null;if(y!=null){M(y).then(()=>{b.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:a.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:()=>{o!=null&&c.copyLastMessageToClipboard(o,"keyboard").then(()=>{b.success("Last response copied to clipboard")})},actionMessageDescriptor:a.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>u.toggleModal(p.UserContext),actionMessageDescriptor:a.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>u.toggleNavSidebar(),actionMessageDescriptor:a.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(o){const s=c.getServerThreadId(o);s&&E.publish({kind:"deleteChat",serverThreadId:s})}},actionMessageDescriptor:a.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"toggleKeyboardActions",action:()=>u.toggleModal(p.KeyboardActions),actionMessageDescriptor:a.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]}],U=t=>C(t,o=>{A.logEvent(S.keyboardShortcut,{keyboardActionKey:o.key}),K.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:o.key})},{enabled:!0}),F=({resetThreadAction:t,clientThreadId:o}={})=>v.useMemo(()=>R({resetThreadAction:t,clientThreadId:o}).filter(({enabled:n=!0})=>n),[o,t]),H=({resetThreadAction:t,clientThreadId:o})=>{const s=F({resetThreadAction:t,clientThreadId:o}),r=k(d=>d.isVoiceActive)?[]:s;U(r)};export{E as G,F as a,O as g,H as u};
//# sourceMappingURL=l2jhz8ld0hmh507k.js.map
