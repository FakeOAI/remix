const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/m2y24y3lntgl7w5n.js","assets/o1ivbuadejprpakj.js","assets/hpmltgx65508529x.js","assets/root-nv4wy9md.css","assets/i16nwty7q09iq1st.js","assets/conversation-small-cll5buey.css","assets/mjcfyknvrjj9hd19.js","assets/j8qjjjf38v0oqfi8.js","assets/j76lrd6kdu2dvuce.js","assets/bwu3xfza0pxwe6ru.js","assets/l8i8os8zb9hbkizc.js","assets/kgovzb8a5v2gsd51.js","assets/cg1djtp0bw9bc15a.js","assets/j4j4hzxgjp6fmqs6.js","assets/cydma3qyvyx80hyp.js","assets/l49eh3lvilhue1yc.js","assets/e9lafxuzyeh4418f.js","assets/ca6isrh75bfn19jp.js","assets/c2xwnbedvlrmbzk4.js","assets/g938os69qqp130as.js","assets/g1tza8mb4db29n1w.js","assets/yfws6zhubqtyrw9s.js","assets/cdfz4zzo8ae7sffb.js","assets/hx2tdb79whqndr2i.js","assets/kwa3fw7gjdaasnda.js","assets/hcdx55t4k5s9h90a.js","assets/l4ck0jsx010sty0l.js","assets/nbsdgm0upgk4irzm.js","assets/jq9wblohokz1apkp.js","assets/m1obf60srwp2ts7s.js","assets/jkmald09oiirozl9.js","assets/l8y2uz74xgfbbtpp.js","assets/kbbxcv4fu1hoxkfv.js","assets/me6ol1fk19tysqpp.js","assets/lgmd1aoy1h693zh7.js","assets/j386njj71b7azc1t.js","assets/kayo3zzhv3q9694m.js","assets/oun8xzzvjkci8b9u.js","assets/hbq7cx78oqnuegh8.js","assets/fd6fe0rviyf88ws6.js","assets/ndpvxw383vfc4cps.js","assets/mi42bzcdvpy1x8ji.js","assets/m3b5dzxhnkxs567i.js","assets/bhc6dxlbkrv8rm6j.js","assets/kqwdyvkaaavvn8k3.js","assets/lxeo5vj71yvftln5.js","assets/cq2vk92by17h7xws.js","assets/m6nogll5ylsg3y3n.js","assets/mw79q27te9dqgj7u.js","assets/kmhkr535jx6x4uq4.js","assets/olfm6rxk5ysu76rc.js","assets/dwpg41rpewldb6n9.js","assets/biuy1fayr0hccpv6.js","assets/zqo6l2pbq2z3943o.js","assets/i7xeh80xiny5qb6b.js","assets/lp06g07cs6ua1gd5.js","assets/983a0dy92b3ronpv.js","assets/evhglvr63v3yxq7s.js","assets/n8699jeuc3002id0.js","assets/i5ghqjzqbmfh85xl.js","assets/x1nuwls0vwzrssgy.js","assets/hpsv3ou34o5l680l.js","assets/3fewmy3xjhyris2h.js","assets/z14updu7u7bgo3o7.js","assets/gfs1w60p86cdkwba.js","assets/jnkgkn5x4vbbfzyc.js","assets/f9d0n1fmvnoaufk5.js","assets/eqblm3u1mo9h1kfx.js","assets/jvq3actf1qss8vnf.js","assets/cejk4t702l9hwngc.js","assets/owhksomqrhj77rp9.js","assets/f1f5uyt10v85vvab.js","assets/malxuccb8f4hgtad.js"])))=>i.map(i=>d[i]);
import{y as e,bB as Y,a$ as Pe,b0 as De,aZ as Ie,r,D as H,av as D,l as Be,S as F,P as xe,b as be,a1 as y,a6 as G,W as ts,X as $,a9 as os,a7 as ns,Z as p,$ as x,ag as Ve,bO as is,bN as rs,bL as cs,aR as ls,w as Re,ei as Ce,bv as Fe,bw as ds,a3 as us,au as gs,O as m,aw as hs,u as We,f6 as fs,cj as He,ar as ms,a8 as ps,d6 as S,c8 as xs,fi as bs,x as Se,aW as Cs,dN as ye,bn as Ss,bo as ys,bp as js,bW as Ms,j as ks}from"./o1ivbuadejprpakj.js";import{r as vs,k as X,f as Z,j as As}from"./hcdx55t4k5s9h90a.js";import{hH as J,eN as ws,hI as Ge,hJ as $e,hK as _s,hL as ze,u as Ts,hM as Es,hN as Os,S as Ns,hO as Ls,hP as Ps,by as W,hQ as Ds,hR as Is,hS as Bs,hT as Vs,hU as Rs,hV as Fs,hW as Ws,hX as Hs,hY as Gs,hZ as $s,h_ as zs,h$ as Us,i0 as Ks,i1 as qs,i2 as Qs,i3 as Ys,i4 as Xs,i5 as Zs,i6 as Js,i7 as ea,i8 as sa,i9 as aa,ia as ta,cl as ee,ib as oa,ic as na,eY as ia,cZ as Ue,c9 as q,fv as je,id as Ke,ie as qe,ha as ra,a7 as ca,ig as la,hj as Me,gc as da,bW as Q,bX as ke,cz as ua,c2 as ve,eW as ga,ih as ha,ce as fa,ii as Ae,al as ma,ij as pa,az as xa,eI as ba,cb as we,cc as Ca,gf as Sa,ik as ya,il as ja,c0 as Ma,im as ka,io as va,c5 as Aa,a5 as _e,ip as wa,r as _a,co as Ta,iq as Ea,cB as Oa,cp as Na,dm as La,ir as Pa,dn as Da,is as Ia}from"./i16nwty7q09iq1st.js";import{U as g,G as P,u as M,c as Qe,d as K,b as Ba}from"./cydma3qyvyx80hyp.js";import{a as Va,b as Ra,t as Fa,T as V,c as Wa,d as Ha,m as Ga}from"./j76lrd6kdu2dvuce.js";import{u as $a,r as za,a as Ua}from"./kgovzb8a5v2gsd51.js";import{L as Ka}from"./cg1djtp0bw9bc15a.js";import{S as Te,b as qa,c as Qa,N as Ya}from"./i5ghqjzqbmfh85xl.js";import{u as Ye,b as Xa,g as Za}from"./x1nuwls0vwzrssgy.js";import{S as Ja,C as et}from"./hpsv3ou34o5l680l.js";import{T as st,e as at,b as Xe}from"./g1tza8mb4db29n1w.js";import{T as Ze}from"./z14updu7u7bgo3o7.js";import{m as Ee}from"./bwu3xfza0pxwe6ru.js";import{a as tt,b as Oe}from"./3fewmy3xjhyris2h.js";import{aL as ot,bH as nt,V as it}from"./hpmltgx65508529x.js";import{C as rt}from"./gfs1w60p86cdkwba.js";const ct=60*60*24;function lt(s,a=!1){return Y()==null||a?"loading":!s||Pe.getCookie(De.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function dt({onClose:s}){const{data:{ageVerificationType:a,ageVerificationDeadline:t}={}}=J();return a==="passive"?e.jsx(ut,{onClose:s}):a==="countdown"&&t!=null?e.jsx(gt,{onClose:s,ageVerificationDeadline:t}):null}const ut=({onClose:s})=>{const{country:a}=Ie();return r.useEffect(()=>{H.addAction("privacy_policy.show_age_verification_modal",{country:a})},[a]),e.jsx(ws,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(D,{color:"primary",onClick:async()=>{await Be.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(D,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},gt=({onClose:s,ageVerificationDeadline:a})=>{const t=a!=null?Math.floor(a/60/60/24):0;r.useEffect(()=>{F.logEvent("chatgpt_compliance_age_verification_seen"),xe.logEvent(be.complianceAgeVerificationSeen)},[]);const{country:o}=Ie();return r.useEffect(()=>{H.addAction("privacy_policy.show_age_verification_countdown",{country:o})},[o]),e.jsxs(Ge,{children:[e.jsx($e,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(y,{...Ne.ageVerificationTitle,values:{deadline:t,learnMoreLink:i=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:i})}})}),e.jsx(_s,{altText:"Dismiss notification",asChild:!0,children:e.jsx(D,{color:"primary",size:"small",onClick:()=>{F.logEvent("chatgpt_compliance_age_verification_clicked"),xe.logEvent(be.complianceAgeVerificationClicked),Pe.setCookie(De.AgeVerification,"true",{maxAge:ct,path:"/"}),s(),g.openModal(P.AgeVerificationInterstitial)},children:e.jsx(y,{...Ne.startVerification})})}),e.jsx(ze,{})]})},Ne=G({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function ht({onClose:s}){const a=$(),t=os(),{openSettings:o}=Ts(),i=Es(),{session:n}=ns(),{data:{isStorageComplianceEnabled:l}={}}=J(),{data:c,isLoading:f}=Os({enabled:!!(l&&n),select:b=>!b.cookie_consent.is_required});return r.useEffect(()=>{c===!0&&s()},[c,s]),f?null:e.jsx(ft,{onReject:()=>{i.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){t.success(a.formatMessage(L.updateSuccess))},onError(){t.danger(a.formatMessage(L.updateFailure))}}),s()},onAccept:()=>{i.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){t.success(a.formatMessage(L.updateSuccess))},onError(){t.danger(a.formatMessage(L.updateFailure))}}),s()},children:e.jsx(y,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:b=>e.jsx(Ka,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:b}),manageLink:b=>e.jsx(mt,{onClick:()=>{o(Ns.DataControls)},children:b})}})})}function ft({children:s,onAccept:a,onReject:t}){return r.useEffect(()=>{H.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs(Ge,{children:[e.jsxs($e,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(D,{color:"secondary",size:"small",onClick:t,children:e.jsx(y,{...L.reject})}),e.jsx(D,{color:"secondary",size:"small",onClick:a,children:e.jsx(y,{...L.accept})})]})]}),e.jsx(ze,{})]})}const mt=ts.button`underline font-normal text-green-600`,L=G({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),pt=p(()=>x(async()=>{const{ModelOnboardingNUXModal:s}=await import("./m2y24y3lntgl7w5n.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(({ModelOnboardingNUXModal:s})=>s),{ssr:!1}),xt=({onClose:s})=>{const a=$(),t=W(ee.isBusinessWorkspace),o=W(n=>n.currentWorkspace),i=t?a.formatMessage(Le.workspaceWelcome,{workspaceName:o?.name}):"ChatGPT";return e.jsx(Fe,{isOpen:!0,onClose:ds,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(Le.personalOnboardingSubheading),children:e.jsx(oa,{onClose:s,scope:na.Personal})})};function bt({clientThreadId:s}){const[a,t]=r.useState(0),{hasSeenOnboardingDate:o}=Ls(),{hasSeenTeamOwnerOnboardingDate:i}=Ps(),n=W(ee.isBusinessWorkspace),l=Ve(),[c,f]=r.useState(!1),{data:b,isPending:I}=J(),E=lt(b,I),{eligible:k,isLoading:v}=$a(),A=is(),j=rs(),w=cs(),B=Va(()=>Ra.getThread(s)),h=Fa(s)||!B,O=V.getConversationOrigin(s),{data:C,isError:T}=ls(),d=C!=null,_=C&&C?.accountItems.length>1&&C.currentAccountId==null,R=C?.accountItems.some(u=>u.isPersonalAccount()),se=!!C?.accountItems&&C.accountItems.length>0&&C.accountItems.every(({canAccessWithCurrentSession:u})=>!u),{eligible:ae,isLoading:te}=Ds(),{value:oe}=Re("1542198993"),{punchOutRequireLoginInfo:ne}=Is(),{state:ie}=Bs(),{isOpen:re,isLoading:ce}=Vs(),{isOpen:le,isLoading:de}=Rs(),{isOpen:ue,isLoading:ge}=Fs(),{isOpen:he,isLoading:fe}=Ws(),{state:me}=Hs(),N=r.useMemo(()=>[{Component:Gs,getModalState:()=>ne?"show":"hide",isDeferrable:!1},{Component:$s,getModalState:()=>ie,isDeferrable:!1},{Component:zs,getModalState:()=>me,isDeferrable:!1},{Component:Us,getModalState:()=>ce||h?"loading":O===Ce.APPLE?"hide":re?"show":"hide",isDeferrable:!1},{Component:Ks,getModalState:()=>fe||h?"loading":O===Ce.APPLE?"hide":he?"show":"hide",isDeferrable:!1},{Component:xt,getModalState:()=>n?"hide":o===null?"loading":o===!1?"show":"hide",isDeferrable:!0},{Component:qs,getModalState:()=>T?"hide":_?"show":d?"hide":"loading",isDeferrable:!1},{Component:Qs,getModalState:()=>A!==null?"show":T||d?"hide":"loading",isDeferrable:!1},{Component:Ys,getModalState:()=>j!==null?"show":T||d?"hide":"loading",isDeferrable:!1},{Component:Xs,getModalState:()=>w!=null?"show":T||d?"hide":"loading",isDeferrable:!1},{Component:Zs,getModalState:()=>d?se?"show":"hide":"loading",isDeferrable:!1},{Component:Js,getModalState:()=>de?"loading":le?"show":"hide",isDeferrable:!1},{Component:ea,getModalState:()=>ge?"loading":ue?"show":"hide",isDeferrable:!1},{Component:ht,getModalState:()=>"hide",isDeferrable:!1},{Component:sa,getModalState:()=>!l?.isTeam()||!l?.isOwnerOfAccount()||!R?"hide":!d||i===null?"loading":i===!1?"show":"hide",isDeferrable:!1},{Component:aa,getModalState:()=>n?o===null?"loading":o===!1?"show":"hide":"hide",isDeferrable:!0},{Component:ta,getModalState:()=>te?"loading":ae&&oe?"show":"hide",isDeferrable:!1},{Component:dt,getModalState:()=>E,isDeferrable:!1},{Component:pt,getModalState:()=>v?"loading":k?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(u=>!(u.isDeferrable&&c)&&(!u.expiresAt||u.expiresAt.getTime()>Date.now())),[ne,ie,w,d,o,i,R,v,n,T,A,j,l,se,_,E,k,c,oe,ae,te,re,ce,he,fe,me,de,le,ue,ge,O,h]);r.useEffect(()=>{if(N[a]&&N[a].getModalState()==="hide"){const u=N.findIndex(as=>as.getModalState()!=="hide");t(u)}},[a,N]);const z=N[a],U=z?.getModalState()==="show";if(r.useEffect(()=>{const u=M.getState().activeModals.has(P.BlockingInitialComponent);U!==u&&(U?g.openModal(P.BlockingInitialComponent):g.closeModal(P.BlockingInitialComponent))},[U]),z==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const pe=z.getModalState();if(pe==="loading")return null;pe==="hide"&&t(u=>u+1);const ss=N[a].Component;return e.jsx(ss,{onClose:()=>{f(!0),t(u=>u+1)}})}const Le=G({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ct=p(()=>x(()=>import("./j4j4hzxgjp6fmqs6.js"),__vite__mapDeps([13,1,2,3,8,4,5,9,7,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,6,30,31,32,33,34,35,36,37,38,39,40,41])).then(s=>s.DebugConversationSidebar));function Je({clientThreadId:s}){St();const a=Y(),t=a?.includes("debug"),o=us(),i=M(l=>l.activeSidebar),n=a?.includes("debug")&&i==="debug";return!t||!n?null:e.jsx(Ct,{clientThreadId:s,slideOver:!ia(o),onClose:()=>g.toggleActiveSidebar("debug"),isOpen:!0})}function St(){const a=Y()?.includes("debug");r.useEffect(()=>{if(!a)return;const t=new AbortController;return document.addEventListener("keydown",o=>{o.target instanceof HTMLElement&&["input","textarea","select","button"].includes(o.target.tagName.toLowerCase())||o.key==="\\"&&g.toggleActiveSidebar("debug")},{signal:t.signal}),()=>{t.abort()}},[a])}const yt=p(()=>x(()=>import("./m3b5dzxhnkxs567i.js"),__vite__mapDeps([42,1,2,3,4,5,43,8,9,44,45,7,10,46])).then(s=>s.SearchSources));function jt({clientThreadId:s}){const{resolvedTheme:a}=gs(),t=a==="dark",{turnIndex:o,messageId:i,isOpen:n}=Qe(),l=r.useCallback(()=>{g.closeChatThreadFlyout(s,i)},[s,i]);return!i||!o||!n?null:e.jsx(Ue,{anchor:"top",className:m("relative flex-1 border-l",t?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(q,{name:"search-sources-header",type:"primary",className:m("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(hs,{onClick:l})})}),children:e.jsx(yt,{clientThreadId:s,turnIndex:o,messageId:i,isInSidebar:!0})})}function es({clientThreadId:s}){r.useEffect(()=>{g.closeSharingModal()},[s]);const a=We();r.useEffect(()=>(V.retainThread(s),()=>{setTimeout(()=>{a.invalidateQueries({queryKey:["conversation",s]})},0),V.releaseThread(s)}),[s,a]),r.useEffect(()=>()=>{F.checkGate("3922476776")||je.abortAllRequests()},[s]);const t=r.useRef(s);r.useEffect(()=>{s!==t.current&&(F.checkGate("3922476776")||je.clear(),t.current=s)},[s])}const Mt=p(()=>x(()=>import("./m6nogll5ylsg3y3n.js"),__vite__mapDeps([47,1,2,3,4,5,22,23,9,24,7,8,10,25,26,11,12,27,14,28,29,6,48,49,50,51,52,53,17,54])).then(s=>s.CanvasFocusedViewManager)),kt=p(()=>x(()=>import("./lp06g07cs6ua1gd5.js"),__vite__mapDeps([55,1,2,3,14,4,5,10,8,9,42,43,44,45,7,46,56])).then(s=>s.SearchResultsModal));function vt({clientThreadId:s,setClientThreadId:a,urlThreadId:t,prefetchSearch:o}){const i=Wa();es({clientThreadId:s});const{createNewThread:n,onThreadCreated:l,resetThread:c}=vs({clientThreadId:s,setClientThreadId:a});Ye({resetThreadAction:c,clientThreadId:s});const f=X(s);return e.jsxs(Ze,{clientThreadId:s,children:[e.jsx(Ke,{clientThreadId:s,urlThreadId:t}),e.jsxs(Te,{hideNavigation:i,mobileHeaderContent:e.jsx(st,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(at,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(qa,{onNewChatButtonClick:c}),mobileHeaderRightContent:e.jsx(Qa,{onNewChatButtonClick:c}),sidebar:e.jsx(Ya,{navHeader:s?e.jsx(Ja,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:n}):null,children:e.jsx(et,{clientThreadId:s,onNewThread:n})}),threadFlyout:e.jsx(jt,{clientThreadId:s}),children:[e.jsx(qe,{}),e.jsx(Xe,{clientThreadId:s,onCreate:l,prefetchSearch:o},s),e.jsxs(Te.Sidebars,{children:[f&&e.jsx(Mt,{clientThreadId:s}),e.jsx(Je,{clientThreadId:s}),!1]})]}),e.jsx(At,{clientThreadId:s})]})}function At({clientThreadId:s}){const{value:a}=Re("218782548"),t=ra(),{isOpen:o}=Qe();return o&&(!t||!a)&&e.jsx(kt,{clientThreadId:s})}const wt=450;function _t({children:s,clientThreadId:a,isOpen:t,onClose:o}){return e.jsx(ca,{children:t&&e.jsx(fs,{children:e.jsx(la.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(Ee.div,{className:"h-full w-full bg-token-main-surface-secondary",...Me}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(Ee.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:wt},...Me,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Xe,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})})}const Tt=p(()=>x(()=>import("./evhglvr63v3yxq7s.js"),__vite__mapDeps([57,1,2,3,4,5,25,26,7,8,9,10,11,12,27,14,28,29,6]))),Et=p(()=>x(()=>import("./n8699jeuc3002id0.js"),__vite__mapDeps([58,1,2,3,4,5,37,25,26,7,8,9,10,11,12,27,14,28,29,6,59,39,60,61,62,20,21,22,23,24,30,31,32,33,34,35,36,38,40,41,63,64])).then(s=>s.ImageEditor));function Ot({clientThreadId:s}){const a=da();r.useEffect(()=>{Q.close()},[s]);let t;return a?.type===ke.ADAVisualization?t=e.jsx(Tt,{clientThreadId:s,visualization:a.visualization}):a?.type===ke.Image&&(t=e.jsx(Et,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(_t,{clientThreadId:s,isOpen:a!=null,onClose:Q.close,children:t})}const Nt=()=>{const s=$(),a=M(n=>n.activeModals.has(P.KeyboardActions)),t=()=>{g.closeModal(P.KeyboardActions)},o=Xa(),i=r.useMemo(()=>{const n=Math.ceil(o.length/2);return[o.slice(0,n),o.slice(n)]},[o]);return e.jsx(Fe,{isOpen:a,onClose:t,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage(Dt.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:i.map((n,l)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:n.map(c=>e.jsx(Lt,{action:c},c.key))},`col-${l}`))})})})},Lt=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(y,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:Za(s.keyboardBinding).map((a,t)=>e.jsx(Pt,{keyName:a},`${s.key}-${t}`))})]}),Pt=({keyName:s})=>{const a=m("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:m(a,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:m(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:m(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},Dt=G({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function It(){const s=We(),[a,t]=r.useState(!1);return e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(y,{id:"p9u9Tx",defaultMessage:"Unable to load history"}),!a&&e.jsx("div",{className:"mt-1",children:e.jsx(D,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{t(!0),za(s)},children:e.jsx(y,{id:"3NKcIv",defaultMessage:"Retry"})})})]})}function Bt({clientThreadId:s}){const a=Ha(s),t=He(),{isCollapsible:o,recentConversationLimit:i}=tt(),n={buckets:o,recentConversationLimit:i},l=M(d=>d.isHistoryCollapsed),{conversations:c,buckets:f,hasNextPage:b,fetchNextPage:I,data:E,isLoading:k,isFetchingNextPage:v,isError:A,recents:j}=Ua(n),w=t?void 0:a,B=l&&j.items.length>0,h=!l&&f.length>0,O=c.length===0,C=!A&&(E===void 0||k||v);r.useMemo(()=>{ua.publish({kind:"refreshHistory",conversations:c})},[c]);const T=b&&!O&&!l&&!k&&!v;return e.jsxs(e.Fragment,{children:[A&&O&&!C&&e.jsx(It,{}),B&&e.jsx(ve,{header:j.label,children:j.items.map((d,_)=>e.jsx(Oe,{item:d,isActive:d.id===w,testId:`history-item-${_}`},d.id))}),h&&f.map(d=>e.jsx(ve,{header:d.label,children:d.items.map((_,R)=>e.jsx(Oe,{item:_,isActive:_.id===w,testId:`history-item-${R}`},_.id))},d.key)),C&&e.jsx(ms,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),o&&e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{className:m(!l&&"hidden"),children:e.jsx(ga,{type:"more",onClick:g.toggleHistoryCollapsed})})}),T&&e.jsx(ha,{onPaginate:I})]})}const Vt=p(()=>x(()=>import("./jnkgkn5x4vbbfzyc.js"),__vite__mapDeps([65,1,2,3,33,7,4,5,8,9,10,14,61,26,62,11,12,6,60,25,27,28,29])).then(s=>s.GizmoSidebarList));function Rt({clientThreadId:s}){const a=Ve(),t=Ga(s),{isUnauthenticated:o}=ps();return o?null:e.jsxs("div",{className:m(S.screenContent),children:[null,e.jsx(Bt,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(Vt,{currentGizmoId:t}):null]})}const Ft=p(()=>x(()=>import("./f9d0n1fmvnoaufk5.js"),__vite__mapDeps([66,1,2,3,14,4,5,10,8,9,25,26,7,11,12,27,28,29,6,59,39])).then(s=>s.UserProfileBar),{ssr:!0});function Wt(){const s=M(K.isGptListVisible),a=M(K.isHistoryCollapsed),t=M(K.isGptListCollapsed),o=r.useCallback(()=>{a||g.toggleHistoryCollapsed(),t&&g.toggleGptListCollapsed()},[a,t]),i=[];return a||i.push(e.jsx(Ae,{onClick:g.toggleHistoryCollapsed,children:e.jsx(y,{id:"1poXLj",defaultMessage:"See less"})},"see-less")),s||i.push(e.jsx(Ae,{onClick:o,children:e.jsx(y,{id:"DnQZfo",defaultMessage:"See GPTs"})},"see-gpt")),e.jsxs(fa,{className:m(S.screenTrailingBarContainer),children:[i,e.jsx(Ft,{})]})}const Ht=p(()=>x(()=>import("./eqblm3u1mo9h1kfx.js"),__vite__mapDeps([67,1,2,3,4,5,68,69,8,9,70,60,6,7,10,11,12,14])).then(s=>s.FannyPackIconButton),{ssr:!1});function Gt({onNewThread:s}){const a=$(),t=Ba(),o=M(n=>n.sidebarState===ma.Floating);pa({checkElement:n=>n?.tagName==="NAV",enabled:!t&&o,onLightDismiss(){const n=document.querySelector(`input[name="${we.OpenOrClosed}"]`);n&&(n.checked=!1)}});const{isFannyPackEnabled:i}=xa();return e.jsxs(e.Fragment,{children:[e.jsx(q,{type:"primary",className:m(S.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[3px]",children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(ba,{className:m(S.closeSidebarAction),checked:!t,onChange:n=>{n.currentTarget.checked?g.openSidebar():g.closeSidebar()},icon:e.jsx(ot,{className:S.sidebarIcon}),label:a.formatMessage({id:"fM0vj3",defaultMessage:"Close Sidebar"}),group:we.OpenOrClosed})}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx(Ht,{className:S.searchAction,icon:e.jsx(nt,{className:S.sidebarIcon})}),e.jsx(xs,{to:"/",onClick:n=>{n.preventDefault(),s()},children:e.jsx(Ca,{icon:e.jsx(it,{className:S.sidebarIcon}),className:S.searchAction,label:a.formatMessage({id:"NUNaGU",defaultMessage:"New chat"})})})]})]})}),e.jsx(q,{type:"primary",className:S.bucketBar,disableSizeTracking:!0,children:" "})]})}function $t(){const{clientThreadId:s,onNewThread:a}=Z();return e.jsx(Ue,{anchor:"vertical",className:m(S.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Gt,{onNewThread:a}),trackLeading:!0,trailing:e.jsx(Wt,{}),children:e.jsx(Rt,{clientThreadId:s})})}const zt=p(()=>x(()=>import("./m6nogll5ylsg3y3n.js"),__vite__mapDeps([47,1,2,3,4,5,22,23,9,24,7,8,10,25,26,11,12,27,14,28,29,6,48,49,50,51,52,53,17,54])).then(s=>s.CanvasFocusedViewManager));function Ut(){const{clientThreadId:s,resetThread:a}=Z();return Ye({resetThreadAction:a,clientThreadId:s}),null}function Kt(){const{clientThreadId:s,currentModelId:a,isCompanionWindow:t}=Z();return e.jsx(ya,{conversationId:s,currentModelId:a,isActiveWindow:!t})}function qt({clientThreadId:s,setClientThreadId:a,urlThreadId:t}){es({clientThreadId:s});const o=X(s);return e.jsxs(As,{clientThreadId:s,setClientThreadId:a,children:[e.jsx(Kt,{}),e.jsx(Ut,{}),e.jsxs(Ze,{clientThreadId:s,children:[e.jsx(Ke,{clientThreadId:s,urlThreadId:t}),e.jsx(qe,{}),e.jsx(Sa,{className:bs.application,sidebar:e.jsx($t,{}),thread:e.jsx(rt,{}),details:o&&e.jsx(zt,{clientThreadId:s}),debugger:e.jsx(Je,{clientThreadId:s}),name:"application-root"})]})]})}var Qt={};const Yt=p(()=>x(()=>import("./f1f5uyt10v85vvab.js"),__vite__mapDeps([71,1,2,3,4,5,25,26,7,8,9,10,11,12,27,14,28,29,6,72])));function po(s){const{urlThreadId:a,clientThreadId:t,prefetchSearch:o}=s;Zt();const i=He(),n=Se(),[l]=Cs(),[c,f]=r.useState(()=>a!==void 0?a:t!==void 0?t:ye());a!==void 0&&c!==a&&V.getServerThreadId(c)!==a&&f(a);const b=ja(Se());r.useEffect(()=>{a===void 0&&V.getServerThreadId(c)!==void 0&&f(ye())},[a,c,b]);const I=W(ee.workspaceId);X(c);const E=Ma(),{eligible:k,isLoading:v,markAsViewed:A}=ka(),j=va();r.useEffect(()=>{(n.pathname==="/"||n.pathname.startsWith("/c/"))&&Aa({namespace:_e.ChatPageLoad})==null&&(wa({namespace:_e.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),H.addTiming("chatgpt.web.chatPage.mounted"))},[]);const w=_a();r.useEffect(()=>{Ss(!0).then(h=>{h.force_login&&w({authType:"login"}),ys.initializeAndGatherData(h),Ta.initializeAndGatherData(h),js.initializeAndGatherData(h)})},[w]),r.useEffect(()=>{const h=l.get(Ea)==="true";i!==h&&Ms.setIsTemporaryChatEnabled(h)},[i,l]),r.useEffect(()=>{n.state?.focusObject&&Q.setFocusedObject(n.state.focusObject)},[n.state?.focusObject]),r.useEffect(()=>{!v&&k&&(A(),j())},[k,v,A,j]);const B=E?qt:vt;return e.jsx(Oa.Provider,{value:null,children:e.jsx(Na,{children:e.jsxs(La,{clientThreadId:c,children:[e.jsx(bt,{clientThreadId:c},I),e.jsx(Nt,{}),e.jsx(Pa,{}),e.jsx(B,{urlThreadId:a,clientThreadId:c,setClientThreadId:f,prefetchSearch:o}),e.jsx(Ot,{clientThreadId:c}),e.jsx(Da,{clientThreadId:c}),e.jsx(Xt,{}),!1,e.jsx(Ia,{})]})})})}function Xt(){const s=M(a=>a.sharingModalThreadId);return s?e.jsx(Yt,{serverThreadId:s}):null}function Zt(){ks({queryKey:["pingEdge"],queryFn:()=>Be.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Qt.GOKU_SERVICE);export{po as C,wt as F};
//# sourceMappingURL=jjjnvoq6w3v3xn79.js.map
