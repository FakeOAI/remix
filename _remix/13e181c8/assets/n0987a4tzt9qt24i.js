const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gg4e542me73199xv.js","assets/d2qv8s87ysb5f68b.js","assets/ljnrwgh8vy488xdo.js","assets/root-jzy5dbg3.css","assets/jvea3upcm1fi9rff.js","assets/hq7ysfundi85z1is.js","assets/conversation-small-ao874ap7.css","assets/m7osvilbcgxty2nd.js","assets/7otbpc6iiji8djks.js","assets/jc8x6oz4qxa0il5z.js","assets/sso-nzk7aixrwgjo0utv.js","assets/efk730u3l94gsf4g.js","assets/ed6lsg5rhdwt4a6k.js","assets/opg6ep08epxj6l16.js","assets/k5scw4601lorcqmc.js","assets/bsnlgavyim4g71tk.js","assets/f2wci3e5g4q291dk.js","assets/jnjpe1sziatqh1cg.js","assets/jouuhcz5qcgq8cq8.js","assets/olcraceh9vbly07c.js","assets/nmgk3kiytj9aidtx.js","assets/mblmu2f3e3dq7qbm.js","assets/camb4c9ipf8oatb3.js","assets/ecosf0u02xhaex50.js","assets/g9cid2wbc8ui8tj4.js","assets/fvn345021ouqu4gv.js","assets/dw2c6xywia918do2.js","assets/o723pxcc00umhp7k.js","assets/f3rls1olxg0jfggo.js","assets/buvf69gxb6j0hnwj.js","assets/bjh9joiqda6bzvv5.js","assets/kqwdyvkaaavvn8k3.js","assets/bgubqlcwhx7vvg8o.js","assets/3k7lpomu189n83ws.js","assets/u3jkhli5fya0tsu9.js","assets/gjxyuomj8tzkojve.js","assets/e9lafxuzyeh4418f.js","assets/n9pok332lyomyi1d.js","assets/kt9y9i2ufexo7lcl.js","assets/ll7t24an14t868ei.js","assets/ndh0f0lzroymokao.js","assets/nyc5quojvbxmqy9c.js","assets/nhwwej1nq0zrd7sc.js","assets/jogwgzvv3x4rhu33.js","assets/fiy8l2966oe00a1h.js","assets/hyonmf2cmhjgzzz1.js","assets/f8ze6xyj15njdrmf.js","assets/erlue4ji1z7boi3u.js","assets/eyk0tps91sperweg.js","assets/l8re8vpxsj5gc916.js","assets/k59821nizpj4zkp2.js","assets/nnr2albz2dmf1j6t.js","assets/ou206tahyya5vd6g.js","assets/of5acvbxpw461066.js","assets/f1vdazgcnf5iq25u.js","assets/jxzhlfbn4aouq8hw.js","assets/frkwctafetgxoy38.js","assets/d5kecbyrt9znooow.js","assets/ngde1xusph1ngov3.js","assets/lil7btcijhvbw5s1.js","assets/jkxvpvhkboau6xvg.js","assets/cn574j22dbcj22e5.js","assets/e9optvde1tczrpvu.js","assets/iej0cupg2dqkmejt.js","assets/jy2hltbwwhl5obwz.js","assets/jk8w36bsokizpx57.js","assets/elyskwjvfzq8en80.js","assets/gn3y8ujdkgg8aw4h.js","assets/carousel-bss5aguy.css","assets/cgaru081n8idlukv.js","assets/nm04jgpfyxi6pn12.js"])))=>i.map(i=>d[i]);
import{bU as fe,l as e,r as d,m as g,Z as p,ck as ge,aD as C,aE as k,u as E,bp as xe,eY as pe,eW as be,cj as Se,V as A,aN as U,a0 as R,a2 as ve,a1 as je,d_ as ye,a$ as O,be as Ie,eZ as x,Q as V,cp as W,bA as Ne,bB as Ce}from"./d2qv8s87ysb5f68b.js";import{E as G,G as P,eK as K,eL as ke,H as Me,bV as $,eM as we,eN as Te,D as z,eO as q,eP as Ee,eQ as Q,eR as Z,eS as Ae,a1 as v,eT as Ge,a4 as Pe,d0 as ze,T as X,a2 as _e,eU as w,ai as Le,eV as Fe,l as Oe,eW as He,eX as De,eY as Be,K as Ue,dz as Y,dE as Re,eZ as Ve,e_ as We,e$ as H,f0 as Ke,f1 as $e,bF as J,f2 as qe,u as ee,aM as se,N as Qe}from"./hq7ysfundi85z1is.js";import{G as Ze}from"./k59821nizpj4zkp2.js";import{w as Xe,n as Ye,d as Je,x as es}from"./m7osvilbcgxty2nd.js";import{p as ss,a4 as _,a7 as ts,a8 as as,bd as ns,b0 as is,T as rs,bh as os,t as cs,bi as D,bj as ls}from"./ljnrwgh8vy488xdo.js";import{B as te,D as ae}from"./jvea3upcm1fi9rff.js";import{m as I}from"./jc8x6oz4qxa0il5z.js";import{b as ne,c as ds}from"./7otbpc6iiji8djks.js";import{u as us,H as ms,a as hs}from"./ndh0f0lzroymokao.js";import{u as fs,r as gs}from"./k5scw4601lorcqmc.js";import{u as ie}from"./ig32dccjxorz3eb6.js";import{N as xs}from"./opg6ep08epxj6l16.js";function ps(){const s=G(P.SonicSidebar),[t,a]=d.useState(!1);return s.isLoading||!s.eligible?null:e.jsx(I.div,{className:"no-draggable group pb-0",whileTap:{scale:.98},children:e.jsx(Ss,{children:e.jsx(K,{href:"/search",target:"_blank",icon:e.jsx("div",{className:g("gizmo-shadow-stroke mr-[0.5] flex h-6 w-6 items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:e.jsx(ke,{})}),label:"SearchGPT",hoverRightIcon:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(vs,{isOpen:t,setIsOpen:a,onDismiss:()=>s.markAsViewed()}),e.jsx(ss,{className:g("icon-md text-token-text-tertiary",!t&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function bs(){const s=$(),t=G(P.hasSeenSncSidebarTooltip),a=we(),n=Te(),{activeModals:i}=z(),r=ge();return!t.isLoading&&t.eligible&&!a&&i.size===0&&!s&&!n&&!r}function Ss({children:s}){const t=bs(),a=G(P.hasSeenSncSidebarTooltip);return t?e.jsx(Me,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:a.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:e.jsx("div",{className:"w-full",children:s})}):e.jsx(e.Fragment,{children:s})}function vs({isOpen:s,setIsOpen:t,onDismiss:a}){return e.jsx(te,{open:s,onOpenChange:t,triggerButton:e.jsx("button",{className:g("flex text-token-text-tertiary",s?"":"invisible group-hover:visible"),onClick:n=>{n.preventDefault()},children:e.jsx(_,{className:"icon-md"})}),children:e.jsx(ae.Item,{onClick:n=>{n.preventDefault(),a()},children:e.jsx(p,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}function re(){const s=fe("114024");return!s.value||s.isLoading?null:e.jsx(ps,{})}const js=C(()=>k(()=>import("./gg4e542me73199xv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(s=>s.GizmoKeepInSidebarMenuItem)),ys=2;function Is({isActive:s,isNewConversation:t}){const a=E(),n=xe();return e.jsx("div",{className:"bg-token-sidebar-surface-primary pt-0",children:e.jsx(oe,{gizmo:void 0,isActive:s,onClick:i=>{pe(be(a))&&!t&&(i.preventDefault(),Ee(n))}})})}const T=4;function Ns(s,t){const a=_e(s,o=>o.flair.kind),n=[...a[w.FirstParty]?.map(({resource:o})=>({gizmo:o,section:0}))??[],...a[w.SidebarKeep]?.map(({resource:o})=>({gizmo:o,section:0}))??[],...a[w.Recent]?.slice(0,ys).map(({resource:o})=>({gizmo:o,section:1}))??[]],i=n.length>T+1,r=i&&!t&&n.length>T?n.slice(0,T):n;return{listItems:[...r.filter(({section:o})=>o===0),...r.filter(({section:o})=>o===1)],itemsLeft:n.length-r.length,needsToCollapseItems:i}}function Cs({gizmo:s,currentGizmoId:t}){const a=d.useRef(!1),n=z(),[i,r]=d.useState(!1),{itemsLeft:c,listItems:o,needsToCollapseItems:l}=Ns(s,i);d.useEffect(()=>{o.length>0&&!a.current&&(Q({namespace:Z.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),a.current=!0)},[o]);function u(h,m){return e.jsx(oe,{gizmo:h,isActive:h.gizmo.id===t,section:m},h.gizmo.id)}return e.jsxs("div",{children:[o.map(({gizmo:h,section:m},f)=>e.jsxs(d.Fragment,{children:[f>1&&m!==o[f-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),u(h,m)]},f)),l?e.jsxs("button",{onClick:()=>{r(!i)},className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(_,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:i?e.jsxs(e.Fragment,{children:[e.jsx(p,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(ts,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:c}}),e.jsx(as,{className:"icon-xs"})]})})]}):null,e.jsx(Ae,{children:e.jsx(I.div,{whileTap:{scale:.98},children:e.jsx(Se,{to:Ye(),onClick:()=>{n.activeSidebar==="popover-nav"&&v.setActiveSidebar(!1)},children:e.jsx(Ge,{icon:ns,children:e.jsx(p,{...y.exploreStoreEnabled})})},"explore")})})]})}function ks({currentGizmoId:s}){const{data:{gizmos:t}={}}=Xe(),a=q();return e.jsxs(e.Fragment,{children:[!a&&e.jsx(Is,{isActive:s===void 0,isNewConversation:!0}),e.jsx(re,{}),t!=null?e.jsx(Cs,{gizmo:t,currentGizmoId:s}):null]})}function Ms({gizmo:s,isOpen:t,setIsOpen:a,section:n}){const i=E();return e.jsxs(te,{open:t,onOpenChange:a,triggerButton:e.jsx("button",{className:g("flex text-token-text-secondary hover:text-token-text-primary",t?"":"invisible group-hover:visible"),children:e.jsx(_,{className:"icon-md"})}),contentAlign:"start",sideOffset:4,alignOffset:-4,size:"auto",children:[n===1&&e.jsx(ae.Item,{onClick:async()=>{await Le.updateGizmoSidebar(i,es,s.gizmo.id,"keep")},children:e.jsx(p,{...y.keepInSidebar})}),e.jsx(js,{gizmoResource:s})]})}function oe({gizmo:s,historyDisabled:t,section:a,onClick:n}){const i=A(),[r,c]=d.useState(!1),[o,l]=d.useState(!1),u=U(),h=!!s?.gizmo.tags?.includes(Pe.FirstParty);let m;if(s!=null)m=s.gizmo.display.name||ze;else{if(u==null)return null;t?m=i.formatMessage(y.clearChat):u.canInteractWithGizmos()?m=Fe:m=i.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsx(I.div,{whileTap:{scale:.98},onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:e.jsx(K,{loggingGizmoId:s?.gizmo.id??"primary",href:s!=null?Je(s):"/",onClick:n,icon:e.jsx(Ze,{isFirstParty:s==null||h,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),isMenuOpen:r,label:m,hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(o||r)&&s!=null&&e.jsx("div",{className:"text-token-text-tertiary",onClick:f=>{f.preventDefault()},children:e.jsx(Ms,{gizmo:s,isOpen:r,setIsOpen:c,section:a})}),e.jsx(X,{side:"right",label:i.formatMessage(t?y.clearChat:y.newChat),className:"flex items-center",children:e.jsx("button",{className:r?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:t?e.jsx(is,{className:"icon-md"}):e.jsx(rs,{className:"icon-md"})})})]})})})}const y=R({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}}),B=R({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function ws(s){const t=d.useRef(void 0),a=d.useRef(void 0);return d.useEffect(()=>{t.current=a.current,a.current=s},[s]),s===a.current?t.current:a.current}function Ts({activeId:s,isPrimaryBackgroundColor:t,isInPopover:a}){const n=E(),[i,r]=d.useState(!1),[c,o]=d.useState(0),l=ye(),{conversations:u,hasNextPage:h,fetchNextPage:m,isLoading:f,isFetchingNextPage:M,isError:L}=fs(),N=d.useRef(null),le=d.useCallback(S=>{f||S==null||(N.current?.disconnect(),N.current=new IntersectionObserver(he=>{he[0].isIntersecting&&h&&m()}),N.current.observe(S))},[f,h,m]);d.useEffect(()=>()=>{N.current?.disconnect()},[]),d.useMemo(()=>{Oe.publish({kind:"refreshHistory",conversations:u})},[u]);const j=u,F=ws(j);d.useEffect(()=>{const S=He(De(),Date.now());l(()=>{o(c+1)},S+1e3)},[c,l]);const b=j.length===0;d.useEffect(()=>{b||Q({namespace:Z.ChatPageLoad})?.logTiming("render_history_items")},[b]);const de=us(j,c),{isCollapsible:ue}=ie(),me=z(S=>S.isHistoryCollapsed);return e.jsxs(As,{$centered:f||L||b,children:[b&&f&&e.jsx(O,{className:"m-auto"}),b&&L&&e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(p,{...B.unableToLoadHistory}),!i&&e.jsx("div",{className:"mt-1",children:e.jsx(Ie,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{r(!0),gs(n)},children:e.jsx(p,{...B.retryButton})})})]}),!f&&!b&&e.jsx("div",{children:e.jsx(Be,{id:a?"history-popover":"history-sidebar",children:e.jsx(Ue,{initial:!1,children:ue&&me?e.jsx(Es,{activeId:s,items:j,previousItems:F,isPrimaryBackgroundColor:t}):e.jsx(ms,{activeId:s,bucketedItems:de,hasNextPage:h,items:j,previousItems:F,isPrimaryBackgroundColor:t,infiniteScrollTriggerElementRef:le})})})}),M&&e.jsx("div",{className:"m-4 mb-5 flex justify-center",children:e.jsx(O,{})})]})}function Es({activeId:s,items:t,isPrimaryBackgroundColor:a,previousItems:n}){const{isCollapsible:i,recentConversationLimit:r}=ie(),c=t.slice(0,r),o=Y();if(s){const l=t.findIndex(u=>u.id===s);l>r-1&&c.push(t[l])}return e.jsxs(I.div,{className:g(a&&"first:mt-0","relative mt-5 first:mt-0 last:mb-5"),layout:"position",initial:{height:"0",opacity:1,position:"relative"},animate:{height:"auto",opacity:1},transition:{type:"spring",stiffness:225,damping:15,mass:1},children:[e.jsx(I.div,{className:g("sticky z-20",o?"top-[--sidebar-sticky-threshold]":"top-0"),layout:"position",children:e.jsx("span",{className:"flex h-9 items-center",children:e.jsx(Re,{children:e.jsx(p,{id:"VbQeVG",defaultMessage:"Recent"})})})}),e.jsx("ol",{children:c.map((l,u)=>{const h=s===l.id,m=u===0,f=n?.find(({id:M})=>M===l.id);return e.jsx(hs,{item:l,isActive:h,isFirstItem:m,isExistingItem:!!f,isPrimaryBackgroundColor:a,testId:`history-item-${u}`},`history-item-${l.id}`)})}),i&&e.jsx(Ve,{type:"more",onClick:v.toggleHistoryCollapsed})]})}const ce=ve.memo(Ts),As=je.div`flex flex-col gap-2 pb-2 text-token-text-primary text-sm mt-5
${({$centered:s})=>s&&"h-full justify-center items-center empty:hidden"}`,Zs=qe("sidebar","floating");function Gs({onNewThread:s}){const t=A(),a=!$(),[n,i]=d.useState(a?"pinned":"closed");return e.jsxs("div",{className:g(x.screenHeader),children:[e.jsxs("div",{className:"mb-[18px] mt-1 flex w-full flex-1 justify-between py-1.5 pl-2.5",children:[e.jsxs("div",{className:"grid items-center gap-1",children:[e.jsx(H,{className:g(x.headerAction,x.closeSidebarAction),checked:n==="closed",onChange:r=>{const c=r.currentTarget.checked;c&&(i("closed"),v.toggleDesktopNavCollapsed(c))},icon:e.jsx(Ke,{}),label:t.formatMessage({id:"fM0vj3",defaultMessage:"Close Sidebar"}),group:"sidebar",value:"closed"}),e.jsx("input",{className:"sr-only",checked:n==="floating",id:"sidebar-floating",onChange:r=>{r.currentTarget.checked&&i("floating")},name:"sidebar",type:"radio",value:"floating"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:x.togglePinWrapper,children:e.jsx(H,{className:g(x.headerAction,x.pinSidebarAction),checked:n==="pinned",onChange:r=>{const c=r.target.checked;c&&(v.toggleDesktopNavCollapsed(!c),i("pinned"))},icon:e.jsx(os,{}),label:t.formatMessage({id:"JZfuR3",defaultMessage:"Toggle Sidebar Pin"}),group:"sidebar",value:"pinned"})}),e.jsx($e,{className:x.searchAction,icon:e.jsx(cs,{className:"h-5 w-5"}),label:t.formatMessage({id:"CgmEL8",defaultMessage:"Search Conversations"})})]})]}),e.jsx(J,{onNewThread:s})]})}function Ps({clientThreadId:s}){const t=ne(s),{isUnauthenticated:a}=V(),n=W();return a?null:e.jsx("div",{className:g(x.screenContent),children:e.jsx(ce,{activeId:n?void 0:t,isInPopover:!1})})}function zs({clientThreadId:s,onNewThread:t}){return e.jsx(We,{anchor:"top",className:g(x.screen,x.screenProps,"flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Gs,{onNewThread:t}),trackLeading:!0,children:e.jsx(Ps,{clientThreadId:s})})}const _s=C(()=>k(()=>import("./sso-nzk7aixrwgjo0utv.js").then(s=>s.a),__vite__mapDeps([10,1,2,3,11,5,6,12,9,7,8,13,4,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70])).then(s=>s.FannyPackAction)),Ls=C(()=>k(()=>import("./sso-nzk7aixrwgjo0utv.js").then(s=>s.b),__vite__mapDeps([10,1,2,3,11,5,6,12,9,7,8,13,4,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70])).then(s=>s.FannyPackEntry)),Fs=C(()=>k(()=>import("./sso-nzk7aixrwgjo0utv.js").then(s=>s.c),__vite__mapDeps([10,1,2,3,11,5,6,12,9,7,8,13,4,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70])).then(s=>s.FannyPackItems));function Xs({clientThreadId:s,onNewThread:t}){const a=ne(s),n=U(),{isUnauthenticated:i}=V(),r=ds(s),c=W(),o=Y(),l=ee(f=>f.item),{isFannyPackEnabled:u,isFannyPackNewDesignEnabled:h}=se();if(i)return null;const m=u&&!h&&l?e.jsx(Fs,{activeId:c?void 0:a,item:l}):e.jsxs(e.Fragment,{children:[e.jsx(J,{onNewThread:t}),n?.canInteractWithGizmos()?e.jsx(ks,{currentGizmoId:r}):e.jsx(re,{}),!i&&e.jsx(ce,{activeId:c?void 0:a,isInPopover:!1})]});return o?e.jsx(zs,{clientThreadId:s,onNewThread:t}):m}function Ys({className:s,onNewThread:t}){const a=A(),n=Ne(),i=q(),r=Ce(()=>navigator.windowControlsOverlay),c=ee(u=>u.isActive),{isFannyPackEnabled:o,isFannyPackNewDesignEnabled:l}=se();return e.jsxs("div",{className:g("flex",r?.visible&&r.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[o&&!l&&c?e.jsx(Ls,{className:g("flex w-full"),inputClassName:g("w-full focus:border-none focus:ring-0 focus:outline-none border-none text-sm bg-token-composer-surface")}):e.jsx(X,{sideOffset:4,label:a.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(Qe,{className:"no-draggable","aria-label":a.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{n?v.toggleNavSidebar():v.togglePopoverNavSidebar()},icon:n?ls:D,mobileIcon:D,surfaceContext:"secondary","data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[o&&(!c||l)&&e.jsx(_s,{}),!i&&e.jsx(xs,{onClick:t,testId:"create-new-chat-button"})]})]})}export{Xs as C,Zs as F,ks as G,ce as H,Ys as S,zs as a};
//# sourceMappingURL=n0987a4tzt9qt24i.js.map
