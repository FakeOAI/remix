import{K as a,L as o,r as h,a8 as g,cp as l,aK as y,h as p,j as f,D as v}from"./d2qv8s87ysb5f68b.js";import{cx as n,cy as R,cz as T}from"./hq7ysfundi85z1is.js";import{P as i,q as A}from"./m7osvilbcgxty2nd.js";import{s as P}from"./k5scw4601lorcqmc.js";import{e as x,i as C,T as H}from"./7otbpc6iiji8djks.js";const I="prompt-textarea";function F(){document.getElementById(I)?.focus()}const M={getAndReset:(e,s)=>{const t=a.getItem(o.RestoreMessageAfterOauthRedirect);return a.removeItem(o.RestoreMessageAfterOauthRedirect),!t||t.userId!==e||s!==t.serverThreadId||Date.now()>t.expiresAt?null:t},set:(e,s,t)=>{const r={userId:e,serverThreadId:s,inputText:t,expiresAt:Date.now()+6e4};a.setItem(o.RestoreMessageAfterOauthRedirect,r)}},q=()=>i.useState(i.getPersistedSystemHints).has(n.Search),z=()=>{const e=i.useStore();return h.useCallback((s,t)=>{s?e.addPersistedSystemHint(n.Search,t):e.removePersistedSystemHint(n.Search,t)},[e])};async function b(e,s){const t=T(e),r=t??await f.getConversation(e);return s==null&&t&&(s=!0),t||v.addTiming("chatgpt.web.chatPage.loadExistingConversation"),H.initThreadFromServerData(e,r,s,void 0,s),P(r.conversation_id,r.async_status??null),r}const K=e=>{const{asPath:s,replace:t}=g(),r=l(),u=x(),m=y();p({queryKey:["conversation",e],queryFn:()=>b(e).catch(d=>{const c=R(s),S=c!=null?A(c):"/";throw t(S,void 0,{shallow:!0}),m.danger(`Unable to load conversation ${e}`,{testId:"conversation-fetch-error-toaster"}),d}),enabled:!C(e)&&!r&&!u,refetchOnMount:!0})};export{M as P,I as T,z as a,q as b,b as f,F as t,K as u};
//# sourceMappingURL=nmgk3kiytj9aidtx.js.map
