const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-mvpe6k68kr16kh4a.js","assets/jzo1gvcwh9pppzs1.js","assets/leocs7nz48lbrcv1.js","assets/root-htjhgmmn.css","assets/fxq7syfiz22hx4s1.js","assets/beucmu6zcawzhvqq.js","assets/conversation-small-cll5buey.css","assets/m8sygp9hlt2qio9s.js","assets/nnz4hggrrjichd1k.js","assets/gludlt2uldpe4igo.js","assets/otrvvqtzgopvxe2m.js","assets/wgqxthyy0ty9wjfc.js","assets/n52qu0rpacsut12w.js","assets/parllegwy3ioo052.js","assets/o16drnd86idgagwp.js","assets/miq7my0c6cwbve91.js","assets/b9urygkjcl8cx2c2.js","assets/cfgrn4qg7vvylckp.js","assets/eprbfbgfjav0585l.js","assets/jsatipvtf3s4nk2t.js","assets/b4dw5ns6jue0nqds.js","assets/gmj6x8q6lsr2s0um.js","assets/nvqvzkymqfjcjrwd.js","assets/dti9zbxqdooau05d.js","assets/itghwucfyv5ciib7.js","assets/e4bgmy38lfpsjoj8.js","assets/gxjyfjt2es2erkaj.js","assets/ebiov1kujwpy2p74.js","assets/e3wyzu6kvd1iqfqq.js","assets/983a0dy92b3ronpv.js","assets/eevu2w0jqo5a92he.js","assets/eldddd3lig60t8ro.js","assets/kqwdyvkaaavvn8k3.js","assets/kf2d1zsof6xfiduj.js","assets/dg3yxkmsw19pk1ia.js","assets/gyf6l17ds8f8k4rr.js","assets/m8kpk5xz4rjtau4f.js","assets/e9lafxuzyeh4418f.js","assets/e227lcpoe298vveh.js","assets/gbv1w72p2eupkb9x.js","assets/elgn73zdqs3jetpy.js","assets/c00pbk7bmb794pwo.js","assets/oz2z9tq6h4309xip.js","assets/goh8q4mto9jr13ik.js","assets/dyoch7qwyda49xy9.js","assets/oxg7bfx6g5m15fun.js","assets/h87jupndbzh98kn8.js","assets/fe9l4ql82ba790n5.js","assets/kdu6bezoumlylqv4.js","assets/iej0cupg2dqkmejt.js","assets/h9k2snpen90cakn1.js","assets/mjqonynnot7pdkcs.js","assets/jk8w36bsokizpx57.js","assets/ub2qrhh38g6qbir9.js","assets/m0gsmg1del92jivn.js","assets/eb9acbke9yenvn45.js","assets/ln0844xgnhlh75zj.js","assets/cb8sivbjzvpxb61m.js","assets/fxsp1ok5r2rkc2xl.js","assets/l1ety153wlx5eyux.js","assets/j58li8xryiwwtzem.js","assets/jns61mqbel75b71x.js","assets/swiper-react-kmk1dd5x.css","assets/djgt07q8ez60p6mg.js","assets/peny8cncyh63z6br.js","assets/d3y72ugnrmac5z1v.js"])))=>i.map(i=>d[i]);
import{bz as we,u as jn,r as l,b as kn,x as n,R as En,fr as yt,t as Qe,e_ as Tt,fb as jt,a3 as wn,bn as he,bo as xe,P as y,d as N,a0 as M,n as kt,W as Z,am as X,fs as Fe,ba as oe,bb as _n,ft as Pn,Q as ie,V as be,N as _e,c2 as Nn,af as ee,bg as me,Y as Ke,Z as Ye,a5 as Je,a as Et,aQ as Pe,a8 as An,bP as On,bN as Rn,aq as je,eo as wt,S as q,bD as _t,bc as Pt,c3 as Fn,bu as Be,bp as Bn,av as Dn,au as re,ce as Nt,w as Wn,e8 as Ln,e9 as $n,aT as ke,bC as Un,a7 as At,fh as Hn}from"./jzo1gvcwh9pppzs1.js";import{iq as Vn,ir as Gn,is as zn,it as qn,iu as Qn,iv as Ot,cH as Kn,iw as Yn,ix as Jn,iy as Xn,fj as De,fi as ct,bN as Zn,iz as es,iA as ts,iB as Me,iC as ns,iD as ss,iE as os,iF as as,iG as rs,iH as is,iI as cs,iJ as ls,iK as Ce,iL as lt,iM as us,iN as ye,iO as ds,iP as ms,iQ as ut,fk as fs,fn as ps,iR as gs,iS as hs,iT as Rt,iU as Xe,ab as Ze,V as xs,cQ as Ft,i2 as Bt,ag as vs,fu as bs,iV as Cs,iW as Dt,b$ as Ne,iX as Ss,iY as Te,iZ as Is,i_ as Wt,i$ as We,j0 as Ms,j1 as ys,bb as ae,j2 as Ts,j3 as js,j4 as ks,aP as B,j5 as Lt,aI as dt,aJ as le,aK as Ae,aU as Es,bj as ws,bk as _s,aX as Ps,aY as $t,aZ as Ee,a_ as ue,ba as Ns,bl as F,j6 as D,bm as As,a$ as Os,b0 as Rs,b1 as Fs,b3 as Ut,b2 as Bs,aM as Ds,b7 as Ws,b8 as Ls,bc as $s,bd as Us,j7 as Hs,j8 as Vs,j9 as Gs,ja as zs,bf as mt,jb as Ht,bg as qs,b9 as Qs,bi as Ks,jc as Ys,jd as Js,je as Xs,jf as Vt,jg as Zs,jh as eo,ji as Le,jj as to,eW as no,w as et,o as tt,ao as nt,c as so,gX as st,da as Gt,cg as ft,t as zt,aB as oo,bD as ao,jk as ro,bq as qt,r as Qt,jl as io,u as co,c0 as lo,cc as pt,q as uo}from"./beucmu6zcawzhvqq.js";import{I as mo,M as Kt,N as Yt,F as fo,u as po}from"./otrvvqtzgopvxe2m.js";import{T as ge,i as go,p as ho,D as xo,d as vo}from"./wgqxthyy0ty9wjfc.js";import{u as ot,a9 as bo,bK as Jt,a2 as Xt,aT as Co,_ as So,q as Io,J as Mo,ac as yo,p as To,b0 as Zt,bq as en,bw as tn,bL as nn,I as jo,bM as ko,br as Eo,bc as wo,b6 as $e,V as sn,aJ as _o}from"./leocs7nz48lbrcv1.js";import{D as E,B as Po}from"./ebiov1kujwpy2p74.js";import{a as on,b as an}from"./h87jupndbzh98kn8.js";import{u as No}from"./g0m2i405q5q73t1j.js";import{U,G as ce,a as Ao,u as rn,b as cn}from"./parllegwy3ioo052.js";const Oo=()=>{const{value:e}=we("44045625");return e},yr=()=>{const{value:e}=we("3700195277");return e||!1},at=e=>{const t=mo(e);return Oo()&&!!t?.includes("canmore")},Tr=()=>{const{value:e}=we("711369489");return e||!1},Ro=e=>kn.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),Fo=async e=>{const t=await Ro(e),s=new Map(t?.map(r=>[r.id,r])),o=[];for(const{id:r,content:i,version:c,textdoc_type:m,title:f,comments:p}of t)o.push({textdocId:r,messageId:null,type:qn(m),comments:Qn(p,i),title:f,content:i,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(o.map(r=>[r.textdocId,r])),persistedTextdocVersions:o,persistedTextdocById:s}};function Bo({clientThreadId:e,isEnabled:t}){const s=ge.getServerThreadId(e),{data:o,error:a,isLoading:r,isFetching:i,refetch:c}=jn({queryKey:[s,"textdocs"],enabled:!!s&&t,gcTime:0,queryFn:()=>s&&Fo(s)});return l.useEffect(()=>{if(!o)return;const{persistedTextdocVersions:m}=o;Vn(m),Gn(m),zn(m)},[o]),[{...o,error:a,isLoading:r,isFetching:i},c]}const ln=Ot(null),Se=Ot(null),gt=e=>{if(!e)return;const{messages:t}=e,s=cs(t??[],({message:a})=>a.author.role===En.System),o=s===-1?t:t?.slice(s+1);if(o&&ls(o))return o};function fe(e=yt){return Ce(ln,e)}function Do(e=yt){return Ce(Se,e)}function jr(){return fe(e=>e?.isFetchingFromPersistence)}function kr(){return fe(e=>e?.isEnabled)}function un(){return Ce(Se,e=>e?.resolveTempTextdocId)}function Er(){return Ce(Se,e=>e?.resolveTempCommentId)}function wr(){return Ce(Se,e=>e?.latestTextdocId??null)}function _r(e){const t=un();return fe(s=>Rt(s,t??{},e))}function dn(e){const t=un();return fe(s=>Rt(s,t??{},e)?.metadata??null)}function mn(){const e=fe(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function Pr(){return fe(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function Nr({clientThreadId:e,children:t}){const s=at(e),{textdocStore:o,optimisticTextdocStore:a}=Wo({clientThreadId:e,isEnabled:s});return n.jsx(Se.Provider,{value:a,children:n.jsx(ln.Provider,{value:o,children:t})})}function Wo({clientThreadId:e,isEnabled:t}){const s=go(e),o=ho(e,s),a=xo(e),r=Kn(a),[{error:i,persistedTextdocVersionById:c,isLoading:m,isFetching:f},p]=Bo({clientThreadId:e,isEnabled:t}),x=Yn(),[u,d]=l.useState(!1),g=Jn(),[h,v]=l.useState(!0);Xn(()=>{if(!t)return;const S=ge.getThreadCurrentLeafId(e),_=ge.getThreadConversationTurns(e,S),W=De(_)?.messages??[],R=lt(W);if(R==null)return;const $=R.message.metadata?.canvas?.textdoc_id,ne=R.message.metadata?.canvas?.version;$!=null&&ne!=null&&x($,ne),d(!0),p().finally(()=>d(!1))});const[T,w]=l.useState(c);l.useEffect(()=>{r&&w(c)},[r]);const C=t&&(r||!h||f&&!m&&u),I=De(o),A=l.useMemo(()=>{if(!I||!ct(I))return null;const S=ge.getTree(e),{variantIds:_}=I;return _.map(O=>{const W=S.getLeafFromNode(O).id;return De(ge.getThreadConversationTurns(e,W))})},[e,I]),P=l.useMemo(()=>!C||!I?null:ct(I)?A?.flatMap(gt).filter(Zn):gt(I),[C,I,A]),j=!!P?T:c,k=es(),K=ts(),L=l.useMemo(()=>{let S=us();return!j||(S=Me(S,_=>{for(const[O,W]of j.entries()){_.allTextdocIdSet[O]=O;const R=g.get(O);let $=R&&(R.versionInt??ye)>(W.versionInt??ye)?{...W,...R}:W;const ne=K.filter(z=>z.textdocId===O&&z.kind===ds.REMOVE_COMMENT);let Ie=$.versionInt;for(const z of ne)$=ms($,z),Ie=Math.max(Ie??ye,z.versionInt??ye);$={...$,versionInt:Ie},_.textdocById[O]=void 0,ut(_,$)}}),!k)?S:Me(S,_=>{ut(_,k,!1)})},[j,g,k,K]),G=l.useMemo(()=>Me(L,S=>{S.fetchError=i,S.isFetchingFromPersistence=f}),[L,i,f]),[H,Q]=l.useState(ns),te=l.useMemo(()=>P?.length?ss(r,L,H,P):null,[P,r,H,L]),Y=os(r,te,v),b=l.useMemo(()=>Y?as(G,Y):G,[G,Y]);return l.useEffect(()=>{if(!t)return;const S=rs(H,o);S&&Q(S)},[e,t,o.length]),l.useEffect(()=>{const S=is(H,te);S&&Q(S)},[te]),{textdocStore:l.useMemo(()=>Me(b,S=>{S.isEnabled!==t&&(S.isEnabled=t);const _=o.flatMap(R=>R.messages),O={},W=fs(_);for(let R=W.length-1;R>=0;R--){const $=W[R];if($.type!==ps.Canmore)continue;const ne=gs($.messages),z=lt($.messages)?.message.metadata?.canvas?.textdoc_id??hs(_);z&&ne!=null&&!O[z]&&(O[z]=!0,ne.nodeId!==S.lastCanvasAssistantMessageById[z]&&(S.lastCanvasAssistantMessageById[z]=ne.nodeId))}}),[b,o,t]),optimisticTextdocStore:H}}function fn(){return Xe(e=>e.focusedObject)}function Ar(){const e=Xe(t=>t.focusedObject);return e?.type!==Ze.Textdoc?null:e}function Or(){const e=Xe(t=>t.focusedObject);return e?.type!==Ze.Textdoc?null:e.history??null}function pn(){return fn()!=null}function Rr(e){const t=fn();return Do(s=>{if(!e||t?.type!==Ze.Textdoc)return!1;const o=s?.resolveTempTextdocId??{},a=o[t.textdocId]??t.textdocId,r=o[e]??e;return a===r})}const gn=xs.DesktopBrowserExtensionAnnouncement,Lo=5,hn="https://chromewebstore.google.com/detail/searchgpt/ejcfepkfckglbgocfkanmcdngdijcgld";function Fr({onClose:e}){l.useEffect(()=>{y.logEventWithStatsig(N.chatgptBrowserExtensionAnnouncementShown,"chatgpt_browser_extension_announcement_shown")},[]);const{markAsViewed:t}=Ft(gn),s=l.useCallback(()=>{t(),y.logEventWithStatsig(N.chatgptBrowserExtensionAnnouncementClosed,"chatgpt_browser_extension_announcement_closed"),e&&e()},[t,e]),o=l.useCallback(()=>{y.logEventWithStatsig(N.chatgptBrowserExtensionAnnouncementCTAClicked,"chatgpt_browser_extension_announcement_cta_clicked"),t(),e&&e()},[t,e]);return n.jsx($o,{downloadUrl:hn,handleCTAClicked:o,handleClose:s})}function $o({downloadUrl:e,handleCTAClicked:t,handleClose:s}){const o=()=>{t(),window.open(e)},a=n.jsxs("div",{className:"flex-grow",children:[n.jsx("div",{className:"mb-0.5 font-semibold",children:n.jsx(M,{id:"uAZwaE",defaultMessage:"Use ChatGPT for every search"})}),n.jsx("span",{className:"text-token-text-secondary",children:n.jsx(M,{id:"+wTq4L",defaultMessage:"Download the Chrome extension to switch your default search engine to ChatGPT, and get instant answers from trusted sources with every search."})})]});return n.jsx(vs,{onPrimaryCtaClick:o,primaryCtaText:n.jsx(M,{id:"x9mKG0",defaultMessage:"Get Extension"}),onDismiss:s,content:a})}function Br(e){const{value:t}=Qe("2634628831"),{eligible:s,isLoading:o}=Ft(gn),a=Tt(()=>document.documentElement.dataset.searchExtension==="1"),r=Kt(e.clientThreadId,jt.Search),i=Uo();return{eligible:!(!t||a||!s||!r||!Bt()||!i||e.conversationMode?.kind!==wn.PrimaryAssistant),isLoading:o}}function Dr(e){const t=he.getItem(xe.SearchSettings)??{};t.hasSearchedMinTimes||(t.searchMessageIds||(t.searchMessageIds=[]),t.searchMessageIds.includes(e)||(t.searchMessageIds.push(e),t.searchMessageIds.length>=Lo&&(t.hasSearchedMinTimes=!0,delete t.searchMessageIds),he.setItem(xe.SearchSettings,t)))}function Uo(){return(he.getItem(xe.SearchSettings)??{}).hasSearchedMinTimes===!0}const Ho=({children:e})=>{const t=mn();return t?.length?n.jsxs(E.Root,{children:[n.jsx(E.Trigger,{className:"h-10 px-2",children:e}),n.jsx(E.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:t.map(s=>n.jsx(Vo,{textdocId:s},s))})]}):null},Vo=({textdocId:e})=>{const t=kt(dn(e));return n.jsx(E.Item,{icon:ot,onClick:()=>{bs.logButtonClick(Cs.FILE_DRAWER_ITEM),Dt(t.textdocId)},children:t.title})},Go=()=>{const e=Z(),t=mn(),s=pn();if(!t||s)return null;const o=t.length;return o===1?n.jsx(zo,{textdocId:t[0]}):n.jsx(Ho,{children:n.jsx(X,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[n.jsx(ot,{className:"icon-xl-heavy"}),o]})})})},zo=({textdocId:e})=>{const t=Z(),s=kt(dn(e));return n.jsx(X,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsx(Ne,{onClick:()=>Dt(s.textdocId),icon:ot})})},qo=({children:e})=>pn()?null:n.jsx(n.Fragment,{children:e}),ht=({clientThreadId:e,children:t})=>at(e)?n.jsx(qo,{children:t}):t,xn={..._n},Qo=xn.useInsertionEffect,Ko=Qo||(e=>e());function vn(e){const t=l.useRef(()=>{});return Ko(()=>{t.current=e}),l.useCallback(function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t.current==null?void 0:t.current(...o)},[])}var ze=typeof document<"u"?l.useLayoutEffect:l.useEffect;let xt=!1,Yo=0;const vt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Yo++;function Jo(){const[e,t]=l.useState(()=>xt?vt():void 0);return ze(()=>{e==null&&t(vt())},[]),l.useEffect(()=>{xt=!0},[]),e}const Xo=xn.useId,Zo=Xo||Jo;function ea(){const e=new Map;return{emit(t,s){var o;(o=e.get(t))==null||o.forEach(a=>a(s))},on(t,s){e.set(t,[...e.get(t)||[],s])},off(t,s){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(a=>a!==s))||[])}}}const ta=l.createContext(null),na=l.createContext(null),sa=()=>{var e;return((e=l.useContext(ta))==null?void 0:e.id)||null},oa=()=>l.useContext(na),aa="data-floating-ui-focusable";function ra(e){const{open:t=!1,onOpenChange:s,elements:o}=e,a=Zo(),r=l.useRef({}),[i]=l.useState(()=>ea()),c=sa()!=null,[m,f]=l.useState(o.reference),p=vn((d,g,h)=>{r.current.openEvent=d?g:void 0,i.emit("openchange",{open:d,event:g,reason:h,nested:c}),s?.(d,g,h)}),x=l.useMemo(()=>({setPositionReference:f}),[]),u=l.useMemo(()=>({reference:m||o.reference||null,floating:o.floating||null,domReference:o.reference}),[m,o.reference,o.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:p,elements:u,events:i,floatingId:a,refs:x}),[t,p,u,i,a,x])}function ia(e){e===void 0&&(e={});const{nodeId:t}=e,s=ra({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||s,a=o.elements,[r,i]=l.useState(null),[c,m]=l.useState(null),p=a?.reference||r,x=l.useRef(null),u=oa();ze(()=>{p&&(x.current=p)},[p]);const d=Ss({...e,elements:{...a,...c&&{reference:c}}}),g=l.useCallback(C=>{const I=Te(C)?{getBoundingClientRect:()=>C.getBoundingClientRect(),contextElement:C}:C;m(I),d.refs.setReference(I)},[d.refs]),h=l.useCallback(C=>{(Te(C)||C===null)&&(x.current=C,i(C)),(Te(d.refs.reference.current)||d.refs.reference.current===null||C!==null&&!Te(C))&&d.refs.setReference(C)},[d.refs]),v=l.useMemo(()=>({...d.refs,setReference:h,setPositionReference:g,domReference:x}),[d.refs,h,g]),T=l.useMemo(()=>({...d.elements,domReference:p}),[d.elements,p]),w=l.useMemo(()=>({...d,...o,refs:v,elements:T,nodeId:t}),[d,v,T,t,o]);return ze(()=>{o.dataRef.current.floatingContext=w;const C=u?.nodesRef.current.find(I=>I.id===t);C&&(C.context=w)}),l.useMemo(()=>({...d,context:w,refs:v,elements:T}),[d,v,T,w])}const bt="active",Ct="selected";function Ue(e,t,s){const o=new Map,a=s==="item";let r=e;if(a&&e){const{[bt]:i,[Ct]:c,...m}=e;r=m}return{...s==="floating"&&{tabIndex:-1,[aa]:""},...r,...t.map(i=>{const c=i?i[s]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((i,c)=>(c&&Object.entries(c).forEach(m=>{let[f,p]=m;if(!(a&&[bt,Ct].includes(f)))if(f.indexOf("on")===0){if(o.has(f)||o.set(f,[]),typeof p=="function"){var x;(x=o.get(f))==null||x.push(p),i[f]=function(){for(var u,d=arguments.length,g=new Array(d),h=0;h<d;h++)g[h]=arguments[h];return(u=o.get(f))==null?void 0:u.map(v=>v(...g)).find(v=>v!==void 0)}}}else i[f]=p}),i),{})}}function ca(e){e===void 0&&(e=[]);const t=e.map(c=>c?.reference),s=e.map(c=>c?.floating),o=e.map(c=>c?.item),a=l.useCallback(c=>Ue(c,e,"reference"),t),r=l.useCallback(c=>Ue(c,e,"floating"),s),i=l.useCallback(c=>Ue(c,e,"item"),o);return l.useMemo(()=>({getReferenceProps:a,getFloatingProps:r,getItemProps:i}),[a,r,i])}function St(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const la=e=>({name:"inner",options:e,async fn(t){const{listRef:s,overflowRef:o,onFallbackChange:a,offset:r=0,index:i=0,minItemsVisible:c=4,referenceOverflowThreshold:m=0,scrollRef:f,...p}=Is(e,t),{rects:x,elements:{floating:u}}=t,d=s.current[i],g=f?.current||u,h=u.clientTop||g.clientTop,v=u.clientTop!==0,T=g.clientTop!==0,w=u===g;if(!d)return{};const C={...t,...await Wt(-d.offsetTop-u.clientTop-x.reference.height/2-d.offsetHeight/2-r).fn(t)},I=await Fe(St(C,g.scrollHeight+h+u.clientTop),p),A=await Fe(C,{...p,elementContext:"reference"}),P=We(0,I.top),V=C.y+P,j=Ms(We(0,g.scrollHeight+(v&&w||T?h*2:0)-P-We(0,I.bottom)));if(g.style.maxHeight=j+"px",g.scrollTop=P,a){const k=g.scrollHeight>g.offsetHeight&&g.offsetHeight<d.offsetHeight*c-1||A.top>=-m||A.bottom>=-m;oe.flushSync(()=>a(k))}return o&&(o.current=await Fe(St({...C,y:V},g.offsetHeight+h+u.clientTop),p)),{y:V}}});function ua(e,t){const{open:s,elements:o}=e,{enabled:a=!0,overflowRef:r,scrollRef:i,onChange:c}=t,m=vn(c),f=l.useRef(!1),p=l.useRef(null),x=l.useRef(null);l.useEffect(()=>{if(!a)return;function d(h){if(h.ctrlKey||!g||r.current==null)return;const v=h.deltaY,T=r.current.top>=-.5,w=r.current.bottom>=-.5,C=g.scrollHeight-g.clientHeight,I=v<0?-1:1,A=v<0?"max":"min";g.scrollHeight<=g.clientHeight||(!T&&v>0||!w&&v<0?(h.preventDefault(),oe.flushSync(()=>{m(P=>P+Math[A](v,C*I))})):/firefox/i.test(ys())&&(g.scrollTop+=v))}const g=i?.current||o.floating;if(s&&g)return g.addEventListener("wheel",d),requestAnimationFrame(()=>{p.current=g.scrollTop,r.current!=null&&(x.current={...r.current})}),()=>{p.current=null,x.current=null,g.removeEventListener("wheel",d)}},[a,s,o.floating,r,i,m]);const u=l.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const d=i?.current||o.floating;if(!(!r.current||!d||!f.current)){if(p.current!==null){const g=d.scrollTop-p.current;(r.current.bottom<-.5&&g<-1||r.current.top<-.5&&g>1)&&oe.flushSync(()=>m(h=>h+g))}requestAnimationFrame(()=>{p.current=d.scrollTop})}}}),[o.floating,m,r,i]);return l.useMemo(()=>a?{floating:u}:{},[a,u])}let pe=l.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});pe.displayName="FloatingContext";let rt=l.createContext(null);rt.displayName="PlacementContext";function da(e){return l.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function ma(){return l.useContext(pe).setReference}function fa(){return l.useContext(pe).getReferenceProps}function pa(){let{getFloatingProps:e,slot:t}=l.useContext(pe);return l.useCallback((...s)=>Object.assign({},e(...s),{"data-anchor":t.anchor}),[e,t])}function ga(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=l.useContext(rt),s=l.useMemo(()=>e,[JSON.stringify(e,(a,r)=>{var i;return(i=r?.outerHTML)!=null?i:r})]);ae(()=>{t?.(s??null)},[t,s]);let o=l.useContext(pe);return l.useMemo(()=>[o.setFloating,e?o.styles:{}],[o.setFloating,e,o.styles])}let It=4;function ha({children:e,enabled:t=!0}){let[s,o]=l.useState(null),[a,r]=l.useState(0),i=l.useRef(null),[c,m]=l.useState(null);xa(c);let f=t&&s!==null&&c!==null,{to:p="bottom",gap:x=0,offset:u=0,padding:d=0,inner:g}=va(s,c),[h,v="center"]=p.split(" ");ae(()=>{f&&r(0)},[f]);let{refs:T,floatingStyles:w,context:C}=ia({open:f,placement:h==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${h}`:`${h}-${v}`,strategy:"absolute",transform:!1,middleware:[Wt({mainAxis:h==="selection"?0:x,crossAxis:u}),Ts({padding:d}),h!=="selection"&&js({padding:d}),h==="selection"&&g?la({...g,padding:d,overflowRef:i,offset:a,minItemsVisible:It,referenceOverflowThreshold:d,onFallbackChange(L){var G,H;if(!L)return;let Q=C.elements.floating;if(!Q)return;let te=parseFloat(getComputedStyle(Q).scrollPaddingBottom)||0,Y=Math.min(It,Q.childElementCount),b=0,de=0;for(let S of(H=(G=C.elements.floating)==null?void 0:G.childNodes)!=null?H:[])if(S instanceof HTMLElement){let _=S.offsetTop,O=_+S.clientHeight+te,W=Q.scrollTop,R=W+Q.clientHeight;if(_>=W&&O<=R)Y--;else{de=Math.max(0,Math.min(O,R)-Math.max(_,W)),b=S.clientHeight;break}}Y>=1&&r(S=>{let _=b*Y-de+te;return S>=_?S:_})}}):null,ks({padding:d,apply({availableWidth:L,availableHeight:G,elements:H}){Object.assign(H.floating.style,{overflow:"auto",maxWidth:`${L}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${G}px)`})}})].filter(Boolean),whileElementsMounted:Pn}),[I=h,A=v]=C.placement.split("-");h==="selection"&&(I="selection");let P=l.useMemo(()=>({anchor:[I,A].filter(Boolean).join(" ")}),[I,A]),V=ua(C,{overflowRef:i,onChange:r}),{getReferenceProps:j,getFloatingProps:k}=ca([V]),K=B(L=>{m(L),T.setFloating(L)});return l.createElement(rt.Provider,{value:o},l.createElement(pe.Provider,{value:{setFloating:K,setReference:T.setReference,styles:w,getReferenceProps:j,getFloatingProps:k,slot:P}},e))}function xa(e){ae(()=>{if(!e)return;let t=new MutationObserver(()=>{let s=window.getComputedStyle(e).maxHeight,o=parseFloat(s);if(isNaN(o))return;let a=parseInt(s);isNaN(a)||o!==a&&(e.style.maxHeight=`${Math.ceil(o)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function va(e,t){var s,o,a;let r=He((s=e?.gap)!=null?s:"var(--anchor-gap, 0)",t),i=He((o=e?.offset)!=null?o:"var(--anchor-offset, 0)",t),c=He((a=e?.padding)!=null?a:"var(--anchor-padding, 0)",t);return{...e,gap:r,offset:i,padding:c}}function He(e,t,s=void 0){let o=Lt(),a=B((m,f)=>{if(m==null)return[s,null];if(typeof m=="number")return[m,null];if(typeof m=="string"){if(!f)return[s,null];let p=Mt(m,f);return[p,x=>{let u=bn(m);{let d=u.map(g=>window.getComputedStyle(f).getPropertyValue(g));o.requestAnimationFrame(function g(){o.nextFrame(g);let h=!1;for(let[T,w]of u.entries()){let C=window.getComputedStyle(f).getPropertyValue(w);if(d[T]!==C){d[T]=C,h=!0;break}}if(!h)return;let v=Mt(m,f);p!==v&&(x(v),p=v)})}return o.dispose}]}return[s,null]}),r=l.useMemo(()=>a(e,t)[0],[e,t]),[i=r,c]=l.useState();return ae(()=>{let[m,f]=a(e,t);if(c(m),!!f)return f(c)},[e,t]),i}function bn(e){let t=/var\((.*)\)/.exec(e);if(t){let s=t[1].indexOf(",");if(s===-1)return[t[1]];let o=t[1].slice(0,s).trim(),a=t[1].slice(s+1).trim();return a?[o,...bn(a)]:[o]}return[]}function Mt(e,t){let s=document.createElement("div");t.appendChild(s),s.style.setProperty("margin-top","0px","important"),s.style.setProperty("margin-top",e,"important");let o=parseFloat(window.getComputedStyle(s).marginTop)||0;return t.removeChild(s),o}var ba=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ba||{}),Ca=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ca||{}),Sa=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(Sa||{});function Ve(e,t=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,o=to(t(e.items.slice()),r=>r.dataRef.current.domRef.current),a=s?o.indexOf(s):null;return a===-1&&(a=null),{items:o,activeItemIndex:a}}let Ia={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var s,o,a,r,i;if(e.menuState===1)return e;let c={...e,searchQuery:"",activationTrigger:(s=t.trigger)!=null?s:1,__demoMode:!1};if(t.focus===D.Nothing)return{...c,activeItemIndex:null};if(t.focus===D.Specific)return{...c,activeItemIndex:e.items.findIndex(p=>p.id===t.id)};if(t.focus===D.Previous){let p=e.activeItemIndex;if(p!==null){let x=e.items[p].dataRef.current.domRef,u=Le(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((o=x.current)==null?void 0:o.previousElementSibling)===d.current||((a=d.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeItemIndex:u}}}}else if(t.focus===D.Next){let p=e.activeItemIndex;if(p!==null){let x=e.items[p].dataRef.current.domRef,u=Le(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((r=x.current)==null?void 0:r.nextElementSibling)===d.current||((i=d.current)==null?void 0:i.nextElementSibling)===null)return{...c,activeItemIndex:u}}}}let m=Ve(e),f=Le(t,{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...m,activeItemIndex:f}},3:(e,t)=>{let s=e.searchQuery!==""?0:1,o=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(i=>{var c;return((c=i.dataRef.current.textValue)==null?void 0:c.startsWith(o))&&!i.dataRef.current.disabled}),r=a?e.items.indexOf(a):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let s=Ve(e,o=>[...o,{id:t.id,dataRef:t.dataRef}]);return{...e,...s}},6:(e,t)=>{let s=Ve(e,o=>{let a=o.findIndex(r=>r.id===t.id);return a!==-1&&o.splice(a,1),o});return{...e,...s,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},it=l.createContext(null);it.displayName="MenuContext";function Oe(e){let t=l.useContext(it);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Oe),s}return t}function Ma(e,t){return $t(t.type,Ia,e,t)}let ya=l.Fragment;function Ta(e,t){let{__demoMode:s=!1,...o}=e,a=l.useReducer(Ma,{__demoMode:s,menuState:s?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsElement:i,buttonElement:c},m]=a,f=Ae(t);Es(r===0,[c,i],(d,g)=>{m({type:1}),ws(g,_s.Loose)||(d.preventDefault(),c?.focus())});let p=B(()=>{m({type:1})}),x=l.useMemo(()=>({open:r===0,close:p}),[r,p]),u={ref:f};return ie.createElement(ha,null,ie.createElement(it.Provider,{value:a},ie.createElement(Ps,{value:$t(r,{0:Ee.Open,1:Ee.Closed})},ue({ourProps:u,theirProps:o,slot:x,defaultTag:ya,name:"Menu"}))))}let ja="button";function ka(e,t){var s;let o=l.useId(),{id:a=`headlessui-menu-button-${o}`,disabled:r=!1,autoFocus:i=!1,...c}=e,[m,f]=Oe("Menu.Button"),p=fa(),x=Ns(),u=Ae(t,ma(),B(j=>f({type:7,element:j}))),d=B(j=>{switch(j.key){case F.Space:case F.Enter:case F.ArrowDown:j.preventDefault(),j.stopPropagation(),oe.flushSync(()=>f({type:0})),f({type:2,focus:D.First});break;case F.ArrowUp:j.preventDefault(),j.stopPropagation(),oe.flushSync(()=>f({type:0})),f({type:2,focus:D.Last});break}}),g=B(j=>{switch(j.key){case F.Space:j.preventDefault();break}}),h=B(j=>{var k;if(As(j.currentTarget))return j.preventDefault();r||(m.menuState===0?(oe.flushSync(()=>f({type:1})),(k=m.buttonElement)==null||k.focus({preventScroll:!0})):(j.preventDefault(),f({type:0})))}),{isFocusVisible:v,focusProps:T}=Os({autoFocus:i}),{isHovered:w,hoverProps:C}=Rs({isDisabled:r}),{pressed:I,pressProps:A}=Fs({disabled:r}),P=l.useMemo(()=>({open:m.menuState===0,active:I||m.menuState===0,disabled:r,hover:w,focus:v,autofocus:i}),[m,w,v,I,r,i]),V=Ut(p(),{ref:u,id:a,type:Bs(e,m.buttonElement),"aria-haspopup":"menu","aria-controls":(s=m.itemsElement)==null?void 0:s.id,"aria-expanded":m.menuState===0,disabled:r||void 0,autoFocus:i,onKeyDown:d,onKeyUp:g,onClick:h},T,C,A);return ue({mergeRefs:x,ourProps:V,theirProps:c,slot:P,defaultTag:ja,name:"Menu.Button"})}let Ea="div",wa=dt.RenderStrategy|dt.Static;function _a(e,t){var s,o;let a=l.useId(),{id:r=`headlessui-menu-items-${a}`,anchor:i,portal:c=!1,modal:m=!0,transition:f=!1,...p}=e,x=da(i),[u,d]=Oe("Menu.Items"),[g,h]=ga(x),v=pa(),[T,w]=l.useState(null),C=Ae(t,x?g:null,B(b=>d({type:8,element:b})),w),I=Ds(u.itemsElement);x&&(c=!0);let A=Ws(),[P,V]=Ls(f,T,A!==null?(A&Ee.Open)===Ee.Open:u.menuState===0);$s(P,u.buttonElement,()=>{d({type:1})});let j=u.__demoMode?!1:m&&u.menuState===0;Us(j,I);let k=u.__demoMode?!1:m&&u.menuState===0;Hs(k,{allowed:l.useCallback(()=>[u.buttonElement,u.itemsElement],[u.buttonElement,u.itemsElement])});let K=u.menuState!==0,L=Vs(K,u.buttonElement)?!1:P;l.useEffect(()=>{let b=u.itemsElement;b&&u.menuState===0&&b!==I?.activeElement&&b.focus({preventScroll:!0})},[u.menuState,u.itemsElement,I]),Gs(u.menuState===0,{container:u.itemsElement,accept(b){return b.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:b.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(b){b.setAttribute("role","none")}});let G=Lt(),H=B(b=>{var de,S,_;switch(G.dispose(),b.key){case F.Space:if(u.searchQuery!=="")return b.preventDefault(),b.stopPropagation(),d({type:3,value:b.key});case F.Enter:if(b.preventDefault(),b.stopPropagation(),d({type:1}),u.activeItemIndex!==null){let{dataRef:O}=u.items[u.activeItemIndex];(S=(de=O.current)==null?void 0:de.domRef.current)==null||S.click()}Ht(u.buttonElement);break;case F.ArrowDown:return b.preventDefault(),b.stopPropagation(),d({type:2,focus:D.Next});case F.ArrowUp:return b.preventDefault(),b.stopPropagation(),d({type:2,focus:D.Previous});case F.Home:case F.PageUp:return b.preventDefault(),b.stopPropagation(),d({type:2,focus:D.First});case F.End:case F.PageDown:return b.preventDefault(),b.stopPropagation(),d({type:2,focus:D.Last});case F.Escape:b.preventDefault(),b.stopPropagation(),oe.flushSync(()=>d({type:1})),(_=u.buttonElement)==null||_.focus({preventScroll:!0});break;case F.Tab:b.preventDefault(),b.stopPropagation(),oe.flushSync(()=>d({type:1})),zs(u.buttonElement,b.shiftKey?mt.Previous:mt.Next);break;default:b.key.length===1&&(d({type:3,value:b.key}),G.setTimeout(()=>d({type:4}),350));break}}),Q=B(b=>{switch(b.key){case F.Space:b.preventDefault();break}}),te=l.useMemo(()=>({open:u.menuState===0}),[u.menuState]),Y=Ut(x?v():{},{"aria-activedescendant":u.activeItemIndex===null||(s=u.items[u.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(o=u.buttonElement)==null?void 0:o.id,id:r,onKeyDown:H,onKeyUp:Q,role:"menu",tabIndex:u.menuState===0?0:void 0,ref:C,style:{...p.style,...h,"--button-width":qs(u.buttonElement,!0).width},...Qs(V)});return ie.createElement(Ks,{enabled:c?e.static||P:!1},ue({ourProps:Y,theirProps:p,slot:te,defaultTag:Ea,features:wa,visible:L,name:"Menu.Items"}))}let Pa=l.Fragment;function Na(e,t){let s=l.useId(),{id:o=`headlessui-menu-item-${s}`,disabled:a=!1,...r}=e,[i,c]=Oe("Menu.Item"),m=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===o:!1,f=l.useRef(null),p=Ae(t,f);ae(()=>{if(!i.__demoMode&&i.menuState===0&&m&&i.activationTrigger!==0)return Ys().requestAnimationFrame(()=>{var k,K;(K=(k=f.current)==null?void 0:k.scrollIntoView)==null||K.call(k,{block:"nearest"})})},[i.__demoMode,f,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let x=Js(f),u=l.useRef({disabled:a,domRef:f,get textValue(){return x()}});ae(()=>{u.current.disabled=a},[u,a]),ae(()=>(c({type:5,id:o,dataRef:u}),()=>c({type:6,id:o})),[u,o]);let d=B(()=>{c({type:1})}),g=B(k=>{if(a)return k.preventDefault();c({type:1}),Ht(i.buttonElement)}),h=B(()=>{if(a)return c({type:2,focus:D.Nothing});c({type:2,focus:D.Specific,id:o})}),v=Xs(),T=B(k=>{v.update(k),!a&&(m||c({type:2,focus:D.Specific,id:o,trigger:0}))}),w=B(k=>{v.wasMoved(k)&&(a||m||c({type:2,focus:D.Specific,id:o,trigger:0}))}),C=B(k=>{v.wasMoved(k)&&(a||m&&c({type:2,focus:D.Nothing}))}),[I,A]=Vt(),[P,V]=Zs(),j=l.useMemo(()=>({active:m,focus:m,disabled:a,close:d}),[m,a,d]);return ie.createElement(A,null,ie.createElement(V,null,ue({ourProps:{id:o,ref:p,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":I,"aria-describedby":P,disabled:void 0,onClick:g,onFocus:h,onPointerEnter:T,onMouseEnter:T,onPointerMove:w,onMouseMove:w,onPointerLeave:C,onMouseLeave:C},theirProps:r,slot:j,defaultTag:Pa,name:"Menu.Item"})))}let Aa="div";function Oa(e,t){let[s,o]=Vt();return ie.createElement(o,null,ue({ourProps:{ref:t,"aria-labelledby":s,role:"group"},theirProps:e,slot:{},defaultTag:Aa,name:"Menu.Section"}))}let Ra="header";function Fa(e,t){let s=l.useId(),{id:o=`headlessui-menu-heading-${s}`,...a}=e,r=eo();ae(()=>r.register(o),[o,r.register]);let i={id:o,ref:t,role:"presentation",...r.props};return ue({ourProps:i,theirProps:a,slot:{},defaultTag:Ra,name:"Menu.Heading"})}let Ba="div";function Da(e,t){return ue({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:Ba,name:"Menu.Separator"})}let Wa=le(Ta),La=le(ka),$a=le(_a),Ua=le(Na),Ha=le(Oa),Va=le(Fa),Ga=le(Da),ve=Object.assign(Wa,{Button:La,Items:$a,Item:Ua,Section:Ha,Heading:Va,Separator:Ga});function za({show:e,appear:t,children:s}){return n.jsx(no,{as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",show:e,appear:t,children:s})}function se({onClick:e,href:t,target:s,children:o,disabled:a,icon:r,testId:i}){return n.jsx(ve.Item,{disabled:a,children:({active:c})=>n.jsxs(Re,{onClick:e,href:t,target:s,className:_e({"bg-token-sidebar-surface-secondary":c,"hover:bg-token-sidebar-surface-secondary":!c&&!a}),"data-testid":i,children:[r&&n.jsx(r,{className:"icon-md"}),o]})})}function qa({to:e,children:t,icon:s}){return n.jsx(ve.Item,{children:({active:o})=>n.jsx(Nn,{to:e,children:n.jsxs(Re,{$as:"span",className:_e(o?"bg-token-sidebar-surface-secondary":"cursor-pointer"),children:[s&&n.jsx(s,{className:"icon-md"}),t]})})})}be.a`p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer`;const Re=be.a`flex gap-2 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group items-center`,Wr=be(Re)`border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]`,qe=be.div`h-px bg-token-border-light my-1.5`,Lr=be(Re)`${e=>e.$active?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`;function Cn({menuItemComponent:e}){const t=ee(),s=me(),o=l.useCallback(()=>{y.logEvent(N.clickSidebarAccountPortalMenuItem),et(s,"Sidebar account menu item")},[s]),{value:a}=Qe("1028682714"),r=Ke(()=>Ye(()=>import("./sso-mvpe6k68kr16kh4a.js").then(i=>i.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62])).then(i=>i.default));return n.jsxs(n.Fragment,{children:[t?.hasPaidSubscription()&&(a?n.jsx(r,{handleClickCustomerPortal:o,menuItemComponent:e}):n.jsx(e,{onClick:o,icon:bo,children:n.jsx(M,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),t?.canInteractWithGizmos()&&n.jsx(e,{onClick:()=>{y.logEvent(N.accountMenuClickMyGPTs),s(Yt())},icon:Jt,children:n.jsx(M,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),n.jsx(e,{icon:Xt,onClick:()=>{U.openModal(ce.UserContext),y.logEvent(N.accountMenuClickCustomizeChatGPT)},children:n.jsx(M,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function Sn({menuItemComponent:e,routedMenuItemComponent:t}){const s=ee(),o=we("2756095923")?.value&&s?.isEdu()&&s?.isStandardUserOfAccount();return n.jsxs(n.Fragment,{children:[!o&&n.jsx(t,{to:"/admin",icon:Co,children:n.jsx(M,{...Ge.myWorkspaceSettings})}),n.jsx(t,{to:Yt(),onClick:()=>{y.logEvent(N.accountMenuClickMyGPTs)},icon:Jt,children:n.jsx(M,{...Ge.myGpts})}),n.jsx(e,{onClick:()=>{U.openModal(ce.UserContext),y.logEvent(N.accountMenuClickCustomizeChatGPT)},icon:Xt,children:n.jsx(M,{...Ge.chatPreferences})})]})}const Ge=Je({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}}),Qa=Ke(()=>Ye(()=>import("./djgt07q8ez60p6mg.js"),__vite__mapDeps([63,1,2,3,13,5,6,12,11,8,64,65,36,37,38,19])));function $r({onClickSettings:e}){return n.jsxs(ve,{as:"div",className:"group relative",children:[n.jsx(Xa,{}),n.jsx(za,{children:n.jsx(ve.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:n.jsx(Ja,{onClickSettings:e})})})]})}function In(){const e=!ee()?.isEnterprisey()&&!Pt,t=Z(),s=nt(),o=me();return s?n.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[n.jsx("div",{className:"text-sm text-token-text-secondary",children:s?.email}),e&&n.jsx(X,{label:t.formatMessage(J.addWorkspaceTooltip),side:"right",children:n.jsx("button",{onClick:()=>et(o,"profile menu"),children:n.jsx(jo,{className:"icon-sm text-token-text-primary"})})})]}):null}function Ka(){const e=ee();return e==null?n.jsx(n.Fragment,{children:n.jsx("div",{className:"w-full px-3 py-2",children:n.jsx(je,{})})}):n.jsxs(n.Fragment,{children:[n.jsx(In,{}),n.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:n.jsx(yn,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})})]})}function Mn({menuItemComponent:e}){const t=tt(),s=Et(),{data:o}=Pe(),a=ee(),[r,i]=l.useState(!1),c=nt(),m=Z(),f=An();if(!a||!o)return null;const p=a.isWorkspaceAccount(),x=o.accountItems.length>1,u=o.accountItems,d=so([u.find(h=>h.isPersonalAccount()),...u.filter(h=>!h.isPersonalAccount())]);if(d.sort((h,v)=>h.isPersonalAccount()?1:v.isPersonalAccount()?-1:0),!x)return p?n.jsx(Ka,{}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:c?.email})});const g=d.map(h=>n.jsx(e,{disabled:h.isDeactivated(),onClick:()=>{if(h.isDeactivated()||h.id===a?.id)return;i(!0);const{willRedirect:v}=On(s,h.id,t,m,f);v||Rn()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:h.isDeactivated()?n.jsx(Ya,{workspace:h,isLoading:r}):n.jsx(yn,{workspace:h,isLoading:r,currentWorkspaceId:a?.id})},h.id));return n.jsxs(n.Fragment,{children:[n.jsx(In,{}),n.jsx(E.Separator,{}),g]})}function yn({workspace:e,isLoading:t,currentWorkspaceId:s,showCheck:o=!0}){const a=e.canAccessWithCurrentSession,r=!t&&o&&e.id===s;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(st,{iconSize:"small",workspace:e,className:_e({"flex-shrink-0":!0})})}),n.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:Gt(Z(),e)}),t&&n.jsx(je,{}),r&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(So,{className:"icon-sm"})}),!a&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(Io,{className:"icon-sm"})})]}),!a&&n.jsx("div",{className:"rowDivClassName",children:n.jsx("small",{className:"text-token-text-secondary",children:n.jsx(M,{...e.ssoConnectionName?J.authenticateWithSSOToAccessWorkspace:J.authenticateWithoutSSOToAccessWorkspace})})})]})}function Ya({workspace:e,isLoading:t}){const s=Z(),o=e.isOwnerOfAccount(),[a,r]=l.useState(!1),i=No(e.id);return l.useEffect(()=>{i!=null&&a&&(U.setPurchaseWorkspaceData({minimumSeats:Math.max(i,ft),existingAccount:e}),r(!1))},[i,a,e]),n.jsxs(n.Fragment,{children:[n.jsxs(X,{className:"flex w-full flex-1 items-center gap-2.5",label:s.formatMessage(J.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(Mo,{className:"icon-sm flex-shrink-0 opacity-30"})}),n.jsx("div",{className:"truncate opacity-30",children:Gt(s,e)})]}),t&&n.jsx(je,{}),!t&&n.jsxs(E.Root,{children:[n.jsx(E.Trigger,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:n.jsx(yo,{className:"icon-sm m-1"})}),n.jsx(E.Portal,{children:n.jsxs(E.Content,{children:[o&&n.jsx(n.Fragment,{children:n.jsx(E.Item,{onClick:()=>{i==null?r(!0):U.setPurchaseWorkspaceData({minimumSeats:Math.max(i,ft),existingAccount:e})},children:a?n.jsx(je,{}):n.jsx(M,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),n.jsx(E.Item,{onClick:()=>{U.setLeaveWorkspaceData(e)},children:n.jsx(M,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function Ja({onClickSettings:e}){const{data:t}=Pe(),s=ee(),o=zt(),a=on(),{openModal:r}=an(),i=wt("3905879930");var c=s?.isTeam()??!1,m=!1;if(c&&(m=i.config.get("enabled",!1)),!s||!t)return null;const f=s.isWorkspaceAccount(),p=!o;return n.jsxs("nav",{children:[n.jsx(Mn,{menuItemComponent:se}),n.jsx(qe,{}),f?n.jsx(Sn,{menuItemComponent:se,routedMenuItemComponent:qa}):n.jsx(Cn,{menuItemComponent:se}),p&&n.jsx(se,{href:oo(),target:"_blank",onClick:()=>{y.logEvent(N.clickFaqLink)},icon:To,children:n.jsx(M,{...J.helpAndFaq})}),n.jsx(se,{onClick:e,icon:Zt,testId:"accounts-settings-button",children:n.jsx(M,{...J.settings})}),c&&m&&n.jsxs(n.Fragment,{children:[n.jsx(se,{onClick:()=>{U.openModal(ce.InviteUsersToWorkspace),y.logEvent(N.accountMemberInviteButton,{location:"dropdown-menu-click"}),q.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:en,children:n.jsx(M,{...J.addTeammatesButton})}),n.jsx(Qa,{workspace:s})]}),a&&n.jsx(Za,{openDownloadModal:r}),n.jsx(qe,{}),n.jsx(se,{onClick:()=>{y.logEvent(N.clickLogOut,{eventSource:"mouse"}),_t()},icon:tn,children:n.jsx(M,{...J.logOut})})]})}function Xa(){return nt()?n.jsx(er,{}):null}function Za({openDownloadModal:e}){return n.jsxs("span",{children:[n.jsx(qe,{}),n.jsx(se,{icon:nn,onClick:()=>{y.logEvent(N.accountMenuClickDownloadApp),e()},children:n.jsx(M,{...J.downloadApp})})]})}function er(){const{data:e}=Pe(),t=ee(),s=ao(),o=ro();if(!t||!e)return null;const a=t.isWorkspaceAccount(),r=e.accountItems.length>1;return n.jsxs(ve.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(st,{iconSize:"gizmo"})}),n.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[n.jsx("div",{dir:"auto",children:o}),a||r?n.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:s}):null]})]})}const J=Je({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});function tr(e){q.logEvent("chatgpt_web_thread_tap_new_thread"),he.getItem(xe.HasSeenNewChatModal)===!0?qt(e):(he.setItem(xe.HasSeenNewChatModal,!0),U.openModal(ce.NoAuthNewChat))}function Ur(){return Ao(ce.NoAuthNewChat)?n.jsx(nr,{onClose:()=>{U.closeModal(ce.NoAuthNewChat)}}):null}function nr({onClose:e}){const t=tt(),s=me(),o=Fn("1934819688"),a=o.config.get("is_redesign_enabled",!1),r=o.config.get("secondary_button_type","cancel"),i=Qt(Be.signUpButtonText),c=x=>{x.preventDefault(),t({authType:"signup",callback:u=>{q.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),y.logSignUpButtonClicked({location:"New chat modal",provider:u})}})},m=x=>{x.preventDefault(),t({authType:"login",callback:u=>{q.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),y.logLogInButtonClicked({location:"New chat modal",provider:u})}})},f=()=>{q.logEvent("chatgpt_new_chat_modal_cancel_button_clicked"),y.logEvent(N.newChatModalCancelButtonClicked),e()},p=()=>{q.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),y.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),qt(s),e()};return l.useEffect(()=>{q.logEvent("chatgpt_new_chat_modal_shown"),y.logEvent(N.newChatModalShown)},[]),n.jsx(Bn,{isOpen:!0,type:"success",onClose:e,noPadding:!0,size:"custom",className:"max-w-sm",children:n.jsxs("div",{className:"flex flex-col justify-center p-6",children:[n.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[n.jsx("div",{}),n.jsx("div",{className:"text-xl font-medium",children:n.jsx(M,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),n.jsx("div",{className:"flex justify-end",children:a?n.jsx(Dn,{onClick:e}):null})]}),n.jsx("p",{className:"mb-6 text-center text-token-text-secondary",children:n.jsx(M,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:x=>n.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:c,children:x}),login:x=>n.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:m,children:x})}})}),n.jsx(re,{className:"mb-3",color:a?"primary":"danger",size:"giant",onClick:p,children:n.jsx(M,{id:"cBGbrD",defaultMessage:"Clear chat"})}),r==="cancel"?n.jsx(re,{size:"giant",onClick:f,color:"secondary",children:n.jsx(M,{...Be.cancelButtonText})}):null,r==="login"?n.jsx(re,{size:"giant",onClick:()=>{t({authType:"login",callback:x=>{y.logLogInButtonClicked({location:"New chat modal",provider:x})}})},color:"ghost",children:n.jsx(M,{...Be.logInButtonText})}):null,r==="signup"?n.jsx(re,{size:"giant",onClick:()=>{t({authType:"signup",callback:x=>{y.logSignUpButtonClicked({location:"New chat modal",provider:x})}})},color:"ghost",children:n.jsx(M,{...i})}):null]})})}function sr({clientThreadId:e,location:t}){const s=Et(),{id:o}=fo(e),a=po(!0),r=me(),i=Nt(),c=Wn();return l.useCallback(()=>{Ln($n(s))?tr(r):i?r({pathname:c.pathname,search:c.search},{state:io()}):(a({modelId:o,location:t}),q.logEvent("chatgpt_web_thread_tap_new_thread"))},[s,t,o,a,r,i,c])}const or=Ke(()=>Ye(()=>import("./djgt07q8ez60p6mg.js"),__vite__mapDeps([63,1,2,3,13,5,6,12,11,8,64,65,36,37,38,19])));function Hr({showShareButton:e,showProfileDropdown:t,clientThreadId:s}){const o=vo(s),a=Z(),r=at(s),{layer:i}=ke("1547743984"),c=i.get("show_share_button_text",!1),m=a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"}),f=lo(),p=()=>U.openSharingModal(o),x=a.formatMessage({id:"TO+loE",defaultMessage:"New Chat"});return n.jsxs(n.Fragment,{children:[!1,r&&n.jsx(Go,{}),!1,e&&o&&n.jsx(ht,{clientThreadId:s,children:c?n.jsx(re,{onClick:p,icon:$e,label:m,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",style:{display:"var(--screen-size-hidden-on-compact-mode)"},children:m}):n.jsx(X,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:n.jsx(Ne,{"data-testid":"share-chat-button",onClick:()=>U.openSharingModal(o),icon:$e})})}),f&&e&&o&&n.jsx(ht,{clientThreadId:s,children:n.jsx(X,{label:m,children:n.jsx(pt,{style:{display:"var(--screen-size-hidden-on-wide-mode)"},onClick:p,icon:n.jsx($e,{}),label:m})})}),f&&n.jsx(X,{label:x,children:n.jsx(pt,{className:Hn.sidebarIcon,icon:n.jsx(sn,{}),label:x,style:{display:"var(--screen-size-hidden-on-wide-mode)"}})}),t&&n.jsx(rr,{clientThreadId:s})]})}function ar({to:e,children:t,icon:s}){const o=me();return n.jsx(E.Item,{icon:s,onSelect:()=>o(e),children:t})}function rr({clientThreadId:e}){const{isUnauthenticated:t}=At();return t?n.jsx(pr,{}):n.jsx(ir,{clientThreadId:e})}function ir({clientThreadId:e}){const{data:t}=Pe(),s=ee(),o=s?.isPlus()??!1,a=s?.isWorkspaceAccount()??!1,{openSettings:r}=co(),i=on(),c=ur(e??"none"),{openModal:m}=an(),{layer:f}=ke("2888142241"),p=wt("3905879930");var x=s?.isTeam()??!1,u=!1;x&&(u=p.config.get("enabled",!1));const{doesUserHaveAnyAccountsWithPlusFeatures:d}=Un(),{layer:g}=ke("2670443078");if(!s||!t)return null;const h=t.accountItems.length>1;let v=o;!a&&!o&&d&&g.get("is_gating_fix_enabled",!1)&&(v=d);const T=!a&&!v&&!Pt&&f.get("is_upgrade_in_settings",!1);return n.jsxs(Po,{triggerButton:n.jsx("button",{onClick:()=>{y.logEvent(N.accountOpenProfileMenu),q.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",style:{display:"var(--screen-size-hidden-on-compact-mode, flex)"},children:n.jsx(st,{iconSize:"medium"})}),children:[h&&n.jsx(Mn,{menuItemComponent:E.Item}),h?n.jsx(E.Separator,{}):null,a?n.jsx(Sn,{menuItemComponent:E.Item,routedMenuItemComponent:ar}):n.jsx(Cn,{menuItemComponent:E.Item}),n.jsx(E.Item,{icon:Zt,onClick:()=>r(),"data-testid":"settings-menu-item",children:n.jsx(M,{defaultMessage:"Settings",id:"navigation.settings.0"})}),n.jsx(E.Separator,{}),x&&u&&n.jsxs(n.Fragment,{children:[n.jsx(E.Item,{"data-testid":"settings-menu-item-invite-teammates",onClick:()=>{U.openModal(ce.InviteUsersToWorkspace),y.logEvent(N.accountMemberInviteButton,{eventSource:"mouse",location:"profile_drop_down"}),q.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:en,children:n.jsx(M,{...Tn.addTeammatesButton})}),n.jsx(or,{workspace:s})]}),i&&n.jsx(lr,{openDownloadModal:m}),T&&n.jsx(mr,{}),c&&n.jsx(dr,{}),(T||i||c)&&n.jsx(E.Separator,{}),n.jsx(E.Item,{onClick:()=>{y.logEvent(N.clickLogOut,{eventSource:"mouse"}),y.logLogOutButtonClicked({location:"profile_drop_down"}),_t()},"data-testid":"log-out-menu-item",icon:tn,children:n.jsx(M,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function cr({onClick:e,className:t,testId:s}){const o=Z(),a=Nt(),r=a?o.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):o.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return n.jsx(X,{sideOffset:4,label:r,className:_e("flex",t),children:n.jsx(Ne,{onClick:()=>{U.closePopoverNavSidebar(),e()},icon:a?_o:sn,surfaceContext:"secondary","aria-label":r,"data-testid":s})})}function Vr({clientThreadId:e}){const[t]=rn(a=>[a.activeStageSidebar]),s=cn(),o=sr({clientThreadId:e,location:"Navigation actions"});return!s&&!t?null:n.jsxs("div",{className:"flex items-center",children:[n.jsx(fr,{}),n.jsx(cr,{onClick:o})]})}function lr({openDownloadModal:e}){return n.jsx("span",{children:n.jsx(E.Item,{icon:nn,onClick:()=>{e(),y.logEvent(N.accountMenuClickDownloadApp)},children:n.jsx(M,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}const ur=e=>{const{value:t}=Qe("2634628831"),s=Tt(()=>document.documentElement.dataset.searchExtension==="1"),o=Kt(e,jt.Search);return!s&&o&&Bt()&&t},dr=()=>n.jsx("span",{children:n.jsx(E.Item,{icon:ko,onClick:()=>{window.open(hn),y.logEventWithStatsig(N.chatgptBrowserExtensionUserMenuClicked,"chatgpt_browser_extension_user_menu_clicked")},children:n.jsx(M,{id:"E5VPz/",defaultMessage:"Get ChatGPT search extension"})})});function mr(){const e=me(),s=ee()?.wasPaidCustomer()??!1,o=()=>{q.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),y.logEvent(N.plusUpgradeInSettingsMenuClicked),et(e,"Upper right settings menu")};return n.jsx(E.Item,{icon:Eo,onClick:o,children:s?n.jsx(M,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):n.jsx(M,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function fr(){const e=Z(),[t]=rn(r=>[r.activeStageSidebar]),s=cn(),o=zt(),{isUnauthenticated:a}=At();return!t&&!s||!o||a?null:n.jsx(X,{label:e.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:n.jsx(Ne,{"aria-label":e.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:U.toggleNavSidebar,icon:wo,surfaceContext:"primary"})})}function pr(){const e=tt(),t=uo(),s=Qt(Tn.signUpCta),{layer:o}=ke("3637408529"),a=o.get("is_desktop_primary_auth_button_on_right",!1),r=()=>{e({authType:"login",callback:p=>{y.logLogInButtonClicked({location:"Chat header",provider:p})}})},i=()=>{e({authType:"signup",callback:p=>{y.logSignUpButtonClicked({location:"Chat header",provider:p})}})},c=n.jsx(re,{onClick:r,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:n.jsx(M,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),m=n.jsx(re,{color:t?"secondary":"primary",onClick:i,size:"small","data-testid":"signup-button",children:n.jsx(M,{...s})},"signup"),f=t?[c,m]:[m,c];return n.jsx("div",{className:"flex items-center justify-center gap-2",children:a?f.reverse():f})}const Tn=Je({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});export{Dr as A,Br as B,Oo as C,Hr as D,fr as E,Vr as F,Ur as G,rr as L,ha as M,cr as N,za as P,ga as R,Fr as S,Nr as T,Lr as U,ir as a,pa as b,$r as c,sr as d,pn as e,Re as f,wr as g,tr as h,Ar as i,un as j,Wr as k,at as l,Tr as m,yr as n,_r as o,jr as p,Er as q,Rr as r,dn as s,Or as t,fn as u,Pr as v,kr as w,da as x,ma as y,fe as z};
//# sourceMappingURL=mhzd66d800yve4rv.js.map
