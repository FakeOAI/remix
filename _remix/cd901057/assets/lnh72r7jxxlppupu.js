const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/d1083xb4be1m3us2.js","assets/jzo1gvcwh9pppzs1.js","assets/leocs7nz48lbrcv1.js","assets/root-htjhgmmn.css","assets/beucmu6zcawzhvqq.js","assets/conversation-small-cll5buey.css","assets/cfgrn4qg7vvylckp.js","assets/otrvvqtzgopvxe2m.js","assets/wgqxthyy0ty9wjfc.js","assets/nnz4hggrrjichd1k.js","assets/n52qu0rpacsut12w.js","assets/miq7my0c6cwbve91.js","assets/h87jupndbzh98kn8.js","assets/elgn73zdqs3jetpy.js","assets/cp2ugz9nij812u2n.js","assets/parllegwy3ioo052.js","assets/m8kpk5xz4rjtau4f.js","assets/e9lafxuzyeh4418f.js","assets/e227lcpoe298vveh.js","assets/gbv1w72p2eupkb9x.js","assets/fxsp1ok5r2rkc2xl.js","assets/cqeond09b2l8tdrm.js","assets/l9td2pw1jzb9w40a.js","assets/fxq7syfiz22hx4s1.js","assets/mhzd66d800yve4rv.js","assets/ebiov1kujwpy2p74.js","assets/g0m2i405q5q73t1j.js","assets/jsatipvtf3s4nk2t.js","assets/m8sygp9hlt2qio9s.js","assets/gludlt2uldpe4igo.js","assets/o16drnd86idgagwp.js","assets/b9urygkjcl8cx2c2.js","assets/ldc2b5tjx888ixf7.js","assets/nd01xh0s3sksnn0o.js","assets/e48x7pcge2ncmftn.js","assets/c00pbk7bmb794pwo.js","assets/ub2qrhh38g6qbir9.js","assets/fc7dffa1kmotgal0.js","assets/goh8q4mto9jr13ik.js","assets/bxydohttn9u9ggzl.js","assets/llzkphmjqwhl8axz.js","assets/owwsms3r9x066ff3.js","assets/m0gsmg1del92jivn.js","assets/eevu2w0jqo5a92he.js","assets/mjxuczsf6i68yor7.js","assets/eldddd3lig60t8ro.js","assets/kqwdyvkaaavvn8k3.js","assets/kf2d1zsof6xfiduj.js","assets/j58li8xryiwwtzem.js","assets/6fq3lkx3ztrdk2lf.js","assets/jqnvs3ycnk5pi2ed.js","assets/i1347bvrfhnsb9rq.js","assets/hpn685i6s96cmfoe.js","assets/gw07wv1glrin3ne4.js","assets/lsg4b2t6cdtdbd7u.js","assets/lkji4ezaq6axt0zd.js","assets/ln0844xgnhlh75zj.js","assets/o7v0ohat4r2p6q4w.js","assets/983a0dy92b3ronpv.js","assets/enhk5054h7hkng1b.js","assets/fggt4n2uvnith5cw.js","assets/b7t5v2v7jh0v0338.js","assets/ch17rvpuji5b0vs3.js","assets/mkiwbz4b5qf3lirq.js","assets/n5uqrpregxzjpjyx.js","assets/gp240rnsvbkgy982.js","assets/cv8fq9nmwecab2b5.js","assets/jc3a4hqeg8mpumf5.js","assets/fn3akgdb38fjnrzu.js","assets/hd4gcm7ao8jhc98m.js","assets/b3ce50czawxopd7w.js","assets/cpx80uuomi19zt5a.js","assets/abbkn5p9gymxpeuc.js","assets/c7gviuhcw86dgbc5.js"])))=>i.map(i=>d[i]);
import{x as e,bv as X,a_ as De,a$ as Ie,aY as Be,r,D as z,au as I,j as Ve,S as W,P as xe,d as be,a0 as M,a5 as $,V as os,W as U,a8 as ns,a6 as is,Y as p,Z as x,af as Re,bI as rs,bH as cs,bF as ls,aQ as ds,t as Fe,eh as Ce,bp as He,bq as us,a2 as hs,at as gs,N as f,av as fs,a as We,f7 as ms,ce as Ge,aq as ps,a7 as xs,d5 as S,c2 as bs,fh as Cs,w as Se,aV as Ss,dM as ye,c_ as ys,c$ as Ms,d0 as js,bQ as ks,u as vs}from"./jzo1gvcwh9pppzs1.js";import{l as Z,T as ze}from"./mhzd66d800yve4rv.js";import{he as J,cR as As,hf as $e,hg as Ue,hh as ws,hi as qe,u as _s,hj as Ts,hk as Es,S as Os,hl as Ns,hm as Ls,by as G,hn as Ps,ho as Ds,hp as Is,hq as Bs,hr as Vs,hs as Rs,ht as Fs,hu as Hs,hv as Ws,hw as Gs,hx as zs,hy as $s,hz as Us,hA as qs,hB as Ks,hC as Qs,hD as Ys,hE as Xs,hF as Zs,hG as Js,hH as ea,hI as sa,hJ as aa,cl as ee,hK as ta,hL as oa,es as na,ex as Ke,c9 as Q,f4 as Me,hM as Qe,hN as Ye,gJ as ia,a7 as ra,hO as ca,gS as je,fL as la,bW as Y,bX as ke,cz as da,c1 as ua,c2 as ve,eq as Ae,hP as ha,ce as ga,hQ as we,ak as fa,hR as ma,az as pa,eh as xa,cb as _e,cc as ba,fO as Ca,hS as Sa,hT as ya,c0 as Ma,hU as ja,hV as ka,c5 as va,a5 as Te,hW as Aa,o as wa,co as _a,hX as Ta,cB as Ea,cp as Oa,dm as Na,hY as La,dn as Pa,hZ as Da}from"./beucmu6zcawzhvqq.js";import{U as d,G as D,u as y,c as Xe,d as H,b as Ia}from"./parllegwy3ioo052.js";import{a as Ba,b as Va,s as Ra,T as R,c as Fa,d as Ha,m as Wa}from"./wgqxthyy0ty9wjfc.js";import{u as Ga}from"./h87jupndbzh98kn8.js";import{L as za}from"./elgn73zdqs3jetpy.js";import{S as Ee,b as $a,c as Ua,N as qa}from"./b7t5v2v7jh0v0338.js";import{u as Ze,b as Ka,g as Qa}from"./ch17rvpuji5b0vs3.js";import{S as Ya,C as Xa}from"./mkiwbz4b5qf3lirq.js";import{T as Za,f as Ja,b as Je}from"./cqeond09b2l8tdrm.js";import{c as et,d as se,a as st,b as at}from"./gp240rnsvbkgy982.js";import{m as Oe}from"./nnz4hggrrjichd1k.js";import{a as tt,b as Ne}from"./n5uqrpregxzjpjyx.js";import{r as ot,u as nt}from"./miq7my0c6cwbve91.js";import{aL as it,bH as rt,V as ct}from"./leocs7nz48lbrcv1.js";const lt=60*60*24;function dt(s,a=!1){return X()==null||a?"loading":!s||De.getCookie(Ie.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function ut({onClose:s}){const{data:{ageVerificationType:a,ageVerificationDeadline:t}={}}=J();return a==="passive"?e.jsx(ht,{onClose:s}):a==="countdown"&&t!=null?e.jsx(gt,{onClose:s,ageVerificationDeadline:t}):null}const ht=({onClose:s})=>{const{country:a}=Be();return r.useEffect(()=>{z.addAction("privacy_policy.show_age_verification_modal",{country:a})},[a]),e.jsx(As,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(I,{color:"primary",onClick:async()=>{await Ve.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(I,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},gt=({onClose:s,ageVerificationDeadline:a})=>{const t=a!=null?Math.floor(a/60/60/24):0;r.useEffect(()=>{W.logEvent("chatgpt_compliance_age_verification_seen"),xe.logEvent(be.complianceAgeVerificationSeen)},[]);const{country:o}=Be();return r.useEffect(()=>{z.addAction("privacy_policy.show_age_verification_countdown",{country:o})},[o]),e.jsxs($e,{children:[e.jsx(Ue,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(M,{...Le.ageVerificationTitle,values:{deadline:t,learnMoreLink:i=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:i})}})}),e.jsx(ws,{altText:"Dismiss notification",asChild:!0,children:e.jsx(I,{color:"primary",size:"small",onClick:()=>{W.logEvent("chatgpt_compliance_age_verification_clicked"),xe.logEvent(be.complianceAgeVerificationClicked),De.setCookie(Ie.AgeVerification,"true",{maxAge:lt,path:"/"}),s(),d.openModal(D.AgeVerificationInterstitial)},children:e.jsx(M,{...Le.startVerification})})}),e.jsx(qe,{})]})},Le=$({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function ft({onClose:s}){const a=U(),t=ns(),{openSettings:o}=_s(),i=Ts(),{session:n}=is(),{data:{isStorageComplianceEnabled:l}={}}=J(),{data:c,isLoading:m}=Es({enabled:!!(l&&n),select:b=>!b.cookie_consent.is_required});return r.useEffect(()=>{c===!0&&s()},[c,s]),m?null:e.jsx(mt,{onReject:()=>{i.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){t.success(a.formatMessage(P.updateSuccess))},onError(){t.danger(a.formatMessage(P.updateFailure))}}),s()},onAccept:()=>{i.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){t.success(a.formatMessage(P.updateSuccess))},onError(){t.danger(a.formatMessage(P.updateFailure))}}),s()},children:e.jsx(M,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:b=>e.jsx(za,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:b}),manageLink:b=>e.jsx(pt,{onClick:()=>{o(Os.DataControls)},children:b})}})})}function mt({children:s,onAccept:a,onReject:t}){return r.useEffect(()=>{z.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs($e,{children:[e.jsxs(Ue,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(I,{color:"secondary",size:"small",onClick:t,children:e.jsx(M,{...P.reject})}),e.jsx(I,{color:"secondary",size:"small",onClick:a,children:e.jsx(M,{...P.accept})})]})]}),e.jsx(qe,{})]})}const pt=os.button`underline font-normal text-green-600`,P=$({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),xt=p(()=>x(async()=>{const{ModelOnboardingNUXModal:s}=await import("./d1083xb4be1m3us2.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])).then(({ModelOnboardingNUXModal:s})=>s),{ssr:!1}),bt=({onClose:s})=>{const a=U(),t=G(ee.isBusinessWorkspace),o=G(n=>n.currentWorkspace),i=t?a.formatMessage(Pe.workspaceWelcome,{workspaceName:o?.name}):"ChatGPT";return e.jsx(He,{isOpen:!0,onClose:us,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(Pe.personalOnboardingSubheading),children:e.jsx(ta,{onClose:s,scope:oa.Personal})})};function Ct({clientThreadId:s}){const[a,t]=r.useState(0),{hasSeenOnboardingDate:o}=Ns(),{hasSeenTeamOwnerOnboardingDate:i}=Ls(),n=G(ee.isBusinessWorkspace),l=Re(),[c,m]=r.useState(!1),{data:b,isPending:B}=J(),O=dt(b,B),{eligible:v,isLoading:A}=Ga(),w=rs(),j=cs(),_=ls(),V=Ba(()=>Va.getThread(s)),g=Ra(s)||!V,N=R.getConversationOrigin(s),{data:C,isError:E}=ds(),k=C!=null,h=C&&C?.accountItems.length>1&&C.currentAccountId==null,T=C?.accountItems.some(u=>u.isPersonalAccount()),F=!!C?.accountItems&&C.accountItems.length>0&&C.accountItems.every(({canAccessWithCurrentSession:u})=>!u),{eligible:ae,isLoading:te}=Ps(),{value:oe}=Fe("1542198993"),{punchOutRequireLoginInfo:ne}=Ds(),{state:ie}=Is(),{isOpen:re,isLoading:ce}=Bs(),{isOpen:le,isLoading:de}=Vs(),{isOpen:ue,isLoading:he}=Rs(),{isOpen:ge,isLoading:fe}=Fs(),{state:me}=Hs(),L=r.useMemo(()=>[{Component:Ws,getModalState:()=>ne?"show":"hide",isDeferrable:!1},{Component:Gs,getModalState:()=>ie,isDeferrable:!1},{Component:zs,getModalState:()=>me,isDeferrable:!1},{Component:$s,getModalState:()=>ce||g?"loading":N===Ce.APPLE?"hide":re?"show":"hide",isDeferrable:!1},{Component:Us,getModalState:()=>fe||g?"loading":N===Ce.APPLE?"hide":ge?"show":"hide",isDeferrable:!1},{Component:bt,getModalState:()=>n?"hide":o===null?"loading":o===!1?"show":"hide",isDeferrable:!0},{Component:qs,getModalState:()=>E?"hide":h?"show":k?"hide":"loading",isDeferrable:!1},{Component:Ks,getModalState:()=>w!==null?"show":E||k?"hide":"loading",isDeferrable:!1},{Component:Qs,getModalState:()=>j!==null?"show":E||k?"hide":"loading",isDeferrable:!1},{Component:Ys,getModalState:()=>_!=null?"show":E||k?"hide":"loading",isDeferrable:!1},{Component:Xs,getModalState:()=>k?F?"show":"hide":"loading",isDeferrable:!1},{Component:Zs,getModalState:()=>de?"loading":le?"show":"hide",isDeferrable:!1},{Component:Js,getModalState:()=>he?"loading":ue?"show":"hide",isDeferrable:!1},{Component:ft,getModalState:()=>"hide",isDeferrable:!1},{Component:ea,getModalState:()=>!l?.isTeam()||!l?.isOwnerOfAccount()||!T?"hide":!k||i===null?"loading":i===!1?"show":"hide",isDeferrable:!1},{Component:sa,getModalState:()=>n?o===null?"loading":o===!1?"show":"hide":"hide",isDeferrable:!0},{Component:aa,getModalState:()=>te?"loading":ae&&oe?"show":"hide",isDeferrable:!1},{Component:ut,getModalState:()=>O,isDeferrable:!1},{Component:xt,getModalState:()=>A?"loading":v?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(u=>!(u.isDeferrable&&c)&&(!u.expiresAt||u.expiresAt.getTime()>Date.now())),[ne,ie,_,k,o,i,T,A,n,E,w,j,l,F,h,O,v,c,oe,ae,te,re,ce,ge,fe,me,de,le,ue,he,N,g]);r.useEffect(()=>{if(L[a]&&L[a].getModalState()==="hide"){const u=L.findIndex(ts=>ts.getModalState()!=="hide");t(u)}},[a,L]);const q=L[a],K=q?.getModalState()==="show";if(r.useEffect(()=>{const u=y.getState().activeModals.has(D.BlockingInitialComponent);K!==u&&(K?d.openModal(D.BlockingInitialComponent):d.closeModal(D.BlockingInitialComponent))},[K]),q==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const pe=q.getModalState();if(pe==="loading")return null;pe==="hide"&&t(u=>u+1);const as=L[a].Component;return e.jsx(as,{onClose:()=>{m(!0),t(u=>u+1)}})}const Pe=$({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),St=p(()=>x(()=>import("./cp2ugz9nij812u2n.js"),__vite__mapDeps([14,1,2,3,8,4,5,9,7,10,11,15,16,17,18,19,20,21,22,23,24,25,12,13,26,27,28,29,30,31,6,32,33,34,35,36,37,38,39,40,41,42,43])).then(s=>s.DebugConversationSidebar));function es({clientThreadId:s}){yt();const a=X(),t=a?.includes("debug"),o=hs(),i=y(l=>l.activeSidebar),n=a?.includes("debug")&&i==="debug";return!t||!n?null:e.jsx(St,{clientThreadId:s,slideOver:!na(o),onClose:()=>d.toggleActiveSidebar("debug"),isOpen:!0})}function yt(){const a=X()?.includes("debug");r.useEffect(()=>{if(!a)return;const t=new AbortController;return document.addEventListener("keydown",o=>{o.target instanceof HTMLElement&&["input","textarea","select","button"].includes(o.target.tagName.toLowerCase())||o.key==="\\"&&d.toggleActiveSidebar("debug")},{signal:t.signal}),()=>{t.abort()}},[a])}const Mt=p(()=>x(()=>import("./mjxuczsf6i68yor7.js"),__vite__mapDeps([44,1,2,3,4,5,45,8,9,46,47,7,10,48])).then(s=>s.SearchSources));function jt({clientThreadId:s}){const{resolvedTheme:a}=gs(),t=a==="dark",{turnIndex:o,messageId:i,isOpen:n}=Xe(),l=r.useCallback(()=>{d.closeChatThreadFlyout(s,i)},[s,i]);return!i||!o||!n?null:e.jsx(Ke,{anchor:"top",className:f("relative flex-1 border-l",t?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(Q,{name:"search-sources-header",type:"primary",className:f("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(fs,{onClick:l})})}),children:e.jsx(Mt,{clientThreadId:s,turnIndex:o,messageId:i,isInSidebar:!0})})}function ss({clientThreadId:s}){r.useEffect(()=>{d.closeSharingModal()},[s]);const a=We();r.useEffect(()=>(R.retainThread(s),()=>{setTimeout(()=>{a.invalidateQueries({queryKey:["conversation",s]})},0),R.releaseThread(s)}),[s,a]),r.useEffect(()=>()=>{W.checkGate("3922476776")||Me.abortAllRequests()},[s]);const t=r.useRef(s);r.useEffect(()=>{s!==t.current&&(W.checkGate("3922476776")||Me.clear(),t.current=s)},[s])}const kt=p(()=>x(()=>import("./6fq3lkx3ztrdk2lf.js"),__vite__mapDeps([49,1,2,3,4,5,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6,50,51,52,53,54,55,18,56])).then(s=>s.CanvasFocusedViewManager)),vt=p(()=>x(()=>import("./o7v0ohat4r2p6q4w.js"),__vite__mapDeps([57,1,2,3,15,4,5,10,8,9,44,45,46,47,7,48,58])).then(s=>s.SearchResultsModal));function At({clientThreadId:s,setClientThreadId:a,urlThreadId:t,prefetchSearch:o}){const i=Fa();ss({clientThreadId:s});const{createNewThread:n,onThreadCreated:l,resetThread:c}=et({clientThreadId:s,setClientThreadId:a});Ze({resetThreadAction:c,clientThreadId:s});const m=Z(s);return e.jsxs(ze,{clientThreadId:s,children:[e.jsx(Qe,{clientThreadId:s,urlThreadId:t}),e.jsxs(Ee,{hideNavigation:i,mobileHeaderContent:e.jsx(Za,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Ja,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx($a,{onNewChatButtonClick:c}),mobileHeaderRightContent:e.jsx(Ua,{onNewChatButtonClick:c}),sidebar:e.jsx(qa,{navHeader:s?e.jsx(Ya,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:n}):null,children:e.jsx(Xa,{clientThreadId:s,onNewThread:n})}),threadFlyout:e.jsx(jt,{clientThreadId:s}),children:[e.jsx(Ye,{}),e.jsx(Je,{clientThreadId:s,onCreate:l,prefetchSearch:o},s),e.jsxs(Ee.Sidebars,{children:[m&&e.jsx(kt,{clientThreadId:s}),e.jsx(es,{clientThreadId:s}),!1]})]}),e.jsx(wt,{clientThreadId:s})]})}function wt({clientThreadId:s}){const{value:a}=Fe("218782548"),t=ia(),{isOpen:o}=Xe();return o&&(!t||!a)&&e.jsx(vt,{clientThreadId:s})}const _t=450;function Tt({children:s,clientThreadId:a,isOpen:t,onClose:o}){return e.jsx(ra,{children:t&&e.jsx(ms,{children:e.jsx(ca.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(Oe.div,{className:"h-full w-full bg-token-main-surface-secondary",...je}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(Oe.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:_t},...je,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(Je,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})})}const Et=p(()=>x(()=>import("./enhk5054h7hkng1b.js"),__vite__mapDeps([59,1,2,3,4,5,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6]))),Ot=p(()=>x(()=>import("./fggt4n2uvnith5cw.js"),__vite__mapDeps([60,1,2,3,4,5,39,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6,61,41,62,63,64,21,22,32,33,34,35,36,37,38,40,42,43,65])).then(s=>s.ImageEditor));function Nt({clientThreadId:s}){const a=la();r.useEffect(()=>{Y.close()},[s]);let t;return a?.type===ke.ADAVisualization?t=e.jsx(Et,{clientThreadId:s,visualization:a.visualization}):a?.type===ke.Image&&(t=e.jsx(Ot,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(Tt,{clientThreadId:s,isOpen:a!=null,onClose:Y.close,children:t})}const Lt=()=>{const s=U(),a=y(n=>n.activeModals.has(D.KeyboardActions)),t=()=>{d.closeModal(D.KeyboardActions)},o=Ka(),i=r.useMemo(()=>{const n=Math.ceil(o.length/2);return[o.slice(0,n),o.slice(n)]},[o]);return e.jsx(He,{isOpen:a,onClose:t,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage(It.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:i.map((n,l)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:n.map(c=>e.jsx(Pt,{action:c},c.key))},`col-${l}`))})})})},Pt=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(M,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:Qa(s.keyboardBinding).map((a,t)=>e.jsx(Dt,{keyName:a},`${s.key}-${t}`))})]}),Dt=({keyName:s})=>{const a=f("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:f(a,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:f(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:f(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},It=$({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function Bt(){const s=We(),[a,t]=r.useState(!1);return e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(M,{id:"p9u9Tx",defaultMessage:"Unable to load history"}),!a&&e.jsx("div",{className:"mt-1",children:e.jsx(I,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{t(!0),ot(s)},children:e.jsx(M,{id:"3NKcIv",defaultMessage:"Retry"})})})]})}function Vt({clientThreadId:s}){const a=Ha(s),t=Ge(),{isCollapsible:o,recentConversationLimit:i}=tt(),n={buckets:o,recentConversationLimit:i},l=y(h=>h.isHistoryCollapsed),{conversations:c,buckets:m,hasNextPage:b,fetchNextPage:B,data:O,isLoading:v,isFetchingNextPage:A,isError:w,recents:j}=nt(n),_=t?void 0:a,V=l&&j.items.length>0,g=!l&&m.length>0,N=c.length===0,C=!w&&(O===void 0||v||A);r.useMemo(()=>{da.publish({kind:"refreshHistory",conversations:c})},[c]);const[E]=ua({onChange:h=>{r.startTransition(()=>{d.setHistoryShowMoreVisible(h)})}}),k=b&&!N&&!l&&!v&&!A;return e.jsxs(e.Fragment,{children:[w&&N&&!C&&e.jsx(Bt,{}),V&&e.jsx(ve,{header:j.label,children:j.items.map((h,T)=>e.jsx(Ne,{item:h,isActive:h.id===_,testId:`history-item-${T}`},h.id))}),g&&m.map(h=>e.jsx(ve,{header:h.label,children:h.items.map((T,F)=>e.jsx(Ne,{item:T,isActive:T.id===_,testId:`history-item-${F}`},T.id))},h.key)),C&&e.jsx(ps,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),o&&e.jsxs("div",{className:"-ml-2 mb-5",children:[e.jsx("div",{className:f(!l&&"hidden"),children:e.jsx(Ae,{type:"more",onClick:d.toggleHistoryCollapsed})}),e.jsx("div",{className:f(l&&"hidden"),ref:E,children:e.jsx(Ae,{type:"less",onClick:d.toggleHistoryCollapsed})})]}),k&&e.jsx(ha,{onPaginate:B})]})}const Rt=p(()=>x(()=>import("./cv8fq9nmwecab2b5.js"),__vite__mapDeps([66,1,2,3,35,7,4,5,8,9,10,15,63,25,64,11,6,62,24,12,13,26,27])).then(s=>s.GizmoSidebarList));function Ft({clientThreadId:s}){const a=Re(),t=Wa(s),{isUnauthenticated:o}=xs();return o?null:e.jsxs("div",{className:f(S.screenContent),children:[null,e.jsx(Vt,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(Rt,{currentGizmoId:t}):null]})}const Ht=p(()=>x(()=>import("./jc3a4hqeg8mpumf5.js"),__vite__mapDeps([67,1,2,3,15,4,5,10,8,9,24,7,25,12,13,26,27,61,41])).then(s=>s.UserProfileBar),{ssr:!0});function Wt(){const s=y(H.isGptListVisible),a=y(H.isHistoryShowMoreVisible),t=y(H.isHistoryCollapsed),o=y(H.isGptListCollapsed),i=r.useCallback(()=>{t||d.toggleHistoryCollapsed(),o&&d.toggleGptListCollapsed()},[t,o]),n=[];return!t&&!a&&n.push(e.jsx(we,{onClick:d.toggleHistoryCollapsed,children:e.jsx(M,{id:"1poXLj",defaultMessage:"See less"})},"see-less")),s||n.push(e.jsx(we,{onClick:i,children:e.jsx(M,{id:"DnQZfo",defaultMessage:"See GPTs"})},"see-gpt")),e.jsxs(ga,{className:f(S.screenTrailingBarContainer),children:[n,e.jsx(Ht,{})]})}const Gt=p(()=>x(()=>import("./fn3akgdb38fjnrzu.js"),__vite__mapDeps([68,1,2,3,4,5,69,70,8,9,71,62,6,7,10,11,15])).then(s=>s.FannyPackIconButton),{ssr:!1});function zt({onNewThread:s}){const a=U(),t=Ia(),o=y(n=>n.sidebarState===fa.Floating);ma({checkElement:n=>n?.tagName==="NAV",enabled:!t&&o,onLightDismiss(){const n=document.querySelector(`input[name="${_e.OpenOrClosed}"]`);n&&(n.checked=!1)}});const{isFannyPackEnabled:i}=pa();return e.jsxs(e.Fragment,{children:[e.jsx(Q,{type:"primary",className:f(S.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[9px]",children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(xa,{className:f(S.closeSidebarAction),checked:!t,onChange:n=>{n.currentTarget.checked?d.openSidebar():d.closeSidebar()},icon:e.jsx(it,{className:S.sidebarIcon}),label:a.formatMessage({id:"fM0vj3",defaultMessage:"Close Sidebar"}),group:_e.OpenOrClosed})}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx(Gt,{className:S.searchAction,icon:e.jsx(rt,{className:S.sidebarIcon})}),e.jsx(bs,{to:"/",onClick:n=>{n.preventDefault(),s()},children:e.jsx(ba,{icon:e.jsx(ct,{className:S.sidebarIcon}),className:S.searchAction,label:a.formatMessage({id:"NUNaGU",defaultMessage:"New chat"})})})]})]})}),e.jsx(Q,{type:"primary",className:S.bucketBar,disableSizeTracking:!0,children:" "})]})}function $t(){const{clientThreadId:s,onNewThread:a}=se();return e.jsx(Ke,{anchor:"vertical",className:f(S.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(zt,{onNewThread:a}),trackLeading:!0,trailing:e.jsx(Wt,{}),children:e.jsx(Ft,{clientThreadId:s})})}const Ut=p(()=>x(()=>import("./6fq3lkx3ztrdk2lf.js"),__vite__mapDeps([49,1,2,3,4,5,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6,50,51,52,53,54,55,18,56])).then(s=>s.CanvasFocusedViewManager));function qt(){const{clientThreadId:s,resetThread:a}=se();return Ze({resetThreadAction:a,clientThreadId:s}),null}function Kt(){const{clientThreadId:s,currentModelId:a,isCompanionWindow:t}=se();return e.jsx(Sa,{conversationId:s,currentModelId:a,isActiveWindow:!t})}function Qt({clientThreadId:s,setClientThreadId:a,urlThreadId:t}){ss({clientThreadId:s});const o=Z(s);return e.jsxs(st,{clientThreadId:s,setClientThreadId:a,children:[e.jsx(Kt,{}),e.jsx(qt,{}),e.jsxs(ze,{clientThreadId:s,children:[e.jsx(Qe,{clientThreadId:s,urlThreadId:t}),e.jsx(Ye,{}),e.jsx(Ca,{className:Cs.application,sidebar:e.jsx($t,{}),thread:e.jsx(at,{}),details:o&&e.jsx(Ut,{clientThreadId:s}),debugger:e.jsx(es,{clientThreadId:s}),name:"application-root"})]})]})}var Yt={};const Xt=p(()=>x(()=>import("./abbkn5p9gymxpeuc.js"),__vite__mapDeps([72,1,2,3,4,5,23,24,7,8,9,10,25,12,13,26,15,27,28,29,30,11,31,6,73])));function xo(s){const{urlThreadId:a,clientThreadId:t,prefetchSearch:o}=s;Jt();const i=Ge(),n=Se(),[l]=Ss(),[c,m]=r.useState(()=>a!==void 0?a:t!==void 0?t:ye());a!==void 0&&c!==a&&R.getServerThreadId(c)!==a&&m(a);const b=ya(Se());r.useEffect(()=>{a===void 0&&R.getServerThreadId(c)!==void 0&&m(ye())},[a,c,b]);const B=G(ee.workspaceId);Z(c);const O=Ma(),{eligible:v,isLoading:A,markAsViewed:w}=ja(),j=ka();r.useEffect(()=>{(n.pathname==="/"||n.pathname.startsWith("/c/"))&&va({namespace:Te.ChatPageLoad})==null&&(Aa({namespace:Te.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),z.addTiming("chatgpt.web.chatPage.mounted"))},[]);const _=wa();r.useEffect(()=>{ys(!0).then(g=>{g.force_login&&_({authType:"login"}),Ms.initializeAndGatherData(g),_a.initializeAndGatherData(g),js.initializeAndGatherData(g)})},[_]),r.useEffect(()=>{const g=l.get(Ta)==="true";i!==g&&ks.setIsTemporaryChatEnabled(g)},[i,l]),r.useEffect(()=>{n.state?.focusObject&&Y.setFocusedObject(n.state.focusObject)},[n.state?.focusObject]),r.useEffect(()=>{!A&&v&&(w(),j())},[v,A,w,j]);const V=O?Qt:At;return e.jsx(Ea.Provider,{value:null,children:e.jsx(Oa,{children:e.jsxs(Na,{clientThreadId:c,children:[e.jsx(Ct,{clientThreadId:c},B),e.jsx(Lt,{}),e.jsx(La,{}),e.jsx(V,{urlThreadId:a,clientThreadId:c,setClientThreadId:m,prefetchSearch:o}),e.jsx(Nt,{clientThreadId:c}),e.jsx(Pa,{clientThreadId:c}),e.jsx(Zt,{}),!1,e.jsx(Da,{})]})})})}function Zt(){const s=y(a=>a.sharingModalThreadId);return s?e.jsx(Xt,{serverThreadId:s}):null}function Jt(){vs({queryKey:["pingEdge"],queryFn:()=>Ve.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Yt.GOKU_SERVICE);export{xo as C,_t as F};
//# sourceMappingURL=lnh72r7jxxlppupu.js.map
