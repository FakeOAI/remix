import{bj as l,c as k,bn as n,b2 as h,b3 as v,P as r,d as c,ak as y,r as d,dC as C}from"./j2kz7iekbuf2lk7j.js";import{b as S}from"./edsbbff3hjliwmsy.js";var T=(e=>(e.DownloadMessages="download-messages",e.InviteUsersToWorkspace="invite-users-to-workspace",e.WorkspaceAppearance="workspace-appearance",e.KeyboardActions="keyboard-actions",e.UserContext="user-context",e.WorkspaceSwitcher="workspace-switcher",e.ReadOnlyConversationTemplate="read-only-conversation-template",e.CookieManagement="cookie-management",e.AgeVerificationInterstitial="age-verification-interstitial",e.GPTDetails="gpt-details",e.GPTPrivacySettings="gpt-privacy-settings",e.GPTFeedbackEmail="gpt-support-email",e.GPTReview="gpt-review",e.GPTRemoveThirdParty="gpt-remove-third-party",e.SharedConversationModeration="shared-conversation-moderation",e.ReportConversation="report-conversation",e.BlockingInitialComponent="blocking-initial-component",e.NoAuthNewChat="no-auth-new-chat",e.GlobalMemoryOnboarding="global-memory-onboarding",e.AccountPayment="account-payment",e.CreateExclusion="create-exclusion",e.AddServiceAccountKey="add-service-account-key",e.DeleteServiceAccountKey="delete-service-account-key",e))(T||{});const g=l.IsNavigationCollapsed;function f(){const e=n.getItem(g)??!1;return h.setCookie(v.NavigationState,e?"0":"1",{maxAge:2**30}),{collapsed:e}}function b({collapsed:e}){n.setItem(g,e),h.setCookie(v.NavigationState,e?"0":"1",{maxAge:2**30})}const t=k()(()=>({isThreadHeaderVisible:!0,isDesktopNavCollapsed:f().collapsed,isVoiceActive:!1,sharingModalThreadId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,chatThreadFlyout:{userPreferenceIsOpen:p()??!1,isOpen:p()??!1},activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,browseMode:"conversation"})),D={isThreadHeaderVisible:e=>e.isThreadHeaderVisible,isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible},i={setBrowseMode:e=>{t.setState(a=>({...a,browseMode:e}))},enterGizmoEditor:()=>{t.setState({browseMode:"gizmo-editor"})},exitGizmoEditor:()=>{t.setState({browseMode:"conversation"})},toggleNavSidebar:()=>{t.getState().activeStageSidebar?i.togglePopoverNavSidebar():i.toggleDesktopNavCollapsed()},togglePopoverNavSidebar:()=>{i.toggleActiveSidebar("popover-nav")},closePopoverNavSidebar:()=>{t.setState(e=>e.activeSidebar==="popover-nav"?{activeSidebar:void 0}:{})},toggleDesktopNavCollapsed:e=>{t.setState(a=>{const s=e??!a.isDesktopNavCollapsed;return b({collapsed:s}),r.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:s}),{isDesktopNavCollapsed:s}})},hideThreadHeader:()=>{t.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{t.setState({isThreadHeaderVisible:!0})},openSharingModal(e,a){t.setState({sharingModalThreadId:e}),r.logEvent(c.shareConversationOpenModal,{location:a})},closeSharingModal(){t.setState({sharingModalThreadId:void 0})},openFeedbackModal(e){t.setState({feedbackModalThreadId:e})},closeFeedbackModal(){t.setState({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(e){t.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){t.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){t.setState({activeSidebar:e})},toggleActiveSidebar(e){t.setState(a=>({activeSidebar:a.activeSidebar===e?!1:e}))},closeActiveSidebar(){t.setState(()=>({activeSidebar:!1}))},setActiveStageSidebar(e){t.setState({activeStageSidebar:e})},toggleModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.has(e)?s.delete(e):s.add(e),{activeModals:s}})},openModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.add(e),{activeModals:s}})},closeModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.delete(e),{activeModals:s}})},closeAllActiveModals(){t.setState({activeModals:new Set})},hideLatencyDevTools:()=>{t.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{t.setState({isLatencyDevToolsVisible:!0})},openChatThreadFlyout:(e,a,s)=>{r.logEventWithStatsig(c.searchLinkSidebarShown,"search_links_sidebar_shown",S({turnIndex:a,clientThreadId:e,messageId:s})),u(!0),t.setState({chatThreadFlyout:{isOpen:!0,userPreferenceIsOpen:!0,turnIndex:a,messageId:s,clientThreadId:e}})},toggleChatThreadFlyout:(e,a,s)=>{const o=t.getState().chatThreadFlyout;e===o.clientThreadId&&a===o.turnIndex&&o.isOpen?i.closeChatThreadFlyout(e,s):i.openChatThreadFlyout(e,a,s)},closeChatThreadFlyout:(e,a)=>{r.logEventWithStatsig(c.searchLinkSidebarClosed,"search_links_sidebar_closed",S({clientThreadId:e,messageId:a})),u(!1),t.setState({chatThreadFlyout:{isOpen:!1,userPreferenceIsOpen:!1}})},temporaryCloseChatThreadFlyout:()=>{t.setState(e=>({chatThreadFlyout:{isOpen:!1,userPreferenceIsOpen:e.chatThreadFlyout.userPreferenceIsOpen}}))}};function N(e){return t(a=>a.activeModals.has(e))}function F(){return t(e=>e.chatThreadFlyout)}function A(){const{isUnauthenticated:e}=y(),a=d.useContext(C).getCookie(v.NavigationState),s=t(o=>o.isDesktopNavCollapsed);return e?!0:a?a==="0":s}function P(){const[e,a]=d.useState(!1),s=t(o=>o.activeModals);return d.useEffect(()=>{a(o=>o||s.has("blocking-initial-component"))},[s]),e}function p(){const e=n.getItem(l.ChatThreadFlyoutState);return e===void 0?null:e}function u(e){n.setItem(l.ChatThreadFlyoutState,e)}export{T as G,i as U,A as a,F as b,t as c,P as d,D as e,N as u};
//# sourceMappingURL=k7ijapezwxn0gldf.js.map
