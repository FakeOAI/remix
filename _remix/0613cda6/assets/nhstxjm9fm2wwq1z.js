const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nnbcsydqvokhi49q.js","assets/j2kz7iekbuf2lk7j.js","assets/i82yi0xftw7xnu8c.js","assets/root-pepj1ul4.css","assets/le0rdv0puybx8i2m.js","assets/conversation-small-cll5buey.css","assets/la9ho9khwsle3ipj.js","assets/htup5dwnbax7b6kd.js","assets/do8518u43szfxnij.js","assets/16qiumnq05saksju.js","assets/l3k0q6i660cci9gs.js","assets/edsbbff3hjliwmsy.js","assets/4vylp69vgeqwcqq1.js","assets/k7ijapezwxn0gldf.js","assets/kfxda6hmufssgqha.js","assets/e9lafxuzyeh4418f.js","assets/jw599pz8489v1ojp.js","assets/hb1hje06k9b62bkr.js","assets/b62ru5xazts15yo7.js","assets/k3f9f9w3dyathkrt.js","assets/obzqpqgxugpntpyu.js","assets/m915zcyv891bnbyo.js","assets/ealecef5wv7wy2ad.js","assets/e6rd3uhbyhaywebc.js","assets/mc5sptj4mkj9uxem.js","assets/ni3b6td4z56jwe2m.js","assets/jpjqqpbn30fko74f.js","assets/eyqsg3qqtdkfk98w.js","assets/ja1b9jvth2p43ta6.js","assets/j7mq5nf1vxeg7fkq.js","assets/ewb0evhr38szdnyo.js","assets/b7blrmw2f2rsy4xk.js","assets/m6ja8i3ndb249mop.js","assets/iwalt63h1v4xvqgr.js","assets/ebyv7xemoskqzdop.js","assets/bei6thylcevdeq42.js","assets/bfbfsb70l0vf4jxg.js","assets/imolwwc9blvlxicq.js","assets/c5szd8ql34jskuew.js","assets/kawvie7nhoy7b5xf.js","assets/e7t3tykg4v6613sg.js","assets/ojbl8b4u1umuc742.js","assets/o2denhclmvar2ams.js","assets/kqwdyvkaaavvn8k3.js","assets/jp11c2xustro0uo8.js","assets/fqtr8ihq12mn1cgp.js","assets/of3ivvxauljlb72b.js","assets/ipsw910ertn2na1c.js","assets/d2638audhe4gxv60.js","assets/jxqa0hw8e95bn5qb.js","assets/c83mqmt44trq2hud.js","assets/iyh6rz3uu1kh4fq5.js","assets/gi0gm0lgz9wdkksb.js","assets/oc5adbkmhd29y471.js","assets/fhik259j3s851psh.js","assets/7ipsxb1ziflxxehx.js","assets/eaaoouesduey4ffk.js","assets/h0azweck97u45dr6.js","assets/lmjygzt103a8qxof.js","assets/hh4jf2kl0zghf52u.js","assets/en3g75iynq2rt808.js","assets/bnfarm88x21grgf5.js","assets/c4cz4hwi8w521yv7.js","assets/983a0dy92b3ronpv.js","assets/o47tna6rx13j3x1j.js","assets/bykfjlarbsk27vkl.js","assets/eezzntl03eicfus6.js","assets/7nri98wcby9llxmz.js","assets/kgupfl5kz0tgq4pz.js","assets/my7bnxus0xiawn8r.js"])))=>i.map(i=>d[i]);
import{y as e,bA as X,b2 as V,b3 as R,b0 as $e,r as o,D as J,aA as W,N as Ke,S as K,P as q,d as Oe,ae as _,a1 as G,a9 as As,a0 as z,al as ws,aj as Os,ab as y,ac as S,$ as ne,bM as _s,bL as Ts,bJ as Ns,aW as Es,w as qe,eg as _e,bt as Qe,bu as Ps,ag as Ls,az as Ds,a4 as p,aB as Is,j as Bs,f6 as Te,ci as Ye,aw as Fs,aE as Vs,ak as Xe,fo as b,c as Je,dC as Rs,ec as Ws,as as Ne,c7 as Hs,fj as Ee,x as Pe,a$ as Gs,dK as Le,bk as zs,bl as Us,bm as $s,bU as Ks,u as qs}from"./j2kz7iekbuf2lk7j.js";import{je as oe,fm as Qs,jf as Ze,jg as es,jh as Ys,ji as ss,aj as ts,jj as Xs,jk as Js,cZ as Zs,jl as et,jm as st,c7 as Q,jn as tt,jo as at,jp as nt,jq as ot,dA as rt,jr as it,js as ct,jt as lt,ju as dt,jv as ut,jw as ft,jx as gt,jy as ht,jz as mt,jA as pt,jB as bt,jC as xt,jD as St,jE as jt,jF as Ct,jG as kt,jH as yt,jI as vt,jJ as Mt,c8 as re,jK as At,jL as wt,eO as Ot,gh as as,i1 as Y,eS as De,dT as ie,jM as ns,jN as os,hd as _t,bS as ce,bE as Tt,jO as Ie,hm as U,fL as Nt,bM as te,bN as Be,jP as Et,jQ as rs,b$ as Pt,jR as Lt,bT as Dt,jS as h,jT as Fe,i4 as le,jU as is,jV as ae,jW as It,jX as Bt,i0 as Ft,jY as Vt,br as Rt,c0 as Wt,jZ as Ht,gg as Gt,j_ as zt,j$ as Ut,k0 as $t,k1 as Kt,bW as qt,bX as Ve,k2 as Qt,u as Yt,cb as Xt,k3 as Jt,cn as Zt,cc as ea,d3 as sa,k4 as ta,d4 as aa,k5 as na}from"./le0rdv0puybx8i2m.js";import{U as O,G as I,c as B,b as cs}from"./k7ijapezwxn0gldf.js";import{b as oa,c as ra,A as ia,T as H,a as ca,d as la,k as da}from"./do8518u43szfxnij.js";import{u as ua,a as ls}from"./la9ho9khwsle3ipj.js";import{L as fa}from"./htup5dwnbax7b6kd.js";import{S as Re,b as ga,c as ha,N as ma,U as pa}from"./7ipsxb1ziflxxehx.js";import{u as ds,c as ba,g as xa}from"./ebyv7xemoskqzdop.js";import{S as Sa,C as ja,H as Ca}from"./eaaoouesduey4ffk.js";import{e as ka,h as ya,T as us}from"./k3f9f9w3dyathkrt.js";import{T as fs}from"./lmjygzt103a8qxof.js";import{H as va,i as gs,f as T,o as Ma}from"./jpjqqpbn30fko74f.js";import{C as hs}from"./hh4jf2kl0zghf52u.js";import{m as $}from"./16qiumnq05saksju.js";import{a as Aa}from"./h0azweck97u45dr6.js";import{B as wa}from"./eyqsg3qqtdkfk98w.js";import{ab as Oa,bq as _a,b5 as Ta,bQ as Na,W as Ea}from"./i82yi0xftw7xnu8c.js";import{u as Pa}from"./en3g75iynq2rt808.js";const La=60*60*24;function Da(s,t=!1){return X()==null||t?"loading":!s||V.getCookie(R.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function Ia({onClose:s}){const{data:{ageVerificationType:t,ageVerificationDeadline:a}={}}=oe();return t==="passive"?e.jsx(Ba,{onClose:s}):t==="countdown"&&a!=null?e.jsx(Fa,{onClose:s,ageVerificationDeadline:a}):null}const Ba=({onClose:s})=>{const{country:t}=$e();return o.useEffect(()=>{J.addAction("privacy_policy.show_age_verification_modal",{country:t})},[t]),e.jsx(Qs,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(W,{color:"primary",onClick:async()=>{await Ke.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(W,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},Fa=({onClose:s,ageVerificationDeadline:t})=>{const a=t!=null?Math.floor(t/60/60/24):0;o.useEffect(()=>{K.logEvent("chatgpt_compliance_age_verification_seen"),q.logEvent(Oe.complianceAgeVerificationSeen)},[]);const{country:n}=$e();return o.useEffect(()=>{J.addAction("privacy_policy.show_age_verification_countdown",{country:n})},[n]),e.jsxs(Ze,{children:[e.jsx(es,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(_,{...We.ageVerificationTitle,values:{deadline:a,learnMoreLink:r=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:r})}})}),e.jsx(Ys,{altText:"Dismiss notification",asChild:!0,children:e.jsx(W,{color:"primary",size:"small",onClick:()=>{K.logEvent("chatgpt_compliance_age_verification_clicked"),q.logEvent(Oe.complianceAgeVerificationClicked),V.setCookie(R.AgeVerification,"true",{maxAge:La,path:"/"}),s(),O.openModal(I.AgeVerificationInterstitial)},children:e.jsx(_,{...We.startVerification})})}),e.jsx(ss,{})]})},We=G({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function Va({onClose:s}){const t=z(),a=ws(),{openSettings:n}=ts(),r=Xs(),{session:i}=Os(),{data:{isStorageComplianceEnabled:l}={}}=oe(),{data:c,isLoading:u}=Js({enabled:!!(l&&i),select:g=>!g.cookie_consent.is_required});return o.useEffect(()=>{c===!0&&s()},[c,s]),u?null:e.jsx(Ra,{onReject:()=>{r.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){a.success(t.formatMessage(D.updateSuccess))},onError(){a.danger(t.formatMessage(D.updateFailure))}}),s()},onAccept:()=>{r.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){a.success(t.formatMessage(D.updateSuccess))},onError(){a.danger(t.formatMessage(D.updateFailure))}}),s()},children:e.jsx(_,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:g=>e.jsx(fa,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:g}),manageLink:g=>e.jsx(Wa,{onClick:()=>{n(Zs.DataControls)},children:g})}})})}function Ra({children:s,onAccept:t,onReject:a}){return o.useEffect(()=>{J.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs(Ze,{children:[e.jsxs(es,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(W,{color:"secondary",size:"small",onClick:a,children:e.jsx(_,{...D.reject})}),e.jsx(W,{color:"secondary",size:"small",onClick:t,children:e.jsx(_,{...D.accept})})]})]}),e.jsx(ss,{})]})}const Wa=As.button`underline font-normal text-green-600`,D=G({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),Ha=y(()=>S(async()=>{const{ModelOnboardingNUXModal:s}=await import("./nnbcsydqvokhi49q.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(({ModelOnboardingNUXModal:s})=>s)),Ga=({onClose:s})=>{const t=z(),a=Q(re.isBusinessWorkspace),n=Q(i=>i.currentWorkspace),r=a?t.formatMessage(He.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx(Qe,{isOpen:!0,onClose:Ps,type:"success",title:r,size:"custom",noPadding:!0,className:"max-w-3xl",description:t.formatMessage(He.personalOnboardingSubheading),children:e.jsx(At,{onClose:s,scope:wt.Personal})})};function za({clientThreadId:s}){const[t,a]=o.useState(0),{hasSeenOnboardingDate:n}=et(),{hasSeenTeamOwnerOnboardingDate:r}=st(),i=Q(re.isBusinessWorkspace),l=ne(),[c,u]=o.useState(!1),{data:g,isPending:f}=oe(),C=Da(g,f),{eligible:v,isLoading:d}=ua(),k=_s(),A=Ts(),w=Ns(),F=oa(()=>ra.getThread(s)),x=ia(s)||!F,N=H.getConversationOrigin(s),{data:M,isError:E}=Es(),j=M!=null,P=M&&M?.accountItems.length>1&&M.currentAccountId==null,de=M?.accountItems.some(m=>m.isPersonalAccount()),ue=!!M?.accountItems&&M.accountItems.length>0&&M.accountItems.every(({canAccessWithCurrentSession:m})=>!m),{eligible:fe,isLoading:ge}=tt(),{value:he}=qe("1542198993"),{punchOutRequireLoginInfo:me}=at(),{state:pe}=nt(),{isOpen:be,isLoading:xe}=ot(),{isOpen:Se,isLoading:je}=rt(),{isOpen:Ce,isLoading:ke}=it(),{isOpen:ye,isLoading:ve}=ct(),{state:Me}=lt(),{isOpen:ks,isLoading:ys}=dt(),Ae=o.useMemo(()=>()=>null,[s]),L=o.useMemo(()=>[{Component:ut,getModalState:()=>me?"show":"hide",isDeferrable:!1},{Component:ft,getModalState:()=>pe,isDeferrable:!1},{Component:gt,getModalState:()=>Me,isDeferrable:!1},{Component:ht,getModalState:()=>xe||x?"loading":N===_e.APPLE?"hide":be?"show":"hide",isDeferrable:!1},{Component:mt,getModalState:()=>ve||x?"loading":N===_e.APPLE?"hide":ye?"show":"hide",isDeferrable:!1},{Component:Ae,getModalState:()=>"hide",isDeferrable:!1},{Component:Ga,getModalState:()=>i?"hide":n===null?"loading":n===!1?"show":"hide",isDeferrable:!0},{Component:pt,getModalState:()=>E?"hide":P?"show":j?"hide":"loading",isDeferrable:!1},{Component:bt,getModalState:()=>k!==null?"show":E||j?"hide":"loading",isDeferrable:!1},{Component:xt,getModalState:()=>A!==null?"show":E||j?"hide":"loading",isDeferrable:!1},{Component:St,getModalState:()=>w!=null?"show":E||j?"hide":"loading",isDeferrable:!1},{Component:jt,getModalState:()=>j?ue?"show":"hide":"loading",isDeferrable:!1},{Component:Ct,getModalState:()=>je?"loading":Se?"show":"hide",isDeferrable:!1},{Component:kt,getModalState:()=>ke?"loading":Ce?"show":"hide",isDeferrable:!1},{Component:Va,getModalState:()=>"hide",isDeferrable:!1},{Component:yt,getModalState:()=>!l?.isTeam()||!l?.isOwnerOfAccount()||!de?"hide":!j||r===null?"loading":r===!1?"show":"hide",isDeferrable:!1},{Component:vt,getModalState:()=>i?n===null?"loading":n===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Mt,getModalState:()=>ge?"loading":fe&&he?"show":"hide",isDeferrable:!1},{Component:Ia,getModalState:()=>C,isDeferrable:!1},{Component:Ha,getModalState:()=>d?"loading":v?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(m=>!(m.isDeferrable&&c)&&(!m.expiresAt||m.expiresAt.getTime()>Date.now())),[me,pe,w,j,n,r,de,d,i,E,k,A,l,ue,P,C,v,c,he,fe,ge,be,xe,ye,ve,Me,je,Se,Ce,ke,N,x,ys,ks,Ae]);o.useEffect(()=>{if(L[t]&&L[t].getModalState()==="hide"){const m=L.findIndex(Ms=>Ms.getModalState()!=="hide");a(m)}},[t,L]);const Z=L[t],ee=Z?.getModalState()==="show";if(o.useEffect(()=>{const m=B.getState().activeModals.has(I.BlockingInitialComponent);ee!==m&&(ee?O.openModal(I.BlockingInitialComponent):O.closeModal(I.BlockingInitialComponent))},[ee]),Z==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const we=Z.getModalState();if(we==="loading")return null;we==="hide"&&a(m=>m+1);const vs=L[t].Component;return e.jsx(vs,{onClose:()=>{u(!0),a(m=>m+1)}})}const He=G({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ua=y(()=>S(()=>import("./4vylp69vgeqwcqq1.js"),__vite__mapDeps([12,1,2,3,8,4,5,9,10,11,6,7,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40])).then(s=>s.DebugConversationSidebar));function ms({clientThreadId:s}){$a();const t=X(),a=t?.includes("debug"),n=Ls(),r=B(l=>l.activeSidebar),i=t?.includes("debug")&&r==="debug";return!a||!i?null:e.jsx(Ua,{clientThreadId:s,slideOver:!Ot(n),onClose:()=>O.toggleActiveSidebar("debug"),isOpen:!0})}function $a(){const t=X()?.includes("debug");o.useEffect(()=>{if(!t)return;const a=new AbortController;return document.addEventListener("keydown",n=>{n.target instanceof HTMLElement&&["input","textarea","select","button"].includes(n.target.tagName.toLowerCase())||n.key==="\\"&&O.toggleActiveSidebar("debug")},{signal:a.signal}),()=>{a.abort()}},[t])}const Ka=y(()=>S(()=>import("./ojbl8b4u1umuc742.js"),__vite__mapDeps([41,1,2,3,4,5,42,8,9,43,44,10,11,45])).then(s=>s.SearchSources));function ps({clientThreadId:s}){const{resolvedTheme:t}=Ds(),a=t==="dark",{turnIndex:n,messageId:r,isOpen:i}=cs(),l=o.useCallback(()=>{O.closeChatThreadFlyout(s,r)},[s,r]);return!r||!n||!i?null:e.jsx(as,{anchor:"top",className:p("relative flex-1 border-l",a?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(Y,{name:"search-sources-header",type:"primary",className:p("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(Is,{onClick:l})})}),children:e.jsx(Ka,{clientThreadId:s,turnIndex:n,messageId:r,isInSidebar:!0})})}function bs({clientThreadId:s}){o.useEffect(()=>{O.closeSharingModal()},[s]);const t=Bs();o.useEffect(()=>(H.retainThread(s),()=>{setTimeout(()=>{t.invalidateQueries({queryKey:["conversation",s]})},0),H.releaseThread(s)}),[s,t]),o.useEffect(()=>()=>{K.checkGate("3922476776")||De.abortAllRequests()},[s]);const a=o.useRef(s);o.useEffect(()=>{s!==a.current&&(K.checkGate("3922476776")||De.clear(),a.current=s)},[s])}const qa=y(()=>S(()=>import("./of3ivvxauljlb72b.js"),__vite__mapDeps([46,1,2,3,4,5,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33,47,48,49,50,21,51,52,53,16,35,54,55,39,34,56,57,19,20,22,23,24,25,36,37,38,40,58,59,60,61])).then(s=>s.CanvasFocusedViewManager)),Qa=y(()=>S(()=>import("./c4cz4hwi8w521yv7.js"),__vite__mapDeps([62,1,2,3,13,11,8,4,5,9,41,42,43,44,10,45,63])).then(s=>s.SearchResultsModal));function Ya({clientThreadId:s,setClientThreadId:t,urlThreadId:a,prefetchSearch:n}){const r=ca();bs({clientThreadId:s});const{createNewThread:i,onThreadCreated:l,resetThread:c}=va({clientThreadId:s,setClientThreadId:t});ds({resetThreadAction:c,clientThreadId:s});const u=ie();return e.jsxs(fs,{clientThreadId:s,children:[e.jsx(ns,{clientThreadId:s,urlThreadId:a}),e.jsxs(Re,{hideNavigation:r,mobileHeaderContent:e.jsx(ka,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(ya,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(ga,{onNewChatButtonClick:c}),mobileHeaderRightContent:e.jsx(ha,{onNewChatButtonClick:c}),sidebar:e.jsx(ma,{navHeader:s?e.jsx(Sa,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:i}):null,children:e.jsx(ja,{clientThreadId:s,onNewThread:i})}),threadFlyout:e.jsx(ps,{clientThreadId:s}),children:[e.jsx(os,{}),e.jsx(us,{clientThreadId:s,onCreate:l,prefetchSearch:n},s),e.jsxs(Re.Sidebars,{children:[u&&e.jsx(qa,{clientThreadId:s}),e.jsx(ms,{clientThreadId:s}),!1]})]}),e.jsx(Xa,{clientThreadId:s})]})}function Xa({clientThreadId:s}){const{value:t}=qe("218782548"),a=_t(),{isOpen:n}=cs();return n&&(!a||!t)&&e.jsx(Qa,{clientThreadId:s})}const Ge=450;function Ja({children:s,clientThreadId:t,isOpen:a,onClose:n}){const r=ce();return e.jsxs(Tt,{children:[a&&r&&e.jsx(gs,{clientThreadId:t,children:e.jsx(Te,{children:e.jsx(Ie.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx($.div,{className:"h-full w-full bg-token-main-surface-secondary",...U}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx($.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:Ge},...U,children:e.jsx(hs,{hideHeader:!0,hideTools:!0})})]})]})})})}),a&&!r&&e.jsx(Te,{children:e.jsx(Ie.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx($.div,{className:"h-full w-full bg-token-main-surface-secondary",...U}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx($.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:Ge},...U,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(us,{clientThreadId:t,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},t)})})]})]})})})]})}const Za=y(()=>S(()=>import("./o47tna6rx13j3x1j.js"),__vite__mapDeps([64,1,2,3,4,5,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33]))),en=y(()=>S(()=>import("./bykfjlarbsk27vkl.js"),__vite__mapDeps([65,1,2,3,4,5,37,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33,55,39,34,56,57,19,20,21,22,23,24,25,35,36,38,40,58,59,60,61])).then(s=>s.ImageEditor));function sn({clientThreadId:s}){const t=Nt();o.useEffect(()=>{te.close()},[s]);let a;return t?.type===Be.ADAVisualization?a=e.jsx(Za,{clientThreadId:s,visualization:t.visualization}):t?.type===Be.Image&&(a=e.jsx(en,{clientThreadId:s,messageId:t.messageId,image:t.image,allImages:t.allImages},t.image.asset_pointer)),e.jsx(Ja,{clientThreadId:s,isOpen:t!=null,onClose:te.close,children:a})}const tn=()=>{const s=z(),t=B(i=>i.activeModals.has(I.KeyboardActions)),a=()=>{O.closeModal(I.KeyboardActions)},n=ba(),r=o.useMemo(()=>{const i=Math.ceil(n.length/2);return[n.slice(0,i),n.slice(i)]},[n]);return e.jsx(Qe,{isOpen:t,onClose:a,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage(on.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:r.map((i,l)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:i.map(c=>e.jsx(an,{action:c},c.key))},`col-${l}`))})})})},an=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(_,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:xa(s.keyboardBinding).map((t,a)=>e.jsx(nn,{keyName:t},`${s.key}-${a}`))})]}),nn=({keyName:s})=>{const t=p("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:p(t,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:p(t,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:p(t,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},on=G({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function rn(){const{clientThreadId:s,resetThread:t}=T();return ds({resetThreadAction:t,clientThreadId:s}),null}function cn({onConversationChanged:s}){const{clientThreadId:t}=T();Et({source:t,enabled:!!s,onChange:s})}function ln({onConversationChanged:s}){cn({onConversationChanged:s})}function dn({onClick:s}){const{clientThreadId:t}=T(),{isSidebarFlyoutOpen:a,onSidebarFlyoutOpenChange:n}=rs();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(wa,{onOpenChange:n,side:"right",sideOffset:4,open:a,contentAlign:"end",triggerButton:e.jsxs("button",{className:p("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2.5 text-sm tracking-condensed text-token-text-secondary hover:bg-token-main-surface-secondary focus:ring-0",a&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(Oa,{className:p("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(_,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(Ca,{activeId:t})})})})}function un(){const s=ce(),{conversations:t}=ls();return{isCollapsible:s&&t.length>5,recentConversationLimit:5}}function fn({clientThreadId:s}){const t=la(s),a=Ye(),{isCollapsible:n,recentConversationLimit:r}=un(),i={recentConversationLimit:r},l=o.useRef(!1),c=!0,{conversations:u,data:g,isLoading:f,isError:C,recents:v,refetch:d}=ls(i),[k,A]=o.useState(!0),w=o.useCallback(function(P){P===void 0&&A(!1),d({cancelRefetch:!0})},[d,A]),F=a?void 0:t,x=u.length===0,N=C||g===void 0&&!f&&l.current,M=!N&&(g===void 0||f);return g===void 0&&!f&&!l.current&&(l.current=!0,w(!0)),o.useMemo(()=>{Pt.publish({kind:"refreshHistory",conversations:u})},[u]),e.jsxs(e.Fragment,{children:[N&&e.jsx(Lt,{showRetry:k,refetch:w}),!x&&e.jsx(Dt,{header:v.label,isLastInGroup:!0,children:v.items.map((j,P)=>e.jsx(Aa,{item:j,isActive:j.id===F,testId:`history-item-${P}`},j.id))}),M&&e.jsx(Fs,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),n&&e.jsx(Vs,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!c,className:p(!c),children:e.jsx(dn,{})})})})]})}const gn=y(()=>S(()=>import("./eezzntl03eicfus6.js"),__vite__mapDeps([66,1,2,3,25,10,4,5,8,9,11,13,56,27,57,6,7,33,34,26,28,29,30,31,32])).then(s=>s.GizmoSidebarList));function hn({clientThreadId:s}){const t=ne(),a=da(s),{isUnauthenticated:n}=Xe();return n?null:e.jsxs("div",{className:p(b.screenContent),children:[null,e.jsx(fn,{clientThreadId:s}),t?.canInteractWithGizmos()?e.jsx(gn,{currentGizmoId:a}):null]})}function xs(){return{isSidebarOpen:!1,mode:h.Floating}}class Ss{store;constructor(t){this.store=t}setSidebarMode=async t=>{switch(t){case h.Floating:this.store.setState({mode:h.Floating});break;case h.Pinned:this.store.setState({mode:h.Pinned});break}};openSidebar=async()=>{const t=ze();if(t){if(this.store.getState().isSidebarOpen&&t.checked)return;t.checked=!0}this.store.setState({isSidebarOpen:!0}),B.setState({isDesktopNavCollapsed:!1}),await Fe.yield(),q.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1})};closeSidebar=async()=>{const t=ze();if(t){if(!this.store.getState().isSidebarOpen&&!t.checked)return;t.checked=!1}this.store.setState({isSidebarOpen:!1}),B.setState({isDesktopNavCollapsed:!0}),await Fe.yield(),q.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0})}}function ze(){return document.querySelector(`input[name='${le.OpenOrClosed}']`)}const Ue=Je(()=>xs()),js=o.createContext({store:Ue,actions:new Ss(Ue)});function mn(s){let{isSidebarOpen:t,mode:a}=s;return t&&a===h.Pinned?"open-pinned":!t&&a===h.Pinned?"closed-pinned":"closed"}function pn(s){if(!s)return xs();const[t,a]=s.split("-");return{isSidebarOpen:t==="open",mode:a??h.Floating}}function Cs(){return o.use(js)}function bn({children:s}){o.use(Rs);const[t]=o.useState(()=>{const a=V.getCookie(R.SidebarState),n=Je(()=>pn(a));return{store:n,actions:new Ss(n)}});return o.useEffect(()=>t.store.subscribe((a,n)=>{const r=a.mode!==n.mode,i=a.isSidebarOpen!==n.isSidebarOpen;if(!(r||i))return;const l=mn(a);V.setCookie(R.SidebarState,l,{maxAge:2**30})}),[t.store]),e.jsx(js,{value:t,children:s})}function xn(){const s=ne(),t=s?.data==null,{isUnauthenticated:a}=Xe(),{openSettings:n}=ts(),[r]=o.useState(()=>{const f=V.getCookie(R.Workspace);return typeof f=="string"&&f!==Ws}),i=z(),{store:l,actions:c}=Cs(),u=l(f=>f.mode);if(!s||r&&t)return null;const g=a?e.jsx(pa,{}):e.jsx(Ma,{onClickSettings:()=>n()});return e.jsxs(Y,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[g,e.jsx("div",{className:b.togglePinWrapper,children:e.jsx(is,{tooltipSideOffset:14,className:b.pinSidebarAction,checked:u===h.Pinned,onChange:f=>{const C=f.currentTarget.checked?h.Pinned:h.Floating;f.preventDefault(),f.persist(),ae({css:It,update:()=>{f.target.checked=C===h.Pinned,c.setSidebarMode(C)}})},icon:e.jsx(Bt,{}),label:u===h.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),group:le.FloatingOrPinned})})]})}function Sn(){return e.jsx(Ft,{className:p(b.screenTrailingBarContainer),children:e.jsx(xn,{})})}function jn(s){const{clientThreadId:t}=T(),a=o.useRef(s);a.current=s,o.useEffect(()=>{a.current()},[t])}const Cn=y(()=>S(()=>import("./7nri98wcby9llxmz.js"),__vite__mapDeps([67,1,2,3,4,5,60,61,8,9,34,6,7,10,11,13,27])).then(s=>s.FannyPackIconButton)),kn=()=>S(()=>import("./j6h2u0gavsfi5dql.js"),[]).then(s=>s.default),yn=()=>S(()=>import("./dd2o9yqphijq15wo.js"),[]).then(s=>s.default);function vn({onNewThread:s}){const t=z(),a=o.useRef(null),{store:n,actions:r}=Cs(),i=n(d=>d.isSidebarOpen),l=n(d=>d.mode),c=l===h.Floating;function u(){a.current&&getComputedStyle(a.current)?.getPropertyValue("--sidebar_should_light_dismiss")&&r.closeSidebar()}jn(()=>{u()});const{isSidebarFlyoutOpen:g}=rs();Vt({checkElement:d=>d?.tagName==="NAV",enabled:i&&c&&!g,onLightDismiss:u});const{isFannyPackEnabled:f}=Rt(),{searchMsg:C,shortcutMsg:v}=Pa();return X(),e.jsxs(e.Fragment,{children:[e.jsx(Y,{type:"primary",className:p(b.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[9px]",ref:a,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(is,{className:p(b.closeSidebarAction),checked:i,onChange:async d=>{if(d.currentTarget.checked)if(l===h.Floating)r.openSidebar();else{d.preventDefault(),d.persist();const k=await kn();ae({css:k,update:()=>{d.target.checked=!0,r.openSidebar()}})}else if(l===h.Floating)r.closeSidebar();else{d.preventDefault(),d.persist();const k=await yn();ae({css:k,update:()=>{d.target.checked=!1,r.closeSidebar()}})}},icon:e.jsxs(e.Fragment,{children:[e.jsx(_a,{className:b.sidebarIcon,style:{display:"var(--screen-size-hidden-on-compact-mode)"}}),e.jsx(Ta,{className:b.sidebarIcon,style:{display:"var(--screen-size-hidden-on-wide-mode)"}})]}),label:t.formatMessage(se.closeSidebar),group:le.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center gap-3",children:[!1,f&&e.jsx(Ne,{label:e.jsxs("div",{children:[C,e.jsx("div",{className:"text-sm font-normal text-token-text-secondary",children:v})]}),children:e.jsx(Cn,{className:b.searchAction,icon:e.jsx(Na,{className:b.sidebarIcon})})}),e.jsx(Ne,{label:t.formatMessage(se.newChat),children:e.jsx(Hs,{to:"/",onClick:d=>{d.preventDefault(),s()},children:e.jsx(Wt,{icon:e.jsx(Ea,{style:{viewTransitionName:"var(--vt_new_chat_sidebar)"},className:b.sidebarIcon}),className:b.searchAction,label:t.formatMessage(se.newChat)})})})]})]})}),e.jsx(Y,{type:"primary",className:b.bucketBar,disableSizeTracking:!0,children:" "})]})}const se=G({newChat:{id:"NUNaGU",defaultMessage:"New chat"},closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function Mn(){const{clientThreadId:s,onNewThread:t}=T(),[a,n]=o.useState(!1),r=o.useCallback(i=>{setTimeout(()=>{n(i)},200)},[]);return ln({onConversationChanged:()=>{n(!1)}}),e.jsx(Ht,{value:{isSidebarFlyoutOpen:a,onSidebarFlyoutOpenChange:r},children:e.jsx(as,{anchor:"vertical",className:p(b.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(vn,{onNewThread:t}),trackLeading:!0,trailing:e.jsx(Sn,{}),children:e.jsx(hn,{clientThreadId:s})})})}const An=y(()=>S(()=>import("./of3ivvxauljlb72b.js"),__vite__mapDeps([46,1,2,3,4,5,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33,47,48,49,50,21,51,52,53,16,35,54,55,39,34,56,57,19,20,22,23,24,25,36,37,38,40,58,59,60,61])).then(s=>s.CanvasFocusedViewManager));function wn(){const{focusedObject:s,clientThreadId:t}=T(),a=ie();return e.jsx(Gt,{className:p(Ee.application,{[Ee.withFocusedView]:s}),sidebar:e.jsx(Mn,{}),thread:e.jsx(hs,{}),details:e.jsxs(e.Fragment,{children:[a&&e.jsx(An,{clientThreadId:t}),!1]}),threadExtendedInfo:e.jsx(ps,{clientThreadId:t}),debugger:e.jsx(ms,{clientThreadId:t}),name:"application-root"})}function On(){const{clientThreadId:s,currentModelId:t,isCompanionWindow:a}=T();return e.jsx(zt,{conversationId:s,currentModelId:t,isActiveWindow:!a})}function _n({clientThreadId:s,setClientThreadId:t,urlThreadId:a}){return bs({clientThreadId:s}),e.jsx(gs,{clientThreadId:s,setClientThreadId:t,children:e.jsxs(bn,{children:[e.jsx(On,{}),e.jsx(rn,{}),e.jsxs(fs,{clientThreadId:s,children:[e.jsx(ns,{clientThreadId:s,urlThreadId:a}),e.jsx(os,{}),e.jsx(wn,{})]})]})})}var Tn={};const Nn=y(()=>S(()=>import("./kgupfl5kz0tgq4pz.js"),__vite__mapDeps([68,1,2,3,4,5,26,27,6,7,8,9,10,11,28,13,29,30,31,32,33,69])));function Jn(s){const{urlThreadId:t,clientThreadId:a,prefetchSearch:n}=s;Pn();const r=Ye(),i=Pe(),[l]=Gs(),[c,u]=o.useState(()=>t!==void 0?t:a!==void 0?a:Le());t!==void 0&&c!==t&&H.getServerThreadId(c)!==t&&u(t);const g=Ut(Pe());o.useEffect(()=>{t===void 0&&H.getServerThreadId(c)!==void 0&&u(Le())},[t,c,g]);const f=Q(re.workspaceId);ie();const C=ce(),{eligible:v,isLoading:d,markAsViewed:k}=$t(),A=Kt();o.useEffect(()=>{(i.pathname==="/"||i.pathname.startsWith("/c/"))&&qt({namespace:Ve.ChatPageLoad})==null&&(Qt({namespace:Ve.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),J.addTiming("chatgpt.web.chatPage.mounted"))},[]);const w=Yt();o.useEffect(()=>{zs(!0).then(x=>{x.force_login&&w({authType:"login"}),Us.initializeAndGatherData(x),Xt.initializeAndGatherData(x),$s.initializeAndGatherData(x)})},[w]),o.useEffect(()=>{const x=l.get(Jt)==="true";r!==x&&Ks.setIsTemporaryChatEnabled(x)},[r,l]),o.useEffect(()=>{i.state?.focusObject&&te.setFocusedObject(i.state.focusObject)},[i.state?.focusObject]),o.useEffect(()=>{!d&&v&&(k(),A())},[v,d,k,A]);const F=C?_n:Ya;return e.jsx(Zt.Provider,{value:null,children:e.jsx(ea,{children:e.jsxs(sa,{clientThreadId:c,children:[e.jsx(za,{clientThreadId:c},f),e.jsx(tn,{}),e.jsx(ta,{}),e.jsx(F,{urlThreadId:t,clientThreadId:c,setClientThreadId:u,prefetchSearch:n}),e.jsx(sn,{clientThreadId:c}),e.jsx(aa,{clientThreadId:c}),e.jsx(En,{}),!1,e.jsx(na,{})]})})})}function En(){const s=B(t=>t.sharingModalThreadId);return s?e.jsx(Nn,{serverThreadId:s}):null}function Pn(){qs({queryKey:["pingEdge"],queryFn:()=>Ke.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Tn.GOKU_SERVICE);export{Jn as C,Ge as F,ps as a,Cs as u};
//# sourceMappingURL=nhstxjm9fm2wwq1z.js.map
