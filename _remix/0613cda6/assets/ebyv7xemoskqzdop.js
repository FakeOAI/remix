import{dp as G,dq as T,br as E,bC as O,A as _,dr as I,ds as $,dt as U,du as F,am as V,$ as Z,b as q,g as Q}from"./le0rdv0puybx8i2m.js";import{t as W}from"./la9ho9khwsle3ipj.js";import{al as H,L as N,r as k,bu as J,R as X,ez as Y,eA as ee,eB as se,P as te,d as oe,D as ae,bd as ne,a1 as D,y as e,$ as C,ae as x,a4 as ie,aA as re,aw as ce,j as de,l as le,a9 as ue}from"./j2kz7iekbuf2lk7j.js";import{T as b}from"./do8518u43szfxnij.js";import{c as me,U as M,G as A}from"./k7ijapezwxn0gldf.js";import{D as f,$ as ge}from"./eyqsg3qqtdkfk98w.js";import{q as B,aQ as L,aR as z,aS as R,aT as pe,P as fe,J as xe,b as ye,az as K,C as he}from"./i82yi0xftw7xnu8c.js";const be=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function w(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const s={Mod:"mod",Comma:",",Space:"Space"," ":"Space"," ":"Space",...G.Key},ke={[s.Mod]:w()?"⌘":"Ctrl",[s.Meta]:w()?"⌘":"Win",[s.Comma]:",",[s.Enter]:"⏎",[s.Escape]:"Esc",[s.ArrowUp]:"↑",[s.ArrowDown]:"↓",[s.ArrowLeft]:"←",[s.ArrowRight]:"→",[s.Backspace]:"⌫",[s.Delete]:"⌦",[s.Tab]:"⇥",[s.Control]:"Ctrl",[s.Shift]:"Shift"},Ee=o=>o.map(t=>ke[t]??t),g=D({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),ve=new T,Me=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:d,toaster:n,isFannyPackEnabled:c,isZoomEnabled:a})=>[{key:"newChat",action:o||J,actionMessageDescriptor:g.newChat,group:"Core",keyboardBinding:[s.Mod,s.Shift,"o"],altKeyboardBindings:c?[]:[[s.Mod,"k"]]},{key:"focusPromptTextarea",action:d??W,actionMessageDescriptor:g.focusPromptTextarea,group:"Chat",keyboardBinding:[s.Shift,s.Escape]},{key:"copyLastCodeBlock",action:i=>{if(t!=null){const r=b.getThreadCurrentLeafId(t),l=b.getThreadConversationTurns(t,r);for(let u=l.length-1;u>=0;u--){const{messages:m}=l[u],y=[...m.reduce((v,h)=>h.err==null&&h.message.author.role===X.Assistant&&h.message.recipient==="all"?v+(v?`

`:"")+O(h.message):v,"").matchAll(be)],j=y.length?y[y.length-1][1]:null;if(j!=null){_(j,n,i).then(()=>{n.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:g.copyLastCodeBlock,group:"Chat",keyboardBinding:[s.Mod,s.Shift,";"],altKeyboardBindings:[[s.Mod,s.Shift,":"]]},{key:"copyLastResponse",action:i=>{t!=null&&b.copyLastMessageToClipboard(t,n,i,"keyboard").then(()=>{n.success("Last response copied to clipboard")})},actionMessageDescriptor:g.copyLastResponse,group:"Chat",keyboardBinding:[s.Mod,s.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>M.toggleModal(A.UserContext),actionMessageDescriptor:g.toggleCustomInstructions,group:"Settings",keyboardBinding:[s.Mod,s.Shift,"i"]},{key:"navigationToggle",action:()=>M.toggleNavSidebar(),actionMessageDescriptor:g.navigationToggle,group:"Core",keyboardBinding:[s.Mod,s.Shift,"s"]},{key:"deleteChat",action:()=>{if(t){const i=b.getServerThreadId(t);i&&ve.publish({kind:"deleteChat",serverThreadId:i})}},actionMessageDescriptor:g.deleteChat,group:"Chat",keyboardBinding:[s.Mod,s.Shift,s.Backspace],altKeyboardBindings:[[s.Mod,s.Shift,s.Delete]]},{key:"zoomIn",enabled:a,action:()=>Y(),actionMessageDescriptor:g.zoomIn,group:"Chat",keyboardBinding:[s.Mod,"+"],altKeyboardBindings:[[s.Mod,"="]]},{key:"zoomOut",enabled:a,action:()=>ee(),actionMessageDescriptor:g.zoomOut,group:"Chat",keyboardBinding:[s.Mod,"-"]},{key:"resetZoom",enabled:a,action:()=>se(),actionMessageDescriptor:g.resetZoom,group:"Chat",keyboardBinding:[s.Mod,"0"]},{key:"toggleKeyboardActions",action:()=>M.toggleModal(A.KeyboardActions),actionMessageDescriptor:g.toggleKeyboardActions,group:"Settings",keyboardBinding:[s.Mod,"/"]}],P=o=>I(o,t=>{te.logEvent(oe.keyboardShortcut,{keyboardActionKey:t.key}),ae.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:t.key})},{enabled:!0}),Se=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:d}={})=>{const n=H(),{isFannyPackEnabled:c}=E(),{value:a}=N("842034403"),i=ne&&a;return k.useMemo(()=>Me({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:d,toaster:n,isFannyPackEnabled:c,isZoomEnabled:i}).filter(({enabled:l=!0})=>l),[n,t,o,c,d,i])},Oe=({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:d})=>{const n=Se({resetThreadAction:o,clientThreadId:t,focusPromptTextareaAction:d}),a=me(i=>i.isVoiceActive)?[]:n;P(a)},_e=({setSelectedVoiceIndex:o,prevVoiceIndex:t,nextVoiceIndex:d})=>{const n=[{key:"selectPrevVoice",action:()=>{o(t)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[s.ArrowLeft]},{key:"selectNextVoice",action:()=>{o(d)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[s.ArrowRight]}];P(n)},je="#settings/BuilderProfile";function Ie({selectedDomain:o,verifiedDomains:t,domains:d,onChangeDomain:n}){const[c,a]=k.useState(!1),i=t.length>0,r=C()?.id,l=C()?.isEnterprisey(),{mutateAsync:u}=$(r);return e.jsxs("div",{className:"font-normal",children:[e.jsxs(f.Root,{children:[e.jsx(ge,{children:e.jsxs("span",{className:"flex items-center gap-2 py-2",children:[o??e.jsx(x,{...S.selectADomain}),e.jsx(pe,{className:"icon-md"})]})}),e.jsx(f.Portal,{children:e.jsxs(f.Content,{children:[e.jsx(f.RadioGroup,{value:o,onValueChange:m=>{m!==o&&n(m)},children:t.map(({id:m,hostname:p})=>e.jsx(f.RadioItem,{value:p,children:e.jsxs("div",{className:"flex flex-row",children:[e.jsx("span",{children:p}),e.jsx("span",{onClick:()=>{u({domainId:m}),n("")},children:e.jsx(fe,{className:"icon-sm fixed right-4"})})]})},m))}),i&&e.jsx(f.Separator,{}),e.jsx(f.Item,{onClick:()=>{a(!0)},icon:xe,children:e.jsx(x,{...S.addDomain})})]})})]}),r&&!l&&e.jsx(U,{domains:d,isOpen:c,onClose:()=>a(!1),workspaceId:r,showUnverifiedDomains:!0,onVerifyDomain:m=>{n(m.hostname)}})]})}function Ce(){const o=de();return le({mutationFn:({verifierType:t})=>V.unverifySocialAuth(t),onSuccess:()=>{o.refetchQueries({queryKey:["builderProfile"]})}})}function Ae({socialData:o}){const{type:t,display_name:d,verified_data:n}=o,c=t==="twitter"?L:t==="linkedin"?z:t==="github"?R:null;return c?e.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[c({className:"icon-md"}),e.jsx("span",{children:d})]}),n?.link_to&&e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:n.link_to,className:"text-sm text-token-text-tertiary hover:cursor-pointer",children:e.jsx(B,{className:"icon-sm"})})]}):null}function $e({socialData:o,icon:t}){const{id:d,type:n,display_name:c,verified:a,verified_data:i}=o,[r,l]=k.useState(!1),u=Ce();return e.jsxs("div",{className:"flex flex-row items-center justify-between space-y-1",children:[e.jsxs("div",{className:ie("flex items-center space-x-2"),children:[e.jsx(t,{className:"icon-sm"}),e.jsx("span",{children:c}),a&&i?.username&&e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:i.link_to,className:"text-sm text-token-text-tertiary hover:cursor-pointer",children:i?.username})]}),a?e.jsx("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{u.mutate({verifierType:n})},children:u.isPending?e.jsx(ce,{}):e.jsx(ye,{className:"icon-sm text-token-text-tertiary"})}):e.jsx(re,{size:"small",color:"secondary",loading:r,onClick:async()=>{l(!0),await F({id:d},je),l(!1)},children:e.jsx(x,{...S.verify})})]})}const S=D({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}}),we=ue.div`text-sm text-token-text-tertiary`,Ne="community builder";function De(o){return"gizmo"in o}function Ue({gizmo:o,builderName:t,builderUrl:d,className:n,socials:c,hideLink:a=!1}){const{value:i}=N("2256850471");let r,l;o&&De(o)?(r=o.gizmo.author.display_name,l=o.gizmo.author.link_to):(r=t,l=d),(r===""||r==null)&&(r=Ne);const u=c?.filter(p=>p.verified),m=e.jsxs("div",{className:"w-48 space-y-4 text-sm",children:[l&&e.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[e.jsx(K,{className:"icon-md"}),e.jsx("span",{children:e.jsx(x,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),e.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:l,className:"text-token-text-tertiary hover:cursor-pointer",children:e.jsx(B,{className:"icon-sm"})})]}),i&&u?.map((p,y)=>p.verified?e.jsx(Ae,{socialData:p},y):null),e.jsxs("div",{className:"text-xs text-token-text-tertiary",children:[(l||u&&u.length>0)&&e.jsx("hr",{className:"my-2 border-token-border-light"}),e.jsx(x,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return e.jsxs("div",{className:"flex flex-row items-center space-x-1",children:[e.jsx(we,{className:n,children:e.jsx(x,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:r}})}),!a&&e.jsx(Be,{socials:c,website:l,children:m})]})}function Be({website:o,socials:t,children:d}){const[n,c]=k.useState(!1);let a=[];o&&a.push(e.jsx(K,{className:"icon-xs text-token-text-secondary"})),t&&t.forEach(r=>{r.verified&&(r.type==="twitter"?a.push(e.jsx(L,{className:"icon-xs text-token-text-secondary"})):r.type==="linkedin"?a.push(e.jsx(z,{className:"icon-xs text-token-text-secondary"})):r.type==="github"&&a.push(e.jsx(R,{className:"icon-xs text-token-text-secondary"})))});const i=a.length-2;return a=a.slice(0,2),i>0&&a.push(e.jsxs("span",{className:"text-xs font-semibold text-token-text-secondary",children:["+",i]},"overflow")),e.jsx(Z,{open:n,onOpenChange:c,children:e.jsxs("div",{onPointerLeave:()=>c(!1),children:[e.jsx(q,{asChild:!0,children:e.jsx("div",{onPointerEnter:()=>c(!0),children:a.length>0?e.jsx("div",{className:"flex items-center gap-1 rounded-xl bg-token-main-surface-secondary px-2 py-1",children:a}):e.jsx(he,{className:"icon-xs text-token-text-secondary"})})}),e.jsx(Q,{side:"top",sideOffset:8,align:"center",className:"z-10 rounded-lg bg-token-main-surface-primary p-4 drop-shadow-md",children:d})]})})}export{Ie as D,Ue as G,s as K,ve as a,_e as b,Se as c,$e as d,Ee as g,w as i,Oe as u};
//# sourceMappingURL=ebyv7xemoskqzdop.js.map
