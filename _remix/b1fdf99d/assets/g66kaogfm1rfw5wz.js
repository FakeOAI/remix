import{r as n,O as ze,f4 as j,eI as K,g as ee,L as N,cw as te,m as o,i8 as Ke,a9 as $e,ah as q,dr as At,cS as et,cR as oe,bD as ne,aE as nA,cy as sA,bs as tt,D as ot,fb as se,cT as nt,c0 as st,u as at,bV as it,b4 as rt,bA as ct,i9 as lt}from"./nihb2uczil39dw86.js";import{jM as NA,ci as dt,jL as ae,aV as ie,bB as VA,em as OA,j2 as gA,aS as ut,gN as jA,oJ as mt,oK as ft,i_ as gt,oL as pt,aY as ht,aQ as L,oM as Ct,oN as xt,nz as re,hZ as vt,h_ as bt,lP as Et,i8 as kt,d2 as St,i9 as ZA,lQ as ce,i$ as le,oO as FA,oP as wt,oo as It,N as Mt,oQ as Bt}from"./j1ja9es2uinbyngm.js";import{$ as yt,C as Vt,_ as Q,R as fA,e as W,M as jt,m as YA,y as Qt,W as aA,T as P,O as de,N as Rt,S as lA,n as ue,o as IA,p as MA,q as Dt,Y as Tt,F as Lt,x as Nt,d as pA,k as vA,r as bA,s as me,l as fe,u as w,t as ge,v as Ot,b as QA,c as RA,w as pe,g as Zt,f as Ft,V as R,X as WA,z as BA,A as Yt,E as Wt}from"./yqzo9h3jx3my8kt4.js";import{u as DA,a as Gt,V as Pt}from"./dhxtb0phjkyzb8lr.js";import{M as he}from"./bfhvhi143f6k54cc.js";import{m as B}from"./mdvgeej9vvn8kxo9.js";import{G as Jt,W as Ut}from"./de4vfk8ttsr9b9w1.js";import{u as Xt,s as _t,B as Ce,a as dA,b as uA,c as Ht,d as qt,e as zt,T as Kt,n as $t,V as Ao,f as eo}from"./g9b8i21ynsob4mxy.js";import"./d77as9dlhv5j0p9a.js";import"./pfhtzqn1oaz2hk2x.js";import"./jhict4yzwesz29wm.js";import"./ilm8pde0t6wxr4lu.js";import"./hyqr0dpcfd8sieun.js";import"./gat08l4ua5chbm6u.js";import"./dni0cxo7pj451cal.js";import"./c4bxzbp1808foto4.js";function xe(A){var e,t,a="";if(typeof A=="string"||typeof A=="number")a+=A;else if(typeof A=="object")if(Array.isArray(A)){var s=A.length;for(e=0;e<s;e++)A[e]&&(t=xe(A[e]))&&(a&&(a+=" "),a+=t)}else for(t in A)A[t]&&(a&&(a+=" "),a+=t);return a}function to(){for(var A,e,t=0,a="",s=arguments.length;t<s;t++)(A=arguments[t])&&(e=xe(A))&&(a&&(a+=" "),a+=e);return a}function oo(...A){return(...e)=>{for(const t of A)if(typeof t=="function")try{t(...e)}catch(a){console.error(a)}}}function ve(...A){const e={...A[0]};for(let t=1;t<A.length;t++){const a=A[t];for(const s in a){const r=e[s],l=a[s];typeof r=="function"&&typeof l=="function"&&s[0]==="o"&&s[1]==="n"&&s.charCodeAt(2)>=65&&s.charCodeAt(2)<=90?e[s]=oo(r,l):(s==="className"||s==="UNSAFE_className")&&typeof r=="string"&&typeof l=="string"?e[s]=to(r,l):e[s]=l!==void 0?l:r}}return e}const no={connect:!0,audio:!1,video:!1};function so(A){const{token:e,serverUrl:t,options:a,room:s,connectOptions:r,connect:l,audio:i,video:c,screen:d,onConnected:m,onDisconnected:u,onError:f,onMediaDeviceFailure:g,onEncryptionError:C,simulateParticipants:h,...x}={...no,...A};a&&s&&Q.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[p,I]=n.useState();n.useEffect(()=>{I(s??new fA(a))},[s]);const M=n.useMemo(()=>{const{className:b}=Qt();return ve(x,{className:b})},[x]);return n.useEffect(()=>{if(!p)return;const b=()=>{const S=p.localParticipant;Q.debug("trying to publish local tracks"),Promise.all([S.setMicrophoneEnabled(!!i,typeof i!="boolean"?i:void 0),S.setCameraEnabled(!!c,typeof c!="boolean"?c:void 0),S.setScreenShareEnabled(!!d,typeof d!="boolean"?d:void 0)]).catch(y=>{Q.warn(y),f?.(y)})},E=S=>{const y=jt.getFailure(S);g?.(y)},k=S=>{C?.(S)};return p.on(W.SignalConnected,b).on(W.MediaDevicesError,E).on(W.EncryptionError,k),()=>{p.off(W.SignalConnected,b).off(W.MediaDevicesError,E).off(W.EncryptionError,k)}},[p,i,c,d,f,C,g]),n.useEffect(()=>{if(p){if(h){p.simulateParticipants({participants:{count:h},publish:{audio:!0,useRealTracks:!0}});return}if(!e){Q.debug("no token yet");return}if(!t){Q.warn("no livekit url provided"),f?.(Error("no livekit url provided"));return}l?(Q.debug("connecting"),p.connect(t,e,r).catch(b=>{Q.warn(b),f?.(b)})):(Q.debug("disconnecting because connect is false"),p.disconnect())}},[l,e,JSON.stringify(r),p,f,t,h]),n.useEffect(()=>{if(!p)return;const b=E=>{switch(E){case YA.Disconnected:u&&u();break;case YA.Connected:m&&m();break}};return p.on(W.ConnectionStateChanged,b),()=>{p.off(W.ConnectionStateChanged,b)}},[e,m,u,p]),n.useEffect(()=>{if(p)return()=>{Q.info("disconnecting on onmount"),p.disconnect()}},[p]),{room:p,htmlProps:M}}const ao=n.forwardRef(function(A,e){const{room:t,htmlProps:a}=so(A);return n.createElement("div",{ref:e,...a},t&&n.createElement(yt.Provider,{value:t},n.createElement(Vt.Provider,{value:A.featureFlags},A.children)))});function io(A){return A!==void 0}function ro(...A){return ve(...A.filter(io))}function be(A,e={}){const[t,a]=n.useState(Dt(A)),[s,r]=n.useState(t?.isMuted),[l,i]=n.useState(t?.isSubscribed),[c,d]=n.useState(t?.track),[m,u]=n.useState("landscape"),f=n.useRef(),{className:g,trackObserver:C}=n.useMemo(()=>Tt(A),[A.participant.sid??A.participant.identity,A.source,Lt(A)&&A.publication.trackSid]);return n.useEffect(()=>{const h=C.subscribe(x=>{Q.debug("update track",x),a(x),r(x?.isMuted),i(x?.isSubscribed),d(x?.track)});return()=>h?.unsubscribe()},[C]),n.useEffect(()=>{var h,x;return c&&(f.current&&c.detach(f.current),(h=e.element)!=null&&h.current&&!(de(A.participant)&&c?.kind==="audio")&&c.attach(e.element.current)),f.current=(x=e.element)==null?void 0:x.current,()=>{f.current&&c?.detach(f.current)}},[c,e.element]),n.useEffect(()=>{var h,x;if(typeof((h=t?.dimensions)==null?void 0:h.width)=="number"&&typeof((x=t?.dimensions)==null?void 0:x.height)=="number"){const p=t.dimensions.width>t.dimensions.height?"landscape":"portrait";u(p)}},[t]),{publication:t,isMuted:s,isSubscribed:l,track:c,elementProps:ro(e.props,{className:g,"data-lk-local-participant":A.participant.isLocal,"data-lk-source":t?.source,...t?.kind==="video"&&{"data-lk-orientation":m}})}}var co="Expected a function",GA=NaN,lo="[object Symbol]",uo=/^\s+|\s+$/g,mo=/^[-+]0x[0-9a-f]+$/i,fo=/^0b[01]+$/i,go=/^0o[0-7]+$/i,po=parseInt,ho=typeof lA=="object"&&lA&&lA.Object===Object&&lA,Co=typeof self=="object"&&self&&self.Object===Object&&self,xo=ho||Co||Function("return this")(),vo=Object.prototype,bo=vo.toString,Eo=Math.max,ko=Math.min,EA=function(){return xo.Date.now()};function So(A,e,t){var a,s,r,l,i,c,d=0,m=!1,u=!1,f=!0;if(typeof A!="function")throw new TypeError(co);e=PA(e)||0,yA(t)&&(m=!!t.leading,u="maxWait"in t,r=u?Eo(PA(t.maxWait)||0,e):r,f="trailing"in t?!!t.trailing:f);function g(k){var S=a,y=s;return a=s=void 0,d=k,l=A.apply(y,S),l}function C(k){return d=k,i=setTimeout(p,e),m?g(k):l}function h(k){var S=k-c,y=k-d,O=e-S;return u?ko(O,r-y):O}function x(k){var S=k-c,y=k-d;return c===void 0||S>=e||S<0||u&&y>=r}function p(){var k=EA();if(x(k))return I(k);i=setTimeout(p,h(k))}function I(k){return i=void 0,f&&a?g(k):(a=s=void 0,l)}function M(){i!==void 0&&clearTimeout(i),d=0,a=c=s=i=void 0}function b(){return i===void 0?l:I(EA())}function E(){var k=EA(),S=x(k);if(a=arguments,s=this,c=k,S){if(i===void 0)return C(c);if(u)return i=setTimeout(p,e),g(c)}return i===void 0&&(i=setTimeout(p,e)),l}return E.cancel=M,E.flush=b,E}function yA(A){var e=typeof A;return!!A&&(e=="object"||e=="function")}function wo(A){return!!A&&typeof A=="object"}function Io(A){return typeof A=="symbol"||wo(A)&&bo.call(A)==lo}function PA(A){if(typeof A=="number")return A;if(Io(A))return GA;if(yA(A)){var e=typeof A.valueOf=="function"?A.valueOf():A;A=yA(e)?e+"":e}if(typeof A!="string")return A===0?A:+A;A=A.replace(uo,"");var t=fo.test(A);return t||go.test(A)?po(A.slice(2),t?2:8):mo.test(A)?GA:+A}var Mo=So;const JA=Nt(Mo);function Bo(A){const e=n.useRef(A);e.current=A,n.useEffect(()=>()=>{e.current()},[])}function yo(A,e=500,t){const a=n.useRef();Bo(()=>{a.current&&a.current.cancel()});const s=n.useMemo(()=>{const r=JA(A,e,t),l=(...i)=>r(...i);return l.cancel=()=>{r.cancel()},l.isPending=()=>!!a.current,l.flush=()=>r.flush(),l},[A,e,t]);return n.useEffect(()=>{a.current=JA(A,e,t)},[A,e,t]),s}function Vo(A,e,t){const a=(d,m)=>d===m,s=A instanceof Function?A():A,[r,l]=n.useState(s),i=n.useRef(s),c=yo(l,e,t);return a(i.current,s)||(c(s),i.current=s),[r,c]}function jo({threshold:A=0,root:e=null,rootMargin:t="0%",freezeOnceVisible:a=!1,initialIsIntersecting:s=!1,onChange:r}={}){var l;const[i,c]=n.useState(null),[d,m]=n.useState(()=>({isIntersecting:s,entry:void 0})),u=n.useRef();u.current=r;const f=((l=d.entry)==null?void 0:l.isIntersecting)&&a;n.useEffect(()=>{if(!i||!("IntersectionObserver"in window)||f)return;let h;const x=new IntersectionObserver(p=>{const I=Array.isArray(x.thresholds)?x.thresholds:[x.thresholds];p.forEach(M=>{const b=M.isIntersecting&&I.some(E=>M.intersectionRatio>=E);m({isIntersecting:b,entry:M}),u.current&&u.current(b,M),b&&a&&h&&(h(),h=void 0)})},{threshold:A,root:e,rootMargin:t});return x.observe(i),()=>{x.disconnect()}},[i,JSON.stringify(A),e,t,f,a]);const g=n.useRef(null);n.useEffect(()=>{var h;!i&&(h=d.entry)!=null&&h.target&&!a&&!f&&g.current!==d.entry.target&&(g.current=d.entry.target,m({isIntersecting:s,entry:void 0}))},[i,d.entry,a,f,s]);const C=[c,!!d.isIntersecting,d.entry];return C.ref=C[0],C.isIntersecting=C[1],C.entry=C[2],C}const Ee=n.forwardRef(function({onTrackClick:A,onClick:e,onSubscriptionStatusChanged:t,trackRef:a,manageSubscription:s,...r},l){const i=ue(a),c=n.useRef(null);n.useImperativeHandle(l,()=>c.current);const d=jo({root:c.current}),[m]=Vo(d,3e3);n.useEffect(()=>{s&&i.publication instanceof IA&&m?.isIntersecting===!1&&d?.isIntersecting===!1&&i.publication.setSubscribed(!1)},[m,i,s]),n.useEffect(()=>{s&&i.publication instanceof IA&&d?.isIntersecting===!0&&i.publication.setSubscribed(!0)},[d,i,s]);const{elementProps:u,publication:f,isSubscribed:g}=be(i,{element:c,props:r});n.useEffect(()=>{t?.(!!g)},[g,t]);const C=h=>{e?.(h),A?.({participant:i?.participant,track:f})};return n.createElement("video",{ref:c,...u,muted:!0,onClick:C})}),Qo=n.forwardRef(function({trackRef:A,onSubscriptionStatusChanged:e,volume:t,muted:a,...s},r){const l=ue(A),i=n.useRef(null);n.useImperativeHandle(r,()=>i.current);const{elementProps:c,isSubscribed:d,track:m,publication:u}=be(l,{element:i,props:s});return n.useEffect(()=>{e?.(!!d)},[d,e]),n.useEffect(()=>{m===void 0||t===void 0||(m instanceof MA?m.setVolume(t):Q.warn("Volume can only be set on remote audio tracks."))},[t,m]),n.useEffect(()=>{u===void 0||a===void 0||(u instanceof IA?u.setEnabled(!a):Q.warn("Can only call setEnabled on remote track publications."))},[a,u,m]),n.createElement("audio",{ref:i,...c})});function Ro({volume:A,muted:e}){const t=aA([P.Source.Microphone,P.Source.ScreenShareAudio,P.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(a=>!de(a.participant)&&a.publication.kind===P.Kind.Audio);return n.createElement("div",{style:{display:"none"}},t.map(a=>n.createElement(Qo,{key:Rt(a),trackRef:a,volume:A,muted:e})))}const ke=()=>{const A=ze(),e=n.useCallback(()=>pA.getState().isVoiceModeActive,[]);return n.useMemo(()=>new Proxy(A,{get(t,a){const s=t[a];return e()||a==="closeAll"?s:()=>{}}}),[e,A])};function Do(){const A=ke(),e=n.useCallback(()=>{vA.debug("disconnected from room"),bA()},[]),t=n.useCallback(s=>{A.danger("Something went wrong"),vA.error("an error occurred within the room",s);const r=NA(pA.getState());j.voiceMode.error({...r,error:s.message}),bA()},[A]),a=n.useCallback(s=>{A.danger("Something went wrong"),vA.error("an encryption error occurred within the room",s);const r=NA(pA.getState());j.voiceMode.error({encryptionError:s.message,eventSource:"voice-session",...r}),bA()},[A]);return{onDisconnected:e,onError:t,onEncryptionError:a}}function Se({conversationId:A}){const{shouldDelayDisconnect:e,delayDisconnect:t,immediateDisconnect:a}=DA({refetchLater:!0}),{toggleMute:s}=me(),r=K(A);return n.useCallback(async()=>{j.voiceSessionEndedByUser.click(),dt.setState({voiceFeedbackThread:r,lastVoiceSessionEndTime:new Date}),e?(await s(),t()):a()},[t,a,r,e,s])}var To={webm:"data:video/webm;base64,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",mp4:"data:video/mp4;base64,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"};const{webm:Lo,mp4:No}=To,kA=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,SA=()=>"wakeLock"in navigator;class Oo{constructor(){if(this.enabled=!1,SA()){this._wakeLock=null;const e=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else kA()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",Lo),this._addSourceToVideo(this.noSleepVideo,"mp4",No),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(e,t,a){var s=document.createElement("source");s.src=a,s.type=`video/${t}`,e.appendChild(s)}get isEnabled(){return this.enabled}enable(){return SA()?navigator.wakeLock.request("screen").then(e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e}):kA()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(t=>(this.enabled=!0,t)).catch(t=>{throw this.enabled=!1,t})}disable(){SA()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):kA()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}var Zo=Oo;const Fo=ee(Zo),Yo=A=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},n.createElement("path",{d:"M7.5 8.91422V10.5C7.5 12.9853 9.51472 15 12 15C12.4787 15 12.9399 14.9253 13.3726 14.7868L14.5285 15.9427C13.7599 16.3004 12.9031 16.5 11.9999 16.5C9.28338 16.5 6.98608 14.6939 6.24825 12.2148C6.09071 11.6854 5.53389 11.384 5.00455 11.5415C4.47521 11.6991 4.17381 12.2559 4.33134 12.7852C5.22277 15.7805 7.82091 18.0418 11 18.4381V19.5H9.5C8.94772 19.5 8.5 19.9477 8.5 20.5C8.5 21.0523 8.94772 21.5 9.5 21.5H14.5C15.0523 21.5 15.5 21.0523 15.5 20.5C15.5 19.9477 15.0523 19.5 14.5 19.5H13V18.4381C14.086 18.3027 15.1043 17.9496 16.0098 17.424L19.2929 20.7071C19.6834 21.0976 20.3166 21.0976 20.7071 20.7071C21.0976 20.3166 21.0976 19.6834 20.7071 19.2929L4.70711 3.29289C4.31658 2.90237 3.68342 2.90237 3.29289 3.29289C2.90237 3.68342 2.90237 4.31658 3.29289 4.70711L7.5 8.91422Z",fill:"currentColor"}),n.createElement("path",{d:"M17.3874 13.1448L18.8601 14.6174C19.202 14.0488 19.4753 13.4343 19.6685 12.7852C19.826 12.2559 19.5246 11.6991 18.9953 11.5415C18.466 11.384 17.9091 11.6854 17.7516 12.2148C17.6557 12.537 17.5335 12.8478 17.3874 13.1448Z",fill:"currentColor"}),n.createElement("path",{d:"M8.46182 4.21918L16.2436 12.001C16.4096 11.5315 16.5 11.0263 16.5 10.5V7C16.5 4.51472 14.4853 2.5 12 2.5C10.5644 2.5 9.28577 3.17227 8.46182 4.21918Z",fill:"currentColor"})),Wo=A=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},n.createElement("path",{d:"M7.50002 7C7.50002 4.51472 9.51474 2.5 12 2.5C14.4853 2.5 16.5 4.51472 16.5 7V10.5C16.5 12.9853 14.4853 15 12 15C9.51474 15 7.50002 12.9853 7.50002 10.5V7Z",fill:"currentColor"}),n.createElement("path",{d:"M18.9953 11.5415C19.5246 11.6991 19.826 12.2559 19.6685 12.7852C18.7771 15.7804 16.179 18.0417 13 18.4381V19.5H14.5C15.0523 19.5 15.5 19.9477 15.5 20.5C15.5 21.0523 15.0523 21.5 14.5 21.5H9.50002C8.94773 21.5 8.50002 21.0523 8.50002 20.5C8.50002 19.9477 8.94773 19.5 9.50002 19.5H11V18.4381C7.82093 18.0418 5.22279 15.7805 4.33136 12.7852C4.17382 12.2559 4.47522 11.6991 5.00456 11.5415C5.5339 11.384 6.09073 11.6854 6.24827 12.2148C6.98609 14.6939 9.28339 16.5 11.9999 16.5C14.7165 16.5 17.0138 14.6939 17.7516 12.2148C17.9091 11.6854 18.466 11.384 18.9953 11.5415Z",fill:"currentColor"})),Go=A=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},n.createElement("path",{d:"M16.2413 3H7.7587C6.95374 2.99999 6.28937 2.99998 5.74818 3.04419C5.18608 3.09012 4.66937 3.18868 4.18404 3.43598C3.43139 3.81947 2.81947 4.43139 2.43598 5.18404C2.18868 5.66937 2.09012 6.18608 2.04419 6.74818C1.99998 7.28937 1.99999 7.95372 2 8.75869V15.2413C1.99999 16.0463 1.99998 16.7106 2.04419 17.2518C2.09012 17.8139 2.18868 18.3306 2.43598 18.816C2.81947 19.5686 3.43139 20.1805 4.18404 20.564C4.66937 20.8113 5.18608 20.9099 5.74818 20.9558C6.28936 21 6.95372 21 7.75868 21H16.2413C17.0463 21 17.7106 21 18.2518 20.9558C18.8139 20.9099 19.3306 20.8113 19.816 20.564C20.5686 20.1805 21.1805 19.5686 21.564 18.816C21.8113 18.3306 21.9099 17.8139 21.9558 17.2518C22 16.7106 22 16.0463 22 15.2413V8.75868C22 7.95372 22 7.28936 21.9558 6.74818C21.9099 6.18608 21.8113 5.66937 21.564 5.18404C21.1805 4.43139 20.5686 3.81947 19.816 3.43598C19.3306 3.18868 18.8139 3.09012 18.2518 3.04419C17.7106 2.99998 17.0463 2.99999 16.2413 3ZM6.5 9.5C10.366 9.5 13.5 12.634 13.5 16.5C13.5 17.0523 13.0523 17.5 12.5 17.5C11.9477 17.5 11.5 17.0523 11.5 16.5C11.5 13.7386 9.26142 11.5 6.5 11.5C5.94772 11.5 5.5 11.0523 5.5 10.5C5.5 9.94772 5.94772 9.5 6.5 9.5ZM6.5 13.5C8.15685 13.5 9.5 14.8431 9.5 16.5C9.5 17.0523 9.05229 17.5 8.5 17.5C7.94772 17.5 7.5 17.0523 7.5 16.5C7.5 15.9477 7.05229 15.5 6.5 15.5C5.94772 15.5 5.5 15.0523 5.5 14.5C5.5 13.9477 5.94772 13.5 6.5 13.5Z",fill:"currentColor"})),Po=A=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},n.createElement("path",{d:"M7.7587 4.5C6.95374 4.49999 6.28937 4.49998 5.74818 4.54419C5.18608 4.59012 4.66937 4.68868 4.18404 4.93598C3.43139 5.31947 2.81947 5.93139 2.43598 6.68404C2.18868 7.16937 2.09012 7.68608 2.04419 8.24818C1.99998 8.78937 1.99999 9.45372 2 10.2587V13.7413C1.99999 14.5463 1.99998 15.2106 2.04419 15.7518C2.09012 16.3139 2.18868 16.8306 2.43598 17.316C2.81947 18.0686 3.43139 18.6805 4.18404 19.064C4.66937 19.3113 5.18608 19.4099 5.74818 19.4558C6.28938 19.5 6.95375 19.5 7.75873 19.5H10.7413C11.5463 19.5 12.2106 19.5 12.7518 19.4558C13.3139 19.4099 13.8306 19.3113 14.316 19.064C15.0686 18.6805 15.6805 18.0686 16.064 17.316C16.3113 16.8306 16.4099 16.3139 16.4558 15.7518C16.5 15.2106 16.5 14.5463 16.5 13.7413V10.2587C16.5 9.45375 16.5 8.78938 16.4558 8.24818C16.4099 7.68608 16.3113 7.16937 16.064 6.68404C15.6805 5.93139 15.0686 5.31947 14.316 4.93598C13.8306 4.68868 13.3139 4.59012 12.7518 4.54419C12.2106 4.49998 11.5463 4.49999 10.7413 4.5H7.7587Z",fill:"currentColor"}),n.createElement("path",{d:"M23 7.8312C23 6.55258 21.5028 5.86019 20.5285 6.68829L18.5285 8.38829C18.1932 8.67329 18 9.09115 18 9.5312V14.4688C18 14.9088 18.1932 15.3267 18.5285 15.6117L20.5285 17.3117C21.5028 18.1398 23 17.4474 23 16.1688V7.8312Z",fill:"currentColor"}));function Jo(A){const e=A.default_voice_mode,t=A.modes.find(a=>a.mode===e);if(!t)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return t.default_model_slug}function TA(){const A=N(),e=ke(),{startVoiceMode:t,stopVoiceMode:a,isConnected:s,isVoiceModeActive:r}=fe(),l=n.useCallback(async i=>{const c={conversation_id:i.serverThreadId,parent_message_id:i.parentMessageId,model_slug:i.modelSlug,model_slug_advanced:i.isAdvancedMode?i.modelSlug:void 0,voice_mode:i.isAdvancedMode?"advanced":"standard",eventSource:i.eventSource,clientThreadId:i.clientThreadId,gizmo_id:i.gizmoId,voice:i.voice},d=A.formatMessage({id:"useVoiceModeButtonAction.error",defaultMessage:"Failed to start voice mode"});try{await t(c)}catch{if(i.isAdvancedMode&&i.retryWithStandard)try{await t({...c,voice_mode:"standard"})}catch{e.danger(d),j.voiceMode.error({error:d})}else e.danger(d),j.voiceMode.error({error:d})}},[A,t,e]);return{isVoiceModeActive:r,isConnected:s,toggleVoiceMode:l,stopVoiceMode:a}}const we="inline-flex items-center bg-transparent text-token-text-secondary hover:text-token-text-primary",Uo=({message:A,onClick:e,type:t})=>{const a=N(),s=ae()&&te;if(!A)return null;switch(t){case"microphone_denied":return s?o.jsxs("a",{href:"ms-settings:privacy-microphone",className:we,children:[A,o.jsx(ie,{className:"icon-sm ml-1"})]}):o.jsx(UA,{onClick:e,message:A});case"connection_quality":return o.jsxs("div",{className:"inline-flex items-center",children:[A,o.jsx("button",{onClick:e,className:"ml-1",children:o.jsx("strong",{children:a.formatMessage(Ie.retry)})})]});case"normal":return o.jsx(UA,{onClick:e,message:A})}},UA=({message:A,onClick:e})=>{const t=N();return o.jsxs("button",{onClick:e,className:we,"aria-label":t.formatMessage(Ie.openInfoModal),children:[A,o.jsx(ie,{className:"icon-sm ml-1"})]})},Ie={openInfoModal:{id:"hintMessage.openInfoModal",defaultMessage:"Open info modal",description:"Open info modal about voice mode usage"},retry:{id:"hintMessage.retry",defaultMessage:"Retry",description:"Retry text next to lost connection message"}};function Xo(A){const{button:e,conversationId:t,modelId:a,onClick:s}=A,r=K(t),l=VA(t),i=e.action==="new_chat"?l:a,{toggleVoiceMode:c}=TA(),d=$e(),m=n.useCallback(()=>{switch(e.action){case"new_chat":{const u=i??gA;ut(`/?model=${u}`),c({serverThreadId:void 0,modelSlug:u,isAdvancedMode:!0,eventSource:`modal_${e.action}`,parentMessageId:void 0,retryWithStandard:!1,clientThreadId:At(),gizmoId:void 0});break}case"switch_to_standard":r&&a&&c({serverThreadId:r,modelSlug:i??gA,isAdvancedMode:!1,eventSource:`modal_${e.action}`,parentMessageId:void 0,retryWithStandard:!1,clientThreadId:r,gizmoId:q.getGizmoId(t)});break;case"upgrade_to_plus":OA(d,"Voice Mode Upgrade To Plus Modal");break;case"upgrade_to_pro":OA(d,"Voice Mode Upgrade To Pro Modal");break}s?.()},[e.action,t,i,a,d,s,r,c]);return o.jsx(et.Button,{onClick:m,title:e.title,color:A.color})}const _o={primary:"primary",secondary:"secondary",tertiary:"ghost"};function Me({buttons:A,conversationId:e,modelId:t,onClick:a}){let s,r,l;const i=n.useCallback(c=>()=>{c==="upgrade_to_plus"?j.upsell.upgradeToPlus():c==="upgrade_to_pro"&&j.upsell.upgradeToPro(),a()},[a]);return!A||A.length===0?{primary:void 0,secondary:void 0,tertiary:void 0}:(A.forEach(c=>{if(!Ke.includes(c.action))return;const m=o.jsx(Xo,{button:c,conversationId:e,modelId:t,onClick:i(c.action),color:_o[c.style]});switch(c.style){case"primary":s=m;break;case"secondary":r=m;break;case"tertiary":l=m;break}}),{primary:s,secondary:r,tertiary:l})}function Ho({conversationId:A,modelId:e,isOpen:t,onClose:a,buttons:s,title:r,description_markdown:l}){const i=Me({buttons:s,conversationId:A,modelId:e,onClick:a}),c=o.jsx(he,{className:"markdown mb-6 text-token-text-secondary",urlTransform:d=>d,children:l});return o.jsx(oe,{title:r,isOpen:t,onClose:a,size:"custom",className:"max-w-[550px]",type:"warning",showCloseButton:!0,children:o.jsxs("div",{className:"w-full",children:[c,o.jsxs("div",{className:"flex flex-row justify-end gap-6",children:[i.primary,i.secondary,i.tertiary]})]})})}function qo({conversationId:A,currentModelId:e}){const t=N(),a=Se({conversationId:A}),s=w(v=>v.server.usage),r=w(v=>v.server.voiceConnectionQuality),l=v=>v===pe.Lost,i=w(v=>v.server.connectionState),c=ge(),{voiceName:d}=jA(),[m,u]=n.useState(!1),f=w(v=>v.server.toolUpdate),[g,C]=n.useState(!1),[h,x]=n.useState(!0),[p,I]=n.useState(null),[M,b]=n.useState(null),[E,k]=n.useState(null),[S,y]=n.useState(!1),[O,D]=n.useState(!1),iA=n.useRef(!1),U=K(A),{stopVoiceMode:$,toggleVoiceMode:G,isVoiceModeActive:Z}=TA(),AA=Ot();n.useEffect(()=>{O||AA().then(v=>{y(v)}).finally(()=>{D(!0)})},[AA,O]);const rA=w(v=>v.dev.room?.localParticipant.isMicrophoneEnabled);n.useEffect(()=>{Z&&(S&&!rA)&&(D(!1),y(!1))},[Z,rA,S]);const hA=ae()&&te,V=Z&&O&&!S,eA=Z&&S&&!i&&c;n.useEffect(()=>{V&&(u(!1),k(null),I(t.formatMessage(wA.hint)),b({title:t.formatMessage(wA.title),description_markdown:t.formatMessage(wA.description_markdown),buttons:[]}))},[t,hA,V]),n.useEffect(()=>{if(eA&&!iA.current){iA.current=!0,I(null),b(null);const v=Jo(c),Y=q.getCurrentNode(A)?.id,X={serverThreadId:U,modelSlug:v,parentMessageId:Y,isAdvancedMode:c.default_voice_mode==="advanced",retryWithStandard:!0,eventSource:"composer_speech_button",clientThreadId:A,gizmoId:q.getGizmoId(A)};j.voiceSessionStarted.click({voice:d}),G(X)}},[A,eA,c,U,G,d]);const{reaching_limit_disclosure:tA,exceed_limit_message:F}=s?.rate_limit_message??{},cA=c?.modes.find(v=>v.mode===c?.default_voice_mode),CA=cA?.disclosure_message,xA=l(r)?"Lost connection.":tA?.hint??F?.title??CA?.hint??null;n.useEffect(()=>{cA&&!V&&I(cA.disclosure_message?.hint??null)},[cA,V]),n.useEffect(()=>{const v=f?.text;let Y,X,_;return v&&(x(!1),Y=setTimeout(()=>{C(!0),X=setTimeout(()=>{C(!1),_=setTimeout(()=>{x(!0),pA.setState(qe=>{qe.server.toolUpdate=null})},750)},3e3)},750)),()=>{clearTimeout(Y),clearTimeout(X),clearTimeout(_)}},[f]),n.useEffect(()=>{if(!V){if(xA&&I(xA),F&&Z){$();const v={title:F.title,description_markdown:F.description_markdown,buttons:F.buttons};m?k(v):(b(v),u(!0));const Y=F.buttons.some(_=>_.action==="upgrade_to_plus"),X=F.buttons.some(_=>_.action==="upgrade_to_pro");j.rateLimitReached.success({upgrade_to_plus:Y,upgrade_to_pro:X})}else if(!M){const v=tA??CA;v&&b({title:v.title,description_markdown:v.message_markdown,buttons:v.buttons})}}},[CA,F,xA,m,Z,M,tA,$,V]);const Pe=n.useCallback(()=>{E&&(b(E),k(null)),u(!0)},[E]),Je=n.useCallback(()=>{u(!1)},[]),{startVoiceMode:Ue}=fe(),Xe=VA(A),_e=w(v=>v.voiceMode),He=async()=>{try{I(null),await Ue({conversation_id:U,model_slug:Xe??gA,eventSource:"lost_connection_hint_message",voice_mode:_e,voice:d,clientThreadId:A,gizmo_id:q.getGizmoId(A)})}catch(v){const Y=v instanceof Error?v.message:String(v);j.voiceMode.error({error:Y,eventSource:"lost_connection_hint_message"})}};let oA;return V?oA="microphone_denied":l(r)?oA="connection_quality":oA="normal",o.jsxs("div",{className:"flex w-full flex-col items-center",children:[o.jsxs("div",{className:"relative mb-6 flex min-h-5 w-full items-center justify-center text-xs text-token-text-secondary",children:[f?.text&&o.jsx(B.div,{initial:{opacity:0},animate:{opacity:g?1:0},transition:{duration:.5},style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center"},children:o.jsxs("div",{className:"flex items-center",children:[f?.text&&o.jsx(mt,{className:"icon-sm mr-1"}),f?.text]})}),o.jsx(B.div,{initial:{opacity:0},animate:{opacity:h?1:0},transition:{duration:.5},style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center",pointerEvents:f?.text?"none":"auto",cursor:f?.text?"default":"pointer"},children:o.jsx("div",{className:"flex items-center",children:o.jsx(Uo,{type:oA,message:p,onClick:oA==="connection_quality"?He:Pe})})})]}),o.jsxs("div",{className:nA("flex flex-row items-center gap-6","rounded-full px-3 py-1","transition-width duration-200 ease-in-out"),children:[o.jsx(XA,{capability:"video",children:o.jsx(zo,{})}),o.jsx($o,{shouldQueryDevices:!!eA,hideTooltip:V}),o.jsx(XA,{capability:"screenshare",children:o.jsx(An,{})}),o.jsx(LA,{onClick:a})]}),o.jsx(Ho,{conversationId:A,modelId:e,isOpen:m,onClose:Je,title:M?.title,description_markdown:M?.description_markdown,buttons:M?.buttons??[]})]})}function XA({children:A,capability:e}){const t=Gt();return!t.av||!t[e]?null:o.jsx(o.Fragment,{children:A})}function zo(){const{isVideoEnabled:A,isStartingVideo:e,toggleVideo:t}=QA();let a=null;e?a=sA:a=Po;const s=A?"bg-gray-900 hover:bg-gray-800 active:bg-gray-700":"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",r=A?"text-token-main-surface-primary":"text-token-main-surface-primary-inverse";return o.jsx(z,{onClick:()=>t("ControlButton"),disabled:e,icon:a,className:s,iconColor:r})}const Ko=async()=>{try{return(await Zt("audioinput"))?.label??""}catch(A){return console.warn("Error fetching default media device:",A),ot.addError("Failed to fetch default media device",{error:A}),"Error accessing microphone devices"}};function $o({shouldQueryDevices:A,hideTooltip:e}){const{isMicrophoneEnabled:t,isMuting:a,toggleMute:s}=me(),r=N(),{disconnectPending:l}=DA(),[i,c]=n.useState(""),d=t?Wo:Yo,m=t?"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10":"bg-red-500/10 hover:bg-red-500/15 active:bg-red-500/20 dark:bg-red-500/10 dark:hover:bg-red-500/15 dark:active:bg-red-500/20",u=t?"text-token-main-surface-primary-inverse":"text-danger";n.useEffect(()=>{A&&Ko().then(g=>c(g))},[A]);const f=t?r.formatMessage({id:"PJzixV",defaultMessage:"Turn off microphone"}):r.formatMessage({id:"nbbUMb",defaultMessage:"Turn on microphone"});return o.jsx(z,{"aria-label":f,onClick:s,icon:d,disabled:a||l,className:m,iconColor:u,tooltipPrimaryLabel:!e&&i?f:"",tooltipSecondaryLabel:i})}function An(){const{isScreenshareEnabled:A,isScreenshareStarting:e,toggleScreenShare:t}=RA();let a=null;e?a=sA:a=Go;const s=A?"bg-gray-900 hover:bg-gray-800 active:bg-gray-700":"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",r=A?"text-token-main-surface-primary":"text-token-main-surface-primary-inverse";return o.jsx(z,{onClick:()=>t("ControlButton"),disabled:e,icon:a,className:s,iconColor:r})}function LA({className:A,onClick:e}){const t=N(),{disconnectPending:a}=DA(),s="bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",r=t.formatMessage({id:"9Mto0a",defaultMessage:"End"});return o.jsx(z,{disabled:a,onClick:e,icon:a?sA:ft,iconColor:"text-token-main-surface-primary-inverse",className:A??s,"aria-label":t.formatMessage({id:"7/8k4Y",defaultMessage:"End voice mode"}),tooltipPrimaryLabel:r})}function z(A){const{icon:e,disabled:t,className:a,iconColor:s="text-current",iconSize:r="icon-xl",buttonSize:l="h-16 w-16",tooltipPrimaryLabel:i,tooltipSecondaryLabel:c,...d}=A,[m,u]=n.useState(!1),f=n.useRef(void 0),g=n.useCallback(()=>{const x=window.setTimeout(()=>{u(!0)},gt);f.current=x},[]),C=n.useCallback(()=>{clearTimeout(f.current),u(!1)},[]),h=o.jsx(en,{className:nA(a,l,"overflow-hidden rounded-full border-none p-0.5 text-token-text-primary transition-colors duration-200 ease-in-out hover:text-token-text-secondary"),disabled:t,...d,children:o.jsx(e,{className:nA(r,s)})});return i?o.jsx(tt,{sideOffset:14,label:i,secondaryLabel:c,contentClassName:"flex flex-col items-center justify-center",className:"flex",open:m,side:"top",children:o.jsx("span",{onPointerEnter:g,onPointerLeave:C,children:h})}):h}const en=B.create(ne),wA={hint:{id:"micMessages.hint",defaultMessage:"Enable microphone access in Settings",description:"Hint to the user to manually enable microphone access for voice mode"},title:{id:"micMessages.title",defaultMessage:"Microphone access required",description:"Title for modal that informs the user that microphone access is required for voice mode"},description_markdown:{id:"micMessages.description_markdown",defaultMessage:"To use voice mode, you'll need to enable your microphone and try again.",description:"Description for modal that informs the user that microphone access is required for voice mode"}},tn=A=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.29289 7.29289C9.68342 6.90237 10.3166 6.90237 10.7071 7.29289L14.7071 11.2929C15.0976 11.6834 15.0976 12.3166 14.7071 12.7071L10.7071 16.7071C10.3166 17.0976 9.68342 17.0976 9.29289 16.7071C8.90237 16.3166 8.90237 15.6834 9.29289 15.2929L12.5858 12L9.29289 8.70711C8.90237 8.31658 8.90237 7.68342 9.29289 7.29289Z",fill:"currentColor"})),on=A=>n.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 15.8333V17.1667C4 18.4553 5.04467 19.5 6.33333 19.5C6.70152 19.5 7 19.2015 7 18.8333V14.1667C7 13.7985 6.70152 13.5 6.33333 13.5C5.04467 13.5 4 14.5447 4 15.8333ZM2 12.5C2 6.97715 6.47715 2.5 12 2.5C17.5228 2.5 22 6.97715 22 12.5V17.1667C22 19.5599 20.0599 21.5 17.6667 21.5C16.1939 21.5 15 20.3061 15 18.8333V14.1667C15 12.6939 16.1939 11.5 17.6667 11.5C18.523 11.5 19.3214 11.7484 19.9936 12.1771C19.8242 7.90854 16.3101 4.5 12 4.5C7.68986 4.5 4.17583 7.90854 4.0064 12.1771C4.6786 11.7484 5.47696 11.5 6.33333 11.5C7.80609 11.5 9 12.6939 9 14.1667V18.8333C9 20.3061 7.80609 21.5 6.33333 21.5C3.9401 21.5 2 19.5599 2 17.1667V12.5ZM20 15.8333C20 14.5447 18.9553 13.5 17.6667 13.5C17.2985 13.5 17 13.7985 17 14.1667V18.8333C17 19.2015 17.2985 19.5 17.6667 19.5C18.9553 19.5 20 18.4553 20 17.1667V15.8333Z",fill:"currentColor"}));function nn(A,e,t,a){var s=-1,r=A==null?0:A.length;for(a&&r&&(t=A[++s]);++s<r;)t=e(t,A[s],s,A);return t}var sn=nn;function an(A){return function(e){return A?.[e]}}var rn=an,cn=rn,ln={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},dn=cn(ln),un=dn,mn=un,fn=se,gn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pn="\\u0300-\\u036f",hn="\\ufe20-\\ufe2f",Cn="\\u20d0-\\u20ff",xn=pn+hn+Cn,vn="["+xn+"]",bn=RegExp(vn,"g");function En(A){return A=fn(A),A&&A.replace(gn,mn).replace(bn,"")}var kn=En,Sn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function wn(A){return A.match(Sn)||[]}var In=wn,Mn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Bn(A){return Mn.test(A)}var yn=Bn,Be="\\ud800-\\udfff",Vn="\\u0300-\\u036f",jn="\\ufe20-\\ufe2f",Qn="\\u20d0-\\u20ff",Rn=Vn+jn+Qn,ye="\\u2700-\\u27bf",Ve="a-z\\xdf-\\xf6\\xf8-\\xff",Dn="\\xac\\xb1\\xd7\\xf7",Tn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ln="\\u2000-\\u206f",Nn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",je="A-Z\\xc0-\\xd6\\xd8-\\xde",On="\\ufe0e\\ufe0f",Qe=Dn+Tn+Ln+Nn,Re="['’]",_A="["+Qe+"]",Zn="["+Rn+"]",De="\\d+",Fn="["+ye+"]",Te="["+Ve+"]",Le="[^"+Be+Qe+De+ye+Ve+je+"]",Yn="\\ud83c[\\udffb-\\udfff]",Wn="(?:"+Zn+"|"+Yn+")",Gn="[^"+Be+"]",Ne="(?:\\ud83c[\\udde6-\\uddff]){2}",Oe="[\\ud800-\\udbff][\\udc00-\\udfff]",H="["+je+"]",Pn="\\u200d",HA="(?:"+Te+"|"+Le+")",Jn="(?:"+H+"|"+Le+")",qA="(?:"+Re+"(?:d|ll|m|re|s|t|ve))?",zA="(?:"+Re+"(?:D|LL|M|RE|S|T|VE))?",Ze=Wn+"?",Fe="["+On+"]?",Un="(?:"+Pn+"(?:"+[Gn,Ne,Oe].join("|")+")"+Fe+Ze+")*",Xn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",_n="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Hn=Fe+Ze+Un,qn="(?:"+[Fn,Ne,Oe].join("|")+")"+Hn,zn=RegExp([H+"?"+Te+"+"+qA+"(?="+[_A,H,"$"].join("|")+")",Jn+"+"+zA+"(?="+[_A,H+HA,"$"].join("|")+")",H+"?"+HA+"+"+qA,H+"+"+zA,_n,Xn,De,qn].join("|"),"g");function Kn(A){return A.match(zn)||[]}var $n=Kn,As=In,es=yn,ts=se,os=$n;function ns(A,e,t){return A=ts(A),e=t?void 0:e,e===void 0?es(A)?os(A):As(A):A.match(e)||[]}var ss=ns,as=sn,is=kn,rs=ss,cs="['’]",ls=RegExp(cs,"g");function ds(A){return function(e){return as(rs(is(e).replace(ls,"")),A,"")}}var us=ds,ms=us,fs=pt,gs=ms(function(A,e,t){return A+(t?" ":"")+fs(e)}),ps=gs;const hs=ee(ps);function Cs({conversationId:A}){const e=at("1426009137")?.value,t=K(A),a=VA(A),s=q.getCurrentNode(A)?.id,r=ge();return!e||!a?null:o.jsx(J,{conversationId:t??A,parentMessageId:s,status:r})}function J(A){const e=A?.status?.modes,[t,a]=n.useState(!1),[s,r]=n.useState(),l=n.useCallback(d=>{r(d),a(!0)},[]),i=N(),c=n.useCallback(()=>a(!1),[]);return o.jsxs(o.Fragment,{children:[o.jsx(nt,{contentAlign:"center",triggerButton:o.jsx(J.Trigger,{}),children:e?e.map(d=>{const m=d.default_model_slug;return n.createElement(J.Item,{...A,modelSlug:m,key:d.mode,voiceStatusMode:d,onShowModal:l})}):o.jsx("div",{role:"progressbar","aria-valuetext":i.formatMessage({defaultMessage:"Loading voice modes",id:"voiceModeButton.loadingModes"}),"aria-busy":"true","aria-live":"assertive","aria-valuemin":0,"aria-valuemax":100,children:o.jsx(sA,{"aria-hidden":"true",className:"my-4 min-w-full"})})}),o.jsx(J.Modal,{conversationId:A.conversationId,disabledModeMetadata:s,isOpen:t,onClose:c})]})}J.Modal=function(e){const t=e.disabledModeMetadata?.buttons??[],a=Me({buttons:t,conversationId:e.conversationId,modelId:gA,onClick:e.onClose}),s=o.jsx(he,{children:e.disabledModeMetadata?.description_markdown});return o.jsx(oe,{title:e.disabledModeMetadata?.title,description:s,isOpen:e.isOpen,onClose:e.onClose,type:"success",primaryButton:a.primary,secondaryButton:a.secondary})};J.Trigger=n.forwardRef(function(e,t){const a=w(s=>s.voiceMode);return o.jsxs(Jt,{ref:t,...e,children:[hs(a)??o.jsx(sA,{}),o.jsx(ht,{className:"icon-md text-token-text-tertiary"})]})});J.Item=function({conversationId:e,modelSlug:t,parentMessageId:a,voiceStatusMode:s,onShowModal:r}){const{disabled_mode_metadata:l,mode:i}=s,{toggleVoiceMode:c}=TA(),d=K(e),m=n.useCallback(async()=>{l?r(l.disabled_message):c({serverThreadId:d,modelSlug:t,parentMessageId:a,isAdvancedMode:i==="advanced"&&!l,eventSource:"voice_mode_picker",retryWithStandard:!1,clientThreadId:e,gizmoId:q.getGizmoId(e)})},[e,l,i,t,r,a,d,c]);return o.jsx(st.Item,{onClick:m,children:o.jsxs("div",{children:[s.display_name,o.jsx("div",{className:"text-xs text-token-text-tertiary",children:s.description})]})})};function xs({conversationId:A}){const e=w(t=>t.voiceSessionId);return o.jsx("div",{className:"relative h-full",children:o.jsx(B.div,{className:"absolute hidden h-full max-w-[500px] overflow-y-hidden rounded-xl border-l border-l-token-sidebar-surface-secondary bg-token-main-surface-secondary pt-4 shadow-inner md:block",initial:{opacity:0,x:520,width:"0px"},animate:{opacity:1,x:0,width:"500px",left:"-520px"},exit:{opacity:0,x:520,width:"0px",left:"0px"},transition:{type:"tween"},children:o.jsx(L,{children:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex w-full items-center justify-center",children:o.jsx(Cs,{conversationId:A})}),o.jsx("div",{className:"p-4 py-2 text-sm",children:o.jsx(T,{name:"Voice Session ID",text:e??"n/a"})}),o.jsxs("div",{className:"flex h-full w-full flex-col flex-nowrap gap-4",children:[o.jsx("div",{className:"px-4",children:o.jsxs("div",{className:"flex flex-col flex-nowrap gap-4",children:[o.jsx(vs,{}),o.jsx(Es,{})]})}),o.jsx(bs,{})]})]})})})})}function vs(){const A=w(s=>s.server.messages.filter(r=>r.type===Ft.Performance)),e=A[A.length-1],t=n.useCallback(s=>s>=1e3?`${(s/1e3).toFixed(2)}s`:`${s.toFixed(1)}ms`,[]);if(!e)return null;const a=[...e.payload.metrics].sort((s,r)=>s.name.localeCompare(r.name));return o.jsx(Ye,{title:"Performance",children:o.jsx("div",{className:"flex flex-col flex-nowrap gap-1",children:a.map(s=>o.jsx(T,{name:s.name,text:t(s.ms)},s.name))})})}function bs(){const A=w(e=>e.server.messages);return o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"px-4 py-2 text-lg font-semibold text-token-text-secondary",children:"Messages"}),o.jsx("div",{className:"grow overflow-hidden",children:o.jsx(Ut,{children:o.jsx(B.ul,{className:"pointer-events-none flex w-full flex-col gap-4 pb-24 pt-4",initial:"initial",animate:"animate",exit:"exit",variants:We,transition:{delayChildren:.25,staggerChildren:.05},children:A.map((e,t)=>o.jsx(ws,{index:t,message:e},t))})})})]})}function Es(){const A=w(i=>i.server.connectionState),e=w(i=>i.dev.room),[t,a]=n.useState("Unknown"),s=e?.localParticipant,r=e?.numParticipants??"Unknown",l=e?.activeSpeakers??[];return n.useEffect(()=>{if(s){const i=c=>{a(c)};return s.on("connectionQualityChanged",i),()=>{s.off("connectionQualityChanged",i)}}},[s]),o.jsxs(Ye,{title:"Room",open:!1,children:[o.jsx(T,{name:"Connection Quality",text:String(t)}),o.jsx(T,{name:"Connection State",text:String(A)}),o.jsx(T,{name:"Participants",text:r}),o.jsx(T,{name:"Speakers",text:l.length}),o.jsx(ks,{})]})}function ks(){const A=w(m=>m.dev.room),[e,t]=n.useState(null),[a,s]=n.useState(null),[r,l]=n.useState(null),i=A?.getActiveDevice("audioinput"),c=A?.getActiveDevice("audiooutput"),d=A?.getActiveDevice("videoinput");return n.useEffect(()=>{async function m(){const u=await fA.getLocalDevices("audioinput"),f=await fA.getLocalDevices("audiooutput"),g=await fA.getLocalDevices("videoinput"),C=u.find(p=>p.deviceId===i),h=f.find(p=>p.deviceId===c),x=g.find(p=>p.deviceId===d);t(C?.label??"Unknown"),s(h?.label??"Unknown"),l(x?.label??null)}m()},[i,c,d]),o.jsxs(o.Fragment,{children:[o.jsx(Ss,{text:"Devices"}),r?o.jsx(T,{icon:Ct,name:"Video Input",text:r}):null,o.jsx(T,{icon:xt,name:"Audio Input",text:e??"Unknown"}),o.jsx(T,{icon:on,name:"Audio Output",text:a??"Unknown"})]})}function Ye({title:A,titleClassName:e,children:t,open:a}){const[s,r]=n.useState(a??!0);return o.jsxs("div",{children:[o.jsxs("h3",{className:nA("flex cursor-pointer items-center py-2 text-lg font-semibold text-token-text-secondary",e),onClick:()=>r(!s),children:[o.jsx("span",{children:A}),o.jsx("span",{className:"ml-2",children:s?o.jsx(re,{className:"h-4 w-4"}):o.jsx(tn,{className:"h-4 w-4"})})]}),o.jsx(L,{initial:!1,children:s&&o.jsx(B.div,{initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{height:"auto",opacity:1},collapsed:{height:0,opacity:0}},transition:{duration:.3,ease:"easeInOut"},layout:!0,children:t},"content")})]})}function Ss({text:A}){return o.jsx("h4",{className:"py-2 text-sm font-semibold",children:A})}function T(A){return o.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-2",children:[o.jsx("span",{className:"opacity-85",children:A.icon?o.jsx(A.icon,{className:"h-[0.75rem] w-[0.75rem]"}):o.jsxs("span",{className:"text-sm",children:[A.name,":"]})}),A.content??o.jsx("span",{className:"line-clamp-1 rounded-lg bg-token-main-surface-tertiary p-0.5 px-1 font-mono text-xs",children:A.text})]})}function ws({index:A,message:e}){const[t,a]=n.useState(!1),s=N();let r=null;switch(e.source){case"remote":r=bt;break;case"local":r=vt;break}return o.jsx(B.div,{className:"w-full border-t border-token-main-surface-tertiary p-4",variants:We,children:o.jsxs("div",{className:"flex w-full flex-col gap-2 rounded-lg bg-token-main-surface-secondary",children:[o.jsxs("div",{className:"font-mono text-[0.65rem] font-semibold text-token-text-secondary",children:[o.jsxs("div",{className:"flex w-full flex-row flex-nowrap items-center justify-between",children:[o.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[o.jsx(r,{className:"h-3 w-3 text-token-text-secondary"}),o.jsx("span",{children:` | ${A+1} | ${s.formatDate(e.timestamp,{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:2})}`})]}),o.jsx("div",{className:"flex flex-row flex-nowrap items-center gap-2",children:o.jsx(ne,{className:"rounded-full p-0.5",color:"ghost",size:"small",onClick:()=>a(l=>!l),children:o.jsx(re,{className:`transform transition-transform ${t?"rotate-180":""}`})})})]}),o.jsx("div",{className:"mt-1 text-xs font-bold",children:e.type})]}),o.jsx(L,{children:t?o.jsx(B.pre,{initial:{opacity:0,transform:"blur(4px)"},animate:{opacity:1,transform:"blur(0px)"},exit:{opacity:0,transform:"blur(4px)"},className:"overflow-x-auto rounded-md bg-token-main-surface-tertiary p-2 text-xs text-token-text-secondary",children:JSON.stringify(e.payload,null,2)}):null})]})})}const We={hidden:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100}};function Is({children:A}){const{isVideoEnabled:e}=QA(),{isScreenshareEnabled:t}=RA(),a=e||t;return o.jsx(L,{mode:"wait",children:a?o.jsx("div",{className:"flex h-full w-full flex-nowrap items-center",children:e?o.jsx(Ms,{}):o.jsx(Bs,{})}):o.jsx(B.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:A},"children")})}function Ms(){const{isVideoEnabled:A,isStartingVideo:e,toggleVideo:t}=QA(),s=aA([P.Source.Camera]).find(l=>l.participant.isLocal),r=A&&!e&&s;return n.useEffect(()=>{const l=s?.publication?.track;if(l){const i=()=>{t("Browser Video Controls")};return l.on("ended",i),()=>{l.off("ended",i)}}},[s,t]),o.jsx(L,{children:r&&o.jsx(Ge,{children:o.jsxs("div",{className:"aspect-w-16 aspect-h-9 group relative max-h-[95%] w-fit max-w-[60%] overflow-hidden rounded-3xl shadow-md",children:[o.jsx("div",{className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-90",children:o.jsx(LA,{onClick:()=>t("StopButton"),className:"bg-gray-900 bg-opacity-20 backdrop-blur-lg hover:bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-20 dark:backdrop-blur-lg dark:hover:bg-opacity-30"})}),o.jsx(Ee,{className:"h-full w-full object-contain",trackRef:s})]})},"camera-renderer")})}function Bs(){const{isScreenshareEnabled:A,isScreenshareStarting:e,toggleScreenShare:t}=RA(),s=aA([P.Source.ScreenShare]).find(l=>l.participant.isLocal),r=A&&!e&&s;return n.useEffect(()=>{const l=s?.publication?.track;if(l){const i=()=>{t("Browser ScreenShare Controls")};return l.on("ended",i),()=>{l.off("ended",i)}}},[s,t]),o.jsx(L,{children:r&&o.jsx(Ge,{children:o.jsxs("div",{className:"aspect-w-16 aspect-h-9 group relative max-h-[95%] w-fit max-w-[60%] overflow-hidden rounded-3xl shadow-md",children:[o.jsx("div",{className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-90",children:o.jsx(LA,{onClick:()=>t("StopButton"),className:"bg-gray-900 bg-opacity-20 backdrop-blur-lg hover:bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-20 dark:backdrop-blur-lg dark:hover:bg-opacity-30"})}),o.jsx(Ee,{className:"h-full w-full object-contain",trackRef:s})]})},"screenshare-renderer")})}function Ge({children:A,key:e}){return o.jsx(B.div,{className:"flex h-full w-full flex-col items-center justify-center gap-2 bg-token-main-surface-primary",initial:{opacity:0,transform:"blur(12px)",scale:.75},animate:{opacity:1,transform:"blur(0px)",scale:1},exit:{opacity:0,transform:"blur(12px)",scale:.75},transition:{duration:.2},children:A},e)}const KA=A=>{const[e,t]=n.useState({audioData:[0,0,0,0],cumulativeAudioData:[0,0,0,0]}),a=n.useRef([0,0,0,0]),s=n.useRef(void 0),r=n.useRef(performance.now()),{bandMagnitudes:l,cumulativeMagnitude:i}=Xt(A,{bands:3,bins:1,gainMultipliers:[10,1,1]});a.current=[...l,i].flat();const c=n.useCallback(()=>{const d=performance.now(),m=(d-r.current)/1e3;r.current=d;const u=a.current,{audioData:f,cumulativeAudioData:g}=e,C=_t({deltaTimeS:m,audioDataRaw:u,prevAudioData:f,prevCumulativeAudioData:g});t(C)},[e]);return n.useEffect(()=>(s.current||(s.current=window.setInterval(c,Ce)),()=>{clearInterval(s.current),s.current=void 0}),[c]),e};function $A({className:A}){return o.jsx(Ls,{className:A})}const ys=1.55,Vs=1.4,js="voice-wav",Qs="shout",Rs="User",Ds={bands:4,loPass:0,hiPass:400},Ae=[300,300];function Ts(){const A=it(),e=w(g=>g.voiceMode==="advanced"),t=aA([P.Source.Microphone]),a=t.find(g=>g.publication.trackName===js),s=t.find(g=>g.publication.trackName===Qs);let r=WA(s?.publication.audioTrack,Ds);r.length===0&&(r=[0,0,0,0]),r.map(g=>g*Vs);let l=KA(s?.publication.audioTrack),i=KA(a?.publication.audioTrack);const c=l.audioData.map((g,C)=>{const h=i.audioData[C];return g>0&&h>0?(g+h)/2:g>0?g:h}),d=l.cumulativeAudioData.map((g,C)=>{const h=i.cumulativeAudioData[C];return g>0&&h>0?(g+h)/2:g>0?g:h}),m=w(g=>g.server.remoteState),u=t.find(g=>g.participant.identity===Rs),f=(WA(u,{bands:1,loPass:0,hiPass:400})[0]??0)*ys;return{remoteState:m,userVolume:f,isAdvanced:e,avgMag:c,cumulativeAudio:d,isDarkMode:A,standardBloopVolumes:r}}function Ls({className:A}){const{remoteState:e,userVolume:t,isAdvanced:a,avgMag:s,cumulativeAudio:r,isDarkMode:l,standardBloopVolumes:i}=Ts(),[c,d]=n.useState(Ae),{canvasSizeRef:m,handleCanvasSizeUpdate:u}=Et(Ae),f=n.useRef(void 0),g=n.useCallback(V=>{d([V.width,V.height])},[]),C=n.useRef([0,0,0,0]);n.useEffect(()=>{e===R.Connecting&&(C.current=[0,0,0,0])},[e]);const h=n.useRef(performance.now());n.useEffect(()=>{const V=performance.now();e===R.Speaking&&V-h.current>50&&(h.current=V,C.current=C.current.map((eA,tA)=>eA+s[tA]))},[e,s]);const[x,p]=dA(uA(R.Listening,e)),[I,M]=dA(uA(R.Speaking,e)),[b,E]=dA(uA(R.Thinking,e)),[k,S]=dA(uA(R.Halted,e)),[y,O]=n.useState(performance.now()/1e3);n.useEffect(()=>{const V=setInterval(()=>{O(performance.now()/1e3)},Ce);return()=>clearInterval(V)},[]);const D=n.useMemo(()=>performance.now()/1e3,[]),[iA,U]=n.useState(1e5),$=n.useRef(e);n.useEffect(()=>{e===R.Connecting?U(1e5):$.current===R.Connecting&&U(y),$.current=e},[e,y]);const G=Ht(a),Z=a?s:i,AA=x===1||I===1,rA=qt({viewport:c,canvasSize:m.current,shouldMeasurePerf:AA,source:"VoiceMode"}),hA=zt({shouldCalibrate:AA,viewport:c,initialScale:1});return f.current={time:y-D,micLevel:t,stateListen:x,listenTimestamp:Math.max(p-D,0),stateThink:b,thinkTimestamp:Math.max(E-D,0),stateSpeak:I,speakTimestamp:Math.max(M-D,0),readyTimestamp:iA-D,stateHalt:k,haltTimestamp:Math.max(S-D,0),touchDownTimestamp:0,touchUpTimestamp:0,stateFailedToConnect:0,failedToConnectTimestamp:0,avgMag:Z,cumulativeAudio:r??C.current,isNewBloop:!0,isAdvancedBloop:a,bloopColorMain:Array.from(G.bloopColorMain),bloopColorLow:Array.from(G.bloopColorLow),bloopColorMid:Array.from(G.bloopColorMid),bloopColorHigh:Array.from(G.bloopColorHigh),isDarkMode:l,screenScaleFactor:window.devicePixelRatio,viewport:c,silenceAmount:0,silenceTimestamp:0,fadeBloopWhileListening:!1},o.jsx(Kt,{className:nA("flex items-center justify-center",A),variablesRef:f,onViewportUpdate:g,textureImage:$t,textureName:"uTextureNoise",onGlAvailable:rA,onCanvasSizeUpdate:u,scale:hA})}const Ns=A=>n.createElement("svg",{width:28,height:28,viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},n.createElement("path",{d:"M10.4354 3.25633C10.8922 2.80184 11.6309 2.80367 12.0854 3.26041L13.9994 5.18393L15.9134 3.26042C16.3678 2.80368 17.1065 2.80184 17.5633 3.25632C18.02 3.7108 18.0218 4.44949 17.5674 4.90623L15.166 7.31951V11.975L19.1695 9.65206L20.0484 6.35551C20.2144 5.73292 20.8536 5.36277 21.4762 5.52876C22.0988 5.69474 22.469 6.334 22.303 6.95659L21.5996 9.59502L24.22 10.3007C24.8422 10.4682 25.2107 11.1084 25.0432 11.7306C24.8757 12.3527 24.2355 12.7213 23.6133 12.5537L20.338 11.6717L16.3247 14.0004L20.3366 16.3282L23.612 15.4462C24.2341 15.2786 24.8743 15.6472 25.0419 16.2693C25.2094 16.8915 24.8409 17.5317 24.2187 17.6992L21.5982 18.4049L22.3017 21.0434C22.4677 21.666 22.0975 22.3052 21.4749 22.4712C20.8524 22.6372 20.2131 22.2671 20.0471 21.6445L19.1681 18.3479L15.166 16.0258V20.6805L17.5674 23.0938C18.0218 23.5505 18.02 24.2892 17.5633 24.7437C17.1065 25.1981 16.3678 25.1963 15.9134 24.7396L13.9994 22.816L12.0854 24.7396C11.6309 25.1963 10.8922 25.1981 10.4354 24.7437C9.9787 24.2892 9.97687 23.5505 10.4314 23.0937L12.8327 20.6805V16.0265L8.83191 18.3479L7.95297 21.6444C7.78697 22.267 7.1477 22.6371 6.52512 22.4711C5.90254 22.3051 5.5324 21.6659 5.6984 21.0433L6.40186 18.4049L3.78134 17.6992C3.15918 17.5317 2.79063 16.8915 2.95818 16.2693C3.12573 15.6472 3.76591 15.2786 4.38808 15.4462L7.66345 16.3282L11.6754 14.0004L7.66206 11.6718L4.38669 12.5538C3.76452 12.7213 3.12433 12.3528 2.95679 11.7306C2.78925 11.1084 3.15781 10.4682 3.77997 10.3007L6.40048 9.59504L5.69702 6.95664C5.53102 6.33406 5.90116 5.69479 6.52374 5.52879C7.14633 5.3628 7.7856 5.73294 7.95159 6.35552L8.83053 9.65208L12.8327 11.9743V7.31951L10.4314 4.90624C9.97687 4.4495 9.9787 3.71081 10.4354 3.25633Z",fill:"#282828"}),n.createElement("path",{d:"M10.4354 3.25633C10.8922 2.80184 11.6309 2.80367 12.0854 3.26041L13.9994 5.18393L15.9134 3.26042C16.3678 2.80368 17.1065 2.80184 17.5633 3.25632C18.02 3.7108 18.0218 4.44949 17.5674 4.90623L15.166 7.31951V11.975L19.1695 9.65206L20.0484 6.35551C20.2144 5.73292 20.8536 5.36277 21.4762 5.52876C22.0988 5.69474 22.469 6.334 22.303 6.95659L21.5996 9.59502L24.22 10.3007C24.8422 10.4682 25.2107 11.1084 25.0432 11.7306C24.8757 12.3527 24.2355 12.7213 23.6133 12.5537L20.338 11.6717L16.3247 14.0004L20.3366 16.3282L23.612 15.4462C24.2341 15.2786 24.8743 15.6472 25.0419 16.2693C25.2094 16.8915 24.8409 17.5317 24.2187 17.6992L21.5982 18.4049L22.3017 21.0434C22.4677 21.666 22.0975 22.3052 21.4749 22.4712C20.8524 22.6372 20.2131 22.2671 20.0471 21.6445L19.1681 18.3479L15.166 16.0258V20.6805L17.5674 23.0938C18.0218 23.5505 18.02 24.2892 17.5633 24.7437C17.1065 25.1981 16.3678 25.1963 15.9134 24.7396L13.9994 22.816L12.0854 24.7396C11.6309 25.1963 10.8922 25.1981 10.4354 24.7437C9.9787 24.2892 9.97687 23.5505 10.4314 23.0937L12.8327 20.6805V16.0265L8.83191 18.3479L7.95297 21.6444C7.78697 22.267 7.1477 22.6371 6.52512 22.4711C5.90254 22.3051 5.5324 21.6659 5.6984 21.0433L6.40186 18.4049L3.78134 17.6992C3.15918 17.5317 2.79063 16.8915 2.95818 16.2693C3.12573 15.6472 3.76591 15.2786 4.38808 15.4462L7.66345 16.3282L11.6754 14.0004L7.66206 11.6718L4.38669 12.5538C3.76452 12.7213 3.12433 12.3528 2.95679 11.7306C2.78925 11.1084 3.15781 10.4682 3.77997 10.3007L6.40048 9.59504L5.69702 6.95664C5.53102 6.33406 5.90116 5.69479 6.52374 5.52879C7.14633 5.3628 7.7856 5.73294 7.95159 6.35552L8.83053 9.65208L12.8327 11.9743V7.31951L10.4314 4.90624C9.97687 4.4495 9.9787 3.71081 10.4354 3.25633Z",fill:"url(#paint0_linear_8139_653)"}),n.createElement("defs",null,n.createElement("linearGradient",{id:"paint0_linear_8139_653",x1:14,y1:-2,x2:14,y2:25,gradientUnits:"userSpaceOnUse"},n.createElement("stop",{stopColor:"#5C9AFF"}),n.createElement("stop",{offset:1,stopColor:"#A4CEFF"})))),Os=A=>n.createElement("svg",{width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",...A},n.createElement("path",{d:"M13.9167 2.83333C12.628 2.83333 11.5833 3.878 11.5833 5.16667C11.5833 6.45533 12.628 7.5 13.9167 7.5C15.2053 7.5 16.25 6.45533 16.25 5.16667C16.25 3.878 15.2053 2.83333 13.9167 2.83333ZM9.39702 4C9.91507 1.98723 11.7422 0.5 13.9167 0.5C16.0911 0.5 17.9183 1.98723 18.4363 4H20.3333C20.9777 4 21.5 4.52233 21.5 5.16667C21.5 5.811 20.9777 6.33333 20.3333 6.33333H18.4363C17.9183 8.3461 16.0911 9.83333 13.9167 9.83333C11.7422 9.83333 9.91507 8.3461 9.39702 6.33333H1.66667C1.02233 6.33333 0.5 5.811 0.5 5.16667C0.5 4.52233 1.02233 4 1.66667 4H9.39702ZM8.08333 14.5C6.79467 14.5 5.75 15.5447 5.75 16.8333C5.75 18.122 6.79467 19.1667 8.08333 19.1667C9.372 19.1667 10.4167 18.122 10.4167 16.8333C10.4167 15.5447 9.372 14.5 8.08333 14.5ZM3.56369 15.6667C4.08174 13.6539 5.90885 12.1667 8.08333 12.1667C10.2578 12.1667 12.0849 13.6539 12.603 15.6667H20.3333C20.9777 15.6667 21.5 16.189 21.5 16.8333C21.5 17.4777 20.9777 18 20.3333 18H12.603C12.0849 20.0128 10.2578 21.5 8.08333 21.5C5.90885 21.5 4.08174 20.0128 3.56369 18H1.66667C1.02233 18 0.5 17.4777 0.5 16.8333C0.5 16.189 1.02233 15.6667 1.66667 15.6667H3.56369Z",fill:"currentColor"}));function Zs(){const A=kt(St()?ZA.hasStartedElectronVoiceModeStraw:ZA.hasStartedWebVoiceModeStraw),e=ce(),t=!A.isLoading&&A.eligible&&e,[a,s]=n.useState(!1),[r,l]=n.useState(!1),[i,c]=n.useState(""),[d,m]=n.useState(!1),u=n.useCallback(()=>{a?(c(le),m(!0),j.strawVoicePickerSnowflake.click()):c("")},[a]);return{shouldShowVoicePickerSnowflake:t,showSnowflake:a,setShowSnowflake:s,enableFadeInPickerIcon:r,setEnableFadeInPickerIcon:l,initialVoiceName:i,hasShownSnowflake:d,handleStrawVoiceEntry:u}}const Fs=({conversationId:A})=>{const e=aA(),[t,a]=n.useState(!1),[s,r]=n.useState(!1),{voiceName:l}=jA(),{shouldShowVoicePickerSnowflake:i,showSnowflake:c,setShowSnowflake:d,enableFadeInPickerIcon:m,setEnableFadeInPickerIcon:u,initialVoiceName:f,hasShownSnowflake:g,handleStrawVoiceEntry:C}=Zs(),h=w(b=>b.server.remoteState===R.Listening||b.server.remoteState===R.ListeningIntently);n.useEffect(()=>{if(i&&h&&!g){const b=setTimeout(()=>{d(!0),u(!1),j.strawVoicePickerSnowflake.success()},FA),E=setTimeout(()=>{d(!1),u(!0)},FA+wt);return()=>{clearTimeout(b),clearTimeout(E)}}else u(!1),d(!1)},[g,h,u,d,i]);const x=n.useCallback(()=>{e&&e.length>0&&e.forEach(b=>{const{publication:E}=b;E.audioTrack instanceof BA?(r(E.audioTrack.isMuted),E.audioTrack.mute()):E.audioTrack instanceof MA&&E.audioTrack.setMuted(!0)})},[e]),p=n.useCallback(()=>{e&&e.length>0&&e.forEach(b=>{const{publication:E}=b;E.audioTrack instanceof BA?s||E.audioTrack.unmute():E.audioTrack instanceof MA&&E.audioTrack.setMuted(!1)})},[e,s]),I=()=>{j.voiceSelectionShown.click({voice:l}),C(),x(),a(!0)},M=()=>{p(),a(!1)};return o.jsxs("div",{className:"relative h-[40px] w-[40px]",children:[o.jsx(L,{mode:"wait",children:c?o.jsx(B.div,{initial:{opacity:0,scale:.5,rotate:0},animate:{opacity:1,scale:1,rotate:360},exit:{opacity:0,scale:.5},transition:{opacity:{duration:.5},scale:{duration:.3,ease:"easeInOut"},rotate:{duration:24,ease:"linear"}},className:"absolute inset-0 flex items-center justify-center",children:o.jsx(z,{onClick:I,icon:Ns,iconColor:"text-token-text-secondary",className:"h-[40px] w-[40px] bg-transparent hover:bg-black/10 active:bg-black/20 dark:bg-transparent dark:hover:bg-white/5 dark:active:bg-white/10",iconSize:"icon-lg"})},"snowflake"):o.jsx(B.div,{initial:m?{opacity:0,scale:.5}:{},animate:m?{opacity:1,scale:1}:{},exit:{opacity:0,scale:.5},transition:{opacity:{duration:.5},scale:{duration:.3,ease:"easeInOut"}},className:"absolute inset-0 flex items-center justify-center",children:o.jsx(z,{onClick:I,icon:Os,iconColor:"text-token-text-secondary",className:"h-[40px] w-[40px] bg-transparent hover:bg-black/10 active:bg-black/20 dark:bg-transparent dark:hover:bg-white/5 dark:active:bg-white/10",iconSize:"icon-md"})},"voicePickerIcon")}),t&&o.jsx(Ao,{conversationId:A,onClose:M,initialVoiceName:f})]})};class Ys extends Worker{constructor(e,t){const a=String(e);super(a.includes("://")&&!a.startsWith(location.origin)?URL.createObjectURL(new Blob([`import("${a}")`],{type:"text/javascript"})):e,t)}}function Ws(A={}){const[e,t]=n.useState(!1),[a,s]=n.useState(!1),[r,l]=n.useState(!1);let i=Yt().microphoneTrack;const[c,d]=n.useState();A.trackRef&&(i=A.trackRef.publication);const m=n.useCallback(async u=>{if(u){const{KrispNoiseFilter:f,isKrispNoiseFilterSupported:g}=await rt(async()=>{const{KrispNoiseFilter:C,isKrispNoiseFilterSupported:h}=await import("./cdeb6wdntgjfxjgj.js");return{KrispNoiseFilter:C,isKrispNoiseFilterSupported:h}},[]);if(!g()){console.warn("Krisp noise filter is not supported in this browser");return}c||d(f(A.filterOptions))}t(f=>(f!==u&&s(!0),u))},[]);return n.useEffect(()=>{var u;if(i&&i.track instanceof BA&&c){const f=i.track.getProcessor();f&&f.name==="livekit-noise-filter"?(s(!0),f.setEnabled(e).finally(()=>{s(!1),l(e)})):!f&&e&&(s(!0),(u=i?.track)==null||u.setProcessor(c).then(()=>c.setEnabled(e)).then(()=>{l(!0)}).catch(g=>{l(!1),console.error(g)}).finally(()=>{s(!1)}))}},[e,i,c]),{setNoiseFilterEnabled:m,isNoiseFilterEnabled:r,isNoiseFilterPending:a,processor:c}}const Gs=n.memo(function(){const e=ct("989226566").value,{setNoiseFilterEnabled:t}=Ws();return n.useEffect(()=>{t(e)},[e,t]),null}),Ps=new Ys(new URL("https://cdn.oaistatic.com/assets/livekit-client.e2ee.worker-DK0iMXIf.js",import.meta.url),{type:"module"}),Js=n.memo(function({children:e}){const t=n.useRef({keyProvider:new Wt}).current,[a,s]=n.useState(!1),{token:r,url:l,e2eeKey:i}=w(u=>u.credentials),c=Do(),d=w(u=>u.isVoiceModeActive),m=w(u=>u.audioInputDevice?.deviceId);return n.useEffect(()=>{const u=r&&l&&i;!a&&u?t.keyProvider.setKey(i).then(()=>{s(!0)}):a&&!u&&s(!1)},[r,l,i,a,t]),d?o.jsxs(ao,{...c,connect:!0,token:r??void 0,serverUrl:l??void 0,audio:{deviceId:{ideal:m,exact:m},noiseSuppression:!0,echoCancellation:!0},options:{e2ee:{keyProvider:t.keyProvider,worker:Ps}},children:[e,a&&r&&l&&o.jsx(Pt,{}),a&&r&&l&&o.jsx(Ro,{}),a&&r&&l&&o.jsx(Gs,{})]}):null});function ra({conversationId:A,currentModelId:e,isActiveWindow:t}){const{voiceName:a}=jA(),s=a===le,r=ce(),[l,i]=n.useState(!1),c=w(p=>p.isVoiceModeActive),d=w(p=>p.server.voiceConnectionQuality),m=It(),u=w(p=>p.screenshare!=null),f=w(p=>p.video!=null),g=N(),C=Se({conversationId:A});lt(C),n.useEffect(()=>{if(!t)return;const p=new Fo;return c?p.enable():p.disable(),()=>{p.disable()}},[c,t]);const h=K(A),x=n.useMemo(()=>({name:r&&h===void 0?"straw":"normal",themeActive:s&&h===void 0?"yes":"no"}),[r,s,h]);return t&&o.jsxs(Js,{children:[o.jsx(L,{children:o.jsx(eo,{value:x,children:c?o.jsx(B.div,{className:"fixed left-0 top-0 z-50 flex h-full w-full flex-col bg-token-main-surface-primary",initial:"hidden",animate:"visible",exit:"hidden",variants:mA,children:o.jsxs(B.div,{className:"relative h-full w-full",variants:mA,children:[o.jsxs(B.div,{variants:mA,className:"flex h-full w-full flex-col justify-between gap-6",children:[o.jsxs(B.div,{className:"relative mt-6 flex w-full justify-center",children:[o.jsx("div",{className:"flex w-full items-center justify-center",children:(u||f)&&o.jsx($A,{className:"h-16 w-16"})}),o.jsx("div",{className:"mr-4",children:o.jsx(Fs,{conversationId:A})})]}),o.jsxs("div",{className:"flex h-full min-h-0 items-center justify-center",children:[o.jsx(Is,{children:o.jsx($A,{className:"h-max min-h-52 w-max min-w-52"})}),o.jsx(L,{children:l?o.jsx(xs,{conversationId:A}):null})]}),o.jsx(B.div,{className:"mb-6 flex justify-center",children:o.jsx(qo,{conversationId:A,currentModelId:e})})]}),o.jsx(B.div,{className:"absolute bottom-0 right-0 flex w-auto items-center justify-end p-4",variants:mA,children:m?o.jsx(Mt,{onClick:()=>i(p=>!p),icon:Bt}):null})]})}):null})}),d===pe.Poor&&o.jsx("div",{className:"absolute left-1/2 top-6 z-50 -translate-x-1/2 transform",children:o.jsx("div",{className:"inline-flex flex-col items-center rounded-full border border-token-border-light bg-token-main-surface-primary px-6 py-3",children:o.jsx("span",{className:"text-token-text-secondary",children:g.formatMessage({id:"YE2Eng",defaultMessage:"Poor connection"})})})})]})}const mA={hidden:{opacity:0,transform:"blur(4px)"},visible:{transform:"blur(0px)",opacity:1},exit:{opacity:0,transform:"blur(4px)"}};export{ra as VoiceModeLayout};
//# sourceMappingURL=g66kaogfm1rfw5wz.js.map
