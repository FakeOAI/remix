const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ocm34i7m8vgjl7ln.js","assets/nihb2uczil39dw86.js","assets/root-c6tm8qyn.css","assets/l6w69dgi0kxb0m21.js","assets/lja1hqvokmbijl4e.js","assets/j1ja9es2uinbyngm.js","assets/conversation-small-ile61fj8.css","assets/ilm8pde0t6wxr4lu.js","assets/mdvgeej9vvn8kxo9.js","assets/n50msgs5im1o6g4g.js","assets/kj6bxl38i2oi019p.js","assets/e042xb0837s2fsjx.js","assets/o45ns1tamw20qo0d.js","assets/iuy17ob1myr021cj.js"])))=>i.map(i=>d[i]);
import{b3 as K,b4 as V,m as e,eI as te,L as G,r as x,a5 as q,bs as A,K as ne,ef as ae,ee as je,bp as E,cT as ie,aE as y,N as B,V as ye,aw as ke,d8 as Ce,cy as Ie,dq as Ne,bd as oe,hw as S,hx as Me,cp as ze,cq as Fe,gp as Te,e4 as P,a9 as we,b6 as Oe}from"./nihb2uczil39dw86.js";import{gZ as _e,k7 as H,bR as Ee,gV as re,iL as Ge,fV as Le,dw as U,du as Ae,aT as ce,b8 as J,cS as Pe,k8 as O,eK as Re,k9 as Be,ka as He,eQ as Ue,dx as le,aQ as De,kb as We,dy as Ke,ci as de,kc as Ve,fd as qe,U as me,fN as Ye,eL as Ze,kd as Qe,cw as $e,cx as Je,cs as Y,c_ as Xe,aY as es,ke as ss,kf as w,cr as Z,A as p,cK as ue,dz as ts,z as xe,dA as ns,cz as fe,kg as as,I as is,kh as os,ki as rs,kj as cs,kk as X,en as ls,kl as Q,aF as R,km as he,kn as ds,ko as D,kp as _,cE as ms,eo as us,bt as xs,kq as fs,aG as hs,bU as gs,kr as ps,w as bs,ks as Ss,y as vs,bP as js,kt as ys,ku as ge,E as ks,kv as Cs,cb as Is}from"./j1ja9es2uinbyngm.js";import{u as L,d as Ns}from"./ilm8pde0t6wxr4lu.js";import{m as W}from"./mdvgeej9vvn8kxo9.js";import{U as Ms,P as zs}from"./n50msgs5im1o6g4g.js";const Fs=K(()=>V(()=>import("./ocm34i7m8vgjl7ln.js"),__vite__mapDeps([0,1,2,3])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(pe,{color:s})}),Ts={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function pe({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:e.jsx(_e,{className:"h-3/4 w-3/4",style:{color:s}})})}function ws({gizmo:s,historyDisabled:n,section:t,onClick:c,isActive:a,hideOverflowMenu:u=!1,elementRef:i,subConversations:l}){const{clientThreadId:f}=L(),h=te(f),d=G(),[g,o]=x.useState(!1),[r,m]=x.useState(!1),[b,v]=x.useState(!1),k=s.gizmo.id,z=H.useStore(),C=H.useState(M=>H.selectFolderState(M,k)),F=q(),$=!!s.gizmo.tags?.includes(Ee.FirstParty),I=re(k),j=Ge(k);let N=!1;a&&I&&!(C==="open"&&h)&&(N=!0),x.useEffect(()=>{C!=="open"&&a&&h&&z.expandProject(k)},[a,h,z,k]);let T;if(s!=null)T=s.gizmo.display.name||Le;else{if(F==null)return null;n?T=d.formatMessage(U.clearChat):F.canInteractWithGizmos()?T=Ke:T=d.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(W.div,{whileTap:{scale:.98},onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:e.jsx(Ae,{loggingGizmoId:s?.gizmo.id??"primary",href:ce(s),onClick:c,showActiveIndicator:N,icon:I&&l&&l.items.length>0?e.jsx(A,{side:"top",sideOffset:4,delayDuration:600,label:C==="open"?d.formatMessage(J.hideChatsForProjectTooltip):d.formatMessage(J.showChatsForProjectTooltip),children:e.jsx("button",{onClick:M=>{M.preventDefault(),C==="open"?z.collapseProject(k):z.expandProject(k)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{v(!0)},onMouseLeave:()=>{v(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Fs,{isOpen:C==="open",isHovered:b,color:j||null})})})})}):I?e.jsx(pe,{color:j}):e.jsx(Pe,{isFirstParty:$,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:g,label:T,rightIcon:t===O.Workspace&&e.jsx(A,{side:"right",label:d.formatMessage(ee.workspaceRecommended,{workspace_name:F?.name??"Your Workspace"}),children:e.jsx(Re,{className:"icon-md text-token-text-secondary",alt:d.formatMessage(ee.workspaceRecommended,{workspace_name:F?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(r||g)&&!u&&(I?e.jsx("div",{className:"text-token-text-tertiary",onClick:M=>{M.preventDefault()},children:e.jsx(Be,{gizmo:s,isOpen:g,setIsOpen:o})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:M=>{M.preventDefault()},children:e.jsx(He,{gizmo:s,isOpen:g,setIsOpen:o,section:t})})),!I&&!u&&e.jsx(A,{side:"right",label:d.formatMessage(n?U.clearChat:U.newChat),className:"flex items-center",children:e.jsx("button",{className:g?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(Ue,{className:"icon-md"}):e.jsx(le,{className:"icon-md"})})})]}),elementRef:i})}),e.jsx(De,{initial:!1,children:I&&C==="open"&&l&&l.items.length>0&&e.jsx(W.div,{initial:"closed",animate:"open",exit:"closed",variants:Ts,className:"overflow-hidden",layout:!0,children:e.jsx(We,{gizmoResource:s,serverThreadId:h,isOnProjectPage:N,conversations:l.items})},"nested-conversations")})]})}const ee=ne({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function Os(s){const{clientThreadId:n}=L(),t=x.useRef(s);t.current=s;const c=x.useRef(null);x.useEffect(()=>{const a=c.current;return c.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function be(){const s=G(),n=de(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(Ve,{children:e.jsx(W.div,{whileTap:{scale:.98},children:e.jsx(ae,{to:qe(),onClick:()=>{n.activeSidebar==="popover-nav"&&me.setActiveSidebar(!1)},children:e.jsx(Ye,{icon:Ze,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const _s=2;function Se({gizmos:s,isGizmoFlyout:n,isLoaded:t,maxToShowOnLoad:c=4,isScreenArch:a,showAllSidebarItems:u}){const i=ss(s,r=>r.flair.kind),l=[...(i[w.Workspace]?.map(({resource:r})=>({gizmo:r,section:O.Workspace}))??[]).slice(0,3),...i[w.FirstParty]?.map(({resource:r})=>({gizmo:r,section:O.Keep}))??[],...i[w.SidebarKeep]?.map(({resource:r})=>({gizmo:r,section:O.Keep}))??[]],f=i[w.Recent]?.slice(0,a||t?i[w.Recent]?.length:_s).map(({resource:r})=>({gizmo:r,section:O.Recents}))??[],h=f.length,d=l.length,g=a?h>0:s.length>c;let o=[];return n&&a?o=[...l,...f]:!n&&a?o=l:(o=[...l,...f],u||(o.length>c&&d>c?o=o.slice(0,d):o.length>c&&(o=o.slice(0,c)))),{listItems:o,itemsLeft:s.length-o.length,needsToCollapseItems:g,total:s.length}}function ve({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:c=!1}){const a=x.useRef(!1),u=!t,i=je(),[l,f]=x.useState(!1),h=de(m=>!Qe.isGptListCollapsed(m)),{listItems:d,needsToCollapseItems:g,itemsLeft:o}=Se({gizmos:s,isGizmoFlyout:u,isLoaded:l,maxToShowOnLoad:t,isScreenArch:i,showAllSidebarItems:h});x.useEffect(()=>{l||f(!0)},[l]),x.useEffect(()=>{d.length>0&&!a.current&&($e({namespace:Je.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),a.current=!0)},[d]);function r(m,b){const v=e.jsx(ws,{gizmo:m,isActive:m.gizmo.id===n,section:b,hideOverflowMenu:c},m.gizmo.id);return i?e.jsx("li",{children:v}):v}return e.jsxs("div",{children:[d.map(({gizmo:m,section:b},v)=>e.jsxs(x.Fragment,{children:[v>1&&b!==d[v-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),r(m,b)]},v)),!i&&g?e.jsxs("button",{onClick:me.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(Y,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:h?e.jsxs(e.Fragment,{children:[e.jsx(E,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(Xe,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:o}}),e.jsx(es,{className:"icon-xs"})]})})]}):null,!i&&e.jsx(be,{})]})}function Es({currentGizmoId:s,gizmos:n,onClick:t}){const{isSidebarFlyoutOpen:c,onSidebarFlyoutOpenChange:a}=Z(),u=c(p.Gizmo),i=ue();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(ie,{onOpenChange:l=>a(p.Gizmo,l),side:i?"bottom":"right",sideOffset:4,open:u,contentAlign:"end",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",u&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Y,{className:y("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(E,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(B,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(ve,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function Gs({currentGizmoId:s}){const{data:{gizmos:n}={}}=ts();let t=n;xe()&&(t=n?.filter(u=>!ns(u.resource)));const{needsToCollapseItems:a}=Se({gizmos:t??[],isLoaded:!1,isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(fe,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(E,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(be,{}),e.jsx(ve,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:as}),a&&e.jsx(B,{children:e.jsx(Es,{currentGizmoId:s,gizmos:t??[]})})]})})}function Ls({onClick:s}){const{clientThreadId:n}=L(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:c}=Z(),a=ue(),u=t(p.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(ie,{onOpenChange:i=>{i&&ye.logEvent("chatgpt_web_more_conversation_history_opened"),c(p.Conversation,i)},side:a?"bottom":"right",sideOffset:4,open:u,contentAlign:"start",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",u&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(Y,{className:y("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(E,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(B,{children:e.jsx(is,{activeId:n,hideOverflowMenu:!0})})})})})}function As({clientThreadId:s}){const n=te(s),t=ke(),{isCollapsible:c,recentConversationLimit:a}=os(),u={recentConversationLimit:a},i=x.useRef(!1),l=!0,{conversations:f,data:h,isLoading:d,isError:g,recents:o,refetch:r}=rs(u),[m,b]=x.useState(!0),v=x.useCallback(function(N){N===void 0&&b(!1),r({cancelRefetch:!0})},[r,b]),k=t?void 0:n,z=f.length===0,C=g||h===void 0&&!d&&i.current,F=!C&&(h===void 0||d);h===void 0&&!d&&!i.current&&(i.current=!0,v(!0));const I=f.find(j=>j.id===k)??null;return x.useMemo(()=>{Ce.publish({kind:"refreshHistory",conversations:f})},[f]),e.jsxs(e.Fragment,{children:[C&&e.jsx(cs,{showRetry:m,refetch:v}),!z&&e.jsxs(fe,{header:o.label,isLastInGroup:!0,children:[o.items.map((j,N)=>e.jsx(X,{item:j,isActive:j.id===k,testId:`history-item-${N}`},j.id)),I&&!o.items.some(j=>j.id===k)&&e.jsx(X,{item:I,isActive:!0})]}),F&&e.jsx(Ie,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),c&&e.jsx(B,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!l,className:y(!l),children:e.jsx(Ls,{})})})})]})}const se=K(()=>V(()=>import("./lja1hqvokmbijl4e.js"),__vite__mapDeps([4,1,2,5,6,7,8,9])).then(s=>s.SnorlaxSidebarList));function Ps({clientThreadId:s}){const n=q(),t=Ne(s),{isUnauthenticated:c}=oe(),a=xe();return c?null:e.jsxs("div",{className:y(S.screenContent),children:[a&&n?.canInteractWithGizmos()&&se?e.jsx(se,{currentGizmoId:t}):null,null,e.jsx(As,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(Gs,{currentGizmoId:t}):null]})}function Rs(){const s=q(),n=s?.data==null,{isUnauthenticated:t}=oe(),{openSettings:c}=ls(),a=Me(),[u]=x.useState(()=>{const r=ze.getCookie(Fe.Workspace);return typeof r=="string"&&r!==Te}),i=G(),{store:l,actions:f}=Q(),h=l(r=>r.mode),[d,g]=x.useState(!0);if(x.useEffect(()=>{g(!1)},[]),!s&&d||u&&n)return null;const o=t?e.jsx(Ms,{}):e.jsx(Ns,{onClickSettings:()=>c()});return e.jsxs(R,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[o,a.get("include_floating_state",!1)&&e.jsx("div",{className:S.togglePinWrapper,children:e.jsx(he,{tooltipSideOffset:14,className:S.pinSidebarAction,icon:e.jsx(ds,{}),onActivate:r=>{r.preventDefault(),r.persist(),D.togglePinSidebar(r,f,h===_.Floating?_.Pinned:_.Floating)},label:h===_.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:P.FloatingOrPinned})})]})}function Bs(){return e.jsx(R,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(zs,{})})}function Hs(){return e.jsxs(ms,{className:y(S.screenTrailingBarContainer),children:[e.jsx(us,{}),e.jsx(Bs,{}),e.jsx(Rs,{})]})}function Us({onNewThread:s}){const n=G(),t=we(),{clientThreadId:c}=L(),a=xs(c),u=a?fs(a):void 0,i=u?ce(u):void 0,l=re(u?.gizmo.id),f=n.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return e.jsx(A,{label:f,children:e.jsx(ae,{to:i??"/",onClick:async h=>{h.preventDefault(),!l&&i!=null?hs(t,i):s()},tabIndex:-1,children:e.jsx(gs,{icon:e.jsx(le,{className:S.sidebarIcon}),className:S.searchAction,label:f,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const Ds=K(()=>V(()=>import("./kj6bxl38i2oi019p.js"),__vite__mapDeps([10,1,2,5,6,11,12,13])).then(s=>s.FannyPackIconButton));function Ws({onNewThread:s}){const n=G(),t=x.useRef(null),{store:c,actions:a}=Q(),u=c(m=>m.isSidebarOpen),i=c(m=>m.mode),{isSidebarFlyoutOpen:l}=Z(),f=l(p.Conversation),h=l(p.Gizmo),d=l(p.Snorlax),g=u&&!f&&!h&&!d;function o(){ge(t.current)&&document.getElementById(P.OpenOrClosed)?.click()}ps({checkElement:m=>m?.tagName==="NAV",enabled:g,onLightDismiss:o});const{isFannyPackEnabled:r}=bs();return Oe(),e.jsxs(e.Fragment,{children:[e.jsx(R,{type:"primary",className:y(S.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(he,{className:y(S.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:m=>{D.closeSidebar(m,a,i)},onActivate:m=>{D.closeSidebar(m,a,i)},icon:e.jsxs(e.Fragment,{children:[e.jsx(Ss,{className:y(S.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(vs,{className:y(S.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(Ks.closeSidebar),htmlFor:P.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,r&&e.jsx(js,{children:e.jsx(Ds,{className:S.searchAction,icon:e.jsx(ys,{className:S.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx(Us,{onNewThread:s})]})]})}),e.jsx(R,{type:"primary",className:S.bucketBar,disableSizeTracking:!0,children:" "})]})}const Ks=ne({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function $s(){const{clientThreadId:s,onNewThread:n}=L(),[t,c]=x.useState(!1),[a,u]=x.useState(!1),[i,l]=x.useState(!1),{store:f}=Q(),h=x.useCallback(o=>o===p.Conversation?t:o===p.Gizmo?a:o===p.Snorlax?i:!1,[t,a,i]),d=x.useCallback((o,r)=>{const m=b=>{o===p.Conversation?c(b):o===p.Gizmo?u(b):o===p.Snorlax&&l(b)};r?m(!0):setTimeout(()=>{m(!1)},100)},[]),g=x.useRef(null);return Os((o,r)=>{d(p.Conversation,!1),d(p.Gizmo,!1),d(p.Snorlax,!1);const m=window.matchMedia("(max-width: 700px)").matches,b=ge(g.current);r!=null&&m&&f.getState().isSidebarOpen&&(f.getState().mode===_.Floating||b)&&setTimeout(()=>{document.getElementById(P.OpenOrClosed)?.click()},100)}),e.jsxs(ks,{value:{isSidebarFlyoutOpen:h,onSidebarFlyoutOpenChange:d},children:[e.jsx(Cs,{}),e.jsx(Is,{anchor:"vertical",className:y(S.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Ws,{onNewThread:n}),ref:g,trackLeading:!0,trailing:e.jsx(Hs,{}),children:e.jsx(Ps,{clientThreadId:s})})]})}export{$s as C,ws as G,ve as a};
//# sourceMappingURL=dx6q6oryvvz8ohda.js.map
