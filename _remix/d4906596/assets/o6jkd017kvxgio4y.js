const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/hxcosmbs90bruiip.js","assets/i02hakaw1yz2cb0w.js","assets/oolxnb4itrwnjqyf.js","assets/root-nervg1nc.css","assets/ckygyr7dh5h6j13j.js","assets/conversation-small-kig9eefw.css","assets/joa8jajuiu4xqpzn.js"])))=>i.map(i=>d[i]);
import{r as u,n as je,G as Ee,l as t,t as R,q as L,b7 as De,s as O,V as Ie,a1 as ne,X as F,m as Y,$ as V,aK as oe,bg as Pe,ab as ke,P as Me,d as Re,aD as Te,aE as _e,a as Ae,M as Ne,aZ as Ve,D as Le}from"./i02hakaw1yz2cb0w.js";import{F as Be}from"./bvnegg9ila9t0odf.js";import{h7 as Oe,h8 as Fe,h9 as se,ha as re,hb as Ke,hc as He,bW as B,P as ze,Y as We,c as Ue,cJ as Ge,a8 as Xe,aJ as Ye,hd as $e,dC as qe,r as Z,t as Q,dg as Je,fz as Ze,bX as ae,dk as Qe,he as et}from"./ckygyr7dh5h6j13j.js";import{d as tt,g as ie,s as nt,u as ot}from"./ka7sgnkfyonnm8ae.js";import{i as st}from"./lh3mwfkwfhlv441f.js";import{T as rt,j as at,C as it}from"./fy32gsgjnvmziir1.js";import{p as ct,b as ce,a as lt,a3 as dt,H as ut,D as mt}from"./oolxnb4itrwnjqyf.js";import{m as le}from"./j1601v2ihcbk1gfj.js";import"./b265g6ovy2qnenwi.js";import"./mv65vi40bwx8cy8n.js";import"./b7ag3k9iwm4mxpe7.js";import"./kbm7816v821c2spk.js";import"./oap30ledw1k6is17.js";import"./fo1cpvmyviez6pdv.js";import"./excg0x3sj06exybp.js";import"./j8pudfjo9hou5kw0.js";import"./bbilryt45cr5lkmt.js";import"./cpdqbxpekjursyhj.js";import"./lkrzcvycbw3wllbo.js";import"./j3lsriwrfmutmze6.js";import"./cw5lmig55hzmscts.js";import"./olnc3xl0j433b5ye.js";import"./ggngldwzadhac7xs.js";import"./i13uw1x5yijtp8f3.js";import"./nq860i125dfat6cp.js";import"./mvklc9o1473kp30d.js";import"./hv7xf55q4xjiqsmg.js";import"./lznvc95l0hqf1fjq.js";import"./ivu7qbqshu9eraoy.js";import"./i3dpv1f5ihn6o9pd.js";import"./ik0ionco6fs5t3nh.js";import"./j454liecuca977s7.js";import"./jt6caoufusqh0ntv.js";import"./d5wegs5kxh8gy0hw.js";import"./jppq1up0yxybe7ed.js";function ft(){const[e,n]=u.useState({undoStack:[],currentIndex:-1});function s(o){n(c=>({undoStack:[...c.undoStack.slice(0,c.currentIndex+1),o],currentIndex:c.currentIndex+1}))}function r(){n(o=>({undoStack:o.undoStack,currentIndex:Math.max(o.currentIndex-1,-1)}))}function a(){n(o=>({undoStack:o.undoStack,currentIndex:Math.min(o.currentIndex+1,o.undoStack.length-1)}))}function i(){n({undoStack:[],currentIndex:-1})}return{currentDrawnShape:e.undoStack.length>0?e.undoStack[e.currentIndex]:null,onNewDrawnShape:s,canUndoDrawing:e.currentIndex>=0,undoDrawing:r,canRedoDrawing:e.currentIndex<e.undoStack.length-1,redoDrawing:a,clearAllDrawings:i}}var de=["PageUp","PageDown"],ue=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],me={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},T="Slider",[U,gt,pt]=Oe(T),[fe,En]=je(T,[pt]),[ht,K]=fe(T),ge=u.forwardRef((e,n)=>{const{name:s,min:r=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:g=[r],value:f,onValueChange:d=()=>{},onValueCommit:m=()=>{},inverted:p=!1,form:C,...x}=e,S=u.useRef(new Set),h=u.useRef(0),v=o==="horizontal"?xt:St,[w=[],b]=Ee({prop:f,defaultProp:g,onChange:y=>{[...S.current][h.current]?.focus(),d(y)}}),I=u.useRef(w);function _(y){const P=yt(w,y);A(y,P)}function H(y){A(y,h.current)}function ye(){const y=I.current[h.current];w[h.current]!==y&&m(w)}function A(y,P,{commit:z}={commit:!1}){const q=It(i),W=Pt(Math.round((y-r)/i)*i+r,q),N=se(W,[r,a]);b((M=[])=>{const k=bt(M,N,P);if(Dt(k,l*i)){h.current=k.indexOf(N);const J=String(k)!==String(M);return J&&z&&m(k),J?k:M}else return M})}return t.jsx(ht,{scope:e.__scopeSlider,name:s,disabled:c,min:r,max:a,valueIndexToChangeRef:h,thumbs:S.current,values:w,orientation:o,form:C,children:t.jsx(U.Provider,{scope:e.__scopeSlider,children:t.jsx(U.Slot,{scope:e.__scopeSlider,children:t.jsx(v,{"aria-disabled":c,"data-disabled":c?"":void 0,...x,ref:n,onPointerDown:R(x.onPointerDown,()=>{c||(I.current=w)}),min:r,max:a,inverted:p,onSlideStart:c?void 0:_,onSlideMove:c?void 0:H,onSlideEnd:c?void 0:ye,onHomeKeyDown:()=>!c&&A(r,0,{commit:!0}),onEndKeyDown:()=>!c&&A(a,w.length-1,{commit:!0}),onStepKeyDown:({event:y,direction:P})=>{if(!c){const W=de.includes(y.key)||y.shiftKey&&ue.includes(y.key)?10:1,N=h.current,M=w[N],k=i*W*P;A(M+k,N,{commit:!0})}}})})})})});ge.displayName=T;var[pe,he]=fe(T,{startEdge:"left",endEdge:"right",size:"width",direction:1}),xt=u.forwardRef((e,n)=>{const{min:s,max:r,dir:a,inverted:i,onSlideStart:o,onSlideMove:c,onSlideEnd:l,onStepKeyDown:g,...f}=e,[d,m]=u.useState(null),p=L(n,v=>m(v)),C=u.useRef(),x=De(a),S=x==="ltr",h=S&&!i||!S&&i;function E(v){const w=C.current||d.getBoundingClientRect(),b=[0,w.width],_=$(b,h?[s,r]:[r,s]);return C.current=w,_(v-w.left)}return t.jsx(pe,{scope:e.__scopeSlider,startEdge:h?"left":"right",endEdge:h?"right":"left",direction:h?1:-1,size:"width",children:t.jsx(xe,{dir:x,"data-orientation":"horizontal",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const w=E(v.clientX);o?.(w)},onSlideMove:v=>{const w=E(v.clientX);c?.(w)},onSlideEnd:()=>{C.current=void 0,l?.()},onStepKeyDown:v=>{const b=me[h?"from-left":"from-right"].includes(v.key);g?.({event:v,direction:b?-1:1})}})})}),St=u.forwardRef((e,n)=>{const{min:s,max:r,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:c,onStepKeyDown:l,...g}=e,f=u.useRef(null),d=L(n,f),m=u.useRef(),p=!a;function C(x){const S=m.current||f.current.getBoundingClientRect(),h=[0,S.height],v=$(h,p?[r,s]:[s,r]);return m.current=S,v(x-S.top)}return t.jsx(pe,{scope:e.__scopeSlider,startEdge:p?"bottom":"top",endEdge:p?"top":"bottom",size:"height",direction:p?1:-1,children:t.jsx(xe,{"data-orientation":"vertical",...g,ref:d,style:{...g.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const S=C(x.clientY);i?.(S)},onSlideMove:x=>{const S=C(x.clientY);o?.(S)},onSlideEnd:()=>{m.current=void 0,c?.()},onStepKeyDown:x=>{const h=me[p?"from-bottom":"from-top"].includes(x.key);l?.({event:x,direction:h?-1:1})}})})}),xe=u.forwardRef((e,n)=>{const{__scopeSlider:s,onSlideStart:r,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:c,onStepKeyDown:l,...g}=e,f=K(T,s);return t.jsx(O.span,{...g,ref:n,onKeyDown:R(e.onKeyDown,d=>{d.key==="Home"?(o(d),d.preventDefault()):d.key==="End"?(c(d),d.preventDefault()):de.concat(ue).includes(d.key)&&(l(d),d.preventDefault())}),onPointerDown:R(e.onPointerDown,d=>{const m=d.target;m.setPointerCapture(d.pointerId),d.preventDefault(),f.thumbs.has(m)?m.focus():r(d)}),onPointerMove:R(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&a(d)}),onPointerUp:R(e.onPointerUp,d=>{const m=d.target;m.hasPointerCapture(d.pointerId)&&(m.releasePointerCapture(d.pointerId),i(d))})})}),Se="SliderTrack",ve=u.forwardRef((e,n)=>{const{__scopeSlider:s,...r}=e,a=K(Se,s);return t.jsx(O.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...r,ref:n})});ve.displayName=Se;var G="SliderRange",we=u.forwardRef((e,n)=>{const{__scopeSlider:s,...r}=e,a=K(G,s),i=he(G,s),o=u.useRef(null),c=L(n,o),l=a.values.length,g=a.values.map(m=>Ce(m,a.min,a.max)),f=l>1?Math.min(...g):0,d=100-Math.max(...g);return t.jsx(O.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...r,ref:c,style:{...e.style,[i.startEdge]:f+"%",[i.endEdge]:d+"%"}})});we.displayName=G;var X="SliderThumb",be=u.forwardRef((e,n)=>{const s=gt(e.__scopeSlider),[r,a]=u.useState(null),i=L(n,c=>a(c)),o=u.useMemo(()=>r?s().findIndex(c=>c.ref.current===r):-1,[s,r]);return t.jsx(vt,{...e,ref:i,index:o})}),vt=u.forwardRef((e,n)=>{const{__scopeSlider:s,index:r,name:a,...i}=e,o=K(X,s),c=he(X,s),[l,g]=u.useState(null),f=L(n,E=>g(E)),d=l?o.form||!!l.closest("form"):!0,m=Ie(l),p=o.values[r],C=p===void 0?0:Ce(p,o.min,o.max),x=Ct(r,o.values.length),S=m?.[c.size],h=S?jt(S,C,c.direction):0;return u.useEffect(()=>{if(l)return o.thumbs.add(l),()=>{o.thumbs.delete(l)}},[l,o.thumbs]),t.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${C}% + ${h}px)`},children:[t.jsx(U.ItemSlot,{scope:e.__scopeSlider,children:t.jsx(O.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":o.min,"aria-valuenow":p,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:f,style:p===void 0?{display:"none"}:e.style,onFocus:R(e.onFocus,()=>{o.valueIndexToChangeRef.current=r})})}),d&&t.jsx(wt,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:p},r)]})});be.displayName=X;var wt=e=>{const{value:n,...s}=e,r=u.useRef(null),a=Fe(n);return u.useEffect(()=>{const i=r.current,o=window.HTMLInputElement.prototype,l=Object.getOwnPropertyDescriptor(o,"value").set;if(a!==n&&l){const g=new Event("input",{bubbles:!0});l.call(i,n),i.dispatchEvent(g)}},[a,n]),t.jsx("input",{style:{display:"none"},...s,ref:r,defaultValue:n})};function bt(e=[],n,s){const r=[...e];return r[s]=n,r.sort((a,i)=>a-i)}function Ce(e,n,s){const i=100/(s-n)*(e-n);return se(i,[0,100])}function Ct(e,n){return n>2?`Value ${e+1} of ${n}`:n===2?["Minimum","Maximum"][e]:void 0}function yt(e,n){if(e.length===1)return 0;const s=e.map(a=>Math.abs(a-n)),r=Math.min(...s);return s.indexOf(r)}function jt(e,n,s){const r=e/2,i=$([0,50],[0,r]);return(r-i(n)*s)*s}function Et(e){return e.slice(0,-1).map((n,s)=>e[s+1]-n)}function Dt(e,n){if(n>0){const s=Et(e);return Math.min(...s)>=n}return!0}function $(e,n){return s=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const r=(n[1]-n[0])/(e[1]-e[0]);return n[0]+r*(s-e[0])}}function It(e){return(String(e).split(".")[1]||"").length}function Pt(e,n){const s=Math.pow(10,n);return Math.round(e*s)/s}var kt=ge,Mt=ve,Rt=we,Tt=be,j=(e=>(e[e.Default=0]="Default",e[e.Inpaint=1]="Inpaint",e))(j||{});function _t({imageAsset:e,mode:n,setMode:s,clientThreadId:r,messageId:a,cursorWidth:i,setCursorWidth:o,inpaintingDrawingState:c,isLoadingNewImage:l}){const g=rt.getServerThreadId(r),{canUndoDrawing:f,undoDrawing:d,canRedoDrawing:m,redoDrawing:p,clearAllDrawings:C}=c,x=F();return t.jsxs(le.div,{className:"flex h-16 w-full justify-between px-4",...re,children:[t.jsx("div",{className:"flex items-center",children:n===j.Inpaint&&t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:Y("flex items-center gap-3",l&&"opacity-50"),children:[t.jsx(te,{className:"h-[11px] w-[11px]"}),t.jsxs(kt,{className:"relative flex w-[90px] items-center",min:32,max:240,step:.01,value:[i],onValueChange:S=>o(S[0]),disabled:l,children:[t.jsx(Mt,{className:"relative h-[2px] grow bg-token-text-quaternary",children:t.jsx(Rt,{className:"absolute h-full bg-token-text-secondary"})}),t.jsx(Tt,{className:"block h-[11px] w-[11px] rounded-full bg-token-text-secondary"})]}),t.jsx(te,{className:"h-6 w-6"})]}),t.jsx(ee,{}),t.jsx(D,{disabled:!f||l,onClick:d,children:t.jsx(Ke,{})}),t.jsx(D,{disabled:!m||l,onClick:p,children:t.jsx(He,{})}),t.jsx(ee,{}),t.jsx(D,{disabled:!f||l,onClick:C,children:t.jsx(V,{id:"imageEditorControls.clearSelectionButtonLabel",defaultMessage:"Clear selection"})})]})}),t.jsx("div",{className:"flex items-center",children:n===j.Inpaint?t.jsx(D,{onClick:()=>s(j.Default),disabled:l,children:t.jsx(V,{id:"imageEditorControls.cancelButtonLabel",defaultMessage:"Cancel"})}):t.jsxs(t.Fragment,{children:[t.jsx(Nt,{imageAsset:e,setMode:s,messageId:a,serverThreadId:g}),t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.downloadButtonTooltip",defaultMessage:"Save"}),onClick:()=>tt(e,g,a),children:t.jsx(ct,{})}),t.jsx(At,{prompt:ie(e),children:t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.promptButtonTooltip",defaultMessage:"Prompt"}),children:t.jsx(ce,{})})}),t.jsx(D,{tooltip:x.formatMessage({id:"imageEditorControls.closeButtonTooltip",defaultMessage:"Close"}),onClick:B.close,children:t.jsx(lt,{className:"icon-lg"})})]})})]})}function At({prompt:e,children:n}){const[s,r]=u.useState(!1),a=F(),i=oe();return t.jsx(ze,{sideOffset:4,alignAgainstAnchor:"end",triggerButton:t.jsx("div",{className:"group",children:n}),className:"z-10",size:"none",children:t.jsxs("div",{className:"flex max-w-sm flex-col gap-3 p-4",children:[t.jsx("div",{className:"text-token-text-secondary",children:t.jsx(V,{id:"imageEditorControls.promptPopoverLabel",defaultMessage:"Prompt"})}),t.jsx("div",{children:e}),t.jsx("div",{children:t.jsx(Pe,{color:"secondary",disabled:s,onClick:o=>{r(!0),We(e,i,o),setTimeout(()=>r(!1),2e3)},icon:dt,children:s?a.formatMessage({id:"imageEditorControls.copiedButtonLabel",defaultMessage:"Copied!"}):a.formatMessage({id:"imageEditorControls.copyButtonLabel",defaultMessage:"Copy"})})})]})})}function D({children:e,tooltip:n,disabled:s,onClick:r}){const a=t.jsx("button",{className:Y("rounded p-2 font-semibold hover:bg-token-main-surface-tertiary group-radix-state-open:bg-token-main-surface-tertiary",s?"text-token-text-quaternary":"text-token-text-secondary"),disabled:s,onClick:r,children:e});return n!=null?t.jsx(Ue,{label:n,sideOffset:4,children:a}):a}function Nt({imageAsset:e,setMode:n,messageId:s,serverThreadId:r,disabled:a}){const i=F(),o=Ge(Xe.DalleEditingOnboarding),c=o.eligible&&!o.isLoading,l=t.jsx(D,{tooltip:c?void 0:i.formatMessage({id:"imageEditorControls.inpaintButtonTooltip",defaultMessage:"Select"}),onClick:()=>{n(j.Inpaint),ke.logEvent("chatgpt_dalle_inpaint_click",null,{sourceOperation:e.metadata?.dalle?.edit_op??"none",hasParent:e.metadata?.dalle?.parent_gen_id!=null?"true":"false"}),Me.logEvent(Re.dalleImageClickInpaint,{conversationId:r,messageId:s,generationId:e.metadata?.dalle?.gen_id,fileId:Ye(e.asset_pointer),parentGenerationId:e.metadata?.dalle?.parent_gen_id,sourceOperation:e.metadata?.dalle?.edit_op})},disabled:a,children:t.jsx($e,{})});return c?t.jsx(qe,{show:!0,side:"bottom",sideOffset:0,title:i.formatMessage({id:"imageEditorNUX.title",defaultMessage:"Select area of the image to edit"}),description:i.formatMessage({id:"imageEditorNUX.description",defaultMessage:"Highlight the area and describe changes in chat."}),onDismiss:o.markAsViewed,children:t.jsx("div",{children:l})}):l}const ee=ne.div`mx-3 w-[1px] h-6 bg-token-border-light`,te=ne.div`rounded-full border-2 border-token-text-secondary`;function Vt({mode:e,imageIndex:n,allImages:s,onSwitchImage:r,isLoadingNewImage:a}){const i=n>0,o=u.useCallback(()=>{i&&r(s[n-1])},[i,s,n,r]),c=n<s.length-1,l=u.useCallback(()=>{c&&r(s[n+1])},[c,s,n,r]);return u.useEffect(()=>{function g(f){f.target instanceof HTMLTextAreaElement||e===j.Default&&(f.key==="ArrowLeft"?o():f.key==="ArrowRight"&&l())}return document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}},[e,o,l]),t.jsx("div",{className:"flex h-16 w-full items-center justify-center gap-3 font-semibold text-token-text-secondary",children:e===j.Inpaint?!a&&t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx(V,{id:"imageEditor.selectArea",defaultMessage:"Select an area to edit"}),t.jsx("a",{href:"https://help.openai.com/en/articles/9055440",target:"_blank",rel:"noreferrer",children:t.jsx(ce,{className:"icon-md"})})]}):s.length>1?t.jsxs(t.Fragment,{children:[t.jsx("button",{disabled:!i,className:"disabled:text-token-text-tertiary",onClick:o,children:t.jsx(ut,{className:"icon-lg"})}),t.jsx("div",{children:t.jsx(V,{id:"imageEditor.imageNumber",defaultMessage:"Image {num} of {numImages}",values:{num:n+1,numImages:s.length}})}),t.jsx("button",{disabled:!c,className:"disabled:text-token-text-tertiary",onClick:l,children:t.jsx(mt,{className:"icon-lg"})})]}):null})}const Lt=0,Bt=64;function Ot({imageAsset:e,children:n,containerDimensions:s,isLoadingNewImage:r}){return t.jsxs(le.div,{className:"absolute",style:Ft(e,s),...re,children:[n,t.jsx("div",{className:Y("absolute inset-0 flex items-center justify-center bg-token-main-surface-primary transition-opacity duration-1000",r?"pointer-events-auto opacity-60":"pointer-events-none opacity-0")})]})}function Ft(e,n){const{width:s,height:r}=e,{width:a,height:i}=n,o=a-2*Lt,c=i-2*Bt,l=s/r,g=o/c,f=l>g,d=f?o:c*l,m=f?o/l:c,p=(i-m)/2,C=(a-d)/2;return{top:p,left:C,width:d,height:m}}const Kt=Te(()=>_e(()=>import("./hxcosmbs90bruiip.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>e.DynamicDrawingCanvas));function Dn({clientThreadId:e,messageId:n,image:s,allImages:r}){const a=at(e),i=it(e,a),o=i?.messages[i.messages.length-1],c=o!=null&&Z(o.message)===Q.Dalle&&!st(o.message),l=Ae();return u.useEffect(()=>{async function g(f,d){try{const m=await et(l,f);B.setFocusedObject({type:ae.Image,image:m[0],allImages:m,messageId:d})}catch(m){Le.addError(new Error("Failed to load newly created images:",{cause:m}))}}if(o!=null&&Z(o.message)===Q.DalleTool&&o.message.content.content_type===Ne.MultimodalText){const f=Je.getImageAssetPointers(o.message);g(f,o.message.id)}},[l,o]),t.jsx(Ht,{image:s,allImages:r,isLoadingNewImage:c,clientThreadId:e,messageId:n})}function Ht({image:e,allImages:n,isLoadingNewImage:s,clientThreadId:r,messageId:a}){const[i,o]=u.useState(j.Default),[c,l]=u.useState({width:window.innerWidth-Be,height:window.innerHeight}),g=u.useRef(null),[f,d]=u.useState(136),m=ft(),{currentDrawnShape:p,onNewDrawnShape:C,clearAllDrawings:x}=m,S=u.useRef(null),h=F(),E=oe(),{setTargetedContent:v}=Ze();u.useEffect(()=>{const b=new ResizeObserver(I=>{const{width:_,height:H}=I[0].contentRect;l({width:_,height:H})});return g.current&&b.observe(g.current),()=>{b.disconnect()}},[]),u.useEffect(()=>{function b(I){I.key==="Escape"&&(i===j.Inpaint?o(j.Default):B.close())}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[i]),u.useEffect(()=>(p==null?v({type:"object",placeholderTextOverride:Ve({id:"imageEditor.transformationTextareaPlaceholder",defaultMessage:"Edit imageâ€¦"}),shouldPersistAcrossMessages:!0,isFocusedViewContent:!0,createNewCompletionParams:b=>nt(b,e)}):v({type:"object",label:h.formatMessage({id:"imageEditor.inpaintingTargetedContentLabel",defaultMessage:"Edit selection"}),isFocusedViewContent:!0,createNewCompletionParams:async b=>await ot(b,e,S.current?.getImageData(),h,E),onCleared:()=>o(j.Default)}),()=>{v(void 0)}),[e,h,v,p,E]),u.useEffect(()=>{i!==j.Inpaint&&x()},[i]),u.useEffect(()=>{o(j.Default)},[e]);const w=n.findIndex(b=>b.asset_pointer===e.asset_pointer);return t.jsxs("div",{ref:g,className:"flex h-full w-full flex-col justify-between",children:[t.jsx(_t,{imageAsset:e,mode:i,setMode:o,clientThreadId:r,messageId:a,cursorWidth:f,setCursorWidth:d,inpaintingDrawingState:m,isLoadingNewImage:s}),t.jsx(Vt,{mode:i,imageIndex:w,allImages:n,onSwitchImage:b=>{B.setFocusedObject({type:ae.Image,image:b,allImages:n,messageId:a})},isLoadingNewImage:s}),t.jsxs(Ot,{imageAsset:e,containerDimensions:c,isLoadingNewImage:s,children:[t.jsx(Qe,{className:"h-full w-full",alt:ie(e),src:e.url,width:e.width,height:e.height,fadeIn:!1}),i===j.Inpaint&&t.jsx("div",{className:"absolute inset-0",children:t.jsx(Kt,{drawingCanvasRef:S,color:"rgba(0, 122, 255, 0.5)",dashedOutlineColor:"rgba(255, 255, 255, 0.65)",cursorWidth:f,canvasWidth:e.width,canvasHeight:e.height,currentDrawnShape:p,onNewDrawnShape:C})})]})]})}export{Dn as ImageEditor};
//# sourceMappingURL=o6jkd017kvxgio4y.js.map
