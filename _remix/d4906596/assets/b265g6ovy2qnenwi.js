const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-lq90weam9rkef6z5.js","assets/i02hakaw1yz2cb0w.js","assets/oolxnb4itrwnjqyf.js","assets/root-nervg1nc.css","assets/lh3mwfkwfhlv441f.js","assets/ckygyr7dh5h6j13j.js","assets/conversation-small-kig9eefw.css","assets/d5wegs5kxh8gy0hw.js","assets/j1601v2ihcbk1gfj.js","assets/i3dpv1f5ihn6o9pd.js","assets/mv65vi40bwx8cy8n.js","assets/fy32gsgjnvmziir1.js","assets/jppq1up0yxybe7ed.js","assets/cpdqbxpekjursyhj.js","assets/lznvc95l0hqf1fjq.js","assets/bbilryt45cr5lkmt.js","assets/oz8d7a4eoxr25euk.js","assets/e9nh0er53nz1ibdu.js","assets/em0e1b5qy7n33g13.js","assets/jws76agumgi0qld5.js","assets/fkfnxayydbk11gws.js","assets/ml41u5f671z991va.js","assets/eginmiob9261bnme.js","assets/itghwucfyv5ciib7.js","assets/ou533f5kifw7pz5n.js","assets/ir4pz6oddwty2j1i.js","assets/g9mbtdwwmshmbrhh.js","assets/983a0dy92b3ronpv.js","assets/j454liecuca977s7.js","assets/gb58vwj0wkog1jaj.js","assets/kqwdyvkaaavvn8k3.js","assets/9ywqh484tgaq373j.js","assets/k2f9zl7dmz7cv8qi.js","assets/gixvnghcj26yqn96.js","assets/fo1cpvmyviez6pdv.js","assets/gz2gws2rfjzup3rk.js","assets/nhwwej1nq0zrd7sc.js","assets/fwcd2zrlqt3fb5o3.js","assets/dzyfslg6ca5spzyz.js","assets/j8pudfjo9hou5kw0.js","assets/kbm7816v821c2spk.js","assets/hv7xf55q4xjiqsmg.js","assets/ew7ir3izl8xriyif.js","assets/mvklc9o1473kp30d.js","assets/inkxo49vrft9nkd7.js","assets/hywab3n921arpg9j.js","assets/b7ag3k9iwm4mxpe7.js","assets/c9z0ph27mogsdbcf.js","assets/6c6p7pu97r7646ya.js","assets/my6ipl7skwmkfbi5.js","assets/iej0cupg2dqkmejt.js","assets/k0hskw2cgf15wwtx.js","assets/hwciq4j17njryqqf.js","assets/jk8w36bsokizpx57.js","assets/ik0ionco6fs5t3nh.js","assets/sool78c33xhsg9ex.js","assets/e71tbmvlvbrpyuoa.js","assets/j3lsriwrfmutmze6.js","assets/dxoe7bmzgccf01wt.js","assets/bq6eevietautnuo7.js","assets/swiper-kmk1dd5x.css"])))=>i.map(i=>d[i]);
import{bm as He,u as ln,r as l,b as un,l as n,R as dn,fm as ft,a9 as pt,X as Q,fn as mn,fo as be,fp as fn,fq as gt,fr as Fe,fs as Oe,ft as pn,bj as ne,bz as gn,fu as xn,fv as vn,fw as hn,eC as bn,a2 as oe,Y as Mn,Z as In,$ as T,a0 as Te,a1 as pe,m as je,cl as yn,aN as X,bH as ge,P as O,d as L,aA as Cn,aD as xt,aE as vt,a as ht,bl as ke,aK as Sn,ca as Tn,c8 as jn,a$ as ye,bI as bt,ab as me,b_ as Mt,bD as It,cm as yt,ae as kn,e8 as En,e9 as Pn,bn as Ce,bZ as wn,Q as Ct,bg as We}from"./i02hakaw1yz2cb0w.js";import{ig as An,ih as Fn,ii as On,ij as Rn,ik as _n,il as St,cE as Nn,im as Dn,io as Bn,ip as Wn,fA as Ze,iq as $n,ir as Ln,is as Un,it as Hn,iu as Me,iv as Vn,iw as Gn,ix as qn,iy as zn,iz as Qn,iA as Kn,iB as xe,iC as et,iD as Yn,iE as Ie,iF as Xn,iG as Jn,iH as tt,dx as Zn,fB as es,fE as ts,iI as ns,iJ as ss,iK as Tt,iL as Ve,aq as Ge,D as P,fL as os,iM as as,iN as jt,c as re,N as Ee,iO as rs,bf as se,aT as D,iP as kt,aM as nt,aN as ie,aO as Pe,aY as is,bn as cs,bo as ls,a$ as us,b0 as Et,b1 as Se,b2 as ce,be as ds,bp as N,iQ as W,bq as ms,b3 as fs,b4 as ps,b5 as gs,b7 as Pt,b6 as xs,aQ as vs,bb as hs,bc as bs,bg as Ms,bh as Is,iR as ys,iS as Cs,iT as Ss,iU as Ts,bj as st,iV as wt,bk as js,bd as ks,bm as Es,iW as Ps,iX as ws,iY as As,iZ as At,i_ as Fs,i$ as Os,j0 as Re,j1 as Rs,aF as _s,aD as ae,cN as Ns,cM as Ds,Z as H,f9 as Bs,E as qe,v as Ft,aG as ze,d as Ws,hf as Qe,cO as Ot,cg as $s,ch as ot,y as Rt,j2 as Ls,bI as Us,j3 as Hs,b$ as Vs,j4 as Gs,u as qs,X as zs,aC as _t,bL as Nt,w as Qs,x as Ks}from"./ckygyr7dh5h6j13j.js";import{r as Ys,L as Dt,K as Xs,u as Js}from"./mv65vi40bwx8cy8n.js";import{T as $e,j as Zs,r as eo,B as to,d as no}from"./fy32gsgjnvmziir1.js";import{v as Ke,an as so,bF as Bt,ae as Wt,aU as oo,I as ao,r as ro,S as io,M as co,q as lo,b2 as $t,bp as Lt,bv as Ut,bG as Ht,L as uo,bq as mo,b0 as fo,b8 as at,af as po,Z as go}from"./oolxnb4itrwnjqyf.js";import{a as Vt,b as Gt}from"./b7ag3k9iwm4mxpe7.js";import{A as xo}from"./oap30ledw1k6is17.js";const vo=()=>{const{value:e}=He("44045625");return e},Za=()=>{const{value:e}=He("3700195277");return e||!1},Ye=e=>{const t=Ys(e);return vo()&&!!t?.includes("canmore")},ho=e=>un.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),bo=async e=>{const t=await ho(e),s=new Map(t?.map(r=>[r.id,r])),o=[];for(const{id:r,content:i,version:c,textdoc_type:m,title:f,comments:p}of t)o.push({textdocId:r,messageId:null,type:Rn(m),comments:_n(p,i),title:f,content:i,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(o.map(r=>[r.textdocId,r])),persistedTextdocVersions:o,persistedTextdocById:s}};function Mo({clientThreadId:e,isEnabled:t}){const s=$e.getServerThreadId(e),{data:o,error:a,isLoading:r,isFetching:i,refetch:c}=ln({queryKey:[s,"textdocs"],enabled:!!s&&t,gcTime:0,queryFn:()=>s&&bo(s)});return l.useEffect(()=>{if(!o)return;const{persistedTextdocVersions:m}=o;An(m),Fn(m),On(m)},[o]),[{...o,error:a,isLoading:r,isFetching:i},c]}const qt=St(null),ve=St(null);function le(e=ft){return xe(qt,e)}function Io(e=ft){return xe(ve,e)}function er(){return le(e=>e?.isFetchingFromPersistence)}function tr(){return le(e=>e?.isEnabled)}function zt(){return xe(ve,e=>e?.resolveTempTextdocId)}function nr(){return xe(ve,e=>e?.resolveTempCommentId)}function sr(){return xe(ve,e=>e?.latestTextdocId??null)}function or(e){const t=zt();return le(s=>Tt(s,t??{},e))}function Qt(e){const t=zt();return le(s=>Tt(s,t??{},e)?.metadata??null)}function Kt(){const e=le(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function ar(){return le(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function rr({clientThreadId:e,children:t}){const s=Ye(e),{textdocStore:o,optimisticTextdocStore:a}=yo({clientThreadId:e,isEnabled:s});return n.jsx(ve.Provider,{value:a,children:n.jsx(qt.Provider,{value:o,children:t})})}function yo({clientThreadId:e,isEnabled:t}){const s=Zs(e),o=eo(e,s),a=to(e),r=Nn(a),[{error:i,persistedTextdocVersionById:c,isLoading:m,isFetching:f},p]=Mo({clientThreadId:e,isEnabled:t}),h=Dn(),[d,u]=l.useState(!1),g=Bn(),[x,v]=l.useState(!0);Wn(()=>{if(!t)return;const I=$e.getThreadCurrentLeafId(e),S=$e.getThreadConversationTurns(e,I),B=Ze(S)?.messages??[],F=et(B);if(F==null)return;const _=F.message.metadata?.canvas?.textdoc_id,ee=F.message.metadata?.canvas?.version;_!=null&&ee!=null&&h(_,ee),u(!0),p().finally(()=>u(!1))});const[j,w]=l.useState(c);l.useEffect(()=>{r&&w(c)},[r]);const b=t&&(r||!x||f&&!m&&d),y=Ze(o),A=l.useMemo(()=>{if(!y)return null;const{messages:I}=y,S=$n(I??[],({message:B})=>B.author.role===dn.System),E=S===-1?I:I?.slice(S+1);return b&&E&&Ln(E)?E:null},[b,y]),$=!!A?j:c,C=Un(),k=Hn(),G=l.useMemo(()=>{let I=Yn();return!$||(I=Me(I,S=>{for(const[E,B]of $.entries()){S.allTextdocIdSet[E]=E;const F=g.get(E);let _=F&&(F.versionInt??Ie)>(B.versionInt??Ie)?{...B,...F}:B;const ee=k.filter(z=>z.textdocId===E&&z.kind===Xn.REMOVE_COMMENT);let he=_.versionInt;for(const z of ee)_=Jn(_,z),he=Math.max(he??Ie,z.versionInt??Ie);_={..._,versionInt:he},S.textdocById[E]=void 0,tt(S,_)}}),!C)?I:Me(I,S=>{tt(S,C,!1)})},[$,g,C,k]),V=l.useMemo(()=>Me(G,I=>{I.fetchError=i,I.isFetchingFromPersistence=f}),[G,i,f]),[U,K]=l.useState(Vn),q=l.useMemo(()=>A?.length?Gn(r,G,U,A):null,[A,r,U,G]),J=qn(r,q,v),Z=l.useMemo(()=>J?zn(V,J):V,[V,J]);return l.useEffect(()=>{if(!t)return;const I=Qn(U,o);I&&K(I)},[e,t,o.length]),l.useEffect(()=>{const I=Kn(U,q);I&&K(I)},[q]),{textdocStore:l.useMemo(()=>Me(Z,I=>{I.isEnabled!==t&&(I.isEnabled=t);const S=Zn(o,F=>F.messages),E={},B=es(S);for(let F=B.length-1;F>=0;F--){const _=B[F];if(_.type!==ts.Canmore)continue;const ee=ns(_.messages),z=et(_.messages)?.message.metadata?.canvas?.textdoc_id??ss(S);z&&ee!=null&&!E[z]&&(E[z]=!0,ee.nodeId!==I.lastCanvasAssistantMessageById[z]&&(I.lastCanvasAssistantMessageById[z]=ee.nodeId))}}),[Z,o,t]),optimisticTextdocStore:U}}function Yt(){return Ve(e=>e.focusedObject)}function ir(){const e=Ve(t=>t.focusedObject);return e?.type!==Ge.Textdoc?null:e}function cr(){const e=Ve(t=>t.focusedObject);return e?.type!==Ge.Textdoc?null:e.history??null}function Xt(){return Yt()!=null}function lr(e){const t=Yt();return Io(s=>{if(!e||t?.type!==Ge.Textdoc)return!1;const o=s?.resolveTempTextdocId??{},a=o[t.textdocId]??t.textdocId,r=o[e]??e;return a===r})}const Co=({children:e})=>{const t=Kt();return t?.length?n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"h-10 px-2",children:e}),n.jsx(P.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:t.map(s=>n.jsx(So,{textdocId:s},s))})]}):null},So=({textdocId:e})=>{const t=pt(Qt(e));return n.jsx(P.Item,{icon:Ke,onClick:()=>{os.logButtonClick(as.FILE_DRAWER_ITEM),jt(t.textdocId)},children:t.title})},To=()=>{const e=Q(),t=Kt(),s=Xt();if(!t||s)return null;const o=t.length;return o===1?n.jsx(jo,{textdocId:t[0]}):n.jsx(Co,{children:n.jsx(re,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[n.jsx(Ke,{className:"icon-xl-heavy"}),o]})})})},jo=({textdocId:e})=>{const t=Q(),s=pt(Qt(e));return n.jsx(re,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsx(Ee,{onClick:()=>jt(s.textdocId),icon:Ke})})},ko=({children:e})=>Xt()?null:n.jsx(n.Fragment,{children:e}),Eo=({clientThreadId:e,children:t})=>Ye(e)?n.jsx(ko,{children:t}):t,Jt={...gn},Po=Jt.useInsertionEffect,wo=Po||(e=>e());function Zt(e){const t=l.useRef(()=>{});return wo(()=>{t.current=e}),l.useCallback(function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t.current==null?void 0:t.current(...o)},[])}var Le=typeof document<"u"?l.useLayoutEffect:l.useEffect;let rt=!1,Ao=0;const it=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ao++;function Fo(){const[e,t]=l.useState(()=>rt?it():void 0);return Le(()=>{e==null&&t(it())},[]),l.useEffect(()=>{rt=!0},[]),e}const Oo=Jt.useId,Ro=Oo||Fo;function _o(){const e=new Map;return{emit(t,s){var o;(o=e.get(t))==null||o.forEach(a=>a(s))},on(t,s){e.set(t,[...e.get(t)||[],s])},off(t,s){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(a=>a!==s))||[])}}}const No=l.createContext(null),Do=l.createContext(null),Bo=()=>{var e;return((e=l.useContext(No))==null?void 0:e.id)||null},Wo=()=>l.useContext(Do),$o="data-floating-ui-focusable";function Lo(e){const{open:t=!1,onOpenChange:s,elements:o}=e,a=Ro(),r=l.useRef({}),[i]=l.useState(()=>_o()),c=Bo()!=null,[m,f]=l.useState(o.reference),p=Zt((u,g,x)=>{r.current.openEvent=u?g:void 0,i.emit("openchange",{open:u,event:g,reason:x,nested:c}),s?.(u,g,x)}),h=l.useMemo(()=>({setPositionReference:f}),[]),d=l.useMemo(()=>({reference:m||o.reference||null,floating:o.floating||null,domReference:o.reference}),[m,o.reference,o.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:p,elements:d,events:i,floatingId:a,refs:h}),[t,p,d,i,a,h])}function Uo(e){e===void 0&&(e={});const{nodeId:t}=e,s=Lo({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||s,a=o.elements,[r,i]=l.useState(null),[c,m]=l.useState(null),p=a?.reference||r,h=l.useRef(null),d=Wo();Le(()=>{p&&(h.current=p)},[p]);const u=mn({...e,elements:{...a,...c&&{reference:c}}}),g=l.useCallback(b=>{const y=be(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;m(y),u.refs.setReference(y)},[u.refs]),x=l.useCallback(b=>{(be(b)||b===null)&&(h.current=b,i(b)),(be(u.refs.reference.current)||u.refs.reference.current===null||b!==null&&!be(b))&&u.refs.setReference(b)},[u.refs]),v=l.useMemo(()=>({...u.refs,setReference:x,setPositionReference:g,domReference:h}),[u.refs,x,g]),j=l.useMemo(()=>({...u.elements,domReference:p}),[u.elements,p]),w=l.useMemo(()=>({...u,...o,refs:v,elements:j,nodeId:t}),[u,v,j,t,o]);return Le(()=>{o.dataRef.current.floatingContext=w;const b=d?.nodesRef.current.find(y=>y.id===t);b&&(b.context=w)}),l.useMemo(()=>({...u,context:w,refs:v,elements:j}),[u,v,j,w])}const ct="active",lt="selected";function _e(e,t,s){const o=new Map,a=s==="item";let r=e;if(a&&e){const{[ct]:i,[lt]:c,...m}=e;r=m}return{...s==="floating"&&{tabIndex:-1,[$o]:""},...r,...t.map(i=>{const c=i?i[s]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((i,c)=>(c&&Object.entries(c).forEach(m=>{let[f,p]=m;if(!(a&&[ct,lt].includes(f)))if(f.indexOf("on")===0){if(o.has(f)||o.set(f,[]),typeof p=="function"){var h;(h=o.get(f))==null||h.push(p),i[f]=function(){for(var d,u=arguments.length,g=new Array(u),x=0;x<u;x++)g[x]=arguments[x];return(d=o.get(f))==null?void 0:d.map(v=>v(...g)).find(v=>v!==void 0)}}}else i[f]=p}),i),{})}}function Ho(e){e===void 0&&(e=[]);const t=e.map(c=>c?.reference),s=e.map(c=>c?.floating),o=e.map(c=>c?.item),a=l.useCallback(c=>_e(c,e,"reference"),t),r=l.useCallback(c=>_e(c,e,"floating"),s),i=l.useCallback(c=>_e(c,e,"item"),o);return l.useMemo(()=>({getReferenceProps:a,getFloatingProps:r,getItemProps:i}),[a,r,i])}function ut(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Vo=e=>({name:"inner",options:e,async fn(t){const{listRef:s,overflowRef:o,onFallbackChange:a,offset:r=0,index:i=0,minItemsVisible:c=4,referenceOverflowThreshold:m=0,scrollRef:f,...p}=fn(e,t),{rects:h,elements:{floating:d}}=t,u=s.current[i],g=f?.current||d,x=d.clientTop||g.clientTop,v=d.clientTop!==0,j=g.clientTop!==0,w=d===g;if(!u)return{};const b={...t,...await gt(-u.offsetTop-d.clientTop-h.reference.height/2-u.offsetHeight/2-r).fn(t)},y=await Fe(ut(b,g.scrollHeight+x+d.clientTop),p),A=await Fe(b,{...p,elementContext:"reference"}),R=Oe(0,y.top),$=b.y+R,C=pn(Oe(0,g.scrollHeight+(v&&w||j?x*2:0)-R-Oe(0,y.bottom)));if(g.style.maxHeight=C+"px",g.scrollTop=R,a){const k=g.scrollHeight>g.offsetHeight&&g.offsetHeight<u.offsetHeight*c-1||A.top>=-m||A.bottom>=-m;ne.flushSync(()=>a(k))}return o&&(o.current=await Fe(ut({...b,y:$},g.offsetHeight+x+d.clientTop),p)),{y:$}}});function Go(e,t){const{open:s,elements:o}=e,{enabled:a=!0,overflowRef:r,scrollRef:i,onChange:c}=t,m=Zt(c),f=l.useRef(!1),p=l.useRef(null),h=l.useRef(null);l.useEffect(()=>{if(!a)return;function u(x){if(x.ctrlKey||!g||r.current==null)return;const v=x.deltaY,j=r.current.top>=-.5,w=r.current.bottom>=-.5,b=g.scrollHeight-g.clientHeight,y=v<0?-1:1,A=v<0?"max":"min";g.scrollHeight<=g.clientHeight||(!j&&v>0||!w&&v<0?(x.preventDefault(),ne.flushSync(()=>{m(R=>R+Math[A](v,b*y))})):/firefox/i.test(rs())&&(g.scrollTop+=v))}const g=i?.current||o.floating;if(s&&g)return g.addEventListener("wheel",u),requestAnimationFrame(()=>{p.current=g.scrollTop,r.current!=null&&(h.current={...r.current})}),()=>{p.current=null,h.current=null,g.removeEventListener("wheel",u)}},[a,s,o.floating,r,i,m]);const d=l.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const u=i?.current||o.floating;if(!(!r.current||!u||!f.current)){if(p.current!==null){const g=u.scrollTop-p.current;(r.current.bottom<-.5&&g<-1||r.current.top<-.5&&g>1)&&ne.flushSync(()=>m(x=>x+g))}requestAnimationFrame(()=>{p.current=u.scrollTop})}}}),[o.floating,m,r,i]);return l.useMemo(()=>a?{floating:d}:{},[a,d])}let ue=l.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});ue.displayName="FloatingContext";let Xe=l.createContext(null);Xe.displayName="PlacementContext";function qo(e){return l.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function zo(){return l.useContext(ue).setReference}function Qo(){return l.useContext(ue).getReferenceProps}function Ko(){let{getFloatingProps:e,slot:t}=l.useContext(ue);return l.useCallback((...s)=>Object.assign({},e(...s),{"data-anchor":t.anchor}),[e,t])}function Yo(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=l.useContext(Xe),s=l.useMemo(()=>e,[JSON.stringify(e,(a,r)=>{var i;return(i=r?.outerHTML)!=null?i:r})]);se(()=>{t?.(s??null)},[t,s]);let o=l.useContext(ue);return l.useMemo(()=>[o.setFloating,e?o.styles:{}],[o.setFloating,e,o.styles])}let dt=4;function Xo({children:e,enabled:t=!0}){let[s,o]=l.useState(null),[a,r]=l.useState(0),i=l.useRef(null),[c,m]=l.useState(null);Jo(c);let f=t&&s!==null&&c!==null,{to:p="bottom",gap:h=0,offset:d=0,padding:u=0,inner:g}=Zo(s,c),[x,v="center"]=p.split(" ");se(()=>{f&&r(0)},[f]);let{refs:j,floatingStyles:w,context:b}=Uo({open:f,placement:x==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${x}`:`${x}-${v}`,strategy:"absolute",transform:!1,middleware:[gt({mainAxis:x==="selection"?0:h,crossAxis:d}),xn({padding:u}),x!=="selection"&&vn({padding:u}),x==="selection"&&g?Vo({...g,padding:u,overflowRef:i,offset:a,minItemsVisible:dt,referenceOverflowThreshold:u,onFallbackChange(V){var U,K;if(!V)return;let q=b.elements.floating;if(!q)return;let J=parseFloat(getComputedStyle(q).scrollPaddingBottom)||0,Z=Math.min(dt,q.childElementCount),M=0,I=0;for(let S of(K=(U=b.elements.floating)==null?void 0:U.childNodes)!=null?K:[])if(S instanceof HTMLElement){let E=S.offsetTop,B=E+S.clientHeight+J,F=q.scrollTop,_=F+q.clientHeight;if(E>=F&&B<=_)Z--;else{I=Math.max(0,Math.min(B,_)-Math.max(E,F)),M=S.clientHeight;break}}Z>=1&&r(S=>{let E=M*Z-I+J;return S>=E?S:E})}}):null,hn({padding:u,apply({availableWidth:V,availableHeight:U,elements:K}){Object.assign(K.floating.style,{overflow:"auto",maxWidth:`${V}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${U}px)`})}})].filter(Boolean),whileElementsMounted:bn}),[y=x,A=v]=b.placement.split("-");x==="selection"&&(y="selection");let R=l.useMemo(()=>({anchor:[y,A].filter(Boolean).join(" ")}),[y,A]),$=Go(b,{overflowRef:i,onChange:r}),{getReferenceProps:C,getFloatingProps:k}=Ho([$]),G=D(V=>{m(V),j.setFloating(V)});return l.createElement(Xe.Provider,{value:o},l.createElement(ue.Provider,{value:{setFloating:G,setReference:j.setReference,styles:w,getReferenceProps:C,getFloatingProps:k,slot:R}},e))}function Jo(e){se(()=>{if(!e)return;let t=new MutationObserver(()=>{let s=window.getComputedStyle(e).maxHeight,o=parseFloat(s);if(isNaN(o))return;let a=parseInt(s);isNaN(a)||o!==a&&(e.style.maxHeight=`${Math.ceil(o)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function Zo(e,t){var s,o,a;let r=Ne((s=e?.gap)!=null?s:"var(--anchor-gap, 0)",t),i=Ne((o=e?.offset)!=null?o:"var(--anchor-offset, 0)",t),c=Ne((a=e?.padding)!=null?a:"var(--anchor-padding, 0)",t);return{...e,gap:r,offset:i,padding:c}}function Ne(e,t,s=void 0){let o=kt(),a=D((m,f)=>{if(m==null)return[s,null];if(typeof m=="number")return[m,null];if(typeof m=="string"){if(!f)return[s,null];let p=mt(m,f);return[p,h=>{let d=en(m);{let u=d.map(g=>window.getComputedStyle(f).getPropertyValue(g));o.requestAnimationFrame(function g(){o.nextFrame(g);let x=!1;for(let[j,w]of d.entries()){let b=window.getComputedStyle(f).getPropertyValue(w);if(u[j]!==b){u[j]=b,x=!0;break}}if(!x)return;let v=mt(m,f);p!==v&&(h(v),p=v)})}return o.dispose}]}return[s,null]}),r=l.useMemo(()=>a(e,t)[0],[e,t]),[i=r,c]=l.useState();return se(()=>{let[m,f]=a(e,t);if(c(m),!!f)return f(c)},[e,t]),i}function en(e){let t=/var\((.*)\)/.exec(e);if(t){let s=t[1].indexOf(",");if(s===-1)return[t[1]];let o=t[1].slice(0,s).trim(),a=t[1].slice(s+1).trim();return a?[o,...en(a)]:[o]}return[]}function mt(e,t){let s=document.createElement("div");t.appendChild(s),s.style.setProperty("margin-top","0px","important"),s.style.setProperty("margin-top",e,"important");let o=parseFloat(window.getComputedStyle(s).marginTop)||0;return t.removeChild(s),o}var ea=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ea||{}),ta=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ta||{}),na=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(na||{});function De(e,t=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,o=Rs(t(e.items.slice()),r=>r.dataRef.current.domRef.current),a=s?o.indexOf(s):null;return a===-1&&(a=null),{items:o,activeItemIndex:a}}let sa={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var s,o,a,r,i;if(e.menuState===1)return e;let c={...e,searchQuery:"",activationTrigger:(s=t.trigger)!=null?s:1,__demoMode:!1};if(t.focus===W.Nothing)return{...c,activeItemIndex:null};if(t.focus===W.Specific)return{...c,activeItemIndex:e.items.findIndex(p=>p.id===t.id)};if(t.focus===W.Previous){let p=e.activeItemIndex;if(p!==null){let h=e.items[p].dataRef.current.domRef,d=Re(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});if(d!==null){let u=e.items[d].dataRef.current.domRef;if(((o=h.current)==null?void 0:o.previousElementSibling)===u.current||((a=u.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeItemIndex:d}}}}else if(t.focus===W.Next){let p=e.activeItemIndex;if(p!==null){let h=e.items[p].dataRef.current.domRef,d=Re(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});if(d!==null){let u=e.items[d].dataRef.current.domRef;if(((r=h.current)==null?void 0:r.nextElementSibling)===u.current||((i=u.current)==null?void 0:i.nextElementSibling)===null)return{...c,activeItemIndex:d}}}}let m=De(e),f=Re(t,{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...m,activeItemIndex:f}},3:(e,t)=>{let s=e.searchQuery!==""?0:1,o=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(i=>{var c;return((c=i.dataRef.current.textValue)==null?void 0:c.startsWith(o))&&!i.dataRef.current.disabled}),r=a?e.items.indexOf(a):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let s=De(e,o=>[...o,{id:t.id,dataRef:t.dataRef}]);return{...e,...s}},6:(e,t)=>{let s=De(e,o=>{let a=o.findIndex(r=>r.id===t.id);return a!==-1&&o.splice(a,1),o});return{...e,...s,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},Je=l.createContext(null);Je.displayName="MenuContext";function we(e){let t=l.useContext(Je);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,we),s}return t}function oa(e,t){return Et(t.type,sa,e,t)}let aa=l.Fragment;function ra(e,t){let{__demoMode:s=!1,...o}=e,a=l.useReducer(oa,{__demoMode:s,menuState:s?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsElement:i,buttonElement:c},m]=a,f=Pe(t);is(r===0,[c,i],(u,g)=>{m({type:1}),cs(g,ls.Loose)||(u.preventDefault(),c?.focus())});let p=D(()=>{m({type:1})}),h=l.useMemo(()=>({open:r===0,close:p}),[r,p]),d={ref:f};return oe.createElement(Xo,null,oe.createElement(Je.Provider,{value:a},oe.createElement(us,{value:Et(r,{0:Se.Open,1:Se.Closed})},ce({ourProps:d,theirProps:o,slot:h,defaultTag:aa,name:"Menu"}))))}let ia="button";function ca(e,t){var s;let o=l.useId(),{id:a=`headlessui-menu-button-${o}`,disabled:r=!1,autoFocus:i=!1,...c}=e,[m,f]=we("Menu.Button"),p=Qo(),h=ds(),d=Pe(t,zo(),D(C=>f({type:7,element:C}))),u=D(C=>{switch(C.key){case N.Space:case N.Enter:case N.ArrowDown:C.preventDefault(),C.stopPropagation(),ne.flushSync(()=>f({type:0})),f({type:2,focus:W.First});break;case N.ArrowUp:C.preventDefault(),C.stopPropagation(),ne.flushSync(()=>f({type:0})),f({type:2,focus:W.Last});break}}),g=D(C=>{switch(C.key){case N.Space:C.preventDefault();break}}),x=D(C=>{var k;if(ms(C.currentTarget))return C.preventDefault();r||(m.menuState===0?(ne.flushSync(()=>f({type:1})),(k=m.buttonElement)==null||k.focus({preventScroll:!0})):(C.preventDefault(),f({type:0})))}),{isFocusVisible:v,focusProps:j}=fs({autoFocus:i}),{isHovered:w,hoverProps:b}=ps({isDisabled:r}),{pressed:y,pressProps:A}=gs({disabled:r}),R=l.useMemo(()=>({open:m.menuState===0,active:y||m.menuState===0,disabled:r,hover:w,focus:v,autofocus:i}),[m,w,v,y,r,i]),$=Pt(p(),{ref:d,id:a,type:xs(e,m.buttonElement),"aria-haspopup":"menu","aria-controls":(s=m.itemsElement)==null?void 0:s.id,"aria-expanded":m.menuState===0,disabled:r||void 0,autoFocus:i,onKeyDown:u,onKeyUp:g,onClick:x},j,b,A);return ce({mergeRefs:h,ourProps:$,theirProps:c,slot:R,defaultTag:ia,name:"Menu.Button"})}let la="div",ua=nt.RenderStrategy|nt.Static;function da(e,t){var s,o;let a=l.useId(),{id:r=`headlessui-menu-items-${a}`,anchor:i,portal:c=!1,modal:m=!0,transition:f=!1,...p}=e,h=qo(i),[d,u]=we("Menu.Items"),[g,x]=Yo(h),v=Ko(),[j,w]=l.useState(null),b=Pe(t,h?g:null,D(M=>u({type:8,element:M})),w),y=vs(d.itemsElement);h&&(c=!0);let A=hs(),[R,$]=bs(f,j,A!==null?(A&Se.Open)===Se.Open:d.menuState===0);Ms(R,d.buttonElement,()=>{u({type:1})});let C=d.__demoMode?!1:m&&d.menuState===0;Is(C,y);let k=d.__demoMode?!1:m&&d.menuState===0;ys(k,{allowed:l.useCallback(()=>[d.buttonElement,d.itemsElement],[d.buttonElement,d.itemsElement])});let G=d.menuState!==0,V=Cs(G,d.buttonElement)?!1:R;l.useEffect(()=>{let M=d.itemsElement;M&&d.menuState===0&&M!==y?.activeElement&&M.focus({preventScroll:!0})},[d.menuState,d.itemsElement,y]),Ss(d.menuState===0,{container:d.itemsElement,accept(M){return M.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:M.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(M){M.setAttribute("role","none")}});let U=kt(),K=D(M=>{var I,S,E;switch(U.dispose(),M.key){case N.Space:if(d.searchQuery!=="")return M.preventDefault(),M.stopPropagation(),u({type:3,value:M.key});case N.Enter:if(M.preventDefault(),M.stopPropagation(),u({type:1}),d.activeItemIndex!==null){let{dataRef:B}=d.items[d.activeItemIndex];(S=(I=B.current)==null?void 0:I.domRef.current)==null||S.click()}wt(d.buttonElement);break;case N.ArrowDown:return M.preventDefault(),M.stopPropagation(),u({type:2,focus:W.Next});case N.ArrowUp:return M.preventDefault(),M.stopPropagation(),u({type:2,focus:W.Previous});case N.Home:case N.PageUp:return M.preventDefault(),M.stopPropagation(),u({type:2,focus:W.First});case N.End:case N.PageDown:return M.preventDefault(),M.stopPropagation(),u({type:2,focus:W.Last});case N.Escape:M.preventDefault(),M.stopPropagation(),ne.flushSync(()=>u({type:1})),(E=d.buttonElement)==null||E.focus({preventScroll:!0});break;case N.Tab:M.preventDefault(),M.stopPropagation(),ne.flushSync(()=>u({type:1})),Ts(d.buttonElement,M.shiftKey?st.Previous:st.Next);break;default:M.key.length===1&&(u({type:3,value:M.key}),U.setTimeout(()=>u({type:4}),350));break}}),q=D(M=>{switch(M.key){case N.Space:M.preventDefault();break}}),J=l.useMemo(()=>({open:d.menuState===0}),[d.menuState]),Z=Pt(h?v():{},{"aria-activedescendant":d.activeItemIndex===null||(s=d.items[d.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(o=d.buttonElement)==null?void 0:o.id,id:r,onKeyDown:K,onKeyUp:q,role:"menu",tabIndex:d.menuState===0?0:void 0,ref:b,style:{...p.style,...x,"--button-width":js(d.buttonElement,!0).width},...ks($)});return oe.createElement(Es,{enabled:c?e.static||R:!1},ce({ourProps:Z,theirProps:p,slot:J,defaultTag:la,features:ua,visible:V,name:"Menu.Items"}))}let ma=l.Fragment;function fa(e,t){let s=l.useId(),{id:o=`headlessui-menu-item-${s}`,disabled:a=!1,...r}=e,[i,c]=we("Menu.Item"),m=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===o:!1,f=l.useRef(null),p=Pe(t,f);se(()=>{if(!i.__demoMode&&i.menuState===0&&m&&i.activationTrigger!==0)return Ps().requestAnimationFrame(()=>{var k,G;(G=(k=f.current)==null?void 0:k.scrollIntoView)==null||G.call(k,{block:"nearest"})})},[i.__demoMode,f,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let h=ws(f),d=l.useRef({disabled:a,domRef:f,get textValue(){return h()}});se(()=>{d.current.disabled=a},[d,a]),se(()=>(c({type:5,id:o,dataRef:d}),()=>c({type:6,id:o})),[d,o]);let u=D(()=>{c({type:1})}),g=D(k=>{if(a)return k.preventDefault();c({type:1}),wt(i.buttonElement)}),x=D(()=>{if(a)return c({type:2,focus:W.Nothing});c({type:2,focus:W.Specific,id:o})}),v=As(),j=D(k=>{v.update(k),!a&&(m||c({type:2,focus:W.Specific,id:o,trigger:0}))}),w=D(k=>{v.wasMoved(k)&&(a||m||c({type:2,focus:W.Specific,id:o,trigger:0}))}),b=D(k=>{v.wasMoved(k)&&(a||m&&c({type:2,focus:W.Nothing}))}),[y,A]=At(),[R,$]=Fs(),C=l.useMemo(()=>({active:m,focus:m,disabled:a,close:u}),[m,a,u]);return oe.createElement(A,null,oe.createElement($,null,ce({ourProps:{id:o,ref:p,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":y,"aria-describedby":R,disabled:void 0,onClick:g,onFocus:x,onPointerEnter:j,onMouseEnter:j,onPointerMove:w,onMouseMove:w,onPointerLeave:b,onMouseLeave:b},theirProps:r,slot:C,defaultTag:ma,name:"Menu.Item"})))}let pa="div";function ga(e,t){let[s,o]=At();return oe.createElement(o,null,ce({ourProps:{ref:t,"aria-labelledby":s,role:"group"},theirProps:e,slot:{},defaultTag:pa,name:"Menu.Section"}))}let xa="header";function va(e,t){let s=l.useId(),{id:o=`headlessui-menu-heading-${s}`,...a}=e,r=Os();se(()=>r.register(o),[o,r.register]);let i={id:o,ref:t,role:"presentation",...r.props};return ce({ourProps:i,theirProps:a,slot:{},defaultTag:xa,name:"Menu.Heading"})}let ha="div";function ba(e,t){return ce({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:ha,name:"Menu.Separator"})}let Ma=ie(ra),Ia=ie(ca),ya=ie(da),Ca=ie(fa),Sa=ie(ga),Ta=ie(va),ja=ie(ba),fe=Object.assign(Ma,{Button:Ia,Items:ya,Item:Ca,Section:Sa,Heading:Ta,Separator:ja});function tn({workspace:e}){const t=Q(),s=_s(ae.InviteUsersToWorkspace),o=Ns()??!0,a=Ds()?.map(r=>r.hostname);return n.jsx(Mn,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:In,type:"success",title:e.data.name!=null?t.formatMessage(de.inviteMemberModalTitle,{workspaceName:e.data.name}):t.formatMessage(de.inviteMemberModalTitleUntitledWorkspace),description:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx(T,{...de.inviteMemberModalDescription})}),!!a?.length&&!o&&n.jsxs("p",{className:"mt-2",children:[n.jsx(T,{...de.prohibitExternalDomainsDescription})," ",n.jsx("b",{children:a.join(", ")})]})]}),children:n.jsx(xo,{workspace:e,canResendInviteEmails:!0,onCancel:()=>H.closeModal(ae.InviteUsersToWorkspace),onSuccess:()=>H.closeModal(ae.InviteUsersToWorkspace),cancelButtonText:t.formatMessage(de.inviteMemberInviteCancelButton)})})}const de=Te({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},prohibitExternalDomainsDescription:{id:"ky8nVd",defaultMessage:"Only users from the following emails can be added to this workspace:"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}}),ka=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"}));function Ea({show:e,appear:t,children:s}){return n.jsx(Bs,{as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",show:e,appear:t,children:s})}function te({onClick:e,href:t,target:s,children:o,disabled:a,icon:r,testId:i}){return n.jsx(fe.Item,{disabled:a,children:({active:c})=>n.jsxs(Ae,{onClick:e,href:t,target:s,className:je({"bg-token-sidebar-surface-secondary":c,"hover:bg-token-sidebar-surface-secondary":!c&&!a}),"data-testid":i,children:[r&&n.jsx(r,{className:"icon-md"}),o]})})}function Pa({to:e,children:t,icon:s}){return n.jsx(fe.Item,{children:({active:o})=>n.jsx(yn,{to:e,children:n.jsxs(Ae,{$as:"span",className:je(o?"bg-token-sidebar-surface-secondary":"cursor-pointer"),children:[s&&n.jsx(s,{className:"icon-md"}),t]})})})}pe.a`p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer`;const Ae=pe.a`flex gap-2 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group items-center`,ur=pe(Ae)`border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]`,Ue=pe.div`h-px bg-token-border-light my-1.5`,dr=pe(Ae)`${e=>e.$active?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`;function nn({menuItemComponent:e}){const t=X(),s=ge(),o=l.useCallback(()=>{O.logEvent(L.clickSidebarAccountPortalMenuItem),qe(s,"Sidebar account menu item")},[s]),{value:a}=Cn("1028682714"),r=xt(()=>vt(()=>import("./sso-lq90weam9rkef6z5.js").then(i=>i.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60])).then(i=>i.default));return n.jsxs(n.Fragment,{children:[t?.hasPaidSubscription()&&(a?n.jsx(r,{handleClickCustomerPortal:o,menuItemComponent:e}):n.jsx(e,{onClick:o,icon:so,children:n.jsx(T,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),t?.canInteractWithGizmos()&&n.jsx(e,{onClick:()=>{O.logEvent(L.accountMenuClickMyGPTs),s(Dt())},icon:Bt,children:n.jsx(T,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),n.jsx(e,{icon:Wt,onClick:()=>{H.openModal(ae.UserContext),O.logEvent(L.accountMenuClickCustomizeChatGPT)},children:n.jsx(T,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function sn({menuItemComponent:e,routedMenuItemComponent:t}){const s=X(),o=He("2756095923")?.value&&s?.isEdu()&&s?.isStandardUserOfAccount();return n.jsxs(n.Fragment,{children:[!o&&n.jsx(t,{to:"/admin",icon:oo,children:n.jsx(T,{...Be.myWorkspaceSettings})}),n.jsx(t,{to:Dt(),onClick:()=>{O.logEvent(L.accountMenuClickMyGPTs)},icon:Bt,children:n.jsx(T,{...Be.myGpts})}),n.jsx(e,{onClick:()=>{H.openModal(ae.UserContext),O.logEvent(L.accountMenuClickCustomizeChatGPT)},icon:Wt,children:n.jsx(T,{...Be.chatPreferences})})]})}const Be=Te({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});function mr({onClickSettings:e}){return n.jsxs(fe,{as:"div",className:"group relative",children:[n.jsx(Oa,{}),n.jsx(Ea,{children:n.jsx(fe.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:n.jsx(Fa,{onClickSettings:e})})})]})}function on(){const e=!X()?.isEnterprisey()&&!It,t=Q(),s=ze(),o=ge();return s?n.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[n.jsx("div",{className:"text-sm text-token-text-secondary",children:s?.email}),e&&n.jsx(re,{label:t.formatMessage(Y.addWorkspaceTooltip),side:"right",children:n.jsx("button",{onClick:()=>qe(o,"profile menu"),children:n.jsx(uo,{className:"icon-sm text-token-text-primary"})})})]}):null}function wa(){const e=X();return e==null?n.jsx(n.Fragment,{children:n.jsx("div",{className:"w-full px-3 py-2",children:n.jsx(ye,{})})}):n.jsxs(n.Fragment,{children:[n.jsx(on,{}),n.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:n.jsx(rn,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})})]})}function an({menuItemComponent:e}){const t=Ft(),s=ht(),{data:o}=ke(),a=X(),[r,i]=l.useState(!1),c=ze(),m=Q(),f=Sn();if(!a||!o)return null;const p=a.isWorkspaceAccount(),h=o.accountItems.length>1,d=o.accountItems,u=Ws([d.find(x=>x.isPersonalAccount()),...d.filter(x=>!x.isPersonalAccount())]);if(u.sort((x,v)=>x.isPersonalAccount()?1:v.isPersonalAccount()?-1:0),!h)return p?n.jsx(wa,{}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:c?.email})});const g=u.map(x=>n.jsx(e,{disabled:x.isDeactivated(),onClick:()=>{if(x.isDeactivated()||x.id===a?.id)return;i(!0);const{willRedirect:v}=Tn(s,x.id,t,m,f);v||jn()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:x.isDeactivated()?n.jsx(Aa,{workspace:x,isLoading:r}):n.jsx(rn,{workspace:x,isLoading:r,currentWorkspaceId:a?.id})},x.id));return n.jsxs(n.Fragment,{children:[n.jsx(on,{}),n.jsx(P.Separator,{}),g]})}function rn({workspace:e,isLoading:t,currentWorkspaceId:s,showCheck:o=!0}){const a=e.canAccessWithCurrentSession,r=!t&&o&&e.id===s;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(Qe,{iconSize:"small",workspace:e,className:je({"flex-shrink-0":!0})})}),n.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:Ot(Q(),e)}),t&&n.jsx(ye,{}),r&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(ao,{className:"icon-sm"})}),!a&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(ro,{className:"icon-sm"})})]}),!a&&n.jsx("div",{className:"rowDivClassName",children:n.jsx("small",{className:"text-token-text-secondary",children:n.jsx(T,{...e.ssoConnectionName?Y.authenticateWithSSOToAccessWorkspace:Y.authenticateWithoutSSOToAccessWorkspace})})})]})}function Aa({workspace:e,isLoading:t}){const s=Q(),o=e.isOwnerOfAccount(),[a,r]=l.useState(!1),i=$s(e.id);return l.useEffect(()=>{i!=null&&a&&(H.setPurchaseWorkspaceData({minimumSeats:Math.max(i,ot),existingAccount:e}),r(!1))},[i,a,e]),n.jsxs(n.Fragment,{children:[n.jsxs(re,{className:"flex w-full flex-1 items-center gap-2.5",label:s.formatMessage(Y.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(io,{className:"icon-sm flex-shrink-0 opacity-30"})}),n.jsx("div",{className:"truncate opacity-30",children:Ot(s,e)})]}),t&&n.jsx(ye,{}),!t&&n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:n.jsx(co,{className:"icon-sm m-1"})}),n.jsx(P.Portal,{children:n.jsxs(P.Content,{children:[o&&n.jsx(n.Fragment,{children:n.jsx(P.Item,{onClick:()=>{i==null?r(!0):H.setPurchaseWorkspaceData({minimumSeats:Math.max(i,ot),existingAccount:e})},children:a?n.jsx(ye,{}):n.jsx(T,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),n.jsx(P.Item,{onClick:()=>{H.setLeaveWorkspaceData(e)},children:n.jsx(T,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function Fa({onClickSettings:e}){const{data:t}=ke(),s=X(),o=Rt(),a=Vt(),{openModal:r}=Gt(),i=bt("3905879930");var c=s?.canInviteMembers()??!1,m=!1;if(c&&(m=i.config.get("enabled",!1)),!s||!t)return null;const f=s.isWorkspaceAccount(),p=!o;return n.jsxs("nav",{children:[n.jsx(an,{menuItemComponent:te}),n.jsx(Ue,{}),f?n.jsx(sn,{menuItemComponent:te,routedMenuItemComponent:Pa}):n.jsx(nn,{menuItemComponent:te}),p&&n.jsx(te,{href:Ls(),target:"_blank",onClick:()=>{O.logEvent(L.clickFaqLink)},icon:lo,children:n.jsx(T,{...Y.helpAndFaq})}),n.jsx(te,{onClick:e,icon:$t,testId:"accounts-settings-button",children:n.jsx(T,{...Y.settings})}),c&&m&&n.jsxs(n.Fragment,{children:[n.jsx(te,{onClick:()=>{H.openModal(ae.InviteUsersToWorkspace),O.logEvent(L.accountMemberInviteButton,{location:"dropdown-menu-click"}),me.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Lt,children:n.jsx(T,{...Y.addTeammatesButton})}),n.jsx(tn,{workspace:s})]}),a&&n.jsx(Ra,{openDownloadModal:r}),n.jsx(Ue,{}),n.jsx(te,{onClick:()=>{O.logEvent(L.clickLogOut,{eventSource:"mouse"}),Mt()},icon:Ut,children:n.jsx(T,{...Y.logOut})})]})}function Oa(){return ze()?n.jsx(_a,{}):null}function Ra({openDownloadModal:e}){return n.jsxs("span",{children:[n.jsx(Ue,{}),n.jsx(te,{icon:Ht,onClick:()=>{O.logEvent(L.accountMenuClickDownloadApp),e()},children:n.jsx(T,{...Y.downloadApp})})]})}function _a(){const{data:e}=ke(),t=X(),s=Us(),o=Hs();if(!t||!e)return null;const a=t.isWorkspaceAccount(),r=e.accountItems.length>1;return n.jsxs(fe.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Qe,{iconSize:"gizmo"})}),n.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[n.jsx("div",{dir:"auto",children:o}),a||r?n.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:s}):null]})]})}const Y=Te({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});function Na({clientThreadId:e,location:t}){const s=ht(),{id:o}=Xs(e),a=Js(!0),r=ge(),i=yt(),c=kn();return l.useCallback(()=>{En(Pn(s))?Vs(r):i?r({pathname:c.pathname,search:c.search},{state:Gs()}):(a({modelId:o,location:t}),me.logEvent("chatgpt_web_thread_tap_new_thread"))},[s,t,o,a,r,i,c])}const Da=xt(()=>vt(()=>Promise.resolve().then(()=>ka),void 0));function fr({showShareButton:e,showProfileDropdown:t,clientThreadId:s}){const o=no(s),a=Q(),r=Ye(s),{layer:i}=Ce("1547743984"),c=i.get("show_share_button_text",!1),m=a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"});return n.jsxs(n.Fragment,{children:[!1,r&&n.jsx(To,{}),e&&o&&n.jsx(Eo,{clientThreadId:s,children:c?n.jsx(We,{onClick:()=>H.openSharingModal(o),icon:at,label:m,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",children:n.jsx("span",{style:{display:"var(--screen-size-hidden-on-compact-mode,)"},children:m})}):n.jsx(re,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:n.jsx(Ee,{"data-testid":"share-chat-button",onClick:()=>H.openSharingModal(o),icon:at})})}),t&&n.jsx(Wa,{})]})}function Ba({to:e,children:t,icon:s}){const o=ge();return n.jsx(P.Item,{icon:s,onSelect:()=>o(e),children:t})}function Wa(){const{isUnauthenticated:e}=Ct();return e?n.jsx(Ga,{}):n.jsx($a,{})}function $a(){const{data:e}=ke(),t=X(),s=t?.isPlus()??!1,o=t?.isWorkspaceAccount()??!1,{openSettings:a}=qs(),r=Vt(),{openModal:i}=Gt(),{layer:c}=Ce("2888142241"),m=bt("3905879930");var f=t?.canInviteMembers()??!1,p=!1;f&&(p=m.config.get("enabled",!1));const{doesUserHaveAnyAccountsWithPlusFeatures:h}=wn(),{layer:d}=Ce("2670443078");if(!t||!e)return null;const u=e.accountItems.length>1;let g=s;!o&&!s&&h&&d.get("is_gating_fix_enabled",!1)&&(g=h);const x=!o&&!g&&!It&&c.get("is_upgrade_in_settings",!1);return n.jsxs(zs,{triggerButton:n.jsx("button",{onClick:()=>{O.logEvent(L.accountOpenProfileMenu),me.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",style:{display:"var(--screen-size-hidden-on-compact-mode, flex)"},children:n.jsx(Qe,{iconSize:"medium"})}),children:[u&&n.jsx(an,{menuItemComponent:P.Item}),u?n.jsx(P.Separator,{}):null,o?n.jsx(sn,{menuItemComponent:P.Item,routedMenuItemComponent:Ba}):n.jsx(nn,{menuItemComponent:P.Item}),n.jsx(P.Item,{icon:$t,onClick:()=>a(),"data-testid":"settings-menu-item",children:n.jsx(T,{defaultMessage:"Settings",id:"navigation.settings.0"})}),n.jsx(P.Separator,{}),f&&p&&n.jsxs(n.Fragment,{children:[n.jsx(P.Item,{"data-testid":"settings-menu-item-invite-teammates",onClick:()=>{H.openModal(ae.InviteUsersToWorkspace),O.logEvent(L.accountMemberInviteButton,{eventSource:"mouse",location:"profile_drop_down"}),me.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Lt,children:n.jsx(T,{...cn.addTeammatesButton})}),n.jsx(Da,{workspace:t})]}),r&&n.jsx(Ua,{openDownloadModal:i}),x&&n.jsx(Ha,{}),(x||r)&&n.jsx(P.Separator,{}),n.jsx(P.Item,{onClick:()=>{O.logEvent(L.clickLogOut,{eventSource:"mouse"}),O.logLogOutButtonClicked({location:"profile_drop_down"}),Mt()},"data-testid":"log-out-menu-item",icon:Ut,children:n.jsx(T,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function La({onClick:e,className:t,testId:s}){const o=Q(),a=yt(),r=a?o.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):o.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return n.jsx(re,{sideOffset:4,label:r,className:je("flex",t),children:n.jsx(Ee,{onClick:()=>{H.closePopoverNavSidebar(),e()},icon:a?po:go,surfaceContext:"secondary","aria-label":r,"data-testid":s})})}function pr({clientThreadId:e}){const[t]=_t(a=>[a.activeStageSidebar]),s=Nt(),o=Na({clientThreadId:e,location:"Navigation actions"});return!s&&!t?null:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Va,{}),n.jsx(La,{onClick:o})]})}function Ua({openDownloadModal:e}){return n.jsx("span",{children:n.jsx(P.Item,{icon:Ht,onClick:()=>{e(),O.logEvent(L.accountMenuClickDownloadApp)},children:n.jsx(T,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function Ha(){const e=ge(),s=X()?.wasPaidCustomer()??!1,o=()=>{me.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),O.logEvent(L.plusUpgradeInSettingsMenuClicked),qe(e,"Upper right settings menu")};return n.jsx(P.Item,{icon:mo,onClick:o,children:s?n.jsx(T,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):n.jsx(T,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Va(){const e=Q(),[t]=_t(r=>[r.activeStageSidebar]),s=Nt(),o=Rt(),{isUnauthenticated:a}=Ct();return!t&&!s||!o||a?null:n.jsx(re,{label:e.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:n.jsx(Ee,{"aria-label":e.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:H.toggleNavSidebar,icon:fo,surfaceContext:"primary"})})}function Ga(){const e=Ft(),t=Qs(),s=Ks(cn.signUpCta),{layer:o}=Ce("3637408529"),a=o.get("is_desktop_primary_auth_button_on_right",!1),r=()=>{e({authType:"login",callback:p=>{O.logLogInButtonClicked({location:"Chat header",provider:p})}})},i=()=>{e({authType:"signup",callback:p=>{O.logSignUpButtonClicked({location:"Chat header",provider:p})}})},c=n.jsx(We,{onClick:r,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:n.jsx(T,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),m=n.jsx(We,{color:t?"secondary":"primary",onClick:i,size:"small","data-testid":"signup-button",children:n.jsx(T,{...s})},"signup"),f=t?[c,m]:[m,c];return n.jsx("div",{className:"flex items-center justify-center gap-2",children:a?f.reverse():f})}const cn=Te({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});export{ka as A,fr as C,Va as E,Wa as L,Xo as M,La as N,Ea as P,Yo as R,rr as T,dr as U,$a as a,Ko as b,mr as c,Ae as d,sr as e,ir as f,zt as g,ur as h,Na as i,Ye as j,Za as k,or as l,er as m,nr as n,lr as o,Qt as p,Xt as q,cr as r,ar as s,tr as t,Yt as u,le as v,vo as w,qo as x,zo as y,pr as z};
//# sourceMappingURL=b265g6ovy2qnenwi.js.map
