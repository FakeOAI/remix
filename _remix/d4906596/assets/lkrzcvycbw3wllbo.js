const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-lq90weam9rkef6z5.js","assets/i02hakaw1yz2cb0w.js","assets/oolxnb4itrwnjqyf.js","assets/root-nervg1nc.css","assets/lh3mwfkwfhlv441f.js","assets/ckygyr7dh5h6j13j.js","assets/conversation-small-kig9eefw.css","assets/b265g6ovy2qnenwi.js","assets/mv65vi40bwx8cy8n.js","assets/fy32gsgjnvmziir1.js","assets/j1601v2ihcbk1gfj.js","assets/b7ag3k9iwm4mxpe7.js","assets/kbm7816v821c2spk.js","assets/oap30ledw1k6is17.js","assets/fo1cpvmyviez6pdv.js","assets/d5wegs5kxh8gy0hw.js","assets/i3dpv1f5ihn6o9pd.js","assets/jppq1up0yxybe7ed.js","assets/cpdqbxpekjursyhj.js","assets/lznvc95l0hqf1fjq.js","assets/bbilryt45cr5lkmt.js","assets/oz8d7a4eoxr25euk.js","assets/e9nh0er53nz1ibdu.js","assets/em0e1b5qy7n33g13.js","assets/jws76agumgi0qld5.js","assets/fkfnxayydbk11gws.js","assets/ml41u5f671z991va.js","assets/eginmiob9261bnme.js","assets/itghwucfyv5ciib7.js","assets/ou533f5kifw7pz5n.js","assets/ir4pz6oddwty2j1i.js","assets/g9mbtdwwmshmbrhh.js","assets/983a0dy92b3ronpv.js","assets/j454liecuca977s7.js","assets/gb58vwj0wkog1jaj.js","assets/kqwdyvkaaavvn8k3.js","assets/9ywqh484tgaq373j.js","assets/k2f9zl7dmz7cv8qi.js","assets/gixvnghcj26yqn96.js","assets/gz2gws2rfjzup3rk.js","assets/nhwwej1nq0zrd7sc.js","assets/fwcd2zrlqt3fb5o3.js","assets/dzyfslg6ca5spzyz.js","assets/j8pudfjo9hou5kw0.js","assets/hv7xf55q4xjiqsmg.js","assets/ew7ir3izl8xriyif.js","assets/mvklc9o1473kp30d.js","assets/inkxo49vrft9nkd7.js","assets/hywab3n921arpg9j.js","assets/c9z0ph27mogsdbcf.js","assets/6c6p7pu97r7646ya.js","assets/my6ipl7skwmkfbi5.js","assets/iej0cupg2dqkmejt.js","assets/k0hskw2cgf15wwtx.js","assets/hwciq4j17njryqqf.js","assets/jk8w36bsokizpx57.js","assets/ik0ionco6fs5t3nh.js","assets/sool78c33xhsg9ex.js","assets/e71tbmvlvbrpyuoa.js","assets/j3lsriwrfmutmze6.js","assets/dxoe7bmzgccf01wt.js","assets/bq6eevietautnuo7.js","assets/swiper-kmk1dd5x.css","assets/jl8bmroaqcnzw4fm.js"])))=>i.map(i=>d[i]);
import{bm as O,l as e,r as c,m as h,$ as y,a2 as R,a1 as _,a as F,dZ as $,a$ as C,bg as U,a0 as V,aD as T,aE as w,X as W,U as q,eD as X,aN as Q,Q as Z,cm as J}from"./i02hakaw1yz2cb0w.js";import{cJ as v,a8 as j,c5 as K,en as Y,dC as ee,X as se,D as te,bL as ne,eo as ae,ep as ie,aC as H,ak as oe,q as re,eq as ce,er as le,c7 as de,c8 as ue,c0 as M,es as N,c3 as me,et as he,Z as S,c1 as fe,aB as xe,c as pe,N as ge,eu as be,bv as ye}from"./ckygyr7dh5h6j13j.js";import{q as Se,M as ve,b0 as je,b1 as Ie}from"./oolxnb4itrwnjqyf.js";import{m as Ce}from"./j1601v2ihcbk1gfj.js";import{d as Ne,m as ke}from"./fy32gsgjnvmziir1.js";import{u as Te,a as A,H as we,b as He}from"./j3lsriwrfmutmze6.js";import{u as Me,r as Ae}from"./cpdqbxpekjursyhj.js";import{N as Ee}from"./b265g6ovy2qnenwi.js";function Ge(){const s=v(j.SonicSidebar),[t,n]=c.useState(!1);return s.isLoading||!s.eligible?null:e.jsx(Ce.div,{className:"no-draggable group pb-0",whileTap:{scale:.98},children:e.jsx(Pe,{children:e.jsx(K,{href:"/search",target:"_blank",icon:e.jsx("div",{className:h("gizmo-shadow-stroke mr-[0.5] flex h-6 w-6 items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:e.jsx(Y,{})}),label:"SearchGPT",hoverRightIcon:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Be,{isOpen:t,setIsOpen:n,onDismiss:()=>s.markAsViewed()}),e.jsx(Se,{className:h("icon-md text-token-text-tertiary",!t&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function Le(){const s=ne(),t=v(j.hasSeenSncSidebarTooltip),n=ae(),i=ie(),{activeModals:o}=H(),a=oe();return!t.isLoading&&t.eligible&&!n&&o.size===0&&!s&&!i&&!a}function Pe({children:s}){const t=Le(),n=v(j.hasSeenSncSidebarTooltip);return t?e.jsx(ee,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:n.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:e.jsx("div",{className:"w-full",children:s})}):e.jsx(e.Fragment,{children:s})}function Be({isOpen:s,setIsOpen:t,onDismiss:n}){return e.jsx(se,{open:s,onOpenChange:t,triggerButton:e.jsx("button",{className:h("flex text-token-text-tertiary",s?"":"invisible group-hover:visible"),onClick:i=>{i.preventDefault()},children:e.jsx(ve,{className:"icon-md"})}),children:e.jsx(te.Item,{onClick:i=>{i.preventDefault(),n()},children:e.jsx(y,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}function De(){const s=O("114024");return!s.value||s.isLoading?null:e.jsx(Ge,{})}const k=V({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function ze({activeId:s,isPrimaryBackgroundColor:t}){const n=F(),[i,o]=c.useState(!1),[a,l]=c.useState(0),r=$(),{conversations:d,hasNextPage:f,fetchNextPage:p,isLoading:x,isFetchingNextPage:E,isError:I}=Me(),g=c.useRef(null),G=c.useCallback(m=>{x||m==null||(g.current?.disconnect(),g.current=new IntersectionObserver(z=>{z[0].isIntersecting&&f&&p()}),g.current.observe(m))},[x,f,p]);c.useEffect(()=>()=>{g.current?.disconnect()},[]),c.useMemo(()=>{re.publish({kind:"refreshHistory",conversations:d})},[d]);const b=d;c.useEffect(()=>{const m=ce(le(),Date.now());r(()=>{l(a+1)},m+1e3)},[a,r]);const u=b.length===0;c.useEffect(()=>{u||de({namespace:ue.ChatPageLoad})?.logTiming("render_history_items")},[u]);const L=Te(b,a),{isCollapsible:P}=A(),B=H(m=>m.isHistoryCollapsed),D=M();return e.jsxs(_e,{$centered:x||I||u,$screenArch:D,children:[u&&x&&e.jsx(C,{className:"m-auto"}),u&&I&&e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(y,{...k.unableToLoadHistory}),!i&&e.jsx("div",{className:"mt-1",children:e.jsx(U,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{o(!0),Ae(n)},children:e.jsx(y,{...k.retryButton})})})]}),!x&&!u&&e.jsx("div",{children:P&&B?e.jsx(Oe,{activeId:s,items:b,isPrimaryBackgroundColor:t}):e.jsx(we,{activeId:s,bucketedItems:L,hasNextPage:f,items:b,isPrimaryBackgroundColor:t,infiniteScrollTriggerElementRef:G})}),E&&e.jsx("div",{className:"m-4 mb-5 flex justify-center",children:e.jsx(C,{})})]})}function Oe({activeId:s,items:t,isPrimaryBackgroundColor:n}){const{isCollapsible:i,recentConversationLimit:o}=A(),a=M(),l=t.slice(0,o);if(s){const r=t.findIndex(d=>d.id===s);r>o-1&&l.push(t[r])}return e.jsxs("div",{className:h(n&&!a&&"first:mt-0",!a&&"relative mt-5 last:mb-5"),children:[e.jsx("div",{className:h("sticky top-[--sidebar-sticky-threshold]",a&&["z-5",N.historyHeading,N.historyHeadingTimeline],!a&&"z-20"),children:e.jsx("span",{className:"flex h-9 items-center",children:e.jsx(me,{$screenArch:a,children:e.jsx(y,{id:"VbQeVG",defaultMessage:"Recent"})})})}),e.jsx("ol",{className:a?"mt-1 flex flex-col gap-0.5":void 0,children:l.map((r,d)=>{const f=s===r.id,p=d===0;return e.jsx(He,{item:r,isActive:f,isFirstItem:p,isInRecents:!0,isPrimaryBackgroundColor:n,testId:`history-item-${d}`},`history-item-${r.id}`)})}),i&&e.jsx(he,{type:"more",onClick:S.toggleHistoryCollapsed})]})}const Re=R.memo(ze),_e=_.div`flex flex-col gap-2 pb-2 text-token-text-primary text-sm
${({$centered:s,$screenArch:t})=>[s&&"h-full justify-center items-center empty:hidden",t?"mt-0 pb-8":"mt-5"]}`,Fe=T(()=>w(()=>import("./sso-lq90weam9rkef6z5.js").then(s=>s.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62])).then(s=>s.FannyPackAction)),$e=T(()=>w(()=>import("./jl8bmroaqcnzw4fm.js"),__vite__mapDeps([63,1,2,3,5,6,44,8,9,10,59,18,20,43,7,11,12,13,14])).then(s=>s.GizmoSidebarList));function Ke({clientThreadId:s,onNewThread:t}){const n=Ne(s),i=Q(),{isUnauthenticated:o}=Z(),a=ke(s),l=J();return o?null:e.jsxs(e.Fragment,{children:[e.jsx(ye,{onNewThread:t}),i?.canInteractWithGizmos()?e.jsx($e,{currentGizmoId:a}):e.jsx(De,{}),!o&&e.jsx(Re,{activeId:l?void 0:n})]})}function Ye({className:s,onNewThread:t}){const n=W(),i=q(),o=fe(),a=X(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:l}=xe();return e.jsxs("div",{className:h("flex",a?.visible&&a.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(pe,{sideOffset:4,label:n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(ge,{className:"no-draggable","aria-label":n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{be(i)?S.toggleNavSidebar():S.togglePopoverNavSidebar()},icon:je,mobileIcon:Ie,surfaceContext:"secondary","data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[l&&e.jsx(Fe,{}),!o&&e.jsx(Ee,{onClick:t,testId:"create-new-chat-button"})]})]})}export{Ke as C,Re as H,Ye as S,De as a};
//# sourceMappingURL=lkrzcvycbw3wllbo.js.map
