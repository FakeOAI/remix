import{W as k,A as y,cv as v,I as j,g as _,t as a,K as M,a0 as m,au as S,am as N,r as f,d,P as A}from"./bzvcy3tl84gc3bl9.js";import{eM as E,eN as R,bQ as D,eO as w,eP as C,eQ as x,bN as L}from"./moittmkqym6x2q8u.js";import{S as P,a as F}from"./oj910hh3f2zfoj1x.js";import{w as T,x as $}from"./c3nvn3bmsyj77vtl.js";import{g as z}from"./kqwdyvkaaavvn8k3.js";import{a as U}from"./oav95jbmchrkupbz.js";import{b as H}from"./ebzdroxnuj9v1lzs.js";import{E as Q}from"./kq9htd4mf9kcw51q.js";import{m as W}from"./d6ri6s3v2tbmwdon.js";import"./o4htpc5iqra16abg.js";import"./f064jjm5wr3qzqg4.js";function q({date:e}){const t=k(),s=e instanceof Date?e:new Date(e*1e3),r=E(s,new Date);if(r<4&&r>-4){const n=t.formatRelativeTime(r,"day",{numeric:"auto"});return n.charAt(0).toUpperCase()+n.slice(1)}else return t.formatDate(s,{year:"numeric",month:"long",day:"numeric"})}var G=v,K=y,O=R,V=j;function B(e,t){var s=V(e)?G:O;return s(e,K(t))}var J=B,X=D,Y=J;function Z(e,t){return X(Y(e,t),1)}var I=Z;const ee=_(I);function de({clientThreadId:e,turnIndex:t,messageId:s,isInSidebar:r=!1}){const n=T(e,t),o=$(e,t),c={clientThreadId:e,messageId:s,turnIndex:t},i=ee(o,l=>l.entries).toSorted((l,u)=>(u?.pub_date??0)-(l?.pub_date??0));return a.jsxs("div",{className:M("flex w-full flex-col border-t border-token-border-light bg-token-main-surface-primary",r?"mt-[-57px]":"mt-0"),children:[a.jsx(h,{title:a.jsx(m,{id:"dlVlo6",defaultMessage:"Citations"}),items:n,analyticsMetadata:c,messageId:s}),a.jsx(h,{title:a.jsx(m,{id:"iUafP7",defaultMessage:"Search Results"}),items:i,analyticsMetadata:c,messageId:s})]},`${t}-${e}`)}function h({title:e,items:t,analyticsMetadata:s,messageId:r}){return!t||t.length===0?null:a.jsxs("div",{children:[a.jsx(b,{className:"sticky top-0 z-[1] h-[56px] border-b border-token-border-light bg-token-main-surface-primary px-6 py-4 text-sm font-medium text-token-text-primary",children:e}),a.jsx("div",{className:"flex flex-col px-3 py-2",children:t.map((n,o)=>a.jsx(b,{index:o,children:a.jsx(te,{item:n,analyticsMetadata:s,index:o,messageId:r},o)},`${e}-${o}`))})]})}function b({children:e,index:t=0,className:s=""}){return a.jsx(W.div,{className:s,initial:{opacity:0},animate:{opacity:1},transition:{delay:(t+1)*.03},children:e})}function te({item:e,index:t,analyticsMetadata:s,messageId:r}){const n=U(e.url).data??z(e.url,"short"),o=p=>"ref_id"in p&&"content_type"in p,c=w(),i=S().resolvedTheme==="dark",l=C(),u=a.jsxs(ae,{analyticsMetadata:s,href:e.url,position:t,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{e.attributions&&x.setHighlight(r,e.attributions?.slice(0,l).map(({attribution_index:p,probability:g})=>({index:p,probability:g})))},onMouseLeave:()=>{x.clearHighlights()},children:[a.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[a.jsx(L,{url:e.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:a.jsx(P,{className:"icon-sm text-token-text-quaternary"})}),n,o(e)&&a.jsx(F,{searchResult:e,className:"inline h-4 w-4 text-token-text-tertiary"})]}),a.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:e.title}),(e.pub_date??e.snippet)&&a.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[e.pub_date&&a.jsx(q,{date:e.pub_date}),e.pub_date&&e.snippet&&" â€” ",e.snippet]})]});return c?a.jsx(N,{label:a.jsx(Q,{item:e}),className:"text-left text-xs",theme:i?"default":"white",children:u}):u}const ae=f.forwardRef(function(t,s){const{analyticsMetadata:r,position:n,...o}=t;function c(i,l){t.href&&A.logEventWithStatsig(i,l,{...H(r),url:t.href,raw_position:n.toString()})}return f.useEffect(()=>{c(d.searchLinkShown,"search_link_shown")},[]),a.jsx("a",{ref:s,...o,onClick:i=>{t.onClick?.(i),i.stopPropagation(),c(d.searchLinkClicked,"search_link_clicked")}})});export{de as SearchSources,h as SourcesListGroup};
//# sourceMappingURL=hpbk7nznho6su1p8.js.map
