import{r,ga as y,an as v,y as A,e as k,aR as j,P as h,d as S,m as n,aD as _}from"./xdxfp24iz1v9yfag.js";import{aX as D,a_ as P}from"./nu1fne0hxn0fobvc.js";import{u as R}from"./0tkscxc5yznfc65i.js";import{T as E}from"./es1w8b9rpj9g0mvk.js";import{T as C}from"./ho30hrhmjtlr7wew.js";import"./ig3bdi3tp2s0pq8f.js";import"./iyhsfzolz53eloys.js";import"./br6d6eytaa2r39nf.js";const O={strong:o=>{const{node:e,children:t,...s}=o;return n.jsx("strong",{...s,className:_(s.className,"font-semibold text-token-text-primary"),children:t})},p:o=>{const{node:e,children:t,...s}=o;return n.jsx("p",{...s,className:_(s.className,"text-base","has-[strong]:mb-1 [&:not(:first-child)]:has-[strong]:mt-3 [&:not(:has(strong))]:mb-3"),children:t})}};function w({headline:o,message:e}){const s=e.create_time?new Date(e.create_time*1e3):Date.now(),i=R(+s,48e4);return n.jsxs("div",{className:"flex items-center gap-2.5",children:[n.jsx(P,{percentage:i,thickness:1/8,className:"h-5 w-5 text-token-text-primary",backgroundStrokeClassName:"stroke-token-main-surface-tertiary",transitionDuration:`${(100-i)/100*.2}s`,transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}),o]})}function V({messages:o,isStreaming:e,clientThreadId:t}){const[s,i]=r.useState(""),[m,b]=r.useState(!1),g=y(t)===v.STREAMING||e,a=o[0].message,x=a.id,p=A.getServerThreadId(t),c=k(a),l=a.metadata?.summarization_headline,M=e&&l!=null;j("1028682714"),r.useEffect(()=>{const T=/\*\*(.*?)(?:\*\*|\n|$)/g;let f,u="";for(;(f=T.exec(c))!=null;)u=f[1].trim();u?i(u):a.metadata?.initial_text!=null&&i(a.metadata.initial_text)},[c,a.metadata?.initial_text]),r.useEffect(()=>{c.length>0&&!l&&b(!0)},[c,l]);const d=r.useMemo(()=>({client_thread_id:t,message_id:x,conversationId:p}),[t,x,p]);r.useEffect(()=>{m&&h.logEvent(S.receivedA8KM123Message,d)},[m]);const N=r.useCallback(()=>{h.logEvent(S.openedA8KM123Message,{...d,isStreaming:e})},[d,e]);return n.jsx(C,{status:g?E.Running:E.Finished,highlightedCommand:g?l==null?s:n.jsx(w,{headline:l,message:a}):a.metadata?.finished_text??"",onOpenAnalytics:N,children:m&&!M?n.jsx("div",{className:"mb-4 border-l-2 pl-4 dark:border-token-text-secondary",children:n.jsx(D,{componentOverrides:O,className:"not-prose leading-6",children:c})}):null})}export{O as SUMMARY_MARKDOWN_COMPONENT_OVERRIDES,V as default};
//# sourceMappingURL=om0duptpv77w8sae.js.map
