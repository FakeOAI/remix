import{r as f,m as e,aE as C,L as P,bp as x,v as Y,cy as be,bs as ye,aJ as G,a1 as Se,O as H,cS as E,cR as $,bb as B,P as J,d as ee,bg as Ce,ek as te,c8 as Ne,bD as ke,ca as we,bR as Ie,gq as Fe,ei as Te,ef as Pe}from"./ltx0slge2qho99uv.js";import{gY as Me,eG as D,ce as a,ik as Ee,il as _,im as Oe,io as se,ip as De,iq as U,ir as ne,is as oe,it as O,iu as _e,iv as re,aV as Ue,h_ as Ae,et as Le,iw as Be,ix as ze,iy as Re,iz as Ge,iA as He,iB as Xe,iC as Ve,eS as We,eu as Ze,iD as z,iE as Qe,iF as qe,iG as R,bw as Ke,iH as Ye,iI as $e,iJ as Je,iK as X,iL as et,aL as tt,iM as st,iN as nt,iO as ot,iP as ie,cd as rt,iQ as it,iR as at,i6 as lt,eL as ct,gZ as dt,dj as ut,iS as mt,iT as xt,iU as ft,i as ht,iV as q,iW as pt,iX as gt}from"./hqp2oo3dblqnwsc1.js";import{P as jt}from"./ip75x0ldiuaglohw.js";import"./dhzl5kjl3qrl702n.js";import"./fovwpcyu5xa7ulpu.js";import"./kyitykn84aqzfal3.js";import"./nuk2ygkxw2hyqycs.js";import"./d51auog9qehtxo6s.js";const vt=[null,"#F14D42","#E36E30","#B98618","#DB9F1E","#3DCB40","#30A633","#27C0A6","#16B7DB","#6490F0","#0088FF","#1D53BF","#512AEB","#875BE1","#EE4D83","#E659C2"];function bt({color:t,active:s,onClick:n}){const o=P();return e.jsx("button",{onClick:()=>n(t),className:"flex h-10 w-10 items-center justify-center rounded-full bg-token-text-primary can-hover:hover:scale-110 can-hover:active:scale-100","aria-label":t??o.formatMessage(a.defaultColor),style:{backgroundColor:t??void 0},children:s&&e.jsx(Ee,{className:"h-6 w-6 text-token-main-surface-primary"})})}function yt({currentTheme:t,onSelect:s}){return e.jsx("div",{className:"m-4 grid grid-cols-4 gap-4",children:vt.map(n=>e.jsx(bt,{active:n===t,color:n,onClick:o=>{s(o)}},n))})}const St=({currentTheme:t,isPopoverOpen:s,...n},o)=>e.jsxs("button",{ref:o,...n,className:"group relative flex h-[60px] w-[60px] items-center justify-center",children:[e.jsx("div",{className:C("absolute flex h-full w-full items-center justify-center rounded-full",t&&"opacity-10",!t&&"bg-token-main-surface-secondary"),style:{backgroundColor:t??void 0}}),e.jsx("div",{className:"relative flex h-full w-full items-center justify-center",children:e.jsx(Me,{className:"icon-lg duration-200 ease-out can-hover:group-hover:scale-110",style:{color:t}})}),e.jsx("div",{className:C("absolute bottom-0 right-0 flex h-6 w-6 scale-0 items-center justify-center rounded-full border border-token-border-light bg-token-main-surface-primary text-token-text-secondary opacity-0 drop-shadow-sm duration-200 ease-out group-hover:scale-100 group-hover:opacity-100",s&&"scale-100"),children:e.jsx(D,{className:"h-[18px] w-[18px] rounded-full text-token-text-secondary"})})]}),Ct=f.forwardRef(St);function V({file:t,fileName:s,fileId:n,gizmoId:o}){const r=_(s)&&n!=null,i=Oe(t&&se(t)?t:null,s,n,o,void 0);return r?e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-[#129FBF] bg-cover bg-center text-white",style:{backgroundImage:`url(${i})`},children:!i&&e.jsx(De,{className:"icon-lg"})}):null}function Nt({gizmoId:t,gizmoName:s,pendingFiles:n,files:o,modelCapacityUsed:r,interpreterOnlyFileIds:i,onAddFiles:c,removePendingFile:d,pendingFileUpsertMutationsRef:l}){return n.length===0&&o.length===0?e.jsx(Ft,{gizmoName:s,onAddFiles:c}):e.jsx("div",{children:e.jsx(kt,{gizmoId:t,modelCapacityUsed:r,files:o,pendingFiles:n,interpreterOnlyFileIds:i,removePendingFile:d,pendingFileUpsertMutationsRef:l})})}function kt({gizmoId:t,modelCapacityUsed:s,files:n,pendingFiles:o,interpreterOnlyFileIds:r,removePendingFile:i,pendingFileUpsertMutationsRef:c}){const d=U();return n.length===0&&o.length===0?null:e.jsxs("div",{className:"overflow-hidden rounded-lg border border-token-border-light",children:[s&&s>1?e.jsxs("div",{className:"border-b border-token-border-light bg-gray-50 px-4 py-3 text-xs text-token-text-secondary dark:bg-gray-750",children:[e.jsx("div",{className:"font-medium",children:e.jsx(x,{...a.tooManyFilesTitle})}),e.jsx("div",{children:e.jsx(x,{...a.tooManyFilesDescription})})]}):null,n.map(l=>e.jsx(It,{gizmoId:t,gizmoFile:l,interpreterOnly:r.includes(l.file_id),onDelete:async()=>{const m=new Promise(g=>{c.current.push({id:t,mutationId:Y(),update:j=>{const p=j.files.filter(y=>y.file_id!==l.file_id);return{...j,files:p}},onSuccess:g})});return ne(t)({gizmoId:t,upsertProjectMutation:d,pendingFileUpsertMutationsRef:c}),m}},l.file_id)),o.map(l=>e.jsx(wt,{interpreterOnly:r.includes(l.tempId),pendingFile:l,onDelete:async()=>i(l.tempId)},l.tempId))]})}function ae(){return e.jsx(ye,{sideOffset:0,label:e.jsx(x,{...a.interpreterOnlyFileDescription}),labelTextAlign:"left",side:"bottom",size:"small",children:e.jsxs("div",{children:[e.jsx(x,{...a.interpreteronlyLabel}),e.jsx(Ue,{className:"icon-sm relative bottom-[1px] ml-1 inline-block"})]})})}function wt({pendingFile:t,onDelete:s,interpreterOnly:n}){const o=t.file.name,i=(se(t.file)&&t.file?.type.startsWith("image/")||_(o))&&e.jsx(V,{file:t.file,fileName:o,fileId:t.fileId??void 0,gizmoId:t.gizmoId??void 0});return e.jsx(le,{interpreterOnly:n,onDelete:s,children:e.jsx(oe,{icon:i,fileName:t.file.name,loadingPercentage:t.status===O.Uploading?t.progress:void 0,customFileDescription:n?e.jsx(ae,{}):void 0})})}function It({gizmoFile:t,gizmoId:s,interpreterOnly:n,onDelete:o}){const r=t.name,c=_(r)&&t.file_id!=null&&e.jsx(V,{fileName:r,fileId:t.file_id,gizmoId:s});return e.jsx(le,{interpreterOnly:n,onDelete:o,children:e.jsx(oe,{icon:c,fileName:t.name,customFileDescription:n?e.jsx(ae,{}):void 0})})}function le({children:t,onDelete:s,interpreterOnly:n}){const[o,r]=f.useState(!1);return e.jsxs("div",{className:C("group flex w-full justify-between border-b border-token-border-light px-3 py-2 text-sm last:border-b-0",n&&"grayscale"),children:[e.jsx("div",{children:t}),e.jsx("div",{className:C("shrink-0 grow-0 bg-token-main-surface-primary pl-1 group-hover:flex",!o&&"hidden"),children:o?e.jsx("div",{className:"flex h-full w-6 items-center justify-center",children:e.jsx(be,{})}):e.jsx("button",{onClick:async()=>{s&&(r(!0),await s(),r(!1))},children:e.jsx(_e,{className:"text-token-secondary rounded-full hover:bg-token-main-surface-secondary dark:hover:bg-token-main-surface-tertiary"})})})]})}function Ft({gizmoName:t,onAddFiles:s}){return e.jsx("div",{className:"flex h-full cursor-pointer items-center justify-center rounded-lg border border-token-border-light px-4 py-3 hover:bg-token-main-surface-secondary active:bg-token-main-surface-tertiary",onClick:s,children:e.jsxs("div",{className:"flex flex-col items-center gap-2 py-4 text-sm text-token-text-secondary",children:[e.jsx(re,{}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"max-w-100 text-token-text-secondary",children:e.jsx(x,{...a.emptyFileInstructions,values:{gizmoNameText:e.jsx("span",{className:"font-bold",children:e.jsx(x,{...a.emptyFileGizmoName,values:{gizmoName:t}})},"gizmoNameText")}})})})]})})}const ce=G.div`text-sm text-red-500`,Tt=G.textarea`w-full text-sm overflow-y-auto overflow-x-clip rounded-lg border px-3 py-2 focus:ring-2 focus:ring-token-text-primary border-token-border-medium bg-token-main-surface-primary`;function de({onClose:t,gizmo:s}){const n=P(),[o,r]=f.useState(s?.gizmo?.instructions||""),i=U(),c=H(),d=[];o?.length>z&&d.push(n.formatMessage(a.instructionsTooLong,{length:z}));const l=p=>{r(p.target.value)},m=()=>{t()},h=async()=>{try{await i.mutateAsync({update:{instructions:o??""},id:s.gizmo.id}),t()}catch(p){const y=te(p);c.warning(y??"Error",{duration:2})}},g=e.jsx(E.Button,{title:n.formatMessage(a.save),color:"primary",onClick:h,loading:i.isPending,disabled:d.length>0}),j=e.jsx(E.Button,{title:n.formatMessage(a.cancel),color:"secondary",onClick:m,disabled:i.isPending});return e.jsx($,{className:"max-h-[600px] min-h-[600px] min-w-[820px] max-w-[820px]",isOpen:!0,showCloseButton:!i.isPending,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",title:n.formatMessage(a.editCustomInstructionsTitle),onClose:()=>{i.isPending||t()},children:e.jsxs("div",{className:"flex h-full flex-col px-6 pb-7 pt-0",children:[e.jsx("div",{className:"text-sm font-medium",children:n.formatMessage(a.editCustomInstructionsSubtitle)}),e.jsx("div",{className:"text-sm text-token-text-secondary",children:n.formatMessage(a.editCustomInstructionsDescription)}),e.jsx(Tt,{autoFocus:!0,placeholder:n.formatMessage(a.projectInstructionsPlaceholder),className:"mb-1 mt-4 w-full flex-grow resize-none rounded-md bg-token-main-surface-primary",onChange:l,value:o,disabled:i.isPending}),d.map(p=>e.jsx(ce,{className:"mt-1",children:p},p)),e.jsx(E.Actions,{primaryButton:g,secondaryButton:j})]})})}function Pt({gizmoId:t,gizmoName:s,gizmoEditorData:n,openFileDialog:o,pendingFiles:r,setVersion:i,pendingFileUpsertMutationsRef:c,currentModelConfig:d}){const l=n?.files?.reduce((u,v)=>u+(v.file_size_tokens??0),0)??0,m=n?.contextStuffingBudget;let h;m&&(h=l/m,l>0&&h<.01&&(h=.01));const g=n?.files??[],j=Array.from(r.current.values()).filter(u=>g.every(v=>v.file_id!==u.fileId)),p=j.filter(u=>d!=null&&R(d,u.file.type,u.file.name)===B.CodeInterpreter),y=g.filter(u=>d!=null&&u.type!=null&&R(d,u.type,u.name)===B.CodeInterpreter),N=[...p.map(u=>u.tempId),...y.map(u=>u.file_id)];return e.jsx(Nt,{gizmoId:t,gizmoName:s,pendingFiles:j,pendingFileUpsertMutationsRef:c,files:g,modelCapacityUsed:h,interpreterOnlyFileIds:N,onAddFiles:o,removePendingFile:u=>{r.current.delete(u),i(v=>v+1)}})}const Mt=f.forwardRef(function({gizmo:s,showInstructions:n=!0,setIsDirty:o},r){const i=P(),[c,d]=f.useState(!1),l=U(),m=Ae(s),h=Le(m),{data:g}=Be(),j=g?.modelsList.find(k=>k.tags.includes(Se.GPT_4o))??g?.modelsList.find(k=>k.id===ze),p=H(),[y,N]=f.useState(0),u=f.useRef(new Map),v=f.useRef([]);f.useEffect(()=>{o&&o(()=>()=>u.current.size>0||v.current.length>0)},[u,v,o]);const fe=Re(j,void 0),he=async k=>{J.logEvent(ee.uploadFile,{client:"web",eventSource:"mouse",intent:"gizmo"});const A=m.id;k.length>0&&await Promise.all(k.map(w=>{const L=Ke(w);u.current.set(L,{tempId:L,gizmoId:A,file:w,status:O.Uploading,progress:1,fileId:null,cdnUrl:null}),Ye(L,w,i,p,{kind:Ce.Gizmo,gizmoId:A},{onFileUploaded:async(b,M,F,I)=>{const S=u.current.get(b);S?.fileId&&S?.fileId&&(v.current.push({id:s.gizmo.id,mutationId:Y(),update:T=>{if(!S.fileId)return T;const ve=[...T.files??[],{file_id:S.fileId,name:S.file.name,size:S.file.size,type:I?.mimeType??$e(S.file),last_modified:S.file.lastModified,file_size_tokens:I?.fileTokenSize}];return{...T,files:ve}},onSuccess:()=>{u.current.delete(b),N(T=>T+1)}}),ne(s.gizmo.id)({gizmoId:s.gizmo.id,upsertProjectMutation:l,pendingFileUpsertMutationsRef:v}))},onFileCreated:(b,M,F)=>{u.current.set(b,{tempId:b,gizmoId:A,file:w,status:O.Uploading,progress:1,...u.current.get(b),fileId:M,cdnUrl:F}),N(I=>I+1)},onFileUploadProgress:(b,M)=>{const F=u.current.get(b);F?.status===O.Uploading&&u.current.set(b,{...F,progress:M}),N(I=>I+1)},onError:b=>{u.current.delete(b)}},{usesRetrievalIndex:j!=null&&R(j,w.type,w.name)===B.Retrieval})}))},W=Ge(fe),Z=He(W),{open:Q,getInputProps:pe,getRootProps:ge,isDragActive:je}=Xe({noClick:!0,noDragEventsBubbling:!0,onDropAccepted:he,multiple:!0,maxSize:Ve,maxFiles:10,...W});return f.useImperativeHandle(r,()=>({openFileDialog:Q})),e.jsxs("div",{...ge({className:"relative h-full px-6"}),children:[e.jsx("input",{...pe()}),n&&e.jsxs(We,{children:[e.jsx("button",{className:"w-full",onClick:()=>d(!0),children:e.jsx("div",{className:"w-full rounded-lg border border-token-border-light text-left text-sm",children:m?.instructions?.length?e.jsx("div",{className:"mx-4 my-3 line-clamp-4",children:m.instructions}):e.jsxs("div",{className:"flex h-full w-full items-center px-4 py-3 text-token-text-secondary",children:[e.jsx("div",{className:"flex-1",children:e.jsx(x,{...a.addCustomInstructions})}),e.jsx(D,{className:"icon-sm"})]})})}),h.includes(Ze.GizmoInstructionsTooLong)?e.jsx(ce,{className:"mt-1",children:e.jsx(x,{...a.instructionsTooLong,values:{length:z}})}):null]}),c&&e.jsx(de,{gizmo:s,onClose:()=>{d(!1)}}),e.jsx(Pt,{gizmoId:s.gizmo.id,gizmoName:s.gizmo.display.name,gizmoEditorData:m,openFileDialog:Q,pendingFiles:u,pendingFileUpsertMutationsRef:v,setVersion:N,currentModelConfig:j}),je&&e.jsxs(Qe,{children:[e.jsx(qe,{}),e.jsx("h3",{children:e.jsx(x,{...a.dragInstructions})}),e.jsx("h4",{className:"w-2/3 text-center",children:Z.length>0?Z.join(", "):e.jsx(x,{...a.dragAllAccepted})})]})]})});function Et({gizmo:t,onClose:s}){const n=P(),[o,r]=f.useState(!1),[i,c]=f.useState(()=>()=>!1),d=f.useRef(null),l=f.useCallback(()=>{d.current?.openFileDialog()},[d]);return e.jsxs(e.Fragment,{children:[e.jsx($,{className:"max-h-[600px] min-h-[600px] min-w-[820px] max-w-[820px]",isOpen:!0,showCloseButton:!0,hideSeparator:!0,noPadding:!0,size:"custom",type:"success",onClose:()=>{i()?r(!0):s()},children:e.jsxs("div",{className:"flex h-full flex-col",children:[e.jsx(E.TitleBar,{$hasSeparator:!1,children:e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ne,{className:"text-lg font-semibold leading-6 text-token-text-primary",children:e.jsx(x,{...a.projectFilesModalTitle})})}),e.jsx(ke,{color:"secondary",onClick:l,children:e.jsx(x,{...a.addFilesButtonLabel})}),e.jsx(we,{asChild:!0,className:"sm:mt-0",children:e.jsx(Ie,{onClick:s})})]})}),e.jsx("div",{className:"mb-6 flex-grow overflow-y-auto pt-0",children:e.jsx(Mt,{ref:d,gizmo:t,showInstructions:!1,setIsDirty:c})})]})}),o&&e.jsx(Je,{isOpen:!0,title:n.formatMessage(a.projectFilesUnsavedChangesTitle),description:"",primaryButtonColor:"danger",confirmText:n.formatMessage(a.projectFilesUnsavedChangesConfirm),onClose:()=>{r(!1)},onConfirm:()=>{s()},children:e.jsx("div",{className:"text-sm",id:"snorlax-unsaved-changes-description",children:e.jsx(x,{...a.projectFilesUnsavedChangesDescription})})})]})}function Ot({gizmo:t}){return e.jsxs("div",{className:"mt-6 grid grid-cols-2 items-start gap-5",children:[e.jsx(Dt,{gizmo:t}),e.jsx(Ut,{gizmo:t})]})}function ue({header:t,context:s,contextClassName:n="",icon:o,modal:r,onClick:i,isModalOpen:c=!1}){return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:i,className:"group/snorlax-control-tile relative h-full rounded-2xl border border-token-border-xlight bg-token-main-surface-primary shadow-xxs hover:bg-token-main-surface-secondary active:bg-token-main-surface-tertiary active:drop-shadow-none",children:e.jsxs("div",{className:"relative mx-5 my-4 flex items-center justify-between gap-3 overflow-hidden",children:[e.jsxs("div",{className:"w-full grow text-left",children:[e.jsx("div",{className:"text-sm font-medium",children:t}),e.jsx("div",{className:C("text-xs text-token-text-secondary",n),children:s})]}),o]})}),c&&r]})}function Dt({gizmo:t}){const{files:s}=t,n=!s.length,o=X(t.gizmo.id),[r,i]=f.useState(!1),c=r&&e.jsx(Et,{gizmo:t,onClose:()=>{i(!1)}}),d=()=>i(!0);let l,m,h;if(n)l=e.jsx(x,{...a.addFilesButtonLabel}),m=e.jsx(x,{...a.filesControlDescription}),h=e.jsxs("div",{className:"relative flex h-10 w-10 shrink-0 items-center justify-center rounded-full",children:[e.jsx("div",{className:"absolute h-full w-full rounded-full bg-token-main-surface-secondary opacity-5",style:{backgroundColor:o??void 0}}),e.jsx(re,{className:"icon-md h-5 w-5",style:{color:o}})]});else{const j=s.slice(0,3);l=e.jsx(x,{...a.projectFilesModalTitle}),m=e.jsx(x,{...a.filesCount,values:{count:s.length}}),h=e.jsx("div",{className:"relative flex h-10 w-20 shrink-0 items-center justify-center rounded-full",children:j.toReversed().map((p,y)=>e.jsx(_t,{file:p,index:y,gizmoId:t.gizmo.id},p.id))})}return e.jsx(ue,{isModalOpen:r,modal:c,onClick:d,header:l,context:m,icon:h})}function _t({file:t,index:s,gizmoId:n}){const o=t.name,i=_(o)&&t.file_id!=null&&e.jsx(V,{fileName:o,fileId:t.file_id,gizmoId:n});return e.jsx("div",{className:"absolute right-0 top-0 h-10 w-10 overflow-hidden rounded-xl border-2 border-token-main-surface-primary group-hover/snorlax-control-tile:border-token-main-surface-secondary",style:{transform:`translateX(${s*-20}px)`},children:i||e.jsx(et,{className:"h-9 w-9 flex-shrink-0",filename:t.name,contextConnectorInfo:void 0})})}function Ut({gizmo:t}){const{instructions:s}=t.gizmo,n=!s.length,o=X(t.gizmo.id),[r,i]=f.useState(!1),c=r&&e.jsx(de,{gizmo:t,onClose:()=>{i(!1)}}),d=()=>i(!0);let l,m,h,g;return n?(l=e.jsx(x,{...a.customInstructionsTitle}),m=e.jsx(x,{...a.customInstructionsDescription}),h=e.jsxs("div",{className:"relative flex h-10 w-10 shrink-0 items-center justify-center rounded-full",children:[e.jsx("div",{className:"absolute h-full w-full rounded-full bg-token-main-surface-secondary opacity-5",style:{backgroundColor:o??void 0}}),e.jsx(D,{className:"icon-md h-5 w-5",style:{color:o}})]})):(l=e.jsx(x,{...a.editCustomInstructionsTitle}),g="overflow-hidden text-ellipsis whitespace-nowrap",m=s),e.jsx(ue,{isModalOpen:r,modal:c,onClick:d,header:l,context:m,icon:h,contextClassName:g})}const me=G.h3`p4 overflow-hidden text-ellipsis break-all py-3 px-4 text-xs font-semibold text-token-text-secondary`,K=new Map;function At(t){const s=K.get(t);if(s)return s;const n=ht(Lt,2e3,{trailing:!0});return K.set(t,n),n}async function Lt({gizmoId:t,upsertProjectMutation:s,toaster:n}){const o=gt,r=q(o.getState(),"theme",t);try{r!==void 0&&await s.mutateAsync({id:t,update:{theme:r??void 0}}),q(o.getState(),"theme",t)===r&&pt(t,"theme")}catch(i){const c=te(i);n.warning(c??"Error",{duration:2})}}function Bt({gizmoId:t,theme:s,upsertProjectMutation:n,toaster:o}){ft(t,"theme",s),At(t)({gizmoId:t,upsertProjectMutation:n,toaster:o})}function zt({gizmo:t}){const s=t.gizmo.display.emoji,n=X(t.gizmo.id),o=it(),r=U(),[i,c]=f.useState(!1),d=H();if(o&&s)return e.jsx(at,{emoji:s,className:"icon-lg text-2xl"});const l=m=>{m!==n&&Bt({gizmoId:t.gizmo.id,theme:m,upsertProjectMutation:r,toaster:d})};return e.jsx(lt,{open:i,sideOffset:4,alignOffset:7,side:"bottom",alignAgainstAnchor:"start",size:"none",modal:!0,onOpenChange:m=>c(m),triggerButton:e.jsx(Ct,{currentTheme:n,isPopoverOpen:i}),children:e.jsx(yt,{currentTheme:n,onSelect:l})})}function Rt({gizmo:t}){return e.jsxs("div",{className:"mb-6 flex w-full flex-col px-4",children:[e.jsx(zt,{gizmo:t}),e.jsxs("button",{className:"group ml-1 mt-3 text-balance text-left text-4xl font-semibold hover:text-token-text-secondary",onClick:()=>{ie.setShowProjectSettingsModal(!0)},children:[t.gizmo.display.name,e.jsx(D,{className:"icon-lg invisible ml-2.5 inline-block text-token-text-secondary group-hover:visible"})]})]})}function xe({children:t}){return e.jsx("div",{className:"group relative flex flex-col gap-1 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ct,{className:"icon-md text-token-sidebar-icon"}),t]})})}function Gt({conversation:t,gizmo:s}){const n=Fe(t.id)??t.title,[o,r]=f.useState(!1);f.useEffect(()=>Te(dt,{editTitleInMainScreen:({serverThreadId:d})=>{d===t.id&&r(!0)}}),[t.id]);const{snippet:i}=t,c=e.jsxs(xe,{children:[e.jsxs("div",{className:"flex-grow overflow-hidden group-hover:mr-5",children:[o?e.jsx(mt,{conversation:t,onClose:()=>{r(!1)}}):e.jsx("div",{className:"text-sm font-medium",children:n}),i&&e.jsx("div",{className:"truncate text-sm text-token-text-secondary",children:i})]}),!o&&e.jsx(Ht,{conversation:t})]});return o?c:e.jsx(Pe,{to:ut(t.id,s),children:c})}function Ht({conversation:t}){const[s,n]=f.useState(!1);return e.jsx("div",{className:C("absolute bottom-0 top-0 items-center gap-1.5 pr-4 ltr:right-0 rtl:left-0",s?"flex":"hidden can-hover:group-hover:flex"),onClick:o=>{o.preventDefault()},children:e.jsx(xt,{conversation:t,conversationTitle:t.title,onOpenChange:o=>{n(o),o&&J.logEvent(ee.conversationHistoryItemOpenMenu,{conversationId:t.id})},inMainScreen:!0})})}function Xt({gizmo:t}){const s=rt(t.gizmo.id),n=s.data?.items.length;return e.jsx("div",{className:"mb-14 mt-6",children:n?e.jsx(Wt,{gizmo:t,items:s.data?.items??[]}):e.jsx(Vt,{})})}function Vt(){return e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsx(x,{...a.emptyChatsInProjectTitle})}),e.jsx("ol",{children:Array.from({length:5}).map((s,n)=>e.jsx("li",{style:{opacity:1-n*.2,transition:"opacity 0.3s ease-in-out"},className:C(n!==4&&"border-b border-token-border-xlight"),children:e.jsx(xe,{children:e.jsxs("div",{className:"my-2 flex w-full flex-col gap-2",children:[e.jsx("div",{className:"h-2 w-2/12 rounded-full bg-token-main-surface-tertiary"}),e.jsx("div",{className:"h-2 w-5/12 rounded-full bg-token-main-surface-tertiary"})]})})},n))})]})}function Wt({gizmo:t,items:s}){const n=s.length;return e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsx(x,{...a.chatsInProjectTitle})}),e.jsx("ol",{children:s.map((o,r)=>e.jsx("li",{className:C("first:rounded-t-lg last:rounded-b-lg hover:bg-token-main-surface-secondary",r!==n-1&&"border-b border-token-border-xlight"),children:e.jsx(Gt,{conversation:o,gizmo:t})},o.id))})]})}function ss({clientThreadId:t,gizmoId:s,currentModelId:n,onRequestCompletion:o}){const r=P(),{data:i}=tt(s),c=st(d=>d.showProjectSettingsModal);return i?e.jsxs(nt,{isStaticSharedThread:!1,withVerticalPadding:!1,withHorizontalPadding:!0,clientThreadId:t,fullHeight:!0,children:[e.jsx(Rt,{gizmo:i}),e.jsx(jt,{clientThreadId:t,isNewThread:!0,currentModelId:n,onRequestCompletion:o,hideHeader:!0,showPromptStarters:!1}),e.jsx(Ot,{gizmo:i}),e.jsx(Xt,{gizmo:i}),c&&e.jsx(ot,{modalTitle:r.formatMessage(a.projectSettingsTitle),submitButtonTitle:r.formatMessage(a.projectSettingsSubmitButton),gizmo:i,onClose:()=>{ie.setShowProjectSettingsModal(!1)}},s)]}):null}export{ss as SnorlaxSplashScreen};
//# sourceMappingURL=cafpuztpcfvd3hgt.js.map
