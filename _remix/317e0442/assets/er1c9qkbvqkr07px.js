import{ar as f,as as A,at as v,b as B,I as S,au as K}from"./bomvf441parvbl6l.js";import{t as D}from"./bh0hpeydruybhwyo.js";import{al as L,L as w,r as P,bu as T,R as z,dM as E,dN as R,dO as x,P as I,d as O,D as F,bd as G,a1 as Z}from"./cenhwbprxai3toix.js";import{T as l}from"./h0w2cfyxquh3a88t.js";import{u as U,U as b,G as h}from"./jyh9xl3syf7yrebg.js";const V=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function N(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const e={Mod:"mod",Comma:",",...f.Key},_={[e.Mod]:N()?"⌘":"Ctrl",[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"},ee=t=>t.map(o=>_[o]??o),n=Z({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),H=new A,$=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:i,toaster:a,isFannyPackEnabled:c,isZoomEnabled:r})=>[{key:"newChat",action:t||T,actionMessageDescriptor:n.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:c?[]:[[e.Mod,"k"]]},{key:"focusPromptTextarea",action:i??D,actionMessageDescriptor:n.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:s=>{if(o!=null){const m=l.getThreadCurrentLeafId(o),d=l.getThreadConversationTurns(o,m);for(let u=d.length-1;u>=0;u--){const{messages:C}=d[u],y=[...C.reduce((p,g)=>g.err==null&&g.message.author.role===z.Assistant&&g.message.recipient==="all"?p+(p?`

`:"")+B(g.message):p,"").matchAll(V)],k=y.length?y[y.length-1][1]:null;if(k!=null){S(k,a,s).then(()=>{a.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:n.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:s=>{o!=null&&l.copyLastMessageToClipboard(o,a,s,"keyboard").then(()=>{a.success("Last response copied to clipboard")})},actionMessageDescriptor:n.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>b.toggleModal(h.UserContext),actionMessageDescriptor:n.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>b.toggleNavSidebar(),actionMessageDescriptor:n.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(o){const s=l.getServerThreadId(o);s&&H.publish({kind:"deleteChat",serverThreadId:s})}},actionMessageDescriptor:n.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"zoomIn",enabled:r,action:()=>E(),actionMessageDescriptor:n.zoomIn,group:"Chat",keyboardBinding:[e.Mod,"+"],altKeyboardBindings:[[e.Mod,"="]]},{key:"zoomOut",enabled:r,action:()=>R(),actionMessageDescriptor:n.zoomOut,group:"Chat",keyboardBinding:[e.Mod,"-"]},{key:"resetZoom",enabled:r,action:()=>x(),actionMessageDescriptor:n.resetZoom,group:"Chat",keyboardBinding:[e.Mod,"0"]},{key:"toggleKeyboardActions",action:()=>b.toggleModal(h.KeyboardActions),actionMessageDescriptor:n.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]}],M=t=>K(t,o=>{I.logEvent(O.keyboardShortcut,{keyboardActionKey:o.key}),F.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:o.key})},{enabled:!0}),j=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:i}={})=>{const a=L(),{isFannyPackEnabled:c}=v(),{value:r}=w("842034403"),s=G&&r;return P.useMemo(()=>$({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:i,toaster:a,isFannyPackEnabled:c,isZoomEnabled:s}).filter(({enabled:d=!0})=>d),[a,o,t,c,i,s])},oe=({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:i})=>{const a=j({resetThreadAction:t,clientThreadId:o,focusPromptTextareaAction:i}),r=U(s=>s.isVoiceActive)?[]:a;M(r)},te=({setSelectedVoiceIndex:t,prevVoiceIndex:o,nextVoiceIndex:i})=>{const a=[{key:"selectPrevVoice",action:()=>{t(o)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[e.ArrowLeft]},{key:"selectNextVoice",action:()=>{t(i)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[e.ArrowRight]}];M(a)};export{H as G,te as a,j as b,ee as g,N as i,oe as u};
//# sourceMappingURL=er1c9qkbvqkr07px.js.map
