import{b8 as m,b9 as k,aj as C,g as f,r as M,a3 as y,ba as b,bb as A}from"./g7w33hsyqmw6f524.js";import{t as S}from"./nhwieeg0ur43kl0h.js";import{bc as K,r as v,Q as B,b as D,P as L,F as w,D as T,V as P}from"./hloj85fregi26ji6.js";import{T as d}from"./dkqa9jl3k2y8d11k.js";const x=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function E(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const e={Mod:"mod",Comma:",",...m.Key},R={[e.Mod]:E()?"⌘":"Ctrl",[e.Comma]:",",[e.Enter]:"⏎",[e.Escape]:"Esc",[e.ArrowUp]:"↑",[e.ArrowDown]:"↓",[e.ArrowLeft]:"←",[e.ArrowRight]:"→",[e.Backspace]:"⌫",[e.Delete]:"⌦",[e.Tab]:"⇥",[e.Control]:"Ctrl",[e.Shift]:"Shift"},I=t=>t.map(o=>R[o]??o),n=P({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),F=new k,G=({resetThreadAction:t,clientThreadId:o,toaster:a})=>[{key:"newChat",action:t||B,actionMessageDescriptor:n.newChat,group:"Core",keyboardBinding:[e.Mod,e.Shift,"o"],altKeyboardBindings:[[e.Mod,"k"]]},{key:"focusPromptTextarea",action:S,actionMessageDescriptor:n.focusPromptTextarea,group:"Chat",keyboardBinding:[e.Shift,e.Escape]},{key:"copyLastCodeBlock",action:s=>{if(o!=null){const i=d.getThreadCurrentLeafId(o),r=d.getThreadConversationTurns(o,i);for(let g=r.length-1;g>=0;g--){const{messages:h}=r[g],l=[...h.reduce((u,c)=>c.err==null&&c.message.author.role===D.Assistant&&c.message.recipient==="all"?u+(u?`

`:"")+f(c.message):u,"").matchAll(x)],p=l.length?l[l.length-1][1]:null;if(p!=null){M(p,a,s).then(()=>{a.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:n.copyLastCodeBlock,group:"Chat",keyboardBinding:[e.Mod,e.Shift,";"],altKeyboardBindings:[[e.Mod,e.Shift,":"]]},{key:"copyLastResponse",action:s=>{o!=null&&d.copyLastMessageToClipboard(o,a,s,"keyboard").then(()=>{a.success("Last response copied to clipboard")})},actionMessageDescriptor:n.copyLastResponse,group:"Chat",keyboardBinding:[e.Mod,e.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>y.toggleModal(b.UserContext),actionMessageDescriptor:n.toggleCustomInstructions,group:"Settings",keyboardBinding:[e.Mod,e.Shift,"i"]},{key:"navigationToggle",action:()=>y.toggleNavSidebar(),actionMessageDescriptor:n.navigationToggle,group:"Core",keyboardBinding:[e.Mod,e.Shift,"s"]},{key:"deleteChat",action:()=>{if(o){const s=d.getServerThreadId(o);s&&F.publish({kind:"deleteChat",serverThreadId:s})}},actionMessageDescriptor:n.deleteChat,group:"Chat",keyboardBinding:[e.Mod,e.Shift,e.Backspace],altKeyboardBindings:[[e.Mod,e.Shift,e.Delete]]},{key:"toggleKeyboardActions",action:()=>y.toggleModal(b.KeyboardActions),actionMessageDescriptor:n.toggleKeyboardActions,group:"Settings",keyboardBinding:[e.Mod,"/"]}],U=t=>A(t,o=>{L.logEvent(w.keyboardShortcut,{keyboardActionKey:o.key}),T.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:o.key})},{enabled:!0}),_=({resetThreadAction:t,clientThreadId:o}={})=>{const a=K();return v.useMemo(()=>G({resetThreadAction:t,clientThreadId:o,toaster:a}).filter(({enabled:i=!0})=>i),[a,o,t])},Q=({resetThreadAction:t,clientThreadId:o})=>{const a=_({resetThreadAction:t,clientThreadId:o}),i=C(r=>r.isVoiceActive)?[]:a;U(i)};export{F as G,_ as a,I as g,E as i,Q as u};
//# sourceMappingURL=nkcklgtigg32sxvd.js.map
