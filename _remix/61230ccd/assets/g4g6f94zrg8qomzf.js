import{dg as g,dh as nt,di as fe,dj as G,dk as st,dl as ct,dm as b,dn as s,dp as c,dq as ve,dr as ge,ds as it,dt as ut,du as dt,dv as mt,dw as ft,dx as vt,dy as ht,dz as gt,dA as pt,dB as bt,dC as De,dD as Tt,dE as St,dF as Xe,dG as xt,dH as yt,dI as Ve,dJ as Ct,dK as wt,dL as kt,dM as Et,dN as Nt,dO as _t,w as Bt,A as Ht,aq as It}from"./nxdg7myfgles0eps.js";import{r as o,u as C,N as Mt,G as Pt,j as d,J as ee,H as jt,bg as Rt}from"./n0w8fa09c6pt8bok.js";import{B as Ot}from"./nsj7wpo4qc8d47xs.js";import{m as Ge}from"./dh3ydrmf37j963b9.js";function Ue(n,t){var i=yt(n);if(Ve){var m=Ve(n);t&&(m=Ct(m).call(m,function(x){return Xe(n,x).enumerable})),i.push.apply(i,m)}return i}function ze(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){var m;ge(m=Ue(Object(i),!0)).call(m,function(p){bt(n,p,i[p])})}else if(De)Tt(n,De(i));else{var x;ge(x=Ue(Object(i))).call(x,function(p){St(n,p,Xe(i,p))})}}return n}var Lt=function(){return 1/0},Ke=17,Ft="bottom",_="top",qe=1,$t=34,Je={};function Dt(n,t){return n(),xt(n,t)}function We(n){var t=n.mode,i=n.target,m=i.offsetHeight,x=i.scrollHeight,p=i.scrollTop,w=x-p-m<qe,r=p<qe,B=t===_?r:w,j=t!==_?r:w;return{atBottom:w,atEnd:B,atStart:j,atTop:r}}function te(n,t){return n===(t===_?0:"100%")}var pe=function(t){var i=t.checkInterval,m=t.children,x=t.debounce,p=t.debug,w=t.initialScrollBehavior,r=t.mode,B=t.nonce,j=t.scroller,u=o.useMemo(function(){return nt("<ScrollToBottom>",{force:p})},[p]);r=r===_?_:Ft;var k=o.useRef(0),H=o.useRef(w),M=fe(r===_?0:"100%"),U=G(M,3),E=U[0],z=U[1],I=U[2],A=fe(null),K=G(A,3),S=K[0],Q=K[1],y=K[2],q=o.useRef(0),h=o.useRef(0),T=o.useRef(0),le=o.useState(!0),Te=G(le,2),Se=Te[0],xe=Te[1],Ae=o.useState(!0),ye=G(Ae,2),Ce=ye[0],we=ye[1],Qe=o.useState(!0),ke=G(Qe,2),Ee=ke[0],Ne=ke[1],Ze=o.useState(!1),_e=G(Ze,2),Be=_e[0],He=_e[1],et=fe(!0),ne=G(et,3),se=ne[0],R=ne[1],O=ne[2],Z=o.useRef([]),Ie=o.useCallback(function(e){var l=y.current;return Z.current.push(e),l&&e({scrollTop:l.scrollTop}),function(){var a=Z.current,f=st(a).call(a,e);~f&&ct(a).call(a,f,1)}},[Z,y]),ce=o.useCallback(function(){var e=I.current;u(function(){var l;return b(l=["%cSpineTo%c: %conEnd%c is fired."]).call(l,s(c("magenta")),s(c("orange")),[{animateTo:e}])}),k.current=ve(),te(e,r)||R(!1),z(null)},[I,u,k,r,z,R]),L=o.useCallback(function(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=l.behavior,f=y.current;if(typeof e!="number"&&e!=="100%")return console.warn('react-scroll-to-bottom: Arguments passed to scrollTo() must be either number or "100%".');u(function(){var v;return[b(v=["%cscrollTo%c: Will scroll to %c".concat(typeof e=="number"?e+"px":e.replace(/%/g,"%%"),"%c")]).call(v,s(c("lime","")),s(c("purple"))),{behavior:a,nextAnimateTo:e,target:f}]}),a==="auto"?(ce(),f&&(f.scrollTop=e==="100%"?f.scrollHeight-f.offsetHeight:e)):(a!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollTo". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),z(e)),te(e,r)&&(u(function(){var v;return[b(v=["%cscrollTo%c: Scrolling to end, will set sticky to %ctrue%c."]).call(v,s(c("lime","")),s(c("purple"))),[{mode:r,nextAnimateTo:e}]]}),R(!0))},[u,ce,r,z,R,y]),J=o.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=e.behavior;u(function(){var a;return b(a=["%cscrollToBottom%c: Called"]).call(a,s(c("yellow","")))}),l!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToBottom". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),L("100%",{behavior:l||"smooth"})},[u,L]),W=o.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=e.behavior;u(function(){var a;return b(a=["%cscrollToTop%c: Called"]).call(a,s(c("yellow","")))}),l!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToTop". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),L(0,{behavior:l||"smooth"})},[u,L]),Me=o.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=e.behavior;u(function(){var f;return b(f=["%cscrollToEnd%c: Called"]).call(f,s(c("yellow","")))}),l!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToEnd". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var a={behavior:l||"smooth"};r===_?W(a):J(a)},[u,r,J,W]),Pe=o.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=e.behavior;u(function(){var f;return b(f=["%cscrollToStart%c: Called"]).call(f,s(c("yellow","")))}),l!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToStart". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var a={behavior:l||"smooth"};r===_?J(a):W(a)},[u,r,J,W]),re=o.useCallback(function(){var e=y.current;if(e){if(H.current==="auto"){u(function(){var D;return b(D=["%ctarget changed%c: Initial scroll"]).call(D,s(c("blue")))}),e.scrollTop=r===_?0:e.scrollHeight-e.offsetHeight,H.current=!1;return}var l=q.current,a=e.offsetHeight,f=e.scrollHeight,v=e.scrollTop,P=r===_?0:Math.max(0,f-a-v),$=Math.max(0,l-v),ae=j({maxValue:P,minValue:$,offsetHeight:a,scrollHeight:f,scrollTop:v}),F=Math.max(0,Math.min(P,ae)),N;r===_||F!==P?N=v+F:N="100%",u(function(){var D,X,Y;return[b(D=[b(X=b(Y="%cscrollToSticky%c: Will animate from %c".concat(l,"px%c to %c")).call(Y,typeof N=="number"?N+"px":N.replace(/%/g,"%%"),"%c (%c")).call(X,(N==="100%"?P:N)+l,"px%c)")]).call(D,s(c("orange")),s(c("purple")),s(c("purple")),s(c("purple"))),{animateFrom:l,maxValue:P,minValue:$,nextAnimateTo:N,nextValue:F,offsetHeight:a,rawNextValue:ae,scrollHeight:f,scrollTop:v}]}),L(N,{behavior:"smooth"})}},[q,u,r,j,L,y]),tt=o.useCallback(function(e){var l,a=e.timeStampLow,f=I.current,v=y.current,P=f!==null;if(!(a<=k.current||!v)){var $=We({mode:r,target:v}),ae=$.atBottom,F=$.atEnd,N=$.atStart,D=$.atTop;xe(ae),we(F),He(N),Ne(D);var X=v.offsetHeight,Y=v.scrollHeight,Re=h.current,Oe=T.current,de=X!==Re,me=Y!==Oe;if(de&&(h.current=X),me&&(T.current=Y),!de&&!me){var oe=P&&te(f,r)||F;O.current!==oe&&(u(function(){var V,Le,Fe,$e;return[b(V=["%conScroll%c: %csetSticky%c(%c".concat(oe,"%c)")]).call(V,s(c("red")),s(c("red")),s(c("purple"))),b(Le=[b(Fe=b($e="(animating = %c".concat(P,"%c && isEnd = %c")).call($e,te(f,r),"%c) || atEnd = %c")).call(Fe,F,"%c")]).call(Le,s(c("purple")),s(c("purple")),s(c("purple")),[{animating:P,animateTo:f,atEnd:F,mode:r,offsetHeight:v.offsetHeight,scrollHeight:v.scrollHeight,sticky:O.current,nextSticky:oe}])]}),R(oe))}else O.current&&(u(function(){var V;return[b(V=["%conScroll%c: Size changed while sticky, calling %cscrollToSticky()%c"]).call(V,s(c("red")),s(c("orange")),[{offsetHeightChanged:de,scrollHeightChanged:me}]),{nextOffsetHeight:X,prevOffsetHeight:Re,nextScrollHeight:Y,prevScrollHeight:Oe}]}),re());var lt=v.scrollTop;ge(l=Z.current).call(l,function(V){return V({scrollTop:lt})})}},[I,u,k,r,h,T,Z,re,xe,we,He,Ne,R,O,y]);o.useEffect(function(){if(S){var e=!1,l=Dt(function(){var a=y.current,f=I.current!==null;O.current?We({mode:r,target:a}).atEnd?e=!1:e?ve()-e>$t&&(f||(q.current=a.scrollTop,u(function(){var v;return b(v=["%cInterval check%c: Should sticky but not at end, calling %cscrollToSticky()%c to scroll"]).call(v,s(c("navy")),s(c("orange")))}),re()),e=!1):e=ve():a.scrollHeight<=a.offsetHeight&&!O.current&&(u(function(){var v;return[b(v=["%cInterval check%c: Container is emptied, setting sticky back to %ctrue%c"]).call(v,s(c("navy")),s(c("purple"))),[{offsetHeight:a.offsetHeight,scrollHeight:a.scrollHeight,sticky:O.current}]]}),R(!0))},Math.max(Ke,i)||Ke);return function(){return clearInterval(l)}}},[I,i,u,r,re,R,O,S,y]);var je=o.useMemo(function(){var e=Je[B]||(Je[B]=it({key:"react-scroll-to-bottom--css-"+ut(),nonce:B}));return function(l){return e.css(l)+""}},[B]),rt=o.useMemo(function(){return{observeScrollPosition:Ie,setTarget:Q,styleToClassName:je}},[Ie,Q,je]),ie=o.useMemo(function(){return{atBottom:Se,atEnd:Ce,atStart:Be,atTop:Ee,mode:r}},[Se,Ce,Be,Ee,r]),ue=o.useMemo(function(){var e=E!==null;return{animating:e,animatingToEnd:e&&te(E,r),sticky:se}},[E,r,se]),at=o.useMemo(function(){return ze(ze({},ie),ue)},[ie,ue]),ot=o.useMemo(function(){return{scrollTo:L,scrollToBottom:J,scrollToEnd:Me,scrollToStart:Pe,scrollToTop:W}},[L,J,Me,Pe,W]);return o.useEffect(function(){if(S){var e=function(){T.current=S.scrollHeight};return S.addEventListener("focus",e,{capture:!0,passive:!0}),function(){return S.removeEventListener("focus",e)}}},[S]),u(function(){var e;return[b(e=["%cRender%c: Render"]).call(e,s(c("cyan",""))),{animateTo:E,animating:E!==null,sticky:se,target:S}]}),C.createElement(dt.Provider,{value:rt},C.createElement(mt.Provider,{value:ot},C.createElement(ft.Provider,{value:at},C.createElement(vt.Provider,{value:ie},C.createElement(ht.Provider,{value:ue},m,S&&C.createElement(gt,{debounce:x,name:"scroll",onEvent:tt,target:S}),S&&E!==null&&C.createElement(pt,{name:"scrollTop",onEnd:ce,target:S,value:E}))))))};pe.defaultProps={checkInterval:100,children:void 0,debounce:17,debug:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:Lt};pe.propTypes={checkInterval:g.number,children:g.any,debounce:g.number,debug:g.bool,initialScrollBehavior:g.oneOf(["auto","smooth"]),mode:g.oneOf(["bottom","top"]),nonce:g.string,scroller:g.func};var Vt={position:"relative"},be=function(t){var i=t.children,m=t.className,x=t.followButtonClassName,p=t.scrollViewClassName,w=wt()(Vt);return C.createElement("div",{className:kt(w,(m||"")+"")},C.createElement(Et,{className:(p||"")+""},i),C.createElement(Nt,{className:(x||"")+""}))};be.defaultProps={children:void 0,className:void 0,followButtonClassName:void 0,scrollViewClassName:void 0};be.propTypes={children:g.any,className:g.string,followButtonClassName:g.string,scrollViewClassName:g.string};var Ye=function(t){var i=t.checkInterval,m=t.children,x=t.className,p=t.debounce,w=t.debug,r=t.followButtonClassName,B=t.initialScrollBehavior,j=t.mode,u=t.nonce,k=t.scroller,H=t.scrollViewClassName;return C.createElement(pe,{checkInterval:i,debounce:p,debug:w,initialScrollBehavior:B,mode:j,nonce:u,scroller:k},C.createElement(be,{className:x,followButtonClassName:r,scrollViewClassName:H},m))};Ye.defaultProps={checkInterval:void 0,children:void 0,className:void 0,debounce:void 0,debug:void 0,followButtonClassName:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:void 0,scrollViewClassName:void 0};Ye.propTypes={checkInterval:g.number,children:g.any,className:g.string,debounce:g.number,debug:g.bool,followButtonClassName:g.string,initialScrollBehavior:g.oneOf(["auto","smooth"]),mode:g.oneOf(["bottom","top"]),nonce:g.string,scroller:g.func,scrollViewClassName:g.string};_t();const Gt=5,Ut="Default";function zt(n){const t={};return n.forEach(i=>{const m=i.group??Ut;t[m]||(t[m]=[]),t[m].push(i)}),t}function Xt({tagOptions:n,onSubmit:t,onMoreClicked:i,onCancel:m,maxInlineTags:x=Gt,modalOnly:p=!1,modalTitle:w,multiple:r,children:B,allowEmptySubmit:j=!1}){const u=Pt(),[k,H]=o.useState(p?"modal":"inline"),[M,U]=o.useState([]),[E,z]=o.useState(void 0),I=o.useCallback(h=>{t(h),H("submitted"),setTimeout(()=>{H("closed")},1500)},[t]),A=o.useMemo(()=>Bt(I,500),[I]),K=h=>{let T=[];return r?T=M.includes(h)?M.filter(le=>le!==h):[...M,h]:T=[h],U(T),T},S=()=>{I({tags:M,textFeedback:E,tagChoices:Q,source:"modal"})},Q=n.map(h=>h.value),y=zt(n),q=Object.keys(y);return d.jsxs(d.Fragment,{children:[!p&&d.jsx(Ht,{children:k!=="closed"&&d.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[k==="submitted"&&d.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:d.jsx("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:d.jsx("div",{className:"text-sm",children:d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(k)&&d.jsxs("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[d.jsx("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{H("closed"),A.cancel(),m==null||m()},children:d.jsx(Ot,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),d.jsx("div",{className:"text-sm text-token-text-secondary",children:d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.slice(0,x).map(h=>d.jsx(he,{$selected:M.includes(h.value),onClick:()=>{const T=K(h.value);A({tags:T,tagChoices:Q,source:"inline"})},children:h.label},h.value)),d.jsx(he,{onClick:()=>{i==null||i(),A.cancel(),H("modal")},children:d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),k==="modal"&&d.jsxs(jt,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:w??d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{U([]),H(p?"closed":"inline"),p&&(m==null||m())},showCloseButton:!0,primaryButton:d.jsx(Rt,{color:"primary",disabled:M.length===0&&!E&&!j,onClick:S,children:d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[d.jsx("div",{className:"flex flex-col gap-6",children:q.map(h=>d.jsxs("div",{children:[q.length>1&&d.jsx("div",{className:"mb-3 text-sm font-semibold",children:h}),d.jsx("div",{className:"flex flex-wrap gap-3",children:y[h].map(T=>d.jsx(he,{$selected:M.includes(T.value),onClick:()=>K(T.value),children:T.label},T.value))},h)]},h))}),d.jsx(It,{name:"feedback",type:"text",className:"mt-6",placeholder:u.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:E??"",onChange:h=>z(h.target.value),onPressEnter:S}),B]})]})}const he=Mt.button`
  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary
  ${({$selected:n})=>n&&"!bg-token-text-primary !text-token-main-surface-primary"}
`;export{Ye as B,Xt as I,he as T};
//# sourceMappingURL=g4g6f94zrg8qomzf.js.map
