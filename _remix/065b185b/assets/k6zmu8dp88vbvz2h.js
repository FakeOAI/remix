import{dK as p,bo as E,r as a,a7 as O,R as m,aQ as i,aR as u}from"./ipnfovpzfewxgzg3.js";import"./mmcqi5fu0b3qaeam.js";function b(){const{pluginId:t}=p(),s=E(),l=a.useRef(!1),[h,R]=a.useState(""),{code:r,error:o,error_description:n,state:c}=Object.fromEntries(new URLSearchParams(h.substring(1)).entries());return a.useEffect(()=>{R(window.location.hash)},[]),a.useEffect(()=>{if(l.current)return;t&&r&&c&&(l.current=!0);async function S(){const d=`https://chatgpt.com/ccc/${t}/oauth/callback`;if(!(!t||!r||!c))try{const e=await m.connectorOauthCallback(t,r,d,c);if(e.success){const f=new URL(i(u.OAUTH_SUCCESS,e.redirect_path));f.searchParams.set("oauth_success","true"),s(f.toString())}else s(i(u.CUSTOM_ERROR,e.redirect_path,e.error??e.message))}catch{s(i(u.CUSTOM_ERROR))}}S()},[t,r,c,s]),a.useEffect(()=>{o&&O.danger(`${o}${n?`: ${n}`:""}`)},[o,n]),null}export{b as default};
//# sourceMappingURL=k6zmu8dp88vbvz2h.js.map
