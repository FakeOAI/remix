import{dL as S,ax as m,r as a,a7 as E,R as O,b1 as u,b2 as h}from"./m7d6epqb1gfbpzoo.js";import"./b4kmzz1cisjojs04.js";function _(){const{pluginId:t}=S(),s=m(),l=a.useRef(!1),[f,p]=a.useState(""),{code:r,error:o,error_description:i,state:c}=Object.fromEntries(new URLSearchParams(f.substring(1)).entries());return a.useEffect(()=>{p(window.location.hash)},[]),a.useEffect(()=>{if(l.current)return;t&&r&&c&&(l.current=!0);async function R(){const d=`https://chatgpt.com/ccc/${t}/oauth/callback`;if(!(!t||!r||!c))try{const e=await O.connectorOauthCallback(t,r,d,c);if(e.success){const n=new URL(u(h.OAUTH_SUCCESS,e.redirect_path),location.origin);n.searchParams.set("oauth_success","true"),s(n.pathname+n.search+n.hash)}else s(u(h.CUSTOM_ERROR,e.redirect_path,e.error??e.message))}catch{s(u(h.CUSTOM_ERROR))}}R()},[t,r,c,s]),a.useEffect(()=>{o&&E.danger(`${o}${i?`: ${i}`:""}`)},[o,i]),null}export{_ as default};
//# sourceMappingURL=mw6dzldokadpb12y.js.map
