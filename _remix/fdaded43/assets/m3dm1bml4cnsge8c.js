import{r as p,fJ as R,bM as P,ay as W,cq as H,j as u,f2 as E,fK as K,fL as U,fM as X,aN as $,fN as N,b9 as G,fO as V}from"./n62zftee9av9wxib.js";import{bW as z,bX as Q}from"./cwe5tk2381hhmaki.js";import{hm as Z,c2 as J,bM as I,gT as Y}from"./o7uqz2086hs2sxty.js";import{f as ee}from"./dq5zt5kvo9prtykf.js";import{u as te}from"./dsfulqwjgg8b3rbn.js";import{l as ne,f as se}from"./otwiqv3ij3chyjvy.js";import{C as T}from"./gjp8ijz8qa75b0nl.js";import"./ewowfsm6mt6yl8be.js";import"./oiyh56q4asxv9zpv.js";import"./kh7ejisiyryls95z.js";import"./c2ttmn305kpdiwjd.js";import"./hit74na76trjx6mi.js";import"./gqih2li7wtf179yn.js";import"./g27nrfmr1ekx7oyo.js";import"./fglbg0zea942onjp.js";import"./f04hhhnhjubnztqe.js";import"./dq77x2igq9ozz8e3.js";import"./owp8xspxl98w3sw0.js";import"./cnce15y1yn81dr2v.js";import"./bidqp08wrw63i1zx.js";import"./gtunh3bdue2ip708.js";import"./nm9i3dg6yq3exjkz.js";import"./duy3k499voiuwyff.js";import"./dfj4jp1dhk93dvys.js";import"./eb50jk58smie7mpn.js";import"./j1tz35td7zx6z4ns.js";import"./ko3ey6fdnd8zn4l4.js";import"./kcv84bmt7f5ule0f.js";import"./dblyzm55p4pnkf3l.js";import"./d7nm9yyzmzy5voxd.js";import"./d0xgcr4lqi1yaq5l.js";import"./mg2ddvutf9gwpn5o.js";import"./hrhszdgwwf36loic.js";import"./b8g9uqw5z699l3l1.js";import"./oebntra7pkpxix2r.js";const x=p.createContext(void 0),re={};x.Provider;const oe=()=>p.useContext(x)?p.useContext(x):re,C=typeof window>"u"?global:window,v="@griffel/";function ie(e,t){return C[Symbol.for(v+e)]||(C[Symbol.for(v+e)]=t),C[Symbol.for(v+e)]}const b=ie("DEFINITION_LOOKUP_TABLE",{}),y="data-make-styles-bucket",ce="data-priority",w=7,_="___",le=_.length+w,ae=0,ue=1;function de(e){const t=e.length;if(t===w)return e;for(let s=t;s<w;s++)e+="0";return e}function M(e,t,s=[]){return _+de(Z(e+t))}function k(e,t){let s="",n="";for(const o in e){const r=e[o];if(r===0){n+=o+" ";continue}const i=Array.isArray(r),c=t==="rtl"?(i?r[1]:r)+" ":(i?r[0]:r)+" ";s+=c,n+=c}return[s.slice(0,-1),n.slice(0,-1)]}function O(e,t){const s={};for(const n in e){const[o,r]=k(e[n],t);if(r===""){s[n]="";continue}const i=M(r,t),c=i+(o===""?"":" "+o);b[i]=[e[n],t],s[n]=c}return s}const A={};function fe(){let e=null,t="",s="";const n=new Array(arguments.length);for(let l=0;l<arguments.length;l++){const h=arguments[l];if(typeof h=="string"&&h!==""){const f=h.indexOf(_);if(f===-1)t+=h+" ";else{const S=h.substr(f,le);f>0&&(t+=h.slice(0,f)),s+=S,n[l]=S}}}if(s==="")return t.slice(0,-1);const o=A[s];if(o!==void 0)return t+o;const r=[];for(let l=0;l<arguments.length;l++){const h=n[l];if(h){const f=b[h];f&&(r.push(f[ae]),e=f[ue])}}const i=Object.assign.apply(Object,[{}].concat(r)),[c,a]=k(i,e),d=M(a,e,n),m=d+" "+c;return A[s]=m,b[d]=[i,e],t+m}function me(e){return Array.isArray(e)?e:[e]}function he(e,t,s,n){const o=[];if(n[y]=t,n[ce]=String(s),e)for(const i in n)e.setAttribute(i,n[i]);function r(i){return e!=null&&e.sheet?e.sheet.insertRule(i,e.sheet.cssRules.length):o.push(i)}return{elementAttributes:n,insertRule:r,element:e,bucketName:t,cssRules(){return e!=null&&e.sheet?Array.from(e.sheet.cssRules).map(i=>i.cssText):o}}}const pe=["r","d","l","v","w","f","i","h","a","s","k","t","m","c"],D=pe.reduce((e,t,s)=>(e[t]=s,e),{});function ge(e,t,s){return(e==="m"?e+t:e)+s}function Se(e,t,s,n,o={}){var r,i;const c=e==="m",a=(r=o.m)!==null&&r!==void 0?r:"0",d=(i=o.p)!==null&&i!==void 0?i:0,m=ge(e,a,d);if(!n.stylesheets[m]){const l=t&&t.createElement("style"),h=he(l,e,d,Object.assign({},n.styleElementAttributes,c&&{media:a}));n.stylesheets[m]=h,t&&l&&t.head.insertBefore(l,Ce(t,s,e,n,o))}return n.stylesheets[m]}function ye(e,t,s){var n,o;const r=t+((n=s.m)!==null&&n!==void 0?n:""),i=e.getAttribute(y)+((o=e.media)!==null&&o!==void 0?o:"");return r===i}function Ce(e,t,s,n,o={}){var r,i;const c=D[s],a=(r=o.m)!==null&&r!==void 0?r:"",d=(i=o.p)!==null&&i!==void 0?i:0;let m=g=>c-D[g.getAttribute(y)],l=e.head.querySelectorAll(`[${y}]`);if(s==="m"){const g=e.head.querySelectorAll(`[${y}="${s}"]`);g.length&&(l=g,m=B=>n.compareMediaQueries(a,B.media))}const h=g=>ye(g,s,o)?d-Number(g.getAttribute("data-priority")):m(g),f=l.length;let S=f-1;for(;S>=0;){const g=l.item(S);if(h(g)>0)return g.nextSibling;S--}return f>0?l.item(0):t?t.nextSibling:null}function j(e,t){try{e.insertRule(t)}catch{}}let ve=0;const xe=(e,t)=>e<t?-1:e>t?1:0;function be(e=typeof document>"u"?void 0:document,t={}){const{classNameHashSalt:s,unstable_filterCSSRule:n,insertionPoint:o,styleElementAttributes:r,compareMediaQueries:i=xe}=t,c={classNameHashSalt:s,insertionCache:{},stylesheets:{},styleElementAttributes:Object.freeze(r),compareMediaQueries:i,id:`d${ve++}`,insertCSSRules(a){for(const d in a){const m=a[d];for(let l=0,h=m.length;l<h;l++){const[f,S]=me(m[l]),g=Se(d,e,o||null,c,S);c.insertionCache[f]||(c.insertionCache[f]=d,n?n(f)&&j(g,f):j(g,f))}}}};return c}const we=()=>{const e={};return function(s,n){e[s.id]===void 0&&(s.insertCSSRules(n),e[s.id]=!0)}};function Ee(e,t,s=we){const n=s();let o=null,r=null;function i(c){const{dir:a,renderer:d}=c,m=a==="ltr";return m?o===null&&(o=O(e,a)):r===null&&(r=O(e,a)),n(d,t),m?o:r}return i}function _e(){return typeof window<"u"&&!!(window.document&&window.document.createElement)}const L=R.useInsertionEffect?R.useInsertionEffect:void 0,Re=()=>{const e={};return function(s,n){if(L&&_e()){L(()=>{s.insertCSSRules(n)},[s,n]);return}e[s.id]===void 0&&(s.insertCSSRules(n),e[s.id]=!0)}},Ne=p.createContext(be());function Ie(){return p.useContext(Ne)}const Te=p.createContext("ltr");function Oe(){return p.useContext(Te)}function Ae(e,t){const s=Ee(e,t,Re);return function(){const o=Oe(),r=Ie();return s({dir:o,renderer:r})}}const De=Ae({root:{mc9l5x:"f1w7gpdv",Bg96gwp:"fez10in",ycbfsm:"fg4l7m0"},rtl:{Bz10aip:"f13rod7r"}},{d:[".f1w7gpdv{display:inline;}",".fez10in{line-height:0;}",".f13rod7r{-webkit-transform:scaleX(-1);-moz-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1);}"],t:["@media (forced-colors: active){.fg4l7m0{forced-color-adjust:auto;}}"]}),je=(e,t)=>{const{title:s,primaryFill:n="currentColor",...o}=e,r={...o,title:void 0,fill:n},i=De(),c=oe();return r.className=fe(i.root,(t==null?void 0:t.flipInRtl)&&(c==null?void 0:c.textDirection)==="rtl"&&i.rtl,r.className),s&&(r["aria-label"]=s),!r["aria-label"]&&!r["aria-labelledby"]?r["aria-hidden"]=!0:r.role="img",r},Le=(e,t,s,n)=>{const o=t==="1em"?"20":t,r=p.forwardRef((i,c)=>{const a={...je(i,{flipInRtl:void 0}),ref:c,width:t,height:t,viewBox:`0 0 ${o} ${o}`,xmlns:"http://www.w3.org/2000/svg"};return p.createElement("svg",a,...s.map(d=>p.createElement("path",{d,fill:a.fill})))});return r.displayName=e,r},qe=Le("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function Fe({onNewThread:e,onOpenInMainWindow:t}){return u.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex h-8 w-full items-center justify-between px-2",children:[u.jsxs("div",{children:[u.jsx("button",{onClick:e,className:"text-token-text-tertiary hover:text-token-text-primary",children:u.jsx(z,{})}),t&&u.jsx("button",{onClick:t,className:"pl-2 text-token-text-tertiary hover:text-token-text-primary",children:u.jsx(Q,{})})]}),u.jsx("button",{className:"text-token-text-tertiary hover:text-token-text-primary",onClick:()=>{E(!1)},children:u.jsx(qe,{className:"text-token-text-tertiary hover:text-token-text-primary"})})]})}function Me({onNewThread:e,onOpenInMainWindow:t,children:s}){const n=p.useRef(null);return p.useEffect(()=>{if(n.current){const o=n.current.ownerDocument,r=i=>{i.key==="Escape"&&!i.shiftKey&&!i.ctrlKey&&!i.metaKey&&E(!1)};return o.addEventListener("keydown",r),()=>{o.removeEventListener("keydown",r)}}},[]),u.jsxs("div",{className:"flex h-full w-full flex-col pt-8",ref:n,children:[u.jsx(Fe,{onNewThread:e,onOpenInMainWindow:t}),s]})}function ke(){const e=T.useStore(),{clientThreadId:t}=T.useState();te(t,{kind:P.PrimaryAssistant});const s=W(),n=ne(r=>se.resolveThreadId(t,r)),o=H();return p.useEffect(()=>{const r=()=>{var i;(i=o.document.getElementById("prompt-textarea"))==null||i.focus()};return o.addEventListener("focus",r),()=>{o.removeEventListener("focus",r)}},[o]),u.jsx(Me,{onNewThread:()=>{e.newThread()},onOpenInMainWindow:n!==t?()=>{s(`/c/${t}`),E(!1,{focusMainWindow:!0})}:void 0,children:u.jsx(K,{children:u.jsx(J,{children:u.jsxs(I.Provider,{store:()=>new I,children:[u.jsx(ee,{clientThreadId:t,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},t),u.jsx(Y,{clientThreadId:t})]},t)})})})}let q=!1;function bt(){var e;(e=U)==null||e.registerObserver(X)}function F(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function Be(e,t){e.head.querySelectorAll("link, style").forEach(n=>{F(n)&&t.head.appendChild(n.cloneNode(!0))});const s=new MutationObserver(n=>{n.forEach(o=>{o.type==="childList"&&o.addedNodes.forEach(r=>{if(F(r)){const i=t.head.appendChild(r.cloneNode(!0));if(r instanceof HTMLStyleElement&&r.dataset.emotion){const{sheet:c}=r,{sheet:a}=i;if(c&&a)for(const d of c.cssRules)a.insertRule(d.cssText)}}})})});return s.observe(e.head,{childList:!0}),()=>{s.disconnect()}}function Pe(e,t){for(const n of e.attributes)t.setAttribute(n.name,n.value);const s=new MutationObserver(n=>{n.forEach(o=>{if(o.type==="attributes"&&o.attributeName!=null){const r=e.getAttribute(o.attributeName);r==null?t.removeAttribute(o.attributeName):t.setAttribute(o.attributeName,r)}})});return s.observe(e,{attributes:!0}),()=>{s.disconnect()}}function wt(){const[e,t]=p.useState(null),{value:s}=$("3653083604");return p.useEffect(()=>{if(!s||q||typeof window>"u")return;const n=window.open("about:blank",N);if(!n)throw new Error("ChatBar: window.open() did not create a window");q=!0,Be(document,n.document),Pe(document.documentElement,n.document.documentElement),t(n.document.body.appendChild(n.document.createElement("div"))),n.addEventListener("unload",o=>{n.close()})},[s]),e&&G.createPortal(u.jsx(V,{window:e.ownerDocument.defaultView,children:u.jsx(ke,{})}),e,N)}export{wt as DesktopChatBar,bt as initDesktop};
//# sourceMappingURL=m3dm1bml4cnsge8c.js.map
