const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/b5m9c7wtpdhnd0b6.js","assets/lrt789z2rawt9v6n.js","assets/qm9djk421n6v15er.js","assets/root-o085mhci.css","assets/ga842uuse918os7p.js","assets/conversation-small-lkohtmkm.css","assets/f8k90dux8375tm93.js","assets/d6rdv6no1eiunlr4.js","assets/orvu0y3lq8gw4rle.js","assets/o6ivl8lube32l54t.js","assets/dzwkc95qy79m56h5.js","assets/kt9eu9t0kl22d0ck.js","assets/eabkz1hpo9dh58mn.js","assets/nfplna49ltkqb9yt.js","assets/d2294a5x01ytydl1.js","assets/e0o1s2czdwq08bpj.js","assets/dqu2730pzjqtes9g.js","assets/fzrn137102spawew.js","assets/o959o66h8gsqksmt.js","assets/oj6qvnn613i8efeb.js","assets/od1cq6oiwa02ok00.js","assets/fq30kker6wn7nlkf.js","assets/evpgqbof0gzicjqy.js","assets/k3w9txxkyz6b4hwg.js","assets/miinhxpwz4mip7ta.js","assets/kqwdyvkaaavvn8k3.js","assets/bhb3151xg54j0a40.js","assets/grvw8wsszctb0jch.js","assets/dlgmmqx3xv1rvfdq.js","assets/o01dxg6o02cp36eb.js","assets/kd3hazba4nkm97gf.js","assets/kqdcf9jwz4z7jh3g.js","assets/c4bxzbp1808foto4.js","assets/lemkh62t0k2tpk17.js","assets/lfl9q1ra3himjl15.js","assets/cqhnt242jawpw4n5.js","assets/fxv70hg9u03q7fmv.js","assets/kqmevmaenb7njmaz.js","assets/mmbqunmky4x3dwvj.js","assets/nqhdnktks2nuzl68.js","assets/e2k9g3xhsh29s84e.js","assets/8fbnq60f77qaai93.js","assets/fcva85b34ukmvnrh.js","assets/n3dil120yj9awn6j.js","assets/m056thopp3j01jt8.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{r as d,m as e,a8 as Be,w as Fe,L as be,ev as Ve,a3 as Re,dk as We,dj as He,dh as Ue,y as Ge,ag as ze,gn as Ke,o as B,c5 as qe,aT as xe,hr as oe,cb as Qe,bb as Xe,K as Ye,aJ as x,aK as S,aw as Je,dM as y,bg as $e,b3 as ne,dK as Se,gY as ie,aD as Ze,gS as I,bv as ea,av as aa,a7 as re,a9 as sa,d3 as de,D as ta,ci as oa,cj as na,ck as ia,dt as ra,g3 as da,t as la,V as ca}from"./lrt789z2rawt9v6n.js";import{hQ as ua,hR as Me,aD as Ce,hS as ha,hk as ga,hT as fa,hU as ma,bS as N,hV as pa,hW as ba,hX as xa,hY as Sa,hZ as Ma,h_ as Ca,h$ as va,ef as ja,i0 as wa,i1 as Aa,i2 as ka,i3 as Oa,i4 as ya,i5 as Ea,i6 as Ta,i7 as Pa,i8 as Na,i9 as _a,ia as Da,ib as Ia,ic as La,id as Ba,ie as Fa,ig as Va,ih as Ra,ii as Wa,ij as Ha,ik as Ua,c1 as ve,q as L,U as le,bT as V,il as Ga,im as za,cH as je,bd as Ka,cI as qa,cS as we,T as Ae,io as ke,ip as Qa,iq as Xa,fK as Oe,ir as ye,is as Ee,it as Te,iu as Ya,ap as Pe,be as Ne,iv as ce,hp as P,fr as Ja,bu as F,bv as ue,o as $a,iw as Za,u as es,eW as as,et as ss,eV as ts,ix as os,iy as ns,iz as is,iA as rs,iB as ds,iC as ls,iD as he,iE as cs,an as us,iF as hs,iG as gs,bb as fs,cF as ms,cG as ps,iH as bs,iI as xs,cJ as Ss,iJ as Ms}from"./ga842uuse918os7p.js";import{m as O}from"./orvu0y3lq8gw4rle.js";import{S as ge,b as Cs,c as vs}from"./lemkh62t0k2tpk17.js";import{S as js,C as ws}from"./cqhnt242jawpw4n5.js";import{T as _e,C as De}from"./fxv70hg9u03q7fmv.js";import{N as As}from"./lfl9q1ra3himjl15.js";import{C as ks}from"./8fbnq60f77qaai93.js";function Os({clientThreadId:a}){const s=ua(o=>o.notifications);return d.useEffect(()=>{s.filter(t=>t.clientThreadId===a).map(t=>t.id).filter(t=>t!==void 0).forEach(t=>Me(t))},[a,s]),s.length===0?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(Ce,{children:s.map(o=>e.jsx(ys,{...o},o.id))})})}function ys({...a}){const s=Be(),o=Fe(),t=be(),i=Ve(a.clientThreadId),r=()=>{i&&ga(s,o,i),a.id&&Me(a.id)};return e.jsxs(O.div,{onClick:r,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(ha,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:a.title??t.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:a.subtitle??t.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const Es=({onClose:a})=>{const s=be(),o=N(V.isBusinessWorkspace),t=N(r=>r.currentWorkspace),i=o?s.formatMessage(fe.workspaceWelcome,{workspaceName:t?.name}):"ChatGPT";return e.jsx(Qe,{isOpen:!0,onClose:Xe,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:s.formatMessage(fe.personalOnboardingSubheading),children:e.jsx(Ga,{onClose:a,scope:za.Personal})})};function Ts({clientThreadId:a}){const[s,o]=d.useState(0),{hasSeenOnboardingDate:t}=fa(),{hasSeenTeamOwnerOnboardingDate:i}=ma(),r=N(V.isBusinessWorkspace),h=Re(),[n,g]=d.useState(!1),{data:m,isPending:p,isEnabled:v}=pa(),u=ba(m,p&&v),{eligible:M}=xa(),j=We(),w=He(),E=Ue(),T=Ge(()=>ze.getThread(a)),A=Ke(a)||!T,k=B.getConversationOrigin(a),{data:f,isError:l}=qe(),b=f!=null,R=f&&f?.accountItems.length>1&&f.currentAccountId==null,W=f?.accountItems.some(c=>c.isPersonalAccount()),H=!!f?.accountItems&&f.accountItems.length>0&&f.accountItems.every(({canAccessWithCurrentSession:c})=>!c),{eligible:U,isLoading:G}=Sa(),{value:z}=xe("1542198993"),{punchOutRequireLoginInfo:K}=Ma(),{state:q}=Ca(),{isOpen:Q,isLoading:X}=va(),{isOpen:Y,isLoading:J}=ja(),{isOpen:$,isLoading:Z}=wa(),{isOpen:ee,isLoading:ae}=Aa(),{state:se}=ka(),C=d.useMemo(()=>[{Component:Oa,getModalState:()=>K?"show":"hide",isDeferrable:!1},{Component:ya,getModalState:()=>q,isDeferrable:!1},{Component:Ea,getModalState:()=>se,isDeferrable:!1},{Component:Ta,getModalState:()=>X||A?"loading":k===oe.APPLE?"hide":Q?"show":"hide",isDeferrable:!1},{Component:Pa,getModalState:()=>ae||A?"loading":k===oe.APPLE?"hide":ee?"show":"hide",isDeferrable:!1},{Component:Es,getModalState:()=>r?"hide":t===null?"loading":t===!1?"show":"hide",isDeferrable:!0},{Component:Na,getModalState:()=>l?"hide":R?"show":b?"hide":"loading",isDeferrable:!1},{Component:_a,getModalState:()=>j!==null?"show":l||b?"hide":"loading",isDeferrable:!1},{Component:Da,getModalState:()=>w!==null?"show":l||b?"hide":"loading",isDeferrable:!1},{Component:Ia,getModalState:()=>E!=null?"show":l||b?"hide":"loading",isDeferrable:!1},{Component:La,getModalState:()=>b?H?"show":"hide":"loading",isDeferrable:!1},{Component:Ba,getModalState:()=>J?"loading":Y?"show":"hide",isDeferrable:!1},{Component:Fa,getModalState:()=>Z?"loading":$?"show":"hide",isDeferrable:!1},{Component:Va,getModalState:()=>"hide",isDeferrable:!1},{Component:Ra,getModalState:()=>!h?.isTeam()||!h?.isOwnerOfAccount()||!W?"hide":!b||i===null?"loading":i===!1?"show":"hide",isDeferrable:!1},{Component:Wa,getModalState:()=>r?t===null?"loading":t===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Ha,getModalState:()=>G?"loading":U&&z?"show":"hide",isDeferrable:!1},{Component:Ua,getModalState:()=>u,isDeferrable:!1}].filter(c=>!(c.isDeferrable&&n)),[M,K,q,E,b,t,i,W,r,l,j,w,h,H,R,u,n,z,U,G,Q,X,ee,ae,se,J,Y,$,Z,k,A]);d.useEffect(()=>{if(C[s]&&C[s].getModalState()==="hide"){const c=C.findIndex(Le=>Le.getModalState()!=="hide");o(c)}},[s,C]);const _=C[s],D=_?.getModalState()==="show";if(d.useEffect(()=>{const c=ve.getState().activeModals.has(L.BlockingInitialComponent);D!==c&&(D?le.openModal(L.BlockingInitialComponent):le.closeModal(L.BlockingInitialComponent))},[D]),_==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const te=_.getModalState();if(te==="loading")return null;te==="hide"&&o(c=>c+1);const Ie=C[s].Component;return e.jsx(Ie,{onClose:()=>{g(!0),o(c=>c+1)}})}const fe=Ye({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ps=x(()=>S(()=>import("./b5m9c7wtpdhnd0b6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(a=>a.CanvasFocusedViewManager)),Ns=x(()=>S(()=>import("./evpgqbof0gzicjqy.js"),__vite__mapDeps([22,1,2,3,23,4,5,24,25,26,27,8])).then(a=>a.SearchResultsModal));function _s({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){const i=Je();je({clientThreadId:a});const{createNewThread:r,onThreadCreated:h,resetThread:n}=Ka({clientThreadId:a,setClientThreadId:s});qa({resetThreadAction:n,clientThreadId:a});const g=y("searchSources"),m=y("summarizer"),p=we();return e.jsxs(Ae,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(ke,{clientThreadId:a,urlThreadId:o}),e.jsxs(ge,{hideNavigation:i,mobileHeaderContent:e.jsx(Qa,{clientThreadId:a,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Xa,{clientThreadId:a}),mobileHeaderLeftContent:e.jsx(Cs,{onNewChatButtonClick:n}),mobileHeaderRightContent:e.jsx(vs,{onNewChatButtonClick:n}),sidebar:e.jsx(As,{navHeader:a?e.jsx(js,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:r}):null,children:e.jsx(ws,{clientThreadId:a,onNewThread:r})}),threadFlyout:e.jsxs(e.Fragment,{children:[g&&e.jsx(Oe,{clientThreadId:a}),p&&m&&e.jsx(ye,{clientThreadId:a})]}),children:[e.jsx(Ee,{}),e.jsx(_e,{clientThreadId:a,onCreate:h,prefetchSearch:t},a),e.jsxs(ge.Sidebars,{children:[e.jsx(Ps,{clientThreadId:a}),e.jsx(Te,{clientThreadId:a})]})]}),e.jsx(Ds,{clientThreadId:a})]})}function Ds({clientThreadId:a}){const s=$e(),o=s?.includes(ne.SearchTool)&&!s?.includes(ne.SearchToolHoldout),t=Ya();return Se()&&(!t||!o)&&e.jsx(Ns,{clientThreadId:a})}const me=450;function Is({children:a,clientThreadId:s,isOpen:o,onClose:t}){const i=Pe();return e.jsxs(Ce,{children:[o&&i&&e.jsx(Ne,{clientThreadId:s,children:e.jsx(ie,{children:e.jsx(ce.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(O.div,{className:"h-full w-full bg-token-main-surface-secondary",...P}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(O.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:me},...P,children:e.jsx(De,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:a})]})]})})})}),o&&!i&&e.jsx(ie,{children:e.jsx(ce.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(O.div,{className:"h-full w-full bg-token-main-surface-secondary",...P}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(O.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:me},...P,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(_e,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const Ls=x(()=>S(()=>import("./dlgmmqx3xv1rvfdq.js"),__vite__mapDeps([28,1,2,3,4,5]))),Bs=x(()=>S(()=>import("./o01dxg6o02cp36eb.js"),__vite__mapDeps([29,1,2,3,4,5,30,31,32,8,33,34,19,35,36,9,15,37,38,39,40,41])).then(a=>a.ImageEditor));function Fs({clientThreadId:a}){const s=Ja();d.useEffect(()=>{F.close()},[a]);let o;return s?.type===ue.ADAVisualization?o=e.jsx(Ls,{clientThreadId:a,visualization:s.visualization}):s?.type===ue.Image&&(o=e.jsx(Bs,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(Is,{clientThreadId:a,isOpen:s!=null,onClose:F.close,children:o})}const Vs=x(()=>S(()=>import("./b5m9c7wtpdhnd0b6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(a=>a.CanvasFocusedViewManager)),pe=64;function Rs(){const{focusedObject:a,clientThreadId:s}=$a();y(void 0);const o=d.useRef(null),[t,i]=d.useState({bottom:null,height:null});Za(o,i);const r=es(),h=y("searchSources"),n=y("summarizer"),g=Se(),[m,p]=d.useState(!1),v=!r&&!!a;let u=0;m&&t.height==null?u=pe:m&&t.height!=null?u=pe+t.height:!m&&t.height!=null&&(u=t.height);const M=we();return e.jsx(as,{className:Ze(I.application,{[I.withCanvasFocusedView]:!!r,[I.withEmbeddedFocusedView]:v}),banner:e.jsx(ea,{children:e.jsx(ss,{setIsMobileAppUpsellBannerVisible:p})}),sidebar:e.jsx(ks,{}),thread:e.jsx(De,{ref:o},s),details:e.jsx(Vs,{clientThreadId:s}),threadExtendedInfo:g&&e.jsxs(e.Fragment,{children:[!1,h&&e.jsx(Oe,{clientThreadId:s}),M&&n&&e.jsx(ye,{clientThreadId:s})]}),debugger:e.jsx(Te,{clientThreadId:s}),name:"application-root",style:{"--screen-keyboard-bottom":t.bottom?`${t.bottom}px`:"","--screen-height-offset":u>0?`${u}px`:""}})}function Ws({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){return je({clientThreadId:a}),e.jsx(Ne,{clientThreadId:a,setClientThreadId:s,prefetchSearch:t,children:e.jsxs(ts,{children:[e.jsx(os,{}),e.jsx(ns,{}),e.jsxs(Ae,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(ke,{clientThreadId:a,urlThreadId:o}),e.jsx(Ee,{}),e.jsx(Rs,{})]})]})})}var Hs={};const Us=x(()=>S(()=>import("./fcva85b34ukmvnrh.js"),__vite__mapDeps([42,1,2,3,4,5,43]))),Gs=x(()=>S(()=>import("./m056thopp3j01jt8.js"),__vite__mapDeps([44,1,2,3,4,5,36,9,8,15,37,19,38,39,40,45])));function at(a){const{urlThreadId:s,clientThreadId:o,prefetchSearch:t}=a;Ks();const i=aa(),r=re(),[h]=sa(),[n,g]=d.useState(()=>s!==void 0?s:o!==void 0?o:de());s!==void 0&&n!==s&&B.getServerThreadId(n)!==s&&g(s);const m=is(re());d.useEffect(()=>{s===void 0&&B.getServerThreadId(n)!==void 0&&g(de())},[s,n,m]);const p=N(V.workspaceId),v=Pe(),{eligible:u,isLoading:M,markAsViewed:j}=rs(),w=ds(),E=xe("3435450078");d.useEffect(()=>{(r.pathname==="/"||r.pathname.startsWith("/c/"))&&ls({namespace:he.ChatPageLoad})==null&&(cs({namespace:he.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),ta.addTiming("chatgpt.web.chatPage.mounted"))},[]);const T=us();d.useEffect(()=>{oa(!0).then(l=>{l.force_login&&T({authType:"login"}),na.initializeAndGatherData(l),hs.initializeAndGatherData(l),ia.initializeAndGatherData(l)})},[T]),d.useEffect(()=>{const l=h.get(gs)==="true";i!==l&&ra.setIsTemporaryChatEnabled(l)},[i,h]),d.useEffect(()=>{r.state?.focusObject&&F.setFocusedObject(r.state.focusObject)},[r.state?.focusObject]),d.useEffect(()=>{!M&&u&&(j(),w())},[u,M,j,w]);const{isOpen:A,isLoading:k}=fs(),f=v?Ws:_s;return e.jsx(da.Provider,{value:null,children:e.jsx(ms,{children:e.jsxs(ps,{clientThreadId:n,children:[e.jsx(Ts,{clientThreadId:n},p),!k&&A&&e.jsx(Gs,{clientThreadId:n,setClientThreadId:g}),e.jsx(bs,{}),e.jsx(xs,{}),e.jsx(f,{urlThreadId:s,clientThreadId:n,setClientThreadId:g,prefetchSearch:t}),e.jsx(Fs,{clientThreadId:n}),e.jsx(Ss,{clientThreadId:n}),e.jsx(zs,{}),e.jsx(Ms,{}),E?e.jsx(Os,{clientThreadId:n}):!1]})})})}function zs(){const a=ve(s=>s.sharingModalThreadId);return a?e.jsx(Us,{serverThreadId:a}):null}function Ks(){la({queryKey:["pingEdge"],queryFn:()=>ca.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Hs.GOKU_SERVICE);export{at as C,me as F};
//# sourceMappingURL=hfjc0cg18t70twkp.js.map
