const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gpz0xqc2ilw21k9v.js","assets/nfjrln83fxu65oyx.js","assets/o3o9tmae3y8d2645.js","assets/root-dunwnenm.css"])))=>i.map(i=>d[i]);
import{ch as B,bY as H,w as O,r as h,j as e,G as d,D as k,E as P,M as C,az as F,c as z,aq as m,A as S,C as A,a2 as _,z as $,aH as q,H as G}from"./nfjrln83fxu65oyx.js";import{aZ as T,a0 as J,a_ as V,a$ as L,b0 as N,ay as l,U as Q,aW as Y,b1 as Z,b2 as K,b3 as W,f as X,b4 as ee}from"./c96sbxi6wxvsoc0g.js";import{D as c}from"./ckm8yljtdtmdpcej.js";import{B as ae}from"./j3p5ed2tzqzsa8ks.js";import{z as se,ay as D}from"./o3o9tmae3y8d2645.js";const re=B(()=>H(()=>import("./gpz0xqc2ilw21k9v.js"),__vite__mapDeps([0,1,2,3])).then(a=>a.DirectorySyncResourceManagedIndication)),x=O(()=>({confirmModalUserData:null})),b={openModalForUser:a=>{x.setState({confirmModalUserData:a})},closeModal:()=>{x.setState({confirmModalUserData:null})}};function fe({workspaceId:a,filterInputValue:s}){const[t,r]=h.useState(0),n=J(),g=n==null?void 0:n.id,u=V(a),v=L(a),f=u||v,j=ie(),U=de(a),{data:R}=T(a,t*N,s),E=h.useCallback(o=>{b.openModalForUser(o)},[]),I=h.useCallback(()=>{var p;const o=(p=x.getState().confirmModalUserData)==null?void 0:p.id;o!==void 0&&U.mutate({userId:o}),b.closeModal()},[U]),w=h.useCallback((o,p)=>{j.mutate({userId:o,value:p,workspaceId:a})},[j,a]);if(R===void 0)return e.jsx(ce,{});const y=R.items,M=Math.ceil((R.total??0)/N);return t>=M&&M!==0&&r(Math.max(M-1,0)),e.jsxs(e.Fragment,{children:[e.jsxs(l.Root,{fixed:!0,size:"normal",children:[e.jsxs(l.Header,{children:[e.jsx(l.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(d,{...i.name})}),e.jsx(l.HeaderCell,{className:"bg-token-main-surface-primary",children:e.jsx(d,{...i.email})}),e.jsx(l.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:e.jsx("span",{className:u?"pl-3":"",children:e.jsx(d,{...i.role})})}),f&&e.jsx(l.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),e.jsxs(l.Body,{children:[y.map(o=>e.jsx(te,{isCurrentUser:g!==void 0&&o.id===g,user:o,currentUserHasAdminRights:f,isCurrentUserOwner:u,onRemoveUserClick:()=>E({id:o.id,name:o.name??"",email:o.email??"",created_time:o.created_time}),onUpdateUserRole:w},o.id)),y.length===0&&e.jsx(l.Row,{children:e.jsx(l.Cell,{children:e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(d,{...i.noResults})})})})]})]}),e.jsxs("div",{className:"relative mb-8 mt-4 min-h-[20px]",children:[u&&e.jsxs("button",{onClick:()=>Q.openModal(Y.InviteUsersToWorkspace),className:"flex items-center gap-2 text-token-text-secondary hover:text-token-text-primary",children:[e.jsx(se,{className:"icon-sm"}),e.jsx(d,{...i.inviteMemberButton})]}),M>1&&e.jsx("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:e.jsx(Z,{currentPage:t,onChangeIndex:r,length:M})})]}),e.jsx(ne,{onDeleteConfirm:I})]})}function ne({onDeleteConfirm:a}){const s=k(),t=x(n=>n.confirmModalUserData!==null),r=x(n=>n.confirmModalUserData===null?{}:{userId:n.confirmModalUserData.id,email:n.confirmModalUserData.email,name:n.confirmModalUserData.name,dateAdded:K(n.confirmModalUserData.created_time)});return e.jsx(P,{isOpen:t,title:s.formatMessage(i.removeMemberModalTitle),onClose:()=>b.closeModal(),type:"success",primaryButton:e.jsx(C.Button,{title:s.formatMessage(i.removeMemberModalConfirm),color:"danger",onClick:a}),secondaryButton:e.jsx(C.Button,{title:s.formatMessage(i.removeMemberModalCancel),color:"secondary",onClick:()=>b.closeModal()}),children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.name??r.email,e.jsx("div",{className:"text-token-text-tertiary",children:e.jsx(d,{...i.dateJoined,values:{dateAdded:s.formatDate(r.dateAdded,{year:"numeric",month:"long",day:"numeric"})}})})]})})}function te({user:a,currentUserHasAdminRights:s,isCurrentUserOwner:t,isCurrentUser:r,onRemoveUserClick:n,onUpdateUserRole:g}){const v=W()[a.role],f=a.name==null||a.name==="",{value:j}=F("3999712942");return e.jsxs(l.Row,{children:[e.jsx(l.Cell,{children:e.jsxs("span",{className:z("flex flex-grow items-center justify-between gap-2",f&&"text-token-text-tertiary"),children:[e.jsx("span",{children:a.name??e.jsx(d,{...i.missingName})}),r&&e.jsx("span",{children:e.jsx(d,{...i.youSpecifier})}),j&&a.is_scim_managed&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-grow"}),e.jsx(re,{})]})]})}),e.jsx(l.Cell,{children:a.email}),e.jsx(l.Cell,{children:t?e.jsx(oe,{currentRole:a.role,onUpdateUserRole:U=>{g(a.id,U)},disabled:r}):v}),s&&e.jsx(l.Cell,{children:e.jsx(le,{userId:a.id,onRemoveUserClick:n,disabled:r,isScimManaged:a.is_scim_managed})})]})}function oe({currentRole:a,onUpdateUserRole:s,disabled:t=!1}){const r=W();return e.jsx(ae,{disabled:t,defaultValue:a,onValueChange:n=>{s(n)},options:[{label:r[m.STANDARD],value:m.STANDARD},{label:r[m.ADMIN],value:m.ADMIN},{label:r[m.OWNER],value:m.OWNER}]})}function le({disabled:a,onRemoveUserClick:s,userId:t,isScimManaged:r}){const n=k();return a?null:r?e.jsx(c.Root,{children:e.jsx(c.Trigger,{disabled:!0,children:e.jsx(X,{sideOffset:0,label:n.formatMessage(ee.managedViaSCIMTooltip),className:"flex",side:"right",children:e.jsx(D,{className:"icon-sm"})})})}):e.jsxs(c.Root,{children:[e.jsx(c.Trigger,{className:"-my-2",children:e.jsx(D,{className:"icon-sm"})}),e.jsx(c.Portal,{children:e.jsx(c.Content,{children:e.jsx(c.Item,{onClick:()=>{s(t)},children:e.jsx(d,{...i.removeMemberModalTitle})})})})]})}function je(a){const{data:s}=T(a);return(s==null?void 0:s.total)??0}function ie(){return S({mutationFn:({userId:a,workspaceId:s,value:t})=>A.updateWorkspaceUserRole(s,a,t).catch(r=>{_.danger(`Unable to update user (${a}) role: ${r.message}`)})})}function de(a){const s=$();return S({mutationFn:({userId:t})=>A.removeWorkspaceUser(a,t).catch(r=>{_.danger(`Unable to remove user (${t}) from workspace: ${r.message}`)}),onSuccess:()=>{s.invalidateQueries({queryKey:["workspace",a]})}})}function ce(){return e.jsx("div",{className:"flex w-full items-center justify-center",children:e.jsx(q,{})})}const i=G({name:{id:"UserManager.name",defaultMessage:"Name"},email:{id:"UserManager.email",defaultMessage:"Email"},role:{id:"UserManager.role",defaultMessage:"Role"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)"},removeUser:{id:"UserManager.removeUser",defaultMessage:"Remove user from workspace"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member"},noResults:{id:"UserManager.noResults",defaultMessage:"No results"}});export{ce as A,fe as U,oe as W,je as u};
//# sourceMappingURL=k1e625mfe6h0rjqj.js.map
