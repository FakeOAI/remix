const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cn06c5jzv44z0ve8.js","assets/o3hxkjnxmrwn1xdu.js","assets/root-msgf0obc.css","assets/fwpancuk6hqatjjv.js","assets/l07q44668l21rbsd.js","assets/or7edzll6u1n7tqg.js","assets/conversation-small-ile61fj8.css","assets/lg6jhnkp12gigisv.js","assets/eyvt4zwxhbpiy99r.js","assets/fu7gbjfxu63v72nr.js","assets/gh9ezd6n8miz4r9y.js","assets/isb31kc1hf2e3mcx.js","assets/kdyshfuo29gz6wzi.js","assets/hindyi1eoo8kg761.js"])))=>i.map(i=>d[i]);
import{b3 as W,b4 as K,m as e,eI as ee,L as _,r as u,a5 as V,bs as L,K as se,ef as te,ee as Se,bp as w,cT as ne,aE as y,N as R,V as ve,aw as je,d8 as ye,cy as ke,dq as Ce,bd as ae,hw as S,hx as Ie,cp as Ne,cq as Me,gp as ze,e4 as A,a9 as Oe,b6 as Te}from"./o3hxkjnxmrwn1xdu.js";import{gY as Fe,bQ as we,gU as ie,iK as _e,fU as Ee,dv as H,dt as Ge,aT as oe,ce as Q,cR as Le,k7 as T,eJ as Ae,k8 as Pe,k9 as Re,eP as Be,dw as re,aQ as He,ka as Ue,dx as De,fL as ce,kb as We,fc as Ke,U as le,fM as Ve,eK as qe,kc as Ye,cv as Ze,cw as Qe,cr as q,cZ as Je,aY as $e,kd as Xe,ke as O,cq as Y,A as p,cJ as de,dy as es,z as me,dz as ss,cy as ue,kf as ts,I as ns,kg as as,kh as is,ki as os,kj as J,em as rs,kk as Z,aF as P,kl as xe,km as cs,kn as U,ko as F,cD as ls,en as ds,bs as ms,kp as us,aG as xs,bT as fs,kq as hs,w as gs,kr as ps,y as bs,bO as Ss,ks as vs,kt as fe,E as js,ku as ys,ca as ks}from"./or7edzll6u1n7tqg.js";import{u as E,d as Cs}from"./lg6jhnkp12gigisv.js";import{m as D}from"./eyvt4zwxhbpiy99r.js";import{U as Is,P as Ns}from"./fu7gbjfxu63v72nr.js";const Ms=W(()=>K(()=>import("./cn06c5jzv44z0ve8.js"),__vite__mapDeps([0,1,2,3])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(he,{color:s})}),zs={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function he({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:e.jsx(Fe,{className:"h-3/4 w-3/4",style:{color:s}})})}function Os({gizmo:s,historyDisabled:n,section:t,onClick:c,isActive:a,hideOverflowMenu:x=!1,elementRef:i,subConversations:l}){const{clientThreadId:f}=E(),h=ee(f),d=_(),[g,o]=u.useState(!1),[r,m]=u.useState(!1),[b,v]=u.useState(!1),[k,G]=u.useState(null),I=V(),B=!!s?.gizmo.tags?.includes(we.FirstParty),N=ie(s?.gizmo.id),M=_e(s.gizmo.id);let j=!1;a&&N&&!(k&&h)&&(j=!0),u.useEffect(()=>{k==null&&a&&h&&G(!0)},[a,h,k]);let C;if(s!=null)C=s.gizmo.display.name||Ee;else{if(I==null)return null;n?C=d.formatMessage(H.clearChat):I.canInteractWithGizmos()?C=De:C=d.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(D.div,{whileTap:{scale:.98},onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:e.jsx(Ge,{loggingGizmoId:s?.gizmo.id??"primary",href:oe(s),onClick:c,showActiveIndicator:j,icon:N&&l&&l.items.length>0?e.jsx(L,{side:"top",sideOffset:4,delayDuration:600,label:k?d.formatMessage(Q.hideChatsForProjectTooltip):d.formatMessage(Q.showChatsForProjectTooltip),children:e.jsx("button",{onClick:z=>{z.preventDefault(),G(!k)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{v(!0)},onMouseLeave:()=>{v(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Ms,{isOpen:k??!1,isHovered:b,color:M||null})})})})}):N?e.jsx(he,{color:M}):e.jsx(Le,{isFirstParty:B,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:g,label:C,rightIcon:t===T.Workspace&&e.jsx(L,{side:"right",label:d.formatMessage($.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"}),children:e.jsx(Ae,{className:"icon-md text-token-text-secondary",alt:d.formatMessage($.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(r||g)&&!x&&(N?e.jsx("div",{className:"text-token-text-tertiary",onClick:z=>{z.preventDefault()},children:e.jsx(Pe,{gizmo:s,isOpen:g,setIsOpen:o})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:z=>{z.preventDefault()},children:e.jsx(Re,{gizmo:s,isOpen:g,setIsOpen:o,section:t})})),!N&&!x&&e.jsx(L,{side:"right",label:d.formatMessage(n?H.clearChat:H.newChat),className:"flex items-center",children:e.jsx("button",{className:g?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(Be,{className:"icon-md"}):e.jsx(re,{className:"icon-md"})})})]}),elementRef:i})}),e.jsx(He,{children:N&&k&&l&&l.items.length>0&&e.jsx(D.div,{initial:"closed",animate:"open",exit:"closed",variants:zs,className:"overflow-hidden",layout:!0,children:e.jsx(Ue,{gizmoResource:s,serverThreadId:h,isOnProjectPage:j,conversations:l.items})},"nested-conversations")})]})}const $=se({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function Ts(s){const{clientThreadId:n}=E(),t=u.useRef(s);t.current=s;const c=u.useRef(null);u.useEffect(()=>{const a=c.current;return c.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function ge(){const s=_(),n=ce(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(We,{children:e.jsx(D.div,{whileTap:{scale:.98},children:e.jsx(te,{to:Ke(),onClick:()=>{n.activeSidebar==="popover-nav"&&le.setActiveSidebar(!1)},children:e.jsx(Ve,{icon:qe,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const Fs=2;function pe({gizmos:s,isGizmoFlyout:n,isLoaded:t,maxToShowOnLoad:c=4,isScreenArch:a,showAllSidebarItems:x}){const i=Xe(s,r=>r.flair.kind),l=[...(i[O.Workspace]?.map(({resource:r})=>({gizmo:r,section:T.Workspace}))??[]).slice(0,3),...i[O.FirstParty]?.map(({resource:r})=>({gizmo:r,section:T.Keep}))??[],...i[O.SidebarKeep]?.map(({resource:r})=>({gizmo:r,section:T.Keep}))??[]],f=i[O.Recent]?.slice(0,a||t?i[O.Recent]?.length:Fs).map(({resource:r})=>({gizmo:r,section:T.Recents}))??[],h=f.length,d=l.length,g=a?h>0:s.length>c;let o=[];return n&&a?o=[...l,...f]:!n&&a?o=l:(o=[...l,...f],x||(o.length>c&&d>c?o=o.slice(0,d):o.length>c&&(o=o.slice(0,c)))),{listItems:o,itemsLeft:s.length-o.length,needsToCollapseItems:g,total:s.length}}function be({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:c=!1}){const a=u.useRef(!1),x=!t,i=Se(),[l,f]=u.useState(!1),h=ce(m=>!Ye.isGptListCollapsed(m)),{listItems:d,needsToCollapseItems:g,itemsLeft:o}=pe({gizmos:s,isGizmoFlyout:x,isLoaded:l,maxToShowOnLoad:t,isScreenArch:i,showAllSidebarItems:h});u.useEffect(()=>{l||f(!0)},[l]),u.useEffect(()=>{d.length>0&&!a.current&&(Ze({namespace:Qe.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),a.current=!0)},[d]);function r(m,b){const v=e.jsx(Os,{gizmo:m,isActive:m.gizmo.id===n,section:b,hideOverflowMenu:c},m.gizmo.id);return i?e.jsx("li",{children:v}):v}return e.jsxs("div",{children:[d.map(({gizmo:m,section:b},v)=>e.jsxs(u.Fragment,{children:[v>1&&b!==d[v-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),r(m,b)]},v)),!i&&g?e.jsxs("button",{onClick:le.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(q,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:h?e.jsxs(e.Fragment,{children:[e.jsx(w,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(Je,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:o}}),e.jsx($e,{className:"icon-xs"})]})})]}):null,!i&&e.jsx(ge,{})]})}function ws({currentGizmoId:s,gizmos:n,onClick:t}){const{isSidebarFlyoutOpen:c,onSidebarFlyoutOpenChange:a}=Y(),x=c(p.Gizmo),i=de();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(ne,{onOpenChange:l=>a(p.Gizmo,l),side:i?"bottom":"right",sideOffset:4,open:x,contentAlign:"end",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",x&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(q,{className:y("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(w,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(R,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(be,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function _s({currentGizmoId:s}){const{data:{gizmos:n}={}}=es();let t=n;me()&&(t=n?.filter(x=>!ss(x.resource)));const{needsToCollapseItems:a}=pe({gizmos:t??[],isLoaded:!1,isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(ue,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(w,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(ge,{}),e.jsx(be,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:ts}),a&&e.jsx(R,{children:e.jsx(ws,{currentGizmoId:s,gizmos:t??[]})})]})})}function Es({onClick:s}){const{clientThreadId:n}=E(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:c}=Y(),a=de(),x=t(p.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(ne,{onOpenChange:i=>{i&&ve.logEvent("chatgpt_web_more_conversation_history_opened"),c(p.Conversation,i)},side:a?"bottom":"right",sideOffset:4,open:x,contentAlign:"start",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",x&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(q,{className:y("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(w,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(R,{children:e.jsx(ns,{activeId:n,hideOverflowMenu:!0})})})})})}function Gs({clientThreadId:s}){const n=ee(s),t=je(),{isCollapsible:c,recentConversationLimit:a}=as(),x={recentConversationLimit:a},i=u.useRef(!1),l=!0,{conversations:f,data:h,isLoading:d,isError:g,recents:o,refetch:r}=is(x),[m,b]=u.useState(!0),v=u.useCallback(function(C){C===void 0&&b(!1),r({cancelRefetch:!0})},[r,b]),k=t?void 0:n,G=f.length===0,I=g||h===void 0&&!d&&i.current,B=!I&&(h===void 0||d);h===void 0&&!d&&!i.current&&(i.current=!0,v(!0));const M=f.find(j=>j.id===k)??null;return u.useMemo(()=>{ye.publish({kind:"refreshHistory",conversations:f})},[f]),e.jsxs(e.Fragment,{children:[I&&e.jsx(os,{showRetry:m,refetch:v}),!G&&e.jsxs(ue,{header:o.label,isLastInGroup:!0,children:[o.items.map((j,C)=>e.jsx(J,{item:j,isActive:j.id===k,testId:`history-item-${C}`},j.id)),M&&!o.items.some(j=>j.id===k)&&e.jsx(J,{item:M,isActive:!0})]}),B&&e.jsx(ke,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),c&&e.jsx(R,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!l,className:y(!l),children:e.jsx(Es,{})})})})]})}const X=W(()=>K(()=>import("./l07q44668l21rbsd.js"),__vite__mapDeps([4,1,2,5,6,7,8,9])).then(s=>s.SnorlaxSidebarList));function Ls({clientThreadId:s}){const n=V(),t=Ce(s),{isUnauthenticated:c}=ae(),a=me();return c?null:e.jsxs("div",{className:y(S.screenContent),children:[a&&n?.canInteractWithGizmos()&&X?e.jsx(X,{currentGizmoId:t}):null,null,e.jsx(Gs,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(_s,{currentGizmoId:t}):null]})}function As(){const s=V(),n=s?.data==null,{isUnauthenticated:t}=ae(),{openSettings:c}=rs(),a=Ie(),[x]=u.useState(()=>{const r=Ne.getCookie(Me.Workspace);return typeof r=="string"&&r!==ze}),i=_(),{store:l,actions:f}=Z(),h=l(r=>r.mode),[d,g]=u.useState(!0);if(u.useEffect(()=>{g(!1)},[]),!s&&d||x&&n)return null;const o=t?e.jsx(Is,{}):e.jsx(Cs,{onClickSettings:()=>c()});return e.jsxs(P,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[o,a.get("include_floating_state",!1)&&e.jsx("div",{className:S.togglePinWrapper,children:e.jsx(xe,{tooltipSideOffset:14,className:S.pinSidebarAction,icon:e.jsx(cs,{}),onActivate:r=>{r.preventDefault(),r.persist(),U.togglePinSidebar(r,f,h===F.Floating?F.Pinned:F.Floating)},label:h===F.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:A.FloatingOrPinned})})]})}function Ps(){return e.jsx(P,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Ns,{})})}function Rs(){return e.jsxs(ls,{className:y(S.screenTrailingBarContainer),children:[e.jsx(ds,{}),e.jsx(Ps,{}),e.jsx(As,{})]})}function Bs({onNewThread:s}){const n=_(),t=Oe(),{clientThreadId:c}=E(),a=ms(c),x=a?us(a):void 0,i=x?oe(x):void 0,l=ie(x?.gizmo.id),f=n.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return e.jsx(L,{label:f,children:e.jsx(te,{to:i??"/",onClick:async h=>{h.preventDefault(),!l&&i!=null?xs(t,i):s()},tabIndex:-1,children:e.jsx(fs,{icon:e.jsx(re,{className:S.sidebarIcon}),className:S.searchAction,label:f,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const Hs=W(()=>K(()=>import("./gh9ezd6n8miz4r9y.js"),__vite__mapDeps([10,1,2,5,6,11,12,13])).then(s=>s.FannyPackIconButton));function Us({onNewThread:s}){const n=_(),t=u.useRef(null),{store:c,actions:a}=Z(),x=c(m=>m.isSidebarOpen),i=c(m=>m.mode),{isSidebarFlyoutOpen:l}=Y(),f=l(p.Conversation),h=l(p.Gizmo),d=l(p.Snorlax),g=x&&!f&&!h&&!d;function o(){fe(t.current)&&document.getElementById(A.OpenOrClosed)?.click()}hs({checkElement:m=>m?.tagName==="NAV",enabled:g,onLightDismiss:o});const{isFannyPackEnabled:r}=gs();return Te(),e.jsxs(e.Fragment,{children:[e.jsx(P,{type:"primary",className:y(S.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(xe,{className:y(S.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:m=>{U.closeSidebar(m,a,i)},onActivate:m=>{U.closeSidebar(m,a,i)},icon:e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:y(S.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(bs,{className:y(S.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(Ds.closeSidebar),htmlFor:A.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,r&&e.jsx(Ss,{children:e.jsx(Hs,{className:S.searchAction,icon:e.jsx(vs,{className:S.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx(Bs,{onNewThread:s})]})]})}),e.jsx(P,{type:"primary",className:S.bucketBar,disableSizeTracking:!0,children:" "})]})}const Ds=se({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function Zs(){const{clientThreadId:s,onNewThread:n}=E(),[t,c]=u.useState(!1),[a,x]=u.useState(!1),[i,l]=u.useState(!1),{store:f}=Z(),h=u.useCallback(o=>o===p.Conversation?t:o===p.Gizmo?a:o===p.Snorlax?i:!1,[t,a,i]),d=u.useCallback((o,r)=>{const m=b=>{o===p.Conversation?c(b):o===p.Gizmo?x(b):o===p.Snorlax&&l(b)};r?m(!0):setTimeout(()=>{m(!1)},100)},[]),g=u.useRef(null);return Ts((o,r)=>{d(p.Conversation,!1),d(p.Gizmo,!1),d(p.Snorlax,!1);const m=window.matchMedia("(max-width: 700px)").matches,b=fe(g.current);r!=null&&m&&f.getState().isSidebarOpen&&(f.getState().mode===F.Floating||b)&&setTimeout(()=>{document.getElementById(A.OpenOrClosed)?.click()},100)}),e.jsxs(js,{value:{isSidebarFlyoutOpen:h,onSidebarFlyoutOpenChange:d},children:[e.jsx(ys,{}),e.jsx(ks,{anchor:"vertical",className:y(S.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Us,{onNewThread:n}),ref:g,trackLeading:!0,trailing:e.jsx(Rs,{}),children:e.jsx(Ls,{clientThreadId:s})})]})}export{Zs as C,Os as G,be as a};
//# sourceMappingURL=k20zo7o0widmdhrd.js.map
