import{aE as g,eR as d,a3 as E,au as T,r as l,j as n,u as w,Y as v,b0 as p,fn as b,fo as I}from"./i50pu8hyebaw9kd6.js";import{C as _,a as W}from"./ii14owz40dad2k1u.js";import{a as D}from"./j3a17djtx1wh6u5f.js";import"./bw6iqspogl4ptak0.js";import{b0 as C,en as B,eo as y}from"./mixmhi71ciem9jn6.js";import{b9 as L,ba as S}from"./ler115iciu2bvc07.js";import{c as j}from"./fjh3sudw36xu8pk5.js";import"./cur1mdg33xzy0p0k.js";import"./i87y5c6394ih12n9.js";import"./oycy9k9kn3cs4cqp.js";import"./o5bl59jfwhvufgqp.js";import"./fqymc5m3xzz1i503.js";import"./roq9fh68okqqi129.js";import"./g4gq7wj38irj9xjt.js";import"./obdrcw978epnpqji.js";import"./gutqz9p5lfo53m3m.js";import"./cy0pjjb3tyyhfu0g.js";import"./moh4ip2hvdwaf05m.js";import"./m3yi90cdwxleycje.js";import"./lfdgenmhnubxn1z5.js";import"./nmjcaip3k576u4ic.js";import"./nfs4k0jrtx2x0ai3.js";const O=j("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function h(s,r){return s/r}function x(){const[t,i]=l.useState({titleBarHeight:32,buttonWidth:46,iconSize:16}),{value:o}=w("842034403");return l.useEffect(()=>{if(!o)return;const e=async()=>{const u=await window.getScreenDetails(),c=window.devicePixelRatio/u.currentScreen.devicePixelRatio;i({titleBarHeight:h(32,c),buttonWidth:h(46,c),iconSize:h(16,c)})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[o]),t}function R({onNewThread:s,onOpenInMainWindow:r,onClose:a}){const t=v(),{titleBarHeight:i,buttonWidth:o,iconSize:e}=x(),u=t.formatMessage({id:"DAjGx7",defaultMessage:"New chat"}),c=t.formatMessage({defaultMessage:"Open in main window",id:"CompanionWindow.openInMainWindow1"}),m=t.formatMessage({id:"/LZfgc",defaultMessage:"Close"});return n.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex w-full justify-between",style:{height:`${i}px`},children:[n.jsx(p,{label:u,sideOffset:4,side:"bottom",children:n.jsx(f,{onClick:s,"aria-label":u,style:{height:`${i}px`,width:`${o}px`},children:n.jsx(L,{style:{height:`${e}px`,width:`${e}px`}})})}),n.jsx(p,{label:c,sideOffset:4,side:"bottom",className:"ml-auto",children:n.jsx(f,{onClick:r,"aria-label":c,style:{height:`${i}px`,width:`${o}px`},children:n.jsx(S,{style:{height:`${e}px`,width:`${e}px`}})})}),n.jsx(p,{label:m,sideOffset:4,side:"bottom",children:n.jsx(A,{onClick:a,"aria-label":m,style:{height:`${i}px`,width:`${o}px`},children:n.jsx(O,{style:{height:`${e}px`,width:`${e}px`}})})})]})}const f=g.button`flex items-center justify-center cursor-default hover:bg-gray-200 active:bg-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-700`,A=g.button`flex items-center justify-center cursor-default hover:bg-red-500 hover:text-white active:bg-red-400 active:text-white`;function $({onNewThread:s,onOpenInMainWindow:r,onClose:a,children:t}){const i=l.useRef(null),{titleBarHeight:o}=x(),e=C();return n.jsxs("div",{className:"flex h-full w-full flex-col",style:{paddingTop:e?void 0:`${o}px`,"--screen-titlebar-height":`${o}px`,"--screen-height-override":"calc(100dvh - var(--screen-titlebar-height))","--screen-scrollbar-gutter-override":"stable both-edges","--screen-inline-padding-override":"0px","--screen-inline-padding-offset-override":"0px","--conversation-turn-wrapper-padding-left-override":"1.25rem","--conversation-turn-wrapper-padding-right-override":"1.25rem"},ref:i,children:[n.jsx(R,{onNewThread:s,onOpenInMainWindow:r,onClose:a}),t]})}function N({clientThreadId:s}){const r=d.useStore(),a=E(),t=T();return l.useEffect(()=>{if(!t)return;function i(e){e.key==="Escape"&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&d.hide()}function o(){t&&B()&&d.hide()}return t.document.addEventListener("keydown",i),t.addEventListener("blur",o),()=>{t.document.removeEventListener("keydown",i),t.removeEventListener("blur",o)}},[t]),n.jsx($,{onNewThread:()=>{r.newThread(!0)},onOpenInMainWindow:()=>{a(`/c/${s}`),r.newThread(!0),d.focusMainWindow()},onClose:()=>{d.hide()},children:n.jsx(_,{clientThreadId:s})})}function re(){const{value:s}=w("3653083604"),{isOpen:r}=y(),a=D(e=>e.isVoiceModeActive),t=s&&!r&&!a,{clientThreadId:i}=d.useState(),o=d.useStore();if(l.useEffect(()=>{t&&!i&&o.newThread(!1)},[t,i,o]),!(!t||!i))return n.jsx(W,{features:`${b}=${I.COMPANION}`,children:n.jsx(N,{clientThreadId:i})})}export{re as DesktopCompanionWindowController};
//# sourceMappingURL=oc3it01y6cad8xl6.js.map
