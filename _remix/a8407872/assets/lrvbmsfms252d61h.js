const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ol34moddh8wkpbc8.js","assets/b75w2kxjgzazjxw6.js","assets/d9rj50fkuog8a2dx.js","assets/root-o2r7uhf3.css","assets/d49gc0vs991bd5hw.js","assets/conversation-small-cll5buey.css","assets/x50kt4u808q4q090.js","assets/mvamv7rhb80x6oe2.js","assets/l3t5j1v6ohfi6mj0.js","assets/hv0th18lgha96dw2.js","assets/khpj3fhwc1ujxt07.js","assets/h5106imubmyqb4r1.js","assets/fwafa1jjc84yhlto.js","assets/ejkjeksdbqy8m2pd.js","assets/jg0a70ig11n05oc2.js","assets/dw0ih5zyuczsq38e.js","assets/e9lafxuzyeh4418f.js","assets/ds3o9md4fe7hdm3o.js","assets/nt5cut0c2psmue55.js","assets/k9uu8ruobn322mkh.js","assets/nbkotibdkwdyd3xo.js","assets/nemaaz8n1r3ycbc2.js","assets/c07jmiapumngv5r1.js","assets/jiul4ep6h218nvmq.js","assets/iz7xxrrl8l5j7949.js","assets/k1nwd4g72oaz0o3r.js","assets/chojg49tweojcpf2.js","assets/evlj0tcr5z6zq6xr.js","assets/dznwcyn7e2nwaeg2.js","assets/owjj4zk5ywbgcv8l.js","assets/bh3yvhfmrpxudhv5.js","assets/kgn5q67r244b5lve.js","assets/d1reznt9rpq0xd1c.js","assets/jc3l39mkejxtcqll.js","assets/f0kzaj1pp8rd64na.js","assets/jz75bsy488cwa3hg.js","assets/hcvekcv03qzviobz.js","assets/llyqhkti95ixmsjy.js","assets/ekue96w8kpaa8ej8.js","assets/eg976crmoa09eubi.js","assets/i8ju7wbohgoo8489.js","assets/gesxyu0erxqq53zs.js","assets/nx85hymmxuro0fg5.js","assets/kqwdyvkaaavvn8k3.js","assets/bkh3a7pz9cwp3dyo.js","assets/hefka9y8ear8i7zg.js","assets/kzk1pg9ssi1es1vd.js","assets/hgpumj165i931z6k.js","assets/mvnx35b657yae9b8.js","assets/d3y182q2ggi7rl61.js","assets/k4x5eepy8gq0flj7.js","assets/menikpfl99qreugc.js","assets/gtqkksifbxmu85wt.js","assets/ncnb1ys55z8bo31z.js","assets/hga65ijwmq58wpa2.js","assets/j9tslvyu6plh6ji2.js","assets/983a0dy92b3ronpv.js","assets/ouhbxl4re848qhv4.js","assets/b7qgqyia9yp46lda.js","assets/lcqtciwz7ykgov9d.js","assets/br9mb64yfuvkyu2a.js","assets/hut63vvzgvxaj18h.js","assets/gnjwrvp3hqtpahjn.js","assets/o3rt3ki38nyj5m0z.js","assets/bygi8iz40vtq9rr1.js","assets/ky6p6m12wh3hxvrm.js","assets/kg64vth6vxvk7r3c.js","assets/k5ookytm3ym3cb1q.js","assets/lma8d8jhdlvy9uyc.js","assets/g49r7vjjv5cyreyv.js","assets/cq9p58ylsb25gxnl.js"])))=>i.map(i=>d[i]);
import{y as e,bA as Z,b2 as ce,b3 as le,b0 as Ve,r,D as ee,aA as H,N as Re,S as X,P as ye,d as ke,ae as T,a1 as $,a9 as ds,a0 as z,al as us,aj as gs,ab as j,ac as C,$ as de,bM as fs,bL as hs,bJ as ms,aW as ps,w as Fe,ef as Me,bt as We,bu as xs,ag as bs,az as js,a4 as p,aB as Cs,j as Ss,f5 as ys,ch as He,aw as ks,aE as Ge,ak as $e,d4 as f,eb as Ms,as as ve,c6 as vs,fi as As,x as Ae,a$ as ws,dI as we,bk as _s,bl as Es,bm as Ts,bU as Os,u as Ns}from"./b75w2kxjgzazjxw6.js";import{iM as ue,ef as Ps,iN as ze,iO as Ue,iP as Ls,iQ as Ke,u as qe,iR as Is,iS as Ds,S as Bs,iT as Vs,iU as Rs,cg as Y,iV as Fs,iW as Ws,iX as Hs,iY as Gs,dE as $s,iZ as zs,i_ as Us,i$ as Ks,j0 as qs,j1 as Qs,j2 as Xs,j3 as Ys,j4 as Js,j5 as Zs,j6 as ea,j7 as sa,j8 as aa,j9 as ta,ja as na,jb as oa,jc as ia,jd as ra,je as ca,ch as ge,jf as la,jg as da,eX as ua,gi as Qe,i1 as J,e$ as _e,dX as fe,jh as Xe,ji as Ye,he as ga,bN as fa,jj as ha,hn as Ee,fO as ma,bV as ie,bW as Te,b$ as Je,c8 as pa,jk as xa,c0 as Oe,jl as ba,jm as ja,jn as Ze,af as D,jo as Ca,jp as Sa,i4 as re,jq as ya,i0 as ka,jr as Ma,js as va,at as Aa,c9 as wa,iu as _a,fL as Ea,gh as Ta,jt as Oa,ju as Na,jv as Pa,jw as La,c3 as Ia,c4 as Ne,jx as Da,t as Ba,ck as Va,jy as Ra,cw as Fa,cl as Wa,de as Ha,jz as Ga,df as $a,jA as za}from"./d49gc0vs991bd5hw.js";import{U as x,G as V,u as _,c as es,b as Ua}from"./jg0a70ig11n05oc2.js";import{a as Ka,b as qa,A as Qa,T as G,c as Xa,d as Ya,k as Ja}from"./l3t5j1v6ohfi6mj0.js";import{u as Za,a as ss}from"./h5106imubmyqb4r1.js";import{L as et}from"./fwafa1jjc84yhlto.js";import{S as Pe,b as st,c as at,N as tt,U as nt}from"./lcqtciwz7ykgov9d.js";import{u as as,b as ot,g as it}from"./br9mb64yfuvkyu2a.js";import{S as rt,C as ct}from"./hut63vvzgvxaj18h.js";import{d as lt,g as dt,T as ts}from"./nbkotibdkwdyd3xo.js";import{T as ns}from"./o3rt3ki38nyj5m0z.js";import{I as ut,o as gt,f as se,i as ft}from"./evlj0tcr5z6zq6xr.js";import{m as Le}from"./hv0th18lgha96dw2.js";import{a as Ie}from"./gnjwrvp3hqtpahjn.js";import{bu as ht,b9 as mt,bJ as pt,V as xt}from"./d9rj50fkuog8a2dx.js";import{u as bt}from"./bygi8iz40vtq9rr1.js";import{C as jt}from"./kg64vth6vxvk7r3c.js";const Ct=60*60*24;function St(s,a=!1){return Z()==null||a?"loading":!s||ce.getCookie(le.AgeVerification)||s.ageVerificationDeadline==null||s.ageVerificationType==="none"?"hide":"show"}function yt({onClose:s}){const{data:{ageVerificationType:a,ageVerificationDeadline:t}={}}=ue();return a==="passive"?e.jsx(kt,{onClose:s}):a==="countdown"&&t!=null?e.jsx(Mt,{onClose:s,ageVerificationDeadline:t}):null}const kt=({onClose:s})=>{const{country:a}=Ve();return r.useEffect(()=>{ee.addAction("privacy_policy.show_age_verification_modal",{country:a})},[a]),e.jsx(Ps,{onClose:s,title:"OpenAI 서비스 이용 가능 연령기준을 확인해 주세요",description:e.jsx("div",{className:"whitespace-pre-wrap",children:e.jsxs("p",{children:["ChatGPT를 이용해주셔서 감사합니다. 대한민국의 법령상 요건을 준수하기 위해, OpenAI는 귀하가 OpenAI 서비스를 이용할 수 있는 나이인지 확인하여야 합니다. ChatGPT를 계속 이용하시려면, 귀하가 18세 이상이거나, 14세 이상이고 부모 또는 보호자의 허락을 받았음을 확인해 주세요.",e.jsx("br",{}),e.jsx("br",{}),"OpenAI의 연령기준 미달시"," ",e.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"이 페이지에서 계정을 삭제해 주세요."})]})}),actionButton:e.jsx(H,{color:"primary",onClick:async()=>{await Re.updateAgeVerification(),s()},children:"저는 OpenAI의 연령기준을 충족합니다"}),cancelButton:e.jsx(H,{as:"link",color:"secondary",to:"/auth/logout",children:"로그아웃"})})},Mt=({onClose:s,ageVerificationDeadline:a})=>{const t=a!=null?Math.floor(a/60/60/24):0;r.useEffect(()=>{X.logEvent("chatgpt_compliance_age_verification_seen"),ye.logEvent(ke.complianceAgeVerificationSeen)},[]);const{country:n}=Ve();return r.useEffect(()=>{ee.addAction("privacy_policy.show_age_verification_countdown",{country:n})},[n]),e.jsxs(ze,{children:[e.jsx(Ue,{className:"text-sm font-semibold [grid-area:_title]",children:e.jsx(T,{...De.ageVerificationTitle,values:{deadline:t,learnMoreLink:l=>e.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:l})}})}),e.jsx(Ls,{altText:"Dismiss notification",asChild:!0,children:e.jsx(H,{color:"primary",size:"small",onClick:()=>{X.logEvent("chatgpt_compliance_age_verification_clicked"),ye.logEvent(ke.complianceAgeVerificationClicked),ce.setCookie(le.AgeVerification,"true",{maxAge:Ct,path:"/"}),s(),x.openModal(V.AgeVerificationInterstitial)},children:e.jsx(T,{...De.startVerification})})}),e.jsx(Ke,{})]})},De=$({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that you’re old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardian’s permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function vt({onClose:s}){const a=z(),t=us(),{openSettings:n}=qe(),l=Is(),{session:i}=gs(),{data:{isStorageComplianceEnabled:d}={}}=ue(),{data:c,isLoading:o}=Ds({enabled:!!(d&&i),select:u=>!u.cookie_consent.is_required});return r.useEffect(()=>{c===!0&&s()},[c,s]),o?null:e.jsx(At,{onReject:()=>{l.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){t.success(a.formatMessage(B.updateSuccess))},onError(){t.danger(a.formatMessage(B.updateFailure))}}),s()},onAccept:()=>{l.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){t.success(a.formatMessage(B.updateSuccess))},onError(){t.danger(a.formatMessage(B.updateFailure))}}),s()},children:e.jsx(T,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:u=>e.jsx(et,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:u}),manageLink:u=>e.jsx(wt,{onClick:()=>{n(Bs.DataControls)},children:u})}})})}function At({children:s,onAccept:a,onReject:t}){return r.useEffect(()=>{ee.addAction("privacy_policy.show_cookie_consent_banner")},[]),e.jsxs(ze,{children:[e.jsxs(Ue,{className:"text-sm font-semibold [grid-area:_title]",children:[s,e.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[e.jsx(H,{color:"secondary",size:"small",onClick:t,children:e.jsx(T,{...B.reject})}),e.jsx(H,{color:"secondary",size:"small",onClick:a,children:e.jsx(T,{...B.accept})})]})]}),e.jsx(Ke,{})]})}const wt=ds.button`underline font-normal text-green-600`,B=$({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),_t=j(()=>C(async()=>{const{ModelOnboardingNUXModal:s}=await import("./ol34moddh8wkpbc8.js");return{ModelOnboardingNUXModal:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(({ModelOnboardingNUXModal:s})=>s)),Et=({onClose:s})=>{const a=z(),t=Y(ge.isBusinessWorkspace),n=Y(i=>i.currentWorkspace),l=t?a.formatMessage(Be.workspaceWelcome,{workspaceName:n?.name}):"ChatGPT";return e.jsx(We,{isOpen:!0,onClose:xs,type:"success",title:l,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(Be.personalOnboardingSubheading),children:e.jsx(la,{onClose:s,scope:da.Personal})})};function Tt({clientThreadId:s}){const[a,t]=r.useState(0),{hasSeenOnboardingDate:n}=Vs(),{hasSeenTeamOwnerOnboardingDate:l}=Rs(),i=Y(ge.isBusinessWorkspace),d=de(),[c,o]=r.useState(!1),{data:u,isPending:R}=ue(),O=St(u,R),{eligible:y,isLoading:S}=Za(),k=fs(),E=hs(),M=ms(),N=Ka(()=>qa.getThread(s)),h=Qa(s)||!N,P=G.getConversationOrigin(s),{data:b,isError:A}=ps(),v=b!=null,F=b&&b?.accountItems.length>1&&b.currentAccountId==null,U=b?.accountItems.some(g=>g.isPersonalAccount()),W=!!b?.accountItems&&b.accountItems.length>0&&b.accountItems.every(({canAccessWithCurrentSession:g})=>!g),{eligible:K,isLoading:ae}=Fs(),{value:q}=Fe("1542198993"),{punchOutRequireLoginInfo:m}=Ws(),{state:w}=Hs(),{isOpen:L,isLoading:Q}=Gs(),{isOpen:he,isLoading:me}=$s(),{isOpen:pe,isLoading:xe}=zs(),{isOpen:be,isLoading:je}=Us(),{state:Ce}=Ks(),I=r.useMemo(()=>[{Component:qs,getModalState:()=>m?"show":"hide",isDeferrable:!1},{Component:Qs,getModalState:()=>w,isDeferrable:!1},{Component:Xs,getModalState:()=>Ce,isDeferrable:!1},{Component:Ys,getModalState:()=>Q||h?"loading":P===Me.APPLE?"hide":L?"show":"hide",isDeferrable:!1},{Component:Js,getModalState:()=>je||h?"loading":P===Me.APPLE?"hide":be?"show":"hide",isDeferrable:!1},{Component:Et,getModalState:()=>i?"hide":n===null?"loading":n===!1?"show":"hide",isDeferrable:!0},{Component:Zs,getModalState:()=>A?"hide":F?"show":v?"hide":"loading",isDeferrable:!1},{Component:ea,getModalState:()=>k!==null?"show":A||v?"hide":"loading",isDeferrable:!1},{Component:sa,getModalState:()=>E!==null?"show":A||v?"hide":"loading",isDeferrable:!1},{Component:aa,getModalState:()=>M!=null?"show":A||v?"hide":"loading",isDeferrable:!1},{Component:ta,getModalState:()=>v?W?"show":"hide":"loading",isDeferrable:!1},{Component:na,getModalState:()=>me?"loading":he?"show":"hide",isDeferrable:!1},{Component:oa,getModalState:()=>xe?"loading":pe?"show":"hide",isDeferrable:!1},{Component:vt,getModalState:()=>"hide",isDeferrable:!1},{Component:ia,getModalState:()=>!d?.isTeam()||!d?.isOwnerOfAccount()||!U?"hide":!v||l===null?"loading":l===!1?"show":"hide",isDeferrable:!1},{Component:ra,getModalState:()=>i?n===null?"loading":n===!1?"show":"hide":"hide",isDeferrable:!0},{Component:ca,getModalState:()=>ae?"loading":K&&q?"show":"hide",isDeferrable:!1},{Component:yt,getModalState:()=>O,isDeferrable:!1},{Component:_t,getModalState:()=>S?"loading":y?"show":"hide",isDeferrable:!0,expiresAt:new Date(2024,7,13)}].filter(g=>!(g.isDeferrable&&c)&&(!g.expiresAt||g.expiresAt.getTime()>Date.now())),[m,w,M,v,n,l,U,S,i,A,k,E,d,W,F,O,y,c,q,K,ae,L,Q,be,je,Ce,me,he,pe,xe,P,h]);r.useEffect(()=>{if(I[a]&&I[a].getModalState()==="hide"){const g=I.findIndex(ls=>ls.getModalState()!=="hide");t(g)}},[a,I]);const te=I[a],ne=te?.getModalState()==="show";if(r.useEffect(()=>{const g=_.getState().activeModals.has(V.BlockingInitialComponent);ne!==g&&(ne?x.openModal(V.BlockingInitialComponent):x.closeModal(V.BlockingInitialComponent))},[ne]),te==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const Se=te.getModalState();if(Se==="loading")return null;Se==="hide"&&t(g=>g+1);const cs=I[a].Component;return e.jsx(cs,{onClose:()=>{o(!0),t(g=>g+1)}})}const Be=$({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ot=j(()=>C(()=>import("./ejkjeksdbqy8m2pd.js"),__vite__mapDeps([13,1,2,3,8,4,5,9,7,10,11,12,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,6,34,35,36,37,38,39,40])).then(s=>s.DebugConversationSidebar));function os({clientThreadId:s}){Nt();const a=Z(),t=a?.includes("debug"),n=bs(),l=_(d=>d.activeSidebar),i=a?.includes("debug")&&l==="debug";return!t||!i?null:e.jsx(Ot,{clientThreadId:s,slideOver:!ua(n),onClose:()=>x.toggleActiveSidebar("debug"),isOpen:!0})}function Nt(){const a=Z()?.includes("debug");r.useEffect(()=>{if(!a)return;const t=new AbortController;return document.addEventListener("keydown",n=>{n.target instanceof HTMLElement&&["input","textarea","select","button"].includes(n.target.tagName.toLowerCase())||n.key==="\\"&&x.toggleActiveSidebar("debug")},{signal:t.signal}),()=>{t.abort()}},[a])}const Pt=j(()=>C(()=>import("./gesxyu0erxqq53zs.js"),__vite__mapDeps([41,1,2,3,4,5,42,8,9,43,44,7,10,45])).then(s=>s.SearchSources));function is({clientThreadId:s}){const{resolvedTheme:a}=js(),t=a==="dark",{turnIndex:n,messageId:l,isOpen:i}=es(),d=r.useCallback(()=>{x.closeChatThreadFlyout(s,l)},[s,l]);return!l||!n||!i?null:e.jsx(Qe,{anchor:"top",className:p("relative flex-1 border-l",t?"border-l-token-border-medium":"border-l-token-border-xlight"),name:"threadFlyOut",leading:e.jsx(J,{name:"search-sources-header",type:"primary",className:p("flex min-h-[56px] items-center justify-end !bg-transparent p-1.5"),children:e.jsx("div",{className:"bg-token-main-surface-primary p-1",children:e.jsx(Cs,{onClick:d})})}),children:e.jsx(Pt,{clientThreadId:s,turnIndex:n,messageId:l,isInSidebar:!0})})}function rs({clientThreadId:s}){r.useEffect(()=>{x.closeSharingModal()},[s]);const a=Ss();r.useEffect(()=>(G.retainThread(s),()=>{setTimeout(()=>{a.invalidateQueries({queryKey:["conversation",s]})},0),G.releaseThread(s)}),[s,a]),r.useEffect(()=>()=>{X.checkGate("3922476776")||_e.abortAllRequests()},[s]);const t=r.useRef(s);r.useEffect(()=>{s!==t.current&&(X.checkGate("3922476776")||_e.clear(),t.current=s)},[s])}const Lt=j(()=>C(()=>import("./kzk1pg9ssi1es1vd.js"),__vite__mapDeps([46,1,2,3,4,5,27,28,11,12,8,9,7,10,29,14,30,31,32,33,6,47,48,49,50,22,51,52,53,17,35,54])).then(s=>s.CanvasFocusedViewManager)),It=j(()=>C(()=>import("./j9tslvyu6plh6ji2.js"),__vite__mapDeps([55,1,2,3,14,4,5,10,8,9,41,42,43,44,7,45,56])).then(s=>s.SearchResultsModal));function Dt({clientThreadId:s,setClientThreadId:a,urlThreadId:t,prefetchSearch:n}){const l=Xa();rs({clientThreadId:s});const{createNewThread:i,onThreadCreated:d,resetThread:c}=ut({clientThreadId:s,setClientThreadId:a});as({resetThreadAction:c,clientThreadId:s});const o=fe();return e.jsxs(ns,{clientThreadId:s,children:[e.jsx(Xe,{clientThreadId:s,urlThreadId:t}),e.jsxs(Pe,{hideNavigation:l,mobileHeaderContent:e.jsx(lt,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(dt,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(st,{onNewChatButtonClick:c}),mobileHeaderRightContent:e.jsx(at,{onNewChatButtonClick:c}),sidebar:e.jsx(tt,{navHeader:s?e.jsx(rt,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:i}):null,children:e.jsx(ct,{clientThreadId:s,onNewThread:i})}),threadFlyout:e.jsx(is,{clientThreadId:s}),children:[e.jsx(Ye,{}),e.jsx(ts,{clientThreadId:s,onCreate:d,prefetchSearch:n},s),e.jsxs(Pe.Sidebars,{children:[o&&e.jsx(Lt,{clientThreadId:s}),e.jsx(os,{clientThreadId:s}),!1]})]}),e.jsx(Bt,{clientThreadId:s})]})}function Bt({clientThreadId:s}){const{value:a}=Fe("218782548"),t=ga(),{isOpen:n}=es();return n&&(!t||!a)&&e.jsx(It,{clientThreadId:s})}const Vt=450;function Rt({children:s,clientThreadId:a,isOpen:t,onClose:n}){return e.jsx(fa,{children:t&&e.jsx(ys,{children:e.jsx(ha.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(Le.div,{className:"h-full w-full bg-token-main-surface-secondary",...Ee}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(Le.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:Vt},...Ee,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(ts,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})})}const Ft=j(()=>C(()=>import("./ouhbxl4re848qhv4.js"),__vite__mapDeps([57,1,2,3,4,5,27,28,11,12,8,9,7,10,29,14,30,31,32,33,6]))),Wt=j(()=>C(()=>import("./b7qgqyia9yp46lda.js"),__vite__mapDeps([58,1,2,3,4,5,37,27,28,11,12,8,9,7,10,29,14,30,31,32,33,6,59,39,60,61,62,20,21,22,23,24,25,26,34,35,36,38,40,63,64,65,66])).then(s=>s.ImageEditor));function Ht({clientThreadId:s}){const a=ma();r.useEffect(()=>{ie.close()},[s]);let t;return a?.type===Te.ADAVisualization?t=e.jsx(Ft,{clientThreadId:s,visualization:a.visualization}):a?.type===Te.Image&&(t=e.jsx(Wt,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(Rt,{clientThreadId:s,isOpen:a!=null,onClose:ie.close,children:t})}const Gt=()=>{const s=z(),a=_(i=>i.activeModals.has(V.KeyboardActions)),t=()=>{x.closeModal(V.KeyboardActions)},n=ot(),l=r.useMemo(()=>{const i=Math.ceil(n.length/2);return[n.slice(0,i),n.slice(i)]},[n]);return e.jsx(We,{isOpen:a,onClose:t,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:s.formatMessage(Ut.keyboardActionsModalTitle),children:e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:l.map((i,d)=>e.jsx("div",{className:"flex flex-col overflow-hidden",children:i.map(c=>e.jsx($t,{action:c},c.key))},`col-${d}`))})})})},$t=({action:s})=>e.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[e.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:e.jsx("div",{className:"truncate",children:e.jsx(T,{...s.actionMessageDescriptor})})}),e.jsx("div",{className:"ml-3 flex flex-row gap-2",children:it(s.keyboardBinding).map((a,t)=>e.jsx(zt,{keyName:a},`${s.key}-${t}`))})]}),zt=({keyName:s})=>{const a=p("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return s.length>1?s.length>3?e.jsx("div",{className:p(a,"min-w-[50px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:p(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-xs",children:s})}):e.jsx("div",{className:p(a,"min-w-[32px]"),children:e.jsx("span",{className:"text-sm",children:s})})},Ut=$({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function Kt(){const s=Je(),{conversations:a}=ss();return{isCollapsible:s&&a.length>5,recentConversationLimit:5}}function qt({clientThreadId:s}){const a=Ya(s),t=He(),{isCollapsible:n,recentConversationLimit:l}=Kt(),i={buckets:n,recentConversationLimit:l},d=r.useRef(!1),c=_(m=>m.isHistoryCollapsed),{conversations:o,buckets:u,hasNextPage:R,fetchNextPage:O,data:y,isLoading:S,isFetchingNextPage:k,isError:E,recents:M,refetch:N}=ss(i),[h,P]=r.useState(!0),b=r.useCallback(function(w){w===void 0&&P(!1),N({cancelRefetch:!0})},[N,P]),A=t?void 0:a,v=c&&M.items.length>0,F=!c&&u.length>0,U=o.length===0,W=E||y===void 0&&!S&&!k&&d.current,K=!W&&(y===void 0||S||k);y===void 0&&!S&&!d.current&&(d.current=!0,b(!0)),r.useMemo(()=>{pa.publish({kind:"refreshHistory",conversations:o})},[o]);const q=R&&!U&&!c&&!S&&!k;return e.jsxs(e.Fragment,{children:[W&&e.jsx(xa,{showRetry:h,refetch:b}),v&&e.jsx(Oe,{header:M.label,isLastInGroup:!F,children:M.items.map((m,w)=>e.jsx(Ie,{item:m,isActive:m.id===A,testId:`history-item-${w}`},m.id))}),F&&u.map((m,w)=>e.jsx(Oe,{header:m.label,isLastInGroup:w===u.length-1,children:m.items.map((L,Q)=>e.jsx(Ie,{item:L,isActive:L.id===A,testId:`history-item-${Q}`},L.id))},m.key)),K&&e.jsx(ks,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),n&&e.jsx(Ge,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!c,className:p(!c&&"hidden"),children:e.jsx(ba,{type:"more",onClick:x.expandHistory})})})}),q&&e.jsx(ja,{onPaginate:O})]})}const Qt=j(()=>C(()=>import("./k5ookytm3ym3cb1q.js"),__vite__mapDeps([67,1,2,3,26,7,4,5,8,9,10,14,61,28,62,11,12,6,60,27,29,30,31,32,33])).then(s=>s.GizmoSidebarList));function Xt({clientThreadId:s}){const a=de(),t=Ja(s),{isUnauthenticated:n}=$e();return n?null:e.jsxs("div",{className:p(f.screenContent),children:[null,e.jsx(qt,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(Qt,{currentGizmoId:t}):null]})}function Yt(){const s=de(),a=s?.data==null,{isUnauthenticated:t}=$e(),{openSettings:n}=qe(),[l]=r.useState(()=>{const o=ce.getCookie(le.Workspace);return typeof o=="string"&&o!==Ms}),i=z(),d=_(o=>o.sidebarState);if(!s||l&&a)return null;const c=t?e.jsx(nt,{}):e.jsx(gt,{onClickSettings:()=>n()});return e.jsxs(J,{name:"user-profile-bar",className:"z-10 grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[c,e.jsx("div",{className:f.togglePinWrapper,children:e.jsx(Ze,{tooltipSideOffset:14,className:p(f.pinSidebarAction),checked:d===D.Floating,onChange:o=>{const u=o.currentTarget.checked?D.Floating:D.Pinned;o.preventDefault(),o.persist(),Ca({css:ya,update:()=>{o.target.checked=u===D.Floating,x.setSidebarState(u)}})},icon:e.jsx(Sa,{}),label:d===D.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),group:re.FloatingOrPinned})})]})}function Jt(){const s=_(a=>a.isHistoryCollapsed);return e.jsxs(ka,{className:p(f.screenTrailingBarContainer,s&&"border-transparent"),children:[e.jsx(Ge,{children:e.jsx(Ma,{hidden:s,onClick:x.collapseHistory,children:e.jsx(T,{id:"1poXLj",defaultMessage:"See less"})})}),e.jsx(Yt,{})]})}function Zt(s){const{clientThreadId:a}=se(),t=r.useRef(s);t.current=s,r.useEffect(()=>{t.current()},[a])}const en=j(()=>C(()=>import("./lma8d8jhdlvy9uyc.js"),__vite__mapDeps([68,1,2,3,4,5,64,65,8,9,60,6,7,10,11,12,14])).then(s=>s.FannyPackIconButton));function sn({onNewThread:s}){const a=z(),t=Ua(),n=_(o=>o.sidebarState===D.Floating);function l(){const o=document.querySelector(`input[name="${re.OpenOrClosed}"]`);o&&(o.checked=!1)}Zt(()=>{const o=_a[Ea.Medium];matchMedia(`(max-width: ${o}px)`).matches&&l()}),va({checkElement:o=>o?.tagName==="NAV",enabled:!t&&n,onLightDismiss:l});const{isFannyPackEnabled:i}=Aa(),{searchMsg:d,shortcutMsg:c}=bt();return Z(),e.jsxs(e.Fragment,{children:[e.jsx(J,{type:"primary",className:p(f.screenHeader),children:e.jsxs("div",{className:"mt-[3px] flex min-h-[var(--screen-thread-header-min-height)] w-full flex-1 items-center justify-between pl-[9px]",children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(Ze,{className:p(f.closeSidebarAction),checked:!t,onChange:o=>{o.currentTarget.checked?x.openSidebar():x.closeSidebar()},icon:e.jsxs(e.Fragment,{children:[e.jsx(ht,{className:f.sidebarIcon,style:{display:"var(--screen-size-hidden-on-compact-mode)"}}),e.jsx(mt,{className:f.sidebarIcon,style:{display:"var(--screen-size-hidden-on-wide-mode)"}})]}),label:a.formatMessage(oe.closeSidebar),group:re.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center gap-3",children:[!1,i&&e.jsx(ve,{label:e.jsxs("div",{children:[d,e.jsx("div",{className:"text-sm font-normal text-token-text-secondary",children:c})]}),children:e.jsx(en,{className:f.searchAction,icon:e.jsx(pt,{className:f.sidebarIcon})})}),e.jsx(ve,{label:a.formatMessage(oe.newChat),children:e.jsx(vs,{to:"/",onClick:o=>{o.preventDefault(),s()},children:e.jsx(wa,{icon:e.jsx(xt,{className:f.sidebarIcon}),className:f.searchAction,label:a.formatMessage(oe.newChat)})})})]})]})}),e.jsx(J,{type:"primary",className:f.bucketBar,disableSizeTracking:!0,children:" "})]})}const oe=$({newChat:{id:"NUNaGU",defaultMessage:"New chat"},closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function an(){const{clientThreadId:s,onNewThread:a}=se();return e.jsx(Qe,{anchor:"vertical",className:p(f.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(sn,{onNewThread:a}),trackLeading:!0,trailing:e.jsx(Jt,{}),children:e.jsx(Xt,{clientThreadId:s})})}const tn=j(()=>C(()=>import("./kzk1pg9ssi1es1vd.js"),__vite__mapDeps([46,1,2,3,4,5,27,28,11,12,8,9,7,10,29,14,30,31,32,33,6,47,48,49,50,22,51,52,53,17,35,54])).then(s=>s.CanvasFocusedViewManager));function nn(){const{clientThreadId:s,resetThread:a}=se();return as({resetThreadAction:a,clientThreadId:s}),null}function on(){const{clientThreadId:s,currentModelId:a,isCompanionWindow:t}=se();return e.jsx(Oa,{conversationId:s,currentModelId:a,isActiveWindow:!t})}function rn({clientThreadId:s,setClientThreadId:a,urlThreadId:t}){rs({clientThreadId:s});const n=fe();return e.jsxs(ft,{clientThreadId:s,setClientThreadId:a,children:[e.jsx(on,{}),e.jsx(nn,{}),e.jsxs(ns,{clientThreadId:s,children:[e.jsx(Xe,{clientThreadId:s,urlThreadId:t}),e.jsx(Ye,{}),e.jsx(Ta,{className:As.application,sidebar:e.jsx(an,{}),thread:e.jsx(jt,{}),details:e.jsxs(e.Fragment,{children:[n&&e.jsx(tn,{clientThreadId:s}),!1]}),threadExtendedInfo:e.jsx(is,{clientThreadId:s}),debugger:e.jsx(os,{clientThreadId:s}),name:"application-root"})]})]})}var cn={};const ln=j(()=>C(()=>import("./g49r7vjjv5cyreyv.js"),__vite__mapDeps([69,1,2,3,4,5,27,28,11,12,8,9,7,10,29,14,30,31,32,33,6,70])));function En(s){const{urlThreadId:a,clientThreadId:t,prefetchSearch:n}=s;un();const l=He(),i=Ae(),[d]=ws(),[c,o]=r.useState(()=>a!==void 0?a:t!==void 0?t:we());a!==void 0&&c!==a&&G.getServerThreadId(c)!==a&&o(a);const u=Na(Ae());r.useEffect(()=>{a===void 0&&G.getServerThreadId(c)!==void 0&&o(we())},[a,c,u]);const R=Y(ge.workspaceId);fe();const O=Je(),{eligible:y,isLoading:S,markAsViewed:k}=Pa(),E=La();r.useEffect(()=>{(i.pathname==="/"||i.pathname.startsWith("/c/"))&&Ia({namespace:Ne.ChatPageLoad})==null&&(Da({namespace:Ne.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),ee.addTiming("chatgpt.web.chatPage.mounted"))},[]);const M=Ba();r.useEffect(()=>{_s(!0).then(h=>{h.force_login&&M({authType:"login"}),Es.initializeAndGatherData(h),Va.initializeAndGatherData(h),Ts.initializeAndGatherData(h)})},[M]),r.useEffect(()=>{const h=d.get(Ra)==="true";l!==h&&Os.setIsTemporaryChatEnabled(h)},[l,d]),r.useEffect(()=>{i.state?.focusObject&&ie.setFocusedObject(i.state.focusObject)},[i.state?.focusObject]),r.useEffect(()=>{!S&&y&&(k(),E())},[y,S,k,E]);const N=O?rn:Dt;return e.jsx(Fa.Provider,{value:null,children:e.jsx(Wa,{children:e.jsxs(Ha,{clientThreadId:c,children:[e.jsx(Tt,{clientThreadId:c},R),e.jsx(Gt,{}),e.jsx(Ga,{}),e.jsx(N,{urlThreadId:a,clientThreadId:c,setClientThreadId:o,prefetchSearch:n}),e.jsx(Ht,{clientThreadId:c}),e.jsx($a,{clientThreadId:c}),e.jsx(dn,{}),!1,e.jsx(za,{})]})})})}function dn(){const s=_(a=>a.sharingModalThreadId);return s?e.jsx(ln,{serverThreadId:s}):null}function un(){Ns({queryKey:["pingEdge"],queryFn:()=>Re.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=cn.GOKU_SERVICE);export{En as C,Vt as F,is as a};
//# sourceMappingURL=lrvbmsfms252d61h.js.map
