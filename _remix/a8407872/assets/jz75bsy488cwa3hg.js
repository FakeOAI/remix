const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/cehulla43yugmk4e.js","assets/b75w2kxjgzazjxw6.js","assets/d9rj50fkuog8a2dx.js","assets/root-o2r7uhf3.css","assets/d49gc0vs991bd5hw.js","assets/conversation-small-cll5buey.css","assets/hv0th18lgha96dw2.js","assets/l3t5j1v6ohfi6mj0.js","assets/bh3yvhfmrpxudhv5.js","assets/jc3l39mkejxtcqll.js","assets/fiocmewz4as1gt4a.js","assets/pafqaejh3edcexk5.js","assets/dznwcyn7e2nwaeg2.js","assets/evlj0tcr5z6zq6xr.js","assets/h5106imubmyqb4r1.js","assets/fwafa1jjc84yhlto.js","assets/mvamv7rhb80x6oe2.js","assets/khpj3fhwc1ujxt07.js","assets/owjj4zk5ywbgcv8l.js","assets/jg0a70ig11n05oc2.js","assets/kgn5q67r244b5lve.js","assets/d1reznt9rpq0xd1c.js","assets/x50kt4u808q4q090.js","assets/ADAVisualizationComponent-mi6em660.css","assets/sso-bfudo21r6sapkoc9.js","assets/e7hswe5u25imga5z.js","assets/63p790i59kjdhysh.js","assets/grcy8coaelkxb28f.js","assets/o4p66lcymex1u0bc.js","assets/g0ph9ytne08wgmrw.js","assets/itghwucfyv5ciib7.js","assets/eayipgzq889hnhui.js","assets/nb23fjc5yiwo80c7.js","assets/hatop4bueyawboo2.js","assets/983a0dy92b3ronpv.js","assets/nx85hymmxuro0fg5.js","assets/kqwdyvkaaavvn8k3.js","assets/bkh3a7pz9cwp3dyo.js","assets/i669tk0jbu5h66uv.js","assets/kxpioyceu2dp9y50.js","assets/dw0ih5zyuczsq38e.js","assets/e9lafxuzyeh4418f.js","assets/ds3o9md4fe7hdm3o.js","assets/nt5cut0c2psmue55.js","assets/nb5e7wn3wnb6xbqm.js","assets/bcx9ef71f6mejurq.js","assets/ecncdboj31hs3tbl.js","assets/geuxvtzmlo6e8i5c.js","assets/iej0cupg2dqkmejt.js","assets/i2uw6okt9cl1q9wx.js","assets/f38hzv822r4b5so9.js","assets/jk8w36bsokizpx57.js","assets/f0kzaj1pp8rd64na.js","assets/chojg49tweojcpf2.js","assets/i8ju7wbohgoo8489.js","assets/exp38p44xj6014kv.js","assets/f5ouncob5kqmyzkz.js","assets/b9fixbb03io25uc1.js","assets/hmywprkql4v7p6e5.js","assets/ftqp0wm72peg5k6s.js","assets/llyqhkti95ixmsjy.js","assets/g0tsgol9t53uinap.js","assets/j4fjvkb5o475elvp.js","assets/idd7qa30kjzm0zca.js","assets/cmd5ftiyx62zmugn.js"])))=>i.map(i=>d[i]);
import{a0 as oe,r as E,y as t,as as he,a4 as w,a9 as B,ab as j,ac as N,M as H,bC as xe,bD as pe,ae as W,ee as Me,P as K,d as Y,ah as z,cB as Ee,S as Te,N as ye,e as Ie}from"./b75w2kxjgzazjxw6.js";import{hs as _e,dT as Ce,fY as Ae,fZ as ve,fT as be,ht as je,hu as Ne,hv as we,hw as Se,hx as Re,dQ as Fe,hy as Pe,hz as De,hA as ke,hB as Oe,f$ as x,f_ as k,hC as Q,hD as G,hE as Le,hF as ze,hG as $,hH as ie,bN as V,fE as re,hI as Ve,hJ as Ue,hK as We,hL as de,hM as le,h as Be,bO as He,b as Je,fM as Ke,hN as Ye,fX as m,H as Qe,hO as Ge,hP as $e,bF as Xe,hQ as qe,e$ as Ze,hR as es,hS as ss,hT as ts,hU as U,hV as as}from"./d49gc0vs991bd5hw.js";import{q as X,r as ns,d as ce,s as os,v as is,w as rs,z as ds,F as ls,A as cs,B as ms,D as gs}from"./evlj0tcr5z6zq6xr.js";import{H as us,I as fs,T as D,l as hs}from"./l3t5j1v6ohfi6mj0.js";import{i as xs,C as ps,g as Ms,a as Es,b as Ts}from"./jc3l39mkejxtcqll.js";import{m as O}from"./hv0th18lgha96dw2.js";import{ah as ys,ai as Is}from"./d9rj50fkuog8a2dx.js";const _s=(e,a)=>e?.textdocId?e.textdocId:e?.function===k.CreateTextdoc?Le(e):a??void 0,Cs=({messages:e,isRequestActive:a})=>{const s=oe(),o=_e(e),i=Ce(e),n=E.useMemo(()=>{if(Ae(o?.message))return ve(a,o.message,i?.message??null)},[a,o,i]),g=be(),r=_s(n,g),l=je(r),f=Ne(),u=we(r),M=Se(),d=Re(),h=Fe(),p=Pe(),T=De(),_=ke(),v=Oe({textdocId:r,toolResponseMessage:i});if(!n)return null;const b=!p&&!l&&n.status!==x.STREAMING&&n.status!==x.WAITING&&T;let R,F;if(n.status!==x.REDACTED&&n.status!==x.FAILED&&!b&&r){const C=_&&n.function===k.UpdateTextdoc&&n.status===x.COMPLETE;R=()=>{C&&n.versionInt?ze(r,n.versionInt,M):Q(r)},F=()=>{C&&n.versionInt&&h(r,n.versionInt)}}const c=As(n,l);if(n.function===k.CreateTextdoc){if(n.status===x.STREAMING||n.status===x.WAITING||n.status===x.COMPLETE){const L=p===!0&&(n.status===x.STREAMING||n.status===x.WAITING);return t.jsx(X,{isInlinePreview:v,isMissingFromThread:b,isFetching:L,type:n.type??null,name:c,isFocused:u,isStreaming:n.status===x.STREAMING,onClick:R,isCanvasOpen:f,textdocId:r})}let C;switch(n.status){case x.FAILED:C=s.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case x.CANCELED:C=s.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case x.REDACTED:C=t.jsx(he,{align:"start",label:s.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:s.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return t.jsx(q,{children:C})}const y=b||n.status===x.REDACTED,S=d&&!y?c:null,I=t.jsx(q,{onClick:R,onMouseOver:F,isStreaming:n.status===x.STREAMING,children:n.function===k.CommentTextdoc?bs(s,n,S):vs(s,n,S)});return v&&!f?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx(X,{isInlinePreview:!0,isMissingFromThread:b,isFetching:!1,type:l?.type??null,name:c,isFocused:u,isStreaming:n.status===x.STREAMING,onClick:r!=null?()=>Q(r):void 0,isCanvasOpen:f,textdocId:r}),I]}):I};function As(e,a){return a?.title?G(a.title):e.function===k.CreateTextdoc&&e.title?G(e.title):null}const q=({isStreaming:e=!1,onClick:a,onMouseOver:s,children:o})=>t.jsx("button",{disabled:!a,className:w(e&&"loading-shimmer","flex min-h-5 w-fit select-none pt-[3px] text-start text-token-text-secondary",a&&"hover:text-token-text-primary"),onClick:a,onMouseOver:s,children:o}),me=9;function vs(e,a,s){if(a.status===x.STREAMING)return s?e.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(a.status===x.FAILED)return s?e.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(a.status===x.CANCELED)return s?e.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const o=a.updates?.length;return a.status===x.REDACTED||!o||o>me?s?e.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):s?e.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:o,documentTitle:s}):e.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:o})}function bs(e,a,s){if(a.status===x.STREAMING)return s?e.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(a.status===x.FAILED)return s?e.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(a.status===x.CANCELED)return s?e.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const o=a.comments?.length;return a.status===x.REDACTED||!o||o>me?s?e.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):s?e.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:o,documentTitle:s}):e.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:o})}const js=2e3,ge=.4,Ns=.45,ws=.2,Ss=.1,Rs=.25;var A=(e=>(e[e.Running=0]="Running",e[e.Finished=1]="Finished",e[e.Error=2]="Error",e[e.Stopped=3]="Stopped",e[e.Paused=4]="Paused",e))(A||{});function ct({conversationMessages:e,icon:a,status:s,text:o,estimatedToolDurationMs:i,animationLoopDurationMs:n=js,shouldPersistAfterFinished:g=!1}){const[r,l]=E.useState(s===0?0:s===1&&!g?7:1),[f,u]=E.useState(0);E.useEffect(()=>{s===2?l(8):s===3?l(9):s===4?l(10):s===1?l(r===2?3:7):s===0&&r===10&&(l(2),u(d=>d+1))},[s]);const M=Ds(r);return E.useEffect(()=>{const d=e[0].message.id;if(M)return $.addDelayedRenderingMessage(d),()=>{$.removeDelayedRenderingMessage(d)}},[M]),ie(()=>{P(r)&&u(d=>d+1)},n),r===7&&!g?null:t.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[t.jsx(Fs,{icon:a,status:s,uiState:r,estimatedToolDurationMs:i,animationLoopCounter:f,shouldPersistAfterFinished:g,onFillProgressBarAnimationComplete:()=>l(4),onFinishAnimationComplete:()=>{l(5),setTimeout(()=>{l(g?7:6)},Ss*1e3)},onHideAnimationComplete:()=>l(7)}),t.jsx(Ps,{text:o,uiState:r,animationLoopCounter:f,onEnterAnimationComplete:()=>l(2)})]})}const Z=50;function Fs({icon:e,status:a,uiState:s,estimatedToolDurationMs:o,animationLoopCounter:i,shouldPersistAfterFinished:n,onFillProgressBarAnimationComplete:g,onFinishAnimationComplete:r,onHideAnimationComplete:l}){const[f,u]=E.useState(0);ie(()=>{P(s)?u(b=>b+Z):s===10&&u(0)},Z);let M,d,h;P(s)||s===10?(M="running",d=t.jsx(e,{animationLoopCounter:i}),h="bg-transparent"):s===4||s===5||s===7&&n?(M="finished",d=t.jsx(Ve,{}),h="bg-brand-purple"):a===2?(M="error",d=t.jsx(Ue,{}),h="bg-orange-500"):a===3&&(M="stopped",d=t.jsx(We,{}),h="bg-gray-300");let p={opacity:0,scale:0,rotate:-180,x:0},T={type:"spring",bounce:.3,duration:Ns},_={opacity:0,scale:.6,rotate:0,x:0};s===0?(p={opacity:0,scale:.5,rotate:-180,x:-8},T={type:"spring",bounce:.3,duration:ge}):s===1?p=!1:s===5&&(_={opacity:0,scale:0,rotate:0,x:0},T={type:"spring",bounce:.3,duration:Rs});const v=ns(f,o);return t.jsx("div",{className:"relative h-5 w-5 shrink-0",children:t.jsx(V,{onExitComplete:()=>{s===6&&l()},children:M!=null&&t.jsxs(O.div,{className:w("absolute left-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",h),initial:p,animate:{opacity:1,scale:1,rotate:0,x:0},exit:_,transition:T,onAnimationComplete:()=>{s===4&&r()},children:[d,(P(s)||s===10)&&t.jsx(re,{percentage:s===3?100:v,thickness:1.5/23,className:"absolute left-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2 text-brand-purple",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:s===3?`${(100-v)/100*ws}s`:void 0,transitionTimingFunction:s===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{s===3&&g()}})]},M)})})}function Ps({text:e,uiState:a,animationLoopCounter:s,onEnterAnimationComplete:o}){const[i,n]=E.useState(e);E.useEffect(()=>{a===2&&n(e)},[s]),E.useEffect(()=>{P(a)||n(e)},[a,e]);let g={opacity:0,x:0,y:15},r={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};a===0?(g={opacity:0,x:-8,y:0},r={type:"spring",bounce:.3,duration:ge,delay:.15}):a===1&&(g=!1);const l=i??void 0;return t.jsx("div",{className:w("relative h-5 w-full leading-5",a===8||a===9?"text-token-text-tertiary":"text-token-text-secondary"),children:t.jsx(V,{children:l!=null&&t.jsx(O.div,{className:"absolute left-0 top-0 line-clamp-1 overflow-visible",initial:g,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:r,onAnimationComplete:()=>{a===0&&o()},children:l},l.toString())})})}function P(e){return e===0||e===2||e===3}function Ds(e){return P(e)||e===4||e===5||e===6||e===10}const ee=B.div`group absolute left-0 top-0 mr-1.5 h-8 overflow-hidden mt-1`;function J({highlightedCommand:e,status:a,children:s,showWorkUserSetting:o=!1,hideOnlyIfNotInteractedWith:i=!1,onOpenAnalytics:n}){const g=s!=null,[r]=E.useState(o),[l,f]=E.useState(o),[u,M]=E.useState(!1),d=a===A.Finished||a===A.Error,h=i?r?!1:!u:!1,p=a===A.Running&&"loading-shimmer";return d&&h?null:g?t.jsxs(t.Fragment,{children:[t.jsx(se,{$canShowWork:!0,children:t.jsx(V,{children:t.jsx(ee,{children:t.jsx(O.button,{onClick:()=>{l||n?.(),f(T=>!T),M(!0)},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:w(p),children:t.jsxs("div",{className:"flex items-center justify-start gap-1",children:[t.jsx("span",{children:e}),l?t.jsx(ys,{className:"icon-md"}):t.jsx(Is,{className:"icon-md"})]})},e?.toString())})})}),t.jsx(V,{children:l&&s&&t.jsx(O.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s})})]}):t.jsx(se,{$canShowWork:!1,children:t.jsx(ee,{className:w(p),children:e})})}const se=B.p`first:mt-0 relative h-8
${({$canShowWork:e})=>e?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary"}`,te=j(()=>N(()=>import("./cehulla43yugmk4e.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).then(e=>e.default));function ks({messages:e,isRequestActive:a,clientThreadId:s}){const[o,i]=e,n=ce(o.message),g=i?.message.metadata?.aggregate_result,r=os(),l=is(),f=i?.message?rs(i.message):[],u=i?.message.metadata?.aggregate_result?.messages.filter(xs)??[],d=(f.filter(T=>T.type==="chart")??[]).length!==u.length,h=l&&!d;let p=A.Running;return g?.status==="success"?p=A.Finished:i!=null&&i.message.content.content_type!==H.ExecutionOutput||g!=null&&g.status!=="running"?p=A.Error:(n||!a)&&(p=A.Stopped),t.jsxs(t.Fragment,{children:[t.jsx(Os,{messages:e,status:p,isRequestActive:a}),h&&f.map((T,_)=>{const{type:v}=T;return v==="chart"&&!r?(T.fallback_to_image=!0,t.jsx(ae,{children:t.jsx(te,{clientThreadId:s,visualization:T})},_)):t.jsx(ae,{children:t.jsx(te,{clientThreadId:s,visualization:T})},_)}),!h&&i!=null&&t.jsx(ps,{message:i.message})]})}const ae=B.div`mb-3 max-w-[80%]`;function Os({messages:e,status:a,isRequestActive:s}){const[o,i]=e,n=oe(),g=i?.message.metadata?.aggregate_result,r=ce(o.message),{data:l,error:f}=xe(pe.ShowExpandedCodeView);let u=n.formatMessage({id:"message.tools.data-analysis.running",defaultMessage:"Analyzing"});if(g?.status==="success"?u=n.formatMessage({id:"message.tools.data-analysis.finished",defaultMessage:"Analyzed"}):i!=null&&i.message.content.content_type!==H.ExecutionOutput||g!=null&&g.status!=="running"?u=n.formatMessage({id:"message.tools.data-analysis.error",defaultMessage:"Analysis errored"}):(r||!s)&&(u=n.formatMessage({id:"message.tools.data-analysis.stopped",defaultMessage:"Analysis paused"})),l!==void 0||f){const M=Ms(o.message)!=null;return t.jsx(J,{status:a,highlightedCommand:u,showWorkUserSetting:l??!1,hideOnlyIfNotInteractedWith:!0,children:M?t.jsxs("div",{className:"mb-3 mt-0.5 overflow-hidden rounded-xl bg-black",children:[t.jsx(Es,{message:o.message,FormattedText:de}),i!=null&&t.jsx(Ts,{message:i.message})]}):null})}return null}const Ls=3,zs=.1,ne=[0,.26,.4];function Vs({nextMessage:e,isLastMessage:a,isRequestActive:s}){let o=a||!e||e&&!le(e.message);const i=us(e?.message),n=Be(i.slice(0,Ls).map(g=>g.entries[0].url));if(e?.message.id&&ds(e?.message.id),o){const g=s?t.jsxs("div",{className:"flex items-center gap-1",children:[n.map((r,l)=>t.jsx(O.div,{className:w("-ml-1.5 first:ml-0 last:mr-1.5","relative"),initial:{width:l===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:zs,delay:ne[Math.min(l,ne.length-1)]},children:t.jsx("div",{className:w("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-2 border-token-main-surface-primary bg-token-main-surface-primary"),children:t.jsx(He,{url:r,size:32,minSize:16,className:"icon-md rounded-full"})})},r)),t.jsx(W,{id:"jjx8Qg",defaultMessage:"Searching the web"})]}):t.jsx(W,{id:"fssXGM",defaultMessage:"Error while searching"});return t.jsx(J,{highlightedCommand:g,status:s?A.Running:A.Error})}return null}const Us={strong:e=>{const{node:a,children:s,...o}=e;return t.jsx("strong",{...o,className:w(o.className,"font-semibold text-token-text-primary"),children:s})},p:e=>{const{node:a,children:s,...o}=e;return t.jsx("p",{...o,className:w(o.className,"text-base","has-[strong]:mb-1 [&:not(:first-child)]:has-[strong]:mt-3 [&:not(:has(strong))]:mb-3"),children:s})}};function Ws({headline:e,message:a}){const o=a.create_time?new Date(a.create_time*1e3):Date.now(),i=+new Date-+o,n=Ke(a.id,48e4,Ye(48e4,i));return t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx(re,{percentage:n,thickness:1/8,className:"h-5 w-5 text-token-text-primary",backgroundStrokeClassName:"stroke-token-main-surface-tertiary",transitionDuration:`${(100-n)/100*.2}s`,transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}),e]})}function Bs({messages:e,isStreaming:a,clientThreadId:s}){const[o,i]=E.useState(""),[n,g]=E.useState(!1),f=fs(s)===Me.STREAMING||a,u=e[0].message,M=u.id,d=D.getServerThreadId(s),h=Je(u),p=u.metadata?.summarization_headline,T=a&&p!=null;E.useEffect(()=>{const b=/\*\*(.*?)(?:\*\*|\n|$)/g;let R,F="";for(;(R=b.exec(h))!=null;)F=R[1].trim();F?i(F):u.metadata?.initial_text!=null&&i(u.metadata.initial_text)},[h,u.metadata?.initial_text]),E.useEffect(()=>{h.length>0&&!p&&g(!0)},[h,p]);const _=E.useMemo(()=>({client_thread_id:s,message_id:M,conversationId:d}),[s,M,d]);E.useEffect(()=>{n&&K.logEvent(Y.receivedA8KM123Message,_)},[n]);const v=E.useCallback(()=>{K.logEvent(Y.openedA8KM123Message,{..._,isStreaming:a})},[_,a]);return t.jsx(J,{status:f?A.Running:A.Finished,highlightedCommand:f?p==null?o:t.jsx(Ws,{headline:p,message:u}):u.metadata?.finished_text??"",onOpenAnalytics:v,children:n&&!T?t.jsx("div",{className:"mb-4 border-l-2 pl-4 dark:border-token-text-secondary",children:t.jsx(de,{componentOverrides:Us,className:"not-prose leading-6",children:h})}):null})}const Hs=j(()=>N(()=>import("./sso-bfudo21r6sapkoc9.js").then(e=>e.J),__vite__mapDeps([24,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54])).then(e=>e.JawboneMessage).catch(()=>ls)),Js=j(()=>N(()=>import("./exp38p44xj6014kv.js"),__vite__mapDeps([55,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),Ks=j(()=>N(()=>import("./f5ouncob5kqmyzkz.js"),__vite__mapDeps([56,1,2,3,4,5]))),Ys=j(()=>N(()=>import("./b9fixbb03io25uc1.js"),__vite__mapDeps([57,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),Qs=j(()=>N(()=>import("./hmywprkql4v7p6e5.js"),__vite__mapDeps([58,1,2,3,4,5,7,6])).then(e=>e.TextMessageEditor)),Gs=j(()=>N(()=>import("./ftqp0wm72peg5k6s.js"),__vite__mapDeps([59,1,2,3,4,5,6,60,13,12,14,15,7,16,17,18,19,8,20,21,9,22]))),$s=j(()=>N(()=>import("./g0tsgol9t53uinap.js"),__vite__mapDeps([61,1,2,3,13,4,5,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),Xs=j(()=>N(()=>import("./j4fjvkb5o475elvp.js"),__vite__mapDeps([62,1,2,3,4,5,16,7,6,17,37,13,12,14,15,18,19,8,20,21,9,22])).then(e=>e.BrowsingMessage)),qs=j(()=>N(()=>import("./idd7qa30kjzm0zca.js"),__vite__mapDeps([63,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22])).then(e=>e.SearchResultMessage)),Zs=j(()=>N(()=>import("./cmd5ftiyx62zmugn.js"),__vite__mapDeps([64,1,2,3,4,5,16,7,6,17,13,12,14,15,18,19,8,20,21,9,22])).then(e=>e.JITPluginMessage));function mt(e){switch(e.type){case m.Text:case m.Debug:return[e.message];case m.MultiText:case m.Browsing:case m.CodeInterpreter:case m.JITPlugin:case m.RetrievalBrowsing:case m.ParallelBrowsing:case m.Dalle:case m.GizmoEditor:case m.SearchResult:case m.a8km123:case m.f959b8c:case m.b1de6e2:case m.b1de6e2_c:case m.Canmore:case m.de1d73e:case m.SearchGPTQuery:return e.messages;default:throw new Error("Bad")}}function gt({groupedMessagesToRender:e,allGroupedMessages:a,clientThreadId:s,isEditing:o,isUserTurn:i,isCompletionRequestInProgress:n,isFeedbackEnabled:g,isFinalTurn:r,turnIndex:l,hasActiveRequest:f,showEditButton:u=!1,handleEnterEdit:M,handleExitEdit:d,onChangeItemInView:h,onRequestMoreCompletions:p,onRequestCompletion:T,shouldGrowContainer:_=!0}){const{showDebugConversationTurns:v}=Qe(),b=hs(s),R=a.some(c=>Ge.includes(c.type)),F=e.map((c,y)=>{const S=y===a.length-1;switch(c.type){case m.Text:case m.MultiText:{const I=e[y-1],C=I?.type,L=I&&"messages"in I?I.messages:void 0;if(c.type===m.Text){const ue=c?.message&&!le(c.message.message),fe=o?t.jsx(Qs,{message:c.message,clientThreadId:s,onChangeItemInView:h,onRequestCompletion:T,onRequestMoreCompletions:p,onExitEdit:d,disabled:f}):R&&ue?null:t.jsx(cs,{className:"min-h-8",message:c.message,isFeedbackEnabled:g,isCompletionInProgress:S&&n,turnIndex:l,clientThreadId:s,showEditButton:u,onEnterEdit:M,isUserTurn:i,onRequestMoreCompletions:p,prevGroupedMessageType:C,prevGroupedMessages:L});return t.jsxs(E.Fragment,{children:[fe,t.jsx($e,{isUserTurn:i,message:c.message.message})]},"group-"+c.message.nodeId)}else return c.type===m.MultiText?t.jsx(Ys,{clientThreadId:s,messages:c.messages,isCompletionInProgress:S&&n,isFeedbackEnabled:g,onRequestMoreCompletions:p,prevGroupedMessageType:C,prevGroupedMessages:L},"multitext-"+(c.messages[0]?.nodeId??y)):c.type}case m.Browsing:case m.RetrievalBrowsing:{const I=b!=null&&[z.GizmoInteraction,z.GizmoMagicCreate,z.GizmoTest].includes(b.kind);return t.jsx(Xs,{messages:c.messages,isRequestActive:f,isLastMessageInTurn:S,isUsingGizmo:I,isRetrieval:c.type===m.RetrievalBrowsing},"browsing-"+(c.messages[0]?.nodeId??y))}case m.SearchGPTQuery:{const I=a.slice(y+1).find(C=>C.type===m.Text);return t.jsx(Vs,{isRequestActive:f,isLastMessage:S,nextMessage:I&&I.type===m.Text?I.message:void 0},"searchquery-"+(c.messages[0]?.nodeId??y))}case m.a8km123:return t.jsx(Bs,{messages:c.messages,isStreaming:S&&n,clientThreadId:s},"sum-"+(c.messages[0]?.nodeId??y));case m.f959b8c:return null;case m.b1de6e2:return null;case m.b1de6e2_c:return null;case m.de1d73e:{const I=y+1<a.length?a[y+1]:void 0;return t.jsx(Hs,{currentGroupedMessage:c,nextMessage:I&&I.type===m.Text?I.message:void 0,isLastMessage:S,isRequestActive:f},"jawbone-"+(c.messages[0]?.nodeId??y))}case m.ParallelBrowsing:return t.jsx($s,{messages:c.messages},"parallel-"+(c.messages[0]?.nodeId??y));case m.CodeInterpreter:return t.jsx(ks,{messages:c.messages,isRequestActive:f,clientThreadId:s},"ada-"+(c.messages[0]?.nodeId??y));case m.JITPlugin:return t.jsx(Zs,{messages:c.messages,clientThreadId:s,isLastTurnInConversation:r,onRequestCompletion:T},"jit-"+(c.messages[0]?.nodeId??y));case m.Dalle:return t.jsx(Gs,{messages:c.messages,clientThreadId:s},"dalle-"+(c.messages[0]?.nodeId??y));case m.GizmoEditor:return t.jsx(Js,{messages:c.messages},"gizmo-editor-"+(c.messages[0]?.nodeId??y));case m.Canmore:return t.jsx(Cs,{messages:c.messages,isRequestActive:f},"canmore-"+(c.messages[0]?.nodeId??y));case m.Debug:return v?t.jsx(Ks,{message:c.message},"debug-"+c.message.nodeId):null;case m.SearchResult:return t.jsx(qs,{messages:c.messages},"search-result-"+(c.messages[0]?.nodeId??y))}});return t.jsx(st,{shouldGrowContainer:_,children:F})}function et(){return t.jsx(Xe,{type:"danger",children:t.jsx(W,{id:"daIg0P",defaultMessage:"Unable to display this message due to a error."})})}function st({children:e,shouldGrowContainer:a}){return t.jsx("div",{className:w({"flex max-w-full flex-col":!0,"flex-grow":a}),children:t.jsx(Ee,{name:"GroupedMessages",fallback:et,children:e})})}function ut(e,a,s,o){let i=es.getReadyFiles(e.getState());o?.kind===z.GizmoMagicCreate?i=i.filter(d=>d.gizmoId!=null):i=i.filter(d=>d.gizmoId==null);let n=a??"";const g=[],r=[],l=ss(s,o),u=ts(s,o).length>0,M=l===U.Interpreter||l===U.Retrieval||l===U.ContextConnector;return i.forEach(({fileSpec:d})=>{if(M){const h=d.contextConnectorInfo;g.push({id:d.id,size:d.size,name:d.name,context_connector_info:h?{context_connector:h?.contextConnector,source_url:h?.sourceUrl,synthetic_extension:h?.syntheticExtension??null,type:h?.type}:void 0,mime_type:d.mimeType,width:"width"in d?d.width:void 0,height:"height"in d?d.height:void 0,file_token_size:d.fileTokenSize})}u&&"width"in d&&"height"in d&&r.push({content_type:Ie.ImageAssetPointer,asset_pointer:as(d.id),size_bytes:d.size,width:d.width,height:d.height})}),r.length>0&&(r.push(a??""),n={content_type:H.MultimodalText,parts:r}),{content:n,attachments:g}}async function ft({clientThreadId:e,currentRequestId:a,queryClient:s,isHistoryAndTrainingDisabled:o}){const i=D.getServerThreadId(e);ms.stopConversation(i);const n=D.getTree(e);!n.hasReceivedServerCompletion&&!o&&n.getParent(a).metadata?.errCode!==qe.ContentPolicy&&setTimeout(()=>{gs.onCreateFinished(s,i,o)},500),i&&Te.checkGate("3922476776")&&await ye.stopConversationProcess(i),Ze.abortRequest(a)&&D.updateTree(e,r=>{const l=D.getThreadCurrentLeafId(e);r.updateNodeMessageMetadata(l,{finish_details:{type:"interrupted"}})})}export{gt as C,J as T,A as a,ct as b,ft as c,mt as d,ut as g};
//# sourceMappingURL=jz75bsy488cwa3hg.js.map
