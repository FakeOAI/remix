import{ek as h,el as lt,em as fe,en as G,eo as st,ep as ct,eq as b,er as s,es as c,et as ve,eu as ge,ev as it,ew as ut,ex as dt,ey as mt,ez as ft,eA as vt,eB as ht,eC as gt,eD as pt,eE as bt,eF as De,eG as Tt,eH as St,eI as Qe,eJ as xt,eK as Ct,eL as Ve,eM as yt,eN as kt,eO as wt,eP as Et,eQ as Nt,eR as _t,i as Bt,bN as Ht,R as It}from"./d49gc0vs991bd5hw.js";import{r as a,a6 as y,a9 as Mt,a0 as Pt,y as u,ae as ee,bt as Rt,aA as jt}from"./b75w2kxjgzazjxw6.js";import{S as Ot}from"./d9rj50fkuog8a2dx.js";import{m as Ge}from"./hv0th18lgha96dw2.js";function Ue(l,t){var d=Ct(l);if(Ve){var g=Ve(l);t&&(g=yt(g).call(g,function(x){return Qe(l,x).enumerable})),d.push.apply(d,g)}return d}function ze(l){for(var t=1;t<arguments.length;t++){var d=arguments[t]!=null?arguments[t]:{};if(t%2){var g;ge(g=Ue(Object(d),!0)).call(g,function(p){bt(l,p,d[p])})}else if(De)Tt(l,De(d));else{var x;ge(x=Ue(Object(d))).call(x,function(p){St(l,p,Qe(d,p))})}}return l}var Lt=function(){return 1/0},Ke=17,Ft="bottom",_="top",We=1,$t=34,qe={};function Dt(l,t){return l(),xt(l,t)}function Je(l){var t=l.mode,d=l.target,g=d.offsetHeight,x=d.scrollHeight,p=d.scrollTop,k=x-p-g<We,r=p<We,B=t===_?r:k,R=t!==_?r:k;return{atBottom:k,atEnd:B,atStart:R,atTop:r}}function te(l,t){return l===(t===_?0:"100%")}var pe=function(t){var d=t.checkInterval,g=t.children,x=t.debounce,p=t.debug,k=t.initialScrollBehavior,r=t.mode,B=t.nonce,R=t.scroller,i=a.useMemo(function(){return lt("<ScrollToBottom>",{force:p})},[p]);r=r===_?_:Ft;var w=a.useRef(0),H=a.useRef(k),M=fe(r===_?0:"100%"),U=G(M,3),E=U[0],z=U[1],I=U[2],Y=fe(null),K=G(Y,3),S=K[0],A=K[1],C=K[2],W=a.useRef(0),v=a.useRef(0),T=a.useRef(0),ne=a.useState(!0),Te=G(ne,2),Se=Te[0],xe=Te[1],Ye=a.useState(!0),Ce=G(Ye,2),ye=Ce[0],ke=Ce[1],Ae=a.useState(!0),we=G(Ae,2),Ee=we[0],Ne=we[1],Ze=a.useState(!1),_e=G(Ze,2),Be=_e[0],He=_e[1],et=fe(!0),le=G(et,3),se=le[0],j=le[1],O=le[2],Z=a.useRef([]),Ie=a.useCallback(function(e){var n=C.current;return Z.current.push(e),n&&e({scrollTop:n.scrollTop}),function(){var o=Z.current,m=st(o).call(o,e);~m&&ct(o).call(o,m,1)}},[Z,C]),ce=a.useCallback(function(){var e=I.current;i(function(){var n;return b(n=["%cSpineTo%c: %conEnd%c is fired."]).call(n,s(c("magenta")),s(c("orange")),[{animateTo:e}])}),w.current=ve(),te(e,r)||j(!1),z(null)},[I,i,w,r,z,j]),L=a.useCallback(function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.behavior,m=C.current;if(typeof e!="number"&&e!=="100%")return console.warn('react-scroll-to-bottom: Arguments passed to scrollTo() must be either number or "100%".');i(function(){var f;return[b(f=["%cscrollTo%c: Will scroll to %c".concat(typeof e=="number"?e+"px":e.replace(/%/g,"%%"),"%c")]).call(f,s(c("lime","")),s(c("purple"))),{behavior:o,nextAnimateTo:e,target:m}]}),o==="auto"?(ce(),m&&(m.scrollTop=e==="100%"?m.scrollHeight-m.offsetHeight:e)):(o!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollTo". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),z(e)),te(e,r)&&(i(function(){var f;return[b(f=["%cscrollTo%c: Scrolling to end, will set sticky to %ctrue%c."]).call(f,s(c("lime","")),s(c("purple"))),[{mode:r,nextAnimateTo:e}]]}),j(!0))},[i,ce,r,z,j,C]),q=a.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.behavior;i(function(){var o;return b(o=["%cscrollToBottom%c: Called"]).call(o,s(c("yellow","")))}),n!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToBottom". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),L("100%",{behavior:n||"smooth"})},[i,L]),J=a.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.behavior;i(function(){var o;return b(o=["%cscrollToTop%c: Called"]).call(o,s(c("yellow","")))}),n!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToTop". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),L(0,{behavior:n||"smooth"})},[i,L]),Me=a.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.behavior;i(function(){var m;return b(m=["%cscrollToEnd%c: Called"]).call(m,s(c("yellow","")))}),n!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToEnd". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var o={behavior:n||"smooth"};r===_?J(o):q(o)},[i,r,q,J]),Pe=a.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.behavior;i(function(){var m;return b(m=["%cscrollToStart%c: Called"]).call(m,s(c("yellow","")))}),n!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToStart". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var o={behavior:n||"smooth"};r===_?q(o):J(o)},[i,r,q,J]),re=a.useCallback(function(){var e=C.current;if(e){if(H.current==="auto"){i(function(){var D;return b(D=["%ctarget changed%c: Initial scroll"]).call(D,s(c("blue")))}),e.scrollTop=r===_?0:e.scrollHeight-e.offsetHeight,H.current=!1;return}var n=W.current,o=e.offsetHeight,m=e.scrollHeight,f=e.scrollTop,P=r===_?0:Math.max(0,m-o-f),$=Math.max(0,n-f),oe=R({maxValue:P,minValue:$,offsetHeight:o,scrollHeight:m,scrollTop:f}),F=Math.max(0,Math.min(P,oe)),N;r===_||F!==P?N=f+F:N="100%",i(function(){var D,Q,X;return[b(D=[b(Q=b(X="%cscrollToSticky%c: Will animate from %c".concat(n,"px%c to %c")).call(X,typeof N=="number"?N+"px":N.replace(/%/g,"%%"),"%c (%c")).call(Q,(N==="100%"?P:N)+n,"px%c)")]).call(D,s(c("orange")),s(c("purple")),s(c("purple")),s(c("purple"))),{animateFrom:n,maxValue:P,minValue:$,nextAnimateTo:N,nextValue:F,offsetHeight:o,rawNextValue:oe,scrollHeight:m,scrollTop:f}]}),L(N,{behavior:"smooth"})}},[W,i,r,R,L,C]),tt=a.useCallback(function(e){var n,o=e.timeStampLow,m=I.current,f=C.current,P=m!==null;if(!(o<=w.current||!f)){var $=Je({mode:r,target:f}),oe=$.atBottom,F=$.atEnd,N=$.atStart,D=$.atTop;xe(oe),ke(F),He(N),Ne(D);var Q=f.offsetHeight,X=f.scrollHeight,je=v.current,Oe=T.current,de=Q!==je,me=X!==Oe;if(de&&(v.current=Q),me&&(T.current=X),!de&&!me){var ae=P&&te(m,r)||F;O.current!==ae&&(i(function(){var V,Le,Fe,$e;return[b(V=["%conScroll%c: %csetSticky%c(%c".concat(ae,"%c)")]).call(V,s(c("red")),s(c("red")),s(c("purple"))),b(Le=[b(Fe=b($e="(animating = %c".concat(P,"%c && isEnd = %c")).call($e,te(m,r),"%c) || atEnd = %c")).call(Fe,F,"%c")]).call(Le,s(c("purple")),s(c("purple")),s(c("purple")),[{animating:P,animateTo:m,atEnd:F,mode:r,offsetHeight:f.offsetHeight,scrollHeight:f.scrollHeight,sticky:O.current,nextSticky:ae}])]}),j(ae))}else O.current&&(i(function(){var V;return[b(V=["%conScroll%c: Size changed while sticky, calling %cscrollToSticky()%c"]).call(V,s(c("red")),s(c("orange")),[{offsetHeightChanged:de,scrollHeightChanged:me}]),{nextOffsetHeight:Q,prevOffsetHeight:je,nextScrollHeight:X,prevScrollHeight:Oe}]}),re());var nt=f.scrollTop;ge(n=Z.current).call(n,function(V){return V({scrollTop:nt})})}},[I,i,w,r,v,T,Z,re,xe,ke,He,Ne,j,O,C]);a.useEffect(function(){if(S){var e=!1,n=Dt(function(){var o=C.current,m=I.current!==null;O.current?Je({mode:r,target:o}).atEnd?e=!1:e?ve()-e>$t&&(m||(W.current=o.scrollTop,i(function(){var f;return b(f=["%cInterval check%c: Should sticky but not at end, calling %cscrollToSticky()%c to scroll"]).call(f,s(c("navy")),s(c("orange")))}),re()),e=!1):e=ve():o.scrollHeight<=o.offsetHeight&&!O.current&&(i(function(){var f;return[b(f=["%cInterval check%c: Container is emptied, setting sticky back to %ctrue%c"]).call(f,s(c("navy")),s(c("purple"))),[{offsetHeight:o.offsetHeight,scrollHeight:o.scrollHeight,sticky:O.current}]]}),j(!0))},Math.max(Ke,d)||Ke);return function(){return clearInterval(n)}}},[I,d,i,r,re,j,O,S,C]);var Re=a.useMemo(function(){var e=qe[B]||(qe[B]=it({key:"react-scroll-to-bottom--css-"+ut(),nonce:B}));return function(n){return e.css(n)+""}},[B]),rt=a.useMemo(function(){return{observeScrollPosition:Ie,setTarget:A,styleToClassName:Re}},[Ie,A,Re]),ie=a.useMemo(function(){return{atBottom:Se,atEnd:ye,atStart:Be,atTop:Ee,mode:r}},[Se,ye,Be,Ee,r]),ue=a.useMemo(function(){var e=E!==null;return{animating:e,animatingToEnd:e&&te(E,r),sticky:se}},[E,r,se]),ot=a.useMemo(function(){return ze(ze({},ie),ue)},[ie,ue]),at=a.useMemo(function(){return{scrollTo:L,scrollToBottom:q,scrollToEnd:Me,scrollToStart:Pe,scrollToTop:J}},[L,q,Me,Pe,J]);return a.useEffect(function(){if(S){var e=function(){T.current=S.scrollHeight};return S.addEventListener("focus",e,{capture:!0,passive:!0}),function(){return S.removeEventListener("focus",e)}}},[S]),i(function(){var e;return[b(e=["%cRender%c: Render"]).call(e,s(c("cyan",""))),{animateTo:E,animating:E!==null,sticky:se,target:S}]}),y.createElement(dt.Provider,{value:rt},y.createElement(mt.Provider,{value:at},y.createElement(ft.Provider,{value:ot},y.createElement(vt.Provider,{value:ie},y.createElement(ht.Provider,{value:ue},g,S&&y.createElement(gt,{debounce:x,name:"scroll",onEvent:tt,target:S}),S&&E!==null&&y.createElement(pt,{name:"scrollTop",onEnd:ce,target:S,value:E}))))))};pe.defaultProps={checkInterval:100,children:void 0,debounce:17,debug:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:Lt};pe.propTypes={checkInterval:h.number,children:h.any,debounce:h.number,debug:h.bool,initialScrollBehavior:h.oneOf(["auto","smooth"]),mode:h.oneOf(["bottom","top"]),nonce:h.string,scroller:h.func};var Vt={position:"relative"},be=function(t){var d=t.children,g=t.className,x=t.followButtonClassName,p=t.scrollViewClassName,k=kt()(Vt);return y.createElement("div",{className:wt(k,(g||"")+"")},y.createElement(Et,{className:(p||"")+""},d),y.createElement(Nt,{className:(x||"")+""}))};be.defaultProps={children:void 0,className:void 0,followButtonClassName:void 0,scrollViewClassName:void 0};be.propTypes={children:h.any,className:h.string,followButtonClassName:h.string,scrollViewClassName:h.string};var Xe=function(t){var d=t.checkInterval,g=t.children,x=t.className,p=t.debounce,k=t.debug,r=t.followButtonClassName,B=t.initialScrollBehavior,R=t.mode,i=t.nonce,w=t.scroller,H=t.scrollViewClassName;return y.createElement(pe,{checkInterval:d,debounce:p,debug:k,initialScrollBehavior:B,mode:R,nonce:i,scroller:w},y.createElement(be,{className:x,followButtonClassName:r,scrollViewClassName:H},g))};Xe.defaultProps={checkInterval:void 0,children:void 0,className:void 0,debounce:void 0,debug:void 0,followButtonClassName:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:void 0,scrollViewClassName:void 0};Xe.propTypes={checkInterval:h.number,children:h.any,className:h.string,debounce:h.number,debug:h.bool,followButtonClassName:h.string,initialScrollBehavior:h.oneOf(["auto","smooth"]),mode:h.oneOf(["bottom","top"]),nonce:h.string,scroller:h.func,scrollViewClassName:h.string};_t();const Gt=5,Ut="Default";function zt(l){const t={};return l.forEach(d=>{const g=d.group??Ut;t[g]||(t[g]=[]),t[g].push(d)}),t}function Qt({tagOptions:l,onSubmit:t,onMoreClicked:d,onCancel:g,maxInlineTags:x=Gt,modalOnly:p=!1,modalTitle:k,multiple:r,children:B,allowEmptySubmit:R=!1}){const i=Pt(),[w,H]=a.useState(p?"modal":"inline"),[M,U]=a.useState([]),[E,z]=a.useState(void 0),I=a.useCallback(v=>{t(v),H("submitted"),setTimeout(()=>{H("closed")},1500)},[t]),Y=a.useMemo(()=>Bt(I,500),[I]),K=v=>{let T=[];return r?T=M.includes(v)?M.filter(ne=>ne!==v):[...M,v]:T=[v],U(T),T},S=()=>{I({tags:M,textFeedback:E,tagChoices:A,source:"modal"})},A=l.map(v=>v.value),C=zt(l),W=Object.keys(C);return u.jsxs(u.Fragment,{children:[!p&&u.jsx(Ht,{children:w!=="closed"&&u.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[w==="submitted"&&u.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:u.jsx("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:u.jsx("div",{className:"text-sm",children:u.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(w)&&u.jsxs("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[u.jsx("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{H("closed"),Y.cancel(),g?.()},children:u.jsx(Ot,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),u.jsx("div",{className:"text-sm text-token-text-secondary",children:u.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),u.jsxs("div",{className:"flex flex-wrap gap-3",children:[l.slice(0,x).map(v=>u.jsx(he,{$selected:M.includes(v.value),onClick:()=>{const T=K(v.value);Y({tags:T,tagChoices:A,source:"inline"})},children:v.label},v.value)),u.jsx(he,{onClick:()=>{d?.(),Y.cancel(),H("modal")},children:u.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),w==="modal"&&u.jsxs(Rt,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:k??u.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{U([]),H(p?"closed":"inline"),p&&g?.()},showCloseButton:!0,primaryButton:u.jsx(jt,{color:"primary",disabled:M.length===0&&!E&&!R,onClick:S,children:u.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[u.jsx("div",{className:"flex flex-col gap-6",children:W.map(v=>u.jsxs("div",{children:[W.length>1&&u.jsx("div",{className:"mb-3 text-sm font-semibold",children:v}),u.jsx("div",{className:"flex flex-wrap gap-3",children:C[v].map(T=>u.jsx(he,{$selected:M.includes(T.value),onClick:()=>K(T.value),children:T.label},T.value))},v)]},v))}),u.jsx(It,{name:"feedback",type:"text",className:"mt-6",placeholder:i.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:E??"",onChange:v=>z(v.target.value),onPressEnter:S}),B]})]})}const he=Mt.button`
  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary
  ${({$selected:l})=>l&&"!bg-token-text-primary !text-token-main-surface-primary"}
`;export{Xe as B,Qt as I,he as T};
//# sourceMappingURL=kgn5q67r244b5lve.js.map
