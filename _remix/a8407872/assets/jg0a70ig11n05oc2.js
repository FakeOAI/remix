import{af as o,ag as p}from"./d49gc0vs991bd5hw.js";import{bj as c,c as m,bn as n,b2 as v,b3 as S,P as r,d as u,ak as w,r as g,dA as D}from"./b75w2kxjgzazjxw6.js";import{b as C}from"./khpj3fhwc1ujxt07.js";var N=(e=>(e.DownloadMessages="download-messages",e.InviteUsersToWorkspace="invite-users-to-workspace",e.WorkspaceAppearance="workspace-appearance",e.KeyboardActions="keyboard-actions",e.UserContext="user-context",e.WorkspaceSwitcher="workspace-switcher",e.ReadOnlyConversationTemplate="read-only-conversation-template",e.CookieManagement="cookie-management",e.AgeVerificationInterstitial="age-verification-interstitial",e.GPTDetails="gpt-details",e.GPTPrivacySettings="gpt-privacy-settings",e.GPTFeedbackEmail="gpt-support-email",e.GPTReview="gpt-review",e.GPTRemoveThirdParty="gpt-remove-third-party",e.SharedConversationModeration="shared-conversation-moderation",e.ReportConversation="report-conversation",e.BlockingInitialComponent="blocking-initial-component",e.NoAuthNewChat="no-auth-new-chat",e.GlobalMemoryOnboarding="global-memory-onboarding",e.AccountPayment="account-payment",e.CreateExclusion="create-exclusion",e.AddServiceAccountKey="add-service-account-key",e.DeleteServiceAccountKey="delete-service-account-key",e))(N||{});const T=c.IsNavigationCollapsed,h=c.IsHistoryCollapsed,b=c.IsGptListCollapsed;function I(){const e=n.getItem(T)??!1;return v.setCookie(S.NavigationState,e?"0":"1",{maxAge:2**30}),{collapsed:e}}function P(){return v.getCookie(S.SidebarState)==="pinned"?o.Pinned:o.Floating}function l({collapsed:e}){n.setItem(T,e),v.setCookie(S.NavigationState,e?"0":"1",{maxAge:2**30})}function y(e){v.setCookie(S.SidebarState,e,{maxAge:2**30})}const t=m()(()=>({isThreadHeaderVisible:!0,isDesktopNavCollapsed:I().collapsed,isVoiceActive:!1,sharingModalThreadId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,chatThreadFlyout:{userPreferenceIsOpen:k()??!1,isOpen:k()??!1},activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,sidebarState:P(),isHistoryCollapsed:n.getItem(h)??!0,isGptListCollapsed:n.getItem(b)??!0,browseMode:"conversation"})),O={isThreadHeaderVisible:e=>e.isThreadHeaderVisible,isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible,isHistoryCollapsed:e=>e.isHistoryCollapsed,isGptListCollapsed:e=>e.isGptListCollapsed},d={setBrowseMode:e=>{t.setState(a=>({...a,browseMode:e}))},enterGizmoEditor:()=>{t.setState({browseMode:"gizmo-editor"})},exitGizmoEditor:()=>{t.setState({browseMode:"conversation"})},toggleGptListCollapsed:()=>{t.setState(e=>{const a=!e.isGptListCollapsed;return n.setItem(b,a),r.logToggleShowGptList({isCollapsed:a}),{isGptListCollapsed:a}})},collapseHistory:async()=>{t.setState({isHistoryCollapsed:!0}),await p.yield(),n.setItem(h,!0),r.logToggleShowRecents({isOnlyShowingRecents:!0})},expandHistory:async()=>{t.setState({isHistoryCollapsed:!1}),await p.yield(),n.setItem(h,!1),r.logToggleShowRecents({isOnlyShowingRecents:!1})},toggleNavSidebar:()=>{t.getState().activeStageSidebar?d.togglePopoverNavSidebar():d.toggleDesktopNavCollapsed()},togglePopoverNavSidebar:()=>{d.toggleActiveSidebar("popover-nav")},closePopoverNavSidebar:()=>{t.setState(e=>e.activeSidebar==="popover-nav"?{activeSidebar:void 0}:{})},setSidebarState:async e=>{switch(e){case o.Floating:t.setState({sidebarState:o.Floating}),await p.yield(),l({collapsed:!0}),y(o.Floating);break;case o.Pinned:t.setState({sidebarState:o.Pinned}),await p.yield(),l({collapsed:!1}),y(o.Pinned);break}},toggleDesktopNavCollapsed:e=>{t.setState(a=>{const s=e??!a.isDesktopNavCollapsed;return l({collapsed:s}),r.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:s}),{isDesktopNavCollapsed:s}})},openSidebar:()=>{t.getState().sidebarState===o.Pinned&&l({collapsed:!1}),r.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1}),t.setState({isDesktopNavCollapsed:!1})},closeSidebar:()=>{const e=document.querySelector("input[name='sidebar_closed']");e&&(e.checked=!0),t.getState().sidebarState===o.Pinned&&l({collapsed:!0}),r.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0}),t.setState({isDesktopNavCollapsed:!0})},hideThreadHeader:()=>{t.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{t.setState({isThreadHeaderVisible:!0})},openSharingModal(e,a){t.setState({sharingModalThreadId:e}),r.logEvent(u.shareConversationOpenModal,{location:a})},closeSharingModal(){t.setState({sharingModalThreadId:void 0})},openFeedbackModal(e){t.setState({feedbackModalThreadId:e})},closeFeedbackModal(){t.setState({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(e){t.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){t.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){t.setState({activeSidebar:e})},toggleActiveSidebar(e){t.setState(a=>({activeSidebar:a.activeSidebar===e?!1:e}))},closeActiveSidebar(){t.setState(()=>({activeSidebar:!1}))},setActiveStageSidebar(e){t.setState({activeStageSidebar:e})},toggleModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.has(e)?s.delete(e):s.add(e),{activeModals:s}})},openModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.add(e),{activeModals:s}})},closeModal(e){t.setState(a=>{const s=new Set(a.activeModals);return s.delete(e),{activeModals:s}})},closeAllActiveModals(){t.setState({activeModals:new Set})},hideLatencyDevTools:()=>{t.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{t.setState({isLatencyDevToolsVisible:!0})},openChatThreadFlyout:(e,a,s)=>{r.logEventWithStatsig(u.searchLinkSidebarShown,"search_links_sidebar_shown",C({turnIndex:a,clientThreadId:e,messageId:s})),f(!0),t.setState({chatThreadFlyout:{isOpen:!0,userPreferenceIsOpen:!0,turnIndex:a,messageId:s,clientThreadId:e}})},toggleChatThreadFlyout:(e,a,s)=>{const i=t.getState().chatThreadFlyout;e===i.clientThreadId&&a===i.turnIndex&&i.isOpen?d.closeChatThreadFlyout(e,s):d.openChatThreadFlyout(e,a,s)},closeChatThreadFlyout:(e,a)=>{r.logEventWithStatsig(u.searchLinkSidebarClosed,"search_links_sidebar_closed",C({clientThreadId:e,messageId:a})),f(!1),t.setState({chatThreadFlyout:{isOpen:!1,userPreferenceIsOpen:!1}})},temporaryCloseChatThreadFlyout:()=>{t.setState(e=>({chatThreadFlyout:{isOpen:!1,userPreferenceIsOpen:e.chatThreadFlyout.userPreferenceIsOpen}}))}};function _(e){return t(a=>a.activeModals.has(e))}function E(){return t(e=>e.chatThreadFlyout)}function H(){const{isUnauthenticated:e}=w(),a=g.useContext(D).getCookie(S.NavigationState),s=t(i=>i.isDesktopNavCollapsed);return e?!0:a?a==="0":s}function M(){const[e,a]=g.useState(!1),s=t(i=>i.activeModals);return g.useEffect(()=>{a(i=>i||s.has("blocking-initial-component"))},[s]),e}function k(){const e=n.getItem(c.ChatThreadFlyoutState);return e===void 0?null:e}function f(e){n.setItem(c.ChatThreadFlyoutState,e)}export{N as G,d as U,_ as a,H as b,E as c,O as d,M as e,t as u};
//# sourceMappingURL=jg0a70ig11n05oc2.js.map
