const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-i1k7k2l36bbnoheu.js","assets/cy64emva2uzrk485.js","assets/m1w0e9mshx1kxsyq.js","assets/root-nervg1nc.css","assets/ehuratfqdza89wob.js","assets/j735z7kkcepyp8y2.js","assets/conversation-small-kig9eefw.css","assets/nzhmuw3i6t164b6h.js","assets/dzgqww1rafiwckp5.js","assets/ijh2y7o5pzxbifv5.js","assets/n3h0t5brbjpa342f.js","assets/cknnke94em4nivg3.js","assets/i7y30xwqnlt1hc97.js","assets/m9bhi499hm1n51b7.js","assets/j0t5pu2pmnlemvhv.js","assets/l9ljdfvuq5zywldm.js","assets/h0gcxn2s5o4geas8.js","assets/bhg9kq2ror59tdge.js","assets/oeozbflqt33ot68t.js","assets/f4bade4g0o45i4rd.js","assets/nikytg28mk6tkq1d.js","assets/h6xq44k3rihiglrt.js","assets/oktmpiqgb8bkkuoa.js","assets/irkx1a8ovpixf9l2.js","assets/itghwucfyv5ciib7.js","assets/kg3un79ab6go4h1v.js","assets/gi5397obw8tl5b30.js","assets/kxb6j537cf0vxln8.js","assets/buquc81wplgl02qb.js","assets/983a0dy92b3ronpv.js","assets/hor9pfpmgngfbiws.js","assets/f0ozsqg0qk8xyj3m.js","assets/kqwdyvkaaavvn8k3.js","assets/y1nbjiynyy75cm68.js","assets/comasbb81bmiz5im.js","assets/hpp947n5rplbu58l.js","assets/mbh3dou1gcx9ziuu.js","assets/k7tqu2q2wqmxeb6v.js","assets/nhwwej1nq0zrd7sc.js","assets/e56n8gzifoogwb0j.js","assets/j2yxx9tvvzwn765v.js","assets/deovd2qhauetjiwg.js","assets/dywbkbifr0ayki46.js","assets/nw2yfjqvd35ue7qh.js","assets/hvju4g59l5h16yu1.js","assets/frb09mevmcqzi83z.js","assets/k3dqc4tnan5fqgn3.js","assets/m940pyz471ao5tq9.js","assets/l1lmxzbhhle72h3t.js","assets/iqd6yb1gy4k967gh.js","assets/mr77ps78lv3rquir.js","assets/iej0cupg2dqkmejt.js","assets/khq1to0m7nn9axv1.js","assets/ehb75ilhui1076ee.js","assets/jk8w36bsokizpx57.js","assets/h6c0bohmhdn61j1a.js","assets/kn3xnf076tvydluu.js","assets/g6vpm7u4qhm9pbg5.js","assets/lu5e4w21al46gmy2.js","assets/c8nfl4cclq2l1xmq.js","assets/r3hxqma7cly2rt91.js","assets/kv69dktid4rxuaqi.js","assets/swiper-kmk1dd5x.css"])))=>i.map(i=>d[i]);
import{bY as He,u as ln,r as l,b as un,l as n,R as dn,fr as ft,aa as pt,W as Q,fs as Fe,by as ne,bz as mn,eH as fn,a3 as oe,X as pn,Y as gn,a0 as T,a1 as Te,a2 as pe,m as je,cp as xn,aO as J,bH as ge,P as O,d as L,aB as vn,aE as gt,aF as xt,a as vt,bg as ke,aL as hn,cb as bn,c9 as In,b0 as ye,bI as ht,ac as me,b$ as bt,bD as It,cq as Mt,af as Mn,ec as yn,ed as Cn,bh as Ce,b_ as Sn,Q as yt,be as We}from"./cy64emva2uzrk485.js";import{ic as Tn,id as jn,ie as kn,ig as En,ih as Pn,ii as Ct,cI as wn,ij as An,ik as Fn,il as On,fD as Ze,im as Rn,io as _n,ip as Nn,iq as Dn,ir as be,is as Bn,it as Wn,iu as $n,iv as Ln,iw as Un,ix as Hn,iy as xe,iz as et,iA as Vn,iB as Ie,iC as Gn,iD as zn,iE as tt,dG as qn,fE as Qn,fH as Kn,iF as Yn,iG as Jn,iH as St,iI as Ve,an as Ge,fO as Xn,iJ as Zn,iK as Tt,c as re,N as Ee,iL as es,iM as Me,iN as ts,iO as jt,iP as Oe,iQ as ns,iR as ss,bl as se,iS as os,iT as as,iU as rs,aZ as D,iV as kt,aS as nt,aT as ie,aU as Pe,b2 as is,bt as cs,bu as ls,b5 as us,b6 as Et,b7 as Se,b8 as ce,bk as ds,bv as N,iW as W,bw as ms,b9 as fs,ba as ps,bb as gs,bd as Pt,bc as xs,aW as vs,bh as hs,bi as bs,bm as Is,bn as Ms,iX as ys,iY as Cs,iZ as Ss,i_ as Ts,bp as st,i$ as wt,bq as js,bj as ks,bs as Es,j0 as Ps,j1 as ws,j2 as As,j3 as At,j4 as Fs,j5 as Os,j6 as Re,j7 as Rs,aM as _s,aA as ae,cX as Ns,cW as Ds,V as H,fj as Bs,A as ze,v as Ft,aw as qe,d as Ws,hc as Qe,cY as Ot,cl as ot,y as Rt,aL as $s,bN as Ls,j8 as Us,c4 as Hs,j9 as Vs,u as Gs,aJ as _t,bQ as Nt,w as zs,x as qs}from"./j735z7kkcepyp8y2.js";import{r as Qs,L as Dt,K as Ks,u as Ys}from"./n3h0t5brbjpa342f.js";import{T as $e,j as Js,r as Xs,B as Zs,d as eo}from"./cknnke94em4nivg3.js";import{v as Ke,a7 as to,bE as Bt,a1 as Wt,aR as no,ag as so,r as oo,S as ao,aa as ro,q as io,b0 as $t,bn as Lt,bt as Ut,bF as Ht,J as co,bo as lo,a_ as uo,b6 as at,aJ as mo,V as fo}from"./m1w0e9mshx1kxsyq.js";import{D as P,B as po}from"./kxb6j537cf0vxln8.js";import{a as Vt,b as Gt}from"./l1lmxzbhhle72h3t.js";import{u as go}from"./qxsj1l42erkbuwc6.js";import{A as xo}from"./maooj5f1lintbuj4.js";const vo=()=>{const{value:e}=He("44045625");return e},tr=()=>{const{value:e}=He("3700195277");return e||!1},Ye=e=>{const t=Qs(e);return vo()&&!!t?.includes("canmore")},ho=e=>un.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),bo=async e=>{const t=await ho(e),s=new Map(t?.map(r=>[r.id,r])),o=[];for(const{id:r,content:i,version:c,textdoc_type:m,title:f,comments:p}of t)o.push({textdocId:r,messageId:null,type:En(m),comments:Pn(p,i),title:f,content:i,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(o.map(r=>[r.textdocId,r])),persistedTextdocVersions:o,persistedTextdocById:s}};function Io({clientThreadId:e,isEnabled:t}){const s=$e.getServerThreadId(e),{data:o,error:a,isLoading:r,isFetching:i,refetch:c}=ln({queryKey:[s,"textdocs"],enabled:!!s&&t,gcTime:0,queryFn:()=>s&&bo(s)});return l.useEffect(()=>{if(!o)return;const{persistedTextdocVersions:m}=o;Tn(m),jn(m),kn(m)},[o]),[{...o,error:a,isLoading:r,isFetching:i},c]}const zt=Ct(null),ve=Ct(null);function le(e=ft){return xe(zt,e)}function Mo(e=ft){return xe(ve,e)}function nr(){return le(e=>e?.isFetchingFromPersistence)}function sr(){return le(e=>e?.isEnabled)}function qt(){return xe(ve,e=>e?.resolveTempTextdocId)}function or(){return xe(ve,e=>e?.resolveTempCommentId)}function ar(){return xe(ve,e=>e?.latestTextdocId??null)}function rr(e){const t=qt();return le(s=>St(s,t??{},e))}function Qt(e){const t=qt();return le(s=>St(s,t??{},e)?.metadata??null)}function Kt(){const e=le(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function ir(){return le(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function cr({clientThreadId:e,children:t}){const s=Ye(e),{textdocStore:o,optimisticTextdocStore:a}=yo({clientThreadId:e,isEnabled:s});return n.jsx(ve.Provider,{value:a,children:n.jsx(zt.Provider,{value:o,children:t})})}function yo({clientThreadId:e,isEnabled:t}){const s=Js(e),o=Xs(e,s),a=Zs(e),r=wn(a),[{error:i,persistedTextdocVersionById:c,isLoading:m,isFetching:f},p]=Io({clientThreadId:e,isEnabled:t}),h=An(),[d,u]=l.useState(!1),g=Fn(),[x,v]=l.useState(!0);On(()=>{if(!t)return;const M=$e.getThreadCurrentLeafId(e),S=$e.getThreadConversationTurns(e,M),B=Ze(S)?.messages??[],F=et(B);if(F==null)return;const _=F.message.metadata?.canvas?.textdoc_id,ee=F.message.metadata?.canvas?.version;_!=null&&ee!=null&&h(_,ee),u(!0),p().finally(()=>u(!1))});const[j,w]=l.useState(c);l.useEffect(()=>{r&&w(c)},[r]);const b=t&&(r||!x||f&&!m&&d),y=Ze(o),A=l.useMemo(()=>{if(!y)return null;const{messages:M}=y,S=Rn(M??[],({message:B})=>B.author.role===dn.System),E=S===-1?M:M?.slice(S+1);return b&&E&&_n(E)?E:null},[b,y]),$=!!A?j:c,C=Nn(),k=Dn(),G=l.useMemo(()=>{let M=Vn();return!$||(M=be(M,S=>{for(const[E,B]of $.entries()){S.allTextdocIdSet[E]=E;const F=g.get(E);let _=F&&(F.versionInt??Ie)>(B.versionInt??Ie)?{...B,...F}:B;const ee=k.filter(q=>q.textdocId===E&&q.kind===Gn.REMOVE_COMMENT);let he=_.versionInt;for(const q of ee)_=zn(_,q),he=Math.max(he??Ie,q.versionInt??Ie);_={..._,versionInt:he},S.textdocById[E]=void 0,tt(S,_)}}),!C)?M:be(M,S=>{tt(S,C,!1)})},[$,g,C,k]),V=l.useMemo(()=>be(G,M=>{M.fetchError=i,M.isFetchingFromPersistence=f}),[G,i,f]),[U,K]=l.useState(Bn),z=l.useMemo(()=>A?.length?Wn(r,G,U,A):null,[A,r,U,G]),X=$n(r,z,v),Z=l.useMemo(()=>X?Ln(V,X):V,[V,X]);return l.useEffect(()=>{if(!t)return;const M=Un(U,o);M&&K(M)},[e,t,o.length]),l.useEffect(()=>{const M=Hn(U,z);M&&K(M)},[z]),{textdocStore:l.useMemo(()=>be(Z,M=>{M.isEnabled!==t&&(M.isEnabled=t);const S=qn(o,F=>F.messages),E={},B=Qn(S);for(let F=B.length-1;F>=0;F--){const _=B[F];if(_.type!==Kn.Canmore)continue;const ee=Yn(_.messages),q=et(_.messages)?.message.metadata?.canvas?.textdoc_id??Jn(S);q&&ee!=null&&!E[q]&&(E[q]=!0,ee.nodeId!==M.lastCanvasAssistantMessageById[q]&&(M.lastCanvasAssistantMessageById[q]=ee.nodeId))}}),[Z,o,t]),optimisticTextdocStore:U}}function Yt(){return Ve(e=>e.focusedObject)}function lr(){const e=Ve(t=>t.focusedObject);return e?.type!==Ge.Textdoc?null:e}function ur(){const e=Ve(t=>t.focusedObject);return e?.type!==Ge.Textdoc?null:e.history??null}function Jt(){return Yt()!=null}function dr(e){const t=Yt();return Mo(s=>{if(!e||t?.type!==Ge.Textdoc)return!1;const o=s?.resolveTempTextdocId??{},a=o[t.textdocId]??t.textdocId,r=o[e]??e;return a===r})}const Co=({children:e})=>{const t=Kt();return t?.length?n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"h-10 px-2",children:e}),n.jsx(P.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:t.map(s=>n.jsx(So,{textdocId:s},s))})]}):null},So=({textdocId:e})=>{const t=pt(Qt(e));return n.jsx(P.Item,{icon:Ke,onClick:()=>{Xn.logButtonClick(Zn.FILE_DRAWER_ITEM),Tt(t.textdocId)},children:t.title})},To=()=>{const e=Q(),t=Kt(),s=Jt();if(!t||s)return null;const o=t.length;return o===1?n.jsx(jo,{textdocId:t[0]}):n.jsx(Co,{children:n.jsx(re,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[n.jsx(Ke,{className:"icon-xl-heavy"}),o]})})})},jo=({textdocId:e})=>{const t=Q(),s=pt(Qt(e));return n.jsx(re,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsx(Ee,{onClick:()=>Tt(s.textdocId),icon:Ke})})},ko=({children:e})=>Jt()?null:n.jsx(n.Fragment,{children:e}),Eo=({clientThreadId:e,children:t})=>Ye(e)?n.jsx(ko,{children:t}):t,Xt={...mn},Po=Xt.useInsertionEffect,wo=Po||(e=>e());function Zt(e){const t=l.useRef(()=>{});return wo(()=>{t.current=e}),l.useCallback(function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t.current==null?void 0:t.current(...o)},[])}var Le=typeof document<"u"?l.useLayoutEffect:l.useEffect;let rt=!1,Ao=0;const it=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Ao++;function Fo(){const[e,t]=l.useState(()=>rt?it():void 0);return Le(()=>{e==null&&t(it())},[]),l.useEffect(()=>{rt=!0},[]),e}const Oo=Xt.useId,Ro=Oo||Fo;function _o(){const e=new Map;return{emit(t,s){var o;(o=e.get(t))==null||o.forEach(a=>a(s))},on(t,s){e.set(t,[...e.get(t)||[],s])},off(t,s){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(a=>a!==s))||[])}}}const No=l.createContext(null),Do=l.createContext(null),Bo=()=>{var e;return((e=l.useContext(No))==null?void 0:e.id)||null},Wo=()=>l.useContext(Do),$o="data-floating-ui-focusable";function Lo(e){const{open:t=!1,onOpenChange:s,elements:o}=e,a=Ro(),r=l.useRef({}),[i]=l.useState(()=>_o()),c=Bo()!=null,[m,f]=l.useState(o.reference),p=Zt((u,g,x)=>{r.current.openEvent=u?g:void 0,i.emit("openchange",{open:u,event:g,reason:x,nested:c}),s?.(u,g,x)}),h=l.useMemo(()=>({setPositionReference:f}),[]),d=l.useMemo(()=>({reference:m||o.reference||null,floating:o.floating||null,domReference:o.reference}),[m,o.reference,o.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:p,elements:d,events:i,floatingId:a,refs:h}),[t,p,d,i,a,h])}function Uo(e){e===void 0&&(e={});const{nodeId:t}=e,s=Lo({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||s,a=o.elements,[r,i]=l.useState(null),[c,m]=l.useState(null),p=a?.reference||r,h=l.useRef(null),d=Wo();Le(()=>{p&&(h.current=p)},[p]);const u=es({...e,elements:{...a,...c&&{reference:c}}}),g=l.useCallback(b=>{const y=Me(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;m(y),u.refs.setReference(y)},[u.refs]),x=l.useCallback(b=>{(Me(b)||b===null)&&(h.current=b,i(b)),(Me(u.refs.reference.current)||u.refs.reference.current===null||b!==null&&!Me(b))&&u.refs.setReference(b)},[u.refs]),v=l.useMemo(()=>({...u.refs,setReference:x,setPositionReference:g,domReference:h}),[u.refs,x,g]),j=l.useMemo(()=>({...u.elements,domReference:p}),[u.elements,p]),w=l.useMemo(()=>({...u,...o,refs:v,elements:j,nodeId:t}),[u,v,j,t,o]);return Le(()=>{o.dataRef.current.floatingContext=w;const b=d?.nodesRef.current.find(y=>y.id===t);b&&(b.context=w)}),l.useMemo(()=>({...u,context:w,refs:v,elements:j}),[u,v,j,w])}const ct="active",lt="selected";function _e(e,t,s){const o=new Map,a=s==="item";let r=e;if(a&&e){const{[ct]:i,[lt]:c,...m}=e;r=m}return{...s==="floating"&&{tabIndex:-1,[$o]:""},...r,...t.map(i=>{const c=i?i[s]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((i,c)=>(c&&Object.entries(c).forEach(m=>{let[f,p]=m;if(!(a&&[ct,lt].includes(f)))if(f.indexOf("on")===0){if(o.has(f)||o.set(f,[]),typeof p=="function"){var h;(h=o.get(f))==null||h.push(p),i[f]=function(){for(var d,u=arguments.length,g=new Array(u),x=0;x<u;x++)g[x]=arguments[x];return(d=o.get(f))==null?void 0:d.map(v=>v(...g)).find(v=>v!==void 0)}}}else i[f]=p}),i),{})}}function Ho(e){e===void 0&&(e=[]);const t=e.map(c=>c?.reference),s=e.map(c=>c?.floating),o=e.map(c=>c?.item),a=l.useCallback(c=>_e(c,e,"reference"),t),r=l.useCallback(c=>_e(c,e,"floating"),s),i=l.useCallback(c=>_e(c,e,"item"),o);return l.useMemo(()=>({getReferenceProps:a,getFloatingProps:r,getItemProps:i}),[a,r,i])}function ut(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const Vo=e=>({name:"inner",options:e,async fn(t){const{listRef:s,overflowRef:o,onFallbackChange:a,offset:r=0,index:i=0,minItemsVisible:c=4,referenceOverflowThreshold:m=0,scrollRef:f,...p}=ts(e,t),{rects:h,elements:{floating:d}}=t,u=s.current[i],g=f?.current||d,x=d.clientTop||g.clientTop,v=d.clientTop!==0,j=g.clientTop!==0,w=d===g;if(!u)return{};const b={...t,...await jt(-u.offsetTop-d.clientTop-h.reference.height/2-u.offsetHeight/2-r).fn(t)},y=await Fe(ut(b,g.scrollHeight+x+d.clientTop),p),A=await Fe(b,{...p,elementContext:"reference"}),R=Oe(0,y.top),$=b.y+R,C=ns(Oe(0,g.scrollHeight+(v&&w||j?x*2:0)-R-Oe(0,y.bottom)));if(g.style.maxHeight=C+"px",g.scrollTop=R,a){const k=g.scrollHeight>g.offsetHeight&&g.offsetHeight<u.offsetHeight*c-1||A.top>=-m||A.bottom>=-m;ne.flushSync(()=>a(k))}return o&&(o.current=await Fe(ut({...b,y:$},g.offsetHeight+x+d.clientTop),p)),{y:$}}});function Go(e,t){const{open:s,elements:o}=e,{enabled:a=!0,overflowRef:r,scrollRef:i,onChange:c}=t,m=Zt(c),f=l.useRef(!1),p=l.useRef(null),h=l.useRef(null);l.useEffect(()=>{if(!a)return;function u(x){if(x.ctrlKey||!g||r.current==null)return;const v=x.deltaY,j=r.current.top>=-.5,w=r.current.bottom>=-.5,b=g.scrollHeight-g.clientHeight,y=v<0?-1:1,A=v<0?"max":"min";g.scrollHeight<=g.clientHeight||(!j&&v>0||!w&&v<0?(x.preventDefault(),ne.flushSync(()=>{m(R=>R+Math[A](v,b*y))})):/firefox/i.test(ss())&&(g.scrollTop+=v))}const g=i?.current||o.floating;if(s&&g)return g.addEventListener("wheel",u),requestAnimationFrame(()=>{p.current=g.scrollTop,r.current!=null&&(h.current={...r.current})}),()=>{p.current=null,h.current=null,g.removeEventListener("wheel",u)}},[a,s,o.floating,r,i,m]);const d=l.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const u=i?.current||o.floating;if(!(!r.current||!u||!f.current)){if(p.current!==null){const g=u.scrollTop-p.current;(r.current.bottom<-.5&&g<-1||r.current.top<-.5&&g>1)&&ne.flushSync(()=>m(x=>x+g))}requestAnimationFrame(()=>{p.current=u.scrollTop})}}}),[o.floating,m,r,i]);return l.useMemo(()=>a?{floating:d}:{},[a,d])}let ue=l.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});ue.displayName="FloatingContext";let Je=l.createContext(null);Je.displayName="PlacementContext";function zo(e){return l.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function qo(){return l.useContext(ue).setReference}function Qo(){return l.useContext(ue).getReferenceProps}function Ko(){let{getFloatingProps:e,slot:t}=l.useContext(ue);return l.useCallback((...s)=>Object.assign({},e(...s),{"data-anchor":t.anchor}),[e,t])}function Yo(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=l.useContext(Je),s=l.useMemo(()=>e,[JSON.stringify(e,(a,r)=>{var i;return(i=r?.outerHTML)!=null?i:r})]);se(()=>{t?.(s??null)},[t,s]);let o=l.useContext(ue);return l.useMemo(()=>[o.setFloating,e?o.styles:{}],[o.setFloating,e,o.styles])}let dt=4;function Jo({children:e,enabled:t=!0}){let[s,o]=l.useState(null),[a,r]=l.useState(0),i=l.useRef(null),[c,m]=l.useState(null);Xo(c);let f=t&&s!==null&&c!==null,{to:p="bottom",gap:h=0,offset:d=0,padding:u=0,inner:g}=Zo(s,c),[x,v="center"]=p.split(" ");se(()=>{f&&r(0)},[f]);let{refs:j,floatingStyles:w,context:b}=Uo({open:f,placement:x==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${x}`:`${x}-${v}`,strategy:"absolute",transform:!1,middleware:[jt({mainAxis:x==="selection"?0:h,crossAxis:d}),os({padding:u}),x!=="selection"&&as({padding:u}),x==="selection"&&g?Vo({...g,padding:u,overflowRef:i,offset:a,minItemsVisible:dt,referenceOverflowThreshold:u,onFallbackChange(V){var U,K;if(!V)return;let z=b.elements.floating;if(!z)return;let X=parseFloat(getComputedStyle(z).scrollPaddingBottom)||0,Z=Math.min(dt,z.childElementCount),I=0,M=0;for(let S of(K=(U=b.elements.floating)==null?void 0:U.childNodes)!=null?K:[])if(S instanceof HTMLElement){let E=S.offsetTop,B=E+S.clientHeight+X,F=z.scrollTop,_=F+z.clientHeight;if(E>=F&&B<=_)Z--;else{M=Math.max(0,Math.min(B,_)-Math.max(E,F)),I=S.clientHeight;break}}Z>=1&&r(S=>{let E=I*Z-M+X;return S>=E?S:E})}}):null,rs({padding:u,apply({availableWidth:V,availableHeight:U,elements:K}){Object.assign(K.floating.style,{overflow:"auto",maxWidth:`${V}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${U}px)`})}})].filter(Boolean),whileElementsMounted:fn}),[y=x,A=v]=b.placement.split("-");x==="selection"&&(y="selection");let R=l.useMemo(()=>({anchor:[y,A].filter(Boolean).join(" ")}),[y,A]),$=Go(b,{overflowRef:i,onChange:r}),{getReferenceProps:C,getFloatingProps:k}=Ho([$]),G=D(V=>{m(V),j.setFloating(V)});return l.createElement(Je.Provider,{value:o},l.createElement(ue.Provider,{value:{setFloating:G,setReference:j.setReference,styles:w,getReferenceProps:C,getFloatingProps:k,slot:R}},e))}function Xo(e){se(()=>{if(!e)return;let t=new MutationObserver(()=>{let s=window.getComputedStyle(e).maxHeight,o=parseFloat(s);if(isNaN(o))return;let a=parseInt(s);isNaN(a)||o!==a&&(e.style.maxHeight=`${Math.ceil(o)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function Zo(e,t){var s,o,a;let r=Ne((s=e?.gap)!=null?s:"var(--anchor-gap, 0)",t),i=Ne((o=e?.offset)!=null?o:"var(--anchor-offset, 0)",t),c=Ne((a=e?.padding)!=null?a:"var(--anchor-padding, 0)",t);return{...e,gap:r,offset:i,padding:c}}function Ne(e,t,s=void 0){let o=kt(),a=D((m,f)=>{if(m==null)return[s,null];if(typeof m=="number")return[m,null];if(typeof m=="string"){if(!f)return[s,null];let p=mt(m,f);return[p,h=>{let d=en(m);{let u=d.map(g=>window.getComputedStyle(f).getPropertyValue(g));o.requestAnimationFrame(function g(){o.nextFrame(g);let x=!1;for(let[j,w]of d.entries()){let b=window.getComputedStyle(f).getPropertyValue(w);if(u[j]!==b){u[j]=b,x=!0;break}}if(!x)return;let v=mt(m,f);p!==v&&(h(v),p=v)})}return o.dispose}]}return[s,null]}),r=l.useMemo(()=>a(e,t)[0],[e,t]),[i=r,c]=l.useState();return se(()=>{let[m,f]=a(e,t);if(c(m),!!f)return f(c)},[e,t]),i}function en(e){let t=/var\((.*)\)/.exec(e);if(t){let s=t[1].indexOf(",");if(s===-1)return[t[1]];let o=t[1].slice(0,s).trim(),a=t[1].slice(s+1).trim();return a?[o,...en(a)]:[o]}return[]}function mt(e,t){let s=document.createElement("div");t.appendChild(s),s.style.setProperty("margin-top","0px","important"),s.style.setProperty("margin-top",e,"important");let o=parseFloat(window.getComputedStyle(s).marginTop)||0;return t.removeChild(s),o}var ea=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ea||{}),ta=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(ta||{}),na=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))(na||{});function De(e,t=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,o=Rs(t(e.items.slice()),r=>r.dataRef.current.domRef.current),a=s?o.indexOf(s):null;return a===-1&&(a=null),{items:o,activeItemIndex:a}}let sa={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var s,o,a,r,i;if(e.menuState===1)return e;let c={...e,searchQuery:"",activationTrigger:(s=t.trigger)!=null?s:1,__demoMode:!1};if(t.focus===W.Nothing)return{...c,activeItemIndex:null};if(t.focus===W.Specific)return{...c,activeItemIndex:e.items.findIndex(p=>p.id===t.id)};if(t.focus===W.Previous){let p=e.activeItemIndex;if(p!==null){let h=e.items[p].dataRef.current.domRef,d=Re(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});if(d!==null){let u=e.items[d].dataRef.current.domRef;if(((o=h.current)==null?void 0:o.previousElementSibling)===u.current||((a=u.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeItemIndex:d}}}}else if(t.focus===W.Next){let p=e.activeItemIndex;if(p!==null){let h=e.items[p].dataRef.current.domRef,d=Re(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:u=>u.id,resolveDisabled:u=>u.dataRef.current.disabled});if(d!==null){let u=e.items[d].dataRef.current.domRef;if(((r=h.current)==null?void 0:r.nextElementSibling)===u.current||((i=u.current)==null?void 0:i.nextElementSibling)===null)return{...c,activeItemIndex:d}}}}let m=De(e),f=Re(t,{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...m,activeItemIndex:f}},3:(e,t)=>{let s=e.searchQuery!==""?0:1,o=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(i=>{var c;return((c=i.dataRef.current.textValue)==null?void 0:c.startsWith(o))&&!i.dataRef.current.disabled}),r=a?e.items.indexOf(a):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let s=De(e,o=>[...o,{id:t.id,dataRef:t.dataRef}]);return{...e,...s}},6:(e,t)=>{let s=De(e,o=>{let a=o.findIndex(r=>r.id===t.id);return a!==-1&&o.splice(a,1),o});return{...e,...s,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},Xe=l.createContext(null);Xe.displayName="MenuContext";function we(e){let t=l.useContext(Xe);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,we),s}return t}function oa(e,t){return Et(t.type,sa,e,t)}let aa=l.Fragment;function ra(e,t){let{__demoMode:s=!1,...o}=e,a=l.useReducer(oa,{__demoMode:s,menuState:s?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsElement:i,buttonElement:c},m]=a,f=Pe(t);is(r===0,[c,i],(u,g)=>{m({type:1}),cs(g,ls.Loose)||(u.preventDefault(),c?.focus())});let p=D(()=>{m({type:1})}),h=l.useMemo(()=>({open:r===0,close:p}),[r,p]),d={ref:f};return oe.createElement(Jo,null,oe.createElement(Xe.Provider,{value:a},oe.createElement(us,{value:Et(r,{0:Se.Open,1:Se.Closed})},ce({ourProps:d,theirProps:o,slot:h,defaultTag:aa,name:"Menu"}))))}let ia="button";function ca(e,t){var s;let o=l.useId(),{id:a=`headlessui-menu-button-${o}`,disabled:r=!1,autoFocus:i=!1,...c}=e,[m,f]=we("Menu.Button"),p=Qo(),h=ds(),d=Pe(t,qo(),D(C=>f({type:7,element:C}))),u=D(C=>{switch(C.key){case N.Space:case N.Enter:case N.ArrowDown:C.preventDefault(),C.stopPropagation(),ne.flushSync(()=>f({type:0})),f({type:2,focus:W.First});break;case N.ArrowUp:C.preventDefault(),C.stopPropagation(),ne.flushSync(()=>f({type:0})),f({type:2,focus:W.Last});break}}),g=D(C=>{switch(C.key){case N.Space:C.preventDefault();break}}),x=D(C=>{var k;if(ms(C.currentTarget))return C.preventDefault();r||(m.menuState===0?(ne.flushSync(()=>f({type:1})),(k=m.buttonElement)==null||k.focus({preventScroll:!0})):(C.preventDefault(),f({type:0})))}),{isFocusVisible:v,focusProps:j}=fs({autoFocus:i}),{isHovered:w,hoverProps:b}=ps({isDisabled:r}),{pressed:y,pressProps:A}=gs({disabled:r}),R=l.useMemo(()=>({open:m.menuState===0,active:y||m.menuState===0,disabled:r,hover:w,focus:v,autofocus:i}),[m,w,v,y,r,i]),$=Pt(p(),{ref:d,id:a,type:xs(e,m.buttonElement),"aria-haspopup":"menu","aria-controls":(s=m.itemsElement)==null?void 0:s.id,"aria-expanded":m.menuState===0,disabled:r||void 0,autoFocus:i,onKeyDown:u,onKeyUp:g,onClick:x},j,b,A);return ce({mergeRefs:h,ourProps:$,theirProps:c,slot:R,defaultTag:ia,name:"Menu.Button"})}let la="div",ua=nt.RenderStrategy|nt.Static;function da(e,t){var s,o;let a=l.useId(),{id:r=`headlessui-menu-items-${a}`,anchor:i,portal:c=!1,modal:m=!0,transition:f=!1,...p}=e,h=zo(i),[d,u]=we("Menu.Items"),[g,x]=Yo(h),v=Ko(),[j,w]=l.useState(null),b=Pe(t,h?g:null,D(I=>u({type:8,element:I})),w),y=vs(d.itemsElement);h&&(c=!0);let A=hs(),[R,$]=bs(f,j,A!==null?(A&Se.Open)===Se.Open:d.menuState===0);Is(R,d.buttonElement,()=>{u({type:1})});let C=d.__demoMode?!1:m&&d.menuState===0;Ms(C,y);let k=d.__demoMode?!1:m&&d.menuState===0;ys(k,{allowed:l.useCallback(()=>[d.buttonElement,d.itemsElement],[d.buttonElement,d.itemsElement])});let G=d.menuState!==0,V=Cs(G,d.buttonElement)?!1:R;l.useEffect(()=>{let I=d.itemsElement;I&&d.menuState===0&&I!==y?.activeElement&&I.focus({preventScroll:!0})},[d.menuState,d.itemsElement,y]),Ss(d.menuState===0,{container:d.itemsElement,accept(I){return I.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:I.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(I){I.setAttribute("role","none")}});let U=kt(),K=D(I=>{var M,S,E;switch(U.dispose(),I.key){case N.Space:if(d.searchQuery!=="")return I.preventDefault(),I.stopPropagation(),u({type:3,value:I.key});case N.Enter:if(I.preventDefault(),I.stopPropagation(),u({type:1}),d.activeItemIndex!==null){let{dataRef:B}=d.items[d.activeItemIndex];(S=(M=B.current)==null?void 0:M.domRef.current)==null||S.click()}wt(d.buttonElement);break;case N.ArrowDown:return I.preventDefault(),I.stopPropagation(),u({type:2,focus:W.Next});case N.ArrowUp:return I.preventDefault(),I.stopPropagation(),u({type:2,focus:W.Previous});case N.Home:case N.PageUp:return I.preventDefault(),I.stopPropagation(),u({type:2,focus:W.First});case N.End:case N.PageDown:return I.preventDefault(),I.stopPropagation(),u({type:2,focus:W.Last});case N.Escape:I.preventDefault(),I.stopPropagation(),ne.flushSync(()=>u({type:1})),(E=d.buttonElement)==null||E.focus({preventScroll:!0});break;case N.Tab:I.preventDefault(),I.stopPropagation(),ne.flushSync(()=>u({type:1})),Ts(d.buttonElement,I.shiftKey?st.Previous:st.Next);break;default:I.key.length===1&&(u({type:3,value:I.key}),U.setTimeout(()=>u({type:4}),350));break}}),z=D(I=>{switch(I.key){case N.Space:I.preventDefault();break}}),X=l.useMemo(()=>({open:d.menuState===0}),[d.menuState]),Z=Pt(h?v():{},{"aria-activedescendant":d.activeItemIndex===null||(s=d.items[d.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(o=d.buttonElement)==null?void 0:o.id,id:r,onKeyDown:K,onKeyUp:z,role:"menu",tabIndex:d.menuState===0?0:void 0,ref:b,style:{...p.style,...x,"--button-width":js(d.buttonElement,!0).width},...ks($)});return oe.createElement(Es,{enabled:c?e.static||R:!1},ce({ourProps:Z,theirProps:p,slot:X,defaultTag:la,features:ua,visible:V,name:"Menu.Items"}))}let ma=l.Fragment;function fa(e,t){let s=l.useId(),{id:o=`headlessui-menu-item-${s}`,disabled:a=!1,...r}=e,[i,c]=we("Menu.Item"),m=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===o:!1,f=l.useRef(null),p=Pe(t,f);se(()=>{if(!i.__demoMode&&i.menuState===0&&m&&i.activationTrigger!==0)return Ps().requestAnimationFrame(()=>{var k,G;(G=(k=f.current)==null?void 0:k.scrollIntoView)==null||G.call(k,{block:"nearest"})})},[i.__demoMode,f,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let h=ws(f),d=l.useRef({disabled:a,domRef:f,get textValue(){return h()}});se(()=>{d.current.disabled=a},[d,a]),se(()=>(c({type:5,id:o,dataRef:d}),()=>c({type:6,id:o})),[d,o]);let u=D(()=>{c({type:1})}),g=D(k=>{if(a)return k.preventDefault();c({type:1}),wt(i.buttonElement)}),x=D(()=>{if(a)return c({type:2,focus:W.Nothing});c({type:2,focus:W.Specific,id:o})}),v=As(),j=D(k=>{v.update(k),!a&&(m||c({type:2,focus:W.Specific,id:o,trigger:0}))}),w=D(k=>{v.wasMoved(k)&&(a||m||c({type:2,focus:W.Specific,id:o,trigger:0}))}),b=D(k=>{v.wasMoved(k)&&(a||m&&c({type:2,focus:W.Nothing}))}),[y,A]=At(),[R,$]=Fs(),C=l.useMemo(()=>({active:m,focus:m,disabled:a,close:u}),[m,a,u]);return oe.createElement(A,null,oe.createElement($,null,ce({ourProps:{id:o,ref:p,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":y,"aria-describedby":R,disabled:void 0,onClick:g,onFocus:x,onPointerEnter:j,onMouseEnter:j,onPointerMove:w,onMouseMove:w,onPointerLeave:b,onMouseLeave:b},theirProps:r,slot:C,defaultTag:ma,name:"Menu.Item"})))}let pa="div";function ga(e,t){let[s,o]=At();return oe.createElement(o,null,ce({ourProps:{ref:t,"aria-labelledby":s,role:"group"},theirProps:e,slot:{},defaultTag:pa,name:"Menu.Section"}))}let xa="header";function va(e,t){let s=l.useId(),{id:o=`headlessui-menu-heading-${s}`,...a}=e,r=Os();se(()=>r.register(o),[o,r.register]);let i={id:o,ref:t,role:"presentation",...r.props};return ce({ourProps:i,theirProps:a,slot:{},defaultTag:xa,name:"Menu.Heading"})}let ha="div";function ba(e,t){return ce({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:ha,name:"Menu.Separator"})}let Ia=ie(ra),Ma=ie(ca),ya=ie(da),Ca=ie(fa),Sa=ie(ga),Ta=ie(va),ja=ie(ba),fe=Object.assign(Ia,{Button:Ma,Items:ya,Item:Ca,Section:Sa,Heading:Ta,Separator:ja});function tn({workspace:e}){const t=Q(),s=_s(ae.InviteUsersToWorkspace),o=Ns()??!0,a=Ds()?.map(r=>r.hostname);return n.jsx(pn,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:gn,type:"success",title:e.data.name!=null?t.formatMessage(de.inviteMemberModalTitle,{workspaceName:e.data.name}):t.formatMessage(de.inviteMemberModalTitleUntitledWorkspace),description:n.jsxs(n.Fragment,{children:[n.jsx("p",{children:n.jsx(T,{...de.inviteMemberModalDescription})}),!!a?.length&&!o&&n.jsxs("p",{className:"mt-2",children:[n.jsx(T,{...de.prohibitExternalDomainsDescription}),"Â ",n.jsx("b",{children:a.join(", ")})]})]}),children:n.jsx(xo,{workspace:e,canResendInviteEmails:!0,onCancel:()=>H.closeModal(ae.InviteUsersToWorkspace),onSuccess:()=>H.closeModal(ae.InviteUsersToWorkspace),cancelButtonText:t.formatMessage(de.inviteMemberInviteCancelButton)})})}const de=Te({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},prohibitExternalDomainsDescription:{id:"ky8nVd",defaultMessage:"Only users from the following emails can be added to this workspace:"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}}),ka=Object.freeze(Object.defineProperty({__proto__:null,default:tn},Symbol.toStringTag,{value:"Module"}));function Ea({show:e,appear:t,children:s}){return n.jsx(Bs,{as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",show:e,appear:t,children:s})}function te({onClick:e,href:t,target:s,children:o,disabled:a,icon:r,testId:i}){return n.jsx(fe.Item,{disabled:a,children:({active:c})=>n.jsxs(Ae,{onClick:e,href:t,target:s,className:je({"bg-token-sidebar-surface-secondary":c,"hover:bg-token-sidebar-surface-secondary":!c&&!a}),"data-testid":i,children:[r&&n.jsx(r,{className:"icon-md"}),o]})})}function Pa({to:e,children:t,icon:s}){return n.jsx(fe.Item,{children:({active:o})=>n.jsx(xn,{to:e,children:n.jsxs(Ae,{$as:"span",className:je(o?"bg-token-sidebar-surface-secondary":"cursor-pointer"),children:[s&&n.jsx(s,{className:"icon-md"}),t]})})})}pe.a`p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer`;const Ae=pe.a`flex gap-2 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group items-center`,mr=pe(Ae)`border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]`,Ue=pe.div`h-px bg-token-border-light my-1.5`,fr=pe(Ae)`${e=>e.$active?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`;function nn({menuItemComponent:e}){const t=J(),s=ge(),o=l.useCallback(()=>{O.logEvent(L.clickSidebarAccountPortalMenuItem),ze(s,"Sidebar account menu item")},[s]),{value:a}=vn("1028682714"),r=gt(()=>xt(()=>import("./sso-i1k7k2l36bbnoheu.js").then(i=>i.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62])).then(i=>i.default));return n.jsxs(n.Fragment,{children:[t?.hasPaidSubscription()&&(a?n.jsx(r,{handleClickCustomerPortal:o,menuItemComponent:e}):n.jsx(e,{onClick:o,icon:to,children:n.jsx(T,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),t?.canInteractWithGizmos()&&n.jsx(e,{onClick:()=>{O.logEvent(L.accountMenuClickMyGPTs),s(Dt())},icon:Bt,children:n.jsx(T,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),n.jsx(e,{icon:Wt,onClick:()=>{H.openModal(ae.UserContext),O.logEvent(L.accountMenuClickCustomizeChatGPT)},children:n.jsx(T,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function sn({menuItemComponent:e,routedMenuItemComponent:t}){const s=J(),o=He("2756095923")?.value&&s?.isEdu()&&s?.isStandardUserOfAccount();return n.jsxs(n.Fragment,{children:[!o&&n.jsx(t,{to:"/admin",icon:no,children:n.jsx(T,{...Be.myWorkspaceSettings})}),n.jsx(t,{to:Dt(),onClick:()=>{O.logEvent(L.accountMenuClickMyGPTs)},icon:Bt,children:n.jsx(T,{...Be.myGpts})}),n.jsx(e,{onClick:()=>{H.openModal(ae.UserContext),O.logEvent(L.accountMenuClickCustomizeChatGPT)},icon:Wt,children:n.jsx(T,{...Be.chatPreferences})})]})}const Be=Te({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});function pr({onClickSettings:e}){return n.jsxs(fe,{as:"div",className:"group relative",children:[n.jsx(Oa,{}),n.jsx(Ea,{children:n.jsx(fe.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:n.jsx(Fa,{onClickSettings:e})})})]})}function on(){const e=!J()?.isEnterprisey()&&!It,t=Q(),s=qe(),o=ge();return s?n.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[n.jsx("div",{className:"text-sm text-token-text-secondary",children:s?.email}),e&&n.jsx(re,{label:t.formatMessage(Y.addWorkspaceTooltip),side:"right",children:n.jsx("button",{onClick:()=>ze(o,"profile menu"),children:n.jsx(co,{className:"icon-sm text-token-text-primary"})})})]}):null}function wa(){const e=J();return e==null?n.jsx(n.Fragment,{children:n.jsx("div",{className:"w-full px-3 py-2",children:n.jsx(ye,{})})}):n.jsxs(n.Fragment,{children:[n.jsx(on,{}),n.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:n.jsx(rn,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})})]})}function an({menuItemComponent:e}){const t=Ft(),s=vt(),{data:o}=ke(),a=J(),[r,i]=l.useState(!1),c=qe(),m=Q(),f=hn();if(!a||!o)return null;const p=a.isWorkspaceAccount(),h=o.accountItems.length>1,d=o.accountItems,u=Ws([d.find(x=>x.isPersonalAccount()),...d.filter(x=>!x.isPersonalAccount())]);if(u.sort((x,v)=>x.isPersonalAccount()?1:v.isPersonalAccount()?-1:0),!h)return p?n.jsx(wa,{}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:c?.email})});const g=u.map(x=>n.jsx(e,{disabled:x.isDeactivated(),onClick:()=>{if(x.isDeactivated()||x.id===a?.id)return;i(!0);const{willRedirect:v}=bn(s,x.id,t,m,f);v||In()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:x.isDeactivated()?n.jsx(Aa,{workspace:x,isLoading:r}):n.jsx(rn,{workspace:x,isLoading:r,currentWorkspaceId:a?.id})},x.id));return n.jsxs(n.Fragment,{children:[n.jsx(on,{}),n.jsx(P.Separator,{}),g]})}function rn({workspace:e,isLoading:t,currentWorkspaceId:s,showCheck:o=!0}){const a=e.canAccessWithCurrentSession,r=!t&&o&&e.id===s;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(Qe,{iconSize:"small",workspace:e,className:je({"flex-shrink-0":!0})})}),n.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:Ot(Q(),e)}),t&&n.jsx(ye,{}),r&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(so,{className:"icon-sm"})}),!a&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(oo,{className:"icon-sm"})})]}),!a&&n.jsx("div",{className:"rowDivClassName",children:n.jsx("small",{className:"text-token-text-secondary",children:n.jsx(T,{...e.ssoConnectionName?Y.authenticateWithSSOToAccessWorkspace:Y.authenticateWithoutSSOToAccessWorkspace})})})]})}function Aa({workspace:e,isLoading:t}){const s=Q(),o=e.isOwnerOfAccount(),[a,r]=l.useState(!1),i=go(e.id);return l.useEffect(()=>{i!=null&&a&&(H.setPurchaseWorkspaceData({minimumSeats:Math.max(i,ot),existingAccount:e}),r(!1))},[i,a,e]),n.jsxs(n.Fragment,{children:[n.jsxs(re,{className:"flex w-full flex-1 items-center gap-2.5",label:s.formatMessage(Y.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(ao,{className:"icon-sm flex-shrink-0 opacity-30"})}),n.jsx("div",{className:"truncate opacity-30",children:Ot(s,e)})]}),t&&n.jsx(ye,{}),!t&&n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:n.jsx(ro,{className:"icon-sm m-1"})}),n.jsx(P.Portal,{children:n.jsxs(P.Content,{children:[o&&n.jsx(n.Fragment,{children:n.jsx(P.Item,{onClick:()=>{i==null?r(!0):H.setPurchaseWorkspaceData({minimumSeats:Math.max(i,ot),existingAccount:e})},children:a?n.jsx(ye,{}):n.jsx(T,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),n.jsx(P.Item,{onClick:()=>{H.setLeaveWorkspaceData(e)},children:n.jsx(T,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function Fa({onClickSettings:e}){const{data:t}=ke(),s=J(),o=Rt(),a=Vt(),{openModal:r}=Gt(),i=ht("3905879930");var c=s?.canInviteMembers()??!1,m=!1;if(c&&(m=i.config.get("enabled",!1)),!s||!t)return null;const f=s.isWorkspaceAccount(),p=!o;return n.jsxs("nav",{children:[n.jsx(an,{menuItemComponent:te}),n.jsx(Ue,{}),f?n.jsx(sn,{menuItemComponent:te,routedMenuItemComponent:Pa}):n.jsx(nn,{menuItemComponent:te}),p&&n.jsx(te,{href:$s(),target:"_blank",onClick:()=>{O.logEvent(L.clickFaqLink)},icon:io,children:n.jsx(T,{...Y.helpAndFaq})}),n.jsx(te,{onClick:e,icon:$t,testId:"accounts-settings-button",children:n.jsx(T,{...Y.settings})}),c&&m&&n.jsxs(n.Fragment,{children:[n.jsx(te,{onClick:()=>{H.openModal(ae.InviteUsersToWorkspace),O.logEvent(L.accountMemberInviteButton,{location:"dropdown-menu-click"}),me.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Lt,children:n.jsx(T,{...Y.addTeammatesButton})}),n.jsx(tn,{workspace:s})]}),a&&n.jsx(Ra,{openDownloadModal:r}),n.jsx(Ue,{}),n.jsx(te,{onClick:()=>{O.logEvent(L.clickLogOut,{eventSource:"mouse"}),bt()},icon:Ut,children:n.jsx(T,{...Y.logOut})})]})}function Oa(){return qe()?n.jsx(_a,{}):null}function Ra({openDownloadModal:e}){return n.jsxs("span",{children:[n.jsx(Ue,{}),n.jsx(te,{icon:Ht,onClick:()=>{O.logEvent(L.accountMenuClickDownloadApp),e()},children:n.jsx(T,{...Y.downloadApp})})]})}function _a(){const{data:e}=ke(),t=J(),s=Ls(),o=Us();if(!t||!e)return null;const a=t.isWorkspaceAccount(),r=e.accountItems.length>1;return n.jsxs(fe.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Qe,{iconSize:"gizmo"})}),n.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[n.jsx("div",{dir:"auto",children:o}),a||r?n.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:s}):null]})]})}const Y=Te({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});function Na({clientThreadId:e,location:t}){const s=vt(),{id:o}=Ks(e),a=Ys(!0),r=ge(),i=Mt(),c=Mn();return l.useCallback(()=>{yn(Cn(s))?Hs(r):i?r({pathname:c.pathname,search:c.search},{state:Vs()}):(a({modelId:o,location:t}),me.logEvent("chatgpt_web_thread_tap_new_thread"))},[s,t,o,a,r,i,c])}const Da=gt(()=>xt(()=>Promise.resolve().then(()=>ka),void 0));function gr({showShareButton:e,showProfileDropdown:t,clientThreadId:s}){const o=eo(s),a=Q(),r=Ye(s),{layer:i}=Ce("1547743984"),c=i.get("show_share_button_text",!1),m=a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"});return n.jsxs(n.Fragment,{children:[!1,r&&n.jsx(To,{}),e&&o&&n.jsx(Eo,{clientThreadId:s,children:c?n.jsx(We,{onClick:()=>H.openSharingModal(o),icon:at,label:m,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",children:n.jsx("span",{style:{display:"var(--screen-size-hidden-on-compact-mode,)"},children:m})}):n.jsx(re,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:n.jsx(Ee,{"data-testid":"share-chat-button",onClick:()=>H.openSharingModal(o),icon:at})})}),t&&n.jsx(Wa,{})]})}function Ba({to:e,children:t,icon:s}){const o=ge();return n.jsx(P.Item,{icon:s,onSelect:()=>o(e),children:t})}function Wa(){const{isUnauthenticated:e}=yt();return e?n.jsx(Ga,{}):n.jsx($a,{})}function $a(){const{data:e}=ke(),t=J(),s=t?.isPlus()??!1,o=t?.isWorkspaceAccount()??!1,{openSettings:a}=Gs(),r=Vt(),{openModal:i}=Gt(),{layer:c}=Ce("2888142241"),m=ht("3905879930");var f=t?.canInviteMembers()??!1,p=!1;f&&(p=m.config.get("enabled",!1));const{doesUserHaveAnyAccountsWithPlusFeatures:h}=Sn(),{layer:d}=Ce("2670443078");if(!t||!e)return null;const u=e.accountItems.length>1;let g=s;!o&&!s&&h&&d.get("is_gating_fix_enabled",!1)&&(g=h);const x=!o&&!g&&!It&&c.get("is_upgrade_in_settings",!1);return n.jsxs(po,{triggerButton:n.jsx("button",{onClick:()=>{O.logEvent(L.accountOpenProfileMenu),me.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",style:{display:"var(--screen-size-hidden-on-compact-mode, flex)"},children:n.jsx(Qe,{iconSize:"medium"})}),children:[u&&n.jsx(an,{menuItemComponent:P.Item}),u?n.jsx(P.Separator,{}):null,o?n.jsx(sn,{menuItemComponent:P.Item,routedMenuItemComponent:Ba}):n.jsx(nn,{menuItemComponent:P.Item}),n.jsx(P.Item,{icon:$t,onClick:()=>a(),"data-testid":"settings-menu-item",children:n.jsx(T,{defaultMessage:"Settings",id:"navigation.settings.0"})}),n.jsx(P.Separator,{}),f&&p&&n.jsxs(n.Fragment,{children:[n.jsx(P.Item,{"data-testid":"settings-menu-item-invite-teammates",onClick:()=>{H.openModal(ae.InviteUsersToWorkspace),O.logEvent(L.accountMemberInviteButton,{eventSource:"mouse",location:"profile_drop_down"}),me.logEvent("chatgpt_invite_users_to_workspace",0,{action:"OpenAdminInviteModal",location:"dropdown-menu-click",text:"AddTeammates",step:"OpenModal"})},icon:Lt,children:n.jsx(T,{...cn.addTeammatesButton})}),n.jsx(Da,{workspace:t})]}),r&&n.jsx(Ua,{openDownloadModal:i}),x&&n.jsx(Ha,{}),(x||r)&&n.jsx(P.Separator,{}),n.jsx(P.Item,{onClick:()=>{O.logEvent(L.clickLogOut,{eventSource:"mouse"}),O.logLogOutButtonClicked({location:"profile_drop_down"}),bt()},"data-testid":"log-out-menu-item",icon:Ut,children:n.jsx(T,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function La({onClick:e,className:t,testId:s}){const o=Q(),a=Mt(),r=a?o.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):o.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return n.jsx(re,{sideOffset:4,label:r,className:je("flex",t),children:n.jsx(Ee,{onClick:()=>{H.closePopoverNavSidebar(),e()},icon:a?mo:fo,surfaceContext:"secondary","aria-label":r,"data-testid":s})})}function xr({clientThreadId:e}){const[t]=_t(a=>[a.activeStageSidebar]),s=Nt(),o=Na({clientThreadId:e,location:"Navigation actions"});return!s&&!t?null:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Va,{}),n.jsx(La,{onClick:o})]})}function Ua({openDownloadModal:e}){return n.jsx("span",{children:n.jsx(P.Item,{icon:Ht,onClick:()=>{e(),O.logEvent(L.accountMenuClickDownloadApp)},children:n.jsx(T,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function Ha(){const e=ge(),s=J()?.wasPaidCustomer()??!1,o=()=>{me.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),O.logEvent(L.plusUpgradeInSettingsMenuClicked),ze(e,"Upper right settings menu")};return n.jsx(P.Item,{icon:lo,onClick:o,children:s?n.jsx(T,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):n.jsx(T,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Va(){const e=Q(),[t]=_t(r=>[r.activeStageSidebar]),s=Nt(),o=Rt(),{isUnauthenticated:a}=yt();return!t&&!s||!o||a?null:n.jsx(re,{label:e.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:n.jsx(Ee,{"aria-label":e.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:H.toggleNavSidebar,icon:uo,surfaceContext:"primary"})})}function Ga(){const e=Ft(),t=zs(),s=qs(cn.signUpCta),{layer:o}=Ce("3637408529"),a=o.get("is_desktop_primary_auth_button_on_right",!1),r=()=>{e({authType:"login",callback:p=>{O.logLogInButtonClicked({location:"Chat header",provider:p})}})},i=()=>{e({authType:"signup",callback:p=>{O.logSignUpButtonClicked({location:"Chat header",provider:p})}})},c=n.jsx(We,{onClick:r,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:n.jsx(T,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),m=n.jsx(We,{color:t?"secondary":"primary",onClick:i,size:"small","data-testid":"signup-button",children:n.jsx(T,{...s})},"signup"),f=t?[c,m]:[m,c];return n.jsx("div",{className:"flex items-center justify-center gap-2",children:a?f.reverse():f})}const cn=Te({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"},addTeammatesButton:{id:"inviteMemberButton.inviteMemberButton",defaultMessage:"Add Teammates"}});export{ka as A,gr as C,Va as E,Wa as L,Jo as M,La as N,Ea as P,Yo as R,cr as T,fr as U,$a as a,Ko as b,pr as c,Ae as d,ar as e,lr as f,qt as g,mr as h,Na as i,Ye as j,tr as k,rr as l,nr as m,or as n,dr as o,Qt as p,Jt as q,ur as r,ir as s,sr as t,Yt as u,le as v,vo as w,zo as x,qo as y,xr as z};
//# sourceMappingURL=m8uv83e8qsvk5cah.js.map
