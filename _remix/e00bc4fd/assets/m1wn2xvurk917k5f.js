import{j as r,S as m,r as c,a2 as R,C as O,aI as f,aJ as h}from"./bi9nzlakut336dzw.js";import{u as g}from"./dg0cpn9s9atj8nt2.js";import"./o3o45rugqi7ysa5o.js";function C(t){return r.jsx(E,{...t})}function E({pluginId:t,code:n,state:i,error:e,errorDesc:u}){const s=m(),o=c.useRef(!1);return c.useEffect(()=>{if(o.current===!0)return;o.current=!0;async function p(){const S=`https://chat.openai.com/aip/${t}/oauth/callback`;try{const a=await O.pluginOauthCallback(t,n,S,i);if(a.success){const l=new URL(f(h.OAUTH_SUCCESS,a.redirect_path));l.searchParams.set("oauth_success","true"),s.push(l.toString())}else s.push(f(h.CUSTOM_ERROR,a.redirect_path,a.error??a.message))}catch{s.push(`/?model=gpt-4-plugins&loginAip=${t}&loginSuccess=false`)}}p()},[t,n,i,s]),c.useEffect(()=>{e&&R.danger(`${e}${u?`: ${u}`:""}`,{duration:5})},[e,u]),r.jsx("div",{})}function x(){const t=g();return r.jsx(C,{...t})}export{x as default};
//# sourceMappingURL=m1wn2xvurk917k5f.js.map
