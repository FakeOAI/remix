const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/f1zwh1vwpp2qi0fc.js","assets/iw5llf4a9z2k4qli.js","assets/ere5qx05or5w4r80.js","assets/root-kyx67gpb.css","assets/ffbc0egt64q2hvb1.js","assets/conversation-small-ict01xsi.css","assets/zbbavq3fohnytg6f.js","assets/mf5baq0qqzkuzha3.js","assets/j5w4166bn3c02o6l.js","assets/m6vc53mql8qfwiug.js","assets/np3bwmm7pwd8afjj.js","assets/ADAVisualizationComponent-mi6em660.css","assets/jfmvdp28s33dxvkq.js","assets/i427bddftbowt48m.js","assets/hskeo4a0suuacupd.js","assets/ka9urk6fl3lg45ww.js","assets/ewrb9vf7wnhb9zac.js","assets/iq8nsxyepehxjea0.js","assets/j0p5594kmn2r27jq.js","assets/ckxr7j04she8zh53.js","assets/kttlci8ei00nee1a.js","assets/h66zc14g721mkv2j.js","assets/myy3q76qm0gk9eld.js","assets/ikb47fy4bux5g8u3.js","assets/jqr8tb5ltbvhcc14.js"])))=>i.map(i=>d[i]);
import{Y as ne,r as E,j as t,b0 as fe,az as v,aE as U,aM as N,aN as b,M as oe,ci as xe,cj as he,aw as W,T as pe,P as K,d as Y,K as z,dD as Ee}from"./iw5llf4a9z2k4qli.js";import{i$ as Me,j0 as Te,gg as je,gh as Ie,g9 as ye,j1 as _e,fC as Ce,j2 as Ae,j3 as ve,j4 as Ne,j5 as be,j6 as Se,j7 as we,j8 as Re,j9 as De,ja as Fe,a7 as Oe,gm as Pe,gj as u,gi as k,jb as G,jc as J,jd as ke,je as Le,jf as Q,jg as ie,a9 as V,fM as re,jh as Ve,ji as ze,jj as We,jk as Ue,bp as le,jl as Be,jm as He,jn as Ke,ae as Ye,jo as Ge,jp as Je,jq as Qe,jr as de,js as $e,jt as ce,ju as Xe,c as Ze,jv as qe,bs as es,jw as ss,q as ts,bo as as,fV as ns,jx as os,gf as r,x as is,d4 as rs,jy as ls,jz as ds,cp as cs}from"./ffbc0egt64q2hvb1.js";import{C as $,a as ms}from"./i427bddftbowt48m.js";import{m as L}from"./zbbavq3fohnytg6f.js";import{aI as gs,ae as us}from"./ere5qx05or5w4r80.js";const fs=(e,a)=>e?.textdocId?e.textdocId:e?.function===k.CreateTextdoc?ke(e):a??void 0,xs=({messages:e,isRequestActive:a,clientThreadId:s})=>{const o=ne(),d=Me(e),c=Te(e),n=E.useMemo(()=>{if(je(d?.message))return Ie(a,d.message,c?.message??null)},[a,d,c]),g=ye(),i=fs(n,g),f=_e(i),m=Ce(),p=Ae(i),x=ve(),M=Ne(),h=be(),T=Se(),I=we(),A=Re(),S=De({textdocId:i,toolResponseMessage:c}),F=Fe(()=>{const C=Oe.getThreadModelId(s);Pe.logError("Textdoc missing from conversation",null,{clientThreadId:s,modelId:C,textdocId:i,latestTextdocId:g,toolCallTextdocId:n?.textdocId,toolCallStatus:n?.status,toolCallFunction:n?.function})});if(E.useEffect(()=>{a||n&&n.status!==u.COMPLETE||f||F()},[n,f]),!n)return null;const w=n.status===u.REDACTED||!T&&!f&&n.status!==u.STREAMING&&n.status!==u.WAITING&&I;let l,j;if(n.status!==u.REDACTED&&n.status!==u.FAILED&&!w&&i){const C=A&&n.function===k.UpdateTextdoc&&n.status===u.COMPLETE;l=()=>{C&&n.versionInt?Le(i,n.versionInt,x):G(i)},j=()=>{C&&n.versionInt&&h(i,n.versionInt)}}const R=hs(n,f);if(n.function===k.CreateTextdoc){if(n.status===u.STREAMING||n.status===u.WAITING||n.status===u.COMPLETE){const H=T===!0&&(n.status===u.STREAMING||n.status===u.WAITING);return t.jsx($,{isInlinePreview:S,isFetching:H,type:n.type??null,name:R,isFocused:p,isStreaming:n.status===u.STREAMING,onClick:l,isCanvasOpen:m,textdocId:i})}let C;switch(n.status){case u.FAILED:C=o.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case u.CANCELED:C=o.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case u.REDACTED:C=t.jsx(fe,{align:"start",label:o.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:o.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return t.jsx(X,{children:C})}const y=w||n.status===u.REDACTED,D=M&&!y?R:null,P=t.jsx(X,{onClick:l,onMouseOver:j,isStreaming:n.status===u.STREAMING,children:n.function===k.CommentTextdoc?Es(o,n,D):ps(o,n,D)});return S&&!m&&!w?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx($,{isInlinePreview:!0,isFetching:!1,type:f?.type??null,name:R,isFocused:p,isStreaming:n.status===u.STREAMING,onClick:i!=null?()=>G(i):void 0,isCanvasOpen:m,textdocId:i}),P]}):P};function hs(e,a){return a?.title?J(a.title):e.function===k.CreateTextdoc&&e.title?J(e.title):null}const X=({isStreaming:e=!1,onClick:a,onMouseOver:s,children:o})=>t.jsx("button",{disabled:!a,className:v(e&&"loading-shimmer","flex min-h-5 w-fit select-none pt-[3px] text-start text-token-text-secondary",a&&"hover:text-token-text-primary"),onClick:a,onMouseOver:s,children:o}),me=9;function ps(e,a,s){if(a.status===u.STREAMING)return s?e.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(a.status===u.FAILED)return s?e.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(a.status===u.CANCELED)return s?e.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const o=a.updates?.length;return a.status===u.REDACTED||!o||o>me?s?e.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):s?e.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:o,documentTitle:s}):e.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:o})}function Es(e,a,s){if(a.status===u.STREAMING)return s?e.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(a.status===u.FAILED)return s?e.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(a.status===u.CANCELED)return s?e.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const o=a.comments?.length;return a.status===u.REDACTED||!o||o>me?s?e.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):s?e.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:o,documentTitle:s}):e.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:o})}const Ms=2e3,ge=.4,Ts=.45,js=.2,Is=.1,ys=.25;var _=(e=>(e[e.Running=0]="Running",e[e.Finished=1]="Finished",e[e.Error=2]="Error",e[e.Stopped=3]="Stopped",e[e.Paused=4]="Paused",e))(_||{});function Xs({conversationMessages:e,icon:a,status:s,text:o,estimatedToolDurationMs:d,animationLoopDurationMs:c=Ms,shouldPersistAfterFinished:n=!1}){const[g,i]=E.useState(s===0?0:s===1&&!n?7:1),[f,m]=E.useState(0);E.useEffect(()=>{s===2?i(8):s===3?i(9):s===4?i(10):s===1?i(g===2?3:7):s===0&&g===10&&(i(2),m(x=>x+1))},[s]);const p=As(g);return E.useEffect(()=>{const x=e[0].message.id;if(p)return Q.addDelayedRenderingMessage(x),()=>{Q.removeDelayedRenderingMessage(x)}},[p]),ie(()=>{O(g)&&m(x=>x+1)},c),g===7&&!n?null:t.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[t.jsx(_s,{icon:a,status:s,uiState:g,estimatedToolDurationMs:d,animationLoopCounter:f,shouldPersistAfterFinished:n,onFillProgressBarAnimationComplete:()=>i(4),onFinishAnimationComplete:()=>{i(5),setTimeout(()=>{i(n?7:6)},Is*1e3)},onHideAnimationComplete:()=>i(7)}),t.jsx(Cs,{text:o,uiState:g,animationLoopCounter:f,onEnterAnimationComplete:()=>i(2)})]})}const Z=50;function _s({icon:e,status:a,uiState:s,estimatedToolDurationMs:o,animationLoopCounter:d,shouldPersistAfterFinished:c,onFillProgressBarAnimationComplete:n,onFinishAnimationComplete:g,onHideAnimationComplete:i}){const[f,m]=E.useState(0);ie(()=>{O(s)?m(S=>S+Z):s===10&&m(0)},Z);let p,x,M;O(s)||s===10?(p="running",x=t.jsx(e,{animationLoopCounter:d}),M="bg-transparent"):s===4||s===5||s===7&&c?(p="finished",x=t.jsx(Ve,{}),M="bg-brand-purple"):a===2?(p="error",x=t.jsx(ze,{}),M="bg-orange-500"):a===3&&(p="stopped",x=t.jsx(We,{}),M="bg-gray-300");let h={opacity:0,scale:0,rotate:-180,x:0},T={type:"spring",bounce:.3,duration:Ts},I={opacity:0,scale:.6,rotate:0,x:0};s===0?(h={opacity:0,scale:.5,rotate:-180,x:-8},T={type:"spring",bounce:.3,duration:ge}):s===1?h=!1:s===5&&(I={opacity:0,scale:0,rotate:0,x:0},T={type:"spring",bounce:.3,duration:ys});const A=Ue(f,o);return t.jsx("div",{className:"relative h-5 w-5 shrink-0",children:t.jsx(V,{onExitComplete:()=>{s===6&&i()},children:p!=null&&t.jsxs(L.div,{className:v("absolute left-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",M),initial:h,animate:{opacity:1,scale:1,rotate:0,x:0},exit:I,transition:T,onAnimationComplete:()=>{s===4&&g()},children:[x,(O(s)||s===10)&&t.jsx(re,{percentage:s===3?100:A,thickness:1.5/23,className:"absolute left-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2 text-brand-purple",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:s===3?`${(100-A)/100*js}s`:void 0,transitionTimingFunction:s===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{s===3&&n()}})]},p)})})}function Cs({text:e,uiState:a,animationLoopCounter:s,onEnterAnimationComplete:o}){const[d,c]=E.useState(e);E.useEffect(()=>{a===2&&c(e)},[s]),E.useEffect(()=>{O(a)||c(e)},[a,e]);let n={opacity:0,x:0,y:15},g={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};a===0?(n={opacity:0,x:-8,y:0},g={type:"spring",bounce:.3,duration:ge,delay:.15}):a===1&&(n=!1);const i=d??void 0;return t.jsx("div",{className:v("relative h-5 w-full leading-5",a===8||a===9?"text-token-text-tertiary":"text-token-text-secondary"),children:t.jsx(V,{children:i!=null&&t.jsx(L.div,{className:"absolute left-0 top-0 line-clamp-1 overflow-visible",initial:n,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:g,onAnimationComplete:()=>{a===0&&o()},children:i},i.toString())})})}function O(e){return e===0||e===2||e===3}function As(e){return O(e)||e===4||e===5||e===6||e===10}const q=U.div`group absolute left-0 top-0 mr-1.5 h-8 overflow-hidden mt-1`;function B({highlightedCommand:e,status:a,children:s,showWorkUserSetting:o=!1,hideOnlyIfNotInteractedWith:d=!1,onOpenAnalytics:c}){const n=s!=null,[g]=E.useState(o),[i,f]=E.useState(o),[m,p]=E.useState(!1),x=a===_.Finished||a===_.Error,M=d?g?!1:!m:!1,h=a===_.Running&&"loading-shimmer";return x&&M?null:n?t.jsxs(t.Fragment,{children:[t.jsx(ee,{$canShowWork:!0,children:t.jsx(V,{children:t.jsx(q,{children:t.jsx(L.button,{onClick:()=>{i||c?.(),f(T=>!T),p(!0)},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:v(h),children:t.jsxs("div",{className:"flex items-center justify-start gap-1",children:[t.jsx("span",{children:e}),i?t.jsx(gs,{className:"icon-md"}):t.jsx(us,{className:"icon-md"})]})},e?.toString())})})}),t.jsx(V,{children:i&&s&&t.jsx(L.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s})})]}):t.jsx(ee,{$canShowWork:!1,children:t.jsx(q,{className:v(h),children:e})})}const ee=U.p`first:mt-0 relative h-8
${({$canShowWork:e})=>e?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary"}`,se=N(()=>b(()=>import("./f1zwh1vwpp2qi0fc.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(e=>e.default));function vs({messages:e,isRequestActive:a,clientThreadId:s}){const[o,d]=e,c=le(o.message),n=d?.message.metadata?.aggregate_result,g=Be(),i=He(),f=d?.message?Ke(d.message):[],m=d?.message.metadata?.aggregate_result?.messages.filter(Ye)??[],x=(f.filter(T=>T.type==="chart")??[]).length!==m.length,M=i&&!x;let h=_.Running;return n?.status==="success"?h=_.Finished:d!=null&&d.message.content.content_type!==oe.ExecutionOutput||n!=null&&n.status!=="running"?h=_.Error:(c||!a)&&(h=_.Stopped),t.jsxs(t.Fragment,{children:[t.jsx(Ns,{messages:e,status:h,isRequestActive:a}),M&&f.map((T,I)=>{const{type:A}=T;return A==="chart"&&!g?(T.fallback_to_image=!0,t.jsx(te,{children:t.jsx(se,{clientThreadId:s,visualization:T})},I)):t.jsx(te,{children:t.jsx(se,{clientThreadId:s,visualization:T})},I)}),!M&&d!=null&&t.jsx(Ge,{message:d.message})]})}const te=U.div`mb-3 max-w-[80%]`;function Ns({messages:e,status:a,isRequestActive:s}){const[o,d]=e,c=ne(),n=d?.message.metadata?.aggregate_result,g=le(o.message),{data:i,error:f}=xe(he.ShowExpandedCodeView);let m=c.formatMessage({id:"message.tools.data-analysis.running",defaultMessage:"Analyzing"});if(n?.status==="success"?m=c.formatMessage({id:"message.tools.data-analysis.finished",defaultMessage:"Analyzed"}):d!=null&&d.message.content.content_type!==oe.ExecutionOutput||n!=null&&n.status!=="running"?m=c.formatMessage({id:"message.tools.data-analysis.error",defaultMessage:"Analysis errored"}):(g||!s)&&(m=c.formatMessage({id:"message.tools.data-analysis.stopped",defaultMessage:"Analysis paused"})),i!==void 0||f){const p=Je(o.message)!=null;return t.jsx(B,{status:a,highlightedCommand:m,showWorkUserSetting:i??!1,hideOnlyIfNotInteractedWith:!0,children:p?t.jsxs("div",{className:"mb-3 mt-0.5 overflow-hidden rounded-xl bg-black",children:[t.jsx(Qe,{message:o.message,FormattedText:de}),d!=null&&t.jsx($e,{message:d.message})]}):null})}return null}const bs=3,Ss=.1,ae=[0,.26,.4];function ws({nextMessage:e,isLastMessage:a,isRequestActive:s}){let o=a||!e||e&&!ce(e.message);const d=Xe(e?.message),c=Ze(d.slice(0,bs).map(n=>n.entries[0].url));if(e?.message.id&&qe(e?.message.id),o){const n=s?t.jsxs("div",{className:"flex items-center gap-1",children:[c.map((g,i)=>t.jsx(L.div,{className:v("-ml-1.5 first:ml-0 last:mr-1.5","relative"),initial:{width:i===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:Ss,delay:ae[Math.min(i,ae.length-1)]},children:t.jsx("div",{className:v("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-2 border-token-main-surface-primary bg-token-main-surface-primary"),children:t.jsx(es,{url:g,size:32,minSize:16,className:"icon-md rounded-full"})})},g)),t.jsx(W,{id:"jjx8Qg",defaultMessage:"Searching the web"})]}):t.jsx(W,{id:"fssXGM",defaultMessage:"Error while searching"});return t.jsx(B,{highlightedCommand:n,status:s?_.Running:_.Error})}return null}const Rs={strong:e=>{const{node:a,children:s,...o}=e;return t.jsx("strong",{...o,className:v(o.className,"font-semibold text-token-text-primary"),children:s})},p:e=>{const{node:a,children:s,...o}=e;return t.jsx("p",{...o,className:v(o.className,"text-base","has-[strong]:mb-1 [&:not(:first-child)]:has-[strong]:mt-3 [&:not(:has(strong))]:mb-3"),children:s})}};function Ds({headline:e,message:a}){const o=a.create_time?new Date(a.create_time*1e3):Date.now(),d=+new Date-+o,c=ns(a.id,48e4,os(48e4,d));return t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx(re,{percentage:c,thickness:1/8,className:"h-5 w-5 text-token-text-primary",backgroundStrokeClassName:"stroke-token-main-surface-tertiary",transitionDuration:`${(100-c)/100*.2}s`,transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}),e]})}function Fs({messages:e,isStreaming:a,clientThreadId:s}){const[o,d]=E.useState(""),[c,n]=E.useState(!1),f=ss(s)===pe.STREAMING||a,m=e[0].message,p=m.id,x=ts.getServerThreadId(s),M=as(m),h=m.metadata?.summarization_headline,T=a&&h!=null;E.useEffect(()=>{const S=/\*\*(.*?)(?:\*\*|\n|$)/g;let F,w="";for(;(F=S.exec(M))!=null;)w=F[1].trim();w?d(w):m.metadata?.initial_text!=null&&d(m.metadata.initial_text)},[M,m.metadata?.initial_text]),E.useEffect(()=>{M.length>0&&!h&&n(!0)},[M,h]);const I=E.useMemo(()=>({client_thread_id:s,message_id:p,conversationId:x}),[s,p,x]);E.useEffect(()=>{c&&K.logEvent(Y.receivedA8KM123Message,I)},[c]);const A=E.useCallback(()=>{K.logEvent(Y.openedA8KM123Message,{...I,isStreaming:a})},[I,a]);return t.jsx(B,{status:f?_.Running:_.Finished,highlightedCommand:f?h==null?o:t.jsx(Ds,{headline:h,message:m}):m.metadata?.finished_text??"",onOpenAnalytics:A,children:c&&!T?t.jsx("div",{className:"mb-4 border-l-2 pl-4 dark:border-token-text-secondary",children:t.jsx(de,{componentOverrides:Rs,className:"not-prose leading-6",children:M})}):null})}const Os=N(()=>b(()=>import("./jfmvdp28s33dxvkq.js"),__vite__mapDeps([12,1,2,3,4,5,13,14,6,15]))),Ps=N(()=>b(()=>import("./ewrb9vf7wnhb9zac.js"),__vite__mapDeps([16,1,2,3,4,5]))),ks=N(()=>b(()=>import("./iq8nsxyepehxjea0.js"),__vite__mapDeps([17,1,2,3,4,5,13,14,6,15]))),Ls=N(()=>b(()=>import("./j0p5594kmn2r27jq.js"),__vite__mapDeps([18,1,2,3,4,5])).then(e=>e.TextMessageEditor)),Vs=N(()=>b(()=>import("./ckxr7j04she8zh53.js"),__vite__mapDeps([19,1,2,3,4,5,6,13,14,15]))),zs=N(()=>b(()=>import("./kttlci8ei00nee1a.js"),__vite__mapDeps([20,1,2,3,4,5,13,14,6,15]))),Ws=N(()=>b(()=>import("./h66zc14g721mkv2j.js"),__vite__mapDeps([21,1,2,3,4,5,22,6,13,14,15])).then(e=>e.BrowsingMessage)),Us=N(()=>b(()=>import("./ikb47fy4bux5g8u3.js"),__vite__mapDeps([23,1,2,3,4,5])).then(e=>e.SearchResultMessage)),Bs=N(()=>b(()=>import("./jqr8tb5ltbvhcc14.js"),__vite__mapDeps([24,1,2,3,4,5,13,14,6,15])).then(e=>e.JITPluginMessage));function Zs(e){switch(e.type){case r.Text:case r.Debug:return[e.message];case r.MultiText:case r.Browsing:case r.CodeInterpreter:case r.JITPlugin:case r.RetrievalBrowsing:case r.ParallelBrowsing:case r.Dalle:case r.GizmoEditor:case r.SearchResult:case r.a8km123:case r.f959b8c:case r.b1de6e2:case r.b1de6e2_c:case r.Canmore:case r.de1d73e:case r.SearchGPTQuery:return e.messages;default:throw new Error("Bad")}}function qs({groupedMessagesToRender:e,allGroupedMessages:a,clientThreadId:s,isEditing:o,isUserTurn:d,isCompletionRequestInProgress:c,isFeedbackEnabled:n,isFinalTurn:g,turnIndex:i,hasActiveRequest:f,showEditButton:m=!1,handleEnterEdit:p,handleExitEdit:x,onChangeItemInView:M,onRequestMoreCompletions:h,onRequestCompletion:T,shouldGrowContainer:I=!0}){const{showDebugConversationTurns:A}=is(),S=rs(s),F=a.some(l=>ls.includes(l.type)),w=e.map((l,j)=>{const R=j===a.length-1;switch(l.type){case r.Text:case r.MultiText:{const y=e[j-1],D=y?.type,P=y&&"messages"in y?y.messages:void 0;if(l.type===r.Text){const C=l?.message&&!ce(l.message.message),ue=o?t.jsx(Ls,{message:l.message,clientThreadId:s,onChangeItemInView:M,onRequestCompletion:T,onRequestMoreCompletions:h,onExitEdit:x,disabled:f}):F&&C?null:t.jsx(ms,{className:"min-h-8",message:l.message,isFeedbackEnabled:n,isCompletionInProgress:R&&c,turnIndex:i,clientThreadId:s,showEditButton:m,onEnterEdit:p,isUserTurn:d,onRequestMoreCompletions:h,prevGroupedMessageType:D,prevGroupedMessages:P});return t.jsxs(E.Fragment,{children:[ue,t.jsx(ds,{isUserTurn:d,message:l.message.message})]},"group-"+l.message.nodeId)}else return l.type===r.MultiText?t.jsx(ks,{clientThreadId:s,messages:l.messages,isCompletionInProgress:R&&c,isFeedbackEnabled:n,onRequestMoreCompletions:h,prevGroupedMessageType:D,prevGroupedMessages:P},"multitext-"+(l.messages[0]?.nodeId??j)):l.type}case r.Browsing:case r.RetrievalBrowsing:{const y=S!=null&&[z.GizmoInteraction,z.GizmoMagicCreate,z.GizmoTest].includes(S.kind);return t.jsx(Ws,{messages:l.messages,isRequestActive:f,isLastMessageInTurn:R,isUsingGizmo:y,isRetrieval:l.type===r.RetrievalBrowsing},"browsing-"+(l.messages[0]?.nodeId??j))}case r.SearchGPTQuery:{const y=a.slice(j+1).find(D=>D.type===r.Text);return t.jsx(ws,{isRequestActive:f,isLastMessage:R,nextMessage:y&&y.type===r.Text?y.message:void 0},"searchquery-"+(l.messages[0]?.nodeId??j))}case r.a8km123:return t.jsx(Fs,{messages:l.messages,isStreaming:R&&c,clientThreadId:s},"sum-"+(l.messages[0]?.nodeId??j));case r.f959b8c:return null;case r.b1de6e2:return null;case r.b1de6e2_c:return null;case r.de1d73e:return null;case r.ParallelBrowsing:return t.jsx(zs,{messages:l.messages},"parallel-"+(l.messages[0]?.nodeId??j));case r.CodeInterpreter:return t.jsx(vs,{messages:l.messages,isRequestActive:f,clientThreadId:s},"ada-"+(l.messages[0]?.nodeId??j));case r.JITPlugin:return t.jsx(Bs,{messages:l.messages,clientThreadId:s,isLastTurnInConversation:g,onRequestCompletion:T},"jit-"+(l.messages[0]?.nodeId??j));case r.Dalle:return t.jsx(Vs,{messages:l.messages,clientThreadId:s},"dalle-"+(l.messages[0]?.nodeId??j));case r.GizmoEditor:return t.jsx(Os,{messages:l.messages},"gizmo-editor-"+(l.messages[0]?.nodeId??j));case r.Canmore:return t.jsx(xs,{messages:l.messages,isRequestActive:f,clientThreadId:s},"canmore-"+(l.messages[0]?.nodeId??j));case r.Debug:return A?t.jsx(Ps,{message:l.message},"debug-"+l.message.nodeId):null;case r.SearchResult:return t.jsx(Us,{messages:l.messages},"search-result-"+(l.messages[0]?.nodeId??j))}});return t.jsx(Ks,{shouldGrowContainer:I,children:w})}function Hs(){return t.jsx(cs,{type:"danger",children:t.jsx(W,{id:"daIg0P",defaultMessage:"Unable to display this message due to a error."})})}function Ks({children:e,shouldGrowContainer:a}){return t.jsx("div",{className:v({"flex max-w-full flex-col":!0,"flex-grow":a}),children:t.jsx(Ee,{name:"GroupedMessages",fallback:Hs,children:e})})}export{qs as C,_ as T,B as a,Xs as b,Zs as g};
//# sourceMappingURL=iaugkapujzwqym4n.js.map
