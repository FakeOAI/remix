const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nw0cntp8isfpsd69.js","assets/g96yqlzu8qctmxup.js","assets/blm69jdcvj6igj3e.js","assets/root-jhvoex1m.css","assets/lciey5sok1ead3qa.js","assets/conversation-small-ict01xsi.css","assets/cvy8i81sy3v9j3lu.js","assets/mr9ccakh2bg40wiy.js","assets/7kb7q2scdgt9af5o.js","assets/f1xb0nljy2won2zw.js"])))=>i.map(i=>d[i]);
import{u as se,j as e,r as m,ar as f,dH as w,a$ as D,ao as z,au as T,av as A,J as N,am as te,a4 as ae,ax as U,a0 as y,aD as O,ag as ne,cK as ie,m as H,W as oe,bG as re,bH as le,I as ce,aZ as K,e2 as v,aB as de,aC as ue,f0 as me}from"./g96yqlzu8qctmxup.js";import{dl as P,B as _,jt as W,ju as ge,dr as xe,eK as fe,jv as he,jw as be,gc as R,cn as pe,jx as Se,bk as je,b_ as ve,jy as Ce,U as G,b5 as Ie,d9 as V,b3 as ze,b4 as Ne,jz as ye,eJ as ke,iH as Ge,b0 as q,iI as Me,gP as we,gQ as Te,dt as Q,c0 as Ae,eT as Oe,bg as Pe,cw as _e,z as Fe,jA as I,jB as M,d7 as Ee,du as Le,jC as Be,jD as De,jE as x,jF as Ue,jG as He,it as Ke,gf as Z,b1 as J,jH as We,jI as Re,jJ as Ve,jK as S,jL as qe,fr as Qe,a8 as Ze,jM as Je,jN as $e,jO as Xe,eQ as Ye,jP as es}from"./lciey5sok1ead3qa.js";import{N as ss,L as F,bt as ts,aA as as,bh as ns,aw as is,K as os}from"./blm69jdcvj6igj3e.js";import{N as rs,e as ls}from"./iahu4erfko0yji6a.js";import{m as E}from"./obti0z5j5aljf92k.js";import{U as cs,P as ds}from"./b4csh9vg1zsdr6t7.js";function us(){const s=P(_.SonicSidebar),[a,t]=m.useState(!1);return s.isLoading||!s.eligible?null:e.jsx(E.div,{className:"no-draggable group pb-0",whileTap:{scale:.98},children:e.jsx(gs,{children:e.jsx(W,{href:"/search",target:"_blank",icon:e.jsx("div",{className:f("gizmo-shadow-stroke mr-[0.5] flex h-[18px] w-[18px] items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:e.jsx(ge,{})}),label:"SearchGPT",hoverRightIcon:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(xs,{isOpen:a,setIsOpen:t,onDismiss:()=>s.markAsViewed()}),e.jsx(ss,{className:f("icon-md text-token-text-tertiary",!a&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function ms(){const s=fe(),a=P(_.hasSeenSncSidebarTooltip),t=he(),n=be(),{activeModals:i}=R(),o=pe();return!a.isLoading&&a.eligible&&!t&&i.size===0&&!s&&!n&&!o}function gs({children:s}){const a=ms(),t=P(_.hasSeenSncSidebarTooltip);return a?e.jsx(xe,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:t.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:e.jsx("div",{className:"w-full",children:s})}):e.jsx(e.Fragment,{children:s})}function xs({isOpen:s,setIsOpen:a,onDismiss:t}){return e.jsx(w,{open:s,onOpenChange:a,triggerButton:e.jsx("button",{className:f("flex text-token-text-tertiary",s?"":"invisible group-hover:visible"),onClick:n=>{n.preventDefault()},children:e.jsx(F,{className:"icon-md"})}),children:e.jsx(D.Item,{onClick:n=>{n.preventDefault(),t()},children:e.jsx(z,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}function $(){const s=se("114024");return!s.value||s.isLoading?null:e.jsx(us,{})}const fs=T(()=>A(()=>import("./nw0cntp8isfpsd69.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8])).then(s=>s.FannyPackAction)),hs=T(()=>A(()=>Promise.resolve().then(()=>Cs),void 0).then(s=>s.GizmoSidebarList));function _s({clientThreadId:s,onNewThread:a}){const t=Ie(s),n=y(),{isUnauthenticated:i}=O(),o=V(s),l=ne();return i?null:e.jsxs(e.Fragment,{children:[e.jsx(ze,{onNewThread:a}),n?.canInteractWithGizmos()?e.jsx(hs,{currentGizmoId:o}):e.jsx($,{}),!1,!i&&e.jsx(Ne,{activeId:l?void 0:t})]})}function Fs({className:s,onNewThread:a}){const t=N(),n=te(),i=Se(),o=ae(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:l}=je();return e.jsxs("div",{className:f("flex",o?.visible&&o.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(U,{sideOffset:4,label:t.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(ve,{className:"no-draggable","aria-label":t.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{Ce(n)?G.toggleNavSidebar():G.togglePopoverNavSidebar()},icon:ts,mobileIcon:as,surfaceContext:"secondary","data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[l&&e.jsx(fs,{}),!i&&e.jsx(rs,{onClick:a,testId:"create-new-chat-button"})]})]})}function X(){const s=N(),a=R(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(ye,{children:e.jsx(E.div,{whileTap:{scale:.98},children:e.jsx(ie,{to:ke(),onClick:()=>{a.activeSidebar==="popover-nav"&&G.setActiveSidebar(!1)},children:e.jsx(Ge,{icon:ns,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const bs=T(()=>A(()=>import("./f1xb0nljy2won2zw.js"),__vite__mapDeps([9,1,2,3,4,5])).then(s=>s.GizmoKeepInSidebarMenuItem));var Y=(s=>(s[s.Keep=0]="Keep",s[s.Recents=1]="Recents",s))(Y||{});const ps=2;function L({isActive:s,isNewConversation:a}){const t=H(),n=oe(),i=q();return e.jsx("div",{className:f(i?"":"bg-token-sidebar-surface-primary","pt-0"),children:e.jsx(B,{gizmo:void 0,isActive:s,onClick:o=>{re(le(t))&&!a&&(o.preventDefault(),Me(n))}})})}function Ss(s,a,t,n){const i=Fe(s,r=>r.flair.kind),o=[...i[I.FirstParty]?.map(({resource:r})=>({gizmo:r,section:0}))??[],...i[I.SidebarKeep]?.map(({resource:r})=>({gizmo:r,section:0}))??[],...i[I.Recent]?.slice(0,n?i[I.Recent]?.length:ps).map(({resource:r})=>({gizmo:r,section:1}))??[]],l=o.length>t+1,c=(l||n)&&!a&&o.length>t?o.slice(0,t):o,g=[...c.filter(({section:r})=>r===0),...c.filter(({section:r})=>r===1)];return{listItems:a?g.slice(M):g,itemsLeft:o.length-c.length,needsToCollapseItems:l}}function k({gizmo:s,currentGizmoId:a,maxToShowOnLoad:t,hideOverflowMenu:n=!1}){const i=m.useRef(!1),o=!t,l=q(),{listItems:c}=Ss(s,o,t??0,l);m.useEffect(()=>{c.length>0&&!i.current&&(we({namespace:Te.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),i.current=!0)},[c]);function g(r,d){const u=e.jsx(B,{gizmo:r,isActive:r.gizmo.id===a,section:d,hideOverflowMenu:n},r.gizmo.id);return l?e.jsx("li",{children:u}):u}return e.jsxs("div",{children:[c.map(({gizmo:r,section:d},u)=>e.jsxs(m.Fragment,{children:[u>1&&d!==c[u-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),g(r,d)]},u)),!l&&e.jsx(X,{})]})}function js({currentGizmoId:s}){const{data:{gizmos:a}={}}=Q();let t=a;return e.jsxs(e.Fragment,{children:[e.jsx(L,{isActive:s===void 0,isNewConversation:!0}),e.jsx($,{}),t!=null?e.jsx(k,{gizmo:t,currentGizmoId:s,maxToShowOnLoad:4}):null]})}function vs({gizmo:s,isOpen:a,setIsOpen:t,section:n}){const i=H();return e.jsxs(w,{open:a,onOpenChange:t,triggerButton:e.jsx("button",{className:f("flex text-token-text-secondary hover:text-token-text-primary",a?"":"invisible group-hover:visible"),children:e.jsx(F,{className:"icon-md"})}),contentAlign:"start",sideOffset:4,alignOffset:-4,size:"auto",children:[n===1&&e.jsx(D.Item,{onClick:async()=>{await Ee.updateGizmoSidebar(i,Le,s.gizmo.id,"keep")},children:e.jsx(z,{...j.keepInSidebar})}),e.jsx(bs,{gizmoResource:s})]})}function B({gizmo:s,historyDisabled:a,section:t,onClick:n,isActive:i,hideOverflowMenu:o=!1}){const l=N(),[c,g]=m.useState(!1),[r,d]=m.useState(!1),u=y(),h=!!s?.gizmo.tags?.includes(Ae.FirstParty),p=!1;let C=!1,b;if(s!=null)b=s.gizmo.display.name||Oe;else{if(u==null)return null;a?b=l.formatMessage(j.clearChat):u.canInteractWithGizmos()?b=Be:b=l.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsx(E.div,{whileTap:{scale:.98},onMouseEnter:()=>{d(!0)},onMouseLeave:()=>{d(!1)},children:e.jsx(W,{loggingGizmoId:s?.gizmo.id??"primary",href:s!=null?Pe(s):"/",onClick:n,showActiveIndicator:C,icon:e.jsx(_e,{gizmoId:s?.gizmo.id,isFirstParty:s==null||h,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 flex-shrink-0"}),isMenuOpen:c,label:b,hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(r||c)&&s!=null&&!p&&!o&&e.jsx("div",{className:"text-token-text-tertiary",onClick:ee=>{ee.preventDefault()},children:e.jsx(vs,{gizmo:s,isOpen:c,setIsOpen:g,section:t})}),!o&&e.jsx(U,{side:"right",label:l.formatMessage(a?j.clearChat:j.newChat),className:"flex items-center",children:e.jsx("button",{className:c?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:a?e.jsx(is,{className:"icon-md"}):e.jsx(os,{className:"icon-md"})})})]})})})}const j=ce({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}}),Cs=Object.freeze(Object.defineProperty({__proto__:null,DefaultGPTSidebarListItem:L,GizmoSidebarList:js,GizmoSidebarListContent:k,GizmoSidebarListItem:B,SidebarSectionType:Y,sidebarMessages:j},Symbol.toStringTag,{value:"Module"}));function Is({currentGizmoId:s,gizmos:a,onClick:t}){const{isSidebarFlyoutOpen:n,onSidebarFlyoutOpenChange:i}=De(),o=n(x.Gizmo);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(w,{onOpenChange:l=>i(x.Gizmo,l),side:"right",sideOffset:4,open:o,contentAlign:"end",triggerButton:e.jsxs("button",{className:f("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2.5 text-sm tracking-condensed text-token-text-secondary hover:bg-token-main-surface-secondary focus:ring-0",o&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx(F,{className:f("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(z,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(K,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(k,{gizmo:a,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function zs({currentGizmoId:s}){const{data:{gizmos:a}={}}=Q();let t=a;const n=!t||t?.length===0,i=t&&t?.length>M;return n?null:e.jsx(e.Fragment,{children:e.jsxs(Ue,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(z,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(X,{}),e.jsx(L,{isActive:s===void 0,isNewConversation:!0}),e.jsx(k,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:M}),i&&e.jsx(K,{children:e.jsx(Is,{currentGizmoId:s,gizmos:t??[]})})]})})}function Ns({clientThreadId:s}){const a=y(),t=V(s),{isUnauthenticated:n}=O();return n?null:e.jsxs("div",{className:f(v.screenContent),children:[null,e.jsx(He,{clientThreadId:s}),a?.canInteractWithGizmos()?e.jsx(zs,{currentGizmoId:t}):null]})}function ys(){const s=y(),a=s?.data==null,{isUnauthenticated:t}=O(),{openSettings:n}=Ke(),[i]=m.useState(()=>{const d=de.getCookie(ue.Workspace);return typeof d=="string"&&d!==me}),o=N(),{store:l,actions:c}=Z(),g=l(d=>d.mode);if(!s||i&&a)return null;const r=t?e.jsx(cs,{}):e.jsx(ls,{onClickSettings:()=>n()});return e.jsxs(J,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[r,e.jsx("div",{className:v.togglePinWrapper,children:e.jsx(We,{tooltipSideOffset:14,className:v.pinSidebarAction,icon:e.jsx(Re,{}),onActivate:d=>{d.preventDefault(),d.persist(),Ve.togglePinSidebar(d,c,g===S.Floating?S.Pinned:S.Floating)},label:g===S.Floating?o.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):o.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:qe.FloatingOrPinned})})]})}function ks(){return e.jsx(J,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(ds,{})})}function Gs(){return e.jsxs(Qe,{className:f(v.screenTrailingBarContainer),children:[e.jsx(ks,{}),e.jsx(ys,{})]})}function Es(){const{clientThreadId:s,onNewThread:a}=Ze(),[t,n]=m.useState(!1),[i,o]=m.useState(!1),[l,c]=m.useState(!1),{store:g,actions:r}=Z(),d=m.useCallback(h=>h===x.Conversation?t:h===x.Gizmo?i:h===x.Conversation2?l:!1,[t,i,l]),u=m.useCallback((h,p)=>{const C=b=>{h===x.Conversation?n(b):h===x.Gizmo?o(b):h===x.Conversation2&&c(b)};if(p){C(p);return}setTimeout(()=>{C(p)},100)},[]);return Je(()=>{u(x.Conversation,!1),u(x.Gizmo,!1),u(x.Conversation2,!1),window.matchMedia("(max-width: 700px)").matches&&g.getState().mode===S.Floating&&setTimeout(()=>{r.closeSidebar()},100)}),e.jsxs($e,{value:{isSidebarFlyoutOpen:d,onSidebarFlyoutOpenChange:u},children:[e.jsx(Xe,{}),e.jsx(Ye,{anchor:"vertical",className:f(v.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(es,{onNewThread:a}),trackLeading:!0,trailing:e.jsx(Gs,{}),children:e.jsx(Ns,{clientThreadId:s})})]})}export{Es as C,Cs as G,Fs as S,_s as a};
//# sourceMappingURL=jq6mv3zo6l0bvbjo.js.map
