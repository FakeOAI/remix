const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nscofqxc9zzmcdvh.js","assets/ogb0m6wfmpkwr4v0.js","assets/b9t2rzfm26s20fe0.js","assets/root-jhqn5s0d.css","assets/m0ujq4si8sio1lz0.js","assets/conversation-small-lkohtmkm.css","assets/cymro46oa7nb2e4p.js","assets/fjtqvuwt5aqn5yh5.js","assets/1mq4bl028ayzaqnn.js","assets/dbnmdjnv5aff71w4.js"])))=>i.map(i=>d[i]);
import{r as d,m as e,aJ as y,eA as ae,V as O,aa as w,ba as L,U as ne,e7 as ie,e6 as re,bi as F,cG as oe,N as R,b8 as le,b9 as ce,df as de,br as W,fx as M,ca as ue,cb as me,gl as fe,dY as H}from"./ogb0m6wfmpkwr4v0.js";import{jv as xe,I as K,c0 as pe,fj as ge,iP as V,fE as he,dC as T,dA as Se,b4 as je,ch as B,cM as be,jw as N,jx as ve,jy as ye,b1 as Ie,jz as Ce,dD as ke,fo as Y,jA as Ne,f0 as ze,U as Z,fp as Me,jB as Ge,cx as Fe,cy as Le,jC as Te,jD as k,ct as Ee,S,cE as Oe,dE as we,z as q,dF as Ae,cA as _e,jE as Pe,jF as Be,eo as De,jG as J,aS as Q,jH as Ue,jI as Re,jJ as We,jK as z,jL as He,ep as Ke,jM as Ve,A as Ye,jN as Ze,Y as qe,jO as Je,jP as Qe}from"./m0ujq4si8sio1lz0.js";import{y as Xe,aE as $e,L as es,T as ss,a_ as ts,N as X,P as as,O as ns}from"./b9t2rzfm26s20fe0.js";import{m as E}from"./cymro46oa7nb2e4p.js";import{useLottie as is}from"./fjtqvuwt5aqn5yh5.js";import{a as rs}from"./1mq4bl028ayzaqnn.js";import{U as os,P as ls}from"./dbnmdjnv5aff71w4.js";const cs=({isOpen:s,isHovered:n,color:i})=>{const u={animationData:xe,loop:!1,autoplay:!1},{View:r,playSegments:l,setSpeed:c,goToAndStop:o,animationItem:f,animationLoaded:x}=is(u),a=d.useRef(null),p=d.useRef(null),t=d.useRef(null);return d.useEffect(()=>{!f||!x||(c(2),a.current==null?s?(o(31,!0),t.current=31):(o(0,!0),t.current=0):a.current!==s?s?(l([t.current??0,31],!0),t.current=31):(l([t.current??31,0],!0),t.current=0):s||p.current!==n&&(n?(l([t.current??0,15],!0),t.current=15):(l([t.current??15,0],!0),t.current=0)),a.current=s,p.current=n)},[s,n,f,x,o,l,c]),e.jsx("div",{className:y("[&_path]:stroke-current",{"text-token-text-primary":i==null}),style:{width:"18px",height:"18px",...i!=null&&{color:i}},children:r})},ds={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function us({gizmoId:s}){const n=V(s);return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:e.jsx(ss,{className:"h-3/4 w-3/4",style:{color:n}})})}function ms({gizmo:s,historyDisabled:n,section:i,onClick:u,isActive:r,hideOverflowMenu:l=!1,elementRef:c,subConversations:o}){const{clientThreadId:f}=K(),x=ae(f),a=O(),[p,t]=d.useState(!1),[m,g]=d.useState(!1),[h,j]=d.useState(!1),[b,A]=d.useState(null),G=w(),te=!!s?.gizmo.tags?.includes(pe.FirstParty),v=ge(s?.gizmo.id),_=V(s.gizmo.id);let P=!1;r&&v&&!(b&&x)&&(P=!0),d.useEffect(()=>{b==null&&r&&x&&A(!0)},[r,x,b]);let I;if(s!=null)I=s.gizmo.display.name||he;else{if(G==null)return null;n?I=a.formatMessage(T.clearChat):G.canInteractWithGizmos()?I=ke:I=a.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(E.div,{whileTap:{scale:.98},onMouseEnter:()=>{g(!0)},onMouseLeave:()=>{g(!1)},children:e.jsx(Se,{loggingGizmoId:s?.gizmo.id??"primary",href:je(s),onClick:u,showActiveIndicator:P,icon:v&&o&&o.items.length>0?e.jsx(L,{side:"top",sideOffset:4,delayDuration:600,label:b?a.formatMessage(B.hideChatsForProjectTooltip):a.formatMessage(B.showChatsForProjectTooltip),children:e.jsx("button",{onClick:C=>{C.preventDefault(),A(!b)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{j(!0)},onMouseLeave:()=>{j(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(cs,{isOpen:b??!1,isHovered:h,color:_||null})})})})}):v?e.jsx(us,{gizmoId:s.gizmo.id}):e.jsx(be,{isFirstParty:te,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:p,label:I,rightIcon:i===N.Workspace&&e.jsx(L,{side:"right",label:a.formatMessage(D.workspaceRecommended,{workspace_name:G?.name??"Your Workspace"}),children:e.jsx(Xe,{className:"icon-md text-token-text-secondary",alt:a.formatMessage(D.workspaceRecommended,{workspace_name:G?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(m||p)&&!l&&(v?e.jsx("div",{className:"text-token-text-tertiary",onClick:C=>{C.preventDefault()},children:e.jsx(ve,{gizmo:s,isOpen:p,setIsOpen:t})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:C=>{C.preventDefault()},children:e.jsx(ye,{gizmo:s,isOpen:p,setIsOpen:t,section:i})})),!v&&!l&&e.jsx(L,{side:"right",label:a.formatMessage(n?T.clearChat:T.newChat),className:"flex items-center",children:e.jsx("button",{className:p?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx($e,{className:"icon-md"}):e.jsx(es,{className:"icon-md"})})})]}),elementRef:c})}),e.jsx(Ie,{children:v&&b&&o&&o.items.length>0&&e.jsx(E.div,{initial:"closed",animate:"open",exit:"closed",variants:ds,className:"overflow-hidden",layout:!0,children:e.jsx(Ce,{gizmoResource:s,serverThreadId:x,conversations:o.items})},"nested-conversations")})]})}const D=ne({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function $(){const s=O(),n=Y(),i=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(Ne,{children:e.jsx(E.div,{whileTap:{scale:.98},children:e.jsx(ie,{to:ze(),onClick:()=>{n.activeSidebar==="popover-nav"&&Z.setActiveSidebar(!1)},children:e.jsx(Me,{icon:ts,"data-testid":"explore-gpts-button",children:i})},"explore")})})}const fs=2;function ee({gizmos:s,isGizmoFlyout:n,isLoaded:i,maxToShowOnLoad:u=4,isScreenArch:r,showAllSidebarItems:l}){const c=Te(s,m=>m.flair.kind),o=[...(c[k.Workspace]?.map(({resource:m})=>({gizmo:m,section:N.Workspace}))??[]).slice(0,3),...c[k.FirstParty]?.map(({resource:m})=>({gizmo:m,section:N.Keep}))??[],...c[k.SidebarKeep]?.map(({resource:m})=>({gizmo:m,section:N.Keep}))??[]],f=c[k.Recent]?.slice(0,r||i?c[k.Recent]?.length:fs).map(({resource:m})=>({gizmo:m,section:N.Recents}))??[],x=f.length,a=o.length,p=r?x>0:s.length>u;let t=[];return n&&r?t=[...o,...f]:!n&&r?t=o:(t=[...o,...f],l||(t.length>u&&a>u?t=t.slice(0,a):t.length>u&&(t=t.slice(0,u)))),{listItems:t,itemsLeft:s.length-t.length,needsToCollapseItems:p,total:s.length}}function se({gizmo:s,currentGizmoId:n,maxToShowOnLoad:i,hideOverflowMenu:u=!1}){const r=d.useRef(!1),l=!i,c=re(),[o,f]=d.useState(!1),x=Y(g=>!Ge.isGptListCollapsed(g)),{listItems:a,needsToCollapseItems:p,itemsLeft:t}=ee({gizmos:s,isGizmoFlyout:l,isLoaded:o,maxToShowOnLoad:i,isScreenArch:c,showAllSidebarItems:x});d.useEffect(()=>{o||f(!0)},[o]),d.useEffect(()=>{a.length>0&&!r.current&&(Fe({namespace:Le.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),r.current=!0)},[a]);function m(g,h){const j=e.jsx(ms,{gizmo:g,isActive:g.gizmo.id===n,section:h,hideOverflowMenu:u},g.gizmo.id);return c?e.jsx("li",{children:j}):j}return e.jsxs("div",{children:[a.map(({gizmo:g,section:h},j)=>e.jsxs(d.Fragment,{children:[j>1&&h!==a[j-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),m(g,h)]},j)),!c&&p?e.jsxs("button",{onClick:Z.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(X,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:x?e.jsxs(e.Fragment,{children:[e.jsx(F,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(as,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:t}}),e.jsx(ns,{className:"icon-xs"})]})})]}):null,!c&&e.jsx($,{})]})}function xs({currentGizmoId:s,gizmos:n,onClick:i}){const{isSidebarFlyoutOpen:u,onSidebarFlyoutOpenChange:r}=Ee(),l=u(S.Gizmo),c=Oe();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(oe,{onOpenChange:o=>r(S.Gizmo,o),side:c?"bottom":"right",sideOffset:4,open:l,contentAlign:"end",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",l&&"bg-token-main-surface-secondary"),onClick:i,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(X,{className:y("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(F,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(R,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(se,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function ps({currentGizmoId:s}){const{data:{gizmos:n}={}}=we();let i=n;q()&&(i=n?.filter(l=>!Ae(l.resource)));const{needsToCollapseItems:r}=ee({gizmos:i??[],isLoaded:!1,isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(_e,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(F,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx($,{}),e.jsx(se,{gizmo:i??[],currentGizmoId:s,maxToShowOnLoad:Pe}),r&&e.jsx(R,{children:e.jsx(xs,{currentGizmoId:s,gizmos:i??[]})})]})})}const U=le(()=>ce(()=>import("./nscofqxc9zzmcdvh.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])).then(s=>s.SnorlaxSidebarList));function gs({clientThreadId:s}){const n=w(),i=de(s),{isUnauthenticated:u}=W(),r=q();return u?null:e.jsxs("div",{className:y(M.screenContent),children:[r&&n?.canInteractWithGizmos()&&U?e.jsx(U,{currentGizmoId:i}):null,null,e.jsx(Be,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(ps,{currentGizmoId:i}):null,!1]})}function hs(){const s=w(),n=s?.data==null,{isUnauthenticated:i}=W(),{openSettings:u}=De(),[r]=d.useState(()=>{const a=ue.getCookie(me.Workspace);return typeof a=="string"&&a!==fe}),l=O(),{store:c,actions:o}=J(),f=c(a=>a.mode);if(!s||r&&n)return null;const x=i?e.jsx(os,{}):e.jsx(rs,{onClickSettings:()=>u()});return e.jsxs(Q,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[x,e.jsx("div",{className:M.togglePinWrapper,children:e.jsx(Ue,{tooltipSideOffset:14,className:M.pinSidebarAction,icon:e.jsx(Re,{}),onActivate:a=>{a.preventDefault(),a.persist(),We.togglePinSidebar(a,o,f===z.Floating?z.Pinned:z.Floating)},label:f===z.Floating?l.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):l.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:H.FloatingOrPinned})})]})}function Ss(){return e.jsx(Q,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(ls,{})})}function js(){return e.jsxs(He,{className:y(M.screenTrailingBarContainer),children:[e.jsx(Ke,{}),e.jsx(Ss,{}),e.jsx(hs,{})]})}function zs(){const{clientThreadId:s,onNewThread:n}=K(),[i,u]=d.useState(!1),[r,l]=d.useState(!1),[c,o]=d.useState(!1),{store:f}=J(),x=d.useCallback(t=>t===S.Conversation?i:t===S.Gizmo?r:t===S.Snorlax?c:!1,[i,r,c]),a=d.useCallback((t,m)=>{const g=h=>{t===S.Conversation?u(h):t===S.Gizmo?l(h):t===S.Snorlax&&o(h)};m?g(!0):setTimeout(()=>{g(!1)},100)},[]),p=d.useRef(null);return Ve((t,m)=>{a(S.Conversation,!1),a(S.Gizmo,!1),a(S.Snorlax,!1);const g=window.matchMedia("(max-width: 700px)").matches,h=Qe(p.current);m!=null&&g&&f.getState().isSidebarOpen&&(f.getState().mode===z.Floating||h)&&setTimeout(()=>{document.getElementById(H.OpenOrClosed)?.click()},100)}),e.jsxs(Ye,{value:{isSidebarFlyoutOpen:x,onSidebarFlyoutOpenChange:a},children:[e.jsx(Ze,{}),e.jsx(qe,{anchor:"vertical",className:y(M.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Je,{onNewThread:n}),ref:p,trackLeading:!0,trailing:e.jsx(js,{}),children:e.jsx(gs,{clientThreadId:s})})]})}export{zs as C,ms as G,se as a};
//# sourceMappingURL=hunslofye2gde7y3.js.map
