const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ner0ldxcdnp816li.js","assets/ogb0m6wfmpkwr4v0.js","assets/b9t2rzfm26s20fe0.js","assets/root-jhqn5s0d.css","assets/oe13nnltmvjngnjb.js","assets/ebbi4stfxu4leo9p.js","assets/cymro46oa7nb2e4p.js","assets/nath3ahjullxvkj2.js","assets/jeztwd4vodinit8p.js","assets/g04e24001bc4ci45.js","assets/fybwnwe3dw3mpgjs.js","assets/isjdmfmhzv09v01t.js","assets/ipfbk7pynq3s7u67.js","assets/pa6676obnrhvhjmt.js","assets/heerxwocffkt5o6q.js","assets/z80rnev01krf6dm9.js","assets/huixl7v1pw7lw3zs.js","assets/e8hk1gve1gj6vftr.js","assets/g25th3hpr1nav7tx.js","assets/ieqrwbv96nhosi4x.js","assets/mqf9ifl7vrovqjv5.js","assets/kqwdyvkaaavvn8k3.js","assets/dink305zncxein5q.js","assets/d8yupjk9cehe7z9l.js","assets/d6khadovpiebk0al.js","assets/mb46hy8ixifa6q8w.js","assets/g2i7v17gpghzc1gh.js","assets/c4bxzbp1808foto4.js","assets/ibeyh8ibug84cvhw.js","assets/ADAVisualizationComponent-mi6em660.css","assets/le6se1rtund9pgzu.js","assets/o5hmf9c8a4bsh7zo.js","assets/hl0q2jenep9o3bit.js","assets/l7lwrm4p686kfa46.js","assets/fjtqvuwt5aqn5yh5.js","assets/b6xzz48zchlt7dt5.js","assets/jj6oajde6g8qnp9o.js","assets/f0uslfhqo9gxaicg.js","assets/h8933mnh4d08np9o.js","assets/mjzwjf2blunmnuo0.js","assets/g52w6ro568qcospb.js","assets/d25d6p0merrgbn69.js","assets/gvbypchrabr3tx6x.js","assets/dn4wahbewcmhdzq3.js","assets/grtnmyfpagnrl09d.js","assets/fzrn137102spawew.js","assets/e9lafxuzyeh4418f.js","assets/mmu1mgyeh9mpscy4.js","assets/hafo7oibbffc06w9.js","assets/knhg3obz49li8t63.js","assets/nymatvzkw3jqteia.js","assets/jtrxhml400nr9mys.js","assets/mo2u8055bxvcx81n.js","assets/jxguh64ess8asey2.js","assets/k16m2blxis1lpu5v.js","assets/d1lfm62m2dkdm23l.js","assets/cof65v04mq70bnz9.js","assets/1mq4bl028ayzaqnn.js","assets/guq6f12gkpxl9pjm.js","assets/k89mja1jeqklq5nq.js","assets/nv77gw576g9mrpgd.js","assets/gkwpnbuxqe3ty5en.js","assets/dtw7olj27tq8h4jv.js","assets/b7aghlqazxw23bun.js","assets/g6z4mgh3qw7fyiz6.js","assets/khpl3zshcvxzq7am.js","assets/djuqt1asemwzd7i5.js","assets/gzz12rmw75zva7mt.js","assets/n7jvk4prpmmvn45w.js","assets/evg5qkr84ftgl8i8.js","assets/embvvrmaikkmg9hu.js"])))=>i.map(i=>d[i]);
import{c as Ie,k as Yv,g as xe,i as vc,r as p,p as Kv,a as t3,b as OM,C as Hh,P as E,d as P,D as ie,e as Pr,T as de,f as Nt,h as n3,M as Qt,l as vs,j as ys,R as ae,v as Dr,E as r3,n as To,m as i,N as xs,u as ot,o as le,q as RM,s as Ge,t as s3,w as DM,x as a3,y as LM,z as D,A as me,B as ke,F as it,G as ta,H as o3,_ as $M,I as yc,J as FM,K as Hi,L as Xv,O as Yd,Q as Kd,S as Qv,U as z,V as L,W as Ne,X as i3,Y as Zr,Z as c3,$ as q,a0 as K,a1 as BM,a2 as ew,a3 as Xd,a4 as UM,a5 as Zv,a6 as Ys,a7 as VM,a8 as l3,a9 as fa,aa as Ce,ab as ma,ac as vu,ad as ko,ae as ze,af as pa,ag as Jv,ah as GM,ai as Bu,aj as WM,ak as os,al as HM,am as Un,an as zh,ao as ge,ap as zm,aq as tw,ar as zM,as as u3,at as Ha,au as zi,av as d3,aw as Ks,ax as Qd,ay as Me,az as Nn,aA as Jr,aB as Vn,aC as Zd,aD as f3,aE as bs,aF as xc,aG as e0,aH as t0,aI as Jd,aJ as A,aK as qM,aL as ef,aM as Gt,aN as J,aO as fe,aP as m3,aQ as YM,aR as ha,aS as KM,aT as XM,aU as Lr,aV as Rt,aW as st,aX as bc,aY as p3,aZ as h3,a_ as g3,a$ as v3,b0 as y3,b1 as x3,b2 as b3,b3 as w3,b4 as wc,b5 as S3,b6 as QM,b7 as ZM,b8 as Xe,b9 as qe,ba as Ye,bb as JM,bc as tf,bd as Sc,be as C3,bf as n0,bg as eE,bh as at,bi as S,bj as Sr,bk as Ln,bl as tE,bm as nf,bn as nE,bo as ee,bp as za,bq as r0,br as bt,bs as rE,bt as rf,bu as sf,bv as Cc,bw as T3,bx as k3,by as M3,bz as E3,bA as Mo,bB as we,bC as _3,bD as A3,bE as P3,bF as j3,bG as mr,bH as I3,bI as mo,bJ as N3,bK as Mt,bL as He,bM as af,bN as pr,bO as ne,bP as Uu,bQ as sE,bR as s0,bS as of,bT as O3,bU as cf,bV as R3,bW as D3,bX as L3,bY as lf,bZ as uf,b_ as df,b$ as $3,c0 as aE,c1 as ff,c2 as oE,c3 as iE,c4 as cE,c5 as _n,c6 as lE,c7 as _i,c8 as Tc,c9 as nw,ca as on,cb as Zt,cc as a0,cd as F3,ce as uE,cf as rw,cg as o0,ch as Eo,ci as i0,cj as cn,ck as B3,cl as c0,cm as dE,cn as fE,co as U3,cp as V3,cq as G3,cr as mE,cs as pE,ct as W3,cu as l0,cv as u0,cw as hE,cx as d0,cy as H3,cz as z3,cA as q3,cB as Y3,cC as K3,cD as gE,cE as Te,cF as Ke,cG as ga,cH as X3,cI as mf,cJ as yt,cK as f0,cL as vE,cM as Q3,cN as yu,cO as Z3,cP as yE,cQ as qh,cR as Yh,cS as xE,cT as kc,cU as J3,cV as jt,cW as Kh,cX as eL,cY as tL,cZ as nL,c_ as rL,c$ as Mc,d0 as na,d1 as sL,d2 as sw,d3 as aw,d4 as aL,d5 as oL,d6 as iL,d7 as pf,d8 as cL,d9 as lL,da as uL,db as dL,dc as fL,dd as mL,de as pL,df as Ec,dg as hL,dh as Jn,di as Bt,dj as Ai,dk as Mr,dl as bE,dm as gL,dn as vL,dp as yL,dq as qi,dr as ra,ds as xL,dt as hf,du as m0,dv as lr,dw as wE,dx as SE,dy as bL,dz as p0,dA as wL,dB as SL,dC as CE,dD as CL,dE as TL,dF as TE,dG as kL,dH as ML,dI as kE,dJ as Vu,dK as EL,dL as _L,dM as AL,dN as PL,dO as ME,dP as jL,dQ as EE,dR as _E,dS as AE,dT as ow,dU as IL,dV as xu,dW as iw,dX as gf,dY as Mn,dZ as h0,d_ as NL,d$ as OL,e0 as RL,e1 as PE,e2 as DL,e3 as LL,e4 as $L,e5 as FL,e6 as yn,e7 as En,e8 as jE,e9 as BL,ea as IE,eb as Xh,ec as UL,ed as VL,ee as _c,ef as NE,eg as GL,eh as WL,ei as HL,ej as zL,ek as OE,el as qL,em as YL,en as RE,eo as rn,ep as KL,eq as G,er as Pi,es as XL,et as si,eu as vn,ev as QL,ew as cw,ex as ZL,ey as JL,ez as DE,eA as g0,eB as _o,eC as Ao,eD as lw,eE as uw,eF as Fe,eG as LE,eH as $E,eI as FE,eJ as BE,eK as v0,eL as e$,eM as t$,eN as n$,eO as r$,eP as s$,eQ as a$,eR as o$,eS as i$,eT as c$,eU as l$,eV as u$,eW as UE,eX as d$,eY as f$,eZ as VE,e_ as Yi,e$ as m$,f0 as p$,f1 as GE,f2 as h$,f3 as WE,f4 as dw,f5 as g$,f6 as _l,f7 as v$,f8 as y$,f9 as HE,fa as x$,fb as b$,fc as w$,fd as no,fe as S$,ff as C$,fg as T$,fh as k$,fi as ai,fj as M$,fk as fw,fl as E$,fm as _$,fn as Qh,fo as A$,fp as P$,fq as j$,fr as I$,fs as mw,ft as bu,fu as pw,fv as Cn,fw as Al,fx as br}from"./ogb0m6wfmpkwr4v0.js";import{S as hw,a as N$,b as gw,c as Ac,d as O$,e as vw,f as R$,g as D$,h as L$,i as $$,j as y0,k as F$,l as B$,m as Po,n as Pc,o as zE,p as qE,q as va,r as YE,s as KE,t as vf,u as U$,v as yf,w as XE,x as x0,y as V$,z as ya,A as G$,B as jc,C as W$,D as QE,E as ZE,F as H$,G as JE,H as e_,I as t_,J as z$,K as q$,L as b0,M as Y$,N as xf,O as w0,P as K$,Q as X$,R as Q$,T as Z$,U as S0,V as Xs,W as J$,X as n_,Y as e6,Z as C0,_ as T0,$ as k0,a0 as r_,a1 as s_,a2 as a_,a3 as jo,a4 as M0,a5 as E0,a6 as _0,a7 as o_,a8 as t6,a9 as n6,aa as r6,ab as s6,ac as i_,ad as a6,ae as o6,af as i6,ag as c6,ah as l6,ai as u6,aj as c_,ak as d6,al as f6,am as m6,an as l_,ao as A0,ap as p6,aq as h6,ar as g6,as as P0,at as u_,au as d_,av as f_,aw as v6,ax as m_,ay as p_,az as y6,aA as x6,aB as b6,aC as w6,aD as S6,aE as C6,aF as T6,aG as h_,aH as g_,aI as k6}from"./b9t2rzfm26s20fe0.js";function v_(e){return e!=null}const bf=(e,t)=>e.includes(t),M6=(e,t,n=[])=>{if(e==null)return n;const r=Array.isArray(e)?e:[e];return t?r.map(t):r},y_=(e,t=[])=>n=>M6(n,e,t),x_=(e,t=void 0)=>typeof e!="object"||e==null||Array.isArray(e)?t:e,b_=(e,t)=>{const n=x_(e),r={};for(const s in t)r[s]=t[s](n?.[s]);return r},Cr=e=>t=>b_(t,e),is=(e,t="")=>typeof e=="object"||e==null?t:String(e),E6=(e,t=0)=>{if(typeof e=="object"||e==null)return t;const n=Number(e);return isNaN(n)?t:n},_6=(e,t=!1)=>{if(typeof e=="boolean")return e;if(typeof e=="number"){if(e===0)return!1;if(e===1)return!0}if(typeof e=="string"){const n=e.toLowerCase();if(n==="false")return!1;if(n==="true")return!0}return t},w_=(e,t,n=t[0])=>bf(t,e)?e:n,A6=(e,t=e[0])=>n=>w_(n,e,t),cs=e=>t=>t===void 0?void 0:e(t);var wf=(e=>(e[e.Textdoc=0]="Textdoc",e[e.ADAVisualization=1]="ADAVisualization",e[e.Sonic=2]="Sonic",e))(wf||{});const jr=Ie(()=>({focusedObject:null,fromMessageId:null})),J9e=(e,t)=>{const n=jr.getState();t!==n.fromMessageId&&jr.setState({focusedObject:e,fromMessageId:t})},j0=e=>{jr.setState({focusedObject:e,fromMessageId:null})},po=e=>{const t=jr.getState(),{focusedObject:n}=t;(!n||n.type!==0||n.textdocId!==e)&&S_(e)},S_=e=>{j0({type:0,textdocId:e})},P6=(e,t,n)=>{j0({type:0,textdocId:e,history:t,showChangesAtVersion:n})},j6=(e,t,n)=>{j0({type:0,textdocId:e,showChangesAtVersion:t,history:n??void 0})},eOe=()=>{jr.setState({focusedObject:null})},tOe=()=>{jr.setState({focusedObject:null,fromMessageId:null})};function I6(e){return function(){return e}}var C_=I6;function N6(e){return function(t,n,r){for(var s=-1,a=Object(t),o=r(t),c=o.length;c--;){var l=o[e?c:++s];if(n(a[l],l,a)===!1)break}return t}}var O6=N6,R6=O6,D6=R6(),L6=D6,$6=L6,F6=Yv;function B6(e,t){return e&&$6(e,t,F6)}var I0=B6,U6=I0;function V6(e,t,n,r){return U6(e,function(s,a,o){t(r,n(s),a,o)}),r}var G6=V6,W6=G6;function H6(e,t){return function(n,r){return W6(n,e,t(r),{})}}var z6=H6,q6=C_,Y6=z6,K6=vc,X6=Object.prototype,Q6=X6.toString,Z6=Y6(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=Q6.call(t)),e[t]=n},q6(K6)),J6=Z6;const e4=xe(J6);function N0(e,t){if(!e||t==null)return null;const{resolveTempTextdocId:n}=e,r=n?.[t]??t;let s=e.textdocById[r]??e.textdocById[t]??null;if(!s&&n){const a=e4(n);s=e.textdocById[a[r]]??null}return s}var T_={exports:{}},k_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,R){var V=O.length;O.push(R);e:for(;0<V;){var X=V-1>>>1,re=O[X];if(0<s(re,R))O[X]=R,O[V]=re,V=X;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var R=O[0],V=O.pop();if(V!==R){O[0]=V;e:for(var X=0,re=O.length,te=re>>>1;X<te;){var ue=2*(X+1)-1,he=O[ue],Se=ue+1,se=O[Se];if(0>s(he,V))Se<re&&0>s(se,he)?(O[X]=se,O[Se]=V,X=Se):(O[X]=he,O[ue]=V,X=ue);else if(Se<re&&0>s(se,V))O[X]=se,O[Se]=V,X=Se;else break e}}return R}function s(O,R){var V=O.sortIndex-R.sortIndex;return V!==0?V:O.id-R.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var l=[],u=[],d=1,f=null,m=3,h=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(O){for(var R=n(u);R!==null;){if(R.callback===null)r(u);else if(R.startTime<=O)r(u),R.sortIndex=R.expirationTime,t(l,R);else break;R=n(u)}}function C(O){if(v=!1,w(O),!g)if(n(l)!==null)g=!0,H(T);else{var R=n(u);R!==null&&Y(C,R.startTime-O)}}function T(O,R){g=!1,v&&(v=!1,b(k),k=-1),h=!0;var V=m;try{for(w(R),f=n(l);f!==null&&(!(f.expirationTime>R)||O&&!F());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var re=X(f.expirationTime<=R);R=e.unstable_now(),typeof re=="function"?f.callback=re:f===n(l)&&r(l),w(R)}else r(l);f=n(l)}if(f!==null)var te=!0;else{var ue=n(u);ue!==null&&Y(C,ue.startTime-R),te=!1}return te}finally{f=null,m=V,h=!1}}var M=!1,_=null,k=-1,I=5,j=-1;function F(){return!(e.unstable_now()-j<I)}function U(){if(_!==null){var O=e.unstable_now();j=O;var R=!0;try{R=_(!0,O)}finally{R?B():(M=!1,_=null)}}else M=!1}var B;if(typeof x=="function")B=function(){x(U)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,$=N.port2;N.port1.onmessage=U,B=function(){$.postMessage(null)}}else B=function(){y(U,0)};function H(O){_=O,M||(M=!0,B())}function Y(O,R){k=y(function(){O(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){g||h||(g=!0,H(T))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(O){switch(m){case 1:case 2:case 3:var R=3;break;default:R=m}var V=m;m=R;try{return O()}finally{m=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,R){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var V=m;m=O;try{return R()}finally{m=V}},e.unstable_scheduleCallback=function(O,R,V){var X=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?X+V:X):V=X,O){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=V+re,O={id:d++,callback:R,priorityLevel:O,startTime:V,expirationTime:re,sortIndex:-1},V>X?(O.sortIndex=V,t(u,O),n(l)===null&&O===n(u)&&(v?(b(k),k=-1):v=!0,Y(C,V-X))):(O.sortIndex=re,t(l,O),g||h||(g=!0,H(T))),O},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(O){var R=m;return function(){var V=m;m=R;try{return O.apply(this,arguments)}finally{m=V}}}})(k_);T_.exports=k_;var qm=T_.exports;const Gu=Symbol(),t4=Symbol(),n4=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent),M_=n4?p.useEffect:p.useLayoutEffect,r4=qm.unstable_runWithPriority?e=>{try{qm.unstable_runWithPriority(qm.unstable_NormalPriority,e)}catch(t){if(t.message==="Not implemented.")e();else throw t}}:e=>e(),s4=e=>({value:n,children:r})=>{const s=p.useRef(n),a=p.useRef(0),[o,c]=p.useState(null);o&&(o(n),c(null));const l=p.useRef();if(!l.current){const u=new Set,d=(f,m)=>{a.current+=1;const h={n:a.current};m?.suspense&&(h.n*=-1,h.p=new Promise(g=>{c(()=>v=>{h.v=v,delete h.p,g(v)})})),u.forEach(g=>g(h)),f()};l.current={[Gu]:{v:s,n:a,l:u,u:d}}}return M_(()=>{s.current=n,a.current+=1,r4(()=>{l.current[Gu].l.forEach(u=>{u({n:a.current,v:n})})})},[n]),p.createElement(e,{value:l.current},r)};function a4(e){const t=p.createContext({[Gu]:{v:{current:e},n:{current:-1},l:new Set,u:n=>n()}});return t[t4]=t.Provider,t.Provider=s4(t.Provider),delete t.Consumer,t}function o4(e,t){const n=p.useContext(e)[Gu],{v:{current:r},n:{current:s},l:a}=n,o=t(r),[c,l]=p.useReducer((u,d)=>{if(!d)return[r,o];if("p"in d)throw d.p;if(d.n===s)return Object.is(u[1],o)?u:[r,o];try{if("v"in d){if(Object.is(u[0],d.v))return u;const f=t(d.v);return Object.is(u[1],f)?u:[d.v,f]}}catch{}return[...u]},[r,o]);return Object.is(c[1],o)||l(),M_(()=>(a.add(l),()=>{a.delete(l)}),[a]),c[1]}var Zh=(e=>(e.NATIVE="native",e.LAST_TURN="last_turn",e))(Zh||{});const E_=a4(null);function i4(){return{lastCanvasAssistantMessageById:{},resolveTempCommentId:{},resolveTempTextdocId:{},latestTextdocId:null}}function __(e){return{fetchError:null,isFetchingFromPersistence:!1,textdocById:{},allTextdocIdSet:{},streamingSource:null,...e??i4()}}function es(e,t){return Kv(e,t)}function ji(e,t,n=!0){const r=e.textdocById[t.textdocId];if(r)e.textdocById[t.textdocId]=r,r.metadata.type=t.type,r.metadata.title=t.title,r.metadata.updatedAt=t.createdAt,n?r.versions.push(t):r.versions[r.versions.length-1]=t;else{const s={metadata:{textdocId:t.textdocId,type:t.type,title:t.title,createdAt:t.createdAt,updatedAt:t.createdAt},versions:[t]};e.allTextdocIdSet[t.textdocId]=t.textdocId,e.textdocById[t.textdocId]=s}}function An(e=t3){return o4(E_,e)}function c4(){return An(e=>e?.isFetchingFromPersistence)}function nOe(){return An(e=>e?.resolveTempTextdocId)}function rOe(){return An(e=>e?.resolveTempCommentId)}function l4(){return An(e=>e?.latestTextdocId??null)}function sOe(){return An(e=>e?.streamingSource)}function aOe(e){return An(t=>N0(t,e))}function Sf(e){return An(t=>N0(t,e)?.metadata??null)}function A_(){const e=An(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function u4(){return An(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function d4({textdocId:e,assistantMessage:t}){return An(n=>{const r=n?.lastCanvasAssistantMessageById;return r==null||e==null?!0:r[e]==null||r[e]===t?.message.id})}function P_(){return jr(e=>e.focusedObject)}function oOe(){const e=jr(t=>t.focusedObject);return e?.type!==wf.Textdoc?null:e}function f4(){const e=jr(t=>t.focusedObject);return e?.type!==wf.Textdoc?null:e.history??null}function Ic(){return P_()!=null}function O0(e){const t=P_();return An(n=>{if(!e||t?.type!==wf.Textdoc)return!1;const r=n?.resolveTempTextdocId??{},s=r[t.textdocId]??t.textdocId,a=r[e]??e;return s===a})}var Wu=(e=>(e.Unknown="unknown",e.ShowToast="show_toast",e.CanvasMessage="canvas_message",e.TurnComplete="turn_complete",e))(Wu||{});const m4={canvas_message:Cr({message:x_}),turn_complete:Cr({}),unknown:Cr({}),show_toast:Cr({text:is})},yw=A6(Object.values(Wu));function p4(e){const{type:t}=b_(e,{type:yw}),n=yw(t);return{type:n,...m4[n](e)}}function xw(e,t){g4(n=>{n.type===e&&t(n)})}function h4(e){const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return new TextDecoder("utf-8").decode(n)}function g4(e){p.useEffect(()=>OM(window,{message:n=>{const r=n.data;if(!(typeof r!="object"||r?.type!=="canmore_native"))try{const s=h4(r.msg),a=p4(JSON.parse(s));e(a)}catch{console.warn(`Unknown message from native app: ${r.msg}`)}}}),[e])}function j_(){let e;const t=v4();switch(t){case"android":e=window.CanmoreNative;break;case"ios":e=window.webkit?.messageHandlers.canmoreNative;break;case"web":e=void 0;break}return{platform:t,isNative:t!=="web",bridge:e,sendMessage:n=>e?.postMessage(btoa(JSON.stringify(n)))}}function v4(){return typeof window.CanmoreNative<"u"?"android":typeof window.webkit<"u"&&typeof window.webkit.messageHandlers.canmoreNative<"u"?"ios":"web"}const y4=e=>{const[t,n]=p.useState(null),r=p.useCallback(a=>{n(o=>{if(!o)return[a];const c=[...o];for(let l=0;l<o.length;l++)c[l].message.id===a.message.id?c[l]=a:l===c.length-1&&c.push(a);return c})},[]),s=p.useCallback(()=>n(null),[]);return xw(Wu.TurnComplete,async()=>{await e(),s()}),xw(Wu.CanvasMessage,async({message:a})=>{const o=a,{message:{recipient:c,author:l}}=o;(c?.startsWith(Hh)||l.name?.startsWith(Hh))&&r(o)}),t};function x4(e,t){return e.replace(new RegExp("\\\\(\\d+)|\\\\g<(?:(\\d+)|(\\D[^>]*))>|((?<!\\\\)\\\\(?:g(?:<[^>]*)?)?$)","gi"),(n,r,s,a,o)=>{if(r==="0")return"\\0";const c=r??s;if(c)return t[E6(c)]??"";if(a)return t.groups?.[a]??"";if(o)return"";throw new Error("Unreachable")})}function b4(e,t){let n="",r=0,s=0,a=0,o=0,c=!1;const l=y=>{r+=y},u=y=>{r>s&&(n+=e.slice(s,r)),r=s=r+y},d=y=>{u(0),n+=y},f=()=>{d("\\"),l(1)},m=y=>{if(r+y<e.length)return e[r+y]},h=(y,b=0)=>r+b<e.length&&y===e[r+b],g=y=>{const b=e.indexOf(y,r);if(b===-1)u(e.length-r);else return b-r},v=y=>{let b=1;if(m(y)==="\\"){const w=m(y+1);b=w==="U"?10:w==="u"?6:w==="x"?4:2}const x=r+y+b>e.length;return x&&u(e.length-r),x};for(;r<e.length;){if(h("\\")){if(v(0))continue;const x=m(1)??"";if(x==="a")u(2),d("\\x07");else if(x==="A")u(2),d("^");else if(x==="z")u(2),d("$");else if(x==="Z")u(2),d("(?=\\n?$)");else if(x==="U"){const w=e.slice(r+2,r+10);u(10),d(`\\u{${parseInt(w,16).toString(16)}}`)}else if(x==="u")l(6);else if(x==="x")l(4);else{let w;c?w=/[0bdDsSwWfnrtv()[\]{}|/\\^-]/.test(x):/[1-9]/.test(x)?w=parseInt(x,10)<=o:w=/[0bBdDsSwWfnrtv()[\]{}|/\\^$.?*+]/.test(x),w?l(2):u(1)}continue}if(h("]")){c?(c=!1,l(1)):f();continue}else if(c){if(h("-")&&v(1))continue;/[()[\]{}|/\\]/.test(e[r])?f():l(1);continue}else if(h("[")){c=!0,l(1),h("]")&&f();continue}if(h("|")&&v(1))continue;if(h("{")){const x=/^\{(?:\d+(?:,\d*)?(\}|$)|$)/.exec(e.slice(r));r>0&&x?.[1]==="}"?l(x[0].length):r>0&&x&&t?u(x[0].length):f();continue}else if(h("}")){f();continue}if(h("+")){const x=m(-1);x&&/[*+?}]/.test(x)&&m(-2)!=="\\"?u(1):l(1);continue}if(h(")")){a>0?(a--,l(1)):f();continue}if(!h("(")){l(1);continue}if(v(1))continue;if(m(1)!=="?"){a++,o++,l(1);continue}if(v(2))continue;const y=m(2);if(!y){u(2);continue}if(y==="#"){const x=g(")");x&&u(1+x);continue}if(y==="P"){if(m(3)==="="){const x=g(")");if(x){const w=e.slice(r+4,r+x);u(1+x),d(`\\k<${w}>`)}}else{const x=g(">");if(x){const w=e.slice(r+4,r+x);if(u(1+x),v(0))continue;d(`(?<${w}>`),a++}}continue}if(/[-a-z]/.test(y)){const x=e.indexOf(":",r)>=0,w=g(x?":":")");if(w&&u(1+w),x){if(v(0))continue;d("(?:"),a++}continue}if(y===">"){if(u(3),v(0))continue;d("(?:"),a++;continue}const b=y==="<"?4:3;v(b)||(l(b),a++)}for(n+=e.slice(s,e.length),c&&(n+="]");a-- >0;)n+=")";return n.length>0?n:"(?!)"}function bw(e){const t=[/^`{1,3}\s*$/,/^```[^\n]*\n?/],n=[/\n?`{1,3}\s*$/];for(const r of t)if(r.test(e)){e=e.replace(r,"");break}for(const r of n)if(r.test(e)){e=e.replace(r,"");break}return e}function I_({messageId:e},t){return`temp-tdc-${t}-${e}`}function R0({messageId:e}){return`temp-td-${e}`}function w4(){return`temp-pasted-td:${Math.random()}`}function S4(e){let t="";const n=e.length;let r=0,s=0;for(;r<n;){let a=e.charCodeAt(r);if(a!==92){r++;continue}if(s<r&&(t+=e.slice(s,r)),r++,r>=n){t+="\\";break}switch(a=e.charCodeAt(r),a){case 110:t+=`
`,r++;break;case 116:t+="	",r++;break;case 114:t+="\r",r++;break;case 98:t+="\b",r++;break;case 102:t+="\f",r++;break;case 118:t+="\v",r++;break;case 48:t+="\0",r++;break;case 39:t+="'",r++;break;case 34:t+='"',r++;break;case 92:t+="\\",r++;break;case 120:if(r+2<n){const o=parseInt(e.slice(r+1,r+3),16);if(!isNaN(o)){t+=String.fromCharCode(o),r+=3;break}}t+="\\x",r++;break;case 117:if(r+1<n)if(e.charAt(r+1)==="{"){const o=e.indexOf("}",r+2);if(o!==-1){const c=parseInt(e.slice(r+2,o),16);if(!isNaN(c)&&c<=1114111){t+=String.fromCodePoint(c),r=o+1;break}}}else{const o=parseInt(e.slice(r+1,r+5),16);if(!isNaN(o)){t+=String.fromCharCode(o),r+=5;break}}t+="\\u",r++;break;default:t+="\\"+e.charAt(r),r++;break}s=r}return s<n&&(t+=e.slice(s)),t}function Cf(e,t){E.logEvent(e,{platform:j_().platform,...t??{}})}function C4(e,t,n){E.logEventWithStatsig(e,t,{platform:j_().platform,...n})}function T4(e,t,n){Cf(e,{distributionValue:t,...n??{}})}function k4(e,t){Cf(P.canvasButtonClicked,{buttonName:e,...t??{}})}function M4(e){if(e instanceof Error){const{name:t,message:n,stack:r,cause:s}=e;return{name:t,message:n,stack:r,cause:s}}return e}function E4(e,t,n){Cf(P.canvasError,{message:e,error:t==null?e:M4(t),attributes:n}),ie.addError(t)}const D0={logButtonClick:k4,logEvent:Cf,logEventWithStatsig:C4,logError:E4,logDistribution:T4},ww=e=>e===" "||e===`
`||e==="\r"||e==="	";function _4(e,t=!1){let n=0,r=null;const s=[];if(!e)return[void 0,s];if(t)return[c(),s];try{return[JSON.parse(e),null]}catch(g){return r=g,[c(),s]}function a(){for(;n<e.length&&ww(e[n]);)n++;return n<e.length}function o(g){return a()&&e[n]===g?(n++,!0):!1}function c(){if(a())switch(e[n]){case"{":return f();case"[":return m();case'"':{const[g]=u();return g}case"f":return h("false",!1);case"t":return h("true",!0);case"n":return h("null",null);case"-":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return d()}throw r}function l(g,v=!1){return v?S4(g):g}function u(g=!1){const v=n+1;let y=!1;for(n++;n<e.length;){const b=e[n++];if(b==="\\"){if(y=!0,n===e.length||e[n]==="u"&&n+4>=e.length){const x=n-1;return n=e.length,[l(e.slice(v,x),y),!1]}n++;continue}if(b==='"'){let x=n;for(;x<e.length&&ww(e[x]);)x++;if(e[x]==null||e[x]===","||e[x]==="]"||e[x]==="}"||g&&e[x]===":")return[l(e.slice(v,n-1),y),!0]}}return[l(e.slice(v,n),y),!1]}function d(){const g=n;for(;n<e.length&&/[0-9.eE+-]/.test(e[n]);)n++;const v=Number(e.slice(g,n));if(isNaN(v)){if(a())throw r;return 0}return v}function f(){n++;const g={};if(o("}"))return g;for(;a();){const[v,y]=u(!0);if(!y||(s.push(v),!a()))break;if(!o(":"))throw r;if(!a()||(g[v]=c(),!a()))break;if(o("}")){s.pop();break}if(!o(","))throw r;s.pop()}return g}function m(){n++;const g=[];if(o("]"))return g;for(s.push(0);a()&&(g.push(c()),!!a());){if(o("]")){s.pop();break}if(!o(","))throw r;s[s.length-1]=g.length}return g}function h(g,v){const y=n+g.length;if(y<=e.length?e.slice(n,y)===g:g.startsWith(e.slice(n)))return n=y,v;throw r}}function Ym(e,t,n=!1){try{const[r,s]=_4(e);return[t(r),s]}catch(r){return n&&D0.logError("JSON parsing",r),[void 0,[]]}}function oi(e,t){return e!=null&&t.every((n,r)=>e[r]===n)}var qa=(e=>(e.INFERRING_TYPE="inferring",e.PENDING="pending",e.SENT="sent",e))(qa||{});const Tr=-1;var Tn=(e=>(e.CREATING="creating",e.REWRITING="rewriting",e.COMMENTING="commenting",e.UPDATING="updating",e.COMPLETE="complete",e))(Tn||{});const iOe=e=>e?.status!=="complete",cOe=e=>e?.status==="rewriting",lOe=e=>e?.status==="creating";var L0=(e=>(e.DOCUMENT="document",e.CODE_BASH="code/bash",e.CODE_ZSH="code/zsh",e.CODE_JAVASCRIPT="code/javascript",e.CODE_TYPESCRIPT="code/typescript",e.CODE_HTML="code/html",e.CODE_CSS="code/css",e.CODE_PYTHON="code/python",e.CODE_JSON="code/json",e.CODE_SQL="code/sql",e.CODE_GO="code/go",e.CODE_YAML="code/yaml",e.CODE_JAVA="code/java",e.CODE_RUST="code/rust",e.CODE_CPP="code/cpp",e.CODE_SWIFT="code/swift",e.CODE_PHP="code/php",e.CODE_XML="code/xml",e.CODE_RUBY="code/ruby",e.CODE_HASKELL="code/haskell",e.CODE_KOTLIN="code/kotlin",e.CODE_CSHARP="code/csharp",e.CODE_C="code/c",e.CODE_OBJECTIVEC="code/objectivec",e.CODE_R="code/r",e.CODE_LUA="code/lua",e.CODE_DART="code/dart",e.CODE_SCALA="code/scala",e.CODE_PERL="code/perl",e.CODE_COMMONLISP="code/commonlisp",e.CODE_CLOJURE="code/clojure",e.CODE_OCAML="code/ocaml",e.CODE_POWERSHELL="code/powershell",e.CODE_VERILOG="code/verilog",e.CODE_DOCKERFILE="code/dockerfile",e.CODE_VUE="code/vue",e.CODE_REACT="code/react",e.CODE_OTHER="code/other",e.LOADING="loading",e))(L0||{});function Jh(e){return e.startsWith("code/")}function $0(e){const t=w_(e,Object.values(L0),null);if(t)return t;if(e==="webview")return"code/html";if(e.startsWith("code"))switch(e){case"code/js":return"code/javascript";default:return"code/other"}return"document"}var lt=(e=>(e.CREATE="create",e.REWRITE="rewrite",e.EDIT="edit",e.ADD_COMMENT="add_comment",e.REMOVE_COMMENT="remove_comment",e))(lt||{}),N_=(e=>(e.ACCEPT="accept",e.DISMISS="dismiss",e))(N_||{}),eg=(e=>(e.ACCEPT_INITIATED="accept_initiated",e.DISMISSED="dismissed",e.PENDING="pending",e))(eg||{}),A4=(e=>(e.ADDED="added",e.REMOVED="removed",e))(A4||{}),P4=(e=>(e.ACCEPT_COMMENT="accept_comment",e.ASK_CHATGPT="ask_chatgpt",e.ACCELERATOR="accelerator",e.CONSOLE="console",e.FULL_SCREEN_SUBMIT="full_screen_submit",e))(P4||{});const j4=Cr({type:cs(is),name:cs(is),content:cs(is)}),I4=Cr({updates:y_(Cr({pattern:cs(is),multiple:cs(_6),replacement:cs(is)}))}),N4=Cr({comments:y_(Cr({pattern:cs(is),comment:cs(is)}))});function O_(e,t,n){const{id:r,author:s,recipient:a,create_time:o}=t;if(!o)throw new Error("Expected a create_time");const c=Pr(t),l=n?.metadata?.canvas;if(t?.metadata?.is_redacted||n?.metadata?.is_redacted||c==="The output of this plugin was redacted.")return{function:a,status:de.REDACTED,messageId:r,author:s,createdAt:o};switch(a){case Nt.CreateTextdoc:{const[u,d]=Ym(c,j4),f=l?.textdoc_type??(!u?.type||oi(d,["type"])?void 0:$0(u.type));return{function:Nt.CreateTextdoc,status:Km(e,t,n,d!=null),messageId:r,author:s,createdAt:o,textdocId:l?.textdoc_id,versionInt:Xm(l),title:u?.name,type:f,content:u?.content}}case Nt.UpdateTextdoc:{const[u,d]=Ym(c,I4,!e),f=u?.updates.map((m,h)=>({...m,isPartialPattern:oi(d,["updates",h,"pattern"]),isPartial:oi(d,["updates",h])}));return{function:Nt.UpdateTextdoc,status:Km(e,t,n,d!=null),messageId:r,author:s,createdAt:o,textdocId:l?.textdoc_id,versionInt:Xm(l),updates:f}}case Nt.CommentTextdoc:{const[u,d]=Ym(c,N4,!e),f=n?.metadata?.canvas?.comment_ids,m=u?.comments.map((h,g)=>({...h,id:f?.[g],isPartialPattern:oi(d,["comments",g,"pattern"]),isPartial:oi(d,["comments",g])}));return{function:Nt.CommentTextdoc,status:Km(e,t,n,d!=null),messageId:r,author:s,createdAt:o,textdocId:l?.textdoc_id,versionInt:Xm(l),comments:m}}}}function Tf(e){return n3(e?.recipient)}function O4(e,t=0){for(let n=t;n<e.length;n++)if(Tf(e[n].message))return!0;return!1}function Km(e,t,n,r){if(t?.metadata?.finish_details?.type==="interrupted")return de.CANCELED;if(n?.content.content_type===Qt.SystemError)return de.FAILED;if(e&&!n)return r?de.STREAMING:de.WAITING;const a=n?.metadata?.canvas;return a!=null&&a.is_failure!==!0?de.COMPLETE:de.FAILED}function Xm(e){return e?.version??e?.version_int}var Sw=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function R4(e,t){return!!(e===t||Sw(e)&&Sw(t))}function D4(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!R4(e[n],t[n]))return!1;return!0}function Io(e,t){t===void 0&&(t=D4);var n=null;function r(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];if(n&&n.lastThis===this&&t(s,n.lastArgs))return n.lastResult;var o=e.apply(this,s);return n={lastResult:o,lastArgs:s,lastThis:this},o}return r.clear=function(){n=null},r}const L4=5;function R_(e,t){let n=null;for(let r=0;r<t.length;r++){const{message:s}=t[r];if(Tf(s)){const a=r+1<t.length&&t[r+1].message.author.name===s.recipient?t[r+1].message:null;a&&r++;const o=O_(e,s,a);n?n.push(o):n=[o]}}return n}function $4(e,t,n){let r=null;const s=R_(e,n);if(!s)return r;for(const a of s){const o=F4(t,a);o&&(r?r=r.concat(o):r=o)}return r}const Qm=Io((e,t,n)=>{ie.addError(t,n)},([e],[t])=>e===t);function F4(e,t){if(t.status===de.FAILED||t.status===de.CANCELED)return null;if(t.function===Nt.CreateTextdoc){if(!t.type)return null;const a=R0(t),o=t.content&&Jh(t.type)?bw(t.content):t.content;return[{kind:lt.CREATE,textdocId:t.textdocId??a,versionInt:t.versionInt,messageId:t.messageId,author:t.author,createdAt:t.createdAt,tempTextdocId:a,title:t.title??"",type:t.type,content:o??"",isPartial:t.status===de.STREAMING}]}const n=e?.latestTextdocId,r=t?.textdocId??n;if(t.status===de.COMPLETE&&(n?t?.textdocId&&t.textdocId!==n&&Qm(t.messageId,"Attempted to parse canmore operation with incorrect client latest target id",{latestTextdocId:n,toolCall:t}):Qm(t.messageId,"Attempted to parse canmore operation but latestTextdocId is unset",{toolCall:t})),!r)return null;const s=vs(N0(e,r)?.versions);if(!s)return t.status===de.COMPLETE&&Qm(t.messageId,"Attempted to parse canmore operation against unknown target id",{textdocId:r}),null;switch(t.function){case Nt.UpdateTextdoc:{const a=[],o=t.updates??[];for(let c=0;c<o.length;c++){const l=o[c];if(l.isPartialPattern&&l.pattern&&l.pattern.length<L4)continue;if(l.pattern===".*"){const f=l.replacement?Jh(s.type)?bw(l.replacement):l.replacement:"";return[{kind:lt.REWRITE,textdocId:r,versionInt:t.versionInt,messageId:t.messageId,createdAt:t.createdAt,author:t.author,content:f,isPartial:t.status===de.STREAMING&&l.isPartial,comments:[]}]}const u=Tw(l.pattern,l.isPartialPattern,l.multiple);if(!u)continue;let d=!1;for(const f of Cw(s.content,u,l.multiple)){d=!0;const m=kw(f),h=l.replacement&&x4(l.replacement,f);for(const g of a)if(g.at.end<=m.start){if(!g.isPartialRange){const v=g.at.start-g.at.end+g.content.length;m.start+=v,m.end+=v}}else g.at.start<m.end;a.push({kind:lt.EDIT,textdocId:r,versionInt:t.versionInt,messageId:t.messageId,author:t.author,createdAt:t.createdAt,at:m,content:h??"",isPartialRange:t.status===de.STREAMING&&l.isPartialPattern,isPartial:t.status===de.STREAMING&&l.isPartial})}if(!l.isPartialPattern&&!d)return null}return a.length>0?a:null}case Nt.CommentTextdoc:{const a=[],o=t.comments??[];for(let c=0;c<o.length;c++){const l=o[c],u=Tw(l.pattern,l.isPartialPattern);if(!u)continue;let d=!1;for(const f of Cw(s.content,u)){d=!0;const m=kw(f);m.end>m.start&&a.push({kind:lt.ADD_COMMENT,textdocId:r,versionInt:t.versionInt,messageId:t.messageId,author:t.author,createdAt:t.createdAt,id:l.id,tempId:I_(t,c),at:m,content:l.comment??"",isPartialRange:t.status===de.STREAMING&&l.isPartialPattern,isPartial:t.status===de.STREAMING&&l.isPartial})}if(!l.isPartialPattern&&!d)return null}return a.length>0?a:null}}}function*Cw(e,t,n=!1){if(n)yield*e.matchAll(t);else{const r=e.match(t);r&&(yield r)}}function Tw(e,t,n=!1){if(e)try{const r=b4(e,t);return new RegExp(r,n?"gsv":"sv")}catch(r){console.warn("Assistant returned invalid Regexp, dropping",{pattern:e,error:r})}}function kw(e){return{start:e.index,end:e.index+e[0].length}}const Nc=Ie(ys(()=>({pastedTextdocs:{}}))),{setState:_a}=Nc,D_={pasteContent:e=>{const t=w4();_a(n=>{n.pastedTextdocs[t]={tempId:t,pastedAt:Date.now(),status:qa.INFERRING_TYPE,content:e,metadata:null}}),ae.safePost("/conversation/textdocs/paste",{requestBody:{content:e}}).then(n=>{const{name:r,type:s}=n;_a(a=>{a.pastedTextdocs[t].metadata={temp_id:t,title:r,type:$0(s)}})}).finally(()=>{_a(n=>{n.pastedTextdocs[t]&&(n.pastedTextdocs[t].status=qa.PENDING)})})},editPastedContent:(e,t)=>{_a(n=>{n.pastedTextdocs[e].content=t})},markAllAsSent:()=>{_a(e=>{for(const t of Object.keys(e.pastedTextdocs))e.pastedTextdocs[t].status===qa.PENDING?e.pastedTextdocs[t].status=qa.SENT:delete e.pastedTextdocs[t]})},removePastedContent:e=>{_a(t=>{delete t.pastedTextdocs[e]})}},kf=Io(({pastedTextdocs:e})=>e),B4=Io(e=>Object.values(e)),F0=Io(e=>Object.values(e).filter(t=>t.status!==qa.SENT)),uOe=()=>F0(kf(Nc.getState())),U4=()=>Nc(e=>B4(kf(e))),dOe=()=>Nc(e=>F0(kf(e))),fOe=()=>Nc(e=>F0(kf(e)).length>0),B0=()=>({lastFlushedAt:null,lastTriggeredAt:null}),U0=Ie(ys(()=>({userEdits:{},timestamps:{}}))),{setState:Mf}=U0,mOe=e=>U0(({timestamps:t})=>(t[e]?.lastTriggeredAt??0)>(t[e]?.lastFlushedAt??0)),pOe=e=>{Mf(t=>{t.timestamps[e]??=B0(),t.timestamps[e].lastTriggeredAt=Date.now()})},hOe=({textdocId:e,basedOnVersionInt:t,content:n,comments:r})=>{Mf(s=>{s.timestamps[e]??=B0(),s.timestamps[e].lastFlushedAt=Date.now(),s.userEdits[e]??=[],s.userEdits[e].push({content:n,basedOnVersionInt:t,nextVersionInt:null,isPending:!0,comments:r})})},gOe=({textdocId:e,basedOnVersionInt:t,newVersion:n})=>{Mf(r=>{r.userEdits[e]??=[];for(const s of r.userEdits[e])if(s.basedOnVersionInt===t){s.isPending=!1,s.nextVersionInt=n;break}})},V4=e=>{Mf(t=>{for(const{textdocId:n,versionInt:r}of e){const s=t.userEdits[n];s&&(t.userEdits[n]=s.filter(a=>a.basedOnVersionInt>(r??Tr)),s.length===0&&(t.timestamps[n]=B0()))}})},G4=Io(({userEdits:e})=>e),W4=Io(e=>{const t=new Map;for(const[n,r]of Object.entries(e)){const s=vs(r);if(!s)continue;const{content:a,comments:o,nextVersionInt:c,basedOnVersionInt:l}=s;t.set(n,{textdocId:n,comments:o,content:a,versionInt:c??l})}return t}),H4=()=>U0(e=>W4(G4(e)));var V0=(e=>(e.READY="ready",e.LOG="log",e.OUTPUT="output",e.ERROR="error",e.RUN_COMPLETE="run_complete",e))(V0||{});const z4="web-sandbox.oaiusercontent.com/index.html",q4=`https://${z4}`;function Y4(){let e=null;const t=new Promise(n=>e=n);return{resolve:e,promise:t}}function K4(e){let t=null;const n=[];let r=!1;return e.on("message",s=>{t?(t({value:s,done:r}),t=null):n.push(s),s.type===V0.RUN_COMPLETE&&(r=!0)}),{[Symbol.asyncIterator](){return this},next(){if(n.length>0){const s=n.shift();return Promise.resolve({value:s,done:r})}return r?Promise.resolve({value:void 0,done:r}):new Promise(s=>{t=s})}}}const X4=(e,t)=>{const n=p.useRef(null),[r]=p.useState(Y4),s=p.useRef(null),a=p.useRef(new Map),o=p.useCallback(async function*(c){await r.promise;const l=Dr(),u=new r3;a.current.set(l,u),s.current?.postMessage({...c,id:l});for await(const d of K4(u))d&&(yield d);a.current.delete(l)},[r.promise]);return p.useImperativeHandle(t,()=>({evalAsync:o})),p.useEffect(()=>OM(window,{message:c=>{if(c.source!==n?.current?.contentWindow)return;const{data:l,ports:u}=c,{type:d}=l;if(s.current=u[0],d===V0.READY)r.resolve?.();else{const{id:f}=l,m=a.current.get(f);To(m).emit("message",l)}}}),[r]),i.jsx(xs,{children:i.jsx("iframe",{className:"fixed h-0 w-0","aria-hidden":"true",src:`${q4}?isStorybook=undefined`,sandbox:"allow-scripts allow-same-origin",ref:n,tabIndex:-1})})};p.forwardRef(X4);const vOe=()=>{const{value:e}=ot("3700195277");return e||!1},yOe=()=>{const{value:e}=ot("711369489");return e},Q4=()=>{const{value:e}=ot("467934241");return e||void 0},L_=p.createContext(null),xOe=()=>To(p.useContext(L_),"useSandbox must be called from within a SandboxRefContext provider"),Z4=({children:e,isEnabled:t})=>{Q4();const n=p.useRef(null);return i.jsxs(L_.Provider,{value:n,children:[e,!1]})};function G0(e){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n.message.author.role===le.Assistant&&n.message.recipient?.startsWith(RM.CANMORE))return n}}function W0(e){for(let t=e.length-1;t>=0;t--){const n=e[t].message.author;if(n.role===le.Tool&&n.name?.startsWith(Hh))return e[t]}}var ye=(e=>(e[e.Text=0]="Text",e[e.MultiText=1]="MultiText",e[e.Browsing=2]="Browsing",e[e.CodeInterpreter=3]="CodeInterpreter",e[e.JITPlugin=4]="JITPlugin",e[e.RetrievalBrowsing=5]="RetrievalBrowsing",e[e.ParallelBrowsing=6]="ParallelBrowsing",e[e.Dalle=7]="Dalle",e[e.Canmore=8]="Canmore",e[e.SonicCanvas=9]="SonicCanvas",e[e.GizmoEditor=10]="GizmoEditor",e[e.SearchResult=11]="SearchResult",e[e.Debug=12]="Debug",e[e.SearchGPTQuery=13]="SearchGPTQuery",e[e.a8km123=14]="a8km123",e[e.f959b8c=15]="f959b8c",e[e.b1de6e2=16]="b1de6e2",e[e.b1de6e2_c=17]="b1de6e2_c",e[e.de1d73e=18]="de1d73e",e[e.oiw209h=19]="oiw209h",e))(ye||{});const bOe=[2,5,13],J4={[Ge.Browsing]:{group:ye.Browsing},[Ge.BrowseTool]:{group:ye.Browsing},[Ge.SearchGPTQuery]:{group:ye.SearchGPTQuery},[Ge.RetrievalBrowsing]:{group:ye.RetrievalBrowsing},[Ge.RetrievalBrowsingTool]:{group:ye.RetrievalBrowsing},[Ge.ParallelBrowsing]:{group:ye.ParallelBrowsing},[Ge.ParallelBrowsingTool]:{group:ye.ParallelBrowsing},[Ge.JITPlugin]:{group:ye.JITPlugin,alwaysStartsNewGroup:!0},[Ge.JITPluginTool]:{group:ye.JITPlugin},[Ge.Dalle]:{group:ye.Dalle,alwaysStartsNewGroup:!0},[Ge.DalleTool]:{group:ye.Dalle},[Ge.oiw209h]:{group:ye.oiw209h,alwaysStartsNewGroup:!0},[Ge.oiw209h_c]:{group:ye.oiw209h},[Ge.CodeInterpreter]:{group:ye.CodeInterpreter,alwaysStartsNewGroup:!0},[Ge.a8km123]:{group:ye.a8km123},[Ge.f959b8c]:{group:ye.f959b8c},[Ge.b1de6e2]:{group:ye.b1de6e2},[Ge.b1de6e2_c]:{group:ye.b1de6e2_c},[Ge.de1d73e]:{group:ye.de1d73e},[Ge.CodeInterpreterTool]:{group:ye.CodeInterpreter},[Ge.GizmoEditor]:{group:ye.GizmoEditor},[Ge.SearchResultTool]:{group:ye.SearchResult},[Ge.ImagePreloadTool]:{group:ye.SearchResult},[Ge.CanmoreTool]:{group:ye.Canmore},[Ge.SonicCanvas]:{group:ye.SonicCanvas}};function $_(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],s=s3(r.message),a=e?.[n-1],o=J4[s],c=a!=null&&(DM(a.message)||a3(r.message)),l=s===Ge.Text&&Pr(r.message);if(LM(r.message))t.push({type:ye.Debug,message:r});else if(o!==void 0){const u=t.findLast(d=>d.type!==ye.Debug);u?.type===o.group&&"messages"in u&&!o.alwaysStartsNewGroup?u.messages.push(r):o.group!==ye.Text&&o.group!==ye.Debug&&t.push({type:o.group,messages:[r]})}else if(c&&l!=null){const u=t.pop();u?.type===ye.MultiText?(u.messages.push(r),t.push(u)):u?.type===ye.Text&&t.push({type:ye.MultiText,messages:[u.message,r]})}else t.push({type:ye.Text,message:r})}return t}const tg=e=>e.variantIds.length===2,eF=(e,t,n=!1)=>e.role===le.Root?!1:e.role===le.System||e.role===le.Developer||t.every(r=>r.message.metadata?.is_visually_hidden_from_conversation)?n:!0,Mw=(e,t)=>{for(const r of $_(t)){if(r.type!==ye.Canmore)continue;const s=G0(r.messages),o=W0(r.messages)?.message.metadata,c=o?.canvas;if(c?.resolve_pasted_textdoc_id){const{resolve_pasted_textdoc_id:u}=c;e=es(e,d=>{d.latestTextdocId=Object.values(u)[0],d.resolveTempTextdocId={...d.resolveTempTextdocId,...u}})}const l=o?.open_in_canvas_view?.id??c?.textdoc_id;if(l){e=es(e,u=>{u.latestTextdocId=l??null,s&&(u.lastCanvasAssistantMessageById[l]=s.message.id)});break}}const n=R_(!1,t);if(!n)return e;for(const r of n)e=es(e,s=>{if(r.function===Nt.CreateTextdoc){const{textdocId:a}=r;a&&(s.resolveTempTextdocId[R0(r)]=a)}else if(r.function===Nt.CommentTextdoc){const{comments:a=[]}=r;for(let o=0;o<a.length;o++){const{id:c}=a[o];if(c){const l=I_(r,o);s.resolveTempCommentId[c]=l}}}});return e},tF=(e,t,n)=>{if(!tg(n))return Mw(t,n.messages);const r=D.getTree(e),{variantIds:s}=n;for(const a of s){const o=r.getLeafFromNode(a).id,c=vs(D.getThreadConversationTurns(e,o));c&&(t=Mw(t,c.messages))}return t};function nF(){return new WeakMap}function F_(e,t,n,r){const s=n[r];let a=t.get(s);if(!a){const o=r===0?__():F_(e,t,n,r-1);a=tF(e,o,s),t.set(s,a)}return a}function rF(e,t,n){return n.length===0?null:F_(e,t,n,n.length-1)}function sF(e,t){const[n]=p.useState(nF);return p.useMemo(()=>rF(e,n,t),[n,e,t])}function B_(e,t){const n=[];let r=0,s=0;for(const a of t)n[s]=r,r+=a.length,s+=1;return n[s]=r,e.map(a=>{const{start:o,end:c}=a;return{start:n[o],end:n[c]}})}function aF(e,t){const n=[];let r=0,s=0;for(const a of t)n[r]=s,a.length===2?(n[r+1]=s,r+=2):r+=1,s+=1;return n[r]=s,e.map(a=>{const{start:o,end:c}=a;return{start:n[o],end:n[c]}})}function ng(e,t){const n=e.map(({content:a,id:o,start:c,end:l})=>({id:o,at:{start:c,end:l},content:a})),r=n.map(a=>a.at),s=B_(r,t);return n.map((a,o)=>({...a,at:s[o]}))}function wOe(e,t){const n=e.map(a=>a.at),r=aF(n,t);return e.map((a,o)=>({...a,at:r[o]})).map(({content:a,id:o,at:c})=>({id:o,start:c.start,end:c.end,content:a}))}const oF=(e,t)=>{const n=B_(t,e),r=[];for(let a=0;a<n.length;a++){const{start:o}=n[a];let c=0;const l=n.slice(0,a).entries();for(const[u,d]of l)if(o>d.start||o>d.end){const f=d.end-d.start,m=t[u].content.length;c+=m-f}r.push(c)}const s=[];for(let a=0;a<n.length;a++){const{content:o}=t[a],c=n[a],{start:l}=c,u=r[a],d={start:l+u,end:l+u+o.length};s.push({id:`edit-${a}`,content:o,positionBefore:c,positionAfter:d})}return s},iF=(e,t)=>ae.safeGet("/textdoc/{textdoc_id}/diff/{version}",{parameters:{path:{textdoc_id:e,version:t}}});function cF(e,t){const n=e.filter(r=>r.op_type==="edit");return oF(t,n)}const lF=async(e,t)=>{if(t===1)return null;const{content_before:n,content_after:r,comments_before:s,comments_after:a,operations:o}=await iF(e,t??-1);return{edits:cF(o,n),contentBefore:n,contentAfter:r,commentsBefore:ng(s,n),commentsAfter:ng(a,r)}},U_=(e,t)=>({queryKey:[e,t,"edit"],enabled:t!=null,gcTime:1e3*60*5,queryFn:()=>lF(e,t)});function SOe(e,t){const{data:n=null,isLoading:r}=me(U_(e,t));return{data:n,isLoading:r}}function V_(){const e=ke();return p.useCallback(async(t,n)=>{await e.prefetchQuery(U_(t,n))},[e])}const G_=Ie(()=>({optimisticRestore:null})),{setState:wu,getState:uF}=G_;function dF(e){wu(t=>{if(t.optimisticRestore){for(const{textdocId:n,versionInt:r}of e)if(t.optimisticRestore.textdocId===n&&t.optimisticRestore.versionInt!==-1&&(t.optimisticRestore.versionInt??Tr)<=(r??Tr))return{optimisticRestore:null}}return t})}function W_(){return G_(e=>e.optimisticRestore)}function COe(e,t,n){const r=ke(),{mutateAsync:s}=it({mutationKey:["canvas","textdoc","persist"],mutationFn:fF,retry:2,onSuccess:()=>{e&&r.invalidateQueries({queryKey:[e,"textdocs"]})}}),a=W_(),o=p.useCallback(async()=>{if(!t||!n||t.versionInt==null||n.versionInt==null||uF().optimisticRestore!=null)return;const{textdocId:c,versionInt:l}=t,u=n.versionInt,d={...n,versionInt:-1};wu(()=>({optimisticRestore:d})),S_(c);try{const f=await s({textdocId:c,versionInt:l,restoreFromVersionInt:u});wu(m=>({optimisticRestore:m.optimisticRestore&&{...m.optimisticRestore,versionInt:f}}))}catch{wu(()=>({optimisticRestore:null})),P6(c,{version:u})}},[t,n,s]);return{optimisticRestoredTextdocVersion:a,restoreHistoricalTextdocVersion:o}}async function fF({textdocId:e,versionInt:t,restoreFromVersionInt:n}){return(await ae.safePost("/textdoc/{textdoc_id}/restore",{parameters:{path:{textdoc_id:e}},requestBody:{version:t,restore_from_version:n}})).version}const mF=async({lastVersion:e,textdocId:t,commentId:n,reason:r})=>(await ae.safeDelete("/textdoc/{textdoc_id}/{version}/comment/{comment_id}",{parameters:{query:{reason:r},path:{textdoc_id:t,version:String(e),comment_id:n}}})).version,rg=Ie(()=>({persistingOp:null,ops:[]})),{setState:Su,getState:pF}=rg,hF=()=>{const e=rg(({ops:n})=>n),t=rg(({persistingOp:n})=>n);return p.useMemo(()=>[...e,t].filter(v_),[e,t])},gF=e=>{Su(t=>{let n=t.ops;for(const{textdocId:r,versionInt:s}of e)n=n.filter(a=>a.textdocId!==r||(a.versionInt??Tr)>(s??Tr));return{ops:n}})},TOe=e=>p.useCallback(async(t,n)=>{const r=!!pF().persistingOp,s=e?.versionInt,a=e?.textdocId;if(r||s==null||a==null)return!1;const o={kind:lt.REMOVE_COMMENT,textdocId:a,author:{role:le.User},versionInt:s,createdAt:Date.now()/1e3,commentId:t,reason:n};Su(({ops:c})=>({ops:c,isPersisting:!0,persistingOp:o}));try{const c=await mF({lastVersion:s,textdocId:a,commentId:t,reason:n});return Su(({ops:l})=>({ops:[...l,{...o,versionInt:c}],isPersisting:!1,persistingOp:null})),c}catch{return Su(({ops:c})=>({ops:c,isPersisting:!1,persistingOp:null})),!1}},[e]),vF=e=>ae.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),yF=async e=>{const t=await vF(e),n=new Map(t?.map(a=>[a.id,a])),r=[];for(const{id:a,content:o,version:c,textdoc_type:l,title:u,comments:d}of t)r.push({textdocId:a,messageId:null,type:$0(l),comments:ng(d,o),status:Tn.COMPLETE,title:u,content:o,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(r.map(a=>[a.textdocId,a])),persistedTextdocVersions:r,persistedTextdocById:n}};function xF(e){const t=ta(()=>D.getServerThreadId(e)),{data:n,error:r,isLoading:s,isFetching:a,refetch:o}=me({queryKey:[t,"textdocs"],enabled:!!t,gcTime:0,queryFn:()=>t&&yF(t)});return p.useEffect(()=>{if(!n)return;const{persistedTextdocVersions:c}=n;gF(c),V4(c),dF(c)},[n]),[{...n,error:r,isLoading:s,isFetching:a},o]}const sg=new Set,H_=e=>{p.useEffect(()=>(sg.add(e),()=>{sg.delete(e)}),[e])},Ew=e=>{for(const t of sg)try{t({error:e})}catch(n){ie.addError(n)}};var Hu=(e=>(e[e.INITIALIZING=0]="INITIALIZING",e[e.READY=1]="READY",e[e.REFETCHING=2]="REFETCHING",e))(Hu||{});function bF(e){const[{error:t,persistedTextdocVersionById:n=null,isLoading:r,isFetching:s},a]=xF(e),o=V_();H_(()=>{const l=D.getThreadCurrentLeafId(e),u=D.getThreadConversationTurns(e,l),f=vs(u)?.messages??[],m=W0(f);if(m==null)return;const h=m.message.metadata?.canvas?.textdoc_id,g=m.message.metadata?.canvas?.version;h!=null&&g!=null&&o(h,g),a()});let c=0;return n&&s?c=2:n&&!s&&!r&&(c=1),p.useMemo(()=>({status:c,fetchError:t,textdocVersionById:n,refetch:a}),[c,t,n,a])}const _w=e=>{if(!e)return;const{messages:t}=e,n=o3(t??[],({message:s})=>s.author.role===le.System),r=n===-1?t:t?.slice(n+1);if(r&&O4(r))return r},wF=({lastTurn:e,clientThreadId:t,isRequestActive:n,persistedTextdocStoreStatus:r})=>{const[s,a]=p.useState(!0),o=n||!s||r===Hu.REFETCHING,c=p.useMemo(()=>{if(!e||!tg(e))return null;const u=D.getTree(t),{variantIds:d}=e;return d.map(f=>{const m=u.getLeafFromNode(f).id;return vs(D.getThreadConversationTurns(t,m))})},[t,e]);return[p.useMemo(()=>!o||!e?null:tg(e)?c?.flatMap(_w).filter(v_)??null:_w(e)??null,[o,e,c]),a]};var SF=$M,CF=function(){return SF.Date.now()},TF=CF,kF=yc,Zm=TF,Aw=FM,MF="Expected a function",EF=Math.max,_F=Math.min;function AF(e,t,n){var r,s,a,o,c,l,u=0,d=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(MF);t=Aw(t)||0,kF(n)&&(d=!!n.leading,f="maxWait"in n,a=f?EF(Aw(n.maxWait)||0,t):a,m="trailing"in n?!!n.trailing:m);function h(M){var _=r,k=s;return r=s=void 0,u=M,o=e.apply(k,_),o}function g(M){return u=M,c=setTimeout(b,t),d?h(M):o}function v(M){var _=M-l,k=M-u,I=t-_;return f?_F(I,a-k):I}function y(M){var _=M-l,k=M-u;return l===void 0||_>=t||_<0||f&&k>=a}function b(){var M=Zm();if(y(M))return x(M);c=setTimeout(b,v(M))}function x(M){return c=void 0,m&&r?h(M):(r=s=void 0,o)}function w(){c!==void 0&&clearTimeout(c),u=0,r=l=s=c=void 0}function C(){return c===void 0?o:x(Zm())}function T(){var M=Zm(),_=y(M);if(r=arguments,s=this,l=M,_){if(c===void 0)return g(l);if(f)return clearTimeout(c),c=setTimeout(b,t),h(l)}return c===void 0&&(c=setTimeout(b,t)),o}return T.cancel=w,T.flush=C,T}var z_=AF;const q_=xe(z_);var PF=z_,jF=yc,IF="Expected a function";function NF(e,t,n){var r=!0,s=!0;if(typeof e!="function")throw new TypeError(IF);return jF(n)&&(r="leading"in n?!!n.leading:r,s="trailing"in n?!!n.trailing:s),PF(e,t,{leading:r,maxWait:t,trailing:s})}var OF=NF;const H0=xe(OF);function zu(e){return e.map(t=>typeof t=="string"?t:"").join("")}function RF(e){return e.map(t=>t.type==="text"?t.text:"").join(`
`)}function z0(e,t){const n=[];let r=0;for(let s=0;s<e.length;s++){const a=e[s];if(typeof a=="string")if(t!=null&&t<r+a.length){n.push({type:"text",text:a.slice(0,t-r)});break}else n.push({type:"text",text:a}),r+=a.length;else if(a.content_type===Hi.ImageAssetPointer){const o=s>0?n[s-1]:null;o?.type==="images"?o.imageAssets.push(a):n.push({type:"images",imageAssets:[a]})}else a.content_type===Hi.AudioTranscription&&n.push({type:"transcription",text:a.text})}return n}function DF({isUserTurn:e,parts:t}){if(!e)return z0(t);const n={text:[],images:[]};for(let s=0;s<t.length;s++){const a=t[s];typeof a=="string"?a.trim().length>0&&n.text.push({type:"text",text:a}):a.content_type===Hi.AudioTranscription?n.text.push({type:"transcription",text:a.text}):a.content_type===Hi.ImageAssetPointer&&n.images.push(a)}const r=[];return n.images.length>0&&r.unshift({type:"images",imageAssets:n.images}),r.push(...n.text.map(s=>({type:s.type,text:s.text}))),r}function Y_(e){const t=e&&new Date(e),n=t&&new Date(t);return n?`after ${n.getHours()%12||12}:${n.getMinutes()<10?"0":""}${n.getMinutes()} ${n.getHours()>=12?"PM":"AM"}`:"later"}class K_{constructor(t,n,r,s){this.targetLength=t,this.isActivelyStreaming=n,this.onUpdate=s,this.bufferedLength=r?0:this.targetLength,r&&!r.isComplete()&&(r.nextBuffer=this,this.prevBuffer=r)}sentLength=null;sentIsComplete=null;bufferedLength;requestUpdateRaf=null;prevBuffer;nextBuffer;setTargetLength(t,n){t<this.bufferedLength&&(this.bufferedLength=t),this.targetLength=t,this.isActivelyStreaming=n,this.shouldUpdate()&&this.updateBufferedState()}shouldUpdate(){return!this.prevBuffer&&(this.isBuffering()||this.sentIsComplete!==this.isComplete())}isBuffering(){return this.bufferedLength<this.targetLength}isComplete(){return!this.prevBuffer&&!this.isActivelyStreaming&&!this.isBuffering()}getTotalRemainingLength(){let t=this.targetLength,n=this.nextBuffer;for(;n;)t+=n.targetLength,n=n.nextBuffer;return t-this.bufferedLength}requestUpdate(){this.requestUpdateRaf||this.sentLength===this.bufferedLength&&this.sentIsComplete===this.isComplete()||(this.requestUpdateRaf=window.requestAnimationFrame(()=>{this.requestUpdateRaf=null;const t=this.isComplete();this.sentLength=this.bufferedLength,this.sentIsComplete=t,this.onUpdate(this.bufferedLength,t),t&&this.resolveDependency()}))}resolveDependency(){if(this.nextBuffer){const t=this.nextBuffer;this.nextBuffer=t.prevBuffer=void 0,t.shouldUpdate()&&t.updateBufferedState()}}destroy(){this.resolveDependency(),this.requestUpdateRaf&&(window.cancelAnimationFrame(this.requestUpdateRaf),this.requestUpdateRaf=null)}}class Ii extends K_{static MAX_BUFFERING_LAG_MS=500;static MIN_BUFFERING_CHAR_PER_MS=1/30;frameRequestId;prevAddFrameTime;updateBufferedState(){if(!this.frameRequestId){const t=this.getTotalRemainingLength(),n=Math.max(Ii.MIN_BUFFERING_CHAR_PER_MS,t/Ii.MAX_BUFFERING_LAG_MS);this.frameRequestId=window.requestAnimationFrame(r=>{this.frameRequestId=void 0;const s=this.prevAddFrameTime===void 0?2/Ii.MIN_BUFFERING_CHAR_PER_MS:r-this.prevAddFrameTime,a=Math.floor(n*s);a>0&&(this.prevAddFrameTime=r,this.bufferedLength=Math.min(this.bufferedLength+a,this.targetLength)),this.requestUpdate(),this.shouldUpdate()&&this.updateBufferedState()})}}destroy(){super.destroy(),this.frameRequestId&&window.cancelAnimationFrame(this.frameRequestId)}}class X_ extends K_{constructor(t,n,r,s){super(zu(t).length,r,s,(a,o)=>n(z0(this.textMessageParts,a),o)),this.textMessageParts=t}onMessagePartsUpdated(t,n){this.textMessageParts=t,this.setTargetLength(zu(t).length,n)}}class ts extends X_{constructor(t,n,r,s){super(t,n,r,s),this.updateReactComponentDisplay=n}static MIN_CHARS_BEHIND_TO_CATCHUP=20;static CATCHUP_TIME_MS=300;static UPDATE_FREQUENCY_MS=30;displayNextChunkTimeout;updateBufferedState(){const t=this.getTotalRemainingLength(),n=t<ts.MIN_CHARS_BEHIND_TO_CATCHUP?this.targetLength-this.bufferedLength:Math.ceil(t*ts.UPDATE_FREQUENCY_MS/ts.CATCHUP_TIME_MS);this.bufferedLength=Math.min(this.bufferedLength+n,this.targetLength),this.requestUpdate(),this.displayNextChunkTimeout||(this.displayNextChunkTimeout=window.setTimeout(()=>{this.displayNextChunkTimeout=void 0,this.shouldUpdate()&&this.updateBufferedState()},ts.UPDATE_FREQUENCY_MS))}destroy(){super.destroy(),window.clearTimeout(this.displayNextChunkTimeout)}}const Pl=15,Jm=8;class LF extends X_{constructor(t,n,r,s,a){super(t,n,r,s),this.updateReactComponentDisplay=n,this.concatenatedText=zu(this.textMessageParts),this.debug=a?.debug??!1,this.streamStartMs=0,this.averageMsPerChar=0,this.debug&&console.debug(["PunctuationBuffer:",`[lagFactors: ${JSON.stringify(this.LAG_FACTORS,null,2)}]`].join(`
`))}LAG_FACTORS={".":Pl,"!":Pl,"?":Pl,"\n":Pl,",":Jm,":":Jm,";":Jm,DEFAULT_LAG_FACTOR:.9,BUFFER_FACTOR:.08,...typeof window<"u"&&window.__PUNCTUATION_BUFFER_LAG_FACTORS};concatenatedText;displayNextCharTimeout;debug;streamStartMs;averageMsPerChar;displayNextChar(){this.displayNextCharTimeout=void 0,this.shouldUpdate()&&(this.bufferedLength++,this.requestUpdate(),this.displayNextCharTimeout=window.setTimeout(()=>this.displayNextChar(),this._getNextCharDelayMs()))}updateBufferedState(){this.concatenatedText=zu(this.textMessageParts),this.streamStartMs===0?this.streamStartMs=Date.now():this.averageMsPerChar=(Date.now()-this.streamStartMs)/this.targetLength,this.displayNextCharTimeout||this.displayNextChar()}destroy(){super.destroy(),window.clearTimeout(this.displayNextCharTimeout)}_getNextCharDelayMs(){const t=this.concatenatedText[this.bufferedLength-1],n=this.getTotalRemainingLength(),r=1/Math.max(n*this.LAG_FACTORS.BUFFER_FACTOR,1),s=(this.LAG_FACTORS[t]??this.LAG_FACTORS.DEFAULT_LAG_FACTOR)*r,a=this.averageMsPerChar*s;return this.debug&&this._throttledDebugLog(["PunctuationBuffer:",`[lagMs: ${a}]`,`[lastChar: "${t}"]`,`[averageMsPerChar: ${this.averageMsPerChar}]`,`[lagFactor: ${s}]`,`[bufferLagFactor: ${r}]`,`[remainingLength: ${n}]`,"==="].join(`
`)),a}_throttledDebugLog=H0(t=>{console.debug(t)},500,{leading:!0,trailing:!0})}function $F(e){return e.type==="text"}class Pw{buffer;text;constructor(t,n,r="",s,a){this.buffer=new t([r],(o,c)=>{const l=o.filter($F).map(u=>u.text).join("");n(l,c)},s,a),this.text=r}setText(t,n=!0){this.text=t,this.buffer.onMessagePartsUpdated([this.text],n)}isBuffering(){return this.buffer.isBuffering()}isComplete(){return this.buffer.isComplete()}destroy(){return this.buffer.destroy()}}function FF(e,t,n,r){for(var s=-1,a=e==null?0:e.length;++s<a;){var o=e[s];t(r,o,n(o),e)}return r}var BF=FF,UF=Xv;function VF(e,t){return function(n,r){if(n==null)return n;if(!UF(n))return e(n,r);for(var s=n.length,a=t?s:-1,o=Object(n);(t?a--:++a<s)&&r(o[a],a,o)!==!1;);return n}}var GF=VF,WF=I0,HF=GF,zF=HF(WF),Q_=zF,qF=Q_;function YF(e,t,n,r){return qF(e,function(s,a,o){t(r,s,n(s),o)}),r}var KF=YF,XF=BF,QF=KF,ZF=Yd,JF=Kd;function e7(e,t){return function(n,r){var s=JF(n)?XF:QF,a=t?t():{};return s(n,e,ZF(r),a)}}var Z_=e7,t7=Qv,n7=Z_,r7=Object.prototype,s7=r7.hasOwnProperty,a7=n7(function(e,t,n){s7.call(e,n)?e[n].push(t):t7(e,n,[t])}),o7=a7;const q0=xe(o7);function i7(e,t,n){const[r,s]=p.useState(null),a=t?.length??0,o=a>0,c=p.useRef(new Map);return p.useEffect(()=>{if(t)for(const l of t){const{messageId:u}=l;if(u==null||c.current.has(u))continue;const d=new c7((f,m)=>{if(s(h=>({...h,[u]:f})),!!m){for(const[h,g]of c.current.entries())if(h!==u&&!g.isComplete())return;n(!0)}});c.current.set(u,d)}},[a]),p.useEffect(()=>{const l=c.current;return()=>{for(const u of l.values())u.destroy()}},[o]),p.useEffect(()=>{if(!o)return s(null);const l=q0(t,"messageId");for(const[u,d]of Object.entries(l)){const f=c.current.get(u);f&&f.setTextdocOps(d,!e)}},[o,e,t]),p.useMemo(()=>!o||!r?null:Object.values(r).flatMap(l=>l??[]),[o,r])}class c7{constructor(t){this.onUpdate=t}bufferedOps=[];isFinishedStreaming=!1;rangeBuffers=[];textBuffers=[];completeCounters=[];lastBuffer;destroy(){for(const t of this.rangeBuffers)t?.destroy();for(const t of this.textBuffers)t?.destroy();this.isFinishedStreaming=!0,this.rangeBuffers=[],this.textBuffers=[],this.completeCounters=[],this.lastBuffer=void 0}isBuffering(){return!((this.lastBuffer?.isComplete()??!0)&&(vs(this.completeCounters)?.isComplete()??!0))}getNonEmptyBufferedOpsOrNull(){return this.bufferedOps&&this.bufferedOps.length>0?this.bufferedOps:null}isComplete(){return this.isFinishedStreaming&&!this.isBuffering()}setTextdocOps(t,n){if(this.isFinishedStreaming=n,t)for(let r=0;r<t.length;r++){const s=t[r];if(s.author.role===le.Assistant)switch(s.kind){case lt.CREATE:case lt.REWRITE:this.setAllContentOpAtIndex(s,r);break;case lt.EDIT:case lt.ADD_COMMENT:this.setRangeAndContentOpAtIndex(s,r);break;default:this.setUnbufferedOpAtIndex(s,r)}else this.setUnbufferedOpAtIndex(s,r)}n&&(t?this.isBuffering()||this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),!0):(this.destroy(),this.update(()=>null)))}update(t){const n=this.bufferedOps;this.bufferedOps=Kv(n,t),this.bufferedOps!==n&&this.onUpdate(this.getNonEmptyBufferedOpsOrNull(),this.isComplete())}getBufferedAllContentOp(t,n,r){let s=t[r];return s||(s={...n,content:""},t[r]=s),s}setAllContentOpAtIndex(t,n){const{content:r,isPartial:s=!1}=t;let a=this.textBuffers[n];a?(a.setText(r,s),t.kind===lt.CREATE&&this.update(o=>{const c=this.getBufferedAllContentOp(o,t,n);c.textdocId=t.textdocId})):(a=new Pw(ts,(o,c)=>{this.update(l=>{const u=this.getBufferedAllContentOp(l,t,n);u.content=o,u.isPartial=!c})},r,s,this.lastBuffer),this.textBuffers[n]=a,this.lastBuffer=a.buffer)}getBufferedRangeAndContentOp(t,n,r){let s=t[r];return s||(s={...n,at:{start:n.at.start,end:n.at.start},content:"",isPartial:!0,isPartialRange:!0},t[r]=s),s}setRangeAndContentOpAtIndex(t,n){const{at:r,content:s,isPartialRange:a=!1,isPartial:o=!1}=t;let c=this.completeCounters[n];c||(c=new l7(()=>{this.update(d=>{const f=this.getBufferedRangeAndContentOp(d,t,n);f.isPartial=!1})}),this.completeCounters[n]=c),c.update("original",!o);let l=this.rangeBuffers[n];l?(this.update(d=>{const f=this.getBufferedRangeAndContentOp(d,t,n);if(f.at.start!==r.start){const m=f.at.end-f.at.start;f.at={start:r.start,end:r.start+m}}}),l.setTargetLength(r.end-r.start,a)):(l=new Ii(0,a,this.lastBuffer,(d,f)=>{this.update(m=>{const h=this.getBufferedRangeAndContentOp(m,t,n);h.at.end=h.at.start+d,h.isPartialRange=!f}),c.update("range",f)}),this.rangeBuffers[n]=l,this.lastBuffer=l,c.update("range",!1));let u=this.textBuffers[n];u?u.setText(s??"",o):(u=new Pw(ts,(d,f)=>{this.update(m=>{const h=this.getBufferedRangeAndContentOp(m,t,n);h.content=d}),c.update("content",f)},s,o,this.lastBuffer),this.textBuffers[n]=u,this.lastBuffer=u.buffer,c.update("content",!1))}setUnbufferedOpAtIndex(t,n){this.update(r=>{r[n]=t})}}class l7{keyStates=new Set;onComplete;constructor(t){this.onComplete=t}isComplete(){return this.onComplete==null}update(t,n){if(!n)this.keyStates.add(t);else if(this.keyStates.delete(t),this.keyStates.size===0&&this.onComplete){const r=this.onComplete;this.onComplete=null,r()}}}const kOe=4e4,u7="max-length-toast",J_=q_((e,t,n,r=1.5)=>e.warning(t,{description:n,duration:r,id:u7}),500,{leading:!0,trailing:!1});function MOe(e,t,n){J_(e,t.formatMessage(qu.exceededMaxLengthTitle),t.formatMessage(qu.exceededMaxLengthDescription),n)}function d7(e,t,n){J_(e,t.formatMessage(qu.exceededMaxLengthTitle),t.formatMessage(qu.exceededMaxLengthForTruncatedMessageDescription),n)}const qu=z({exceededMaxLengthDescription:{id:"FQSdxE",defaultMessage:"The document is longer than a canvas can currently handle. To edit, please reduce the length."},exceededMaxLengthForTruncatedMessageDescription:{id:"q/2M6n",defaultMessage:"The document was truncated because it was too long."},exceededMaxLengthTitle:{id:"NFtrBL",defaultMessage:"Document exceeds max length"}});function f7(e){const t=L(),n=Ne();H_(()=>{const r=D.getThreadCurrentLeafId(e),s=D.getThreadConversationTurns(e,r),a=vs(s);if(a==null)return;const o=G0(a.messages);o==null||o.message.metadata?.finish_details?.type!=="max_tokens"||d7(n,t,4)})}const EOe="g-YyyyMT9XH",m7="g-2fkFE8rbu";var p7=(e=>(e[e.USER=1]="USER",e[e.GROUP=2]="GROUP",e[e.WORKSPACE=3]="WORKSPACE",e[e.ALL=4]="ALL",e[e.PROJECT=5]="PROJECT",e[e.ORGANIZATION=6]="ORGANIZATION",e[e.SYSTEM=7]="SYSTEM",e[e.AGENT=8]="AGENT",e))(p7||{});const eA={can_read:!0,can_view_config:!1,can_write:!1,can_delete:!1,can_export:!1,can_share:!1},_Oe={can_read:!0,can_view_config:!0,can_write:!1,can_delete:!1,can_export:!1,can_share:!1},Vt={Private:"private",User:"user",Group:"group",WorkspaceLink:"workspace_link",Workspace:"workspace",Link:"link",Marketplace:"marketplace"};var Oc=(e=>(e.FirstParty="first_party",e.UsesFunctionCalls="uses_function_calls",e.Reportable="reportable",e.Private="private",e.Workspace="workspace",e.Public="public",e.Beta="beta",e.Pinned="pinned",e.WorkspaceDisabled="workspace_disabled",e.Unreviewable="unreviewable",e))(Oc||{});const AOe=e=>e.gizmo.tags?.includes("first_party"),POe=e=>!e.gizmo.tags?.includes("unreviewable");var Y0=(e=>(e.FILE_SERVICE="fs",e))(Y0||{});function jOe(e){return e.type===1||e.type===2}const jw=[1,2,3,4];function IOe(e){return e.length===0?null:e.reduce((t,n)=>jw.indexOf(n.type)<jw.indexOf(t.type)?t:n,e[0])}function NOe(e,t,n){return t=t.filter(r=>r.type===Vt.User||r.type===Vt.Group),e===Vt.Private||e===Vt.User||e===Vt.Group?[{type:Vt.Private,capabilities:eA},...t]:[...t,{type:e,capabilities:n}]}class tA{constructor(t){this.response=t}}var h7=(e=>(e.ENGLISH="en",e.GLOBAL="global",e))(h7||{}),Ya=(e=>(e.FirstParty="first_party",e.SidebarKeep="sidebar_keep",e.Mine="mine",e.Recent="recent",e.Workspace="workspace",e))(Ya||{});function Ef(e){return e.slice(0,4)==="g-p-"}function OOe(e){return Ef(e.gizmo.id)}const _f="client-correlated-secret";function Iw(){const e=localStorage.getItem(_f);return e==null?e:crypto.subtle.importKey("jwk",JSON.parse(e),{name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"])}async function nA(){Iw()==null&&localStorage.setItem(_f,JSON.stringify(await crypto.subtle.exportKey("jwk",await crypto.subtle.generateKey({name:"HMAC",hash:{name:"SHA-512"}},!0,["sign","verify"]))));const t=Iw();if(t==null)throw new Error("Failed to get key from storage");return t}function g7(e){const t=new Uint8Array(e.length/2);for(let n=0;n<t.length;n++)t[n]=parseInt(e.substr(n*2,2),16);return t.buffer}function v7(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}function y7(e){const t=new URL(e),n=me({queryKey:[_f,"generate-challenge",e.search],queryFn:async()=>v7(await crypto.subtle.sign("HMAC",await nA(),new TextEncoder().encode(e.search))),staleTime:0});if(n.data!==void 0)return t.hash=n.data,t}function x7(){const e=location?.search,t=location?.hash;return me({queryKey:[_f,"verify-challenge",e,t],queryFn:async()=>typeof e!="string"||typeof t!="string"?!1:crypto.subtle.verify("HMAC",await nA(),g7(t.slice(1)),new TextEncoder().encode(e))}).data?new URLSearchParams(e):void 0}function b7(e){return e===void 0}var w7=b7;const S7=xe(w7);class Yu{turn_id;trigger;result;time_since_prompt_sent_ms;stream_update_event_count=0;first_token_lat;last_model_message_received;time_since_last_event_ms;model_slug;tools_used;gizmo_id;promptSentTimestamp;logger;request_id;completed=!1;num_images_attached=0;num_files_attached=0;bytes_received=0;model_message_update_count=0;stream_encoding;stream_buffering=!1;constructor(){this.turn_id=Dr(),this.promptSentTimestamp=Date.now(),this.tools_used=new Set,this.logger=i3.createLogger("turn-analytics","info","http")}onCompletionStarted(t,n){switch(t){case"next":this.trigger="submit";break;case"variant":this.trigger="reroll";break;case"continue":this.trigger="continue";break}this.model_slug=n}onBytesReceived(t){this.bytes_received+=t?.length??0}updateAttachmentCount(t){t.forEach(n=>{n.author.role==="user"&&n.metadata?.attachments?.forEach(r=>{r.height&&r.width?this.num_images_attached+=1:this.num_files_attached+=1})})}onReceivedRequestId(t){this.request_id=t}onMessageUpdate(t,n,r,s){this.model_slug=this.model_slug??t,this.gizmo_id=this.gizmo_id??n,s===le.Tool&&r&&this.tools_used.add(r),s!==le.User&&s!==le.System&&s!==le.Developer&&s!==le.Root&&(this.model_message_update_count+=1,this.last_model_message_received=Date.now()),this.first_token_lat||(this.first_token_lat=Date.now()-this.promptSentTimestamp)}onUpdateEventCount(){this.stream_update_event_count+=1}handleRawError(t,n){let r;n===400||t==="NetworkError when attempting to fetch resource."||t==="The network connection was lost."?r="network_error":t==="Request timed out"?r="timeout":r="request_failed",this.logCompletion({type:Zr.Error,error:{reason:r,message:t,...n&&{status_code:n}}})}createLogPayload(){const t={turn_id:this.turn_id,trigger:this.trigger,result:To(this.result?.type),...this.result?.type===Zr.Error?{error:this.result.error}:void 0,time_since_prompt_sent_ms:this.time_since_prompt_sent_ms,stream_update_event_count:this.stream_update_event_count,model_message_update_count:this.model_message_update_count,time_since_last_event_ms:this.time_since_last_event_ms,first_token_lat:this.first_token_lat,bytes_received:this.bytes_received,stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,tools_used:[...this.tools_used],gizmo_id:this.gizmo_id,attachments:{files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached}};return{request_id:this.request_id,turn_analytics:t}}createStatsigPayload(){return c3({turn_id:String(this.turn_id),trigger:this.trigger,result:this.result?.type,error:JSON.stringify(this.result?.type===Zr.Error?{error:this.result.error}:void 0),time_since_prompt_sent_ms:String(this.time_since_prompt_sent_ms),stream_update_event_count:String(this.stream_update_event_count),model_message_update_count:String(this.model_message_update_count),time_since_last_event_ms:JSON.stringify(this.time_since_last_event_ms),first_token_lat:String(this.first_token_lat),bytes_received:String(this.bytes_received),stream_encoding:this.stream_encoding,stream_buffering:this.stream_buffering,model_slug:this.model_slug,tools_used:[...this.tools_used].join(", "),gizmo_id:this.gizmo_id,attachments:JSON.stringify({files:this.num_files_attached,images:this.num_images_attached,total:this.num_files_attached+this.num_images_attached})},S7)}logCompletion(t){this.completed||(this.completed=!0,this.time_since_prompt_sent_ms=Date.now()-this.promptSentTimestamp,this.result=t,this.last_model_message_received&&(this.time_since_last_event_ms=Date.now()-this.last_model_message_received),t.type===Zr.Error?this.logger.error("Turn exchange complete",this.createLogPayload()):this.logger.info("Turn exchange complete",this.createLogPayload()),q.logEvent("chatgpt_conversation_turn_turn_exchange_complete",null,this.createStatsigPayload()))}}function C7(e){return me({queryKey:["system-hints"],queryFn:async()=>(await K.getSystemHints()).system_hints.map(({name:n,description:r,logo:s,system_hint:a,required_features:o=[],required_models:c=[]})=>({name:n,description:r,logo:s,systemHint:a,requiredFeatures:o,requiredModels:c})),select:e,staleTime:1/0})}function K0({clientThreadId:e}){const t=D.getThreadCurrentLeafId(e),r=D.getTree(e).getMessage(t).metadata?.model_switcher_deny??[],s={};r.forEach(o=>{const{slug:c,context:l,reason:u,description:d}=o,f=s[c]??{},m=f[l]??[];m.push({reason:u,description:d}),f[l]=m,s[c]=f});const a=BM();for(const{resets_after:o,model_slug:c}of a)[ew.CONVERSATION,ew.REGENERATE].forEach(l=>{const u=s[c]??{},d=u[l]??[],f={reason:Xd.RATE_LIMIT,resetsAfter:o};d.push(f),u[l]=d,s[c]=u});return s}const ROe="text-davinci-002-render-sha",DOe="gpt-4",LOe="gpt-4o",Ku=UM({slug:Zv,max_tokens:4097,title:"Default",description:"",tags:[Ys.GPT_3_5],product_features:{}}),T7=({default_model:e,tagline:t,color:n,human_category_name:r,category:s,human_category_short_name:a,human_category_shorter_name:o,subscription_level:c,short_explainer:l,subcategory:u,is_beta:d,...f})=>({color:n,tagline:t,defaultModel:e,label:r,shortLabel:a,description:l,shorterLabel:o??a,subscriptionLevel:c,categoryId:s,subcategory:u,isBeta:d,...f}),k7=({icon:e,icon_filled_src:t,icon_outline_src:n})=>({iconName:e,iconFilledSrc:t,iconOutlineSrc:n}),M7=({group:e,human_group_name:t,human_group_short_name:n,model_ids:r})=>({group:e,label:t,shortLabel:n,modelIds:r});function E7(){return ma({retry:5,queryKey:["modelIcons"],queryFn:async()=>await K.getModelIcons().then(e=>Object.fromEntries(Object.entries(e).map(([t,n])=>[t,k7(n)])))})}function _7(e){return ma({retry:5,queryKey:["models",{isHistoryDisabled:e}],queryFn:async()=>await K.getModels(e).then(t=>{const{models:n,internal_groups:r,categories:s,default_model_slug:a}=t,o=n.map(UM);return{categories:s.concat().reverse().map(T7),groups:r?.map(M7)??[],defaultModelSlug:a??null,modelsList:o,modelsMap:Object.fromEntries(o.map(c=>[c.id,c]))}})})}function ws(){const e=VM();return me(_7(e))}function A7(){return me(E7())}function Rc({isRegen:e=!1}={}){const{isLoading:t,data:{categories:n=[],groups:r=[]}={}}=ws(),s=p.useMemo(()=>e?n.filter(a=>a.is_regenerate_category!==!1):n.filter(a=>!a.is_regenerate_category),[n,e]);return{isLoading:t,categories:s,groups:r??[]}}function $Oe(){const{categories:e}=Rc();return!!e.find(({categoryId:t})=>t===vu.GPT4o)}function rA(){const{data:e}=ws();return p.useMemo(()=>e?new Set(Object.keys(e.modelsMap)):new Set([Zv]),[e])}const P7={[Zv]:Ku};function sA(){const{data:e}=ws();return e?.modelsMap??P7}function aA(e,t,n){if(e?.defaultModelSlug&&e?.modelsMap[e.defaultModelSlug])return e.modelsMap[e.defaultModelSlug];let r=Ys.GPT_3_5;return n?r=Ys.GPT_4:t&&(r=Ys.GPT_4o),e?.modelsList.find(s=>s.tags.includes(r))??e?.modelsList[0]??Ku}function Dc(e=!1){const t=ko(),n=ze(),[,r]=pa();return p.useCallback(({location:s,modelId:a})=>{const o=t.pathname.includes("/g/");e||o?(E.logNewChatButtonClicked({location:s}),n({pathname:"/",search:`?model=${encodeURIComponent(a)}`})):(r(c=>(c.set("model",a),c)),E.logNewChatButtonClicked({location:s}))},[e,t,n,r])}function j7(){const{data:{categories:e=[]}={}}=ws(),{doesUserHaveAnyAccountsWithPlusFeatures:t}=fa();return t?null:e.find(Jv)?.defaultModel??null}function oA(e){return l3(e)}function No(e){const t=oA(e),n=sA();return p.useMemo(()=>t==null?Ku:n[t]??Ku,[t,n])}function iA(e,t){return No(e).enabledTools?.includes(t)??!1}function FOe(e){const t=C7(),n=No(e),r=p.useMemo(()=>!t.isSuccess||!t.data?[]:t.data,[t.data,t.isSuccess]),s=K0({clientThreadId:e});return p.useMemo(()=>{const o=new Set(n.enabledTools||[]);return r.filter(c=>!(!(c.requiredFeatures.length===0||c.requiredFeatures.every(d=>o.has(d)))||!(c.requiredModels.length===0||c.requiredModels.some(d=>!s[d]))))},[r,n,s])}function cA(){const{data:e}=ws(),{doesUserHaveAnyAccountsWithPlusFeatures:t}=fa(),n=Ce();return aA(e,!!t,!!n?.isEnterprisey())}var Ct=(e=>(e.Search="search",e))(Ct||{});class I7{constructor(){}eraseContent(){this.setText("")}getContentToSend(){return{content:this.getCurrentText()}}registerKeyHandlers(t){}canShowAutocompletion(){return!0}logPageMount(){ie.addFirstTiming("chatgpt.web.chatPage.prompttextarea.modern.mounted")}useState(t){return p.useSyncExternalStore(n=>this.subscribe("input",n),()=>t(this),()=>t(this))}}const lA="hints";class sa extends GM()(t=>({persistedSystemHints:new Set(t),persistedSystemHintTriggers:{}})){static getPersistedSystemHints=({persistedSystemHints:t})=>t;addPersistedSystemHint=(t,n,r)=>{t===Ct.Search&&E.logEventWithStatsig(P.searchModeEngaged,"search_mode_engaged",{...Bu(n),triggerSource:r}),this.setState(({persistedSystemHints:s,persistedSystemHintTriggers:a})=>({persistedSystemHints:new Set(s).add(t),persistedSystemHintTriggers:{...a,[t]:r}}))};removePersistedSystemHint=(t,n)=>{t===Ct.Search&&E.logEventWithStatsig(P.searchModeDisabled,"search_mode_disabled",Bu(n)),this.setState(({persistedSystemHints:r,persistedSystemHintTriggers:s})=>{const a=new Set(r);a.delete(t);const o={...s};return delete o[t],{persistedSystemHints:a,persistedSystemHintTriggers:o}})};getPersistedSystemHintTrigger=t=>{if(this.getState().persistedSystemHints.has(t))return this.getState().persistedSystemHintTriggers[t]};clearPersistedSystemHintTrigger=t=>{this.setState(({persistedSystemHints:n,persistedSystemHintTriggers:r})=>{const s={...r};return delete s[t],{persistedSystemHints:new Set(n),persistedSystemHintTriggers:s}})}}const N7=()=>sa.useState(sa.getPersistedSystemHints);function BOe({children:e,clientThreadId:t,currentLeafId:n}){const[r]=pa(),s=r.get(lA)===Ct.Search,a=iA(t,WM.Search),c=(D.getLastMessgageSystemHints(t,n).includes(Ct.Search)||s)&&a,[l]=p.useState(()=>new sa(c?[Ct.Search]:[]));return p.useEffect(()=>{const u=l.getState().persistedSystemHints;c&&!u.has(Ct.Search)&&l?.addPersistedSystemHint(Ct.Search,{clientThreadId:t,turnIndex:0})},[c,l,t]),i.jsx(sa.Provider,{store:l,children:e})}function O7(e){const t=new Set;if(e){const n=e.split(",");Array.isArray(n)&&n.forEach(r=>{Object.values(Ct).includes(r)&&t.add(r)})}return t}const Cu="q",ep="m";function UOe(e){const{clientThreadId:t,currentLeafId:n,handleRequestCompletion:r}=e,s=p.useRef(!1),{isLoading:a,data:o}=ws(),{doesUserHaveAnyAccountsWithPlusFeatures:c,isLoading:l}=fa(),u=Ce(),[d,f]=pa(),m=Ne(),h=p.useCallback((C,T,M,_)=>{D.updateTree(t,k=>{k.addNode(C,M,T,le.User,void 0,_)})},[t]),g=p.useCallback(async(C,{content:T,attachments:M},_,k,I,j)=>{const F=n,U=M.length>0?{attachments:M}:{};U.system_hints=k.systemHints,h(C,F,T,U),r({type:os.Next,promptId:C,requestedModelId:j,eventMetadata:_,cancelActiveRequests:!0,completionMetadata:k,turnTracker:I})},[h,r,n]),v=HM(()=>window.location.pathname)??null,y=x7();let b=!a&&!l&&v!=null;const[x,w]=p.useState(!0);return p.useEffect(()=>{if(!x||s.current)return;const C=Un.getConversationMode(t);if(!b||C==null)return;if(!D7(v)||R7(v)&&y===void 0||D.getServerThreadId(t)!=null){w(!1);return}const T=(()=>{try{return Object.fromEntries(new URLSearchParams(location.hash.slice(1)).entries())}catch{return{}}})(),M={...Object.fromEntries(d),...T},{[Cu]:_,[ep]:k,[lA]:I}=M,j=(typeof _=="string"?_:null)??(typeof k=="string"?k:null);if(!j||!j.trim()){w(!1);return}const F=O7(I),U=Dr();s.current=!0;let B=o?.modelsList;F.has(Ct.Search)&&(B=B?.filter(Y=>Y.enabledTools?.includes(Ct.Search)));const N=o&&aA({...o,modelsList:B??[]},!!c,!!u?.isEnterprisey());if(N==null){m.warning("No model available for this request"),w(!1);return}const $=new Yu,H=I?.includes(Ct.Search);(e.prefetchSearchPromise??Promise.resolve(null)).then(Y=>{f(O=>{const R=new URLSearchParams(O);return R.delete(Cu),R.delete(ep),R}),g(U,{content:j,attachments:[]},{eventSource:"url"},{conversationMode:C,source:"instant-query",systemHints:I?Array.from(F):void 0,prefetchIds:Y!=null?[Y]:void 0,searchSource:H?zh.URL_SEARCH_HINT:void 0},$,N?.id),w(!1)})},[a,l,b,v,o,c,u,g,x,t,y,m,e.prefetchSearchPromise,d,f]),x&&(e.prefetchSearchPromise!=null||d.has(Cu)||d.has(ep)?!0:(w(!1),!1))}function R7(e){return uA(e)}function uA(e){return e==null?!1:/^\/g\/[\w-]+$/.test(e)}function D7(e){return e==null?!1:e==="/"||uA(e)}class tt{static getMyGizmos(){return ae.get(`${ge}/gizmos?mine=true`)}static getGizmosByUser(t){return ae.get(`${ge}/gizmos/u/${t}`)}static getGizmo(t,n){const r=n?"?draft=true":"";return ae.get(`${ge}/gizmos/${t}${r}`)}static shareGizmo(t,n){return ae.post(`${ge}/gizmos/${t}/share`,n)}static getGizmoDiscovery(t,n){const r=new URLSearchParams;return t!=null&&r.set("locale",t),ae.get(n?`${zm}/gizmos/discovery_anon?${r}`:`${zm}/gizmos/discovery?${r}`,{authOption:tw.SendIfAvailable})}static async getGizmoDiscoveryCut(t,n){const r=a=>{const o={};a!=null&&(o.cursor=a),n?.limit!=null&&(o.limit=`${n.limit}`),n?.locale!=null&&(o.locale=n.locale);const c=`${zm}/gizmos/discovery/${t}`;return ae.get(c,{params:o,authOption:tw.SendIfAvailable})},s=await r(n?.cursor);return s.list.items.length===0&&s.list.cursor!=null?(await new Promise(a=>setTimeout(a,Math.random()*30)),r(s.list.cursor)):s}static getGizmoBootstrap(){return ae.get(`${ge}/gizmos/bootstrap?limit=2`)}static getGizmoPinned(){return ae.get(`${ge}/gizmos/pinned`)}static getGizmoSearch(t,n=null){return n?ae.get(`${ge}/gizmos/search?q=${t}&cursor=${n} `):ae.get(`${ge}/gizmos/search?q=${t}`)}static getGizmoSearchForWorkspace(t,n=null){return n?ae.get(`${ge}/gizmos/search?q=${t}&workspace_only=true&cursor=${n}`):ae.get(`${ge}/gizmos/search?q=${t}&workspace_only=true`)}static async postGizmoAppeal(t,n,r,s,a){await ae.post(`${ge}/gizmos/${n}/appeal`,{reason:r,share_recipient:s,categories:a}),await t.invalidateQueries({queryKey:["gizmo",{gizmoId:n}]})}static async postGizmoCancelAppeal(t,n){await ae.post(`${ge}/gizmos/${n}/cancel_appeal`,{}),await t.invalidateQueries({queryKey:["gizmo",{gizmoId:n}]})}static upsertDraft(t,n){return n!==void 0?ae.post(`${ge}/gizmos?gizmo_id=${n}`,t):ae.post(`${ge}/gizmos`,t)}static promoteDraft(t,n){return ae.post(`${ge}/gizmos/${n}/promote`,t)}static deleteGizmo(t){return ae.delete(`${ge}/gizmos/${t}`)}static getBuilderProfile(){return ae.get(`${ge}/gizmo_creator_profile`)}static updateBuilderProfile(t){return ae.post(`${ge}/gizmo_creator_profile`,t)}static unverifySocialAuth(t){return ae.delete(`${ge}/gizmo_creator_profile/socials/${t}`)}static async updateGizmoSidebar(t,n,r,s){const a=await ae.post(`${ge}/gizmos/${r}/sidebar`,{action:s});switch(s){case"keep":n.handleGizmoSidebarKeep(t,r);break;case"hide":n.handleGizmoSidebarHide(t,r);break}return a}static async removeFromRecent(t,n){const r=await ae.post(`${ge}/gizmos/${n}/remove_recent`,{});return t.invalidateQueries({queryKey:["gizmos","bootstrap"]}),t.invalidateQueries({queryKey:["gizmos","discovery"]}),r}static fetchOpenAPISpec(t){return ae.post(`${ge}/gizmos/fetch_openapi`,{url:t})}static validateOpenAPISpec(t){return ae.post(`${ge}/gizmos/validate_openapi`,{raw_spec:t})}static transformToOpenAPISpec(t,n){return ae.post(`${ge}/gizmos/transform_openapi`,{...t,auth:n})}static async doOAuthRedirect(t,n,r,s,a){const o=await ae.post(`${ge}/gizmos/oauth_redirect`,{gizmo_id:t,gizmo_action_id:n,domain:r,redirect_to:s,draft:a});window.location.href=o.redirect_uri}static async upsertUserActionSettings(t,n,r){return ae.post(`${ge}/gizmos/action_settings`,{gizmo_action_id:t,domain:n,action_settings:r})}static async getUserActionSettings(t){return ae.get(`${ge}/gizmos/user_action_settings?gizmo_id=${t}`)}static async generateCategory(t,n){return ae.post(`${ge}/gizmos/gen_category`,{name:t,instructions:n})}static async getConversations(t){return ae.get(`${ge}/gizmos/${t}/conversations`)}static async getCategories(){return ae.get(`${ge}/gizmos/categories`)}static async getUserReview(t){return ae.get(`${ge}/gizmo_reviews/${t}`)}static async upsertUserReview(t,n,r,s){return ae.post(`${ge}/gizmo_reviews/${t}`,{rating:n,message:r,include_from:s})}static async sendFeedbackEmail(t,n,r){return ae.post(`${ge}/gizmos/${t}/feedback`,{message:n,include_from:r})}static async getAbout(t){return ae.get(`${ge}/gizmos/${t}/about`)}static async getCreatorSlice({creatorId:t}){return ae.get(`${ge}/gizmo_creators/${t}/gizmos`)}static async getVersion({gizmoId:t,version:n}){return n==null?ae.get(`${ge}/gizmos/${t}/version/latest`):ae.get(`${ge}/gizmos/${t}/version/${n}`)}static async listVersions({gizmoId:t,limit:n,cursor:r}){const s={};return n&&(s.limit=n),r&&(s.cursor=r),ae.get(`${ge}/gizmos/${t}/versions`,{params:s})}static async copyGizmo({gizmoId:t}){return await ae.post(`${ge}/gizmos/${t}/copy`)}}async function L7(){const e=await K.getMe();return{id:e.id,email:e.email,name:e.name,picture:e.picture,created:e.created}}const dA=ma({queryKey:["user"],queryFn:L7,staleTime:1/0});function zt(){return me(dA).data}const $7={currentWorkspace:null,subscriptionStatus:null,workspaces:[]};function ln(e){const t=me({...zM(),select:n=>{const r=u3(n);return{currentWorkspace:r?.data??null,subscriptionStatus:r?.data.subscriptionStatus??null,workspaces:n.accountItems.map(s=>s.data)}}}).data??$7;return e?e(t):t}const fs={hasMultipleWorkspaces:({workspaces:e})=>e.length>1,isPersonalWorkspace:({currentWorkspace:e})=>e?.structure===Ha.PERSONAL,isBusinessWorkspace:({currentWorkspace:e})=>e!=null?e.structure===Ha.WORKSPACE:void 0,isEduPlan:({subscriptionStatus:e})=>e?.planType===zi.EDU,isEnterpriseyPlan:({subscriptionStatus:e})=>e!=null&&d3(e.planType),isTeamPlan:({subscriptionStatus:e})=>e?.planType===zi.TEAM,isAdmin:({currentWorkspace:e})=>e!=null&&e.role===Ks.ADMIN,isOwner:({currentWorkspace:e})=>e!=null&&e.role===Ks.OWNER,workspaceId:({currentWorkspace:e})=>e!=null?e.id:null,businessWorkspace:({currentWorkspace:e})=>e?.structure===Ha.WORKSPACE?e:void 0,businessWorkspaceId:({currentWorkspace:e})=>e?.structure===Ha.WORKSPACE?e.id:void 0,hasPaidSubscription:({subscriptionStatus:e})=>e!=null?e.hasPaidSubscription:!1,wasPaidCustomer:({subscriptionStatus:e})=>e!=null?e.wasPaidCustomer:!1,hasCustomerObject:({subscriptionStatus:e})=>e!=null?e.hasCustomerObject:!1,hasUnclaimedFreeTrial:({currentWorkspace:e})=>e?.promoData?.has_claimed_free_trial,lastActiveSubscription:({subscriptionStatus:e})=>e!=null?e.lastActiveSubscription:null,workspaces:({workspaces:e})=>e,accountUserId:({currentWorkspace:e})=>e?.accountUserId};function VOe(){const e=Ce();if(e!=null)return e.hasPlusFeatures()}function GOe(){return Ce()?.data.subscriptionStatus.lastActiveSubscription}function WOe(e){return e.gizmo.current_user_permission?.can_write??!1}function HOe(e){return e.gizmo.current_user_permission?.can_view_config??!1}function F7(e,t,n){const r=t?.name;switch(e){case Vt.Link:return n.formatMessage(jl.privacyAnyoneWithLink);case Vt.Private:return n.formatMessage(jl.privacyOnlyMe);case Vt.Group:case Vt.User:return n.formatMessage({id:"B9pJ5o",defaultMessage:"Invite only"});case Vt.Marketplace:return n.formatMessage(jl.privacyMarketplace);case Vt.Workspace:return n.formatMessage(jl.privacyWorkspace,{workspaceName:r});case Vt.WorkspaceLink:return n.formatMessage({id:"T5Eek0",defaultMessage:"Anyone at {workspaceName} with the link"},{workspaceName:r})}}function zOe(e){const t=L(),n=ln(r=>r.currentWorkspace);return F7(e,n,t)}function B7(e){return"gizmo"in e}function fA(e){return"id"in e}function qOe(e){return`${e.replaceAll(".","_").replaceAll("-","_")}__jit_plugin`}const jl=z({privacyOnlyMe:{id:"gizmo.privacyOnlyMe",defaultMessage:"Only me"},privacyAnyoneWithLink:{id:"gizmo.privacyAnyoneWithLink",defaultMessage:"Anyone with a link"},privacyWorkspace:{id:"gizmo.privacyWorkspace",defaultMessage:"Anyone at {workspaceName}"},privacyMarketplace:{id:"gizmo.privacyMarketplace",defaultMessage:"Everyone"}}),YOe="GPT Builder";function KOe(e){if(e)return`ChatGPT - ${e}`}function Xu(e){return e.gizmo.short_url??e.gizmo.id??"-"}function Ki(e){return`/g/${e}`}function XOe(e){return`https://chatgpt.com${Ki(e)}`}function aa(e){return q.checkGate("491279851")&&Ef(e.gizmo.id)?`${Ki(Xu(e))}/project`:Ki(Xu(e))}function QOe(e,t){const n=new URLSearchParams;return t!=null&&n.set(Cu,t),y7(new URL(`${aa(e)}?${n}`,"https://chatgpt.com"))}function ZOe(e){return`/g/${Xu(e)}`}function JOe(e){return B7(e)&&e.gizmo.live_version===0||fA(e)&&e.liveVersion===0}function U7(e){return me({queryKey:["gizmoConversations",{gizmoId:e}],queryFn:async()=>tt.getConversations(e)})}function eRe(e,t){return me({queryKey:["gizmos","discovery",{locale:e,isAnon:t}],queryFn:async()=>tt.getGizmoDiscovery(e,t)})}function V7({cutId:e,locale:t,limit:n,cursor:r,enabled:s=!0}){return Qd({queryKey:["gizmos","discovery",{cutId:e,locale:t,limit:n}],queryFn:async({pageParam:a})=>tt.getGizmoDiscoveryCut(e,{locale:t,cursor:a,limit:n}),initialPageParam:r,getNextPageParam:a=>a.list.cursor??void 0,enabled:s})}function G7(){return me({queryKey:["gizmos","pinned"],queryFn:async()=>tt.getGizmoPinned()})}function Ni(){return ma({queryKey:["gizmos","bootstrap"],queryFn:async()=>tt.getGizmoBootstrap().then(e=>({gizmos:Object.values(e).flat().filter(n=>n).filter(n=>n.resource.gizmo?.gizmo_type!=="snorlax").map(n=>({resource:n.resource,flair:n.flair}))}))})}function tRe(){return me(Ni())}function Nw(e,t){const n=e.filter(s=>s.resource.gizmo.id!==t.resource.gizmo.id);let r=n.findIndex(s=>s.flair.kind===Ya.Recent);return r===-1&&(r=n.length),n.splice(r,0,t),n}const mA={handleGizmoInteracted(e,t){const n=e.getQueryData(ur(e,t).queryKey);n!=null&&e.setQueryData(Ni().queryKey,r=>{if(r==null)return r;const s=r.gizmos.find(a=>a.resource.gizmo.id===t);return s?.flair.kind===Ya.FirstParty||s?.flair.kind===Ya.SidebarKeep?r:{gizmos:Nw(r.gizmos,{resource:n,flair:{kind:Ya.Recent}})}})},handleGizmoSidebarKeep(e,t){const n=e.getQueryData(ur(e,t).queryKey);n!=null&&e.setQueryData(Ni().queryKey,r=>r==null?r:{gizmos:Nw(r.gizmos,{resource:n,flair:{kind:Ya.SidebarKeep}})})},handleGizmoSidebarHide(e,t){e.setQueryData(Ni().queryKey,n=>n?.gizmos.some(r=>r.resource.gizmo.id===t)?{gizmos:n.gizmos.filter(r=>r.resource.gizmo.id!==t)}:n)}};function Ss(e,t=!1){const n=ke();return me(ur(n,e,t))}function nRe({gizmoId:e,draft:t,version:n}){const r=ke(),s=n?{queryKey:["gizmo","version",{gizmoId:e,version:n}],queryFn:async()=>tt.getVersion({gizmoId:e,version:n}),enabled:e!=null}:ur(r,e,t);return me(s)}function rRe(e,t){return me({queryKey:["gizmo","userActionSettings",{gizmoId:e}],queryFn:async()=>tt.getUserActionSettings(e),enabled:e!=null&&t})}function ur(e,t,n=!1){return ma({queryKey:["gizmo",{gizmoId:t},{draft:n}],queryFn:async()=>tt.getGizmo(t,n),enabled:t!=null,initialData:()=>{if(n===!0)return;const r=e.getQueryData(Ni().queryKey);if(r!=null)return r.gizmos.find(a=>a.resource.gizmo.id===t)?.resource;const s=e.getQueryData(["gizmos","discovery"]);if(s!=null)for(const a of s.cuts){const o=a.list.items.find(c=>c.resource.gizmo.id===t)?.resource;if(o!=null)return o}}})}function W7(e,t){return e.fetchQuery(ur(e,t))}function sRe(e){return me({queryKey:["gizmo",{search:e}],queryFn:async()=>tt.getGizmoSearch(e),enabled:e.length>0})}function aRe(e,t){return me({queryKey:["gizmo-search-workspace",{search:e}],queryFn:async()=>tt.getGizmoSearchForWorkspace(e),enabled:e.length>0&&t})}function oRe(e,t=!1,n=!1,r=null){return Qd({queryKey:[n?"gizmo-search-workspace":"gizmo",{query:e,cursor:r}],queryFn:async({pageParam:s})=>n?tt.getGizmoSearchForWorkspace(e,r=s):tt.getGizmoSearch(e,r=s),initialPageParam:r,getNextPageParam:s=>s.cursor??void 0,enabled:t})}function iRe(){const e=ke();return it({mutationFn:async({gizmoId:t,editorData:n})=>{const{instructions:r,name:s,description:a,emoji:o,theme:c,profilePictureId:l,profilePictureUrl:u,promptStarters:d,tools:f,files:m,trainingDisabled:h}=n,g={instructions:r,display:{name:s,description:a,emoji:o,theme:c,profile_pic_id:l,profile_picture_url:u,prompt_starters:d},tools:f,files:m.map(v=>({...v,location:Y0.FILE_SERVICE})),training_disabled:h};return tt.upsertDraft(g,t)},onSettled:t=>{t&&(e.setQueryData(ur(e,t.gizmo.id,!0).queryKey,t),e.invalidateQueries({queryKey:["gizmos","mine"],refetchType:"none"}))}})}function cRe(){const e=ke();return it({mutationFn:async({gizmoId:t,data:n})=>{const{sharingRecipient:r,categories:s}=n,a=await tt.promoteDraft({sharing:n.sharingSubjects&&n.sharingSubjects.length>0?n.sharingSubjects:{recipient:r},categories:s},t);if(a.error)throw new tA(a);return a.resource},onSettled:t=>{e.invalidateQueries({queryKey:["gizmos"],refetchType:"all"}),e.invalidateQueries({queryKey:["gizmos","pinned"],refetchType:"none"}),t&&e.setQueryData(ur(e,t.gizmo.id,!1).queryKey,t)}})}function lRe(){const e=ke();return it({mutationFn:async({gizmoId:t})=>tt.deleteGizmo(t),onSettled:()=>{e.invalidateQueries({queryKey:["gizmos"],refetchType:"all"})}})}function uRe(){const e=ke(),t=Ne();return it({mutationFn:async({name:n,hideName:r,websiteUrl:s,willReceiveSupportEmails:a})=>tt.updateBuilderProfile({name:n,hide_name:r,website_url:s,will_receive_support_emails:a}),onSuccess:n=>{e.setQueryData(["builderProfile"],n)},onError:n=>{t.warning(n.message)}})}function dRe(){return me({queryKey:["builderProfile"],queryFn:async()=>tt.getBuilderProfile()})}function fRe(){return it({mutationFn:async({gizmoId:e})=>tt.copyGizmo({gizmoId:e})})}function mRe(){return me({queryKey:["gizmoCategories"],queryFn:async()=>tt.getCategories()})}function pRe(e,t){return!!(t!=null&&[Me.PrimaryAssistant,Me.GizmoInteraction].includes(t)&&e?.includes(Ys.GPT_4))}function H7(e,t){const n=ke(),r=Ne();return it({mutationFn:async({rating:s,message:a,includeFrom:o})=>{await tt.upsertUserReview(e,s,a,o)},onSuccess:async()=>{n.invalidateQueries({queryKey:["gizmo","review",{gizmoId:e}]})},onError:s=>{r.danger(s.message)}})}const Af=Ie(ys(()=>({statusMap:{}}))),z7=e=>Af(t=>t.statusMap[e]),hRe=()=>Af(e=>Object.values(e.statusMap).some(t=>t?.value===Nn.UNREAD)),Xi=(e,t)=>{Af.setState(n=>{n.statusMap[e]=t;const r=D.getServerThreadId(e);r&&(n.statusMap[r]=t)})},q7=e=>{Af.setState(t=>{for(const{id:n,async_status:r}of e)r!=null&&(t.statusMap[n]={source:Jr.SERVER,value:r})})},pA={};function Y7(e){return pA[e]??null}function K7(e){return e in pA}async function X0(e,t){const n=Y7(e),r=n??await K.getConversation(e);return t==null&&n&&(t=!0),n||ie.addTiming("chatgpt.web.chatPage.loadExistingConversation"),D.initThreadFromServerData(e,r,t,void 0,t),Xi(r.conversation_id,r.async_status?{source:Jr.SERVER,value:r.async_status}:null),r}const X7=(e,t)=>{const n=ze(),{pathname:r}=ko(),s=Vn(),a=Zd(),o=Ne();me({queryKey:["conversation",e],queryFn:()=>X0(e,t).catch(c=>{const l=f3(r),u=l!=null?Ki(l):"/";throw n(u),o.danger(`Unable to load conversation ${e}`,{testId:"conversation-fetch-error-toaster"}),c}),enabled:!bs(e)&&!s&&!a,refetchOnMount:!0})};function Qu(e,t){return t!=null||e!=null?{modelSelectionPositionRange:t,modelCursorPosition:e}:void 0}function Q7(e,t,n){const r=[],s=t.start-t.end+n;for(const a of e){const o=Z7(a.at,t,s);o&&r.push(o===a.at?a:{...a,at:o})}return r}function Z7(e,t,n){return t.start>=e.end?e:t.start<=e.start&&t.end>=e.end?null:t.end<=e.start?n===0?e:{start:e.start+n,end:e.end+n}:t.start<=e.start?{start:t.end+n,end:e.end+n}:t.end>=e.end?{start:e.start,end:t.start}:{start:e.start,end:e.end+n}}const J7=/[*_-\s\d.\\`]+$/;function ag(e,t){return t?e.replace(J7,""):e}function e8(e,t){return es(e,n=>{for(const r of t){if(r.kind===lt.CREATE){const s=n8(r);ji(n,s)}else{const s=n.textdocById[r.textdocId];if(!s){ie.addError("Attempted to apply canmore operation to an unknown target id",{textdocOp:r});continue}const a=s.versions[s.versions.length-1],o=hA(a,r);ji(n,o,t8(a,r))}r.textdocId&&(n.latestTextdocId=r.textdocId)}})}function t8(e,t){if(t.author.role===le.User)return e.messageId?!0:t.createdAt-e.createdAt>3600;switch(t.kind){case lt.REWRITE:return!0;case lt.EDIT:return t.messageId!==e.messageId;case lt.ADD_COMMENT:return!1;case lt.REMOVE_COMMENT:return!1}}function n8(e){const t=!!e.isPartial,n=ag(e.content,t);return{textdocId:e.textdocId,versionInt:e.versionInt??null,messageId:e.messageId??null,title:e.title,type:e.type,content:n,createdAt:e.createdAt,status:t?Tn.CREATING:Tn.COMPLETE,comments:[],modelCursor:Qu(e.author.role===le.Assistant&&e.isPartial?n.length:void 0)}}function r8(e,t){if(!e.isPartial)return;if(e.isPartialRange)return Qu(void 0,e.at);const n=e.at.start+t.length;return Qu(n)}function hA(e,t){switch(t.kind){case lt.REMOVE_COMMENT:return{...e,versionInt:t.versionInt??e.versionInt,comments:e.comments.map(n=>n.id===t.commentId?{...n,status:t.reason===N_.ACCEPT?eg.ACCEPT_INITIATED:eg.DISMISSED}:n)};case lt.REWRITE:{const n=e.status!==Tn.COMPLETE||t.isPartial===!0,r=ag(t.content,n),s=t.author.role===le.Assistant&&t.isPartial?r.length:void 0;return{...e,versionInt:t.versionInt??e.versionInt,messageId:t.messageId??null,content:r,createdAt:t.createdAt,comments:t.comments??e.comments,status:t.isPartial?Tn.REWRITING:Tn.COMPLETE,modelCursor:Qu(s)}}case lt.EDIT:{const n=t.isPartial&&t.isPartialRange?e.content.slice(t.at.start,t.at.end):ag(t.content,t.isPartial===!0),r=e.content.slice(0,t.at.start)+n+e.content.slice(t.at.end);return{...e,versionInt:t.versionInt??e.versionInt,messageId:t.messageId??null,content:r,createdAt:t.createdAt,status:t.isPartial?Tn.UPDATING:Tn.COMPLETE,comments:Q7(e.comments,t.at,n.length),modelCursor:r8(t,n)}}case lt.ADD_COMMENT:{const n={id:t.id??t.tempId,tempId:t.tempId,at:t.at,content:t.content??""},r=e.comments.concat(n);return{...e,versionInt:t.versionInt??e.versionInt,messageId:t.messageId??null,createdAt:t.createdAt,status:t.isPartial?Tn.COMMENTING:Tn.COMPLETE,comments:r}}}}function s8(e){const t=xc(e),n=e0(e,t),r=t0(e),s=Jd(r),a=bF(e),o=H4(),c=y4(()=>Promise.allSettled([a.refetch(),X0(e,!0)])),[l,u]=wF({isRequestActive:s,lastTurn:vs(n),clientThreadId:e,persistedTextdocStoreStatus:a.status}),d=!!l,f=c??l,m=!!c||s,h=f?c?Zh.NATIVE:Zh.LAST_TURN:null,g=p.useMemo(()=>n.slice(0,d?-1:n.length),[n.length,d]),v=sF(e,g),y=W_(),b=hF(),x=U4(),w=p.useMemo(()=>{let k=__(v);const{textdocVersionById:I,fetchError:j,status:F}=a;return k=es(k,U=>{U.fetchError=j,U.isFetchingFromPersistence=F===Hu.REFETCHING||F===Hu.INITIALIZING;for(const{pastedAt:B,content:N,metadata:$,tempId:H}of x){const Y=U.resolveTempTextdocId[H]??H,{title:O="",type:R=L0.DOCUMENT}=$??{};ji(U,{textdocId:Y,title:O,type:R,content:N,createdAt:B,versionInt:0,comments:[],messageId:null,status:Tn.COMPLETE})}if(I)for(const[B,N]of I.entries()){U.allTextdocIdSet[B]=B;const $=o.get(B);let H=$&&($.versionInt??Tr)>(N.versionInt??Tr)?{...N,...$}:N;const Y=b.filter(R=>R.textdocId===B&&R.kind===lt.REMOVE_COMMENT);let O=H.versionInt;for(const R of Y)H=hA(H,R),O=Math.max(O??Tr,R.versionInt??Tr);H={...H,versionInt:O},U.textdocById[B]=void 0,ji(U,H)}}),y?es(k,U=>{ji(U,y,!1)}):k},[x,v,a,o,y,b]),C=p.useMemo(()=>f?.length?$4(m,w,f):null,[f,m,w]),T=p.useMemo(()=>es(w,k=>{for(const I of C??[])if(I.messageId&&(k.lastCanvasAssistantMessageById[I.textdocId]=I.messageId),I.kind===lt.CREATE){const{tempTextdocId:j,textdocId:F}=I;j&&F&&(k.resolveTempTextdocId[j]=F)}}),[C,w]),M=i7(m,C,u);return p.useMemo(()=>M?es(e8(T,M),k=>{k.streamingSource=h}):T,[T,h,M])}function gRe({clientThreadId:e,children:t,enableSandbox:n=!1}){const r=s8(e);return f7(e),i.jsx(E_.Provider,{value:r,children:i.jsx(Z4,{isEnabled:n,children:t})})}const a8=["https:","mailto:","tel:"],Tu=e=>{if(e===void 0)return;let t;try{t=new URL(e,window.location.origin)}catch{return}if(a8.includes(t.protocol))return t.href};function Pf({href:e,children:t,...n}){const r=Zd();return i.jsx("a",{href:Tu(e),target:"_blank",rel:r?"noopener noreferrer":"noopener",...n,children:t})}function gA({className:e,openNewTab:t=!1,type:n="primary",...r}){return i.jsx("a",{rel:"noopener",className:A("cursor-pointer font-normal underline",n==="primary"&&"text-green-600",e),target:t?"_blank":"_self",...r})}var je=(e=>(e.LocaleBanner="oai/apps/hasSeenLocaleBanner",e.HasSeenPluginDisclaimer="oai/apps/hasSeenPluginsDisclaimer",e.FirstTimeUsingUserContext="oai/apps/hasUserContextFirstTime/2023-06-29",e.Onboarding="oai/apps/hasSeenOnboarding",e.TeamOwnerOnboarding="oai/apps/hasSeenTeamOwnerOnboarding",e.MemoryOnboarding="oai/apps/hasSeenMemoryOnboarding",e.TemporaryChatOnboarding="oai/apps/hasSeenTemporaryChatOnboarding",e.ArchiveConversationOnboarding="oai/apps/hasSeenArchiveConversationOnboarding",e.ExploreGPTs="oai/apps/hasSeenExploreGPTs2",e.ExploreGPTsNewNux="oai/apps/hasSeenExploreGPTsNewNux",e.MentionGPTs="oai/apps/hasSeenMentionGPTs",e.ModelTunerDisclaimer="oai/apps/hasSeenModelTunerDisclaimer",e.DalleEditingOnboarding="oai/apps/hasSeenDalleEditingOnboarding",e.ModelSwitcherAutoDowngrade="oai/apps/hasSeenModelSwitcherAutoDowngrade",e.ContextConnectors="oai/apps/hasSeenContextConnectorTooltip",e.hasDismissedCanvasOnboarding="oai/apps/hasDismissedCanvasOnboarding",e.hasDismissedCanvasContextualOnboarding="oai/apps/hasDismissedCanvasContextualOnboarding",e.HasSeenAdvancedVoiceOnMobile="oai/apps/hasSeenAdvancedVoiceOnMobile/2024-09-26",e.SidekickLauncherOnboarding="oai/apps/hasSeenSidekickLauncherOnboarding",e.UseSidekick="oai/apps/hasDismissedUseSidekick",e.UseSidetron="oai/apps/hasDismissedUseSidetron",e.hasSeenSncUsageNux="oai/apps/hasSeenSncUsageNux",e.hasSeenSncWelcomeNux="oai/apps/hasSeenSncWelcomeNux",e.hasSeenSncSourcesTooltip="oai/apps/hasSeenSncSourcesTooltip",e.hasSeenComposerSearchButtonTooltip="oai/apps/hasSeenComposerSearchButtonTooltip",e.hasSeenComposerSystemHintButtonTooltip="oai/apps/hasSeenComposerSystemHintButtonTooltip",e.hasSeenPioneer="oai/apps/hasSeenPioneer",e.hasSeenCanvasDropdownNux="oai/apps/hasSeenCanvasDropdownNux",e.hasSeenAdvancedVoiceWebNuxTooltip="oai/apps/hasSeenAdvancedVoiceWebNuxTooltip",e.hasSeenAdvancedVoiceRealWebNuxTooltip="oai/apps/hasSeenAdvancedVoiceRealWebNuxTooltip",e.hasSeenAdvancedVoiceNuxFullPage="oai/apps/hasSeenAdvancedVoice/2024-09-24",e.hasSeenWindowsAppOnboarding="oai/apps/hasSeenWindowsAppOnboarding",e.DesktopBrowserExtensionAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionAnnouncement",e.DesktopBrowserExtensionReactiveAnnouncement="oai/apps/hasSeenDesktopBrowserExtensionReactiveAnnouncement",e.NewOnboardingFlow="oai/apps/hasSeenOnboardingFlow",e.hasUsedConversationalOnboardingStarterPrompt="oai/apps/hasUsedNewUserStarterPrompt",e.hasSeenMobileAppUpsellBanner="oai/apps/hasSeenMobileAppUpsellBanner",e.hasSeenStrawSelection="oai/apps/hasSeenStrawSelection",e.hasSeenWebComposerStraw="oai/apps/hasSeenWebComposerStraw",e.hasSeenElectronComposerStraw="oai/apps/hasSeenElectronComposerStraw",e.hasStartedWebVoiceModeStraw="oai/apps/hasStartedWebVoiceModeStraw",e.hasStartedElectronVoiceModeStraw="oai/apps/hasStartedElectronVoiceModeStraw",e.hasSeenProjectsWebNuxTooltip="oai/apps/hasSeenProjectsWebNuxTooltip",e))(je||{});function o8(){return qM(e=>e.eligible_announcements)}function Be(e){const{data:t=[],isLoading:n}=o8(),r=vA();return{eligible:t.includes(e),markAsViewed:()=>r.mutate({key:e}),isLoading:n}}function vA(){const e=ke();return it({mutationFn:({key:t})=>K.announcementViewed(t),onMutate:async({key:t})=>{e.setQueryData(["userSettings"],n=>({...n,eligible_announcements:n.eligible_announcements.filter(r=>r!==t)}))},onSuccess:()=>{e.invalidateQueries({queryKey:["userSettings"]})}})}function vRe(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}function Qi(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const og=e=>Array.isArray(e);function yA(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function Zi(e){return typeof e=="string"||Array.isArray(e)}function Ow(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Q0(e,t,n,r){if(typeof t=="function"){const[s,a]=Ow(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=Ow(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function jf(e,t,n){const r=e.getProps();return Q0(r,t,n!==void 0?n:r.custom,e)}const Z0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],J0=["initial",...Z0],Lc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Cs=new Set(Lc),sr=e=>e*1e3,ar=e=>e/1e3,i8={type:"spring",stiffness:500,damping:25,restSpeed:10},c8=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),l8={type:"keyframes",duration:.8},u8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},d8=(e,{keyframes:t})=>t.length>2?l8:Cs.has(e)?e.startsWith("scale")?c8(t[1]):i8:u8;function f8({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:c,from:l,elapsed:u,...d}){return!!Object.keys(d).length}function xA(e,t){return e[t]||e.default||e}const m8={skipAnimations:!1,useManualTiming:!1},p8=e=>e!==null;function If(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(p8),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const Wt=e=>e;function h8(e){let t=new Set,n=new Set,r=!1,s=!1;const a=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function c(u){a.has(u)&&(l.schedule(u),e()),u(o)}const l={schedule:(u,d=!1,f=!1)=>{const h=f&&r?t:n;return d&&a.add(u),h.has(u)||h.add(u),u},cancel:u=>{n.delete(u),a.delete(u)},process:u=>{if(o=u,r){s=!0;return}r=!0,[t,n]=[n,t],n.clear(),t.forEach(c),r=!1,s&&(s=!1,l.process(u))}};return l}const Il=["read","resolveKeyframes","update","preRender","render","postRender"],g8=40;function bA(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Il.reduce((b,x)=>(b[x]=h8(a),b),{}),{read:c,resolveKeyframes:l,update:u,preRender:d,render:f,postRender:m}=o,h=()=>{const b=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(b-s.timestamp,g8),1),s.timestamp=b,s.isProcessing=!0,c.process(s),l.process(s),u.process(s),d.process(s),f.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(h))},g=()=>{n=!0,r=!0,s.isProcessing||e(h)};return{schedule:Il.reduce((b,x)=>{const w=o[x];return b[x]=(C,T=!1,M=!1)=>(n||g(),w.schedule(C,T,M)),b},{}),cancel:b=>{for(let x=0;x<Il.length;x++)o[Il[x]].cancel(b)},state:s,steps:o}}const{schedule:Pe,cancel:Ir,state:ms,steps:yRe}=bA(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wt,!0),wA=e=>/^0[^.\s]+$/u.test(e);function v8(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||wA(e):!0}let y8=Wt,ig=Wt;const SA=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),CA=e=>t=>typeof t=="string"&&t.startsWith(e),TA=CA("--"),x8=CA("var(--"),ey=e=>x8(e)?b8.test(e.split("/*")[0].trim()):!1,b8=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,w8=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function S8(e){const t=w8.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function kA(e,t,n=1){const[r,s]=S8(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const o=a.trim();return SA(o)?parseFloat(o):o}return ey(s)?kA(s,t,n+1):s}const oa=(e,t,n)=>n>t?t:n<e?e:n,Oo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Oi={...Oo,transform:e=>oa(0,1,e)},Nl={...Oo,default:1},Ri=e=>Math.round(e*1e5)/1e5,ty=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,C8=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,T8=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu;function $c(e){return typeof e=="string"}function k8(e){return e==null}const Fc=e=>({test:t=>$c(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),zr=Fc("deg"),or=Fc("%"),oe=Fc("px"),M8=Fc("vh"),E8=Fc("vw"),Rw={...or,parse:e=>or.parse(e)/100,transform:e=>or.transform(e*100)},_8=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Dw=e=>e===Oo||e===oe,Lw=(e,t)=>parseFloat(e.split(", ")[t]),$w=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Lw(s[1],t);{const a=r.match(/^matrix\((.+)\)$/u);return a?Lw(a[1],e):0}},A8=new Set(["x","y","z"]),P8=Lc.filter(e=>!A8.has(e));function j8(e){const t=[];return P8.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const ho={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:$w(4,13),y:$w(5,14)};ho.translateX=ho.x;ho.translateY=ho.y;const MA=e=>t=>t.test(e),I8={test:e=>e==="auto",parse:e=>e},EA=[Oo,oe,or,zr,E8,M8,I8],Fw=e=>EA.find(MA(e)),Qs=new Set;let cg=!1,lg=!1;function _A(){if(lg){const e=Array.from(Qs).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=j8(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{var c;(c=r.getValue(a))===null||c===void 0||c.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}lg=!1,cg=!1,Qs.forEach(e=>e.complete()),Qs.clear()}function AA(){Qs.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(lg=!0)})}function N8(){AA(),_A()}class ny{constructor(t,n,r,s,a,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Qs.add(this),cg||(cg=!0,Pe.read(AA),Pe.resolveKeyframes(_A))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const o=s?.get(),c=t[t.length-1];if(o!==void 0)t[0]=o;else if(r&&n){const l=r.readValue(n,c);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=c),s&&o===void 0&&s.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Qs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Qs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const ry=(e,t)=>n=>!!($c(n)&&T8.test(n)&&n.startsWith(e)||t&&!k8(n)&&Object.prototype.hasOwnProperty.call(n,t)),PA=(e,t,n)=>r=>{if(!$c(r))return r;const[s,a,o,c]=r.match(ty);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(o),alpha:c!==void 0?parseFloat(c):1}},O8=e=>oa(0,255,e),tp={...Oo,transform:e=>Math.round(O8(e))},Ws={test:ry("rgb","red"),parse:PA("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+tp.transform(e)+", "+tp.transform(t)+", "+tp.transform(n)+", "+Ri(Oi.transform(r))+")"};function R8(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ug={test:ry("#"),parse:R8,transform:Ws.transform},Ka={test:ry("hsl","hue"),parse:PA("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+or.transform(Ri(t))+", "+or.transform(Ri(n))+", "+Ri(Oi.transform(r))+")"},Ut={test:e=>Ws.test(e)||ug.test(e)||Ka.test(e),parse:e=>Ws.test(e)?Ws.parse(e):Ka.test(e)?Ka.parse(e):ug.parse(e),transform:e=>$c(e)?e:e.hasOwnProperty("red")?Ws.transform(e):Ka.transform(e)};function D8(e){var t,n;return isNaN(e)&&$c(e)&&(((t=e.match(ty))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(C8))===null||n===void 0?void 0:n.length)||0)>0}const jA="number",IA="color",L8="var",$8="var(",Bw="${}",F8=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ji(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const c=t.replace(F8,l=>(Ut.test(l)?(r.color.push(a),s.push(IA),n.push(Ut.parse(l))):l.startsWith($8)?(r.var.push(a),s.push(L8),n.push(l)):(r.number.push(a),s.push(jA),n.push(parseFloat(l))),++a,Bw)).split(Bw);return{values:n,split:c,indexes:r,types:s}}function NA(e){return Ji(e).values}function OA(e){const{split:t,types:n}=Ji(e),r=t.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=t[o],s[o]!==void 0){const c=n[o];c===jA?a+=Ri(s[o]):c===IA?a+=Ut.transform(s[o]):a+=s[o]}return a}}const B8=e=>typeof e=="number"?0:e;function U8(e){const t=NA(e);return OA(e)(t.map(B8))}const ps={test:D8,parse:NA,createTransformer:OA,getAnimatableNone:U8},V8=new Set(["brightness","contrast","saturate","opacity"]);function G8(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(ty)||[];if(!r)return e;const s=n.replace(r,"");let a=V8.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const W8=/\b([a-z-]*)\(.*?\)/gu,dg={...ps,getAnimatableNone:e=>{const t=e.match(W8);return t?t.map(G8).join(" "):e}},Uw={...Oo,transform:Math.round},sy={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,radius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,size:oe,top:oe,right:oe,bottom:oe,left:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,rotate:zr,rotateX:zr,rotateY:zr,rotateZ:zr,scale:Nl,scaleX:Nl,scaleY:Nl,scaleZ:Nl,skew:zr,skewX:zr,skewY:zr,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:Oi,originX:Rw,originY:Rw,originZ:oe,zIndex:Uw,backgroundPositionX:oe,backgroundPositionY:oe,fillOpacity:Oi,strokeOpacity:Oi,numOctaves:Uw},H8={...sy,color:Ut,backgroundColor:Ut,outlineColor:Ut,fill:Ut,stroke:Ut,borderColor:Ut,borderTopColor:Ut,borderRightColor:Ut,borderBottomColor:Ut,borderLeftColor:Ut,filter:dg,WebkitFilter:dg},ay=e=>H8[e];function RA(e,t){let n=ay(e);return n!==dg&&(n=ps),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const z8=new Set(["auto","none","0"]);function q8(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!z8.has(a)&&Ji(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=RA(n,s)}class DA extends ny{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<t.length;l++){let u=t[l];if(typeof u=="string"&&(u=u.trim(),ey(u))){const d=kA(u,n.current);d!==void 0&&(t[l]=d),l===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!_8.has(r)||t.length!==2)return;const[s,a]=t,o=Fw(s),c=Fw(a);if(o!==c)if(Dw(o)&&Dw(c))for(let l=0;l<t.length;l++){const u=t[l];typeof u=="string"&&(t[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)v8(t[s])&&r.push(s);r.length&&q8(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ho[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const a=n.getValue(r);a&&a.jump(this.measuredOrigin,!1);const o=s.length-1,c=s[o];s[o]=ho[r](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([l,u])=>{n.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function LA(e){let t;return()=>(t===void 0&&(t=e()),t)}let ku;function Y8(){ku=void 0}const ls={now:()=>(ku===void 0&&ls.set(ms.isProcessing||m8.useManualTiming?ms.timestamp:performance.now()),ku),set:e=>{ku=e,queueMicrotask(Y8)}},Vw=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ps.test(e)||e==="0")&&!e.startsWith("url("));function K8(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function X8(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],o=Vw(s,t),c=Vw(a,t);return!o||!c?!1:K8(e)||n==="spring"&&r}const Q8=40;class $A{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ls.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Q8?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&N8(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=ls.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:o,onComplete:c,onUpdate:l,isGenerator:u}=this.options;if(!u&&!X8(t,r,s,a))if(o)this.options.duration=0;else{l?.(If(t,this.options,n)),c?.(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}function oy(e,t){return t?e*(1e3/t):0}const Z8=5;function FA(e,t,n){const r=Math.max(t-Z8,0);return oy(n-e(r),t-r)}const np=.001,J8=.01,eB=10,tB=.05,nB=1;function rB({duration:e=800,bounce:t=.25,velocity:n=0,mass:r=1}){let s,a,o=1-t;o=oa(tB,nB,o),e=oa(J8,eB,ar(e)),o<1?(s=u=>{const d=u*o,f=d*e,m=d-n,h=fg(u,o),g=Math.exp(-f);return np-m/h*g},a=u=>{const f=u*o*e,m=f*n+n,h=Math.pow(o,2)*Math.pow(u,2)*e,g=Math.exp(-f),v=fg(Math.pow(u,2),o);return(-s(u)+np>0?-1:1)*((m-h)*g)/v}):(s=u=>{const d=Math.exp(-u*e),f=(u-n)*e+1;return-np+d*f},a=u=>{const d=Math.exp(-u*e),f=(n-u)*(e*e);return d*f});const c=5/e,l=aB(s,a,c);if(e=sr(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{const u=Math.pow(l,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:e}}}const sB=12;function aB(e,t,n){let r=n;for(let s=1;s<sB;s++)r=r-e(r)/t(r);return r}function fg(e,t){return e*Math.sqrt(1-t*t)}const oB=["duration","bounce"],iB=["stiffness","damping","mass"];function Gw(e,t){return t.some(n=>e[n]!==void 0)}function cB(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!Gw(e,iB)&&Gw(e,oB)){const n=rB(e);t={...t,...n,mass:1},t.isResolvedFromDuration=!0}return t}function iy({keyframes:e,restDelta:t,restSpeed:n,...r}){const s=e[0],a=e[e.length-1],o={done:!1,value:s},{stiffness:c,damping:l,mass:u,duration:d,velocity:f,isResolvedFromDuration:m}=cB({...r,velocity:-ar(r.velocity||0)}),h=f||0,g=l/(2*Math.sqrt(c*u)),v=a-s,y=ar(Math.sqrt(c/u)),b=Math.abs(v)<5;n||(n=b?.01:2),t||(t=b?.005:.5);let x;if(g<1){const w=fg(y,g);x=C=>{const T=Math.exp(-g*y*C);return a-T*((h+g*y*v)/w*Math.sin(w*C)+v*Math.cos(w*C))}}else if(g===1)x=w=>a-Math.exp(-y*w)*(v+(h+y*v)*w);else{const w=y*Math.sqrt(g*g-1);x=C=>{const T=Math.exp(-g*y*C),M=Math.min(w*C,300);return a-T*((h+g*y*v)*Math.sinh(M)+w*v*Math.cosh(M))/w}}return{calculatedDuration:m&&d||null,next:w=>{const C=x(w);if(m)o.done=w>=d;else{let T=0;g<1&&(T=w===0?sr(h):FA(x,w,C));const M=Math.abs(T)<=n,_=Math.abs(a-C)<=t;o.done=M&&_}return o.value=o.done?a:C,o}}}function Ww({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:c,max:l,restDelta:u=.5,restSpeed:d}){const f=e[0],m={done:!1,value:f},h=k=>c!==void 0&&k<c||l!==void 0&&k>l,g=k=>c===void 0?l:l===void 0||Math.abs(c-k)<Math.abs(l-k)?c:l;let v=n*t;const y=f+v,b=o===void 0?y:o(y);b!==y&&(v=b-f);const x=k=>-v*Math.exp(-k/r),w=k=>b+x(k),C=k=>{const I=x(k),j=w(k);m.done=Math.abs(I)<=u,m.value=m.done?b:j};let T,M;const _=k=>{h(m.value)&&(T=k,M=iy({keyframes:[m.value,g(m.value)],velocity:FA(w,k,m.value),damping:s,stiffness:a,restDelta:u,restSpeed:d}))};return _(0),{calculatedDuration:null,next:k=>{let I=!1;return!M&&T===void 0&&(I=!0,C(k),_(k)),T!==void 0&&k>=T?M.next(k-T):(!I&&C(k),m)}}}const BA=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,lB=1e-7,uB=12;function dB(e,t,n,r,s){let a,o,c=0;do o=t+(n-t)/2,a=BA(o,r,s)-e,a>0?n=o:t=o;while(Math.abs(a)>lB&&++c<uB);return o}function Bc(e,t,n,r){if(e===t&&n===r)return Wt;const s=a=>dB(a,0,1,e,n);return a=>a===0||a===1?a:BA(s(a),t,r)}const fB=Bc(.42,0,1,1),mB=Bc(0,0,.58,1),UA=Bc(.42,0,.58,1),VA=e=>Array.isArray(e)&&typeof e[0]!="number",GA=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,WA=e=>t=>1-e(1-t),cy=e=>1-Math.sin(Math.acos(e)),HA=WA(cy),pB=GA(cy),zA=Bc(.33,1.53,.69,.99),ly=WA(zA),hB=GA(ly),gB=e=>(e*=2)<1?.5*ly(e):.5*(2-Math.pow(2,-10*(e-1))),Hw={linear:Wt,easeIn:fB,easeInOut:UA,easeOut:mB,circIn:cy,circInOut:pB,circOut:HA,backIn:ly,backInOut:hB,backOut:zA,anticipate:gB},mg=e=>{if(Array.isArray(e)){ig(e.length===4);const[t,n,r,s]=e;return Bc(t,n,r,s)}else if(typeof e=="string")return ig(Hw[e]!==void 0),Hw[e];return e},vB=(e,t)=>n=>t(e(n)),Er=(...e)=>e.reduce(vB),ia=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},pt=(e,t,n)=>e+(t-e)*n;function rp(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function yB({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,o=0;if(!t)s=a=o=n;else{const c=n<.5?n*(1+t):n+t-n*t,l=2*n-c;s=rp(l,c,e+1/3),a=rp(l,c,e),o=rp(l,c,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Zu(e,t){return n=>n>0?t:e}const sp=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},xB=[ug,Ws,Ka],bB=e=>xB.find(t=>t.test(e));function zw(e){const t=bB(e);if(!t)return!1;let n=t.parse(e);return t===Ka&&(n=yB(n)),n}const qw=(e,t)=>{const n=zw(e),r=zw(t);if(!n||!r)return Zu(e,t);const s={...n};return a=>(s.red=sp(n.red,r.red,a),s.green=sp(n.green,r.green,a),s.blue=sp(n.blue,r.blue,a),s.alpha=pt(n.alpha,r.alpha,a),Ws.transform(s))},pg=new Set(["none","hidden"]);function wB(e,t){return pg.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function SB(e,t){return n=>pt(e,t,n)}function uy(e){return typeof e=="number"?SB:typeof e=="string"?ey(e)?Zu:Ut.test(e)?qw:kB:Array.isArray(e)?qA:typeof e=="object"?Ut.test(e)?qw:CB:Zu}function qA(e,t){const n=[...e],r=n.length,s=e.map((a,o)=>uy(a)(a,t[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function CB(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=uy(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function TB(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const o=t.types[a],c=e.indexes[o][s[o]],l=(n=e.values[c])!==null&&n!==void 0?n:0;r[a]=l,s[o]++}return r}const kB=(e,t)=>{const n=ps.createTransformer(t),r=Ji(e),s=Ji(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?pg.has(e)&&!s.values.length||pg.has(t)&&!r.values.length?wB(e,t):Er(qA(TB(r,s),s.values),n):Zu(e,t)};function YA(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?pt(e,t,n):uy(e)(e,t)}function MB(e,t,n){const r=[],s=n||YA,a=e.length-1;for(let o=0;o<a;o++){let c=s(e[o],e[o+1]);if(t){const l=Array.isArray(t)?t[o]||Wt:t;c=Er(l,c)}r.push(c)}return r}function dy(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(ig(a===t.length),a===1)return()=>t[0];if(a===2&&e[0]===e[1])return()=>t[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=MB(t,r,s),c=o.length,l=u=>{let d=0;if(c>1)for(;d<e.length-2&&!(u<e[d+1]);d++);const f=ia(e[d],e[d+1],u);return o[d](f)};return n?u=>l(oa(e[0],e[a-1],u)):l}function KA(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=ia(0,t,r);e.push(pt(n,1,s))}}function fy(e){const t=[0];return KA(t,e.length-1),t}function EB(e,t){return e.map(n=>n*t)}function _B(e,t){return e.map(()=>t||UA).splice(0,e.length-1)}function Ju({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=VA(r)?r.map(mg):mg(r),a={done:!1,value:t[0]},o=EB(n&&n.length===t.length?n:fy(t),e),c=dy(o,t,{ease:Array.isArray(s)?s:_B(t,s)});return{calculatedDuration:e,next:l=>(a.value=c(l),a.done=l>=e,a)}}const hg=2e4;function XA(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<hg;)t+=n,r=e.next(t);return t>=hg?1/0:t}const AB=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Pe.update(t,!0),stop:()=>Ir(t),now:()=>ms.isProcessing?ms.timestamp:ls.now()}},PB={decay:Ww,inertia:Ww,tween:Ju,keyframes:Ju,spring:iy},jB=e=>e/100;class Nf extends $A{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{const{onStop:l}=this.options;l&&l(),this.resolver.cancel(),this.isStopped=!0,this.state!=="idle"&&this.teardown()};const{name:n,motionValue:r,element:s,keyframes:a}=this.options,o=s?.KeyframeResolver||ny,c=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new o(a,c,n,r,s),this.resolver.scheduleResolve()}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=this.options,c=PB[n]||Ju;let l,u;c!==Ju&&typeof t[0]!="number"&&(l=Er(jB,YA(t[0],t[1])),t=[0,100]);const d=c({...this.options,keyframes:t});a==="mirror"&&(u=c({...this.options,keyframes:[...t].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=XA(d));const{calculatedDuration:f}=d,m=f+s,h=m*(r+1)-s;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:m,totalDuration:h}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:o,mapPercentToKeyframes:c,keyframes:l,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return a.next(0);const{delay:m,repeat:h,repeatType:g,repeatDelay:v,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const b=this.currentTime-m*(this.speed>=0?1:-1),x=this.speed>=0?b<0:b>d;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let w=this.currentTime,C=a;if(h){const k=Math.min(this.currentTime,d)/f;let I=Math.floor(k),j=k%1;!j&&k>=1&&(j=1),j===1&&I--,I=Math.min(I,h+1),!!(I%2)&&(g==="reverse"?(j=1-j,v&&(j-=v/f)):g==="mirror"&&(C=o)),w=oa(0,1,j)*f}const T=x?{done:!1,value:l[0]}:C.next(w);c&&(T.value=c(T.value));let{done:M}=T;!x&&u!==null&&(M=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const _=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return _&&s!==void 0&&(T.value=If(l,this.options,s)),y&&y(T.value),_&&this.finish(),T}get duration(){const{resolved:t}=this;return t?ar(t.calculatedDuration):0}get time(){return ar(this.currentTime)}set time(t){t=sr(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ar(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=AB,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}function IB(e){return new Nf(e)}const QA=new Set(["opacity","clipPath","filter","transform"]),ZA=e=>Array.isArray(e)&&typeof e[0]=="number";function JA(e){return!!(!e||typeof e=="string"&&e in my||ZA(e)||Array.isArray(e)&&e.every(JA))}const Ci=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,my={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ci([0,.65,.55,1]),circOut:Ci([.55,0,1,.45]),backIn:Ci([.31,.01,.66,-.59]),backOut:Ci([.33,1.53,.69,.99])};function NB(e){return eP(e)||my.easeOut}function eP(e){if(e)return ZA(e)?Ci(e):Array.isArray(e)?e.map(NB):my[e]}function OB(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:c,times:l}={}){const u={[t]:n};l&&(u.offset=l);const d=eP(c);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}const RB=LA(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ed=10,DB=2e4;function LB(e){return e.type==="spring"||!JA(e.ease)}function $B(e,t){const n=new Nf({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let a=0;for(;!r.done&&a<DB;)r=n.sample(a),s.push(r.value),a+=ed;return{times:void 0,keyframes:s,duration:a-ed,ease:"linear"}}class Yw extends $A{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new DA(a,(o,c)=>this.onKeyframesResolved(o,c),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){var r;let{duration:s=300,times:a,ease:o,type:c,motionValue:l,name:u,startTime:d}=this.options;if(!(!((r=l.owner)===null||r===void 0)&&r.current))return!1;if(LB(this.options)){const{onComplete:m,onUpdate:h,motionValue:g,element:v,...y}=this.options,b=$B(t,y);t=b.keyframes,t.length===1&&(t[1]=t[0]),s=b.duration,a=b.times,o=b.ease,c="keyframes"}const f=OB(l.owner.current,u,t,{...this.options,duration:s,times:a,ease:o});return f.startTime=d??this.calcStartTime(),this.pendingTimeline?(f.timeline=this.pendingTimeline,this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:m}=this.options;l.set(If(t,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:s,times:a,type:c,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return ar(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return ar(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=sr(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Wt;const{animation:r}=n;r.timeline=t,r.onfinish=null}return Wt}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:a,ease:o,times:c}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:m,...h}=this.options,g=new Nf({...h,keyframes:r,duration:s,type:a,ease:o,times:c,isGenerator:!0}),v=sr(this.time);u.setWithVelocity(g.sample(v-ed).value,g.sample(v).value,ed)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:o,type:c}=t;return RB()&&r&&QA.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&a!=="mirror"&&o!==0&&c!=="inertia"}}function FB(e,t){let n;const r=()=>{const{currentTime:s}=t,o=(s===null?0:s.value)/100;n!==o&&e(o),n=o};return Pe.update(r,!0),()=>Ir(r)}const BB=LA(()=>window.ScrollTimeline!==void 0);class py{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,n){return Promise.all(this.animations).then(t).catch(n)}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t){const n=this.animations.map(r=>{if(BB()&&r.attachTimeline)r.attachTimeline(t);else return r.pause(),FB(s=>{r.time=r.duration*s},t)});return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const hy=(e,t,n,r={},s,a,o)=>c=>{const l=xA(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-sr(u);let f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:h=>{t.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{c(),l.onComplete&&l.onComplete(),o&&o()},onStop:o,name:e,motionValue:t,element:a?void 0:s};f8(l)||(f={...f,...d8(e,f)}),f.duration&&(f.duration=sr(f.duration)),f.repeatDelay&&(f.repeatDelay=sr(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(f.duration=0,f.delay===0&&(m=!0)),m&&!a&&t.get()!==void 0){const h=If(f.keyframes,l);if(h!==void 0)return Pe.update(()=>{f.onUpdate(h),f.onComplete()}),new py([])}return!a&&Yw.supports(f)?new Yw(f):new Nf(f)},UB=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),VB=e=>og(e)?e[e.length-1]||0:e;function Of(e,t){e.indexOf(t)===-1&&e.push(t)}function Uc(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class tP{constructor(){this.subscriptions=[]}add(t){return Of(this.subscriptions,t),()=>Uc(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Kw=30,GB=e=>!isNaN(parseFloat(e)),Di={current:void 0};class nP{constructor(t,n={}){this.version="12.0.0-alpha.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=ls.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=ls.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=GB(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new tP);const r=this.events[t].add(n);return t==="change"?()=>{r(),Pe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Di.current&&Di.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=ls.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Kw)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Kw);return oy(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rr(e,t){return new nP(e,t)}function WB(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,rr(n))}function HB(e,t){const n=jf(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const c=VB(a[o]);WB(e,o,c)}}const Rf=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zB="framerAppearId",rP="data-"+Rf(zB);function qB(e){return e.props[rP]}function sP(e){if(Cs.has(e))return"transform";if(QA.has(e))return Rf(e)}class YB extends nP{constructor(){super(...arguments),this.output=[],this.counts=new Map}add(t){const n=sP(t);if(!n)return;const r=this.counts.get(n)||0;this.counts.set(n,r+1),r===0&&(this.output.push(n),this.update());let s=!1;return()=>{if(s)return;s=!0;const a=this.counts.get(n)-1;this.counts.set(n,a),a===0&&(Uc(this.output,n),this.update())}}update(){this.set(this.output.length?this.output.join(", "):"auto")}}const ht=e=>!!(e&&e.getVelocity);function KB(e){return!!(ht(e)&&e.add)}function gg(e,t){var n;if(!e.applyWillChange)return;let r=e.getValue("willChange");if(!r&&!(!((n=e.props.style)===null||n===void 0)&&n.willChange)&&(r=new YB("auto"),e.addValue("willChange",r)),KB(r))return r.add(t)}function XB({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function gy(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var a;let{transition:o=e.getDefaultTransition(),transitionEnd:c,...l}=t;r&&(o=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const f in l){const m=e.getValue(f,(a=e.latestValues[f])!==null&&a!==void 0?a:null),h=l[f];if(h===void 0||d&&XB(d,f))continue;const g={delay:n,...xA(o||{},f)};let v=!1;if(window.MotionHandoffAnimation){const b=qB(e);if(b){const x=window.MotionHandoffAnimation(b,f,Pe);x!==null&&(g.startTime=x,v=!0)}}m.start(hy(f,m,h,e.shouldReduceMotion&&Cs.has(f)?{type:!1}:g,e,v,gg(e,f)));const y=m.animation;y&&u.push(y)}return c&&Promise.all(u).then(()=>{Pe.update(()=>{c&&HB(e,c)})}),u}function vg(e,t,n={}){var r;const s=jf(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(a=n.transitionOverride);const o=s?()=>Promise.all(gy(e,s,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:m}=a;return QB(e,t,d+u,f,m,n)}:()=>Promise.resolve(),{when:l}=a;if(l){const[u,d]=l==="beforeChildren"?[o,c]:[c,o];return u().then(()=>d())}else return Promise.all([o(),c(n.delay)])}function QB(e,t,n=0,r=0,s=1,a){const o=[],c=(e.variantChildren.size-1)*r,l=s===1?(u=0)=>u*r:(u=0)=>c-u*r;return Array.from(e.variantChildren).sort(ZB).forEach((u,d)=>{u.notify("AnimationStart",t),o.push(vg(u,t,{...a,delay:n+l(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(o)}function ZB(e,t){return e.sortNodePosition(t)}function JB(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>vg(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=vg(e,t,n);else{const s=typeof t=="function"?jf(e,t,n.custom):t;r=Promise.all(gy(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const eU=[...Z0].reverse(),tU=Z0.length;function nU(e){return t=>Promise.all(t.map(({animation:n,options:r})=>JB(e,n,r)))}function rU(e){let t=nU(e),n=Xw(),r=!0;const s=l=>(u,d)=>{var f;const m=jf(e,d,l==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:h,transitionEnd:g,...v}=m;u={...u,...v,...g}}return u};function a(l){t=l(e)}function o(l){const u=e.getProps(),d=e.getVariantContext(!0)||{},f=[],m=new Set;let h={},g=1/0;for(let y=0;y<tU;y++){const b=eU[y],x=n[b],w=u[b]!==void 0?u[b]:d[b],C=Zi(w),T=b===l?x.isActive:null;T===!1&&(g=y);let M=w===d[b]&&w!==u[b]&&C;if(M&&r&&e.manuallyAnimateOnMount&&(M=!1),x.protectedKeys={...h},!x.isActive&&T===null||!w&&!x.prevProp||Qi(w)||typeof w=="boolean")continue;let k=sU(x.prevProp,w)||b===l&&x.isActive&&!M&&C||y>g&&C,I=!1;const j=Array.isArray(w)?w:[w];let F=j.reduce(s(b),{});T===!1&&(F={});const{prevResolvedValues:U={}}=x,B={...U,...F},N=$=>{k=!0,m.has($)&&(I=!0,m.delete($)),x.needsAnimating[$]=!0;const H=e.getValue($);H&&(H.liveStyle=!1)};for(const $ in B){const H=F[$],Y=U[$];if(h.hasOwnProperty($))continue;let O=!1;og(H)&&og(Y)?O=!yA(H,Y):O=H!==Y,O?H!=null?N($):m.add($):H!==void 0&&m.has($)?N($):x.protectedKeys[$]=!0}x.prevProp=w,x.prevResolvedValues=F,x.isActive&&(h={...h,...F}),r&&e.blockInitialAnimation&&(k=!1),k&&(!M||I)&&f.push(...j.map($=>({animation:$,options:{type:b}})))}if(m.size){const y={};m.forEach(b=>{const x=e.getBaseTarget(b),w=e.getValue(b);w&&(w.liveStyle=!0),y[b]=x??null}),f.push({animation:y})}let v=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(v=!1),r=!1,v?t(f):Promise.resolve()}function c(l,u){var d;if(n[l].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(m=>{var h;return(h=m.animationState)===null||h===void 0?void 0:h.setActive(l,u)}),n[l].isActive=u;const f=o(l);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:o,setActive:c,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Xw(),r=!0}}}function sU(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!yA(t,e):!1}function Is(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Xw(){return{animate:Is(!0),whileInView:Is(),whileHover:Is(),whileTap:Is(),whileDrag:Is(),whileFocus:Is(),exit:Is()}}class Ts{constructor(t){this.isMounted=!1,this.node=t}update(){}}class aU extends Ts{constructor(t){super(t),t.animationState||(t.animationState=rU(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Qi(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let oU=0;class iU extends Ts{constructor(){super(...arguments),this.id=oU++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const xRe={animation:{Feature:aU},exit:{Feature:iU}},aP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function Df(e,t="page"){return{point:{x:e[`${t}X`],y:e[`${t}Y`]}}}const cU=e=>t=>aP(t)&&e(t,Df(t));function ns(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function _r(e,t,n,r){return ns(e,t,cU(n),r)}const Qw=(e,t)=>Math.abs(e-t);function lU(e,t){const n=Qw(e.x,t.x),r=Qw(e.y,t.y);return Math.sqrt(n**2+r**2)}class oP{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=op(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,h=lU(f.offset,{x:0,y:0})>=3;if(!m&&!h)return;const{point:g}=f,{timestamp:v}=ms;this.history.push({...g,timestamp:v});const{onStart:y,onMove:b}=this.handlers;m||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=ap(m,this.transformPagePoint),Pe.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:h,onSessionEnd:g,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=op(f.type==="pointercancel"?this.lastMoveEventInfo:ap(m,this.transformPagePoint),this.history);this.startEvent&&h&&h(f,y),g&&g(f,y)},!aP(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=Df(t),c=ap(o,this.transformPagePoint),{point:l}=c,{timestamp:u}=ms;this.history=[{...l,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,op(c,this.history)),this.removeListeners=Er(_r(this.contextWindow,"pointermove",this.handlePointerMove),_r(this.contextWindow,"pointerup",this.handlePointerUp),_r(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ir(this.updatePoint)}}function ap(e,t){return t?{point:t(e.point)}:e}function Zw(e,t){return{x:e.x-t.x,y:e.y-t.y}}function op({point:e},t){return{point:e,delta:Zw(e,iP(t)),offset:Zw(e,uU(t)),velocity:dU(t,.1)}}function uU(e){return e[0]}function iP(e){return e[e.length-1]}function dU(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=iP(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>sr(t)));)n--;if(!r)return{x:0,y:0};const a=ar(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function cP(e){let t=null;return()=>{const n=()=>{t=null};return t===null?(t=e,n):!1}}const Jw=cP("dragHorizontal"),e1=cP("dragVertical");function lP(e){let t=!1;if(e==="y")t=e1();else if(e==="x")t=Jw();else{const n=Jw(),r=e1();n&&r?t=()=>{n(),r()}:(n&&n(),r&&r())}return t}function uP(){const e=lP(!0);return e?(e(),!1):!0}function Xa(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const dP=1e-4,fU=1-dP,mU=1+dP,fP=.01,pU=0-fP,hU=0+fP;function Nr(e){return e.max-e.min}function bRe(e,t,n){return Math.abs(e-t)<=n}function t1(e,t,n,r=.5){e.origin=r,e.originPoint=pt(t.min,t.max,e.origin),e.scale=Nr(n)/Nr(t),e.translate=pt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=fU&&e.scale<=mU||isNaN(e.scale))&&(e.scale=1),(e.translate>=pU&&e.translate<=hU||isNaN(e.translate))&&(e.translate=0)}function wRe(e,t,n,r){t1(e.x,t.x,n.x,r?r.originX:void 0),t1(e.y,t.y,n.y,r?r.originY:void 0)}function n1(e,t,n){e.min=n.min+t.min,e.max=e.min+Nr(t)}function SRe(e,t,n){n1(e.x,t.x,n.x),n1(e.y,t.y,n.y)}function r1(e,t,n){e.min=t.min-n.min,e.max=e.min+Nr(t)}function CRe(e,t,n){r1(e.x,t.x,n.x),r1(e.y,t.y,n.y)}function gU(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?pt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?pt(n,e,r.max):Math.min(e,n)),e}function s1(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function vU(e,{top:t,left:n,bottom:r,right:s}){return{x:s1(e.x,n,s),y:s1(e.y,t,r)}}function a1(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function yU(e,t){return{x:a1(e.x,t.x),y:a1(e.y,t.y)}}function xU(e,t){let n=.5;const r=Nr(e),s=Nr(t);return s>r?n=ia(t.min,t.max-r,e.min):r>s&&(n=ia(e.min,e.max-s,t.min)),oa(0,1,n)}function bU(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const yg=.35;function wU(e=yg){return e===!1?e=0:e===!0&&(e=yg),{x:o1(e,"left","right"),y:o1(e,"top","bottom")}}function o1(e,t,n){return{min:i1(e,t),max:i1(e,n)}}function i1(e,t){return typeof e=="number"?e:e[t]||0}const c1=()=>({translate:0,scale:1,origin:0,originPoint:0}),TRe=()=>({x:c1(),y:c1()}),l1=()=>({min:0,max:0}),vy=()=>({x:l1(),y:l1()});function qn(e){return[e("x"),e("y")]}function mP({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function SU({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function CU(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ip(e){return e===void 0||e===1}function TU({scale:e,scaleX:t,scaleY:n}){return!ip(e)||!ip(t)||!ip(n)}function kU(e){return TU(e)||MU(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function MU(e){return u1(e.x)||u1(e.y)}function u1(e){return e&&e!=="0%"}function td(e,t,n){const r=e-n,s=t*r;return n+s}function d1(e,t,n,r,s){return s!==void 0&&(e=td(e,s,r)),td(e,n,r)+t}function xg(e,t=0,n=1,r,s){e.min=d1(e.min,t,n,r,s),e.max=d1(e.max,t,n,r,s)}function EU(e,{x:t,y:n}){xg(e.x,t.translate,t.scale,t.originPoint),xg(e.y,n.translate,n.scale,n.originPoint)}const f1=.999999999999,m1=1.0000000000001;function kRe(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,o;for(let c=0;c<s;c++){a=n[c],o=a.projectionDelta;const{visualElement:l}=a.options;l&&l.props.style&&l.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&g1(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,EU(e,o)),r&&kU(a.latestValues)&&g1(e,a.latestValues))}t.x<m1&&t.x>f1&&(t.x=1),t.y<m1&&t.y>f1&&(t.y=1)}function p1(e,t){e.min=e.min+t,e.max=e.max+t}function h1(e,t,n,r,s=.5){const a=pt(e.min,e.max,s);xg(e,t,n,a,r)}function g1(e,t){h1(e.x,t.x,t.scaleX,t.scale,t.originX),h1(e.y,t.y,t.scaleY,t.scale,t.originY)}function pP(e,t){return mP(CU(e.getBoundingClientRect(),t))}function _U(e,t,n){const r=pP(e,n),{scroll:s}=t;return s&&(p1(r.x,s.offset.x),p1(r.y,s.offset.y)),r}const hP=({current:e})=>e?e.ownerDocument.defaultView:null,AU=new WeakMap;class PU{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vy(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Df(d,"page").point)},a=(d,f)=>{var m;const{drag:h,dragPropagation:g,onDragStart:v}=this.getProps();if(h&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=lP(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),qn(b=>{let x=this.getAxisMotionValue(b).get()||0;if(or.test(x)){const{projection:w}=this.visualElement;if(w&&w.layout){const C=w.layout.layoutBox[b];C&&(x=Nr(C)*(parseFloat(x)/100))}}this.originPoint[b]=x}),v&&Pe.postRender(()=>v(d,f)),(m=this.removeWillChange)===null||m===void 0||m.call(this),this.removeWillChange=gg(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:m,dragDirectionLock:h,onDirectionLock:g,onDrag:v}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:y}=f;if(h&&this.currentDirection===null){this.currentDirection=jU(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),v&&v(d,f)},c=(d,f)=>this.stop(d,f),l=()=>qn(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new oP(t,{onSessionStart:s,onStart:a,onMove:o,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:hP(this.visualElement)})}stop(t,n){var r;(r=this.removeWillChange)===null||r===void 0||r.call(this);const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=n;this.startAnimation(a);const{onDragEnd:o}=this.getProps();o&&Pe.postRender(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!Ol(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=gU(o,this.constraints[t],this.elastic[t])),a.set(o)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,a=this.constraints;n&&Xa(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=vU(s.layoutBox,n):this.constraints=!1,this.elastic=wU(r),a!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&qn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=bU(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Xa(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=_U(r,s.root,this.visualElement.getTransformPagePoint());let o=yU(s.layout.layoutBox,a);if(n){const c=n(SU(o));this.hasMutatedConstraints=!!c,c&&(o=mP(c))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:c}=this.getProps(),l=this.constraints||{},u=qn(d=>{if(!Ol(d,n,this.currentDirection))return;let f=l&&l[d]||{};o&&(f={min:0,max:0});const m=s?200:1e6,h=s?40:1e7,g={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,g)});return Promise.all(u).then(c)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return r.start(hy(t,r,0,n,this.visualElement,!1,gg(this.visualElement,t)))}stopAnimation(){qn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){qn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){qn(n=>{const{drag:r}=this.getProps();if(!Ol(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:c}=s.layout.layoutBox[n];a.set(t[n]-pt(o,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Xa(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};qn(o=>{const c=this.getAxisMotionValue(o);if(c&&this.constraints!==!1){const l=c.get();s[o]=xU({min:l,max:l},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),qn(o=>{if(!Ol(o,t,null))return;const c=this.getAxisMotionValue(o),{min:l,max:u}=this.constraints[o];c.set(pt(l,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;AU.set(this.visualElement,this);const t=this.visualElement.current,n=_r(t,"pointerdown",l=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(l)}),r=()=>{const{dragConstraints:l}=this.getProps();Xa(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Pe.read(r);const o=ns(window,"resize",()=>this.scalePositionWithinConstraints()),c=s.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(qn(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=l[d].translate,f.set(f.get()+l[d].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=yg,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:c}}}function Ol(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function jU(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class MRe extends Ts{constructor(t){super(t),this.removeGroupControls=Wt,this.removeListeners=Wt,this.controls=new PU(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wt}unmount(){this.removeGroupControls(),this.removeListeners()}}const v1=e=>(t,n)=>{e&&Pe.postRender(()=>e(t,n))};class ERe extends Ts{constructor(){super(...arguments),this.removePointerDownListener=Wt}onPointerDown(t){this.session=new oP(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:v1(t),onStart:v1(n),onMove:r,onEnd:(a,o)=>{delete this.session,s&&Pe.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=_r(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Vc=p.createContext(null);function IU(){const e=p.useContext(Vc);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,s=p.useId();p.useEffect(()=>r(s),[]);const a=p.useCallback(()=>n&&n(s),[s,n]);return!t&&n?[!1,a]:[!0]}function _Re(){return NU(p.useContext(Vc))}function NU(e){return e===null?!0:e.isPresent}const yy=p.createContext({}),gP=p.createContext({}),OU={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function y1(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ii={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const n=y1(e,t.target.x),r=y1(e,t.target.y);return`${n}% ${r}%`}},RU={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=ps.parse(e);if(s.length>5)return r;const a=ps.createTransformer(e),o=typeof s[0]!="number"?1:0,c=n.x.scale*t.x,l=n.y.scale*t.y;s[0+o]/=c,s[1+o]/=l;const u=pt(c,l,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),a(s)}},vP={};function DU(e){Object.assign(vP,e)}const{schedule:yP,cancel:ARe}=bA(queueMicrotask,!1);class LU extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;DU($U),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),OU.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,o=r.projection;return o&&(o.isPresent=a,s||t.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?o.promote():o.relegate()||Pe.postRender(()=>{const c=o.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),yP.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function PRe(e){const[t,n]=IU(),r=p.useContext(yy);return i.jsx(LU,{...e,layoutGroup:r,switchLayoutGroup:p.useContext(gP),isPresent:t,safeToRemove:n})}const $U={borderRadius:{...ii,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ii,borderTopRightRadius:ii,borderBottomLeftRadius:ii,borderBottomRightRadius:ii,boxShadow:RU},xP=["TopLeft","TopRight","BottomLeft","BottomRight"],FU=xP.length,x1=e=>typeof e=="string"?parseFloat(e):e,b1=e=>typeof e=="number"||oe.test(e);function jRe(e,t,n,r,s,a){s?(e.opacity=pt(0,n.opacity!==void 0?n.opacity:1,BU(r)),e.opacityExit=pt(t.opacity!==void 0?t.opacity:1,0,UU(r))):a&&(e.opacity=pt(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<FU;o++){const c=`border${xP[o]}Radius`;let l=w1(t,c),u=w1(n,c);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||b1(l)===b1(u)?(e[c]=Math.max(pt(x1(l),x1(u),r),0),(or.test(u)||or.test(l))&&(e[c]+="%")):e[c]=u}(t.rotate||n.rotate)&&(e.rotate=pt(t.rotate||0,n.rotate||0,r))}function w1(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const BU=bP(0,.5,HA),UU=bP(.5,.95,Wt);function bP(e,t,n){return r=>r<e?0:r>t?1:n(ia(e,t,r))}function S1(e,t){e.min=t.min,e.max=t.max}function IRe(e,t){S1(e.x,t.x),S1(e.y,t.y)}function NRe(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function C1(e,t,n,r,s){return e-=t,e=td(e,1/n,r),s!==void 0&&(e=td(e,1/s,r)),e}function VU(e,t=0,n=1,r=.5,s,a=e,o=e){if(or.test(t)&&(t=parseFloat(t),t=pt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let c=pt(a.min,a.max,r);e===a&&(c-=t),e.min=C1(e.min,t,n,c,s),e.max=C1(e.max,t,n,c,s)}function T1(e,t,[n,r,s],a,o){VU(e,t[n],t[r],t[s],t.scale,a,o)}const GU=["x","scaleX","originX"],WU=["y","scaleY","originY"];function ORe(e,t,n,r){T1(e.x,t,GU,n?n.x:void 0,r?r.x:void 0),T1(e.y,t,WU,n?n.y:void 0,r?r.y:void 0)}function k1(e){return e.translate===0&&e.scale===1}function RRe(e){return k1(e.x)&&k1(e.y)}function M1(e,t){return e.min===t.min&&e.max===t.max}function DRe(e,t){return M1(e.x,t.x)&&M1(e.y,t.y)}function E1(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function LRe(e,t){return E1(e.x,t.x)&&E1(e.y,t.y)}function $Re(e){return Nr(e.x)/Nr(e.y)}function FRe(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class BRe{constructor(){this.members=[]}add(t){Of(this.members,t),t.scheduleRender()}remove(t){if(Uc(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function URe(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,o=n?.z||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:m,skewX:h,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const c=e.x.scale*t.x,l=e.y.scale*t.y;return(c!==1||l!==1)&&(r+=`scale(${c}, ${l})`),r||"none"}const HU=(e,t)=>e.depth-t.depth;class VRe{constructor(){this.children=[],this.isDirty=!1}add(t){Of(this.children,t),this.isDirty=!0}remove(t){Uc(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(HU),this.isDirty=!1,this.children.forEach(t)}}function zU(e){const t=ht(e)?e.get():e;return UB(t)?t.toValue():t}function GRe(e,t){const n=ls.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(Ir(r),e(a-t))};return Pe.read(r,!0),()=>Ir(r)}function qU(e){return e instanceof SVGElement&&e.tagName!=="svg"}function wP(e,t,n){const r=ht(e)?e:rr(e);return r.start(hy("",r,t,n)),r.animation}function _1(e,t){const n=t?"pointerenter":"pointerleave",r=t?"onHoverStart":"onHoverEnd",s=(a,o)=>{if(a.pointerType==="touch"||uP())return;const c=e.getProps();e.animationState&&c.whileHover&&e.animationState.setActive("whileHover",t);const l=c[r];l&&Pe.postRender(()=>l(a,o))};return _r(e.current,n,s,{passive:!e.getProps()[r]})}class YU extends Ts{mount(){this.unmount=Er(_1(this.node,!0),_1(this.node,!1))}unmount(){}}class KU extends Ts{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Er(ns(this.node.current,"focus",()=>this.onFocus()),ns(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const SP=(e,t)=>t?e===t?!0:SP(e,t.parentElement):!1;function cp(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Df(n))}class XU extends Ts{constructor(){super(...arguments),this.removeStartListeners=Wt,this.removeEndListeners=Wt,this.removeAccessibleListeners=Wt,this.startPointerPress=(t,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),a=_r(window,"pointerup",(c,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:f}=this.node.getProps(),m=!f&&!SP(this.node.current,c.target)?d:u;m&&Pe.update(()=>m(c,l))},{passive:!(r.onTap||r.onPointerUp)}),o=_r(window,"pointercancel",(c,l)=>this.cancelPress(c,l),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Er(a,o),this.startPress(t,n)},this.startAccessiblePress=()=>{const t=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=c=>{c.key!=="Enter"||!this.checkPressEnd()||cp("up",(l,u)=>{const{onTap:d}=this.node.getProps();d&&Pe.postRender(()=>d(l,u))})};this.removeEndListeners(),this.removeEndListeners=ns(this.node.current,"keyup",o),cp("down",(c,l)=>{this.startPress(c,l)})},n=ns(this.node.current,"keydown",t),r=()=>{this.isPressing&&cp("cancel",(a,o)=>this.cancelPress(a,o))},s=ns(this.node.current,"blur",r);this.removeAccessibleListeners=Er(n,s)}}startPress(t,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Pe.postRender(()=>r(t,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!uP()}cancelPress(t,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Pe.postRender(()=>r(t,n))}mount(){const t=this.node.getProps(),n=_r(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),r=ns(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Er(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const bg=new WeakMap,lp=new WeakMap,QU=e=>{const t=bg.get(e.target);t&&t(e)},ZU=e=>{e.forEach(QU)};function JU({root:e,...t}){const n=e||document;lp.has(n)||lp.set(n,{});const r=lp.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(ZU,{root:e,...t})),r[s]}function eV(e,t,n){const r=JU(t);return bg.set(e,n),r.observe(e),()=>{bg.delete(e),r.unobserve(e)}}const tV={some:0,all:1};class nV extends Ts{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:tV[s]},c=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=u?d:f;m&&m(l)};return eV(this.node.current,o,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(rV(t,n))&&this.startObserver()}unmount(){}}function rV({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const WRe={inView:{Feature:nV},tap:{Feature:XU},focus:{Feature:KU},hover:{Feature:YU}},Gc=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Lf=p.createContext({}),xy=typeof window<"u",Wc=xy?p.useLayoutEffect:p.useEffect,CP=p.createContext({strict:!1});let A1=!1;function sV(e,t,n,r,s){var a;const{visualElement:o}=p.useContext(Lf),c=p.useContext(CP),l=p.useContext(Vc),u=p.useContext(Gc).reducedMotion,d=p.useRef(void 0);r=r||c.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const f=d.current,m=p.useContext(gP);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&oV(d.current,n,s,m),p.useInsertionEffect(()=>{f&&f.update(n,l)});const h=n[rP],g=p.useRef(!!h&&!window.MotionHandoffIsComplete&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,h)));return Wc(()=>{f&&(f.updateFeatures(),yP.render(f.render),g.current&&f.animationState&&f.animationState.animateChanges())}),p.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current=!1,A1||(A1=!0,queueMicrotask(aV)))}),f}function aV(){window.MotionHandoffIsComplete=!0}function oV(e,t,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:c,layoutScroll:l,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:TP(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||c&&Xa(c),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:l,layoutRoot:u})}function TP(e){if(e)return e.options.allowProjection!==!1?e.projection:TP(e.parent)}function iV(e,t,n){return p.useCallback(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Xa(n)&&(n.current=r))},[t])}function $f(e){return Qi(e.animate)||J0.some(t=>Zi(e[t]))}function kP(e){return!!($f(e)||e.variants)}function cV(e,t){if($f(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Zi(n)?n:void 0,animate:Zi(r)?r:void 0}}return e.inherit!==!1?t:{}}function lV(e){const{initial:t,animate:n}=cV(e,p.useContext(Lf));return p.useMemo(()=>({initial:t,animate:n}),[P1(t),P1(n)])}function P1(e){return Array.isArray(e)?e.join(" "):e}const j1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},go={};for(const e in j1)go[e]={isEnabled:t=>j1[e].some(n=>!!t[n])};function uV(e){for(const t in e)go[t]={...go[t],...e[t]}}const dV=Symbol.for("motionComponentSymbol");function fV({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&uV(e);function a(c,l){let u;const d={...p.useContext(Gc),...c,layoutId:mV(c)},{isStatic:f}=d,m=lV(c),h=r(c,f);if(!f&&xy){pV();const g=hV(d);u=g.MeasureLayout,m.visualElement=sV(s,h,d,t,g.ProjectionNode)}return i.jsxs(Lf.Provider,{value:m,children:[u&&m.visualElement?i.jsx(u,{visualElement:m.visualElement,...d}):null,n(s,c,iV(h,m.visualElement,l),h,f,m.visualElement)]})}const o=p.forwardRef(a);return o[dV]=s,o}function mV({layoutId:e}){const t=p.useContext(yy).id;return t&&e!==void 0?t+"-"+e:e}function pV(e,t){p.useContext(CP).strict}function hV(e){const{drag:t,layout:n}=go;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const gV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function by(e){return typeof e!="string"||e.includes("-")?!1:!!(gV.indexOf(e)>-1||/[A-Z]/u.test(e))}function MP(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const EP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _P(e,t,n,r){MP(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(EP.has(s)?s:Rf(s),t.attrs[s])}function AP(e,{layout:t,layoutId:n}){return Cs.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!vP[e]||e==="opacity")}function wy(e,t,n){var r;const{style:s}=e,a={};for(const o in s)(ht(s[o])||t.style&&ht(t.style[o])||AP(o,e)||((r=n?.getValue(o))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(a[o]=s[o]);return n&&s&&typeof s.willChange=="string"&&(n.applyWillChange=!1),a}function PP(e,t,n){const r=wy(e,t,n);for(const s in e)if(ht(e[s])||ht(t[s])){const a=Lc.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}function Ro(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}function vV({applyWillChange:e=!1,scrapeMotionValuesFromProps:t,createRenderState:n,onMount:r},s,a,o,c){const l={latestValues:xV(s,a,o,c?!1:e,t),renderState:n()};return r&&(l.mount=u=>r(s,u,l)),l}const jP=e=>(t,n)=>{const r=p.useContext(Lf),s=p.useContext(Vc),a=()=>vV(e,t,r,s,n);return n?a():Ro(a)};function yV(e,t){const n=sP(t);n&&Of(e,n)}function I1(e,t,n){const r=Array.isArray(t)?t:[t];for(let s=0;s<r.length;s++){const a=Q0(e,r[s]);if(a){const{transitionEnd:o,transition:c,...l}=a;n(l,o)}}}function xV(e,t,n,r,s){var a;const o={},c=[],l=r&&((a=e.style)===null||a===void 0?void 0:a.willChange)===void 0,u=s(e,{});for(const y in u)o[y]=zU(u[y]);let{initial:d,animate:f}=e;const m=$f(e),h=kP(e);t&&h&&!m&&e.inherit!==!1&&(d===void 0&&(d=t.initial),f===void 0&&(f=t.animate));let g=n?n.initial===!1:!1;g=g||d===!1;const v=g?f:d;return v&&typeof v!="boolean"&&!Qi(v)&&I1(e,v,(y,b)=>{for(const x in y){let w=y[x];if(Array.isArray(w)){const C=g?w.length-1:0;w=w[C]}w!==null&&(o[x]=w)}for(const x in b)o[x]=b[x]}),l&&(f&&d!==!1&&!Qi(f)&&I1(e,f,y=>{for(const b in y)yV(c,b)}),c.length&&(o.willChange=c.join(","))),o}const Sy=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),IP=()=>({...Sy(),attrs:{}}),NP=(e,t)=>t&&typeof e=="number"?t.transform(e):e,bV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},wV=Lc.length;function SV(e,t,n){let r="",s=!0;for(let a=0;a<wV;a++){const o=Lc[a],c=e[o];if(c===void 0)continue;let l=!0;if(typeof c=="number"?l=c===(o.startsWith("scale")?1:0):l=parseFloat(c)===0,!l||n){const u=NP(c,sy[o]);if(!l){s=!1;const d=bV[o]||o;r+=`${d}(${u}) `}n&&(t[o]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Cy(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let o=!1,c=!1;for(const l in t){const u=t[l];if(Cs.has(l)){o=!0;continue}else if(TA(l)){s[l]=u;continue}else{const d=NP(u,sy[l]);l.startsWith("origin")?(c=!0,a[l]=d):r[l]=d}}if(t.transform||(o||n?r.transform=SV(t,e.transform,n):r.transform&&(r.transform="none")),c){const{originX:l="50%",originY:u="50%",originZ:d=0}=a;r.transformOrigin=`${l} ${u} ${d}`}}function N1(e,t,n){return typeof e=="string"?e:oe.transform(t+n*e)}function CV(e,t,n){const r=N1(t,e.x,e.width),s=N1(n,e.y,e.height);return`${r} ${s}`}const TV={offset:"stroke-dashoffset",array:"stroke-dasharray"},kV={offset:"strokeDashoffset",array:"strokeDasharray"};function MV(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?TV:kV;e[a.offset]=oe.transform(-r);const o=oe.transform(t),c=oe.transform(n);e[a.array]=`${o} ${c}`}function Ty(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:a,pathLength:o,pathSpacing:c=1,pathOffset:l=0,...u},d,f){if(Cy(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:h,dimensions:g}=e;m.transform&&(g&&(h.transform=m.transform),delete m.transform),g&&(s!==void 0||a!==void 0||h.transform)&&(h.transformOrigin=CV(g,s!==void 0?s:.5,a!==void 0?a:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),o!==void 0&&MV(m,o,c,l,!1)}const ky=e=>typeof e=="string"&&e.toLowerCase()==="svg",EV={useVisualState:jP({scrapeMotionValuesFromProps:PP,createRenderState:IP,onMount:(e,t,{renderState:n,latestValues:r})=>{Pe.read(()=>{try{n.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Pe.render(()=>{Ty(n,r,ky(t.tagName),e.transformTemplate),_P(t,n)})}})},_V={useVisualState:jP({applyWillChange:!0,scrapeMotionValuesFromProps:wy,createRenderState:Sy})};function OP(e,t,n){for(const r in t)!ht(t[r])&&!AP(r,n)&&(e[r]=t[r])}function AV({transformTemplate:e},t){return p.useMemo(()=>{const n=Sy();return Cy(n,t,e),Object.assign({},n.vars,n.style)},[t])}function PV(e,t){const n=e.style||{},r={};return OP(r,n,e),Object.assign(r,AV(e,t)),r}function jV(e,t){const n={},r=PV(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const IV=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function nd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||IV.has(e)}let RP=e=>!nd(e);function NV(e){e&&(RP=t=>t.startsWith("on")?!nd(t):e(t))}try{NV(require("@emotion/is-prop-valid").default)}catch{}function OV(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(RP(s)||n===!0&&nd(s)||!t&&!nd(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function RV(e,t,n,r){const s=p.useMemo(()=>{const a=IP();return Ty(a,t,ky(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};OP(a,e.style,e),s.style={...a,...s.style}}return s}function DV(e=!1){return(n,r,s,{latestValues:a},o)=>{const l=(by(n)?RV:jV)(r,a,o,n),u=OV(r,typeof n=="string",e),d=n!==p.Fragment?{...u,...l,ref:s}:{},{children:f}=r,m=p.useMemo(()=>ht(f)?f.get():f,[f]);return p.createElement(n,{...d,children:m})}}function HRe(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const o={...by(r)?EV:_V,preloadedFeatures:e,useRender:DV(s),createVisualElement:t,Component:r};return fV(o)}}const rd={current:null},My={current:!1};function DP(){if(My.current=!0,!!xy)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>rd.current=e.matches;e.addListener(t),t()}else rd.current=!1}function LV(e,t,n){for(const r in t){const s=t[r],a=n[r];if(ht(s))e.addValue(r,s);else if(ht(a))e.addValue(r,rr(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(r);e.addValue(r,rr(o!==void 0?o:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const ec=new WeakMap,$V=[...EA,Ut,ps],FV=e=>$V.find(MA(e)),O1=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],BV=J0.length;class UV{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:o},c={}){this.applyWillChange=!1,this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ny,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.isRenderScheduled=!1,this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.isRenderScheduled=!1,this.scheduleRender=()=>{this.isRenderScheduled||(this.isRenderScheduled=!0,Pe.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=c,this.blockInitialAnimation=!!a,this.isControllingVariants=$f(n),this.isVariantNode=kP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const h=f[m];l[m]!==void 0&&ht(h)&&h.set(l[m],!1)}}mount(t){this.current=t,ec.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),My.current||DP(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:rd.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){ec.delete(this.current),this.projection&&this.projection.unmount(),Ir(this.notifyUpdate),Ir(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Cs.has(t),s=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&Pe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a(),o&&o(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in go){const n=go[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vy()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<O1.length;r++){const s=O1[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=t[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=LV(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<BV;r++){const s=J0[r],a=this.props[s];(Zi(a)||a===!1)&&(n[s]=a)}return n}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=rr(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(SA(s)||wA(s))?s=parseFloat(s):!FV(s)&&ps.test(n)&&(s=RA(t,n)),this.setBaseTarget(t,ht(s)?s.get():s)),ht(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const o=Q0(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);o&&(s=o[t])}if(r&&s!==void 0)return s;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!ht(a)?a:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new tP),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class LP extends UV{constructor(){super(...arguments),this.KeyframeResolver=DA}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}}function VV(e){return window.getComputedStyle(e)}class $P extends LP{constructor(){super(...arguments),this.type="html",this.applyWillChange=!0,this.renderInstance=MP}readValueFromInstance(t,n){if(Cs.has(n)){const r=ay(n);return r&&r.default||0}else{const r=VV(t),s=(TA(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return pP(t,n)}build(t,n,r){Cy(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return wy(t,n,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;ht(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class FP extends LP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=vy}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Cs.has(n)){const r=ay(n);return r&&r.default||0}return n=EP.has(n)?n:Rf(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return PP(t,n,r)}build(t,n,r){Ty(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){_P(t,n,r,s)}mount(t){this.isSVGTag=ky(t.tagName),super.mount(t)}}const zRe=(e,t)=>by(e)?new FP(t):new $P(t,{allowProjection:e!==p.Fragment});class GV extends p.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function WV({children:e,isPresent:t}){const n=p.useId(),r=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=p.useContext(Gc);return p.useInsertionEffect(()=>{const{width:o,height:c,top:l,left:u}=s.current;if(t||!r.current||!o||!c)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return a&&(d.nonce=a),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${c}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),i.jsx(GV,{isPresent:t,childRef:r,sizeRef:s,children:p.cloneElement(e,{ref:r})})}const HV=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o})=>{const c=Ro(zV),l=p.useId(),u=p.useMemo(()=>({id:l,initial:t,isPresent:n,custom:s,onExitComplete:d=>{c.set(d,!0);for(const f of c.values())if(!f)return;r&&r()},register:d=>(c.set(d,!1),()=>c.delete(d))}),a?[Math.random()]:[n]);return p.useMemo(()=>{c.forEach((d,f)=>c.set(f,!1))},[n]),p.useEffect(()=>{!n&&!c.size&&r&&r()},[n]),o==="popLayout"&&(e=i.jsx(WV,{isPresent:n,children:e})),i.jsx(Vc.Provider,{value:u,children:e})};function zV(){return new Map}const Rl=e=>e.key||"";function R1(e){const t=[];return p.Children.forEach(e,n=>{p.isValidElement(n)&&t.push(n)}),t}const qRe=({children:e,exitBeforeEnter:t,custom:n,initial:r=!0,onExitComplete:s,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const c=p.useMemo(()=>R1(e),[e]),l=c.map(Rl),u=p.useRef(!0),d=p.useRef(c),f=Ro(()=>new Map),[m,h]=p.useState(c),[g,v]=p.useState(c);Wc(()=>{u.current=!1,d.current=c;for(let x=0;x<g.length;x++){const w=Rl(g[x]);l.includes(w)?f.delete(w):f.get(w)!==!0&&f.set(w,!1)}},[g,l.length,l.join("-")]);const y=[];if(c!==m){let x=[...c];for(let w=0;w<g.length;w++){const C=g[w],T=Rl(C);l.includes(T)||(x.splice(w,0,C),y.push(C))}o==="wait"&&y.length&&(x=y),v(R1(x)),h(c);return}const{forceRender:b}=p.useContext(yy);return i.jsx(i.Fragment,{children:g.map(x=>{const w=Rl(x),C=c===g||l.includes(w),T=()=>{if(f.has(w))f.set(w,!0);else return;let M=!0;f.forEach(_=>{_||(M=!1)}),M&&(b?.(),v(d.current),s&&s())};return i.jsx(HV,{isPresent:C,initial:!u.current||r?void 0:!1,custom:C?void 0:n,presenceAffectsLayout:a,mode:o,onExitComplete:C?void 0:T,children:x},w)})})};function BP(e){const t=Ro(()=>rr(e)),{isStatic:n}=p.useContext(Gc);if(n){const[,r]=p.useState(e);p.useEffect(()=>t.on("change",r),[])}return t}function UP(e,t){const n=BP(t()),r=()=>n.set(t());return r(),Wc(()=>{const s=()=>Pe.preRender(r,!1,!0),a=e.map(o=>o.on("change",s));return()=>{a.forEach(o=>o()),Ir(r)}}),n}const qV=e=>e&&typeof e=="object"&&e.mix,YV=e=>qV(e)?e.mix:void 0;function KV(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=e[1+n],a=e[2+n],o=e[3+n],c=dy(s,a,{mixer:YV(a[0]),...o});return t?c(r):c}function XV(e){Di.current=[],e();const t=UP(Di.current,e);return Di.current=void 0,t}function YRe(e,t,n,r){if(typeof e=="function")return XV(e);const s=typeof t=="function"?t:KV(t,n,r);return Array.isArray(e)?D1(e,s):D1([e],([a])=>s(a))}function D1(e,t){const n=Ro(()=>[]);return UP(e,()=>{n.length=0;const r=e.length;for(let s=0;s<r;s++)n[s]=e[s].get();return t(n)})}function L1(e){return typeof e=="number"?e:parseFloat(e)}function KRe(e,t={}){const{isStatic:n}=p.useContext(Gc),r=p.useRef(null),s=BP(ht(e)?L1(e.get()):e),a=p.useRef(s.get()),o=p.useRef(()=>{}),c=()=>{const u=r.current;u&&u.time===0&&u.sample(ms.delta),l(),r.current=IB({keyframes:[s.get(),a.current],velocity:s.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:o.current})},l=()=>{r.current&&r.current.stop()};return p.useInsertionEffect(()=>s.attach((u,d)=>n?d(u):(a.current=u,o.current=d,Pe.update(c),s.get()),l),[JSON.stringify(t)]),Wc(()=>{if(ht(e))return e.on("change",u=>s.set(L1(u)))},[s]),s}function XRe(e,t,n){p.useInsertionEffect(()=>e.on(t,n),[e,t,n])}function Ey(e,t,n){var r;if(typeof e=="string"){let s=document;n?((r=n[e])!==null&&r!==void 0||(n[e]=s.querySelectorAll(e)),e=n[e]):e=s.querySelectorAll(e)}else e instanceof Element&&(e=[e]);return Array.from(e||[])}const Mu=new WeakMap;let qr;function QV(e,t){if(t){const{inlineSize:n,blockSize:r}=t[0];return{width:n,height:r}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function ZV({target:e,contentRect:t,borderBoxSize:n}){var r;(r=Mu.get(e))===null||r===void 0||r.forEach(s=>{s({target:e,contentSize:t,get size(){return QV(e,n)}})})}function JV(e){e.forEach(ZV)}function eG(){typeof ResizeObserver>"u"||(qr=new ResizeObserver(JV))}function tG(e,t){qr||eG();const n=Ey(e);return n.forEach(r=>{let s=Mu.get(r);s||(s=new Set,Mu.set(r,s)),s.add(t),qr?.observe(r)}),()=>{n.forEach(r=>{const s=Mu.get(r);s?.delete(t),s?.size||qr?.unobserve(r)})}}const Eu=new Set;let Li;function nG(){Li=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};Eu.forEach(n=>n(t))},window.addEventListener("resize",Li)}function rG(e){return Eu.add(e),Li||nG(),()=>{Eu.delete(e),!Eu.size&&Li&&(Li=void 0)}}function sG(e,t){return typeof e=="function"?rG(e):tG(e,t)}const aG=50,$1=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),oG=()=>({time:0,x:$1(),y:$1()}),iG={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function F1(e,t,n,r){const s=n[t],{length:a,position:o}=iG[t],c=s.current,l=n.time;s.current=e[`scroll${o}`],s.scrollLength=e[`scroll${a}`]-e[`client${a}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=ia(0,s.scrollLength,s.current);const u=r-l;s.velocity=u>aG?0:oy(s.current-c,u)}function cG(e,t,n){F1(e,"x",t,n),F1(e,"y",t,n),t.time=n}function lG(e,t){const n={x:0,y:0};let r=e;for(;r&&r!==t;)if(r instanceof HTMLElement)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;else if(r.tagName==="svg"){const s=r.getBoundingClientRect();r=r.parentElement;const a=r.getBoundingClientRect();n.x+=s.left-a.left,n.y+=s.top-a.top}else if(r instanceof SVGGraphicsElement){const{x:s,y:a}=r.getBBox();n.x+=s,n.y+=a;let o=null,c=r.parentNode;for(;!o;)c.tagName==="svg"&&(o=c),c=r.parentNode;r=o}else break;return n}const uG={Enter:[[0,1],[1,1]],Exit:[[0,0],[1,0]],Any:[[1,0],[0,1]],All:[[0,0],[1,1]]},wg={start:0,center:.5,end:1};function B1(e,t,n=0){let r=0;if(e in wg&&(e=wg[e]),typeof e=="string"){const s=parseFloat(e);e.endsWith("px")?r=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?r=s/100*document.documentElement.clientWidth:e.endsWith("vh")?r=s/100*document.documentElement.clientHeight:e=s}return typeof e=="number"&&(r=t*e),n+r}const dG=[0,0];function fG(e,t,n,r){let s=Array.isArray(e)?e:dG,a=0,o=0;return typeof e=="number"?s=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,wg[e]?e:"0"]),a=B1(s[0],n,r),o=B1(s[1],t),a-o}const mG={x:0,y:0};function pG(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function hG(e,t,n){const{offset:r=uG.All}=n,{target:s=e,axis:a="y"}=n,o=a==="y"?"height":"width",c=s!==e?lG(s,e):mG,l=s===e?{width:e.scrollWidth,height:e.scrollHeight}:pG(s),u={width:e.clientWidth,height:e.clientHeight};t[a].offset.length=0;let d=!t[a].interpolate;const f=r.length;for(let m=0;m<f;m++){const h=fG(r[m],u[o],l[o],c[a]);!d&&h!==t[a].interpolatorOffsets[m]&&(d=!0),t[a].offset[m]=h}d&&(t[a].interpolate=dy(t[a].offset,fy(r)),t[a].interpolatorOffsets=[...t[a].offset]),t[a].progress=t[a].interpolate(t[a].current)}function gG(e,t=e,n){if(n.x.targetOffset=0,n.y.targetOffset=0,t!==e){let r=t;for(;r&&r!==e;)n.x.targetOffset+=r.offsetLeft,n.y.targetOffset+=r.offsetTop,r=r.offsetParent}n.x.targetLength=t===e?t.scrollWidth:t.clientWidth,n.y.targetLength=t===e?t.scrollHeight:t.clientHeight,n.x.containerLength=e.clientWidth,n.y.containerLength=e.clientHeight}function vG(e,t,n,r={}){return{measure:()=>gG(e,r.target,n),update:s=>{cG(e,n,s),(r.offset||r.target)&&hG(e,n,r)},notify:()=>t(n)}}const ci=new WeakMap,U1=new WeakMap,up=new WeakMap,V1=e=>e===document.documentElement?window:e;function yG(e,{container:t=document.documentElement,...n}={}){let r=up.get(t);r||(r=new Set,up.set(t,r));const s=oG(),a=vG(t,e,s,n);if(r.add(a),!ci.has(t)){const c=()=>{for(const m of r)m.measure()},l=()=>{for(const m of r)m.update(ms.timestamp)},u=()=>{for(const m of r)m.notify()},d=()=>{Pe.read(c,!1,!0),Pe.read(l,!1,!0),Pe.update(u,!1,!0)};ci.set(t,d);const f=V1(t);window.addEventListener("resize",d,{passive:!0}),t!==document.documentElement&&U1.set(t,sG(t,d)),f.addEventListener("scroll",d,{passive:!0})}const o=ci.get(t);return Pe.read(o,!1,!0),()=>{var c;Ir(o);const l=up.get(t);if(!l||(l.delete(a),l.size))return;const u=ci.get(t);ci.delete(t),u&&(V1(t).removeEventListener("scroll",u),(c=U1.get(t))===null||c===void 0||c(),window.removeEventListener("resize",u))}}function G1(e,t){y8(!!(!t||t.current))}const xG=()=>({scrollX:rr(0),scrollY:rr(0),scrollXProgress:rr(0),scrollYProgress:rr(0)});function QRe({container:e,target:t,layoutEffect:n=!0,...r}={}){const s=Ro(xG);return(n?Wc:p.useEffect)(()=>(G1("target",t),G1("container",e),yG(({x:o,y:c})=>{s.scrollX.set(o.current),s.scrollXProgress.set(o.progress),s.scrollY.set(c.current),s.scrollYProgress.set(c.progress)},{...r,container:e?.current||void 0,target:t?.current||void 0})),[e,t,JSON.stringify(r.offset)]),s}function ZRe(){!My.current&&DP();const[e]=p.useState(rd.current);return e}function bG(e){return typeof e=="object"&&!Array.isArray(e)}function wG(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=qU(e)?new FP(t):new $P(t);n.mount(e),ec.set(e,n)}function SG(e,t=100){const n=iy({keyframes:[0,t],...e}),r=Math.min(XA(n),hg);return{type:"keyframes",ease:s=>n.next(r*s).value/t,duration:ar(r)}}function W1(e,t,n,r){var s;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:(s=r.get(t))!==null&&s!==void 0?s:e}const CG=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e};function TG(e,t){return VA(e)?e[CG(0,e.length,t)]:e}function kG(e,t,n){for(let r=0;r<e.length;r++){const s=e[r];s.at>t&&s.at<n&&(Uc(e,s),r--)}}function MG(e,t,n,r,s,a){kG(e,s,a);for(let o=0;o<t.length;o++)e.push({value:t[o],at:pt(s,a,r[o]),easing:TG(n,o)})}function EG(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const _G="easeInOut";function AG(e,{defaultTransition:t={},...n}={},r){const s=t.duration||.3,a=new Map,o=new Map,c={},l=new Map;let u=0,d=0,f=0;for(let m=0;m<e.length;m++){const h=e[m];if(typeof h=="string"){l.set(h,d);continue}else if(!Array.isArray(h)){l.set(h.name,W1(d,h.at,u,l));continue}let[g,v,y={}]=h;y.at!==void 0&&(d=W1(d,y.at,u,l));let b=0;const x=(w,C,T,M=0,_=0)=>{const k=PG(w),{delay:I=0,times:j=fy(k),type:F="keyframes",...U}=C;let{ease:B=t.ease||"easeOut",duration:N}=C;const $=typeof I=="function"?I(M,_):I,H=k.length;if(H<=2&&F==="spring"){let V=100;if(H===2&&NG(k)){const te=k[1]-k[0];V=Math.abs(te)}const X={...U};N!==void 0&&(X.duration=sr(N));const re=SG(X,V);B=re.ease,N=re.duration}N??(N=s);const Y=d+$,O=Y+N;j.length===1&&j[0]===0&&(j[1]=1);const R=j.length-k.length;R>0&&KA(j,R),k.length===1&&k.unshift(null),MG(T,k,B,j,Y,O),b=Math.max($+N,b),f=Math.max(O,f)};if(ht(g)){const w=H1(g,o);x(v,y,z1("default",w))}else{const w=Ey(g,r,c),C=w.length;for(let T=0;T<C;T++){v=v,y=y;const M=w[T],_=H1(M,o);for(const k in v)x(v[k],jG(y,k),z1(k,_),T,C)}}u=d,d+=b}return o.forEach((m,h)=>{for(const g in m){const v=m[g];v.sort(EG);const y=[],b=[],x=[];for(let C=0;C<v.length;C++){const{at:T,value:M,easing:_}=v[C];y.push(M),b.push(ia(0,f,T)),x.push(_||"easeOut")}b[0]!==0&&(b.unshift(0),y.unshift(y[0]),x.unshift(_G)),b[b.length-1]!==1&&(b.push(1),y.push(null)),a.has(h)||a.set(h,{keyframes:{},transition:{}});const w=a.get(h);w.keyframes[g]=y,w.transition[g]={...t,duration:f,ease:x,times:b,...n}}}),a}function H1(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function z1(e,t){return t[e]||(t[e]=[]),t[e]}function PG(e){return Array.isArray(e)?e:[e]}function jG(e,t){return e[t]?{...e,...e[t]}:{...e}}const IG=e=>typeof e=="number",NG=e=>e.every(IG);function VP(e,t,n,r){const s=Ey(e),a=s.length,o=[];for(let c=0;c<a;c++){const l=s[c];ec.has(l)||wG(l);const u=ec.get(l),d={...n};typeof d.delay=="function"&&(d.delay=d.delay(c,a)),o.push(...gy(u,{...t,transition:d},{}))}return new py(o)}const OG=e=>Array.isArray(e)&&Array.isArray(e[0]);function RG(e,t,n){const r=[];return AG(e,t,n).forEach(({keyframes:a,transition:o},c)=>{let l;ht(c)?l=wP(c,a.default,o.default):l=VP(c,a,o),r.push(l)}),new py(r)}const DG=e=>{function t(n,r,s){let a;return OG(n)?a=RG(n,r,e):bG(r)?a=VP(n,r,s):a=wP(n,r,s),a}return t},JRe=DG();function LG(e,t){if(e==="first")return 0;{const n=t-1;return e==="last"?n:n/2}}function e5e(e=.1,{startDelay:t=0,from:n=0,ease:r}={}){return(s,a)=>{const o=typeof n=="number"?n:LG(n,a),c=Math.abs(o-s);let l=e*c;if(r){const u=a*e;l=mg(r)(l/u)*u}return t+l}}const $G="_leadingBar_9ia9b_1",FG="_leadingBarScrollAnimation_9ia9b_17",BG="_primary_9ia9b_21",dp={leadingBar:$G,"add-top-shadow":"_add-top-shadow_9ia9b_1",leadingBarScrollAnimation:FG,primary:BG};function UG({disabled:e=!1,track:t}={}){const[n,r]=p.useState(null),s=p.useRef(null),a=p.useRef(null),o=p.useCallback(c=>{if(a.current&&(a.current.disconnect(),a.current=null),s.current=c,e||!c)return;const l=new ResizeObserver(u=>{if(!u.length)return;const d=u[0],{width:f,height:m}=VG(d);p.startTransition(()=>{r(h=>{const g={width:f,height:m};return!h||t==="width"&&h.width!==f||t==="height"&&h.height!==m||h.width!==f||h.height!==m?g:h})})});l.observe(c),a.current=l},[e,t]);return[n,o]}function VG(e){let t,n;if(e.borderBoxSize){const r=Array.isArray(e.borderBoxSize)?e.borderBoxSize[0]:e.borderBoxSize;t=r.inlineSize,n=r.blockSize}else t=e.contentRect.width,n=e.contentRect.height;return{width:t,height:n}}function $i({disableSizeTracking:e,name:t,track:n}){const[r,s]=UG({disabled:n===void 0||e,track:n});let a={};return t&&!e&&n&&r&&(a={[`--${t}-${n}`]:`${r[n==="width"?"width":"height"]}px`}),[a,s,r]}function Sg(e){const{axis:t="horizontal",children:n,className:r,hidden:s,leading:a,overlay:o,ref:c,style:l,type:u,...d}=e,[f,m]=$i(d);return i.jsx("div",{"bar-type":u,hidden:s,"data-testid":`bar-${d.name??"default"}`,className:A("grid gap-bar",t==="vertical"&&"flex-col",a&&[dp.leadingBar,dp.leadingBarScrollAnimation],o==null&&"sticky",o==null&&r,u==="primary"&&dp.primary),ref:c??m,style:{...l,...f},children:o==null?n:i.jsx("div",{className:A("absolute flex w-full flex-col justify-center gap-bar",o==="bottom"&&"bottom-[100%] mb-bar-bottom",r),children:n})})}const GG=p.forwardRef(function({icon:t,mobileIcon:n,className:r,surfaceContext:s="primary",...a},o){return i.jsxs("button",{...a,className:A("h-10 rounded-lg px-2 text-token-text-secondary focus-visible:outline-0 disabled:text-token-text-quaternary",s==="primary"?"focus-visible:bg-token-main-surface-secondary enabled:hover:bg-token-main-surface-secondary":"focus-visible:bg-token-sidebar-surface-secondary enabled:hover:bg-token-sidebar-surface-secondary",r),ref:o,children:[i.jsx(t,{className:A("icon-xl-heavy",{"max-md:hidden":n!=null})}),n?i.jsx(n,{className:"icon-xl-heavy md:hidden"}):null]})});var WG=(e=>(e.Mobile="mobile",e.Small="small",e.Medium="medium",e.Large="large",e.XLarge="xlarge",e))(WG||{});const Do={small:640,medium:768,large:1024,xlarge:1280};function Lo(e){const t=ef(),n=o=>typeof t<"u"?!!t?.matchMedia(o)?.matches:!1,[r,s]=p.useState(n(e));function a(){s(n(e))}return p.useEffect(()=>{const o=t?.matchMedia(e);if(o)return a(),o.addListener?o.addListener(a):o.addEventListener("change",a),()=>{o.removeListener?o.removeListener(a):o.removeEventListener("change",a)}},[e]),r}function $o(){return Lo(`(min-width: ${Do.small}px)`)}function ks(){return Lo(`(min-width: ${Do.medium}px)`)}function HG(e){return e?e.matchMedia(`(min-width: ${Do.medium}px)`).matches:!0}function zG(){return Lo(`(min-width: ${Do.large}px)`)}function qG(){return Lo(`(min-width: ${Do.xlarge}px)`)}function Ms(){return!$o()}function t5e(e){return!e?.matchMedia(`(min-width: ${Do.small}px)`).matches}function GP(){return/iPad|iPhone|iPod/.test(window.navigator.platform)}function WP(){return/Android/.test(window.navigator.userAgent)}function YG(){return GP()||WP()}function KG(){return GP()&&navigator.userAgent.includes("CriOS")}function XG(){return WP()&&navigator.userAgent.includes("Chrome")}function n5e(){return navigator.userAgent.includes("Mac OS X")}function QG(){return navigator.userAgent.includes("Windows_NT")}function ZG(){return navigator.userAgent.includes("Chrome/")&&!/Android|iPhone|iPad/i.test(navigator.userAgent)}function r5e(){const e=$o(),t=ks(),n=zG();return qG()?"xlarge":n?"large":t?"medium":e?"small":"mobile"}function s5e(){return Lo("(prefers-color-scheme: dark)")}function JG(){return Lo("(hover: hover) and (pointer: fine)")}function eW(e,t){try{var n=global,r=n.document;if(typeof r<"u"&&r.createElement&&r.head&&r.head.appendChild){var s=r.querySelector('html meta[name="'.concat(encodeURI(e),'"]'))||r.createElement("meta");s.setAttribute("name",e),s.setAttribute("content",t),r.head.appendChild(s)}}catch{}}function a5e(){eW("react-scroll-to-bottom:version","4.2.0")}var Dl=function(e){return e&&e.Math===Math&&e},qt=Dl(typeof globalThis=="object"&&globalThis)||Dl(typeof window=="object"&&window)||Dl(typeof self=="object"&&self)||Dl(typeof Gt=="object"&&Gt)||function(){return this}()||Gt||Function("return this")(),Et=function(e){try{return!!e()}catch{return!0}},tW=Et,Ff=!tW(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),nW=Ff,HP=Function.prototype,q1=HP.apply,Y1=HP.call,_y=typeof Reflect=="object"&&Reflect.apply||(nW?Y1.bind(q1):function(){return Y1.apply(q1,arguments)}),zP=Ff,qP=Function.prototype,Cg=qP.call,rW=zP&&qP.bind.bind(Cg,Cg),wt=zP?rW:function(e){return function(){return Cg.apply(e,arguments)}},YP=wt,sW=YP({}.toString),aW=YP("".slice),Fo=function(e){return aW(sW(e),8,-1)},oW=Fo,iW=wt,Ay=function(e){if(oW(e)==="Function")return iW(e)},Tg=typeof document=="object"&&document.all,cW=typeof Tg>"u"&&Tg!==void 0,KP={all:Tg,IS_HTMLDDA:cW},XP=KP,lW=XP.all,Yt=XP.IS_HTMLDDA?function(e){return typeof e=="function"||e===lW}:function(e){return typeof e=="function"},Hc={},uW=Et,xn=!uW(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),dW=Ff,Ll=Function.prototype.call,hr=dW?Ll.bind(Ll):function(){return Ll.apply(Ll,arguments)},Py={},QP={}.propertyIsEnumerable,ZP=Object.getOwnPropertyDescriptor,fW=ZP&&!QP.call({1:2},1);Py.f=fW?function(t){var n=ZP(this,t);return!!n&&n.enumerable}:QP;var zc=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},mW=wt,pW=Et,hW=Fo,fp=Object,gW=mW("".split),JP=pW(function(){return!fp("z").propertyIsEnumerable(0)})?function(e){return hW(e)==="String"?gW(e,""):fp(e)}:fp,jy=function(e){return e==null},vW=jy,yW=TypeError,Iy=function(e){if(vW(e))throw yW("Can't call method on "+e);return e},xW=JP,bW=Iy,gr=function(e){return xW(bW(e))},K1=Yt,ej=KP,wW=ej.all,$r=ej.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:K1(e)||e===wW}:function(e){return typeof e=="object"?e!==null:K1(e)},Dt={},mp=Dt,pp=qt,SW=Yt,X1=function(e){return SW(e)?e:void 0},vr=function(e,t){return arguments.length<2?X1(mp[e])||X1(pp[e]):mp[e]&&mp[e][t]||pp[e]&&pp[e][t]},CW=wt,Es=CW({}.isPrototypeOf),tj=typeof navigator<"u"&&String(navigator.userAgent)||"",nj=qt,hp=tj,Q1=nj.process,Z1=nj.Deno,J1=Q1&&Q1.versions||Z1&&Z1.version,eS=J1&&J1.v8,On,sd;eS&&(On=eS.split("."),sd=On[0]>0&&On[0]<4?1:+(On[0]+On[1]));!sd&&hp&&(On=hp.match(/Edge\/(\d+)/),(!On||On[1]>=74)&&(On=hp.match(/Chrome\/(\d+)/),On&&(sd=+On[1])));var Ny=sd,tS=Ny,TW=Et,kW=qt,MW=kW.String,Bo=!!Object.getOwnPropertySymbols&&!TW(function(){var e=Symbol("symbol detection");return!MW(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&tS&&tS<41}),EW=Bo,rj=EW&&!Symbol.sham&&typeof Symbol.iterator=="symbol",_W=vr,AW=Yt,PW=Es,jW=rj,IW=Object,qc=jW?function(e){return typeof e=="symbol"}:function(e){var t=_W("Symbol");return AW(t)&&PW(t.prototype,IW(e))},NW=String,Bf=function(e){try{return NW(e)}catch{return"Object"}},OW=Yt,RW=Bf,DW=TypeError,Oy=function(e){if(OW(e))return e;throw DW(RW(e)+" is not a function")},LW=Oy,$W=jy,Ry=function(e,t){var n=e[t];return $W(n)?void 0:LW(n)},gp=hr,vp=Yt,yp=$r,FW=TypeError,BW=function(e,t){var n,r;if(t==="string"&&vp(n=e.toString)&&!yp(r=gp(n,e))||vp(n=e.valueOf)&&!yp(r=gp(n,e))||t!=="string"&&vp(n=e.toString)&&!yp(r=gp(n,e)))return r;throw FW("Can't convert object to primitive value")},sj={exports:{}},nS=qt,UW=Object.defineProperty,VW=function(e,t){try{UW(nS,e,{value:t,configurable:!0,writable:!0})}catch{nS[e]=t}return t},GW=qt,WW=VW,rS="__core-js_shared__",HW=GW[rS]||WW(rS,{}),Dy=HW,sS=Dy;(sj.exports=function(e,t){return sS[e]||(sS[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.32.2",mode:"pure",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"});var Uo=sj.exports,zW=Iy,qW=Object,_s=function(e){return qW(zW(e))},YW=wt,KW=_s,XW=YW({}.hasOwnProperty),bn=Object.hasOwn||function(t,n){return XW(KW(t),n)},QW=wt,ZW=0,JW=Math.random(),eH=QW(1 .toString),Ly=function(e){return"Symbol("+(e===void 0?"":e)+")_"+eH(++ZW+JW,36)},tH=qt,nH=Uo,aS=bn,rH=Ly,sH=Bo,aH=rj,Qa=tH.Symbol,xp=nH("wks"),oH=aH?Qa.for||Qa:Qa&&Qa.withoutSetter||rH,St=function(e){return aS(xp,e)||(xp[e]=sH&&aS(Qa,e)?Qa[e]:oH("Symbol."+e)),xp[e]},iH=hr,oS=$r,iS=qc,cH=Ry,lH=BW,uH=St,dH=TypeError,fH=uH("toPrimitive"),mH=function(e,t){if(!oS(e)||iS(e))return e;var n=cH(e,fH),r;if(n){if(t===void 0&&(t="default"),r=iH(n,e,t),!oS(r)||iS(r))return r;throw dH("Can't convert object to primitive value")}return t===void 0&&(t="number"),lH(e,t)},pH=mH,hH=qc,Uf=function(e){var t=pH(e,"string");return hH(t)?t:t+""},gH=qt,cS=$r,kg=gH.document,vH=cS(kg)&&cS(kg.createElement),aj=function(e){return vH?kg.createElement(e):{}},yH=xn,xH=Et,bH=aj,oj=!yH&&!xH(function(){return Object.defineProperty(bH("div"),"a",{get:function(){return 7}}).a!==7}),wH=xn,SH=hr,CH=Py,TH=zc,kH=gr,MH=Uf,EH=bn,_H=oj,lS=Object.getOwnPropertyDescriptor;Hc.f=wH?lS:function(t,n){if(t=kH(t),n=MH(n),_H)try{return lS(t,n)}catch{}if(EH(t,n))return TH(!SH(CH.f,t,n),t[n])};var AH=Et,PH=Yt,jH=/#|\.prototype\./,Yc=function(e,t){var n=NH[IH(e)];return n===RH?!0:n===OH?!1:PH(t)?AH(t):!!t},IH=Yc.normalize=function(e){return String(e).replace(jH,".").toLowerCase()},NH=Yc.data={},OH=Yc.NATIVE="N",RH=Yc.POLYFILL="P",DH=Yc,uS=Ay,LH=Oy,$H=Ff,FH=uS(uS.bind),$y=function(e,t){return LH(e),t===void 0?e:$H?FH(e,t):function(){return e.apply(t,arguments)}},Gn={},BH=xn,UH=Et,ij=BH&&UH(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),VH=$r,GH=String,WH=TypeError,As=function(e){if(VH(e))return e;throw WH(GH(e)+" is not an object")},HH=xn,zH=oj,qH=ij,$l=As,dS=Uf,YH=TypeError,bp=Object.defineProperty,KH=Object.getOwnPropertyDescriptor,wp="enumerable",Sp="configurable",Cp="writable";Gn.f=HH?qH?function(t,n,r){if($l(t),n=dS(n),$l(r),typeof t=="function"&&n==="prototype"&&"value"in r&&Cp in r&&!r[Cp]){var s=KH(t,n);s&&s[Cp]&&(t[n]=r.value,r={configurable:Sp in r?r[Sp]:s[Sp],enumerable:wp in r?r[wp]:s[wp],writable:!1})}return bp(t,n,r)}:bp:function(t,n,r){if($l(t),n=dS(n),$l(r),zH)try{return bp(t,n,r)}catch{}if("get"in r||"set"in r)throw YH("Accessors not supported");return"value"in r&&(t[n]=r.value),t};var XH=xn,QH=Gn,ZH=zc,Kc=XH?function(e,t,n){return QH.f(e,t,ZH(1,n))}:function(e,t,n){return e[t]=n,e},Fl=qt,JH=_y,ez=Ay,tz=Yt,nz=Hc.f,rz=DH,Aa=Dt,sz=$y,Pa=Kc,fS=bn,az=function(e){var t=function(n,r,s){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,s)}return JH(e,this,arguments)};return t.prototype=e.prototype,t},Ue=function(e,t){var n=e.target,r=e.global,s=e.stat,a=e.proto,o=r?Fl:s?Fl[n]:(Fl[n]||{}).prototype,c=r?Aa:Aa[n]||Pa(Aa,n,{})[n],l=c.prototype,u,d,f,m,h,g,v,y,b;for(m in t)u=rz(r?m:n+(s?".":"#")+m,e.forced),d=!u&&o&&fS(o,m),g=c[m],d&&(e.dontCallGetSet?(b=nz(o,m),v=b&&b.value):v=o[m]),h=d&&v?v:t[m],!(d&&typeof g==typeof h)&&(e.bind&&d?y=sz(h,Fl):e.wrap&&d?y=az(h):a&&tz(h)?y=ez(h):y=h,(e.sham||h&&h.sham||g&&g.sham)&&Pa(y,"sham",!0),Pa(c,m,y),a&&(f=n+"Prototype",fS(Aa,f)||Pa(Aa,f,{}),Pa(Aa[f],m,h),e.real&&l&&(u||!l[m])&&Pa(l,m,h)))},oz=Fo,Vo=Array.isArray||function(t){return oz(t)==="Array"},iz=Ue,cz=Vo;iz({target:"Array",stat:!0},{isArray:cz});var lz=Dt,uz=lz.Array.isArray,dz=uz,cj=dz,fz=cj,mz=fz,pz=mz,hz=pz,gz=hz,vz=gz;const lj=xe(vz);function yz(e){if(lj(e))return e}var xz=Math.ceil,bz=Math.floor,wz=Math.trunc||function(t){var n=+t;return(n>0?bz:xz)(n)},Sz=wz,Vf=function(e){var t=+e;return t!==t||t===0?0:Sz(t)},Cz=Vf,Tz=Math.min,kz=function(e){return e>0?Tz(Cz(e),9007199254740991):0},Mz=kz,xa=function(e){return Mz(e.length)},Ez=TypeError,_z=9007199254740991,uj=function(e){if(e>_z)throw Ez("Maximum allowed index exceeded");return e},Az=Uf,Pz=Gn,jz=zc,Go=function(e,t,n){var r=Az(t);r in e?Pz.f(e,r,jz(0,n)):e[r]=n},Iz=St,Nz=Iz("toStringTag"),dj={};dj[Nz]="z";var Fy=String(dj)==="[object z]",Oz=Fy,Rz=Yt,_u=Fo,Dz=St,Lz=Dz("toStringTag"),$z=Object,Fz=_u(function(){return arguments}())==="Arguments",Bz=function(e,t){try{return e[t]}catch{}},Wo=Oz?_u:function(e){var t,n,r;return e===void 0?"Undefined":e===null?"Null":typeof(n=Bz(t=$z(e),Lz))=="string"?n:Fz?_u(t):(r=_u(t))==="Object"&&Rz(t.callee)?"Arguments":r},Uz=wt,Vz=Yt,Mg=Dy,Gz=Uz(Function.toString);Vz(Mg.inspectSource)||(Mg.inspectSource=function(e){return Gz(e)});var Wz=Mg.inspectSource,Hz=wt,zz=Et,fj=Yt,qz=Wo,Yz=vr,Kz=Wz,mj=function(){},Xz=[],pj=Yz("Reflect","construct"),By=/^\s*(?:class|function)\b/,Qz=Hz(By.exec),Zz=!By.exec(mj),li=function(t){if(!fj(t))return!1;try{return pj(mj,Xz,t),!0}catch{return!1}},hj=function(t){if(!fj(t))return!1;switch(qz(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Zz||!!Qz(By,Kz(t))}catch{return!0}};hj.sham=!0;var Uy=!pj||zz(function(){var e;return li(li.call)||!li(Object)||!li(function(){e=!0})||e})?hj:li,mS=Vo,Jz=Uy,eq=$r,tq=St,nq=tq("species"),pS=Array,rq=function(e){var t;return mS(e)&&(t=e.constructor,Jz(t)&&(t===pS||mS(t.prototype))?t=void 0:eq(t)&&(t=t[nq],t===null&&(t=void 0))),t===void 0?pS:t},sq=rq,Vy=function(e,t){return new(sq(e))(t===0?0:t)},aq=Et,oq=St,iq=Ny,cq=oq("species"),Gf=function(e){return iq>=51||!aq(function(){var t=[],n=t.constructor={};return n[cq]=function(){return{foo:1}},t[e](Boolean).foo!==1})},lq=Ue,uq=Et,dq=Vo,fq=$r,mq=_s,pq=xa,hS=uj,gS=Go,hq=Vy,gq=Gf,vq=St,yq=Ny,gj=vq("isConcatSpreadable"),xq=yq>=51||!uq(function(){var e=[];return e[gj]=!1,e.concat()[0]!==e}),bq=function(e){if(!fq(e))return!1;var t=e[gj];return t!==void 0?!!t:dq(e)},wq=!xq||!gq("concat");lq({target:"Array",proto:!0,arity:1,forced:wq},{concat:function(t){var n=mq(this),r=hq(n,0),s=0,a,o,c,l,u;for(a=-1,c=arguments.length;a<c;a++)if(u=a===-1?n:arguments[a],bq(u))for(l=pq(u),hS(s+l),o=0;o<l;o++,s++)o in u&&gS(r,s,u[o]);else hS(s+1),gS(r,s++,u);return r.length=s,r}});var Sq=Wo,Cq=String,Xc=function(e){if(Sq(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return Cq(e)},Wf={},Tq=Vf,kq=Math.max,Mq=Math.min,Hf=function(e,t){var n=Tq(e);return n<0?kq(n+t,0):Mq(n,t)},Eq=gr,_q=Hf,Aq=xa,vS=function(e){return function(t,n,r){var s=Eq(t),a=Aq(s),o=_q(r,a),c;if(e&&n!==n){for(;a>o;)if(c=s[o++],c!==c)return!0}else for(;a>o;o++)if((e||o in s)&&s[o]===n)return e||o||0;return!e&&-1}},vj={includes:vS(!0),indexOf:vS(!1)},zf={},Pq=wt,Tp=bn,jq=gr,Iq=vj.indexOf,Nq=zf,yS=Pq([].push),yj=function(e,t){var n=jq(e),r=0,s=[],a;for(a in n)!Tp(Nq,a)&&Tp(n,a)&&yS(s,a);for(;t.length>r;)Tp(n,a=t[r++])&&(~Iq(s,a)||yS(s,a));return s},Gy=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Oq=yj,Rq=Gy,Wy=Object.keys||function(t){return Oq(t,Rq)},Dq=xn,Lq=ij,$q=Gn,Fq=As,Bq=gr,Uq=Wy;Wf.f=Dq&&!Lq?Object.defineProperties:function(t,n){Fq(t);for(var r=Bq(n),s=Uq(n),a=s.length,o=0,c;a>o;)$q.f(t,c=s[o++],r[c]);return t};var Vq=vr,Gq=Vq("document","documentElement"),Wq=Uo,Hq=Ly,xS=Wq("keys"),qf=function(e){return xS[e]||(xS[e]=Hq(e))},zq=As,qq=Wf,bS=Gy,Yq=zf,Kq=Gq,Xq=aj,Qq=qf,wS=">",SS="<",Eg="prototype",_g="script",xj=Qq("IE_PROTO"),kp=function(){},bj=function(e){return SS+_g+wS+e+SS+"/"+_g+wS},CS=function(e){e.write(bj("")),e.close();var t=e.parentWindow.Object;return e=null,t},Zq=function(){var e=Xq("iframe"),t="java"+_g+":",n;return e.style.display="none",Kq.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(bj("document.F=Object")),n.close(),n.F},Bl,Au=function(){try{Bl=new ActiveXObject("htmlfile")}catch{}Au=typeof document<"u"?document.domain&&Bl?CS(Bl):Zq():CS(Bl);for(var e=bS.length;e--;)delete Au[Eg][bS[e]];return Au()};Yq[xj]=!0;var Hy=Object.create||function(t,n){var r;return t!==null?(kp[Eg]=zq(t),r=new kp,kp[Eg]=null,r[xj]=t):r=Au(),n===void 0?r:qq.f(r,n)},Yf={},Jq=yj,eY=Gy,tY=eY.concat("length","prototype");Yf.f=Object.getOwnPropertyNames||function(t){return Jq(t,tY)};var wj={},TS=Hf,nY=xa,rY=Go,sY=Array,aY=Math.max,oY=function(e,t,n){for(var r=nY(e),s=TS(t,r),a=TS(n===void 0?r:n,r),o=sY(aY(a-s,0)),c=0;s<a;s++,c++)rY(o,c,e[s]);return o.length=c,o},iY=Fo,cY=gr,Sj=Yf.f,lY=oY,Cj=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],uY=function(e){try{return Sj(e)}catch{return lY(Cj)}};wj.f=function(t){return Cj&&iY(t)==="Window"?uY(t):Sj(cY(t))};var Kf={};Kf.f=Object.getOwnPropertySymbols;var dY=Kc,Xf=function(e,t,n,r){return r&&r.enumerable?e[t]=n:dY(e,t,n),e},fY=Gn,mY=function(e,t,n){return fY.f(e,t,n)},zy={},pY=St;zy.f=pY;var kS=Dt,hY=bn,gY=zy,vY=Gn.f,ut=function(e){var t=kS.Symbol||(kS.Symbol={});hY(t,e)||vY(t,e,{value:gY.f(e)})},yY=hr,xY=vr,bY=St,wY=Xf,Tj=function(){var e=xY("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=bY("toPrimitive");t&&!t[r]&&wY(t,r,function(s){return yY(n,this)},{arity:1})},SY=Fy,CY=Wo,TY=SY?{}.toString:function(){return"[object "+CY(this)+"]"},kY=Fy,MY=Gn.f,EY=Kc,_Y=bn,AY=TY,PY=St,MS=PY("toStringTag"),Qc=function(e,t,n,r){if(e){var s=n?e:e.prototype;_Y(s,MS)||MY(s,MS,{configurable:!0,value:t}),r&&!kY&&EY(s,"toString",AY)}},jY=qt,IY=Yt,ES=jY.WeakMap,NY=IY(ES)&&/native code/.test(String(ES)),OY=NY,kj=qt,RY=$r,DY=Kc,Mp=bn,Ep=Dy,LY=qf,$Y=zf,_S="Object already initialized",Ag=kj.TypeError,FY=kj.WeakMap,ad,tc,od,BY=function(e){return od(e)?tc(e):ad(e,{})},UY=function(e){return function(t){var n;if(!RY(t)||(n=tc(t)).type!==e)throw Ag("Incompatible receiver, "+e+" required");return n}};if(OY||Ep.state){var Yn=Ep.state||(Ep.state=new FY);Yn.get=Yn.get,Yn.has=Yn.has,Yn.set=Yn.set,ad=function(e,t){if(Yn.has(e))throw Ag(_S);return t.facade=e,Yn.set(e,t),t},tc=function(e){return Yn.get(e)||{}},od=function(e){return Yn.has(e)}}else{var ja=LY("state");$Y[ja]=!0,ad=function(e,t){if(Mp(e,ja))throw Ag(_S);return t.facade=e,DY(e,ja,t),t},tc=function(e){return Mp(e,ja)?e[ja]:{}},od=function(e){return Mp(e,ja)}}var qy={set:ad,get:tc,has:od,enforce:BY,getterFor:UY},VY=$y,GY=wt,WY=JP,HY=_s,zY=xa,qY=Vy,AS=GY([].push),Vr=function(e){var t=e===1,n=e===2,r=e===3,s=e===4,a=e===6,o=e===7,c=e===5||a;return function(l,u,d,f){for(var m=HY(l),h=WY(m),g=VY(u,d),v=zY(h),y=0,b=f||qY,x=t?b(l,v):n||o?b(l,0):void 0,w,C;v>y;y++)if((c||y in h)&&(w=h[y],C=g(w,y,m),e))if(t)x[y]=C;else if(C)switch(e){case 3:return!0;case 5:return w;case 6:return y;case 2:AS(x,w)}else switch(e){case 4:return!1;case 7:AS(x,w)}return a?-1:r||s?s:x}},Yy={forEach:Vr(0),map:Vr(1),filter:Vr(2),some:Vr(3),every:Vr(4),find:Vr(5),findIndex:Vr(6),filterReject:Vr(7)},Qf=Ue,Ky=qt,Xy=hr,YY=wt,vo=xn,yo=Bo,KY=Et,Tt=bn,XY=Es,Pg=As,Zf=gr,Qy=Uf,QY=Xc,jg=zc,nc=Hy,Mj=Wy,ZY=Yf,Ej=wj,JY=Kf,_j=Hc,Aj=Gn,eK=Wf,Pj=Py,PS=Xf,tK=mY,Zy=Uo,nK=qf,jj=zf,jS=Ly,rK=St,sK=zy,aK=ut,oK=Tj,iK=Qc,Ij=qy,Jf=Yy.forEach,sn=nK("hidden"),em="Symbol",rc="prototype",cK=Ij.set,IS=Ij.getterFor(em),$n=Object[rc],Zs=Ky.Symbol,Ti=Zs&&Zs[rc],lK=Ky.TypeError,_p=Ky.QObject,Nj=_j.f,Bs=Aj.f,Oj=Ej.f,uK=Pj.f,Rj=YY([].push),Or=Zy("symbols"),Zc=Zy("op-symbols"),dK=Zy("wks"),Ig=!_p||!_p[rc]||!_p[rc].findChild,Ng=vo&&KY(function(){return nc(Bs({},"a",{get:function(){return Bs(this,"a",{value:7}).a}})).a!==7})?function(e,t,n){var r=Nj($n,t);r&&delete $n[t],Bs(e,t,n),r&&e!==$n&&Bs($n,t,r)}:Bs,Ap=function(e,t){var n=Or[e]=nc(Ti);return cK(n,{type:em,tag:e,description:t}),vo||(n.description=t),n},tm=function(t,n,r){t===$n&&tm(Zc,n,r),Pg(t);var s=Qy(n);return Pg(r),Tt(Or,s)?(r.enumerable?(Tt(t,sn)&&t[sn][s]&&(t[sn][s]=!1),r=nc(r,{enumerable:jg(0,!1)})):(Tt(t,sn)||Bs(t,sn,jg(1,{})),t[sn][s]=!0),Ng(t,s,r)):Bs(t,s,r)},Jy=function(t,n){Pg(t);var r=Zf(n),s=Mj(r).concat(Fj(r));return Jf(s,function(a){(!vo||Xy(Dj,r,a))&&tm(t,a,r[a])}),t},fK=function(t,n){return n===void 0?nc(t):Jy(nc(t),n)},Dj=function(t){var n=Qy(t),r=Xy(uK,this,n);return this===$n&&Tt(Or,n)&&!Tt(Zc,n)?!1:r||!Tt(this,n)||!Tt(Or,n)||Tt(this,sn)&&this[sn][n]?r:!0},Lj=function(t,n){var r=Zf(t),s=Qy(n);if(!(r===$n&&Tt(Or,s)&&!Tt(Zc,s))){var a=Nj(r,s);return a&&Tt(Or,s)&&!(Tt(r,sn)&&r[sn][s])&&(a.enumerable=!0),a}},$j=function(t){var n=Oj(Zf(t)),r=[];return Jf(n,function(s){!Tt(Or,s)&&!Tt(jj,s)&&Rj(r,s)}),r},Fj=function(e){var t=e===$n,n=Oj(t?Zc:Zf(e)),r=[];return Jf(n,function(s){Tt(Or,s)&&(!t||Tt($n,s))&&Rj(r,Or[s])}),r};yo||(Zs=function(){if(XY(Ti,this))throw lK("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:QY(arguments[0]),n=jS(t),r=function(s){this===$n&&Xy(r,Zc,s),Tt(this,sn)&&Tt(this[sn],n)&&(this[sn][n]=!1),Ng(this,n,jg(1,s))};return vo&&Ig&&Ng($n,n,{configurable:!0,set:r}),Ap(n,t)},Ti=Zs[rc],PS(Ti,"toString",function(){return IS(this).tag}),PS(Zs,"withoutSetter",function(e){return Ap(jS(e),e)}),Pj.f=Dj,Aj.f=tm,eK.f=Jy,_j.f=Lj,ZY.f=Ej.f=$j,JY.f=Fj,sK.f=function(e){return Ap(rK(e),e)},vo&&tK(Ti,"description",{configurable:!0,get:function(){return IS(this).description}}));Qf({global:!0,constructor:!0,wrap:!0,forced:!yo,sham:!yo},{Symbol:Zs});Jf(Mj(dK),function(e){aK(e)});Qf({target:em,stat:!0,forced:!yo},{useSetter:function(){Ig=!0},useSimple:function(){Ig=!1}});Qf({target:"Object",stat:!0,forced:!yo,sham:!vo},{create:fK,defineProperty:tm,defineProperties:Jy,getOwnPropertyDescriptor:Lj});Qf({target:"Object",stat:!0,forced:!yo},{getOwnPropertyNames:$j});oK();iK(Zs,em);jj[sn]=!0;var mK=Bo,Bj=mK&&!!Symbol.for&&!!Symbol.keyFor,pK=Ue,hK=vr,gK=bn,vK=Xc,Uj=Uo,yK=Bj,Pp=Uj("string-to-symbol-registry"),xK=Uj("symbol-to-string-registry");pK({target:"Symbol",stat:!0,forced:!yK},{for:function(e){var t=vK(e);if(gK(Pp,t))return Pp[t];var n=hK("Symbol")(t);return Pp[t]=n,xK[n]=t,n}});var bK=Ue,wK=bn,SK=qc,CK=Bf,TK=Uo,kK=Bj,NS=TK("symbol-to-string-registry");bK({target:"Symbol",stat:!0,forced:!kK},{keyFor:function(t){if(!SK(t))throw TypeError(CK(t)+" is not a symbol");if(wK(NS,t))return NS[t]}});var MK=wt,ex=MK([].slice),EK=wt,OS=Vo,_K=Yt,RS=Fo,AK=Xc,DS=EK([].push),PK=function(e){if(_K(e))return e;if(OS(e)){for(var t=e.length,n=[],r=0;r<t;r++){var s=e[r];typeof s=="string"?DS(n,s):(typeof s=="number"||RS(s)==="Number"||RS(s)==="String")&&DS(n,AK(s))}var a=n.length,o=!0;return function(c,l){if(o)return o=!1,l;if(OS(this))return l;for(var u=0;u<a;u++)if(n[u]===c)return l}}},jK=Ue,Vj=vr,Gj=_y,IK=hr,Jc=wt,Wj=Et,LS=Yt,$S=qc,Hj=ex,NK=PK,OK=Bo,RK=String,us=Vj("JSON","stringify"),Ul=Jc(/./.exec),FS=Jc("".charAt),DK=Jc("".charCodeAt),LK=Jc("".replace),$K=Jc(1 .toString),FK=/[\uD800-\uDFFF]/g,BS=/^[\uD800-\uDBFF]$/,US=/^[\uDC00-\uDFFF]$/,VS=!OK||Wj(function(){var e=Vj("Symbol")("stringify detection");return us([e])!=="[null]"||us({a:e})!=="{}"||us(Object(e))!=="{}"}),GS=Wj(function(){return us("\uDF06\uD834")!=='"\\udf06\\ud834"'||us("\uDEAD")!=='"\\udead"'}),BK=function(e,t){var n=Hj(arguments),r=NK(t);if(!(!LS(r)&&(e===void 0||$S(e))))return n[1]=function(s,a){if(LS(r)&&(a=IK(r,this,RK(s),a)),!$S(a))return a},Gj(us,null,n)},UK=function(e,t,n){var r=FS(n,t-1),s=FS(n,t+1);return Ul(BS,e)&&!Ul(US,s)||Ul(US,e)&&!Ul(BS,r)?"\\u"+$K(DK(e,0),16):e};us&&jK({target:"JSON",stat:!0,arity:3,forced:VS||GS},{stringify:function(t,n,r){var s=Hj(arguments),a=Gj(VS?BK:us,null,s);return GS&&typeof a=="string"?LK(a,FK,UK):a}});var VK=Ue,GK=Bo,WK=Et,zj=Kf,HK=_s,zK=!GK||WK(function(){zj.f(1)});VK({target:"Object",stat:!0,forced:zK},{getOwnPropertySymbols:function(t){var n=zj.f;return n?n(HK(t)):[]}});var qK=ut;qK("asyncIterator");var YK=ut;YK("hasInstance");var KK=ut;KK("isConcatSpreadable");var XK=ut;XK("iterator");var QK=ut;QK("match");var ZK=ut;ZK("matchAll");var JK=ut;JK("replace");var eX=ut;eX("search");var tX=ut;tX("species");var nX=ut;nX("split");var rX=ut,sX=Tj;rX("toPrimitive");sX();var aX=vr,oX=ut,iX=Qc;oX("toStringTag");iX(aX("Symbol"),"Symbol");var cX=ut;cX("unscopables");var lX=qt,uX=Qc;uX(lX.JSON,"JSON",!0);var dX=Dt,fX=dX.Symbol,Ho={},Og=xn,mX=bn,qj=Function.prototype,pX=Og&&Object.getOwnPropertyDescriptor,tx=mX(qj,"name"),hX=tx&&(function(){}).name==="something",gX=tx&&(!Og||Og&&pX(qj,"name").configurable),vX={EXISTS:tx,PROPER:hX,CONFIGURABLE:gX},yX=Et,xX=!yX(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),bX=bn,wX=Yt,SX=_s,CX=qf,TX=xX,WS=CX("IE_PROTO"),Rg=Object,kX=Rg.prototype,Yj=TX?Rg.getPrototypeOf:function(e){var t=SX(e);if(bX(t,WS))return t[WS];var n=t.constructor;return wX(n)&&t instanceof n?n.prototype:t instanceof Rg?kX:null},MX=Et,EX=Yt,_X=$r,AX=Hy,HS=Yj,PX=Xf,jX=St,Dg=jX("iterator"),Kj=!1,Ar,jp,Ip;[].keys&&(Ip=[].keys(),"next"in Ip?(jp=HS(HS(Ip)),jp!==Object.prototype&&(Ar=jp)):Kj=!0);var IX=!_X(Ar)||MX(function(){var e={};return Ar[Dg].call(e)!==e});IX?Ar={}:Ar=AX(Ar);EX(Ar[Dg])||PX(Ar,Dg,function(){return this});var Xj={IteratorPrototype:Ar,BUGGY_SAFARI_ITERATORS:Kj},NX=Xj.IteratorPrototype,OX=Hy,RX=zc,DX=Qc,LX=Ho,$X=function(){return this},FX=function(e,t,n,r){var s=t+" Iterator";return e.prototype=OX(NX,{next:RX(+!r,n)}),DX(e,s,!1,!0),LX[s]=$X,e},BX=Ue,UX=hr,Qj=vX,VX=FX,GX=Yj,WX=Qc,zS=Xf,HX=St,qS=Ho,Zj=Xj,zX=Qj.PROPER;Qj.CONFIGURABLE;Zj.IteratorPrototype;var Vl=Zj.BUGGY_SAFARI_ITERATORS,Np=HX("iterator"),YS="keys",Gl="values",KS="entries",qX=function(){return this},Jj=function(e,t,n,r,s,a,o){VX(n,t,r);var c=function(b){if(b===s&&m)return m;if(!Vl&&b&&b in d)return d[b];switch(b){case YS:return function(){return new n(this,b)};case Gl:return function(){return new n(this,b)};case KS:return function(){return new n(this,b)}}return function(){return new n(this)}},l=t+" Iterator",u=!1,d=e.prototype,f=d[Np]||d["@@iterator"]||s&&d[s],m=!Vl&&f||c(s),h=t==="Array"&&d.entries||f,g,v,y;if(h&&(g=GX(h.call(new e)),g!==Object.prototype&&g.next&&(WX(g,l,!0,!0),qS[l]=qX)),zX&&s===Gl&&f&&f.name!==Gl&&(u=!0,m=function(){return UX(f,this)}),s)if(v={values:c(Gl),keys:a?m:c(YS),entries:c(KS)},o)for(y in v)(Vl||u||!(y in d))&&zS(d,y,v[y]);else BX({target:t,proto:!0,forced:Vl||u},v);return o&&d[Np]!==m&&zS(d,Np,m,{name:s}),qS[t]=m,v},e2=function(e,t){return{value:e,done:t}},YX=gr,XS=Ho,t2=qy;Gn.f;var KX=Jj,Wl=e2,n2="Array Iterator",XX=t2.set,QX=t2.getterFor(n2);KX(Array,"Array",function(e,t){XX(this,{type:n2,target:YX(e),index:0,kind:t})},function(){var e=QX(this),t=e.target,n=e.kind,r=e.index++;if(!t||r>=t.length)return e.target=void 0,Wl(void 0,!0);switch(n){case"keys":return Wl(r,!1);case"values":return Wl(t[r],!1)}return Wl([r,t[r]],!1)},"values");XS.Arguments=XS.Array;var ZX={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},JX=ZX,eQ=qt,tQ=Wo,nQ=Kc,QS=Ho,rQ=St,ZS=rQ("toStringTag");for(var Op in JX){var JS=eQ[Op],Rp=JS&&JS.prototype;Rp&&tQ(Rp)!==ZS&&nQ(Rp,ZS,Op),QS[Op]=QS.Array}var sQ=fX,aQ=sQ,oQ=St,iQ=Gn.f,eC=oQ("metadata"),tC=Function.prototype;tC[eC]===void 0&&iQ(tC,eC,{value:null});var cQ=ut;cQ("asyncDispose");var lQ=ut;lQ("dispose");var uQ=ut;uQ("metadata");var dQ=aQ,fQ=dQ,mQ=vr,pQ=wt,nx=mQ("Symbol"),hQ=nx.keyFor,gQ=pQ(nx.prototype.valueOf),r2=nx.isRegisteredSymbol||function(t){try{return hQ(gQ(t))!==void 0}catch{return!1}},vQ=Ue,yQ=r2;vQ({target:"Symbol",stat:!0},{isRegisteredSymbol:yQ});var xQ=Uo,s2=vr,bQ=wt,wQ=qc,SQ=St,id=s2("Symbol"),nC=id.isWellKnownSymbol,a2=s2("Object","getOwnPropertyNames"),CQ=bQ(id.prototype.valueOf),rC=xQ("wks");for(var Dp=0,sC=a2(id),TQ=sC.length;Dp<TQ;Dp++)try{var aC=sC[Dp];wQ(id[aC])&&SQ(aC)}catch{}var o2=function(t){if(nC&&nC(t))return!0;try{for(var n=CQ(t),r=0,s=a2(rC),a=s.length;r<a;r++)if(rC[s[r]]==n)return!0}catch{}return!1},kQ=Ue,MQ=o2;kQ({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:MQ});var EQ=ut;EQ("matcher");var _Q=ut;_Q("observable");var AQ=Ue,PQ=r2;AQ({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:PQ});var jQ=Ue,IQ=o2;jQ({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:IQ});var NQ=ut;NQ("metadataKey");var OQ=ut;OQ("patternMatch");var RQ=ut;RQ("replaceAll");var DQ=fQ,LQ=DQ,$Q=LQ,FQ=$Q;const i2=xe(FQ);var rx=wt,BQ=Vf,UQ=Xc,VQ=Iy,GQ=rx("".charAt),oC=rx("".charCodeAt),WQ=rx("".slice),iC=function(e){return function(t,n){var r=UQ(VQ(t)),s=BQ(n),a=r.length,o,c;return s<0||s>=a?e?"":void 0:(o=oC(r,s),o<55296||o>56319||s+1===a||(c=oC(r,s+1))<56320||c>57343?e?GQ(r,s):o:e?WQ(r,s,s+2):(o-55296<<10)+(c-56320)+65536)}},HQ={codeAt:iC(!1),charAt:iC(!0)},zQ=HQ.charAt,qQ=Xc,c2=qy,YQ=Jj,cC=e2,l2="String Iterator",KQ=c2.set,XQ=c2.getterFor(l2);YQ(String,"String",function(e){KQ(this,{type:l2,string:qQ(e),index:0})},function(){var t=XQ(this),n=t.string,r=t.index,s;return r>=n.length?cC(void 0,!0):(s=zQ(n,r),t.index+=s.length,cC(s,!1))});var QQ=Wo,lC=Ry,ZQ=jy,JQ=Ho,eZ=St,tZ=eZ("iterator"),sx=function(e){if(!ZQ(e))return lC(e,tZ)||lC(e,"@@iterator")||JQ[QQ(e)]},nZ=sx,rZ=nZ,sZ=rZ,aZ=sZ,oZ=aZ,iZ=oZ,cZ=iZ,lZ=cZ,uZ=lZ,dZ=uZ;const u2=xe(dZ);function fZ(e,t){var n=e==null?null:typeof i2<"u"&&u2(e)||e["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,o,c;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));s=!0);}catch(l){a=!0,c=l}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw c}}return r}}var mZ=Ue,uC=Vo,pZ=Uy,hZ=$r,dC=Hf,gZ=xa,vZ=gr,yZ=Go,xZ=St,bZ=Gf,wZ=ex,SZ=bZ("slice"),CZ=xZ("species"),Lp=Array,TZ=Math.max;mZ({target:"Array",proto:!0,forced:!SZ},{slice:function(t,n){var r=vZ(this),s=gZ(r),a=dC(t,s),o=dC(n===void 0?s:n,s),c,l,u;if(uC(r)&&(c=r.constructor,pZ(c)&&(c===Lp||uC(c.prototype))?c=void 0:hZ(c)&&(c=c[CZ],c===null&&(c=void 0)),c===Lp||c===void 0))return wZ(r,a,o);for(l=new(c===void 0?Lp:c)(TZ(o-a,0)),u=0;a<o;a++,u++)a in r&&yZ(l,u,r[a]);return l.length=u,l}});var kZ=Dt,zo=function(e){return kZ[e+"Prototype"]},MZ=zo,EZ=MZ("Array").slice,_Z=Es,AZ=EZ,$p=Array.prototype,PZ=function(e){var t=e.slice;return e===$p||_Z($p,e)&&t===$p.slice?AZ:t},jZ=PZ,IZ=jZ,NZ=IZ,OZ=NZ,RZ=OZ,DZ=RZ,LZ=DZ,$Z=LZ;const FZ=xe($Z);var BZ=hr,fC=As,UZ=Ry,VZ=function(e,t,n){var r,s;fC(e);try{if(r=UZ(e,"return"),!r){if(t==="throw")throw n;return n}r=BZ(r,e)}catch(a){s=!0,r=a}if(t==="throw")throw n;if(s)throw r;return fC(r),n},GZ=As,WZ=VZ,HZ=function(e,t,n,r){try{return r?t(GZ(n)[0],n[1]):t(n)}catch(s){WZ(e,"throw",s)}},zZ=St,qZ=Ho,YZ=zZ("iterator"),KZ=Array.prototype,XZ=function(e){return e!==void 0&&(qZ.Array===e||KZ[YZ]===e)},QZ=hr,ZZ=Oy,JZ=As,eJ=Bf,tJ=sx,nJ=TypeError,rJ=function(e,t){var n=arguments.length<2?tJ(e):t;if(ZZ(n))return JZ(QZ(n,e));throw nJ(eJ(e)+" is not iterable")},sJ=$y,aJ=hr,oJ=_s,iJ=HZ,cJ=XZ,lJ=Uy,uJ=xa,mC=Go,dJ=rJ,fJ=sx,pC=Array,mJ=function(t){var n=oJ(t),r=lJ(this),s=arguments.length,a=s>1?arguments[1]:void 0,o=a!==void 0;o&&(a=sJ(a,s>2?arguments[2]:void 0));var c=fJ(n),l=0,u,d,f,m,h,g;if(c&&!(this===pC&&cJ(c)))for(m=dJ(n,c),h=m.next,d=r?new this:[];!(f=aJ(h,m)).done;l++)g=o?iJ(m,a,[f.value,l],!0):f.value,mC(d,l,g);else for(u=uJ(n),d=r?new this(u):pC(u);u>l;l++)g=o?a(n[l],l):n[l],mC(d,l,g);return d.length=l,d},pJ=St,d2=pJ("iterator"),f2=!1;try{var hJ=0,hC={next:function(){return{done:!!hJ++}},return:function(){f2=!0}};hC[d2]=function(){return this},Array.from(hC,function(){throw 2})}catch{}var gJ=function(e,t){try{if(!t&&!f2)return!1}catch{return!1}var n=!1;try{var r={};r[d2]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch{}return n},vJ=Ue,yJ=mJ,xJ=gJ,bJ=!xJ(function(e){Array.from(e)});vJ({target:"Array",stat:!0,forced:bJ},{from:yJ});var wJ=Dt,SJ=wJ.Array.from,CJ=SJ,TJ=CJ,kJ=TJ,MJ=kJ,EJ=MJ,_J=EJ,AJ=_J,PJ=AJ;const m2=xe(PJ);function Lg(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p2(e,t){var n;if(e){if(typeof e=="string")return Lg(e,t);var r=FZ(n=Object.prototype.toString.call(e)).call(n,8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return m2(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lg(e,t)}}function jJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ax(e,t){return yz(e)||fZ(e,t)||p2(e,t)||jJ()}var h2={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],s=0;s<arguments.length;s++){var a=arguments[s];if(a){var o=typeof a;if(o==="string"||o==="number")r.push(a);else if(Array.isArray(a)){if(a.length){var c=n.apply(null,a);c&&r.push(c)}}else if(o==="object")if(a.toString===Object.prototype.toString)for(var l in a)t.call(a,l)&&a[l]&&r.push(l);else r.push(a.toString())}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(h2);var IJ=h2.exports;const g2=xe(IJ);var v2={exports:{}},NJ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",OJ=NJ,RJ=OJ;function y2(){}function x2(){}x2.resetWarningCache=y2;var DJ=function(){function e(r,s,a,o,c,l){if(l!==RJ){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:x2,resetWarningCache:y2};return n.PropTypes=n,n};v2.exports=DJ();var LJ=v2.exports;const er=xe(LJ);var b2=J.createContext({scrollTo:function(){return 0},scrollToBottom:function(){return 0},scrollToEnd:function(){return 0},scrollToStart:function(){return 0},scrollToTop:function(){return 0}});b2.displayName="ScrollToBottomFunctionContext";function ox(){return p.useContext(b2)}function $J(){var e=ox(),t=e.scrollToEnd;return t}var w2=J.createContext({atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom"});w2.displayName="ScrollToBottomState1Context";var S2=J.createContext({animating:!1,animatingToEnd:!1,sticky:!0});S2.displayName="ScrollToBottomState2Context";var C2=J.createContext({animating:!1,animatingToEnd:!1,atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom",sticky:!0});C2.displayName="ScrollToBottomStateContext";var gC=[C2,w2,S2];function T2(e){return p.useContext(gC[e]||gC[0])}function FJ(){var e=T2(2),t=e.sticky;return[t]}var ix=J.createContext({offsetHeight:0,scrollHeight:0,setTarget:function(){return 0},styleToClassName:function(){return""}});ix.displayName="ScrollToBottomInternalContext";function k2(){return p.useContext(ix)}function M2(){var e=k2(),t=e.styleToClassName;return t}var BJ={backgroundColor:"rgba(0, 0, 0, .2)",borderRadius:10,borderWidth:0,bottom:5,cursor:"pointer",height:20,outline:0,position:"absolute",right:20,width:20,"&:hover":{backgroundColor:"rgba(0, 0, 0, .4)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .6)"}},E2=function(t){var n=t.children,r=t.className,s=FJ(),a=ax(s,1),o=a[0],c=M2()(BJ),l=$J();return!o&&J.createElement("button",{className:g2(c,(r||"")+""),onClick:l,type:"button"},n)};E2.defaultProps={children:void 0,className:""};E2.propTypes={children:er.any,className:er.string};var _2={exports:{}},UJ=Ue,VJ=xn,vC=Gn.f;UJ({target:"Object",stat:!0,forced:Object.defineProperty!==vC,sham:!VJ},{defineProperty:vC});var GJ=Dt,A2=GJ.Object,WJ=_2.exports=function(t,n,r){return A2.defineProperty(t,n,r)};A2.defineProperty.sham&&(WJ.sham=!0);var HJ=_2.exports,zJ=HJ,P2=zJ,qJ=P2,YJ=qJ,KJ=YJ,XJ=KJ,QJ=XJ,ZJ=QJ;const JJ=xe(ZJ);function o5e(e,t,n){return t in e?JJ(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eee(e){if(lj(e))return Lg(e)}function tee(e){if(typeof i2<"u"&&u2(e)!=null||e["@@iterator"]!=null)return m2(e)}function nee(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Us(e){return eee(e)||tee(e)||p2(e)||nee()}var Hl=function(e){return e&&e.Math==Math&&e},wn=Hl(typeof globalThis=="object"&&globalThis)||Hl(typeof window=="object"&&window)||Hl(typeof self=="object"&&self)||Hl(typeof Gt=="object"&&Gt)||function(){return this}()||Function("return this")(),cx={},Wn=function(e){try{return!!e()}catch{return!0}},ree=Wn,ba=!ree(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),j2={},I2={}.propertyIsEnumerable,N2=Object.getOwnPropertyDescriptor,see=N2&&!I2.call({1:2},1);j2.f=see?function(t){var n=N2(this,t);return!!n&&n.enumerable}:I2;var O2=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},aee={}.toString,lx=function(e){return aee.call(e).slice(8,-1)},oee=Wn,iee=lx,cee="".split,lee=oee(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return iee(e)=="String"?cee.call(e,""):Object(e)}:Object,nm=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},uee=lee,dee=nm,ux=function(e){return uee(dee(e))},Pn=function(e){return typeof e=="function"},fee=Pn,el=function(e){return typeof e=="object"?e!==null:fee(e)},Fp=wn,mee=Pn,pee=function(e){return mee(e)?e:void 0},rm=function(e,t){return arguments.length<2?pee(Fp[e]):Fp[e]&&Fp[e][t]},hee=rm,gee=hee("navigator","userAgent")||"",R2=wn,Bp=gee,yC=R2.process,xC=R2.Deno,bC=yC&&yC.versions||xC&&xC.version,wC=bC&&bC.v8,Kn,cd;wC?(Kn=wC.split("."),cd=Kn[0]<4?1:Kn[0]+Kn[1]):Bp&&(Kn=Bp.match(/Edge\/(\d+)/),(!Kn||Kn[1]>=74)&&(Kn=Bp.match(/Chrome\/(\d+)/),Kn&&(cd=Kn[1])));var vee=cd&&+cd,SC=vee,yee=Wn,D2=!!Object.getOwnPropertySymbols&&!yee(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&SC&&SC<41}),xee=D2,L2=xee&&!Symbol.sham&&typeof Symbol.iterator=="symbol",bee=Pn,wee=rm,See=L2,$2=See?function(e){return typeof e=="symbol"}:function(e){var t=wee("Symbol");return bee(t)&&Object(e)instanceof t},Cee=function(e){try{return String(e)}catch{return"Object"}},Tee=Pn,kee=Cee,Mee=function(e){if(Tee(e))return e;throw TypeError(kee(e)+" is not a function")},Eee=Mee,F2=function(e,t){var n=e[t];return n==null?void 0:Eee(n)},Up=Pn,Vp=el,_ee=function(e,t){var n,r;if(t==="string"&&Up(n=e.toString)&&!Vp(r=n.call(e))||Up(n=e.valueOf)&&!Vp(r=n.call(e))||t!=="string"&&Up(n=e.toString)&&!Vp(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},B2={exports:{}},CC=wn,dx=function(e,t){try{Object.defineProperty(CC,e,{value:t,configurable:!0,writable:!0})}catch{CC[e]=t}return t},Aee=wn,Pee=dx,TC="__core-js_shared__",jee=Aee[TC]||Pee(TC,{}),fx=jee,kC=fx;(B2.exports=function(e,t){return kC[e]||(kC[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.18.3",mode:"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"});var mx=B2.exports,Iee=nm,U2=function(e){return Object(Iee(e))},Nee=U2,Oee={}.hasOwnProperty,wa=Object.hasOwn||function(t,n){return Oee.call(Nee(t),n)},Ree=0,Dee=Math.random(),V2=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++Ree+Dee).toString(36)},Lee=wn,$ee=mx,MC=wa,Fee=V2,EC=D2,Bee=L2,ui=$ee("wks"),Fi=Lee.Symbol,Uee=Bee?Fi:Fi&&Fi.withoutSetter||Fee,tl=function(e){return(!MC(ui,e)||!(EC||typeof ui[e]=="string"))&&(EC&&MC(Fi,e)?ui[e]=Fi[e]:ui[e]=Uee("Symbol."+e)),ui[e]},_C=el,AC=$2,Vee=F2,Gee=_ee,Wee=tl,Hee=Wee("toPrimitive"),zee=function(e,t){if(!_C(e)||AC(e))return e;var n=Vee(e,Hee),r;if(n){if(t===void 0&&(t="default"),r=n.call(e,t),!_C(r)||AC(r))return r;throw TypeError("Can't convert object to primitive value")}return t===void 0&&(t="number"),Gee(e,t)},qee=zee,Yee=$2,G2=function(e){var t=qee(e,"string");return Yee(t)?t:String(t)},Kee=wn,PC=el,$g=Kee.document,Xee=PC($g)&&PC($g.createElement),W2=function(e){return Xee?$g.createElement(e):{}},Qee=ba,Zee=Wn,Jee=W2,H2=!Qee&&!Zee(function(){return Object.defineProperty(Jee("div"),"a",{get:function(){return 7}}).a!=7}),ete=ba,tte=j2,nte=O2,rte=ux,ste=G2,ate=wa,ote=H2,jC=Object.getOwnPropertyDescriptor;cx.f=ete?jC:function(t,n){if(t=rte(t),n=ste(n),ote)try{return jC(t,n)}catch{}if(ate(t,n))return nte(!tte.f.call(t,n),t[n])};var nl={},ite=el,Ps=function(e){if(ite(e))return e;throw TypeError(String(e)+" is not an object")},cte=ba,lte=H2,IC=Ps,ute=G2,NC=Object.defineProperty;nl.f=cte?NC:function(t,n,r){if(IC(t),n=ute(n),IC(r),lte)try{return NC(t,n,r)}catch{}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[n]=r.value),t};var dte=ba,fte=nl,mte=O2,sm=dte?function(e,t,n){return fte.f(e,t,mte(1,n))}:function(e,t,n){return e[t]=n,e},z2={exports:{}},pte=Pn,Fg=fx,hte=Function.toString;pte(Fg.inspectSource)||(Fg.inspectSource=function(e){return hte.call(e)});var q2=Fg.inspectSource,gte=wn,vte=Pn,yte=q2,OC=gte.WeakMap,xte=vte(OC)&&/native code/.test(yte(OC)),bte=mx,wte=V2,RC=bte("keys"),Y2=function(e){return RC[e]||(RC[e]=wte(e))},px={},Ste=xte,Cte=wn,Tte=el,kte=sm,Gp=wa,Wp=fx,Mte=Y2,Ete=px,DC="Object already initialized",_te=Cte.WeakMap,ld,sc,ud,Ate=function(e){return ud(e)?sc(e):ld(e,{})},Pte=function(e){return function(t){var n;if(!Tte(t)||(n=sc(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(Ste||Wp.state){var Ns=Wp.state||(Wp.state=new _te),jte=Ns.get,LC=Ns.has,Ite=Ns.set;ld=function(e,t){if(LC.call(Ns,e))throw new TypeError(DC);return t.facade=e,Ite.call(Ns,e,t),t},sc=function(e){return jte.call(Ns,e)||{}},ud=function(e){return LC.call(Ns,e)}}else{var Ia=Mte("state");Ete[Ia]=!0,ld=function(e,t){if(Gp(e,Ia))throw new TypeError(DC);return t.facade=e,kte(e,Ia,t),t},sc=function(e){return Gp(e,Ia)?e[Ia]:{}},ud=function(e){return Gp(e,Ia)}}var K2={set:ld,get:sc,has:ud,enforce:Ate,getterFor:Pte},Bg=ba,Nte=wa,X2=Function.prototype,Ote=Bg&&Object.getOwnPropertyDescriptor,hx=Nte(X2,"name"),Rte=hx&&(function(){}).name==="something",Dte=hx&&(!Bg||Bg&&Ote(X2,"name").configurable),gx={EXISTS:hx,PROPER:Rte,CONFIGURABLE:Dte},Lte=wn,$C=Pn,$te=wa,FC=sm,Fte=dx,Bte=q2,Q2=K2,Ute=gx.CONFIGURABLE,Vte=Q2.get,Gte=Q2.enforce,Wte=String(String).split("String");(z2.exports=function(e,t,n,r){var s=r?!!r.unsafe:!1,a=r?!!r.enumerable:!1,o=r?!!r.noTargetGet:!1,c=r&&r.name!==void 0?r.name:t,l;if($C(n)&&(String(c).slice(0,7)==="Symbol("&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!$te(n,"name")||Ute&&n.name!==c)&&FC(n,"name",c),l=Gte(n),l.source||(l.source=Wte.join(typeof c=="string"?c:""))),e===Lte){a?e[t]=n:Fte(t,n);return}else s?!o&&e[t]&&(a=!0):delete e[t];a?e[t]=n:FC(e,t,n)})(Function.prototype,"toString",function(){return $C(this)&&Vte(this).source||Bte(this)});var rl=z2.exports,Z2={},Hte=Math.ceil,zte=Math.floor,am=function(e){var t=+e;return t!==t||t===0?0:(t>0?zte:Hte)(t)},qte=am,Yte=Math.max,Kte=Math.min,Xte=function(e,t){var n=qte(e);return n<0?Yte(n+t,0):Kte(n,t)},Qte=am,Zte=Math.min,J2=function(e){return e>0?Zte(Qte(e),9007199254740991):0},Jte=J2,ene=function(e){return Jte(e.length)},tne=ux,nne=Xte,rne=ene,BC=function(e){return function(t,n,r){var s=tne(t),a=rne(s),o=nne(r,a),c;if(e&&n!=n){for(;a>o;)if(c=s[o++],c!=c)return!0}else for(;a>o;o++)if((e||o in s)&&s[o]===n)return e||o||0;return!e&&-1}},sne={includes:BC(!0),indexOf:BC(!1)},Hp=wa,ane=ux,one=sne.indexOf,ine=px,eI=function(e,t){var n=ane(e),r=0,s=[],a;for(a in n)!Hp(ine,a)&&Hp(n,a)&&s.push(a);for(;t.length>r;)Hp(n,a=t[r++])&&(~one(s,a)||s.push(a));return s},vx=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],cne=eI,lne=vx,une=lne.concat("length","prototype");Z2.f=Object.getOwnPropertyNames||function(t){return cne(t,une)};var tI={};tI.f=Object.getOwnPropertySymbols;var dne=rm,fne=Z2,mne=tI,pne=Ps,hne=dne("Reflect","ownKeys")||function(t){var n=fne.f(pne(t)),r=mne.f;return r?n.concat(r(t)):n},gne=wa,vne=hne,yne=cx,xne=nl,bne=function(e,t){for(var n=vne(t),r=xne.f,s=yne.f,a=0;a<n.length;a++){var o=n[a];gne(e,o)||r(e,o,s(t,o))}},wne=Wn,Sne=Pn,Cne=/#|\.prototype\./,sl=function(e,t){var n=kne[Tne(e)];return n==Ene?!0:n==Mne?!1:Sne(t)?wne(t):!!t},Tne=sl.normalize=function(e){return String(e).replace(Cne,".").toLowerCase()},kne=sl.data={},Mne=sl.NATIVE="N",Ene=sl.POLYFILL="P",_ne=sl,zp=wn,Ane=cx.f,Pne=sm,jne=rl,Ine=dx,Nne=bne,One=_ne,Rne=function(e,t){var n=e.target,r=e.global,s=e.stat,a,o,c,l,u,d;if(r?o=zp:s?o=zp[n]||Ine(n,{}):o=(zp[n]||{}).prototype,o)for(c in t){if(u=t[c],e.noTargetGet?(d=Ane(o,c),l=d&&d.value):l=o[c],a=One(r?c:n+(s?".":"#")+c,e.forced),!a&&l!==void 0){if(typeof u==typeof l)continue;Nne(u,l)}(e.sham||l&&l.sham)&&Pne(u,"sham",!0),jne(o,c,u,e)}},Dne=tl,Lne=Dne("toStringTag"),nI={};nI[Lne]="z";var yx=String(nI)==="[object z]",$ne=yx,Fne=Pn,Pu=lx,Bne=tl,Une=Bne("toStringTag"),Vne=Pu(function(){return arguments}())=="Arguments",Gne=function(e,t){try{return e[t]}catch{}},rI=$ne?Pu:function(e){var t,n,r;return e===void 0?"Undefined":e===null?"Null":typeof(n=Gne(t=Object(e),Une))=="string"?n:Vne?Pu(t):(r=Pu(t))=="Object"&&Fne(t.callee)?"Arguments":r},Wne=rI,om=function(e){if(Wne(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(e)},Hne=Ps,sI=function(){var e=Hne(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},xx={},aI=Wn,zne=wn,oI=zne.RegExp;xx.UNSUPPORTED_Y=aI(function(){var e=oI("a","y");return e.lastIndex=2,e.exec("abcd")!=null});xx.BROKEN_CARET=aI(function(){var e=oI("^r","gy");return e.lastIndex=2,e.exec("str")!=null});var qne=eI,Yne=vx,Kne=Object.keys||function(t){return qne(t,Yne)},Xne=ba,Qne=nl,Zne=Ps,Jne=Kne,ere=Xne?Object.defineProperties:function(t,n){Zne(t);for(var r=Jne(n),s=r.length,a=0,o;s>a;)Qne.f(t,o=r[a++],n[o]);return t},tre=rm,nre=tre("document","documentElement"),rre=Ps,sre=ere,UC=vx,are=px,ore=nre,ire=W2,cre=Y2,VC=">",GC="<",Ug="prototype",Vg="script",iI=cre("IE_PROTO"),qp=function(){},cI=function(e){return GC+Vg+VC+e+GC+"/"+Vg+VC},WC=function(e){e.write(cI("")),e.close();var t=e.parentWindow.Object;return e=null,t},lre=function(){var e=ire("iframe"),t="java"+Vg+":",n;return e.style.display="none",ore.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(cI("document.F=Object")),n.close(),n.F},zl,ju=function(){try{zl=new ActiveXObject("htmlfile")}catch{}ju=typeof document<"u"?document.domain&&zl?WC(zl):lre():WC(zl);for(var e=UC.length;e--;)delete ju[Ug][UC[e]];return ju()};are[iI]=!0;var ure=Object.create||function(t,n){var r;return t!==null?(qp[Ug]=rre(t),r=new qp,qp[Ug]=null,r[iI]=t):r=ju(),n===void 0?r:sre(r,n)},dre=Wn,fre=wn,mre=fre.RegExp,pre=dre(function(){var e=mre(".","s");return!(e.dotAll&&e.exec(`
`)&&e.flags==="s")}),hre=Wn,gre=wn,vre=gre.RegExp,yre=hre(function(){var e=vre("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}),xre=om,bre=sI,HC=xx,wre=mx,Sre=ure,Cre=K2.get,Tre=pre,kre=yre,dd=RegExp.prototype.exec,Mre=wre("native-string-replace",String.prototype.replace),Gg=dd,Wg=function(){var e=/a/,t=/b*/g;return dd.call(e,"a"),dd.call(t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),lI=HC.UNSUPPORTED_Y||HC.BROKEN_CARET,Hg=/()??/.exec("")[1]!==void 0,Ere=Wg||Hg||lI||Tre||kre;Ere&&(Gg=function(t){var n=this,r=Cre(n),s=xre(t),a=r.raw,o,c,l,u,d,f,m;if(a)return a.lastIndex=n.lastIndex,o=Gg.call(a,s),n.lastIndex=a.lastIndex,o;var h=r.groups,g=lI&&n.sticky,v=bre.call(n),y=n.source,b=0,x=s;if(g&&(v=v.replace("y",""),v.indexOf("g")===-1&&(v+="g"),x=s.slice(n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&s.charAt(n.lastIndex-1)!==`
`)&&(y="(?: "+y+")",x=" "+x,b++),c=new RegExp("^(?:"+y+")",v)),Hg&&(c=new RegExp("^"+y+"$(?!\\s)",v)),Wg&&(l=n.lastIndex),u=dd.call(g?c:n,x),g?u?(u.input=u.input.slice(b),u[0]=u[0].slice(b),u.index=n.lastIndex,n.lastIndex+=u[0].length):n.lastIndex=0:Wg&&u&&(n.lastIndex=n.global?u.index+u[0].length:l),Hg&&u&&u.length>1&&Mre.call(u[0],c,function(){for(d=1;d<arguments.length-2;d++)arguments[d]===void 0&&(u[d]=void 0)}),u&&h)for(u.groups=f=Sre(null),d=0;d<h.length;d++)m=h[d],f[m[0]]=u[m[1]];return u});var bx=Gg,_re=Rne,zC=bx;_re({target:"RegExp",proto:!0,forced:/./.exec!==zC},{exec:zC});var qC=rl,Are=bx,YC=Wn,uI=tl,Pre=sm,jre=uI("species"),Yp=RegExp.prototype,Ire=function(e,t,n,r){var s=uI(e),a=!YC(function(){var u={};return u[s]=function(){return 7},""[e](u)!=7}),o=a&&!YC(function(){var u=!1,d=/a/;return e==="split"&&(d={},d.constructor={},d.constructor[jre]=function(){return d},d.flags="",d[s]=/./[s]),d.exec=function(){return u=!0,null},d[s](""),!u});if(!a||!o||n){var c=/./[s],l=t(s,""[e],function(u,d,f,m,h){var g=d.exec;return g===Are||g===Yp.exec?a&&!h?{done:!0,value:c.call(d,f,m)}:{done:!0,value:u.call(f,d,m)}:{done:!1}});qC(String.prototype,e,l[0]),qC(Yp,s,l[1])}r&&Pre(Yp[s],"sham",!0)},Nre=am,Ore=om,Rre=nm,KC=function(e){return function(t,n){var r=Ore(Rre(t)),s=Nre(n),a=r.length,o,c;return s<0||s>=a?e?"":void 0:(o=r.charCodeAt(s),o<55296||o>56319||s+1===a||(c=r.charCodeAt(s+1))<56320||c>57343?e?r.charAt(s):o:e?r.slice(s,s+2):(o-55296<<10)+(c-56320)+65536)}},Dre={codeAt:KC(!1),charAt:KC(!0)},Lre=Dre.charAt,$re=function(e,t,n){return t+(n?Lre(e,t).length:1)},Fre=U2,Bre=Math.floor,Ure="".replace,Vre=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Gre=/\$([$&'`]|\d{1,2})/g,Wre=function(e,t,n,r,s,a){var o=n+e.length,c=r.length,l=Gre;return s!==void 0&&(s=Fre(s),l=Vre),Ure.call(a,l,function(u,d){var f;switch(d.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(o);case"<":f=s[d.slice(1,-1)];break;default:var m=+d;if(m===0)return u;if(m>c){var h=Bre(m/10);return h===0?u:h<=c?r[h-1]===void 0?d.charAt(1):r[h-1]+d.charAt(1):u}f=r[m-1]}return f===void 0?"":f})},Hre=Ps,zre=Pn,qre=lx,Yre=bx,Kre=function(e,t){var n=e.exec;if(zre(n)){var r=n.call(e,t);return r!==null&&Hre(r),r}if(qre(e)==="RegExp")return Yre.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")},Xre=Ire,Qre=Wn,Zre=Ps,Jre=Pn,ese=am,tse=J2,Na=om,nse=nm,rse=$re,sse=F2,ase=Wre,ose=Kre,ise=tl,zg=ise("replace"),cse=Math.max,lse=Math.min,use=function(e){return e===void 0?e:String(e)},dse=function(){return"a".replace(/./,"$0")==="$0"}(),XC=function(){return/./[zg]?/./[zg]("a","$0")==="":!1}(),fse=!Qre(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});Xre("replace",function(e,t,n){var r=XC?"$":"$0";return[function(a,o){var c=nse(this),l=a==null?void 0:sse(a,zg);return l?l.call(a,c,o):t.call(Na(c),a,o)},function(s,a){var o=Zre(this),c=Na(s);if(typeof a=="string"&&a.indexOf(r)===-1&&a.indexOf("$<")===-1){var l=n(t,o,c,a);if(l.done)return l.value}var u=Jre(a);u||(a=Na(a));var d=o.global;if(d){var f=o.unicode;o.lastIndex=0}for(var m=[];;){var h=ose(o,c);if(h===null||(m.push(h),!d))break;var g=Na(h[0]);g===""&&(o.lastIndex=rse(c,tse(o.lastIndex),f))}for(var v="",y=0,b=0;b<m.length;b++){h=m[b];for(var x=Na(h[0]),w=cse(lse(ese(h.index),c.length),0),C=[],T=1;T<h.length;T++)C.push(use(h[T]));var M=h.groups;if(u){var _=[x].concat(C,w,c);M!==void 0&&_.push(M);var k=Na(a.apply(void 0,_))}else k=ase(x,c,w,C,M,a);w>=y&&(v+=c.slice(y,w)+k,y=w+x.length)}return v+c.slice(y)}]},!fse||!dse||XC);var mse=typeof Bun=="function"&&Bun&&typeof Bun.version=="string",pse=TypeError,hse=function(e,t){if(e<t)throw pse("Not enough arguments");return e},dI=qt,gse=_y,vse=Yt,yse=mse,xse=tj,bse=ex,wse=hse,Sse=dI.Function,Cse=/MSIE .\./.test(xse)||yse&&function(){var e=dI.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}(),fI=function(e,t){var n=t?2:1;return Cse?function(r,s){var a=wse(arguments.length,1)>n,o=vse(r)?r:Sse(r),c=a?bse(arguments,n):[],l=a?function(){gse(o,this,c)}:o;return t?e(l,s):e(l)}:e},Tse=Ue,mI=qt,kse=fI,QC=kse(mI.setInterval,!0);Tse({global:!0,bind:!0,forced:mI.setInterval!==QC},{setInterval:QC});var Mse=Ue,pI=qt,Ese=fI,ZC=Ese(pI.setTimeout,!0);Mse({global:!0,bind:!0,forced:pI.setTimeout!==ZC},{setTimeout:ZC});var _se=Dt,Ase=_se.setInterval,Pse=Ase;const i5e=xe(Pse);var jse=Et,hI=function(e,t){var n=[][e];return!!n&&jse(function(){n.call(null,t||function(){return 1},1)})},Ise=Ue,Nse=Ay,Ose=vj.indexOf,Rse=hI,qg=Nse([].indexOf),gI=!!qg&&1/qg([1],1,-0)<0,Dse=gI||!Rse("indexOf");Ise({target:"Array",proto:!0,forced:Dse},{indexOf:function(t){var n=arguments.length>1?arguments[1]:void 0;return gI?qg(this,t,n)||0:Ose(this,t,n)}});var Lse=zo,$se=Lse("Array").indexOf,Fse=Es,Bse=$se,Kp=Array.prototype,Use=function(e){var t=e.indexOf;return e===Kp||Fse(Kp,e)&&t===Kp.indexOf?Bse:t},Vse=Use,Gse=Vse,Wse=Gse;const c5e=xe(Wse);var Hse=xn,zse=Vo,qse=TypeError,Yse=Object.getOwnPropertyDescriptor,Kse=Hse&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),Xse=Kse?function(e,t){if(zse(e)&&!Yse(e,"length").writable)throw qse("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},JC=Bf,Qse=TypeError,Zse=function(e,t){if(!delete e[t])throw Qse("Cannot delete property "+JC(t)+" of "+JC(e))},Jse=Ue,eae=_s,tae=Hf,nae=Vf,rae=xa,sae=Xse,aae=uj,oae=Vy,iae=Go,Xp=Zse,cae=Gf,lae=cae("splice"),uae=Math.max,dae=Math.min;Jse({target:"Array",proto:!0,forced:!lae},{splice:function(t,n){var r=eae(this),s=rae(r),a=tae(t,s),o=arguments.length,c,l,u,d,f,m;for(o===0?c=l=0:o===1?(c=0,l=s-a):(c=o-2,l=dae(uae(nae(n),0),s-a)),aae(s+c-l),u=oae(r,l),d=0;d<l;d++)f=a+d,f in r&&iae(u,d,r[f]);if(u.length=l,c<l){for(d=a;d<s-l;d++)f=d+l,m=d+c,f in r?r[m]=r[f]:Xp(r,m);for(d=s;d>s-l+c;d--)Xp(r,d-1)}else if(c>l)for(d=s-l;d>a;d--)f=d+l-1,m=d+c-1,f in r?r[m]=r[f]:Xp(r,m);for(d=0;d<c;d++)r[d+a]=arguments[d+2];return sae(r,s-l+c),u}});var fae=zo,mae=fae("Array").splice,pae=Es,hae=mae,Qp=Array.prototype,gae=function(e){var t=e.splice;return e===Qp||pae(Qp,e)&&t===Qp.splice?hae:t},vae=gae,yae=vae,xae=yae;const l5e=xe(xae);var bae=zo,wae=bae("Array").concat,Sae=Es,Cae=wae,Zp=Array.prototype,Tae=function(e){var t=e.concat;return e===Zp||Sae(Zp,e)&&t===Zp.concat?Cae:t},kae=Tae,Mae=kae,Eae=Mae;const ac=xe(Eae);var _ae=Ue,Aae=wt,vI=Date,Pae=Aae(vI.prototype.getTime);_ae({target:"Date",stat:!0},{now:function(){return Pae(new vI)}});var jae=Dt,Iae=jae.Date.now,Nae=Iae,Oae=Nae,Rae=Oae;const oc=xe(Rae);var Dae=Yy.forEach,Lae=hI,$ae=Lae("forEach"),Fae=$ae?[].forEach:function(t){return Dae(this,t,arguments.length>1?arguments[1]:void 0)},Bae=Ue,eT=Fae;Bae({target:"Array",proto:!0,forced:[].forEach!==eT},{forEach:eT});var Uae=zo,Vae=Uae("Array").forEach,Gae=Vae,Wae=Gae,Hae=Wo,zae=bn,qae=Es,Yae=Wae,Jp=Array.prototype,Kae={DOMTokenList:!0,NodeList:!0},Xae=function(e){var t=e.forEach;return e===Jp||qae(Jp,e)&&t===Jp.forEach||zae(Kae,Hae(e))?Yae:t},Qae=Xae;const Zae=xe(Qae);var Jae=Ue,eoe=_s,yI=Wy,toe=Et,noe=toe(function(){yI(1)});Jae({target:"Object",stat:!0,forced:noe},{keys:function(t){return yI(eoe(t))}});var roe=Dt,soe=roe.Object.keys,aoe=soe,ooe=aoe,ioe=ooe;const u5e=xe(ioe);var coe=Dt,loe=coe.Object.getOwnPropertySymbols,uoe=loe,doe=uoe,foe=doe;const d5e=xe(foe);var moe=Ue,poe=Yy.filter,hoe=Gf,goe=hoe("filter");moe({target:"Array",proto:!0,forced:!goe},{filter:function(t){return poe(this,t,arguments.length>1?arguments[1]:void 0)}});var voe=zo,yoe=voe("Array").filter,xoe=Es,boe=yoe,eh=Array.prototype,woe=function(e){var t=e.filter;return e===eh||xoe(eh,e)&&t===eh.filter?boe:t},Soe=woe,Coe=Soe,Toe=Coe;const f5e=xe(Toe);var xI={exports:{}},koe=Ue,Moe=Et,Eoe=gr,bI=Hc.f,wI=xn,_oe=!wI||Moe(function(){bI(1)});koe({target:"Object",stat:!0,forced:_oe,sham:!wI},{getOwnPropertyDescriptor:function(t,n){return bI(Eoe(t),n)}});var Aoe=Dt,SI=Aoe.Object,Poe=xI.exports=function(t,n){return SI.getOwnPropertyDescriptor(t,n)};SI.getOwnPropertyDescriptor.sham&&(Poe.sham=!0);var joe=xI.exports,Ioe=joe,Noe=Ioe,Ooe=Noe;const m5e=xe(Ooe);var Roe=vr,Doe=wt,Loe=Yf,$oe=Kf,Foe=As,Boe=Doe([].concat),Uoe=Roe("Reflect","ownKeys")||function(t){var n=Loe.f(Foe(t)),r=$oe.f;return r?Boe(n,r(t)):n},Voe=Ue,Goe=xn,Woe=Uoe,Hoe=gr,zoe=Hc,qoe=Go;Voe({target:"Object",stat:!0,sham:!Goe},{getOwnPropertyDescriptors:function(t){for(var n=Hoe(t),r=zoe.f,s=Woe(n),a={},o=0,c,l;s.length>o;)l=r(n,c=s[o++]),l!==void 0&&qoe(a,c,l);return a}});var Yoe=Dt,Koe=Yoe.Object.getOwnPropertyDescriptors,Xoe=Koe,Qoe=Xoe,Zoe=Qoe;const p5e=xe(Zoe);var CI={exports:{}},Joe=Ue,eie=xn,tT=Wf.f;Joe({target:"Object",stat:!0,forced:Object.defineProperties!==tT,sham:!eie},{defineProperties:tT});var tie=Dt,TI=tie.Object,nie=CI.exports=function(t,n){return TI.defineProperties(t,n)};TI.defineProperties.sham&&(nie.sham=!0);var rie=CI.exports,sie=rie,aie=sie,oie=aie;const h5e=xe(oie);var iie=P2;const g5e=xe(iie);function cie(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function lie(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var uie=function(){function e(n){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(lie(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var a=cie(s);try{a.insertRule(r,a.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},e}(),$t="-ms-",fd="-moz-",_e="-webkit-",kI="comm",wx="rule",Sx="decl",die="@import",MI="@keyframes",fie="@layer",mie=Math.abs,im=String.fromCharCode,pie=Object.assign;function hie(e,t){return It(e,0)^45?(((t<<2^It(e,0))<<2^It(e,1))<<2^It(e,2))<<2^It(e,3):0}function EI(e){return e.trim()}function gie(e,t){return(e=t.exec(e))?e[0]:e}function Ae(e,t,n){return e.replace(t,n)}function Yg(e,t){return e.indexOf(t)}function It(e,t){return e.charCodeAt(t)|0}function ic(e,t,n){return e.slice(t,n)}function tr(e){return e.length}function Cx(e){return e.length}function ql(e,t){return t.push(e),e}function vie(e,t){return e.map(t).join("")}var cm=1,xo=1,_I=0,un=0,mt=0,qo="";function lm(e,t,n,r,s,a,o){return{value:e,root:t,parent:n,type:r,props:s,children:a,line:cm,column:xo,length:o,return:""}}function di(e,t){return pie(lm("",null,null,"",null,null,0),e,{length:-e.length},t)}function yie(){return mt}function xie(){return mt=un>0?It(qo,--un):0,xo--,mt===10&&(xo=1,cm--),mt}function gn(){return mt=un<_I?It(qo,un++):0,xo++,mt===10&&(xo=1,cm++),mt}function ir(){return It(qo,un)}function Iu(){return un}function al(e,t){return ic(qo,e,t)}function cc(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function AI(e){return cm=xo=1,_I=tr(qo=e),un=0,[]}function PI(e){return qo="",e}function Nu(e){return EI(al(un-1,Kg(e===91?e+2:e===40?e+1:e)))}function bie(e){for(;(mt=ir())&&mt<33;)gn();return cc(e)>2||cc(mt)>3?"":" "}function wie(e,t){for(;--t&&gn()&&!(mt<48||mt>102||mt>57&&mt<65||mt>70&&mt<97););return al(e,Iu()+(t<6&&ir()==32&&gn()==32))}function Kg(e){for(;gn();)switch(mt){case e:return un;case 34:case 39:e!==34&&e!==39&&Kg(mt);break;case 40:e===41&&Kg(e);break;case 92:gn();break}return un}function Sie(e,t){for(;gn()&&e+mt!==57;)if(e+mt===84&&ir()===47)break;return"/*"+al(t,un-1)+"*"+im(e===47?e:gn())}function Cie(e){for(;!cc(ir());)gn();return al(e,un)}function Tie(e){return PI(Ou("",null,null,null,[""],e=AI(e),0,[0],e))}function Ou(e,t,n,r,s,a,o,c,l){for(var u=0,d=0,f=o,m=0,h=0,g=0,v=1,y=1,b=1,x=0,w="",C=s,T=a,M=r,_=w;y;)switch(g=x,x=gn()){case 40:if(g!=108&&It(_,f-1)==58){Yg(_+=Ae(Nu(x),"&","&\f"),"&\f")!=-1&&(b=-1);break}case 34:case 39:case 91:_+=Nu(x);break;case 9:case 10:case 13:case 32:_+=bie(g);break;case 92:_+=wie(Iu()-1,7);continue;case 47:switch(ir()){case 42:case 47:ql(kie(Sie(gn(),Iu()),t,n),l);break;default:_+="/"}break;case 123*v:c[u++]=tr(_)*b;case 125*v:case 59:case 0:switch(x){case 0:case 125:y=0;case 59+d:b==-1&&(_=Ae(_,/\f/g,"")),h>0&&tr(_)-f&&ql(h>32?rT(_+";",r,n,f-1):rT(Ae(_," ","")+";",r,n,f-2),l);break;case 59:_+=";";default:if(ql(M=nT(_,t,n,u,d,s,c,w,C=[],T=[],f),a),x===123)if(d===0)Ou(_,t,M,M,C,a,f,c,T);else switch(m===99&&It(_,3)===110?100:m){case 100:case 108:case 109:case 115:Ou(e,M,M,r&&ql(nT(e,M,M,0,0,s,c,w,s,C=[],f),T),s,T,f,c,r?C:T);break;default:Ou(_,M,M,M,[""],T,0,c,T)}}u=d=h=0,v=b=1,w=_="",f=o;break;case 58:f=1+tr(_),h=g;default:if(v<1){if(x==123)--v;else if(x==125&&v++==0&&xie()==125)continue}switch(_+=im(x),x*v){case 38:b=d>0?1:(_+="\f",-1);break;case 44:c[u++]=(tr(_)-1)*b,b=1;break;case 64:ir()===45&&(_+=Nu(gn())),m=ir(),d=f=tr(w=_+=Cie(Iu())),x++;break;case 45:g===45&&tr(_)==2&&(v=0)}}return a}function nT(e,t,n,r,s,a,o,c,l,u,d){for(var f=s-1,m=s===0?a:[""],h=Cx(m),g=0,v=0,y=0;g<r;++g)for(var b=0,x=ic(e,f+1,f=mie(v=o[g])),w=e;b<h;++b)(w=EI(v>0?m[b]+" "+x:Ae(x,/&\f/g,m[b])))&&(l[y++]=w);return lm(e,t,n,s===0?wx:c,l,u,d)}function kie(e,t,n){return lm(e,t,n,kI,im(yie()),ic(e,2,-2),0)}function rT(e,t,n,r){return lm(e,t,n,Sx,ic(e,0,r),ic(e,r+1,-1),r)}function ro(e,t){for(var n="",r=Cx(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function Mie(e,t,n,r){switch(e.type){case fie:if(e.children.length)break;case die:case Sx:return e.return=e.return||e.value;case kI:return"";case MI:return e.return=e.value+"{"+ro(e.children,r)+"}";case wx:e.value=e.props.join(",")}return tr(n=ro(e.children,r))?e.return=e.value+"{"+n+"}":""}function Eie(e){var t=Cx(e);return function(n,r,s,a){for(var o="",c=0;c<t;c++)o+=e[c](n,r,s,a)||"";return o}}function _ie(e){return function(t){t.root||(t=t.return)&&e(t)}}function Aie(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Pie=function(t,n,r){for(var s=0,a=0;s=a,a=ir(),s===38&&a===12&&(n[r]=1),!cc(a);)gn();return al(t,un)},jie=function(t,n){var r=-1,s=44;do switch(cc(s)){case 0:s===38&&ir()===12&&(n[r]=1),t[r]+=Pie(un-1,n,r);break;case 2:t[r]+=Nu(s);break;case 4:if(s===44){t[++r]=ir()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=im(s)}while(s=gn());return t},Iie=function(t,n){return PI(jie(AI(t),n))},sT=new WeakMap,Nie=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,s=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!sT.get(r))&&!s){sT.set(t,!0);for(var a=[],o=Iie(n,a),c=r.props,l=0,u=0;l<o.length;l++)for(var d=0;d<c.length;d++,u++)t.props[u]=a[l]?o[l].replace(/&\f/g,c[d]):c[d]+" "+o[l]}}},Oie=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function jI(e,t){switch(hie(e,t)){case 5103:return _e+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return _e+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return _e+e+fd+e+$t+e+e;case 6828:case 4268:return _e+e+$t+e+e;case 6165:return _e+e+$t+"flex-"+e+e;case 5187:return _e+e+Ae(e,/(\w+).+(:[^]+)/,_e+"box-$1$2"+$t+"flex-$1$2")+e;case 5443:return _e+e+$t+"flex-item-"+Ae(e,/flex-|-self/,"")+e;case 4675:return _e+e+$t+"flex-line-pack"+Ae(e,/align-content|flex-|-self/,"")+e;case 5548:return _e+e+$t+Ae(e,"shrink","negative")+e;case 5292:return _e+e+$t+Ae(e,"basis","preferred-size")+e;case 6060:return _e+"box-"+Ae(e,"-grow","")+_e+e+$t+Ae(e,"grow","positive")+e;case 4554:return _e+Ae(e,/([^-])(transform)/g,"$1"+_e+"$2")+e;case 6187:return Ae(Ae(Ae(e,/(zoom-|grab)/,_e+"$1"),/(image-set)/,_e+"$1"),e,"")+e;case 5495:case 3959:return Ae(e,/(image-set\([^]*)/,_e+"$1$`$1");case 4968:return Ae(Ae(e,/(.+:)(flex-)?(.*)/,_e+"box-pack:$3"+$t+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+_e+e+e;case 4095:case 3583:case 4068:case 2532:return Ae(e,/(.+)-inline(.+)/,_e+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(tr(e)-1-t>6)switch(It(e,t+1)){case 109:if(It(e,t+4)!==45)break;case 102:return Ae(e,/(.+:)(.+)-([^]+)/,"$1"+_e+"$2-$3$1"+fd+(It(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~Yg(e,"stretch")?jI(Ae(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(It(e,t+1)!==115)break;case 6444:switch(It(e,tr(e)-3-(~Yg(e,"!important")&&10))){case 107:return Ae(e,":",":"+_e)+e;case 101:return Ae(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+_e+(It(e,14)===45?"inline-":"")+"box$3$1"+_e+"$2$3$1"+$t+"$2box$3")+e}break;case 5936:switch(It(e,t+11)){case 114:return _e+e+$t+Ae(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return _e+e+$t+Ae(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return _e+e+$t+Ae(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return _e+e+$t+e+e}return e}var Rie=function(t,n,r,s){if(t.length>-1&&!t.return)switch(t.type){case Sx:t.return=jI(t.value,t.length);break;case MI:return ro([di(t,{value:Ae(t.value,"@","@"+_e)})],s);case wx:if(t.length)return vie(t.props,function(a){switch(gie(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ro([di(t,{props:[Ae(a,/:(read-\w+)/,":"+fd+"$1")]})],s);case"::placeholder":return ro([di(t,{props:[Ae(a,/:(plac\w+)/,":"+_e+"input-$1")]}),di(t,{props:[Ae(a,/:(plac\w+)/,":"+fd+"$1")]}),di(t,{props:[Ae(a,/:(plac\w+)/,$t+"input-$1")]})],s)}return""})}},Die=[Rie],Lie=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(v){var y=v.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(v),v.setAttribute("data-s",""))})}var s=t.stylisPlugins||Die,a={},o,c=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(v){for(var y=v.getAttribute("data-emotion").split(" "),b=1;b<y.length;b++)a[y[b]]=!0;c.push(v)});var l,u=[Nie,Oie];{var d,f=[Mie,_ie(function(v){d.insert(v)})],m=Eie(u.concat(s,f)),h=function(y){return ro(Tie(y),m)};l=function(y,b,x,w){d=x,h(y?y+"{"+b.styles+"}":b.styles),w&&(g.inserted[b.name]=!0)}}var g={key:n,sheet:new uie({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return g.sheet.hydrate(c),g};function $ie(e){for(var t=0,n,r=0,s=e.length;s>=4;++r,s-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Fie={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Bie=/[A-Z]|^ms/g,Uie=/_EMO_([^_]+?)_([^]*?)_EMO_/g,II=function(t){return t.charCodeAt(1)===45},aT=function(t){return t!=null&&typeof t!="boolean"},th=Aie(function(e){return II(e)?e:e.replace(Bie,"-$&").toLowerCase()}),oT=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Uie,function(r,s,a){return nr={name:s,styles:a,next:nr},s})}return Fie[t]!==1&&!II(t)&&typeof n=="number"&&n!==0?n+"px":n};function lc(e,t,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return nr={name:n.name,styles:n.styles,next:nr},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)nr={name:r.name,styles:r.styles,next:nr},r=r.next;var s=n.styles+";";return s}return Vie(e,t,n)}case"function":{if(e!==void 0){var a=nr,o=n(e);return nr=a,lc(e,t,o)}break}}if(t==null)return n;var c=t[n];return c!==void 0?c:n}function Vie(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=lc(e,t,n[s])+";";else for(var a in n){var o=n[a];if(typeof o!="object")t!=null&&t[o]!==void 0?r+=a+"{"+t[o]+"}":aT(o)&&(r+=th(a)+":"+oT(a,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var c=0;c<o.length;c++)aT(o[c])&&(r+=th(a)+":"+oT(a,o[c])+";");else{var l=lc(e,t,o);switch(a){case"animation":case"animationName":{r+=th(a)+":"+l+";";break}default:r+=a+"{"+l+"}"}}}return r}var iT=/label:\s*([^\s;\n{]+)\s*(;|$)/g,nr,nh=function(t,n,r){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var s=!0,a="";nr=void 0;var o=t[0];o==null||o.raw===void 0?(s=!1,a+=lc(r,n,o)):a+=o[0];for(var c=1;c<t.length;c++)a+=lc(r,n,t[c]),s&&(a+=o[c]);iT.lastIndex=0;for(var l="",u;(u=iT.exec(a))!==null;)l+="-"+u[1];var d=$ie(a)+l;return{name:d,styles:a,next:nr}},Gie=!0;function NI(e,t,n){var r="";return n.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):r+=s+" "}),r}var Wie=function(t,n,r){var s=t.key+"-"+n.name;(r===!1||Gie===!1)&&t.registered[s]===void 0&&(t.registered[s]=n.styles)},Hie=function(t,n,r){Wie(t,n,r);var s=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var a=n;do t.insert(n===a?"."+s:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function cT(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function lT(e,t,n){var r=[],s=NI(e,r,n);return r.length<2?n:s+t(r)}var v5e=function(t){var n=Lie(t);n.sheet.speedy=function(c){this.isSpeedy=c},n.compat=!0;var r=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=nh(u,n.registered,void 0);return Hie(n,f,!1),n.key+"-"+f.name},s=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=nh(u,n.registered),m="animation-"+f.name;return cT(n,{name:f.name,styles:"@keyframes "+m+"{"+f.styles+"}"}),m},a=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];var f=nh(u,n.registered);cT(n,f)},o=function(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return lT(n.registered,r,zie(u))};return{css:r,cx:o,injectGlobal:a,keyframes:s,hydrate:function(l){l.forEach(function(u){n.inserted[u]=!0})},flush:function(){n.registered={},n.inserted={},n.sheet.flush()},sheet:n.sheet,cache:n,getRegisteredStyles:NI.bind(null,n.registered),merge:lT.bind(null,n.registered,r)}},zie=function e(t){for(var n="",r=0;r<t.length;r++){var s=t[r];if(s!=null){var a=void 0;switch(typeof s){case"boolean":break;case"object":{if(Array.isArray(s))a=e(s);else{a="";for(var o in s)s[o]&&o&&(a&&(a+=" "),a+=o)}break}default:a=s}a&&(n&&(n+=" "),n+=a)}}return n},qie=rl,Tx=Date.prototype,uT="Invalid Date",OI="toString",Yie=Tx[OI],Kie=Tx.getTime;String(new Date(NaN))!=uT&&qie(Tx,OI,function(){var t=Kie.call(this);return t===t?Yie.call(this):uT});var Xie=yx,Qie=rI,Zie=Xie?{}.toString:function(){return"[object "+Qie(this)+"]"},Jie=yx,ece=rl,tce=Zie;Jie||ece(Object.prototype,"toString",tce,{unsafe:!0});var nce=gx.PROPER,rce=rl,sce=Ps,dT=om,ace=Wn,oce=sI,kx="toString",RI=RegExp.prototype,DI=RI[kx],ice=ace(function(){return DI.call({source:"a",flags:"b"})!="/a/b"}),cce=nce&&DI.name!=kx;(ice||cce)&&rce(RegExp.prototype,kx,function(){var t=sce(this),n=dT(t.source),r=t.flags,s=dT(r===void 0&&t instanceof RegExp&&!("flags"in RI)?oce.call(t):r);return"/"+n+"/"+s},{unsafe:!0});var fT=typeof window<"u"?window:self,lce=fT.crypto||fT.msCrypto,uce=function(e){if(!e)return Math.random;var t=Math.pow(2,32),n=new Uint32Array(1);return function(){return e.getRandomValues(n)[0]/t}}(lce);const dce=xe(uce);function y5e(){return dce().toString(26).substr(2,5).replace(/[0-9]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+65)})}var fce=cj;const Xg=xe(fce);function mce(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"white",n="background-color: ".concat(e,"; border-radius: 4px; padding: 2px 4px;");return t&&(n+=" color: ".concat(t,";")),[n,""]}function mT(e,t){for(var n,r,s=arguments.length,a=new Array(s>2?s-2:0),o=2;o<s;o++)a[o-2]=arguments[o];return ac(n=[ac(r="%c".concat(e,"%c ")).call(r,t)]).call(n,Us(mce("green","white")),a)}function x5e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.force,r=n===void 0?!1:n;return r?function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];if(a.length){var c=a,l=ax(c,1),u=l[0];typeof u=="function"&&(a=u());var d=Xg(a[0])?a:[a],f=d.length===1;Zae(d).call(d,function(m,h){if(f){var g,v;(g=console).log.apply(g,Us(mT.apply(void 0,ac(v=[e]).call(v,Us(m)))))}else if(h){var y;(y=console).log.apply(y,Us(Xg(m)?m:[m]))}else{var b,x;(b=console).groupCollapsed.apply(b,Us(mT.apply(void 0,ac(x=[e]).call(x,Us(m)))))}}),f||console.groupEnd()}}:function(){return 0}}var pce=ba,hce=gx.EXISTS,gce=nl.f,LI=Function.prototype,vce=LI.toString,yce=/^\s*function ([^ (]*)/,xce="name";pce&&!hce&&gce(LI,xce,{configurable:!0,get:function(){try{return vce.call(this).match(yce)[1]}catch{return""}}});var bce=Dt,wce=bce.setTimeout,Sce=wce;const Cce=xe(Sce);function Tce(e,t){if(!t)return e;var n=0,r=null;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];var c=oc();c-n>t?(e.apply(void 0,a),n=c):(clearTimeout(r),r=Cce(function(){e.apply(void 0,a),n=oc()},Math.max(0,t-c+n)))}}var kce=function(t){var n=t.debounce,r=t.name,s=t.onEvent,a=t.target,o=p.useRef();o.current=s;var c=p.useMemo(function(){return Tce(function(u){var d=o.current;d&&d(u)},n)},[n,o]),l=p.useCallback(function(u){u.timeStampLow=oc(),c(u)},[c]);return p.useLayoutEffect(function(){return a.addEventListener(r,l,{passive:!0}),l({target:a,type:r}),function(){return a.removeEventListener(r,l)}},[r,l,a]),!1};kce.defaultProps={debounce:200};var Mce=Math.sign||function(t){var n=+t;return n===0||n!==n?n:n<0?-1:1},Ece=Ue,_ce=Mce;Ece({target:"Math",stat:!0},{sign:_ce});var Ace=Dt,Pce=Ace.Math.sign,jce=Pce,Ice=jce,Nce=Ice;const Oce=xe(Nce);function Rce(e,t){var n=Oce(t-e),r=Math.sqrt(Math.abs(t-e)),s=e+r*n;return n>0?Math.min(t,s):Math.max(t,s)}function Dce(e,t,n,r){for(var s=e,a=0;a<r;a++)s=n(s,t);return s}var Lce=function(t){var n=t.name,r=t.onEnd,s=t.target,a=t.value,o=p.useRef(),c=p.useCallback(function(u,d,f,m){var h=arguments.length>4&&arguments[4]!==void 0?arguments[4]:oc();(f==="100%"||typeof f=="number")&&(cancelAnimationFrame(o.current),o.current=requestAnimationFrame(function(){if(s){var g=f==="100%"?s.scrollHeight-s.offsetHeight:f,v=Dce(d,g,Rce,(oc()-h)/5);Math.abs(g-v)<1.5&&(v=g),s[u]=v,g===v?r&&r(!0):c(u,d,f,m+1,h)}}))},[o,r,s]),l=p.useCallback(function(){cancelAnimationFrame(o.current),r&&r(!1)},[r]);return p.useLayoutEffect(function(){return c(n,s[n],a,1),s?(s.addEventListener("pointerdown",l,{passive:!0}),s.addEventListener("wheel",l,{passive:!0}),function(){s.removeEventListener("pointerdown",l),s.removeEventListener("wheel",l),cancelAnimationFrame(o.current)}):function(){return cancelAnimationFrame(o.current)}},[c,o,l,n,s,a]),!1};Lce.propTypes={name:er.string.isRequired,onEnd:er.func,target:er.any.isRequired,value:er.oneOfType([er.number,er.oneOf(["100%"])]).isRequired};function b5e(e){var t=p.useState(e),n=ax(t,2),r=n[0],s=n[1],a=p.useRef(),o=p.useCallback(function(c){typeof c=="function"?o(function(l){return c=c(l),a.current=c,c}):(a.current=c,o(c))},[a]);return a.current=r,[r,s,a]}var $ce={height:"100%",overflowY:"auto",width:"100%"},$I=function(t){var n=t.children,r=t.className,s=p.useContext(ix),a=s.setTarget,o=M2()($ce);return J.createElement("div",{className:g2(o,(r||"")+""),ref:a},n)};$I.defaultProps={children:void 0,className:void 0};$I.propTypes={children:er.any,className:er.string};function w5e(){var e=T2(1),t=e.atTop;return[t]}function S5e(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e&&typeof e!="function"?console.error('react-scroll-to-bottom: First argument passed to "useObserveScrollPosition" must be a function.'):Xg(n)||console.error('react-scroll-to-bottom: Second argument passed to "useObserveScrollPosition" must be an array if specified.');var r=k2(),s=r.observeScrollPosition;p.useEffect(function(){return e&&s(e)},ac(t=[]).call(t,Us(n),[!e,s]))}function C5e(){var e=ox(),t=e.scrollToBottom;return t}function T5e(){var e=ox(),t=e.scrollToTop;return t}var ca={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},md={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Fce=typeof navigator<"u"&&/Mac/.test(navigator.platform),Bce=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ot=0;Ot<10;Ot++)ca[48+Ot]=ca[96+Ot]=String(Ot);for(var Ot=1;Ot<=24;Ot++)ca[Ot+111]="F"+Ot;for(var Ot=65;Ot<=90;Ot++)ca[Ot]=String.fromCharCode(Ot+32),md[Ot]=String.fromCharCode(Ot);for(var rh in ca)md.hasOwnProperty(rh)||(md[rh]=ca[rh]);function k5e(e){var t=Fce&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||Bce&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?md:ca)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var FI=(e=>(e.ACCELERATOR="accelerator",e.BLOCK_COMMENT_LAUNCHER="block_comment_launcher",e.CLOSE_TEXTDOC="close_textdoc",e.COLLAPSED_COMMENT="collapsed_comment",e.COMMENT_ACCEPT="comment_accept",e.COMMENT_DISMISS="comment_dismiss",e.COPY="copy",e.DOWNLOAD="download",e.EXPANDED_COMMENT="expanded_comment",e.FILE_DRAWER_ITEM="file_drawer_item",e.HISTORY_NEXT="history_next",e.HISTORY_PREVIOUS="history_previous",e.MESSAGE_ATTACHMENT="message_attachment",e.SHOW_CHANGES="show_changes",e.TOOLBAR_FORMAT_BOLD="toolbar_format_bold",e.TOOLBAR_FORMAT_HEADER1="toolbar_format_header1",e.TOOLBAR_FORMAT_HEADER2="toolbar_format_header2",e.TOOLBAR_FORMAT_HEADER3="toolbar_format_header3",e.TOOLBAR_FORMAT_ITALIC="toolbar_format_italic",e.TOOLBAR_FORMAT_PARAGRAPH="toolbar_format_paragraph",e.TOOLBAR_ASK_CHATGPT="toolbar_ask_chatgpt",e))(FI||{});function M5e(e,t){const n=p.useRef(e);p.useEffect(()=>{n.current=e},[e]),p.useEffect(()=>{function r(){n.current()}if(t!=null){const s=window.setInterval(r,t);return()=>clearInterval(s)}},[t])}const Uce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M9.64978 13.0257L6.36281 14.2164C5.32547 14.5922 4.17846 14.0599 3.8009 13.0274L3.45909 12.0927L4.0564 10.8177L1.75 7.41901L4.09784 6.56847L6.66195 8.05349C7.17468 8.35044 7.79343 8.40537 8.35086 8.20343L16.8625 5.11998C17.1541 5.01435 17.4664 4.97773 17.7746 5.01305L20.6083 5.33764C21.3056 5.41751 21.8977 5.88262 22.1377 6.53907C22.4878 7.49623 21.9919 8.55457 21.0303 8.90295L15.7542 10.8143M16.3515 9.53934L13 14.5L10.1826 15.5206L9.84014 11.8982",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{d:"M3 19H21",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})),Vce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.9969 3.39017C14.5497 2.17402 15.961 1.60735 17.2013 2.10349L19.4044 2.98475C20.7337 3.51645 21.3458 5.05369 20.7459 6.35358L19.0629 10H20C20.5523 10 21 10.4477 21 11V19C21 20.6569 19.6569 22 18 22H6C4.34315 22 3 20.6569 3 19V11C3 10.4504 3.44331 10.0044 3.99183 10L3.84325 9.89871C3.83307 9.89177 3.82303 9.88465 3.81311 9.87733C2.55917 8.9526 2.79737 7.01262 4.23778 6.41871L6.35774 5.5446L7.08184 3.36883C7.57382 1.8905 9.49246 1.51755 10.5024 2.70393L11.9888 4.45002L13.5103 4.46084L13.9969 3.39017ZM15.5096 4.89554C16.2552 5.48975 16.5372 6.59381 15.9713 7.51403L14.8266 9.37513C14.8265 9.38763 14.8266 9.40262 14.8273 9.42012C14.8294 9.47125 14.8357 9.52793 14.8451 9.58262C14.8548 9.63855 14.8654 9.67875 14.8714 9.69773C14.9032 9.79819 14.9184 9.89994 14.9184 10H16.8602L18.93 5.51547C19.0499 5.25549 18.9275 4.94804 18.6617 4.8417L16.4585 3.96044C16.2105 3.86122 15.9282 3.97455 15.8176 4.21778L15.5096 4.89554ZM12.8885 10C12.8572 9.84122 12.8358 9.66998 12.8289 9.50115C12.8194 9.26483 12.8254 8.81125 13.0664 8.41953L14.2677 6.46628L11.9746 6.44997C11.3934 6.44584 10.8427 6.18905 10.4659 5.74646L8.97951 4.00037L8.25541 6.17614C8.07187 6.72765 7.65748 7.17203 7.12012 7.39359L5.00091 8.26739L7.06338 9.67378C7.19188 9.7614 7.29353 9.87369 7.3663 10H12.8885ZM5 12V19C5 19.5523 5.44772 20 6 20H18C18.5523 20 19 19.5523 19 19V12H5ZM9.5 14.5C9.5 13.9477 9.94771 13.5 10.5 13.5H13.5C14.0523 13.5 14.5 13.9477 14.5 14.5C14.5 15.0523 14.0523 15.5 13.5 15.5H10.5C9.94771 15.5 9.5 15.0523 9.5 14.5Z",fill:"currentColor"})),Gce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M5 16.584C3.2341 15.8124 2 14.0503 2 12C2 9.46726 3.88316 7.37436 6.32568 7.04508C7.13649 4.69118 9.37075 3 12 3C15.3137 3 18 5.68629 18 9C20.2091 9 22 10.7909 22 13C22 14.2632 21.4145 15.3896 20.5 16.1227",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{d:"M9.25 16L6.75 21",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{d:"M13.25 16L10.75 21",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{d:"M17.25 16L14.75 21",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Wce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M4.5 17.5L7.56881 14.3817C8.32655 13.6117 9.55878 13.5826 10.352 14.316L16.5 20",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{d:"M19 12H18.3798C17.504 12 16.672 11.6173 16.102 10.9524L11.898 6.04763C11.328 5.38269 10.496 5 9.6202 5H6C4.89543 5 4 5.89543 4 7V18C4 19.1046 4.89543 20 6 20H18C19.1046 20 20 19.1046 20 18V17",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{d:"M19 5H18.3798C17.504 5 16.672 5.38269 16.102 6.04763L14 8.5",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("circle",{cx:8.5,cy:9.5,r:1.5,fill:"currentColor"}),p.createElement("path",{d:"M18 14V10C18 9.58798 18.4704 9.35279 18.8 9.6L21.4667 11.6C21.7333 11.8 21.7333 12.2 21.4667 12.4L18.8 14.4C18.4704 14.6472 18 14.412 18 14Z",fill:"currentColor"}),p.createElement("path",{d:"M18 7V3C18 2.58798 18.4704 2.35279 18.8 2.6L21.4667 4.6C21.7333 4.8 21.7333 5.2 21.4667 5.4L18.8 7.4C18.4704 7.64721 18 7.41202 18 7Z",fill:"currentColor"})),Hce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M15.5 14V17",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("rect",{x:5,y:3,width:14,height:18,rx:2,stroke:"currentColor",strokeWidth:2}),p.createElement("circle",{cx:8.5,cy:14,r:1,fill:"currentColor"}),p.createElement("circle",{cx:8.5,cy:17,r:1,fill:"currentColor"}),p.createElement("circle",{cx:12,cy:17,r:1,fill:"currentColor"}),p.createElement("circle",{cx:12,cy:14,r:1,fill:"currentColor"}),p.createElement("circle",{cx:8.5,cy:11,r:1,fill:"currentColor"}),p.createElement("circle",{cx:12,cy:11,r:1,fill:"currentColor"}),p.createElement("circle",{cx:15.5,cy:11,r:1,fill:"currentColor"})),zce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("circle",{cx:12,cy:10.5,r:7.5,stroke:"currentColor",strokeWidth:2}),p.createElement("path",{d:"M8 17V22L12 21L16 22V17",stroke:"currentColor",strokeWidth:2,strokeLinejoin:"round"})),qce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M17 8H19C20.1046 8 21 8.89543 21 10V17C21 18.1046 20.1046 19 19 19M19 19H5C3.89543 19 3 18.1046 3 17V7C3 5.89543 3.89543 5 5 5H15C16.1046 5 17 5.89543 17 7V17C17 18.1046 17.8954 19 19 19Z",stroke:"currentColor",strokeWidth:2}),p.createElement("path",{d:"M7 10H13",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{d:"M7 13H10",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Yce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M6 5H5C3.89543 5 3 5.89543 3 7V8M18 5H19C20.1046 5 21 5.89543 21 7V8M21 16V17C21 18.1046 20.1046 19 19 19H18M6 19H5C3.89543 19 3 18.1046 3 17V16",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),p.createElement("path",{d:"M8 10H16",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),p.createElement("path",{d:"M8 14H14",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"})),Kce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M4 18V7H20V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}),p.createElement("path",{d:"M9 10V6C9 4.34315 10.3431 3 12 3V3C13.6569 3 15 4.34315 15 6V10",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Xce=e=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},p.createElement("path",{d:"M3 6H10",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),p.createElement("path",{d:"M3 10H7",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round"}),p.createElement("path",{d:"M13.4282 17.5718L20.5 10.5C21.6046 9.39543 21.6046 7.60457 20.5 6.5C19.3954 5.39543 17.6046 5.39543 16.5 6.5L9.42819 13.5718C9.14899 13.851 8.95868 14.2066 8.88124 14.5938L8 19L12.4062 18.1188C12.7934 18.0413 13.149 17.851 13.4282 17.5718Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}));function Qce(e){switch(e){case"genius":return $$;case"idea":return hw;case"code":return L$;case"data-vis":return D$;case"dalle":return Wce;case"local":return R$;case"math":return Hce;case"misc":return Vce;case"news":return qce;case"teach-or-explain":return vw;case"read-or-analyze":return Yce;case"rank-or-rate":return zce;case"current-event":return gw;case"shop":return Kce;case"travel":return Uce;case"weather":return Gce;case"work":return vw;case"write":return Xce;case"vision":return O$;case"file-upload-document":return Ac;case"browse":return gw;case"onboarding":return N$;default:return hw}}function Zce(e){switch(e){case"write":case"shop":return"#cb8bd0";case"idea":case"travel":return"#e2c541";case"code":case"vision":return"#6C71FF";case"file-upload-document":return"#EA8444";case"dalle":return"#35AE47";case"genius":return"#E659C2";case"teach-or-explain":case"misc":default:return"#76d0eb"}}const Za=["#cb8bd0","#e2c541","#ed6262","#76d0eb"];function Jce(e){switch(e){case"write":case"shop":return Za[0];case"idea":case"travel":return Za[1];case"code":case"vision":return Za[2];case"teach-or-explain":case"misc":default:return Za[3]}}function E5e({starterPrompt:e,useV2Colors:t}){if(e.category==null)return null;const n=Qce(e.category);return i.jsx(n,{className:"icon-md",style:{color:t?Zce(e.category):Jce(e.category)}})}const Qg=({iconName:e,className:t,notice:n,size:r="medium"})=>{let s=YM;return e==="user"&&(s=y0),i.jsxs(nle,{className:A(t,ele[r]),children:[i.jsx(s,{className:BI[r]}),n&&(n==="warning"||n==="danger")&&i.jsx(Mx,{$type:n,children:"!"})]})},ele={small:"h-[18px] w-[18px]",gizmo:"h-8 w-8",gizmoConversation:"h-6 w-6",medium:"h-8 w-8",workspaceMedium:"h-9 w-9",large:"h-12 w-12",workspaceAvatarPreview:"h-24 w-24",cover:"h-[234px] w-[234px]"},Fn={small:18,gizmo:32,gizmoConversation:24,medium:32,workspaceMedium:36,large:48,workspaceAvatarPreview:96,cover:234},BI={small:"icon-xs",medium:"icon-md",workspaceMedium:"icon-md",large:"icon-lg",workspaceAvatarPreview:"icon-workspace-avatar-preview",cover:"icon-cover",gizmo:"icon-md",gizmoConversation:"icon-sm"},um=e=>{const{user:t,notice:n}=e,r=n&&(n==="warning"||n==="danger")&&i.jsx(Mx,{$type:n,children:"!"});if(t?.picture)return i.jsxs("div",{className:A("relative flex",e.customStyle?e.className:""),children:[i.jsx("img",{src:t.picture,alt:"User",width:e.customStyle?e.size:Fn[e.size],height:e.customStyle?e.size:Fn[e.size],className:e.customStyle?"":e.roundedStyle??"rounded-sm",referrerPolicy:"no-referrer"}),r]});const s=(t?.name??"").split(" ").map(a=>a[0]).join("");return i.jsx("div",{className:"overflow-hidden rounded-full",style:e.customStyle?{width:e.size,height:e.size}:{width:Fn[e.size],height:Fn[e.size]},children:i.jsxs("div",{className:A("relative flex items-center justify-center bg-blue-300 text-white",e.customStyle?e.className:A(e.size==="gizmo"?"h-7 w-7 overflow-hidden rounded-full text-xs":"h-full w-full",e.size==="small"||e.size==="gizmo"||e.size==="gizmoConversation"?"text-xs":"text-sm")),children:[s?i.jsx("div",{className:"indent-[0.1em] tracking-widest",children:s}):i.jsx(y0,{className:e.customStyle?"h-4/5 w-4/5":BI[e.size]}),r]})})};function dm({src:e,size:t="large",alt:n}){const[r,s]=p.useState(!1);return r||!e?i.jsx(m3,{width:Fn[t].toString(),height:Fn[t].toString()}):i.jsx("img",{src:e,className:"inline rounded-full bg-token-main-surface-secondary",alt:n??"",width:Fn[t],height:Fn[t],onError:()=>s(!0)})}function _5e({className:e,iconSize:t="medium",notice:n,workspace:r}){const s=Ce();r??=s;const a=r?.isPersonalAccount(),o=zt();return i.jsx(xs,{children:i.jsx("div",{className:A("flex items-center justify-center overflow-hidden rounded-full",e),children:!r||a&&o!==void 0?i.jsx(um,{user:o,size:t,notice:n}):i.jsxs(i.Fragment,{children:[i.jsx(dm,{src:r.data.profilePictureUrl,size:t}),n&&i.jsx(Mx,{$type:n,children:"!"})]})})})}const tle=fe.div`relative p-1 rounded-sm h-9 w-9 flex items-center justify-center`,nle=({className:e,children:t})=>i.jsx(tle,{className:e,children:t}),Mx=fe.span`
  absolute w-4 h-4 rounded-full text-[10px] text-white flex  justify-center items-center right-0 top-[20px] -mr-2 border border-white
  ${({$type:e})=>e==="warning"&&"bg-orange-500 text-white"}
  ${({$type:e})=>e==="danger"&&"bg-red-500 text-white"}
`;function A5e({name:e,size:t,className:n,initialsCount:r=1}){let s="";return r===1?s=e.charAt(0):s=e.split(" ").slice(0,2).map(a=>a[0]).join(""),i.jsx("div",{className:A("overflow-hidden rounded-full pt-[4.5px] text-center text-[9px] font-extralight text-white",n),style:{backgroundColor:rle(e),width:Fn[t]+"px",height:Fn[t]+"px"},children:s})}function rle(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)+t^e.charCodeAt(n);return Za[Math.abs(t)%Za.length]}var Ex="Popover",[UI,P5e]=ha(Ex,[KM]),ol=KM(),[sle,js]=UI(Ex),VI=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:o=!1}=e,c=ol(t),l=p.useRef(null),[u,d]=p.useState(!1),[f=!1,m]=wc({prop:r,defaultProp:s,onChange:a});return i.jsx(S3,{...c,children:i.jsx(sle,{scope:t,contentId:QM(),triggerRef:l,open:f,onOpenChange:m,onOpenToggle:p.useCallback(()=>m(h=>!h),[m]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>d(!0),[]),onCustomAnchorRemove:p.useCallback(()=>d(!1),[]),modal:o,children:n})})};VI.displayName=Ex;var GI="PopoverAnchor",WI=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=js(GI,n),a=ol(n),{onCustomAnchorAdd:o,onCustomAnchorRemove:c}=s;return p.useEffect(()=>(o(),()=>c()),[o,c]),i.jsx(XM,{...a,...r,ref:t})});WI.displayName=GI;var HI="PopoverTrigger",zI=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=js(HI,n),a=ol(n),o=Lr(t,s.triggerRef),c=i.jsx(Rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":JI(s.open),...r,ref:o,onClick:st(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:i.jsx(XM,{asChild:!0,...a,children:c})});zI.displayName=HI;var _x="PopoverPortal",[ale,ole]=UI(_x,{forceMount:void 0}),qI=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=js(_x,t);return i.jsx(ale,{scope:t,forceMount:n,children:i.jsx(bc,{present:n||a.open,children:i.jsx(ZM,{asChild:!0,container:s,children:r})})})};qI.displayName=_x;var bo="PopoverContent",YI=p.forwardRef((e,t)=>{const n=ole(bo,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=js(bo,e.__scopePopover);return i.jsx(bc,{present:r||a.open,children:a.modal?i.jsx(ile,{...s,ref:t}):i.jsx(cle,{...s,ref:t})})});YI.displayName=bo;var ile=p.forwardRef((e,t)=>{const n=js(bo,e.__scopePopover),r=p.useRef(null),s=Lr(t,r),a=p.useRef(!1);return p.useEffect(()=>{const o=r.current;if(o)return p3(o)},[]),i.jsx(h3,{as:g3,allowPinchZoom:!0,children:i.jsx(KI,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:st(e.onCloseAutoFocus,o=>{o.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:st(e.onPointerDownOutside,o=>{const c=o.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:st(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),cle=p.forwardRef((e,t)=>{const n=js(bo,e.__scopePopover),r=p.useRef(!1),s=p.useRef(!1);return i.jsx(KI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=a.target;n.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),KI=p.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onInteractOutside:d,...f}=e,m=js(bo,n),h=ol(n);return v3(),i.jsx(y3,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:i.jsx(x3,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:d,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:u,onDismiss:()=>m.onOpenChange(!1),children:i.jsx(b3,{"data-state":JI(m.open),role:"dialog",id:m.contentId,...h,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),XI="PopoverClose",QI=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=js(XI,n);return i.jsx(Rt.button,{type:"button",...r,ref:t,onClick:st(e.onClick,()=>s.onOpenChange(!1))})});QI.displayName=XI;var lle="PopoverArrow",ZI=p.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=ol(n);return i.jsx(w3,{...s,...r,ref:t})});ZI.displayName=lle;function JI(e){return e?"open":"closed"}var Ax=VI,j5e=WI,pd=zI,eN=qI,Px=YI,ule=QI,dle=ZI;function Xt(e){this.content=e}Xt.prototype={constructor:Xt,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,s=r.find(e),a=r.content.slice();return s==-1?a.push(n||e,t):(a[s+1]=t,n&&(a[s]=n)),new Xt(a)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Xt(n)},addToStart:function(e,t){return new Xt([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Xt(n)},addBefore:function(e,t,n){var r=this.remove(t),s=r.content.slice(),a=r.find(e);return s.splice(a==-1?s.length:a,0,t,n),new Xt(s)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Xt.from(e),e.size?new Xt(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Xt.from(e),e.size?new Xt(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Xt.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Xt.from=function(e){if(e instanceof Xt)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Xt(t)};function tN({percentage:e,thickness:t=1/12,className:n,sizeOverride:r,backgroundStrokeClassName:s="stroke-gray-400",transitionDuration:a,transitionTimingFunction:o,onTransitionEnd:c}){const l=r??120,u=l*t,d=(l-u)/2,f=2*Math.PI*d,m=f-e/100*f;return i.jsxs("svg",{width:l,height:l,viewBox:`0 0 ${l} ${l}`,className:n,children:[i.jsx("circle",{className:A("origin-[50%_50%] -rotate-90",s),strokeWidth:u,fill:"transparent",r:d,cx:l/2,cy:l/2}),i.jsx("circle",{className:"origin-[50%_50%] -rotate-90 transition-[stroke-dashoffset]",stroke:"currentColor",strokeWidth:u,strokeDashoffset:m,strokeDasharray:`${f} ${f}`,fill:"transparent",r:d,cx:l/2,cy:l/2,style:{transitionDuration:a,transitionTimingFunction:o},onTransitionEnd:c})]})}const fle=({size:e=40,className:t="text-blue-selection"})=>i.jsx("div",{className:A("relative",t),style:{width:e,height:e},children:i.jsxs("svg",{className:"absolute h-full w-full animate-spin",viewBox:"0 0 50 50",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"spinner-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[i.jsx("stop",{offset:"0%",style:{stopColor:"currentColor",stopOpacity:1}}),i.jsx("stop",{offset:"100%",style:{stopColor:"currentColor",stopOpacity:0}})]})}),i.jsx("circle",{cx:"25",cy:"25",r:"20",stroke:"url(#spinner-gradient)",strokeWidth:"8",strokeLinecap:"round",fill:"none",strokeDasharray:"75,150",strokeDashoffset:"0"})]})});function mle(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}var ple=mle,hle=ple,sh=FM;function gle(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=sh(n),n=n===n?n:0),t!==void 0&&(t=sh(t),t=t===t?t:0),hle(sh(e),t,n)}var vle=gle;const hd=xe(vle),I5e=e=>e.some(t=>t.type===ye.Canmore&&t.messages.some(({message:n})=>Tf(n)&&n.recipient===Nt.CreateTextdoc&&!0)),Zg=Xe(()=>qe(()=>import("./ner0ldxcdnp816li.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(e=>e.CanvasMessageAttachment)),yle=Xe(()=>qe(()=>import("./ner0ldxcdnp816li.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])).then(e=>e.CanvasMessageAttachmentWrapper));function Jg(e){let t=e;return t=t.replace(/\.[^/.]+$/,""),t=t.replace(/_/g," "),t=t.replace(/([a-z])([A-Z])/g,"$1 $2"),t.split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" ")}function xle(e){const t=p.useRef(!1);return()=>{t.current||(e(),t.current=!0)}}const ble=(e,t)=>e?.textdocId?e.textdocId:e?.function===Nt.CreateTextdoc?R0(e):t??void 0,N5e=({messages:e,isRequestActive:t,clientThreadId:n})=>{const r=L(),s=G0(e),a=W0(e),o=p.useMemo(()=>{if(Tf(s?.message))return O_(t,s.message,a?.message??null)},[t,s,a]),c=l4(),l=ble(o,c),u=Sf(l),d=Ic(),f=O0(l),m=f4(),h=u4(),g=V_(),v=c4(),y=d4({textdocId:l,assistantMessage:s}),b=xle(()=>{const I=Un.getThreadModelId(n);D0.logError("Textdoc missing from conversation",null,{clientThreadId:n,modelId:I,textdocId:l,latestTextdocId:c,toolCallTextdocId:o?.textdocId,toolCallStatus:o?.status,toolCallFunction:o?.function})});if(p.useEffect(()=>{!t&&o?.status===de.COMPLETE&&!v&&!u&&b()},[o,u,t,v,b]),!o)return null;const x=o.status===de.REDACTED||!v&&!u&&o.status!==de.STREAMING&&o.status!==de.WAITING;let w,C;if(o.status!==de.REDACTED&&o.status!==de.FAILED&&!x&&l){const I=o.function===Nt.UpdateTextdoc&&o.status===de.COMPLETE;w=()=>{I&&o.versionInt?j6(l,o.versionInt,m):po(l)},C=()=>{I&&o.versionInt&&g(l,o.versionInt)}}const T=wle(o,u);if(o.function===Nt.CreateTextdoc){if(o.status===de.STREAMING||o.status===de.WAITING||o.status===de.COMPLETE){const j=v===!0&&(o.status===de.STREAMING||o.status===de.WAITING);return i.jsx(Zg,{isInlinePreview:y,isFetching:j,type:o.type??null,name:T,isFocused:f,isStreaming:o.status===de.STREAMING,onClick:w,isCanvasOpen:d,textdocId:l})}let I;switch(o.status){case de.FAILED:I=r.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case de.CANCELED:I=r.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case de.REDACTED:I=i.jsx(Ye,{align:"start",label:r.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:r.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return i.jsx(pT,{children:I})}const M=x||o.status===de.REDACTED,_=h&&!M?T:null,k=i.jsx(pT,{onClick:w,onMouseOver:C,isStreaming:o.status===de.STREAMING,children:o.function===Nt.CommentTextdoc?Cle(r,o,_):Sle(r,o,_)});return y&&!d&&!x&&l?i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx(Zg,{isInlinePreview:!0,isFetching:!1,type:u?.type??null,name:T,isFocused:f,isStreaming:o.status===de.STREAMING,onClick:l!=null?()=>po(l):void 0,isCanvasOpen:d,textdocId:l}),k]}):k};function wle(e,t){return t?.title?Jg(t.title):e.function===Nt.CreateTextdoc&&e.title?Jg(e.title):null}const pT=({isStreaming:e=!1,onClick:t,onMouseOver:n,children:r})=>i.jsx("button",{disabled:!t,className:A(e&&"loading-shimmer","flex min-h-5 w-fit select-none pt-[3px] text-start text-token-text-secondary",t&&"hover:text-token-text-primary"),onClick:t,onMouseOver:n,children:r}),nN=9;function Sle(e,t,n){if(t.status===de.STREAMING)return n?e.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:n}):e.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(t.status===de.FAILED)return n?e.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:n}):e.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(t.status===de.CANCELED)return n?e.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:n}):e.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const r=t.updates?.length;return t.status===de.REDACTED||!r||r>nN?n?e.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:n}):e.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):n?e.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:r,documentTitle:n}):e.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:r})}function Cle(e,t,n){if(t.status===de.STREAMING)return n?e.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:n}):e.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(t.status===de.FAILED)return n?e.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:n}):e.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(t.status===de.CANCELED)return n?e.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:n}):e.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const r=t.comments?.length;return t.status===de.REDACTED||!r||r>nN?n?e.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:n}):e.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):n?e.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:r,documentTitle:n}):e.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:r})}function Tle(e){const t=Math.floor(e/60),n=Math.floor(t/60),r=String(Math.floor(e)%60).padStart(2,"0"),s=String(t%60).padStart(2,"0");return n===0?`${s}:${r}`:`${n}:${s}:${r}`}function kle(e){const t=e?.audio_asset_pointer?.metadata;if(t?.start!==void 0&&t?.end!==void 0)return t.end-t.start}const O5e=p.memo(function(t){const n=L(),{content:r,metadata:s}=t.message;if(!(r.content_type==="multimodal_text"&&t.isUserTurn))return;const o=r.parts.filter(JM.isPartRealTimeUserAudioVideoAssetPointer).find(l=>l.audio_asset_pointer),c=kle(o);return i.jsxs("div",{className:"my-2 mr-4 flex flex-row justify-end gap-1 text-xs text-token-text-secondary",children:[s?.real_time_audio_has_video&&i.jsx(F$,{"aria-label":n.formatMessage({id:"/nS9Zn",defaultMessage:"Recorded with video or screenshare"}),className:"icon-sm"}),o&&i.jsx(B$,{"aria-label":n.formatMessage({id:"eP1JEa",defaultMessage:"Recorded with voice"}),className:"icon-sm"}),c!==void 0&&i.jsx("span",{className:"font-semibold",children:Tle(c)})]})});function Mle({type:e="info",children:t,isDismissible:n=!1,onDismiss:r,className:s,isElevated:a=!1}){const[o,c]=p.useState(!1);if(o)return null;let l;return e!=="none"&&(l=Pc),i.jsxs(Ele,{$type:e,className:A("flex w-full items-start gap-3 rounded-2xl border text-sm",e==="warning"||e==="danger"?"bg-opacity-5":"bg-opacity-10",n?"py-2.5 pl-3 pr-2 md:py-3 md:pl-4 md:pr-3":"px-3 py-2.5 md:p-4",a&&"shadow-xxs",s),children:[l&&i.jsx(l,{className:A("icon-lg shrink-0",n&&"mt-[2px] md:mt-px",(e==="info"||e==="none")&&"text-token-text-secondary")}),i.jsx("div",{className:A("grow",n?"pt-[4px] md:pt-[3px]":"pt-[2px]",!l&&"pl-1"),children:t}),n&&i.jsx("button",{onClick:()=>{c(!0),r?.()},className:A("flex h-7 w-7 shrink-0 items-center justify-center rounded-full bg-transparent text-token-text-primary",(e==="info"||e==="none")&&"hover:bg-token-main-surface-secondary",e==="danger"&&"hover:bg-token-surface-error/10",e==="warning"&&"hover:bg-orange-400/10"),children:i.jsx(Po,{className:"icon-md"})})]})}const Ele=fe.div`
${({$type:e})=>{switch(e){case"danger":return"text-token-text-error border-token-surface-error/15 bg-token-surface-error bg-opacity-0";case"warning":return"text-orange-600 bg-orange-400 bg-opacity-0 border-orange-400/15";case"success":return"text-green-500 border-green-500 bg-green-500 bg-opacity-0";default:return"text-token-text-primary border-token-border-light bg-token-main-surface-primary bg-opacity-0"}}}`,_le=({textdocId:e})=>{const t=An(l=>l?.resolveTempTextdocId[e]??e),n=Sf(t),r=O0(t),s=Ic();if(!n)return null;const a=()=>{po(t)},{title:o,type:c}=n;return i.jsx("div",{className:"flex w-full justify-end",children:i.jsx(Zg,{textdocId:t,type:c,name:o,isFocused:r,isCanvasOpen:s,onClick:a,isInlinePreview:!0})})},Ale=({messages:e})=>{const[t]=e,n=t?.message.metadata?.canvas;return!n||n.user_message_type!=null?null:i.jsx(i.Fragment,{children:n.pasted_textdocs?.map(({tempId:r})=>i.jsx(_le,{textdocId:r},r))})};function Ple(e,t=[]){if(t.length===0)return e;const n=t.filter(r=>r.end_ix<=e.length&&r.citation_format_type==="tether_markdown"&&r.metadata?.type==="webpage");for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.metadata?.type!=="webpage")continue;const{start_ix:a,end_ix:o,metadata:c}=s,u=e.substring(a,o).replace(/\[(.*?)\]\((\d+)\)/g,`[$1](${c?.url})`);e=e.substring(0,a)+u+e.substring(o)}return e}function jle(e,t=[]){if(t.length===0)return[];const n=[],r=t.filter(a=>a.end_ix<=e.length&&a.citation_format_type!=="tether_markdown"),s=C3(e);for(let a=r.length-1;a>=0;a--){const o=r[a];let c;const{start_ix:l,end_ix:u,metadata:d,invalid_reason:f}=o;if(!d?.type)continue;const m=s.slice(l,u).join("");switch(d.type){case"webpage":c={...d,type:"webpage",title:d.title??"",snippet:d.text??null,pub_date:Ole(d.pub_date),matched_text:m,start_idx:l,end_idx:u,alt:null,prompt_text:null,safe_urls:[],attributions:null};break;case"file":c={...d,matched_text:m,start_idx:l,end_idx:u,alt:null,prompt_text:null,safe_urls:[]};break}f&&(c={type:"invalid",alt:f,prompt_text:null,start_idx:l,end_idx:u,matched_text:m,invalid:!0,safe_urls:[]});let h=!1;if(n.length>0){const g=n[n.length-1];hT(g)===hT(c)&&s.slice(g.end_idx,o.start_ix).join("").trim().length===0&&(n[n.length-1].end_idx=o.end_ix,h=!0)}!h&&c&&n.push(c)}return n}function Ile(e,t=[],n=[]){const r=Ple(e,t),a=[...n.length>0?[]:jle(r,t),...n],o=Sc(a);return{text:r,contentReferences:o}}function Nle(){return tf("1001765573").config.get("ca_enabled",!1)}function hT(e){switch(e.type){case"file":return e.id;case"webpage":return e.url;case"invalid":return e.alt}}function Ole(e){return e==null?null:new Date(e).getTime()/1e3}class Rle{loggedEvents=new Set;logEvent(t,n){if(!this.loggedEvents.has(t)){const[r]=window.performance.getEntriesByType("navigation");r||n0.error("Failed to get navigation timing");const s=window.performance.now()-r.requestStart;E.logEvent(t,{timeMs:s,...n}),this.loggedEvents.add(t)}}}const Dle=new Rle;let ah=null;function jx(){return ah||(ah=qe(()=>import("./ipfbk7pynq3s7u67.js").then(e=>e.F),__vite__mapDeps([12,1,2,3,13,14,15,16,17,6,18,19,20,21,22,8,23,24]))),ah}const fm=Xe(()=>jx().then(e=>e.FormattedText)),oh=Xe(()=>jx().then(e=>e.UserFormattedText));function R5e(){return p.use(jx()),null}const Lle={highlightedAttributions:new Set},gT=3,ev=Ie(()=>Lle),vT={enabled:!0,debugMode:!1,disableSegmentReplacement:!1,filterToSection:!0,influenceTemperature:.25,probThreshold:.25},ds=Ie()(eE(()=>({...vT}),{name:"search.attributions-settings",version:gT,migrate:(e,t)=>t!==gT?vT:e}));function rN(e,t){return`${e}-${t}`}const yT={setHighlight:(e,t)=>{if(e==null)return;if(t==null||t.length===0)return yT.clearHighlights();Array.isArray(t)||(t=[t]);const n=new Set(t.map(r=>rN(e,r)));return ev.setState(()=>({highlightedAttributions:n}))},setHighlightBySource:(e,t)=>{let n;"attribution_segments"in t&&(n=t.attribution_segments??void 0);const r=ds.getState().filterToSection,s=ds.getState().influenceTemperature;let a;if("attributions_debug"in t&&(a=t.attributions_debug),a?.full_indexed_influence&&a?.ref_id&&s!==a?.influence_temperature){const o=ds.getState().probThreshold,c=Ule(a,s,void 0,r);if(c){n=[];for(const{attribution_index:l,probability:u}of c)u>o&&n.push(String(l))}}yT.setHighlight(e,n)},clearHighlights:()=>ev.setState({highlightedAttributions:new Set})},$le=()=>{const{value:e}=at("2192543539");return e},Fle=()=>{const e=$le(),t=ds(n=>n.enabled);return e&&t},D5e=()=>ds(e=>e.debugMode),L5e=(e,t)=>ev(n=>e==null?!1:n.highlightedAttributions.has(rN(e,t))),Ble=()=>ds(e=>e.disableSegmentReplacement||!e.enabled),$5e=()=>ds(e=>e.influenceTemperature),F5e=()=>ds(e=>e.filterToSection);function sN(e,t=1,n){const r={};for(const s in e){const a=e[s],o={},c=Object.entries(a);for(const[f,m]of c)o[f]=m;let l=0;const u={};for(const f in o){const m=o[f],h=Math.exp(m/t);u[f]=h,l+=h}const d={};for(const f in u)d[f]=u[f]/l;r[s]=d}return r}function Ule(e,t=1,n,r){const s=e.full_indexed_influence,a=e.ref_id;if(!s||!a)return null;const o=sN(s,t),c=[];for(const l in o)r&&e.filtered_segments&&!e.filtered_segments?.includes(l)||c.push({attribution_index:l,probability:o[l][a],influence:s[l][a]});return c.sort((l,u)=>u.probability-l.probability),c}function B5e(e,t=1,n){const r={};if(e.every(o=>o.influence==null))return e;e.forEach((o,c)=>{r[`${c}`]=o.influence??0});const a=sN({0:r},t);return e.map((o,c)=>({...o,probability:a[0][`${c}`]}))}const Vle=p.createContext(void 0);function Gle(){const{value:e}=at("568802918");return e}function Wle(){const e=new Intl.Segmenter("en-us",{granularity:"word"});return t=>{let n="";const r=[];return Array.from(e.segment(t)).forEach(({segment:s,isWordLike:a})=>{if(!a){n+=s;return}r.push(`${n}${s}`),n=""}),n.length>0?r.length===0?[n]:[...r.slice(0,r.length-1),`${r[r.length-1]}${n}`]:r}}class rs{static Interval=200;static ResetInterval=5e3;animatedNodeCount=0;alreadyAnimatedCount=0;batch=1;nextBatch=2;keyToNodeMap=new Map;hasNodeInBatch=!1;hasNodeInNextBatch=!1;state="reset";waitingRichBlocks=new Set;lastCreatedNode;segmenter;isActivelyStreaming=!1;onReset;onResetContext;onStylesUpdated;constructor(t){this.onStylesUpdated=t??(()=>{});try{this.segmenter=Wle()}catch{this.segmenter=n=>n.split("")}}setOnStylesUpdatedCallback(t){this.onStylesUpdated=t}setOnResetContext(t){this.onResetContext=t}setOnResetCallback(t){this.onReset=t}onStreamingChanged(t){this.isActivelyStreaming!==t&&(this.isActivelyStreaming=t,t?this.maybeStartBatch():setTimeout(()=>{this.reset()},rs.ResetInterval))}reset(){p.startTransition(()=>{this.animatedNodeCount=0,this.batch=1,this.nextBatch=2,this.keyToNodeMap.forEach(t=>{t.textSegments.clear()}),this.keyToNodeMap.clear(),this.hasNodeInBatch=!1,this.hasNodeInNextBatch=!1,this.waitingRichBlocks.clear(),this.lastCreatedNode=void 0,this.state="reset",this.onStylesUpdated(this.createTopLevelStyles()),this.onReset?.(),this.onResetContext?.()})}advanceToNextBatch(){if(this.hasNodeInBatch){if(this.batch=this.nextBatch,this.nextBatch++,this.hasNodeInBatch=!1,this.onStylesUpdated(this.createTopLevelStyles()),!this.hasNodeInNextBatch){this.state="idle",this.animatedNodeCount=0,this.alreadyAnimatedCount=0;return}setTimeout(()=>{this.hasNodeInBatch=!0,this.hasNodeInNextBatch=!1,this.advanceToNextBatch()},rs.Interval)}}get isIdleOrReset(){return this.state==="idle"||this.state==="reset"}get canAddToCurrentBatch(){return this.isActivelyStreaming&&this.state==="waiting"}get canStartNewBatch(){return this.isIdleOrReset&&this.isActivelyStreaming}maybeStartBatch(){this.canStartNewBatch&&(this.state="waiting",setTimeout(()=>this.advanceToNextBatch(),rs.Interval))}createTopLevelStyles(){const t={};let n=1;for(;n<this.nextBatch+1;)t[`--batch-play-state-${n}`]="playing",n++;return this.state==="reset"&&(t["--turn-block-opacity"]="1",t["--turn-animation"]="none"),t}createBlockstyles(t){return{"--streaming-animation-state":`var(--batch-play-state-${t})`,"--animation-rate":`var(--batch-play-rate-${t})`}}createMarkerStyles(t){if(typeof t=="number")return{"--animation-marker-count":t??this.animatedNodeCount};const n=t?.position?.start.line??-1,r=t?.position?.start.column??-1;let s;for(const a of this.keyToNodeMap.values()){const{start:o}=a.element.position??{start:{line:-1,column:-1}};if(o.line>=n&&o.column>=r){s=a;break}}return s?{"--animation-marker-count":s.startCount+1}:{}}createChildStyles(t,n){return{...n,"--animation-count":t.startCount,"--streaming-animation-state":`var(--batch-play-state-${t.batch})`}}processChildren({children:t,element:n}){const r=this.makeAnimationNode(n,void 0,!1);return J.Children.map(t,(a,o)=>{const c=n.children[o];return this.processNode({element:c,parent:r,reactNode:a}).reactElement})}makeAnimationNode(t,n,r){const s=this.generateKey(t);let a=this.batch;this.canAddToCurrentBatch?this.hasNodeInBatch=!0:(this.hasNodeInNextBatch=!0,a=this.batch+1);let o=this.keyToNodeMap.get(s);return o?o.parent=n:(o={batch:a,key:s,element:t,startCount:r?this.animatedNodeCount++:this.animatedNodeCount,parent:n,textSegments:new Set,children:new Map},this.keyToNodeMap.set(s,o),this.lastCreatedNode=o),this.waitingRichBlocks.forEach(c=>c()),o}getStaticStyles(t){const n={"--streaming-animation-state":"paused"};if(!t)return n;const r=this.generateKey(t);if(this.keyToNodeMap.has(r)){const s=this.keyToNodeMap.get(r);if(s)return this.createChildStyles(s)}return n}async processElementForStyles(t,n){const r=this;function s(){const u=t?.position?.start.line??0,d=t?.position?.start.column??0,{position:f}=r.lastCreatedNode?.element??{position:{start:{line:-1,column:-1}}},m=f?.start.line??-1,h=f?.start.column??-1;return m>=u&&h>=d}let a;function o(u){if(s()){r.waitingRichBlocks.delete(a);const d=r.makeAnimationNode(t,void 0,!0),f=r.createChildStyles(d,n);return u?.(f),f}}const c=o();if(c)return c;function l(){return new Promise(u=>{a=()=>o(u),r.waitingRichBlocks.add(a)})}return l()}static getNodeType(t,n){if(p.isValidElement(n)){if(t.type==="text")return 1;if(t.type==="element")return 0}return typeof n=="string"?2:3}processReactParent({reactNode:t,element:n,parent:r}){const s=J.Children.map(t.props.children,(a,o)=>{const c=n.children[o];if(!c)return a;const l=this.processNode({element:c,reactNode:a,parent:r});return r.children.set(l.key,l),l.reactElement});return r.reactElement=p.cloneElement(t,{children:s,style:{...t.props.style,...n.tagName==="li"?this.createMarkerStyles(r.startCount):{}}}),r}processReactText({reactNode:t,parent:n}){const{children:r,node:s}=t.props,a=s;if(!a)return r;const o=this.makeAnimationNode(a,n,!1),c=J.Children.map(r,l=>{const u=this.processNode({element:a,reactNode:l,parent:o});return n.children.set(u.key,u),u.reactElement});return n.reactElement=p.cloneElement(t,{children:c}),n}processPlainText({element:t,reactNode:n,parent:r}){if([" "].includes(n))r.reactElement=n;else{const s=this.segmenter(n),a=r,o=a.startCount;r.reactElement=i.jsx(i.Fragment,{children:s.map((c,l)=>{const u=this.generateKey(t);a.textSegments.has(u)||(this.animatedNodeCount++,a.textSegments.add(u));const d=o+l;return i.jsx("span",{style:{"--animation-count":d,"--streaming-animation-state":`var(--batch-play-state-${r.batch})`},children:c},l)})})}return r}processNode({element:t,reactNode:n,parent:r}){const s=this.makeAnimationNode(t,r,!1);switch(s.reactElement=n,rs.getNodeType(t,n)){case 0:return this.processReactParent({reactNode:n,element:t,parent:s});case 1:return this.processReactText({reactNode:n,element:t,parent:s});case 2:return this.processPlainText({reactNode:n,element:t,parent:s});default:return s}}generateKey(t){const{start:n}=t?.position??{start:{line:-1,column:-1}};return`${n.line}-${n.column}`}}const aN=p.createContext(new rs(()=>({})));function U5e(){return p.useContext(aN)}function Hle(){const e=p.useRef(void 0);return e.current||(e.current=new rs),{reset:p.useCallback(()=>{e.current=new rs},[]),streamingContext:e.current,StreamingProvider:aN.Provider}}function zle({messages:e}){const[t,n]=p.useState(),r=L();let s=null;for(const a of e)if(a.message.metadata?.dalle?.from_client?.operation!=null){s=a.message.metadata.dalle.from_client.operation;break}return p.useEffect(()=>{if(s==null)return;const a=s.original_file_id;async function o(c){try{const l=await K.getFileDownloadLink(c);l.status===Sr.Success?n(l.download_url):ie.addError(`Error fetching URL for file ${c}: ${l.status}`)}catch(l){ie.addError(new Error(`Error fetching URL for file ${c}`,{cause:l}))}}o(a)},[s]),s==null?null:i.jsxs("div",{className:"mt-2 flex items-center gap-1 text-token-text-tertiary",children:[i.jsx(zE,{className:"icon-md shrink-0"}),t==null?i.jsx("div",{className:"h-7"}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:t,alt:r.formatMessage({id:"textMessage.editedImageAltText",defaultMessage:"Edited image"}),className:"h-7 w-auto rounded opacity-50"}),s.type==="inpainting"&&i.jsx("span",{className:"ml-1 text-sm font-semibold",children:i.jsx(S,{id:"textMessage.inpaintedImage",defaultMessage:"Selection"})})]})]})}const Yo=fe.a`bold underline`,Rn=({className:e,isUserTurn:t,flag:n,children:r})=>n!=="info"&&t?i.jsx(xT,{className:A("w-full pr-5 text-right",e),$flag:n,children:r}):i.jsxs(xT,{$flag:n,className:A("flex w-full items-start gap-3 rounded-2xl border p-4",n==="warning"||n==="danger"?"bg-opacity-5":"bg-opacity-10",e),children:[i.jsx(Pc,{className:"icon-lg"}),i.jsx("div",{className:"pt-px",children:r})]}),xT=fe.div`text-sm 
${({$flag:e})=>{switch(e){case"danger":return"text-token-text-error border-token-surface-error/15 bg-token-surface-error bg-opacity-0";case"warning":return"text-orange-600 border-token-border-light bg-orange-400 bg-opacity-0";case"info":return"text-token-text-primary border-token-border-light bg-token-main-surface-primary bg-opacity-0";default:return"text-green-500 border-green-500 bg-green-500 bg-opacity-0"}}}`,qle={a:e=>{const{node:t,...n}=e;return i.jsx(Yo,{...n,target:"_blank",rel:"noreferrer",className:"[&&]:text-black [&&]:underline [&&]:hover:text-black [&&]:dark:text-white [&&]:hover:dark:text-white"})}};function Yle({disclaimerContent:e,isUserTurn:t,className:n}){switch(e){case"us_elections_policy":return i.jsx(Rn,{flag:"info",isUserTurn:t,className:n,children:i.jsx(S,{id:"D1Mw8a",defaultMessage:"Always verify information about voting with your state or local election authority. For more information, visit <usElectionLink></usElectionLink>.",values:{usElectionLink:Xle}})});case"eu_elections_policy":return i.jsx(Rn,{flag:"info",isUserTurn:t,className:n,children:i.jsx(S,{id:"Disclaimer.EUElections",defaultMessage:"Always verify information about voting with your local election authority. For more information about the EU elections, visit <euElectionLink></euElectionLink>.",values:{euElectionLink:Kle}})});case"generic_elections_policy":return i.jsx(Rn,{flag:"info",isUserTurn:t,className:n,children:i.jsx(S,{id:"Disclaimer.GenericElections",defaultMessage:"Always verify information about voting with your local election authority."})})}return i.jsx(Rn,{flag:"info",isUserTurn:t,className:n,children:i.jsx(fm,{className:"text-sm",componentOverrides:qle,children:e})})}const Kle=()=>i.jsx(Yo,{target:"_blank",href:"https://elections.europa.eu",rel:"noreferrer",children:"elections.europa.eu"}),Xle=()=>i.jsx(Yo,{target:"_blank",href:"https://canivote.org",rel:"noreferrer",children:"canivote.org"});function Qle({className:e,isUserTurn:t,message:n}){return n?.disclaimers?.length?i.jsx("div",{className:"flex flex-col gap-2",children:n.disclaimers.map(r=>i.jsx(Yle,{className:e,disclaimerContent:r,isUserTurn:t},r))}):null}const oN=-1,mm=0,gd=1,vd=2,Ix=3,Nx=4,Ox=5,Rx=6,iN=7,cN=8,bT=typeof self=="object"?self:globalThis,Zle=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,o]=t[s];switch(a){case mm:case oN:return n(o,s);case gd:{const c=n([],s);for(const l of o)c.push(r(l));return c}case vd:{const c=n({},s);for(const[l,u]of o)c[r(l)]=r(u);return c}case Ix:return n(new Date(o),s);case Nx:{const{source:c,flags:l}=o;return n(new RegExp(c,l),s)}case Ox:{const c=n(new Map,s);for(const[l,u]of o)c.set(r(l),r(u));return c}case Rx:{const c=n(new Set,s);for(const l of o)c.add(r(l));return c}case iN:{const{name:c,message:l}=o;return n(new bT[c](l),s)}case cN:return n(BigInt(o),s);case"BigInt":return n(Object(BigInt(o)),s)}return n(new bT[a](o),s)};return r},wT=e=>Zle(new Map,e)(0),Oa="",{toString:Jle}={},{keys:eue}=Object,fi=e=>{const t=typeof e;if(t!=="object"||!e)return[mm,t];const n=Jle.call(e).slice(8,-1);switch(n){case"Array":return[gd,Oa];case"Object":return[vd,Oa];case"Date":return[Ix,Oa];case"RegExp":return[Nx,Oa];case"Map":return[Ox,Oa];case"Set":return[Rx,Oa]}return n.includes("Array")?[gd,n]:n.includes("Error")?[iN,n]:[vd,n]},Yl=([e,t])=>e===mm&&(t==="function"||t==="symbol"),tue=(e,t,n,r)=>{const s=(o,c)=>{const l=r.push(o)-1;return n.set(c,l),l},a=o=>{if(n.has(o))return n.get(o);let[c,l]=fi(o);switch(c){case mm:{let d=o;switch(l){case"bigint":c=cN,d=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);d=null;break;case"undefined":return s([oN],o)}return s([c,d],o)}case gd:{if(l)return s([l,[...o]],o);const d=[],f=s([c,d],o);for(const m of o)d.push(a(m));return f}case vd:{if(l)switch(l){case"BigInt":return s([l,o.toString()],o);case"Boolean":case"Number":case"String":return s([l,o.valueOf()],o)}if(t&&"toJSON"in o)return a(o.toJSON());const d=[],f=s([c,d],o);for(const m of eue(o))(e||!Yl(fi(o[m])))&&d.push([a(m),a(o[m])]);return f}case Ix:return s([c,o.toISOString()],o);case Nx:{const{source:d,flags:f}=o;return s([c,{source:d,flags:f}],o)}case Ox:{const d=[],f=s([c,d],o);for(const[m,h]of o)(e||!(Yl(fi(m))||Yl(fi(h))))&&d.push([a(m),a(h)]);return f}case Rx:{const d=[],f=s([c,d],o);for(const m of o)(e||!Yl(fi(m)))&&d.push(a(m));return f}}const{message:u}=o;return s([c,{name:l,message:u}],o)};return a},ST=(e,{json:t,lossy:n}={})=>{const r=[];return tue(!(t||n),!!t,new Map,r)(e),r},ih=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?wT(ST(e,t)):structuredClone(e):(e,t)=>wT(ST(e,t)),V5e=function(e,t,n,r,s){const a=Dx(t);return lN(e)?a.call(s,e,n,r):!1},Dx=function(e){if(e==null)return sue;if(typeof e=="string")return rue(e);if(typeof e=="object")return nue(e);if(typeof e=="function")return Lx(e);throw new Error("Expected function, string, or array as `test`")};function nue(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Dx(e[n]);return Lx(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function rue(e){return Lx(t);function t(n){return n.tagName===e}}function Lx(e){return t;function t(n,r,s){return!!(lN(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function sue(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="element"&&"tagName"in e&&typeof e.tagName=="string")}function lN(e){return e!==null&&typeof e=="object"&&"type"in e&&"tagName"in e}const aue=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,oue=/^[a-zA-Z]:\\/;function iue(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return oue.test(e)?!1:aue.test(e)}function cue(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function G5e(e){return e.join(" ").trim()}const uN=function(e){if(e==null)return fue;if(typeof e=="function")return pm(e);if(typeof e=="object")return Array.isArray(e)?lue(e):uue(e);if(typeof e=="string")return due(e);throw new Error("Expected function, string, or object as test")};function lue(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=uN(e[n]);return pm(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function uue(e){const t=e;return pm(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function due(e){return pm(t);function t(n){return n&&n.type===e}}function pm(e){return t;function t(n,r,s){return!!(mue(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function fue(){return!0}function mue(e){return e!==null&&typeof e=="object"&&"type"in e}const dN=[],pue=!0,CT=!1,hue="skip";function gue(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=uN(s),o=r?-1:1;c(e,void 0,[])();function c(l,u,d){const f=l&&typeof l=="object"?l:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return m;function m(){let h=dN,g,v,y;if((!t||a(l,u,d[d.length-1]||void 0))&&(h=vue(n(l,d)),h[0]===CT))return h;if("children"in l&&l.children){const b=l;if(b.children&&h[0]!==hue)for(v=(r?b.children.length:-1)+o,y=d.concat(b);v>-1&&v<b.children.length;){const x=b.children[v];if(g=c(x,v,y)(),g[0]===CT)return g;v=typeof g[1]=="number"?g[1]:v+o}}return h}}}function vue(e){return Array.isArray(e)?e:typeof e=="number"?[pue,e]:e==null?dN:[e]}function yue(e,t,n,r){let s,a,o;typeof t=="function"&&typeof n!="function"?(a=void 0,o=t,s=n):(a=t,o=n,s=r),gue(e,a,c,s);function c(l,u){const d=u[u.length-1],f=d?d.children.indexOf(l):void 0;return o(l,f,d)}}const xue=["http","https"],bue=["nofollow"],wue={};function Sue(e){const t=e||wue,n=t.protocols||xue,r=Dx(t.test);return function(s){yue(s,"element",function(a,o,c){if(a.tagName==="a"&&typeof a.properties.href=="string"&&r(a,o,c)){const l=a.properties.href;if(iue(l)?n.includes(l.slice(0,l.indexOf(":"))):l.startsWith("//")){const u=mi(t.content,a),d=u&&!Array.isArray(u)?[u]:u,f=mi(t.rel,a)||bue,m=typeof f=="string"?cue(f):f,h=mi(t.target,a),g=mi(t.properties,a);if(g&&Object.assign(a.properties,ih(g)),m.length>0&&(a.properties.rel=[...m]),h&&(a.properties.target=h),d){const v=mi(t.contentProperties,a)||{};a.children.push({type:"element",tagName:"span",properties:ih(v),children:ih(d)})}}}})}}function mi(e,t){return typeof e=="function"?e(t):e}const Cue="gpt-4",tv="model_cap_exceeded",Tue="oai/apps/capExpiresAt";Ie(()=>({serverThreadIds:new Set}));function kue(){const e=il(s=>s.isoDate),t=Date.now(),n=e&&new Date(e).getTime(),r=e&&n&&n<=t;return p.useEffect(()=>{r&&fN()},[r]),r?null:e?Cue:null}const il=Ie()(eE(()=>({isoDate:""}),{name:Tue}));function Mue(e){il.setState({isoDate:e})}function fN(){il.setState({isoDate:""})}const Eue=Xe(()=>qe(()=>import("./z80rnev01krf6dm9.js").then(e=>e.F),__vite__mapDeps([15,1,2,3])));function _ue(e){return e.message.metadata?.safety_plugin_status_code===123}function Aue(e){return e.message.metadata?.finish_details?.type==="content_filter"}function $x(e){if(e===void 0)return{flagSeverity:void 0,shouldHideContent:!1,errCode:void 0,errMessage:void 0};const{errType:t,errCode:n,err:r,disclaimers:s}=e,a=Aue(e),o=a&&_ue(e),c=s&&s.length>0;return o?{flagSeverity:"warning",shouldHideContent:!0,errCode:Ln.ContentRegurgitation,errMessage:r}:!c&&a?{flagSeverity:"warning",shouldHideContent:!0,errCode:Ln.ContentOrTos,errMessage:r}:{flagSeverity:t,shouldHideContent:t==="danger"&&(n===Ln.ContentPolicy||n===Ln.ModelIncompatibility),disclaimers:s,errCode:n,errMessage:r}}function Pue({message:e,onRequestMoreCompletions:t,clientThreadId:n,id:r,isFeedbackEnabled:s,isUserTurn:a,className:o}){const{errCode:c,errMessage:l,flagSeverity:u}=$x(e);switch(c){case Ln.ContentPolicy:return i.jsx(Rn,{flag:u,isUserTurn:a,className:o,children:i.jsx(Oue,{isFeedbackEnabled:s})});case Ln.ModelIncompatibility:return i.jsx(Rn,{flag:u,isUserTurn:a,className:o,children:i.jsx(S,{...an.modelIncompatibilityMessage})});case Ln.ContentOrTos:return i.jsx(Rn,{flag:u,isUserTurn:a,className:o,children:i.jsx(Iue,{isFeedbackEnabled:s})});case Ln.ContentRegurgitation:return i.jsx(Rn,{flag:u,isUserTurn:a,className:o,children:i.jsx(Nue,{})});case tv:return i.jsx(jue,{className:o,id:r,onRequestMoreCompletions:t,flag:u,clientThreadId:n,isUserTurn:a});case tE:return i.jsx(Rn,{flag:u,isUserTurn:a,className:o,children:i.jsx(S,{...an.historyDisabledConversationMissing})});default:return l!==void 0?i.jsx(Rn,{flag:u,isUserTurn:a,className:o,children:i.jsx(Eue,{rehypePlugins:[[Sue,{target:"_new",rel:"noopener noreferrer"}]],className:"markdown prose w-full break-words dark:prose-invert",children:l})}):null}}function jue({className:e,id:t,onRequestMoreCompletions:n,flag:r,clientThreadId:s,isUserTurn:a}){const o=il(v=>v.isoDate),c=Y_(o),l=nf(s??nE),u=l&&l.kind!==Me.PrimaryAssistant,d=Dc(),f=cA(),m=p.useCallback(()=>{q.logEvent("chatgpt_regenerate_due_to_rate_limit_button_clicked",void 0,{useDefaultModel:"false",...Bu({clientThreadId:s})});const v=new Yu;n(t,{eventSource:"mouse"},v,!0,"none",!1)},[t,n,s]),h=p.useCallback(()=>{const v=new Yu,y=f.id;q.logEvent("chatgpt_regenerate_due_to_rate_limit_button_clicked",void 0,{useDefaultModel:"true",...Bu({clientThreadId:s})}),d({modelId:y,location:"Model switcher menu item"}),n(t,{eventSource:"mouse"},v,!0,"none",!0)},[n,t,f.id,d,s]);let g;return u?g=o!=null?i.jsx("span",{children:i.jsx(S,{...an.gptUsageCapExceededCustomFeature,values:{link:TT,formattedTime:c}})}):i.jsx(S,{...an.gptUsageCapExceededExpired}):g=o!=null?i.jsx("span",{children:i.jsx(S,{...an.gptUsageCapExceeded,values:{link:TT,formattedTime:c}})}):i.jsx(S,{...an.gptUsageCapExceededExpired}),i.jsx(Rn,{flag:o!=null?r:void 0,isUserTurn:a,className:e,children:i.jsxs("div",{className:"flex items-center gap-6",children:[g,o==null&&i.jsx(ee,{color:"secondary",className:"flex-shrink-0",onClick:m,children:i.jsx(S,{...an.buttonTryAgain})}),o!=null&&!u&&i.jsx(ee,{color:"secondary",className:"flex-shrink-0",onClick:h,children:i.jsx(S,{...an.buttonUseDefaultModel})})]})})}const TT=e=>i.jsx("a",{href:"https://share.hsforms.com/16d0ZZVM3QZirXnCD_q7u1Q4sk30",target:"_blank",rel:"noreferrer",className:"underline",children:e});function Iue({isFeedbackEnabled:e}){return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:e?"font-semibold":"",children:i.jsx(S,{...an.contentOrTosViolationNoFeedback,values:{contentPolicyLink:mN,termsLink:Rue}})}),i.jsx("div",{children:e&&i.jsx(S,{...an.contentPolicyFeedback})})]})}function Nue(){return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"font-semibold",children:i.jsx(S,{...an.contentRegurgitationViolation})}),i.jsx("div",{children:i.jsx(S,{...an.readModelSpec,values:{modelSpecLink:Due}})})]})}function Oue({isFeedbackEnabled:e}){return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:e?"font-semibold":"",children:i.jsx(S,{...an.contentPolicyViolationNoFeedback,values:{contentPolicyLink:mN}})}),i.jsx("div",{children:e&&i.jsx(S,{...an.contentPolicyFeedback})})]})}const mN=e=>i.jsx(Yo,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:e}),Rue=e=>i.jsx(Yo,{target:"_blank",href:"https://openai.com/policies/terms-of-use",rel:"noreferrer",children:e}),Due=e=>i.jsx(Yo,{target:"_blank",href:"https://cdn.openai.com/spec/model-spec-2024-05-08.html",rel:"noreferrer",children:e}),an=z({contentPolicyFeedback:{id:"TextMessageDisplay.contentPolicyFeedback",defaultMessage:"Did we get it wrong? Please tell us by giving this response a thumbs down."},contentPolicyViolation:{id:"TextMessageDisplay.contentPolicyViolation.2",defaultMessage:"This content may violate our <contentPolicyLink>usage policies</contentPolicyLink>. Did we get it wrong? Please tell us by giving this response a thumbs down."},contentPolicyViolationNoFeedback:{id:"TextMessageDisplay.contentPolicyViolationNoFeedback",defaultMessage:"This content may violate our <contentPolicyLink>usage policies</contentPolicyLink>."},modelIncompatibilityMessage:{id:"cyOWhN",defaultMessage:"Your request was flagged as potentially violating our usage policy. Please try again with a different prompt."},contentOrTosViolation:{id:"TextMessageDisplay.contentOrTosViolation.2",defaultMessage:"This content may violate our <termsLink>Terms of Use</termsLink> or <contentPolicyLink>usage policies</contentPolicyLink>. Did we get it wrong? Please tell us by giving this response a thumbs down."},contentOrTosViolationNoFeedback:{id:"TextMessageDisplay.contentOrTosViolationNoFeedback",defaultMessage:"This content may violate our <termsLink>Terms of Use</termsLink> or <contentPolicyLink>usage policies</contentPolicyLink>."},contentRegurgitationViolation:{id:"kAMQnd",defaultMessage:"ChatGPT isn't designed to provide this type of content."},readModelSpec:{id:"fQ0JYv",defaultMessage:"Read the <modelSpecLink>Model Spec</modelSpecLink> for more on how ChatGPT handles creators' content."},historyDisabledConversationMissing:{id:"TextMessageDisplay.historyDisabledConversationMissing",defaultMessage:"Sorry, conversations created when Chat History is off expire after 6 hours of inactivity. Please start a new conversation to continue using ChatGPT."},somethingWentWrong:{id:"TextMessageDisplay.somethingWentWrong",defaultMessage:"Something went wrong."},gptUsageCapExceeded:{id:"TextMessageDisplay.gptUsageCapExceeded",defaultMessage:"You've reached the current usage cap for GPT-4. You can continue with the default model now, or try again {formattedTime}. <link>Learn more</link>"},gptUsageCapExceededCustomFeature:{id:"TextMessageDisplay.gptUsageCapExceededCustomFeature",defaultMessage:"You've reached the current usage cap for GPT-4, please try again {formattedTime}. <link>Learn more</link>"},gptUsageCapExceededExpired:{id:"TextMessageDisplay.gptUsageCapExceededExpired",defaultMessage:"You previously reached your usage cap for GPT-4, but you can now try sending your message again"},buttonUseDefaultModel:{id:"TextMessageDisplay.buttonUseDefaultModel",defaultMessage:"Use default model"},buttonTryAgain:{id:"TextMessageDisplay.buttonTryAgain",defaultMessage:"Try again"}}),Lue="application/vnd.google-apps.spreadsheet",$ue="application/vnd.google-apps.presentation",Fue="application/vnd.google-apps.document",Bue=["xlsx","pptx","docx"],Uue={[Lue]:"xlsx",[$ue]:"pptx",[Fue]:"docx"};function pN(e){return e?Uue[e.split(";")[0]]??null:null}function Vue(e){return Bue.includes(e)}function Gue(e){return e&&Vue(e)?e:null}var Je=(e=>(e[e.None=0]="None",e[e.Multimodal=1]="Multimodal",e[e.Interpreter=2]="Interpreter",e[e.Retrieval=3]="Retrieval",e[e.ContextConnector=4]="ContextConnector",e[e.ProfilePicture=5]="ProfilePicture",e))(Je||{});function Wue(e){if(e)return{contextConnector:e.context_connector,sourceUrl:e.source_url,syntheticExtension:Gue(e.synthetic_extension),type:e.type}}var Kr=(e=>(e.Uploading="uploading",e.Ready="ready",e))(Kr||{});function cl(e){return e.startsWith("file-service://")?e.replace("file-service://",""):e.startsWith("sediment://")?e.replace("sediment://",""):e}function Hue(e){return"file-service://"+e}function zue(e){return e.startsWith("file-service://")}function nv(e,t,n){switch(t){case"file_zero_bytes":return e.formatMessage(At.fileZeroBytes,n);case"file_too_large":return e.formatMessage(At.fileTooLarge,n);case"over_user_quota":return e.formatMessage(At.overUserQuota,n);case"file_not_found":case"file_expired":return e.formatMessage(At.fileNotFound,n);case"file_timed_out":return e.formatMessage(At.fileTimedOut,n);case"ace_pod_expired":return e.formatMessage(At.codeInterpreterSessionTimeout,n);case"permission_error":return e.formatMessage(At.permissionError,n);case"default_upload_error":case"file_rejected":return e.formatMessage(At.defaultCreateEntryError,n);case"default_download_link_error":return e.formatMessage(At.defaultDownloadLinkError,n);case"file_empty":return e.formatMessage(At.fileEmpty,n);case"too_many_tokens":return e.formatMessage(At.fileTooManyTokens,n);case"file_encrypted":return e.formatMessage(At.fileEncrypted,n);case"file_corrupted":return e.formatMessage(At.fileCorrupted,n);case"failed_upload_to_blobstore":return e.formatMessage(At.failedUploadToBlobStore,n);case"internal_error":default:return e.formatMessage(At.unknownError)}}function W5e(){const e=L();return p.useCallback((t,n)=>nv(e,t,n),[e])}function H5e(){const{session:e}=r0(),{isUnauthenticated:t}=bt(),n=L(),r=Ne();return async(s,a)=>{if(!t&&e==null)return r.danger(n.formatMessage(At.fileDownloadFailed)),!1;try{const o=await K.getFileDownloadLink(s,void 0,t);if(o.status!==Sr.Success)throw new Error("File is not ready to download: "+JSON.stringify(o));const c=o.download_url,l=document.createElement("a");l.href=c,l.download=a,l.click(),window.open(c,"_blank")}catch{return r.danger(n.formatMessage(At.fileDownloadFailed)),!1}return!0}}function ll(e,t){return t?.kind===Me.GizmoInteraction||t?.kind===Me.GizmoTest?t.gizmo?.product_features:e?.product_features}function yd(e,t){const n=ll(e,t);return n?.attachments?.type===za.CodeInterpreter?Je.Interpreter:n?.attachments?.type===za.Multimodal?Je.Multimodal:n?.attachments?.type===za.Retrieval?Je.Retrieval:n?.attachments?.type===za.ContextConnector?Je.ContextConnector:Je.None}function Fx(e){const t=e.split(".").pop()?.toLowerCase();return{md:"text/markdown",java:"text/x-java",py:"text/x-script.python",c:"text/x-c",cpp:"text/x-c++",h:"text/x-c++",php:"text/x-php",rb:"text/x-ruby",tex:"application/x-latext",ts:"text/x-typescript",cs:"text/x-csharp"}[t??""]||""}function que(e){switch(e){case"application/vnd.google-apps.spreadsheet":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"application/vnd.google-apps.document":case"application/vnd.google-apps.presentation":return"text/plain";default:return e}}function Yue(e,t,n,r,s){if(s==null)return e;const a=Fx(t);a&&(n=a),r&&(n=que(n));const{accepted_mime_types:o,can_accept_all_mime_types:c}=s;return o==null||o.length===0||!c||o.includes(n)?e:Je.Interpreter}function z5e(e,t,n){const r=t!==""?t:Fx(n),s=e?.product_features?.attachments;if(s!=null)return s.accepted_mime_types?.includes(r)?s.type:s.image_mime_types?.includes(r)?za.Multimodal:za.CodeInterpreter}function Kue(e,t){const n=ll(e,t);return n?.attachments?.can_accept_all_mime_types?void 0:n?.attachments?.accepted_mime_types}function hN(e,t){const n=ll(e,t),{attachments:r}=n??{};return r?.image_mime_types?r.image_mime_types:r?.type==="multimodal"?r.accepted_mime_types??Xue:[]}const Xue=["image/png","image/jpeg","image/gif","image/webp"];function Que(e){return p.useMemo(()=>{if(e===void 0)return{};const t={"image/jpeg":[".jpg",".jpeg"],"image/svg+xml":[".svg"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":[".pptx"]};return{accept:e.reduce((n,r)=>(r in t?n[r]=t[r]:r.includes("/")&&(n[r]=[`.${r.split("/")[1]}`]),n),{})}},[e])}function la(e){return e.split(".").pop()?.toLowerCase()}function Bx(e){const t=la(e);return t!=null&&["jpg","jpeg","png","gif","webp"].includes(t)}function gN(e){const t=la(e);return t!=null&&["xls","xlsx","csv"].includes(t)}function Zue(e){const t=la(e);return t!=null&&["xls","xlsx"].includes(t)}function vN(e,t,n="fit"){return new Promise((r,s)=>{const a=new FileReader;a.onerror=o=>{ie.addError(new Error("File reading has failed:",{cause:o})),s(new Error("Failed to read the file."))},a.onload=o=>{const c=new Image;c.onerror=l=>{ie.addError(new Error("Image loading has failed:",{cause:l})),s(new Error("Failed to load the image."))},c.onload=()=>{const l=document.createElement("canvas");let u,d=0,f=0;switch(n){case"fill":u=t/Math.min(c.width,c.height);break;case"square":u=t/Math.min(c.width,c.height);break;case"fit":u=t/Math.max(c.width,c.height);break}const m=c.width*u,h=c.height*u;n==="square"?(l.width=t,l.height=t,d=(t-m)/2,f=(t-h)/2):(l.width=m,l.height=h);const g=l.getContext("2d");if(g==null){ie.addError("Canvas context creation failed. Your environment might not fully support HTML5 canvas."),s(new Error("Failed to create canvas context."));return}g.drawImage(c,d,f,m,h);const v=e.type||"image/png";l.toBlob(y=>{y?r(new File([y],e.name,{type:v})):(ie.addError("Blob creation failed. Blob is null."),s(new Error("Failed to create blob from image data.")))},v)},o.target==null?(ie.addError("Event target is null. Failed to load image."),s("Failed to load image.")):c.src=o.target.result},a.readAsDataURL(e)})}function q5e(e,t){return vN(e,t,"square")}function yN(e){const t=e.name.split("/")??[];return(t[t.length-1]??"").replace(/[-_]/g," ").split(".")[0]}function xN(e,t){return t?e.slice(0,-t.length-1):e}const At=z({defaultCreateEntryError:{id:"fileUpload.defaultCreateEntryError",defaultMessage:"Unable to upload {fileName}"},defaultDownloadLinkError:{id:"fileUpload.defaultDownloadLinkError",defaultMessage:"Failed to get upload status for {fileName}"},unknownError:{id:"fileUpload.unknownError",defaultMessage:"Unknown error occurred"},fileZeroBytes:{id:"fileUpload.fileZeroBytes",defaultMessage:"File is empty"},fileTooLarge:{id:"fileUpload.fileTooLarge",defaultMessage:"File is too large"},overUserQuota:{id:"fileUpload.overUserQuota",defaultMessage:"User quota exceeded"},fileNotFound:{id:"fileUpload.fileNotFound",defaultMessage:"File not found"},fileTimedOut:{id:"fileUpload.fileTimedOut",defaultMessage:"File upload timed out. Please try again."},fileEmpty:{id:"fileUpload.fileEmpty",defaultMessage:"No text could be extracted from this file."},fileTooManyTokens:{id:"fileUpload.fileTooManyTokens",defaultMessage:"This file contains too much text content. Please try again with a smaller file."},fileEncrypted:{id:"fileUpload.fileEncrypted",defaultMessage:"This file is encrypted/requires a password to access. Please try again with an unencrypted file."},fileCorrupted:{id:"fileUpload.fileCorrupted",defaultMessage:"This file is corrupted. Please ensure the file is not corrupted and try again."},codeInterpreterSessionTimeout:{id:"fileUpload.codeInterpreterSessionTimeout",defaultMessage:"Code interpreter session expired"},permissionError:{id:"fileUpload.permissionError",defaultMessage:"Missing permission to access file"},fileDownloadFailed:{id:"filesModal.fileDownloadFailed",defaultMessage:"File download failed. Please try again."},failedUploadToBlobStore:{id:"fileUpload.failedUploadToBlobStore",defaultMessage:"Failed upload to files.oaiusercontent.com. Please ensure your network settings allow access to this site or contact your network administrator."}}),Jue=e=>({type:"table",file_id:e.id??"",title:yN(e),file_name:e.name,context_connector_info:e.context_connector_info});function bN(){return rE(rf.DataAnalysisV2)}const ede=p.createContext({isEmbeddedInFocusedView:!1});function Ko(){return p.useContext(ede).isEmbeddedInFocusedView}const tde=Xe(()=>qe(()=>import("./mb46hy8ixifa6q8w.js").then(e=>e.A),__vite__mapDeps([25,1,2,3,6,26,27,23,28,29])).then(e=>e.default)),nde=Xe(()=>qe(()=>Promise.resolve().then(()=>dAe),void 0)),rde=fe.div`flex gap-2 flex-wrap mt-1 max-w-[80%] justify-end`,sde=fe.div`flex flex-col gap-2`,ade=({parts:e,attachments:t,isUserTurn:n,clientThreadId:r})=>{const s=Ms(),a=bN(),o=JM.getImageAssetPointersFromParts(e),c=new Set(o.map(h=>cl(h.asset_pointer))),u=Ko()||s,d=(t??[]).filter(h=>gN(h.name)),f=(t??[]).filter(h=>h.id==null||c.has(h.id)?!1:a?!d.includes(h):!0);return(a?(f.length>0||d.length>0)&&n:f.length>0&&n)?i.jsxs(i.Fragment,{children:[i.jsx(rde,{children:f.map(h=>i.jsx(nde,{file:h.name,fileId:h.id,contextConnectorInfo:Wue(h.context_connector_info),width:s?"normal":"wide",alwaysShowData:!0},h.id))}),a&&i.jsx(sde,{className:A(!u&&"w-[80%]"),children:d.map(h=>i.jsx(tde,{clientThreadId:r,visualization:Jue(h)},h.id))})]}):null},ode=sf(()=>({images:new Set})),ide=e=>Cc(ode,e);function cde(){return ide(e=>e.images)}function Y5e(e){return T3(e)&&!k3(e)}const Kl=50,lde=95;function K5e(e,t){if(e<=t)return e/t*Kl;{const n=Kl,r=lde-Kl,s=e-t,o=-(Kl/t)/r;return n+r*(1-Math.exp(o*s))}}class ude{mostRecentCompletionRequest;loggedRequests=new Set;onCompletionRequestStarted(t){this.mostRecentCompletionRequest={requestId:t,timestamp:Date.now()},this.loggedRequests.clear()}logEvent(t,n,r,s,a){const o=this.mostRecentCompletionRequest;if(o!=null&&!this.loggedRequests.has(t)){const l=D.getThreadConversationTurns(n,r).find(u=>u.messages.some(d=>d.message.id===r));l!=null&&l.messages.some(u=>u.nodeId===o.requestId)&&(E.logEvent(t,{messageId:r,timeMs:Date.now()-o.timestamp,...s}),a?.(),this.loggedRequests.add(t))}}}const rv=new ude;function dde(e){return(e.find(s=>s.message.metadata?.image_search_results!==void 0)?.message.metadata?.image_search_results??[]).slice(0,5)}function fde({messages:e}){const t=dde(e),n=cde();return t.length===0?null:i.jsx("div",{className:A({"mb-2":!0,"grid grid-flow-col gap-3":t.length>1,"w-1/3":t.length===1}),children:t.filter(({contentUrl:r})=>n.has(r)).map((r,s)=>i.jsx("a",{href:r.hostPageUrl,target:"_blank",rel:"noreferrer",children:i.jsx("img",{src:r.contentUrl,alt:r.name,className:"aspect-square rounded-xl object-cover"})},s))})}function mde({onEnterEdit:e}){const n=L().formatMessage({id:"gG9rea",defaultMessage:"Edit message"});return i.jsx("div",{className:"absolute bottom-0 right-full top-0 -mr-3.5 hidden pr-5 pt-1 [.group\\/conversation-turn:hover_&]:block",children:i.jsx(Ye,{sideOffset:4,label:n,children:i.jsx("button",{"aria-label":n,className:"flex h-9 w-9 items-center justify-center rounded-full text-token-text-secondary transition hover:bg-token-main-surface-tertiary",onClick:e,children:i.jsx(qE,{className:"icon-md"})})})})}function ch({containsImagesOrAttachments:e,isUserTurn:t,showEditButton:n,onEnterEdit:r,children:s}){return i.jsxs("div",{className:A("relative max-w-[70%]",t&&"rounded-3xl bg-token-message-surface px-5 py-2.5",t&&e&&"rounded-tr-lg"),children:[s,n&&i.jsx(mde,{onEnterEdit:r})]})}const pde=Xe(()=>qe(()=>import("./le6se1rtund9pgzu.js"),__vite__mapDeps([30,1,2,3,31,32])).then(e=>e.TextMessageImageGroup));function wN({attachments:e,citations:t,contentReferences:n,className:r,clientThreadId:s,displayParts:a,isCompletionInProgress:o,id:c,isActivelyStreaming:l,isUserTurn:u,turnIndex:d,isFeedbackEnabled:f,messages:m,onRequestMoreCompletions:h,parts:g,prevGroupedMessageType:v,prevGroupedMessages:y,showEditButton:b,onEnterEdit:x,size:w="medium"}){const C=m.length>1,{flagSeverity:T,shouldHideContent:M}=$x(C?void 0:m[0]),_=g.some(j=>j!==""),k=!_&&m[0].message.metadata?.content_references?.length===0,I=m[0].message.metadata?.targeted_reply_label??m[0].message.metadata?.targeted_reply;return p.useEffect(()=>{const j=m[0].message;if(j.author.metadata?.real_author===`tool:${RM.SEARCHGPT}`&&_){const F=j.metadata?.search_source;rv.logEvent(P.searchToolRequestTimeToFirstTextToken,s,j.id,{search_source:F},()=>{F===M3.InstantQuery&&Dle.logEvent(P.searchToolPageLoadTimeToFirstTextToken,{message_id:j.id})})}},[s,_,m]),p.useEffect(()=>{if(!k)switch(v){case ye.Browsing:rv.logEvent(P.browsingTimeToFirstTextToken,s,m[0].message.id);break}},[k,m,s,v]),i.jsxs("div",{"data-message-author-role":m[0].message.author.role,"data-message-id":m[0].message.id,dir:"auto",className:A(r,"text-message flex w-full flex-col items-end gap-2 whitespace-normal break-words text-start [.text-message+&]:mt-5"),"data-message-model-slug":m[0].message.metadata?.model_slug,children:[I&&i.jsxs("div",{className:"mb-1 ml-6 mt-1 flex items-start gap-1.5 text-sm font-normal text-token-text-tertiary sm:ml-7 lg:ml-8",children:[i.jsx(zE,{className:"icon-md mt-1 shrink-0"}),i.jsx("p",{className:"mr-2 line-clamp-3",children:I})]}),u&&i.jsx(Ale,{messages:m}),i.jsx(zle,{messages:m}),i.jsx(hde,{parts:g,attachments:e,isUserTurn:u,isCompletionInProgress:o,turnIndex:d,displayParts:a,isActivelyStreaming:l,shouldHideContent:M,showEditButton:b,onEnterEdit:x,clientThreadId:s,id:c,isEmpty:k,prevGroupedMessageType:v,prevGroupedMessages:y,flagSeverity:T,messages:m,citations:t,contentReferences:n,size:w}),i.jsx(Pue,{message:C?void 0:m[0],id:c,isFeedbackEnabled:f,onRequestMoreCompletions:h,clientThreadId:s,isUserTurn:u}),i.jsx(Qle,{isUserTurn:u,message:C?void 0:m[0]}),!u&&!l&&y&&v===ye.SearchResult&&i.jsx(fde,{messages:y})]})}function hde({clientThreadId:e,id:t,displayParts:n,isCompletionInProgress:r,turnIndex:s,isActivelyStreaming:a,shouldHideContent:o,showEditButton:c=!1,onEnterEdit:l,isEmpty:u,prevGroupedMessageType:d,prevGroupedMessages:f,messages:m,citations:h,contentReferences:g,size:v,isUserTurn:y,parts:b,attachments:x}){const w=L(),C=p.useRef(!1),T=RF(n),[M,_]=p.useState({}),[k,I]=p.useState(!1),j=Gle(),{streamingContext:F}=Hle();p.useEffect(()=>{j&&(F.setOnStylesUpdatedCallback(_),F.onStreamingChanged(r),F.setOnResetCallback(()=>I(!1)),r&&(I(!0),_(F.createTopLevelStyles())))},[j,r,F]);const U=m[0].message.metadata?.serialization_metadata,B=E3(m[0].message).length,N=p.useMemo(()=>({clientThreadId:e,messageId:t,turnIndex:s}),[e,t,s]),{toggleThreadSidebar:$}=Mo(),H=p.useCallback((te,ue)=>{$({type:"searchSources",scrollToHeader:ue,clientThreadId:e,turnIndex:s,messageId:t})},[e,s,t,$]),Y=i.jsx(ade,{parts:b,attachments:x,isUserTurn:y,clientThreadId:e},"files-and-tables"),O=!!(x?.length||n.some(te=>te.type==="images")),R=Ble();function V(te,ue){const he=d===ye.CodeInterpreter?f?.map(dn=>dn.message):void 0,{text:Se,contentReferences:se}=Ile(ue,h,g);let W=se;R&&(W=se.filter(dn=>dn.type!=="attribution"));const{processedText:be,displayedContentReferences:De}=_3(Se,W,a?void 0:he,!1,a);be.includes(A3)&&!C.current&&(C.current=!0,ie.addError(new Error("Failed replaceTextWithDirectives"),{text:be,displayedContentReferences:De}));const Ve=m[0].message,Z=Ve.metadata?.message_locale;let gt=i.jsx(fm,{clientThreadId:e,messageId:t,isStreamingOrProcessing:k,size:v,className:A(a&&!j&&"result-streaming"),children:be===""?"&#8203;":be});if(Z!=null){const dn=P3(Z,!1);dn!=null&&(gt=i.jsx(j3,{locale:dn,children:gt}))}return i.jsx(Vle.Provider,{value:{analyticsMetadata:N,message:Ve,contentReferences:De,onShowSearchResults:H,numImageResults:B,isActivelyStreaming:a,useSafeUrls:!0},children:gt},te)}const X=n.map((te,ue)=>{if(te.type==="transcription"){const he=o?null:te.text;let Se=null;if(y&&o)Se=i.jsx("span",{className:"italic opacity-30",children:i.jsx(S,{...Xl.contentRemoved})});else if(y&&he!=null)Se=he.trim().length===0?i.jsx("span",{className:"italic opacity-30",children:i.jsx(oh,{text:w.formatMessage(Xl.transcriptUnavailable),customSymbolOffsets:void 0})}):i.jsx("span",{className:"italic opacity-65",children:i.jsx(oh,{text:`${he.trim()}`,customSymbolOffsets:void 0})});else if(!y&&he!=null)return V(ue,he);return i.jsx(ch,{containsImagesOrAttachments:O,isUserTurn:y,showEditButton:c,onEnterEdit:l,children:Se},ue)}else if(te.type==="text"){const he=o?null:te.text;return!u&&!o&&!y?V(ue,T):u&&a&&!y?j?i.jsx("div",{className:"pulsing-dot"},ue):i.jsx("div",{className:"result-streaming",children:i.jsx("span",{children:i.jsx("pre",{})})},ue):i.jsx(ch,{containsImagesOrAttachments:O,isUserTurn:y,showEditButton:c,onEnterEdit:l,children:y&&o?i.jsx("span",{className:"italic opacity-30",children:i.jsx(S,{...Xl.contentRemoved})}):he?i.jsx(oh,{text:he,customSymbolOffsets:U?.custom_symbol_offsets}):null},ue)}else if(te.type==="images"){const he=m[0].message.metadata?.attachments??[];return i.jsx(pde,{assets:te.imageAssets,attachments:he},ue)}else return null}),re=n.findIndex(te=>te.type==="text");if(re!==-1?X.splice(re,0,Y):X.push(Y),o&&y)X.length=0,X.push(i.jsx(ch,{containsImagesOrAttachments:O,isUserTurn:y,onEnterEdit:we,children:i.jsx("span",{className:"italic opacity-30",children:i.jsx(S,{...Xl.contentRemoved})})}));else if(o&&!y)return null;return i.jsx("div",{className:A("flex w-full flex-col gap-1 empty:hidden",y&&"items-end rtl:items-start",!y&&"first:pt-[3px]",k&&"streaming-response"),style:M,children:X})}const Xl=z({contentRemoved:{id:"textMessage.contentRemoved",defaultMessage:"Content removed"},transcriptUnavailable:{id:"textMessage.transcriptUnavailable",defaultMessage:"Transcript Unavailable"}}),sv=sf(()=>({delayedRenderingMessageIds:new Set})),gde=e=>Cc(sv,e);function X5e(){return gde(e=>e.delayedRenderingMessageIds)}const lh={addDelayedRenderingMessage(e){sv.setState(t=>{if(t.delayedRenderingMessageIds.has(e))return t;const n=new Set(t.delayedRenderingMessageIds);return n.add(e),{delayedRenderingMessageIds:n}})},removeDelayedRenderingMessage(e){sv.setState(t=>{if(!t.delayedRenderingMessageIds.has(e))return t;const n=new Set(t.delayedRenderingMessageIds);return n.delete(e),{delayedRenderingMessageIds:n}})}};function vde(e){const{isActivelyStreaming:t,...n}=e,r=mr(),s=r?.includes("debug")??!1,a=e.messages[e.messages.length-1].message.id,[o,c]=p.useState(z0(e.parts)),l=p.useRef(void 0);return l.current===void 0&&(l.current=r?.includes(I3)??!1?new LF(e.parts,c,t,void 0,{debug:s}):new ts(e.parts,c,t)),p.useEffect(()=>{l.current!=null&&(l.current.onMessagePartsUpdated(e.parts,t),l.current.isBuffering()&&lh.addDelayedRenderingMessage(a))},[e.parts,a,t]),p.useEffect(()=>{l.current!=null&&!l.current.isBuffering()&&lh.removeDelayedRenderingMessage(a)},[o,a]),p.useEffect(()=>()=>lh.removeDelayedRenderingMessage(a),[a]),p.useEffect(()=>()=>{l.current!=null&&(l.current.destroy(),l.current=void 0)},[]),i.jsx(wN,{...n,displayParts:o,isActivelyStreaming:t||l.current?.isBuffering()})}function yde({message:e,isCompletionInProgress:t,clientThreadId:n,className:r,isUserTurn:s,turnIndex:a,isFeedbackEnabled:o,prevGroupedMessageType:c,prevGroupedMessages:l,showEditButton:u,onEnterEdit:d,onRequestMoreCompletions:f}){const m=p.useMemo(()=>"parts"in e.message.content?e.message.content.parts:[Pr(e.message)],[e]);return i.jsx(xde,{parts:m,messages:[e],isCompletionInProgress:t,className:r,citations:e.message.metadata?.citations,contentReferences:e.message.metadata?.content_references,attachments:e.message.metadata?.attachments,isUserTurn:s,turnIndex:a,id:e.nodeId,isFeedbackEnabled:o,onRequestMoreCompletions:f,clientThreadId:n,showEditButton:u,onEnterEdit:d,prevGroupedMessageType:c,prevGroupedMessages:l})}const Q5e=J.memo(yde);function xde(e){const t=e.messages.length>1,{flagSeverity:n}=$x(t?void 0:e.messages[0]),r=n!=="danger"&&e.isCompletionInProgress,s=!e.parts.some(o=>o!==""),[a]=p.useState(()=>!e.isUserTurn&&(e.isCompletionInProgress||s));return a?i.jsx(vde,{...e,isActivelyStreaming:r}):i.jsx(wN,{...e,displayParts:DF({isUserTurn:e.isUserTurn,parts:e.parts}),isActivelyStreaming:r})}function SN({url:e,size:t=16,minSize:n,fallback:r,className:s}){const a=wde(e,t);return a==null?r??null:n!=null?i.jsx(bde,{faviconUrl:a,size:t,minSize:n,fallback:r,className:s}):i.jsx(CN,{faviconUrl:a,size:t,className:s})}function bde({faviconUrl:e,size:t,minSize:n,fallback:r,className:s}){const{data:a,isLoading:o}=me({queryKey:["imageSize",e],queryFn:()=>new Promise((c,l)=>{const u=new Image;u.onload=()=>{c(Math.min(u.width,u.height))},u.onerror=()=>{l()},u.src=e})});return o?i.jsx("div",{className:s}):a==null||a<n?r??null:i.jsx(CN,{faviconUrl:e,size:t,className:s})}function CN({faviconUrl:e,size:t,className:n}){return i.jsx("img",{src:e,alt:"Favicon",width:t,height:t,className:n})}function wde(e,t){if(!e)return null;try{const{origin:n}=new URL(e);return`https://www.google.com/s2/favicons?domain=${n}&sz=${t}`}catch(n){return ie.addError(n),null}}var TN=(e=>(e.Sources="sources",e.Images="images",e))(TN||{}),kN=(e=>(e.Citations="citations",e.SearchResults="search_results",e))(kN||{});const Sde=5;function Z5e({navigation:e,onShowSearchResults:t,trackContentReferenceEvent:n}){p.useEffect(()=>{n(P.searchContentReferenceShown,"search_content_reference_shown",e.type,{urls:e.domains.map(a=>a.url).join(",")})},[e]);const r=e.domains[0],s=e.domains.slice(1,Sde);return i.jsxs("div",{className:A("not-prose mb-3 flex gap-2",s.length>0?"flex-col":"flex-row"),children:[i.jsx(MT,{isPrimary:!0,navigationDomain:r,trackContentReferenceEvent:n}),s.length>0?i.jsxs("div",{className:"flex items-stretch gap-2",children:[s.map(a=>i.jsx(MT,{navigationDomain:a,trackContentReferenceEvent:n},a.url)),i.jsx(kT,{onShowSearchResults:t,trackContentReferenceEvent:n})]}):i.jsx(kT,{onShowSearchResults:t,trackContentReferenceEvent:n})]})}const kT=({onShowSearchResults:e,trackContentReferenceEvent:t})=>i.jsx("button",{className:"flex w-8 items-center justify-center rounded-xl bg-[#EDF1FA] text-token-link hover:bg-[#E4EAF7] dark:bg-[#2C313C] dark:hover:bg-[#313949]",onClick:()=>{t(P.searchContentReferenceClicked,"search_content_reference_clicked","navigation",{sidebar:"sidebar"}),e(TN.Sources,kN.SearchResults)},children:i.jsx(va,{className:""})}),MT=({isPrimary:e,navigationDomain:t,trackContentReferenceEvent:n})=>i.jsx("div",{className:A("min-w-0 flex-1"),children:i.jsx(Cde,{isPrimary:e,title:t.title,subtitle:t.subtitle??void 0,url:t.url,domain:t.domain,trackContentReferenceEvent:n})}),Cde=({isPrimary:e,title:t,subtitle:n,url:r,trackContentReferenceEvent:s})=>i.jsxs(Pf,{href:r,onClick:()=>s(P.searchContentReferenceClicked,"search_content_reference_clicked","navigation",{url:r,title:t}),className:A("flex flex-row items-center gap-2 rounded-xl bg-[#EDF1FA] text-token-link hover:bg-[#E4EAF7] dark:bg-[#2C313C] dark:hover:bg-[#313949]",e?"px-4 py-3":"px-4 py-2.5"),children:[i.jsx("div",{className:"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-white dark:bg-[#39445B]",children:i.jsx(SN,{url:r,size:16,className:"rounded-full"})}),i.jsxs("div",{className:"flex min-w-0 flex-col gap-0.5",children:[i.jsx("div",{className:A("truncate font-semibold",e?"text-sm":"text-xs"),children:t}),i.jsx("div",{className:"truncate text-xs",children:n})]})]});function J5e({tldr:e,trackContentReferenceEvent:t}){const n={url:e.url,title:e.display_title},r=e.url!=null&&e.url!=="";return p.useEffect(()=>{r&&t(P.searchContentReferenceShown,"search_content_reference_shown",e.type,n)},[r]),r?i.jsx("div",{className:"not-prose mb-3 flex flex-col gap-4 text-base",children:i.jsx(Pf,{href:e.url,onClick:()=>t(P.searchContentReferenceClicked,"search_content_reference_clicked",e.type,n),className:"group/tldr",children:i.jsxs("div",{className:"grid max-w-full shrink grid-cols-[1fr,auto] items-center gap-x-8 sm:gap-x-16",children:[i.jsxs("div",{className:"flex shrink flex-col overflow-hidden",children:[i.jsx("div",{className:"shrink text-lg font-semibold text-token-text-primary 2xl:text-xl",children:e.display_title}),i.jsx("div",{className:"flex items-center truncate text-token-link [overflow-wrap:anywhere] group-hover/tldr:opacity-70",children:Sc(e.breadcrumbs)?.map((s,a)=>i.jsxs(p.Fragment,{children:[a!==0&&i.jsx(va,{className:"h-4 w-4 shrink-0"}),i.jsx("div",{className:"truncate",children:s.toLowerCase()})]},a))})]}),i.jsx(SN,{url:e.url,size:128,minSize:32,className:"mr-[0.1875rem] h-7 w-7 shrink-0 rounded"}),e.snippet&&i.jsx("div",{className:"line-clamp-3 overflow-hidden text-ellipsis text-sm text-token-text-tertiary",children:e.snippet})]})})}):null}const MN=Xe(()=>qe(()=>import("./l7lwrm4p686kfa46.js"),__vite__mapDeps([33,1,2,3])).then(e=>e.QRCodeSVG)),Xo=({onDismiss:e,title:t,content:n,onPrimaryCtaClick:r,primaryCtaText:s,primaryCtaQrLink:a,onPrimaryCtaQrClick:o,onSecondaryCtaClick:c,secondaryCtaText:l,icon:u,isElevated:d=!0,isPrimaryCtaDisabled:f=!1,isSecondaryCtaDisabled:m=!1})=>{const h=Ko(),g=(s||l)&&i.jsxs("div",{className:"flex shrink-0 gap-2 pb-1 md:pb-0",children:[s&&i.jsx(ee,{onClick:r,color:"primary",className:"shrink-0",disabled:f,children:s}),l&&i.jsx(ee,{onClick:c,color:"secondary",className:"shrink-0",disabled:m,children:l})]});return i.jsxs("div",{className:A("flex w-full items-start gap-4 rounded-2xl border border-token-border-light bg-token-main-surface-primary py-4 pl-5 pr-3 text-sm text-token-text-primary [text-wrap:pretty] dark:border-transparent dark:bg-token-main-surface-secondary lg:mx-auto",d&&"shadow-xxs",h?"flex-col":"md:items-center"),children:[i.jsxs("div",{className:A("flex h-full w-full items-start gap-4",!h&&"md:items-center"),children:[u&&i.jsx("div",{className:"h-full",children:u}),i.jsxs("div",{className:A("mt-1.5 flex grow items-start gap-4 md:mt-0 md:flex-row md:items-center md:justify-between md:gap-8",a?"flex-row":"flex-col"),children:[i.jsxs("div",{className:"flex max-w-none flex-col",children:[t&&i.jsx("div",{className:A("font-bold text-token-text-primary"),children:t}),i.jsx("div",{className:A(t?"text-token-text-secondary":""),children:n})]}),a&&i.jsx(MN,{className:"min-h-[62px] min-w-[62px] cursor-pointer",onClick:o,size:62,value:a}),!h&&g]}),i.jsx("div",{className:"flex shrink-0 items-center gap-2",children:!!e&&i.jsx(mo,{onClick:e})})]}),h&&g]})},Tde=({onDismiss:e,title:t,content:n,onPrimaryCtaClick:r,primaryCtaText:s,onSecondaryCtaClick:a,secondaryCtaText:o})=>i.jsxs("div",{className:A("border-main-surface-secondary flex h-16 items-center border-b bg-token-main-surface-primary px-2 text-sm text-token-text-primary"),children:[i.jsxs("div",{className:"flex items-center justify-center",children:[!!e&&i.jsx(mo,{onClick:e,className:"-mr-2 text-token-text-tertiary"}),i.jsx(YE,{className:"h-16 w-16 rounded-sm pt-1 shadow-none"}),i.jsxs("div",{className:"-ml-1 flex flex-col",children:[t&&i.jsx("div",{className:"font-bold text-token-text-primary",children:t}),i.jsx("div",{className:A(t?"-mt-0.5 text-token-text-secondary":""),children:n})]})]}),i.jsxs("div",{className:"ml-auto flex justify-end",children:[s&&i.jsx(ee,{onClick:r,color:"primary",className:"shrink-0",children:s}),o&&i.jsx(ee,{onClick:a,color:"secondary",className:"mr-2 shrink-0",children:o})]})]}),EN=je.DesktopBrowserExtensionAnnouncement,_N=je.DesktopBrowserExtensionReactiveAnnouncement,kde=5,Mde="https://chromewebstore.google.com/detail/searchgpt/ejcfepkfckglbgocfkanmcdngdijcgld";function Ede({announcementKey:e=EN,onClose:t}){p.useEffect(()=>{E.logEventWithStatsig(P.chatgptBrowserExtensionAnnouncementShown,"chatgpt_browser_extension_announcement_shown")},[]);const{markAsViewed:n}=Be(e),r=p.useCallback(()=>{n(),E.logEventWithStatsig(P.chatgptBrowserExtensionAnnouncementClosed,"chatgpt_browser_extension_announcement_closed"),t&&t()},[n,t]),s=p.useCallback(()=>{E.logEventWithStatsig(P.chatgptBrowserExtensionAnnouncementCTAClicked,"chatgpt_browser_extension_announcement_cta_clicked"),n(),t&&t()},[n,t]);return i.jsx(_de,{downloadUrl:Mde,announcementKey:e,handleCTAClicked:s,handleClose:r})}function eDe({onClose:e}){return Ede({announcementKey:_N,onClose:e})}function _de({downloadUrl:e,announcementKey:t,handleCTAClicked:n,handleClose:r}){const s=()=>{n(),window.open(e)},a=i.jsxs("div",{className:"flex-grow",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:i.jsx(S,{id:"uAZwaE",defaultMessage:"Use ChatGPT for every search"})}),i.jsx("span",{className:"text-token-text-secondary",children:i.jsx(S,{id:"+wTq4L",defaultMessage:"Download the Chrome extension to switch your default search engine to ChatGPT, and get instant answers from trusted sources with every search."})})]});return i.jsx(Xo,{onPrimaryCtaClick:s,primaryCtaText:i.jsx(S,{id:"x9mKG0",defaultMessage:"Get Extension"}),onDismiss:()=>r(t),content:a})}function AN(e){const{value:t}=at("2634628831"),n=HM(()=>document.documentElement.dataset.searchExtension==="1"),r=iA(e.clientThreadId,WM.Search);return ZG()&&!n&&r&&t}function tDe(e){const t=AN(e),n=Ade(),r=Be(EN);return r.eligible&&!r.isLoading&&t&&n&&!bs(e.clientThreadId)&&e.conversationMode?.kind===Me.PrimaryAssistant}function nDe(e){const t=AN(e),n=xc(e.clientThreadId),r=e0(e.clientThreadId,n),s=N3(r,l=>l.role===le.User);var a=!1;const o=s?.messages[0]?.message;if(o?.content.content_type===Qt.Text){const l=o?.content.parts[0]?.toLowerCase();l&&(a=l.includes("chrome extension")||l.includes("default search"))}const c=Be(_N);return c.eligible&&!c.isLoading&&t&&a}function rDe(e){const t=Mt.getItem(He.SearchSettings)??{};t.hasSearchedMinTimes||(t.searchMessageIds||(t.searchMessageIds=[]),t.searchMessageIds.includes(e)||(t.searchMessageIds.push(e),t.searchMessageIds.length>=kde&&(t.hasSearchedMinTimes=!0,delete t.searchMessageIds),Mt.setItem(He.SearchSettings,t)))}function Ade(){return(Mt.getItem(He.SearchSettings)??{}).hasSearchedMinTimes===!0}const Pde="5.7.5",jde=100,Ide=0,Nde=350,Ode=24,Rde=24,Dde="Comp 1",Lde=0,$de=[],Fde=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],Bde=[],Ude={v:Pde,fr:jde,ip:Ide,op:Nde,w:Ode,h:Rde,nm:Dde,ddd:Lde,assets:$de,layers:Fde,markers:Bde},Vde="5.7.5",Gde=100,Wde=0,Hde=400,zde=24,qde=24,Yde="Comp 1",Kde=0,Xde=[],Qde=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.944433333333334],[-1.166666666666667,0]],o:[[-1.166666666666666,1.944433333333333],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.184650421142578,-1.832367897033691],[0,0],[-1.166666666666667,0]],o:[[1.184650897979736,1.832367539405823],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.003000259399414062,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.3626899123191833],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.333999633789062,2.333300590515137],[-5.833999633789062,0]],i:[[1.169005393981934,0],[.7811636924743652,1.481373190879822]],o:[[-1.169005155563354,0],[-.7811641693115234,-1.481372833251953]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.003000259399414062,2.333300590515137],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.120759010314941]],o:[[1.720494627952576,0],[.6510882377624512,-1.120759010314941]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.166999816894531,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[.203921568627451,.207843137254902,.2509803921568627],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],Zde=[],Jde={v:Vde,fr:Gde,ip:Wde,op:Hde,w:zde,h:qde,nm:Yde,ddd:Kde,assets:Xde,layers:Qde,markers:Zde},efe="5.7.5",tfe=100,nfe=0,rfe=400,sfe=24,afe=24,ofe="Comp 1",ife=0,cfe=[],lfe=[{ddd:0,ind:1,ty:3,nm:"",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,ip:0,op:400,st:0,bm:0,hd:!1},{ddd:0,ind:2,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[3.5,0],[0,5.8332999999999995],[3.5,5.8332999999999995]],i:[[0,0],[1.166666666666667,-1.9444333333333343],[-1.166666666666667,0]],o:[[-1.166666666666666,1.9444333333333326],[1.166666666666666,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[5.836999893188477,0],[9.336999893188477,5.83329963684082],[5.9886474609375,5.83329963684082]],i:[[-1.1846504211425781,-1.8323678970336914],[0,0],[-1.166666666666667,0]],o:[[1.1846508979797363,1.8323675394058228],[0,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[3.503000259399414,0],[.0030002593994140625,5.83329963684082],[3.503000259399414,5.83329963684082]],i:[[.2074432373046875,-.3626899719238281],[0,0],[-1.166666666666667,0]],o:[[-.2074427604675293,.36268991231918335],[0,0],[0,0]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:125,s:[-4.666999816894531,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[-4.67,-4.666650772094727],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[-4.67,-4.666650772094727],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Path's solid stroke",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,parent:1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:1,k:[{t:125,s:[{c:!1,v:[[0,2.3332999999999995],[3.5,0]],i:[[0,0],[-.7981999999999996,1.4169]],o:[[1.4311000000000007,0],[0,0]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:200,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[{c:!1,v:[[-2.3339996337890625,2.3333005905151367],[-5.8339996337890625,0]],i:[[1.1690053939819336,0],[.7811636924743652,1.4813731908798218]],o:[[-1.1690051555633545,0],[-.7811641693115234,-1.4813728332519531]]}],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:400,s:[{c:!1,v:[[-.0030002593994140625,2.3333005905151367],[3.496999740600586,0]],i:[[-1.720494270324707,0],[-.6510887145996094,1.1207590103149414]],o:[[1.7204946279525757,0],[.6510882377624512,-1.1207590103149414]]}],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2}},{ty:"st",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2.33333,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:200,s:[1.1669998168945312,2.33335018157959],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:325,s:[1.17,2.33335018157959],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:400,st:0,bm:0}],ufe=[],dfe={v:efe,fr:tfe,ip:nfe,op:rfe,w:sfe,h:afe,nm:ofe,ddd:ife,assets:cfe,layers:lfe,markers:ufe},ffe="5.7.5",mfe=100,pfe=0,hfe=350,gfe=24,vfe=24,yfe="Comp 1",xfe=0,bfe=[],wfe=[{ddd:0,ind:1,ty:4,nm:"border",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[22,22],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"st",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},hd:!1,lc:2,lj:2},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Path",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[8.6485975,.1178352687211168],[8.880497499999999,1.074935268721117],[6.6505975,3.304865268721118],[6.6505975,6.016105268721118],[9.3617975,6.016105268721118],[11.5916975,3.786175268721117],[12.5487975,4.018115268721118],[11.1692975,8.727405268721117],[5.5576975,9.820205268721118],[3.272757499999999,12.10510526872112],[.561517499999999,12.10510526872112],[.561517499999999,9.393905268721117],[2.8464575,7.109005268721118],[3.9393075,1.497375268721117],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168],[8.6485975,.1178352687211168]],i:[[0,0],[.3205000000000009,-.3204799999999999],[.7432999999999996,-.7433100000000001],[-.7487000000000013,-.7487000000000013],[-.7487000000000013,.7486999999999995],[-.7433000000000014,.743310000000001],[-.09659999999999869,-.4428200000000011],[1.278300000000002,-1.2783],[1.8610999999999986,.7885999999999989],[.7616466666666675,-.7616333333333323],[.7486899999999999,.7486999999999995],[-.7486899999999999,.7487000000000013],[-.7616466666666675,.7616333333333323],[-1.5171100000000006,1.5171199999999994],[-1.6442,-.3585899999999995],[0,0],[0,0]],o:[[.4428000000000001,.09658000000000033],[-.7432999999999996,.7433100000000001],[-.7487000000000013,.7486899999999999],[.7485999999999997,.7486999999999995],[.7432999999999996,-.743310000000001],[.3204999999999991,-.3204799999999999],[.3585999999999991,1.644189999999998],[-1.5170999999999992,1.5170999999999992],[-.7616466666666675,.761633333333334],[-.7486899999999999,.7486999999999995],[-.7486899999999999,-.7485999999999997],[.7616466666666666,-.7616333333333323],[-.7885500000000008,-1.8611],[1.278289999999998,-1.27829],[0,0],[0,0],[.4428000000000001,.09658000000000033]]}}},{ty:"fl",c:{a:0,k:[.6980392156862745,.3843137254901961,.996078431372549],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:1,k:[{t:0,s:[13.23,10.77154381752014],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[12,12],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[12,12],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[13.23,10.77],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},a:{a:1,k:[{t:0,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[7.559483528137207,5.104858875274658],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},s:{a:1,k:[{t:0,s:[100,100],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:60,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[121.15,121.15],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:227,s:[121.15,121.15],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[100,100],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},r:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:60,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:100,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:117,s:[-45],i:{x:[.5],y:[1.5]},o:{x:[.8],y:[0]}},{t:167,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:184,s:[45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:217,s:[-45],i:{x:[1],y:[1]},o:{x:[0],y:[0]}},{t:227,s:[-45],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:282,s:[0],i:{x:[1],y:[1]},o:{x:[0],y:[0]}}],ix:2},o:{a:0,k:100,ix:2},sk:{a:1,k:[{t:0,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}},{t:50,s:[0],i:{x:[.2],y:[1]},o:{x:[.5],y:[-.5]}}],ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:3,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"sh",hd:!1,d:1,ks:{a:0,k:{c:!1,v:[[0,-10],[10,0],[0,10],[-10,0],[0,-10]],i:[[-5.5228475,0],[0,-5.5228475],[5.5228475,0],[0,5.5228475],[-5.5228475,0]],o:[[5.5228475,0],[0,5.5228475],[-5.5228475,0],[0,-5.5228475],[5.5228475,0]]}}},{ty:"fl",c:{a:0,k:[1,1,1],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:90,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0},{ddd:0,ind:4,ty:4,nm:"Circle",sr:1,ks:{o:{a:0,k:100,ix:2},r:{a:0,k:0,ix:2},p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2}},ao:0,hd:!1,shapes:[{ty:"gr",hd:!1,it:[{ty:"el",hd:!1,d:1,s:{a:0,k:[24,24],ix:2},p:{a:0,k:[0,0],ix:2}},{ty:"fl",c:{a:0,k:[.6941176470588235,.3803921568627451,.9921568627450981],ix:2},o:{a:0,k:100,ix:2},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tm",s:{a:0,k:0,ix:2},e:{a:0,k:100,ix:2},o:{a:0,k:0,ix:2},m:1,hd:!1},{ty:"tr",hd:!1,p:{a:0,k:[12,12],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:-180,ix:2},o:{a:0,k:25,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:350,st:0,bm:0}],Sfe=[],Cfe={v:ffe,fr:mfe,ip:pfe,op:hfe,w:gfe,h:vfe,nm:yfe,ddd:xfe,assets:bfe,layers:wfe,markers:Sfe},Tfe=Xe(()=>qe(()=>import("./fjtqvuwt5aqn5yh5.js"),__vite__mapDeps([34,1,2,3])));function PN({animationData:e,animationSegmentToPlay:t,animationLoopCounter:n}){const r=p.useRef(null);return p.useEffect(()=>{r.current?.playSegments(t,!0)},[n]),i.jsx(Tfe,{animationData:e,lottieRef:r,loop:!1,autoplay:!1})}function sDe(e){return i.jsx(pr,{width:"8",height:"9",viewBox:"0 0 8 9",fill:"none",...e,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.66607 0.376042C8.01072 0.605806 8.10385 1.07146 7.87408 1.4161L3.54075 7.9161C3.40573 8.11863 3.18083 8.24304 2.93752 8.24979C2.69421 8.25654 2.46275 8.1448 2.31671 7.95008L0.150044 5.06119C-0.098484 4.72982 -0.0313267 4.25972 0.300044 4.01119C0.631415 3.76266 1.10152 3.82982 1.35004 4.16119L2.88068 6.20204L6.62601 0.584055C6.85577 0.239408 7.32142 0.146278 7.66607 0.376042Z",fill:"currentColor"})})}function aDe(e){return i.jsxs(pr,{width:"4",height:"12",viewBox:"0 0 4 12",fill:"none",...e,children:[i.jsx("mask",{id:"path-1-inside-1_1975_4008",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z"})}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1 6.5C1 7.05228 1.44772 7.5 2 7.5C2.55228 7.5 3 7.05228 3 6.5V1.5C3 0.947715 2.55228 0.5 2 0.5C1.44772 0.5 1 0.947715 1 1.5L1 6.5ZM0.75 10.25C0.75 10.9404 1.30964 11.5 2 11.5C2.69036 11.5 3.25 10.9404 3.25 10.25C3.25 9.55964 2.69036 9 2 9C1.30964 9 0.75 9.55964 0.75 10.25Z",fill:"currentColor"}),i.jsx("path",{d:"M1 6.5H-0.25H1ZM1 1.5L-0.25 1.5L-0.25 1.5L1 1.5ZM2 6.25C2.13807 6.25 2.25 6.36193 2.25 6.5H-0.25C-0.25 7.74264 0.757359 8.75 2 8.75V6.25ZM1.75 6.5C1.75 6.36193 1.86193 6.25 2 6.25V8.75C3.24264 8.75 4.25 7.74264 4.25 6.5H1.75ZM1.75 1.5V6.5H4.25V1.5H1.75ZM2 1.75C1.86193 1.75 1.75 1.63807 1.75 1.5H4.25C4.25 0.257359 3.24264 -0.75 2 -0.75V1.75ZM2.25 1.5C2.25 1.63807 2.13807 1.75 2 1.75V-0.75C0.757359 -0.75 -0.25 0.257359 -0.25 1.5L2.25 1.5ZM2.25 6.5L2.25 1.5L-0.25 1.5L-0.25 6.5L2.25 6.5ZM2 10.25H-0.5C-0.5 11.6307 0.619288 12.75 2 12.75V10.25ZM2 10.25V12.75C3.38071 12.75 4.5 11.6307 4.5 10.25H2ZM2 10.25H2H4.5C4.5 8.86929 3.38071 7.75 2 7.75V10.25ZM2 10.25H2V7.75C0.619288 7.75 -0.5 8.86929 -0.5 10.25H2Z",fill:"currentColor",mask:"url(#path-1-inside-1_1975_4008)"})]})}function oDe(e){return i.jsx(pr,{width:"8",height:"9",viewBox:"0 0 8 9",fill:"none",...e,children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.32256 1.48447C7.59011 1.16827 7.55068 0.695034 7.23447 0.427476C6.91827 0.159918 6.44503 0.199354 6.17748 0.515559L4.00002 3.08892L1.82256 0.515559C1.555 0.199354 1.08176 0.159918 0.765559 0.427476C0.449355 0.695034 0.409918 1.16827 0.677476 1.48447L3.01755 4.25002L0.677476 7.01556C0.409918 7.33176 0.449354 7.805 0.765559 8.07256C1.08176 8.34011 1.555 8.30068 1.82256 7.98447L4.00002 5.41111L6.17748 7.98447C6.44503 8.30068 6.91827 8.34011 7.23447 8.07256C7.55068 7.805 7.59011 7.33176 7.32256 7.01556L4.98248 4.25002L7.32256 1.48447Z",fill:"currentColor"})})}function iDe({animationLoopCounter:e}){const{resolvedTheme:t}=af(),n=t==="dark";return i.jsx(PN,{animationData:n?Ude:Cfe,animationSegmentToPlay:[0,300],animationLoopCounter:e})}function cDe({animationLoopCounter:e}){const{resolvedTheme:t}=af(),n=t==="dark";return i.jsx(PN,{animationData:n?Jde:dfe,animationSegmentToPlay:[0,400],animationLoopCounter:e})}const kfe={label:"Auto",value:""},Mfe="The user has opted in to provide additional feedback on the previous response. Encourage the user to share feedback that you can store in a memory to better meet their needs in future. Use no more than 3 turns. If at any point the user indicates no longer wanting to provide feedback, return to the original topic.",jN=Ie(()=>({forceParagen:!1,forceParagenModel:kfe,forceIndepthFeedback:!1,forceIndepthFeedbackPrompt:Mfe,forceRateLimit:!1,resetRateLimits:!1,showDebugConversationTurns:!1,rebaseSystemMessageContent:null,forceUseSearch:null,paragenStreamType:"none",paragenCotSummaryDisplay:"allow",showParagenMetadata:!0,showSearchSettingsModal:!1}));function Ql(e){e.danger("Failed to copy to clipboard.",{duration:4,hasCloseButton:!0})}function ul(e,t,n){const{navigator:r}=n?.target?.ownerDocument?.defaultView??window;return new Promise((s,a)=>{if(!r?.clipboard){Ql(t),a();return}try{if("write"in r.clipboard&&"supports"in ClipboardItem){const o=new ClipboardItem(Object.fromEntries(Object.entries(typeof e=="string"?{"text/plain":e}:e).map(([c,l])=>[c,typeof l=="string"?new Blob([l],{type:c}):l])));r.clipboard.write([o]).then(()=>s("success"),()=>{Ql(t),a()})}else{const o=typeof e=="string"?e:e["text/plain"]??"";r.clipboard.writeText(o).then(()=>s("success"),()=>{Ql(t),a()})}}catch{Ql(t),a()}})}const Efe=({children:e})=>{const t=A_(),n=Ms();return!t?.length||n?null:i.jsxs(ne.Root,{children:[i.jsx(ne.Trigger,{className:"h-10 px-2",children:e}),i.jsx(ne.Portal,{children:i.jsx(ne.Content,{align:"end",onCloseAutoFocus:r=>r.preventDefault(),children:t.map(r=>i.jsx(_fe,{textdocId:r},r))})})]})},_fe=({textdocId:e})=>{const t=To(Sf(e));return i.jsx(ne.Item,{icon:Ac,onClick:()=>{D0.logButtonClick(FI.FILE_DRAWER_ITEM),po(t.textdocId)},children:Jg(t.title)})},lDe=()=>{const e=L(),t=A_(),n=Ic();if(!t||n)return null;const r=t.length;return r===1?i.jsx(Afe,{textdocId:t[0]}):i.jsx(Efe,{children:i.jsx(Ye,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:i.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",style:{viewTransitionName:"var(--vt-thread-header-open-canvas)"},children:[i.jsx(Ac,{className:"icon-xl-heavy"}),r]})})})},Afe=({textdocId:e})=>{const t=L(),n=To(Sf(e));return i.jsx(Ye,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:i.jsx(GG,{onClick:()=>po(n.textdocId),icon:Ac,style:{viewTransitionName:"var(--vt-thread-header-open-canvas)"}})})},uDe=({children:e})=>Ic()?null:i.jsx(i.Fragment,{children:e});function Pfe({className:e,icon:t,label:n,onClick:r,style:s,tabIndex:a=0}){return i.jsx("label",{className:A(e,Uu.wrapper),style:s,tabIndex:-1,children:i.jsx("button",{className:Uu.label,"aria-label":n,onClick:r,tabIndex:a,children:t})})}var IN="AlertDialog",[jfe,dDe]=ha(IN,[sE]),Fr=sE(),NN=e=>{const{__scopeAlertDialog:t,...n}=e,r=Fr(t);return i.jsx(uf,{...r,...n,modal:!0})};NN.displayName=IN;var Ife="AlertDialogTrigger",Nfe=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Fr(n);return i.jsx(s0,{...s,...r,ref:t})});Nfe.displayName=Ife;var Ofe="AlertDialogPortal",ON=e=>{const{__scopeAlertDialog:t,...n}=e,r=Fr(t);return i.jsx(df,{...r,...n})};ON.displayName=Ofe;var Rfe="AlertDialogOverlay",RN=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Fr(n);return i.jsx(of,{...s,...r,ref:t})});RN.displayName=Rfe;var so="AlertDialogContent",[Dfe,Lfe]=jfe(so),DN=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,children:r,...s}=e,a=Fr(n),o=p.useRef(null),c=Lr(t,o),l=p.useRef(null);return i.jsx(O3,{contentName:so,titleName:LN,docsSlug:"alert-dialog",children:i.jsx(Dfe,{scope:n,cancelRef:l,children:i.jsxs(cf,{role:"alertdialog",...a,...s,ref:c,onOpenAutoFocus:st(s.onOpenAutoFocus,u=>{u.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[i.jsx(R3,{children:r}),i.jsx(Ffe,{contentRef:o})]})})})});DN.displayName=so;var LN="AlertDialogTitle",$N=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Fr(n);return i.jsx(D3,{...s,...r,ref:t})});$N.displayName=LN;var FN="AlertDialogDescription",BN=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Fr(n);return i.jsx(L3,{...s,...r,ref:t})});BN.displayName=FN;var $fe="AlertDialogAction",UN=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,s=Fr(n);return i.jsx(lf,{...s,...r,ref:t})});UN.displayName=$fe;var VN="AlertDialogCancel",GN=p.forwardRef((e,t)=>{const{__scopeAlertDialog:n,...r}=e,{cancelRef:s}=Lfe(VN,n),a=Fr(n),o=Lr(t,s);return i.jsx(lf,{...a,...r,ref:o})});GN.displayName=VN;var Ffe=({contentRef:e})=>{const t=`\`${so}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${so}\` by passing a \`${FN}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${so}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},Bfe=NN,Ufe=ON,Vfe=RN,Gfe=DN,Wfe=UN,Hfe=GN,zfe=$N,ET=BN;function WN({title:e,description:t,onClose:n,actionButton:r,cancelButton:s,moreInfoLink:a}){return i.jsx(Bfe,{open:!0,onOpenChange:o=>{o||n()},children:i.jsxs(Ufe,{children:[i.jsx(Vfe,{className:"fixed inset-0 border-token-border-medium radix-state-open:animate-show"}),i.jsxs(Gfe,{className:"fixed start-1/2 top-1/2 flex max-h-[85vh] w-[90vw] max-w-lg -translate-x-1/2 -translate-y-1/2 flex-col gap-2 rounded-2xl bg-token-main-surface-primary shadow-2xl focus:outline-none radix-state-open:animate-alertShow",onEscapeKeyDown:o=>o.preventDefault(),children:[i.jsx(zfe,{className:"border-b border-token-border-light p-4 text-lg font-semibold md:p-6",children:e}),i.jsxs("div",{className:"flex flex-col gap-4 p-4 md:p-6",children:[i.jsx(ET,{className:"text-base",children:t}),i.jsxs("div",{className:"flex justify-end gap-2",children:[a&&i.jsx(ET,{className:"flex-grow",children:a}),s&&i.jsx(Hfe,{asChild:!0,children:s}),i.jsx(Wfe,{asChild:!0,children:r})]})]})]})]})})}const HN="1696863369",qfe=je.UseSidekick,Yfe=je.SidekickLauncherOnboarding,Kfe="https://help.openai.com/en/articles/9275200",Xfe="https://persistent.oaistatic.com/sidekick/public/ChatGPT_Desktop_public_latest.dmg",zN="1697140512",Qfe=je.UseSidetron,Zfe=je.hasSeenWindowsAppOnboarding,Jfe="https://help.openai.com/en/articles/9982051",eme="https://apps.microsoft.com/detail/9nt1r1c2hh7j",qN="download";function YN(e,t){const n=Ce(),r=$3(e).layer.get(t,!1);return n!=null&&r}function tme(){return YN(HN,"has_sidekick_access")}function nme(){return YN(zN,"can_download_sidetron")}function Ux(){const e=tme(),t=nme();return{isSidekickAvailable:e,isSidetronAvailable:t,isDesktopAppAvailable:e||t}}function rme(e){return e===qN}function sme(){const e=ze(),{hash:t}=ko(),n=rme(t.slice(1));return{openModal:()=>{e({hash:qN})},closeModal:()=>{e({hash:""})},isOpen:n}}function fDe(e){const t=Ux(),{isDesktopAppAvailable:n}=t,r=Vx(t),s=q.getLayerValue({layerName:r.statsigLayerName,key:"show_nux_banner",defaultValue:!1}),{eligible:a,isLoading:o}=Be(r.downloadAnnouncement),{eligible:c,isLoading:l}=Be(r.onboardingAnnouncement);return{eligible:!(!a||!c||!n||e.conversationMode?.kind!==Me.PrimaryAssistant)&&s,isLoading:l||o}}function mDe({onClose:e}){const t=Ux(),n=Vx(t);p.useEffect(()=>{E.logEvent(n.analyticsBannerShown),q.logEvent(n.statsigBannerShown)},[n.analyticsBannerShown,n.statsigBannerShown]);const{markAsViewed:r}=Be(n.downloadAnnouncement),s=p.useCallback(()=>{r(),E.logEvent(n.analyticsBannerDismissed),q.logEvent(n.statsigBannerDismissed),e&&e()},[r,e,n.analyticsBannerDismissed,n.statsigBannerDismissed]),a=p.useCallback(()=>{E.logEvent(n.analyticsBannerDownloadClicked),q.logEvent(n.statsigBannerDownloadClicked),r(),e&&e()},[r,e,n.analyticsBannerDownloadClicked,n.statsigBannerDownloadClicked]),o={...n,isAppAvailable:t.isDesktopAppAvailable,markAsDownloaded:a,markAsViewed:s};return i.jsx(ime,{...o})}function ame(e){window.open(e,"_blank")}function Vx(e){return e.isSidekickAvailable?fme:mme}function ome(e){return e.bannerTitle}function pDe(){const{closeModal:e,isOpen:t}=sme(),n=Ux(),{isDesktopAppAvailable:r}=n,s=Vx(n),a=p.useMemo(()=>({isDesktopAppAvailable:r}),[r]),o=()=>{E.logEvent(s.analyticsModalClosed,a),q.logEvent(s.statsigModalClosed),e()},c=()=>{E.logEvent(s.analyticsModalDownloadClicked,a),q.logEvent(s.statsigModalDownloadClicked),e()};if(p.useEffect(()=>{t&&(E.logEvent(s.analyticsModalShown,{...a}),q.logEvent(s.statsigModalShown))},[a,t,s.analyticsModalShown,s.statsigModalShown]),!t)return null;const l={...s,isAppAvailable:n.isDesktopAppAvailable,markAsDownloaded:c,markAsViewed:o};return i.jsx(cme,{...l})}function ime({downloadUrl:e,markAsDownloaded:t,markAsViewed:n,messages:r,learnMoreUrl:s}){const a=L(),o=p.useCallback(()=>{ame(e),t()},[t,e]),c=i.jsx(S,{...ome(r)}),l=i.jsx(S,{...r.bannerContent}),u=i.jsxs("div",{className:"flex-grow",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:c}),i.jsx("span",{className:"text-token-text-secondary",children:l}),i.jsxs(Pf,{href:s,className:"ml-2 gap-1 font-medium",children:[i.jsx(S,{...r.learnMore}),i.jsx(KE,{className:"icon-sm inline-block"})]})]});return i.jsx(Xo,{onPrimaryCtaClick:o,primaryCtaText:a.formatMessage(r.download),onDismiss:n,content:u})}function cme({downloadUrl:e,markAsDownloaded:t,markAsViewed:n,isAppAvailable:r,messages:s,learnMoreUrl:a}){const o=s.modalTitle,c=i.jsx(S,{...o}),l=i.jsx(S,{...s.modalContent}),u=i.jsx("div",{className:"mt-2",children:i.jsxs(Pf,{href:a,className:"flex items-center gap-1 font-medium",children:[i.jsx(S,{...s.learnMore}),i.jsx(KE,{className:"icon-sm"})]})}),d=i.jsx(ee,{as:"link",to:e,color:"primary",onClick:t,openNewTab:!0,children:i.jsx(S,{...s.download})}),f=i.jsx(ee,{color:"secondary",onClick:n,children:i.jsx(S,{...dme.close})}),m=r?d:f,h=r?f:void 0;return i.jsx(WN,{onClose:n,title:c,description:l,actionButton:m,cancelButton:h,moreInfoLink:u})}const lme=z({bannerTitle:{id:"SidekickOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for macOS 14+ with Apple Silicon"},bannerContent:{id:"SidekickOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Option + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidekickOnboarding.modalTitle",defaultMessage:"ChatGPT is available for macOS 14+ with Apple Silicon"},modalContent:{id:"SidekickOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Option + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidekickOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidekickOnboarding.download",defaultMessage:"Download"}}),ume=z({bannerTitle:{id:"SidetronOnboarding.bannerTitle",defaultMessage:"ChatGPT is now available for Windows 10+"},bannerContent:{id:"SidetronOnboarding.banner_content_3",defaultMessage:"Get faster access to ChatGPT with the Alt + Space shortcut, and use Advanced Voice Mode to get hands-free answers while you work."},modalTitle:{id:"SidetronOnboarding.modalTitle",defaultMessage:"ChatGPT is available for Windows 10+"},modalContent:{id:"SidetronOnboarding.modal_content_eligible",defaultMessage:"Quickly access ChatGPT from anywhere on your computer with the Alt + Space shortcut. Share screenshots, upload files, and use Advanced Voice Mode to chat with your computer and get hands-free answers while you work."},learnMore:{id:"SidetronOnboarding.learn_more",defaultMessage:"Learn more"},download:{id:"SidetronOnboarding.download",defaultMessage:"Download on Microsoft Store"}}),dme=z({close:{id:"SidekickOnboarding.close",defaultMessage:"Close"}}),fme={downloadUrl:Xfe,messages:lme,learnMoreUrl:Kfe,analyticsModalShown:P.sidekickDownloadModalShown,analyticsModalClosed:P.sidekickDownloadModalClosed,analyticsModalDownloadClicked:P.sidekickDownloadModalDownloaded,analyticsBannerShown:P.sidekickAnnouncementShown,analyticsBannerDismissed:P.sidekickAnnouncementDismissed,analyticsBannerDownloadClicked:P.sidekickAnnouncementLinkClicked,statsigLayerName:HN,statsigModalShown:"chatgpt_sidekick_modal_shown",statsigModalClosed:"chatgpt_sidekick_modal_closed",statsigModalDownloadClicked:"chatgpt_sidekick_modal_download_clicked",statsigBannerShown:"chatgpt_sidekick_announcement_shown",statsigBannerDismissed:"chatgpt_sidekick_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidekick_announcement_download_clicked",downloadAnnouncement:qfe,onboardingAnnouncement:Yfe},mme={downloadUrl:eme,messages:ume,learnMoreUrl:Jfe,analyticsModalShown:P.sidetronDownloadModalShown,analyticsModalClosed:P.sidetronDownloadModalClosed,analyticsModalDownloadClicked:P.sidetronDownloadModalDownloaded,analyticsBannerShown:P.sidetronAnnouncementShown,analyticsBannerDismissed:P.sidetronAnnouncementDismissed,analyticsBannerDownloadClicked:P.sidetronAnnouncementLinkClicked,statsigLayerName:zN,statsigModalShown:"chatgpt_sidetron_modal_shown",statsigModalClosed:"chatgpt_sidetron_modal_closed",statsigModalDownloadClicked:"chatgpt_sidetron_modal_download_clicked",statsigBannerShown:"chatgpt_sidetron_announcement_shown",statsigBannerDismissed:"chatgpt_sidetron_announcement_closed",statsigBannerDownloadClicked:"chatgpt_sidetron_announcement_download_clicked",downloadAnnouncement:Qfe,onboardingAnnouncement:Zfe},pme=25;function hme(e,t=0,n="",r=pme,s=void 0){return me({queryKey:["workspace",e,t,n],queryFn:async()=>await K.getWorkspaceUsers(e,t,r,n),placeholderData:s,enabled:!!e})}function hDe(e){const{data:t}=hme(e);return t?.total??0}const gDe="https://help.openai.com/en/collections/3943089-billing",vDe="https://openai.com/chatgpt/enterprise",yDe="https://help.openai.com/en/articles/7905690-how-do-i-cancel-my-apple-subscription-for-chatgpt-plus-in-the-chatgpt-ios-app",xDe="https://help.openai.com/en/articles/8258076-how-to-cancel-my-plus-subscription-in-the-chatgpt-android-app",bDe="https://help.openai.com/en/articles/7102672-how-can-i-access-gpt-4",gme="pricing",wDe="team-pricing",SDe={WEBAPP:"chatgpt_web",MOBILE_IOS:"chatgpt_mobile_ios",MOBILE_ANDROID:"chatgpt_mobile_android",GRANTED:"chatgpt_gratis_recepient",NOT_PURCHASED:"chatgpt_not_purchased"},CDe={ALREADY_PAID:"User is already paid"};let av;function Rr(e,t){av=t,e({hash:gme})}function TDe(e){e({hash:""})}function kDe(){const e=av;return av=void 0,e}fe.ol`ml-5 list-decimal`;const vme=fe.ul`ml-3 list-disc`,yme=fe.li`marker:text-token-text-tertiary text-token-text-primary mb-2`;function KN(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var Gx="Radio",[xme,XN]=ha(Gx),[bme,wme]=xme(Gx),QN=p.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:o,value:c="on",onCheck:l,form:u,...d}=e,[f,m]=p.useState(null),h=Lr(t,y=>m(y)),g=p.useRef(!1),v=f?u||!!f.closest("form"):!0;return i.jsxs(bme,{scope:n,checked:s,disabled:o,children:[i.jsx(Rt.button,{type:"button",role:"radio","aria-checked":s,"data-state":e9(s),"data-disabled":o?"":void 0,disabled:o,value:c,...d,ref:h,onClick:st(e.onClick,y=>{s||l?.(),v&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),v&&i.jsx(Sme,{control:f,bubbles:!g.current,name:r,value:c,checked:s,required:a,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});QN.displayName=Gx;var ZN="RadioIndicator",JN=p.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=wme(ZN,n);return i.jsx(bc,{present:r||a.checked,children:i.jsx(Rt.span,{"data-state":e9(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});JN.displayName=ZN;var Sme=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,a=p.useRef(null),o=KN(n),c=aE(t);return p.useEffect(()=>{const l=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(m)}},[o,n,r]),i.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function e9(e){return e?"checked":"unchecked"}var Cme=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Wx="RadioGroup",[Tme,MDe]=ha(Wx,[ff,XN]),t9=ff(),n9=XN(),[kme,Mme]=Tme(Wx),r9=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:o=!1,disabled:c=!1,orientation:l,dir:u,loop:d=!0,onValueChange:f,...m}=e,h=t9(n),g=oE(u),[v,y]=wc({prop:a,defaultProp:s,onChange:f});return i.jsx(kme,{scope:n,name:r,required:o,disabled:c,value:v,onValueChange:y,children:i.jsx(iE,{asChild:!0,...h,orientation:l,dir:g,loop:d,children:i.jsx(Rt.div,{role:"radiogroup","aria-required":o,"aria-orientation":l,"data-disabled":c?"":void 0,dir:g,...m,ref:t})})})});r9.displayName=Wx;var s9="RadioGroupItem",a9=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=Mme(s9,n),o=a.disabled||r,c=t9(n),l=n9(n),u=p.useRef(null),d=Lr(t,u),f=a.value===s.value,m=p.useRef(!1);return p.useEffect(()=>{const h=v=>{Cme.includes(v.key)&&(m.current=!0)},g=()=>m.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[]),i.jsx(cE,{asChild:!0,...c,focusable:!o,active:f,children:i.jsx(QN,{disabled:o,required:a.required,checked:f,...l,...s,name:a.name,ref:d,onCheck:()=>a.onValueChange(s.value),onKeyDown:st(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:st(s.onFocus,()=>{m.current&&u.current?.click()})})})});a9.displayName=s9;var Eme="RadioGroupIndicator",o9=p.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=n9(n);return i.jsx(JN,{...s,...r,ref:t})});o9.displayName=Eme;var EDe=r9,i9=a9,c9=o9;const _me=fe.div`p-6`,Ame=fe.label`font-semibold text-base cursor-pointer`,Pme=fe.div`flex flex-col gap-3 text-token-text-secondary text-sm mt-3`,jme=fe.p`text-token-text-primary`,Ime=fe.s`text-token-text-tertiary`,Ra=999,_De=2;function ADe({billingType:e,name:t,billingFeatures:n,cost:r,costStructure:s}){return i.jsxs(_me,{children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(i9,{value:e,id:e,className:"h-5 w-5 cursor-pointer rounded-full border border-token-border-medium bg-token-main-surface-primary outline-none hover:bg-token-main-surface-secondary radix-state-checked:border-green-500 radix-state-checked:bg-green-500",children:i.jsx(c9,{className:"flex items-center justify-center",children:i.jsx(vf,{className:"mt-0.25 h-[14px] w-[14px] stroke-[3] text-white"})})}),i.jsx(Ame,{htmlFor:e,children:i.jsx(S,{...t})})]}),i.jsxs(Pme,{children:[i.jsxs("div",{children:[i.jsx(jme,{children:i.jsx(S,{...r,values:{s:(...a)=>i.jsx(Ime,{children:a})}})}),i.jsx("p",{children:i.jsx(S,{...s})})]}),i.jsx(vme,{children:n.map(a=>i.jsx(yme,{children:i.jsx(S,{...a})},a.id))})]})]})}function PDe({numSeats:e,minSeats:t,setNumSeats:n}){return i.jsxs("div",{className:"mb-3 flex items-center",children:[i.jsx("button",{disabled:e<=t,onClick:r=>{const s=r.shiftKey;n(a=>hd(a-=s?10:1,t,Ra))},className:"px-4 py-2 disabled:cursor-not-allowed disabled:text-token-text-secondary",children:i.jsx(U$,{className:"icon-sm"})}),i.jsx("input",{type:"number",min:t,max:Ra,name:"seats",value:e,onChange:r=>{n(parseInt(r.target.value))},onBlur:()=>{e<t&&n(t),e>Ra&&n(Ra),e||n(t)},className:"m-0 h-9 appearance-none rounded border border-gray-200 px-2 py-0 text-center text-sm text-gray-800 shadow-none outline-none ring-transparent focus:border-green-500 focus:ring-green-500 dark:border-gray-700"}),i.jsx("button",{disabled:e>=Ra,onClick:r=>{const s=r.shiftKey;n(a=>hd(a+=s?10:1,t,Ra))},className:"px-4 py-2 disabled:cursor-not-allowed disabled:text-token-text-secondary",children:i.jsx(yf,{className:"icon-sm"})})]})}const tn=z({flexiblePlanName:{id:"teamBilling.flexiblePlan.name",defaultMessage:"Flexible plan"},flexiblePlanCost:{id:"teamBilling.flexiblePlan.cost",defaultMessage:"USD $30"},flexibleBilledMonthly:{id:"teamBilling.flexiblePlan.billedMonthly",defaultMessage:"Price billed monthly"},flexibleAddRemoveUsers:{id:"teamBilling.flexiblePlan.addRemoveUsers",defaultMessage:"Add or remove users as needed"},flexibleMinBill:{id:"teamBilling.flexiblePlan.minBill",defaultMessage:"The minimum monthly bill is for 2 users, USD $60/month"},seatsTitle:{id:"teamBilling.seatsTitle",defaultMessage:"Seats"},summaryTitle:{id:"teamBilling.summaryTitle",defaultMessage:"Summary"},annualPlanName:{id:"teamBilling.annualPlan.name",defaultMessage:"Annual plan"},annualPlanCost:{id:"teamBilling.annualPlan.cost",defaultMessage:"USD $25 <s>$30</s>"},annualBilledAnnually:{id:"teamBilling.annualPlan.billedAnnually",defaultMessage:"Annual price billed annually"},annualAddUsersWithRenewal:{id:"teamBilling.annualPlan.addUsersWithRenewal",defaultMessage:"Add users as needed, remove users only when you renew the contract"},annualMinBill:{id:"teamBilling.annualPlan.minBill",defaultMessage:"The minimum bill is for 2 users, USD $50/month billed annually"},teamsCostStructure:{id:"teamBilling.teamsCostStructure",defaultMessage:"per person/month"},annualSavingsPercentage:{id:"teamBilling.annualSavingsPercentage",defaultMessage:"16.7% off"},createWorkspace:{id:"createWorkspace.title",defaultMessage:"Create workspace"},cancel:{id:"createWorkspace.cancel",defaultMessage:"Cancel"},selectTeamPlan:{id:"createWorkspace.selectTeamPlan",defaultMessage:"Select Team Plan"},selectTeamPlanModalTitle:{id:"createWorkspace.selectTeamPlanModalTitle",defaultMessage:"Select your team plan"},continueToBillingButton:{id:"createWorkspace.continueToBillingButton",defaultMessage:"Continue to billing"},paymentErrorWarning:{id:"createWorkspace.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."},selectBillingOption:{id:"createWorkspace.selectBillingOption",defaultMessage:"Select billing options"},annualPlanSelected:{id:"teamBilling.annualPlanSelected",defaultMessage:"ChatGPT Team annual plan"},annualPlanBilled:{id:"teamBilling.annualPlanBilled",defaultMessage:"Price billed annually, starting {date}"},annualPlanTotal:{id:"teamBilling.annualPlanTotal",defaultMessage:"USD ${totalCost} per year total"},flexiblePlanSelected:{id:"teamBilling.flexiblePlanSelected",defaultMessage:"ChatGPT Team flexible plan"},flexiblePlanBilled:{id:"teamBilling.flexiblePlanBilled",defaultMessage:"Price billed monthly, starting {date}"},flexiblePlanTotal:{id:"teamBilling.flexiblePlanTotal",defaultMessage:"USD ${totalCost} per month total"},continueToPricePreview:{id:"teamBilling.continueToPricePreview",defaultMessage:"Continue"},changeEffectDate:{id:"teamBilling.changeEffectDate",defaultMessage:"This change will take effect at your next renewal on {date}"},confirmPageChangeEffectDate:{id:"teamBilling.confirmPageChangeEffectDate",defaultMessage:"Your billing schedule will change from {current_plan} to {new_plan} starting at your next renewal on {date}"},confirmChange:{id:"teamBilling.confirmChange",defaultMessage:"Confirm"}}),jDe={type:"month",name:tn.flexiblePlanName,cost:tn.flexiblePlanCost,costStructure:tn.teamsCostStructure,billingFeatures:[tn.flexibleBilledMonthly,tn.flexibleAddRemoveUsers,tn.flexibleMinBill]},IDe={type:"year",name:tn.annualPlanName,cost:tn.annualPlanCost,costStructure:tn.teamsCostStructure,originalCost:tn.flexiblePlanCost,savingsFromOriginal:tn.annualSavingsPercentage,billingFeatures:[tn.annualBilledAnnually,tn.annualAddUsersWithRenewal,tn.annualMinBill]},Nme="ext-oai-did",Ome="ext-login-allow-phone",Rme="ext-signup-allow-phone";function Dme(e){return{[Nme]:e}}function Lme(){const{layer:e}=_n("1346366956");return()=>e.get("use_email_otp",!1)}const NDe={auth0:i.jsx(S,{id:"mfaModals.auth0",defaultMessage:"username & password"}),"google-oauth2":i.jsx(S,{id:"mfaModals.google-oauth2",defaultMessage:"Google"}),windowslive:i.jsx(S,{id:"mfaModals.microsoft",defaultMessage:"Microsoft"}),apple:i.jsx(S,{id:"mfaModals.apple",defaultMessage:"Apple"}),samlp:i.jsx(S,{id:"mfaModals.samlp",defaultMessage:"your company's single sign on solution"}),oidc:i.jsx(S,{id:"mfaModals.oidc",defaultMessage:"your company's single sign on solution"})},$me="oai-auth-provider";function Hx(){return p.useContext(lE).isElectron}function Fme(){const e=Hx(),{value:t}=ot("1072178956"),{value:n}=ot("3342258807");if(e){if(n)return Bme;if(t)return Ume}}const Bme=_i.OpenAISidetron,Ume=_i.Auth0Sidetron;function Vme(){const{layer:e}=_n("1346366956");return()=>e.get("login_allow_phone",!1)}function Gme(){const{value:e}=at("719574156");return e}function Wme(){const{layer:e}=_n("1346366956");return()=>e.get("signup_allow_phone",!1)}function Hme(){const{layer:e}=_n("1914829685");return()=>e.get("forward_to_authapi",!1)}function zme(e,t,n){return t&&n?_i.OpenAI:t?_i.LoginWebAuth0:_i.Auth0}function Jt(){const[e]=pa(),{value:t}=at("1198030896"),n=Lme(),r=Gme(),s=Vme(),a=Wme(),{country:o}=Tc(),c=Hme(),l=Fme();return({authType:d="signup",callbackUrl:f="/",additionalAuthParams:m={},callback:h,shouldOpenPaymentModalOnAuth:g=!1,forceAuthFlow:v=void 0}={})=>{const y=v===nw.Auth0,b=v===nw.AuthApi,x=c(),w=l??zme(e,t,(x||b)&&!y),C=n(),T=s(),M=a();g&&on.setCookie(Zt.ShowPaymentModal,!0,{maxAge:6*60*60}),sessionStorage.setItem($me,w.toString()),h?.(w),a0.signIn(w,{callbackUrl:f},{prompt:"login",screen_hint:d,...Dme(F3()),...C?{use_email_otp:"true"}:{},...T||r?{[Ome]:"true"}:{},...M?{[Rme]:"true"}:{},...o?{country_code:o}:{},...m})}}var et=(e=>(e.DownloadMessages="download-messages",e.InviteUsersToWorkspace="invite-users-to-workspace",e.WorkspaceAppearance="workspace-appearance",e.KeyboardActions="keyboard-actions",e.UserContext="user-context",e.WorkspaceSwitcher="workspace-switcher",e.ReadOnlyConversationTemplate="read-only-conversation-template",e.CookieManagement="cookie-management",e.AgeVerificationInterstitial="age-verification-interstitial",e.GPTDetails="gpt-details",e.GPTPrivacySettings="gpt-privacy-settings",e.GPTFeedbackEmail="gpt-support-email",e.GPTReview="gpt-review",e.GPTRemoveThirdParty="gpt-remove-third-party",e.SharedConversationModeration="shared-conversation-moderation",e.ReportConversation="report-conversation",e.BlockingInitialComponent="blocking-initial-component",e.NoAuthNewChat="no-auth-new-chat",e.GlobalMemoryOnboarding="global-memory-onboarding",e.AccountPayment="account-payment",e.CreateExclusion="create-exclusion",e.AddServiceAccountKey="add-service-account-key",e.DeleteServiceAccountKey="delete-service-account-key",e))(et||{});const l9=He.IsNavigationCollapsed,u9=He.IsGptListCollapsed;function qme(){const e=Mt.getItem(l9)??!1;return on.setCookie(Zt.NavigationState,e?"0":"1",{maxAge:2**30}),{collapsed:e}}function Yme({collapsed:e}){Mt.setItem(l9,e),on.setCookie(Zt.NavigationState,e?"0":"1",{maxAge:2**30})}const ve=Ie()(()=>({isThreadHeaderVisible:!0,isDesktopNavCollapsed:qme().collapsed,isVoiceActive:!1,sharingModalThreadId:void 0,feedbackModalThreadId:void 0,leaveWorkspaceData:null,activeSidebar:!1,activeStageSidebar:!1,activeModals:new Set,isLatencyDevToolsVisible:!1,purchaseWorkspaceData:null,isGptListCollapsed:Mt.getItem(u9)??!0,browseMode:"conversation",voiceFeedbackThread:null,lastVoiceSessionStartTime:null,lastVoiceSessionEndTime:null,displayAnnouncementTooltip:null})),ODe={isThreadHeaderVisible:e=>e.isThreadHeaderVisible,isLatencyDevtoolsVisible:e=>e.isLatencyDevToolsVisible,isGptListCollapsed:e=>e.isGptListCollapsed},$e={setBrowseMode:e=>{ve.setState(t=>({...t,browseMode:e}))},enterGizmoEditor:()=>{ve.setState({browseMode:"gizmo-editor"})},exitGizmoEditor:()=>{ve.setState({browseMode:"conversation"})},toggleGptListCollapsed:()=>{ve.setState(e=>{const t=!e.isGptListCollapsed;return Mt.setItem(u9,t),E.logToggleShowGptList({isCollapsed:t}),{isGptListCollapsed:t}})},toggleNavSidebar:()=>{ve.getState().activeStageSidebar?$e.togglePopoverNavSidebar():$e.toggleDesktopNavCollapsed()},togglePopoverNavSidebar:()=>{$e.toggleActiveSidebar("popover-nav")},closePopoverNavSidebar:()=>{ve.setState(e=>e.activeSidebar==="popover-nav"?{activeSidebar:void 0}:{})},toggleDesktopNavCollapsed:e=>{ve.setState(t=>{const n=e??!t.isDesktopNavCollapsed;return Yme({collapsed:n}),E.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:n}),{isDesktopNavCollapsed:n}})},hideThreadHeader:()=>{ve.setState({isThreadHeaderVisible:!1})},showThreadHeader:()=>{ve.setState({isThreadHeaderVisible:!0})},openSharingModal(e,t){ve.setState({sharingModalThreadId:e}),E.logEvent(P.shareConversationOpenModal,{location:t})},closeSharingModal(){ve.setState({sharingModalThreadId:void 0})},openFeedbackModal(e){ve.setState({feedbackModalThreadId:e})},closeFeedbackModal(){ve.setState({feedbackModalThreadId:void 0})},setLeaveWorkspaceData(e){ve.setState({leaveWorkspaceData:e})},setPurchaseWorkspaceData(e){ve.setState({purchaseWorkspaceData:e})},setActiveSidebar(e){ve.setState({activeSidebar:e})},toggleActiveSidebar(e){ve.setState(t=>({activeSidebar:t.activeSidebar===e?!1:e}))},closeActiveSidebar(){ve.setState(()=>({activeSidebar:!1}))},setActiveStageSidebar(e){ve.setState({activeStageSidebar:e})},toggleModal(e){ve.setState(t=>{const n=new Set(t.activeModals);return n.has(e)?n.delete(e):n.add(e),{activeModals:n}})},openModal(e){ve.setState(t=>{const n=new Set(t.activeModals);return n.add(e),{activeModals:n}})},closeModal(e){ve.setState(t=>{const n=new Set(t.activeModals);return n.delete(e),{activeModals:n}})},closeAllActiveModals(){ve.setState({activeModals:new Set})},hideLatencyDevTools:()=>{ve.setState({isLatencyDevToolsVisible:!1})},showLatencyDevTools:()=>{ve.setState({isLatencyDevToolsVisible:!0})},showAnnouncementTooltipExclusively(e){ve.setState(t=>t.displayAnnouncementTooltip?t:{displayAnnouncementTooltip:e})}};function zx(e){return ve(t=>t.activeModals.has(e))}function hm(){const{isUnauthenticated:e}=bt(),t=p.useContext(uE).getCookie(Zt.NavigationState),n=ve(r=>r.isDesktopNavCollapsed);return e?!0:t?t==="0":n}function Kme(){const[e,t]=p.useState(!1),n=ve(r=>r.activeModals);return p.useEffect(()=>{t(r=>r||n.has("blocking-initial-component"))},[n]),e}const d9=typeof document<"u"?J.useLayoutEffect:()=>{};function Xme(e){const t=p.useRef(null);return d9(()=>{t.current=e},[e]),p.useCallback((...n)=>{const r=t.current;return r?.(...n)},[])}const dl=e=>{var t;return(t=e?.ownerDocument)!==null&&t!==void 0?t:document},Hs=e=>e&&"window"in e&&e.window===e?e:dl(e).defaultView||window;function Qme(e){var t;return typeof window>"u"||window.navigator==null?!1:((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.brands.some(n=>e.test(n.brand)))||e.test(window.navigator.userAgent)}function Zme(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function f9(e){let t=null;return()=>(t==null&&(t=e()),t)}const Jme=f9(function(){return Zme(/^Mac/i)}),epe=f9(function(){return Qme(/Android/i)});function tpe(e){return e.mozInputSource===0&&e.isTrusted?!0:epe()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}class npe{isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}constructor(t,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=t}}function m9(e){let t=p.useRef({isFocused:!1,observer:null});d9(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]);let n=Xme(r=>{e?.(r)});return p.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;let s=r.target,a=o=>{t.current.isFocused=!1,s.disabled&&n(new npe("blur",o)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};s.addEventListener("focusout",a,{once:!0}),t.current.observer=new MutationObserver(()=>{if(t.current.isFocused&&s.disabled){var o;(o=t.current.observer)===null||o===void 0||o.disconnect();let c=s===document.activeElement?null:document.activeElement;s.dispatchEvent(new FocusEvent("blur",{relatedTarget:c})),s.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:c}))}}),t.current.observer.observe(s,{attributes:!0,attributeFilter:["disabled"]})}},[n])}function rpe(e){let{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:s}=e;const a=p.useCallback(l=>{if(l.target===l.currentTarget)return r&&r(l),s&&s(!1),!0},[r,s]),o=m9(a),c=p.useCallback(l=>{const u=dl(l.target);l.target===l.currentTarget&&u.activeElement===l.target&&(n&&n(l),s&&s(!0),o(l))},[s,n,o]);return{focusProps:{onFocus:!t&&(n||s||r)?c:void 0,onBlur:!t&&(r||s)?a:void 0}}}let fl=null,ov=new Set,Bi=new Map,ua=!1,iv=!1;const spe={Tab:!0,Escape:!0};function qx(e,t){for(let n of ov)n(e,t)}function ape(e){return!(e.metaKey||!Jme()&&e.altKey||e.ctrlKey||e.key==="Control"||e.key==="Shift"||e.key==="Meta")}function xd(e){ua=!0,ape(e)&&(fl="keyboard",qx("keyboard",e))}function kn(e){fl="pointer",(e.type==="mousedown"||e.type==="pointerdown")&&(ua=!0,qx("pointer",e))}function p9(e){tpe(e)&&(ua=!0,fl="virtual")}function h9(e){e.target===window||e.target===document||(!ua&&!iv&&(fl="virtual",qx("virtual",e)),ua=!1,iv=!1)}function g9(){ua=!1,iv=!0}function cv(e){if(typeof window>"u"||Bi.get(Hs(e)))return;const t=Hs(e),n=dl(e);let r=t.HTMLElement.prototype.focus;t.HTMLElement.prototype.focus=function(){ua=!0,r.apply(this,arguments)},n.addEventListener("keydown",xd,!0),n.addEventListener("keyup",xd,!0),n.addEventListener("click",p9,!0),t.addEventListener("focus",h9,!0),t.addEventListener("blur",g9,!1),typeof PointerEvent<"u"?(n.addEventListener("pointerdown",kn,!0),n.addEventListener("pointermove",kn,!0),n.addEventListener("pointerup",kn,!0)):(n.addEventListener("mousedown",kn,!0),n.addEventListener("mousemove",kn,!0),n.addEventListener("mouseup",kn,!0)),t.addEventListener("beforeunload",()=>{v9(e)},{once:!0}),Bi.set(t,{focus:r})}const v9=(e,t)=>{const n=Hs(e),r=dl(e);t&&r.removeEventListener("DOMContentLoaded",t),Bi.has(n)&&(n.HTMLElement.prototype.focus=Bi.get(n).focus,r.removeEventListener("keydown",xd,!0),r.removeEventListener("keyup",xd,!0),r.removeEventListener("click",p9,!0),n.removeEventListener("focus",h9,!0),n.removeEventListener("blur",g9,!1),typeof PointerEvent<"u"?(r.removeEventListener("pointerdown",kn,!0),r.removeEventListener("pointermove",kn,!0),r.removeEventListener("pointerup",kn,!0)):(r.removeEventListener("mousedown",kn,!0),r.removeEventListener("mousemove",kn,!0),r.removeEventListener("mouseup",kn,!0)),Bi.delete(n))};function ope(e){const t=dl(e);let n;return t.readyState!=="loading"?cv(e):(n=()=>{cv(e)},t.addEventListener("DOMContentLoaded",n)),()=>v9(e,n)}typeof document<"u"&&ope();function y9(){return fl!=="pointer"}const ipe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function cpe(e,t,n){var r;const s=typeof window<"u"?Hs(n?.target).HTMLInputElement:HTMLInputElement,a=typeof window<"u"?Hs(n?.target).HTMLTextAreaElement:HTMLTextAreaElement,o=typeof window<"u"?Hs(n?.target).HTMLElement:HTMLElement,c=typeof window<"u"?Hs(n?.target).KeyboardEvent:KeyboardEvent;return e=e||n?.target instanceof s&&!ipe.has(n==null||(r=n.target)===null||r===void 0?void 0:r.type)||n?.target instanceof a||n?.target instanceof o&&n?.target.isContentEditable,!(e&&t==="keyboard"&&n instanceof c&&!spe[n.key])}function lpe(e,t,n){cv(),p.useEffect(()=>{let r=(s,a)=>{cpe(!!n?.isTextInput,s,a)&&e(y9())};return ov.add(r),()=>{ov.delete(r)}},t)}function upe(e){let{isDisabled:t,onBlurWithin:n,onFocusWithin:r,onFocusWithinChange:s}=e,a=p.useRef({isFocusWithin:!1}),o=p.useCallback(u=>{a.current.isFocusWithin&&!u.currentTarget.contains(u.relatedTarget)&&(a.current.isFocusWithin=!1,n&&n(u),s&&s(!1))},[n,s,a]),c=m9(o),l=p.useCallback(u=>{!a.current.isFocusWithin&&document.activeElement===u.target&&(r&&r(u),s&&s(!0),a.current.isFocusWithin=!0,c(u))},[r,s,c]);return t?{focusWithinProps:{onFocus:void 0,onBlur:void 0}}:{focusWithinProps:{onFocus:l,onBlur:o}}}let bd=!1,uh=0;function lv(){bd=!0,setTimeout(()=>{bd=!1},50)}function _T(e){e.pointerType==="touch"&&lv()}function dpe(){if(!(typeof document>"u"))return typeof PointerEvent<"u"?document.addEventListener("pointerup",_T):document.addEventListener("touchend",lv),uh++,()=>{uh--,!(uh>0)&&(typeof PointerEvent<"u"?document.removeEventListener("pointerup",_T):document.removeEventListener("touchend",lv))}}function RDe(e){let{onHoverStart:t,onHoverChange:n,onHoverEnd:r,isDisabled:s}=e,[a,o]=p.useState(!1),c=p.useRef({isHovered:!1,ignoreEmulatedMouseEvents:!1,pointerType:"",target:null}).current;p.useEffect(dpe,[]);let{hoverProps:l,triggerHoverEnd:u}=p.useMemo(()=>{let d=(h,g)=>{if(c.pointerType=g,s||g==="touch"||c.isHovered||!h.currentTarget.contains(h.target))return;c.isHovered=!0;let v=h.currentTarget;c.target=v,t&&t({type:"hoverstart",target:v,pointerType:g}),n&&n(!0),o(!0)},f=(h,g)=>{if(c.pointerType="",c.target=null,g==="touch"||!c.isHovered)return;c.isHovered=!1;let v=h.currentTarget;r&&r({type:"hoverend",target:v,pointerType:g}),n&&n(!1),o(!1)},m={};return typeof PointerEvent<"u"?(m.onPointerEnter=h=>{bd&&h.pointerType==="mouse"||d(h,h.pointerType)},m.onPointerLeave=h=>{!s&&h.currentTarget.contains(h.target)&&f(h,h.pointerType)}):(m.onTouchStart=()=>{c.ignoreEmulatedMouseEvents=!0},m.onMouseEnter=h=>{!c.ignoreEmulatedMouseEvents&&!bd&&d(h,"mouse"),c.ignoreEmulatedMouseEvents=!1},m.onMouseLeave=h=>{!s&&h.currentTarget.contains(h.target)&&f(h,"mouse")}),{hoverProps:m,triggerHoverEnd:f}},[t,n,r,s,c]);return p.useEffect(()=>{s&&u({currentTarget:c.target},c.pointerType)},[s]),{hoverProps:l,isHovered:a}}function DDe(e={}){let{autoFocus:t=!1,isTextInput:n,within:r}=e,s=p.useRef({isFocused:!1,isFocusVisible:t||y9()}),[a,o]=p.useState(!1),[c,l]=p.useState(()=>s.current.isFocused&&s.current.isFocusVisible),u=p.useCallback(()=>l(s.current.isFocused&&s.current.isFocusVisible),[]),d=p.useCallback(h=>{s.current.isFocused=h,o(h),u()},[u]);lpe(h=>{s.current.isFocusVisible=h,u()},[],{isTextInput:n});let{focusProps:f}=rpe({isDisabled:r,onFocusChange:d}),{focusWithinProps:m}=upe({isDisabled:!r,onFocusWithinChange:d});return{isFocused:a,isFocusVisible:c,focusProps:r?m:f}}var fpe=Object.defineProperty,mpe=(e,t,n)=>t in e?fpe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dh=(e,t,n)=>(mpe(e,typeof t!="symbol"?t+"":t,n),n);let ppe=class{constructor(){dh(this,"current",this.detect()),dh(this,"handoffState","pending"),dh(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Js=new ppe;function Sa(e){return Js.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function gm(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Br(){let e=[],t={addEventListener(n,r,s,a){return n.addEventListener(r,s,a),t.add(()=>n.removeEventListener(r,s,a))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return gm(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let a=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:a})})},group(n){let r=Br();return n(r),this.add(()=>r.dispose())},add(n){return e.includes(n)||e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function vm(){let[e]=p.useState(Br);return p.useEffect(()=>()=>e.dispose(),[e]),e}let xt=(e,t)=>{Js.isServer?p.useEffect(e,t):p.useLayoutEffect(e,t)};function Ca(e){let t=p.useRef(e);return xt(()=>{t.current=e},[e]),t}let Le=function(e){let t=Ca(e);return J.useCallback((...n)=>t.current(...n),[t])};function hpe(e){let t=e.width/2,n=e.height/2;return{top:e.clientY-n,right:e.clientX+t,bottom:e.clientY+n,left:e.clientX-t}}function gpe(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function $De({disabled:e=!1}={}){let t=p.useRef(null),[n,r]=p.useState(!1),s=vm(),a=Le(()=>{t.current=null,r(!1),s.dispose()}),o=Le(c=>{if(s.dispose(),t.current===null){t.current=c.currentTarget,r(!0);{let l=Sa(c.currentTarget);s.addEventListener(l,"pointerup",a,!1),s.addEventListener(l,"pointermove",u=>{if(t.current){let d=hpe(u);r(gpe(d,t.current.getBoundingClientRect()))}},!1),s.addEventListener(l,"pointercancel",a,!1)}}});return{pressed:n,pressProps:e?{}:{onPointerDown:o,onPointerUp:a,onClick:a}}}let vpe=p.createContext(void 0);function x9(){return p.useContext(vpe)}function uv(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function hs(e,t,...n){if(e in t){let s=t[e];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,hs),r}var wd=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(wd||{}),ss=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ss||{});function Sn({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:s,visible:a=!0,name:o,mergeRefs:c}){c=c??ype;let l=b9(t,e);if(a)return Zl(l,n,r,o,c);let u=s??0;if(u&2){let{static:d=!1,...f}=l;if(d)return Zl(f,n,r,o,c)}if(u&1){let{unmount:d=!0,...f}=l;return hs(d?0:1,{0(){return null},1(){return Zl({...f,hidden:!0,style:{display:"none"}},n,r,o,c)}})}return Zl(l,n,r,o,c)}function Zl(e,t={},n,r,s){let{as:a=n,children:o,refName:c="ref",...l}=fh(e,["unmount","static"]),u=e.ref!==void 0?{[c]:e.ref}:{},d=typeof o=="function"?o(t):o;"className"in l&&l.className&&typeof l.className=="function"&&(l.className=l.className(t)),l["aria-labelledby"]&&l["aria-labelledby"]===l.id&&(l["aria-labelledby"]=void 0);let f={};if(t){let m=!1,h=[];for(let[g,v]of Object.entries(t))typeof v=="boolean"&&(m=!0),v===!0&&h.push(g.replace(/([A-Z])/g,y=>`-${y.toLowerCase()}`));if(m){f["data-headlessui-state"]=h.join(" ");for(let g of h)f[`data-${g}`]=""}}if(a===p.Fragment&&(Object.keys(Ds(l)).length>0||Object.keys(Ds(f)).length>0))if(!p.isValidElement(d)||Array.isArray(d)&&d.length>1){if(Object.keys(Ds(l)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(Ds(l)).concat(Object.keys(Ds(f))).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`))}else{let m=d.props,h=m?.className,g=typeof h=="function"?(...b)=>uv(h(...b),l.className):uv(h,l.className),v=g?{className:g}:{},y=b9(d.props,Ds(fh(l,["ref"])));for(let b in f)b in y&&delete f[b];return p.cloneElement(d,Object.assign({},y,f,u,{ref:s(d.ref,u.ref)},v))}return p.createElement(a,Object.assign({},fh(l,["ref"]),a!==p.Fragment&&u,a!==p.Fragment&&f),d)}function FDe(){let e=p.useRef([]),t=p.useCallback(n=>{for(let r of e.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return e.current=n,t}}function ype(...e){return e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}function b9(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];if(t.disabled||t["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var a;return(a=s?.preventDefault)==null?void 0:a.call(s)}]);for(let r in n)Object.assign(t,{[r](s,...a){let o=n[r];for(let c of o){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;c(s,...a)}}});return t}function BDe(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):t[s]=r[s];for(let r in n)Object.assign(t,{[r](...s){let a=n[r];for(let o of a)o?.(...s)}});return t}function en(e){var t;return Object.assign(p.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function Ds(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function fh(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}let xpe="span";var Sd=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Sd||{});function bpe(e,t){var n;let{features:r=1,...s}=e,a={ref:t,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return Sn({ourProps:a,theirProps:s,slot:{},defaultTag:xpe,name:"Hidden"})}let dv=en(bpe),wpe=p.createContext(void 0);function Spe(){return p.useContext(wpe)}function UDe(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=t?.getAttribute("disabled")==="";return r&&Cpe(n)?!1:r}function Cpe(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}let w9=Symbol();function Tpe(e,t=!0){return Object.assign(e,{[w9]:t})}function Hn(...e){let t=p.useRef(e);p.useEffect(()=>{t.current=e},[e]);let n=Le(r=>{for(let s of t.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return e.every(r=>r==null||r?.[w9])?void 0:n}let Yx=p.createContext(null);Yx.displayName="DescriptionContext";function S9(){let e=p.useContext(Yx);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,S9),t}return e}function kpe(){let[e,t]=p.useState([]);return[e.length>0?e.join(" "):void 0,p.useMemo(()=>function(n){let r=Le(a=>(t(o=>[...o,a]),()=>t(o=>{let c=o.slice(),l=c.indexOf(a);return l!==-1&&c.splice(l,1),c}))),s=p.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return J.createElement(Yx.Provider,{value:s},n.children)},[t])]}let Mpe="p";function Epe(e,t){let n=p.useId(),r=x9(),{id:s=`headlessui-description-${n}`,...a}=e,o=S9(),c=Hn(t);xt(()=>o.register(s),[s,o.register]);let l=r||!1,u=p.useMemo(()=>({...o.slot,disabled:l}),[o.slot,l]),d={ref:c,...o.props,id:s};return Sn({ourProps:d,theirProps:a,slot:u,defaultTag:Mpe,name:o.name||"Description"})}let _pe=en(Epe),Ape=Object.assign(_pe,{});var C9=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(C9||{});let ym=p.createContext(null);ym.displayName="LabelContext";function T9(){let e=p.useContext(ym);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,T9),t}return e}function Ppe(e){var t,n,r;let s=(n=(t=p.useContext(ym))==null?void 0:t.value)!=null?n:void 0;return((r=void 0)!=null?r:0)>0?[s,...e].filter(Boolean).join(" "):s}function VDe({inherit:e=!1}={}){let t=Ppe(),[n,r]=p.useState([]),s=e?[t,...n].filter(Boolean):n;return[s.length>0?s.join(" "):void 0,p.useMemo(()=>function(a){let o=Le(l=>(r(u=>[...u,l]),()=>r(u=>{let d=u.slice(),f=d.indexOf(l);return f!==-1&&d.splice(f,1),d}))),c=p.useMemo(()=>({register:o,slot:a.slot,name:a.name,props:a.props,value:a.value}),[o,a.slot,a.name,a.props,a.value]);return J.createElement(ym.Provider,{value:c},a.children)},[r])]}let jpe="label";function Ipe(e,t){var n;let r=p.useId(),s=T9(),a=Spe(),o=x9(),{id:c=`headlessui-label-${r}`,htmlFor:l=a??((n=s.props)==null?void 0:n.htmlFor),passive:u=!1,...d}=e,f=Hn(t);xt(()=>s.register(c),[c,s.register]);let m=Le(y=>{let b=y.currentTarget;if(b instanceof HTMLLabelElement&&y.preventDefault(),s.props&&"onClick"in s.props&&typeof s.props.onClick=="function"&&s.props.onClick(y),b instanceof HTMLLabelElement){let x=document.getElementById(b.htmlFor);if(x){let w=x.getAttribute("disabled");if(w==="true"||w==="")return;let C=x.getAttribute("aria-disabled");if(C==="true"||C==="")return;(x instanceof HTMLInputElement&&(x.type==="radio"||x.type==="checkbox")||x.role==="radio"||x.role==="checkbox"||x.role==="switch")&&x.click(),x.focus({preventScroll:!0})}}}),h=o||!1,g=p.useMemo(()=>({...s.slot,disabled:h}),[s.slot,h]),v={ref:f,...s.props,id:c,htmlFor:l,onClick:m};return u&&("onClick"in v&&(delete v.htmlFor,delete v.onClick),"onClick"in d&&delete d.onClick),Sn({ourProps:v,theirProps:d,slot:g,defaultTag:l?jpe:"div",name:s.name||"Label"})}let Npe=en(Ipe);Object.assign(Npe,{});let Ope=p.createContext(()=>{});function Rpe({value:e,children:t}){return J.createElement(Ope.Provider,{value:e},t)}function Dpe(e){if(e===null)return{width:0,height:0};let{width:t,height:n}=e.getBoundingClientRect();return{width:t,height:n}}function GDe(e,t=!1){let[n,r]=p.useReducer(()=>({}),{}),s=p.useMemo(()=>Dpe(e),[e,n]);return xt(()=>{if(!e)return;let a=new ResizeObserver(r);return a.observe(e),()=>{a.disconnect()}},[e]),t?{width:`${s.width}px`,height:`${s.height}px`}:s}let Lpe=class extends Map{constructor(t){super(),this.factory=t}get(t){let n=super.get(t);return n===void 0&&(n=this.factory(t),this.set(t,n)),n}};function k9(e,t){let n=e(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...a){let o=t[s].call(n,...a);o&&(n=o,r.forEach(c=>c()))}}}function M9(e){return p.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}let $pe=new Lpe(()=>k9(()=>[],{ADD(e){return this.includes(e)?this:[...this,e]},REMOVE(e){let t=this.indexOf(e);if(t===-1)return this;let n=this.slice();return n.splice(t,1),n}}));function Qo(e,t){let n=$pe.get(t),r=p.useId(),s=M9(n);if(xt(()=>{if(e)return n.dispatch("ADD",r),()=>n.dispatch("REMOVE",r)},[n,e]),!e)return!1;let a=s.indexOf(r),o=s.length;return a===-1&&(a=o,o+=1),a===o-1}let fv=new Map,Ui=new Map;function AT(e){var t;let n=(t=Ui.get(e))!=null?t:0;return Ui.set(e,n+1),n!==0?()=>PT(e):(fv.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>PT(e))}function PT(e){var t;let n=(t=Ui.get(e))!=null?t:1;if(n===1?Ui.delete(e):Ui.set(e,n-1),n!==1)return;let r=fv.get(e);r&&(r["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",r["aria-hidden"]),e.inert=r.inert,fv.delete(e))}function Fpe(e,{allowed:t,disallowed:n}={}){let r=Qo(e,"inert-others");xt(()=>{var s,a;if(!r)return;let o=Br();for(let l of(s=n?.())!=null?s:[])l&&o.add(AT(l));let c=(a=t?.())!=null?a:[];for(let l of c){if(!l)continue;let u=Sa(l);if(!u)continue;let d=l.parentElement;for(;d&&d!==u.body;){for(let f of d.children)c.some(m=>f.contains(m))||o.add(AT(f));d=d.parentElement}}return o.dispose},[r,t,n])}function Bpe(e,t,n){let r=Ca(s=>{let a=s.getBoundingClientRect();a.x===0&&a.y===0&&a.width===0&&a.height===0&&n()});p.useEffect(()=>{if(!e)return;let s=t===null?null:t instanceof HTMLElement?t:t.current;if(!s)return;let a=Br();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>r.current(s));o.observe(s),a.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>r.current(s));o.observe(s),a.add(()=>o.disconnect())}return()=>a.dispose()},[t,r,e])}let Cd=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),Upe=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var wr=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(wr||{}),mv=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(mv||{}),Vpe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Vpe||{});function E9(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Cd)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function Gpe(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(Upe)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var _9=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(_9||{});function A9(e,t=0){var n;return e===((n=Sa(e))==null?void 0:n.body)?!1:hs(t,{0(){return e.matches(Cd)},1(){let r=e;for(;r!==null;){if(r.matches(Cd))return!0;r=r.parentElement}return!1}})}function HDe(e){let t=Sa(e);Br().nextFrame(()=>{t&&!A9(t.activeElement,0)&&cr(e)})}var Wpe=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Wpe||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function cr(e){e?.focus({preventScroll:!0})}let Hpe=["textarea","input"].join(",");function zpe(e){var t,n;return(n=(t=e?.matches)==null?void 0:t.call(e,Hpe))!=null?n:!1}function qpe(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),a=t(r);if(s===null||a===null)return 0;let o=s.compareDocumentPosition(a);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function zDe(e,t){return ao(E9(),t,{relativeTo:e})}function ao(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let a=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?qpe(e):e:t&64?Gpe(e):E9(e);s.length>0&&o.length>1&&(o=o.filter(h=>!s.some(g=>g!=null&&"current"in g?g?.current===h:g===h))),r=r??a.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),l=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,f=o.length,m;do{if(d>=f||d+f<=0)return 0;let h=l+d;if(t&16)h=(h+f)%f;else{if(h<0)return 3;if(h>=f)return 1}m=o[h],m?.focus(u),d+=c}while(m!==a.activeElement);return t&6&&zpe(m)&&m.select(),2}function P9(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function Ype(){return/Android/gi.test(window.navigator.userAgent)}function Kpe(){return P9()||Ype()}function pi(e,t,n,r){let s=Ca(n);p.useEffect(()=>{if(!e)return;function a(o){s.current(o)}return document.addEventListener(t,a,r),()=>document.removeEventListener(t,a,r)},[e,t,r])}function j9(e,t,n,r){let s=Ca(n);p.useEffect(()=>{if(!e)return;function a(o){s.current(o)}return window.addEventListener(t,a,r),()=>window.removeEventListener(t,a,r)},[e,t,r])}const jT=30;function Xpe(e,t,n){let r=Qo(e,"outside-click"),s=Ca(n),a=p.useCallback(function(l,u){if(l.defaultPrevented)return;let d=u(l);if(d===null||!d.getRootNode().contains(d)||!d.isConnected)return;let f=function m(h){return typeof h=="function"?m(h()):Array.isArray(h)||h instanceof Set?h:[h]}(t);for(let m of f)if(m!==null&&(m.contains(d)||l.composed&&l.composedPath().includes(m)))return;return!A9(d,_9.Loose)&&d.tabIndex!==-1&&l.preventDefault(),s.current(l,d)},[s,t]),o=p.useRef(null);pi(r,"pointerdown",l=>{var u,d;o.current=((d=(u=l.composedPath)==null?void 0:u.call(l))==null?void 0:d[0])||l.target},!0),pi(r,"mousedown",l=>{var u,d;o.current=((d=(u=l.composedPath)==null?void 0:u.call(l))==null?void 0:d[0])||l.target},!0),pi(r,"click",l=>{Kpe()||o.current&&(a(l,()=>o.current),o.current=null)},!0);let c=p.useRef({x:0,y:0});pi(r,"touchstart",l=>{c.current.x=l.touches[0].clientX,c.current.y=l.touches[0].clientY},!0),pi(r,"touchend",l=>{let u={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(u.x-c.current.x)>=jT||Math.abs(u.y-c.current.y)>=jT))return a(l,()=>l.target instanceof HTMLElement?l.target:null)},!0),j9(r,"blur",l=>a(l,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function ml(...e){return p.useMemo(()=>Sa(...e),[...e])}function I9(e,t,n,r){let s=Ca(n);p.useEffect(()=>{e=e??window;function a(o){s.current(o)}return e.addEventListener(t,a,r),()=>e.removeEventListener(t,a,r)},[e,t,r])}function qDe(e,t){return p.useMemo(()=>{var n;if(e.type)return e.type;let r=(n=e.as)!=null?n:"button";if(typeof r=="string"&&r.toLowerCase()==="button"||t?.tagName==="BUTTON"&&!t.hasAttribute("type"))return"button"},[e.type,e.as,t])}function Qpe(){let e;return{before({doc:t}){var n;let r=t.documentElement,s=(n=t.defaultView)!=null?n:window;e=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:t,d:n}){let r=t.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),a=Math.max(0,e-s);n.style(r,"paddingRight",`${a}px`)}}}function Zpe(){return P9()?{before({doc:e,d:t,meta:n}){function r(s){return n.containers.flatMap(a=>a()).some(a=>a.contains(s))}t.microTask(()=>{var s;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let c=Br();c.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>c.dispose()))}let a=(s=window.scrollY)!=null?s:window.pageYOffset,o=null;t.addEventListener(e,"click",c=>{if(c.target instanceof HTMLElement)try{let l=c.target.closest("a");if(!l)return;let{hash:u}=new URL(l.href),d=e.querySelector(u);d&&!r(d)&&(o=d)}catch{}},!0),t.addEventListener(e,"touchstart",c=>{if(c.target instanceof HTMLElement)if(r(c.target)){let l=c.target;for(;l.parentElement&&r(l.parentElement);)l=l.parentElement;t.style(l,"overscrollBehavior","contain")}else t.style(c.target,"touchAction","none")}),t.addEventListener(e,"touchmove",c=>{if(c.target instanceof HTMLElement){if(c.target.tagName==="INPUT")return;if(r(c.target)){let l=c.target;for(;l.parentElement&&l.dataset.headlessuiPortal!==""&&!(l.scrollHeight>l.clientHeight||l.scrollWidth>l.clientWidth);)l=l.parentElement;l.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),t.add(()=>{var c;let l=(c=window.scrollY)!=null?c:window.pageYOffset;a!==l&&window.scrollTo(0,a),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Jpe(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function ehe(e){let t={};for(let n of e)Object.assign(t,n(t));return t}let zs=k9(()=>new Map,{PUSH(e,t){var n;let r=(n=this.get(e))!=null?n:{doc:e,count:0,d:Br(),meta:new Set};return r.count++,r.meta.add(t),this.set(e,r),this},POP(e,t){let n=this.get(e);return n&&(n.count--,n.meta.delete(t)),this},SCROLL_PREVENT({doc:e,d:t,meta:n}){let r={doc:e,d:t,meta:ehe(n)},s=[Zpe(),Qpe(),Jpe()];s.forEach(({before:a})=>a?.(r)),s.forEach(({after:a})=>a?.(r))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});zs.subscribe(()=>{let e=zs.getSnapshot(),t=new Map;for(let[n]of e)t.set(n,n.documentElement.style.overflow);for(let n of e.values()){let r=t.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&zs.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&zs.dispatch("TEARDOWN",n)}});function the(e,t,n=()=>({containers:[]})){let r=M9(zs),s=t?r.get(t):void 0,a=s?s.count>0:!1;return xt(()=>{if(!(!t||!e))return zs.dispatch("PUSH",t,n),()=>zs.dispatch("POP",t,n)},[e,t]),a}function nhe(e,t,n=()=>[document.body]){let r=Qo(e,"scroll-lock");the(r,t,s=>{var a;return{containers:[...(a=s.containers)!=null?a:[],n]}})}function IT(e){return[e.screenX,e.screenY]}function YDe(){let e=p.useRef([-1,-1]);return{wasMoved(t){let n=IT(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=IT(t)}}}function rhe(e=0){let[t,n]=p.useState(e),r=p.useCallback(l=>n(l),[t]),s=p.useCallback(l=>n(u=>u|l),[t]),a=p.useCallback(l=>(t&l)===l,[t]),o=p.useCallback(l=>n(u=>u&~l),[n]),c=p.useCallback(l=>n(u=>u^l),[n]);return{flags:t,setFlag:r,addFlag:s,hasFlag:a,removeFlag:o,toggleFlag:c}}var she={},NT,OT;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((NT=process==null?void 0:she)==null?void 0:NT.NODE_ENV)==="test"&&typeof((OT=Element?.prototype)==null?void 0:OT.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var ahe=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(ahe||{});function ohe(e){let t={};for(let n in e)e[n]===!0&&(t[`data-${n}`]="");return t}function ihe(e,t,n,r){let[s,a]=p.useState(n),{hasFlag:o,addFlag:c,removeFlag:l}=rhe(e&&s?3:0),u=p.useRef(!1),d=p.useRef(!1),f=vm();return xt(()=>{var m;if(e){if(n&&a(!0),!t){n&&c(3);return}return(m=r?.start)==null||m.call(r,n),che(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(n?(c(3),l(4)):(c(4),l(2)))},run(){d.current?n?(l(3),c(4)):(l(4),c(3)):n?l(1):c(1)},done(){var h;d.current&&typeof t.getAnimations=="function"&&t.getAnimations().length>0||(u.current=!1,l(7),n||a(!1),(h=r?.end)==null||h.call(r,n))}})}},[e,n,t,f]),e?[s,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function che(e,{prepare:t,run:n,done:r,inFlight:s}){let a=Br();return uhe(e,{prepare:t,inFlight:s}),a.nextFrame(()=>{n(),a.requestAnimationFrame(()=>{a.add(lhe(e,r))})}),a.dispose}function lhe(e,t){var n,r;let s=Br();if(!e)return s.dispose;let a=!1;s.add(()=>{a=!0});let o=(r=(n=e.getAnimations)==null?void 0:n.call(e).filter(c=>c instanceof CSSTransition))!=null?r:[];return o.length===0?(t(),s.dispose):(Promise.allSettled(o.map(c=>c.finished)).then(()=>{a||t()}),s.dispose)}function uhe(e,{inFlight:t,prepare:n}){if(t!=null&&t.current){n();return}let r=e.style.transition;e.style.transition="none",n(),e.offsetHeight,e.style.transition=r}function KDe(e,{container:t,accept:n,walk:r}){let s=p.useRef(n),a=p.useRef(r);p.useEffect(()=>{s.current=n,a.current=r},[n,r]),xt(()=>{if(!t||!e)return;let o=Sa(t);if(!o)return;let c=s.current,l=a.current,u=Object.assign(f=>c(f),{acceptNode:c}),d=o.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,u,!1);for(;d.nextNode();)l(d.currentNode)},[t,e,s,a])}function Kx(e,t){let n=p.useRef([]),r=Le(e);p.useEffect(()=>{let s=[...n.current];for(let[a,o]of t.entries())if(n.current[a]!==o){let c=r(t,s);return n.current=t,c}},[r,...t])}function XDe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}let xm=p.createContext(null);xm.displayName="OpenClosedContext";var Bn=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(Bn||{});function bm(){return p.useContext(xm)}function dhe({value:e,children:t}){return J.createElement(xm.Provider,{value:e},t)}function fhe({children:e}){return J.createElement(xm.Provider,{value:null},e)}function mhe(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Xr=[];mhe(()=>{function e(t){if(!(t.target instanceof HTMLElement)||t.target===document.body||Xr[0]===t.target)return;let n=t.target;n=n.closest(Cd),Xr.unshift(n??t.target),Xr=Xr.filter(r=>r!=null&&r.isConnected),Xr.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function phe(e){throw new Error("Unexpected object: "+e)}var hhe=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(hhe||{});function QDe(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),s=r??-1;switch(e.focus){case 0:{for(let a=0;a<n.length;++a)if(!t.resolveDisabled(n[a],a,n))return a;return r}case 1:{s===-1&&(s=n.length);for(let a=s-1;a>=0;--a)if(!t.resolveDisabled(n[a],a,n))return a;return r}case 2:{for(let a=s+1;a<n.length;++a)if(!t.resolveDisabled(n[a],a,n))return a;return r}case 3:{for(let a=n.length-1;a>=0;--a)if(!t.resolveDisabled(n[a],a,n))return a;return r}case 4:{for(let a=0;a<n.length;++a)if(t.resolveId(n[a],a,n)===e.id)return a;return r}case 5:return null;default:phe(e)}}function N9(e){let t=Le(e),n=p.useRef(!1);p.useEffect(()=>(n.current=!1,()=>{n.current=!0,gm(()=>{n.current&&t()})}),[t])}function ghe(){let e=typeof document>"u";return"useSyncExternalStore"in rw?(t=>t.useSyncExternalStore)(rw)(()=>()=>{},()=>!1,()=>!e):!1}function pl(){let e=ghe(),[t,n]=p.useState(Js.isHandoffComplete);return t&&Js.isHandoffComplete===!1&&n(!1),p.useEffect(()=>{t!==!0&&n(!0)},[t]),p.useEffect(()=>Js.handoff(),[]),e?!1:t}let O9=p.createContext(!1);function vhe(){return p.useContext(O9)}function RT(e){return J.createElement(O9.Provider,{value:e.force},e.children)}function yhe(e){let t=vhe(),n=p.useContext(D9),r=ml(e),[s,a]=p.useState(()=>{var o;if(!t&&n!==null)return(o=n.current)!=null?o:null;if(Js.isServer)return null;let c=r?.getElementById("headlessui-portal-root");if(c)return c;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return p.useEffect(()=>{s!==null&&(r!=null&&r.body.contains(s)||r==null||r.body.appendChild(s))},[s,r]),p.useEffect(()=>{t||n!==null&&a(n.current)},[n,a,t]),s}let R9=p.Fragment,xhe=en(function(e,t){let n=e,r=p.useRef(null),s=Hn(Tpe(d=>{r.current=d}),t),a=ml(r),o=yhe(r),[c]=p.useState(()=>{var d;return Js.isServer?null:(d=a?.createElement("div"))!=null?d:null}),l=p.useContext(pv),u=pl();return xt(()=>{!o||!c||o.contains(c)||(c.setAttribute("data-headlessui-portal",""),o.appendChild(c))},[o,c]),xt(()=>{if(c&&l)return l.register(c)},[l,c]),N9(()=>{var d;!o||!c||(c instanceof Node&&o.contains(c)&&o.removeChild(c),o.childNodes.length<=0&&((d=o.parentElement)==null||d.removeChild(o)))}),u?!o||!c?null:o0.createPortal(Sn({ourProps:{ref:s},theirProps:n,slot:{},defaultTag:R9,name:"Portal"}),c):null});function bhe(e,t){let n=Hn(t),{enabled:r=!0,...s}=e;return r?J.createElement(xhe,{...s,ref:n}):Sn({ourProps:{ref:n},theirProps:s,slot:{},defaultTag:R9,name:"Portal"})}let whe=p.Fragment,D9=p.createContext(null);function She(e,t){let{target:n,...r}=e,s={ref:Hn(t)};return J.createElement(D9.Provider,{value:n},Sn({ourProps:s,theirProps:r,defaultTag:whe,name:"Popover.Group"}))}let pv=p.createContext(null);function Che(){let e=p.useContext(pv),t=p.useRef([]),n=Le(a=>(t.current.push(a),e&&e.register(a),()=>r(a))),r=Le(a=>{let o=t.current.indexOf(a);o!==-1&&t.current.splice(o,1),e&&e.unregister(a)}),s=p.useMemo(()=>({register:n,unregister:r,portals:t}),[n,r,t]);return[t,p.useMemo(()=>function({children:a}){return J.createElement(pv.Provider,{value:s},a)},[s])]}let The=en(bhe),L9=en(She),khe=Object.assign(The,{Group:L9});function Mhe(e,t=typeof document<"u"?document.defaultView:null,n){let r=Qo(e,"escape");I9(t,"keydown",s=>{r&&(s.defaultPrevented||s.key===C9.Escape&&n(s))})}function Ehe(){var e;let[t]=p.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=p.useState((e=t?.matches)!=null?e:!1);return xt(()=>{if(!t)return;function s(a){r(a.matches)}return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[t]),n}function _he({defaultContainers:e=[],portals:t,mainTreeNode:n}={}){let r=ml(n),s=Le(()=>{var a,o;let c=[];for(let l of e)l!==null&&(l instanceof HTMLElement?c.push(l):"current"in l&&l.current instanceof HTMLElement&&c.push(l.current));if(t!=null&&t.current)for(let l of t.current)c.push(l);for(let l of(a=r?.querySelectorAll("html > *, body > *"))!=null?a:[])l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l.id!=="headlessui-portal-root"&&(n&&(l.contains(n)||l.contains((o=n?.getRootNode())==null?void 0:o.host))||c.some(u=>l.contains(u))||c.push(l));return c});return{resolveContainers:s,contains:Le(a=>s().some(o=>o.contains(a)))}}let $9=p.createContext(null);function DT({children:e,node:t}){let[n,r]=p.useState(null),s=F9(t??n);return J.createElement($9.Provider,{value:s},e,s===null&&J.createElement(dv,{features:Sd.Hidden,ref:a=>{var o,c;if(a){for(let l of(c=(o=Sa(a))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?c:[])if(l!==document.body&&l!==document.head&&l instanceof HTMLElement&&l!=null&&l.contains(a)){r(l);break}}}}))}function F9(e=null){var t;return(t=p.useContext($9))!=null?t:e}function Xx(){let e=p.useRef(!1);return xt(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var ki=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ki||{});function Ahe(){let e=p.useRef(0);return j9(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function B9(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let n of e.current)n.current instanceof HTMLElement&&t.add(n.current);return t}let Phe="div";var Vs=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Vs||{});function jhe(e,t){let n=p.useRef(null),r=Hn(n,t),{initialFocus:s,initialFocusFallback:a,containers:o,features:c=15,...l}=e;pl()||(c=0);let u=ml(n);Rhe(c,{ownerDocument:u});let d=Dhe(c,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:a});Lhe(c,{ownerDocument:u,container:n,containers:o,previousActiveElement:d});let f=Ahe(),m=Le(b=>{let x=n.current;x&&(w=>w())(()=>{hs(f.current,{[ki.Forwards]:()=>{ao(x,wr.First,{skipElements:[b.relatedTarget,a]})},[ki.Backwards]:()=>{ao(x,wr.Last,{skipElements:[b.relatedTarget,a]})}})})}),h=Qo(!!(c&2),"focus-trap#tab-lock"),g=vm(),v=p.useRef(!1),y={ref:r,onKeyDown(b){b.key=="Tab"&&(v.current=!0,g.requestAnimationFrame(()=>{v.current=!1}))},onBlur(b){if(!(c&4))return;let x=B9(o);n.current instanceof HTMLElement&&x.add(n.current);let w=b.relatedTarget;w instanceof HTMLElement&&w.dataset.headlessuiFocusGuard!=="true"&&(U9(x,w)||(v.current?ao(n.current,hs(f.current,{[ki.Forwards]:()=>wr.Next,[ki.Backwards]:()=>wr.Previous})|wr.WrapAround,{relativeTo:b.target}):b.target instanceof HTMLElement&&cr(b.target)))}};return J.createElement(J.Fragment,null,h&&J.createElement(dv,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:Sd.Focusable}),Sn({ourProps:y,theirProps:l,defaultTag:Phe,name:"FocusTrap"}),h&&J.createElement(dv,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:m,features:Sd.Focusable}))}let Ihe=en(jhe),Nhe=Object.assign(Ihe,{features:Vs});function Ohe(e=!0){let t=p.useRef(Xr.slice());return Kx(([n],[r])=>{r===!0&&n===!1&&gm(()=>{t.current.splice(0)}),r===!1&&n===!0&&(t.current=Xr.slice())},[e,Xr,t]),Le(()=>{var n;return(n=t.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Rhe(e,{ownerDocument:t}){let n=!!(e&8),r=Ohe(n);Kx(()=>{n||t?.activeElement===t?.body&&cr(r())},[n]),N9(()=>{n&&cr(r())})}function Dhe(e,{ownerDocument:t,container:n,initialFocus:r,initialFocusFallback:s}){let a=p.useRef(null),o=Qo(!!(e&1),"focus-trap#initial-focus"),c=Xx();return Kx(()=>{if(e===0)return;if(!o){s!=null&&s.current&&cr(s.current);return}let l=n.current;l&&gm(()=>{if(!c.current)return;let u=t?.activeElement;if(r!=null&&r.current){if(r?.current===u){a.current=u;return}}else if(l.contains(u)){a.current=u;return}if(r!=null&&r.current)cr(r.current);else{if(e&16){if(ao(l,wr.First|wr.AutoFocus)!==mv.Error)return}else if(ao(l,wr.First)!==mv.Error)return;if(s!=null&&s.current&&(cr(s.current),t?.activeElement===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}a.current=t?.activeElement})},[s,o,e]),a}function Lhe(e,{ownerDocument:t,container:n,containers:r,previousActiveElement:s}){let a=Xx(),o=!!(e&4);I9(t?.defaultView,"focus",c=>{if(!o||!a.current)return;let l=B9(r);n.current instanceof HTMLElement&&l.add(n.current);let u=s.current;if(!u)return;let d=c.target;d&&d instanceof HTMLElement?U9(l,d)?(s.current=d,cr(d)):(c.preventDefault(),c.stopPropagation(),cr(u)):cr(s.current)},!0)}function U9(e,t){for(let n of e)if(n.contains(t))return!0;return!1}function V9(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||((t=e.as)!=null?t:W9)!==p.Fragment||J.Children.count(e.children)===1}let wm=p.createContext(null);wm.displayName="TransitionContext";var $he=(e=>(e.Visible="visible",e.Hidden="hidden",e))($he||{});function Fhe(){let e=p.useContext(wm);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function Bhe(){let e=p.useContext(Sm);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Sm=p.createContext(null);Sm.displayName="NestingContext";function Cm(e){return"children"in e?Cm(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function G9(e,t){let n=Ca(e),r=p.useRef([]),s=Xx(),a=vm(),o=Le((h,g=ss.Hidden)=>{let v=r.current.findIndex(({el:y})=>y===h);v!==-1&&(hs(g,{[ss.Unmount](){r.current.splice(v,1)},[ss.Hidden](){r.current[v].state="hidden"}}),a.microTask(()=>{var y;!Cm(r)&&s.current&&((y=n.current)==null||y.call(n))}))}),c=Le(h=>{let g=r.current.find(({el:v})=>v===h);return g?g.state!=="visible"&&(g.state="visible"):r.current.push({el:h,state:"visible"}),()=>o(h,ss.Unmount)}),l=p.useRef([]),u=p.useRef(Promise.resolve()),d=p.useRef({enter:[],leave:[]}),f=Le((h,g,v)=>{l.current.splice(0),t&&(t.chains.current[g]=t.chains.current[g].filter(([y])=>y!==h)),t?.chains.current[g].push([h,new Promise(y=>{l.current.push(y)})]),t?.chains.current[g].push([h,new Promise(y=>{Promise.all(d.current[g].map(([b,x])=>x)).then(()=>y())})]),g==="enter"?u.current=u.current.then(()=>t?.wait.current).then(()=>v(g)):v(g)}),m=Le((h,g,v)=>{Promise.all(d.current[g].splice(0).map(([y,b])=>b)).then(()=>{var y;(y=l.current.shift())==null||y()}).then(()=>v(g))});return p.useMemo(()=>({children:r,register:c,unregister:o,onStart:f,onStop:m,wait:u,chains:d}),[c,o,r,f,m,d,u])}let W9=p.Fragment,H9=wd.RenderStrategy;function Uhe(e,t){var n,r;let{transition:s=!0,beforeEnter:a,afterEnter:o,beforeLeave:c,afterLeave:l,enter:u,enterFrom:d,enterTo:f,entered:m,leave:h,leaveFrom:g,leaveTo:v,...y}=e,[b,x]=p.useState(null),w=p.useRef(null),C=V9(e),T=Hn(...C?[w,t,x]:t===null?[]:[t]),M=(n=y.unmount)==null||n?ss.Unmount:ss.Hidden,{show:_,appear:k,initial:I}=Fhe(),[j,F]=p.useState(_?"visible":"hidden"),U=Bhe(),{register:B,unregister:N}=U;xt(()=>B(w),[B,w]),xt(()=>{if(M===ss.Hidden&&w.current){if(_&&j!=="visible"){F("visible");return}return hs(j,{hidden:()=>N(w),visible:()=>B(w)})}},[j,w,B,N,_,M]);let $=pl();xt(()=>{if(C&&$&&j==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,j,$,C]);let H=I&&!k,Y=k&&_&&I,O=p.useRef(!1),R=G9(()=>{O.current||(F("hidden"),N(w))},U),V=Le(Se=>{O.current=!0;let se=Se?"enter":"leave";R.onStart(w,se,W=>{W==="enter"?a?.():W==="leave"&&c?.()})}),X=Le(Se=>{let se=Se?"enter":"leave";O.current=!1,R.onStop(w,se,W=>{W==="enter"?o?.():W==="leave"&&l?.()}),se==="leave"&&!Cm(R)&&(F("hidden"),N(w))});p.useEffect(()=>{C&&s||(V(_),X(_))},[_,C,s]);let re=!(!s||!C||!$||H),[,te]=ihe(re,b,_,{start:V,end:X}),ue=Ds({ref:T,className:((r=uv(y.className,Y&&u,Y&&d,te.enter&&u,te.enter&&te.closed&&d,te.enter&&!te.closed&&f,te.leave&&h,te.leave&&!te.closed&&g,te.leave&&te.closed&&v,!te.transition&&_&&m))==null?void 0:r.trim())||void 0,...ohe(te)}),he=0;return j==="visible"&&(he|=Bn.Open),j==="hidden"&&(he|=Bn.Closed),te.enter&&(he|=Bn.Opening),te.leave&&(he|=Bn.Closing),J.createElement(Sm.Provider,{value:R},J.createElement(dhe,{value:he},Sn({ourProps:ue,theirProps:y,defaultTag:W9,features:H9,visible:j==="visible",name:"Transition.Child"})))}function Vhe(e,t){let{show:n,appear:r=!1,unmount:s=!0,...a}=e,o=p.useRef(null),c=V9(e),l=Hn(...c?[o,t]:t===null?[]:[t]);pl();let u=bm();if(n===void 0&&u!==null&&(n=(u&Bn.Open)===Bn.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,f]=p.useState(n?"visible":"hidden"),m=G9(()=>{n||f("hidden")}),[h,g]=p.useState(!0),v=p.useRef([n]);xt(()=>{h!==!1&&v.current[v.current.length-1]!==n&&(v.current.push(n),g(!1))},[v,n]);let y=p.useMemo(()=>({show:n,appear:r,initial:h}),[n,r,h]);xt(()=>{n?f("visible"):!Cm(m)&&o.current!==null&&f("hidden")},[n,m]);let b={unmount:s},x=Le(()=>{var C;h&&g(!1),(C=e.beforeEnter)==null||C.call(e)}),w=Le(()=>{var C;h&&g(!1),(C=e.beforeLeave)==null||C.call(e)});return J.createElement(Sm.Provider,{value:m},J.createElement(wm.Provider,{value:y},Sn({ourProps:{...b,as:p.Fragment,children:J.createElement(z9,{ref:l,...b,...a,beforeEnter:x,beforeLeave:w})},theirProps:{},defaultTag:p.Fragment,features:H9,visible:d==="visible",name:"Transition"})))}function Ghe(e,t){let n=p.useContext(wm)!==null,r=bm()!==null;return J.createElement(J.Fragment,null,!n&&r?J.createElement(hv,{ref:t,...e}):J.createElement(z9,{ref:t,...e}))}let hv=en(Vhe),z9=en(Uhe),Qx=en(Ghe),Whe=Object.assign(hv,{Child:Qx,Root:hv});var Hhe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Hhe||{}),zhe=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(zhe||{});let qhe={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},Zx=p.createContext(null);Zx.displayName="DialogContext";function Tm(e){let t=p.useContext(Zx);if(t===null){let n=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Tm),n}return t}function Yhe(e,t){return hs(t.type,qhe,e,t)}let LT=en(function(e,t){let n=p.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:a,initialFocus:o,role:c="dialog",autoFocus:l=!0,__demoMode:u=!1,unmount:d=!1,...f}=e,m=p.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(m.current||(m.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let h=bm();s===void 0&&h!==null&&(s=(h&Bn.Open)===Bn.Open);let g=p.useRef(null),v=Hn(g,t),y=ml(g),b=s?0:1,[x,w]=p.useReducer(Yhe,{titleId:null,descriptionId:null,panelRef:p.createRef()}),C=Le(()=>a(!1)),T=Le(V=>w({type:0,id:V})),M=pl()?b===0:!1,[_,k]=Che(),I={get current(){var V;return(V=x.panelRef.current)!=null?V:g.current}},j=F9(),{resolveContainers:F}=_he({mainTreeNode:j,portals:_,defaultContainers:[I]}),U=h!==null?(h&Bn.Closing)===Bn.Closing:!1;Fpe(u||U?!1:M,{allowed:Le(()=>{var V,X;return[(X=(V=g.current)==null?void 0:V.closest("[data-headlessui-portal]"))!=null?X:null]}),disallowed:Le(()=>{var V;return[(V=j?.closest("body > *:not(#headlessui-portal-root)"))!=null?V:null]})}),Xpe(M,F,V=>{V.preventDefault(),C()}),Mhe(M,y?.defaultView,V=>{V.preventDefault(),V.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),C()}),nhe(u||U?!1:M,y,F),Bpe(M,g,C);let[B,N]=kpe(),$=p.useMemo(()=>[{dialogState:b,close:C,setTitleId:T,unmount:d},x],[b,x,C,T,d]),H=p.useMemo(()=>({open:b===0}),[b]),Y={ref:v,id:r,role:c,tabIndex:-1,"aria-modal":u?void 0:b===0?!0:void 0,"aria-labelledby":x.titleId,"aria-describedby":B,unmount:d},O=!Ehe(),R=Vs.None;return M&&!u&&(R|=Vs.RestoreFocus,R|=Vs.TabLock,l&&(R|=Vs.AutoFocus),O&&(R|=Vs.InitialFocus)),J.createElement(fhe,null,J.createElement(RT,{force:!0},J.createElement(khe,null,J.createElement(Zx.Provider,{value:$},J.createElement(L9,{target:g},J.createElement(RT,{force:!1},J.createElement(N,{slot:H},J.createElement(k,null,J.createElement(Nhe,{initialFocus:o,initialFocusFallback:g,containers:F,features:R},J.createElement(Rpe,{value:C},Sn({ourProps:Y,theirProps:f,slot:H,defaultTag:Khe,features:Xhe,visible:b===0,name:"Dialog"})))))))))))}),Khe="div",Xhe=wd.RenderStrategy|wd.Static;function Qhe(e,t){let{transition:n=!1,open:r,...s}=e,a=bm(),o=e.hasOwnProperty("open")||a!==null,c=e.hasOwnProperty("onClose");if(!o&&!c)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!c)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!a&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(r!==void 0||n)&&!s.static?J.createElement(DT,null,J.createElement(Whe,{show:r,transition:n,unmount:s.unmount},J.createElement(LT,{ref:t,...s}))):J.createElement(DT,null,J.createElement(LT,{ref:t,open:r,...s}))}let Zhe="div";function Jhe(e,t){let n=p.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...a}=e,[{dialogState:o,unmount:c},l]=Tm("Dialog.Panel"),u=Hn(t,l.panelRef),d=p.useMemo(()=>({open:o===0}),[o]),f=Le(h=>{h.stopPropagation()}),m={ref:u,id:r,onClick:f};return J.createElement(s?Qx:p.Fragment,{...s?{unmount:c}:{}},Sn({ourProps:m,theirProps:a,slot:d,defaultTag:Zhe,name:"Dialog.Panel"}))}let ege="div";function tge(e,t){let{transition:n=!1,...r}=e,[{dialogState:s,unmount:a}]=Tm("Dialog.Backdrop"),o=p.useMemo(()=>({open:s===0}),[s]),c={ref:t,"aria-hidden":!0};return J.createElement(n?Qx:p.Fragment,{...n?{unmount:a}:{}},Sn({ourProps:c,theirProps:r,slot:o,defaultTag:ege,name:"Dialog.Backdrop"}))}let nge="h2";function rge(e,t){let n=p.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=e,[{dialogState:a,setTitleId:o}]=Tm("Dialog.Title"),c=Hn(t);p.useEffect(()=>(o(r),()=>o(null)),[r,o]);let l=p.useMemo(()=>({open:a===0}),[a]);return Sn({ourProps:{ref:c,id:r},theirProps:s,slot:l,defaultTag:nge,name:"Dialog.Title"})}let sge=en(Qhe),age=en(Jhe);en(tge);let oge=en(rge),ZDe=Object.assign(sge,{Panel:age,Title:oge,Description:Ape});function JDe(e,t){let n=p.useRef({left:0,top:0});if(xt(()=>{if(!t)return;let s=t.getBoundingClientRect();s&&(n.current=s)},[e,t]),t==null||!e||t===document.activeElement)return!1;let r=t.getBoundingClientRect();return r.top!==n.current.top||r.left!==n.current.left}let $T=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function FT(e){var t,n;let r=(t=e.innerText)!=null?t:"",s=e.cloneNode(!0);if(!(s instanceof HTMLElement))return r;let a=!1;for(let c of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))c.remove(),a=!0;let o=a?(n=s.innerText)!=null?n:"":r;return $T.test(o)&&(o=o.replace($T,"")),o}function ige(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(s=>{let a=document.getElementById(s);if(a){let o=a.getAttribute("aria-label");return typeof o=="string"?o.trim():FT(a).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return FT(e).trim()}function e3e(e){let t=p.useRef(""),n=p.useRef("");return Le(()=>{let r=e.current;if(!r)return"";let s=r.innerText;if(t.current===s)return n.current;let a=ige(r).trim().toLowerCase();return t.current=s,n.current=a,a})}const cge="https://help.openai.com/en/collections/3742473-chatgpt",lge="https://help.openai.com/en/articles/9982051",uge="https://help.openai.com/en/articles/6825453-chatgpt-release-notes",dge="https://help.openai.com/en/articles/10003026-windows-app-release-notes";function fge(){return Eo?lge:cge}function mge(){return Eo?dge:uge}function t3e(){const e=L(),t=e.formatMessage(kr.adminRoleName),n=e.formatMessage(kr.ownerRoleName),r=e.formatMessage(kr.standardRoleName);return p.useMemo(()=>({[Ks.OWNER]:n,[Ks.ADMIN]:t,[Ks.STANDARD]:r}),[n,t,r])}function n3e(e){const t=L();return e?.isWorkspaceAccount()?e.isTeam()?t.formatMessage(kr.teamPlanName):e.isEdu()?t.formatMessage(kr.eduPlanName):t.formatMessage(kr.enterprisePlanName):t.formatMessage(kr.personalPlanName)}function pge(e){const t=L();return q9(t,e)}function hge(){const e=Ce(),t=L();return q9(t,e)}function q9(e,t){return t==null||t.isPersonalAccount()?e.formatMessage(kr.personalWorkspaceTitle):t.data.name??e.formatMessage(kr.defaultWorkspaceTitle)}function Y9(){return zt()?.email??null}function r3e(){const e=zt();return e?.name??e?.email??null}function K9(){return ln(({workspaces:e})=>e)}function gge(){const{data:e}=i0();return e?.accountItems.filter(t=>!t.isDeactivated())??[]}function s3e(e){return K9().find(r=>r.id===e)?.role===Ks.OWNER}function a3e(e){return K9().find(r=>r.id===e)?.role===Ks.ADMIN}const kr=z({defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},personalWorkspaceTitle:{id:"useWorkspaces.personalWorkspaceTitle",defaultMessage:"Personal account"},personalPlanName:{id:"useWorkspaces.personalPlanName",defaultMessage:"Personal"},enterprisePlanName:{id:"useWorkspaces.enterprisePlanName",defaultMessage:"Enterprise"},eduPlanName:{id:"useWorkspaces.eduPlanName",defaultMessage:"Edu"},teamPlanName:{id:"useWorkspaces.teamPlanName",defaultMessage:"Team"},adminRoleName:{id:"useWorkspaces.adminRoleName",defaultMessage:"Admin"},ownerRoleName:{id:"useWorkspaces.ownerRoleName",defaultMessage:"Owner"},standardRoleName:{id:"useWorkspacews.standardRoleName",defaultMessage:"Member"}});function wo(e,t){return t?`/g/${Xu(t)}/c/${e}`:`/c/${e}`}function o3e(){return"/gpts"}function X9(){return"/gpts/mine"}function Q9(e){return e?`/gpts/editor/${e}`:"/gpts/editor"}function i3e(e){const t=vge();return e==null?t:Q9(e)}function vge(e){return Q9(e)}function c3e(e){try{const t=new URL(e);return t.hostname=t.hostname.replace(/^(www\.|web\.|mbasic\.|mobile\.)(secure\.)?/,""),t.pathname="",[...t.searchParams.keys()].forEach(n=>t.searchParams.delete(n)),t.toString()}catch{return e}}function yge(e){if(!e)return null;try{return new URL(e).hostname}catch{return null}}function l3e(e){const t=yge(e);return t?t.replace(/^www\./,""):e}function u3e({menuItemComponent:e}){const t=Ce(),n=ze();return i.jsxs(i.Fragment,{children:[t?.canInteractWithGizmos()&&i.jsx(e,{onClick:()=>{E.logEvent(P.accountMenuClickMyGPTs),n(X9())},icon:XE,children:i.jsx(S,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),i.jsx(e,{icon:x0,onClick:()=>{$e.openModal(et.UserContext),E.logEvent(P.accountMenuClickCustomizeChatGPT)},children:i.jsx(S,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function d3e({menuItemComponent:e,routedMenuItemComponent:t}){const n=Ce(),r=ot("2756095923")?.value&&n?.isEdu()&&n?.isStandardUserOfAccount();return i.jsxs(i.Fragment,{children:[!r&&i.jsx(t,{to:"/admin",icon:V$,children:i.jsx(S,{...mh.myWorkspaceSettings})}),i.jsx(t,{to:X9(),onClick:()=>{E.logEvent(P.accountMenuClickMyGPTs)},icon:XE,children:i.jsx(S,{...mh.myGpts})}),i.jsx(e,{onClick:()=>{$e.openModal(et.UserContext),E.logEvent(P.accountMenuClickCustomizeChatGPT)},icon:x0,children:i.jsx(S,{...mh.chatPreferences})})]})}const mh=z({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});var Jx="Tabs",[xge,f3e]=ha(Jx,[ff]),Z9=ff(),[bge,eb]=xge(Jx),J9=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:a,orientation:o="horizontal",dir:c,activationMode:l="automatic",...u}=e,d=oE(c),[f,m]=wc({prop:r,onChange:s,defaultProp:a});return i.jsx(bge,{scope:n,baseId:QM(),value:f,onValueChange:m,orientation:o,dir:d,activationMode:l,children:i.jsx(Rt.div,{dir:d,"data-orientation":o,...u,ref:t})})});J9.displayName=Jx;var eO="TabsList",tO=p.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,a=eb(eO,n),o=Z9(n);return i.jsx(iE,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(Rt.div,{role:"tablist","aria-orientation":a.orientation,...s,ref:t})})});tO.displayName=eO;var nO="TabsTrigger",rO=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...a}=e,o=eb(nO,n),c=Z9(n),l=oO(o.baseId,r),u=iO(o.baseId,r),d=r===o.value;return i.jsx(cE,{asChild:!0,...c,focusable:!s,active:d,children:i.jsx(Rt.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:l,...a,ref:t,onMouseDown:st(e.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:st(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:st(e.onFocus,()=>{const f=o.activationMode!=="manual";!d&&!s&&f&&o.onValueChange(r)})})})});rO.displayName=nO;var sO="TabsContent",aO=p.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:a,...o}=e,c=eb(sO,n),l=oO(c.baseId,r),u=iO(c.baseId,r),d=r===c.value,f=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(bc,{present:s||d,children:({present:m})=>i.jsx(Rt.div,{"data-state":d?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!m,id:u,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:m&&a})})});aO.displayName=sO;function oO(e,t){return`${e}-trigger-${t}`}function iO(e,t){return`${e}-content-${t}`}var m3e=J9,p3e=tO,wge=rO,Sge=aO,tb="Switch",[Cge,h3e]=ha(tb),[Tge,kge]=Cge(tb),cO=p.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:o,disabled:c,value:l="on",onCheckedChange:u,form:d,...f}=e,[m,h]=p.useState(null),g=Lr(t,w=>h(w)),v=p.useRef(!1),y=m?d||!!m.closest("form"):!0,[b=!1,x]=wc({prop:s,defaultProp:a,onChange:u});return i.jsxs(Tge,{scope:n,checked:b,disabled:c,children:[i.jsx(Rt.button,{type:"button",role:"switch","aria-checked":b,"aria-required":o,"data-state":dO(b),"data-disabled":c?"":void 0,disabled:c,value:l,...f,ref:g,onClick:st(e.onClick,w=>{x(C=>!C),y&&(v.current=w.isPropagationStopped(),v.current||w.stopPropagation())})}),y&&i.jsx(Mge,{control:m,bubbles:!v.current,name:r,value:l,checked:b,required:o,disabled:c,form:d,style:{transform:"translateX(-100%)"}})]})});cO.displayName=tb;var lO="SwitchThumb",uO=p.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=kge(lO,n);return i.jsx(Rt.span,{"data-state":dO(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});uO.displayName=lO;var Mge=e=>{const{control:t,checked:n,bubbles:r=!0,...s}=e,a=p.useRef(null),o=KN(n),c=aE(t);return p.useEffect(()=>{const l=a.current,u=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(u,"checked").set;if(o!==n&&f){const m=new Event("click",{bubbles:r});f.call(l,n),l.dispatchEvent(m)}},[o,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:a,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function dO(e){return e?"checked":"unchecked"}var Ege=cO,_ge=uO;function fO({onChange:e,enabled:t,label:n,disabled:r,icon:s=null,size:a="normal",id:o,testId:c,backgroundColor:l="black"}){const u=p.useCallback(()=>{e?.(!t)},[t,e]);return i.jsx(Ege,{id:o,checked:t,disabled:r,onCheckedChange:u,"aria-label":n,className:A("focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-token-text-secondary focus-visible:ring-offset-2 focus-visible:radix-state-checked:ring-black focus-visible:dark:ring-token-main-surface-primary focus-visible:dark:radix-state-checked:ring-green-600",r?"cursor-not-allowed opacity-50":"cursor-pointer",l==="green"?"bg-green-600 bg-opacity-15 radix-state-checked:bg-green-600":"bg-gray-200 radix-state-checked:bg-black dark:border dark:border-token-border-medium dark:bg-transparent","relative shrink-0 rounded-full dark:radix-state-checked:border-green-600 dark:radix-state-checked:bg-green-600",a==="normal"?"h-[20px] w-[32px]":a==="large"?"h-[32px] w-[54px]":"h-[19px] w-[30px]"),"data-testid":c,children:i.jsx(_ge,{className:A("flex items-center justify-center rounded-full","transition-transform duration-100 will-change-transform ltr:translate-x-0.5 rtl:-translate-x-0.5","bg-white",a==="normal"?"h-[16px] w-[16px] ltr:radix-state-checked:translate-x-[14px] rtl:radix-state-checked:translate-x-[-14px]":a==="large"?"h-[26px] w-[26px] ltr:radix-state-checked:translate-x-[24px] rtl:radix-state-checked:translate-x-[-24px]":"h-[15px] w-[15px] ltr:radix-state-checked:translate-x-[13px] rtl:radix-state-checked:translate-x-[-13px]"),children:s})})}var Td=(e=>(e.General="General",e.DesktopApp="DesktopApp",e.BetaFeatures="BetaFeatures",e.DataControls="DataControls",e.Personalization="Personalization",e.Jawbone="Jawbone",e.BuilderProfile="BuilderProfile",e.ConnectorSettings="ConnectorSettings",e.Speech="Speech",e.Security="Security",e.Nimbus="Nimbus",e.Subscription="Subscription",e))(Td||{});function g3e({value:e,icon:t,label:n,testId:r}){const s=ks();return i.jsxs(wge,{className:A("group flex items-center justify-start gap-2 rounded-md px-2 py-1.5 text-sm text-token-text-primary radix-state-active:bg-token-main-surface-tertiary radix-state-active:text-token-text-primary md:radix-state-active:bg-token-main-surface-secondary",{"flex-1 justify-center":!s}),value:e,"data-testid":r,children:[t,i.jsx("div",{className:s?"text-left":"truncate",children:n})]})}function v3e({value:e,children:t}){return i.jsx(Sge,{className:"max-h-[calc(100vh-150px)] w-full overflow-y-auto md:min-h-[380px]",value:e,children:i.jsx("div",{className:"flex flex-col gap-3 px-4 pb-6 text-sm text-token-text-primary sm:px-6 md:ps-0 md:pt-5",children:t})})}function y3e({children:e}){return i.jsx("div",{className:"border-b border-token-border-light pb-3 last-of-type:border-b-0",children:e})}const mO=fe.div`text-xs text-token-text-secondary pr-12 mt-3`;function x3e({label:e,disabled:t,enabled:n,onChange:r,description:s,toggleTooltip:a,isLoading:o=!1,testId:c}){let l=i.jsx(fO,{disabled:t,enabled:n,onChange:r,label:e,icon:t?i.jsx(ya,{className:"icon-xs dark:text-black"}):null,size:"normal",testId:c});return a!=null&&(l=i.jsx(Ye,{label:a,side:"top",sideOffset:4,children:l})),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:e}),o?i.jsx(cn,{}):l]}),s!=null&&i.jsx(mO,{children:s})]})}function b3e({color:e="secondary",disabled:t,label:n,buttonLabel:r,onClick:s,description:a,testId:o}){const c=a?"items-start":"items-center";return i.jsxs("div",{className:A("flex",c,"justify-between"),children:[i.jsxs("div",{children:[i.jsx("div",{children:n}),a!=null&&i.jsx(mO,{children:a})]}),i.jsx(ee,{className:"shrink-0",color:e,disabled:!!t,onClick:s,"data-testid":o,children:r})]})}function w3e({onClick:e,label:t,stateLabel:n,testId:r}){return i.jsx("button",{className:"w-full",onClick:e,"data-testid":r,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{children:t}),i.jsxs("div",{className:"flex items-center text-token-text-secondary",children:[n&&i.jsx("div",{className:"-mt-0.5 me-1",children:n}),i.jsx(B3,{className:"icon-sm"})]})]})})}function Age(e){return e?.startsWith("settings")??!1}function pO(){const{hash:e}=ko(),t=ze(),n=Age(e.slice(1)),r=n?e.slice(1).split("/")[1]:void 0,s=Object.values(Td).includes(r)?r:Td.General;return{openSettings:a=>{const o=a?`settings/${a}`:"settings";t({hash:o})},closeSettings:()=>{t({hash:""})},isOpen:n,currentTab:s}}const Pge=ma({queryKey:["clientApplications"],queryFn:K.getClientApplications});function S3e(){const{data:e,isLoading:t}=me(Pge),{value:n}=at("582612297");return{clientApplications:e?.items.filter(s=>s.type==="apple"?n:!0),isLoading:t}}function C3e(){const e=Ne();return it({mutationFn:K.revokeClientApplication,onSuccess:()=>{window.location.reload()},onError:t=>{ie.addError("Failed to revoke client application",{error:t}),e.danger("Failed to disconnect. Please try again later.")}})}const Oe=z({tooManyFilesTitle:{id:"Go/YH4",defaultMessage:"Files impacting responses"},tooManyFilesDescription:{id:"mPTTw+",defaultMessage:"Responses may be lower quality due to the number of files this project is using."},newChatInProject:{id:"jRHQMo",defaultMessage:"New chat in this project"},emptyFileInstructions:{id:"si7jJz",defaultMessage:"Add documents, code files, images, and more. {gizmoNameText} can access their contents when you chat inside the project."},emptyFileGizmoName:{id:"xr5T2P",defaultMessage:"{gizmoName}"},addConversationToSnorlax:{id:"On/63l",defaultMessage:"Add to Project"},removeConversationFromSnorlax:{id:"xSI3aZ",defaultMessage:"Remove from {projectName}"},moveConversationToSnorlax:{id:"M97tb/",defaultMessage:"Move to project"},moveConversationToSnorlaxError:{id:"mA7nfR",defaultMessage:"Failed to move the conversation to the project"},unableToLoadProjectHistory:{id:"tQ7WMF",defaultMessage:"Unable to load projects"},retryLoadingProjectHistory:{id:"zefgl5",defaultMessage:"Retry loading project history"},newProjectButton:{id:"2qkMU1",defaultMessage:"New project"},newProjectHeaderButton:{id:"g/JmfL",defaultMessage:"Create new project"},setProjectName:{id:"Qhi17o",defaultMessage:"New project"},createProjectSubmit:{id:"AHBOEO",defaultMessage:"Create project"},createProjectCancel:{id:"DxU9sm",defaultMessage:"Cancel"},projectNameLabel:{id:"aBtY0G",defaultMessage:"Project name"},projectNameDescription:{id:"NQrF3x",defaultMessage:"Give your project a name"},projectNamePlaceholder:{id:"XS7JR8",defaultMessage:"E.g. Birthday Party Planning"},newChatProjectDropdownItem:{id:"MutDla",defaultMessage:"New chat in {name}"},cancel:{id:"iz2OBQ",defaultMessage:"Cancel"},save:{id:"gTdsTU",defaultMessage:"Save"},removeFile:{id:"COAUqx",defaultMessage:"Remove file"},customInstructionsTitle:{id:"K7k/ns",defaultMessage:"Add instructions"},customInstructionsDescription:{id:"mpKjkc",defaultMessage:"Tailor the way ChatGPT responds in this project"},filesCount:{id:"XKCsL9",defaultMessage:"{count} {count, plural, one {file} other {files}}"},defaultColor:{id:"1nrbk9",defaultMessage:"Default color"},editCustomInstructionsTitle:{id:"nedukh",defaultMessage:"Instructions"},editCustomInstructionsSubtitle:{id:"NgP+hF",defaultMessage:"How can ChatGPT best help you with this project?"},editCustomInstructionsDescription:{id:"PNY7g9",defaultMessage:"You can ask ChatGPT to focus on certain topics, or ask it to use a certain tone or format for responses."},addAction:{id:"vTkTuN",defaultMessage:"Add Action"},editActions:{id:"Lx3frs",defaultMessage:"Edit Actions"},addCustomInstructions:{id:"rEdrLS",defaultMessage:"Add custom instructions"},instructionsTooLong:{id:"hwBx62",defaultMessage:"Project instructions cannot be longer than {length} characters."},dragInstructions:{id:"yA3Jxu",defaultMessage:"Add anything"},dragAllAccepted:{id:"CJNN+O",defaultMessage:"Drop any file here to add it to the project"},addFilesToProject:{id:"yMVX4l",defaultMessage:"Add files"},filesThatCanBeReferenced:{id:"0mQnwH",defaultMessage:"Add documents, code files, images, and more. {projectName} can access their contents when you chat inside the project."},projectFilesModalTitle:{id:"o6Ozbv",defaultMessage:"Project files"},projectFilesUnsavedChangesTitle:{id:"BMat6e",defaultMessage:"Unsaved changes"},projectFilesUnsavedChangesDescription:{id:"imHdPy",defaultMessage:"Are you sure you want to close? Your changes may not be saved."},addFilesButtonLabel:{id:"yMVX4l",defaultMessage:"Add files"},filesControlDescription:{id:"Y/Z2lM",defaultMessage:"Chats in this project can access file content"},projectDetailsSectionLabel:{id:"9y2Kag",defaultMessage:"Details"},hideProjectDetailsTooltip:{id:"Ar0X7X",defaultMessage:"Hide project details"},showProjectDetailsTooltip:{id:"a8ust8",defaultMessage:"Show project details"},showProjectDetailsButton:{id:"ni4Lkt",defaultMessage:"Show project details"},projectsHeading:{id:"GHFgIA",defaultMessage:"Projects"},seeMoreProjectItems:{id:"znMnZ9",defaultMessage:"See more"},emptyChatsInProjectTitle:{id:"KU7dtU",defaultMessage:"Chats will show up here"},chatsInProjectTitle:{id:"jgAOuP",defaultMessage:"Chats in this project"},projectSettingsTitle:{id:"5LDjYh",defaultMessage:"Project Settings"},projectSettingsSubmitButton:{id:"TayvQF",defaultMessage:"Save"},loadingProjects:{id:"oKi2Bo",defaultMessage:"Loading projects"},seeAllChats:{id:"PwRmke",defaultMessage:"See All"},newChatTitle:{id:"RtFhWK",defaultMessage:"New chat"},unableToLoadHistory:{id:"tQ7WMF",defaultMessage:"Unable to load projects"},retryLoadingHistory:{id:"IoImQ5",defaultMessage:"Retry"},showProjectDetailsDropdown:{id:"LUjGtd",defaultMessage:"Show project details"},deleteProjectModalTitle:{id:"pPgHKT",defaultMessage:"Delete project?"},deleteProjectModalButton:{id:"ivRl2Q",defaultMessage:"Delete Project"},cancelDeleteProjectModalButton:{id:"E7RoUe",defaultMessage:"Cancel"},deleteProjectModalDescription:{id:"Vl4p9p",defaultMessage:"<bold>This will permanently delete all project files and chats.</bold> To save chats, move them to your chat list or another project before deleting."},deleteProjectDropdownButton:{id:"L/Ujfp",defaultMessage:"Delete Project"},projectInstructionsPlaceholder:{id:"w/NZvS",defaultMessage:"e.g. Respond in Spanish. Reference the latest JavaScript documentation. Keep answers short and focused."},newProjectButtonTooltip:{id:"oh2NTp",defaultMessage:"New project"},deleteProjectFailedToast:{id:"KAw2h3",defaultMessage:"Failed to delete project. Please try again."},editProjectNameDropdownButton:{id:"VcTUYI",defaultMessage:"Edit project name"},showChatsForProjectTooltip:{id:"FcBR2j",defaultMessage:"Show chats"},hideChatsForProjectTooltip:{id:"ZjBLTY",defaultMessage:"Hide chats"},projectHelperBoxTitle:{id:"QIriII",defaultMessage:"What's a project?"},projectHelperBoxDescription:{id:"QEsg2b",defaultMessage:"Projects keep chats, files, and custom instructions in one place. Use them for ongoing work, or just to keep things tidy."},projectsNuxTooltipTitle:{id:"iZuTHC",defaultMessage:"Say hello to Projects!"},projectsNuxTooltipDescription:{id:"ggE/OJ",defaultMessage:"Easily keep chats, files, and custom instructions all in one place. Perfect for organizing you work or big ideas."}}),BT=Ie()(()=>({showFlyout:!1,showProjectSettingsModal:!1})),jge={setShowFlyout:e=>{BT.setState(()=>({showFlyout:e}))},setShowProjectSettingsModal:e=>{BT.setState(()=>({showProjectSettingsModal:e}))}},Ige="ChatGPT",T3e="Untitled",k3e=10,Nge=50,Oge=300,Rge=8e3,M3e=5;function E3e(e,t){if(t==null)return e;function n(r){return typeof r=="object"&&r!=null?Array.isArray(r)?r.map(n):Object.fromEntries(Object.entries(r).map(([s,a])=>[s,n(a)])):r===null?void 0:r}return t=n(t),{...e,...t}}var Dge=(e=>(e[e.Loading=0]="Loading",e[e.UploadingProfilePic=1]="UploadingProfilePic",e[e.GeneratingProfilePic=2]="GeneratingProfilePic",e[e.GizmoNameTooLong=3]="GizmoNameTooLong",e[e.GizmoDescriptionTooLong=4]="GizmoDescriptionTooLong",e[e.GizmoInstructionsTooLong=5]="GizmoInstructionsTooLong",e[e.NameEmpty=6]="NameEmpty",e[e.MissingPublicActionPrivacyPolicyURL=7]="MissingPublicActionPrivacyPolicyURL",e[e.MissingCategory=8]="MissingCategory",e))(Dge||{});function _3e(e){switch(e){case 0:return"Loading";case 1:return"Uploading profile picture";case 2:return"Generating profile picture";case 3:return"GPT name too long";case 4:return"GPT description too long";case 5:return"GPT instructions too long";case 6:return"GPT name cannot be empty";case 7:return"Public actions require valid privacy policy URLs";case 8:return"Public GPTs must have a category"}}function Lge(e){return e==="link"||e==="marketplace"}function $ge(e){try{return new URL(e),!0}catch{return!1}}function A3e(e,t,n){const r=e.name.length>Nge,s=(e.description?.length??0)>Oge,a=(e.instructions?.length??0)>Rge,o=[];if(e?.name===""&&o.push(6),r&&o.push(3),s&&o.push(4),a&&o.push(5),t!=null&&Lge(t)){const c=e.tools?.filter(l=>l.type===c0.JIT_PLUGIN);for(const l of c){const u=l.metadata?.privacy_policy_url;if(u==null||!$ge(u)){o.push(7);break}}}return t===Vt.Marketplace&&n==null&&o.push(8),o}const Fge={id:void 0,instructions:"",name:"",description:"",emoji:void 0,theme:void 0,profilePictureId:void 0,profilePictureUrl:void 0,promptStarters:[],sharing:{recipient:Vt.Private,subjects:[]},tools:[{type:c0.DALLE}],files:[],trainingDisabled:!1,liveVersion:0,contextStuffingBudget:null};function Bge(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Uge=Bge,Vge=dE,Gge=Qv;function Wge(e,t,n,r){var s=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var c=t[a],l=r?r(n[c],e[c],c,n,e):void 0;l===void 0&&(l=e[c]),s?Gge(n,c,l):Vge(n,c,l)}return n}var km=Wge,Hge=km,zge=Yv;function qge(e,t){return e&&Hge(t,zge(t),e)}var Yge=qge,Kge=km,Xge=fE;function Qge(e,t){return e&&Kge(t,Xge(t),e)}var Zge=Qge,kd={exports:{}};kd.exports;(function(e,t){var n=$M,r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,a=s&&s.exports===r,o=a?n.Buffer:void 0,c=o?o.allocUnsafe:void 0;function l(u,d){if(d)return u.slice();var f=u.length,m=c?c(f):new u.constructor(f);return u.copy(m),m}e.exports=l})(kd,kd.exports);var Jge=kd.exports;function eve(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var tve=eve,nve=km,rve=U3;function sve(e,t){return nve(e,rve(e),t)}var ave=sve,ove=km,ive=V3;function cve(e,t){return ove(e,ive(e),t)}var lve=cve,uve=Object.prototype,dve=uve.hasOwnProperty;function fve(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&dve.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var mve=fve,UT=G3;function pve(e){var t=new e.constructor(e.byteLength);return new UT(t).set(new UT(e)),t}var nb=pve,hve=nb;function gve(e,t){var n=t?hve(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var vve=gve,yve=/\w*$/;function xve(e){var t=new e.constructor(e.source,yve.exec(e));return t.lastIndex=e.lastIndex,t}var bve=xve,VT=mE,GT=VT?VT.prototype:void 0,WT=GT?GT.valueOf:void 0;function wve(e){return WT?Object(WT.call(e)):{}}var Sve=wve,Cve=nb;function Tve(e,t){var n=t?Cve(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var kve=Tve,Mve=nb,Eve=vve,_ve=bve,Ave=Sve,Pve=kve,jve="[object Boolean]",Ive="[object Date]",Nve="[object Map]",Ove="[object Number]",Rve="[object RegExp]",Dve="[object Set]",Lve="[object String]",$ve="[object Symbol]",Fve="[object ArrayBuffer]",Bve="[object DataView]",Uve="[object Float32Array]",Vve="[object Float64Array]",Gve="[object Int8Array]",Wve="[object Int16Array]",Hve="[object Int32Array]",zve="[object Uint8Array]",qve="[object Uint8ClampedArray]",Yve="[object Uint16Array]",Kve="[object Uint32Array]";function Xve(e,t,n){var r=e.constructor;switch(t){case Fve:return Mve(e);case jve:case Ive:return new r(+e);case Bve:return Eve(e,n);case Uve:case Vve:case Gve:case Wve:case Hve:case zve:case qve:case Yve:case Kve:return Pve(e,n);case Nve:return new r;case Ove:case Lve:return new r(e);case Rve:return _ve(e);case Dve:return new r;case $ve:return Ave(e)}}var Qve=Xve,Zve=yc,HT=Object.create,Jve=function(){function e(){}return function(t){if(!Zve(t))return{};if(HT)return HT(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),e0e=Jve,t0e=e0e,n0e=pE,r0e=W3;function s0e(e){return typeof e.constructor=="function"&&!r0e(e)?t0e(n0e(e)):{}}var a0e=s0e,o0e=l0,i0e=u0,c0e="[object Map]";function l0e(e){return i0e(e)&&o0e(e)==c0e}var u0e=l0e,d0e=u0e,f0e=d0,zT=hE,qT=zT&&zT.isMap,m0e=qT?f0e(qT):d0e,p0e=m0e,h0e=l0,g0e=u0,v0e="[object Set]";function y0e(e){return g0e(e)&&h0e(e)==v0e}var x0e=y0e,b0e=x0e,w0e=d0,YT=hE,KT=YT&&YT.isSet,S0e=KT?w0e(KT):b0e,C0e=S0e,T0e=H3,k0e=Uge,M0e=dE,E0e=Yge,_0e=Zge,A0e=Jge,P0e=tve,j0e=ave,I0e=lve,N0e=q3,O0e=Y3,R0e=l0,D0e=mve,L0e=Qve,$0e=a0e,F0e=Kd,B0e=z3,U0e=p0e,V0e=yc,G0e=C0e,W0e=Yv,H0e=fE,z0e=1,q0e=2,Y0e=4,hO="[object Arguments]",K0e="[object Array]",X0e="[object Boolean]",Q0e="[object Date]",Z0e="[object Error]",gO="[object Function]",J0e="[object GeneratorFunction]",eye="[object Map]",tye="[object Number]",vO="[object Object]",nye="[object RegExp]",rye="[object Set]",sye="[object String]",aye="[object Symbol]",oye="[object WeakMap]",iye="[object ArrayBuffer]",cye="[object DataView]",lye="[object Float32Array]",uye="[object Float64Array]",dye="[object Int8Array]",fye="[object Int16Array]",mye="[object Int32Array]",pye="[object Uint8Array]",hye="[object Uint8ClampedArray]",gye="[object Uint16Array]",vye="[object Uint32Array]",We={};We[hO]=We[K0e]=We[iye]=We[cye]=We[X0e]=We[Q0e]=We[lye]=We[uye]=We[dye]=We[fye]=We[mye]=We[eye]=We[tye]=We[vO]=We[nye]=We[rye]=We[sye]=We[aye]=We[pye]=We[hye]=We[gye]=We[vye]=!0;We[Z0e]=We[gO]=We[oye]=!1;function Ru(e,t,n,r,s,a){var o,c=t&z0e,l=t&q0e,u=t&Y0e;if(n&&(o=s?n(e,r,s,a):n(e)),o!==void 0)return o;if(!V0e(e))return e;var d=F0e(e);if(d){if(o=D0e(e),!c)return P0e(e,o)}else{var f=R0e(e),m=f==gO||f==J0e;if(B0e(e))return A0e(e,c);if(f==vO||f==hO||m&&!s){if(o=l||m?{}:$0e(e),!c)return l?I0e(e,_0e(o,e)):j0e(e,E0e(o,e))}else{if(!We[f])return s?e:{};o=L0e(e,f,c)}}a||(a=new T0e);var h=a.get(e);if(h)return h;a.set(e,o),G0e(e)?e.forEach(function(y){o.add(Ru(y,t,n,y,e,a))}):U0e(e)&&e.forEach(function(y,b){o.set(b,Ru(y,t,n,b,e,a))});var g=u?l?O0e:N0e:l?H0e:W0e,v=d?void 0:g(e);return k0e(v||e,function(y,b){v&&(b=y,y=e[b]),M0e(o,b,Ru(y,t,n,b,e,a))}),o}var yye=Ru,xye=yye,bye=1,wye=4;function Sye(e){return xye(e,bye|wye)}var Cye=Sye;const Jl=xe(Cye);function Tye(e){return`https://chatgpt.com${aa(e)}`}function P3e(e,t,n,r){ul(Tye(e),t,n),r&&t.info(r,{testId:"copy-gizmo-url-toast"})}function j3e(e){return e.some(t=>t.type===c0.JIT_PLUGIN)}function kye(e){return"gizmo_id"in e?e.gizmo_id??null:null}function Mye(e){return{id:e.gizmo.id,instructions:e.gizmo.instructions,name:e.gizmo.display.name,description:e.gizmo.display.description??"",emoji:e.gizmo.display.emoji??void 0,theme:e.gizmo.display.theme??void 0,profilePictureId:e.gizmo.display.profile_pic_id??void 0,profilePictureUrl:e.gizmo.display.profile_picture_url??void 0,promptStarters:e.gizmo.display.prompt_starters??[],tools:Jl(e.tools),files:Jl(e.files),sharing:e.gizmo.sharing?Jl(e.gizmo.sharing):{subjects:[],recipient:e.gizmo.share_recipient},trainingDisabled:e.gizmo.training_disabled??!1,sharingRecipient:e.gizmo.share_recipient,sharingTargets:Jl(e.gizmo.sharing_targets),liveVersion:e.gizmo.live_version??0,contextStuffingBudget:e.gizmo.context_stuffing_budget}}class rb{static upsert(t){return ae.safePost("/gizmos/snorlax/upsert",{parameters:{},requestBody:t})}static getSnorlaxHistory(t=null){return ae.get(`${ge}/gizmos/snorlax/sidebar`,{params:{conversations_per_gizmo:"5",...t?{cursor:t}:{}}})}static delete(t){return ae.delete(`${ge}/gizmos/${t}`)}}function Mm(){const{value:e}=ot("491279851");return e}function Eye(){const{value:e}=at("1524207076");return e}function Zo(e){const t=Mm();return e?t&&Ef(e):!1}function dr(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function Ee(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function Du(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Du=function(n){return typeof n}:Du=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Du(e)}function nt(e){Ee(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Du(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function _ye(e,t){Ee(2,arguments);var n=nt(e),r=dr(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function Aye(e,t){Ee(2,arguments);var n=nt(e).getTime(),r=dr(t);return new Date(n+r)}var Pye={};function Em(){return Pye}function gv(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Md(e){Ee(1,arguments);var t=nt(e);return t.setHours(0,0,0,0),t}var jye=864e5;function sb(e,t){Ee(2,arguments);var n=Md(e),r=Md(t),s=n.getTime()-gv(n),a=r.getTime()-gv(r);return Math.round((s-a)/jye)}var ab=6e4,yO=36e5;function xO(e,t){Ee(2,arguments);var n=Md(e),r=Md(t);return n.getTime()===r.getTime()}function Lu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Lu=function(n){return typeof n}:Lu=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Lu(e)}function Iye(e){return Ee(1,arguments),e instanceof Date||Lu(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Nye(e){if(Ee(1,arguments),!Iye(e)&&typeof e!="number")return!1;var t=nt(e);return!isNaN(Number(t))}function XT(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function I3e(e,t){Ee(2,arguments);var n=nt(e),r=nt(t),s=XT(n,r),a=Math.abs(sb(n,r));n.setDate(n.getDate()-s*a);var o=+(XT(n,r)===-s),c=s*(a-o);return c===0?0:c}function bO(e,t){return Ee(2,arguments),nt(e).getTime()-nt(t).getTime()}var QT={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Oye="trunc";function Rye(e){return e?QT[e]:QT[Oye]}function wO(e,t,n){Ee(2,arguments);var r=bO(e,t)/ab;return Rye(void 0)(r)}function Dye(e){Ee(1,arguments);var t=nt(e);return t.setHours(23,59,59,999),t}function Lye(){return Dye(Date.now())}function $ye(e,t){Ee(2,arguments);var n=dr(t);return Aye(e,-n)}var Fye=864e5;function Bye(e){Ee(1,arguments);var t=nt(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/Fye)+1}function Ed(e){Ee(1,arguments);var t=1,n=nt(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function SO(e){Ee(1,arguments);var t=nt(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=Ed(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var o=Ed(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=o.getTime()?n:n-1}function Uye(e){Ee(1,arguments);var t=SO(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=Ed(n);return r}var Vye=6048e5;function Gye(e){Ee(1,arguments);var t=nt(e),n=Ed(t).getTime()-Uye(t).getTime();return Math.round(n/Vye)+1}function _d(e,t){var n,r,s,a,o,c,l,u;Ee(1,arguments);var d=Em(),f=dr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&s!==void 0?s:d.weekStartsOn)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=nt(e),h=m.getUTCDay(),g=(h<f?7:0)+h-f;return m.setUTCDate(m.getUTCDate()-g),m.setUTCHours(0,0,0,0),m}function CO(e,t){var n,r,s,a,o,c,l,u;Ee(1,arguments);var d=nt(e),f=d.getUTCFullYear(),m=Em(),h=dr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:m.firstWeekContainsDate)!==null&&r!==void 0?r:(l=m.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,h),g.setUTCHours(0,0,0,0);var v=_d(g,t),y=new Date(0);y.setUTCFullYear(f,0,h),y.setUTCHours(0,0,0,0);var b=_d(y,t);return d.getTime()>=v.getTime()?f+1:d.getTime()>=b.getTime()?f:f-1}function Wye(e,t){var n,r,s,a,o,c,l,u;Ee(1,arguments);var d=Em(),f=dr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(o=t.locale)===null||o===void 0||(c=o.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&s!==void 0?s:d.firstWeekContainsDate)!==null&&r!==void 0?r:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),m=CO(e,t),h=new Date(0);h.setUTCFullYear(m,0,f),h.setUTCHours(0,0,0,0);var g=_d(h,t);return g}var Hye=6048e5;function zye(e,t){Ee(1,arguments);var n=nt(e),r=_d(n,t).getTime()-Wye(n,t).getTime();return Math.round(r/Hye)+1}function Re(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var Gr={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return Re(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Re(r+1,2)},d:function(t,n){return Re(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Re(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Re(t.getUTCHours(),n.length)},m:function(t,n){return Re(t.getUTCMinutes(),n.length)},s:function(t,n){return Re(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,r-3));return Re(a,n.length)}},Da={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qye={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Gr.y(t,n)},Y:function(t,n,r,s){var a=CO(t,s),o=a>0?a:1-a;if(n==="YY"){var c=o%100;return Re(c,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):Re(o,n.length)},R:function(t,n){var r=SO(t);return Re(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Re(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Re(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Re(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return Gr.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Re(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var a=zye(t,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):Re(a,n.length)},I:function(t,n,r){var s=Gye(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Re(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):Gr.d(t,n)},D:function(t,n,r){var s=Bye(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Re(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var a=t.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return Re(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var a=t.getUTCDay(),o=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return Re(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return Re(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),a=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),a;switch(s===12?a=Da.noon:s===0?a=Da.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),a;switch(s>=17?a=Da.evening:s>=12?a=Da.afternoon:s>=4?a=Da.morning:a=Da.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Gr.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):Gr.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Re(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Re(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):Gr.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):Gr.s(t,n)},S:function(t,n){return Gr.S(t,n)},X:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return JT(o);case"XXXX":case"XX":return Ls(o);case"XXXXX":case"XXX":default:return Ls(o,":")}},x:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"x":return JT(o);case"xxxx":case"xx":return Ls(o);case"xxxxx":case"xxx":default:return Ls(o,":")}},O:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+ZT(o,":");case"OOOO":default:return"GMT"+Ls(o,":")}},z:function(t,n,r,s){var a=s._originalDate||t,o=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+ZT(o,":");case"zzzz":default:return"GMT"+Ls(o,":")}},t:function(t,n,r,s){var a=s._originalDate||t,o=Math.floor(a.getTime()/1e3);return Re(o,n.length)},T:function(t,n,r,s){var a=s._originalDate||t,o=a.getTime();return Re(o,n.length)}};function ZT(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(a===0)return n+String(s);var o=t;return n+String(s)+o+Re(a,2)}function JT(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Re(Math.abs(e)/60,2)}return Ls(e,t)}function Ls(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),a=Re(Math.floor(s/60),2),o=Re(s%60,2);return r+a+n+o}var ek=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},TO=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Yye=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return ek(t,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",ek(s,n)).replace("{{time}}",TO(a,n))},Kye={p:TO,P:Yye},Xye=["D","DD"],Qye=["YY","YYYY"];function Zye(e){return Xye.indexOf(e)!==-1}function Jye(e){return Qye.indexOf(e)!==-1}function tk(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var exe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},txe=function(t,n,r){var s,a=exe[t];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function ph(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var nxe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},rxe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},sxe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},axe={date:ph({formats:nxe,defaultWidth:"full"}),time:ph({formats:rxe,defaultWidth:"full"}),dateTime:ph({formats:sxe,defaultWidth:"full"})},oxe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ixe=function(t,n,r,s){return oxe[t]};function hi(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,o=n!=null&&n.width?String(n.width):a;s=e.formattingValues[o]||e.formattingValues[a]}else{var c=e.defaultWidth,l=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[l]||e.values[c]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var cxe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},lxe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},uxe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dxe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},fxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mxe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},pxe=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},hxe={ordinalNumber:pxe,era:hi({values:cxe,defaultWidth:"wide"}),quarter:hi({values:lxe,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:hi({values:uxe,defaultWidth:"wide"}),day:hi({values:dxe,defaultWidth:"wide"}),dayPeriod:hi({values:fxe,defaultWidth:"wide",formattingValues:mxe,defaultFormattingWidth:"wide"})};function gi(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var o=a[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?vxe(c,function(f){return f.test(o)}):gxe(c,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(l):l,u=n.valueCallback?n.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function gxe(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function vxe(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function yxe(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var o=e.valueCallback?e.valueCallback(a[0]):a[0];o=n.valueCallback?n.valueCallback(o):o;var c=t.slice(s.length);return{value:o,rest:c}}}var xxe=/^(\d+)(th|st|nd|rd)?/i,bxe=/\d+/i,wxe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sxe={any:[/^b/i,/^(a|c)/i]},Cxe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Txe={any:[/1/i,/2/i,/3/i,/4/i]},kxe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Mxe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Exe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_xe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Axe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Pxe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},jxe={ordinalNumber:yxe({matchPattern:xxe,parsePattern:bxe,valueCallback:function(t){return parseInt(t,10)}}),era:gi({matchPatterns:wxe,defaultMatchWidth:"wide",parsePatterns:Sxe,defaultParseWidth:"any"}),quarter:gi({matchPatterns:Cxe,defaultMatchWidth:"wide",parsePatterns:Txe,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:gi({matchPatterns:kxe,defaultMatchWidth:"wide",parsePatterns:Mxe,defaultParseWidth:"any"}),day:gi({matchPatterns:Exe,defaultMatchWidth:"wide",parsePatterns:_xe,defaultParseWidth:"any"}),dayPeriod:gi({matchPatterns:Axe,defaultMatchWidth:"any",parsePatterns:Pxe,defaultParseWidth:"any"})},Ixe={code:"en-US",formatDistance:txe,formatLong:axe,formatRelative:ixe,localize:hxe,match:jxe,options:{weekStartsOn:0,firstWeekContainsDate:1}},Nxe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Oxe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rxe=/^'([^]*?)'?$/,Dxe=/''/g,Lxe=/[a-zA-Z]/;function $xe(e,t,n){var r,s,a,o,c,l,u,d,f,m,h,g,v,y;Ee(2,arguments);var b=String(t),x=Em(),w=(r=(s=void 0)!==null&&s!==void 0?s:x.locale)!==null&&r!==void 0?r:Ixe,C=dr((a=(o=(c=(l=void 0)!==null&&l!==void 0?l:void 0)!==null&&c!==void 0?c:x.firstWeekContainsDate)!==null&&o!==void 0?o:(u=x.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var T=dr((f=(m=(h=(g=void 0)!==null&&g!==void 0?g:void 0)!==null&&h!==void 0?h:x.weekStartsOn)!==null&&m!==void 0?m:(v=x.locale)===null||v===void 0||(y=v.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&f!==void 0?f:0);if(!(T>=0&&T<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!w.localize)throw new RangeError("locale must contain localize property");if(!w.formatLong)throw new RangeError("locale must contain formatLong property");var M=nt(e);if(!Nye(M))throw new RangeError("Invalid time value");var _=gv(M),k=$ye(M,_),I={firstWeekContainsDate:C,weekStartsOn:T,locale:w,_originalDate:M},j=b.match(Oxe).map(function(F){var U=F[0];if(U==="p"||U==="P"){var B=Kye[U];return B(F,w.formatLong)}return F}).join("").match(Nxe).map(function(F){if(F==="''")return"'";var U=F[0];if(U==="'")return Fxe(F);var B=qye[U];if(B)return Jye(F)&&tk(F,t,String(e)),Zye(F)&&tk(F,t,String(e)),B(k,F,w.localize,I);if(U.match(Lxe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+U+"`");return F}).join("");return j}function Fxe(e){var t=e.match(Rxe);return t?t[1].replace(Dxe,"'"):e}function N3e(e){Ee(1,arguments);var t=dr(e);return nt(t*1e3)}function kO(e){Ee(1,arguments);var t=nt(e),n=t.getMonth();return n}function Ad(e){return Ee(1,arguments),nt(e).getFullYear()}function Bxe(e,t){Ee(2,arguments);var n=nt(e),r=nt(t);return n.getTime()>r.getTime()}function Uxe(e,t){Ee(2,arguments);var n=nt(e),r=nt(t);return n.getFullYear()===r.getFullYear()}function MO(e){return Ee(1,arguments),Uxe(e,Date.now())}function Vxe(e){return Ee(1,arguments),xO(e,Date.now())}function Gxe(e){return Ee(1,arguments),xO(e,_ye(Date.now(),1))}function O3e(e,t){var n;Ee(1,arguments);var r=dr((n=void 0)!==null&&n!==void 0?n:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=qxe(e),a;if(s.date){var o=Yxe(s.date,r);a=Kxe(o.restDateString,o.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);var c=a.getTime(),l=0,u;if(s.time&&(l=Xxe(s.time),isNaN(l)))return new Date(NaN);if(s.timezone){if(u=Qxe(s.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(c+l),f=new Date(0);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return new Date(c+l+u)}var eu={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Wxe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Hxe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,zxe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qxe(e){var t={},n=e.split(eu.dateTimeDelimiter),r;if(n.length>2)return t;if(/:/.test(n[0])?r=n[0]:(t.date=n[0],r=n[1],eu.timeZoneDelimiter.test(t.date)&&(t.date=e.split(eu.timeZoneDelimiter)[0],r=e.substr(t.date.length,e.length))),r){var s=eu.timezone.exec(r);s?(t.time=r.replace(s[1],""),t.timezone=s[1]):t.time=r}return t}function Yxe(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:NaN,restDateString:""};var s=r[1]?parseInt(r[1]):null,a=r[2]?parseInt(r[2]):null;return{year:a===null?s:a*100,restDateString:e.slice((r[1]||r[2]).length)}}function Kxe(e,t){if(t===null)return new Date(NaN);var n=e.match(Wxe);if(!n)return new Date(NaN);var r=!!n[4],s=vi(n[1]),a=vi(n[2])-1,o=vi(n[3]),c=vi(n[4]),l=vi(n[5])-1;if(r)return nbe(t,c,l)?Zxe(t,c,l):new Date(NaN);var u=new Date(0);return!ebe(t,a,o)||!tbe(t,s)?new Date(NaN):(u.setUTCFullYear(t,a,Math.max(s,o)),u)}function vi(e){return e?parseInt(e):1}function Xxe(e){var t=e.match(Hxe);if(!t)return NaN;var n=hh(t[1]),r=hh(t[2]),s=hh(t[3]);return rbe(n,r,s)?n*yO+r*ab+s*1e3:NaN}function hh(e){return e&&parseFloat(e.replace(",","."))||0}function Qxe(e){if(e==="Z")return 0;var t=e.match(zxe);if(!t)return 0;var n=t[1]==="+"?-1:1,r=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return sbe(r,s)?n*(r*yO+s*ab):NaN}function Zxe(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=(t-1)*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var Jxe=[31,null,31,30,31,30,31,31,30,31,30,31];function EO(e){return e%400===0||e%4===0&&e%100!==0}function ebe(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(Jxe[t]||(EO(e)?29:28))}function tbe(e,t){return t>=1&&t<=(EO(e)?366:365)}function nbe(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}function rbe(e,t,n){return e===24?t===0&&n===0:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}function sbe(e,t){return t>=0&&t<=59}const abe=28,_O="conversationHistory";function ob(e={}){const{buckets:t,recentConversationLimit:n}=e,s=mr()?.includes(K3)??!1,a=Ce(),o=!s&&!!a?.data,c=L(),{data:l,fetchNextPage:u,hasNextPage:d,isLoading:f,isFetchingNextPage:m,isError:h,refetch:g}=Qd({queryKey:[_O],queryFn:async({pageParam:x})=>{const w=await K.getConversations({offset:x,limit:abe});return q7(w.items),w},initialPageParam:0,getNextPageParam:x=>{const w=x.offset+x.limit;return w<x.total?w:void 0},enabled:o}),v=p.useMemo(()=>{const x=l?.pages.flatMap(w=>w.items)??[];if(e.hideSnorlaxConversations){const w=C=>{const T=C.gizmo_id;return T?!Ef(T):!0};return x.filter(w)}return x},[l,e]),y=p.useMemo(()=>{if(!l||!t)return[];const x=obe(v,c);return[x.recent,x.dynamicMonths,x.dynamicYears].flatMap(C=>Object.entries(C).map(([T,{items:M,label:_}],k)=>({key:`${T}-${k}`,label:_,items:M}))).filter(C=>C.items.length>0)},[v,l,c,t]),b=p.useMemo(()=>{const x=v.slice(0,n??5);return{key:"recents",label:c.formatMessage(Mi.historyBucketRecent),items:x}},[v,n,c]);return{buckets:y,conversations:v,data:l,fetchNextPage:u,hasNextPage:d,refetch:g,recents:b,isLoading:f,isFetchingNextPage:m,isError:h}}function obe(e,t){return e.reduce((n,r)=>{const s=new Date(r.update_time??r.create_time??0),a=sb(new Date,s);if(a===0)n.recent.today.items.push(r);else if(a<=1)n.recent.yesterday.items.push(r);else if(a<=7)n.recent.lastSeven.items.push(r);else if(a<=30)n.recent.lastThirty.items.push(r);else if(MO(s)){const o=Ad(s),c=kO(s),l=`${o}-${c}`;n.dynamicMonths[l]?n.dynamicMonths[l].items.push(r):n.dynamicMonths[l]={label:t.formatDate(s,{month:"long"}),items:[r]}}else{const c=`${Ad(s)}-`;n.dynamicYears[c]?n.dynamicYears[c].items.push(r):n.dynamicYears[c]={label:t.formatDate(s,{year:"numeric"}),items:[r]}}return n},{recent:{today:{label:t.formatMessage(Mi.historyBucketToday),items:[]},yesterday:{label:t.formatMessage(Mi.historyBucketYesterday),items:[]},lastSeven:{label:t.formatMessage(Mi.historyBucketLastSeven),items:[]},lastThirty:{label:t.formatMessage(Mi.historyBucketLastThirty),items:[]}},dynamicMonths:{},dynamicYears:{}})}function gs(e){e.invalidateQueries({queryKey:[_O]}),e.invalidateQueries({queryKey:["gizmoConversations"]})}const Mi=z({historyBucketRecent:{id:"history.bucket.recent",defaultMessage:"Recent"},historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"}}),AO="snorlax-history",oo="NEW_SNORLAX_KEY";function ibe(){const e=ke();return it({mutationFn:async({update:t,id:n})=>{if(!n)throw new Error("No gizmo ID found for upsert");let r;if(n===oo)r=Fge;else{let x=e.getQueryData(ur(e,n,!1).queryKey);if(x||(x=await tt.getGizmo(n,!1)),!x)throw new Error("No existing gizmo resource found for upsert");r=Mye(x)}const s=typeof t=="function"?t(r):{...r,...t};if(gE(s,r))return{id:n};const{id:a,instructions:o,name:c,description:l,emoji:u,theme:d,profilePictureId:f,profilePictureUrl:m,promptStarters:h,files:g,trainingDisabled:v}=s;if(a!==n&&n!==oo)throw new Error("Error updating project. ID mismatch");const y={gizmo_id:n!==oo?n:void 0,instructions:o,display:{name:c,description:l,emoji:u,theme:d,profile_pic_id:f,profile_picture_url:m,prompt_starters:h},tools:[],files:g.map(x=>({...x,location:Y0.FILE_SERVICE})),training_disabled:v,sharing:[{type:Vt.Private,capabilities:eA}],categories:void 0},b=await rb.upsert(y);if(b.error)throw new tA;return{id:b.resource?.gizmo.id,resource:b.resource}},scope:{id:"snorlax"},onSettled:t=>{ib(e),t?.resource&&e.setQueryData(ur(e,t.resource.gizmo.id,!1).queryKey,t.resource)}})}function cbe(e=null){const t=Mm(),{data:n,fetchNextPage:r,hasNextPage:s,isLoading:a,isFetchingNextPage:o,isError:c,refetch:l}=Qd({queryKey:[AO],queryFn:async({pageParam:d})=>rb.getSnorlaxHistory(d),initialPageParam:e,getNextPageParam:d=>d.cursor??void 0,enabled:t});return{snorlaxes:p.useMemo(()=>n?.pages.flatMap(d=>d.items)??[],[n]),data:n,fetchNextPage:r,hasNextPage:s,refetch:l,isLoading:a,isFetchingNextPage:o,isError:c}}function ib(e){e.invalidateQueries({queryKey:[AO]})}function lbe(){const e=ke();return it({mutationFn:async({gizmoId:t})=>(await rb.delete(t),{gizmoId:t}),onSettled:t=>{const n=t?.gizmoId;ib(e),gs(e),n&&e.invalidateQueries({queryKey:ur(e,n,!1).queryKey})}})}const nk=new Map;function R3e(e){const t=nk.get(e);if(t)return t;const n=H0(ube,2e3,{trailing:!0});return nk.set(e,n),n}async function ube({gizmoId:e,upsertProjectMutation:t,pendingFileUpsertMutationsRef:n}){const r=[],s=o=>{const c=n.current;return c.forEach(({update:l})=>{o=l(o)}),r.push(...c),o};await t.mutateAsync({id:e,update:s}),r.forEach(({onSuccess:o})=>{o?.()});const a=r.map(({mutationId:o})=>o);n.current=n.current.filter(({mutationId:o})=>!a.includes(o))}function PO({gizmoId:e,onSuccess:t,onClose:n}){const r=L(),s=Ne(),a=lbe(),o=async()=>{try{await a.mutateAsync({gizmoId:e}),t()}catch{s.danger(r.formatMessage(Oe.deleteProjectFailedToast))}};return i.jsx(Te,{isOpen:!0,onClose:n,type:"danger",title:i.jsx(S,{...Oe.deleteProjectModalTitle}),primaryButton:i.jsx(Ke.Button,{title:r.formatMessage(Oe.deleteProjectModalButton),color:"danger",loading:a.isPending,onClick:()=>{o()}}),secondaryButton:i.jsx(Ke.Button,{title:r.formatMessage(Oe.cancelDeleteProjectModalButton),color:"secondary",onClick:n}),children:i.jsx("div",{className:"text-sm",children:i.jsx(S,{...Oe.deleteProjectModalDescription,values:{bold:c=>i.jsx("span",{className:"font-bold",children:c})}})})})}function D3e({gizmoId:e}){const t=L(),n=ze(),[r,s]=p.useState(!1);return i.jsxs(i.Fragment,{children:[i.jsxs(ga,{side:"top",contentAlign:"end",sideOffset:0,triggerButton:i.jsx(ee,{color:"ghost",icon:G$,label:t.formatMessage(Oe.showProjectDetailsDropdown),className:X3.sidebarIcon}),size:"auto",children:[i.jsxs(ne.Item,{onClick:()=>{jge.setShowProjectSettingsModal(!0)},children:[i.jsx(qE,{className:"icon-sm"}),i.jsx(S,{...Oe.editProjectNameDropdownButton})]}),i.jsxs(ne.Item,{color:"danger",onClick:()=>{s(!0)},children:[i.jsx(jc,{className:"icon-sm"}),i.jsx(S,{...Oe.deleteProjectDropdownButton})]})]}),r&&i.jsx(PO,{gizmoId:e,onSuccess:()=>{n("/")},onClose:()=>{s(!1)}})]})}function Jo(){const{layer:e}=_n("3637408529");return e.get("is_login_primary_button",!1)}const dbe=()=>{const{layer:e}=_n("1346366956");return e.get("signup_cta_copy","SIGN_UP")},Ta=e=>{switch(dbe()){case"SIGN_UP":return e;case"SIGN_UP_FOR_FREE":return tu.signUpForFreeCta;case"CREATE_ACCOUNT":return tu.createAccountCta;case"CREATE_NEW_ACCOUNT":return tu.createNewAccountCta;case"CREATE_FREE_ACCOUNT":return tu.createFreeAccountCta}},tu=z({createAccountCta:{id:"createAccountCta",defaultMessage:"Create account"},createNewAccountCta:{id:"createNewAccountCta",defaultMessage:"Create new account"},createFreeAccountCta:{id:"createFreeAccountCta",defaultMessage:"Create free account"},signUpForFreeCta:{id:"signUpForFreeCta",defaultMessage:"Sign up for free"}});function uc(e,t="/",n={}){e(t,{replace:n?.replace,state:cb()})}function cb(){return{newConversationSignal:{}}}function L3e(e){return e.state?.newConversationSignal}function fbe(e){q.logEvent("chatgpt_web_thread_tap_new_thread"),Mt.getItem(He.HasSeenNewChatModal)===!0?uc(e):(Mt.setItem(He.HasSeenNewChatModal,!0),$e.openModal(et.NoAuthNewChat))}function $3e(){return zx(et.NoAuthNewChat)?i.jsx(mbe,{onClose:()=>{$e.closeModal(et.NoAuthNewChat)}}):null}function mbe({onClose:e}){const t=Jt(),n=ze(),r=mf("1934819688"),s=r.config.get("is_redesign_enabled",!1),a=r.config.get("secondary_button_type","cancel"),o=Ta(yt.signUpButtonText),c=f=>{f.preventDefault(),t({authType:"signup",callback:m=>{q.logEvent("chatgpt_new_chat_modal_sign_up_link_clicked"),E.logSignUpButtonClicked({location:"New chat modal",provider:m})}})},l=f=>{f.preventDefault(),t({authType:"login",callback:m=>{q.logEvent("chatgpt_new_chat_modal_log_in_link_clicked"),E.logLogInButtonClicked({location:"New chat modal",provider:m})}})},u=()=>{q.logEvent("chatgpt_new_chat_modal_cancel_button_clicked"),E.logEvent(P.newChatModalCancelButtonClicked),e()},d=()=>{q.logEvent("chatgpt_new_chat_modal_new_chat_button_clicked"),E.logNewChatButtonClicked({location:"New Chat Modal New Chat Button"}),uc(n),e()};return p.useEffect(()=>{q.logEvent("chatgpt_new_chat_modal_shown"),E.logEvent(P.newChatModalShown)},[]),i.jsx(Te,{isOpen:!0,type:"success",onClose:e,noPadding:!0,size:"custom",className:"max-w-sm",children:i.jsxs("div",{className:"flex flex-col justify-center p-6",children:[i.jsxs("div",{className:"mb-2 grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[i.jsx("div",{}),i.jsx("div",{className:"text-xl font-medium",children:i.jsx(S,{id:"d+R7z5",defaultMessage:"Clear current chat?"})}),i.jsx("div",{className:"flex justify-end",children:s?i.jsx(mo,{onClick:e}):null})]}),i.jsx("p",{className:"mb-6 text-center text-token-text-secondary",children:i.jsx(S,{id:"+Olycu",defaultMessage:"To start a new chat, your current conversation will be discarded. <signup>Sign up</signup> or <login>log in</login> to save chats.",values:{signup:f=>i.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:c,children:f}),login:f=>i.jsx("a",{href:"#",className:"font-medium text-token-text-primary",onClick:l,children:f})}})}),i.jsx(ee,{className:"mb-3",color:s?"primary":"danger",size:"giant",onClick:d,children:i.jsx(S,{id:"cBGbrD",defaultMessage:"Clear chat"})}),a==="cancel"?i.jsx(ee,{size:"giant",onClick:u,color:"secondary",children:i.jsx(S,{...yt.cancelButtonText})}):null,a==="login"?i.jsx(ee,{size:"giant",onClick:()=>{t({authType:"login",callback:f=>{E.logLogInButtonClicked({location:"New chat modal",provider:f})}})},color:"ghost",children:i.jsx(S,{...yt.logInButtonText})}):null,a==="signup"?i.jsx(ee,{size:"giant",onClick:()=>{t({authType:"signup",callback:f=>{E.logSignUpButtonClicked({location:"New chat modal",provider:f})}})},color:"ghost",children:i.jsx(S,{...o})}):null]})})}function pbe({clientThreadId:e,location:t}){const n=ke(),{id:r}=No(e),s=Dc(!0),a=ze(),o=Vn(),c=ko();return p.useCallback(()=>{f0(vE(n))?fbe(a):o?a({pathname:c.pathname,search:c.search},{state:cb()}):(s({modelId:r,location:t}),q.logEvent("chatgpt_web_thread_tap_new_thread"))},[n,t,r,s,a,o,c])}const vv=Ie(()=>({focusedObject:null}));function hbe(){return vv(e=>e.focusedObject)}const F3e={setFocusedObject:e=>{vv.setState({focusedObject:e})},close(){vv.setState({focusedObject:null})}};var jO=(e=>(e.DOGFOODING="dogfooding",e.ALPHA="alpha",e))(jO||{});function gbe(e){return["gpt-4o-gdrive","gpt-4o-gdrive-1007-mclick","gpt-4o-gdrive-1124"].includes(e??"")}function IO(e){return Nle()&&gbe(e)}function vbe(e){const t=IO(e),n=ybe();return t&&!!n}function ybe(){const e=tf("1001765573");if(!e.config.get("ca_enabled",!1))return null;const n=e.config.get("feedback_format",null);return n&&Object.values(jO).includes(n)?n:null}const lb=Ie(()=>({displayingSideBySideFeedback:!1,unskippable:!1})),xbe=p.createContext({isWithinDataAnalysisToolMessage:!1});function bbe({jupyterMessage:e}){const t=Zd(),n=L();if(t)return i.jsxs("div",{className:"my-1 flex h-52 w-full max-w-xs flex-col items-center justify-center gap-2 rounded-md border-black/5 bg-gray-100 p-7 text-center text-token-text-tertiary dark:border-white/10",children:[i.jsx(W$,{className:"icon-lg"}),i.jsx(S,{...xv.imageNotSupported})]});if(e.image_payload!=null)return i.jsx("img",{className:"my-1",src:`data:image/png;base64,${e.image_payload}`,alt:n.formatMessage(xv.altText)});if(e.image_url!=null){const r=cl(e.image_url);return i.jsx(Cbe,{fileId:r})}return null}const wbe=30*1e3,NO=100,yv=1.5,Sbe=Math.log(1-wbe*(1-yv)/NO)/Math.log(yv);function Cbe({fileId:e}){const t=L(),{data:n,isLoading:r,refetch:s}=me({queryKey:["getFileDownloadLink",e],queryFn:()=>K.getFileDownloadLink(e),refetchInterval:a=>{const o=a.state.dataUpdateCount;return a.state.data?.status===Sr.Success||o>Sbe||a.state.status===Sr.Error?!1:Math.pow(yv,o)*NO}});return p.useEffect(()=>{if(n?.status===Sr.Success){const o=new URL(n.download_url,location.toString()).searchParams.get("se");o!=null&&!r&&new Date>new Date(o)&&s()}},[n,r,s]),n?.status!==Sr.Success?null:i.jsx("img",{src:n.download_url,className:"my-1 max-h-full max-w-full",alt:t.formatMessage(xv.altText)})}const xv=z({imageNotSupported:{id:"CodeExecutionOutputImage.imageNotSupported",defaultMessage:"Image output is not supported in a shared chat"},altText:{id:"CodeExecutionOutputImage.altText",defaultMessage:"Output image"}});function B3e({FormattedText:e,message:t}){const{resolvedTheme:n}=af();return i.jsx(xbe.Provider,{value:{isWithinDataAnalysisToolMessage:!0},children:i.jsx(e,{className:A("markdown prose w-full break-words dark:prose-invert",n==="dark"?"dark":"light"),children:Tbe(t)})})}function Tbe(e){function t(n,r){return`\`\`\`${r}
${n}
\`\`\``}if(e.content.content_type==="code")return t(e.content.text,"python");if(e.recipient==="python"){if(e.content.content_type!=="text")throw new Error("Unexpected content type for code message");const n=e.content.parts;if(n.length!==1||typeof n[0]!="string")throw new Error("Unexpected parts for code message");return t(n[0],"python")}throw new Error("Unexpected code message format")}function U3e({message:e}){const t=L();if(e.content.content_type!==Qt.ExecutionOutput)return null;const n=e.metadata?.aggregate_result;if(!n)return ie.addError("Corrupt code execution result message"),null;const r=n.messages.filter(Mbe),s=r.length>0,a=n.final_expression_output!=null,o=n.in_kernel_exception!=null;return i.jsxs(i.Fragment,{children:[s&&i.jsx(rk,{label:"STDOUT/STDERR",output:r.map((c,l)=>i.jsx("span",{className:c.stream_name==="stderr"?"text-red-500":"",children:c.text},`${l}`))}),a&&i.jsx(rk,{label:t.formatMessage({id:"codeInterpreterMessage.resultLabel",defaultMessage:"Result"}),output:n.final_expression_output}),o&&i.jsx(kbe,{traceback:n.in_kernel_exception.traceback.join("")})]})}function rk({label:e,output:t}){return i.jsxs("div",{className:"bg-gray-700 p-4 text-xs",children:[i.jsx("div",{className:"mb-1 text-gray-400",children:e}),i.jsx("div",{className:"prose flex flex-col-reverse text-white",children:i.jsx("pre",{className:"shrink-0",children:t})})]})}function kbe({traceback:e}){return i.jsx("div",{className:"overflow-auto border-t border-gray-500 text-white",children:i.jsx("div",{className:"border-l-4 border-red-500 p-2 text-xs",children:i.jsx("div",{className:"scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-700 flex max-h-64 flex-col-reverse",children:i.jsx("pre",{className:"shrink-0",children:e})})})})}function V3e({message:e}){if(e.content.content_type!==Qt.ExecutionOutput)return null;const t=e.metadata?.aggregate_result;return t?i.jsx(i.Fragment,{children:t.messages.filter(OO).map((n,r)=>i.jsx(bbe,{jupyterMessage:n},r))}):(ie.addError("Corrupt code execution result message"),null)}function Mbe(e){return e.message_type==="stream"}function OO(e){return e.message_type==="image"||"image_url"in e&&zue(e.image_url+"")}function G3e(){const e=zt(),t=Ce();return t&&e&&!Q3(e)&&t.isEnterprisey()}function W3e(){return rE(rf.ChartSerialization)}function H3e(e,t){const n=e==="chart"?He.HasSeenAdaInteractiveChart:He.HasSeenAdaInteractiveTable,[r,s]=p.useState(Mt.getItem(n,{userId:t})??!1),a=p.useCallback(()=>{s(!0),Mt.setItem(n,!0,{userId:t})},[n,t]);return[r,a]}function z3e(e){const[t,n]=p.useState([]),r=ta(()=>{const s=D.resolveThreadId(e),a=D.getThreadCurrentLeafId(e);return D.getTree(s).getBranchFromLeaf(a)});return p.useEffect(()=>{const s=RO(r);s.length!==t.length&&n(s)},[t.length,e,r]),t}function Ebe(e){return ta(()=>{const t=D.resolveThreadId(e),n=D.getThreadCurrentLeafId(e),s=D.getTree(t).getBranchFromLeaf(n);return RO(s).length>0})}function _be(e){const t=e.metadata?.aggregate_result?.messages.filter(OO)??[];let n=0;const r=(e.metadata?.ada_visualizations??[]).map(a=>{let o=a;return a.type=="chart"&&(o={...a,fallback_image:t[n++]}),o}),s=(e.metadata?.attachments??[]).filter(a=>gN(a.name)).map(a=>({type:"table",file_id:a.id??"",title:yN(a),file_name:a.name,context_connector_info:a.context_connector_info}));return[...r,...s]}function RO(e){return e.filter(n=>n.message?.author.role==="tool"&&n.message?.author.name==="python"||(n.message?.metadata?.attachments??[]).length>0).flatMap(n=>_be(n.message))}Ie(e=>({selectedSpreadsheet:null,setSelectedSpreadsheet:t=>e({selectedSpreadsheet:t})}));async function Abe(e,t,n){const r=await e.text(),{parse:s}=await qe(async()=>{const{parse:o}=await import("./oeujip5i1ptrxie5.js");return{parse:o}},[]),a=s(r);return{content:{columnNames:a.shift(),columnTypes:a[0].map(()=>"string"),rows:a},file_name:t,download_url:n}}function Pbe(e){const t=e[0].values.length,n=[];for(let r=0;r<t;r++){const s=e.map(a=>a.values[r]);n.push(s)}return n}function q3e(e){return me({queryKey:["ada-visualization","chart",e.file_id],queryFn:async()=>{const t=await K.getFileDownloadLink(e.file_id);if(t.status===Sr.Success){const r=await(await fetch(t.download_url)).json();return{content:{chart_type:r.type,title:r.title,labels:r.labels,datasets:r.datasets,x_label:r.x_label,y_label:r.y_label},file_name:t.file_name??"",download_url:t.download_url}}else throw new Error("Failed to download chart json from interpreter")}})}function Y3e(e){return me({queryKey:["ada-visualization","table",e.file_id],queryFn:async()=>{if(e.file_name&&Zue(e.file_name)){const t=await K.getAdaExcelFileContents(e.file_id);return{content:t.sheets.map(n=>({name:n.name,columnNames:n.columns.map(r=>r.name),columnTypes:n.columns.map(()=>"string"),rows:Pbe(n.columns)})),download_url:t.download_url,file_name:e.file_name}}else{const t=await K.getFileDownloadLink(e.file_id);if(t.status===Sr.Success){const n=await fetch(t.download_url);return Abe(n,t.file_name??"",t.download_url)}else throw new Error("Failed to download from interpreter")}}})}function jbe(e){const t=lb(),n=Ebe(e),r=bN();return n&&r&&!t.displayingSideBySideFeedback}const _m=e=>{p.useEffect(e,[])},DO={isParagenVisible:!1,isParagenSkipped:!1},Ibe=()=>{const{config:e}=mf("4274348958"),t=e.get("show_paragen_skip_button",null),n=e.get("show_paragen_descriptor_labels",null),r=e.get("default_paragen_descriptor_label",null);return{shouldShowParagenLabels:n,defaultParagenLabel:r,shouldShowSkipButton:t}},ub=Ie(ys(()=>DO)),Pd=ub.setState,Nbe={reset:()=>Pd(DO),skipParagen:()=>{Pd(e=>{e.isParagenSkipped=!0})}},K3e=()=>ub(({isParagenSkipped:e})=>e),X3e=()=>{_m(()=>(Pd(e=>{e.isParagenVisible=!0}),()=>{Pd(e=>{e.isParagenVisible=!1})}))},Obe="https://challenges.cloudflare.com/turnstile/v0/api.js",Rbe={[yu.PAID]:"0x4AAAAAAASbFNinhLLnW5f1",[yu.FREEACCOUNT]:"0x4AAAAAAACPe2BTwOIpYk6H",[yu.NOAUTH]:"0x4AAAAAAASbHVR44GU82lOI"};class jd{toString(){return JSON.stringify(this.toJSON())}}class gh extends jd{constructor(t){super(),this.message=t,this.message=t}toJSON(){return{"Turnstile-Internal-Error":this.message}}}class Dbe extends jd{constructor(t){super(),this.errorCode=t,this.errorCode=t}toJSON(){return{"Turnstile-Client-Error":this.errorCode}}}class Lbe{app=yu.NOAUTH;status="idle";turnstileInstancePromise=null;enforcementTokenPromise=null;requestStartTimeMs=0;_onCompleted;_onError;async initializeAndGatherData(t){this._getOrCreateInstance(t)}async _getOrCreateInstance(t){return!t.turnstile?.required||t.turnstile?.dx?null:(this.app!==t.persona&&(this.app=t.persona,this.turnstileInstancePromise=this._getTurnstileInstancePromise()),this.turnstileInstancePromise??new gh("Turnstile instance not initialized."))}async getEnforcementToken(t){return t.turnstile?.dx?Z3(t.turnstile.dx):this.startEnforcement(t).then(n=>(this.enforcementTokenPromise=null,n?n.toString():null))}async startEnforcement(t){return t.turnstile?.required?this.enforcementTokenPromise!==null?this.enforcementTokenPromise:this.enforcementTokenPromise=this._getEnforcementToken(t):null}async _getEnforcementToken(t,n){const r=await this._getOrCreateInstance(t);return r instanceof jd||r===null?r:new Promise((s,a)=>{this.setOnCompleted(o=>{const c=performance.now()-this.requestStartTimeMs;ie.addAction("turnstile_get_token_success",{app:this.app.toString(),durationMs:c}),s(o)}),this.setOnError(o=>{if(!n)this._getEnforcementToken(t,!0).then(s,a);else{const c=performance.now()-this.requestStartTimeMs;ie.addAction("turnstile_get_token_error",{app_release:"8fd453786418a77beb9a3ce0e16086945c05a492",error:o,app:this.app.toString(),durationMs:c}),s(new Dbe(o))}}),this.setStatus("ready"),this.requestStartTimeMs=performance.now(),r.reset(),r.execute()})}setStatus(t){this.status=t}onCompleted(t){this._onCompleted?.(t)}setOnCompleted(t){this._onCompleted=t}onError(t){this._onError?.(t)}setOnError(t){this._onError=t}onExpired(){this.enforcementTokenPromise=null}_getTurnstileInstancePromise(t){if(this.turnstileInstancePromise!==null)if(t)this.turnstileInstancePromise.then(n=>{n instanceof jd||n.remove()}),this.turnstileInstancePromise=null;else return this.turnstileInstancePromise;return this.turnstileInstancePromise=new Promise((n,r)=>{const s="onloadTurnstileCallback";Object.defineProperty(window,s,{value:()=>{if(this.status==="ready")return;this.setStatus("script_loaded");const{turnstile:u}=window;if(u===null){this.setStatus("error"),t?(ie.addAction("turnstile_instance_missing",{app_release:"8fd453786418a77beb9a3ce0e16086945c05a492",app:this.app.toString()}),n(new gh("Turnstile instance missing"))):this._getTurnstileInstancePromise(!0).then(n,r);return}u.render("#"+a,{sitekey:Rbe[this.app],execution:"execute",callback:this.onCompleted.bind(this),"error-callback":this.onError.bind(this),"expired-callback":this.onExpired.bind(this)}),n(u)}});const a="cf-turnstile",o="cf-turnstile-script";document.getElementById(a)?.remove(),document.getElementById(o)?.remove();const c=document.createElement("div");c.id=a,c.hidden=!0,document.body.appendChild(c),this.setStatus("loading");const l=document.createElement("script");l.id=o,l.src=Obe+`?onload=${s}`,l.async=!0,l.defer=!0,l.onerror=()=>{this.setStatus("error"),t?(ie.addAction("turnstile_script_load_error",{app_release:"8fd453786418a77beb9a3ce0e16086945c05a492",app:this.app.toString()}),n(new gh("Turnstile script failed to load"))):this._getTurnstileInstancePromise(!0).then(n,r)},document.body.appendChild(l)}),this.turnstileInstancePromise}}const bv=new Lbe,LO=Ie(ys(()=>({userMessageCount:Number(localStorage.getItem(He.NoAuthUserMessageCount)??0)}))),$be={incrementUserMessageCount:()=>{LO.setState(e=>{const t=e.userMessageCount+1;e.userMessageCount=t,localStorage.setItem(He.NoAuthUserMessageCount,String(t))})}};var ct=(e=>(e.Starter="starter",e.Reply="reply",e.Autocomplete="autocomplete",e))(ct||{}),Fbe=(e=>(e.Search="Search",e))(Fbe||{});const $O={data:void 0},wv=Ie()(()=>({...$O}));function Sv(e){if(e.data==null)return wv.setState(e);const t=e.data.suggestions.map(n=>({text:n,type:ct.Reply}));wv.setState({data:{messageId:e.data.messageId,suggestions:t}})}function Q3e(){return wv(e=>e.data)}const Bbe=async(e,t,n)=>{Sv({data:void 0});const r=await K.generateSuggestions(e,t,n),{suggestions:s}=r;Sv({data:{messageId:t,suggestions:s}})},FO=()=>{Sv($O)};function vh(e){return e.status,e.status==="fulfilled"?e.value:null}function Ube(e,t){return{forceParagen:e.forceParagen,forceParagenModel:e.forceParagenModel.value,forceRateLimit:e.forceRateLimit,resetRateLimits:e.resetRateLimits,disableSystemContentToggling:e.rebaseSystemMessageContent?!0:void 0,forceUseSearch:e.forceUseSearch??t?.forceUseSearch,paragenStreamType:e.paragenStreamType,paragenCotSummaryDisplay:e.paragenCotSummaryDisplay}}async function Vbe({navigateToAuth:e,completionRequestProfiler:t}){t?.logTiming("start_chat_requirements");const n=await yE();t?.logTiming("fetched_chat_requirements"),n.force_login&&e({authType:"login"});const[r,s,a]=await Promise.allSettled([qh.getEnforcementToken(n).then(o=>(t?.logTiming("fetched_arkose_token"),o)),bv.getEnforcementToken(n).then(o=>(t?.logTiming("fetched_turnstile_token"),o)),Yh.getEnforcementToken(n).then(o=>(t?.logTiming("fetched_p_token"),o))]);return{arkoseToken:vh(r),chatRequirements:n,proofToken:vh(a),turnstileToken:vh(s)}}async function Gbe(e){const{prependMessages:t,appendMessages:n,cancelActiveRequests:r,cancelRequests:s,clientThreadId:a,completionMetadata:o,currentModelId:c,debugSettings:l,defaultModelId:u,eventMetadata:d,extraStreamParams:f,focusOnNewCompletion:m=!0,isUnauthenticated:h,navigateToAuth:g,preRequestCompletion:v,promptId:y,requestCompletion:b,requestedModelId:x,turnTracker:w,profiler:C,type:T,updateTree:M,useDefaultModel:_}=e;FO(),Nbe.reset(),r&&s();const k=performance.now();let I=c;x?I=x:_&&(I=u);const{arkoseToken:j,chatRequirements:F,proofToken:U,turnstileToken:B}=await Vbe({navigateToAuth:g,completionRequestProfiler:C});v?.(a,y),await b({model:I,completionType:T,parentNodeId:y,metadata:d,focusOnNewCompletion:m,completionMetadata:o,chatReq:F,arkoseToken:j,turnstileToken:B,proofToken:U,preflightTime:performance.now()-k,extraStreamParams:Ube(l,f),prependMessages:t,appendMessages:n,updateTree:M,turnTracker:w,profiler:C}),h&&$be.incrementUserMessageCount()}const ei=Ie(()=>({messagesDevData:{},activeNodeId:void 0,ui:{focusedNodeId:void 0}})),Wbe=()=>ei.getState().ui.focusedNodeId,ti=()=>ei.getState().messagesDevData;function Z3e(e){const t=Object.keys(ti()),n=t.indexOf(e);if(n===-1)throw new Error("Key not found in object");const r=(n+1)%t.length;return t[r]}function J3e(e){const t=Object.keys(ti()),n=t.indexOf(e);if(n===-1)throw new Error("Key not found in object");const r=(n-1+t.length)%t.length;return t[r]}function eLe(e){return Object.keys(ti()).indexOf(e)}const tLe=()=>Object.keys(ti()).length;function Hbe(e,t){for(var n,r=-1,s=e.length;++r<s;){var a=t(e[r]);a!==void 0&&(n=n===void 0?a:n+a)}return n}var zbe=Hbe,qbe=zbe,Ybe=NaN;function Kbe(e,t){var n=e==null?0:e.length;return n?qbe(e,t)/n:Ybe}var Xbe=Kbe,Qbe=Xbe,Zbe=vc;function Jbe(e){return Qbe(e,Zbe)}var ewe=Jbe;const twe=xe(ewe);function nwe(e){return e.length===0?null:e.reduce((n,r)=>n+r,0)/e.length}function rwe(e){const t=e.length;if(t===0)return 0;const n=nwe(e)||0,r=e.reduce((s,a)=>s+Math.pow(a-n,2),0)/t;return Math.sqrt(r)}function sk(e,t){const n=e.slice().sort((c,l)=>c-l),r=t*(n.length-1),s=Math.floor(r),a=Math.ceil(r);if(s===a)return n[s];const o=r-s;return(1-o)*n[s]+o*n[a]}function swe(e){if(e.length===0)return null;const t=e.slice().sort((r,s)=>r-s),n=Math.floor(t.length/2);return t.length%2===0?(t[n-1]+t[n])/2:t[n]}var In=(e=>(e.FirstTokenLatency="first_token_lat",e.TotalRequestTime="total_request_time",e.TokenCount="token_count",e.StdDevTokenLatency="std_dev_token_lat",e.MeanTokenLatency="mean_token_lat",e.MedianTokenLatency="median_token_lat",e.MinTokenLatency="min_token_lat",e.MaxTokenLatency="max_token_lat",e.P95TokenLatency="p95_token_lat",e.P99TokenLatency="p99_token_lat",e))(In||{});const BO=e=>{const t=e.filter(m=>m.requestCount>1);let n=0;for(let m=0;m<e.length;m++){const h=e[m];if(n=h.requestDuration,h.content!=="")break}const r=sk(t.map(m=>m.lastTokenDuration),.95),s=sk(t.map(m=>m.lastTokenDuration),.99),a=twe(t.map(m=>m.lastTokenDuration)),o=swe(t.map(m=>m.lastTokenDuration)),c=t.filter(m=>m.lastTokenDuration!==0).reduce((m,h)=>Math.min(m,h.lastTokenDuration),1/0),l=t.reduce((m,h)=>Math.max(m,h.lastTokenDuration),-1/0),u=rwe(t.map(m=>m.lastTokenDuration)),d=e[e.length-1]?.requestDuration;return[{id:"first_token_lat",name:"First Token lat.",stat:n>0?`${n.toFixed(2)}ms`:null,value:n>0?n:null,category:"summary"},{id:"total_request_time",name:"Total request time",stat:d?`${(d/1e3).toFixed(2)}s`:null,value:d||null,category:"summary"},{id:"token_count",name:"Token count",stat:`${e.length}`,value:e.length,category:"summary"},{id:"std_dev_token_lat",name:"Std dev Token lat.",stat:`${u.toFixed(2)}`,value:u,category:"token"},{id:"mean_token_lat",name:"Mean Token lat.",stat:a?`${a.toFixed(2)}ms`:null,value:a??null,category:"aggregate"},{id:"median_token_lat",name:"Median Token lat.",stat:o?`${o.toFixed(2)}ms`:null,value:o??null,category:"token"},{id:"min_token_lat",name:"Min Token lat.",stat:`${c.toFixed(2)}ms`,value:c??null,category:"token"},{id:"max_token_lat",name:"Max Token lat.",stat:`${l.toFixed(2)}ms`,value:l??null,category:"token"},{id:"p95_token_lat",name:"p95 Token lat.",stat:r?`${r.toFixed(2)}ms`:null,value:r??null,category:"aggregate"},{id:"p99_token_lat",name:"p99 Token lat.",stat:s?`${s.toFixed(2)}ms`:null,value:s??null,category:"aggregate"}]},nLe=()=>{const e=ti(),t=Wbe();if(!e||!t)return{stats:[],targetLatencyData:[]};const r=e[t]?.data??[];return{stats:BO(r),targetLatencyData:r}},awe=(e,t,n,r)=>{ei.setState(s=>{const a={focusedNodeId:e},o={status:"active",data:[],model:t,serverRequestId:n,preflightTime:r};return{...s,activeNodeId:e,ui:a,messagesDevData:{...s.messagesDevData,[e]:o}}})},owe=(e,t,n)=>{const r=n?.search_source;ei.setState(s=>{const a=s.messagesDevData[e];return{...s,activeNodeId:e,messagesDevData:{...s.messagesDevData,[e]:{...a,data:[...a?.data??[],t],searchSource:r}}}})},Xn=(e,t)=>t.find(n=>n.id===e)?.value,iwe=e=>{const n=ti()[e],r=BO(n.data),{preflightTime:s,model:a,serverRequestId:o,searchSource:c}=n,l={model:a,serverRequestId:o,preflightTime:s,searchSource:c,countTokens:Xn(In.TokenCount,r),tsFirstToken:Xn(In.FirstTokenLatency,r),tsMaxTokenTime:Xn(In.MaxTokenLatency,r),tsMeanTokenWithoutFirst:Xn(In.MeanTokenLatency,r),tsMedianTokenWithoutFirst:Xn(In.MedianTokenLatency,r),tsMinTokenTime:Xn(In.MinTokenLatency,r),tsStdDevTokenTime:Xn(In.StdDevTokenLatency,r),tsP95TokenWithoutFirst:Xn(In.P95TokenLatency,r),tsP99TokenWithoutFirst:Xn(In.P99TokenLatency,r),tsTotalRequestTime:Xn(In.TotalRequestTime,r)};K.postLatencyTimingEvent(l)},cwe=e=>ei.setState(t=>{const n={...t.messagesDevData[e],status:"finished"};return{...t,messagesDevData:{...t.messagesDevData,[e]:n}}}),rLe=e=>ei.setState(t=>({...t,ui:{...t.ui,focusedNodeId:e}}));class lwe{completionStartTime=Date.now();completionEndTime;blurDuringCompletionTime;refocusTime;constructor(){window.addEventListener("blur",this.onWindowBlur)}logFocusAfterBlurDuringCompletionEvent=()=>{q.logEvent("chatgpt_focus_after_blur_during_completion",null,{completion_duration_ms:`${this.completionEndTime-this.completionStartTime}`,blur_time_ms:`${this.blurDuringCompletionTime-this.completionStartTime}`,refocus_time_ms:`${this.refocusTime-this.completionStartTime}`}),E.logEvent(P.focusAfterBlurDuringCompletion,{completion_duration_ms:`${this.completionEndTime-this.completionStartTime}`,blur_time_ms:`${this.blurDuringCompletionTime-this.completionStartTime}`,refocus_time_ms:`${this.refocusTime-this.completionStartTime}`})};onWindowBlur=()=>{this.blurDuringCompletionTime===void 0&&(this.blurDuringCompletionTime=Date.now(),window.addEventListener("focus",this.onWindowFocusAfterBlur))};onWindowFocusAfterBlur=()=>{this.refocusTime=Date.now(),this.completionEndTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent(),this.cleanupFocusAfterBlurListener()};cleanupFocusAfterBlurListener=()=>{window.removeEventListener("focus",this.onWindowFocusAfterBlur)};onMessageError=()=>{window.removeEventListener("blur",this.onWindowBlur)};onMessageDone=()=>{window.removeEventListener("blur",this.onWindowBlur),this.blurDuringCompletionTime!==void 0&&(this.completionEndTime=Date.now(),q.logEvent("chatgpt_blur_during_completion",null,{completion_duration_ms:`${this.completionEndTime-this.completionStartTime}`,blur_time_ms:`${this.blurDuringCompletionTime-this.completionStartTime}`}),E.logEvent(P.blurDuringCompletion,{completion_duration_ms:`${this.completionEndTime-this.completionStartTime}`,blur_time_ms:`${this.blurDuringCompletionTime-this.completionStartTime}`}),this.refocusTime!==void 0&&this.logFocusAfterBlurDuringCompletionEvent())}}class uwe{constructor(t){this.requestLatencyId=t}requestStartTime=performance.now();requestLastTokenTime=performance.now();requestCount=0;requestTimes=[];onResponse(t,n,r){const s=performance.now(),a=s-this.requestLastTokenTime,o=s-this.requestStartTime;this.requestLastTokenTime=s,this.requestCount+=1;const c={requestCount:this.requestCount,requestDuration:o,lastTokenDuration:Number(JSON.stringify(a)),messageType:n.content.content_type,content:xE(n)?Pr(n):""};this.requestTimes.push(c),t.type==="message"?owe(this.requestLatencyId,c,n.metadata):t.type==="done"&&r!=null&&(cwe(this.requestLatencyId),iwe(this.requestLatencyId))}}const dwe=1e4,UO=Ie(ys(()=>({notifications:[]}))),fwe=e=>{const t=crypto.randomUUID();UO.setState(r=>{r.notifications.push({...e,id:t})});const n=e.timeout??dwe;setTimeout(()=>{mwe(t)},n)},mwe=e=>{UO.setState(t=>{t.notifications=t.notifications.filter(n=>n.id!==e)})},sLe="https://help.openai.com/en/articles/8590148-memory-faq";function VO(e,t=!0){return["memories",{gizmoId:e,includeMemoryEntries:t}]}function pwe(e,t=!0,n=!0){return me({queryKey:VO(e,t),queryFn:async()=>{const r=await K.getMemories(e,t),s=Math.min(Math.floor(100*r.memory_num_tokens/r.memory_max_tokens),100);return{...r,memoryFullPct:s}},refetchOnMount:"always",enabled:n})}async function hwe(e,t){if(t.metadata?.client_actions===void 0||t.metadata.client_actions.length===0)return[];const r=t.metadata.client_actions.filter(a=>a.type==="browser_tool");return r.length==0?[]:(await Promise.all(r.map(a=>xwe(e,a.action,t)))).flat()}class gwe{conversationId;constructor(t){this.conversationId=t}createRequest(t){return new Promise((n,r)=>{const s=new BroadcastChannel(Math.random().toString()),a=setTimeout(()=>{r("Timeout"),s.close()},6e4);s.onmessage=c=>{n(c.data),clearTimeout(a),s.close()};const o={action:"browse",id:this.conversationId,...t,channel:s.name};window.postMessage(o,"*")})}browse(t){return this.createRequest({url:t,type:"browse"})}back(){return this.createRequest({type:"back"})}click(t){return this.createRequest({target:t,type:"click"})}scroll(t){return this.createRequest({amount:t,type:"scroll"})}quote(t,n){return this.createRequest({quote_start:t,quote_end:n,type:"quote"})}}function vwe(e){for(const t in e.urls)e.text.includes(`${t}`)||delete e.urls[t]}function nu(e,t,n){return vwe(n),{id:Dr(),author:{role:le.Tool,name:"browser"},content:{content_type:Qt.TetherBrowsingDisplay,result:n.text,summary:n.title},metadata:{_cite_metadata:{citation_format:{name:"tether_og"},metadata_list:[{type:"webpage",title:n.title,url:n.url,text:n.text}]}},recipient:"all"}}function ywe(e,t,n){return{id:Dr(),author:{role:le.Tool,name:"browser"},content:{content_type:Qt.Text,parts:[`${JSON.stringify(n)}`]},recipient:"all"}}async function xwe(e,t,n){const r=new gwe(e);try{switch(t.command){case"back":{const s=await r.back();return[nu(e,n,s)]}case"quote":{const s=await r.quote(t.quote_start,t.quote_end);return[ywe(e,n,s)]}case"scroll":{const s=await r.scroll(t.amount);return[nu(e,n,s)]}case"open_url":{const s=await r.browse(t.url);return[nu(e,n,s)]}case"click":{const s=await r.click(t.target);return[nu(e,n,s)]}default:throw new Error("Unsupported browser action type "+t)}}catch(s){return ie.addError(s),[{id:Dr(),author:{role:le.Tool,name:"browser"},content:{content_type:Qt.Text,parts:[`Error making browse call: ${s}`]},recipient:"all"}]}}function GO(e){return e==null||[Me.PrimaryAssistant,Me.GizmoInteraction].includes(e.kind)}function hl(e,t){const n=nf(e,t),{data:r}=Ss(n!=null&&"gizmo_id"in n?n.gizmo_id:void 0,n?.kind===Me.GizmoTest);if(n!=null)switch(n.kind){case Me.GizmoInteraction:case Me.GizmoMagicCreate:case Me.GizmoTest:return{gizmo:r,...n};case Me.PrimaryAssistant:return n}}function bwe(e){return e.kind===Me.GizmoInteraction||e.kind===Me.GizmoMagicCreate||e.kind===Me.GizmoTest?e.gizmo:void 0}function wwe(e){window.history.pushState({},"",e)}function Swe(e,t,n){const s=D.getTree(t).getMessageId(D.getThreadCurrentLeafId(t));K.generateTitle(t,s,n).then(({title:a})=>{D.setTitle(t,a,kc.Generated),gs(e),E.logEvent(P.renameThread,{threadId:t,content:a,model:n})})}function Cwe(e,t,n){const r=()=>{const a=wo(n);e(a)},s=Un.getGizmoId(n);s!=null?W7(t,s).then(a=>{wwe(wo(n,a))}).catch(a=>{ie.addError(a),r()}):r()}const Cv={onCreate(e,t,n,r,s){E.logEvent(P.newThread),!r&&GO(Un.getConversationMode(t))&&J3(n).then(a=>{f0(a)||(gs(n),e(t,s))})},onCreateFinished(e,t,n){if(!(n||!t)&&!q.checkGate("2562876640")){const r=Un.getThread(t)?.initialThreadData.lastModelUsed;r==null&&ie.addError("missing lastModelUsed on conversation create finished"),Swe(e,t,r)}}};function ak(e,t){e.updateNodeMetadata(t.id,{completionSampleFinishTime:Date.now()})}class Twe{constructor(t,n,r,s,a,o,c,l,u,d,f,m,h){this.queryClient=t,this.clientThreadId=n,this.targetNodeId=r,this.completionType=s,this.model=a,this.eventSource=o,this.onCreate=c,this.isCompanionWindow=l,this.callModelAgain=d,this.onCompletionFinished=f,this.isHistoryAndTrainingDisabled=h,this.currentTree=D.getTree(n),this.currentNodeId=r,this.activeBranchLastMessage=this.currentTree.getMessage(this.currentNodeId),this.isCompanionWindow=l,this.completionLatencyTracker=new uwe(u),this.turnTracker=m,this.turnTracker.onCompletionStarted(s,this.model)}currentTree;currentNodeId;firstResponse=!0;didCreateFirstCompletionInNewThread=!1;activeBranchLastMessage;messagesToUpdate={};allIncompleteStreamedMessages={};responseThreadId;isCompletionBlocked=!1;isEitherFlagged=!1;variantsInStreamInfo;activeBranchNodeId;blurDuringCompletionTracker=new lwe;completionLatencyTracker;turnTracker;debouncedUpdateCompletion=q_(()=>{this.isCompletionBlocked||D.updateTree(this.clientThreadId,t=>{Object.values(this.messagesToUpdate).forEach(n=>{t.updateNodeMessage(n.id,n)})}),this.messagesToUpdate={}},50,{leading:!0,maxWait:50});handleResponse=async t=>{if(t.type!=="done"&&this.turnTracker.onUpdateEventCount(),this.completionLatencyTracker.onResponse(t,this.activeBranchLastMessage,this.responseThreadId),this.responseThreadId===void 0&&"conversationId"in t){const n=t.conversationId;this.responseThreadId=n,bs(this.clientThreadId)&&D.getServerThreadId(this.clientThreadId)!==n&&(D.setServerIdForNewThread(this.clientThreadId,n),E.logEvent(P.attributeClientThreadToServerThread,{client_thread_id:this.clientThreadId,server_thread_id:n}))}switch(t.type){case"error":this.handleError(t);break;case"num_variants_in_stream":this.bindVariantInfoToTree(t);break;case"moderation":this.handleModeration(t);break;case"url_moderation":this.handleUrlModeration(t);break;case"message":this.handleMessage(t),this.debouncedUpdateCompletion();break;case"done":this.handleDone();break;case"gizmo_inline_review":this.handleGizmoInlineReview(t);break;case"title_generation":this.handleTitleGeneration(t);break;case"conversation_detail_metadata":this.handleConversationDetailMetadata(t);break}};handleError(t){const n=t.error,r=n?.message||"Something went wrong",s=n instanceof jt&&n.code||"",a=n instanceof jt&&n.status,o=n instanceof jt?n.detail?.can_retry:void 0;switch(this.turnTracker.handleRawError(r,a),D.updateTree(this.clientThreadId,c=>{c.updateNodeMessage(this.currentNodeId,this.activeBranchLastMessage),c.updateNodeMetadata(this.currentNodeId,{err:r,errType:"danger",errCode:s,completionSampleFinishTime:Date.now(),canRetry:o})}),s){case Ln.ContentPolicy:case Ln.ContentOrTos:case tv:case tE:break;default:r!==void 0&&q.logEvent("chatgpt_conversation_error_web",r)}if(this.blurDuringCompletionTracker.onMessageError(),this.cleanUp(),this.onCompletionFinished(this.responseThreadId),n instanceof jt&&n.code===tv){const c=n.detail?.clears_in;c&&(Mue(new Date(Date.now()+c*1e3).toISOString()),setTimeout(()=>{fN()},c*1e3))}}handleGizmoInlineReview(t){D.setPromptGptRating(this.clientThreadId,t.gizmoId)}handleTitleGeneration(t){D.setTitle(this.clientThreadId,t.title,kc.Generated)}handleConversationDetailMetadata(t){const{default_model_slug:n}=t;n&&D.setThreadModelId(this.clientThreadId,n),Kh.updateDetails(t)}bindVariantInfoToTree(t){this.variantsInStreamInfo=t,D.updateTree(this.clientThreadId,n=>{const r=n.getParentPromptNode(this.currentNodeId);n.updateNodeMetadata(r.id,{variantsInStreamInfo:this.variantsInStreamInfo})})}handleModeration(t){const{isCompletion:n,messageId:r,conversationId:s,flagged:a,blocked:o,disclaimers:c,metadata:l}=t,u=!!c?.length&&n;(a||o||u)&&(this.isEitherFlagged=!0,o&&n&&(this.isCompletionBlocked=!0),D.updateTree(this.clientThreadId,d=>{const f=d.messageIdToNodeId(r);o&&d.clearNodeMessageParts(f),d.updateNodeMetadata(f,{...(u&&!!c?.length&&eL(c,o))??{},...a&&tL,...o&&(l?.model_incompatibility?nL:rL),completionSampleFinishTime:Date.now()})}),E.logEvent(n?o?P.completionBlockedByModeration:P.completionFlaggedByModeration:o?P.promptBlockedByModeration:P.promptFlaggedByModeration,{threadId:s,id:r}))}handleUrlModeration(t){const{conversationId:n,url:r,isSafe:s}=t;s&&D.addThreadSafeUrl(n,r)}handleMessage(t){let n=!0;const{message:r,conversationId:s}=t;if(this.turnTracker.onMessageUpdate(r.metadata?.model_slug,r.metadata?.gizmo_id,r.author.name,r.author.role),this.firstResponse&&!this.currentTree.hasReceivedServerCompletion){if(this.currentTree.hasNodeOrMessageId(r.id))return r?.author.role!==le.User?void 0:D.updateTree(this.clientThreadId,a=>{a.updateNodeMessage(r.id,r)});if(r.author.role===le.User&&r.content.content_type===Qt.UserEditableContext)return;if((r?.author.role===le.System||r?.author.role===le.Developer)&&(r.metadata?.parent_id?this.currentTree.getNodeByIdOrMessageId(r.metadata.parent_id):void 0)?.message.author.role!==le.User){this.currentTree.appendSystemMessageToRoot(r);return}}if(this.firstResponse&&r.metadata?.rebase_system_message){D.updateTree(this.clientThreadId,a=>{if(r.metadata?.parent_id==null)throw Error("Unexpected rebased system message without parent");const o=a.getNodeByIdOrMessageId(this.targetNodeId);a.deleteNode(this.targetNodeId),a.addNode(r.id,r,r.metadata.parent_id,r.author.role),a.addNode(o.id,o.message,r.id,o.message.author.role)});return}if(this.firstResponse){const a=ta.getState().threads[this.clientThreadId]?.continuingFromSharedConversationId!=null;D.removeContinuingFromSharedConversationId(this.clientThreadId),this.firstResponse=!1,this.didCreateFirstCompletionInNewThread=!this.currentTree.hasReceivedServerCompletion||a,D.updateTree(this.clientThreadId,c=>{c.updateNodeMessage(this.currentNodeId,r)}),this.didCreateFirstCompletionInNewThread&&Cv.onCreate(this.onCreate,s,this.queryClient,this.isHistoryAndTrainingDisabled,this.isCompanionWindow);const o={id:this.targetNodeId,threadId:s,completionType:this.completionType,eventSource:this.eventSource,model:this.model};if(this.completionType===os.Next){const c=ta.getState().threads[s],l=c?.conversationTurns?.length,u=c?.conversationTurns?.filter(f=>f.role==le.User),d=u&&u[u.length-1]?.messages[0].message;if(d?.content.content_type==Qt.Text){const f=d.content.parts.join("").length,m=u?.length??0;o.countConversationTurns=l,o.countUserSubmittedMessages=m,o.countLastUserPromptTextMessageLength=f}}E.logEvent(P.generateCompletion,o)}else if(this.completionType!==os.Continue){const a=this.currentTree.containsNodeOrMessageId(r.id),o=r.metadata?.parent_id;if(a||(this.debouncedUpdateCompletion.flush(),D.updateTree(this.clientThreadId,c=>{if(o==null)throw new Error(`Received a message with no parentId: ${JSON.stringify(r)}`);c.addNode(r.id,r,o,le.Assistant)})),o!=null&&o===this.activeBranchNodeId){const c=this.allIncompleteStreamedMessages[o];c!=null&&(D.updateTree(this.clientThreadId,l=>{ak(l,c)}),delete this.allIncompleteStreamedMessages[o])}if(n=(this.variantsInStreamInfo?.num_variants_in_stream??1)===1||this.activeBranchNodeId==null||this.activeBranchNodeId===r.id||this.currentTree.isAncestorOfNode(this.activeBranchNodeId,r.id),n&&this.activeBranchNodeId!==r.id){this.activeBranchNodeId=r.id,this.currentNodeId=r.id;const c=D.getThreadCurrentLeafId(this.clientThreadId);this.currentTree.messageIdToNodeId(this.currentNodeId)!==this.currentTree.messageIdToNodeId(c)&&D.setThreadCurrentLeafId(this.clientThreadId,this.currentNodeId),o!=null&&D.updateTree(this.clientThreadId,l=>{const u=l.getParentPromptNode(r.id);l.updateNodeMetadata(u.id,{variantsInStreamInfo:this.variantsInStreamInfo})})}}if(r?.author.role===le.Tool&&r?.author.name==="bio"){const a=r.metadata?.gizmo_id;setTimeout(()=>{this.queryClient.invalidateQueries({queryKey:VO(a)})},5e3)}n&&(this.activeBranchLastMessage=r),this.messagesToUpdate[r.id]=r,this.allIncompleteStreamedMessages[r.id]=r}async handleDone(){if(this.turnTracker.model_message_update_count>0?this.turnTracker.logCompletion({type:Zr.Success}):this.turnTracker.logCompletion({type:Zr.Error,error:{reason:"empty_response",message:"Successful completion ended with no messages"}}),this.isCompletionBlocked||(this.debouncedUpdateCompletion.flush(),this.isEitherFlagged||(this.didCreateFirstCompletionInNewThread&&Cv.onCreateFinished(this.queryClient,this.responseThreadId,this.isHistoryAndTrainingDisabled),this.onCompletionFinished(this.responseThreadId))),D.updateTree(this.clientThreadId,t=>{Object.values(this.allIncompleteStreamedMessages).forEach(n=>{ak(t,n)})}),Mc.publish({kind:"createConversation",clientThreadId:this.clientThreadId}),this.blurDuringCompletionTracker.onMessageDone(),this.cleanUp(),this.activeBranchLastMessage?.metadata?.client_actions!==void 0){const t=await hwe(this.clientThreadId,this.activeBranchLastMessage);t.length>0&&this.callModelAgain(this.currentNodeId,t)}}cleanUp(){setTimeout(()=>{Xi(this.clientThreadId,{source:Jr.CLIENT,value:Nn.UNREAD});const t=D.getTitle(this.clientThreadId),n=D.getLastMessageContent(this.clientThreadId),r=n?.content_type===Qt.Text?n.parts[0]:void 0;fwe({title:t,subtitle:r,clientThreadId:this.clientThreadId}),na.removeRequest(this.targetNodeId),D.releaseThread(this.clientThreadId)},0)}}const Id=new Set,aLe=e=>{p.useEffect(()=>(Id.add(e),()=>{Id.delete(e)}),[e])},kwe=()=>Id.size>0,Mwe=()=>Promise.allSettled(Array.from(Id).map(e=>e())),Ja=e=>{if(e.type===ct.Starter&&e.category==="onboarding")return"";switch(e.type){case ct.Reply:return e.text;case ct.Starter:case ct.Autocomplete:return e.prompt}},Ewe=e=>e.type===ct.Reply,WO=e=>e.type===ct.Starter,db=e=>e.type===ct.Autocomplete,$u=e=>db(e)&&!!e.theme,_we=(e,t,n,r)=>{switch(q.logEvent("chatgpt_prompt_use_suggestion",db(e)&&!$u(e)?"":Ja(e),{id:WO(e)||$u(e)?e.id??"":"",index:`${t}`,type:e.type}),e.type){case ct.Reply:E.logEvent(P.useSuggestedReply,{value:Ja(e),prompt_type:ct.Reply,messageId:r});break;case ct.Starter:E.logEvent(P.useStarterPrompt,{value:Ja(e),prompt_type:ct.Starter,title:e.title,body:e.body,id:e.id,category:e.category,client_thread_id:n,messageId:r,index:t,theme:e.theme});break;case ct.Autocomplete:{const s=$u(e);E.logEvent(P.useAutocomplete,{value:s?Ja(e):"",prompt_type:ct.Autocomplete,title:s?e.title:"",body:s?e.body:"",id:s?e.id:"",category:e.category,index:t,messageId:r,client_thread_id:n,theme:e.theme??""});break}}},oLe=(e,t)=>{const n=D.getThreadCurrentLeafId(t),r=D.getTree(t).getMessageId(n);if(q.logEvent("chatgpt_prompt_show_suggestions",`count_${e.length}`,{type:e[0].type}),e.every(Ewe))E.logEvent(P.showSuggestedReplies,{prompt_count:e.length,prompt_type:ct.Reply,client_thread_id:t,suggestions:e.map(s=>s.text),message_id:r});else if(e.every(WO)){const{isAdditional:s}=e[0];E.logEvent(s?P.moreStarterPromptsShown:P.showStarterPrompts,{prompt_count:e.length,prompt_type:ct.Starter,titles:e.map(a=>a.title),bodies:e.map(a=>a.body),ids:e.map(a=>a.id),client_thread_id:t,message_id:r,themes:e.map(a=>a.theme??"")}),s&&E.logEvent(P.expandMoreStarterPrompts,{client_thread_id:t,message_id:r})}else if(e.every(db)){const s=!!e.find(a=>$u(a));E.logEvent(P.showAutocompletePrompts,{prompt_count:e.length,prompt_type:ct.Autocomplete,titles:e.map(a=>s?a.title:""),bodies:e.map(a=>s?a.body:""),ids:e.map(a=>s?a.id:""),client_thread_id:t,message_id:r,themes:e.map(a=>a.theme??"")})}else ie.addError("Unhandled suggestion type",{type:e[0].type})},iLe=e=>{const t=D.getThreadCurrentLeafId(e),n=D.getTree(e).getMessageId(t);E.logEvent(P.showExpandMoreStarterPromptsButton,{client_thread_id:e,message_id:n})},cLe=e=>{const t=D.getThreadCurrentLeafId(e),n=D.getTree(e).getMessageId(t);E.logEvent(P.expandMoreStarterPrompts,{client_thread_id:e,message_id:n})};async function Awe(e,t){const n=e.getReader();let r;for(;!(r=await n.read()).done;)t(r.value)}function Pwe(e){let t,n,r,s=!1;return function(o){t===void 0?(t=o,n=0,r=-1):t=Iwe(t,o);const c=t.length;let l=0;for(;n<c;){s&&(t[n]===10&&(l=++n),s=!1);let u=-1;for(;n<c&&u===-1;++n)switch(t[n]){case 58:r===-1&&(r=n-l);break;case 13:s=!0;case 10:u=n;break}if(u===-1)break;e(t.subarray(l,u),r),l=n,r=-1}l===c?t=void 0:l!==0&&(t=t.subarray(l),n-=l)}}function jwe(e,t,n){let r=ok();const s=new TextDecoder;return function(o,c){if(o.length===0)n?.(r),r=ok();else if(c>0){const l=s.decode(o.subarray(0,c)),u=c+(o[c+1]===32?2:1),d=s.decode(o.subarray(u));switch(l){case"data":r.data=r.data?r.data+`
`+d:d;break;case"event":r.event=d;break;case"id":e(r.id=d);break;case"retry":const f=parseInt(d,10);isNaN(f)||t(r.retry=f);break}}}}function Iwe(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function ok(){return{data:"",event:"",id:"",retry:void 0}}var Nwe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n};const Tv="text/event-stream",Owe=1e3,ik="last-event-id";function Rwe(e,t){var{signal:n,headers:r,onopen:s,onmessage:a,onclose:o,onerror:c,openWhenHidden:l,fetch:u}=t,d=Nwe(t,["signal","headers","onopen","onmessage","onclose","onerror","openWhenHidden","fetch"]);return new Promise((f,m)=>{const h=Object.assign({},r);h.accept||(h.accept=Tv);let g;function v(){g.abort(),document.hidden||T()}l||document.addEventListener("visibilitychange",v);let y=Owe,b=0;function x(){document.removeEventListener("visibilitychange",v),window.clearTimeout(b),g.abort()}n?.addEventListener("abort",()=>{x(),f()});const w=u??window.fetch,C=s??Dwe;async function T(){var M;g=new AbortController;try{const _=await w(e,Object.assign(Object.assign({},d),{headers:h,signal:g.signal}));await C(_),await Awe(_.body,Pwe(jwe(k=>{k?h[ik]=k:delete h[ik]},k=>{y=k},a))),o?.(),x(),f()}catch(_){if(!g.signal.aborted)try{const k=(M=c?.(_))!==null&&M!==void 0?M:y;window.clearTimeout(b),b=window.setTimeout(T,k)}catch(k){x(),m(k)}}}T()})}function Dwe(e){const t=e.headers.get("content-type");if(!t?.startsWith(Tv))throw new Error(`Expected content-type to be ${Tv}, Actual: ${t}`)}var Lwe=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},qs="1.6.0",ck=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function $we(e){var t=new Set([e]),n=new Set,r=e.match(ck);if(!r)return function(){return!1};var s={major:+r[1],minor:+r[2],patch:+r[3],prerelease:r[4]};if(s.prerelease!=null)return function(l){return l===e};function a(c){return n.add(c),!1}function o(c){return t.add(c),!0}return function(l){if(t.has(l))return!0;if(n.has(l))return!1;var u=l.match(ck);if(!u)return a(l);var d={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return d.prerelease!=null||s.major!==d.major?a(l):s.major===0?s.minor===d.minor&&s.patch<=d.patch?o(l):a(l):s.minor<=d.minor?o(l):a(l)}}var Fwe=$we(qs),Bwe=qs.split(".")[0],dc=Symbol.for("opentelemetry.js.api."+Bwe),fc=Lwe;function gl(e,t,n,r){var s;r===void 0&&(r=!1);var a=fc[dc]=(s=fc[dc])!==null&&s!==void 0?s:{version:qs};if(!r&&a[e]){var o=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(o.stack||o.message),!1}if(a.version!==qs){var o=new Error("@opentelemetry/api: Registration of version v"+a.version+" for "+e+" does not match previously registered API v"+qs);return n.error(o.stack||o.message),!1}return a[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+qs+"."),!0}function da(e){var t,n,r=(t=fc[dc])===null||t===void 0?void 0:t.version;if(!(!r||!Fwe(r)))return(n=fc[dc])===null||n===void 0?void 0:n[e]}function vl(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+qs+".");var n=fc[dc];n&&delete n[e]}var Uwe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(c){o={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Vwe=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},Gwe=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return yi("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return yi("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return yi("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return yi("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return yi("verbose",this._namespace,t)},e}();function yi(e,t,n){var r=da("diag");if(r)return n.unshift(t),r[e].apply(r,Vwe([],Uwe(n),!1))}var mn;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(mn||(mn={}));function Wwe(e,t){e<mn.NONE?e=mn.NONE:e>mn.ALL&&(e=mn.ALL),t=t||{};function n(r,s){var a=t[r];return typeof a=="function"&&e>=s?a.bind(t):function(){}}return{error:n("error",mn.ERROR),warn:n("warn",mn.WARN),info:n("info",mn.INFO),debug:n("debug",mn.DEBUG),verbose:n("verbose",mn.VERBOSE)}}var Hwe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(c){o={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},zwe=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},qwe="diag",fr=function(){function e(){function t(s){return function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];var c=da("diag");if(c)return c[s].apply(c,zwe([],Hwe(a),!1))}}var n=this,r=function(s,a){var o,c,l;if(a===void 0&&(a={logLevel:mn.INFO}),s===n){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((o=u.stack)!==null&&o!==void 0?o:u.message),!1}typeof a=="number"&&(a={logLevel:a});var d=da("diag"),f=Wwe((c=a.logLevel)!==null&&c!==void 0?c:mn.INFO,s);if(d&&!a.suppressOverrideMessage){var m=(l=new Error().stack)!==null&&l!==void 0?l:"<failed to generate stacktrace>";d.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return gl("diag",f,n,!0)};n.setLogger=r,n.disable=function(){vl(qwe,n)},n.createComponentLogger=function(s){return new Gwe(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),Ywe=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(c){o={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},Kwe=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Xwe=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=Ywe(t,2),r=n[0],s=n[1];return[r,s]})},e.prototype.setEntry=function(t,n){var r=new e(this._entries);return r._entries.set(t,n),r},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];var a=new e(this._entries);try{for(var o=Kwe(r),c=o.next();!c.done;c=o.next()){var l=c.value;a._entries.delete(l)}}catch(u){t={error:u}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return a},e.prototype.clear=function(){return new e},e}(),Qwe=Symbol("BaggageEntryMetadata"),Zwe=fr.instance();function Jwe(e){return e===void 0&&(e={}),new Xwe(new Map(Object.entries(e)))}function lLe(e){return typeof e!="string"&&(Zwe.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:Qwe,toString:function(){return e}}}function HO(e){return Symbol.for(e)}var e1e=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(r){return n._currentContext.get(r)},n.setValue=function(r,s){var a=new e(n._currentContext);return a._currentContext.set(r,s),a},n.deleteValue=function(r){var s=new e(n._currentContext);return s._currentContext.delete(r),s}}return e}(),t1e=new e1e,ni=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),n1e=function(){function e(){}return e.prototype.createHistogram=function(t,n){return d1e},e.prototype.createCounter=function(t,n){return u1e},e.prototype.createUpDownCounter=function(t,n){return f1e},e.prototype.createObservableGauge=function(t,n){return p1e},e.prototype.createObservableCounter=function(t,n){return m1e},e.prototype.createObservableUpDownCounter=function(t,n){return h1e},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),fb=function(){function e(){}return e}(),r1e=function(e){ni(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(fb),s1e=function(e){ni(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,r){},t}(fb),a1e=function(e){ni(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,r){},t}(fb),mb=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),o1e=function(e){ni(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(mb),i1e=function(e){ni(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(mb),c1e=function(e){ni(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(mb),l1e=new n1e,u1e=new r1e,d1e=new a1e,f1e=new s1e,m1e=new o1e,p1e=new i1e,h1e=new c1e,g1e={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},v1e={set:function(e,t,n){e!=null&&(e[t]=n)}},y1e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(c){o={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},x1e=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},b1e=function(){function e(){}return e.prototype.active=function(){return t1e},e.prototype.with=function(t,n,r){for(var s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];return n.call.apply(n,x1e([r],y1e(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),w1e=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(c){o={error:c}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a},S1e=function(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))},yh="context",C1e=new b1e,Am=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return gl(yh,t,fr.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,r){for(var s,a=[],o=3;o<arguments.length;o++)a[o-3]=arguments[o];return(s=this._getContextManager()).with.apply(s,S1e([t,n,r],w1e(a),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return da(yh)||C1e},e.prototype.disable=function(){this._getContextManager().disable(),vl(yh,fr.instance())},e}(),kv;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(kv||(kv={}));var zO="0000000000000000",qO="00000000000000000000000000000000",T1e={traceId:qO,spanId:zO,traceFlags:kv.NONE},Vi=function(){function e(t){t===void 0&&(t=T1e),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),pb=HO("OpenTelemetry Context Key SPAN");function hb(e){return e.getValue(pb)||void 0}function k1e(){return hb(Am.getInstance().active())}function gb(e,t){return e.setValue(pb,t)}function M1e(e){return e.deleteValue(pb)}function E1e(e,t){return gb(e,new Vi(t))}function YO(e){var t;return(t=hb(e))===null||t===void 0?void 0:t.spanContext()}var _1e=/^([0-9a-f]{32})$/i,A1e=/^[0-9a-f]{16}$/i;function P1e(e){return _1e.test(e)&&e!==qO}function j1e(e){return A1e.test(e)&&e!==zO}function KO(e){return P1e(e.traceId)&&j1e(e.spanId)}function I1e(e){return new Vi(e)}var xh=Am.getInstance(),XO=function(){function e(){}return e.prototype.startSpan=function(t,n,r){r===void 0&&(r=xh.active());var s=!!n?.root;if(s)return new Vi;var a=r&&YO(r);return N1e(a)&&KO(a)?new Vi(a):new Vi},e.prototype.startActiveSpan=function(t,n,r,s){var a,o,c;if(!(arguments.length<2)){arguments.length===2?c=n:arguments.length===3?(a=n,c=r):(a=n,o=r,c=s);var l=o??xh.active(),u=this.startSpan(t,a,l),d=gb(l,u);return xh.with(d,c,void 0,u)}},e}();function N1e(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var O1e=new XO,R1e=function(){function e(t,n,r,s){this._provider=t,this.name=n,this.version=r,this.options=s}return e.prototype.startSpan=function(t,n,r){return this._getTracer().startSpan(t,n,r)},e.prototype.startActiveSpan=function(t,n,r,s){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):O1e},e}(),D1e=function(){function e(){}return e.prototype.getTracer=function(t,n,r){return new XO},e}(),L1e=new D1e,lk=function(){function e(){}return e.prototype.getTracer=function(t,n,r){var s;return(s=this.getDelegateTracer(t,n,r))!==null&&s!==void 0?s:new R1e(this,t,n,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:L1e},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,r){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,r)},e}(),uk;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(uk||(uk={}));var dk;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(dk||(dk={}));var fk;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(fk||(fk={}));var mk=Am.getInstance(),uLe=fr.instance(),$1e=function(){function e(){}return e.prototype.getMeter=function(t,n,r){return l1e},e}(),F1e=new $1e,bh="metrics",B1e=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return gl(bh,t,fr.instance())},e.prototype.getMeterProvider=function(){return da(bh)||F1e},e.prototype.getMeter=function(t,n,r){return this.getMeterProvider().getMeter(t,n,r)},e.prototype.disable=function(){vl(bh,fr.instance())},e}(),dLe=B1e.getInstance(),U1e=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}(),vb=HO("OpenTelemetry Baggage Key");function QO(e){return e.getValue(vb)||void 0}function V1e(){return QO(Am.getInstance().active())}function G1e(e,t){return e.setValue(vb,t)}function W1e(e){return e.deleteValue(vb)}var wh="propagation",H1e=new U1e,z1e=function(){function e(){this.createBaggage=Jwe,this.getBaggage=QO,this.getActiveBaggage=V1e,this.setBaggage=G1e,this.deleteBaggage=W1e}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return gl(wh,t,fr.instance())},e.prototype.inject=function(t,n,r){return r===void 0&&(r=v1e),this._getGlobalPropagator().inject(t,n,r)},e.prototype.extract=function(t,n,r){return r===void 0&&(r=g1e),this._getGlobalPropagator().extract(t,n,r)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){vl(wh,fr.instance())},e.prototype._getGlobalPropagator=function(){return da(wh)||H1e},e}(),fLe=z1e.getInstance(),Sh="trace",q1e=function(){function e(){this._proxyTracerProvider=new lk,this.wrapSpanContext=I1e,this.isSpanContextValid=KO,this.deleteSpan=M1e,this.getSpan=hb,this.getActiveSpan=k1e,this.getSpanContext=YO,this.setSpan=gb,this.setSpanContext=E1e}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=gl(Sh,this._proxyTracerProvider,fr.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return da(Sh)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){vl(Sh,fr.instance()),this._proxyTracerProvider=new lk},e}(),ZO=q1e.getInstance(),$s=(e=>(e.V1="v1",e.V1_TEST="v1_test",e))($s||{});class Y1e{prevObjByChannel=[];prevDelta={channel:0,op:"add",path:"",value:void 0};applyDelta(t){try{const n=this.decodeDelta(t),r=n.channel,s=this.prevObjByChannel[r],a=Q1e(s,n);return this.prevObjByChannel[r]=a,a}catch(n){ie.addError(`Error applying delta: ${n}`)}}decodeDelta(t){X1e(t);const n=K1e(t,this.prevDelta),r=JO(n);return this.prevDelta=r,r}}function K1e(e,t){for(const[n,r]of eR)n!=="value"&&!(r in e)&&(e[r]=t[n]);return e}function JO(e){const t=e;for(const[n,r]of eR)r in e&&(t[n]=e[r],delete e[r]);return t.op==="patch"&&(t.value=t.value.map(JO)),t}function X1e(e){if(!e||typeof e!="object")throw new Error("Unexpected delta non-object")}const eR=[["channel","c"],["path","p"],["op","o"],["value","v"]];function Q1e(e,t){return Kv({__root:e},r=>tR(r,t)).__root}function tR(e,t){const n=eSe(t.path??"");for(let s=0;s<n.length-1;s++)e[n[s]]===void 0&&(typeof n[s+1]=="number"?e[n[s]]=[]:e[n[s]]={}),e=e[n[s]];const r=n[n.length-1];switch(t.op){case"patch":for(const s of t.value){const a={__root:e[r]};tR(a,s),e[r]=a.__root}break;case"add":Array.isArray(e)?e.splice(r,0,t.value):e[r]=t.value;break;case"remove":Array.isArray(e)?e.splice(r,1):delete e[r];break;case"replace":e[r]=t.value;break;case"append":if(typeof e[r]=="string")e[r]+=t.value;else if(Array.isArray(e[r]))e[r].push(...nSe(t.value));else if(pk(e[r])&&pk(t.value))for(let s in t.value)e[r][s]=t.value[s];else e[r]=t.value;break;case"truncate":e[r]&&(typeof e[r]=="string"?e[r]=e[r].substring(0,t.value):Array.isArray(e[r])&&(e[r].length=t.value));break;default:throw new Error("Unknown json delta operation")}}function Z1e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}const J1e=/^(?:0|[1-9]\d*)$/d;function eSe(e){const t=["__root"];if(e==="")return t;e[0]==="/"&&(e=e.substring(1));for(const n of e.split("/"))J1e.test(n)?t.push(parseInt(n,10)):t.push(Z1e(n));return t}function tSe(e,t){const n=[],r=o=>typeof o=="object"&&o!=null&&!Array.isArray(o),s=o=>o===null?"null":Array.isArray(o)?"array":typeof o,a=(o,c,l)=>{if(c!==l)if(Array.isArray(c)&&Array.isArray(l))for(let u=0;u<Math.max(c.length,l.length);u++)a(`${o}/${u}`,c[u],l[u]);else if(r(c)&&r(l))for(const u of Object.keys({...c,...l}))a(`${o}/${u}`,c[u],l[u]);else n.push(`${s(c)} != ${s(l)} at ${o}`)};return a("",e,t),n}function nSe(e){return Array.isArray(e)?e:[e]}function pk(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}const nR="prompt-textarea";function rR(){document.getElementById(nR)?.focus()}const mLe={getAndReset:(e,t)=>{const n=Mt.getItem(He.RestoreMessageAfterOauthRedirect);return Mt.removeItem(He.RestoreMessageAfterOauthRedirect),!n||n.userId!==e||t!==n.serverThreadId||Date.now()>n.expiresAt?null:n},set:(e,t,n)=>{const r={userId:e,serverThreadId:t,inputText:n,expiresAt:Date.now()+6e4};Mt.setItem(He.RestoreMessageAfterOauthRedirect,r)}},rSe=()=>sa.useState(sa.getPersistedSystemHints).has(Ct.Search),sSe=()=>{const e=sa.useStore(),t=p.useCallback(()=>e.getPersistedSystemHintTrigger(Ct.Search),[e]),n=p.useCallback(()=>e.clearPersistedSystemHintTrigger(Ct.Search),[e]),r=p.useCallback((s,a,o)=>{(s?e.addPersistedSystemHint:e.removePersistedSystemHint)(Ct.Search,a,o)},[e]);return{getSearchModeTrigger:t,clearSearchModeTrigger:n,setThreadSearchMode:r}},pLe=(e,t,n)=>e?"file_upload_pending":t?n?"text_content_too_long":void 0:"empty_text_content",aSe=e=>e.replace(/[\u{E0000}-\u{E007F}]+/gu,""),hLe=e=>{const t=aSe(e.getContentToSend().content);return Math.ceil(t.length/4)},oSe="OAI-Echo-Logs",La={FOCUS_IN:0,FOCUS_OUT:1,COPY:2,PASTE:3,TOUCH_START:4,TOUCH_END:5},sR=[];function $a(e){return()=>{sR.push({type:e,ts:Math.round(performance.now())})}}const iSe={focusin:$a(La.FOCUS_IN),focusout:$a(La.FOCUS_OUT),copy:$a(La.COPY),paste:$a(La.PASTE),touchstart:$a(La.TOUCH_START),touchend:$a(La.TOUCH_END)};function gLe(e){const t=e??document.getElementById(nR);for(const[n,r]of Object.entries(iSe))t?.removeEventListener(n,r),t?.addEventListener(n,r)}function cSe(){return{[oSe]:sR.slice(0,10).map(e=>`${e.type},${e.ts}`).join(",")}}const lSe=1e3*30,xi=ZO.getTracer("completion");class hk extends Error{}function uSe(e,t,n,r){return(async(a=null)=>{kwe()&&await Mwe();const o=new AbortController,c="threadId"in t?t.threadId:void 0,l="continueFromSharedConversationId"in t?t.continueFromSharedConversationId:void 0,u=Dr(),d=q.checkGate("1987334402"),f=q.checkGate("2964350589"),m=t.model,h=[d&&$s.V1,f&&$s.V1_TEST].filter(Boolean),g={action:t.completionType,messages:t.messages.length>0?t.messages:void 0,conversation_id:c,continue_from_shared_conversation_id:c!=null?void 0:l,parent_message_id:t.parentMessageId,model:t.model,timezone_offset_min:new Date().getTimezoneOffset(),timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,variant_purpose:t.completionMetadata?.variantPurpose,suggestions:t.completionMetadata?.suggestions?t.completionMetadata.suggestions.map(se=>Ja(se)):void 0,chosen_suggestion:t.completionMetadata?.suggestion?{type:t.completionMetadata.suggestion.type,index:t.completionMetadata.suggestionIndex,source:t.completionMetadata?.suggestion.type===ct.Autocomplete?t.completionMetadata.suggestion.source:void 0,user_input:t.completionMetadata?.suggestion.type===ct.Autocomplete?t.completionMetadata.suggestion.userInput:void 0}:void 0,history_and_training_disabled:t.historyDisabled,juice:t.completionMetadata?.juice,conversation_mode:t.completionMetadata?.conversationMode,force_paragen:t.forceParagen,force_paragen_model_slug:t.forceParagenModel,force_indepth_feedback:t.forceIndepthFeedback,force_rate_limit:t.forceRateLimit,reset_rate_limits:t.resetRateLimits,disable_system_content_toggling:t.disableSystemContentToggling,websocket_request_id:u,source:t.completionMetadata?.source,system_hints:t.completionMetadata?.systemHints,prefetch_ids:t.completionMetadata?.prefetchIds,supported_encodings:h,conversation_origin:t.conversationOrigin,force_use_search:t.forceUseSearch,client_reported_search_source:t.completionMetadata?.searchSource,client_contextual_info:t.contextualInfo,paragen_stream_type_override:t.paragenStreamType==="none"?null:t.paragenStreamType,paragen_cot_summary_display_override:t.paragenCotSummaryDisplay==="none"?null:t.paragenCotSummaryDisplay,is_onboarding_conversation:t.isOnboardingConversation},v=q.checkGate("1113464293"),y=m.startsWith("o1")&&m.endsWith("o");v&&(g.supports_buffering=!0),t.turnTracker.stream_buffering=v;let b,x;const w=vE(e);f0(w)?(x="https://chatgpt.com/backend-anon",b=ae.getUnauthHeaders().additionalHeaders):(y?x="https://chatgpt.com/backend-alt":x="https://chatgpt.com/backend-api",b=ae.getAuthedHeadersWithAccessToken(w?.accessToken));const C=`${x}/conversation`,T=sL(t.chatReq,a??t.arkoseToken,t.turnstileToken,t.proofToken,null),M={...b,...cSe(),...T};let _=!1,k=!1,I=!1,j=!1,F,U,B,N,$;xi.startActiveSpan("completion.response",se=>{F=xi.startSpan("completion.first_response"),U=xi.startSpan("completion.first_token_including_tool_calls"),B=xi.startSpan("completion.first_token_including_visible_content"),N=xi.startSpan("completion.first_token"),$=se});const H=ZO.setSpan(mk.active(),$);let Y=null,O=null,R,V=!1,X=!1;function re(){X||(X=!0,n({type:"done"}),Ew())}function te(se){if(t.turnTracker.onBytesReceived(se.data),se.data==="[DONE]")o.abort(),$.end(),re();else if(se.event!=="ping")try{let W=JSON.parse(se.data);if(se.event==="delta_encoding")if(W===$s.V1||W===$s.V1_TEST)Y=W,t.turnTracker.stream_encoding=Y??void 0,O=new Y1e;else{ie.addError(`[completion-delta] unknown delta encoding: ${W}`);return}else if(se.event==="delta"){if(!O){ie.addError("[completion-delta] delta event before delta_encoding");return}const be=O.applyDelta(W);if(Y===$s.V1_TEST){!V&&!gE(be,R)&&(V=!0,ie.addError("[completion-delta] delta resulted in a different object",{differences:tSe(be,R)}));return}else W=be}else Y===$s.V1_TEST&&!V&&(R=W);if(W.error){const be=jt.createWithErrorMessage(C,"server",W.error);throw n({type:"error",error:be}),be}else"type"in W?W.type==="gizmo_inline_review"?n({type:"gizmo_inline_review",gizmoId:W.gizmo_id}):W.type==="title_generation"?n({type:"title_generation",title:W.title,conversation_id:W.conversation_id}):W.type==="moderation"?n({type:"moderation",conversationId:W.conversation_id,messageId:W.message_id,isCompletion:W.is_completion,flagged:W.moderation_response.flagged,blocked:W.moderation_response.blocked,disclaimers:W.moderation_response.disclaimers,metadata:W.moderation_response.metadata}):W.type==="url_moderation"?n({type:"url_moderation",conversationId:W.conversation_id,messageId:W.message_id,url:W.url_moderation_result.full_url,isSafe:W.url_moderation_result.is_safe}):W.type==="num_variants_in_stream"?n({type:"num_variants_in_stream",num_variants_in_stream:W.num_variants_in_stream,display_treatment:W.display_treatment}):W.type==="conversation_detail_metadata"?n(W):W.type==="message_stream_complete"&&re():(n({type:"message",message:W.message,conversationId:W.conversation_id}),_||(_=!0,F.end()),!k&&W.message.author.role===le.Assistant&&(k=!0,U.end()),!I&&W.message.author.role===le.Assistant&&xE(W.message)&&(I=!0,B.end()),!j&&W.message.author.role===le.Assistant&&iL(W.message)&&(j=!0,N.end()))}catch(W){if(W instanceof jt)throw W}}let ue=null,he=setTimeout(()=>{ue===!0?(E.logEvent(P.asyncResponseWaitTooLong,{}),t.turnTracker.logCompletion({type:Zr.Error,error:{reason:"timeout",message:"Async Response Took Too Long to Come Back"}})):ue===!1&&(E.logEvent(P.sseResponseWaitTooLong,{}),t.turnTracker.logCompletion({type:Zr.Error,error:{reason:"timeout",message:"SSE Response Took Too Long to Come Back"}}))},lSe);return mk.with(H,()=>(t.profiler?.logTiming("fetch_event_source"),Rwe(C,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",...M},body:JSON.stringify(g),signal:o.signal,openWhenHidden:!0,async onopen(se){const W=se.headers.get("content-type")??"",be=se.headers.get("Cf-Ray")??null;if(se.ok&&W.includes("text/event-stream")){ue=!1,r(be,t.model,t.turnTracker);return}else if(W.includes("application/json")){const De=await se.json(),Ve=new jt(C,se.status,De);if(Ve.isServerError())throw Ve;if((Ve?.code==="expired_session_key"||Ve?.code==="invalid_api_key"||Ve?.code==="token_expired")&&typeof window<"u"&&window._oaiHandleSessionExpired?.("stream",JSON.stringify(Ve)),Ve?.code==="deactivated_workspace"){window.location.href.includes("/workspace/deactivated")||(window.location.href="/workspace/deactivated");return}throw Ve}else{const De=await se.text();throw new jt(C,se.status,{detail:{message:sw,code:"unexpected_content_type",contentType:W,text:De?.substring(0,1e3)}})}},onmessage:se=>{if(ue)throw jt.createWithErrorMessage(C,"server",sw);he&&(clearTimeout(he),he=null),te(se)},onerror(se){let W=se instanceof Error?se:new Error(JSON.stringify(se));throw W instanceof hk||ue||(W.message==="Failed to fetch"&&(W=jt.createWithErrorMessage(C,"server",`An error occurred. Either the engine you requested does not exist or there was another issue processing your request. ${aw}`)),W.message==="network error"&&(W=jt.createWithErrorMessage(C,"client",`A network error occurred. Please check your connection and try again. ${aw}`)),aL("fetch-error:conversation:new-message",{url:C,message:W?.message}),n({type:"error",error:W}),Ew(W)),W}}))).catch(async se=>{se instanceof hk||(se instanceof jt?oL(se):ie.addError(se),t.turnTracker.handleRawError(se.message??"Something went wrong",se.status))}),o})()}function dSe({clientThreadId:e,continuingFromSharedConversationId:t,onCompletionFinished:n=we,onCreate:r=we}){const s=ke(),{resolvedTheme:a}=af(),o=a==="dark",c=pf(),l=p.useRef(n),u=VM();l.current=n;const d=p.useCallback(async function({model:f,completionType:m,parentNodeId:h,metadata:g,focusOnNewCompletion:v=!0,completionMetadata:y,chatReq:b,arkoseToken:x,turnstileToken:w,proofToken:C,preflightTime:T,extraStreamParams:M,prependMessages:_,appendMessages:k,updateTree:I,turnTracker:j,profiler:F}){Mc.publish({kind:"requestCompletion"});const U=D.getTree(e);D.retainThread(e);const B=lL(),N=`${cL}${e}-${B}`,$=`${e}-${B}`;I?.();const H=U.getNodeByIdOrMessageId(h);U.getConversationTurns(h).length>2&&D.updateScrollToMessageId(e,H.message.id);const R={gizmo_id:H.message.metadata?.gizmo_id};y?.juice!=null&&(R.snorkle_status=1),D.updateTree(e,be=>{be.addNode(N,"",h,le.Assistant,void 0,R)}),v&&D.setThreadCurrentLeafId(e,N);let V,X=[],re=U.getNodeByIdOrMessageId(H.parentId);for(;re!=null&&(re.metadata?.isPlaceholderTemplateAssistantWelcomeMessage===!0||re.metadata?.isClientCreatedSystemMessage===!0);){const be=re.message;X.unshift(be);const De=U.getNodeByIdOrMessageId(re.parentId);V=De.message?.id??De.id,re=De}if(m===os.Next||m===os.Variant){const be=U.getNodeByIdOrMessageId(H.parentId);if(V??=be.message?.id??be.id,_){let De=H.parentId,Ve=H.id;D.updateTree(e,Z=>{for(const gt of _)Z.insertNodeBefore(Ve,{id:gt.id,message:gt,parentId:De,children:[]}),De=gt.id}),X.push(..._)}if(X.push(H.message),k){let De=h;D.updateTree(e,Ve=>{for(const Z of k)Ve.insertNodeBefore(N,{id:Z.id,message:Z,parentId:De,children:[]}),De=Z.id}),X.push(...k)}X=fSe(X,M)}else V??=H.message.id;const te=D.getServerThreadId(e);te===void 0&&bs(e)&&D.updateInitialThreadDataForNewThread(e,f);async function ue(be,De){const Ve=performance.now(),Z=await yE();qh.initializeAndGatherData(Z),bv.initializeAndGatherData(Z),Yh.initializeAndGatherData(Z),D.updateTree(e,Tl=>{for(const zn of De)Tl.addNode(zn.id,zn,be,le.Assistant,{completionSampleFinishTime:Date.now()}),be=zn.id}),D.setThreadCurrentLeafId(e,be);const gt=await qh.getEnforcementToken(Z),dn=await bv.getEnforcementToken(Z),Cl=await Yh.getEnforcementToken(Z);d({model:f,completionType:os.Next,parentNodeId:be,metadata:{},chatReq:Z,arkoseToken:gt??null,turnstileToken:dn??null,proofToken:Cl??null,preflightTime:performance.now()-Ve,extraStreamParams:M,turnTracker:j})}j.updateAttachmentCount(X);const he=new Twe(s,e,N,m,f,g.eventSource,r,c,$,ue,(...be)=>l.current(...be),j,u),Se=(be,De,Ve)=>{be&&Ve.onReceivedRequestId(be),awe($,De,be,T)},se={is_dark_mode:o,time_since_loaded:Math.floor(performance.now()/1e3),page_height:window?.innerHeight,page_width:window?.innerWidth,pixel_ratio:window?.devicePixelRatio,screen_height:window?.screen?.height,screen_width:window?.screen?.width},W=await uSe(s,{conversationOrigin:D.getConversationOrigin(e),model:f,completionType:m,threadId:te,continueFromSharedConversationId:t,historyDisabled:u,parentMessageId:V,messages:X,chatReq:b,arkoseToken:x??null,turnstileToken:w??null,proofToken:C??null,completionMetadata:y,...M,turnTracker:j,profiler:F,contextualInfo:se,isOnboardingConversation:y?.isOnboardingConversation},he.handleResponse,Se);Xi(e,{source:Jr.CLIENT,value:Nn.STREAMING}),na.addRequest(N,W,j),rv.onCompletionRequestStarted(N)},[e,s,r,t,c,u,o]);return d}const fSe=(e,t)=>{let n=e;return t?.forceUseSearch===!1&&e.length>0&&(n=e.map(r=>{const{system_hints:s,...a}=r.metadata||{};return{...r,metadata:{...a,system_hints:s?.filter(o=>o!==Ct.Search)}}})),n},mSe=Xe(()=>qe(()=>import("./b6xzz48zchlt7dt5.js"),__vite__mapDeps([35,1,2,3,36,37,6])).then(e=>e.CAFeedbackModal));function pSe({clientThreadId:e,currentModelId:t,defaultModelId:n,onCompletionFinished:r,onThreadCreated:s,preRequestCompletion:a}){const o=jN(),c=Jt(),{isUnauthenticated:l}=bt(),u=uL(e),d=ke(),f=nf(e),m=Ce(),h=jbe(e),g=lb(),v=Vn(),{config:y}=mf("1013114931"),b=y.get("show_follow_ups",!1)&&m?.isPersonalAccount(),x=!g.displayingSideBySideFeedback&&b,w=p.useCallback(B=>{const $=D.getTree(e).getLeafFromNode(B);D.setThreadCurrentLeafId(e,$.id)},[e]),C=vbe(t),[T,M]=p.useState(),_=p.useCallback(({nodeId:B,messageId:N,rating:$})=>{const H=D.getServerThreadId(e);E.logEvent(P.thumbRating,{id:N,threadId:H,rating:$,model:t});const Y=D.getTree(e),O=Y.getNodeByIdOrMessageId(B);if(H!==void 0&&!C&&K.submitMessageFeedback({message_id:N,conversation_id:H,rating:$}),D.updateTree(e,R=>{R.updateNodeMetadata(B,{rating:$})}),C){M(i.jsx(mSe,{citations:O.message.metadata?.citations??[],rating:$,conversationId:H??"",messageId:N,onSubmit:()=>{M(void 0)},onCancel:()=>M(void 0),conversationTree:Y,nodeId:B},`${B}-${$}`));return}},[e,t,C]),k=p.useCallback(B=>{if(B==null||(r?.(B),v)||(f?.kind===Me.GizmoInteraction&&mA.handleGizmoInteracted(d,f.gizmo_id),!(h||x)))return;const $=D.getThreadCurrentLeafId(B),H=D.getTree(B).getMessage($);DM(H)||dL(H)||Bbe(B,H.id,t)},[f,t,r,d,h,x,v]),I=dSe({clientThreadId:e,continuingFromSharedConversationId:u,onCompletionFinished:k,onCreate:s}),j=p.useCallback(()=>{const B=D.getThreadCurrentLeafId(e);if(B==null)return;const $=D.getTree(e).getBranchFromLeaf(B);na.abortRequests($.map(H=>H.id))},[e]),F=p.useCallback(B=>Gbe({cancelRequests:j,clientThreadId:e,currentModelId:t,debugSettings:o,defaultModelId:n,isUnauthenticated:l,navigateToAuth:c,preRequestCompletion:a,requestCompletion:I,...B}),[j,e,t,o,n,l,c,a,I]),U=p.useCallback((B,N,$,H=!0,Y="none",O)=>{const V=D.getTree(e).getParentPromptNode(B).id;F({type:os.Variant,promptId:V,eventMetadata:N,cancelActiveRequests:!1,focusOnNewCompletion:H,useDefaultModel:O,completionMetadata:{variantPurpose:Y,conversationMode:Un.getConversationMode(e)},turnTracker:$})},[e,F]);return{caModal:T,onRequestCompletion:F,onRequestMoreCompletions:U,onChangeItemInView:w,onChangeRating:_,cancelRequests:j}}function hSe(){const t=zt()?.id,{currentWorkspace:n}=ln(({currentWorkspace:a})=>({currentWorkspace:a})),r=n?.id;return Mt.getItem(He.LastUsedModel,{workspaceId:r,userId:t})}function gSe(){const t=zt()?.id,{currentWorkspace:n}=ln(({currentWorkspace:a})=>({currentWorkspace:a})),r=n?.id;return p.useCallback(a=>{if(!a)return null;const o=Date.now(),c={modelId:a,updatedAt:o};Mt.setItem(He.LastUsedModel,c,{workspaceId:r,userId:t})},[r,t])}const vSe=e=>["conversation","init",e],ySe=({clientThreadId:e,conversationMode:t,clientModelId:n},r)=>{const s=kye(t),a=bs(e)?null:e;return{gcTime:0,refetchOnWindowFocus:!0,refetchOnMount:"always",queryKey:vSe(e),queryFn:()=>K.getConversationDetails({conversationId:a,gizmoId:s,requestedDefaultModel:n}),enabled:!K7(e)}},xSe=e=>(Ne(),me(ySe(e))),bSe=(e,t)=>{const n=(typeof e=="string"?[e]:e)??[];for(const r of n)if(r&&t.has(r))return r;return null},wSe=(e,t,n)=>{const r=rA(),[s,a]=pa(),o=s.get("model"),{modelId:c=null}=hSe()??{};X7(e);const l=fL(e)??null,u=[o,l,c],d=bSe(u,r);p.useEffect(()=>{D.initThread(e,t,d),n?.shouldScrollToBottom&&D.updateScrollToMessageId(e,"finalAgentTurn"),Kh.reset()},[e,n?.shouldScrollToBottom]);const f=()=>{a(v=>(v.delete("model"),v))},{isLoading:m,data:h}=xSe({clientThreadId:e,clientModelId:u.find(v=>!!v)??null,conversationMode:t}),g=BM();p.useEffect(()=>{if(!(!o||m)){if(!r.has(o)||g.find(v=>v.model_slug===o))return f();D.setThreadModelId(e,o)}},[o,g,r,e]),p.useEffect(()=>{if(m||!h)return;const{default_model_slug:v}=h;o&&v&&o!==v&&f(),Kh.updateDetails(h),v&&D.setThreadModelId(e,v)},[m,h])};function SSe({clientThreadId:e,setClientThreadId:t}){const n=ke(),r=mL(),s=r?{kind:Me.GizmoInteraction,gizmo_id:r}:{kind:Me.PrimaryAssistant};wSe(e,s,{shouldScrollToBottom:!0});const a=ze(),o=No(e),c=p.useRef(o);c.current=o;const l=pL(e),u=Ec(e),{data:d}=Ss(u),f=Zo(u),m=p.useCallback(()=>{t?.(hL());const v=c.current;a(v.tags.includes(Ys.GPT_4)?"/":`/?model=${v.id}`,{replace:!0})},[t,a]),h=pbe({clientThreadId:e,location:"Model switcher menu item"}),g=p.useCallback((v,y)=>{l||y||(f?a(wo(v,d)):Cwe(a,n,v))},[l,d,f,a,n]);return{createNewThread:h,onThreadCreated:g,resetThread:m}}function aR(){return{caModal:null,clientThreadId:"",isLoggedInUser:!1,focusedObject:null,currentModelId:"",isModelLoaded:!1,isEmbeddedInFocusedView:!1,isInstalledApp:!1,isCompanionWindow:!1,conversationLeafId:"",onNewThread:()=>{throw new Error("onNewThread not implemented")},onRequestCompletion:()=>{throw new Error("onRequestCompletion not implemented")},onChangeItemInView:()=>{throw new Error("onChangeItemInView not implemented")},onChangeRating:()=>{throw new Error("onChangeRating not implemented")},onRequestMoreCompletions:()=>{throw new Error("onRequestMoreCompletions not implemented")},resetThread:()=>{throw new Error("resetThread not implemented")}}}const oR=p.createContext(aR());function ka(){try{return p.useContext(oR)}catch{return aR()}}function vLe({children:e,clientThreadId:t,setClientThreadId:n,prefetchSearch:r,preRequestCompletion:s,onCompletionFinished:a}){const{createNewThread:o,onThreadCreated:c,resetThread:l}=SSe({clientThreadId:t,setClientThreadId:n}),u=cA(),d=oA(t),f=xc(t),m=Ko(),h=u.id,g=d??h,v=pf(),y=Hx(),b=hbe(),{isUnauthenticated:x}=bt(),w=!x,{caModal:C,onRequestCompletion:T,onChangeItemInView:M,onChangeRating:_,onRequestMoreCompletions:k}=pSe({clientThreadId:t,currentModelId:g,defaultModelId:u.id,onThreadCreated:c,preRequestCompletion:s,onCompletionFinished:a});return i.jsx(oR.Provider,{value:{caModal:C,clientThreadId:t,currentModelId:g,isModelLoaded:!!d,isEmbeddedInFocusedView:m,isInstalledApp:y,isLoggedInUser:w,isCompanionWindow:v,focusedObject:b,conversationLeafId:f,onNewThread:o,onRequestCompletion:T,onChangeItemInView:M,onChangeRating:_,onRequestMoreCompletions:k,resetThread:l,prefetchSearch:r},children:e})}const Nd=10,iR=4,Od={duration:20,hasCloseButton:!0},cR=512,CSe=cR*1024*1024,lR={duration:20,hasCloseButton:!0};function mc(e){return JSON.stringify({file:e.name,modified:e.lastModified,currentTime:new Date().toString()})}function Mv(e){return new Promise((t,n)=>{const r=new FileReader,s=new Image;r.onload=()=>{s.onload=()=>t(s),s.onerror=a=>n(a),s.src=r.result},r.readAsDataURL(e)})}async function yb(e,t,n,r,s,a,o){const c={ENTRY_CREATED:10,FILE_UPLOADED:60,FILE_PROCESSED:100};let l=Jn.Initial;E.logEvent(P.uploadFileInitiated,{client:"web",useCase:s.kind,uploadEntry:"local"});const u=o.usesRetrievalIndex??!1,d=u?performance.now():void 0,f=jN.getState().resetRateLimits;try{const{file_id:m,upload_url:h}=await K.createFile(t.name,t.size,s,!!f);a.onFileCreated(e,m,h),l=Jn.FileCreated,a.onFileUploadProgress(e,c.ENTRY_CREATED);const g=s.kind===Bt.Gizmo?s.gizmoId:void 0,v=u,y={client:"web",useCase:s.kind,uploadEntry:"local",fileId:m,fileSize:t.size};E.logEvent(P.blobStoreUploadStarted,y);const b=await K.uploadFileToAzureStorage(t,h,T=>{a.onFileUploadProgress(e,c.ENTRY_CREATED+(c.FILE_UPLOADED-c.ENTRY_CREATED)*T)});a.onFileUploadProgress(e,c.FILE_UPLOADED),b.status!==201&&(E.logEvent(P.blobStoreUploadError,{...y,error_type_name:`HTTPStatus${b.status}`,error_msg:`HTTP status ${b.status}: ${b.statusText}`,error_stack:""}),TSe(b,m,v)),E.logEvent(P.blobStoreUploadCompleted,y),l=Jn.FileUploaded;const x=q.checkGate("1371760254"),w=q.checkGate("2451420520"),C=g?w:x;if(C){const T={file_id:m,use_case:s.kind,gizmo_id:g,index_for_retrieval:u,file_name:t.name},M=await K.processFileUploadStream(T,_=>{a.onFileUploadProgress(e,c.FILE_UPLOADED+(c.FILE_PROCESSED-c.FILE_UPLOADED)*_/100)});l=Jn.FileProcessed,a.onFileUploaded(e,m,o.imageDimensions,M),u&&(l=Jn.RetrievalIndexCreated)}else if(await K.processFileUpload(m,{gizmoId:g}),l=Jn.FileProcessed,u){const T=await uR(m,g);T?.status===Ai.Skipped&&r.danger(n.formatMessage(fR.retrievalSkippedFile,{fileName:T.name}),lR),a.onFileUploaded(e,m,void 0,{fileTokenSize:T.file_size_tokens}),l=Jn.RetrievalIndexCreated}else a.onFileUploaded(e,m,o.imageDimensions);d!=null&&K.postRetrievalTiming({e2eLatencyMs:performance.now()-d,type:"file",stream:C})}catch(m){dR(n,r,t.name,m);let h="NotInstanceOfError";m instanceof jt?h=`${m.name}_${m.status}`:(m instanceof Error||m instanceof Mr)&&(h=m.name),a.onError(e,"error",h,s,l)}}async function yLe(e,t,n,r,s,a){const{width:o,height:c}=await Mv(t);return yb(e,t,n,r,{kind:s},a,{imageDimensions:{width:o,height:c}})}async function uR(e,t){const n=Date.now()+6e4,r=a=>new Promise(o=>setTimeout(o,a));let s=0;for(;Date.now()<n;){const a=await K.getRetrievalStatus(e,t);if(a.status===Ai.Success||a.status===Ai.Skipped)return a;if(a.status===Ai.Failed)throw new Mr("Context extraction failed",a.error_code);s++,await r(Math.min(1e3,100*s))}throw new Mr("Retrieval indexing timed out")}async function TSe(e,t,n=!1){let r="Unknown error";try{r=await e.data}catch{}throw n&&K.markFileUploadFailed(t,{error:r}),new Mr("File upload to blobstore failed","failed_upload_to_blobstore")}function dR(e,t,n,r){let s=nv(e,"default_upload_error",{fileName:n});r instanceof Mr&&r.code!=null&&(s=nv(e,r.code)),t.danger(s,lR)}const fR=z({retrievalSkippedFile:{id:"useFilePickerState.retrievalSkippedFile",defaultMessage:'Unable to extract text from "{fileName}"'}}),mR={files:[],connectorFileData:{}},pR=p.createContext(null);function xLe({children:e,initialState:t=mR}){const[n]=p.useState(()=>sf(()=>t));return i.jsx(pR.Provider,{value:n,children:e})}function yl(){const e=p.useContext(pR);if(e==null)throw new Error("useFilePickerState must be used inside a FilePickerContext");return e}function hR(e){const t=yl();return Cc(t,e)}const kSe={hasUploadInProgress:({files:e})=>e.some(t=>t.status===Kr.Uploading),getReadyFiles:({files:e})=>e.filter(t=>t.status===Kr.Ready)},Ch=2048;async function MSe(e,t,n,r,s,a,o,c,l){const u=performance.now();E.logEvent(P.uploadFileInitiated,{client:"web",useCase:r.kind,contextConnector:a.contextConnector,fileSourceType:a.type});let d=Jn.Initial;const f=gR(e);r.kind===Bt.Gizmo&&(r={...r,kind:s.includes(xb(n))?Bt.Multimodal:Bt.MyFiles});try{const m=await K.uploadConnectorAPI(t,a.contextConnector,r,n,o,a.o365DriveId,a.manifest);switch(m.type){case"error":throw ESe(m.error);case"file":{switch(f.onFileCreated(t,m.file.id,"",a.contextConnector),d=Jn.FileProcessed,r.kind){case Bt.MyFiles:{f.onFileUploadProgress(t,90);const h=await uR(m.file.file_id,o);h?.status===Ai.Skipped&&l.danger(c.formatMessage(fR.retrievalSkippedFile,{fileName:h.name}),Od),f.onFileUploaded(t,m.file.file_id,void 0,{fileTokenSize:h.file_size_tokens,mimeType:m.file.mime_type}),d=Jn.RetrievalIndexCreated;break}case Bt.Multimodal:{f.onFileUploaded(t,m.file.file_id,{width:512,height:512},{mimeType:m.file.mime_type});break}case Bt.AceUpload:{f.onFileUploaded(t,m.file.file_id,void 0,{mimeType:m.file.mime_type});break}case Bt.DalleAgent:case Bt.Gizmo:case Bt.ProfilePicture:throw new Mr(`Use case not supported by cloud doc: ${r.kind}`)}break}case"folder":throw new Mr("Folder type not supported")}K.postRetrievalTiming({e2eLatencyMs:performance.now()-u,type:a.contextConnector})}catch(m){ie.addError(new Error(`Failed to upload connected file by ${a.contextConnector}`,{cause:m}));const h=xN(n.name,a?.syntheticExtension);dR(c,l,h,m);let g="NotInstanceOfError";m instanceof jt?g=`${m.name}_${m.status}`:(m instanceof Error||m instanceof Mr)&&(g=m.name),f.onError(t,"error","connector_upload_"+g,{kind:Bt.MyFiles},d)}}function xb(e){return e.type||Fx(e.name)}function ESe({status_code:e,error_code:t,error_message:n}){if(e&&e<500){let r="internal_error";return t?r=t:e===404?r="file_not_found":e===403?r="permission_error":e===413&&(r="file_too_large"),new Mr(n,r)}else return jt.createWithErrorMessage("/connectors/upload","server",n)}const hn={reset:e=>{e.setState(mR)},uploadFile:async(e,t,n,r,s,a,o,c={},l,u)=>{const{gizmoId:d}=c,f=e.getState().files,m=Yue(r,n.name,n.type,u?.contextConnector,l),h={tempId:t,gizmoId:c.gizmoId,status:Kr.Uploading,file:n,progress:1,fileId:null,cdnUrl:null,contextConnectorInfo:u,contextConnector:u?.contextConnector};if(f.length===Nd)E.logEvent(P.uploadedMaxFilesError),o.danger(a.formatMessage(gk.maxUploadsAtATime,{maxUploads:Nd,fileName:n.name}),Od);else if(f.some(g=>g.tempId===t))E.logEvent(P.uploadedDuplicateFileError),o.danger(a.formatMessage(gk.duplicateFileAttached,{fileName:n.name.length>20?n.name.slice(0,19)+"":n.name}),Od);else{e.setState(({files:y})=>({files:[...y,h]}));let g;const v={};if(s.includes(n.type)){if(g={kind:Bt.Multimodal},!u){let{width:y,height:b}=await Mv(n);if(y>Ch||b>Ch)try{const x=await vN(n,Ch),w=await Mv(x);y=w.width,b=w.height,n=x}catch(x){ie.addError(new Error("Error resizing image:",{cause:x}))}v.imageDimensions={width:y,height:b}}}else switch(m){case Je.Multimodal:throw new Error(`Multimodal file upload not supported mime type, ${n.type}
Supported mime types: `+s.join(", "));case Je.Interpreter:g={kind:Bt.AceUpload};break;case Je.Retrieval:g={kind:Bt.MyFiles},v.usesRetrievalIndex=!0;break;case Je.ProfilePicture:throw new Error("cannot upload profile picture via uploadFile");case Je.ContextConnector:case Je.None:return}d!=null&&(g={kind:Bt.Gizmo,gizmoId:d}),c.skipUpload||(u?await MSe(e,t,n,g,s,u,c.gizmoId,a,o):await yb(t,n,a,o,g,gR(e),v))}},createFileCompleted:(e,t,n,r,s)=>{const a=e.getState().files,o=a.findIndex(l=>l.tempId===t),c=a[o];if(o>=0&&c.status===Kr.Uploading){const l=[...a];l.splice(o,1,{...c,progress:10,fileId:n,cdnUrl:r,contextConnector:s}),e.setState({files:l})}},updateProgress:(e,t,n)=>{const r=e.getState().files,s=r.findIndex(o=>o.tempId===t),a=r[s];if(s>=0&&a.status===Kr.Uploading){const o=[...r];o.splice(s,1,{...a,progress:n}),e.setState({files:o})}},uploadCompleted:(e,t,n,r,s,a)=>{const o=e.getState().files,c=o.findIndex(l=>l.tempId===t);if(c>=0&&o[c].status===Kr.Uploading&&o[c].fileId!=null){const l=o[c],u=[...o],d={...l,tempId:t,status:Kr.Ready,progress:100,fileSpec:{name:l.file.name,id:l.fileId,size:l.file.size,contextConnectorInfo:l.contextConnectorInfo,mimeType:s?.mimeType??xb(l.file),...r||{},...s||{}}};u.splice(c,1,d);const f={...e.getState().connectorFileData};a&&(f[a?.file_id]=a),e.setState({files:u,connectorFileData:f}),E.logEvent(P.uploadFileCompleted,{status:l.status,fileId:l.fileId,contextConnector:l.contextConnector??"local"})}},remove:(e,t,n,r,s,a)=>{const o=e.getState().files,c=o.findIndex(l=>l.tempId===t);if(c>=0){const l=o[c];n==="error"?E.logEvent(P.uploadFileError,{status:l.status,fileId:l.fileId,client:"web",errorClassName:r??"undefined",useCaseType:s,uploadStatus:a??"undefined",contextConnector:l.contextConnector}):E.logEvent(P.removeFile,{status:l.status,fileId:l.fileId});const u=[...o];u.splice(c,1),e.setState({files:u})}}},gR=e=>({onFileCreated:hn.createFileCompleted.bind(null,e),onFileUploadProgress:hn.updateProgress.bind(null,e),onFileUploaded:hn.uploadCompleted.bind(null,e),onError:hn.remove.bind(null,e)}),gk=z({maxUploadsAtATime:{id:"useFilePickerState.maxUploadsAtATime",defaultMessage:"Unable to upload {fileName}. Max {maxUploads} uploads at a time"},duplicateFileAttached:{id:"useFilePickerState.duplicateFileAttached",defaultMessage:"Unable to upload {fileName} because an identical file has already been attached to this message."}});function bLe(e,t,n,r){let s=kSe.getReadyFiles(e.getState());r?.kind===Me.GizmoMagicCreate?s=s.filter(m=>m.gizmoId!=null):s=s.filter(m=>m.gizmoId==null);let a=t??"";const o=[],c=[],l=yd(n,r),d=hN(n,r).length>0,f=l===Je.Interpreter||l===Je.Retrieval||l===Je.ContextConnector;return s.forEach(({fileSpec:m})=>{if(f){const h=m.contextConnectorInfo;o.push({id:m.id,size:m.size,name:m.name,context_connector_info:h?{context_connector:h?.contextConnector,source_url:h?.sourceUrl,synthetic_extension:h?.syntheticExtension??null,type:h?.type}:void 0,mime_type:m.mimeType,width:"width"in m?m.width:void 0,height:"height"in m?m.height:void 0,file_token_size:m.fileTokenSize})}d&&"width"in m&&"height"in m&&c.push({content_type:Hi.ImageAssetPointer,asset_pointer:Hue(m.id),size_bytes:m.size,width:m.width,height:m.height})}),c.length>0&&(c.push(t??""),a={content_type:Qt.MultimodalText,parts:c}),{content:a,attachments:o}}async function wLe({clientThreadId:e,currentRequestId:t,queryClient:n,isHistoryAndTrainingDisabled:r}){const s=D.getServerThreadId(e),a=D.getTree(e);!a.hasReceivedServerCompletion&&!r&&a.getParent(t).metadata?.errCode!==Ln.ContentPolicy&&setTimeout(()=>{Cv.onCreateFinished(n,s,r)},500),s&&q.checkGate("3922476776")&&await K.stopConversationProcess(s),na.abortRequest(t)&&D.updateTree(e,c=>{const l=D.getThreadCurrentLeafId(e);c.updateNodeMessageMetadata(l,{finish_details:{type:"interrupted"}})})}const SLe=Ie(e=>({targetedContent:void 0,setTargetedContent:t=>{e({targetedContent:t})}}));function vR(){return window.matchMedia("(pointer: coarse) and (hover: none)").matches}function CLe(){return vR()}function TLe(){const{eligible:e,isLoading:t,markAsViewed:n}=Be(je.NewOnboardingFlow),[r,s]=p.useState(!0),a=Ms();return{isOpen:e&&r&&!a,isLoading:t,setIsOpen:s,markAsViewed:n}}var bb=(e=>(e.SonicHome="sonic.web.home",e.SonicServer="sonic.ssr.search",e.SonicBusinessesMap="sonic.web.businessesMap",e.ChatPageLoad="chatgpt.web.pageLoad",e.CompletionRequest="chatgpt.web.completionRequest",e.ProofOfWork="chatgpt.web.proofOfWork",e.GetDiffedDoc="chatgpt.web.canvas.getDiffedDoc",e.GetPositionTransformer="chatgpt.web.canvas.getPositionTransformer",e))(bb||{});class _Se{namespace;expectedTimingLogs;expectedTimingLogTimeouts={};startMs=-1;lastLogMs=-1;loggedTimings=new Set;timingBlocks={};debug=!1;constructor(t,n){this.namespace=t,this.expectedTimingLogs=n?.expectedTimingLogs??[],this.debug=n?.debug??!1,this.reset()}reset(){this.startMs=this.lastLogMs=performance.now(),this.timingBlocks={},this.loggedTimings=new Set;for(const t of Object.values(this.expectedTimingLogTimeouts))clearTimeout(t);this.expectedTimingLogTimeouts={};for(const t of this.expectedTimingLogs){const n=setTimeout(()=>{ie.addAction(`${this.namespace}.${t.name}.timed_out`,t.initializationInfo??{})},t.expectedInMs);this.expectedTimingLogTimeouts[t.name]=n,this.debug&&console.debug(`[DatadogProfiler] Expecting ${this.namespace}.${t.name} to be logged within ${t.expectedInMs}ms`)}}logTiming(t,n={fromLastLog:!1}){if(this.loggedTimings.has(t)){console.warn(`[DatadogProfiler] Timing ${this.namespace}.${t} already logged`);return}const r=performance.now()-(n.fromLastLog?this.lastLogMs:this.startMs);ie.addAction(`${this.namespace}.${t}`,{durationMs:r,...n.context}),this.lastLogMs=performance.now(),this.loggedTimings.add(t),t in this.expectedTimingLogTimeouts&&(clearTimeout(this.expectedTimingLogTimeouts[t]),delete this.expectedTimingLogTimeouts[t]),this.debug&&console.debug(`[DatadogProfiler] ${this.namespace}.${t}: ${r}ms`)}startBlock(t){this.timingBlocks[t]=performance.now()}endBlock(t,n={throwError:!0}){const r=this.timingBlocks[t];if(r===void 0&&n.throwError)throw new Error(`Block "${t}" not started`);const s=performance.now()-r;ie.addAction(`${this.namespace}.${t}`,{durationMs:s}),delete this.timingBlocks[t]}}const pc={};function ASe({namespace:e,opts:t}){return pc[e]!==void 0&&ie.addError(`Profiler already exists for namespace ${e}`),pc[e]=new _Se(e,t)}function yR({namespace:e}){return pc[e]}function PSe({namespace:e,opts:t}){let n=pc[e];return n===void 0&&(n=pc[e]=ASe({namespace:e,opts:t})),n}function kLe({namespace:e,opts:t}){const[n]=p.useState(()=>PSe({namespace:e,opts:t}));return n}var Pm=(e=>(e.Personal="chat",e.Workspace="workspace",e.Team="team",e))(Pm||{});const jSe=({dismissLink:e,onLogInButtonClick:t,onSignUpButtonClick:n,subtitle:r,title:s})=>{const o=$o()?"center":"bottom",c=Jo(),l=Ta(vk.signUpCta),u=i.jsx(ee,{as:"button",size:"large",color:c?"secondary":"primary",onClick:n,fullWidth:!0,children:i.jsx(S,{...l})}),d=i.jsx(ee,{as:"button",size:"large",color:c?"primary":"secondary",fullWidth:!0,onClick:t,children:i.jsx(S,{...vk.logInCta})}),f=c?[d,u]:[u,d];return i.jsx(Te,{isOpen:!0,onClose:we,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:o,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",children:i.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:px-10 sm:pb-10 sm:pt-12",children:[i.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:i.jsx(S,{...s})}),i.jsx("p",{className:"mb-6 text-center text-token-text-secondary",children:i.jsx(S,{...r})}),i.jsx("div",{className:"flex w-full flex-col gap-2 sm:gap-2.5",children:f}),e?i.jsx("a",{href:"#",className:"mt-5 cursor-pointer text-sm font-semibold text-token-text-secondary underline",onClick:m=>{m.preventDefault(),e.onClick()},children:i.jsx(S,{...e.text})}):null]})})},vk=z({signUpCta:{id:"NoAuthModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthModal.logInCta",defaultMessage:"Log in"}});function wb(){return on.getCookie(Zt.HasLoggedInBefore)!=null}function MLe(){const{value:e}=at("2173548801"),{layer:t}=bE("3637408529");return e?t.get("is_anon_chat_enabled",!1):!1}const yk=10,xR=({type:e="default"}={})=>{const[t,n]=p.useState(()=>sessionStorage.getItem(He.NoAuthHasDismissedSoftRateLimitModal)!=null),{isUnauthenticated:r,isLoading:s}=bt(),a=wb(),o=LO(g=>g.userMessageCount),c=p.useRef(o),l=o>=yk,[u,d]=p.useState(!1);p.useEffect(()=>{c.current<o&&(c.current=o,o===yk&&d(!0))},[o]);const f=r&&l&&(e==="default"||u)&&!t&&!a&&!s,m=p.useCallback(()=>{f&&(E.logEvent(P.noAuthSoftRateLimitModalShown),q.logEvent("chatgpt_no_auth_soft_rate_limit_modal_shown"))},[f]),h=()=>{n(!0),sessionStorage.setItem(He.NoAuthHasDismissedSoftRateLimitModal,"true")};return s?{isLoading:!0,isOpen:null,onClose:null,onMount:null}:{isLoading:!1,isOpen:f,onClose:h,onMount:m}},ISe=({onClose:e})=>{const t=Jt(),n=Jo(),{isOpen:r,onClose:s,onMount:a}=xR();return p.useEffect(()=>{a?.()},[a]),r?i.jsx(jSe,{dismissLink:{text:ru.stayLoggedOutLink,onClick:()=>{E.logEvent(P.noAuthSoftRateLimitModalStayLoggedOutLinkClicked),q.logEvent("chatgpt_no_auth_soft_rate_limit_modal_stay_logged_out_link_clicked"),e(),s()}},onLogInButtonClick:()=>{t({authType:"login",callback:o=>{E.logLogInButtonClicked({provider:o,location:"No Auth Soft Rate Limit Modal"})}})},onSignUpButtonClick:()=>{t({authType:"signup",callback:o=>{E.logSignUpButtonClicked({provider:o,location:"No Auth Soft Rate Limit Modal"})}})},subtitle:n?ru.logInSubtitle:ru.signUpSubtitle,title:ru.title}):null},ru=z({title:{id:"NoAuthSoftRateLimitModal.title",defaultMessage:"Thanks for trying ChatGPT"},signUpSubtitle:{id:"zpngdW",defaultMessage:"Sign up or log in to get smarter responses, upload files and images, and more."},logInSubtitle:{id:"iVew+I",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}}),xk="has-dismissed-welcome-back-modal",bR=()=>{const[e,t]=p.useState(()=>sessionStorage.getItem(xk)!=null),{layer:n}=_n("3637408529"),r=n.get("is_no_auth_welcome_back_modal_enabled",!1),{isUnauthenticated:s,isLoading:a}=bt(),o=wb(),c=()=>{t(!0),sessionStorage.setItem(xk,"true")};return a?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:s&&r&&!e&&o,onClose:c}},NSe=({onClose:e})=>{const t=Jt(),n=$o(),r=Ta(bi.signUpCta),s=n?"center":"bottom",{isOpen:a,onClose:o}=bR();return p.useEffect(()=>{a&&(E.logEvent(P.noAuthWelcomeBackModalShown),q.logEvent("chatgpt_no_auth_welcome_back_modal_shown"))},[a]),a?i.jsx(Te,{isOpen:!0,onClose:we,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,size:"custom",className:"max-w-[373px] sm:max-w-[400px]",position:s,children:i.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8 sm:p-10",children:[i.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:i.jsx(S,{...bi.title})}),i.jsx("p",{className:"mb-6 text-center text-lg text-token-text-secondary",children:i.jsx(S,{...bi.subtitle})}),i.jsx(ee,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"welcome-login-button",onClick:()=>{t({authType:"login",callback:c=>{E.logLogInButtonClicked({provider:c,location:"No Auth Welcome Back Modal"})}})},children:i.jsx(S,{...bi.logInCta})}),i.jsx(ee,{as:"button",size:"large",color:"secondary",fullWidth:!0,className:"mb-5",onClick:()=>{t({authType:"signup",callback:c=>{E.logSignUpButtonClicked({provider:c,location:"No Auth Welcome Back Modal"})}})},children:i.jsx(S,{...r})}),i.jsx("a",{href:"#",className:"cursor-pointer font-semibold text-token-text-secondary underline sm:text-sm",onClick:c=>{c.preventDefault(),E.logEvent(P.noAuthWelcomeBackModalStayLoggedOutLinkClicked),q.logEvent("chatgpt_no_auth_welcome_back_modal_stay_logged_out_link_clicked"),e(),o()},"data-testid":"dismiss-welcome",children:i.jsx(S,{...bi.stayLoggedOutLink})})]})}):null},bi=z({title:{id:"NoAuthWelcomeBackModal.title",defaultMessage:"Welcome back"},subtitle:{id:"7WQi5y",defaultMessage:"Log in or sign up to get smarter responses, upload files and images, and more."},signUpCta:{id:"NoAuthWelcomeBackModal.signUpCta",defaultMessage:"Sign up"},logInCta:{id:"NoAuthWelcomeBackModal.logInCta",defaultMessage:"Log in"},stayLoggedOutLink:{id:"NoAuthWelcomeBackModal.stayLoggedOut",defaultMessage:"Stay logged out"}});function wR(){const e=p.useRef(OSe()),t=Jt(),n=p.useCallback(()=>{e.current?E.logEventWithStatsig(P.noAuthPunchOutSignInAsModalShown,"chatgpt_no_auth_punch_out_sign_in_as_modal_shown"):console.warn("PunchOutSignInAsModal is being mounted without punchOutRequireLoginInfo")},[]);return{onCancelButtonClick:()=>{E.logEventWithStatsig(P.noAuthPunchOutSignInAsModalCancelButtonClicked,"chatgpt_no_auth_punch_out_sign_in_as_modal_cancel_button_clicked"),Ev()},onContinueButtonClick:({token:a})=>{E.logEventWithStatsig(P.noAuthPunchOutSignInAsModalContinueButtonClicked,"chatgpt_no_auth_punch_out_sign_in_as_modal_continue_button_clicked"),Ev(),t({authType:"login",callback:o=>{E.logLogInButtonClicked({location:"No Auth Punch Out Sign In As Modal",provider:o})},callbackUrl:`/continue_from_api?token=${a}`})},onMount:n,punchOutRequireLoginInfo:e.current}}function OSe(){if(typeof window>"u")return null;const e=on.getCookie(Zt.PunchOutRequireLoginInfo);if(!e)return null;try{const t=JSON.parse(e);return gL(t,vL),t}catch(t){Ev(),t instanceof yL?console.warn("Invalid struct for punch out require login info",t):ie.addError("Failed to parse punch out require login info",{error:t})}return null}function Ev(){on.deleteCookie(Zt.PunchOutRequireLoginInfo)}const RSe=({onClose:e})=>{const{onCancelButtonClick:t,onContinueButtonClick:n,onMount:r,punchOutRequireLoginInfo:s}=wR(),o=ks()?"medium":"large";if(p.useEffect(r,[r]),!s)return null;const{email:c}=s;return i.jsx(Te,{isOpen:!0,noPadding:!0,onClose:we,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:i.jsxs("div",{className:"flex flex-col p-6",children:[i.jsx("div",{className:"mb-6 text-center text-xl font-medium md:text-left",children:i.jsx(S,{id:"0e8g2r",defaultMessage:"Sign in as {email}?",values:{email:c}})}),i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[i.jsx(ee,{color:"primary",size:o,onClick:()=>n(s),children:i.jsx(S,{...yt.continueButtonText})}),i.jsx(ee,{color:"secondary",size:o,onClick:()=>{t(),e()},children:i.jsx(S,{...yt.cancelButtonText})})]})]})})};function xl(){return mr()?.includes(rf.Sunshine)??!1}function Sb(){const{data:e}=qi(ra.Sunshine),t=xl();return!!e&&t}function DSe(){return mr()?.includes(rf.MemoryInSearch)??!1}function ELe(){const e=Sb(),{data:t}=qi(ra.MemoryInSearch),n=DSe();return e&&!!t&&n}function _Le(){return ot("645560164").value??!1}function LSe(){return ot("1611573287").value??!1}function $Se(){const e=Sb(),t=LSe();return e&&t}const SR=je.MemoryOnboarding;function CR(){const e=xl(),{eligible:t,isLoading:n}=Be(SR);return{eligible:t&&e,isLoading:n}}function Th({icon:e,title:t,description:n}){return i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"mt-1",children:e}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-lg font-semibold",children:t}),i.jsx("p",{className:"mt-1 text-sm text-token-text-secondary",children:n})]})]})}function FSe({onClose:e}){const t=BSe(),n=xL(),r=L(),{markAsViewed:s}=Be(SR),a=p.useCallback(()=>{s(),e()},[s,e]);return i.jsx(Te,{isOpen:!0,onClose:we,size:"custom",className:"max-w-xl",type:"success",title:r.formatMessage(Qn.title),secondaryButton:t?i.jsx(Ke.Button,{onClick:async()=>{try{await n.mutateAsync({setting:ra.Sunshine,value:!1}),a()}catch{}},title:r.formatMessage(Qn.notNow),color:"secondary"}):null,primaryButton:t?i.jsx(Ke.Button,{onClick:async()=>{try{await n.mutateAsync({setting:ra.Sunshine,value:!0}),a()}catch{}},title:r.formatMessage(Qn.enable),color:"primary"}):i.jsx(Ke.Button,{onClick:a,title:r.formatMessage(Qn.continue),color:"primary"}),children:i.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[i.jsx(Th,{icon:i.jsx(QE,{}),title:r.formatMessage(Qn.bulletTitle1),description:r.formatMessage(Qn.bulletDescription1)}),i.jsx(Th,{icon:i.jsx(ZE,{}),title:r.formatMessage(Qn.bulletTitle2),description:i.jsx(S,{...Qn.bulletDescription2,values:{learnMoreLink:o=>i.jsx("a",{href:"https://help.openai.com/en/articles/8590148-memory-faq",target:"_blank",rel:"noreferrer",className:"cursor-pointer underline",children:o})}})}),i.jsx(Th,{icon:i.jsx(H$,{}),title:r.formatMessage(Qn.bulletTitle3),description:r.formatMessage(Qn.bulletDescription3)})]})})}function BSe(){const{value:e}=at("1542198993");return e}const Qn=z({title:{id:"MemoryOnboardingModal.title.1",defaultMessage:"ChatGPT now has memory"},bulletTitle1:{id:"MemoryOnboardingModal.bulletTitle1",defaultMessage:"Keep the conversation going"},bulletDescription1:{id:"MemoryOnboardingModal.bulletDescription1.1",defaultMessage:"ChatGPT will automatically remember details and preferences you share in your conversations, carrying them between chats."},bulletTitle2:{id:"MemoryOnboardingModal.bulletTitle2.1",defaultMessage:"A smarter assistant"},bulletDescription2:{id:"MemoryOnboardingModal.bulletDescription2.2",defaultMessage:"Memories are used to give you more relevant responses and may be used to train our models if you have model training enabled. <learnMoreLink>Learn more</learnMoreLink>"},bulletTitle3:{id:"MemoryOnboardingModal.bulletTitle3",defaultMessage:"You're in control"},bulletDescription3:{id:"MemoryOnboardingModal.bulletDescription3.2",defaultMessage:"Review or clear specific memories, restart from scratch, or turn the feature on or off in settings."},continue:{id:"MemoryOnboardingModal.continue",defaultMessage:"Continue"},notNow:{id:"MemoryOnboardingModal.notNow",defaultMessage:"Not now"},enable:{id:"MemoryOnboardingModal.enable",defaultMessage:"Enable"}});var Fs=(e=>(e.paid_users_only="paid_users_only",e.unsupported_app_version="unsupported_app_version",e))(Fs||{});const TR=()=>{const{value:e,isLoading:t}=ot("2335877601"),{value:n,isLoading:r}=ot("2441614537"),{doesUserHaveAnyAccountsWithPlusFeatures:s,isLoading:a}=fa();return Eo?t||r||a?{isLoading:!0,isOpen:null,modalType:null,onClose:null}:e?{isLoading:!1,isOpen:!0,modalType:"unsupported_app_version",onClose:()=>{}}:!s&&!n?{isLoading:!1,isOpen:!0,modalType:"paid_users_only",onClose:()=>{}}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}:{isLoading:!1,isOpen:!1,modalType:null,onClose:null}},ALe="chatgpt",PLe="oauth_complete",USe="ms-windows-store://pdp/?productid=9nt1r1c2hh7j",VSe="https://apps.microsoft.com/detail/9nt1r1c2hh7j",GSe=()=>{const e="center",{isOpen:t,modalType:n}=TR(),r=ze(),s=Y9(),a=QG();if(p.useEffect(()=>{t&&n!==void 0&&E.logEvent(P.sidetronBlockingModalShown,{modalType:n})},[t,n]),!t)return null;function o(){switch(E.logEvent(P.sidetronModalActionClicked,{modalType:n}),n){case Fs.unsupported_app_version:window.open(a?USe:VSe,"_blank");return;case Fs.paid_users_only:Rr(r,"Upper right settings menu");return;case null:n0.warn("No modal type provided for DesktopBlockingModal");return}}function c(){switch(n){case Fs.unsupported_app_version:return WSe;case Fs.paid_users_only:return bk;case null:return bk}}function l(){switch(n){case Fs.unsupported_app_version:return!1;case Fs.paid_users_only:return!0;case null:return!1}}return i.jsx(Te,{isOpen:!0,onClose:we,shouldIgnoreClickOutside:!0,showCloseButton:!1,type:"success",noPadding:!0,position:e,children:i.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[i.jsx("p",{className:"mb-1 text-center text-2xl font-semibold",children:i.jsx(S,{...c().title})}),i.jsx("p",{className:"mb-6 text-center text-lg text-token-text-secondary",children:i.jsx(S,{...c().subtitle})}),i.jsx(ee,{as:"button",size:"large",color:"primary",fullWidth:!0,className:"mb-2 sm:mb-3","data-testid":"desktop-blocking-modal-action-button",onClick:o,children:i.jsx(S,{...c().cta})}),l()&&i.jsxs("span",{children:[s,"  ",i.jsx("a",{href:"#",className:"cursor-pointer font-semibold text-token-text-secondary underline sm:text-sm",onClick:u=>{u.preventDefault(),E.logEvent(P.sidetronModalLogoutClicked,{modalType:n}),hf()},"data-testid":"desktop-blocking-modal-logout",children:i.jsx(S,{...c().logout})})]})]})})},bk=z({title:{id:"DesktopBlockingModal.paidTitle",defaultMessage:"Upgrade to use Windows app"},subtitle:{id:"DesktopBlockingModal.paidSubtitle",defaultMessage:"The Windows app is currently available for Plus, Team, Enterprise, and Edu plans."},cta:{id:"DesktopBlockingModal.paidUpgradeCta",defaultMessage:"See Plans"},logout:{id:"DesktopBlockingModal.paidLogout",defaultMessage:"Log out"}}),WSe=z({title:{id:"DesktopBlockingModal.sunsettingTitle",defaultMessage:"Update required"},subtitle:{id:"DesktopBlockingModal.sunsettingSubtitle",defaultMessage:"A new version of ChatGPT Windows is available and must be installed to continue."},cta:{id:"DesktopBlockingModal.sunsettingCta",defaultMessage:"Get Download"},logout:{id:"DesktopBlockingModal.sunsettingLogout",defaultMessage:"Log out"}}),HSe=({className:e})=>i.jsxs("div",{className:A("flex-column flex gap-[10px]",e),children:[i.jsx("div",{className:"relative flex h-[62px] w-[88px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-gradient-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:i.jsx("span",{className:"absolute bottom-[8px] right-[12px] text-[12px] font-semibold leading-[15px] tracking-[-0.197499px] text-token-text-secondary",children:i.jsx(S,{...wk.alt})})}),i.jsx("div",{className:"relative flex h-[62px] w-[232px] items-center justify-center rounded-2xl border border-[rgba(0,0,0,0.18)] bg-[#F1F1F1] bg-gradient-to-b from-white/0 to-white/20 shadow-[0_1px_1px_rgba(0,0,0,0.03),_0_4.93747px_9.05202px_rgba(0,0,0,0.11)] dark:bg-black dark:to-white/15",children:i.jsx("span",{className:"absolute bottom-[8px] right-[12px] text-[12px] font-semibold leading-[15px] tracking-[-0.197499px] text-token-text-secondary",children:i.jsx(S,{...wk.space})})})]}),wk=z({alt:{id:"DesktopOnboardingKeyboardIllustration.altKeyboardKeyLabel",defaultMessage:"alt"},space:{id:"DesktopOnboardingKeyboardIllustration.spaceKeyboardKeyLabel",defaultMessage:"space"}}),zSe=je.hasSeenWindowsAppOnboarding,kR=()=>{const{eligible:e,markAsViewed:t,isLoading:n}=Be(zSe),{value:r,isLoading:s}=ot("1454021170");return Eo?n||s?{isLoading:!0,isOpen:null,onClose:null}:{isLoading:!1,isOpen:e&&r,onClose:t}:{isLoading:!1,isOpen:!1,onClose:null}},qSe=({onClose:e})=>{const{isOpen:t,onClose:n}=kR();return t?(q.logEvent("chatgpt_sidetron_onboarding_nux_shown"),i.jsx(Te,{isOpen:!0,onClose:we,type:"success",noPadding:!0,position:"center",className:"max-w-[552px] p-14 sm:max-w-[552px]",children:i.jsxs("div",{className:"flex flex-col items-center justify-center px-6 py-8",children:[i.jsx(mo,{className:"absolute right-4 top-4",onClick:()=>{e(),n()}}),i.jsx("p",{className:"mb-3 text-center text-2xl font-bold",children:i.jsx(S,{...su.title})}),i.jsx("p",{className:"text-center text-lg text-token-text-tertiary",children:i.jsx(S,{...su.subtitle})}),i.jsx(HSe,{className:"my-8"}),i.jsx("p",{className:"mb-2 text-center text-lg font-semibold",children:i.jsx(S,{...su.keyboardShortcut})}),i.jsx("p",{className:"text-center text-lg text-token-text-tertiary",children:i.jsx(S,{...su.keyboardShortcutHint})})]})})):null},su=z({title:{id:"DesktopOnboardingModal.title",defaultMessage:"Quickly access ChatGPT"},subtitle:{id:"DesktopOnboardingModal.subtitle",defaultMessage:"Use a shortcut to ask questions, upload files, or take screenshots from anywhere on your computer."},keyboardShortcut:{id:"DesktopOnboardingModal.keyboardShortcut1",defaultMessage:"Press Alt+Space to open the the companion window"},keyboardShortcutHint:{id:"DesktopOnboardingModal.keyboardShortcutHint",defaultMessage:"You can change this shortcut in Settings."}});function MR(){return i.jsx("hr",{className:"w-full border-token-border-xheavy"})}const Sk=({value:e,isSelected:t,onSelect:n,workspacePlanType:r})=>i.jsxs("button",{className:"mb-2 flex w-full cursor-pointer items-center justify-between outline-none lg:text-left",onClick:()=>n(e),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[e==="transfer"?i.jsx(JE,{className:"icon-sm"}):i.jsx(jc,{className:"icon-sm"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:e==="transfer"?i.jsx(S,{...Ze.initialModalTransferLabel}):i.jsx(S,{...Ze.initialModalExportLabel})}),i.jsx("div",{className:"text-sm text-token-text-secondary",children:e==="transfer"?r===zi.EDU?i.jsx(S,{...Ze.initialModalTransferEduDetail}):i.jsx(S,{...Ze.initialModalTransferEnterpriseDetail}):i.jsx(S,{...Ze.initialModalExportDetail})})]})]}),i.jsx("div",{className:A({"flex h-4 w-4 flex-shrink-0 rounded-full border align-middle":!0,"bg-black":t}),children:t&&i.jsx(vf,{className:"m-auto h-3 w-3 scale-x-75 stroke-[4] text-white"})})]}),YSe=({setCurrentStep:e,destinationWorkspaceName:t,destinationWorkspaceProfilePictureUrl:n,destinationWorkspacePlanType:r})=>{const[s,a]=p.useState(""),o=L(),c=async()=>{s==="transfer"?e(1):s==="export"&&e(2)},l=r===zi.EDU?o.formatMessage(Ze.initialModalEduTitle):o.formatMessage(Ze.initialModalEnterpriseTitle);return i.jsx(Te,{isOpen:!0,onClose:we,type:"warning",title:l,primaryButton:i.jsx(lr,{title:o.formatMessage(Ze.initialModalConfirm),onClick:c,color:"primary",className:"ml-4"}),children:i.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[i.jsxs("div",{className:"flex w-full items-center gap-4",children:[i.jsx(dm,{src:n,size:"large"}),i.jsx("div",{className:"font-semibold",children:t})]}),i.jsxs("div",{className:"pb-4",children:[i.jsx("h3",{className:"mb-2 text-base font-semibold",children:i.jsx(S,{...Ze.initialModalExplanation})}),i.jsx("div",{className:"mb-2 text-sm text-token-text-secondary",children:i.jsx(S,{...Ze.initialModalMustChoose})}),i.jsxs("ul",{className:"list-disc pl-5 text-sm text-token-text-secondary",children:[i.jsx("li",{className:"mb-2",children:i.jsx(S,{...Ze.initialModalDataDelete})}),i.jsx("li",{children:i.jsx(S,{...Ze.initialModalBilling})})]})]}),i.jsx(Sk,{value:"transfer",isSelected:s==="transfer",onSelect:a,workspacePlanType:r}),i.jsx(MR,{}),i.jsx(Sk,{value:"export",isSelected:s==="export",onSelect:a,workspacePlanType:r})]})})},Ck=({currentStep:e,setCurrentStep:t,performAction:n})=>{const r=L();return i.jsx(Te,{isOpen:!0,onClose:we,type:"success",title:r.formatMessage(Ze.selectedModalTitle),primaryButton:i.jsx(lr,{title:e===1?r.formatMessage(Ze.transferModalConfirm):r.formatMessage(Ze.exportModalConfirm),color:e===2?"danger":"primary",onClick:n}),secondaryButton:i.jsx(lr,{title:r.formatMessage(Ze.selectedModalBack),color:"secondary",onClick:async()=>{t(0)}}),children:i.jsxs("div",{className:"pb-4",children:[i.jsx("h3",{className:"mb-2 text-base font-semibold",children:e===1?i.jsx(S,{...Ze.transferModalConfirmTitle}):i.jsx(S,{...Ze.exportModalConfirmTitle})}),e===1?i.jsx("div",{className:"text-sm text-token-text-secondary",children:i.jsx(S,{...Ze.transferModalConfirmLabel})}):i.jsxs("ul",{className:"list-disc pl-5 text-sm text-token-text-secondary",children:[i.jsx("li",{className:"mb-1",children:i.jsx(S,{...Ze.exportModalChatHistoryLabel})}),i.jsx("li",{className:"mb-1",children:i.jsx(S,{...Ze.exportModalDeleteLabel})}),i.jsx("li",{className:"mb-1",children:i.jsx(S,{...Ze.exportModalChatDownloadLabel})})]}),i.jsx("h4",{className:"pt-5 font-semibold text-token-text-primary",children:e==1?i.jsx(S,{...Ze.transferModalProceed}):i.jsx(S,{...Ze.exportModalProceed})})]})})};function KSe(){const[e,t]=p.useState(0),n=m0();if(!n)return null;switch(e){case 0:return i.jsx(YSe,{setCurrentStep:t,destinationWorkspaceName:n.destinationWorkspaceName,destinationWorkspaceProfilePictureUrl:n.destinationWorkspaceProfilePictureUrl,destinationWorkspacePlanType:n.destinationWorkspacePlanType});case 1:return i.jsx(Ck,{currentStep:e,setCurrentStep:t,performAction:async()=>{(await K.transferAccount(n.destinationWorkspaceId)).success&&(window.location.href="/")}});case 2:return i.jsx(Ck,{currentStep:e,setCurrentStep:t,performAction:async()=>{(await K.submitExportAndDeactivate()).success&&(window.location.href="/")}})}}const Ze=z({initialModalEnterpriseTitle:{id:"initialModal.title",defaultMessage:"You've been added to a ChatGPT Enterprise workspace"},initialModalEduTitle:{id:"initialModal.eduTitle",defaultMessage:"You've been added to a ChatGPT Edu workspace"},initialModalExplanation:{id:"initialModal.explanation",defaultMessage:"What should we do with your existing workspace?"},initialModalMustChoose:{id:"initialModal.mustChoose",defaultMessage:"In order to join this new workspace, you must choose to either migrate or export your existing chat history."},initialModalDataDelete:{id:"initialModal.dataDelete",defaultMessage:"All Plugins and Custom Instructions in the existing workspace will be deleted."},initialModalBilling:{id:"initialModal.billing",defaultMessage:"If you have a ChatGPT Plus subscription, it will be canceled and refunded upon completing this step."},initialModalConfirm:{id:"initialModal.confirm",defaultMessage:"Continue"},initialModalTransferLabel:{id:"initialModal.transferLabel",defaultMessage:"Transfer existing chat history and GPTs"},initialModalTransferEnterpriseDetail:{id:"initialModal.initialModalTransferEnterpriseDetail",defaultMessage:"Merge into the Enterprise workspace"},initialModalTransferEduDetail:{id:"initialModal.initialModalTransferEduDetail",defaultMessage:"Merge into the Edu workspace"},initialModalExportLabel:{id:"initialModal.exportLabel",defaultMessage:"Export and delete existing chat history"},initialModalExportDetail:{id:"initialModal.exportDetail",defaultMessage:"Delete the existing workspace"},selectedModalTitle:{id:"selectedModal.title",defaultMessage:"Are you sure?"},selectedModalBack:{id:"selectedModal.back",defaultMessage:"Back"},transferModalConfirmTitle:{id:"transferModal.confirmTitle",defaultMessage:"Transferring chat history is permanent and can't be undone."},transferModalConfirmLabel:{id:"transferModal.confirmLabel",defaultMessage:"Your chat history and GPTs will be transferred to the new workspace and your existing workspace will be deleted."},transferModalConfirm:{id:"transferModal.confirm",defaultMessage:"Confirm transfer"},transferModalProceed:{id:"transferModal.proceed",defaultMessage:'To proceed, click "Confirm transfer" below.'},exportModalConfirmTitle:{id:"exportModal.confirmTitle",defaultMessage:"Deleting chat history is permanent and can't be undone."},exportModalChatHistoryLabel:{id:"exportModal.chatHistoryLabel",defaultMessage:"Your chat history will be included in the export."},exportModalDeleteLabel:{id:"exportModal.deleteLabel",defaultMessage:"Your GPTs, Plugins and Custom Instructions will be deleted."},exportModalChatDownloadLabel:{id:"exportModal.chatDownloadLabel",defaultMessage:"The data will be sent to your registered email in a downloadable file. The download link will expire 24 hours after you receive it."},exportModalConfirm:{id:"exportModal.confirm",defaultMessage:"Export and delete workspace"},exportModalProceed:{id:"exportModal.proceed",defaultMessage:'To proceed, click "Export and delete workspace" below.'}});function XSe(){const e=wE(),t=L();return e!==null?i.jsx(Te,{isOpen:!0,onClose:we,type:"warning",size:"custom",className:"max-w-3xl",title:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-lg",children:i.jsx(S,{...au.title})}),i.jsx("div",{className:"text-sm font-normal",children:i.jsx(S,{...au.subtitle})})]}),icon:ya,primaryButton:i.jsx(Ke.Button,{onClick:async()=>{const r=await a0.signOut({redirect:!1,callbackUrl:`/auth/login?next=${encodeURIComponent(location.pathname+location.search+location.hash)}`});location.href=r.url},color:"primary",title:t.formatMessage(au.signOutButton)}),children:i.jsx("div",{className:"flex flex-col space-y-4",children:i.jsx("div",{children:i.jsx(S,{...au.detail,values:{email:i.jsx("span",{className:"font-semibold",children:e.userEmail})}})})})}):null}const au=z({title:{id:"AllWorkspacesBlockedModal.title",defaultMessage:"Access Denied"},subtitle:{id:"AllWorkspacesBlockedModal.subtitle",defaultMessage:"Your IT administrator has blocked access to this workspace"},detail:{id:"AllWorkspacesBlockedModal.detail",defaultMessage:"It looks like youre either trying to login using a personal email or you dont have access to a workspace thats been approved by your IT administrator. Please use an authorized work email to access your workspace, or contact your IT administrator for access."},signOutButton:{id:"AllWorkspacesBlockedModal.signOutButton",defaultMessage:"Sign Out"}});function QSe(){const{data:e}=i0(),t=Jt(),n=e?.accountItems.find(c=>c.ssoConnectionName),r=e?.accountItems.find(c=>!c.ssoConnectionName),s=!!n,a=!s&&!!r,o=()=>{const c=n?.ssoConnectionName&&s?{connection:n.ssoConnectionName}:void 0;t({authType:"login",additionalAuthParams:c})};return i.jsx(Te,{isOpen:!0,onClose:we,type:"warning",size:"custom",className:"max-w-3xl",title:i.jsx("div",{className:"flex flex-col",children:i.jsx("div",{className:"text-lg",children:i.jsx(S,{...Os.title})})}),icon:ya,primaryButton:i.jsx(Ke.Button,{onClick:()=>{E.logLogOutButtonClicked({location:"invalid_account_modal"}),hf()},color:"primary",children:i.jsx(S,{...Os.logOut})}),secondaryButton:s||a?i.jsx(Ke.Button,{onClick:o,color:"primary",children:i.jsx(S,{...s?Os.ssoButton:Os.noSSOButton})}):null,children:i.jsx("div",{className:"flex flex-col space-y-4",children:i.jsxs("div",{children:[i.jsx("p",{children:i.jsx(S,{...Os.description})}),i.jsx("br",{}),s&&i.jsx("p",{children:i.jsx(S,{...Os.ssoSuggestion})}),a&&i.jsx("p",{children:i.jsx(S,{...Os.noSSOSuggestion})})]})})})}const Os=z({title:{id:"sMC0Cy",defaultMessage:"No Accessible Workspaces"},description:{id:"ADpJJ4",defaultMessage:"It looks like you're currently unable to access any of your accounts. Try waiting a minute and logging in again."},logOut:{id:"KlMYRb",defaultMessage:"Log out"},ssoSuggestion:{id:"KCNTGv",defaultMessage:"Logging in with SSO may fix these issues."},noSSOSuggestion:{id:"mp/4+s",defaultMessage:"Logging in without SSO may fix these issues."},ssoButton:{id:"Nsa12I",defaultMessage:"Log in with SSO"},noSSOButton:{id:"60pUg9",defaultMessage:"Log in"}});function ZSe(){const e=SE(),t=L(),[n,r]=p.useState(),s=e!==null;if(p.useEffect(()=>{s||r(void 0)},[s]),!s)return null;const a=i.jsx("span",{className:"font-semibold",children:e.ownerEmail}),o=e.hasActiveRequest||n==="success",c=e.workspacePlanType===zi.EDU;return i.jsx(Te,{isOpen:!0,onClose:we,type:"warning",size:"custom",className:"max-w-3xl",title:i.jsxs("div",{className:"flex flex-col",children:[i.jsx("div",{className:"text-lg",children:i.jsx(S,{...yr.title,values:{workspaceName:e.accountName}})}),i.jsx("div",{className:"text-sm font-normal",children:c?i.jsx(S,{...yr.eduSubtitle}):i.jsx(S,{...yr.enterpriseSubtitle})})]}),icon:ya,primaryButton:i.jsx(Ke.Button,{onClick:async()=>{r("requesting");try{(await K.requestWorkspaceAccess(e.accountId)).success&&r("success")}catch{r("error")}},color:"primary",title:t.formatMessage(yr.requestAccessButton),disabled:o}),secondaryButton:i.jsx(Ke.Button,{onClick:async()=>{const l=await a0.signOut({redirect:!1,callbackUrl:`/auth/login?next=${encodeURIComponent(location.pathname+location.search+location.hash)}`});location.href=l.url},color:"secondary",title:t.formatMessage(yr.signOutButton)}),children:i.jsxs("div",{className:"flex flex-col space-y-4",children:[i.jsx("div",{children:c?i.jsx(S,{...yr.emailBelongsToEduWorkspace,values:{email:i.jsx("span",{className:"font-semibold",children:e.userEmail})}}):i.jsx(S,{...yr.emailBelongsToEnterpriseWorkspace,values:{email:i.jsx("span",{className:"font-semibold",children:e.userEmail})}})}),i.jsx("div",{children:o?i.jsx(S,{...yr.activeRequestMessage,values:{email:a}}):n==="requesting"?i.jsx(cn,{}):n==="error"?i.jsx(S,{...yr.contactWorkspaceAdminEmail,values:{email:a}}):null})]})})}const yr=z({title:{id:"RequestWorkspaceAccessModal.title",defaultMessage:"Request access to {workspaceName}"},enterpriseSubtitle:{id:"RequestWorkspaceAccessModal.subtitle",defaultMessage:"ChatGPT Enterprise has been enabled in your workspace"},eduSubtitle:{id:"RequestWorkspaceAccessModal.eduSubtitle",defaultMessage:"ChatGPT Edu has been enabled in your workspace"},emailBelongsToEnterpriseWorkspace:{id:"RequestWorkspaceAccessModal.emailBelongsToEnterpriseWorkspace",defaultMessage:"{email} belongs to a ChatGPT Enterprise plan but currently has no access."},emailBelongsToEduWorkspace:{id:"RequestWorkspaceAccessModal.emailBelongsToEduWorkspace",defaultMessage:"{email} belongs to a ChatGPT Edu plan but currently has no access."},requestWorkspaceAccessMessage:{id:"RequestWorkspaceAccessModal.requestWorkspaceAccessMessage",defaultMessage:"You may request access to the workspace account."},requestedWorkspaceAccessMessage:{id:"RequestWorkspaceAccessModal.requestedWorkspaceAccessMessage",defaultMessage:"Successfully requested access to the workspace account. Your workspace administrator at {email} may approve the request."},contactWorkspaceAdminEmail:{id:"RequestWorkspaceAccessModal.contactWorkspaceAdminEmail",defaultMessage:"Could not request access. Contact your workspace administrator at {email} to request access to a new workspace account."},signOutButton:{id:"RequestWorkspaceAccessModal.signOutButton",defaultMessage:"Sign Out"},requestAccessButton:{id:"RequestWorkspaceAccessModal.requestAccessButton",defaultMessage:"Request access"},activeRequestMessage:{id:"RequestWorkspaceAccessModal.activeRequestMessage",defaultMessage:"You have a pending invite request for this workspace. Contact your workspace administrator at {email} to approve your request."}}),JSe=je.Onboarding,Cb=()=>{const{eligible:e,markAsViewed:t,isLoading:n}=Be(JSe);return{setHasSeenOnboarding:t,hasSeenOnboardingDate:n?null:!e}},ER=()=>{const{eligible:e,markAsViewed:t,isLoading:n}=Be(je.TeamOwnerOnboarding);return{setHasSeenTeamOwnerOnboarding:t,hasSeenTeamOwnerOnboardingDate:n?null:!e}};function _R({onClose:e,scope:t}){const{setHasSeenOnboarding:n}=Cb(),r=p.useCallback(()=>{e(!0),n()},[e,n]);return t===Pm.Personal?i.jsx(tCe,{onSubmit:r}):i.jsx(nCe,{onSubmit:()=>{e(!0)}})}const io=({icon:e,title:t,body:n})=>i.jsxs("div",{className:"flex flex-col gap-2 md:w-1/3",children:[i.jsxs("div",{className:"flex flex-row items-center gap-2",children:[i.jsx("div",{children:e}),i.jsx("div",{className:"font-semibold text-token-text-primary",children:t})]}),i.jsx("div",{className:"text-sm text-token-text-secondary",children:n})]}),eCe="https://help.openai.com/en/articles/7039943-data-usage-for-consumer-services-faq",tCe=({onSubmit:e})=>{const t=L();return i.jsxs("div",{className:"flex flex-col gap-3 p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[i.jsx(io,{icon:i.jsx(e_,{isSolid:!0,className:"icon-md text-green-600"}),title:i.jsx(S,{...nn.askAway}),body:i.jsx(S,{...nn.askAwayBody})}),i.jsx(io,{icon:i.jsx(bL,{className:"icon-md text-brand-purple"}),title:i.jsx(S,{...nn.warning}),body:i.jsx(S,{...nn.warningBody,values:{article:n=>i.jsx("a",{href:eCe,target:"_blank",className:"underline",rel:"noopener noreferrer",children:n})}})}),i.jsx(io,{icon:i.jsx(p0,{className:"icon-md text-orange-300"}),title:i.jsx(S,{...nn.accuracy}),body:i.jsx(S,{...nn.accuracyBody})})]}),i.jsx("div",{className:"flex flex-row justify-end",children:i.jsx(lr,{title:t.formatMessage(nn.gettingStartedButton),onClick:e,color:"primary","data-testid":"getting-started-button"})})]})},nCe=({onSubmit:e})=>{const t=L();return i.jsxs("div",{className:"flex flex-col gap-6 p-4 md:p-6",children:[i.jsxs("div",{className:"flex flex-col gap-6 md:flex-row",children:[i.jsx(io,{icon:i.jsx(ya,{className:"icon-md text-brand-purple"}),title:i.jsx(S,{...nn.workUse}),body:i.jsx(S,{...nn.workUseBody})}),i.jsx(io,{icon:i.jsx(e_,{className:"icon-md text-green-600"}),title:i.jsx(S,{...nn.askAway}),body:i.jsx(S,{...nn.askAwayBody})}),i.jsx(io,{icon:i.jsx(p0,{className:"icon-md text-orange-300"}),title:i.jsx(S,{...nn.accuracy}),body:i.jsx(S,{...nn.accuracyBody})})]}),i.jsx("div",{className:"flex flex-row justify-end",children:i.jsx(lr,{title:t.formatMessage(nn.gettingStartedButton),onClick:e,color:"primary"})})]})},nn=z({askAway:{id:"onboarding.askAway",defaultMessage:"Ask away"},askAwayBody:{id:"onboarding.askAwayBody",defaultMessage:"ChatGPT can answer questions, help you learn, write code, brainstorm together, and much more."},warning:{id:"onboarding.warning",defaultMessage:"Dont share sensitive info"},warningBody:{id:"onboarding.warningBody",defaultMessage:"Chat history may be reviewed or used to improve our services. Learn more about your choices in our <article>Help Center</article>."},accuracy:{id:"onboarding.accuracy",defaultMessage:"Check your facts"},accuracyBody:{id:"onboarding.accuracyBody",defaultMessage:"While we have safeguards, ChatGPT may give you inaccurate information. Its not intended to give advice."},gettingStartedButton:{id:"onboarding.gettingStartedButton",defaultMessage:"Okay, lets go"},workspaceWelcome:{id:"onboarding.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} Workspace"},workspaceWelcomeNoName:{id:"onboarding.workspaceWelcomeNoName",defaultMessage:"Welcome to the your Workspace"},workspaceWelcomeBody:{id:"onboarding.workspaceWelcomeBody",defaultMessage:"Here you can use our latest models, with more capabilities, and fewer limits."},workUse:{id:"onboarding.workUse",defaultMessage:"Made for use at work"},workUseBody:{id:"onboarding.workUseBody",defaultMessage:"By default, chats in this workspace are not used to train our AI models."}}),Tk=({value:e,isSelected:t,onSelect:n})=>i.jsxs("button",{className:"mb-2 flex w-full cursor-pointer items-center justify-between outline-none lg:text-left",onClick:()=>n(e),children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex-shrink-0",children:e==="transfer"?i.jsx(JE,{}):i.jsx(z$,{})}),i.jsxs("div",{className:"flex flex-col text-left",children:[i.jsx("div",{className:"font-semibold",children:e==="transfer"?i.jsx(S,{...Pt.teamAccountTransferModalTransferLabel}):i.jsx(S,{...Pt.teamAccountTransferModalCreateLabel})}),i.jsx("div",{className:"flex-wrap text-sm text-token-text-secondary",children:e==="transfer"?i.jsx(S,{...Pt.teamAccountTransferModalTransferDetail}):i.jsx(S,{...Pt.teamAccountTransferModalCreateDetail})})]})]}),i.jsx("div",{className:A("flex h-4 w-4 flex-shrink-0 items-center justify-center rounded-full border",{"bg-black":t}),children:t&&i.jsx(vf,{className:"h-3 w-3 scale-x-75 stroke-[4] text-white"})})]}),rCe=({setCurrentStep:e,setHasSeenOnboarding:t})=>{const[n,r]=p.useState(""),s=L(),a=()=>{n==="transfer"?e(1):n==="create"&&t&&t()};return i.jsx(Te,{isOpen:!0,onClose:we,type:"warning",title:s.formatMessage(Pt.teamAccountTransferModalTitle),primaryButton:i.jsx(lr,{title:s.formatMessage(Pt.teamAccountTransferModalConfirm),onClick:a,color:"primary",className:"ml-4"}),children:i.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[i.jsx("div",{className:"text-md mb-2 text-token-text-primary",children:i.jsx(S,{...Pt.teamAccountTransferModalExplanation})}),i.jsx(Tk,{value:"transfer",isSelected:n==="transfer",onSelect:r}),i.jsx(MR,{}),i.jsx(Tk,{value:"create",isSelected:n==="create",onSelect:r})]})})},sCe=({currentWorkspace:e,setCurrentStep:t,fromSettings:n,setHasSeenOnboarding:r,onClose:s=we})=>{const a=L(),o=zt(),c=ze(),l=o?.name;return i.jsx(Te,{isOpen:!0,onClose:r?we:s,type:"success",title:a.formatMessage(Pt.selectedModalTitle),primaryButton:i.jsx(lr,{title:n?a.formatMessage(Pt.mergeModalConfirm):a.formatMessage(Pt.teamTransferModalConfirm),color:"primary",onClick:async()=>{const u=await K.transferAccount(e.id);r&&r(),u.success?CE():c(wL(SL.ACCOUNT_TRANSFER_ERROR))}}),secondaryButton:i.jsx(lr,{title:a.formatMessage(Pt.selectedModalBack),color:"secondary",onClick:n?s:async()=>{t(0)}}),children:i.jsxs("div",{className:"flex flex-col justify-center gap-4",children:[i.jsxs("div",{className:"flex w-full items-center gap-4",children:[i.jsx(um,{user:o,size:"large",roundedStyle:"rounded-full"}),i.jsxs("div",{className:"pt-2",children:[i.jsx("div",{className:"font-semibold",children:l}),i.jsx("div",{className:"mb-2 text-sm text-token-text-secondary",children:i.jsx(S,{...Pt.tansferModalPersonalAccount})})]})]}),i.jsx("div",{className:"-mb-2 -mt-3 flex justify-start pl-3",children:i.jsx(t_,{className:"icon-sm"})}),i.jsxs("div",{className:"flex w-full items-center gap-4",children:[i.jsx(dm,{src:e.profilePictureUrl,size:"large"}),i.jsx("div",{className:"font-semibold",children:e.name})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"mb-2 text-base font-semibold",children:i.jsx(S,{...Pt.teamTransferModalConfirmTitle})}),i.jsxs("ul",{className:"list-disc pl-5 text-sm text-token-text-secondary",children:[i.jsx("li",{className:"mb-2",children:i.jsx(S,{...Pt.teamTransferModalMigrateData})}),i.jsx("li",{className:"mb-2",children:i.jsx(S,{...Pt.teamTransferModalDeleteData})}),i.jsx("li",{children:i.jsx(S,{...Pt.teamTransferModalCancelPlus})})]})]}),i.jsx("div",{className:"mx-auto mb-2 flex max-w-5xl items-center rounded-md border border-token-border-medium bg-token-main-surface-secondary px-2 py-2 md:px-2 lg:px-4 lg:py-3",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx(p0,{className:"flex-shrink-0 text-red-500"}),i.jsx("p",{className:"ml-4 text-sm",children:i.jsx(S,{...Pt.teamTransferModalWarning,values:{link:u=>i.jsx("a",{href:"https://help.openai.com/en/articles/8801890 ",target:"_blank",className:"underline",rel:"noreferrer",children:u})}})})]})})]})})};function aCe({onClose:e=we,fromSettings:t=!1}){const[n,r]=p.useState(t?1:0),s=Ce()?.data,{setHasSeenTeamOwnerOnboarding:a}=ER(),o=t?void 0:a;switch(n){case 0:return i.jsx(rCe,{setCurrentStep:r,setHasSeenOnboarding:o});case 1:return i.jsx(sCe,{setCurrentStep:r,currentWorkspace:s,onClose:e,fromSettings:t,setHasSeenOnboarding:o})}}const Pt=z({teamAccountTransferModalTitle:{id:"teamAccountTransferModal.title",defaultMessage:"Your ChatGPT Team workspace is ready"},teamAccountTransferModalExplanation:{id:"teamAccountTransferModal.explanation",defaultMessage:"Do you want to transfer your chat history and GPTs to the Team workspace?"},teamAccountTransferModalConfirm:{id:"teamAccountTransferModal.confirm",defaultMessage:"Continue"},teamAccountTransferModalTransferLabel:{id:"teamAccountTransferModal.transferLabel",defaultMessage:"Transfer chat history and GPTs"},teamAccountTransferModalTransferDetail:{id:"teamAccountTransferModal.transferDetail",defaultMessage:"Carry over existing data from your personal workspace"},teamAccountTransferModalCreateLabel:{id:"teamAccountTransferModal.createLabel",defaultMessage:"Start as empty workspace"},teamAccountTransferModalCreateDetail:{id:"teamAccountTransferModal.createDetail",defaultMessage:"Keep your personal workspace separate. If youre on Plus, you will maintain your subscription until you cancel"},selectedModalTitle:{id:"selectedModal.title",defaultMessage:"Are you sure?"},selectedModalBack:{id:"selectedModal.back",defaultMessage:"Back"},tansferModalPersonalAccount:{id:"teamTransferModal.personalAccount",defaultMessage:"Personal workspace"},teamTransferModalConfirmTitle:{id:"teamTransferModal.confirmTitle",defaultMessage:"Transfer of existing data is permanent and can't be undone."},teamTransferModalMigrateData:{id:"teamTransferModal.migrateData",defaultMessage:"Your chat history and GPTs in your personal workspace will be migrated to the Team workspace."},teamTransferModalDeleteData:{id:"teamTransferModal.deleteData",defaultMessage:"Your Plugins and custom instructions in your personal workspace will be deleted."},teamTransferModalCancelPlus:{id:"teamTransferModal.cancelPlus",defaultMessage:"If you have a ChatGPT Plus subscription, it will be canceled and refunded upon merging."},teamTransferModalWarning:{id:"teamTransferModal.warning",defaultMessage:"You will lose access to your data if you leave or are removed from the Team workspace, or if the workspace is deactivated. <link>Learn more</link>"},teamTransferModalConfirm:{id:"teamTransferModal.confirm",defaultMessage:"Confirm transfer"},mergeModalConfirm:{id:"mergerModal.confirm",defaultMessage:"Confirm merge"}});function oCe({workspace:e}){const t=ke(),n=zt(),s=Ce()?.id===e.id,a=s?"div":"button",[o,c]=p.useState(!1),l=Jt(),u=L(),d=Ne(),f=p.useCallback(async()=>{c(!0);const{willRedirect:g}=TL(t,e.id,l,u,d);TE.disableTemporaryChat(),g||CE()},[t,e.id,l,u,d]),m=pge(e);let h=i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(dm,{src:e.data.profilePictureUrl,size:"medium"})});if(e.structure===Ha.PERSONAL){if(!n)return null;h=i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(um,{user:n,customStyle:!0,size:Fn.workspaceMedium,className:"h-9 w-9 overflow-hidden rounded-full"})})}return i.jsxs(a,{onClick:s?we:f,className:A({"flex w-full items-center gap-2 rounded-lg border border-token-border-medium bg-token-main-surface-primary p-4 hover:bg-token-main-surface-secondary":!0,"bg-token-sidebar-surface-secondary":s,"opacity-50":!e.canAccessWithCurrentSession}),children:[i.jsxs("div",{className:"flex w-full items-center gap-4",children:[h,i.jsxs("div",{className:"inline text-left align-top font-semibold",children:[i.jsx("p",{children:m}),!e.canAccessWithCurrentSession&&i.jsx("p",{className:"leading-4",children:i.jsx("small",{className:"text-token-text-secondary",children:i.jsx(S,{...e.ssoConnectionName?Rd.authenticateWithSSOToAccessWorkspace:Rd.authenticateWithoutSSOToAccessWorkspace})})})]})]}),i.jsx("div",{className:"flex h-full items-center p-1",children:o?i.jsx(cn,{}):s?i.jsx(q$,{className:"icon-lg"}):i.jsx(va,{className:"icon-lg my-auto"})})]})}function iCe({data:e}){const t=e.map(n=>i.jsx(oCe,{workspace:n},n.id));return i.jsx("div",{className:"flex w-full flex-col gap-2",children:t})}function cCe(){const e=gge(),n=zt()?.email??"";if(!e||e.length===0)return null;const r=e.filter(s=>s.structure===Ha.WORKSPACE);return i.jsx(Te,{isOpen:!0,onClose:we,type:"success",size:"normal",title:i.jsxs("div",{className:"flex flex-col",children:[i.jsx(S,{...Rd.workspaceSwitcherTitle}),i.jsx("span",{className:"mt-0.5 text-sm text-token-text-secondary",children:n})]}),children:i.jsxs("div",{className:"flex w-full flex-col items-center justify-between",children:[i.jsx(iCe,{data:e}),i.jsx("span",{className:"mt-4 text-sm text-token-text-secondary",children:i.jsx(S,{...Rd.workspaceSwitcherDisclaimer,values:{workspaces:i.jsx("span",{className:"contents font-bold",children:i.jsx(CL,{value:r.map(s=>s.data.name)})}),numWorkspaces:r.length}})})]})})}const Rd=z({workspaceSwitcherTitle:{id:"workspaceSwitcher.title",defaultMessage:"Select a workspace"},workspaceSwitcherDisclaimer:{id:"workspaceSwitcher.disclaimer",defaultMessage:"You've been added to the {workspaces} {numWorkspaces, plural, one {workspace} other {workspaces}}. You can switch between workspaces at any time."},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"}});var Tb="ToastProvider",[kb,lCe,uCe]=kL("Toast"),[AR,jLe]=ha("Toast",[uCe]),[dCe,jm]=AR(Tb),PR=e=>{const{__scopeToast:t,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:a=50,children:o}=e,[c,l]=p.useState(null),[u,d]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Tb}\`. Expected non-empty \`string\`.`),i.jsx(kb.Provider,{scope:t,children:i.jsx(dCe,{scope:t,label:n,duration:r,swipeDirection:s,swipeThreshold:a,toastCount:u,viewport:c,onViewportChange:l,onToastAdd:p.useCallback(()=>d(h=>h+1),[]),onToastRemove:p.useCallback(()=>d(h=>h-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};PR.displayName=Tb;var jR="ToastViewport",fCe=["F8"],_v="toast.viewportPause",Av="toast.viewportResume",IR=p.forwardRef((e,t)=>{const{__scopeToast:n,hotkey:r=fCe,label:s="Notifications ({hotkey})",...a}=e,o=jm(jR,n),c=lCe(n),l=p.useRef(null),u=p.useRef(null),d=p.useRef(null),f=p.useRef(null),m=Lr(t,f,o.onViewportChange),h=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const y=b=>{r.length!==0&&r.every(w=>b[w]||b.code===w)&&f.current?.focus()};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[r]),p.useEffect(()=>{const y=l.current,b=f.current;if(g&&y&&b){const x=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(_v);b.dispatchEvent(M),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(Av);b.dispatchEvent(M),o.isClosePausedRef.current=!1}},C=M=>{!y.contains(M.relatedTarget)&&w()},T=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",x),y.addEventListener("focusout",C),y.addEventListener("pointermove",x),y.addEventListener("pointerleave",T),window.addEventListener("blur",x),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",x),y.removeEventListener("focusout",C),y.removeEventListener("pointermove",x),y.removeEventListener("pointerleave",T),window.removeEventListener("blur",x),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:y})=>{const x=c().map(w=>{const C=w.ref.current,T=[C,...MCe(C)];return y==="forwards"?T:T.reverse()});return(y==="forwards"?x.reverse():x).flat()},[c]);return p.useEffect(()=>{const y=f.current;if(y){const b=x=>{const w=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!w){const T=document.activeElement,M=x.shiftKey;if(x.target===y&&M){u.current?.focus();return}const I=v({tabbingDirection:M?"backwards":"forwards"}),j=I.findIndex(F=>F===T);kh(I.slice(j+1))?x.preventDefault():M?u.current?.focus():d.current?.focus()}};return y.addEventListener("keydown",b),()=>y.removeEventListener("keydown",b)}},[c,v]),i.jsxs(ML,{ref:l,role:"region","aria-label":s.replace("{hotkey}",h),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&i.jsx(Pv,{ref:u,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"forwards"});kh(y)}}),i.jsx(kb.Slot,{scope:n,children:i.jsx(Rt.ol,{tabIndex:-1,...a,ref:m})}),g&&i.jsx(Pv,{ref:d,onFocusFromOutsideViewport:()=>{const y=v({tabbingDirection:"backwards"});kh(y)}})]})});IR.displayName=jR;var NR="ToastFocusProxy",Pv=p.forwardRef((e,t)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=e,a=jm(NR,n);return i.jsx(kE,{"aria-hidden":!0,tabIndex:0,...s,ref:t,style:{position:"fixed"},onFocus:o=>{const c=o.relatedTarget;!a.viewport?.contains(c)&&r()}})});Pv.displayName=NR;var Im="Toast",mCe="toast.swipeStart",pCe="toast.swipeMove",hCe="toast.swipeCancel",gCe="toast.swipeEnd",OR=p.forwardRef((e,t)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:a,...o}=e,[c=!0,l]=wc({prop:r,defaultProp:s,onChange:a});return i.jsx(bc,{present:n||c,children:i.jsx(xCe,{open:c,...o,ref:t,onClose:()=>l(!1),onPause:Vu(e.onPause),onResume:Vu(e.onResume),onSwipeStart:st(e.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:st(e.onSwipeMove,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:st(e.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:st(e.onSwipeEnd,u=>{const{x:d,y:f}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),l(!1)})})})});OR.displayName=Im;var[vCe,yCe]=AR(Im,{onClose(){}}),xCe=p.forwardRef((e,t)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:a,onClose:o,onEscapeKeyDown:c,onPause:l,onResume:u,onSwipeStart:d,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:h,...g}=e,v=jm(Im,n),[y,b]=p.useState(null),x=Lr(t,N=>b(N)),w=p.useRef(null),C=p.useRef(null),T=s||v.duration,M=p.useRef(0),_=p.useRef(T),k=p.useRef(0),{onToastAdd:I,onToastRemove:j}=v,F=Vu(()=>{y?.contains(document.activeElement)&&v.viewport?.focus(),o()}),U=p.useCallback(N=>{!N||N===1/0||(window.clearTimeout(k.current),M.current=new Date().getTime(),k.current=window.setTimeout(F,N))},[F]);p.useEffect(()=>{const N=v.viewport;if(N){const $=()=>{U(_.current),u?.()},H=()=>{const Y=new Date().getTime()-M.current;_.current=_.current-Y,window.clearTimeout(k.current),l?.()};return N.addEventListener(_v,H),N.addEventListener(Av,$),()=>{N.removeEventListener(_v,H),N.removeEventListener(Av,$)}}},[v.viewport,T,l,u,U]),p.useEffect(()=>{a&&!v.isClosePausedRef.current&&U(T)},[a,T,v.isClosePausedRef,U]),p.useEffect(()=>(I(),()=>j()),[I,j]);const B=p.useMemo(()=>y?BR(y):null,[y]);return v.viewport?i.jsxs(i.Fragment,{children:[B&&i.jsx(bCe,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:B}),i.jsx(vCe,{scope:n,onClose:F,children:o0.createPortal(i.jsx(kb.ItemSlot,{scope:n,children:i.jsx(EL,{asChild:!0,onEscapeKeyDown:st(c,()=>{v.isFocusedToastEscapeKeyDownRef.current||F(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(Rt.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":v.swipeDirection,...g,ref:x,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:st(e.onKeyDown,N=>{N.key==="Escape"&&(c?.(N.nativeEvent),N.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,F()))}),onPointerDown:st(e.onPointerDown,N=>{N.button===0&&(w.current={x:N.clientX,y:N.clientY})}),onPointerMove:st(e.onPointerMove,N=>{if(!w.current)return;const $=N.clientX-w.current.x,H=N.clientY-w.current.y,Y=!!C.current,O=["left","right"].includes(v.swipeDirection),R=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,V=O?R(0,$):0,X=O?0:R(0,H),re=N.pointerType==="touch"?10:2,te={x:V,y:X},ue={originalEvent:N,delta:te};Y?(C.current=te,ou(pCe,f,ue,{discrete:!1})):kk(te,v.swipeDirection,re)?(C.current=te,ou(mCe,d,ue,{discrete:!1}),N.target.setPointerCapture(N.pointerId)):(Math.abs($)>re||Math.abs(H)>re)&&(w.current=null)}),onPointerUp:st(e.onPointerUp,N=>{const $=C.current,H=N.target;if(H.hasPointerCapture(N.pointerId)&&H.releasePointerCapture(N.pointerId),C.current=null,w.current=null,$){const Y=N.currentTarget,O={originalEvent:N,delta:$};kk($,v.swipeDirection,v.swipeThreshold)?ou(gCe,h,O,{discrete:!0}):ou(hCe,m,O,{discrete:!0}),Y.addEventListener("click",R=>R.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),bCe=e=>{const{__scopeToast:t,children:n,...r}=e,s=jm(Im,t),[a,o]=p.useState(!1),[c,l]=p.useState(!1);return TCe(()=>o(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>l(!0),1e3);return()=>window.clearTimeout(u)},[]),c?null:i.jsx(ZM,{asChild:!0,children:i.jsx(kE,{...r,children:a&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},wCe="ToastTitle",RR=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Rt.div,{...r,ref:t})});RR.displayName=wCe;var SCe="ToastDescription",CCe=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e;return i.jsx(Rt.div,{...r,ref:t})});CCe.displayName=SCe;var DR="ToastAction",LR=p.forwardRef((e,t)=>{const{altText:n,...r}=e;return n.trim()?i.jsx(FR,{altText:n,asChild:!0,children:i.jsx(Mb,{...r,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${DR}\`. Expected non-empty \`string\`.`),null)});LR.displayName=DR;var $R="ToastClose",Mb=p.forwardRef((e,t)=>{const{__scopeToast:n,...r}=e,s=yCe($R,n);return i.jsx(FR,{asChild:!0,children:i.jsx(Rt.button,{type:"button",...r,ref:t,onClick:st(e.onClick,s.onClose)})})});Mb.displayName=$R;var FR=p.forwardRef((e,t)=>{const{__scopeToast:n,altText:r,...s}=e;return i.jsx(Rt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:t})});function BR(e){const t=[];return Array.from(e.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&t.push(r.textContent),kCe(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",a=r.dataset.radixToastAnnounceExclude==="";if(!s)if(a){const o=r.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...BR(r))}}),t}function ou(e,t,n,{discrete:r}){const s=n.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?_L(s,a):s.dispatchEvent(a)}var kk=(e,t,n=0)=>{const r=Math.abs(e.x),s=Math.abs(e.y),a=r>s;return t==="left"||t==="right"?a&&r>n:!a&&s>n};function TCe(e=()=>{}){const t=Vu(e);AL(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[t])}function kCe(e){return e.nodeType===e.ELEMENT_NODE}function MCe(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function kh(e){const t=document.activeElement;return e.some(n=>n===t?!0:(n.focus(),document.activeElement!==t))}var ECe=PR,_Ce=IR,ACe=OR,UR=RR,PCe=LR,VR=Mb;function GR({children:e}){return i.jsxs(ECe,{children:[i.jsx(ACe,{className:"radix-state-closed:animate-hide radix-state-open:animate-slideIn popover grid grid-cols-[auto_max-content] items-center gap-x-4 rounded-lg bg-token-main-surface-primary p-4 shadow-xs [grid-template-areas:_'title_action'_'description_action'] sm:max-w-2xl",open:!0,children:e}),i.jsx(_Ce,{className:"fixed bottom-0 right-0 z-50 m-0 flex max-w-[100vw] list-none flex-col gap-4 p-6 outline-none"})]})}function jCe(e){return e!=null&&e in PL}const Wa="compliance",ICe=60*60*24*30*6,NCe={serverPrimedAllowBrowserStorageValue:!0,showCookieConsentBanner:!1,isStorageComplianceEnabled:!1,ageVerificationDeadline:null,ageVerificationType:"none"},OCe={IT:"countdown",KR:"passive"};function RCe(e,t){const n=jCe(t),r=e.registration_country??"",s=r in ME&&e.age_verification.is_required;if(!n&&!s)return NCe;const a=n&&e.require_cookie_consent;return{serverPrimedAllowBrowserStorageValue:a?e.cookie_consent.analytics_cookies_accepted??!1:!0,showCookieConsentBanner:a&&e.cookie_consent.is_required,isStorageComplianceEnabled:a,ageVerificationDeadline:s?e.age_verification.remaining_seconds??null:null,ageVerificationType:s?OCe[r]??"none":"none"}}const WR=ma({queryKey:[Wa],queryFn:async()=>await K.getCompliance().then(e=>{if(e.cookie_consent.is_required){const t=on.getCookie(Zt.AllowNonessential),n=e.cookie_consent.analytics_cookies_accepted;if(t===void 0&&n!=null)on.setCookie(Zt.AllowNonessential,n,{maxAge:ICe,domain:jL});else if(t!==n&&t!=null){const r={analytics_cookies_accepted:t};return K.updateCookieConsentCompliance(r),{...e,cookie_consent:{...e.cookie_consent,...r}}}}return e}).catch(e=>(e instanceof jt&&e.status===401&&hf(),{registration_country:null,require_cookie_consent:!1,age_verification:{is_required:!1},cookie_consent:{is_required:!1},terms_of_use:{is_required:!1,accepted_at:null}}))});function HR({enabled:e,select:t}){return me({...WR,enabled:e,select:t})}function Eb(){const{country:e}=Tc(),t=e!=null&&e in ME;return{...me({...WR,enabled:t,select:r=>RCe(r,e)}),isEnabled:t}}function DCe(){const e=ke();return it({mutationFn:async t=>await K.updateCookieConsentCompliance(t),onSuccess:()=>{e.refetchQueries({queryKey:[Wa]})},onMutate:async t=>{await e.cancelQueries({queryKey:[Wa]});const n=e.getQueryData([Wa]);return e.setQueryData([Wa],r=>{if(r!==void 0)return{...r,cookie_consent:{...r.cookie_consent,...t}}}),{previousValue:n}},onError:(t,n,r)=>{r!==void 0&&e.setQueryData([Wa],r.previousValue)}})}function ILe({serverPrimedAllowBrowserStorageValue:e,enabled:t}){const{data:n,isLoading:r}=HR({enabled:t,select:s=>s.cookie_consent.analytics_cookies_accepted===!0});return r||!t?e:n??!1}const LCe=60*60*24;function $Ce(e,t=!1){return mr()==null||t?"loading":!e||on.getCookie(Zt.AgeVerification)||e.ageVerificationDeadline==null||e.ageVerificationType==="none"?"hide":"show"}function FCe({onClose:e}){const{data:{ageVerificationType:t,ageVerificationDeadline:n}={}}=Eb();return t==="passive"?i.jsx(BCe,{onClose:e}):t==="countdown"&&n!=null?i.jsx(UCe,{onClose:e,ageVerificationDeadline:n}):null}const BCe=({onClose:e})=>{const{country:t}=Tc();return p.useEffect(()=>{ie.addAction("privacy_policy.show_age_verification_modal",{country:t})},[t]),i.jsx(WN,{onClose:e,title:"OpenAI      ",description:i.jsx("div",{className:"whitespace-pre-wrap",children:i.jsxs("p",{children:["ChatGPT  .     , OpenAI  OpenAI       . ChatGPT  ,  18 , 14        .",i.jsx("br",{}),i.jsx("br",{}),"OpenAI  "," ",i.jsx("a",{href:"https://privacy.openai.com/policies?action=ERASURE&modal=log-in",className:"underline",target:"_blank",rel:"noreferrer",children:"    ."})]})}),actionButton:i.jsx(ee,{color:"primary",onClick:async()=>{await K.updateAgeVerification(),e()},children:" OpenAI  "}),cancelButton:i.jsx(ee,{as:"link",color:"secondary",to:"/auth/logout",children:""})})},UCe=({onClose:e,ageVerificationDeadline:t})=>{const n=t!=null?Math.floor(t/60/60/24):0;p.useEffect(()=>{q.logEvent("chatgpt_compliance_age_verification_seen"),E.logEvent(P.complianceAgeVerificationSeen)},[]);const{country:r}=Tc();return p.useEffect(()=>{ie.addAction("privacy_policy.show_age_verification_countdown",{country:r})},[r]),i.jsxs(GR,{children:[i.jsx(UR,{className:"text-sm font-semibold [grid-area:_title]",children:i.jsx(S,{...Mk.ageVerificationTitle,values:{deadline:n,learnMoreLink:s=>i.jsx("a",{href:"https://help.openai.com/en/articles/8411987-why-am-i-being-asked-to-verify-my-age",target:"_blank",rel:"noreferrer",className:"cursor-pointer font-normal underline",children:s})}})}),i.jsx(PCe,{altText:"Dismiss notification",asChild:!0,children:i.jsx(ee,{color:"primary",size:"small",onClick:()=>{q.logEvent("chatgpt_compliance_age_verification_clicked"),E.logEvent(P.complianceAgeVerificationClicked),on.setCookie(Zt.AgeVerification,"true",{maxAge:LCe,path:"/"}),e(),$e.openModal(et.AgeVerificationInterstitial)},children:i.jsx(S,{...Mk.startVerification})})}),i.jsx(VR,{})]})},Mk=z({ageVerificationTitle:{id:"ageVerificationBanner.title-v1",defaultMessage:"Please verify your age in the next {deadline, plural, =0 {# days} one {# day} other {# days}}. We are required to check if you're old enough to use ChatGPT. <learnMoreLink>Learn more</learnMoreLink>."},dismiss:{id:"ageVerificationBanner.dismiss",defaultMessage:"Dismiss"},startVerification:{id:"ageVerificationBanner.startVerification",defaultMessage:"Start verification"},modalTitle:{id:"ageVerificationModal.title",defaultMessage:"Please confirm you meet our age requirements"},modalDescription:{id:"ageVerificationModal.description.1",defaultMessage:"Thank you for using ChatGPT. To comply with legal requirements in Korea, we need to confirm that youre old enough to use our service. To continue on ChatGPT, please confirm that you are 18+ or are 14+ and have your parent or guardians permission to use ChatGPT. <deleteAccountLink>If you do not meet our age requirements, please delete your account.</deleteAccountLink>"},modalLogout:{id:"ageVerificationModal.logOut",defaultMessage:"Log out"},modalAction:{id:"ageVerificationModal.actionButton",defaultMessage:"I meet OpenAI's age requirements"}});function VCe({onClose:e}){const t=L(),n=Ne(),{openSettings:r}=pO(),s=DCe(),{session:a}=r0(),{data:{isStorageComplianceEnabled:o}={}}=Eb(),{data:c,isLoading:l}=HR({enabled:!!(o&&a),select:u=>!u.cookie_consent.is_required});return p.useEffect(()=>{c===!0&&e()},[c,e]),l?null:i.jsx(GCe,{onReject:()=>{s.mutateAsync({analytics_cookies_accepted:!1},{onSuccess(){n.success(t.formatMessage(eo.updateSuccess))},onError(){n.danger(t.formatMessage(eo.updateFailure))}}),e()},onAccept:()=>{s.mutateAsync({analytics_cookies_accepted:!0},{onSuccess(){n.success(t.formatMessage(eo.updateSuccess))},onError(){n.danger(t.formatMessage(eo.updateFailure))}}),e()},children:i.jsx(S,{id:"CookieConsentBanner.authedDescription.0",defaultMessage:"We use cookies and similar technologies to deliver, maintain, improve our services and for security purposes. Check our <cookiePolicy>cookie policy</cookiePolicy> for details. Click 'Accept all' to let OpenAI and partners use cookies for these purposes. Click 'Reject all' to say no to cookies, except those that are strictly necessary. Choose <manageLink>manage cookies</manageLink> to change your preferences.",values:{cookiePolicy:u=>i.jsx(gA,{href:"https://openai.com/policies/cookie-policy",openNewTab:!0,children:u}),manageLink:u=>i.jsx(WCe,{onClick:()=>{r(Td.DataControls)},children:u})}})})}function GCe({children:e,onAccept:t,onReject:n}){return p.useEffect(()=>{ie.addAction("privacy_policy.show_cookie_consent_banner")},[]),i.jsxs(GR,{children:[i.jsxs(UR,{className:"text-sm font-semibold [grid-area:_title]",children:[e,i.jsxs("div",{className:"mt-2 flex justify-end gap-3",children:[i.jsx(ee,{color:"secondary",size:"small",onClick:n,children:i.jsx(S,{...eo.reject})}),i.jsx(ee,{color:"secondary",size:"small",onClick:t,children:i.jsx(S,{...eo.accept})})]})]}),i.jsx(VR,{})]})}const WCe=fe.button`underline font-normal text-green-600`,eo=z({cookieConsentBannerTitle:{id:"CookieConsentBanner.title",defaultMessage:"We use cookies to provide, improve, and protect our services. Visit our <privacyPolicyLink>privacy policy</privacyPolicyLink> to learn more. You can manage your cookie preferences in your <settingsPanel>settings panel</settingsPanel>. <learnMoreLink>Learn more</learnMoreLink>."},reject:{id:"CookieConsentBanner.reject",defaultMessage:"Reject all"},accept:{id:"CookieConsentBanner.accept",defaultMessage:"Accept all"},updateSuccess:{id:"CookieConsentBanner.updateSuccess",defaultMessage:"Your cookie preferences were updated successfully"},updateFailure:{id:"CookieConsentBanner.updateFailure",defaultMessage:"Unable to update cookie preferences. Try again later."}}),zR=()=>{const e=p.useRef(HCe()),{isUnauthenticated:t,isLoading:n}=bt(),r=wb(),s=EE(),a=!n&&t&&s&&!e.current&&!r,o=p.useCallback(()=>{a&&(zCe(),E.logEventWithStatsig(P.meetChatGptModalShown,"chatgpt_meet_chatgpt_modal_shown"))},[a]),c=()=>{E.logEventWithStatsig(P.meetChatGptModalConfirmationButtonClicked,"chatgpt_meet_chatgpt_modal_confirmation_button_clicked")};return n?{onConfirmationButtonClick:c,onMount:o,state:"loading"}:a?{onConfirmationButtonClick:c,onMount:o,state:"show"}:{onConfirmationButtonClick:c,onMount:o,state:"hide"}};function HCe(){return!!localStorage.getItem(He.HasSeenMeetChatGptModal)}function zCe(){return localStorage.setItem(He.HasSeenMeetChatGptModal,"true")}const qCe=({onClose:e})=>{const{onConfirmationButtonClick:t,onMount:n,state:r}=zR(),a=_E()?Ek.trainingDisclaimer:Ek.safetyAndAbuseDisclaimer;return p.useEffect(n,[n]),r!=="show"?null:i.jsx(Te,{isOpen:!0,noPadding:!0,onClose:we,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:i.jsxs("div",{className:"flex flex-col p-6 text-center",children:[i.jsx("div",{className:"-mb-4 -mt-5 self-center",children:i.jsx(YE,{})}),i.jsx("div",{className:"mb-2 text-2xl font-medium",children:i.jsx(S,{id:"fnY8gE",defaultMessage:"Meet ChatGPT"})}),i.jsx("div",{className:"mb-6 text-token-text-secondary",children:i.jsx(S,{id:"OdX5ix",defaultMessage:"AI that can help with brainstorming, researching, planning, and more. Just ask."})}),i.jsx(ee,{color:"primary",size:"giant",className:"mb-4",onClick:()=>{t(),e()},children:i.jsx(S,{...yt.gotItButtonText})}),i.jsx("div",{className:"text-xs text-token-text-tertiary",children:i.jsx(S,{...a,values:{learnMoreLink:o=>i.jsx("a",{className:"underline",href:"https://help.openai.com/en/articles/9737562",rel:"noreferrer",target:"_blank",children:o})}})})]})})},Ek=z({trainingDisclaimer:{id:"hebnC4",defaultMessage:"Chats may be reviewed and used to train our models. You can opt out in settings. <learnMoreLink>Learn more</learnMoreLink>"},safetyAndAbuseDisclaimer:{id:"KpKqVi",defaultMessage:"Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"}}),YCe=60*60*24*30*12;function qR(){const{isLoading:e,data:t}=me(dA),n=p.useRef(KCe()),r=t?.email??null,s=p.useCallback(()=>{n.current&&t?E.logEventWithStatsig(P.punchOutAnonToAuthedModalShown,"chatgpt_punch_out_anon_to_authed_modal_shown"):console.warn("PunchOutAnonToAuthedModal is being mounted without a user and a token")},[t]),a=c=>{E.logEventWithStatsig(P.punchOutAnonToAuthedModalContinueButtonClicked,"chatgpt_punch_out_anon_to_authed_modal_continue_button_clicked"),_k(),XCe(),window.location.href=`/continue_from_api?token=${c}`},o=()=>{_k(),E.logEventWithStatsig(P.PunchOutAnonToAuthedModalCancelButtonClicked,"chatgpt_punch_out_anon_to_authed_modal_cancel_button_clicked")};return e?{email:null,onCancelButtonClick:o,onContinueButtonClick:a,onMount:s,state:"loading",token:null}:n.current&&r?{email:r,onCancelButtonClick:o,onContinueButtonClick:a,onMount:s,state:"show",token:n.current}:{email:null,onCancelButtonClick:o,onContinueButtonClick:a,onMount:s,state:"hide",token:null}}function KCe(){return on.getCookie(Zt.PunchOutRequireAnonToAuthedToken)??null}function _k(){return on.deleteCookie(Zt.PunchOutRequireAnonToAuthedToken)}function XCe(){on.setCookie(Zt.PunchOutAnonToAuthedEnabled,"true",{maxAge:YCe})}const QCe=({onClose:e})=>{const{onCancelButtonClick:t,onContinueButtonClick:n,onMount:r,token:s,email:a,state:o}=qR(),l=ks()?"medium":"large";return p.useEffect(r,[r]),o!=="show"?null:i.jsx(Te,{isOpen:!0,noPadding:!0,onClose:we,shouldIgnoreClickOutside:!0,showCloseButton:!1,size:"custom",type:"success",className:"max-w-md",children:i.jsxs("div",{className:"flex flex-col p-6",children:[i.jsx("div",{className:"mb-2 text-center text-xl font-medium md:text-left",children:i.jsx(S,{id:"qAel0I",defaultMessage:"Always open in ChatGPT?"})}),i.jsx("div",{className:"mb-6 text-center text-token-text-secondary md:text-left",children:i.jsx(S,{id:"9Pb+Og",defaultMessage:"Chats you open from Siri will be saved in your account <emailContainer>({email})</emailContainer>.",values:{emailContainer:u=>i.jsx("span",{className:"font-medium",children:u}),email:a}})}),i.jsxs("div",{className:"flex flex-col gap-3 md:flex-row-reverse md:gap-2 md:self-end",children:[i.jsx(ee,{color:"primary",size:l,onClick:()=>n(s),children:i.jsx(S,{...yt.continueButtonText})}),i.jsx(ee,{color:"secondary",size:l,onClick:()=>{t(),e()},children:i.jsx(S,{...yt.cancelButtonText})})]})]})})},ZCe=({onContinue:e,scope:t})=>{const n=L(),r=hge();return i.jsx(Te,{isOpen:!0,onClose:we,type:"success",title:n.formatMessage(co.chatgptTitle,{workspaceName:r}),size:"custom",noPadding:!0,className:"max-w-2xl",children:i.jsx(_R,{onClose:()=>{e()},scope:t})})},JCe=({onContinue:e,onSkip:t,isEduPlan:n})=>{const r=L();return i.jsx(Te,{isOpen:!0,onClose:we,type:"success",title:r.formatMessage(co.primaryRoleTitle),size:"custom",className:"max-w-lg",children:i.jsx(YR,{options:n?rTe:nTe,onSkip:t,onSubmit:e})})},eTe=({onContinue:e,onSkip:t,isEduPlan:n})=>{const r=L();return i.jsx(Te,{isOpen:!0,onClose:we,type:"success",title:r.formatMessage(co.workTypeTitle),size:"custom",className:"max-w-lg",children:i.jsx(YR,{options:n?aTe:sTe,onSkip:t,onSubmit:e,multiSelect:!0})})};function YR({options:e,onSkip:t=we,onSubmit:n=we,multiSelect:r=!1}){const s=L(),[a,o]=p.useState([]);function c(u,d){const f=u.indexOf(d);return f===-1?[...u,d]:[...u.slice(0,f),...u.slice(f+1)]}const l=p.useCallback(u=>{const d=u.currentTarget.dataset.value??"";r?o(c(a,d)):n(d)},[n,a,o,r]);return i.jsxs("div",{children:[r&&i.jsx("p",{className:"mx-2 text-sm text-token-text-tertiary",children:s.formatMessage(co.selectAll)}),i.jsx("div",{className:"flex flex-col items-center justify-center",children:i.jsx("div",{className:"flex-wrap space-y-4",children:e.map(u=>i.jsx(ee,{onClick:l,color:a.includes(u.id)?"primary":"secondary",size:"medium",className:"mx-2","data-value":u.id,children:i.jsx(S,{...u.displayValue})},u.id))})}),i.jsxs("div",{className:"mt-4 flex flex-row justify-end",children:[i.jsx(lr,{title:s.formatMessage(co.skipButton),onClick:t}),r&&i.jsx(lr,{title:s.formatMessage(co.continueButton),onClick:()=>{n(a)},disabled:a.length===0,color:"primary",className:"ml-4"})]})]})}function tTe({onClose:e}){const{setHasSeenOnboarding:t}=Cb(),[n,r]=p.useState(0),[s,a]=p.useState({role:void 0,departments:void 0}),o=ln(fs.workspaceId),c=ln(fs.isEduPlan),u=zt()?.id,d=()=>{q.logEvent("chatgpt_biz_onboarding_skipped"),E.logEvent(P.bizOnboardingSkipped),e(),t()};switch(n){case 0:return i.jsx(ZCe,{scope:Pm.Workspace,onContinue:()=>{r(1)}});case 1:return i.jsx(JCe,{onContinue:f=>{a(m=>({...m,role:f})),r(2)},onSkip:d,isEduPlan:c});case 2:return i.jsx(eTe,{onContinue:f=>{const m={...s,departments:f};e(),t(),q.logEvent("chatgpt_biz_onboarding_completed"),E.logEvent(P.bizOnboardingCompleted),K.updateWorkspaceUserOnboardingInformation(o,u,m)},onSkip:d,isEduPlan:c});default:return i.jsx(i.Fragment,{})}}const co=z({chatgptTitle:{id:"onboarding.chatgptTitle.0",defaultMessage:"Welcome to the {workspaceName} workspace"},primaryRoleTitle:{id:"onboarding.primaryRoleTitle",defaultMessage:"What's your primary role?"},workTypeTitle:{id:"onboarding.workTypeTitle",defaultMessage:"What kind of work do you do?"},selectAll:{id:"onboarding.selectAll",defaultMessage:"Select all that apply"},skipButton:{id:"onboarding.skipButton",defaultMessage:"Skip"},continueButton:{id:"onboarding.continueButton",defaultMessage:"Continue"}}),ft=z({marketing:{id:"onboarding.departments.marketing",defaultMessage:"Marketing"},analytics:{id:"onboarding.departments.analytics",defaultMessage:"Data or Analytics"},product:{id:"onboarding.departments.product",defaultMessage:"Product Management"},comms:{id:"onboarding.departments.comms",defaultMessage:"Communications"},finance:{id:"onboarding.departments.finance",defaultMessage:"Finance or Accounting"},customer_experience:{id:"onboarding.departments.customer_experience",defaultMessage:"Customer Experience"},project_management:{id:"onboarding.departments.project_management",defaultMessage:"Project or Program Management"},engineering:{id:"onboarding.departments.engineering",defaultMessage:"Engineering"},education_professional:{id:"onboarding.departments.education_professional",defaultMessage:"Education Professional"},design:{id:"onboarding.departments.design",defaultMessage:"Design"},administrative:{id:"onboarding.departments.administrative",defaultMessage:"Administrative Assistant"},partnerships:{id:"onboarding.departments.partnerships",defaultMessage:"Partnerships"},it:{id:"onboarding.departments.it",defaultMessage:"Information Technology (IT)"},ops:{id:"onboarding.departments.ops",defaultMessage:"Operations"},human_resources:{id:"onboarding.departments.human_resources",defaultMessage:"Human Resources"},research:{id:"onboarding.departments.research",defaultMessage:"Research & Development"},sales:{id:"onboarding.departments.sales",defaultMessage:"Sales"},legal:{id:"onboarding.departments.legal",defaultMessage:"Legal"},healthcare:{id:"onboarding.departments.healthcare",defaultMessage:"Healthcare Professional"},other:{id:"onboarding.departments.other",defaultMessage:"Other"}}),Lt=z({engineering:{id:"onboarding.edu_departments.engineering",defaultMessage:"Engineering"},math:{id:"onboarding.edu_departments.math",defaultMessage:"Mathematics"},applied_sciences:{id:"onboarding.edu_departments.applied_sciences",defaultMessage:"Applied Sciences"},finance:{id:"onboarding.edu_departments.finance",defaultMessage:"Finance or Accounting"},health:{id:"onboarding.edu_departments.health",defaultMessage:"Health or Medical"},law:{id:"onboarding.edu_departments.law",defaultMessage:"Law"},business:{id:"onboarding.edu_departments.business",defaultMessage:"Business"},social:{id:"onboarding.edu_departments.social",defaultMessage:"Social Sciences"},liberal_art:{id:"onboarding.edu_departments.liberal_art",defaultMessage:"Liberal Arts"},fine_art:{id:"onboarding.edu_departments.fine_art",defaultMessage:"Fine Arts"},linguistics:{id:"onboarding.edu_departments.linguistics",defaultMessage:"Linguistics"},teaching:{id:"onboarding.edu_departments.teaching",defaultMessage:"Teaching"},dev:{id:"onboarding.edu_departments.dev",defaultMessage:"Research & Development"},campus_ops:{id:"onboarding.edu_departments.campus_ops",defaultMessage:"Campus Operations"},it:{id:"onboarding.edu_departments.it",defaultMessage:"Information Technology (IT)"},other:{id:"onboarding.edu_departments.other",defaultMessage:"Other"}}),Wr=z({team_member:{id:"onboarding.role.team_member",defaultMessage:"Team Member/ Individual Contributor"},manager:{id:"onboarding.role.manager",defaultMessage:"Manager"},student:{id:"onboarding.role.student",defaultMessage:"Student"},executive:{id:"onboarding.role.executive",defaultMessage:"Executive"},director:{id:"onboarding.role.director",defaultMessage:"Director"},business_owner:{id:"onboarding.role.business_owner",defaultMessage:"Business Owner"},freelancer:{id:"onboarding.role.freelancer",defaultMessage:"Freelancer"},other:{id:"onboarding.role.other",defaultMessage:"Other"}}),Fa=z({student:{id:"onboarding.edu_role.student",defaultMessage:"Student"},instructional_staff:{id:"onboarding.edu_role.instructional_staff",defaultMessage:"Instructional Staff"},researcher:{id:"onboarding.edu_role.researcher",defaultMessage:"Researcher"},admin:{id:"onboarding.edu_role.admin",defaultMessage:"Administration"},alumni:{id:"onboarding.edu_role.alumni",defaultMessage:"Alumni"},other:{id:"onboarding.edu_role.other",defaultMessage:"Other"}}),nTe=[{id:"team_member",displayValue:Wr.team_member},{id:"manager",displayValue:Wr.manager},{id:"student",displayValue:Wr.student},{id:"executive",displayValue:Wr.executive},{id:"director",displayValue:Wr.director},{id:"business_owner",displayValue:Wr.business_owner},{id:"freelancer",displayValue:Wr.freelancer},{id:"other",displayValue:Wr.other}],rTe=[{id:"student",displayValue:Fa.student},{id:"instructional_staff",displayValue:Fa.instructional_staff},{id:"researcher",displayValue:Fa.researcher},{id:"admin",displayValue:Fa.admin},{id:"alumni",displayValue:Fa.alumni},{id:"other",displayValue:Fa.other}],sTe=[{id:"marketing",displayValue:ft.marketing},{id:"analytics",displayValue:ft.analytics},{id:"product",displayValue:ft.product},{id:"comms",displayValue:ft.comms},{id:"engineering",displayValue:ft.engineering},{id:"education_professional",displayValue:ft.education_professional},{id:"finance",displayValue:ft.finance},{id:"customer_experience",displayValue:ft.customer_experience},{id:"project_management",displayValue:ft.project_management},{id:"design",displayValue:ft.design},{id:"administrative",displayValue:ft.administrative},{id:"it",displayValue:ft.it},{id:"ops",displayValue:ft.ops},{id:"human_resources",displayValue:ft.human_resources},{id:"research",displayValue:ft.research},{id:"sales",displayValue:ft.sales},{id:"partnerships",displayValue:ft.partnerships},{id:"legal",displayValue:ft.legal},{id:"healthcare",displayValue:ft.healthcare},{id:"other",displayValue:ft.other}],aTe=[{id:"engineering",displayValue:Lt.engineering},{id:"math",displayValue:Lt.math},{id:"applied_sciences",displayValue:Lt.applied_sciences},{id:"finance",displayValue:Lt.finance},{id:"health",displayValue:Lt.health},{id:"law",displayValue:Lt.law},{id:"business",displayValue:Lt.business},{id:"social",displayValue:Lt.social},{id:"liberal_art",displayValue:Lt.liberal_art},{id:"fine_art",displayValue:Lt.fine_art},{id:"linguistics",displayValue:Lt.linguistics},{id:"teaching",displayValue:Lt.teaching},{id:"dev",displayValue:Lt.dev},{id:"campus_ops",displayValue:Lt.campus_ops},{id:"it",displayValue:Lt.it},{id:"other",displayValue:Lt.other}],oTe=({onClose:e})=>{const t=L(),n=ln(fs.isBusinessWorkspace),r=ln(a=>a.currentWorkspace),s=n?t.formatMessage(Ak.workspaceWelcome,{workspaceName:r?.name}):"ChatGPT";return i.jsx(Te,{isOpen:!0,onClose:we,type:"success",title:s,size:"custom",noPadding:!0,className:"max-w-3xl",description:t.formatMessage(Ak.personalOnboardingSubheading),children:i.jsx(_R,{onClose:e,scope:Pm.Personal})})};function NLe({clientThreadId:e}){const[t,n]=p.useState(0),{hasSeenOnboardingDate:r}=Cb(),{hasSeenTeamOwnerOnboardingDate:s}=ER(),a=ln(fs.isBusinessWorkspace),o=Ce(),[c,l]=p.useState(!1),{data:u,isPending:d,isEnabled:f}=Eb(),m=$Ce(u,d&&f),h=SE(),g=wE(),v=m0(),y=ta(()=>Un.getThread(e)),b=AE(e)||!y,x=D.getConversationOrigin(e),{data:w,isError:C}=i0(),T=w!=null,M=w&&w?.accountItems.length>1&&w.currentAccountId==null,_=w?.accountItems.some(W=>W.isPersonalAccount()),k=!!w?.accountItems&&w.accountItems.length>0&&w.accountItems.every(({canAccessWithCurrentSession:W})=>!W),{eligible:I,isLoading:j}=CR(),{value:F}=at("1542198993"),{punchOutRequireLoginInfo:U}=wR(),{state:B}=qR(),{isOpen:N,isLoading:$}=xR(),{isOpen:H,isLoading:Y}=TR(),{isOpen:O,isLoading:R}=kR(),{isOpen:V,isLoading:X}=bR(),{state:re}=zR(),te=p.useMemo(()=>[{Component:RSe,getModalState:()=>U?"show":"hide",isDeferrable:!1},{Component:QCe,getModalState:()=>B,isDeferrable:!1},{Component:qCe,getModalState:()=>re,isDeferrable:!1},{Component:ISe,getModalState:()=>$||b?"loading":x===ow.APPLE?"hide":N?"show":"hide",isDeferrable:!1},{Component:NSe,getModalState:()=>X||b?"loading":x===ow.APPLE?"hide":V?"show":"hide",isDeferrable:!1},{Component:oTe,getModalState:()=>a?"hide":r===null?"loading":r===!1?"show":"hide",isDeferrable:!0},{Component:cCe,getModalState:()=>C?"hide":M?"show":T?"hide":"loading",isDeferrable:!1},{Component:ZSe,getModalState:()=>h!==null?"show":C||T?"hide":"loading",isDeferrable:!1},{Component:XSe,getModalState:()=>g!==null?"show":C||T?"hide":"loading",isDeferrable:!1},{Component:KSe,getModalState:()=>v!=null?"show":C||T?"hide":"loading",isDeferrable:!1},{Component:QSe,getModalState:()=>T?k?"show":"hide":"loading",isDeferrable:!1},{Component:GSe,getModalState:()=>Y?"loading":H?"show":"hide",isDeferrable:!1},{Component:qSe,getModalState:()=>R?"loading":O?"show":"hide",isDeferrable:!1},{Component:VCe,getModalState:()=>"hide",isDeferrable:!1},{Component:aCe,getModalState:()=>!o?.isTeam()||!o?.isOwnerOfAccount()||!_?"hide":!T||s===null?"loading":s===!1?"show":"hide",isDeferrable:!1},{Component:tTe,getModalState:()=>a?r===null?"loading":r===!1?"show":"hide":"hide",isDeferrable:!0},{Component:FSe,getModalState:()=>j?"loading":I&&F?"show":"hide",isDeferrable:!1},{Component:FCe,getModalState:()=>m,isDeferrable:!1}].filter(W=>!(W.isDeferrable&&c)),[U,B,v,T,r,s,_,a,C,h,g,o,k,M,m,c,F,I,j,N,$,V,X,re,Y,H,O,R,x,b]);p.useEffect(()=>{if(te[t]&&te[t].getModalState()==="hide"){const W=te.findIndex(be=>be.getModalState()!=="hide");n(W)}},[t,te]);const ue=te[t],he=ue?.getModalState()==="show";if(p.useEffect(()=>{const W=ve.getState().activeModals.has(et.BlockingInitialComponent);he!==W&&(he?$e.openModal(et.BlockingInitialComponent):$e.closeModal(et.BlockingInitialComponent))},[he]),ue==null)return i.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const Se=ue.getModalState();if(Se==="loading")return null;Se==="hide"&&n(W=>W+1);const se=te[t].Component;return i.jsx(se,{onClose:()=>{l(!0),n(W=>W+1)}})}const Ak=z({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});function iTe(e){switch(e){case xu.SSOMismatch:return{title:Yr.cannotAccessWorkspace,description:Yr.ssoMismatchDescription};case xu.RequireSSOLogin:return{title:Yr.cannotAccessWorkspace,description:Yr.requireSSODescription};case xu.UnexpectedSSOLogin:return{title:Yr.cannotAccessWorkspace,description:Yr.unexpectedSSODescription}}}const cTe=2e3;function OLe(){const e=IL(),t=Ce(),n=L(),r=Jt(),s=m0(),a=me({...zM(),select:()=>null}),o=Ce(),c=e?.errorCode,l=e!=null&&a.isFetched&&s==null&&!!o,[u,d]=p.useState(!1);p.useEffect(()=>{l&&setTimeout(()=>{d(!0)},cTe)},[l]);const f=c===xu.UnexpectedSSOLogin,m=l&&(f?u:!0),h=Y9();if(p.useEffect(()=>{if(!c||!m)return;const x=h?.split("@")?.[1];ie.addError(`SSO Catch All Modal: ${c} for ${h??"unknown user"}`,{sso_error:c,email:h,email_hostname:x})},[c,m,h]),!m)return null;const g=e?.accountName??t?.name??n.formatMessage(Yr.workspacePlaceholder),v=()=>{const x=t?.ssoConnectionName?{connection:t.ssoConnectionName}:void 0;r({authType:"login",additionalAuthParams:x})},{title:y,description:b}=iTe(e.errorCode);return i.jsx(Te,{isOpen:!0,onClose:we,type:"warning",size:"custom",className:"max-w-3xl",title:i.jsx("div",{className:"flex flex-col",children:i.jsx("div",{className:"text-lg",children:i.jsx(S,{...y})})}),icon:ya,primaryButton:i.jsx(Ke.Button,{onClick:v,color:"primary",children:i.jsx(S,{...Yr.authenticateNotice,values:{workspaceName:g}})}),secondaryButton:i.jsx(Ke.Button,{onClick:()=>{E.logLogOutButtonClicked({location:"sso_catch_all_modal"}),hf()},children:i.jsx(S,{id:"KlMYRb",defaultMessage:"Log out"})}),children:i.jsx("div",{className:"flex flex-col space-y-4",children:i.jsx("div",{children:i.jsx(S,{...b})})})})}const Yr=z({authenticateNotice:{id:"zF1QJE",defaultMessage:"Authenticate to {workspaceName}"},workspacePlaceholder:{id:"IIY4N4",defaultMessage:"this workspace"},cannotAccessWorkspace:{id:"IlXHdd",defaultMessage:"Cannot Access This Workspace"},ssoMismatchDescription:{id:"xSuU9q",defaultMessage:"The SSO you logged in with does not match the SSO registered for this workspace. Try re-authenticating with that SSO."},unexpectedSSODescription:{id:"uSkRZx",defaultMessage:"This workspace doesn't have an SSO associated with it, but you're trying to log in with SSO. Try logging in with social authentication (i.e. Google) or with your password."},requireSSODescription:{id:"akKMy1",defaultMessage:"Your organization requires that you log in with SSO to access this workspace"}}),iu="temporary-chat",_b=p.createContext(void 0);function RLe(){return p.useContext(_b).threadContentScrollContainerElementRef}function DLe(){return To(p.useContext(_b).footerRootContainerElementRef,"footerRootContainerElementRef")}function lTe({value:e,children:t}){return i.jsx(_b.Provider,{value:e,children:t})}function uTe(){return i.jsx("div",{slot:"keyboard"})}function dTe(e){const{anchor:t,children:n,className:r,leading:s,ref:a,style:o,trailing:c,trackLeading:l,trackTrailing:u,...d}=e,{name:f}=d,[m,h]=$i(d),[g,v]=$i({disableSizeTracking:!l,name:`${f}-leading`,track:"height"}),[y,b]=$i({disableSizeTracking:!u,name:`${f}-trailing`,track:"height"}),x=t==="vertical"||t==="bottom",w=f??"default",C=null,T=p.useRef(null),M=p.useMemo(()=>({threadContentScrollContainerElementRef:C,footerRootContainerElementRef:T}),[]),{value:_}=at("2128055372");return i.jsxs("section",{className:A(iw.screen,r,{[iw.cssOnlyKeyboard]:_}),"data-testid":`screen-${w}`,"screen-anchor":t,ref:k=>{h(k),a&&(a.current=k)},style:{...o,...m,...g,...y,container:f?`${f} / inline-size`:void 0,minWidth:`min(var(--screen-${w}_min-width), 100cqw)`},children:[i.jsx("div",{slot:"leading",ref:v,children:s}),i.jsx("div",{slot:"content",children:i.jsx(lTe,{value:M,children:n})}),i.jsx("div",{slot:"trailing",ref:k=>{b(k),T.current=k},children:c}),x&&i.jsx(uTe,{})]})}function KR(e){const{className:t,htmlFor:n,icon:r,label:s,onClick:a,onActivate:o,style:c,tooltipSideOffset:l,tabIndex:u=0}=e;return i.jsx(Ye,{label:s,className:"inline-flex",interactive:!1,sideOffset:l,children:i.jsx("label",{className:A(t,Uu.wrapper),style:c,htmlFor:n,onClick:a,tabIndex:u,onKeyPress:d=>{(d.key==="Enter"||d.key===" ")&&o?.(d)},children:i.jsxs("span",{className:Uu.label,children:[i.jsx("span",{className:"sr-only",children:s}),r]})})})}function jv({id:e,name:t,checked:n,onChange:r=we}){return i.jsx("input",{className:"sr-only",checked:n,id:e,name:t,type:"checkbox",readOnly:!0,onChange:r})}function XR({title:e,handleClose:t,children:n}){const r=gf(),{closeThreadSidebar:s}=Mo();return i.jsxs(i.Fragment,{children:[i.jsx(dTe,{anchor:"top",className:"relative flex-1 border-l border-l-token-border-sharp",name:"threadFlyOut",trackLeading:!0,leading:i.jsx(Sg,{name:"search-sources-header",type:"primary",className:`flex min-h-[calc(var(--screen-thread-header-min-height,60px)+1px)] items-center ${e?"":"justify-end p-1.5"} !bg-transparent`,children:e?i.jsxs("div",{className:"mb-5 flex h-[calc(var(--screen-thread-header-min-height,60px)+1px)] items-center justify-between border-b border-token-border-sharp bg-token-main-surface-primary px-6 py-3",children:[i.jsx("span",{className:"text-[17px] font-medium",children:e}),i.jsx(mo,{className:"-mr-3.5 bg-token-main-surface-primary",onClick:t})]}):i.jsx("div",{className:"bg-token-main-surface-primary p-1",children:i.jsx(mo,{onClick:t})})}),children:n}),i.jsx(jv,{id:Mn.ThreadSidebarOpenOrClosed,name:Mn.ThreadSidebarOpenOrClosed,checked:r,onChange:a=>{a.currentTarget.checked||s({})}})]})}const fTe={strong:e=>{const{node:t,children:n,...r}=e;return i.jsx("strong",{...r,className:A(r.className,"font-semibold text-token-text-primary"),children:n})},p:e=>{const{node:t,children:n,...r}=e;return i.jsx("p",{...r,className:A(r.className,"text-sm","!important has-[strong]:mb-0 [&:not(:has(strong))]:mb-[18px]"),children:n})}};function LLe({clientThreadId:e}){const{clientThreadId:t,currentGroupedMessageIndex:n,turnIndex:r=-1}=h0("summarizer")??{},s=xc(e),a=NL(e,r,s),o=gf(),{closeThreadSidebar:c}=Mo(),l=p.useCallback(()=>{c({clientThreadId:e})},[c,e]),{messages:u}=a??{},d=u?$_(u):void 0,f=n!==void 0&&d?d[n]:void 0,m=f&&f.type===ye.a8km123?f.messages[0].message:void 0,h=m?Pr(m):"",g=p.useMemo(()=>a?OL.getRequestIdFromConversationTurn(a):"",[a]),v=RL({clientThreadId:e,conversationLeafId:s}),y=Jd(g),b=g&&y&&!v;return!a||!o||!m||t!==e?null:i.jsx("div",{className:"!bg-token-main-surface-primary",children:i.jsx(XR,{title:i.jsx(S,{id:"sidebar-details",defaultMessage:"Details"}),handleClose:l,children:h?i.jsx("div",{id:"sidebar-summarizer",className:"bg-token-main-surface-primary px-6",children:i.jsx(fm,{componentOverrides:fTe,className:"not-prose",children:h})}):i.jsx("div",{className:"flex h-full items-center justify-center bg-token-main-surface-primary px-10 text-token-text-tertiary",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-lg",children:i.jsx(S,{id:"chatScreenSummarizerFlyout.noDetailsAvailable",defaultMessage:"No details available"})}),!b&&i.jsx("div",{className:"mt-2 text-base",children:i.jsx(S,{id:"chatScreenSummarizerFlyout.noSummaryAvailable",defaultMessage:"Occasionally, the model generates the best response without anything to summarize."})})]})})})})}function $Le(){const{value:e}=at("3435450078");return e}var QR={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.Unidentified="Unidentified",t.Alt="Alt",t.AltGraph="AltGraph",t.CapsLock="CapsLock",t.Control="Control",t.Fn="Fn",t.FnLock="FnLock",t.Hyper="Hyper",t.Meta="Meta",t.NumLock="NumLock",t.ScrollLock="ScrollLock",t.Shift="Shift",t.Super="Super",t.Symbol="Symbol",t.SymbolLock="SymbolLock",t.Enter="Enter",t.Tab="Tab",t.ArrowDown="ArrowDown",t.ArrowLeft="ArrowLeft",t.ArrowRight="ArrowRight",t.ArrowUp="ArrowUp",t.End="End",t.Home="Home",t.PageDown="PageDown",t.PageUp="PageUp",t.Backspace="Backspace",t.Clear="Clear",t.Copy="Copy",t.CrSel="CrSel",t.Cut="Cut",t.Delete="Delete",t.EraseEof="EraseEof",t.ExSel="ExSel",t.Insert="Insert",t.Paste="Paste",t.Redo="Redo",t.Undo="Undo",t.Accept="Accept",t.Again="Again",t.Attn="Attn",t.Cancel="Cancel",t.ContextMenu="ContextMenu",t.Escape="Escape",t.Execute="Execute",t.Find="Find",t.Finish="Finish",t.Help="Help",t.Pause="Pause",t.Play="Play",t.Props="Props",t.Select="Select",t.ZoomIn="ZoomIn",t.ZoomOut="ZoomOut",t.BrightnessDown="BrightnessDown",t.BrightnessUp="BrightnessUp",t.Eject="Eject",t.LogOff="LogOff",t.Power="Power",t.PowerOff="PowerOff",t.PrintScreen="PrintScreen",t.Hibernate="Hibernate",t.Standby="Standby",t.WakeUp="WakeUp",t.AllCandidates="AllCandidates",t.Alphanumeric="Alphanumeric",t.CodeInput="CodeInput",t.Compose="Compose",t.Convert="Convert",t.Dead="Dead",t.FinalMode="FinalMode",t.GroupFirst="GroupFirst",t.GroupLast="GroupLast",t.GroupNext="GroupNext",t.GroupPrevious="GroupPrevious",t.ModeChange="ModeChange",t.NextCandidate="NextCandidate",t.NonConvert="NonConvert",t.PreviousCandidate="PreviousCandidate",t.Process="Process",t.SingleCandidate="SingleCandidate",t.HangulMode="HangulMode",t.HanjaMode="HanjaMode",t.JunjaMode="JunjaMode",t.Eisu="Eisu",t.Hankaku="Hankaku",t.Hiragana="Hiragana",t.HiraganaKatakana="HiraganaKatakana",t.KanaMode="KanaMode",t.KanjiMode="KanjiMode",t.Katakana="Katakana",t.Romaji="Romaji",t.Zenkaku="Zenkaku",t.ZenkakuHanaku="ZenkakuHanaku",t.F1="F1",t.F2="F2",t.F3="F3",t.F4="F4",t.F5="F5",t.F6="F6",t.F7="F7",t.F8="F8",t.F9="F9",t.F10="F10",t.F11="F11",t.F12="F12",t.F13="F13",t.F14="F14",t.F15="F15",t.F16="F16",t.F17="F17",t.F18="F18",t.F19="F19",t.F20="F20",t.Soft1="Soft1",t.Soft2="Soft2",t.Soft3="Soft3",t.Soft4="Soft4",t.AppSwitch="AppSwitch",t.Call="Call",t.Camera="Camera",t.CameraFocus="CameraFocus",t.EndCall="EndCall",t.GoBack="GoBack",t.GoHome="GoHome",t.HeadsetHook="HeadsetHook",t.LastNumberRedial="LastNumberRedial",t.Notification="Notification",t.MannerMode="MannerMode",t.VoiceDial="VoiceDial",t.ChannelDown="ChannelDown",t.ChannelUp="ChannelUp",t.MediaFastForward="MediaFastForward",t.MediaPause="MediaPause",t.MediaPlay="MediaPlay",t.MediaPlayPause="MediaPlayPause",t.MediaRecord="MediaRecord",t.MediaRewind="MediaRewind",t.MediaStop="MediaStop",t.MediaTrackNext="MediaTrackNext",t.MediaTrackPrevious="MediaTrackPrevious",t.AudioBalanceLeft="AudioBalanceLeft",t.AudioBalanceRight="AudioBalanceRight",t.AudioBassDown="AudioBassDown",t.AudioBassBoostDown="AudioBassBoostDown",t.AudioBassBoostToggle="AudioBassBoostToggle",t.AudioBassBoostUp="AudioBassBoostUp",t.AudioBassUp="AudioBassUp",t.AudioFaderFront="AudioFaderFront",t.AudioFaderRear="AudioFaderRear",t.AudioSurroundModeNext="AudioSurroundModeNext",t.AudioTrebleDown="AudioTrebleDown",t.AudioTrebleUp="AudioTrebleUp",t.AudioVolumeDown="AudioVolumeDown",t.AudioVolumeMute="AudioVolumeMute",t.AudioVolumeUp="AudioVolumeUp",t.MicrophoneToggle="MicrophoneToggle",t.MicrophoneVolumeDown="MicrophoneVolumeDown",t.MicrophoneVolumeMute="MicrophoneVolumeMute",t.MicrophoneVolumeUp="MicrophoneVolumeUp",t.TV="TV",t.TV3DMode="TV3DMode",t.TVAntennaCable="TVAntennaCable",t.TVAudioDescription="TVAudioDescription",t.TVAudioDescriptionMixDown="TVAudioDescriptionMixDown",t.TVAudioDescriptionMixUp="TVAudioDescriptionMixUp",t.TVContentsMenu="TVContentsMenu",t.TVDataService="TVDataService",t.TVInput="TVInput",t.TVInputComponent1="TVInputComponent1",t.TVInputComponent2="TVInputComponent2",t.TVInputComposite1="TVInputComposite1",t.TVInputComposite2="TVInputComposite2",t.TVInputHDMI1="TVInputHDMI1",t.TVInputHDMI2="TVInputHDMI2",t.TVInputHDMI3="TVInputHDMI3",t.TVInputHDMI4="TVInputHDMI4",t.TVInputVGA1="TVInputVGA1",t.TVMediaContext="TVMediaContext",t.TVNetwork="TVNetwork",t.TVNumberEntry="TVNumberEntry",t.TVPower="TVPower",t.TVRadioService="TVRadioService",t.TVSatellite="TVSatellite",t.TVSatelliteBS="TVSatelliteBS",t.TVSatelliteCS="TVSatelliteCS",t.TVSatelliteToggle="TVSatelliteToggle",t.TVTerrestrialAnalog="TVTerrestrialAnalog",t.TVTerrestrialDigital="TVTerrestrialDigital",t.TVTimer="TVTimer",t.AVRInput="AVRInput",t.AVRPower="AVRPower",t.ColorF0Red="ColorF0Red",t.ColorF1Green="ColorF1Green",t.ColorF2Yellow="ColorF2Yellow",t.ColorF3Blue="ColorF3Blue",t.ColorF4Grey="ColorF4Grey",t.ColorF5Brown="ColorF5Brown",t.ClosedCaptionToggle="ClosedCaptionToggle",t.Dimmer="Dimmer",t.DisplaySwap="DisplaySwap",t.DVR="DVR",t.Exit="Exit",t.FavoriteClear0="FavoriteClear0",t.FavoriteClear1="FavoriteClear1",t.FavoriteClear2="FavoriteClear2",t.FavoriteClear3="FavoriteClear3",t.FavoriteRecall0="FavoriteRecall0",t.FavoriteRecall1="FavoriteRecall1",t.FavoriteRecall2="FavoriteRecall2",t.FavoriteRecall3="FavoriteRecall3",t.FavoriteStore0="FavoriteStore0",t.FavoriteStore1="FavoriteStore1",t.FavoriteStore2="FavoriteStore2",t.FavoriteStore3="FavoriteStore3",t.Guide="Guide",t.GuideNextDay="GuideNextDay",t.GuidePreviousDay="GuidePreviousDay",t.Info="Info",t.InstantReplay="InstantReplay",t.Link="Link",t.ListProgram="ListProgram",t.LiveContent="LiveContent",t.Lock="Lock",t.MediaApps="MediaApps",t.MediaAudioTrack="MediaAudioTrack",t.MediaLast="MediaLast",t.MediaSkipBackward="MediaSkipBackward",t.MediaSkipForward="MediaSkipForward",t.MediaStepBackward="MediaStepBackward",t.MediaStepForward="MediaStepForward",t.MediaTopMenu="MediaTopMenu",t.NavigateIn="NavigateIn",t.NavigateNext="NavigateNext",t.NavigateOut="NavigateOut",t.NavigatePrevious="NavigatePrevious",t.NextFavoriteChannel="NextFavoriteChannel",t.NextUserProfile="NextUserProfile",t.OnDemand="OnDemand",t.Pairing="Pairing",t.PinPDown="PinPDown",t.PinPMove="PinPMove",t.PinPToggle="PinPToggle",t.PinPUp="PinPUp",t.PlaySpeedDown="PlaySpeedDown",t.PlaySpeedReset="PlaySpeedReset",t.PlaySpeedUp="PlaySpeedUp",t.RandomToggle="RandomToggle",t.RcLowBattery="RcLowBattery",t.RecordSpeedNext="RecordSpeedNext",t.RfBypass="RfBypass",t.ScanChannelsToggle="ScanChannelsToggle",t.ScreenModeNext="ScreenModeNext",t.Settings="Settings",t.SplitScreenToggle="SplitScreenToggle",t.STBInput="STBInput",t.STBPower="STBPower",t.Subtitle="Subtitle",t.Teletext="Teletext",t.VideoModeNext="VideoModeNext",t.Wink="Wink",t.ZoomToggle="ZoomToggle",t.SpeechCorrectionList="SpeechCorrectionList",t.SpeechInputToggle="SpeechInputToggle",t.Close="Close",t.New="New",t.Open="Open",t.Print="Print",t.Save="Save",t.SpellCheck="SpellCheck",t.MailForward="MailForward",t.MailReply="MailReply",t.MailSend="MailSend",t.LaunchCalculator="LaunchCalculator",t.LaunchCalendar="LaunchCalendar",t.LaunchContacts="LaunchContacts",t.LaunchMail="LaunchMail",t.LaunchMediaPlayer="LaunchMediaPlayer",t.LaunchMusicPlayer="LaunchMusicPlayer",t.LaunchMyComputer="LaunchMyComputer",t.LaunchPhone="LaunchPhone",t.LaunchScreenSaver="LaunchScreenSaver",t.LaunchSpreadsheet="LaunchSpreadsheet",t.LaunchWebBrowser="LaunchWebBrowser",t.LaunchWebCam="LaunchWebCam",t.LaunchWordProcessor="LaunchWordProcessor",t.LaunchApplication1="LaunchApplication1",t.LaunchApplication2="LaunchApplication2",t.LaunchApplication3="LaunchApplication3",t.LaunchApplication4="LaunchApplication4",t.LaunchApplication5="LaunchApplication5",t.LaunchApplication6="LaunchApplication6",t.LaunchApplication7="LaunchApplication7",t.LaunchApplication8="LaunchApplication8",t.LaunchApplication9="LaunchApplication9",t.LaunchApplication10="LaunchApplication10",t.LaunchApplication11="LaunchApplication11",t.LaunchApplication12="LaunchApplication12",t.LaunchApplication13="LaunchApplication13",t.LaunchApplication14="LaunchApplication14",t.LaunchApplication15="LaunchApplication15",t.LaunchApplication16="LaunchApplication16",t.BrowserBack="BrowserBack",t.BrowserFavorites="BrowserFavorites",t.BrowserForward="BrowserForward",t.BrowserHome="BrowserHome",t.BrowserRefresh="BrowserRefresh",t.BrowserSearch="BrowserSearch",t.BrowserStop="BrowserStop",t.Decimal="Decimal",t.Key11="Key11",t.Key12="Key12",t.Multiply="Multiply",t.Add="Add",t.Divide="Divide",t.Subtract="Subtract",t.Separator="Separator"}(e.Key||(e.Key={}))})(QR);function Ab(){const{value:e}=at("3768008236"),{layer:t}=_n("3436367576");let n=!1,r=!1;const s=t.get("enable_local_indexing",!1);n=t.get("enable_ux",!1)||e,r=s||e;const{value:o}=at("187267097"),{value:c}=at("3323077373");return{isFannyPackEnabled:o||n,isFannyPackInitializerEnabled:c||r}}const mTe=async(e,t,n,r,s="mouse")=>{const a=D.getThreadCurrentLeafId(e),c=D.getThreadConversationTurns(e,a)[t];if(!c)return Promise.reject();const{messages:l}=c,u=l.reduce((f,m)=>!m.err&&m.message.author.role===le.Assistant&&m.message.recipient==="all"?f+(f?`

`:"")+Pr(m.message,{shouldGetTextFromContentReferences:!0}):f,""),d={"text/plain":u};try{let f="";const{markdownToHtml:m}=await qe(async()=>{const{markdownToHtml:h}=await import("./ipfbk7pynq3s7u67.js").then(g=>g.F);return{markdownToHtml:h}},__vite__mapDeps([12,1,2,3,13,14,15,16,17,6,18,19,20,21,22,8,23,24]));for(const h of l)!h.err&&h.message.author.role===le.Assistant&&h.message.recipient==="all"&&(f&&(f+=`

`),f+=await m(Pr(h.message)));d["text/html"]=f}catch(f){ie.addError(f)}return ul(d,n,r).then(()=>{const f=D.getServerThreadId(e);f&&K.submitImplicitMessageFeedback({messageId:l[0].message.id,type:"copy",serverThreadId:f,selectedText:u,source:s,location:"message"})})},pTe=(e,t,n,r="mouse")=>{const s=D.getThreadCurrentLeafId(e),a=D.getThreadConversationTurns(e,s);return mTe(e,a.length-1,t,n,r)};var Ur={};Object.defineProperty(Ur,"__esModule",{value:!0});var hTe=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),Mh={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ZR={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:hTe?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Pb={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var cu=1;cu<20;cu++)Pb["f"+cu]=111+cu;function Nm(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(o){return JR(o,t)}),s=function(c){return r.some(function(l){return e5(l,c)})},a=n==null?s:s(n);return a}function gTe(e,t){return Nm(e,t)}function vTe(e,t){return Nm(e,{byKey:!0},t)}function JR(e,t){var n=t&&t.byKey,r={};e=e.replace("++","+add");var s=e.split("+"),a=s.length;for(var o in Mh)r[Mh[o]]=!1;var c=!0,l=!1,u=void 0;try{for(var d=s[Symbol.iterator](),f;!(c=(f=d.next()).done);c=!0){var m=f.value,h=m.endsWith("?")&&m.length>1;h&&(m=m.slice(0,-1));var g=jb(m),v=Mh[g];if(m.length>1&&!v&&!ZR[m]&&!Pb[g])throw new TypeError('Unknown modifier: "'+m+'"');(a===1||!v)&&(n?r.key=g:r.which=t5(m)),v&&(r[v]=h?null:!0)}}catch(y){l=!0,u=y}finally{try{!c&&d.return&&d.return()}finally{if(l)throw u}}return r}function e5(e,t){for(var n in e){var r=e[n],s=void 0;if(r!=null&&(n==="key"&&t.key!=null?s=t.key.toLowerCase():n==="which"?s=r===91&&t.which===93?91:t.which:s=t[n],!(s==null&&r===!1)&&s!==r))return!1}return!0}function t5(e){e=jb(e);var t=Pb[e]||e.toUpperCase().charCodeAt(0);return t}function jb(e){return e=e.toLowerCase(),e=ZR[e]||e,e}var yTe=Ur.default=Nm;Ur.isHotkey=Nm;Ur.isCodeHotkey=gTe;Ur.isKeyHotkey=vTe;Ur.parseHotkey=JR;Ur.compareHotkey=e5;Ur.toKeyCode=t5;Ur.toKeyName=jb;function xTe(e,t,n){const r=ef(),s=e.map(a=>{const{keyboardBinding:o}=a;let c=o.join("+");if(a.altKeyboardBindings){c=[c];const l=a.altKeyboardBindings.map(u=>u.join("+"));c=c.concat(l)}return yTe(c,{byKey:!0})});PE(()=>{if(n?.enabled===!1)return;const a=l=>{if(!l.repeat)for(let u=0;u<s.length;u++)s[u](l)&&(e[u].enabled===void 0||e[u].enabled)&&(l.preventDefault(),t(e[u]),e[u].action(l))},o=l=>{l.key!==void 0&&a(l)},c=r?.document??document;return c.addEventListener("keydown",o),()=>{c.removeEventListener("keydown",o)}},[e,n])}const bTe=/```.*?\n([\s\S]+?)\n?```[^`]*$/gms;function Iv(){return/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)}const pe={Mod:"mod",Comma:",",Space:"Space"," ":"Space","":"Space",...QR.Key},wTe={[pe.Mod]:Iv()?"":"Ctrl",[pe.Meta]:Iv()?"":"Win",[pe.Comma]:",",[pe.Enter]:"",[pe.Escape]:"Esc",[pe.ArrowUp]:"",[pe.ArrowDown]:"",[pe.ArrowLeft]:"",[pe.ArrowRight]:"",[pe.Backspace]:"",[pe.Delete]:"",[pe.Tab]:"",[pe.Control]:"Ctrl",[pe.Shift]:"Shift"},STe=e=>e.map(t=>wTe[t]??t),jn=z({newChat:{id:"keyboardActions.newChat",defaultMessage:"Open new chat"},focusPromptTextarea:{id:"keyboardActions.focusPromptTextarea",defaultMessage:"Focus chat input"},copyLastCodeBlock:{id:"keyboardActions.copyLastCodeBlock",defaultMessage:"Copy last code block"},copyLastResponse:{id:"keyboardActions.copyLastResponse",defaultMessage:"Copy last response"},toggleCustomInstructions:{id:"keyboardActions.toggleCustomInstructions",defaultMessage:"Set custom instructions"},navigationToggle:{id:"keyboardActions.navigationToggle",defaultMessage:"Toggle sidebar"},deleteChat:{id:"keyboardActions.deleteChat",defaultMessage:"Delete chat"},archiveChat:{id:"keyboardActions.archiveChat",defaultMessage:"Archive chat"},zoomIn:{id:"keyboardActions.zoomIn",defaultMessage:"Zoom in"},zoomOut:{id:"keyboardActions.zoomOut",defaultMessage:"Zoom out"},resetZoom:{id:"keyboardActions.resetZoom",defaultMessage:"Reset zoom"},toggleKeyboardActions:{id:"keyboardActions.toggleKeyboardActions",defaultMessage:"Show shortcuts"}}),Ib=new DL,CTe=({resetThreadAction:e,clientThreadId:t,focusPromptTextareaAction:n,toaster:r,isFannyPackEnabled:s,isZoomEnabled:a})=>[{key:"newChat",action:e||we,actionMessageDescriptor:jn.newChat,group:"Core",keyboardBinding:[pe.Mod,pe.Shift,"o"],altKeyboardBindings:s?[]:[[pe.Mod,"k"]]},{key:"focusPromptTextarea",action:n??rR,actionMessageDescriptor:jn.focusPromptTextarea,group:"Chat",keyboardBinding:[pe.Shift,pe.Escape]},{key:"copyLastCodeBlock",action:o=>{if(t!=null){const c=D.getThreadCurrentLeafId(t),l=D.getThreadConversationTurns(t,c);for(let u=l.length-1;u>=0;u--){const{messages:d}=l[u],m=[...d.reduce((g,v)=>v.err==null&&v.message.author.role===le.Assistant&&v.message.recipient==="all"?g+(g?`

`:"")+Pr(v.message):g,"").matchAll(bTe)],h=m.length?m[m.length-1][1]:null;if(h!=null){ul(h,r,o).then(()=>{r.success("Copied code block to clipboard")});break}}}},actionMessageDescriptor:jn.copyLastCodeBlock,group:"Chat",keyboardBinding:[pe.Mod,pe.Shift,";"],altKeyboardBindings:[[pe.Mod,pe.Shift,":"]]},{key:"copyLastResponse",action:o=>{t!=null&&pTe(t,r,o,"keyboard").then(()=>{r.success("Last response copied to clipboard")})},actionMessageDescriptor:jn.copyLastResponse,group:"Chat",keyboardBinding:[pe.Mod,pe.Shift,"c"]},{key:"toggleCustomInstructions",action:()=>$e.toggleModal(et.UserContext),actionMessageDescriptor:jn.toggleCustomInstructions,group:"Settings",keyboardBinding:[pe.Mod,pe.Shift,"i"]},{key:"navigationToggle",action:()=>$e.toggleNavSidebar(),actionMessageDescriptor:jn.navigationToggle,group:"Core",keyboardBinding:[pe.Mod,pe.Shift,"s"]},{key:"deleteChat",action:()=>{if(t){const o=D.getServerThreadId(t);o&&Ib.publish({kind:"deleteChat",serverThreadId:o})}},actionMessageDescriptor:jn.deleteChat,group:"Chat",keyboardBinding:[pe.Mod,pe.Shift,pe.Backspace],altKeyboardBindings:[[pe.Mod,pe.Shift,pe.Delete]]},{key:"zoomIn",enabled:a,action:()=>LL(),actionMessageDescriptor:jn.zoomIn,group:"Chat",keyboardBinding:[pe.Mod,"+"],altKeyboardBindings:[[pe.Mod,"="]]},{key:"zoomOut",enabled:a,action:()=>$L(),actionMessageDescriptor:jn.zoomOut,group:"Chat",keyboardBinding:[pe.Mod,"-"]},{key:"resetZoom",enabled:a,action:()=>FL(),actionMessageDescriptor:jn.resetZoom,group:"Chat",keyboardBinding:[pe.Mod,"0"]},{key:"toggleKeyboardActions",action:()=>$e.toggleModal(et.KeyboardActions),actionMessageDescriptor:jn.toggleKeyboardActions,group:"Settings",keyboardBinding:[pe.Mod,"/"]}],n5=e=>xTe(e,t=>{E.logEvent(P.keyboardShortcut,{keyboardActionKey:t.key}),ie.addAction("chatgpt_keyboard_shortcut",{keyboardActionKey:t.key})},{enabled:!0}),r5=({resetThreadAction:e,clientThreadId:t,focusPromptTextareaAction:n}={})=>{const r=Ne(),{isFannyPackEnabled:s}=Ab(),{value:a}=ot("842034403"),o=Eo&&a;return p.useMemo(()=>CTe({resetThreadAction:e,clientThreadId:t,focusPromptTextareaAction:n,toaster:r,isFannyPackEnabled:s,isZoomEnabled:o}).filter(({enabled:l=!0})=>l),[r,t,e,s,n,o])},TTe=({resetThreadAction:e,clientThreadId:t,focusPromptTextareaAction:n})=>{const r=r5({resetThreadAction:e,clientThreadId:t,focusPromptTextareaAction:n}),a=ve(o=>o.isVoiceActive)?[]:r;n5(a)},FLe=({setSelectedVoiceIndex:e,prevVoiceIndex:t,nextVoiceIndex:n})=>{const r=[{key:"selectPrevVoice",action:()=>{e(t)},actionMessageDescriptor:{defaultMessage:"Select previous voice"},group:"Chat",keyboardBinding:[pe.ArrowLeft]},{key:"selectNextVoice",action:()=>{e(n)},actionMessageDescriptor:{defaultMessage:"Select next voice"},group:"Chat",keyboardBinding:[pe.ArrowRight]}];n5(r)};function kTe({href:e,icon:t,expandToContainer:n,label:r,rightIcon:s,hoverRightIcon:a,isMenuOpen:o,showActiveIndicator:c,loggingGizmoId:l,onClick:u,target:d,testId:f,elementRef:m}){const h=yn();return i.jsxs(En,{to:e,target:d,title:r,"data-testid":f,className:A("group flex items-center gap-2.5 rounded-lg",!h&&"h-10 bg-token-sidebar-surface-primary font-normal",h&&"py-[7px] tracking-condensed",!n&&"px-2",n&&"flex-1 px-2 py-2",h&&c&&"bg-token-sidebar-surface-secondary",h&&!o&&"hover:bg-token-main-surface-secondary",!h&&o&&"bg-token-main-surface-primary",!h&&!o&&"hover:bg-token-sidebar-surface-secondary"),onClick:g=>{E.logNewChatButtonClicked({location:"Sidebar gizmo list",gizmo_id:l}),E.logEvent(P.sidebarClickGizmo,{gizmo_id:l}),u?.(g)},ref:m,children:[i.jsx("div",{className:"flex h-6 w-6 items-center justify-center text-token-text-secondary",children:t}),i.jsx("div",{className:A(h?"text-body":"text-sm","grow overflow-hidden text-ellipsis whitespace-nowrap text-token-text-primary"),children:r}),a,s]})}function MTe(){return mf("1722608525").config.get("show_new_button",!1)}function BLe({onNewThread:e}){const t=L();return MTe()?i.jsx("div",{className:"no-draggable relative self-stretch",children:i.jsx(kTe,{href:"/",expandToContainer:!0,onClick:r=>{e?(r.preventDefault(),e()):q.logEvent("chatgpt_web_thread_tap_new_thread")},hoverRightIcon:null,icon:i.jsx(b0,{className:"icon-sidebar text-[##676767] dark:text-[#B9B9B9]"}),isMenuOpen:!1,label:t.formatMessage({id:"mG13YW",defaultMessage:"New chat"}),loggingGizmoId:"primary",testId:"new-chat-button"})}):null}function ETe({children:e,className:t,header:n,isLastInGroup:r=!1,ulClassName:s}){return i.jsxs("div",{className:"group/sidebar",children:[i.jsx("div",{className:A(t,"z-20 select-none overflow-clip text-ellipsis break-all py-2 text-xs font-semibold text-token-text-primary screen-arch:sticky screen-arch:top-[var(--sticky-title-offset)] screen-arch:min-w-[50cqw] screen-arch:text-token-text-secondary"),style:{backgroundImage:"var(--occluding-gradient)"},children:n}),i.jsx("aside",{className:A("-ml-2 flex flex-col gap-4 screen-arch:pt-1",r?"mb-0":"mb-3"),children:i.jsx("ul",{className:A("flex flex-col screen-arch:gap-0.5",s),children:e})})]})}function Nb({isFirstParty:e,gizmoId:t,src:n,alt:r,className:s}){const a=Zo(t);return i.jsx("div",{className:s,children:n!=null?i.jsx("div",{className:"gizmo-shadow-stroke overflow-hidden rounded-full",children:i.jsx("img",{src:n,className:"h-full w-full bg-token-main-surface-secondary",alt:r??"GPT",width:80,height:80})}):i.jsx("div",{className:"gizmo-shadow-stroke relative flex h-full items-center justify-center rounded-full bg-token-main-surface-primary text-token-text-primary",children:e||a?i.jsx(YM,{className:"h-2/3 w-2/3"}):i.jsx(Y$,{className:"h-2/3 w-2/3 text-gray-400"})})})}function ULe({emoji:e,className:t}){return i.jsx("div",{className:A("flex items-center justify-center",t),children:e})}function _Te({gizmoId:e,className:t}){const{data:n}=Ss(e);return i.jsx(Nb,{src:n?.gizmo.display.profile_picture_url,gizmoId:e,isFirstParty:n?.gizmo.tags?.includes(Oc.FirstParty)??!1,className:t})}const ATe=z({exploreStoreEnabled:{id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"},keepInSidebar:{id:"gizmo.keepInSidebar",defaultMessage:"Keep in sidebar"},newChat:{id:"gizmo.newChat",defaultMessage:"New chat"},clearChat:{id:"gizmo.clearChat",defaultMessage:"Clear chat"}});var s5=(e=>(e[e.Keep=0]="Keep",e[e.Recents=1]="Recents",e[e.Workspace=2]="Workspace",e))(s5||{});const PTe=Xe(()=>qe(()=>import("./h8933mnh4d08np9o.js"),__vite__mapDeps([38,1,2,3])).then(e=>e.GizmoKeepInSidebarMenuItem));function VLe({gizmo:e,isOpen:t,setIsOpen:n,section:r}){const s=ke();return i.jsxs(ga,{open:t,onOpenChange:n,triggerButton:i.jsx("button",{className:A("flex text-token-text-secondary hover:text-token-text-primary",t?"":"invisible group-hover:visible"),children:i.jsx(xf,{className:"icon-md"})}),contentAlign:"start",sideOffset:4,alignOffset:-4,size:"auto",children:[r===s5.Recents&&i.jsx(ne.Item,{onClick:async()=>{await tt.updateGizmoSidebar(s,mA,e.gizmo.id,"keep")},children:i.jsx(S,{...ATe.keepInSidebar})}),i.jsx(PTe,{gizmoResource:e})]})}function jTe({conversation:e,onClose:t}){const[n,r]=p.useState(e.title),s=ke();function a(){n!==e.title&&(D.setTitle(e.id,n,kc.User),E.logEvent(P.renameThread,{threadId:e.id,content:n}),K.patchConversation(e.id,{title:n}).then(()=>{gs(s)}))}return i.jsx("input",{type:"text",value:n,onChange:o=>{r(o.target.value)},onKeyDown:o=>{switch(o.key){case"Escape":t();break;case"Enter":a(),t();break}},onBlur:()=>{a(),t()},autoFocus:!0,className:"w-full border border-token-border-light bg-transparent p-0 text-sm"})}function a5(e,t,n){const{title:r,titleSource:s}=jE(e),[a,o]=p.useState(!1),c=r??t,l=p.useRef(c);return p.useEffect(()=>(n&&s===kc.Generated&&c!==l.current&&o(!0),()=>{l.current=c}),[n,c,s]),{isTypingEffect:a,resolvedTitle:c}}function o5(){const e=p.useRef(!1);return p.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),p.useCallback(()=>e.current,[])}function i5({text:e}){const t=o5(),[n,r]=p.useState(!0),[s,a]=p.useState(0),o=p.useMemo(()=>Array.from(e),[e]),c=p.useMemo(()=>new ITe().humanTypingDelaysQuertyDistance(o),[o]);return p.useEffect(()=>{e&&n&&(r(!0),c.forEach((l,u)=>{setTimeout(()=>{t()&&(a(u),u===c.length-1&&r(!1))},l)}))},[c,t,n,e]),i.jsx(i.Fragment,{children:o.slice(0,s+1).join("")})}class ITe{qwertyDistance(t,n){const r={q:[0,0],w:[1,0],e:[2,0],r:[3,0],t:[4,0],y:[5,0],u:[6,0],i:[7,0],o:[8,0],p:[9,0],a:[0,1],s:[1,1],d:[2,1],f:[3,1],g:[4,1],h:[5,1],j:[6,1],k:[7,1],l:[8,1],z:[0,2],x:[1,2],c:[2,2],v:[3,2],b:[4,2],n:[5,2],m:[6,2]},[s,a]=r[t.toLowerCase()]??[0,0],[o,c]=r[n.toLowerCase()]??[0,0];return Math.abs(s-o)+Math.abs(a-c)}humanTypingDelaysQuertyDistance(t,n=10,r=100){let s=0;const a=[];for(let o=0;o<t.length;++o){let c;if(o>0){const l=this.qwertyDistance(t[o-1],t[o]);l===0?c=this.getRandomInt(n,Math.floor(r/2)):l===1?c=this.getRandomInt(n,Math.floor(r*2/3)):c=this.getRandomInt(n,r)}else c=this.getRandomInt(n,r);a.push(c+s),s+=c}return a}getRandomInt(t,n){return Math.floor(Math.random()*(n-t+1))+t}}function NTe({title:e,handleDelete:t,onClose:n}){const r=L(),s=xl();return i.jsxs(Te,{isOpen:!0,onClose:()=>n(),type:"success",title:r.formatMessage(lu.deleteModalTitle),primaryButton:i.jsx(Ke.Button,{title:r.formatMessage(lu.deleteModalConfirm),color:"danger",onClick:()=>{t(),n()},"data-testid":"delete-conversation-confirm-button"}),secondaryButton:i.jsx(Ke.Button,{title:r.formatMessage(lu.deleteModalCancel),color:"secondary",onClick:()=>n()}),children:[i.jsx(S,{...lu.deleteModalBody,values:{title:i.jsx("strong",{children:e})}}),s&&i.jsx("div",{className:"mt-2 text-sm text-token-text-tertiary",children:i.jsx(S,{id:"history.deleteModalMemoryDisclaimer",defaultMessage:"To clear any memories from this chat, visit your <link>settings</link>.",values:{link:a=>i.jsx(En,{to:"#settings/Personalization",className:"underline",onClick:()=>{setTimeout(()=>{n({closeParentModal:!0})},100)},children:a})}})})]})}const lu=z({deleteModalTitle:{id:"history.deleteModalTitle",defaultMessage:"Delete chat?"},deleteModalBody:{id:"history.deleteModalBody",defaultMessage:"This will delete {title}."},deleteModalConfirm:{id:"history.deleteModalConfirm",defaultMessage:"Delete"},deleteModalCancel:{id:"history.deleteModalCancel",defaultMessage:"Cancel"}}),OTe=Xe(()=>qe(()=>import("./mjzwjf2blunmnuo0.js"),__vite__mapDeps([39,1,2,3,40,41,42,6])).then(e=>e.GizmoConversationOptionsDropdown)),RTe=new Date(2024,9,11,0);function Pk(e){q.checkGate("3922476776")||na.abortAllRequests(),E.logEvent(P.loadThread,{threadId:e})}function DTe({conversation:e,conversationTitle:t,onOpenChange:n,testId:r,inMainScreen:s=!1}){const a=L(),{isUnauthenticated:o}=bt(),{eligible:c,markAsViewed:l}=Be(je.ArchiveConversationOnboarding),u=BL(e.id),[d,f]=p.useState(!1),m=ke(),h=ze(),g=Ne(),v=yn();if(p.useEffect(()=>IE(Ib,{deleteChat:({serverThreadId:b})=>{b===e.id&&f(!0)},archiveChat:async({serverThreadId:b})=>{b===e.id&&(await K.patchConversation(e.id,{is_archived:!0}),gs(m),q.logEvent("chatgpt_conversation_archived"),E.logEvent(P.conversationArchived),c&&(g.info(a.formatMessage({defaultMessage:"You can view archived chats in Settings",id:"HistoryGizmoItem.archiveChatOnboarding"}),{duration:10,hasCloseButton:!0}),l()),u&&uc(h))}}),[h,g,m,c,e.id,a,u,l]),o)return null;const y=i.jsx(OTe,{conversation:e,onOpenChange:n,inMainScreen:s,children:i.jsx("button",{className:"flex items-center justify-center text-token-text-secondary transition hover:text-token-text-primary radix-state-open:text-token-text-secondary","data-testid":r,children:i.jsx(xf,{className:"icon-md"})})});return i.jsxs(i.Fragment,{children:[v?y:i.jsx(Ye,{label:a.formatMessage({id:"tJPHEQ",defaultMessage:"Options"}),sideOffset:4,side:"top",children:y}),d&&i.jsx(NTe,{title:t,handleDelete:()=>{K.patchConversation(e.id,{is_visible:!1}).then(()=>{gs(m),q.logEvent("chatgpt_conversation_deleted"),E.logEvent(P.conversationDeleted),Mc.publish({kind:"deleteConversation",serverThreadId:e.id})}),u&&uc(h)},onClose:()=>{f(!1)}})]})}const c5=5,LTe=3e3;function $Te({threadId:e}){const t=ke(),n=p.useRef(!1),r=p.useRef(null);return p.useEffect(()=>{async function s(){n.current=!0;const a=await X0(e);if(a.async_status===Nn.UNREAD){gs(t),D.initThreadFromServerData(e,a,!0,void 0,!0);return}if(a.async_status!==Nn.STREAMING)return;const o=a.update_time??0;wO(new Date,new Date(o*1e3))<c5?r.current=window.setTimeout(s,LTe):K.setConversationStatus(e)}return n.current||(E.logEvent(P.conversationPollingStarted),s()),()=>{r.current&&window.clearTimeout(r.current)}},[t,e]),null}function FTe({conversation:e,className:t,hideOverflowMenu:n=!1,isActive:r,elementRef:s,isPrimaryBackgroundColor:a,testId:o}){const c=L(),[l,u]=p.useState(!1),[d,f]=p.useState(!1),[m,h]=p.useState(!1),{value:g}=ot("3922476776"),{value:v}=ot("232791851"),y=z7(e.id),{value:b=null,source:x=null}=y??{},w=t0(e.id),C=Jd(w),T=wO(new Date,new Date(e.update_time??0))<c5,M=e.update_time&&Bxe(new Date(e.update_time),RTe),_=b===Nn.STREAMING&&T,k=v&&!r&&!C&&M&&b===Nn.UNREAD,I=v&&(C||_)&&!m,j=v&&!r&&(C||_),F=v&&b===Nn.STREAMING&&x===Jr.SERVER&&!C&&T,U=p.useRef(!1);p.useEffect(()=>{U.current||g&&(async()=>(U.current=!0,r&&b===Nn.UNREAD&&(x===Jr.SERVER&&await K.setConversationStatus(e.id),Xi(e.id,null)),!r&&x===Jr.CLIENT&&b===Nn.UNREAD&&(await K.setConversationStatus(e.id,b),Xi(e.id,{value:Nn.UNREAD,source:Jr.SERVER})),U.current=!1))()},[g,r,e.id,b,x,C]),p.useEffect(()=>IE(Ib,{editTitle:({serverThreadId:X})=>{(X?X===e.id:r)&&u(!0)}}),[e.id,r]);const B=c.formatMessage({id:"mpXAeu",defaultMessage:"New chat"}),{resolvedTitle:N,isTypingEffect:$}=a5(e.id,e.title,r),H=ks(),Y=$&&r&&H,{data:O}=Ss(e.conversation_template_id??void 0),R=yn(),V=i.jsx("div",{className:A("absolute bottom-0 top-0 items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",r||d?"flex":"hidden can-hover:group-hover:flex"),children:i.jsx(DTe,{conversation:e,conversationTitle:N??e.title,onOpenChange:X=>{f(X),X&&E.logEvent(P.conversationHistoryItemOpenMenu,{conversationId:e.id})},testId:`${o}-options`})});return i.jsxs("div",{className:A("no-draggable group relative rounded-lg active:opacity-90",t,R&&"text-body tracking-condensed ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary motion-safe:active:scale-[98%] motion-safe:active:transition-transform",r&&R&&"bg-token-main-surface-secondary",r&&!R&&"bg-token-sidebar-surface-secondary",!r&&!R&&"hover:bg-token-sidebar-surface-secondary",d&&!r&&"bg-token-sidebar-surface-secondary"),onMouseEnter:()=>{h(!0)},onMouseLeave:()=>{h(!1)},children:[F&&i.jsx($Te,{threadId:e.id}),i.jsx(En,{to:wo(e.id,O),onClick:X=>{X.metaKey||X.ctrlKey||r||Pk(e.id)},onDoubleClick:()=>{u(!0)},ref:s,className:"flex items-center gap-2 p-2",style:{maskImage:R?"var(--sidebar-mask)":void 0},children:i.jsxs("div",{className:A("relative grow overflow-hidden whitespace-nowrap",j&&!I&&"loading-shimmer"),dir:"auto",title:N??B,children:[Y?i.jsx(i5,{text:N||B}):N||B,!R&&i.jsx("div",{className:A("absolute bottom-0 top-0 to-transparent ltr:right-0 ltr:bg-gradient-to-l rtl:left-0 rtl:bg-gradient-to-r",a?r||!r&&d?"from-token-sidebar-surface-secondary":"from-token-main-surface-primary":!1,a?!1:r||!r&&d?"from-token-sidebar-surface-secondary":"from-token-sidebar-surface-primary",{"from-token-main-surface-primary can-hover:group-hover:from-token-sidebar-surface-secondary":a&&!r&&!d,"from-token-sidebar-surface-primary can-hover:group-hover:from-token-sidebar-surface-secondary":!a&&!r&&!d,"w-10 from-60%":r||d,"w-8 from-0% can-hover:group-hover:w-10 can-hover:group-hover:from-60%":!r&&!d})})]})}),l?i.jsx("div",{className:"absolute bottom-0 left-[7px] right-2 top-0 flex items-center bg-token-sidebar-surface-secondary",children:i.jsx(jTe,{conversation:e,onClose:()=>{u(!1)}})}):k?i.jsx(En,{to:wo(e.id,O),onClick:X=>{X.metaKey||X.ctrlKey||r||Pk(e.id)},children:i.jsx("div",{className:"absolute bottom-0 top-0 flex items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",children:i.jsx("div",{className:"h-2 w-2 rounded-full bg-blue-selection"})})}):I?i.jsx("div",{className:"absolute bottom-0 top-0 flex items-center gap-1.5 pr-2 ltr:right-0 rtl:left-0",children:i.jsx(fle,{size:16,className:"text-token-text-primary"})}):!n&&V]})}function Dd({className:e,elementRef:t,item:n,isActive:r,isFirstItem:s,isPrimaryBackgroundColor:a,testId:o,hideOverflowMenu:c=!1}){const l=yn();return i.jsx("li",{className:A(!l&&"relative",s&&!l?"z-[15]":""),"data-testid":o,children:i.jsx(FTe,{className:e,isPrimaryBackgroundColor:a,conversation:n,isActive:r,elementRef:t,testId:o,hideOverflowMenu:c})})}const uu=5;function GLe({gizmoResource:e,serverThreadId:t,conversations:n}){const r=n??[],s=r.findIndex(c=>c.id===t),a=r.slice(0,uu);s!=null&&s>=uu&&(a[uu-1]=r[s]);const o=r.length>uu;return i.jsxs("div",{className:"flex flex-col screen-arch:gap-0.5",children:[a.map(c=>i.jsx(Dd,{className:"ml-7 pl-1",item:c,isActive:c.id===t},c.id)),o&&i.jsx(En,{to:aa(e),className:"group ml-7 flex h-9 items-center gap-2.5 rounded-lg pl-3 pr-2 text-sm tracking-condensed text-token-text-secondary hover:bg-token-sidebar-surface-secondary",children:i.jsx("span",{className:"text-left",children:i.jsx(S,{...Oe.seeAllChats})})})]})}const BTe="5.7.5",UTe=100,VTe=0,GTe=31,WTe=24,HTe=24,zTe="Comp 1",qTe=0,YTe={},KTe=[],XTe=[{ddd:0,ind:1,ty:4,nm:"front",sr:1,ks:{p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}},ao:0,shapes:[{ty:"gr",nm:"front",it:[{ty:"sh",d:1,ks:{a:1,k:[{t:0,s:[{c:!0,v:[[0,0],[0,4.199999999999999],[.3269799999999998,7.361999999999998],[1.6380299999999997,8.672999999999998],[4.8,9],[13.2,9],[16.362,8.672999999999998],[17.673,7.361999999999998],[17.96314052669561,3.803906508692541],[18,0],[0,0]],i:[[0,0],[0,-1.4000000000000004],[-.3269799999999998,-.6417999999999999],[-.5644899999999993,-.28759999999999764],[-1.6801599999999999,0],[-2.8000000000000007,0],[-.6417999999999999,.32700000000000173],[-.28759999999999764,.5645000000000024],[-.039444766095773076,1.6443504632396495],[0,.6762830352783202],[0,0]],o:[[0,0],[0,1.6801999999999992],[.28762,.5645000000000024],[.6417299999999999,.32700000000000173],[2.8,0],[1.6801999999999992,0],[.5645000000000024,-.28759999999999764],[.16903960533142026,-.33177253425598163],[.03685947330438921,-1.5365762812658144],[0,0],[0,0]]}],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}},{t:15,s:[{c:!0,v:[[2.4340944290161133,.5],[.3269801139831543,4.008849620819092],[.3269799999999998,7.361999999999998],[1.6380299999999997,8.672999999999998],[4.8,9],[13.2,9],[16.04152341715495,8.67300015985398],[17.35252380952381,7.361999767485118],[18.247861862182617,4.191076755523682],[19.765050888061523,.5],[2.4340944290161133,.5]],i:[[0,0],[.461506187915802,-1.6286938190460205],[-.3269799999999998,-.6417999999999999],[-.5644899999999993,-.28759999999999764],[-1.6801599999999999,0],[-2.8000000000000007,0],[-.6417999999999999,.32700000000000173],[-.28759999999999764,.5645000000000024],[-.5041376364785286,1.4910390744944069],[-.2967397156521443,.7737720411575562],[0,0]],o:[[0,0],[-.4615061283111572,1.6286945343017578],[.28762,.5645000000000024],[.6417299999999999,.32700000000000173],[2.8,0],[1.6801999999999992,0],[.5645000000000024,-.28759999999999764],[.16903960533142026,-.33177253425598163],[.47109539725499516,-1.3933132428441017],[0,0],[0,0]]}],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}},{t:30,s:[{c:!1,v:[[3.3380892276763916,.07182820521647872],[.3269801139831543,3.9547162758951315],[.3269799999999998,6.602755471867078],[1.6380299999999997,7.7785517804269455],[4.8,8.071828205216478],[13.2,8.071828205216478],[15.721046834309895,7.778552067163362],[17.03204761904762,6.60275505479593],[17.94993019104004,3.954716682434082],[20,.07182820521647872],[3.3380889892578125,.07182820521647872]],i:[[0,0],[.37392210960388184,-1.5179650699450007],[-.3269799999999998,-.5756110380119929],[-.5644899999999993,-.25793975464669333],[-1.6801599999999999,0],[-2.8000000000000007,0],[-.6417999999999999,.29327642478953364],[-.28759999999999764,.5062830024271914],[-.5737985708020616,1.4127715496925766],[-.5934794313042886,.7814077215086688],[0,0]],o:[[0,0],[-.3739221692085266,1.5179659252666946],[.28762,.5062830024271914],[.6417299999999999,.29327642478953364],[2.8,0],[1.6801999999999992,0],[.5645000000000024,-.25793975464669333],[.16903960533142026,-.297556766635954],[.5361906076771525,-1.3201755359546987],[0,0],[0,0]]}],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}}],ix:2}},{ty:"st",c:{a:0,k:[0,0,0],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},lc:2,lj:2,ml:4,d:[{n:"o",nm:"offset",v:{a:0,k:0,ix:2}}]},{ty:"tr",p:{a:1,k:[{t:15,s:[12,15.5],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}},{t:30,s:[12,15.96408462524414],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}}],ix:2},a:{a:1,k:[{t:15,s:[9,4.5],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}},{t:30,s:[9,4.035914102608239],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}}],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:32,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"folder",sr:1,ks:{p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}},ao:0,shapes:[{ty:"gr",nm:"folder",it:[{ty:"sh",d:1,ks:{a:0,k:{c:!1,v:[[18,6.75],[17.7716,3.8519500000000004],[16.1481,2.2283600000000003],[13.5,2],[10.4142,2],[10.0801,1.99559],[8.2394,1.2331700000000003],[8,1],[8,1],[7.7606,.7668299999999997],[5.91994,.004410000000000025],[5.58579,0],[4.8,0],[1.63803,.3269799999999998],[.3269799999999998,1.6380299999999997],[0,4.800000000000001],[0,11.2],[.3269799999999998,14.361999999999998],[1.63803,15.672999999999998],[4.8,16],[9,16]],i:[[0,0],[.2284000000000006,.5513099999999991],[.7349999999999994,.30447999999999986],[1.3978000000000002,0],[1.0286000000000008,0],[.08120000000000083,.004410000000000025],[.5088000000000008,.4563999999999995],[.1191999999999993,.11922999999999995],[0,0],[.06056000000000061,.05433000000000021],[.6824899999999996,.037040000000000184],[.16861000000000015,0],[.26193000000000044,0],[.6417299999999995,-.3269799999999998],[.28762,-.5644899999999993],[0,-1.6801600000000008],[0,-2.133333333333333],[-.3269799999999998,-.6417999999999999],[-.5644900000000002,-.28759999999999764],[-1.6801599999999999,0],[-1.4000000000000004,0]],o:[[0,-1.3978199999999994],[-.3044000000000011,-.7350800000000008],[-.551400000000001,-.22836000000000034],[-1.0286000000000008,0],[-.16859999999999964,0],[-.6824999999999992,-.037040000000000184],[-.0605999999999991,-.05433000000000021],[0,0],[-.11922999999999995,-.11922999999999995],[-.5087899999999994,-.4563999999999995],[-.08123000000000058,-.004410000000000025],[-.26193000000000044,0],[-1.6801599999999999,0],[-.5644900000000002,.28762000000000043],[-.3269799999999998,.6417299999999999],[0,2.133333333333333],[0,1.6801999999999992],[.28762,.5645000000000024],[.6417299999999995,.32700000000000173],[1.3999999999999995,0],[0,0]]}}},{ty:"st",c:{a:0,k:[0,0,0],ix:2},o:{a:0,k:100,ix:2},w:{a:0,k:2,ix:2},lc:2,lj:1,ml:4,d:[{n:"o",nm:"offset",v:{a:0,k:0,ix:2}}]},{ty:"tr",p:{a:1,k:[{t:0,s:[12,12],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}},{t:15,s:[12,12],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}},{t:30,s:[11,12],i:{x:[.75],y:[.75]},o:{x:[.25],y:[.25]}}],ix:2},a:{a:0,k:[9,8],ix:2},s:{a:0,k:[100,100],ix:2},r:{a:0,k:0,ix:2},o:{a:0,k:100,ix:2},sk:{a:0,k:0,ix:2},sa:{a:0,k:0,ix:2}}]}],ip:0,op:32,st:0,bm:0}],QTe=[],WLe={v:BTe,fr:UTe,ip:VTe,op:GTe,w:WTe,h:HTe,nm:zTe,ddd:qTe,metadata:YTe,assets:KTe,layers:XTe,markers:QTe};var HLe={exports:{}};function zLe({gizmo:e,isOpen:t,setIsOpen:n}){const[r,s]=p.useState(!1),a=ze();return i.jsxs(i.Fragment,{children:[i.jsx(ga,{open:t,onOpenChange:n,triggerButton:i.jsx("button",{className:A("flex text-token-text-secondary hover:text-token-text-primary",t?"":"invisible group-hover:visible"),children:i.jsx(xf,{className:"icon-md"})}),contentAlign:"start",sideOffset:4,alignOffset:-4,size:"auto",children:i.jsx(ne.Item,{color:"danger",onClick:()=>{s(!0)},icon:jc,children:i.jsx(S,{...Oe.deleteProjectDropdownButton})})}),r&&i.jsx(PO,{gizmoId:e.gizmo.id,onSuccess:()=>{a("/")},onClose:()=>{s(!1)}})]})}const l5=Ie()(()=>({})),qLe=e=>{const{data:t}=Ss(e),n=l5(s=>ZTe(s,"theme",e));if(!e)return null;const r=t?.gizmo.display.theme;return n!==void 0?n:r??null},ZTe=(e,t,n)=>{if(n===oo||!n)return;const r=`${n}-${t}`;return e[r]},JTe=(e,t,n)=>{if(e===oo)return;l5.setState(s=>{const a=`${e}-${t}`,o={...s};return n===void 0?delete o[a]:o[a]=n,o},!0)},YLe=(e,t)=>{JTe(e,t,void 0)};function Om(e){const[t,n]=p.useState(!1),{announcementKey:r,onDismiss:s,...a}=e,{children:o,show:c}=a,{layer:l,isLoading:u}=_n("717266490"),d=l.get("one_announcement_tooltip_per_session",!1),f=ve(g=>!!g.displayAnnouncementTooltip),m=ve(g=>!d||g.displayAnnouncementTooltip===r);if(p.useEffect(()=>{d&&c&&t&&$e.showAnnouncementTooltipExclusively(r)},[t,d,r,c]),p.useEffect(()=>{c&&!u&&(!d||m)&&(q.logEvent("announcement_tooltip_shown",null,{announcement_key:r}),E.logEvent(P.announcementTooltipShown,{announcement_key:r}))},[c,m,r,d,u]),f&&!m)return o;const h=()=>{(!d||m)&&(s(),u||(q.logEvent("announcement_tooltip_dismissed",null,{announcement_key:r}),E.logEvent(P.announcementTooltipDismissed,{announcement_key:r})))};return i.jsx(eke,{...a,onDismiss:h,renderAsInvisible:d&&!f,onTooltipChildrenBecomeVisible:()=>{d&&n(!0)}})}function eke({align:e,arrowPadding:t,alignOffset:n,show:r,onDismiss:s,children:a,title:o,side:c,sideOffset:l,theme:u="default",badge:d="new",contentAlign:f="start",description:m,className:h,onTooltipChildrenBecomeVisible:g,renderAsInvisible:v=!1,dismissOnOutsideClick:y=!1}){const b=p.useRef(null),x=w=>{r&&w&&w.getBoundingClientRect().width>0&&w.getBoundingClientRect().height>0&&g?.(),b.current=w};return i.jsxs(Ax,{open:r,onOpenChange:w=>{w||s()},children:[i.jsx(pd,{asChild:!0,onClick:()=>{s()},ref:x,children:a}),i.jsx(eN,{container:b.current?.ownerDocument.body,children:i.jsxs(Px,{arrowPadding:t,alignOffset:n,align:e,side:c,sideOffset:l,onOpenAutoFocus:w=>{w.preventDefault()},onCloseAutoFocus:w=>{w.preventDefault()},onInteractOutside:w=>{w.target instanceof Element&&b.current?.contains(w.target)?w.preventDefault():y?s():w.preventDefault()},updatePositionStrategy:"always",className:A("relative z-30 animate-slideLeftAndFade select-none rounded-xl p-4 text-sm shadow-sm",u==="default"?"bg-gray-900 text-white dark:bg-gray-50 dark:text-gray-700":"bg-blue-400 text-white",v&&"invisible"),children:[i.jsxs("div",{className:A("flex max-w-xs flex-col gap-1",h),children:[i.jsxs("div",{className:"mb-0.5 flex gap-2",children:[d==="new"?i.jsx("span",{className:A("rounded px-1.5 py-0.5 text-[10px] font-semibold uppercase leading-normal",u==="default"?"bg-token-main-surface-primary text-token-main-surface-primary-inverse":"bg-white text-blue-selection"),children:i.jsx(S,{...jk.new})}):d==="beta"&&i.jsx("span",{className:"rounded-full bg-blue-100 px-1.5 text-[10px] font-semibold text-blue-600",children:i.jsx(S,{...jk.beta})}),i.jsx("div",{className:A("grow font-semibold",f&&`text-${f}`),children:o}),i.jsx(ule,{className:"-my-1 -mr-1 p-1 opacity-70 transition hover:opacity-100",children:i.jsx(Po,{className:"icon-sm"})})]}),m!==void 0&&i.jsx("div",{className:A(f&&`text-${f}`),children:m})]}),i.jsx(dle,{asChild:!0,children:i.jsx("div",{className:A("relative top-[-6px] h-3 w-3 rotate-45 transform rounded-br-sm",u==="default"?"bg-gray-900 dark:bg-gray-50":"bg-blue-400")})})]})})]})}const jk=z({new:{id:"announcementTooltip.new",defaultMessage:"New"},beta:{id:"announcementTooltip.beta",defaultMessage:"Beta"}}),tke=fe.button`flex w-full items-center gap-2.5 rounded-lg px-2 text-token-text-primary ${({$isScreenArch:e})=>e?"hover:bg-token-main-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`,nke=p.forwardRef(function({icon:t,children:n,...r},s){const a=yn();return i.jsxs(tke,{ref:s,...r,$isScreenArch:a,className:A(a?"py-[7px]":"h-10"),children:[i.jsx("div",{className:"flex h-6 w-6 items-center justify-center text-token-text-secondary",children:i.jsx(t,{className:"icon-md"})}),i.jsx("span",{className:a?"text-body":"text-sm",children:n})]})});var kt=(e=>(e.Floating="floating",e.Pinned="pinned",e))(kt||{});function rke(){return{isSidebarOpen:!1,mode:kt.Pinned}}class u5{store;constructor(t){this.store=t}setSidebarMode=async t=>{switch(t){case kt.Floating:this.store.setState({mode:kt.Floating});break;case kt.Pinned:this.store.setState({mode:kt.Pinned});break}q.logEvent("chatgpt_web_sidebar_mode_changed",t)};openSidebar=async()=>{const t=Ik();if(t){if(this.store.getState().isSidebarOpen&&t.checked)return;t.checked=!0}this.store.setState({isSidebarOpen:!0}),ve.setState({isDesktopNavCollapsed:!1}),await Xh.yield(),q.logEvent("chatgpt_web_sidebar_opened"),E.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!1})};closeSidebar=async()=>{const t=Ik();if(t){if(!this.store.getState().isSidebarOpen&&!t.checked)return;t.checked=!1}this.store.setState({isSidebarOpen:!1}),ve.setState({isDesktopNavCollapsed:!0}),await Xh.yield(),q.logEvent("chatgpt_web_sidebar_closed"),E.logToggleDesktopNavCollapsed({isDesktopNavCollapsed:!0})}}function Ik(){return document.querySelector(`input[name='${Mn.OpenOrClosed}']`)}const Nk=Ie(()=>rke()),d5=p.createContext({store:Nk,actions:new u5(Nk)});function ske(e){let{isSidebarOpen:t,mode:n}=e;return t&&n===kt.Pinned?"open-pinned":!t&&n===kt.Pinned?"closed-pinned":"closed"}function Rm(){return p.use(d5)}function KLe({children:e}){p.use(uE);const[t]=p.useState(()=>{let n;n={isSidebarOpen:document.querySelector(`input[name='${Mn.OpenOrClosed}']`)?.checked??!1,mode:document.querySelector(`input[name='${Mn.FloatingOrPinned}']`)?.checked?kt.Pinned:kt.Floating};const r=Ie(()=>n);return{store:r,actions:new u5(r)}});return p.useEffect(()=>t.store.subscribe((n,r)=>{const s=n.mode!==r.mode,a=n.isSidebarOpen!==r.isSidebarOpen;if(!(s||a))return;const o=ske(n);on.setCookie(Zt.SidebarState,o,{maxAge:2**30})}),[t.store]),i.jsx(d5,{value:t,children:e})}const XLe=fe.textarea`w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32`,QLe=fe.div`mb-6`,ake=fe.input`w-full resize-none overflow-y-auto rounded-lg px-3 py-2 text-sm outline-none focus:ring-2 border focus:ring-blue-400 border-token-border-medium h-9 bg-token-main-surface-primary`;function oke({label:e,description:t,collapsed:n,onClick:r,htmlFor:s}){const a=i.jsx("label",{htmlFor:s,className:"block font-semibold text-token-text-primary",children:e});return i.jsxs("div",{className:"mb-1.5 flex items-center",onClick:r,children:[n!==void 0&&(n?i.jsx(K$,{className:"icon-sm"}):i.jsx(w0,{className:"icon-sm"})),t?i.jsx(Ye,{label:t,sideOffset:4,side:"top",delayDuration:0,children:a}):i.jsx(i.Fragment,{children:a})]})}function ZLe({actionTool:e,onShowActionsEditor:t,isDisabled:n}){const r="metadata"in e?e.metadata?.domain:void 0;return i.jsxs("div",{className:A("flex rounded-lg border border-token-border-medium text-sm hover:cursor-pointer",n?"bg-token-main-surface-secondary":""),onClick:t,children:[i.jsx("div",{className:"h-9 grow px-3 py-2",children:r??i.jsx("span",{className:"text-red-500",children:i.jsx(S,{id:"TJYXrY",defaultMessage:"Invalid action"})})}),i.jsx("div",{className:"w-px bg-token-border-medium"}),i.jsx("button",{disabled:n,className:"flex h-9 w-9 items-center justify-center rounded-lg rounded-l-none",children:i.jsx(X$,{className:"icon-sm"})})]})}function f5({isOpen:e,modalTitle:t,submitButtonTitle:n,onClose:r,onSuccess:s,gizmo:a}){const o=Ce(),c=L(),l=Ne(),u=ibe(),[d,f]=p.useState(a?.gizmo.display.name??""),m=async()=>{try{const{id:v,resource:y}=await u.mutateAsync({update:{name:d},id:a?.gizmo.id??oo});s&&s(v??y?.gizmo.id),r()}catch(v){const y=UL(v);l.warning(y??"Error",{duration:2})}};if(!o?.canCreateGizmos())return null;const h=i.jsx(Ke.Button,{title:n??c.formatMessage(Oe.createProjectSubmit),as:"button",type:"submit",color:"primary",loading:u.isPending}),g=i.jsx(Ke.Button,{title:c.formatMessage(Oe.createProjectCancel),color:"secondary",onClick:r,disabled:u.isPending});return i.jsx(Te,{isOpen:e,showCloseButton:!u.isPending,size:"normal",type:"success",title:t??c.formatMessage(Oe.setProjectName),onClose:()=>{u.isPending||r()},children:i.jsxs("form",{onSubmit:v=>{v.preventDefault(),m()},children:[i.jsxs("div",{className:"mb-6",children:[i.jsx(oke,{label:i.jsx(S,{...Oe.projectNameLabel}),description:i.jsx(S,{...Oe.projectNameDescription})}),i.jsx(ake,{type:"text",name:"name",placeholder:c.formatMessage(Oe.projectNamePlaceholder),value:d,onChange:v=>f(v.target.value)}),i.jsxs("div",{className:"mt-6 flex items-start rounded-xl bg-token-main-surface-secondary p-4",children:[i.jsx("div",{className:"mr-2 h-6 w-6",children:i.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-secondary",children:i.jsx(ZE,{className:"icon-md"})})}),i.jsxs("div",{children:[i.jsx("strong",{className:"text-sm font-semibold text-token-text-secondary",children:i.jsx(S,{...Oe.projectHelperBoxTitle})}),i.jsx("p",{className:"text-sm text-token-text-secondary",children:i.jsx(S,{...Oe.projectHelperBoxDescription})})]})]})]}),i.jsx(Ke.Actions,{primaryButton:h,secondaryButton:g})]})})}const ike=fe.button`mr-2.5 flex rounded-lg items-center text-token-text-primary hover:bg-token-sidebar-surface-secondary can-hover:opacity-0 can-hover:pointer-events-none can-hover:group-hover/sidebar:opacity-100 can-hover:group-hover/sidebar:pointer-events-auto transition-opacity duration-300`;function JLe(){const e=Ce(),t=ze(),[n,r]=p.useState(!1),{shouldShowTooltipNux:s,tooltipAnnouncement:a}=cke();return e?.canCreateGizmos()?i.jsxs(i.Fragment,{children:[i.jsx(lke,{showNuxTooltip:s,tooltipAnnouncement:a,children:i.jsx(nke,{icon:yf,onClick:()=>{r(!0),s&&a.markAsViewed()},children:i.jsx(S,{...Oe.newProjectButton})})}),i.jsx(f5,{isOpen:n,onClose:()=>r(!1),onSuccess:o=>{o&&t(`/g/${o}/project`)}})]}):null}function e$e(){const e=Ce(),t=ze(),[n,r]=p.useState(!1),s=L();return e?.canCreateGizmos()?i.jsxs(i.Fragment,{children:[i.jsx(Ye,{sideOffset:4,label:s.formatMessage(Oe.newProjectButtonTooltip),side:"right",children:i.jsx(ike,{onClick:()=>r(!0),"aria-label":s.formatMessage(Oe.newProjectHeaderButton),children:i.jsx("div",{className:"flex h-[26px] w-[26px] items-center justify-center text-token-text-secondary",children:i.jsx(Q$,{className:"icon-md"})})})}),i.jsx(f5,{isOpen:n,onClose:()=>r(!1),onSuccess:a=>{a&&t(`/g/${a}/project`)}})]}):null}function cke(){const e=Be(je.hasSeenProjectsWebNuxTooltip);return{shouldShowTooltipNux:!e.isLoading&&e.eligible,tooltipAnnouncement:e}}function lke({showNuxTooltip:e,tooltipAnnouncement:t,children:n}){const r=L(),s=yn(),{store:a}=Rm(),o=a(l=>l.isSidebarOpen),c=hm();return!e||s&&!o||!s&&c?i.jsx(Ye,{sideOffset:4,label:r.formatMessage(Oe.newProjectButtonTooltip),side:"right",children:n}):i.jsx(Om,{announcementKey:je.hasSeenProjectsWebNuxTooltip,theme:"bright",side:"right",show:!0,badge:"new",dismissOnOutsideClick:!0,title:r.formatMessage(Oe.projectsNuxTooltipTitle),description:r.formatMessage(Oe.projectsNuxTooltipDescription),contentAlign:"center",onDismiss:t.markAsViewed,sideOffset:-5,children:n})}const t$e=5;function n$e({showRetry:e,refetch:t}){return i.jsxs("div",{className:"mt-5 p-3 text-center italic text-token-text-tertiary",children:[i.jsx(S,{...Oe.unableToLoadHistory}),e&&i.jsx("div",{className:"mt-1",children:i.jsx(ee,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{t(!0)},children:i.jsx(S,{...Oe.retryLoadingHistory})})})]})}const uke=p.createContext({isSidebarFlyoutOpen:()=>!1,onSidebarFlyoutOpenChange:()=>{}});function m5(){return p.use(uke)}var lo=(e=>(e.Conversation="conversation",e.Gizmo="gizmo",e.Snorlax="snorlax",e))(lo||{});function dke({gizmo:e,icon:t,onClick:n,elementRef:r}){const s=e.gizmo.display.name;return i.jsx(En,{to:e!=null?aa(e):"/",className:"group relative mx-2 flex flex-col gap-1 rounded-md p-3 hover:bg-[#f5f5f5] dark:hover:bg-token-main-surface-secondary",onClick:a=>n?.(a),ref:r,children:i.jsxs("div",{className:"flex items-center gap-2",children:[t,i.jsx("div",{className:"grow overflow-hidden text-ellipsis whitespace-nowrap text-sm text-token-text-primary",children:s})]})})}const fke=5;function mke(e){const t=L(),n=ke(),[r,s]=p.useState(!1),{snorlaxes:a,hasNextPage:o,fetchNextPage:c,isLoading:l,isFetchingNextPage:u,isError:d}=cbe(),f=p.useRef(null),m=p.useCallback(g=>{l||g==null||(f.current?.disconnect(),f.current=new IntersectionObserver(v=>{v[0].isIntersecting&&o&&c()}),f.current.observe(g))},[l,o,c]);p.useEffect(()=>()=>{f.current?.disconnect()},[]);const h=a.length===0;return i.jsxs(pke,{$centered:l||d||h,children:[h&&l&&i.jsx(xs,{children:i.jsx(cn,{className:"m-auto"})}),h&&d&&i.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[t.formatMessage(Oe.unableToLoadHistory),!r&&i.jsx("div",{className:"mt-1",children:i.jsx(ee,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{s(!0),ib(n)},children:t.formatMessage(Oe.retryLoadingHistory)})})]}),!l&&!h&&i.jsx("ul",{className:"flex flex-col screen-arch:gap-0.5",children:a.map(({gizmo:g})=>{const v=g.gizmo.id===e.currentGizmoId,y=o&&a[a.length-fke-1]?.gizmo.gizmo.id===g.gizmo.id?m:void 0;return v?null:e.customListItem?i.jsx(e.customListItem,{gizmo:g,isActive:v,hideOverflowMenu:!0,elementRef:y},g.gizmo.id):!e.inSidebar&&i.jsx(dke,{gizmo:g,onClick:()=>{e.onUpdateConversationGizmo(g.gizmo.id)},icon:i.jsx(Z$,{className:"icon-md",style:{color:g.gizmo.display.theme}}),elementRef:y},g.gizmo.id)})}),u&&i.jsx("div",{className:"m-4 mb-5 flex justify-center",children:i.jsx(cn,{})})]})}const r$e=J.memo(mke),pke=fe.div`flex flex-col gap-2 text-token-text-primary text-sm
  ${({$centered:e})=>[e&&"h-full justify-center items-center empty:hidden"]}`,hke=fe.h3`px-2 text-xs font-semibold text-ellipsis overflow-hidden break-all ${({$screenArch:e})=>[e?"text-token-sidebar-title-primary pb-1.5 pt-2":"pt-3 pb-2 text-token-text-primary"]}`,du=z({historyBucketToday:{id:"history.bucket.today",defaultMessage:"Today"},historyBucketYesterday:{id:"history.bucket.yesterday",defaultMessage:"Yesterday"},historyBucketLastSeven:{id:"history.bucket.lastSeven",defaultMessage:"Previous 7 Days"},historyBucketLastThirty:{id:"history.bucket.lastThirty",defaultMessage:"Previous 30 Days"}}),gke=5;function vke(e,t){const n=L();return p.useMemo(()=>e.reduce((r,s)=>{const a=new Date(s.update_time??s.create_time??0),o=sb(new Date,a);if(o===0)r.recent.today.items.push(s);else if(o<=1)r.recent.yesterday.items.push(s);else if(o<=7)r.recent.lastSeven.items.push(s);else if(o<=30)r.recent.lastThirty.items.push(s);else if(MO(a)){const c=Ad(a),l=kO(a),u=`${c}-${l}`;r.dynamicMonths[u]?r.dynamicMonths[u].items.push(s):r.dynamicMonths[u]={label:n.formatDate(a,{month:"long"}),items:[s]}}else{const l=`${Ad(a)}-`;r.dynamicYears[l]?r.dynamicYears[l].items.push(s):r.dynamicYears[l]={label:n.formatDate(a,{year:"numeric"}),items:[s]}}return r},{recent:{today:{label:i.jsx(S,{...du.historyBucketToday}),items:[]},yesterday:{label:i.jsx(S,{...du.historyBucketYesterday}),items:[]},lastSeven:{label:i.jsx(S,{...du.historyBucketLastSeven}),items:[]},lastThirty:{label:i.jsx(S,{...du.historyBucketLastThirty}),items:[]}},dynamicMonths:{},dynamicYears:{}}),[t,e])}function yke({activeId:e,bucketedItems:t,items:n,hasNextPage:r,isPrimaryBackgroundColor:s,infiniteScrollTriggerElementRef:a,hideOverflowMenu:o}){const c=yn();return i.jsx(i.Fragment,{children:[t.recent,t.dynamicMonths,t.dynamicYears].flatMap((l,u)=>i.jsx(p.Fragment,{children:Object.entries(l).map(([d,{items:f,label:m}],h)=>{if(d!=="today"&&!f.length)return null;const g=!!f.find(v=>n.length>0&&v.id===n[0]?.id);return f.length>0&&i.jsxs("div",{className:A(s&&"first:mt-0",c&&"first:mt-1",!c&&"relative mt-5 first:mt-0 last:mb-5"),children:[i.jsx("div",{className:A("sticky",!c&&"bg-token-sidebar-surface-primary",c?"top-[--sidebar-sticky-threshold] z-20":"top-0 z-20"),children:i.jsx("span",{className:"flex h-9 items-center",children:i.jsx(hke,{$screenArch:c,children:m})})}),i.jsx("ol",{className:c?"flex flex-col gap-0.5":void 0,children:f.map((v,y)=>{const b=e===v.id,x=g&&y===0,w=r&&n[n.length-gke-1]?.id===v.id?a:void 0;return b&&c?null:i.jsx(Dd,{item:v,hideOverflowMenu:o,isActive:b,isFirstItem:x,isPrimaryBackgroundColor:s,elementRef:w,testId:`history-item-${y}`},`history-item-${v.id}-${d}`)})})]},`${d}-${u}-${h}`)})},`category-${u}`))})}const Ok=z({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function xke({activeId:e,isPrimaryBackgroundColor:t,hideOverflowMenu:n}){const r=ke(),[s,a]=p.useState(!1),[o,c]=p.useState(0),l=VL(),u=yn(),d={};Mm()&&(d.hideSnorlaxConversations=!0);const{conversations:m,hasNextPage:h,fetchNextPage:g,isLoading:v,isFetchingNextPage:y,isError:b}=ob(d),x=p.useRef(null),w=p.useCallback(_=>{v||_==null||(x.current?.disconnect(),x.current=new IntersectionObserver(k=>{k[0].isIntersecting&&h&&g()}),x.current.observe(_))},[v,h,g]);p.useEffect(()=>()=>{x.current?.disconnect()},[]),p.useMemo(()=>{Mc.publish({kind:"refreshHistory",conversations:m})},[m]);const C=m;p.useEffect(()=>{const _=bO(Lye(),Date.now());l(()=>{c(o+1)},_+1e3)},[o,l]);const T=C.length===0;p.useEffect(()=>{T||yR({namespace:bb.ChatPageLoad})?.logTiming("render_history_items")},[T]);const M=vke(C,o);return i.jsxs(wke,{$centered:v||b||T,$screenArch:u,children:[T&&v&&i.jsx(xs,{children:i.jsx(cn,{className:"m-auto"})}),T&&b&&i.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[i.jsx(S,{...Ok.unableToLoadHistory}),!s&&i.jsx("div",{className:"mt-1",children:i.jsx(ee,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{a(!0),gs(r)},children:i.jsx(S,{...Ok.retryButton})})})]}),!v&&!T&&i.jsx("div",{children:i.jsx(yke,{activeId:e,bucketedItems:M,hasNextPage:h,items:C,isPrimaryBackgroundColor:t,infiniteScrollTriggerElementRef:w,hideOverflowMenu:n})}),y&&i.jsx("div",{className:"m-4 mb-5 flex justify-center",children:i.jsx(cn,{})})]})}const bke=J.memo(xke),wke=fe.div`flex flex-col gap-2 text-token-text-primary text-sm
${({$centered:e,$screenArch:t})=>[e&&"h-full justify-center items-center empty:hidden",!t&&"mt-5 pb-2"]}`;function Eh({label:e,tooltip:t,Icon:n}){return i.jsxs("div",{className:"flex items-center gap-1 text-sm font-semibold opacity-70",children:[n&&i.jsx(n,{className:"icon-sm"}),i.jsx("div",{children:e}),i.jsx(Ye,{label:t,children:i.jsx(Pc,{className:"icon-sm ml-1"})})]})}function s$e({clientThreadId:e,gizmoId:t}){const n=L(),r=xl(),s=Sb(),a=$Se(),{data:o}=pwe(t,!1,a),c=!!t,l=Vn(),u=_c(e);return a?l&&(!u||c)?i.jsx(Eh,{label:n.formatMessage(Ba.temporaryChat),tooltip:n.formatMessage(Ba.temporaryChatTooltip),Icon:S0}):r&&!s&&!l?i.jsx(Eh,{label:n.formatMessage(Ba.memoryOff),tooltip:n.formatMessage(Ba.memoryOffTooltip)}):o&&o?.memoryFullPct>=100?i.jsx(Eh,{label:n.formatMessage(Ba.memoryFull),tooltip:n.formatMessage(Ba.memoryFullTooltip)}):null:null}const Ba=z({temporaryChat:{id:"ConversationPrivacyIndicator.temporaryChat",defaultMessage:"Temporary Chat"},temporaryChatTooltip:{id:"ConversationPrivacyIndicator.temporaryChatTooltip",defaultMessage:"Temporary Chats won't appear in your history, and ChatGPT won't remember anything you talk about."},memoryOff:{id:"ConversationPrivacyIndicator.memoryOff",defaultMessage:"Memory Off"},memoryOffTooltip:{id:"ConversationPrivacyIndicator.memoryOffTooltip",defaultMessage:"ChatGPT won't remember anything you talk about in this conversation."},memoryFull:{id:"2Eq+5y",defaultMessage:"Memory Full"},memoryFullTooltip:{id:"dNA8jQ",defaultMessage:"ChatGPT's memory is full. You can forget existing memories to make space."}}),Ske=Xe(()=>qe(()=>import("./dn4wahbewcmhdzq3.js"),__vite__mapDeps([43,1,2,3,44,45,46,47,32,18])).then(e=>e.DebugConversationSidebar));function a$e({clientThreadId:e}){Cke();const t=mr(),n=t?.includes("debug"),r=ef(),s=ve(o=>o.activeSidebar),a=t?.includes("debug")&&s==="debug";return!n||!a?null:i.jsx(Ske,{clientThreadId:e,slideOver:!HG(r),onClose:()=>$e.toggleActiveSidebar("debug"),isOpen:!0})}function Cke(){const t=mr()?.includes("debug");p.useEffect(()=>{if(!t)return;const n=new AbortController;return document.addEventListener("keydown",r=>{r.target instanceof HTMLElement&&["input","textarea","select","button"].includes(r.target.tagName.toLowerCase())||r.key==="\\"&&$e.toggleActiveSidebar("debug")},{signal:n.signal}),()=>{n.abort()}},[t])}const Tke=Xe(()=>qe(()=>import("./hafo7oibbffc06w9.js"),__vite__mapDeps([48,49,1,2,3])).then(e=>e.FannyPackInitializer));function o$e(){const{isFannyPackEnabled:e,isFannyPackInitializerEnabled:t}=Ab();return e||!t?null:i.jsx(Tke,{})}const kke={showFreeTrialLoadingPayment:!1,showConfirmDismissFreeTrial:!1,didCloseFreeTrial:!1},Ob=Ie()(()=>({...kke}));function i$e(e){Ob.setState({showFreeTrialLoadingPayment:e})}function c$e(e){Ob.setState({showConfirmDismissFreeTrial:e})}function l$e(e){Ob.setState({didCloseFreeTrial:e})}const Mke=()=>me({queryKey:["userSurvey"],queryFn:async()=>K.getActiveUserSurvey()}),Eke=()=>{const e=ke();return it({mutationFn:async({surveyId:t,reason:n})=>K.completeUserSurvey(t,n),onSuccess:async()=>{e.invalidateQueries({queryKey:["userSurvey"]})}})};function u$e(){const e=L(),[t,n]=p.useState(!1),r=Mke().data?.survey,s=Eke(),a=l=>{n(!0),r!=null&&s.mutate({surveyId:r.id,reason:l})},o=!t&&r!=null,c=yn();return o?i.jsx("div",{className:A("mb-1 bg-brand-blue-800",c?"mx-3 rounded-md":"mx-1 rounded-sm"),children:i.jsxs("div",{className:"flex flex-col items-center justify-stretch gap-3 p-3 text-sm text-white",children:[i.jsxs("div",{className:"flex w-full items-start",children:[i.jsxs("div",{className:"flex flex-grow flex-col gap-1",children:[i.jsx("div",{className:"font-bold",children:i.jsx(S,{id:"navigation.survey.title",defaultMessage:"We are asking a small group of people for their opinion"})}),i.jsx("div",{children:i.jsx(S,{id:"navigation.survey.description",defaultMessage:"Could you spare few minutes to take a short survey?"})})]}),i.jsx("button",{className:"text-white/25 hover:text-white/40",onClick:()=>a("dismissed"),"aria-label":e.formatMessage({id:"navigation.survey.dismiss",defaultMessage:"Dismiss survey"}),children:i.jsx(Po,{className:"icon-sm-adaptive"})})]}),i.jsxs("a",{href:r.link,target:"_blank",className:"flex w-full flex-row items-center justify-center gap-2 rounded bg-white/25 p-2 hover:bg-white/40",rel:"noreferrer",onClick:()=>a("link_clicked"),children:[i.jsx(Xs,{className:"icon-sm"}),i.jsx(S,{id:"navigation.survey.takeSurvey",defaultMessage:"Take survey"})]})]})}):null}function _ke(){return i.jsxs(i.Fragment,{children:[i.jsx(ne.Item,{icon:Xs,children:i.jsx("a",{href:fge(),target:"_blank",onClick:()=>{E.logEvent(P.clickFaqLink)},className:"w-full",rel:"noreferrer",children:i.jsx(S,{id:"thread.helpAndFaq",defaultMessage:"Help & FAQ"})})}),i.jsx(ne.Item,{icon:Xs,children:i.jsx("a",{href:mge(),target:"_blank",className:"w-full",rel:"noreferrer",children:i.jsx(S,{id:"thread.releaseNotes",defaultMessage:"Release notes"})})}),i.jsx(ne.Item,{icon:Xs,children:i.jsx("a",{href:"https://openai.com/policies",target:"_blank",onClick:()=>{E.logEvent(P.clickPrivacyPolicy)},className:"w-full",rel:"noreferrer",children:i.jsx(S,{id:"thread.termsAndPolicies",defaultMessage:"Terms & policies"})})})]})}const d$e=({setIsMobileAppUpsellBannerVisible:e=()=>{}})=>{const t=L(),{eligible:n,markAsViewed:r}=Be(je.hasSeenMobileAppUpsellBanner),s=Ms(),a=KG(),o=XG(),c=n&&s&&(a||o);p.useEffect(()=>{c&&(q.logEvent("chatgpt_web_mobile_app_upsell_banner_shown"),E.logEvent(P.mobileAppUpsellBannerShown)),e(c)},[c,e]);const l=()=>{r(),e(!1),q.logEvent("chatgpt_web_mobile_app_upsell_banner_dismissed"),E.logEvent(P.mobileAppUpsellBannerDismissed)},u=()=>{const d=o?"https://play.google.com/store/apps/details?id=com.openai.chatgpt&referrer=utm_source=mobile_banner":a?"https://apps.apple.com/us/app/chatgpt/id6448311069":"";window.open(d,"_blank"),q.logEvent("chatgpt_web_mobile_app_upsell_banner_clicked"),E.logEvent(P.mobileAppUpsellBannerClicked)};return i.jsx(i.Fragment,{children:c&&i.jsx(Tde,{title:t.formatMessage({id:"mobileTopBanner.title",defaultMessage:"ChatGPT"}),content:t.formatMessage({id:"mobileTopBanner.content",defaultMessage:"The official app by OpenAI"}),secondaryCtaText:t.formatMessage({id:"mobileTopBanner.secondaryCtaText",defaultMessage:"Open"}),onDismiss:l,onSecondaryCtaClick:u})})};function Ake({title:e,description:t,confirmText:n,cancelText:r,isOpen:s=!1,onClose:a,onConfirm:o,primaryButtonColor:c="primary",children:l}){const u=L();return i.jsx(Te,{isOpen:s,onClose:a,type:"success",title:e,description:t,primaryButton:i.jsx(Ke.Button,{title:n??u.formatMessage(Rk.confirmLabel),color:c,onClick:o}),secondaryButton:i.jsx(Ke.Button,{title:r??u.formatMessage(Rk.cancelLabel),color:"secondary",onClick:a}),children:l})}const Rk=z({confirmLabel:{id:"ConfirmModal.confirmLabel",defaultMessage:"Confirm"},cancelLabel:{id:"ConfirmModal.cancelLabel",defaultMessage:"Cancel"}});function f$e({clientThreadId:e,urlThreadId:t}){const n=L(),r=ze(),s=Vn();return i.jsx(xs,{children:s&&e&&!!t&&i.jsx(Ake,{isOpen:!0,title:i.jsx(S,{id:"HistoryGizmoItem.leaveTempChatTitle",defaultMessage:"Leave Temporary Chat?"}),description:i.jsx(S,{id:"HistoryGizmoItem.leaveTempChatDescription",defaultMessage:"Temporary Chats don't appear in your history, so you won't be able to come back to it."}),confirmText:n.formatMessage({id:"HistoryGizmoItem.leaveTempChatConfirm",defaultMessage:"Leave Temporary Chat"}),onClose:()=>{r("/")},onConfirm:()=>{TE.setIsTemporaryChatEnabled(!1)}})})}function Pke({id:e,label:t,checked:n,onChange:r,disabled:s,className:a,labelClassName:o,readOnly:c,labelSide:l="right"}){const u=t&&i.jsx("label",{className:A("form-check-label text-token-text-primary",o),htmlFor:e,children:t});return i.jsxs("div",{className:"form-check flex items-center gap-2",children:[l==="left"&&u,i.jsx("input",{className:A("form-check-input float-left h-4 w-4 appearance-none rounded-sm border border-gray-300 bg-white bg-contain bg-center bg-no-repeat align-top transition duration-200 checked:border-blue-600 checked:bg-blue-600 focus:outline-none",s?"cursor-not-allowed":"cursor-pointer",a),type:"checkbox",disabled:s,onChange:r,checked:n,readOnly:c,id:e,"data-testid":e}),l==="right"&&u]})}const m$e=136,p$e=fe.div`draggable no-draggable-children sticky top-0 p-3 mb-1.5 flex items-center justify-between z-10 h-header-height font-semibold bg-token-main-surface-primary`,h$e=p.forwardRef(function(t,n){const{tooltip:r,className:s,testId:a,...o}=t,c=i.jsx(ee,{color:t.color??"secondary",size:"medium",...o,className:s,ref:n,"data-testid":a});return r!=null?i.jsx(Ye,{label:r,children:c}):c});function g$e({label:e,disabled:t=!1,tooltipText:n,value:r}){const s=p.useId();return i.jsx("div",{className:A("flex items-center gap-2",t?"opacity-50":""),children:i.jsx(NE,{disabled:n==null,label:n,side:"right",children:i.jsxs("label",{htmlFor:s,className:"flex cursor-pointer items-center gap-1",children:[i.jsx(i9,{id:s,value:r,disabled:t,className:"mr-1 flex h-5 w-5 shrink-0 items-center justify-center rounded-full border border-gray-500 bg-white dark:border-gray-600 dark:bg-gray-700",children:i.jsx(c9,{className:"h-2 w-2 rounded-full bg-gray-950 dark:bg-white"})}),e]})})})}function v$e(e){return i.jsx(Pke,{...e,className:A("!rounded border-gray-950 checked:!bg-black dark:border-gray-600 dark:bg-gray-700",e.className)})}function jke(){return at("2067628123").value}var Ike=(e=>(e.Header="Header",e.HeaderTop="HeaderTop",e.HeaderBottom="HeaderBottom",e))(Ike||{}),Nke=(e=>(e.Box="Box",e.ItemActions="ItemActions",e.PromptTextareaAction="PromptTextareaAction",e.BannerTermsDisclaimer="BannerTermsDisclaimer",e.BannerSignup="BannerSignup",e.BannersRateLimit="BannersRateLimit",e.BannerSidekickAnnouncement="BannerSidekickAnnouncement",e.BannerMemoryFull="BannerMemoryFull",e.ParagenControls="ParagenControls",e.AdvancedVoiceOnMobileAnnouncement="AdvancedVoiceOnMobileAnnouncement",e.SearchBrowserExtensionAnnouncement="SearchBrowserExtensionAnnouncement",e.SearchBrowserExtensionReactiveAnnouncement="SearchBrowserExtensionReactiveAnnouncement",e))(Nke||{}),Oke=(e=>(e.DallePromptControls="DallePromptControls",e))(Oke||{});const Dk={contentAreas:{Header:{dimensions:null,contentId:null},HeaderTop:{dimensions:null,contentId:null},HeaderBottom:{dimensions:null,contentId:null}},sharedProps:null};function Rke(){const e=Ie(GL(ys(()=>Dk)));function t(n,r){e.setState(s=>{s.contentAreas[n].dimensions=r})}return{reset:()=>e.setState(Dk),useContentAreaId(n){return e(r=>r.contentAreas[n].contentId)},useHasAnnouncementInHeader(){const n=e(r=>r.contentAreas.HeaderTop.contentId);return n==="AdvancedVoiceOnMobileAnnouncement"||n==="BannerSidekickAnnouncement"},useContentAreaApi(n){const r=p.useCallback(a=>e.setState(o=>{o.contentAreas[n].contentId=a}),[n]),s=p.useCallback(()=>{e.setState(a=>{a.contentAreas[n].contentId=null})},[n]);return{set:r,remove:s}},useContentAreaDimensions(n,r){return e(s=>r(s.contentAreas[n].dimensions))},useContentAreaResizeObserver(n,r){p.useEffect(()=>{if(r.current){t(n,r.current.getBoundingClientRect());const s=new ResizeObserver(a=>{for(const o of a)t(n,o.contentRect)});return s.observe(r.current),()=>{s.disconnect(),t(n,null)}}},[r,n])},useIsHeaderContentAreaPopulated(){return e(n=>!!n.contentAreas.HeaderTop.contentId||!!n.contentAreas.HeaderBottom.contentId)},useSharedProps(n){return e(r=>n?n(r.sharedProps):r.sharedProps)},useSetSharedProps(){return p.useCallback(n=>{e.setState(r=>{r.sharedProps=n})},[])}}}const p5=p.createContext(null);function y$e({children:e}){return i.jsx(p5.Provider,{value:{store:p.useRef(Rke()).current},children:e})}function Rb(){const e=p.useContext(p5);if(!e)throw new Error("usePromptTextareaContext must be used within a PromptTextareaProvider");return e}function Dke(e){return e!=null&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT"||!!e.getAttribute("contenteditable"))}function x$e(e){p.useEffect(()=>{const{document:t}=e;if(!t)return;const n=t.defaultView;if(!n)return;const r=s=>{s.code!=="Space"&&(!s.metaKey||s.key==="v")&&!Dke(t.activeElement)&&e.focus()};return n.addEventListener("keypress",r),()=>{n.removeEventListener("keypress",r)}},[e])}function b$e({fullHeight:e,isStaticSharedThread:t,children:n,withVerticalPadding:r,withHorizontalPadding:s}){const a=pf();s=s&&!a;const o=s&&!t;return i.jsx("div",{className:A("m-auto text-base",r&&"py-[18px]",s&&"px-3 md:px-4",o&&"w-full md:px-5 lg:px-4 xl:px-5",e&&"h-full"),children:n})}function w$e({children:e}){const t=Ko(),n=hm();return i.jsx("div",{className:A("mx-auto flex flex-1 gap-4 text-base md:gap-5 lg:gap-6",n?"md:max-w-3xl":"md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",t&&"-mx-4"),children:e})}function S$e({children:e}){const t=Ko(),n=hm();return yn()?i.jsx("div",{className:"mx-auto mt-[var(--screen-optical-offset-amount)] flex h-full max-w-[var(--screen-content-ideal-size)] flex-col justify-center text-base",children:e}):i.jsx("div",{className:A("mx-auto flex h-full w-full flex-col text-base lg:justify-center",n?"md:max-w-3xl":"md:max-w-3xl lg:max-w-[40rem] xl:max-w-[48rem]",t&&"-mx-4"),children:e})}function C$e(){const e=L();return i.jsx(ee,{onClick:()=>{$e.openModal(et.SharedConversationModeration)},className:"w-1/3",children:e.formatMessage({id:"thread.sharedConversation.moderate",defaultMessage:"Moderate conversation"})})}function h5({className:e,...t}){return i.jsx("textarea",{className:A("form-textarea w-full rounded-lg border border-token-border-light bg-token-main-surface-secondary text-sm text-token-text-primary focus:border-token-text-primary focus:shadow-none focus:outline-none focus:ring-token-text-primary",e),...t})}function Lke(e,t){const n=e??t??0;return A(e!=null&&e!=t&&"opacity-50 dark:opacity-60",n>4?"text-brand-purple":n>3?"text-green-500":n>2?"text-yellow-500":n>1?"text-orange-500":"text-red-500")}function $ke(e){switch(e){case 1:return pn.hoverRating1;case 2:return pn.hoverRating2;case 3:return pn.hoverRating3;case 4:return pn.hoverRating4;case 5:return pn.hoverRating5}}function Fke(e){return me({queryFn:async()=>tt.getUserReview(e),queryKey:["gizmo","review",{gizmoId:e}],enabled:e!=null})}const Bke=({rating:e,onRating:t,className:n})=>{const[r,s]=p.useState(),a=L();return i.jsx("div",{className:A("flex flex-row",n),children:[1,2,3,4,5].map(o=>{const c=i.jsx(J$,{className:A("icon-2xl cursor-pointer",(r??e??0)>=o?Lke(r,e):"text-token-main-surface-tertiary")}),l=$ke(r??0),u=l&&a.formatMessage(l);return i.jsx("div",{onClick:()=>{t(o)},onMouseEnter:()=>{s(o)},onMouseLeave:()=>{s(void 0)},className:"p-1",children:l?i.jsx(Ye,{label:u,side:"top",sideOffset:4,children:c}):c},o)})})},T$e=({gizmo:e})=>zx(et.GPTReview)?i.jsx(Uke,{gizmo:e}):null,Uke=({gizmo:e})=>{const t=zt(),n=()=>$e.closeModal(et.GPTReview),r=L(),s=Ne(),[a,o]=p.useState(""),[c,l]=p.useState(!1),u=Fke(e.gizmo.id),d=H7(e.gizmo.id),[f,m]=p.useState(),h=f===u.data?.rating;p.useEffect(()=>{u.data!=null&&f==null&&m(u.data.rating)},[u.data,f]),p.useEffect(()=>{E.logEvent(P.showRatingModal,{gizmo_id:e.gizmo.id})},[e.gizmo.id]);const g=u.data!=null,v=!e.gizmo.tags?.includes(Oc.FirstParty)&&e.gizmo.author.will_receive_support_emails;return i.jsx(Te,{type:"success",title:i.jsxs("div",{children:[i.jsx(S,{...pn.title}),i.jsxs("div",{className:"align-end mt-2 flex text-sm font-normal",children:[g?i.jsx(S,{...pn.subtitleChange}):i.jsx(S,{...pn.subtitle}),i.jsx(Ye,{label:r.formatMessage(pn.subtitleTooltip),className:"ml-1 flex cursor-pointer items-center pl-1",sideOffset:0,children:i.jsx("div",{className:"icon-xs flex items-center justify-center rounded-full border border-token-text-tertiary text-[8px] font-bold text-token-text-tertiary",children:"i"})})]})]}),isOpen:!0,onClose:n,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:i.jsxs("div",{className:"flex flex-grow flex-col space-y-8",children:[i.jsx(Bke,{rating:f,onRating:m,className:"mx-auto flex flex-row items-center"}),v&&i.jsxs("div",{children:[i.jsx(h5,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:r.formatMessage(pn.messagePlaceholder),value:a,rows:1,onChange:y=>o(y.target.value)}),i.jsxs("div",{className:A("flex flex-row items-center space-x-2 self-start",a.length>0?"text-token-text-primary":"text-token-text-tertiary"),children:[i.jsx("input",{type:"checkbox",className:"rounded",checked:c,onChange:y=>l(y.target.checked)}),t&&i.jsx("span",{className:"text-sm",children:i.jsx(S,{...pn.includeFrom,values:{email:i.jsx("strong",{children:t.email})}})})]})]}),i.jsx(ee,{color:"primary",disabled:h,onClick:async()=>{if(f==null){s.warning("Please select a rating");return}E.logEvent(P.submitRatingModal,{gizmo_id:e.gizmo.id,rating:f}),await d.mutateAsync({rating:f,message:a.length>0?a:void 0,includeFrom:a.length>0?c:void 0}),s.success(r.formatMessage(pn.successToast),{duration:3}),n()},children:i.jsx(S,{...pn.submit})})]})})},pn=z({title:{id:"GizmoReviewModal.title",defaultMessage:"Leave Feedback"},subtitle:{id:"GizmoReviewModal.subtitle",defaultMessage:"How would you rate this GPT?"},subtitleChange:{id:"GizmoReviewModal.subtitleChange",defaultMessage:"Would you like to change your rating?"},subtitleTooltip:{id:"GizmoReviewModal.subtitleTooltip",defaultMessage:"Stars will be public and anonymous"},messagePlaceholder:{id:"GizmoReviewModal.messagePlaceholder",defaultMessage:"Add an optional private email to the creator"},submit:{id:"GizmoReviewModal.submit",defaultMessage:"Submit"},successToast:{id:"GizmoReviewModal.successToast",defaultMessage:"Review sent"},includeFrom:{id:"GizmoReviewModal.includeFrom",defaultMessage:"Include my email address {email}"},hoverRating1:{id:"GizmoReviewModal.hoverRating1",defaultMessage:"Bad"},hoverRating2:{id:"GizmoReviewModal.hoverRating2",defaultMessage:"Okay"},hoverRating3:{id:"GizmoReviewModal.hoverRating3",defaultMessage:"Good"},hoverRating4:{id:"GizmoReviewModal.hoverRating4",defaultMessage:"Great!"},hoverRating5:{id:"GizmoReviewModal.hoverRating5",defaultMessage:"Excellent!"}});function Vke(e){return e!==e}var Gke=Vke;function Wke(e,t,n){for(var r=n-1,s=e.length;++r<s;)if(e[r]===t)return r;return-1}var Hke=Wke,zke=WL,qke=Gke,Yke=Hke;function Kke(e,t,n){return t===t?Yke(e,t,n):zke(e,qke,n)}var Xke=Kke,Qke=Xke;function Zke(e,t){var n=e==null?0:e.length;return!!n&&Qke(e,t,0)>-1}var Jke=Zke;function eMe(e,t,n){for(var r=-1,s=e==null?0:e.length;++r<s;)if(n(t,e[r]))return!0;return!1}var tMe=eMe,_h=HL,nMe=zL,rMe=OE,sMe=1/0,aMe=_h&&1/rMe(new _h([,-0]))[1]==sMe?function(e){return new _h(e)}:nMe,oMe=aMe,iMe=qL,cMe=Jke,lMe=tMe,uMe=YL,dMe=oMe,fMe=OE,mMe=200;function pMe(e,t,n){var r=-1,s=cMe,a=e.length,o=!0,c=[],l=c;if(n)o=!1,s=lMe;else if(a>=mMe){var u=t?null:dMe(e);if(u)return fMe(u);o=!1,s=uMe,l=new iMe}else l=t?[]:c;e:for(;++r<a;){var d=e[r],f=t?t(d):d;if(d=n||d!==0?d:0,o&&f===f){for(var m=l.length;m--;)if(l[m]===f)continue e;t&&l.push(f),c.push(d)}else s(l,f,n)||(l!==c&&l.push(f),c.push(d))}return c}var hMe=pMe,gMe=Yd,vMe=hMe;function yMe(e,t){return e&&e.length?vMe(e,gMe(t)):[]}var xMe=yMe;const g5=xe(xMe),v5=({actions:e,title:t,description:n,onDismiss:r})=>{const s=L(),a=e?.primaryAction?.text?s.formatMessage(e.primaryAction.text):void 0,o=e?.secondaryAction?.text?s.formatMessage(e.secondaryAction.text):void 0;return i.jsx(Xo,{title:t,content:n,onDismiss:r,primaryCtaText:a,onPrimaryCtaClick:e?.primaryAction?.onClick??void 0,secondaryCtaText:o,onSecondaryCtaClick:e?.secondaryAction?.onClick??void 0,isElevated:!0})},bMe=({clientThreadId:e,rateLimitInfo:t,onDismiss:n})=>{const{name:r,title:s,call_to_action:a,description:o}=t,c=Ce(),l=Dc(!0),u=RE(),d=_c(e),f=c?.planType??"unknown",m=u&&"block_reason"in u?u.block_reason:null,h="banner_description",g={type:r||"unknown",location:h,plan_type:f,is_new_conversation:d,is_hard_block:!!u,hard_block_reason:m??"",call_to_action:a},v=ze(),y=Jt(),{isUnauthenticated:b}=bt(),x=Jo(),w=Ta(yt.signUpButtonText),C=ks(),T=I=>{switch(I){case rn.AUTHENTICATE:return{text:x?yt.logInButtonText:w,onClick:()=>{y({authType:x?"login":"signup",callback:j=>{x?E.logLogInButtonClicked({location:`Rate limit banner - ${r}`,provider:j}):E.logSignUpButtonClicked({location:`Rate limit banner - ${r}`,provider:j})}})}};case rn.AUTHENTICATE_SECONDARY:return{text:x?w:yt.logInButtonText,onClick:()=>{y({authType:x?"signup":"login",callback:j=>{x?E.logSignUpButtonClicked({location:`Rate limit banner - ${r}`,provider:j}):E.logLogInButtonClicked({location:`Rate limit banner - ${r}`,provider:j})}})}};case rn.GET_PLUS:return{text:Ah.getPlusButton,onClick:()=>{E.logRateLimitGetPlusButtonClicked(g),b?y({authType:x?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:j=>{x?E.logLogInButtonClicked({location:"Rate limit banner Get Plus upsell",provider:j}):E.logSignUpButtonClicked({location:"Rate limit banner Get Plus upsell",provider:j})}}):Rr(v,"Prompt textarea rate limit banner")}};case rn.NEW_CHAT:return{text:Ah.newChatButton,onClick:()=>{l({modelId:"",location:h})}};case"get_pro":return{text:Ah.getProButton,onClick:()=>{E.logRateLimitUpgradePlanButtonClicked({...g,upgrade_plan_tye:"pro"}),b?y({authType:x?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:j=>{x?E.logLogInButtonClicked({location:"Rate limit banner Get Pro upsell",provider:j}):E.logSignUpButtonClicked({location:"Rate limit banner Get Pro upsell",provider:j})}}):Rr(v,"Prompt textarea rate limit banner")}}}};_m(()=>{E.logRateLimitBannerShown(g)});let[M,_]=a??[];M===rn.AUTHENTICATE&&C&&(_=rn.AUTHENTICATE_SECONDARY);const k={primaryAction:T(M),secondaryAction:T(_)};return i.jsx(v5,{onDismiss:n,title:s,description:o,actions:k})},Ah=z({getPlusButton:{id:"TeyLcp",defaultMessage:"Get Plus"},getProButton:{id:"Pl8/Vk",defaultMessage:"Get Pro"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"}}),wMe=({clientThreadId:e,rateLimitInfo:t,onDismiss:n})=>{const{name:r,title:s,call_to_action:a,description:o}=t,c=Ce(),l=Dc(!0),u=RE(),d=_c(e),f=c?.planType??"unknown",m=ks(),h=u&&"block_reason"in u?u.block_reason:null,g="banner_description",v={type:r||"unknown",location:g,plan_type:f,is_new_conversation:d,is_hard_block:!!u,hard_block_reason:h??"",call_to_action:a},y=ze(),b=Jt(),{isUnauthenticated:x}=bt(),w=Jo(),C=Ta(yt.signUpButtonText),T=I=>{switch(I){case rn.AUTHENTICATE:return{text:w?yt.logInButtonText:C,onClick:()=>{b({authType:w?"login":"signup",callback:j=>{w?E.logLogInButtonClicked({location:`Rate limit banner - ${r}`,provider:j}):E.logSignUpButtonClicked({location:`Rate limit banner - ${r}`,provider:j})}})}};case rn.AUTHENTICATE_SECONDARY:return{text:w?C:yt.logInButtonText,onClick:()=>{b({authType:w?"signup":"login",callback:j=>{w?E.logSignUpButtonClicked({location:`Rate limit banner - ${r}`,provider:j}):E.logLogInButtonClicked({location:`Rate limit banner - ${r}`,provider:j})}})}};case rn.GET_PLUS:return{text:Lk.getPlusButton,onClick:()=>{E.logRateLimitGetPlusButtonClicked(v),x?b({authType:w?"login":"signup",shouldOpenPaymentModalOnAuth:!0,callback:j=>{w?E.logLogInButtonClicked({location:"Rate limit banner Get Plus upsell",provider:j}):E.logSignUpButtonClicked({location:"Rate limit banner Get Plus upsell",provider:j})}}):Rr(y,"Prompt textarea rate limit banner")}};case rn.NEW_CHAT:return{text:Lk.newChatButton,onClick:()=>{l({modelId:"",location:g})}}}};_m(()=>{E.logRateLimitBannerShown(v)});let[M,_]=a??[];M===rn.AUTHENTICATE&&m&&(_=rn.AUTHENTICATE_SECONDARY);const k={primaryAction:T(M),secondaryAction:T(_)};return i.jsx(v5,{onDismiss:n,title:s,description:o,actions:k})},Lk=z({getPlusButton:{id:"TeyLcp",defaultMessage:"Get Plus"},newChatButton:{id:"7OvnJ5",defaultMessage:"New chat"}}),SMe=e=>{const{value:t}=at("1028682714");return t?i.jsx(bMe,{...e}):i.jsx(wMe,{...e})},y5=fe.div`group flex h-10 items-center gap-2 rounded-lg px-2 hover:bg-token-main-surface-secondary text-sm text-token-text-primary`;function CMe(){const{data:e,isLoading:t}=V7({cutId:"recent",limit:8}),{data:n,isLoading:r}=G7();return{isLoading:t||r,recent:e,pinned:n}}function TMe({query:e,onSelectGizmo:t,selectedIdx:n},r){const s=$o(),a=p.useRef([]),{isLoading:o,recent:c,pinned:l}=CMe();p.useImperativeHandle(r,()=>({handleEnterOnIndex:f=>{if(!d[f])return f<u.length?u[f].resource:"create"},getResultsLength:()=>u.length+1,scrollToItem:f=>{const m=a.current[f];m&&m.scrollIntoView({behavior:"instant",block:"nearest"})}}));let u=[];if(o)return i.jsx("div",{className:"absolute right-4 top-0 flex h-full items-center justify-center",children:i.jsx(cn,{})});c&&u.push(...c.pages.flatMap(f=>f.list.items).map(f=>({resource:f.resource,from:"recent"}))),l&&u.push(...l.items.map(f=>({resource:f,from:"pinned"}))),u=g5(u,f=>f.resource.gizmo.id);const d=u.map(f=>f.resource.gizmo.tags?.includes(Oc.WorkspaceDisabled));return e&&e!==""&&(u=u.filter(f=>(f.resource.gizmo.display.name.toLowerCase()+f.resource.gizmo.display.description?.toLowerCase()+f.resource.gizmo.author.display_name?.toLowerCase()).includes(e?.toLowerCase()))),i.jsxs("div",{className:"max-h-40 overflow-y-auto",children:[u.map((f,m)=>i.jsx("div",{ref:h=>{a.current[m]=h},tabIndex:m,onClick:()=>{d[m]||t(f.resource)},children:i.jsx(_Me,{gizmoResource:f.resource,from:f.from,showDescription:s,isSelected:n===m,grayedOut:d[m]})},f.resource.gizmo.id)),i.jsx("div",{ref:f=>{a.current[u.length]=f},tabIndex:u.length,onClick:()=>{t("create")},children:i.jsx(MMe,{isSelected:n===u.length})},"create")]})}const kMe=p.forwardRef(TMe),MMe=({isSelected:e})=>i.jsx(y5,{className:e?"bg-token-main-surface-secondary":"",children:i.jsxs(En,{to:"/gpts/editor",target:"_blank",className:"flex flex-row space-x-2 font-semibold",children:[i.jsx("span",{className:"self-center",children:i.jsx(yf,{className:"icon-sm"})}),i.jsx("span",{children:i.jsx(S,{...x5.dropdownCreateLabel})})]})}),EMe=({onClick:e,onClose:t})=>{const[n,r]=p.useState(null),s=p.useRef(null),a=p.useRef(null),[o,c]=p.useState(0),l=L(),u=d=>{E.logEvent(P.mentionsClickGizmo,{gizmo_id:d==="create"?"create":d.gizmo.id}),d!=="create"&&e(d)};return i.jsxs(i.Fragment,{children:[i.jsx("input",{autoFocus:!0,placeholder:l.formatMessage(x5.searchPlaceholder),ref:s,onKeyDown:d=>{const f=a.current?.getResultsLength()??0;if((d.key==="Escape"||d.key==="Backspace"&&!n)&&(d.preventDefault(),t()),d.key==="Enter"||d.key==="Tab"){d.preventDefault();const m=a.current?.handleEnterOnIndex(o);if(!m)return;m==="create"?(window.open("/gpts/editor","_blank"),t()):u(m)}if(d.key==="ArrowDown"&&o<f-1){d.preventDefault();const m=o+1;a.current?.scrollToItem(m),c(m)}if(d.key==="ArrowUp"&&o>0){d.preventDefault();const m=o-1;a.current?.scrollToItem(m),c(m)}},onChange:d=>{r(d.target.value),c(0)},className:"w-full border-0 bg-token-main-surface-primary p-2 text-sm focus:outline-none"}),i.jsx(kMe,{ref:a,query:n,selectedIdx:o,onSelectGizmo:u})]})},k$e=({onClick:e,onClose:t})=>{const n=KL(),r=!!n;return _m(()=>{E.logEvent(P.mentionsOpened,{gizmo_selector_disabled:r})}),r?i.jsx(SMe,{clientThreadId:nE,rateLimitInfo:n}):i.jsx("div",{onBlur:s=>{s.currentTarget.contains(s.relatedTarget)||t()},className:"popover rounded-2xl border border-token-border-light bg-token-main-surface-primary p-2 shadow-lg",children:i.jsx(EMe,{onClick:e,onClose:t})})};function _Me({gizmoResource:e,from:t,showDescription:n,isSelected:r,grayedOut:s}){const a=!!e.gizmo.tags?.includes(Oc.FirstParty);return i.jsxs(y5,{className:A(r?"bg-token-main-surface-secondary":"",s&&"opacity-50"),children:[i.jsx(Nb,{isFirstParty:a,src:e.gizmo.display.profile_picture_url,className:A("icon-xl h-7 w-7 flex-shrink-0",s&&"grayscale group-hover:grayscale-0")}),i.jsxs("div",{className:"flex h-fit grow flex-row justify-between space-x-2 overflow-hidden text-ellipsis whitespace-nowrap",children:[i.jsxs("div",{className:"flex flex-row space-x-2",children:[i.jsx("span",{className:"shrink-0 truncate font-semibold",children:e.gizmo.display.name}),n&&i.jsx("span",{className:"flex-grow truncate text-sm text-token-text-tertiary sm:max-w-xs lg:max-w-md",children:e.gizmo.display.description})]}),i.jsx("span",{className:"shrink-0 self-center",children:t==="recent"?i.jsx(n_,{className:"icon-sm"}):i.jsx(e6,{className:"icon-sm"})})]})]})}const x5=z({talkingTo:{id:"TaggingDropdown.talkingTo",defaultMessage:"Talking to"},dropdownCreateLabel:{id:"TaggingDropdown.dropdownCreateLabel",defaultMessage:"Create a GPT"},searchPlaceholder:{id:"TaggingDropdown.searchPlaceholder",defaultMessage:"Search recent and pinned GPTs"}}),AMe=({className:e,contextConnector:t,extension:n})=>{const r=PMe(t,n);return i.jsx("div",{className:`${e} flex items-center justify-center rounded-md border border-gray-100 bg-gray-50 dark:border-white/10 dark:bg-token-main-surface-secondary`,children:i.jsx(r,{className:"w-[20px]"})})};function PMe(e,t){switch(e){case G.GDRIVE:switch(t){case"doc":case"docx":return _0;case"xls":case"xlsx":return E0;case"ppt":case"pptx":return M0;default:return jo}case G.O365_BUSINESS:case G.O365_PERSONAL:case G.O365:switch(t){case"doc":case"docx":return a_;case"xls":case"xlsx":return s_;case"ppt":case"pptx":return r_;default:return k0}case G.CONFLUENCE:return T0;case G.JIRA:return C0}}function b5(e){switch(e){case G.GDRIVE:return jo;case G.O365_BUSINESS:case G.O365_PERSONAL:case G.O365:return o_;case G.CONFLUENCE:return T0;case G.JIRA:return C0}}var Db={};Object.defineProperty(Db,"__esModule",{value:!0});function w5(e,t){if(t)return e;throw new Error("Unhandled discriminated union member: "+JSON.stringify(e))}Db.assertNever=w5;var Lb=Db.default=w5;const jMe=Pi({defaultMessage:"Microsoft OneDrive (personal)",id:"ContextConnector.OneDrivePersonal.name"}),IMe=Pi({defaultMessage:"Microsoft OneDrive (work/school)",id:"ContextConnector.OneDriveBusiness.name"}),$b=z({includesSharePoint:{id:"ContextConnectorPicker.o365BusinessIncludesSharePoint",defaultMessage:"Includes SharePoint"}});function bl(e,t){switch(e){case G.GDRIVE:return"Google Drive";case G.O365:return"Microsoft OneDrive";case G.O365_PERSONAL:return t?.formatMessage(jMe)??"Microsoft OneDrive (personal)";case G.O365_BUSINESS:return t?.formatMessage(IMe)??"Microsoft OneDrive (work/school)";case G.CONFLUENCE:return"Confluence";case G.JIRA:return"Jira"}}function NMe(e,t){switch(e){case G.GDRIVE:switch(t){case"doc":case"docx":return"Google Docs";case"xls":case"xlsx":return"Google Sheets";case"ppt":case"pptx":return"Google Slides";default:return"Google Drive"}case G.O365:case G.O365_PERSONAL:case G.O365_BUSINESS:switch(t){case"doc":case"docx":return"Microsoft Word";case"xls":case"xlsx":return"Microsoft Excel";case"ppt":case"pptx":return"Microsoft PowerPoint";default:return"Microsoft OneDrive"}case G.CONFLUENCE:return"Page";case G.JIRA:return"Issue"}Lb(e)}function OMe({contextConnector:e,extension:t}){return i.jsx(i.Fragment,{children:NMe(e,t)})}function Dm(){const e=zt(),t=tf("1967546325").config,n=t.get("gdrivePicker",!1),r=t.get("o365Picker",!1),s=t.get("gdriveLink",!1),a=t.get("o365PersonalLink",!1),o=t.get("o365BusinessLink",!1),c=t.get("testCtor1Link",!1),l=t.get("testCtor2Link",!1),u=t.get("gdrivePercentage",0),d=t.get("o365Percentage",0),f=t.get("testCtor1Percentage",0),m=t.get("testCtor2Percentage",0),h=t.get("loadTestPercentage",0),g=t.get("showWorkspaceSettings",!1),v=e?RMe(e.id):null;return p.useMemo(()=>({gdriveStatus:Hr(n,v,u),o365Status:Hr(r,v,d),gdriveLinkStatus:Hr(s,v,u),o365PersonalLinkStatus:Hr(a,v,d),o365BusinessLinkStatus:Hr(o,v,d),confluenceLinkStatus:Hr(c,v,f),jiraLinkStatus:Hr(l,v,m),loadTest:Hr(!0,v,h)==="true",showWorkspaceSettings:g}),[n,v,u,r,d,s,a,o,c,f,l,m,h,g])}function Hr(e,t,n){return!e||t==null?"false":t<n?"true":"ifConnected"}function RMe(e){const n=DMe(e)%100;return Math.abs(n)}function DMe(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t=(t<<5)-t+r,t|=0}return t}const LMe=new Map;function S5(){const{gdriveLinkStatus:e,o365BusinessLinkStatus:t,o365PersonalLinkStatus:n,confluenceLinkStatus:r,jiraLinkStatus:s}=Dm();return Fb(e,t,n,r,s)}function Lm(){const{gdriveStatus:e,o365Status:t}=Dm();return Fb(e,t,t)}function M$e(){const{gdriveStatus:e,o365Status:t,confluenceLinkStatus:n,jiraLinkStatus:r}=Dm();return Fb(e,t,t,n,r)}function Fb(e,t,n,r=null,s=null){const o=Ce()?.getWorkspaceId(),c=[G.GDRIVE,G.O365_PERSONAL,G.O365_BUSINESS,...r==="true"||r==="ifConnected"?[G.CONFLUENCE]:[],...s==="true"||s==="ifConnected"?[G.JIRA]:[]],{connectors:l,isLoading:u}=C5(c),{data:d,isLoading:f}=XL(o),m=!o||d?.beta_settings?.[si.CONTEXT_CONNECTOR_GDRIVE],h=!o||d?.beta_settings?.[si.CONTEXT_CONNECTOR_O365_PERSONAL],g=!o||d?.beta_settings?.[si.CONTEXT_CONNECTOR_O365_BUSINESS],v=!o||d?.beta_settings?.[si.CONTEXT_CONNECTOR_CONFLUENCE],y=!o||d?.beta_settings?.[si.CONTEXT_CONNECTOR_JIRA],b=l.get(G.GDRIVE),x=l.get(G.O365_PERSONAL),w=l.get(G.O365_BUSINESS),C=l.get(G.CONFLUENCE),T=l.get(G.JIRA),M=(k,I)=>k==="true"||k==="ifConnected"&&I;return{connectorConfig:p.useMemo(()=>{const k=!!b?.access_token,I=M(e,k),j=!!(x?.access_token??w?.access_token),F=M(t,j),U=M(n,j),B=!!r&&M(r,!!C?.access_token),N=!!s&&M(s,!!T?.access_token),$=[I&&b&&m?[G.GDRIVE,b]:null,U&&x&&h?[G.O365_PERSONAL,x]:null,F&&w&&g?[G.O365_BUSINESS,w]:null,B&&C&&v?[G.CONFLUENCE,C]:null,N&&T&&y?[G.JIRA,T]:null];return new Map(Sc($))},[b,e,x,w,C,T,t,n,r,s,m,h,g,v,y]),isLoading:u||f}}function C5(e){const[t,n]=p.useState(LMe),{isUnauthenticated:r}=bt(),{isSuccess:s,data:a,isLoading:o}=me({queryKey:["fetchConnectorData",e],queryFn:$Me,refetchInterval:30*60*1e3,enabled:!r});return p.useEffect(()=>{s&&n(new Map(a.map(c=>[c.type,c])))},[s,a]),{connectors:t,isLoading:o}}async function $Me({queryKey:e}){const[t,n]=e;let r=null;try{r=await K.checkConnectorAPI(n)}catch(a){if(a instanceof jt)return[];ie.addError(new Error("Server Error while retrieving context connector entry",{cause:a}))}return r?r.connectors.map(a=>{if(!a.access_token)return a;if(a.type===G.O365_PERSONAL)a.onedrive_endpoint_hint={type:"personal",baseUrl:"https://onedrive.live.com",parsedUrl:"https://onedrive.live.com/picker"};else if(a.type===G.O365_BUSINESS){const o=a.onedrive_business_metadata?.base_url;if(o){const c=new URL(o);a.onedrive_endpoint_hint={type:"business",baseUrl:o,parsedUrl:`https://${c.hostname}/_layouts/15/FilePicker.aspx`}}}return a}):[]}const FMe=J.createContext({mode:void 0,getGizmoId:void 0}),wl=()=>p.useContext(FMe),vt={filePickerStarted:e=>{E.logEvent(P.contextConnectorsPickerStarted,{contextConnector:e})},filePickerLoaded:e=>{E.logEvent(P.contextConnectorsPickerLoaded,{contextConnector:e})},filePickerPicked:(e,t)=>{E.logEvent(P.contextConnectorsPickerPicked,{contextConnector:e,numFiles:t})},filePickerCancelled:e=>{E.logEvent(P.contextConnectorsPickerCancelled,{contextConnector:e})},linkPasted:e=>{E.logEvent(P.contextConnectorsLinkPasted,{...e})},linkMetadataFetchStarted:e=>{E.logEvent(P.contextConnectorsLinkMetadataFetchStarted,{contextConnector:e})},linkMetadataFetchSucceeded:(e,t)=>{E.logEvent(P.contextConnectorsLinkMetadataFetchSucceeded,{contextConnector:e,mimeType:t})},linkMetadataFetchFailed:(e,t)=>{E.logEvent(P.contextConnectorsLinkMetadataFetchFailed,{contextConnector:e,reason:String(t)})},oauthUpsellButtonClick:(e,t)=>{E.logEvent(P.contextConnectorsOAuthUpsellButtonClick,{contextConnector:e,choice:t})},expiredAccessTokenUsed:(e,t)=>{E.logEvent(P.contextConnectorsExpiredAccessTokenUsed,{contextConnector:e,useCase:t})}};function E$e(e,t,n,r){const s=Ne(),a=L(),{getGizmoId:o}=wl(),[c,l]=p.useState();p.useEffect(()=>{o?o().then(m=>l(m)):l(void 0)},[o]);const u=Cc(t),d=yl();return p.useCallback(m=>{const{docsReferencedByURL:h}=Un.getThread(e)??{};if(h!=null)for(const g of m){const{id:v,type:y,handler:b}=g,x=`${y}:${v}`,w=h[x],T=d.getState().files.find(M=>M.tempId===v);if(w!=null&&w!=="failed"&&T){s.success(a.formatMessage(Ph.fileAlreadyAttached),{hasCloseButton:!0});continue}switch(b.type){case"fetch":{D.updateReferencedDocState(e,x,"pending"),hn.uploadFile(d,v,new File([],a.formatMessage(Ph.fileLoading)),Je.None,n,a,s,{skipUpload:!0,gizmoId:c},r,{contextConnector:y,sourceUrl:g.url,syntheticExtension:null,type:vn.Link}),vt.linkMetadataFetchStarted(y),b.tryFetch().then(M=>{if(hn.remove(d,v,"none"),M==null)return null;const{id:_,title:k,connector:I,mimeType:j,url:F,syntheticExtension:U,o365DriveId:B,manifest:N}=M;vt.linkMetadataFetchSucceeded(y,j),D.updateReferencedDocState(e,x,"fetched");let $=k;I===G.GDRIVE&&($=U?`${k}.${U}`:k),hn.uploadFile(d,_,new File([],$,{type:j.split(";")[0]}),Je.Retrieval,n,a,s,{gizmoId:c},r,{contextConnector:I,sourceUrl:F,syntheticExtension:U,type:vn.Link,o365DriveId:B,manifest:N})}).catch(M=>{vt.linkMetadataFetchFailed(y,M),s.danger(a.formatMessage(Ph.fileFetchFailed),{hasCloseButton:!0}),D.updateReferencedDocState(e,x,"failed"),hn.remove(d,v,"none")});break}case"prompt":{u.appendMessageIfNotDismissed({connector:y,type:b.message}),D.updateReferencedDocState(e,x,"prompted");break}}}},[e,d,s,a,n,c,r,u])}const Ph=z({fileLoading:{id:"CCC.fileLoading",defaultMessage:"Loading"},fileFetchFailed:{id:"CCC.fileFetchFailed",defaultMessage:"Unable to fetch file information"},fileAlreadyAttached:{id:"CCC.fileAlreadyAttached",defaultMessage:"This file is already a part of your message."}});var BMe=Qv,UMe=I0,VMe=Yd;function GMe(e,t){var n={};return t=VMe(t),UMe(e,function(r,s,a){BMe(n,s,t(r,s,a))}),n}var WMe=GMe;const HMe=xe(WMe);function zMe(e){var t=function(r,s){return J.createElement(e,QL({},r,{forwardedRef:s}))},n=e.displayName||e.name;return t.displayName="withForwardedRef("+n+")",p.forwardRef(t)}var $k=Object.keys,qMe=function(t,n){if(t===n)return!0;if(!(t instanceof Object)||!(n instanceof Object))return!1;for(var r=$k(t),s=r.length,a=0;a<s;a++)if(!(r[a]in n))return!1;for(var a=0;a<s;a++)if(t[r[a]]!==n[r[a]])return!1;return s===$k(n).length},YMe=function(e,t){var n=window.getComputedStyle(t),r=n.borderBottomWidth,s=n.borderTopWidth,a=n.fontSize,o=n.lineHeight,c=n.paddingBottom,l=n.paddingTop,u=o==="normal"?parseFloat(a)*1.2:parseFloat(o),d=e===0?0:u*e+parseFloat(r)+parseFloat(s)+parseFloat(c)+parseFloat(l),f=t.scrollHeight+parseFloat(r)+parseFloat(s);return Math.max(d,f)},Fu=function(e,t){if(t){var n="hidden",r=window.getComputedStyle(t).maxHeight;if(r!=="none"){var s=parseFloat(r);s<t.scrollHeight&&(n="")}t.style.height="0",t.style.overflowY=n,t.style.height="".concat(YMe(e,t),"px")}},KMe=function(e){var t=p.useRef(e),n=p.useRef(0);return qMe(e,t.current)||(t.current=e,n.current+=1),p.useMemo(function(){return t.current},[n.current])},Fk=typeof window>"u"?Function.prototype:p.useLayoutEffect,XMe=function(e){var t=e.forwardedRef,n=cw(e,["forwardedRef"]),r=typeof t=="function",s=KMe(n.style),a=p.useRef(),o=r||!t?a:t,c=n.rows?parseInt(""+n.rows,10):0,l=n.onChange,u=n.onInput,d=cw(n,["onChange","onInput"]);Fk(function(){Fu(c,o.current)},[n.className,n.value,o,c,s]),Fk(function(){if(window.ResizeObserver){var h=new ResizeObserver(function(){Fu(c,o.current)});return h.observe(o.current),function(){h.disconnect()}}},[o,c]);var f=p.useCallback(function(h){l?.(h),u?.(h),Fu(c,o.current)},[l,u,o,c]),m=p.useCallback(function(h){o.current=h,r&&t(h)},[t,r,o]);return J.createElement("textarea",ZL({},d,{onInput:f,ref:m,rows:c}))};const _$e=zMe(XMe);class QMe extends I7{textArea=null;get document(){return this.textArea?.ownerDocument}setValue(t){this.textArea&&(typeof t=="string"?this.textArea.value=t:this.textArea.value=t(this.textArea.value))}getSystemHints(){return[]}replaceSlashCommandTokensWithText(){}isEmpty(){const t=this.textArea?.value;return t==null||t.trim().length===0}trimLeadingText(t){let n=!1;return this.setValue(r=>r.startsWith(t)?(n=!0,r.replace(t,"")):r),n&&this.textArea&&this.textArea.setSelectionRange(this.textArea.selectionStart-t.length,this.textArea.selectionEnd-t.length),n}replaceAll(t,n){this.setValue(r=>r.replaceAll(t,n))}appendText(t){this.setValue(n=>n+t)}focus(){this.textArea?.focus()}setText(t){this.setValue(t)}setPlaceholder(){}getCurrentText(){return this.textArea?.value||""}hasMultipleLines(){return this.getCurrentText().includes(`
`)}resize(t){this.textArea&&Fu(t,this.textArea)}isReady(){return this.textArea!==null}acceptLegacyKeydown(){return!0}getSelectionStart(){return this.textArea?.selectionStart??0}subscribe(t,n){return this.textArea?.addEventListener(t,n),()=>{this.textArea?.removeEventListener(t,n)}}}const ZMe="77377267392",T5="AIzaSyAOHzpLbFWAcLwrOn1IvQeVd0jHRntTlPk",A$e="gdrive-sync-connector-2216c16c-b5a5-43e9-a654-e6eb9a6a2227";var Qr=(e=>(e.OneDrive_BUSINESS_DRIVE_ITEMS="https://graph.microsoft.com/v1.0/me/drive/items",e.OneDrive_BUSINESS_DRIVE_ROOT="https://graph.microsoft.com/v1.0/me/drive/root",e.OneDrive_BUSINESS_SHARES="https://graph.microsoft.com/v1.0/shares",e.OneDrive_PERSONAL_DRIVE_ITEMS="https://api.onedrive.com/v1.0/drives",e.OneDrive_PERSONAL_SHARES="https://api.onedrive.com/v1.0/shares",e))(Qr||{});const Nv="open-connector";function JMe(){const e=ze(),t=ko(),[n]=pa(),r=n.get(Nv),s=p.useCallback(()=>{const o=new URLSearchParams(t.search);o.delete(Nv),e({...t,search:o.toString()},{replace:!0})},[t,e]);return{connector:Object.values(G).find(o=>o===r),clearParam:s}}async function eEe(e,t){const n=`https://chat.openai.com/aip/${e.id}/oauth/callback`,r=await K.pluginOauthRedirect(e.id,n,t);window.location.href=r.redirect_uri}async function k5(e,t,n,r){const s=await K.connectorOauthRedirect(e.id,n,t,r);window.location.href=s.redirect_uri}function tEe(e){switch(e){case vn.Link:return"link_paste_popover";case vn.Picker:return"file_upload_menu"}}async function P$e(e){await K.deleteUserConnectedApp(e),window.location.reload()}async function nEe(e,t,n,r){if(!t)return;n();let s="";r===vn.Picker&&(s=`${Nv}=${t.type}`),e??="/",s&&(e.includes("?")?e+=`&${s}`:e+=`?${s}`),k5({id:t.id},tEe(r),`${window.location.origin}/ccc/${t.id}/oauth/callback`,e)}function rEe(e,t){e.access_token&&e.expires_at!=null&&e.expires_at*1e3<=Date.now()&&vt.expiredAccessTokenUsed(e.type,t)}function sEe(e,t,n,r,s,a,o,c){hn.uploadFile(e,mc(t),t,c??Je.Retrieval,n,r,s,{gizmoId:o},a)}function aEe(e,t,n,r,s,a,o,c,l){let u=t.title;n===G.GDRIVE&&(u=t.syntheticExtension?`${t.title}.${t.syntheticExtension}`:t.title);const d=t.mimeType.split(";")[0],f=d.startsWith("image/");if(s?.includes(d)===!1||f&&!r.includes(d)){l.danger(c.formatMessage(oEe.unsupportedFileType,{fileName:u}),Od);return}hn.uploadFile(e,t.id,new File([],u,{type:d}),Je.Retrieval,r,c,l,{gizmoId:o},a,{contextConnector:n,sourceUrl:t.url,syntheticExtension:t.syntheticExtension,type:vn.Picker,o365DriveId:t.o365DriveId})}const oEe=z({unsupportedFileType:{id:"ContextConnectorUtils.unsupportedFileType",defaultMessage:"{fileName} is not a supported file type"}}),Dn={uploadFile:sEe,uploadPickedFile:aEe,doContextConnectorOauthRedirect:nEe,logAttemptIfAccessTokenIsExpired:rEe};function j$e({composerController:e,parsedDocumentHandler:t}){const{gdriveLinkStatus:n,o365BusinessLinkStatus:r,o365PersonalLinkStatus:s}=Dm();return n==="false"&&r==="false"&&s==="false"?null:i.jsx(iEe,{composerController:e,parsedDocumentHandler:t})}function iEe({composerController:e,parsedDocumentHandler:t}){const{connectorConfig:n}=S5();return p.useEffect(()=>{const r=e instanceof QMe?"input":"change",s=()=>{const a=cEe(e,n);t(a)};return s(),e.subscribe(r,s)},[e,n,t]),null}function cEe(e,t){const n=e.getCurrentText(),r=[];for(const s of t.values())switch(s.type){case G.GDRIVE:{const a=fEe(n,s);r.push(...a),s.access_token&&a.reduce((c,l)=>c.replace(l.url,""),n)!==n&&a.forEach(({url:c})=>e.replaceAll(c,""));break}case G.O365:break;case G.O365_BUSINESS:{const a=CEe(n,s).filter(o=>o!=null);s.access_token&&a.forEach(({url:o})=>e.replaceAll(o,"")),r.push(...a);break}case G.O365_PERSONAL:{const a=gEe(n,s).filter(o=>o!=null);s.access_token&&a.forEach(({url:o})=>e.replaceAll(o,"")),r.push(...a);break}case G.CONFLUENCE:{const a=yEe(n,s).filter(o=>o!=null);s.access_token&&a.forEach(({url:o})=>e.replaceAll(o,"")),r.push(...a);break}case G.JIRA:{const a=wEe(n,s).filter(o=>o!=null);s.access_token&&a.forEach(({url:o})=>e.replaceAll(o,"")),r.push(...a);break}}return r.length&&vt.linkPasted(HMe(q0(r,s=>s.type),s=>s.length)),r}const lEe=/\bhttps:\/\/docs\.google\.com\/(document|spreadsheets|presentation)\/d\/([\w-]+)\/?(?:(?:edit|view)\/?)?(?:\?[\w\-.~%=]*)?(?:#[\w\-.~%=]*)?/gm,uEe=/\bhttps:\/\/drive\.google\.com\/(file)\/d\/([\w-]+)\/?(?:(?:edit|view)\/?)?(?:\?[\w\-.~%=]*)?(?:#[\w\-.~%=]*)?/gm,dEe="https://www.googleapis.com/auth/drive.readonly";function fEe(e,t){return[...e.matchAll(lEe),...e.matchAll(uEe)].map(n=>{const r={url:n[0],id:n[2],type:G.GDRIVE};return t.access_token&&t.scopes&&t.scopes.includes(dEe)?{...r,handler:{type:"fetch",tryFetch:async()=>{Dn.logAttemptIfAccessTokenIsExpired(t,vn.Link);const a=`https://www.googleapis.com/drive/v3/files/${r.id}?fields=name,mimeType`,o=await fetch(a,{method:"GET",headers:{Authorization:`Bearer ${t.access_token}`,"Content-Type":"application/json"}});if(!o.ok)return Promise.reject(new Error(`HTTP ${o.status}`));const{name:c,mimeType:l}=await o.json(),u=pN(l);return{connector:G.GDRIVE,id:r.id,title:c,mimeType:l,url:r.url,syntheticExtension:u}}}}:{...r,handler:{type:"prompt",message:"not-connected"}}})}function M5(e){let t;try{t=new URL(e).toString()}catch{return null}return`u!${btoa(t).replaceAll("=","").replaceAll("/","_").replaceAll("+","-")}`}const mEe=/\bhttps:\/\/onedrive\.live\.com\/[\w\-_.~!*'();:@&=+$,\\/?%#[\]]*/gm,pEe=/\bhttps:\/\/photos\.onedrive\.com\/(?:share|photo)\/[\w\-_.~!*'();:@&=+$,\\/?%#[\]]*/gm,hEe=/\bhttps:\/\/1drv\.ms\/[\w\-_.~!*'();:@&=+$,\\/?%#[\]]*/gm;function gEe(e,t){return[...e.matchAll(mEe),...e.matchAll(hEe),...e.matchAll(pEe)].map(n=>{const r=M5(n[0]);if(!r)return null;const s={url:n[0],id:r,type:G.O365_PERSONAL};return t.access_token?{...s,handler:{type:"fetch",tryFetch:E5(Qr.OneDrive_PERSONAL_SHARES,r,t.access_token,t)}}:{...s,handler:{type:"prompt",message:"not-connected"}}})}const vEe=/\bhttps:\/\/([^\s]+?\.atlassian\.net)\/wiki\/spaces\/[^\s]+\/pages\/(\d+)\/([^\s]+)?/gm;function yEe(e,t){return[...e.matchAll(vEe)].map(n=>{const r=n[1],s=n[2],a=n[3];if(!s)return null;const o={url:n[0],id:s,type:G.CONFLUENCE};return t.access_token?{...o,handler:{type:"fetch",tryFetch:async()=>{let c=a;return!a&&t.access_token&&(c=await MEe(t.access_token,`https://${r}`,t,s)),{connector:t.type,id:s,title:c,mimeType:"text/html",url:o.url,syntheticExtension:null,manifest:{id:s,domain:r,type:JL.PAGE,manifest_type:G.CONFLUENCE}}}}}:{...o,handler:{type:"prompt",message:"not-connected"}}})}const xEe=/\bhttps:\/\/([^\s]+?\.atlassian\.net)\/browse\/([^\s]+)\??/gm,bEe=/\bhttps:\/\/([^\s]+?\.atlassian\.net)\/jira\/(?:[^\s]+\/)*projects\/(?:[^\s]+\/)+(?:[^\s]+\/?)\?selectedIssue=([^\s]+)&?/gm;function wEe(e,t){return[...e.matchAll(xEe),...e.matchAll(bEe)].map(n=>{const r=n[1],s=n[2];if(!s||!r)return null;const a={url:n[0],id:s,type:G.JIRA};return t.access_token?{...a,handler:{type:"fetch",tryFetch:async()=>{const o=await EEe(t.access_token,`https://${r}`,t,s);return Promise.resolve({connector:t.type,id:s,title:o,mimeType:"text/markdown",url:a.url,syntheticExtension:null,manifest:{id_or_key:s,domain:r,manifest_type:G.JIRA}})}}}:{...a,handler:{type:"prompt",message:"not-connected"}}})}const SEe=/\bhttps:\/\/[^\s]+?\.sharepoint\.com\/[^\s]*/gm;function CEe(e,t){return[...e.matchAll(SEe)].map(n=>{const r=M5(n[0]),s=Qr.OneDrive_BUSINESS_SHARES;if(!r)return null;const a={url:n[0],id:r,type:G.O365_BUSINESS};return t.access_token?{...a,handler:{type:"fetch",tryFetch:E5(s,r,t.access_token,t)}}:{...a,handler:{type:"prompt",message:"not-connected"}}})}function E5(e,t,n,r,s){switch(e){case Qr.OneDrive_BUSINESS_SHARES:case Qr.OneDrive_PERSONAL_SHARES:return()=>jh(`${e}/${encodeURIComponent(t)}/driveItem`,n,r);case Qr.OneDrive_BUSINESS_DRIVE_ITEMS:return()=>jh(`${e}/${encodeURIComponent(t)}`,n,r);case Qr.OneDrive_BUSINESS_DRIVE_ROOT:return async()=>{const a=await TEe(n,t);if(!a)return Promise.reject(null);const o=`${e}:${encodeURIComponent(a)}`;return jh(o,n,r)};case Qr.OneDrive_PERSONAL_DRIVE_ITEMS:return()=>Promise.reject(null)}}async function TEe(e,t){const r=await fetch("https://graph.microsoft.com/v1.0/me/drive/root",{method:"GET",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!r.ok)return null;const{webUrl:s}=await r.json(),o=new URL(s).pathname;return t.startsWith(o)?t.substring(o.length):t}async function jh(e,t,n,r){Dn.logAttemptIfAccessTokenIsExpired(n,vn.Link);const s=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!s.ok)return Promise.reject(new Error(`HTTP ${s.status}`));const{id:a,name:o,file:c,webUrl:l,...u}=await s.json();return r||(r=u.parentReference?.driveId),{connector:n.type,id:a,title:o??"",mimeType:c?.mimeType??"",url:l??"",syntheticExtension:null,o365DriveId:r}}const kEe="https://api.atlassian.com/oauth/token/accessible-resources";async function _5(e,t,n){Dn.logAttemptIfAccessTokenIsExpired(n,vn.Link);const s=(await ae.get(kEe,{additionalHeaders:{Authorization:`Bearer ${e}`}})).find(a=>a.url===t)?.id;return s||Promise.reject(new Error("Cloud ID not found"))}async function MEe(e,t,n,r){const s=await _5(e,t,n);return(await ae.get(`https://api.atlassian.com/ex/confluence/${s}/wiki/api/v2/pages/${r}?include-version=false`,{additionalHeaders:{Authorization:`Bearer ${e}`}})).title??"Confluence Page"}async function EEe(e,t,n,r){const s=await _5(e,t,n);return(await ae.get(`https://api.atlassian.com/ex/jira/${s}/rest/api/2/issue/${r}?fields=summary`,{additionalHeaders:{Authorization:`Bearer ${e}`}})).fields.summary??"Jira Issue"}function A5({size:e="default",triggerIcon:t,triggerButton:n,children:r,side:s="bottom",className:a,sideOffset:o=10,alignOffset:c=0,open:l,onOpenChange:u,alignAgainstAnchor:d="center",disableAutofocus:f=!1,modal:m=!1}){const h=p.useRef(null);return i.jsxs(Ax,{open:l,onOpenChange:u,modal:m,children:[t?i.jsx(pd,{className:"rounded-lg p-2 hover:bg-token-main-surface-secondary",ref:h,children:i.jsx(t,{className:"icon-md"})}):i.jsx(pd,{asChild:!0,ref:h,children:n}),i.jsx(eN,{container:h.current?.ownerDocument.body,children:i.jsx(DE,{$as:Px,side:s,sideOffset:o,alignOffset:c,align:d,collisionPadding:10,onOpenAutoFocus:g=>{f&&g.preventDefault()},className:A({"min-w-[200px] max-w-xs":e==="default"},a),children:r})})]})}function Bk(e,t){return e.connector===t.connector&&e.type===t.type}const _Ee=()=>Ie((e,t)=>({_messages:[],_dismissedMessages:[],getFirstMessage:()=>t()._messages[0]??null,appendMessageIfNotDismissed:n=>{e(r=>r._messages.some(s=>Bk(s,n))||r._dismissedMessages.some(s=>Bk(s,n))?r:{...r,_messages:[...r._messages,n]})},dismissMessage:n=>{e(r=>r._messages.includes(n)?{...r,_messages:r._messages.filter(s=>s!==n),_dismissedMessages:[...r._dismissedMessages,n]}:r)},clearMessages:()=>{e(n=>n._messages.length||n._dismissedMessages.length?{...n,_messages:[],_dismissedMessages:[]}:n)},openMenu:!1,requestOpenMenu:()=>e(n=>({...n,openMenu:!0})),confirmMenuOpened:()=>e(n=>({...n,openMenu:!1}))})),AEe=_Ee(),PEe=p.createContext(AEe);function hc(){const e=p.useContext(PEe);return Cc(e)}function I$e({onOauthRedirect:e,children:t}){const{connectorConfig:n,isLoading:r}=S5(),s=hc(),{value:a}=ot("1242184140"),{getFirstMessage:o}=s,c=o(),l=c?n.get(c.connector):null,u=r||!l,d=a?jEe:IEe,f=p.useMemo(()=>{if(u||!c)return null;switch(c.type){case"not-connected":return i.jsx(d,{unconnectedMessage:c,onOauthRedirect:e,entry:l})}},[d,u,l,c,e]),{dismissMessage:m}=hc(),h=p.useCallback(g=>{!g&&c&&!u&&m(c)},[u,m,c]);return i.jsx(A5,{size:"none",open:!u,onOpenChange:h,side:"top",sideOffset:4,triggerButton:t,children:f})}function jEe({unconnectedMessage:e,onOauthRedirect:t,entry:n}){const{dismissMessage:r}=hc(),s=L(),a=bl(e.connector,s),o=NEe(e.connector),c=()=>{vt.oauthUpsellButtonClick(n.type,"link"),Dn.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,t,vn.Link)},l=()=>{vt.oauthUpsellButtonClick(n.type,"not-now"),r(e)};return i.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-2 sm:w-[384px]",children:[i.jsxs("div",{className:"mb-5 flex flex-row gap-2",children:[i.jsx(REe,{icon:o}),i.jsx("span",{className:"text-sm font-bold",children:i.jsx(S,{...as.connectTo,values:{connectorName:a}})})]}),i.jsx("span",{className:"mb-5 text-sm text-token-text-secondary",children:i.jsx(S,{...as.description,values:{connectorName:a}})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ee,{color:"primary",onClick:c,children:i.jsx(S,{...as.connect})}),i.jsx(ee,{color:"secondary",onClick:l,children:i.jsx(S,{...as.notNow})})]})]})}function IEe({unconnectedMessage:e,onOauthRedirect:t,entry:n}){const{dismissMessage:r}=hc(),s=L(),a=bl(e.connector,s),{icon1:o,icon2:c,icon3:l,icon4:u}=OEe(e.connector);return i.jsxs("div",{className:"flex w-[294px] max-w-full flex-col p-4 sm:w-[384px]",children:[i.jsxs("div",{className:"mb-3 flex flex-row gap-2 self-center",children:[i.jsx(fu,{icon:o,rotation:-6}),i.jsx(fu,{icon:c,rotation:6}),i.jsx(fu,{icon:l,rotation:-6}),i.jsx(fu,{icon:u,rotation:6})]}),i.jsx("span",{className:"mb-3 text-lg font-semibold",children:i.jsx(S,{...as.connectTo,values:{connectorName:a}})}),i.jsx("span",{className:"mb-4 text-sm text-token-text-secondary",children:i.jsx(S,{...as.description,values:{connectorName:a}})}),i.jsxs("div",{className:"flex flex-row-reverse gap-3 self-end",children:[i.jsx(ee,{color:"primary",onClick:()=>{vt.oauthUpsellButtonClick(n.type,"link"),Dn.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,n,t,vn.Link)},children:i.jsx(S,{...as.connect})}),i.jsx(ee,{color:"secondary",onClick:()=>{vt.oauthUpsellButtonClick(n.type,"not-now"),r(e)},children:i.jsx(S,{...as.notNow})})]})]})}function NEe(e){switch(e){case G.GDRIVE:return i.jsx(jo,{width:20,height:20});case G.O365:case G.O365_BUSINESS:case G.O365_PERSONAL:return i.jsx(k0,{width:20,height:20});case G.CONFLUENCE:return i.jsx(T0,{width:20,height:20});case G.JIRA:return i.jsx(C0,{width:20,height:20})}Lb(e)}function OEe(e){switch(e){case G.GDRIVE:return{icon1:i.jsx(jo,{}),icon2:i.jsx(_0,{}),icon3:i.jsx(M0,{}),icon4:i.jsx(E0,{})};case G.O365:case G.O365_BUSINESS:case G.O365_PERSONAL:return{icon1:i.jsx(k0,{}),icon2:i.jsx(a_,{}),icon3:i.jsx(r_,{}),icon4:i.jsx(s_,{})};case G.CONFLUENCE:case G.JIRA:return{icon1:i.jsx(t6,{}),icon2:i.jsx(n6,{}),icon3:i.jsx(Ac,{}),icon4:i.jsx(r6,{})}}Lb(e)}const REe=({icon:e})=>i.jsx("div",{className:A("flex h-[20px] w-[20px]"),children:i.jsx("div",{className:"object-contain",children:e})});function fu({rotation:e,icon:t}){return i.jsx("div",{className:A("flex h-[44px] w-[44px] items-center justify-center rounded-xl border border-[#EDEDF2] bg-white shadow-[0_1px_12px_0px_#0000000B]"),style:{transform:`rotate(${e}deg)`},children:i.jsx("div",{className:"object-contain",children:t})})}const as=z({connectTo:{id:"ContextConnectorPastedLinkPopover.connectTo",defaultMessage:"Connect to {connectorName}"},description:{id:"ContextConnectorPastedLinkPopover.description",defaultMessage:"Connect ChatGPT to {connectorName} to reference the content from this link."},notNow:{id:"ContextConnectorPastedLinkPopover.notNow",defaultMessage:"Not now"},connect:{id:"ContextConnectorPastedLinkPopover.connect",defaultMessage:"Connect"},addFromGdriveDescription:{id:"ContextConnectorPastedLinkPopover.addFromDriveDescription",defaultMessage:"To add files from Google Drive, upload them directly to your message."},addFromGdriveNotNow:{id:"ContextConnectorPastedLinkPopover.addFromDriveNotNow",defaultMessage:"Not now"},addFromGdriveUploadFile:{id:"ContextConnectorPastedLinkPopover.addFromDriveUploadFile",defaultMessage:"Upload file"}}),DEe=z({continueGenerating:{id:"PromptTextarea.continueGenerating",defaultMessage:"Continue generating"},stopGenerating:{id:"PromptTextarea.stopGenerating",defaultMessage:"Stop generating"},disallowedByWorkspacePlaceholder:{id:"PromptTextarea.disallowedByWorkspaceReason",defaultMessage:"Your workspace owner hasnt approved this GPT."},disabledFeedbackPlaceholder:{id:"PromptTextarea.disabledFeedbackPlaceholder",defaultMessage:"Select a response to continue"},noModelsAvailablePlaceholder:{id:"PromptTextarea.noModelsAvailablePlaceholder",defaultMessage:"No models available"},requiresPluginsToBeInstalled:{id:"PromptTextarea.requiresPluginsToBeInstalled",defaultMessage:"Requires plugins to be installed"},noTestGizmoId:{id:"PromptTextarea.noTestGizmoId",defaultMessage:"Start by defining your GPT."},searchWith:{id:"PromptTextarea.searchWith",defaultMessage:"Search with {name}"},loading:{id:"PromptTextarea.loading",defaultMessage:"Loading..."},placeholder:{id:"PromptTextarea.placeholder",defaultMessage:"Send a message"},placeholderWithName:{id:"PromptTextarea.placeholderWithName",defaultMessage:"Message {name}"},continueSharedConversationPlaceholder:{id:"PromptTextarea.continueSharedConversationPlaceholder",defaultMessage:"Send a message to continue the conversation."},sendMessageTooltip:{id:"PromptTextarea.sendMessageTooltip",defaultMessage:"Send message"},unsupportedFileType:{id:"PromptTextarea.unsupportedFileType",defaultMessage:'Uploads with file type "{file_type}" are not supported, please try another file.'},gizmoKnowledgeWarning:{id:"PromptTextarea.gizmoKnowledgeWarning",defaultMessage:"Files uploaded here may be included in conversations with your GPT. Files can be downloaded if Code Interpreter is enabled."}}),N$e=({filePickerStore:e,event:t,intl:n,toaster:r,conversationMode:s,clientThreadId:a,currentModelConfig:o,getEditorGizmoId:c,modelSupportedImageMimeTypes:l})=>{const u=yd(o,s),d=l.length>0;E.logEvent(P.pastedToComposer,{client_thread_id:a});const{clipboardData:f}=t,m=ll(o,s),h=m?.attachments?.accepted_mime_types,g=m?.attachments?.can_accept_all_mime_types;if(d&&f&&f.files.length>0){const v=f.files[0];if(h!==void 0&&!h.includes(v.type)&&g!==!0){r.danger(n.formatMessage(DEe.unsupportedFileType,{file_type:xb(v)})),t.preventDefault();return}if($e.hideThreadHeader(),E.logEvent(P.uploadFile,{client:"web",eventSource:"paste"}),c!=null){c().then(y=>hn.uploadFile(e,mc(v),v,u,l,n,r,{gizmoId:y}));return}hn.uploadFile(e,mc(v),v,u,l,n,r,void 0,m?.attachments)}};function LEe(e){return e.metadata?.dalle?.prompt??""}async function $Ee(e,t,n="image/png"){return new Promise((r,s)=>{e.toBlob(a=>{a!=null?r(new File([a],t,{type:n})):s(new Error("Failed to convert canvas to blob"))},n)})}async function FEe(e,t){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");if(r==null)throw new Error("Failed to get 2d context for mask canvas");const s=r.createImageData(e.width,e.height);for(let a=0;a<e.data.length;a+=4)e.data[a+3]!==0?(s.data[a]=0,s.data[a+1]=0,s.data[a+2]=0,s.data[a+3]=255):(s.data[a]=255,s.data[a+1]=255,s.data[a+2]=255,s.data[a+3]=255);return r.putImageData(s,0,0),$Ee(n,t)}async function BEe(e,t){const r=await(await fetch(e)).blob(),s=document.createElement("a");s.href=URL.createObjectURL(r),s.download=t,s.click(),s.remove()}function UEe(e){const t=$xe(new Date,"yyyy-MM-dd HH.mm.ss");let n=e.slice(0,150);return n.endsWith(".")&&(n=n.slice(0,-1)),`DALLE ${t} - ${n}.webp`}async function O$e(e,t,n){const r=LEe(e),s=UEe(r);await BEe(e.url,s),q.logEvent("chatgpt_dalle_image_download",null,{sourceOperation:e.metadata?.dalle?.edit_op??"none",hasParent:e.metadata?.dalle?.parent_gen_id!=null?"true":"false"}),E.logEvent(P.dalleImageDownload,{conversationId:t,messageId:n,generationId:e.metadata?.dalle?.gen_id,parentGenerationId:e.metadata?.dalle?.parent_gen_id,fileId:cl(e.asset_pointer),sourceOperation:e.metadata?.dalle?.edit_op})}function R$e(e){const t=hl(e),n=Ko(),r=t&&"gizmo"in t?t.gizmo:void 0;return!n&&r?.gizmo.id===m7}function D$e(e,t){const n=t.metadata?.dalle?.gen_id,r=cl(t.asset_pointer);return r==null||n==null?e:{...e,messageMetadata:{...e.messageMetadata,dalle:{from_client:{operation:{type:"transformation",original_gen_id:n,original_file_id:r}}}}}}async function VEe(e,t,n,r){return new Promise((s,a)=>{yb(mc(e),e,t,n,{kind:Bt.DalleAgent},{onFileCreated:we,onFileUploadProgress:we,onFileUploaded:(o,c)=>s(c),onError:(o,c)=>{a(new Error(`Failed to upload file with reason: ${c}`))}},r)})}async function L$e(e,t,n,r,s){const a=t.metadata?.dalle?.gen_id,o=cl(t.asset_pointer);if(o==null||a==null||n==null)return e;try{const c=await FEe(n,"mask.png"),l=await VEe(c,r,s,{imageDimensions:{width:t.width,height:t.height}});return{...e,messageMetadata:{...e.messageMetadata,dalle:{from_client:{operation:{type:"inpainting",original_gen_id:a,original_file_id:o,mask_file_id:l}}}}}}catch(c){return ie.addError(c),e}}const P5=je.HasSeenAdvancedVoiceOnMobile,GEe="https://chatgpt.com/update-app",Uk="https://chatgpt.com/update-app?origin=qr";function WEe(){const e=Ce(),t=ot("989108178").value;return e!=null&&t}function $$e(e){const t=WEe(),{eligible:n,isLoading:r}=Be(P5);return{eligible:!(!t||!n||e.conversationMode?.kind!==Me.PrimaryAssistant)&&!r}}const HEe=3;function zEe(e){let t=Mt.getItem(He.AdvancedVoiceOnMobileAnnouncementCount);Array.isArray(t)||(t=[]);const n=new Set(t);return e&&n.add(e),t=[...n],Mt.setItem(He.AdvancedVoiceOnMobileAnnouncementCount,t),t.length}function F$e({onClose:e,clientThreadId:t}){const{markAsViewed:n}=Be(P5),r=g0(t);p.useEffect(()=>{const c=zEe(r);c>HEe&&(n(),q.logEvent("chatgpt_advanced_voice_on_mobile_announcement_limit_reached",c)),E.logEvent(P.advancedVoiceOnMobileAnnouncementShown),q.logEvent("chatgpt_advanced_voice_on_mobile_announcement_shown")},[r,n]);const s=p.useCallback(()=>{n(),E.logEvent(P.advancedVoiceOnMobileAnnouncementDismissed),q.logEvent("chatgpt_advanced_voice_on_mobile_announcement_dismissed"),e&&e()},[n,e]),o={markAsDownloaded:p.useCallback(()=>{E.logEvent(P.advancedVoiceOnMobileLinkClicked),q.logEvent("chatgpt_advanced_voice_on_mobile_announcement_download_clicked"),n(),e&&e()},[n,e]),markAsViewed:s};return i.jsx(YEe,{...o})}function qEe(){window.open(GEe,"_blank")}function YEe({markAsDownloaded:e,markAsViewed:t}){const n=L(),[r,s]=p.useState(!1),a=p.useCallback(()=>{qEe(),e()},[e]),o=i.jsx("div",{className:"flex-grow flex-row",children:i.jsxs("div",{className:"flex-column",children:[i.jsx("div",{className:"mb-0.5 font-semibold",children:i.jsx(S,{...Ua.advancedVoiceOnMobileBannerTitle})}),i.jsx("span",{className:"text-token-text-secondary",children:i.jsx(S,{...Ua.advancedVoiceOnMobileBannerDescription})})]})}),c=!YG(),l=$o();let u;return c?l?u=Object.freeze({primaryCtaQrLink:Uk,onPrimaryCtaQrClick:()=>s(!0)}):u=Object.freeze({onSecondaryCtaClick:()=>s(!0),secondaryCtaText:n.formatMessage(Ua.advancedVoiceOnMobileButtonScanCode)}):u=Object.freeze({onPrimaryCtaClick:a,primaryCtaText:n.formatMessage(Ua.advancedVoiceOnMobileButtonDownload)}),i.jsxs(i.Fragment,{children:[i.jsx(Xo,{...u,onDismiss:t,content:o}),c&&i.jsx(Te,{size:"custom",className:"w-[328px] max-w-[328px]",title:n.formatMessage(Ua.advancedVoiceOnMobileQRModalTitle),isOpen:r,showCloseButton:!0,onClose:()=>s(!1),type:"success",children:i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx(MN,{className:"m-[24px] mt-[0px]",size:280,value:Uk}),i.jsx("div",{className:"text-left text-token-text-primary",children:i.jsx(S,{...Ua.advancedVoiceOnMobileQRModalDescription})})]})})]})}const Ua=z({advancedVoiceOnMobileBannerTitle:{id:"AdvancedVoiceOnMobile.banner.title",defaultMessage:"Download the latest iOS or Android app to try advanced voice mode"},advancedVoiceOnMobileBannerDescription:{id:"AdvancedVoiceOnMobile.banner.description",defaultMessage:"Get more natural, real-time conversations with advanced voice. Senses and responds to humor, sarcasm, interruptions, and more."},advancedVoiceOnMobileButtonDownload:{id:"AdvancedVoiceOnMobile.button.download",defaultMessage:"Download"},advancedVoiceOnMobileButtonScanCode:{id:"AdvancedVoiceOnMobile.button.scancode",defaultMessage:"Scan code"},advancedVoiceOnMobileButtonClose:{id:"AdvancedVoiceOnMobile.button.close",defaultMessage:"Close"},advancedVoiceOnMobileQRModalTitle:{id:"AdvancedVoiceOnMobile.qrmodal.title",defaultMessage:"Download the app"},advancedVoiceOnMobileQRModalDescription:{id:"AdvancedVoiceOnMobile.qrmodal.description",defaultMessage:"Scan the QR code on your phone to download the ChatGPT app."}}),Ld=window.localStorage,Vk=Ie(ys(()=>{const e=Ld?.getItem(He.NoAuthBannerDisclaimerClientThreadId)??null,t=Ld?.getItem(He.NoAuthHasAcceptedFooterDisclaimer)==="true";return{bannerDisclaimerClientThreadId:e,hasAcceptedFooterDisclaimer:t}})),j5={updateBannerDisclaimerClientThreadId(e){Vk.setState(t=>{t.bannerDisclaimerClientThreadId=e}),Ld?.setItem(He.NoAuthBannerDisclaimerClientThreadId,e)},updateHasAcceptedFooterDisclaimer(){Vk.setState(e=>{e.hasAcceptedFooterDisclaimer=!0}),Ld?.setItem(He.NoAuthHasAcceptedFooterDisclaimer,"true")}},B$e=()=>{const{shouldShowSkipButton:e=!1}=Ibe(),t=ub(({isParagenVisible:n})=>n);return!!e&&t};var KEe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Sl(e,t){var n=XEe(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function XEe(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),s=KEe.get(r);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}var QEe=[".DS_Store","Thumbs.db"];function ZEe(e){return _o(this,void 0,void 0,function(){return Ao(this,function(t){return $d(e)&&JEe(e.dataTransfer)?[2,r_e(e.dataTransfer,e.type)]:e_e(e)?[2,t_e(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,n_e(e)]:[2,[]]})})}function JEe(e){return $d(e)}function e_e(e){return $d(e)&&$d(e.target)}function $d(e){return typeof e=="object"&&e!==null}function t_e(e){return Ov(e.target.files).map(function(t){return Sl(t)})}function n_e(e){return _o(this,void 0,void 0,function(){var t;return Ao(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return Sl(r)})]}})})}function r_e(e,t){return _o(this,void 0,void 0,function(){var n,r;return Ao(this,function(s){switch(s.label){case 0:return e.items?(n=Ov(e.items).filter(function(a){return a.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(s_e))]):[3,2];case 1:return r=s.sent(),[2,Gk(I5(r))];case 2:return[2,Gk(Ov(e.files).map(function(a){return Sl(a)}))]}})})}function Gk(e){return e.filter(function(t){return QEe.indexOf(t.name)===-1})}function Ov(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function s_e(e){if(typeof e.webkitGetAsEntry!="function")return Wk(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?N5(t):Wk(e)}function I5(e){return e.reduce(function(t,n){return lw(lw([],uw(t),!1),uw(Array.isArray(n)?I5(n):[n]),!1)},[])}function Wk(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=Sl(t);return Promise.resolve(n)}function a_e(e){return _o(this,void 0,void 0,function(){return Ao(this,function(t){return[2,e.isDirectory?N5(e):o_e(e)]})})}function N5(e){var t=e.createReader();return new Promise(function(n,r){var s=[];function a(){var o=this;t.readEntries(function(c){return _o(o,void 0,void 0,function(){var l,u,d;return Ao(this,function(f){switch(f.label){case 0:if(c.length)return[3,5];f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return l=f.sent(),n(l),[3,4];case 3:return u=f.sent(),r(u),[3,4];case 4:return[3,6];case 5:d=Promise.all(c.map(a_e)),s.push(d),a(),f.label=6;case 6:return[2]}})})},function(c){r(c)})}a()})}function o_e(e){return _o(this,void 0,void 0,function(){return Ao(this,function(t){return[2,new Promise(function(n,r){e.file(function(s){var a=Sl(s,e.fullPath);n(a)},function(s){r(s)})})]})})}var i_e=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",s=(e.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return n.some(function(o){var c=o.trim().toLowerCase();return c.charAt(0)==="."?r.toLowerCase().endsWith(c):c.endsWith("/*")?a===c.replace(/\/.*$/,""):s===c})}return!0};function Hk(e){return u_e(e)||l_e(e)||R5(e)||c_e()}function c_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u_e(e){if(Array.isArray(e))return Rv(e)}function zk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function qk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zk(Object(n),!0).forEach(function(r){O5(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function O5(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gc(e,t){return m_e(e)||f_e(e,t)||R5(e,t)||d_e()}function d_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R5(e,t){if(e){if(typeof e=="string")return Rv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rv(e,t)}}function Rv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,o,c;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));s=!0);}catch(l){a=!0,c=l}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw c}}return r}}function m_e(e){if(Array.isArray(e))return e}var D5="file-invalid-type",L5="file-too-large",$5="file-too-small",F5="too-many-files",Yk={FileInvalidType:D5,FileTooLarge:L5,FileTooSmall:$5,TooManyFiles:F5},p_e=function(t){t=Array.isArray(t)&&t.length===1?t[0]:t;var n=Array.isArray(t)?"one of ".concat(t.join(", ")):t;return{code:D5,message:"File type must be ".concat(n)}},Kk=function(t){return{code:L5,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},Xk=function(t){return{code:$5,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},h_e={code:F5,message:"Too many files"};function B5(e,t){var n=e.type==="application/x-moz-file"||i_e(e,t);return[n,n?null:p_e(t)]}function U5(e,t,n){if(Gs(e.size))if(Gs(t)&&Gs(n)){if(e.size>n)return[!1,Kk(n)];if(e.size<t)return[!1,Xk(t)]}else{if(Gs(t)&&e.size<t)return[!1,Xk(t)];if(Gs(n)&&e.size>n)return[!1,Kk(n)]}return[!0,null]}function Gs(e){return e!=null}function g_e(e){var t=e.files,n=e.accept,r=e.minSize,s=e.maxSize,a=e.multiple,o=e.maxFiles,c=e.validator;return!a&&t.length>1||a&&o>=1&&t.length>o?!1:t.every(function(l){var u=B5(l,n),d=gc(u,1),f=d[0],m=U5(l,r,s),h=gc(m,1),g=h[0],v=c?c(l):null;return f&&g&&!v})}function Fd(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function mu(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Qk(e){e.preventDefault()}function v_e(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function y_e(e){return e.indexOf("Edge/")!==-1}function x_e(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return v_e(e)||y_e(e)}function Zn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=arguments[o];return t.some(function(c){return!Fd(r)&&c&&c.apply(void 0,[r].concat(a)),Fd(r)})}}function b_e(){return"showOpenFilePicker"in window}function w_e(e){if(Gs(e)){var t=Object.entries(e).filter(function(n){var r=gc(n,2),s=r[0],a=r[1],o=!0;return V5(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(a)||!a.every(G5))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,r){var s=gc(r,2),a=s[0],o=s[1];return qk(qk({},n),{},O5({},a,o))},{});return[{description:"Files",accept:t}]}return e}function S_e(e){if(Gs(e))return Object.entries(e).reduce(function(t,n){var r=gc(n,2),s=r[0],a=r[1];return[].concat(Hk(t),[s],Hk(a))},[]).filter(function(t){return V5(t)||G5(t)}).join(",")}function C_e(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function T_e(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function V5(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function G5(e){return/^.*\.[\w]+$/.test(e)}var k_e=["children"],M_e=["open"],E_e=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],__e=["refKey","onChange","onClick"];function A_e(e){return I_e(e)||j_e(e)||W5(e)||P_e()}function P_e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j_e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function I_e(e){if(Array.isArray(e))return Dv(e)}function Ih(e,t){return R_e(e)||O_e(e,t)||W5(e,t)||N_e()}function N_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function W5(e,t){if(e){if(typeof e=="string")return Dv(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dv(e,t)}}function Dv(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,o,c;try{for(n=n.call(e);!(s=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));s=!0);}catch(l){a=!0,c=l}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw c}}return r}}function R_e(e){if(Array.isArray(e))return e}function Zk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zk(Object(n),!0).forEach(function(r){Lv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zk(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bd(e,t){if(e==null)return{};var n=D_e(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function D_e(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var Bb=p.forwardRef(function(e,t){var n=e.children,r=Bd(e,k_e),s=z5(r),a=s.open,o=Bd(s,M_e);return p.useImperativeHandle(t,function(){return{open:a}},[a]),J.createElement(p.Fragment,null,n(rt(rt({},o),{},{open:a})))});Bb.displayName="Dropzone";var H5={disabled:!1,getFilesFromEvent:ZEe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};Bb.defaultProps=H5;Bb.propTypes={children:Fe.func,accept:Fe.objectOf(Fe.arrayOf(Fe.string)),multiple:Fe.bool,preventDropOnDocument:Fe.bool,noClick:Fe.bool,noKeyboard:Fe.bool,noDrag:Fe.bool,noDragEventsBubbling:Fe.bool,minSize:Fe.number,maxSize:Fe.number,maxFiles:Fe.number,disabled:Fe.bool,getFilesFromEvent:Fe.func,onFileDialogCancel:Fe.func,onFileDialogOpen:Fe.func,useFsAccessApi:Fe.bool,autoFocus:Fe.bool,onDragEnter:Fe.func,onDragLeave:Fe.func,onDragOver:Fe.func,onDrop:Fe.func,onDropAccepted:Fe.func,onDropRejected:Fe.func,onError:Fe.func,validator:Fe.func};var $v={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function z5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=rt(rt({},H5),e),n=t.accept,r=t.disabled,s=t.getFilesFromEvent,a=t.maxSize,o=t.minSize,c=t.multiple,l=t.maxFiles,u=t.onDragEnter,d=t.onDragLeave,f=t.onDragOver,m=t.onDrop,h=t.onDropAccepted,g=t.onDropRejected,v=t.onFileDialogCancel,y=t.onFileDialogOpen,b=t.useFsAccessApi,x=t.autoFocus,w=t.preventDropOnDocument,C=t.noClick,T=t.noKeyboard,M=t.noDrag,_=t.noDragEventsBubbling,k=t.onError,I=t.validator,j=p.useMemo(function(){return S_e(n)},[n]),F=p.useMemo(function(){return w_e(n)},[n]),U=p.useMemo(function(){return typeof y=="function"?y:Jk},[y]),B=p.useMemo(function(){return typeof v=="function"?v:Jk},[v]),N=p.useRef(null),$=p.useRef(null),H=p.useReducer(L_e,$v),Y=Ih(H,2),O=Y[0],R=Y[1],V=O.isFocused,X=O.isFileDialogActive,re=p.useRef(typeof window<"u"&&window.isSecureContext&&b&&b_e()),te=function(){!re.current&&X&&setTimeout(function(){if($.current){var ce=$.current.files;ce.length||(R({type:"closeDialog"}),B())}},300)};p.useEffect(function(){return window.addEventListener("focus",te,!1),function(){window.removeEventListener("focus",te,!1)}},[$,X,B,re]);var ue=p.useRef([]),he=function(ce){N.current&&N.current.contains(ce.target)||(ce.preventDefault(),ue.current=[])};p.useEffect(function(){return w&&(document.addEventListener("dragover",Qk,!1),document.addEventListener("drop",he,!1)),function(){w&&(document.removeEventListener("dragover",Qk),document.removeEventListener("drop",he))}},[N,w]),p.useEffect(function(){return!r&&x&&N.current&&N.current.focus(),function(){}},[N,x,r]);var Se=p.useCallback(function(Q){k?k(Q):console.error(Q)},[k]),se=p.useCallback(function(Q){Q.preventDefault(),Q.persist(),Ml(Q),ue.current=[].concat(A_e(ue.current),[Q.target]),mu(Q)&&Promise.resolve(s(Q)).then(function(ce){if(!(Fd(Q)&&!_)){var dt=ce.length,_t=dt>0&&g_e({files:ce,accept:j,minSize:o,maxSize:a,multiple:c,maxFiles:l,validator:I}),fn=dt>0&&!_t;R({isDragAccept:_t,isDragReject:fn,isDragActive:!0,type:"setDraggedFiles"}),u&&u(Q)}}).catch(function(ce){return Se(ce)})},[s,u,Se,_,j,o,a,c,l,I]),W=p.useCallback(function(Q){Q.preventDefault(),Q.persist(),Ml(Q);var ce=mu(Q);if(ce&&Q.dataTransfer)try{Q.dataTransfer.dropEffect="copy"}catch{}return ce&&f&&f(Q),!1},[f,_]),be=p.useCallback(function(Q){Q.preventDefault(),Q.persist(),Ml(Q);var ce=ue.current.filter(function(_t){return N.current&&N.current.contains(_t)}),dt=ce.indexOf(Q.target);dt!==-1&&ce.splice(dt,1),ue.current=ce,!(ce.length>0)&&(R({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),mu(Q)&&d&&d(Q))},[N,d,_]),De=p.useCallback(function(Q,ce){var dt=[],_t=[];Q.forEach(function(fn){var ri=B5(fn,j),Ea=Ih(ri,2),Fm=Ea[0],Bm=Ea[1],Um=U5(fn,o,a),El=Ih(Um,2),Vm=El[0],Gm=El[1],Wm=I?I(fn):null;if(Fm&&Vm&&!Wm)dt.push(fn);else{var Hm=[Bm,Gm];Wm&&(Hm=Hm.concat(Wm)),_t.push({file:fn,errors:Hm.filter(function(e3){return e3})})}}),(!c&&dt.length>1||c&&l>=1&&dt.length>l)&&(dt.forEach(function(fn){_t.push({file:fn,errors:[h_e]})}),dt.splice(0)),R({acceptedFiles:dt,fileRejections:_t,type:"setFiles"}),m&&m(dt,_t,ce),_t.length>0&&g&&g(_t,ce),dt.length>0&&h&&h(dt,ce)},[R,c,j,o,a,l,m,h,g,I]),Ve=p.useCallback(function(Q){Q.preventDefault(),Q.persist(),Ml(Q),ue.current=[],mu(Q)&&Promise.resolve(s(Q)).then(function(ce){Fd(Q)&&!_||De(ce,Q)}).catch(function(ce){return Se(ce)}),R({type:"reset"})},[s,De,Se,_]),Z=p.useCallback(function(){if(re.current){R({type:"openDialog"}),U();var Q={multiple:c,types:F};window.showOpenFilePicker(Q).then(function(ce){return s(ce)}).then(function(ce){De(ce,null),R({type:"closeDialog"})}).catch(function(ce){C_e(ce)?(B(ce),R({type:"closeDialog"})):T_e(ce)?(re.current=!1,$.current?($.current.value=null,$.current.click()):Se(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Se(ce)});return}$.current&&(R({type:"openDialog"}),U(),$.current.value=null,$.current.click())},[R,U,B,b,De,Se,F,c]),gt=p.useCallback(function(Q){!N.current||!N.current.isEqualNode(Q.target)||(Q.key===" "||Q.key==="Enter"||Q.keyCode===32||Q.keyCode===13)&&(Q.preventDefault(),Z())},[N,Z]),dn=p.useCallback(function(){R({type:"focus"})},[]),Cl=p.useCallback(function(){R({type:"blur"})},[]),Tl=p.useCallback(function(){C||(x_e()?setTimeout(Z,0):Z())},[C,Z]),zn=function(ce){return r?null:ce},$m=function(ce){return T?null:zn(ce)},kl=function(ce){return M?null:zn(ce)},Ml=function(ce){_&&ce.stopPropagation()},QD=p.useMemo(function(){return function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=Q.refKey,dt=ce===void 0?"ref":ce,_t=Q.role,fn=Q.onKeyDown,ri=Q.onFocus,Ea=Q.onBlur,Fm=Q.onClick,Bm=Q.onDragEnter,Um=Q.onDragOver,El=Q.onDragLeave,Vm=Q.onDrop,Gm=Bd(Q,E_e);return rt(rt(Lv({onKeyDown:$m(Zn(fn,gt)),onFocus:$m(Zn(ri,dn)),onBlur:$m(Zn(Ea,Cl)),onClick:zn(Zn(Fm,Tl)),onDragEnter:kl(Zn(Bm,se)),onDragOver:kl(Zn(Um,W)),onDragLeave:kl(Zn(El,be)),onDrop:kl(Zn(Vm,Ve)),role:typeof _t=="string"&&_t!==""?_t:"presentation"},dt,N),!r&&!T?{tabIndex:0}:{}),Gm)}},[N,gt,dn,Cl,Tl,se,W,be,Ve,T,M,r]),ZD=p.useCallback(function(Q){Q.stopPropagation()},[]),JD=p.useMemo(function(){return function(){var Q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ce=Q.refKey,dt=ce===void 0?"ref":ce,_t=Q.onChange,fn=Q.onClick,ri=Bd(Q,__e),Ea=Lv({accept:j,multiple:c,type:"file",style:{display:"none"},onChange:zn(Zn(_t,Ve)),onClick:zn(Zn(fn,ZD)),tabIndex:-1},dt,$);return rt(rt({},Ea),ri)}},[$,n,c,Ve,r]);return rt(rt({},O),{},{isFocused:V&&!r,getRootProps:QD,getInputProps:JD,rootRef:N,inputRef:$,open:zn(Z)})}function L_e(e,t){switch(t.type){case"focus":return rt(rt({},e),{},{isFocused:!0});case"blur":return rt(rt({},e),{},{isFocused:!1});case"openDialog":return rt(rt({},$v),{},{isFileDialogActive:!0});case"closeDialog":return rt(rt({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return rt(rt({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return rt(rt({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return rt({},$v);default:return e}}function Jk(){}const $_e={MessageAction:"z-10",ScrollToBottom:"z-10",PromptTextareaHeader:"z-20",TagGpt:"z-20"},F_e=({className:e})=>i.jsxs(pr,{width:"132",height:"108",viewBox:"0 0 132 108",fill:"none",className:e,children:[i.jsx("g",{clipPath:"url(#clip0_3605_64419)",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.2025 29.3514C10.778 33.2165 8.51524 37.1357 11.8281 49.4995L13.4846 55.6814C16.7975 68.0453 20.7166 70.308 35.1411 66.443L43.3837 64.2344C57.8082 60.3694 60.0709 56.4502 56.758 44.0864L55.1016 37.9044C51.7887 25.5406 47.8695 23.2778 33.445 27.1428L29.3237 28.2471L25.2025 29.3514ZM18.1944 42.7244C18.8572 41.5764 20.325 41.1831 21.4729 41.8459L27.3517 45.24C28.4996 45.9027 28.8929 47.3706 28.2301 48.5185L24.836 54.3972C24.1733 55.5451 22.7054 55.9384 21.5575 55.2757C20.4096 54.613 20.0163 53.1451 20.6791 51.9972L22.8732 48.1969L19.0729 46.0028C17.925 45.3401 17.5317 43.8723 18.1944 42.7244ZM29.4091 56.3843C29.066 55.104 29.8258 53.7879 31.1062 53.4449L40.3791 50.9602C41.6594 50.6172 42.9754 51.377 43.3184 52.6573C43.6615 53.9376 42.9017 55.2536 41.6214 55.5967L32.3485 58.0813C31.0682 58.4244 29.7522 57.6646 29.4091 56.3843Z",fill:"#AFC1FF"})}),i.jsx("g",{clipPath:"url(#clip1_3605_64419)",children:i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M86.8124 13.4036C81.0973 11.8722 78.5673 13.2649 77.0144 19.0603L68.7322 49.97C67.1793 55.7656 68.5935 58.2151 74.4696 59.7895L97.4908 65.958C103.367 67.5326 105.816 66.1184 107.406 60.1848L115.393 30.379C115.536 29.8456 115.217 29.2959 114.681 29.16C113.478 28.8544 112.435 28.6195 111.542 28.4183C106.243 27.2253 106.22 27.2201 109.449 20.7159C109.73 20.1507 109.426 19.4638 108.816 19.3004L86.8124 13.4036ZM87.2582 28.4311C86.234 28.1567 85.1812 28.7645 84.9067 29.7888C84.6323 30.813 85.2401 31.8658 86.2644 32.1403L101.101 36.1158C102.125 36.3902 103.178 35.7824 103.453 34.7581C103.727 33.7339 103.119 32.681 102.095 32.4066L87.2582 28.4311ZM82.9189 37.2074C83.1934 36.1831 84.2462 35.5753 85.2704 35.8497L100.107 39.8252C101.131 40.0996 101.739 41.1524 101.465 42.1767C101.19 43.201 100.137 43.8088 99.1132 43.5343L84.2766 39.5589C83.2523 39.2844 82.6445 38.2316 82.9189 37.2074ZM83.2826 43.2683C82.2584 42.9939 81.2056 43.6017 80.9311 44.626C80.6567 45.6502 81.2645 46.703 82.2888 46.9775L89.7071 48.9652C90.7313 49.2396 91.7841 48.6318 92.0586 47.6076C92.333 46.5833 91.7252 45.5305 90.7009 45.256L83.2826 43.2683Z",fill:"#7989FF"})}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.4004 71.8426C40.4004 57.2141 44.0575 53.5569 61.1242 53.5569H66.0004H70.8766C87.9432 53.5569 91.6004 57.2141 91.6004 71.8426V79.1569C91.6004 93.7855 87.9432 97.4426 70.8766 97.4426H61.1242C44.0575 97.4426 40.4004 93.7855 40.4004 79.1569V71.8426ZM78.8002 67.4995C78.8002 70.1504 76.6512 72.2995 74.0002 72.2995C71.3492 72.2995 69.2002 70.1504 69.2002 67.4995C69.2002 64.8485 71.3492 62.6995 74.0002 62.6995C76.6512 62.6995 78.8002 64.8485 78.8002 67.4995ZM60.7204 70.8597C60.2672 70.2553 59.5559 69.8997 58.8004 69.8997C58.045 69.8997 57.3337 70.2553 56.8804 70.8597L47.2804 83.6597C46.4851 84.72 46.7 86.2244 47.7604 87.0197C48.8208 87.8149 50.3251 87.6 51.1204 86.5397L58.8004 76.2997L66.4804 86.5397C66.8979 87.0962 67.5363 87.4443 68.2303 87.4936C68.9243 87.5429 69.6055 87.2887 70.0975 86.7967L74.8004 82.0938L79.5034 86.7967C80.4406 87.734 81.9602 87.734 82.8975 86.7967C83.8347 85.8595 83.8347 84.3399 82.8975 83.4026L76.4975 77.0026C75.5602 76.0653 74.0406 76.0653 73.1034 77.0026L68.6601 81.4459L60.7204 70.8597Z",fill:"#3C46FF"}),i.jsxs("defs",{children:[i.jsx("clipPath",{id:"clip0_3605_64419",children:i.jsx("rect",{width:"56",height:"56",fill:"white",transform:"translate(0 26.9939) rotate(-15)"})}),i.jsx("clipPath",{id:"clip1_3605_64419",children:i.jsx("rect",{width:"64",height:"64",fill:"white",transform:"translate(69.5645 0.5) rotate(15)"})})]})]}),B_e=({className:e})=>i.jsxs(pr,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:e,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#10A37F"}),i.jsx("path",{d:"M15.5 10.5H12.1667C11.2462 10.5 10.5 11.2462 10.5 12.1667V13.5V18M15.5 10.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V18M15.5 10.5V25.5M15.5 25.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V18M15.5 25.5H12.1667C11.2462 25.5 10.5 24.7538 10.5 23.8333V18M10.5 18H25.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),U_e=({className:e})=>i.jsxs(pr,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:e,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF5588"}),i.jsx("path",{d:"M19.6663 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V14.6666L19.6663 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M19.667 9.66663V14.6666H24.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M21.3337 18.8334H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M21.3337 22.1666H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M16.3337 15.5H15.5003H14.667",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),V_e=({className:e})=>i.jsxs(pr,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:e,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#F8CA27"}),i.jsx("path",{d:"M10.5 14V13.5V12.1667C10.5 11.2462 11.2462 10.5 12.1667 10.5H15.5H23.8333C24.7538 10.5 25.5 11.2462 25.5 12.1667V13.5V14M10.5 14V23.8333C10.5 24.7538 11.2462 25.5 12.1667 25.5H15.5H18H23.8333C24.7538 25.5 25.5 24.7538 25.5 23.8333V14M10.5 14H25.5M14 21.5L16.5 19L19 20.5L22 17.5",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),G_e=({className:e})=>i.jsxs(pr,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:e,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#B161FD"}),i.jsx("path",{d:"M26.3337 23.8333C26.3337 24.2754 26.1581 24.6993 25.8455 25.0118C25.5329 25.3244 25.109 25.5 24.667 25.5H11.3337C10.8916 25.5 10.4677 25.3244 10.1551 25.0118C9.84259 24.6993 9.66699 24.2754 9.66699 23.8333V12.1667C9.66699 11.7246 9.84259 11.3007 10.1551 10.9882C10.4677 10.6756 10.8916 10.5 11.3337 10.5H15.5003L17.167 13H24.667C25.109 13 25.5329 13.1756 25.8455 13.4882C26.1581 13.8007 26.3337 14.2246 26.3337 14.6667V23.8333Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),W_e=({className:e})=>i.jsxs(pr,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:e,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#0088FF"}),i.jsx("path",{d:"M18.833 9.66663H12.9997C12.5576 9.66663 12.1337 9.84222 11.8212 10.1548C11.5086 10.4673 11.333 10.8913 11.333 11.3333V24.6666C11.333 25.1087 11.5086 25.5326 11.8212 25.8451C12.1337 26.1577 12.5576 26.3333 12.9997 26.3333H22.9997C23.4417 26.3333 23.8656 26.1577 24.1782 25.8451C24.4907 25.5326 24.6663 25.1087 24.6663 24.6666V15.5L18.833 9.66663Z",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M18.833 9.66663V15.5H24.6663",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),H_e=({className:e})=>i.jsxs(pr,{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",className:e,children:[i.jsx("rect",{width:"36",height:"36",rx:"6",fill:"#FF6E3C"}),i.jsx("path",{d:"M21.333 23L26.333 18L21.333 13",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("path",{d:"M14.667 13L9.66699 18L14.667 23",stroke:"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]}),q5=({clientThreadId:e,rateLimitPopup:t,children:n,disabled:r,highlightTooltip:s=!1})=>{const a=L(),o=_c(e),c=Ce(),l=f=>{t!=null&&f&&E.logPopoverHover({type:"rate_limit",location:"file_upload",plan_type:c?.planType??"unknown"})},u=Ta(yt.signUpButtonText),d=!!t;return i.jsx(i.Fragment,{children:d?i.jsx("div",{className:"h-8",children:i.jsxs(LE,{delayDuration:150,onOpenChange:l,children:[i.jsx($E,{asChild:!0,children:n}),i.jsx(FE,{children:i.jsx(DE,{$as:BE,side:"left",sideOffset:0,align:"start",alignOffset:-12,className:"max-w-[320px]",children:i.jsx(z_e,{isNewConversation:o,rateLimitPopup:t,signUpButtonText:u})})})]})}):i.jsx(Ye,{sideOffset:0,label:r?a.formatMessage({id:"9Wgi7B",defaultMessage:"Attach files is unavailable"}):a.formatMessage({id:"qYwjac",defaultMessage:"Attach files"}),className:"flex",open:s?!0:void 0,side:"left",children:n})})},z_e=({isNewConversation:e=!1,rateLimitPopup:t,signUpButtonText:n})=>{const r=Ce(),s=ze(),a=Jt(),o=Jo(),c=ks();if(t==null)return null;const{call_to_action:l,description:u}=t,d=u||i.jsx(S,{...eM.defaultDescription}),f=l?.includes(rn.GET_PLUS),m=l?.includes(rn.AUTHENTICATE),h=m&&c;return i.jsxs("div",{className:"p-2 text-sm text-token-text-primary",children:[i.jsx("div",{className:"mb-3",children:d}),f?i.jsx(ee,{size:"small",color:"secondary",onClick:()=>{Rr(s,"Rate limited file upload popover"),E.logRateLimitGetPlusButtonClicked({type:"file_upload",location:"popover",plan_type:r?.planType??"unknown",is_hard_block:!1,is_new_conversation:e,hard_block_reason:""})},children:i.jsx(S,{...eM.getPlus})}):null,m?i.jsx(ee,{size:"small",color:"primary",onClick:()=>{a({authType:o?"login":"signup",callback:g=>{o?E.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:g}):E.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:g})}})},children:o?i.jsx(S,{...yt.logInButtonText}):i.jsx(S,{...n})}):null,h?i.jsx(ee,{size:"small",color:"secondary",className:"ml-2",onClick:()=>{a({authType:o?"signup":"login",callback:g=>{o?E.logSignUpButtonClicked({location:"File picker rate limit tooltip",provider:g}):E.logLogInButtonClicked({location:"File picker rate limit tooltip",provider:g})}})},children:o?i.jsx(S,{...n}):i.jsx(S,{...yt.logInButtonText})}):null]})},eM=z({defaultDescription:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."},getPlus:{id:"TeyLcp",defaultMessage:"Get Plus"}}),Y5=fe.button`flex items-center justify-center h-8 w-8 rounded-lg rounded-bl-xl text-token-text-primary dark:text-white ${({includeBorder:e=!0})=>e?"focus-visible:outline-black dark:focus-visible:outline-white ":""} ${({disabled:e})=>e?"opacity-30":"hover:bg-black/10"}`;function U$e({clientThreadId:e,getInputProps:t,openFileDialog:n,uploadType:r,icon:s,isDisabled:a=!1,highlightTooltip:o=!1}){const c=L(),l=v0();a=a||!!l;const u=i.jsx(Y5,{disabled:a,onClick:m=>{m.preventDefault(),E.logEvent(P.openFileViewer,{intent:r.toString()}),n()},"aria-label":a?c.formatMessage({id:"PromptFilePicker.attachFilesUnavailable",defaultMessage:"Attach files is unavailable"}):c.formatMessage({id:"PromptFilePicker.attachFiles",defaultMessage:"Attach files"}),children:s}),d=i.jsx("input",{disabled:a,...t({className:"hidden"})}),f=i.jsxs("div",{className:"flex",children:[u,d]});return i.jsx(q5,{disabled:a,clientThreadId:e,rateLimitPopup:l,highlightTooltip:o,children:f})}function q_e({code:e,message:t}){switch(e){case Yk.FileTooLarge:return tM.errorFileTooLarge;case Yk.TooManyFiles:return E.logEvent(P.uploadedMaxFilesError),tM.errorTooManyFiles;default:return t}}const tM=z({attachImages:{id:"PromptFilePicker.attachImages",defaultMessage:"Attach images"},attachFiles:{id:"PromptFilePicker.attachFiles",defaultMessage:"Attach files"},errorFileTooLarge:{id:"PromptFilePicker.errorFileTooLarge",defaultMessage:"Your file is too large. The maximum file size is {size}MB."},errorTooManyFiles:{id:"PromptFilePicker.errorTooManyFiles",defaultMessage:"You may only upload {maxNum} files at a time."},defaultFileUploadRateLimited:{id:"U5qAWP",defaultMessage:"You've reached your daily upload limit. Get ChatGPT Plus to unlock more."},getPlusButton:{id:"TeyLcp",defaultMessage:"Get Plus"}}),nM=z({dragInstructions:{id:"FileDropZone.dragInstructions",defaultMessage:"Add anything"},dragAllAccepted:{id:"FileDropZone.dragAllAccepted",defaultMessage:"Drop any file here to add it to the conversation"}});function Y_e(e){if(!e.accept||Object.keys(e.accept).length===0)return[];const t=[];return Object.values(e.accept).forEach(n=>t.push(...n)),t.sort()}function V$e(e){const{className:t,children:n,clientThreadId:r,currentModelConfig:s}=e,a=L(),o=Ne(),c=hl(r),l=yd(s,c),u=l!==Je.None,d=hR(C=>C.files),f=(l===Je.Multimodal?iR:Nd)-d.length,m=f<=0,{getGizmoId:h}=wl(),{handleFileAccepted:g}=X_e(a,yd(s,c),hN(s,c),"drag",h,ll(s,c)?.attachments),v=v0(),y=Que(Kue(s,c)),{getRootProps:b,isDragActive:x}=z5({maxFiles:f,disabled:!u||m||v!=null,noClick:!0,onDropAccepted:g,onDropRejected:C=>K_e(C,a,o,l),multiple:!0,maxSize:CSe,...y}),w=Y_e(y);return i.jsxs("div",{...b({className:t}),children:[n,x&&i.jsxs(Q_e,{children:[i.jsx(F_e,{}),i.jsx("h3",{children:i.jsx(S,{...nM.dragInstructions})}),i.jsx("h4",{className:"w-2/3 text-center",children:w.length>0?w.join(", "):i.jsx(S,{...nM.dragAllAccepted})})]})]})}function K_e(e,t,n,r){const{errors:s}=e[0];s.forEach(a=>{const o=q_e(a);typeof o=="string"?n.danger(o,{hasCloseButton:!0}):n.danger(t.formatMessage(o,{size:cR,maxNum:r===Je.Multimodal?iR:Nd}),{hasCloseButton:!0})})}function X_e(e,t,n,r,s,a){const o=Ne(),c=yl();return{handleFileAccepted:p.useCallback(async(u,d)=>{E.logEvent(P.uploadFile,{client:"web",eventSource:r,intent:t.toString()});const f=s!=null?await s():void 0;u.length>0&&u.forEach(m=>{hn.uploadFile(c,mc(m),m,t,n,e,o,{gizmoId:f},a)})},[r,t,s,c,n,e,o,a])}}const Q_e=fe.div`absolute inset-0 opacity-80 flex gap-2 flex-col justify-center items-center bg-token-main-surface-primary text-token-text-primary`;function Z_e({contextConnectorSourceUrl:e,...t}){const n=L(),[r,s]=p.useState({width:0,height:0}),a=r.width/r.height,o=r.width>0&&r.height>0,c=p.useMemo(()=>{if(e!==void 0){let l=new URL(e);return l.protocol!=="https:"&&(l=void 0),l?.toString()}},[e]);return p.useEffect(()=>{if(!t.src)throw new Error("ExpandableImage requires a src");const l=new Image;l.onload=()=>{s({width:l.naturalWidth,height:l.naturalHeight})},l.onerror=()=>{},l.src=t.src},[t.src]),i.jsxs(uf,{children:[i.jsx(s0,{className:t.className,disabled:!o,children:t.children}),i.jsx(df,{children:i.jsxs(of,{className:"fixed inset-0 flex items-center justify-center overflow-hidden bg-black/90 radix-state-open:animate-show dark:bg-black/80",children:[i.jsx(lf,{asChild:!0,children:i.jsx("button",{className:"absolute right-4 top-4",children:i.jsx(Po,{className:"h-5 w-5 text-gray-100"})})}),i.jsxs(cf,{className:"shadow-xl focus:outline-none radix-state-open:animate-contentShow",children:[i.jsx("div",{className:A("relative max-h-[85vh] max-w-[90vw]"),style:{aspectRatio:a},children:i.jsx("img",{src:t.src,alt:t.alt,className:"h-full w-full object-contain"})}),c&&i.jsx("div",{className:"absolute right-14 top-4",children:i.jsx(Ye,{label:n.formatMessage(J_e.openOriginal),children:i.jsx("a",{href:c,target:"_blank",rel:"noreferrer",children:i.jsx(s6,{className:"h-5 w-5 rotate-180 text-gray-100"})})})})]})]})})]})}const J_e=z({openOriginal:{id:"ExpandableImage.openOriginal",defaultMessage:"Open original image"}});function eAe({fileName:e,icon:t,loadingPercentage:n,contextConnectorInfo:r}){const s=L(),a=n!==void 0&&n<100,o=la(e),c=r?.syntheticExtension??null;function l(d){if(Bx(d))return s.formatMessage(Va.fileDescImage);switch(o){case"py":return"Python";case"js":case"jsx":return"JavaScript";case"ts":case"tsx":return"TypeScript";case"pdf":return"PDF";case"doc":case"docx":case"txt":return s.formatMessage(Va.fileDescDocument);case"zip":return s.formatMessage(Va.fileDescZip);case"xls":case"xlsx":case"csv":return s.formatMessage(Va.fileDescSpreadsheet);case"ppt":case"pptx":case"key":return s.formatMessage(Va.fileDescPresentation);default:return s.formatMessage(Va.fileDescFile)}}const u=r?.contextConnector?i.jsx(OMe,{contextConnector:r.contextConnector,extension:c??o??null}):l(e);return i.jsxs("div",{className:"flex flex-row items-center gap-2",children:[t!=null&&t!==!1?i.jsxs("div",{className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-md border border-token-border-heavy",children:[t,a&&i.jsx(rM,{percentage:n,blurBackground:!0})]}):i.jsx("div",{className:"relative h-10 w-10 shrink-0 overflow-hidden rounded-md",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:A("inset-0",K5,nAe(e,r?.contextConnector))}),i.jsx(rM,{percentage:r?null:n})]}):i.jsx(tAe,{filename:e,contextConnectorInfo:r})}),i.jsxs("div",{className:"overflow-hidden",children:[i.jsx("div",{className:"truncate font-semibold",children:xN(e,c)}),i.jsx("div",{className:"truncate text-token-text-tertiary",children:u})]})]})}function rM({percentage:e,blurBackground:t=!1}){return i.jsx("div",{className:A("absolute inset-0 flex items-center justify-center text-white",t&&"bg-black/5 backdrop-blur-sm"),children:e?i.jsx(tN,{percentage:e,className:"h-6 w-6"}):i.jsx(cn,{className:"h-6 w-6 text-token-text-secondary"})})}const K5="h-10 w-10 flex-shrink-0";function tAe({filename:e,contextConnectorInfo:t,className:n=K5}){if(t)return i.jsx(AMe,{contextConnector:t.contextConnector,extension:t.syntheticExtension??la(e)??null,className:n});switch(la(e)){case"py":case"js":case"jsx":case"ts":case"tsx":return i.jsx(H_e,{className:n});case"doc":case"docx":case"txt":case"pdf":return i.jsx(U_e,{className:n});case"zip":return i.jsx(G_e,{className:n});case"ppt":case"pptx":case"key":return i.jsx(V_e,{className:n});case"xls":case"xlsx":case"csv":return i.jsx(B_e,{className:n});default:return i.jsx(W_e,{className:n})}}function nAe(e,t){if(t)return"bg-gray-50 dark:bg-token-main-surface-secondary border rounded-md border-gray-100 dark:border-white/10";switch(la(e)){case"py":case"js":case"jsx":case"ts":case"tsx":return"bg-[#FF6E3C]";case"doc":case"docx":case"txt":case"pdf":return"bg-[#FF5588]";case"zip":return"bg-[#B161FD]";case"ppt":case"pptx":case"key":return"bg-[#F8CA27]";case"xls":case"xlsx":case"csv":return"bg-[#10A37F]";default:return"bg-[#0088FF]"}}const Va=z({fileDescDocument:{id:"FileDataView.fileDescDocument",defaultMessage:"Document"},fileDescZip:{id:"FileDataView.fileDescZip",defaultMessage:"Zip Archive"},fileDescSpreadsheet:{id:"FileDataView.fileDescSpreadsheet",defaultMessage:"Spreadsheet"},fileDescPresentation:{id:"FileDataView.fileDescPresentation",defaultMessage:"Presentation"},fileDescImage:{id:"FileDataView.fileDescImage",defaultMessage:"Image"},fileDescFile:{id:"FileDataView.fileDescFile",defaultMessage:"File"}});function ea(e){return typeof window>"u"?!1:typeof e!="string"}function rAe({downloadLink:e}){const t=p.useCallback(()=>{const n=document.createElement("a");n.href=e,n.setAttribute("download",e.split("/").pop()??"downloaded_file"),document.body.appendChild(n),n.click(),document.body.removeChild(n)},[e]);return i.jsx("button",{onClick:t,children:i.jsx(a6,{className:"icon-sm m-1.5"})})}function sAe({onRemoveFileClick:e,file:t,fileId:n,gizmoId:r,loadingPercentage:s,contextConnectorInfo:a,width:o="normal",alwaysShowData:c=!1,showDownloadButton:l=!1,downloadLink:u="",borderRadius:d="xl",useV2Style:f=!1}){const m=L(),h=s!==void 0&&s<100,g=ea(t)?t.name:t,v=ea(t)&&t?.type.startsWith("image/")||Bx(g)&&n!=null,y=v&&i.jsx(Q5,{file:t,fileId:n,gizmoId:r,contextConnectorInfo:a}),b=v?void 0:a?.sourceUrl,w=ea(t)&&t?.type==="text/plain"&&!c&&!a&&q.checkGate("1508312659"),C=oAe({file:t,isExpandableTextFile:w}),T=!e,M=i.jsxs("div",{className:A("p-2",o==="wide"?"w-80":"w-60"),children:[i.jsx(eAe,{fileName:g,icon:y,loadingPercentage:s,contextConnectorInfo:a}),l&&u!==""&&i.jsx("div",{className:"absolute right-1 top-1",children:i.jsx(rAe,{downloadLink:u})})]});return i.jsxs("div",{className:"group relative inline-block text-sm text-token-text-primary",children:[i.jsx(lAe,{showTooltip:T,sourceUrl:b,className:A("relative overflow-hidden border border-token-border-light bg-token-main-surface-primary",d==="xl"&&"rounded-xl",d==="2xl"&&"rounded-2xl"),children:v&&!c?i.jsxs("div",{className:"h-14 w-14",children:[y,h&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/5 text-white",children:i.jsx(tN,{percentage:s,className:"h-6 w-6"})})]}):w&&C?.length?i.jsx(iAe,{trigger:M,content:C}):M}),e!=null&&i.jsx("button",{onClick:e,className:A("absolute right-1 top-1 -translate-y-1/2 translate-x-1/2 rounded-full transition-colors",f?"border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white dark:border-token-main-surface-secondary dark:bg-white dark:text-black":"border border-token-border-heavy bg-token-main-surface-secondary p-0.5 text-token-text-primary hover:opacity-100 group-hover:opacity-100 md:opacity-0"),children:i.jsx(Ye,{label:m.formatMessage(J5.removeFile),side:"top",sideOffset:4,children:i.jsx(i_,{className:"icon-xs"})})})]})}const X5=fe.span`flex items-center h-full w-full justify-center bg-gray-500 dark:bg-gray-700 bg-cover bg-center text-white`;function aAe(){return i.jsx(X5,{})}function Q5({file:e,fileId:t,gizmoId:n,contextConnectorInfo:r}){const s=L(),a=ea(e)?e.name:e,o=Z5(ea(e)?e:null,a,t,n,r);return o==null?i.jsx(aAe,{}):i.jsx(Z_e,{src:o,alt:s.formatMessage(J5.userUploadedImage),contextConnectorSourceUrl:r?.sourceUrl,className:"h-full w-full",children:i.jsx(X5,{style:{backgroundImage:`url(${o})`}})})}function oAe({file:e,isExpandableTextFile:t}){const[n,r]=p.useState(void 0);return p.useEffect(()=>{if(t&&ea(e)){const s=new FileReader;s.addEventListener("load",()=>{const a=s.result;r(typeof a=="string"?a:void 0)}),s.readAsText(e)}},[t,e]),n}function iAe({trigger:e,content:t}){return i.jsxs(uf,{children:[i.jsx(s0,{className:"h-full w-full text-left",children:e}),i.jsx(df,{children:i.jsxs(of,{className:"fixed inset-0 flex items-center justify-center overflow-hidden bg-black/90 radix-state-open:animate-show dark:bg-black/80",children:[i.jsx(lf,{asChild:!0,children:i.jsx("button",{className:"absolute right-4 top-4",children:i.jsx(Po,{className:"h-5 w-5 text-gray-100"})})}),i.jsx(cf,{className:"shadow-xl focus:outline-none radix-state-open:animate-contentShow",children:i.jsx("div",{className:A("relative max-h-[85vh] max-w-[90vw] overflow-scroll bg-white p-10 dark:bg-gray-800"),children:i.jsx(fm,{children:t})})})]})})]})}const pu=new Map,cAe=100;function Z5(e,t,n,r,s){const[a,o]=p.useState(void 0);return p.useEffect(()=>{async function c(l){try{const u=pu.get(l);if(u){o(u);return}const d=await K.getFileDownloadLink(l,r);d.status===Sr.Success?(pu.size>cAe&&pu.clear(),pu.set(l,d.download_url),o(d.download_url)):ie.addError(`Error fetching URL for file ${l}: ${d.status}`)}catch(u){ie.addError(new Error(`Error fetching URL for file ${l})`,{cause:u}))}}if(s)n&&c(n);else if(e?.type.startsWith("image/")&&!s){const l=new FileReader;l.addEventListener("load",()=>{const u=l.result;o(typeof u=="string"?u:void 0)}),l.readAsDataURL(e)}else Bx(t)&&n!=null?c(n):o(void 0)},[e,t,n,r,s]),a}const J5=z({removeFile:{id:"FileTile.removeFile",defaultMessage:"Remove file"},userUploadedImage:{id:"FileTile.userUploadedImage",defaultMessage:"User uploaded image"}});function lAe({showTooltip:e,sourceUrl:t,children:n,className:r}){const s=JG();if(!t)return i.jsx("div",{className:r,children:n});const a=i.jsx("a",{href:t,target:"_blank",rel:"noreferrer",children:i.jsx("div",{className:r,children:n})});return!e||!s?a:i.jsx(Ye,{wide:!0,interactive:!0,sideOffset:0,label:i.jsxs("a",{href:t,target:"_blank",className:"flex w-full items-center gap-2",rel:"noreferrer",children:[i.jsx("p",{className:"line-clamp-1 flex-1 text-ellipsis",children:uAe(t)}),i.jsx(Xs,{className:"icon-sm"})]}),side:"top",children:a})}function uAe(e){return e.split("").join("")}const dAe=Object.freeze(Object.defineProperty({__proto__:null,ImageThumbnail:Q5,default:sAe,isFile:ea,useImageUri:Z5},Symbol.toStringTag,{value:"Module"})),G$e=e=>bf([Me.GizmoMagicCreate,Me.GizmoTest],e?.kind),fAe=e=>bf([Me.GizmoInteraction,Me.GizmoMagicCreate,Me.GizmoTest],e?.kind);function mAe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function Fv(e,t){return Array(t+1).join(e)}function pAe(e){return e.replace(/^\n*/,"")}function hAe(e){for(var t=e.length;t>0&&e[t-1]===`
`;)t--;return e.substring(0,t)}var gAe=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function Ub(e){return Vb(e,gAe)}var eD=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function tD(e){return Vb(e,eD)}function vAe(e){return rD(e,eD)}var nD=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function yAe(e){return Vb(e,nD)}function xAe(e){return rD(e,nD)}function Vb(e,t){return t.indexOf(e.nodeName)>=0}function rD(e,t){return e.getElementsByTagName&&t.some(function(n){return e.getElementsByTagName(n).length})}var Kt={};Kt.paragraph={filter:"p",replacement:function(e){return`

`+e+`

`}};Kt.lineBreak={filter:"br",replacement:function(e,t,n){return n.br+`
`}};Kt.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,n){var r=Number(t.nodeName.charAt(1));if(n.headingStyle==="setext"&&r<3){var s=Fv(r===1?"=":"-",e.length);return`

`+e+`
`+s+`

`}else return`

`+Fv("#",r)+" "+e+`

`}};Kt.blockquote={filter:"blockquote",replacement:function(e){return e=e.replace(/^\n+|\n+$/g,""),e=e.replace(/^/gm,"> "),`

`+e+`

`}};Kt.list={filter:["ul","ol"],replacement:function(e,t){var n=t.parentNode;return n.nodeName==="LI"&&n.lastElementChild===t?`
`+e:`

`+e+`

`}};Kt.listItem={filter:"li",replacement:function(e,t,n){e=e.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var r=n.bulletListMarker+"   ",s=t.parentNode;if(s.nodeName==="OL"){var a=s.getAttribute("start"),o=Array.prototype.indexOf.call(s.children,t);r=(a?Number(a)+o:o+1)+".  "}return r+e+(t.nextSibling&&!/\n$/.test(e)?`
`:"")}};Kt.indentedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="indented"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){return`

    `+t.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};Kt.fencedCodeBlock={filter:function(e,t){return t.codeBlockStyle==="fenced"&&e.nodeName==="PRE"&&e.firstChild&&e.firstChild.nodeName==="CODE"},replacement:function(e,t,n){for(var r=t.firstChild.getAttribute("class")||"",s=(r.match(/language-(\S+)/)||[null,""])[1],a=t.firstChild.textContent,o=n.fence.charAt(0),c=3,l=new RegExp("^"+o+"{3,}","gm"),u;u=l.exec(a);)u[0].length>=c&&(c=u[0].length+1);var d=Fv(o,c);return`

`+d+s+`
`+a.replace(/\n$/,"")+`
`+d+`

`}};Kt.horizontalRule={filter:"hr",replacement:function(e,t,n){return`

`+n.hr+`

`}};Kt.inlineLink={filter:function(e,t){return t.linkStyle==="inlined"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t){var n=t.getAttribute("href"),r=Ud(t.getAttribute("title"));return r&&(r=' "'+r+'"'),"["+e+"]("+n+r+")"}};Kt.referenceLink={filter:function(e,t){return t.linkStyle==="referenced"&&e.nodeName==="A"&&e.getAttribute("href")},replacement:function(e,t,n){var r=t.getAttribute("href"),s=Ud(t.getAttribute("title"));s&&(s=' "'+s+'"');var a,o;switch(n.linkReferenceStyle){case"collapsed":a="["+e+"][]",o="["+e+"]: "+r+s;break;case"shortcut":a="["+e+"]",o="["+e+"]: "+r+s;break;default:var c=this.references.length+1;a="["+e+"]["+c+"]",o="["+c+"]: "+r+s}return this.references.push(o),a},references:[],append:function(e){var t="";return this.references.length&&(t=`

`+this.references.join(`
`)+`

`,this.references=[]),t}};Kt.emphasis={filter:["em","i"],replacement:function(e,t,n){return e.trim()?n.emDelimiter+e+n.emDelimiter:""}};Kt.strong={filter:["strong","b"],replacement:function(e,t,n){return e.trim()?n.strongDelimiter+e+n.strongDelimiter:""}};Kt.code={filter:function(e){var t=e.previousSibling||e.nextSibling,n=e.parentNode.nodeName==="PRE"&&!t;return e.nodeName==="CODE"&&!n},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",n="`",r=e.match(/`+/gm)||[];r.indexOf(n)!==-1;)n=n+"`";return n+t+e+t+n}};Kt.image={filter:"img",replacement:function(e,t){var n=Ud(t.getAttribute("alt")),r=t.getAttribute("src")||"",s=Ud(t.getAttribute("title")),a=s?' "'+s+'"':"";return r?"!["+n+"]("+r+a+")":""}};function Ud(e){return e?e.replace(/(\n+\s*)+/g,`
`):""}function sD(e){this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[];for(var t in e.rules)this.array.push(e.rules[t])}sD.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){if(e.isBlank)return this.blankRule;var t;return(t=Nh(this.array,e,this.options))||(t=Nh(this._keep,e,this.options))||(t=Nh(this._remove,e,this.options))?t:this.defaultRule},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};function Nh(e,t,n){for(var r=0;r<e.length;r++){var s=e[r];if(bAe(s,t,n))return s}}function bAe(e,t,n){var r=e.filter;if(typeof r=="string"){if(r===t.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(t.nodeName.toLowerCase())>-1)return!0}else if(typeof r=="function"){if(r.call(e,t,n))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function wAe(e){var t=e.element,n=e.isBlock,r=e.isVoid,s=e.isPre||function(f){return f.nodeName==="PRE"};if(!(!t.firstChild||s(t))){for(var a=null,o=!1,c=null,l=sM(c,t,s);l!==t;){if(l.nodeType===3||l.nodeType===4){var u=l.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!o&&u[0]===" "&&(u=u.substr(1)),!u){l=Oh(l);continue}l.data=u,a=l}else if(l.nodeType===1)n(l)||l.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,o=!1):r(l)||s(l)?(a=null,o=!0):a&&(o=!1);else{l=Oh(l);continue}var d=sM(c,l,s);c=l,l=d}a&&(a.data=a.data.replace(/ $/,""),a.data||Oh(a))}}function Oh(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function sM(e,t,n){return e&&e.parentNode===t||n(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}var aD=typeof window<"u"?window:{};function SAe(){var e=aD.DOMParser,t=!1;try{new e().parseFromString("","text/html")&&(t=!0)}catch{}return t}function CAe(){var e=function(){};return TAe()?e.prototype.parseFromString=function(t){var n=new window.ActiveXObject("htmlfile");return n.designMode="on",n.open(),n.write(t),n.close(),n}:e.prototype.parseFromString=function(t){var n=document.implementation.createHTMLDocument("");return n.open(),n.write(t),n.close(),n},e}function TAe(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch{window.ActiveXObject&&(e=!0)}return e}var kAe=SAe()?aD.DOMParser:CAe();function MAe(e,t){var n;if(typeof e=="string"){var r=EAe().parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html");n=r.getElementById("turndown-root")}else n=e.cloneNode(!0);return wAe({element:n,isBlock:Ub,isVoid:tD,isPre:t.preformattedCode?_Ae:null}),n}var Rh;function EAe(){return Rh=Rh||new kAe,Rh}function _Ae(e){return e.nodeName==="PRE"||e.nodeName==="CODE"}function AAe(e,t){return e.isBlock=Ub(e),e.isCode=e.nodeName==="CODE"||e.parentNode.isCode,e.isBlank=PAe(e),e.flankingWhitespace=jAe(e,t),e}function PAe(e){return!tD(e)&&!yAe(e)&&/^\s*$/i.test(e.textContent)&&!vAe(e)&&!xAe(e)}function jAe(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var n=IAe(e.textContent);return n.leadingAscii&&aM("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&aM("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}function IAe(e){var t=e.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:t[1],leadingAscii:t[2],leadingNonAscii:t[3],trailing:t[4],trailingNonAscii:t[5],trailingAscii:t[6]}}function aM(e,t,n){var r,s,a;return e==="left"?(r=t.previousSibling,s=/ $/):(r=t.nextSibling,s=/^ /),r&&(r.nodeType===3?a=s.test(r.nodeValue):n.preformattedCode&&r.nodeName==="CODE"?a=!1:r.nodeType===1&&!Ub(r)&&(a=s.test(r.textContent))),a}var NAe=Array.prototype.reduce,OAe=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Vd(e){if(!(this instanceof Vd))return new Vd(e);var t={rules:Kt,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(n,r){return r.isBlock?`

`:""},keepReplacement:function(n,r){return r.isBlock?`

`+r.outerHTML+`

`:r.outerHTML},defaultReplacement:function(n,r){return r.isBlock?`

`+n+`

`:n}};this.options=mAe({},t,e),this.rules=new sD(this.options)}Vd.prototype={turndown:function(e){if(!LAe(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(e==="")return"";var t=oD.call(this,new MAe(e,this.options));return RAe.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else if(typeof e=="function")e(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return OAe.reduce(function(t,n){return t.replace(n[0],n[1])},e)}};function oD(e){var t=this;return NAe.call(e.childNodes,function(n,r){r=new AAe(r,t.options);var s="";return r.nodeType===3?s=r.isCode?r.nodeValue:t.escape(r.nodeValue):r.nodeType===1&&(s=DAe.call(t,r)),iD(n,s)},"")}function RAe(e){var t=this;return this.rules.forEach(function(n){typeof n.append=="function"&&(e=iD(e,n.append(t.options)))}),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function DAe(e){var t=this.rules.forNode(e),n=oD.call(this,e),r=e.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+t.replacement(n,e,this.options)+r.trailing}function iD(e,t){var n=hAe(e),r=pAe(t),s=Math.max(e.length-n.length,t.length-r.length),a=`

`.substring(0,s);return n+a+r}function LAe(e){return e!=null&&(typeof e=="string"||e.nodeType&&(e.nodeType===1||e.nodeType===9||e.nodeType===11))}var oM=/highlight-(?:text|source)-([a-z0-9]+)/;function $Ae(e){e.addRule("highlightedCodeBlock",{filter:function(t){var n=t.firstChild;return t.nodeName==="DIV"&&oM.test(t.className)&&n&&n.nodeName==="PRE"},replacement:function(t,n,r){var s=n.className||"",a=(s.match(oM)||[null,""])[1];return`

`+r.fence+a+`
`+n.firstChild.textContent+`
`+r.fence+`

`}})}function FAe(e){e.addRule("strikethrough",{filter:["del","s","strike"],replacement:function(t){return"~"+t+"~"}})}var BAe=Array.prototype.indexOf,UAe=Array.prototype.every,So={};So.tableCell={filter:["th","td"],replacement:function(e,t){return cD(e,t)}};So.tableRow={filter:"tr",replacement:function(e,t){var n="",r={left:":--",right:"--:",center:":-:"};if(Gb(t))for(var s=0;s<t.childNodes.length;s++){var a="---",o=(t.childNodes[s].getAttribute("align")||"").toLowerCase();o&&(a=r[o]||a),n+=cD(a,t.childNodes[s])}return`
`+e+(n?`
`+n:"")}};So.table={filter:function(e){return e.nodeName==="TABLE"&&Gb(e.rows[0])},replacement:function(e){return e=e.replace(`

`,`
`),`

`+e+`

`}};So.tableSection={filter:["thead","tbody","tfoot"],replacement:function(e){return e}};function Gb(e){var t=e.parentNode;return t.nodeName==="THEAD"||t.firstChild===e&&(t.nodeName==="TABLE"||VAe(t))&&UAe.call(e.childNodes,function(n){return n.nodeName==="TH"})}function VAe(e){var t=e.previousSibling;return e.nodeName==="TBODY"&&(!t||t.nodeName==="THEAD"&&/^\s*$/i.test(t.textContent))}function cD(e,t){var n=BAe.call(t.parentNode.childNodes,t),r=" ";return n===0&&(r="| "),r+e+" |"}function GAe(e){e.keep(function(n){return n.nodeName==="TABLE"&&!Gb(n.rows[0])});for(var t in So)e.addRule(t,So[t])}function WAe(e){e.addRule("taskListItems",{filter:function(t){return t.type==="checkbox"&&t.parentNode.nodeName==="LI"},replacement:function(t,n){return(n.checked?"[x]":"[ ]")+" "}})}function HAe(e){e.use([$Ae,FAe,GAe,WAe])}function iM(e){const t={...e};for(const n of Object.keys(t))t[n]=Math.round(t[n]);return t}function Gi(e,t){for(;e;){if(e instanceof HTMLElement&&e.dataset[t]!=null)return{node:e,dataValue:e.dataset[t]};e=e.parentNode}return{node:void 0,dataValue:void 0}}const Dh={clientRect:void 0,isCollapsed:void 0,textContent:void 0,documentFragment:void 0,selection:void 0},lD=new Vd;lD.use(HAe);function zAe(e){const n=e.getRangeAt(0).cloneContents(),r=document.createElement("div");return r.appendChild(n),lD.turndown(r.innerHTML)}function qAe(e){const[{clientRect:t,isCollapsed:n,textContent:r,documentFragment:s,selection:a},o]=p.useState(Dh);return PE(()=>{const c=()=>{setTimeout(()=>{let l;const u=window.getSelection(),d={};if(u==null||!u.rangeCount){o(Dh);return}const f=u.getRangeAt(0);if(f==null){o(Dh);return}const m=f.cloneContents();d.documentFragment=m,d.textContent=zAe(u);const h=f.getClientRects();if(h.length===0&&f.commonAncestorContainer!=null&&f.commonAncestorContainer instanceof HTMLElement){const g=f.commonAncestorContainer;l=iM(g.getBoundingClientRect().toJSON())}else{if(h.length<1)return;l=iM(h[0].toJSON())}d.clientRect=l,d.isCollapsed=f.collapsed,d.selection=u,o(d)},0)};return window.addEventListener("mouseup",c),()=>{window.removeEventListener("mouseup",c)}},[]),p.useEffect(()=>{const c=l=>{const u=window.getSelection(),d=u?.toString(),f=D.getServerThreadId(e),{dataValue:m}=Gi(u?.anchorNode,"messageAuthorRole"),{dataValue:h}=Gi(u?.anchorNode,"messageId");!d||!h||!f||!m||m!=="assistant"||K.submitImplicitMessageFeedback({source:"keyboard",type:"copy",messageId:h,serverThreadId:f,selectedText:d,location:"selection"})};return document.addEventListener("copy",c),()=>{document.removeEventListener("copy",c)}},[e]),{clientRect:t,isCollapsed:n,textContent:r,documentFragment:s,selection:a}}const YAe="agent-turn",W$e=[Me.PrimaryAssistant,Me.GizmoInteraction];function KAe(e){return o0.createPortal(e.children,e.mount??document.body)}function XAe({messageId:e,anchorNode:t,clientRect:n,onClick:r}){const s=L(),a=()=>{r(e)};if(!t)return null;const o=t.closest(`.${YAe}`);if(!o)return null;const c=t.getBoundingClientRect();return i.jsx(KAe,{mount:o,children:i.jsx("div",{className:"absolute",style:{top:t.offsetTop-36+n.top-c.top,left:n.left-c.left,width:n.width,height:n.height},children:i.jsx(Ye,{label:s.formatMessage(ZAe.replyTooltip),side:"top",children:i.jsx(ee,{size:"small",color:"secondary",className:"shadow-lg",onClick:a,children:i.jsx(o6,{className:"icon-md"})})})})})}const QAe=3;function H$e({clientThreadId:e,onTargetedReply:t}){const{clientRect:n,isCollapsed:r,textContent:s,selection:a}=qAe(e),{dataValue:o}=Gi(a?.anchorNode,"messageAuthorRole"),{node:c,dataValue:l}=Gi(a?.anchorNode,"messageId"),{dataValue:u}=Gi(a?.focusNode,"messageId"),d=!u||l===u,f=s?.trim(),m=f?.length??0,h=g=>{f!==void 0&&t({targetedReply:{type:"text",label:f,createNewCompletionParams:v=>{const y=e$(f);return{...v,messageMetadata:{...v.messageMetadata,targeted_reply:f},appendMessages:v.appendMessages==null?[y]:[...v.appendMessages,y]}},onCreateCompletion:({serverThreadId:v,currentLeafId:y})=>{E.logEvent(P.targetedReplySubmitted,{conversationId:v,currentLeafId:y})},onCleared:({serverThreadId:v,currentLeafId:y})=>{E.logEvent(P.targetedReplyCleared,{conversationId:v,currentLeafId:y})}},messageId:g})};return n==null||r||m<QAe||!d||o!=="assistant"?null:i.jsx(XAe,{messageId:l??"",anchorNode:c,clientRect:n,onClick:h})}const ZAe=z({replyTooltip:{id:"targetedReply.replyTooltip",defaultMessage:"Reply"}});function z$e({composerController:e,clientThreadId:t}){const n=L();if(e.isEmpty())return null;const r={clientThreadId:t};function s(){E.logEventWithStatsig(P.composerOpenInCanvasButtonClicked,"composer_system_hint_button_clicked",r),D_.pasteContent(e.getContentToSend().content),e.eraseContent(),e.focus()}const a=i.jsx("button",{className:"flex h-8 min-w-8 items-center justify-center rounded-lg p-1 text-xs font-semibold hover:bg-black/10 focus-visible:outline-black dark:focus-visible:outline-white","aria-label":n.formatMessage({id:"Fj5Lgk",defaultMessage:"Open in canvas"}),onPointerDown:s,onMouseDown:o=>{o.preventDefault()},onClick:o=>{o.preventDefault(),o.detail===0&&s()},children:i.jsx(i6,{})});return i.jsx(Ye,{side:"right",sideOffset:0,label:i.jsx(S,{id:"zV9Ppx",defaultMessage:"Open in canvas"}),onOpenChange:o=>{o&&E.logEventWithStatsig(P.composerOpenInCanvasButtonHovered,"composer_system_hint_button_hovered",r)},children:a})}function JAe({hasConnectors:e}){const{eligible:t,markAsViewed:n}=Be(je.ContextConnectors),{activeModals:r}=ve(),s=L();return i.jsx(Om,{announcementKey:je.ContextConnectors,side:"top",show:t&&e&&r.size===0,title:s.formatMessage(cM.connectApps),onDismiss:n,sideOffset:32,theme:"bright",description:s.formatMessage(cM.description),children:i.jsx("div",{})})}const cM=z({connectApps:{id:"ContextConnectorAnnouncementTooltipContent.connectApps",defaultMessage:"Connect Apps"},description:{id:"ContextConnectorAnnouncementTooltipContent.description",defaultMessage:"Connect apps to access files in ChatGPT, like docs and spreadsheets."}}),ePe=(e,t)=>`${e}:${t}`,uD=sf((e,t)=>({async getToken(n,r){const s=ePe(n,r),a=t()._tokens[s];if(a)try{const c=await a;if(Date.now()+30*60*1e3<c.expires_at*1e3)return c.access_token}catch{}const o=K.getConnectorAccessTokenWithScope(n,r);return e(c=>({...c,_tokens:{...c._tokens,[s]:o}})),o.then(c=>c.access_token)},_tokens:{}}));async function tPe(e,t,n,r){if(n.type==="business"){const u=new URL(n.baseUrl);t=await uD.getState().getToken(G.O365_BUSINESS,`${u.origin}/.default`)}const s=nPe(r,n.baseUrl),a=new URLSearchParams({filePicker:JSON.stringify(s)}),o=`${n.parsedUrl}?${a}`,c=e.document.createElement("form");c.setAttribute("action",o),c.setAttribute("method","POST");const l=e.document.createElement("input");l.setAttribute("type","hidden"),l.setAttribute("name","access_token"),l.setAttribute("value",t),c.appendChild(l),e.document.body.append(c),c.submit()}function nPe(e,t){return{sdk:"8.0",messaging:{channelId:e,origin:location.origin},authentication:{},entry:{sharePoint:{byPath:{list:t}}},typesAndSources:{mode:"files"},selection:{mode:"multiple"},search:{enabled:!0}}}function rPe(e,t,n,r,s,a){function o(c){if(c?.source!==t)return;const l=c.data;if(l.type==="initialize"&&l.channelId===n){vt.filePickerLoaded(a);const u=c.ports[0],f=aPe(e,async m=>{if(u.removeEventListener("message",f),u.close(),t.close(),m!=null){const h=await Promise.all(m.map(g=>sPe(g,e,s)));r({type:"pick",docs:h})}else r({type:"cancel"})},u,a);u.addEventListener("message",f),u.start(),u.postMessage({type:"activate"})}}window.addEventListener("message",o)}async function sPe(e,t,n){let r=`https://graph.microsoft.com/v1.0/drives/${encodeURIComponent(e.parentReference.driveId)}/items/${encodeURIComponent(e.id)}`;n.type==="personal"&&(r=`https://api.onedrive.com/v1.0/drives/${encodeURIComponent(e.parentReference.driveId)}/items/${encodeURIComponent(e.id)}`);const a=await(await fetch(r,{method:"GET",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).json();return{connector:n.type==="personal"?G.O365_PERSONAL:G.O365_BUSINESS,id:e.id,title:a.name??"",mimeType:a.file?.mimeType??"",url:a.webUrl??"",syntheticExtension:null,o365DriveId:e.parentReference.driveId}}function aPe(e,t,n,r){return async function(a){const o=a.data;if(o.type==="notification"||o.type!=="command")return;const c=o.data;switch(n.postMessage({type:"acknowledge",id:a.data.id}),c.command){case"authenticate":{r===G.O365_BUSINESS&&(e=await uD.getState().getToken(r,`${c.resource}/.default`)),n.postMessage({type:"result",id:a.data.id,data:{result:"token",token:e}});break}case"close":{t(null);break}case"pick":{try{t(c.items),n.postMessage({type:"result",id:a.data.id,data:{result:"success"}})}catch(l){n.postMessage({type:"result",id:a.data.id,data:{result:"error",error:{code:"unusableItem",message:l.message}}})}break}default:{n.postMessage({type:"result",id:a.data.id,data:{result:"error",error:{code:"unsupportedCommand",message:c.command}}});break}}}}const oPe=J.memo(function({type:t,onClose:n,uploadPickedFile:r}){const{connectorConfig:s}=Lm(),a=t?s.get(t):null;return!a?.onedrive_endpoint_hint||!a.access_token?null:i.jsx(iPe,{onClose:n,accessToken:a?.access_token,oneDriveURL:a?.onedrive_endpoint_hint,uploadPickedFile:r})});function iPe({onClose:e,accessToken:t,oneDriveURL:n,uploadPickedFile:r}){const{current:s}=p.useRef(new WeakMap),a=n.type==="personal"?G.O365_PERSONAL:G.O365_BUSINESS;return i.jsx(uf,{open:!0,onOpenChange:o=>{o||e()},children:i.jsx(df,{children:i.jsx(of,{className:"fixed inset-0 flex items-center justify-center bg-black/50 dark:bg-black/80",children:i.jsx(cf,{className:"flex h-full max-h-[600px] w-full max-w-[1300px] items-center justify-center",onPointerDownOutside:()=>{vt.filePickerCancelled(a)},children:i.jsx("iframe",{className:"mx-[32px] my-[32px] h-full w-full",src:"about:blank",ref:o=>{const c=o?.contentWindow;if(o==null||c==null||s.has(o))return;s.set(o,!0);const l=Dr();vt.filePickerStarted(a),tPe(c,t,n,l),rPe(t,c,l,u=>{switch(u.type){case"pick":vt.filePickerPicked(a,u.docs.length),u.docs.forEach(d=>r(d,a));break;case"cancel":vt.filePickerCancelled(a);break}e()},n,a)}})})})})})}let Lh=null;function dD(e){return Lh==null&&(Lh=cPe().then(()=>(gapi.client.setToken({access_token:e}),gapi.client.init({apiKey:T5,scope:"https://www.googleapis.com/auth/drive.file",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]})))),Lh}function cPe(){return new Promise((e,t)=>{const n=document.createElement("script");n.src="https://apis.google.com/js/api.js",n.onload=e,n.onerror=t,document.documentElement.appendChild(n)}).then(()=>Promise.all([new Promise(e=>gapi.load("client",e)),new Promise(e=>gapi.load("client:picker",e))]))}function lM({entry:e,onClick:t}){const{connectorConfig:n}=Lm();p.useEffect(()=>{if(!open||e.type!==G.GDRIVE)return;const c=n.get(G.GDRIVE)?.access_token;c&&dD(c)},[n,e.type]);const r=b5(e.type),s=L(),a=e.access_token?uM.uploadFromMessage:uM.signinWithMessage;return i.jsx(ne.Item,{onClick:t,icon:r,children:i.jsxs("div",{className:"flex flex-col",children:[i.jsx(S,{...a,values:{connectorName:bl(e.type,s)}}),e.type===G.O365_BUSINESS&&i.jsx("div",{className:"text-s text-token-text-tertiary",children:i.jsx(S,{...$b.includesSharePoint})})]})},e.id)}const uM=z({signinWithMessage:{id:"ContextConnectorPickerDropdownItem.signInWithMessage",defaultMessage:"Connect to {connectorName}"},uploadFromMessage:{id:"ContextConnectorPickerDropdownItem.uploadWithMessage",defaultMessage:"Add from {connectorName}"}});function lPe({clientThreadId:e,icon:t,setOpen:n,isDisabled:r=!1,highlightTooltip:s=!1}){const a=v0(),o=L();return r=r||!!a,i.jsxs(i.Fragment,{children:[i.jsx(ne.Trigger,{className:"m-0 h-0 w-0 border-none bg-transparent p-0"}),i.jsx(q5,{clientThreadId:e,rateLimitPopup:a,highlightTooltip:s,disabled:r,children:i.jsx(Y5,{disabled:r,"aria-disabled":r,"aria-label":r?o.formatMessage({id:"NTwThg",defaultMessage:"Attach files is unavailable"}):o.formatMessage({id:"tA7CXR",defaultMessage:"Attach files"}),onClick:c=>{c.preventDefault(),n(!0)},children:t})})]})}function uPe({connectorEntries:e,onOauthRedirect:t}){const n=L();return i.jsxs(ne.Sub,{children:[i.jsx(ne.SubMenuTrigger,{icon:c6,children:i.jsx("div",{className:"line-clamp-1 text-ellipsis",children:i.jsx(S,{...dPe.connectApps})})}),i.jsx(ne.Portal,{children:i.jsx(ne.SubContent,{children:e.map(r=>i.jsx(ne.Item,{onClick:()=>t(r),icon:b5(r.type),children:i.jsxs("div",{className:"flex flex-col",children:[bl(r.type,n),r.type===G.O365_BUSINESS&&i.jsx("div",{className:"text-s text-token-text-tertiary",children:i.jsx(S,{...$b.includesSharePoint})})]})},r.id))})})]})}const dPe=z({connectApps:{id:"ContextConnectorPicker.connectApps",defaultMessage:"Connect apps"}});function fPe({onOauthRedirect:e,connectors:t}){const n=L();return i.jsxs(ne.Sub,{children:[i.jsx(ne.SubMenuTrigger,{icon:o_,children:i.jsx(S,{...mPe.oneDriveSubmenuName})}),i.jsx(ne.Portal,{children:i.jsx(ne.SubContent,{children:t.map(r=>r?i.jsx(ne.Item,{onClick:()=>e(r),children:i.jsxs("div",{className:"flex flex-col",children:[bl(r.type,n),r.type===G.O365_BUSINESS&&i.jsx("div",{className:"text-s text-token-text-tertiary",children:i.jsx(S,{...$b.includesSharePoint})})]})},r.id):null)})})]})}const mPe=z({oneDriveSubmenuName:{id:"ContextConnectorPickerOneDriveSubmenu.oneDriveSubmenuName",defaultMessage:"Connect to Microsoft OneDrive"}}),pPe={"image/jpeg":".jpg","image/png":".png"};function hPe({entry:e}){return i.jsx(ne.Item,{onClick:e.onClick,icon:e.icon,children:i.jsx(S,{...e.label})},e.key)}function gPe(e){const t=L(),n=Ne(),r=yl();return p.useCallback(async a=>{const o=`${new Date().toISOString().replaceAll(":","-")}${pPe[a.mimeType]}`;Dn.uploadFile(r,new File([a.data],o,{type:a.mimeType}),e,t,n,void 0,void 0,Je.Multimodal)},[r,t,n,e])}function vPe(e){const t=gPe(e),n=yPe(t),r=xPe(t);return{desktopConnectors:p.useMemo(()=>Eo?[n,r].filter(a=>a!==void 0):[],[n,r])}}function yPe(e){const{value:t}=ot("4204519260");return p.useMemo(()=>{if(t)return{key:"takeScreenshot",label:fD.takeScreenshot,icon:l6,onClick:async()=>{const n=await t$();n&&(E.logEvent(P.sidetronScreenshotAttached),await e(n))}}},[t,e])}function xPe(e){const{value:t}=ot("239993468");return p.useMemo(()=>{if(t)return{key:"takePhoto",label:fD.takePhoto,icon:u6,onClick:async()=>{const n=await n$();n&&(E.logEvent(P.sidetronPhotoAttached),await e(n))}}},[t,e])}const fD=z({takeScreenshot:{id:"ContextConnectorPickerDropdownItem.takeScreenshotDesktop",defaultMessage:"Take screenshot"},takePhoto:{id:"ContextConnectorPickerDropdownItem.takePhotoDesktop",defaultMessage:"Take photo"}});async function bPe(e,t,n,r){await dD(n);async function s(d){switch(d.action){case google.picker.Action.PICKED:{vt.filePickerPicked(G.GDRIVE,d.docs.length);const f=d.docs.map(m=>({connector:t,id:m.id,title:m.name,mimeType:m.mimeType,url:m.url,syntheticExtension:m.type==="document"?pN(m.mimeType):null}));r(f);break}case google.picker.Action.CANCEL:vt.filePickerCancelled(G.GDRIVE);return;case"loaded":{vt.filePickerLoaded(G.GDRIVE);return}}}const a=new google.picker.DocsView(google.picker.ViewId.DOCS).setIncludeFolders(!0).setSelectFolderEnabled(!1).setMode(google.picker.DocsViewMode.LIST);let o="en";dM.includes(e)?o=e:dM.includes(e.split("-")[0])&&(o=e.split("-")[0]);const c=new google.picker.PickerBuilder().enableFeature(google.picker.Feature.MULTISELECT_ENABLED).enableFeature(google.picker.Feature.SUPPORT_DRIVES).setDeveloperKey(T5).setAppId(ZMe).setOAuthToken(n).addView(a).setCallback(s).setLocale(o).build();vt.filePickerStarted(G.GDRIVE),c.setVisible(!0);const l=wPe(),u=()=>{vt.filePickerCancelled(G.GDRIVE),c.setVisible(!1),l?.removeEventListener("click",u)};l?.addEventListener("click",u)}function wPe(){if(typeof window>"u")return null;const e=window.document.body.querySelector("div.picker-dialog-bg")??window.document.body.querySelector("div.oai-picker-dialog-bg");return e?.classList.add("oai-picker-dialog-bg","bg-black/50","dark:bg-black/80","absolute","inset-0","z-[1000]"),e?.classList.remove("picker-dialog-bg"),e}const dM=["af","am","ar","bg","bn","ca","cs","da","de","el","en","en-GB","es","es-419","et","eu","fa","fi","fil","fr","fr-CA","gl","gu","hi","hr","hu","id","is","it","iw","ja","kn","ko","lt","lv","ml","mr","ms","nl","no","pl","pt-BR","pt-PT","ro","ru","sk","sl","sr","sv","sw","ta","te","th","tr","uk","ur","vi","zh-CN","zh-HK","zh-TW","zu"];var SPe=Z_,CPe=SPe(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),TPe=CPe;const Gd=xe(TPe);var fM=mE,kPe=r$,MPe=Kd,mM=fM?fM.isConcatSpreadable:void 0;function EPe(e){return MPe(e)||kPe(e)||!!(mM&&e&&e[mM])}var _Pe=EPe,APe=s$,PPe=_Pe;function mD(e,t,n,r,s){var a=-1,o=e.length;for(n||(n=PPe),s||(s=[]);++a<o;){var c=e[a];t>0&&n(c)?t>1?mD(c,t-1,n,r,s):APe(s,c):r||(s[s.length]=c)}return s}var jPe=mD,IPe=Q_,NPe=Xv;function OPe(e,t){var n=-1,r=NPe(e)?Array(e.length):[];return IPe(e,function(s,a,o){r[++n]=t(s,a,o)}),r}var RPe=OPe;function DPe(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var LPe=DPe,pM=a$;function $Pe(e,t){if(e!==t){var n=e!==void 0,r=e===null,s=e===e,a=pM(e),o=t!==void 0,c=t===null,l=t===t,u=pM(t);if(!c&&!u&&!a&&e>t||a&&o&&l&&!c&&!u||r&&o&&l||!n&&l||!s)return 1;if(!r&&!a&&!u&&e<t||u&&n&&s&&!r&&!a||c&&n&&s||!o&&s||!l)return-1}return 0}var FPe=$Pe,BPe=FPe;function UPe(e,t,n){for(var r=-1,s=e.criteria,a=t.criteria,o=s.length,c=n.length;++r<o;){var l=BPe(s[r],a[r]);if(l){if(r>=c)return l;var u=n[r];return l*(u=="desc"?-1:1)}}return e.index-t.index}var VPe=UPe,$h=o$,GPe=i$,WPe=Yd,HPe=RPe,zPe=LPe,qPe=d0,YPe=VPe,KPe=vc,XPe=Kd;function QPe(e,t,n){t.length?t=$h(t,function(a){return XPe(a)?function(o){return GPe(o,a.length===1?a[0]:a)}:a}):t=[KPe];var r=-1;t=$h(t,qPe(WPe));var s=HPe(e,function(a,o,c){var l=$h(t,function(u){return u(a)});return{criteria:l,index:++r,value:a}});return zPe(s,function(a,o){return YPe(a,o,n)})}var ZPe=QPe;function JPe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var eje=JPe,tje=eje,hM=Math.max;function nje(e,t,n){return t=hM(t===void 0?e.length-1:t,0),function(){for(var r=arguments,s=-1,a=hM(r.length-t,0),o=Array(a);++s<a;)o[s]=r[t+s];s=-1;for(var c=Array(t+1);++s<t;)c[s]=r[s];return c[t]=n(o),tje(e,this,c)}}var rje=nje,sje=C_,gM=c$,aje=vc,oje=gM?function(e,t){return gM(e,"toString",{configurable:!0,enumerable:!1,value:sje(t),writable:!0})}:aje,ije=oje,cje=800,lje=16,uje=Date.now;function dje(e){var t=0,n=0;return function(){var r=uje(),s=lje-(r-n);if(n=r,s>0){if(++t>=cje)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var fje=dje,mje=ije,pje=fje,hje=pje(mje),gje=hje,vje=vc,yje=rje,xje=gje;function bje(e,t){return xje(yje(e,t,vje),e+"")}var wje=bje,Sje=l$,Cje=Xv,Tje=u$,kje=yc;function Mje(e,t,n){if(!kje(n))return!1;var r=typeof t;return(r=="number"?Cje(n)&&Tje(t,n.length):r=="string"&&t in n)?Sje(n[t],e):!1}var Eje=Mje,_je=jPe,Aje=ZPe,Pje=wje,vM=Eje,jje=Pje(function(e,t){if(e==null)return[];var n=t.length;return n>1&&vM(e,t[0],t[1])?t=[]:n>2&&vM(t[0],t[1],t[2])&&(t=[t[0]]),Aje(e,_je(t,1),[])}),Ije=jje;const pD=xe(Ije);function Nje(){const{connectorConfig:e}=Lm(),t=Ms(),n=Hx(),[r,s]=Gd(pD([...e.values()],d=>!!d.access_token),d=>!!d.access_token),[a,o]=Gd(s,d=>d.type===G.O365_PERSONAL||d.type===G.O365_BUSINESS),c=!t&&!n&&r.length>0,l=!t&&!n&&!c&&a.length>1;return{unconnectedConnectors:n?[]:l?o:s,showUnconnectedInSubmenu:c,showOneDriveInSubmenu:l}}function Oje({clientThreadId:e,icon:t,modelAcceptedMimeTypes:n,modelSupportedImageMimeTypes:r,attachmentsProductFeature:s,onOauthRedirect:a,uploadType:o,getInputProps:c,openFileDialog:l,isDisabled:u=!1,highlightTooltip:d=!1}){const{currentLocale:f}=UE(),m=L(),h=Ne(),g=yl(),v=Ms(),{connectorConfig:y,isLoading:b}=Lm(),x=Be(je.ContextConnectors),{getGizmoId:w}=wl(),[C,T]=p.useState();p.useEffect(()=>{w?w().then(Z=>T(Z)):T(void 0)},[w]);const M=p.useRef(null),[_,k]=p.useState(!1),I=p.useRef(!1),j=p.useCallback(()=>{const Z=M.current?.files;Array.from(Z??[]).forEach(gt=>Dn.uploadFile(g,gt,r,m,h,s))},[g,r,m,h,s]),[F,U]=p.useState(null),B=p.useCallback(()=>U(null),[U]),N=p.useCallback((Z,gt)=>Dn.uploadPickedFile(g,Z,gt,r,n,s,C,m,h),[g,r,n,s,C,m,h]),{openMenu:$,confirmMenuOpened:H}=hc();p.useEffect(()=>{$&&(k(!0),H())},[$,H,k]);const Y=p.useCallback(Z=>{Dn.doContextConnectorOauthRedirect(location.pathname+location.search+location.hash,Z,a,vn.Picker),a()},[a]),O=p.useCallback(Z=>{Dn.uploadPickedFile(g,Z,G.GDRIVE,r,n,s,C,m,h)},[g,r,n,s,C,m,h]),R=p.useCallback(async Z=>{const{access_token:gt}=Z;if(!gt){Y(Z);return}switch(Dn.logAttemptIfAccessTokenIsExpired(Z,vn.Picker),Z.type){case G.GDRIVE:bPe(f,Z.type,gt,dn=>dn.forEach(O));break;case G.O365_PERSONAL:case G.O365_BUSINESS:U(Z.type);break}},[O,Y,U,f]),V=()=>{E.logEvent(P.openFileViewer,{intent:o.toString()}),l()},X=Z=>{if(!Z&&I.current&&!b)V();else if(Z&&be&&!b){V();return}k(Z),Z&&(x.eligible&&x.markAsViewed(),E.logEvent(P.composerOpenContextConnectorPicker),I.current=!0,setTimeout(()=>{I.current=!1},250))},[re,te]=Gd(pD([...y.values()],Z=>!!Z.access_token),Z=>!!Z.access_token);Rje(re,R);const[ue]=Gd(te,Z=>Z.type===G.O365_PERSONAL||Z.type===G.O365_BUSINESS),{unconnectedConnectors:he,showUnconnectedInSubmenu:Se,showOneDriveInSubmenu:se}=Nje(),{desktopConnectors:W}=vPe(r),be=!re.length&&!he.length&&!W.length,De=i.jsxs(i.Fragment,{children:[Se&&he.length>0&&i.jsx(uPe,{connectorEntries:he,onOauthRedirect:Z=>Y(Z)}),!Se&&he.map(Z=>i.jsx(lM,{entry:Z,onClick:()=>R(Z)},Z.id)),se&&i.jsx(fPe,{connectors:ue,onOauthRedirect:Y}),b&&i.jsx(ne.Item,{icon:i.jsx(cn,{className:"text-token-text-secondary"})}),(he.length>0||b)&&i.jsx(ne.Separator,{}),re.map(Z=>i.jsx(lM,{entry:Z,onClick:()=>R(Z)},Z.id)),W.map(Z=>i.jsx(hPe,{entry:Z},Z.key)),i.jsx(ne.Item,{onClick:V,icon:c_,children:i.jsx(S,{...v?yM.uploadFileMobile:yM.uploadFile})},"upload")]}),Ve=i.jsxs("div",{className:"flex flex-col",children:[i.jsx(oPe,{type:F,onClose:B,uploadPickedFile:N}),i.jsx("input",{onChange:j,...c({className:"hidden"})}),i.jsxs(ne.Root,{open:_,onOpenChange:X,children:[i.jsx(lPe,{clientThreadId:e,icon:t,setOpen:X,isDisabled:u,highlightTooltip:d}),i.jsx(ne.Portal,{children:i.jsx(ne.Content,{size:"large",children:De})})]}),i.jsx(JAe,{hasConnectors:!b&&!be})]});return{dropdownItems:De,mainComponent:Ve}}function Rje(e,t){const{connector:n,clearParam:r}=JMe(),s=e.find(a=>a.type===n&&!!a.access_token);p.useEffect(()=>{s&&(t(s),r())},[s,t,r])}function q$e(e){const{mainComponent:t}=Oje(e);return t}const yM=z({attachFiles:{id:"ContextConnectorPicker.attachFiles",defaultMessage:"Attach files"},uploadFile:{id:"LocalFileDropdownItem.uploadFile",defaultMessage:"Upload from computer"},uploadFileMobile:{id:"LocalFileDropdownItem.uploadFileMobile",defaultMessage:"Upload file"}}),Y$e={"prosemirror-parent":"_prosemirror-parent_15ceg_1"};var Wd=200,Ht=function(){};Ht.prototype.append=function(t){return t.length?(t=Ht.from(t),!this.length&&t||t.length<Wd&&this.leafAppend(t)||this.length<Wd&&t.leafPrepend(this)||this.appendInner(t)):this};Ht.prototype.prepend=function(t){return t.length?Ht.from(t).append(this):this};Ht.prototype.appendInner=function(t){return new Dje(this,t)};Ht.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Ht.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Ht.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Ht.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Ht.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(a,o){return s.push(t(a,o))},n,r),s};Ht.from=function(t){return t instanceof Ht?t:t&&t.length?new hD(t):Ht.empty};var hD=function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(s,a){return s==0&&a==this.length?this:new t(this.values.slice(s,a))},t.prototype.getInner=function(s){return this.values[s]},t.prototype.forEachInner=function(s,a,o,c){for(var l=a;l<o;l++)if(s(this.values[l],c+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,a,o,c){for(var l=a-1;l>=o;l--)if(s(this.values[l],c+l)===!1)return!1},t.prototype.leafAppend=function(s){if(this.length+s.length<=Wd)return new t(this.values.concat(s.flatten()))},t.prototype.leafPrepend=function(s){if(this.length+s.length<=Wd)return new t(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t}(Ht);Ht.empty=new hD([]);var Dje=function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,s,a,o){var c=this.left.length;if(s<c&&this.left.forEachInner(r,s,Math.min(a,c),o)===!1||a>c&&this.right.forEachInner(r,Math.max(s-c,0),Math.min(this.length,a)-c,o+c)===!1)return!1},t.prototype.forEachInvertedInner=function(r,s,a,o){var c=this.left.length;if(s>c&&this.right.forEachInvertedInner(r,s-c,Math.max(a,c)-c,o+c)===!1||a<c&&this.left.forEachInvertedInner(r,Math.min(s,c),a,o)===!1)return!1},t.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var a=this.left.length;return s<=a?this.left.slice(r,s):r>=a?this.right.slice(r-a,s-a):this.left.slice(r,a).append(this.right.slice(0,s-a))},t.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new t(this.left,s)},t.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new t(s,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t}(Ht);function Lje(){const{value:e}=at("2813404493");return e}const $je=Xe(()=>qe(()=>import("./nymatvzkw3jqteia.js"),__vite__mapDeps([50,1,2,3,51,52,15,6,53,7,54,42,55,56,57,58,59,26,27])).then(e=>e.VoiceModeLayout)),Fje=Xe(()=>qe(()=>import("./nv77gw576g9mrpgd.js"),__vite__mapDeps([60,1,2,3,51,58,59,26,27,6])).then(e=>e.ComposerSpeechButton)),Bje=Xe(()=>qe(()=>import("./gkwpnbuxqe3ty5en.js"),__vite__mapDeps([61,1,2,3,37,6])).then(e=>e.VoiceConversationRating));function Wb(){return ot("1426009137")?.value}function Uje(e){return Wb()?i.jsx($je,{...e}):null}function Vje(e){const t=Wb(),{Fallback:n,...r}=e;return t?i.jsx(Fje,{...r}):i.jsx(n,{})}function K$e(e){return Wb()?i.jsx(Bje,{...e}):null}function X$e(){const e=qi(ra.VoiceName)?.data,t=qi(ra.VoiceMainLanguage)?.data,n=Gje();return{voiceName:Wje(e,n),voiceMainLanguage:t??d$.Auto}}function Gje(){const e=gD(),{currentLocale:t}=UE();return p.useCallback(()=>{if(e.length===0)return"juniper";let n=e[0].voice;return t.startsWith("zh")&&(n="cove"),n},[e,t])}function gD(){const{session:e}=r0(),t=e!=null,n=qi(ra.VoiceMainLanguage)?.data,{data:r}=me({queryKey:["getUserSettingVoices",n],queryFn:()=>K.getUserSettingVoices(),enabled:t});return r?r.voices:[]}function Wje(e,t){return e==="sky"?"juniper":e??t()}const Q$e=300,Hje="straw",Z$e=1e3,J$e=7e3,e6e=1e3,t6e=7e3,n6e=()=>gD().some(t=>t.voice===Hje),r6e=async(e=1)=>{let t=0,n;return new Promise(r=>{const s=a=>(n||(n=a),a-n<e*1e3?(t+=1,requestAnimationFrame(s)):r(Math.floor(t/e)));requestAnimationFrame(s)})},s6e=e=>{const t=p.useRef(e),n=p.useCallback(r=>{(t.current[0]!==r.width||t.current[1]!==r.height)&&(t.current=[r.width,r.height])},[]);return{canvasSizeRef:t,handleCanvasSizeUpdate:n}},zje=()=>{if(typeof navigator>"u")return!1;const e=navigator.userAgent||navigator.vendor;return/android|iphone|ipad|ipod|mobile/i.test(e)},a6e=e=>{const{voiceSessionId:t,server:n,voiceMode:r,audioInputDevice:s,voiceStatus:a}=e;return{voice_session_id:t??"(none)",server_messages:n.messages.map(o=>o.type).join(","),rate_limit_message:JSON.stringify(n.usage?.rate_limit_message)??"(none)",audio_s:n.usage?.audio_s??"(none)",tool_update:n.toolUpdate?.type??"(none)",voice_connection_quality:n.voiceConnectionQuality??"(none)",voice_mode:r??"(none)",audio_input_device:s?.label??"(none)",voice_status:JSON.stringify(a)??"(none)"}};function o6e(e){return e instanceof DOMException&&e.name==="NotAllowedError"?(f$.permissions.denied({message:e.message}),!0):!1}function i6e(e){const{isUnauthenticated:t}=bt(),r=hR(h=>h.files).length>0,s=e.composerController.useState(h=>!h.isEmpty()),a=!r&&!s,{browseMode:o}=ve(),c=pf(),l=rSe(),u=Zo(e.gizmoId),d=zje(),f=Vn();if(e.inputState==="disabled")return null;const m=i.jsx(qje,{state:e.state,onSubmit:e.onSubmit,disableReason:e.disableReason,isSearchMode:l,useProduceImpl:e.useProduceImpl});return!t&&!c&&!l&&!u&&a&&e.state==="disabled"&&e.clientThreadId&&o!=="gizmo-editor"&&!d&&!f?i.jsx("div",{className:"min-w-8",children:i.jsx(Vje,{clientThreadId:e.clientThreadId,gizmoId:e.gizmoId,Fallback:()=>m})}):m}function qje({state:e,onSubmit:t,disableReason:n,isSearchMode:r,useProduceImpl:s}){const a=e==="streaming"?d6:f6,o=L(),c=Lje(),l=i.jsx("button",{onClick:t,disabled:e==="disabled","aria-label":e==="streaming"?o.formatMessage(wi.stopStreamingLabel):o.formatMessage(wi.sendPromptLabel),"data-testid":e==="streaming"?"stop-button":"send-button",className:A("flex h-8 w-8 items-center justify-center rounded-full transition-colors hover:opacity-70 focus-visible:outline-none focus-visible:outline-black disabled:text-[#f4f4f4] disabled:hover:opacity-100 dark:focus-visible:outline-white disabled:dark:bg-token-text-quaternary dark:disabled:text-token-main-surface-secondary",s?"bg-green-600 text-white disabled:bg-green-600 disabled:bg-opacity-15 dark:bg-green-600 dark:text-white disabled:dark:bg-green-600 disabled:dark:bg-opacity-15":r?"bg-blue-1000 text-white dark:bg-blue-1000 dark:text-white":"bg-black text-white dark:bg-white dark:text-black",c&&"disabled:bg-black disabled:bg-opacity-[0.27]",!c&&"disabled:bg-[#D7D7D7]"),children:i.jsx(a,{className:A(e==="streaming"?"icon-lg":"icon-2xl")})});return n&&e==="disabled"?i.jsx(Yje,{label:n==="file_upload_pending"?o.formatMessage(wi.fileUploadPendingLabel):n==="empty_text_content"?o.formatMessage(wi.emptyTextContentLabel):o.formatMessage(wi.textContentTooLongLabel),children:l}):l}function Yje({label:e,children:t}){return i.jsx(Ye,{sideOffset:14,label:e,side:"top",children:t})}const wi=z({stopStreamingLabel:{id:"+yfm/p",defaultMessage:"Stop streaming"},sendPromptLabel:{id:"xfIykB",defaultMessage:"Send prompt"},emptyTextContentLabel:{id:"LCVL2q",defaultMessage:"Message is empty"},textContentTooLongLabel:{id:"kDrqDJ",defaultMessage:"Message is too long"},fileUploadPendingLabel:{id:"Qv7jQN",defaultMessage:"File upload pending"}});let Bv=null;function c6e(e){Bv=e}function l6e(e){return Bv?Bv(e):e}const Kje=e=>{const{metadata:t}=e;return t?.type?Jh(t.type):!1},Xje=({textdocId:e,pastedTextdoc:t,onClickSwitchToInline:n,isCanvasOpen:r=!1,isFocused:s=!1})=>{const{content:a,metadata:o}=t,c=L(),l=u=>{u.stopPropagation(),n?.()};return i.jsxs("div",{className:"group/file-tile relative",children:[i.jsx("button",{onClick:()=>D_.removePastedContent(e),className:"absolute -left-1 -top-1 z-10 hidden rounded-full border-[3px] border-[#f4f4f4] bg-black p-[2px] text-white group-hover/file-tile:block dark:border-token-main-surface-secondary dark:bg-white dark:text-black",children:i.jsx(i_,{className:"icon-xs"})}),i.jsx(yle,{isInlinePreview:!0,isCanvasOpen:r,isFocused:s,textdocId:e,name:o?.title??null,type:o?.type??null,size:"small",icon:i.jsx(Ye,{label:c.formatMessage({id:"46JCmc",defaultMessage:"Switch to inline text"}),sideOffset:4,side:"top",children:i.jsx("div",{tabIndex:0,role:"button",onClick:l,children:i.jsx(m6,{})})}),onClick:()=>po(e),children:i.jsx("div",{className:A("whitespace-pre px-4",Kje(t)&&"font-mono"),children:a})})]})},u6e=({textdocId:e,pastedTextdoc:t,onClickSwitchToInline:n})=>{const r=O0(e),s=Ic();return i.jsx(Xje,{isFocused:r,isCanvasOpen:s,pastedTextdoc:t,textdocId:e,onClickSwitchToInline:n})};function d6e({clientThreadId:e}){const t=Ec(e);return t!=null?i.jsx(Qje,{clientThreadId:e,gizmoId:t}):i.jsx(vD,{clientThreadId:e})}function Qje({clientThreadId:e,gizmoId:t}){const n=Ss(t).data,r=ta(a=>Un.getThreadCreateTime(e,a)),s=n?.gizmo.updated_at!=null?new Date(n.gizmo.updated_at):void 0;return n?.gizmo.gizmo_type==="snorlax"||n?.gizmo.short_url==null||s==null||r==null||s<=r?i.jsx(vD,{clientThreadId:e}):i.jsxs("div",{className:"text-token-text-tertiary",children:[i.jsx(c_,{className:"text-token-secondary mb-1 mr-1 inline-block h-4 w-4 stroke-0"}),i.jsx(S,{...uo.outdatedGptDisclaimer,values:{link:a=>i.jsx(En,{to:Ki(n.gizmo.short_url),className:"underline",children:a},`gizmo-link-${n.gizmo.short_url}`),bold:a=>i.jsx("span",{className:"text-token-secondary font-semibold",children:a},`gizmo-bold-${n.gizmo.short_url}`)}})]})}function vD({clientThreadId:e}){const t=ln(fs.isBusinessWorkspace),r=ln(l=>l.currentWorkspace)?.name,{isUnauthenticated:s,isLoading:a}=bt();if(a)return null;if(t)return i.jsx("div",{children:r!=null?i.jsx(S,{...uo.businessDisclaimer,values:{workspaceName:r}}):i.jsx(S,{...uo.businessDisclaimerNoName})});const c=VE({clientThreadId:e,role:le.User})>0;return s&&!c?i.jsx(xs,{children:i.jsx(yD,{clientThreadId:e})}):i.jsx("div",{children:i.jsx(S,{...uo.mayProduceInaccurateInformation})})}function yD({clientThreadId:e}){const{country:t}=Tc(),n=t==="KR"?uo.mayProduceInaccurateInformationNoAuthKorea:uo.mayProduceInaccurateInformationNoAuthV2,{layer:r}=bE("3533083032"),s=r.get("disclaimer_color_adjust",!1);return p.useEffect(()=>()=>{VE({clientThreadId:e,role:le.User})>0&&j5.updateHasAcceptedFooterDisclaimer()},[e]),i.jsx("span",{className:"text-sm leading-none",children:i.jsx(S,{...n,values:{privacyLink:a=>i.jsx("a",{href:"https://openai.com/privacy",target:"_blank",className:A(s?"text-token-text-secondary":"text-token-text-primary","underline decoration-token-text-primary"),onClick:()=>{q.logEvent("chatgpt_footer_disclaimer_privacy_link_clicked"),E.logEvent(P.footerDisclaimerPrivacyLinkClicked)},rel:"noreferrer",children:a}),termsLink:a=>i.jsx("a",{href:"https://openai.com/terms",target:"_blank",className:A(s?"text-token-text-secondary":"text-token-text-primary","underline decoration-token-text-primary"),onClick:()=>{q.logEvent("chatgpt_footer_disclaimer_terms_link_clicked"),E.logEvent(P.footerDisclaimerTermsLinkClicked)},rel:"noreferrer",children:a}),koreaAddendumLink:a=>i.jsx("a",{href:"https://openai.com/ko/policies/kr-privacy-policy-addendum",target:"_blank",className:"text-token-text-primary underline decoration-token-text-primary",onClick:()=>{q.logEvent("chatgpt_footer_disclaimer_korea_addendum_link_clicked"),E.logEvent(P.footerDisclaimerKoreaAddendumLinkClicked)},rel:"noreferrer",children:a})}})})}const uo=z({mayProduceInaccurateInformation:{id:"thread.chatgptMayProduceInaccurateInformation-oct-30",defaultMessage:"ChatGPT can make mistakes. Check important info."},mayProduceInaccurateInformationNoAuthV2:{id:"thread.chatgptMayProduceInaccurateInformationNoAuth-may-06",defaultMessage:"By messaging ChatGPT, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink>."},mayProduceInaccurateInformationNoAuthKorea:{id:"thread.chatgptMayProduceInaccurateInformationNoAuthKorea-may-06",defaultMessage:"By messaging ChatGPT, you agree to our <termsLink>Terms</termsLink> and have read our <privacyLink>Privacy Policy</privacyLink> and its <koreaAddendumLink>Korea addendum</koreaAddendumLink>."},businessDisclaimer:{id:"thread.businessDisclaimer-oct-30",defaultMessage:"{workspaceName} workspace chats aren't used to train our models. ChatGPT can make mistakes."},businessDisclaimerNoName:{id:"thread.businessDisclaimerNoName-oct-30",defaultMessage:"Your workspace chats aren'ts used to train our models. ChatGPT can make mistakes."},outdatedGptDisclaimer:{id:"thread.outdatedGptDisclaimer.0",defaultMessage:"<bold>New version of GPT available</bold> - Continue chatting to use the old version, or start a <link>new chat</link> for the latest version."}});function f6e({threadId:e}){const t=_E();p.useEffect(()=>{j5.updateBannerDisclaimerClientThreadId(e),q.logEvent("chatgpt_unauthenticated_legal_banner"),E.logEvent(P.unauthLegalBanner,{threadId:e})},[e]);const n=t?Co.bannerTermsDisclaimer:Co.bannerTermsDisclaimerSafetyAndAbuse;return i.jsxs(Mle,{type:"none",children:[i.jsx(yD,{clientThreadId:e}),i.jsx("br",{}),i.jsx(S,{...n,values:{learnMoreLink:r=>i.jsx("a",{href:"https://help.openai.com/en/articles/5722486-how-your-data-is-used-to-improve-model-performance",target:"_blank",className:"text-token-text-primary underline",onClick:()=>{q.logEvent("chatgpt_unauthenticated_banner_learn_more_clicked"),E.logEvent(P.unauthDisclaimerBannerLearnMoreClicked,{threadId:e})},children:r})}})]})}function m6e({threadId:e,showLogin:t=!0}){const n=L();p.useEffect(()=>{q.logEvent("chatgpt_unauthenticated_signup_banner"),E.logEvent(P.unauthSignupBanner,{threadId:e})},[e]);const r=Jt();return i.jsx(Xo,{content:n.formatMessage(Co.bannerSignup),onPrimaryCtaClick:()=>{r({authType:"signup",callback:s=>{q.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),E.logSignUpButtonClicked({location:"Chat Stage Signup Banner",provider:s})}})},primaryCtaText:n.formatMessage(Co.bannerSignupButton),onSecondaryCtaClick:t?()=>{r({authType:"login",callback:s=>{q.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),E.logLogInButtonClicked({location:"Chat Stage Signup Banner",provider:s})}})}:void 0,secondaryCtaText:t?n.formatMessage(yt.logInButtonText):void 0})}function p6e({threadId:e,showSignUp:t}){const n=L();p.useEffect(()=>{q.logEvent("chatgpt_unauthenticated_login_banner"),E.logEvent(P.unauthLoginBanner,{threadId:e})},[e]);const r=Jt();return i.jsx(Xo,{content:n.formatMessage(Co.bannerSignup),onPrimaryCtaClick:()=>{r({authType:"login",callback:s=>{q.logEvent("chatgpt_unauthenticated_banner_login_button_clicked"),E.logLogInButtonClicked({location:"Chat Stage Login Banner",provider:s})}})},primaryCtaText:n.formatMessage(yt.logInButtonText),onSecondaryCtaClick:t?()=>{r({authType:"signup",callback:s=>{q.logEvent("chatgpt_unauthenticated_banner_signup_button_clicked"),E.logSignUpButtonClicked({location:"Chat Stage Login Banner",provider:s})}})}:void 0,secondaryCtaText:t?n.formatMessage(Co.bannerSignupButton):void 0})}const Co=z({bannerTermsDisclaimer:{id:"bannerTermsDisclaimer",defaultMessage:"Don't share sensitive info. Chats may be reviewed and used to train our models. <learnMoreLink>Learn more</learnMoreLink>"},bannerTermsDisclaimerSafetyAndAbuse:{id:"pDsoLk",defaultMessage:"Don't share sensitive information. Chats may be reviewed for safety and abuse prevention. <learnMoreLink>Learn more</learnMoreLink>"},bannerSignup:{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."},bannerSignupButton:{id:"hedgehog.banner_signup_button",defaultMessage:"Sign up"}}),xD="https://cdn.oaistatic.com/assets/app-slack-icon-edtfy1gb.png",Hb=fe.section`max-w-sm flex flex-col gap-2 rounded-2xl border border-token-border-light p-4 shadow items-center`,Zje=.9;function bD(e){return e.sync_phase==="discovering"||e.sync_phase==="syncing"&&e.items_synced<e.items_discovered*Zje}function h6e(){const[e,t]=p.useState(void 0),[n,r]=p.useState(void 0);p.useEffect(()=>{(async()=>{try{const[f,m]=await Promise.all([K.getKnowledgeStoreStatus("google_drive"),K.getKnowledgeStoreStatus("slack")]);t(f),r(m)}catch{t(void 0),r(void 0)}})()},[]);const{isSuccess:s,data:a,isLoading:o}=me({queryKey:["getCaSyncStatus"],queryFn:K.getCaSyncStatus,refetchInterval:d=>{switch(d.state.status){case"error":return 30*1e3;case"success":return d.state.data?.connectors?.length?d.state.data?.connectors.some(bD)?3*1e3:!1:30*1e3;case"pending":return 30*1e3}}}),c=s&&!o&&a?a.connectors:[],l=e?.credential_type==="user_oauth"||n?.credential_type==="user_oauth",u=e?.exist||n?.exist;return i.jsx("div",{className:"p-7",children:u===void 0?i.jsx(cn,{}):u?l?i.jsx(t2e,{syncStatuses:c,gDriveKnowledgeStoreOAuthType:e?.credential_type,slackKnowledgeStoreOAuthType:n?.credential_type}):i.jsx(e2e,{}):i.jsx(Jje,{})})}function Jje(){return i.jsxs(Hb,{className:"text-center",children:[i.jsx("p",{className:"mb-1 text-lg font-bold text-token-text-primary",children:i.jsx(S,{id:"hv8AR4",defaultMessage:"Your Workspace Is Not Set Up For Synced Connectors"})}),i.jsxs("p",{className:"mb-1 text-sm text-token-text-secondary",children:[i.jsx(S,{id:"0yexmP",defaultMessage:"ChatGPT's answers will not be enhanced with knowledge from synced files."}),"",i.jsx(S,{id:"gLcU9K",defaultMessage:"Please contact your organization's administrator to enable this feature."})]})]})}function e2e(){return i.jsx(Hb,{className:"text-center",children:i.jsx("p",{className:"mb-1 text-sm text-token-text-primary",children:i.jsx(S,{id:"LvrAFF",defaultMessage:"Your ChatGPT Workspace Is Connected With Your Company Data"})})})}function t2e({syncStatuses:e,gDriveKnowledgeStoreOAuthType:t,slackKnowledgeStoreOAuthType:n}){const{config:r}=tf("1001765573"),s=r.get("ca_sk_enabled",!1);return i.jsxs(Hb,{className:"text-center",children:[i.jsx("p",{className:"mb-1 text-lg font-bold text-token-text-primary",children:i.jsx(S,{id:"1NWyN0",defaultMessage:"Ask ChatGPT about work"})}),i.jsx("p",{className:"mb-1 text-sm text-token-text-secondary",children:i.jsx(S,{id:"QeUvu+",defaultMessage:"Connect your workplace accounts so ChatGPT can reference work files."})}),i.jsxs("div",{className:"my-1 w-full",children:[t==="user_oauth"&&i.jsx(xM,{type:Yi.GDRIVE_SYNC_CONNECTOR,syncStatuses:e}),s&&n==="user_oauth"&&i.jsx(xM,{type:Yi.SLACK_SYNC_CONNECTOR,syncStatuses:e})]}),i.jsx("p",{className:"max-w-64 text-xs text-token-text-tertiary",children:i.jsx(S,{id:"K/YIKe",defaultMessage:"{workspaceName} workspace chats and connections aren't used to train our models.",values:{workspaceName:"OpenAI"}})})]})}function xM({type:e,syncStatuses:t}){let n;switch(e){case Yi.GDRIVE_SYNC_CONNECTOR:n=jo;break;case Yi.SLACK_SYNC_CONNECTOR:n=c=>i.jsx("img",{src:xD,...c,alt:""});break}const r=p.useMemo(()=>t.filter(c=>c.connector===e)[0],[t,e]),{connectors:s}=C5([e]),a=s.get(e);if(!a)return null;const o=!!a.access_token;return i.jsx(r2e,{entry:a,syncStatus:r,isConnected:o,onConnect:k5,appIcon:n})}function n2e({children:e}){return i.jsx("div",{className:"btn-secondary btn hover:bg-inherit relative mb-2 flex w-full items-center justify-center rounded-lg p-3",children:e})}const r2e=({entry:e,isConnected:t,syncStatus:n,onConnect:r,appIcon:s})=>{let a="Google";e.type===Yi.SLACK_SYNC_CONNECTOR&&(a="Slack");const o=!n||n.sync_phase==="unknown",c=t&&!o&&bD(n),l=t&&!o&&!c,u=l?l_:s;return t?i.jsxs(n2e,{loading:!l,children:[u&&i.jsx(u,{className:A("mx-2 h-5 w-5 flex-initial",l&&"text-green-500")}),i.jsxs("div",{className:A("flex-auto",l&&"mr-9"),children:[i.jsx("p",{children:l?i.jsx(S,{...Fh.connected,values:{appName:a}}):i.jsx(S,{...Fh.syncing,values:{appName:a}})}),i.jsx("p",{className:A("w-full text-sm text-token-text-secondary",c?"pt-2":"py-2"),children:o?i.jsx(S,{id:"i/Sjic",defaultMessage:"Getting sync status"}):n.sync_phase==="discovering"?i.jsx(S,{id:"Tjc7M6",defaultMessage:"Discovering files"}):c?i.jsx(S,{id:"7YaAvy",defaultMessage:"Indexing files"}):i.jsx(S,{id:"DAsSAe",defaultMessage:"Your files are ready to use."})}),c&&i.jsx("p",{className:"w-full pb-2 text-sm text-token-text-tertiary",children:n.sync_phase==="discovering"?i.jsx(S,{id:"9cbJqo",defaultMessage:"{items_synced} files processed",values:{items_synced:n.items_synced.toLocaleString()}}):i.jsx(S,{id:"XpeElU",defaultMessage:"{items_synced}/{items_discovered} files processed",values:{items_synced:n.items_synced.toLocaleString(),items_discovered:n.items_discovered.toLocaleString()}})})]}),!l&&i.jsx("div",{className:"mx-2 w-5",children:i.jsx(cn,{})})]}):i.jsxs(ee,{fullWidth:!0,contentsFullWidth:!0,onClick:()=>r({id:e.id},"settings_connected_apps",`${window.location.origin}/ca/${e.id}/oauth/callback`,"?model=gpt-4o-gdrive&onboarding=true"),color:"secondary",size:"medium",className:"mb-2 rounded-lg p-3",children:[u&&i.jsx(u,{className:"mx-2 h-5 w-5 flex-initial"}),i.jsx("div",{className:"mr-9 flex-auto",children:i.jsx("p",{children:i.jsx(S,{...Fh.connect,values:{appName:a}})})})]})},Fh=z({connect:{id:"caOnboarding.connect",defaultMessage:"Connect to {appName}"},syncing:{id:"caOnboarding.syncing",defaultMessage:"Syncing with {appName}"},connected:{id:"caOnboarding.connected",defaultMessage:"Connected to {appName}"}});function g6e(){const{store:e}=Rb(),t=e.useSharedProps(),n=N7(),{clearSearchModeTrigger:r,getSearchModeTrigger:s}=sSe();return p.useCallback(async(a,o,c)=>{if(!t)return;const{clientThreadId:l,currentLeafId:u,onCreateNewCompletion:d,onResetState:f,conversationMode:m}=t;$e.hideThreadHeader();const h=`${u}-nextPrompt`,g=new Yu,v=n.has(Ct.Search),y=v?s():void 0;await d({promptId:h,content:Ja(a),eventMetadata:{eventSource:"mouse"},completionMetadata:{suggestions:o,suggestion:a,suggestionIndex:c,conversationMode:m??Un.getConversationMode(l),systemHints:[...n],searchSource:y},messageMetadata:{is_starter_prompt:!0,suggestion_type:a.type,starter_prompt_id:"id"in a?a.id:null},turnTracker:g});const x=D.getTree(l).getMessageId(h);f(),_we(a,c,l,x),rR(),y&&v&&r()},[t,n,s,r])}function bM(e){return(fA(e)?e.promptStarters:e.gizmo.display.prompt_starters)?.map(t=>({type:ct.Starter,title:"",body:t,prompt:t}))}function v6e(e,t,n,r,s,a){const o=mr(),c=nf(t),l=Ss(c?.kind===Me.GizmoInteraction?c.gizmo_id:void 0).data,{gizmoEditorData:u,mode:d}=wl(),f=fAe(c),m=Ce(),h=e&&!f&&(r||!m?.isEnterprisey()),{data:g,isLoading:v,isSuccess:y,isError:b}=me({queryKey:["promptStarters",t,n,s,a],queryFn:()=>K.getSampledPromptStarter(n,s,a),enabled:h});return o==null?{promptStarters:[],isLoading:!0,isSuccess:!1}:d==="test"&&u?{promptStarters:bM(u)??[],isLoading:!1,isSuccess:!0}:l!=null?{promptStarters:bM(l),isLoading:!1,isSuccess:!0}:h?{promptStarters:g?.items.map(x=>({type:ct.Starter,id:x.id,title:x.title,body:x.description,prompt:x.prompt,category:x.category,oneliner:x.oneliner,theme:x.theme,requires_file_upload:x.requires_file_upload}))??[],isLoading:v,isSuccess:y,isError:b}:{promptStarters:[],isLoading:!1,isSuccess:!0}}function y6e(e){return e.shouldRender?i.jsx(s2e,{...e}):null}function s2e({contentArea:e,children:t}){const{store:n}=Rb(),r=p.useRef(null);return n.useContentAreaResizeObserver(e,r),i.jsx("div",{ref:r,className:A("relative h-full w-full"),children:t})}function x6e(){const{layer:e}=_n("3637408529");return e.get("is_secondary_auth_banner_button_enabled",!1)}function wD(e,t,n){try{const r=JSON.parse(window.localStorage.getItem(e)??"");return n(r)?r:t}catch{return t}}function a2e(e,t){window.localStorage.setItem(e,JSON.stringify(t))}const wM=Ie(e=>({data:{},setItem:(t,n)=>e(r=>({data:{...r.data,[t]:n}}))}));function b6e(e,t,n){const[r,s]=p.useState(!1),a=wM(l=>l.data[e]),o=wM(l=>l.setItem);return p.useEffect(()=>{if(!r){const l=wD(e,t,n);o(e,l),s(!0)}},[r,e,t,n,o]),p.useEffect(()=>{r&&a2e(e,a)},[e,a,r]),[a??t,l=>{o(e,l)}]}var o2e=m$,i2e=pE,c2e=u0,l2e="[object Object]",u2e=Function.prototype,d2e=Object.prototype,SD=u2e.toString,f2e=d2e.hasOwnProperty,m2e=SD.call(Object);function p2e(e){if(!c2e(e)||o2e(e)!=l2e)return!1;var t=i2e(e);if(t===null)return!0;var n=f2e.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&SD.call(n)==m2e}var h2e=p2e;const g2e=xe(h2e),v2e={base_config:void 0,eval_preset:void 0,completion_model:void 0},y2e="internal_search_settings",x2e=e=>g2e(e);function w6e(){const e=wD(y2e,v2e,x2e);return p$(e,t=>!!t)}function b2e(){return{}}const SM=new WeakMap;function CD(e){const t=SM.get(e);if(!t){const n=new Set;return SM.set(e,n),n}return t}function w2e(e,t){CD(e).add(t)}function S2e(e,t){CD(e).delete(t)}function S6e(e){return!1}function C6e(e){const t=ef(),[n]=p.useState(b2e);p.useEffect(()=>{if(t&&e)return w2e(t,n),()=>S2e(t,n)},[e,t,n])}const T6e=({svgString:e,className:t})=>{const n=i.jsx("div",{className:t});return i.jsx(GE,{name:"StringToSVG",fallback:n,children:i.jsx("div",{className:A("[&_svg]:h-full [&_svg]:w-full",t),dangerouslySetInnerHTML:{__html:e}})})};function C2e(e){const t=p.useContext(h$);return({id:r,requestedModelId:s,eventMetadata:a,focusOnNewCompletion:o=!0,variantPurpose:c="none",useDefaultModel:l,appendMessages:u,conversationMode:d,juice:f=void 0,turnTracker:m,extraStreamParams:h})=>{const v=D.getTree(e).getParentPromptNode(r),y=v.id;t({type:os.Variant,promptId:y,requestedModelId:s,eventMetadata:a,cancelActiveRequests:!1,focusOnNewCompletion:o,useDefaultModel:l,completionMetadata:{variantPurpose:c,conversationMode:d,juice:f,systemHints:v.message.metadata?.system_hints,searchSource:h?.forceUseSearch===!0?zh.CONVERSATION_REGENERATE_WITH_SEARCH:h?.forceUseSearch===!1?zh.CONVERSATION_REGENERATE_WITHOUT_SEARCH:void 0},appendMessages:u,turnTracker:m,extraStreamParams:h})}}function T2e(e,t,n){var r=-1,s=e.length;t<0&&(t=-t>s?0:s+t),n=n>s?s:n,n<0&&(n+=s),s=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(s);++r<s;)a[r]=e[r+t];return a}var k2e=T2e,M2e=k2e;function E2e(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:M2e(e,t,n)}var _2e=E2e,A2e="\\ud800-\\udfff",P2e="\\u0300-\\u036f",j2e="\\ufe20-\\ufe2f",I2e="\\u20d0-\\u20ff",N2e=P2e+j2e+I2e,O2e="\\ufe0e\\ufe0f",R2e="\\u200d",D2e=RegExp("["+R2e+A2e+N2e+O2e+"]");function L2e(e){return D2e.test(e)}var TD=L2e;function $2e(e){return e.split("")}var F2e=$2e,kD="\\ud800-\\udfff",B2e="\\u0300-\\u036f",U2e="\\ufe20-\\ufe2f",V2e="\\u20d0-\\u20ff",G2e=B2e+U2e+V2e,W2e="\\ufe0e\\ufe0f",H2e="["+kD+"]",Uv="["+G2e+"]",Vv="\\ud83c[\\udffb-\\udfff]",z2e="(?:"+Uv+"|"+Vv+")",MD="[^"+kD+"]",ED="(?:\\ud83c[\\udde6-\\uddff]){2}",_D="[\\ud800-\\udbff][\\udc00-\\udfff]",q2e="\\u200d",AD=z2e+"?",PD="["+W2e+"]?",Y2e="(?:"+q2e+"(?:"+[MD,ED,_D].join("|")+")"+PD+AD+")*",K2e=PD+AD+Y2e,X2e="(?:"+[MD+Uv+"?",Uv,ED,_D,H2e].join("|")+")",Q2e=RegExp(Vv+"(?="+Vv+")|"+X2e+K2e,"g");function Z2e(e){return e.match(Q2e)||[]}var J2e=Z2e,eIe=F2e,tIe=TD,nIe=J2e;function rIe(e){return tIe(e)?nIe(e):eIe(e)}var sIe=rIe,aIe=_2e,oIe=TD,iIe=sIe,cIe=WE;function lIe(e){return function(t){t=cIe(t);var n=oIe(t)?iIe(t):void 0,r=n?n[0]:t.charAt(0),s=n?aIe(n,1).join(""):t.slice(1);return r[e]()+s}}var uIe=lIe,dIe=uIe,fIe=dIe("toUpperCase"),mIe=fIe,pIe=WE,hIe=mIe;function gIe(e){return hIe(pIe(e).toLowerCase())}var vIe=gIe;const k6e=xe(vIe);function M6e({children:e}){let t;return p.Children.forEach(e,n=>{if(p.isValidElement(n)&&n.type==="title"){const r=p.Children.toArray(n.props.children)[0];typeof r=="string"&&(t=r)}}),p.useEffect(()=>{if(t!=null){const n=document.title;return document.title=t,()=>{document.title=n}}},[t]),null}function yIe(){const e=zt(),t=Ne(),{isUnauthenticated:n}=bt(),r=ot("3376455464")?.value,{openSettings:s}=pO();return i.jsx(i.Fragment,{children:i.jsxs(ga,{triggerButton:i.jsx("button",{className:"flex h-6 w-6 items-center justify-center rounded-full border border-token-border-light text-xs text-token-text-secondary",children:"?"}),children:[e&&!n&&i.jsx(ne.Item,{onClick:a=>{ul(e.id,t,a).then(()=>{t.success("Copied your User ID to clipboard")})},icon:A0,children:e.email}),i.jsx(_ke,{}),i.jsx(ne.Item,{icon:p6,onClick:()=>{$e.openModal(et.KeyboardActions)},children:i.jsx(S,{id:"thread.keyboardShortcutsMenu",defaultMessage:"Keyboard shortcuts"})}),r&&i.jsx(ne.Item,{icon:h6,onClick:()=>{$e.openModal(et.ReportConversation)},children:i.jsx(S,{id:"thread.report",defaultMessage:"Report Illegal Content"})}),n&&i.jsx(ne.Item,{onClick:()=>s(),icon:g6,children:i.jsx(S,{id:"helpMenu.items.settings",defaultMessage:"Settings"})})]})})}const xIe=Object.freeze(Object.defineProperty({__proto__:null,default:yIe},Symbol.toStringTag,{value:"Module"}));function bIe(e){return e.sub_reasons.length===0&&e.details_placeholder==null&&e.link_attachment==null&&e.subtext==null}function wIe(e,t,n){const r=Ne();return it({mutationFn:s=>K.postReport({...s,entity_type:n,entity_id:t}),onError:s=>{ie.addError(new Error("Error occurred while reporting",{cause:s}),{entityType:n,id:t}),r.danger(e.formatMessage({id:"report.submitError",defaultMessage:"Error reporting: {detail}"},{detail:s.message}))}})}function SIe(e){return me({queryKey:["reportReasons",{entityType:e}],queryFn:()=>K.getReportReasons(e)})}function CIe({name:e,placeholder:t,type:n,list:r,ariaLabel:s,displayName:a,onChange:o,onFocus:c,onBlur:l,value:u,saveOnBlur:d,icon:f,onInputIconClick:m,className:h,inputClassName:g,autoComplete:v,autoFocus:y,onPressEnter:b,disabled:x,maxLength:w,color:C="tertiary"},T){const[M,_]=p.useState(u),k=p.useCallback(U=>{l?.(U),d&&_(U.target.value)},[l,d]),I=p.useCallback(U=>{o?.(U),d&&_(U.target.value)},[o,d]),j=p.useCallback(U=>{U.key==="Enter"&&b&&(U.preventDefault(),b(M))},[b,M]);p.useEffect(()=>{_(u)},[u]);const F={...d?{}:{value:u},...d?{value:M}:{}};return i.jsxs("div",{className:A("rounded-md border shadow-none",C==="neutral"&&"border-transparent px-3 py-2 focus-within:border-green-500 focus-within:bg-token-main-surface-tertiary focus-within:ring-1 focus-within:ring-transparent hover:bg-token-main-surface-tertiary",C==="tertiary"&&"border-token-border-medium px-3 py-2 focus-within:border-token-border-xheavy focus-within:ring-1 focus-within:ring-token-text-secondary",C==="search"&&"rounded-xl border-token-border-medium bg-token-main-surface-primary p-4 focus-within:border-token-border-xheavy focus-within:ring-0 dark:border-token-border-medium dark:focus-within:border-token-border-xheavy dark:focus-within:ring-0",h),children:[i.jsx("label",{htmlFor:e,className:"block text-xs font-semibold text-token-text-primary",children:a}),i.jsxs("div",{className:A(a&&"mt-1","relative"),children:[i.jsx("input",{ref:T,type:n,name:e,id:e,list:r,"aria-label":s||void 0,className:A("block w-full border-0 p-0 placeholder-gray-500 shadow-none outline-none focus-within:shadow-none focus-within:outline-none focus-within:ring-0 focus:border-none focus:ring-0 sm:text-sm",f!=null&&"pr-6",C==="neutral"||C==="search"?"bg-transparent":"bg-token-main-surface-primary text-token-text-primary",g),placeholder:t,onBlur:k,onFocus:c,onChange:I,onKeyDown:j,autoComplete:v,autoFocus:y,disabled:x,maxLength:w,...F}),f!=null&&i.jsx(TIe,{onClick:m,children:i.jsx(f,{className:"icon-sm"})})]})]})}const Gv=J.forwardRef(CIe),TIe=fe.button`absolute right-0 top-1/2 -translate-y-1/2`,kIe=fe.div`divide-y overflow-hidden rounded-md border border-token-border-medium`,MIe=fe.button`w-full border-token-border-medium p-2 text-left text-sm hover:bg-token-main-surface-secondary`,EIe=fe.div`text-sm font-semibold`,_Ie=fe.div`text-sm text-token-text-secondary`;function Ga({header:e,subHeader:t}){return e==null&&t==null?null:i.jsxs("div",{className:"mb-4",children:[e!=null&&i.jsx(EIe,{children:e}),t!=null&&i.jsx(_Ie,{children:t})]})}function AIe({reasons:e,onSelectReason:t}){return i.jsx(kIe,{children:e.map(n=>i.jsx(MIe,{onClick:()=>{t(n)},children:n.cta},n.id))})}function PIe({reason:e,submitReport:t}){const[n,r]=p.useState(""),[s,a]=p.useState(""),[o,c]=p.useState(""),l=e.additional_fields?.map(v=>v.id),u=l?.includes(dw.UserName),d=l?.includes(dw.UserEmail),f=u||d,m=L(),h=m.formatMessage({id:"report.loggedOut.name",defaultMessage:"Your name"}),g=m.formatMessage({id:"report.loggedOut.email",defaultMessage:"Your email address"});return i.jsxs("div",{className:"flex flex-col gap-4",children:[f&&i.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[u&&i.jsxs("div",{className:"flex flex-col gap-1",children:[h,i.jsx(Gv,{ariaLabel:h,name:"name",type:"text",value:s,onChange:v=>a(v.target.value)})]}),d&&i.jsxs("div",{className:"flex flex-col gap-1",children:[g,i.jsx(Gv,{ariaLabel:g,name:"email",type:"email",value:o,onChange:v=>c(v.target.value)})]})]}),i.jsx(h5,{value:n,onChange:v=>r(v.target.value),placeholder:e.details_placeholder??void 0,autoFocus:!0,className:"!bg-token-main-surface-primary"}),e.subtext!=null&&i.jsx("div",{className:"text-sm text-token-text-secondary",children:e.subtext}),i.jsx("div",{className:"flex justify-end",children:i.jsx(ee,{onClick:()=>{let v;f&&(v={},u&&(v.user_name=s),d&&(v.user_email=o)),t.mutateAsync({reason:{id:e.id,details:n},additional_fields_values:v})},disabled:t.isPending,children:i.jsx(S,{id:"report.submitReport",defaultMessage:"Submit"})})})]})}function jIe({reason:e}){return i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"mb-2",children:e.link_explanation}),e.link_attachment!=null&&i.jsx("div",{children:i.jsx("a",{href:e.link_attachment,target:"_blank",rel:"noreferrer",className:"break-words underline",children:e.link_attachment})})]})}function IIe({reasons:e,submitReport:t,title:n,onClose:r,header:s,subHeader:a}){const[o,c]=p.useState([]),l=L();let u=e,d;for(const y of o)d=u.find(b=>b.id===y),u=d?.sub_reasons??[];const f=d!=null&&i.jsx("div",{className:"mb-2 flex gap-1 text-sm",children:i.jsxs("button",{onClick:()=>{c(y=>y.slice(0,-1))},className:"flex items-center gap-2 p-1",children:[i.jsx(P0,{className:"icon-sm"}),i.jsx("div",{children:d.cta})]})}),m=d?.subtext!=null&&i.jsx("div",{className:"text-sm text-token-text-secondary",children:d.subtext}),h=l.formatMessage({id:"report.submittedModal.header",defaultMessage:"Report submitted"}),g=l.formatMessage({id:"report.submittedModal.subHeader",defaultMessage:"You report has been submitted. Thank you for letting us know about this issue."});let v;return t.isSuccess?v=i.jsx(Ga,{header:h,subHeader:g}):d?.details_placeholder!=null?v=i.jsxs(i.Fragment,{children:[i.jsx(Ga,{header:s,subHeader:a}),f,i.jsx(PIe,{reason:d,submitReport:t})]}):d?.link_attachment!=null?v=i.jsxs(i.Fragment,{children:[i.jsx(Ga,{header:s,subHeader:a}),f,i.jsx(jIe,{reason:d}),m]}):u.length>0?v=i.jsxs(i.Fragment,{children:[i.jsx(Ga,{header:s,subHeader:a}),f,u.length>0&&i.jsx(AIe,{reasons:u,onSelectReason:async y=>{bIe(y)?t.mutateAsync({reason:{id:y.id}}):c(b=>[...b,y.id])}}),m]}):d?.subtext!=null?v=i.jsxs(i.Fragment,{children:[i.jsx(Ga,{header:s,subHeader:a}),f,i.jsx("div",{className:"text-sm",children:d?.subtext})]}):(ie.addError("Reporting: arrived at empty leaf reason",d),v=i.jsx(Ga,{header:h,subHeader:g})),i.jsx(Te,{title:n,onClose:r,isOpen:!0,showCloseButton:!0,type:"success",children:v})}function E6e({serverThreadId:e,clientThreadId:t,isStaticSharedThread:n,isDynamicSharedThread:r}){const s=zx(et.ReportConversation),a=at("2935021756")?.value,o=ot("3376455464")?.value||n||r,c=g0(t);let l=e??c;const u=p.useContext(g$);l==null&&u!=null&&(l=u.serverSharedThreadId??void 0),a&&typeof window<"u"&&(window._convo_share_debug={isOpen:s,canReport:o,serverThreadIdIsNull:l==null,isStaticSharedThread:n,isDynamicSharedThread:r});const d=L(),f=Ne();return p.useEffect(()=>{l==null&&s&&o&&(f.danger(d.formatMessage({id:"gizmo.report.conversationModal.emptyConversationError",defaultMessage:"Empty conversations cannot be reported"})),$e.closeModal(et.ReportConversation))},[l,s,o,d,f]),!s||!o||l==null?(s&&q.logEvent("chatgpt_conversation_share_report_modal_not_shown",o?"serverThreadId":"canReport"),null):i.jsx(NIe,{serverThreadId:l,onClose:()=>$e.closeModal(et.ReportConversation),isStaticSharedThread:n,isDynamicSharedThread:r})}function NIe({serverThreadId:e,onClose:t,isStaticSharedThread:n,isDynamicSharedThread:r}){const{data:s}=SIe(n||r?_l.ShareableConversation:_l.Conversation),a=L(),o=wIe(a,e,n||r?_l.ShareableConversation:_l.Conversation);return s==null||e==null?(q.logEvent("chatgpt_conversation_share_report_modal_not_shown",s==null?"report_reasons":"thread_id"),null):i.jsx(IIe,{reasons:s.reasons,submitReport:o,title:a.formatMessage({id:"gizmo.report.conversationModal.title",defaultMessage:"Report a conversation"}),onClose:t,header:s.header,subHeader:s.header_explanation})}function OIe(e,t){const n=bs(e),r=D.getTitle(e);return t&&t.kind===Me.GizmoInteraction&&t.gizmo?n?`ChatGPT - ${t.gizmo.gizmo.display.name}`:r&&`${t.gizmo.gizmo.display.name} - ${r}`:n?"ChatGPT":r}function _6e(e){const t=hl(e);return p.useMemo(()=>OIe(e,t),[e,t])}const A6e=60*60*24*30;function RIe(e){return e.author.metadata?.real_author===v$.ToolWeb}function P6e(e,t){return`https://chatgpt.com/search/evals/permalink/${e}/${t}`}function j6e(e){return Sc(e.flatMap(t=>t.type==="image_v2"?t.images:[]))}function DIe(e,t){const n={};return e.forEach(r=>{t?r.type==="grouped_webpages_v2"&&r.items.forEach(s=>{if(!s.url)return;const a=n[s.url];a?"attribution_segments"in s&&"attribution_segments"in a&&(n[s.url]={...a,attribution_segments:[...a.attribution_segments??[],...s.attribution_segments??[]]}):n[s.url]={...s}}):r.type==="webpage"||r.type==="webpage_extended"?r.url&&!n[r.url]&&(n[r.url]=r):r.type==="grouped_webpages"&&r.items.forEach(s=>{s.url&&!n[s.url]&&(n[s.url]=s)}),r.type==="businesses_map"&&Object.values(r.cite_map).forEach(s=>{s&&s.url&&(n[s.url]||(n[s.url]=s))})}),Object.values(n)}const I6e=(e,t,n)=>{const{turnIndex:r,clientThreadId:s,messageId:a}=h0("searchSources")??{},o=y$(),c=gf()&&o?.type==="searchSources",l=LIe(t,n),u=l!=null,{openThreadSidebar:d,closeThreadSidebar:f}=Mo();p.useEffect(()=>{if(c){const m=l?.message.id,h=e-1,g=t!==s,v=h>(r??-1),y=h==r&&!g&&m!=a;u&&m&&v&&(!g||g&&s===HE)?d({type:"searchSources",clientThreadId:t,turnIndex:h,messageId:m}):!g&&y&&!u&&e&&f({clientThreadId:t})}},[e,u,t])},LIe=(e,t)=>{const r=x$(e,t)?.messages.find(a=>RIe(a.message)),s=Fle();if(r){const o=b$(r?.message).length,c=w$(r?.message),l=DIe(c,s).length;return o||l?r:null}return null},CM=({label:e,value:t,onCopied:n})=>{const r=Ne(),s=a=>{ul(t,r,a),n()};return i.jsxs("div",{className:"flex flex-col space-y-2",children:[e!==void 0&&i.jsx("label",{className:"font-semibold",children:e}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{onClick:s,className:"w-full cursor-pointer break-all rounded-lg bg-token-main-surface-tertiary px-4 py-2 font-mono text-sm text-token-text-primary",children:t}),i.jsx(ee,{color:"ghost",onClick:s,icon:A0})]})]})},zb=p.createContext({rootBordered:!1});function $Ie({children:e}){return i.jsx("thead",{children:i.jsx("tr",{children:e})})}function FIe({textAlign:e="left",children:t,className:n=""}){const{rootBordered:r}=p.useContext(zb);return i.jsx("th",{className:A("text-token sticky top-0 z-10 border-b-[0.5px] border-token-border-medium bg-token-main-surface-primary py-2 font-semibold",r?"px-3":"pr-4 last:pr-0",e==="left"?"text-left":e==="right"?"text-right":"text-center",n),children:t})}function BIe({children:e,...t}){return i.jsx("tbody",{...t,children:e})}const UIe=p.forwardRef(function({children:t,disabled:n=!1,onClick:r,className:s},a){return i.jsx("tr",{ref:a,...n?{"data-disabled":!0}:{},className:A(n?"pointer-events-none":"",s),onClick:r,children:t})});function VIe({textAlign:e="left",children:t,className:n,divClassName:r="min-h-[40px] items-center",colSpan:s}){const{rootBordered:a}=p.useContext(zb);return i.jsx("td",{className:A("border-b-[0.5px] border-token-border-medium align-top",a?"px-3":"pr-4 last:pr-0 [tr:last-child_&]:border-b-0",e&&"text-"+e,n),colSpan:s,children:i.jsx("div",{className:A("flex [tr[data-disabled=true]_&]:opacity-50",e==="right"&&"justify-end",e==="center"&&"justify-center",r),children:t})})}function GIe({children:e}){return i.jsx("div",{className:"text-md flex items-center justify-end gap-2",children:e})}function WIe({children:e,fixed:t=!1,className:n,size:r="normal",bordered:s=!1}){const a=p.useRef(null),o=p.useRef(null),[c,l]=p.useState(!1);return p.useEffect(()=>{const u=a.current,d=o.current;if(u&&d){const f=new ResizeObserver(()=>{l(d.scrollHeight>u.clientHeight)});return f.observe(u),()=>f.disconnect()}},[]),i.jsx(zb.Provider,{value:{rootBordered:s},children:i.jsx("div",{className:A("overflow-y-auto text-token-text-primary",s&&"rounded-lg border border-token-border-light",r==="normal"?"text-base":"text-sm",c&&"pr-1",n),ref:a,children:i.jsx("table",{className:A("w-full border-separate border-spacing-0",t&&"table-fixed"),ref:o,children:e})})})}const HIe={Root:WIe,Header:$Ie,HeaderCell:FIe,Body:BIe,Row:UIe,Cell:VIe,Actions:GIe},Rs=HIe;function jD(e,t){return me({queryKey:["workspace/identity",e],queryFn:async()=>{if(e!==void 0)return await K.getWorkspaceIdentitySettings(e)},enabled:t})}function N6e(){const e=ln(fs.workspaceId),{data:t}=jD(e??void 0,e!=null);return t?.allow_external_domain_invites}function O6e(){const e=ln(fs.workspaceId),{data:t}=jD(e??void 0,e!=null);return p.useMemo(()=>t?.domains&&t?.domains.filter(n=>n.status==="verified"),[t?.domains])}function R6e(e){const t=L(),n=Ne();return it({mutationFn:({shouldAutoProvision:r})=>K.setWorkspaceShouldAutoProvision(e,r).then(s=>{const a=r?Hd.autoProvisionEnabledToast:Hd.autoProvisionDisabledToast;return n.success(t.formatMessage(a),{duration:3}),s}).catch(s=>{throw n.danger(s.message),s})})}function D6e(e){const t=L(),n=Ne();return it({mutationFn:async({shouldAllowExternalDomainInvites:r})=>{try{const s=await K.setWorkspaceShouldDisableExternalDomainInvites(e,r),a=r?Hd.allowExternalDomainInvitesToast:Hd.disableExternalDomainInvitesToast;return n.success(t.formatMessage(a),{duration:3}),s}catch(s){throw n.danger(s.message),s}}})}function ID(e){const t=ke();return it({mutationFn:({domainId:n})=>K.removeDomainFromWorkspace(e,n),onSuccess:()=>{t.refetchQueries({queryKey:["workspace/identity",e]}),t.refetchQueries({queryKey:["builderProfile"]})}})}function ND(e){let t=e;return t.startsWith("-----BEGIN")||(t=`-----BEGIN CERTIFICATE-----
${t}`),t.endsWith("CERTIFICATE-----")||(t=`${t}
-----END CERTIFICATE-----`),t}function L6e(e){const t=ke();return it({mutationFn:({signInEndpoint:n,cert:r})=>K.createSAMLConnection(e,n,ND(r)),onSuccess:()=>{t.refetchQueries({queryKey:["workspace/identity",e]})}})}function $6e(e){const t=ke();return it({mutationFn:({connectionId:n,signInEndpoint:r,cert:s,active:a,enforcedClients:o})=>K.updateSAMLConnection(e,n,{signInEndpoint:r,cert:s!==void 0?ND(s):void 0,active:a,enforcedClients:o}),onSuccess:()=>{t.refetchQueries({queryKey:["workspace/identity",e]})}})}function F6e(e){const t=ke();return it({mutationFn:({connectionId:n})=>K.deleteSAMLConnection(e,n),onSuccess:()=>{t.refetchQueries({queryKey:["workspace/identity",e]})}})}const B6e=fe.div`text-md mb-4 text-token-text-secondary`,U6e={[no.VERIFIED]:Pi({id:"i7FkyS",defaultMessage:"Verified"}),[no.PENDING]:Pi({id:"THBv/l",defaultMessage:"Pending"}),[no.EXPIRED]:Pi({id:"+sjWGK",defaultMessage:"Expired"})},Hd=z({autoProvisionEnabledToast:{id:"workspaceIdentity.autoProvisionEnabledToast",defaultMessage:"Auto provisioning enabled for this workspace"},autoProvisionDisabledToast:{id:"workspaceIdentity.autoProvisionDisabledToast",defaultMessage:"Auto provisioning disabled for this workspace"},allowExternalDomainInvitesToast:{id:"j0jI/4",defaultMessage:"External domain invites are allowed for this workspace"},disableExternalDomainInvitesToast:{id:"67yB97",defaultMessage:"External domain invites are disabled for this workspace"}});function zIe(e){const t=ke(),n=Ne();return it({mutationFn:({hostname:r})=>K.addDomainToWorkspace(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:r=>{n.danger(r.message)}})}function qIe(e){const t=ke(),n=Ne();return it({mutationFn:({domainId:r})=>K.checkDomainForWorkspace(e,r),onSuccess:()=>{t.invalidateQueries({queryKey:["workspace/identity",e]}),t.invalidateQueries({queryKey:["builderProfile"]})},onError:r=>{n.danger(r.message)}})}function YIe({workspaceId:e,isOpen:t,onClose:n,currentDomain:r,domains:s=[],showUnverifiedDomains:a=!1,onVerifyDomain:o}){const c=L(),l=Ne(),{mutateAsync:u,isPending:d}=zIe(e),{mutateAsync:f,isPending:m}=qIe(e),[h,g]=p.useState(r??void 0),[v,y]=p.useState(r?.hostname),[b,x]=p.useState(r?.status===void 0?0:r?.status===no.PENDING?1:2),w=()=>{r||(g(void 0),x(0))},C=async()=>{if(v===void 0)return;const k=s.find(I=>I.hostname===v&&I.status===no.PENDING);if(k)g(k),x(1);else{const I=await u({hostname:v});"id"in I&&g(I),x(1)}},T=i.jsx(Ke.Button,{title:c.formatMessage(Ft.check),color:"primary",disabled:h?.id===void 0||m,onClick:async()=>{if(h?.id){const k=await f({domainId:h.id});"error"in k&&l.danger(c.formatMessage(Ft.domainCheckError,{message:k.error.message})),"id"in k&&(o&&o(k),k.status===no.VERIFIED&&x(2))}}}),M=i.jsx(Ke.Button,{title:c.formatMessage(Ft.submit),color:"primary",disabled:v===void 0||d,onClick:C}),_=i.jsx(Ke.Button,{title:c.formatMessage(Ft.done),color:"primary",onClick:()=>{w(),n()}});return i.jsxs(Te,{isOpen:t,onClose:()=>{w(),n()},type:"success",className:"text-token-text-secondary",title:c.formatMessage(b===0?Ft.newTitle:Ft.editTitle),primaryButton:b===0?M:b===1?T:_,secondaryButton:i.jsx(Ke.Button,{title:c.formatMessage(Ft.cancel),color:"secondary",onClick:()=>{w(),n()}}),children:[b===0&&i.jsx(XIe,{hostname:v,onSetHostname:y,onSubmit:C,unverifiedDomains:a?s:[],onVerifyDomain:k=>{x(1),g(k)},workspaceId:e}),b===1&&i.jsxs("div",{className:"flex flex-col gap-3",children:[c.formatMessage(Ft.verificationTokenMessage,{hostname:h?.hostname}),h?.dns_verification_token_string&&i.jsx(CM,{value:h.dns_verification_token_string,onCopied:()=>{l.success(c.formatMessage(Ft.copiedTXTRecordToClipboard),{duration:3})}}),i.jsx(S,{...Ft.verificationTokenFooter})]}),b===2&&i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx(S,{...Ft.successfulVerification,values:{hostname:h?.hostname}}),h?.dns_verification_token_string&&i.jsx(CM,{value:h.dns_verification_token_string,onCopied:()=>{l.success(c.formatMessage(Ft.copiedTXTRecordToClipboard),{duration:3})}})]})]})}function KIe({unverifiedDomains:e,onVerifyDomain:t,workspaceId:n}){const{mutateAsync:r}=ID(n);return i.jsxs(Rs.Root,{fixed:!0,size:"compact",className:"mb-6 border-b border-token-border-light",children:[i.jsxs(Rs.Header,{children:[i.jsx(Rs.HeaderCell,{children:i.jsx(S,{...Ft.unverifiedDomainsTableHeader})}),i.jsx(Rs.HeaderCell,{textAlign:"right"})]}),e.map(s=>i.jsxs(Rs.Row,{children:[i.jsx(Rs.Cell,{children:s.hostname}),i.jsx(Rs.Cell,{textAlign:"right",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{color:"secondary",size:"small",onClick:()=>t(s),children:i.jsx(S,{...Ft.verifyDomainButton})}),i.jsx(ee,{color:"secondary",size:"small",onClick:()=>r({domainId:s.id}),icon:jc})]})})]},s.id))]})}function XIe({hostname:e,onSetHostname:t,onSubmit:n,unverifiedDomains:r,onVerifyDomain:s,workspaceId:a}){const o=L();return i.jsxs(i.Fragment,{children:[r&&r.length>0&&i.jsx(KIe,{workspaceId:a,unverifiedDomains:r,onVerifyDomain:s}),i.jsx("form",{onSubmit:c=>{c.preventDefault(),n()},children:i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{htmlFor:"hostname",className:"mb-2 flex items-center text-sm font-semibold",children:i.jsx(S,{...Ft.domainInput})}),i.jsx(Gv,{ariaLabel:!1,name:"hostname",placeholder:o.formatMessage(Ft.placeholder),value:e??"",onChange:c=>{t(c.target.value)}})]})})]})}const Ft=z({newTitle:{id:"domainModal.newTitle.0",defaultMessage:"Verify a new domain"},editTitle:{id:"domainModal.editTitle",defaultMessage:"Manage Domain"},submit:{id:"domainModal.submit",defaultMessage:"Submit"},check:{id:"domainModal.check",defaultMessage:"Check"},done:{id:"domainModal.done",defaultMessage:"Done"},cancel:{id:"domainModal.cancel",defaultMessage:"Cancel"},domainInput:{id:"domainModal.domainInput.0",defaultMessage:"Add a new domain"},placeholder:{id:"domainModal.placeholder",defaultMessage:"openai.com"},domainCheckError:{id:"domainModal.domainCheckError",defaultMessage:"Your domain could not be verified: {message}"},verificationTokenMessage:{id:"domainModal.verificationTokenMessage",defaultMessage:"To verify ownership of {hostname}, navigate to your DNS provider and add a TXT record with this value:"},verificationTokenFooter:{id:"domainModal.verificationTokenFooter",defaultMessage:"Then, check the record to complete the verification."},successfulVerification:{id:"domainModal.successfulVerification.0",defaultMessage:'Your domain, "{hostname}" has been successfully verified'},copiedTXTRecordToClipboard:{id:"domainModal.copiedTXTRecordToClipboard",defaultMessage:"Copied DNS TXT record to clipboard"},verifyDomainButton:{id:"domainModal.verifyDomainButton",defaultMessage:"Verify"},unverifiedDomainsTableHeader:{id:"domainModal.unverifiedDomainsTableHeader",defaultMessage:"Your unverified domains"}}),QIe="#settings/BuilderProfile";function V6e({selectedDomain:e,verifiedDomains:t,domains:n,onChangeDomain:r}){const[s,a]=p.useState(!1),o=t.length>0,c=Ce()?.id,l=Ce()?.isEnterprisey(),{mutateAsync:u}=ID(c);return i.jsxs("div",{className:"font-normal",children:[i.jsxs(ne.Root,{children:[i.jsx(S$,{children:i.jsxs("span",{className:"flex items-center gap-2 py-2",children:[e??i.jsx(S,{...Wv.selectADomain}),i.jsx(v6,{className:"icon-md"})]})}),i.jsx(ne.Portal,{children:i.jsxs(ne.Content,{children:[i.jsx(ne.RadioGroup,{value:e,onValueChange:d=>{d!==e&&r(d)},children:t.map(({id:d,hostname:f})=>i.jsx(ne.RadioItem,{value:f,children:i.jsxs("div",{className:"flex flex-row",children:[i.jsx("span",{children:f}),i.jsx("span",{onClick:()=>{u({domainId:d}),r("")},children:i.jsx(jc,{className:"icon-sm fixed right-4"})})]})},d))}),o&&i.jsx(ne.Separator,{}),i.jsx(ne.Item,{onClick:()=>{a(!0)},icon:yf,children:i.jsx(S,{...Wv.addDomain})})]})})]}),c&&!l&&i.jsx(YIe,{domains:n,isOpen:s,onClose:()=>a(!1),workspaceId:c,showUnverifiedDomains:!0,onVerifyDomain:d=>{r(d.hostname)}})]})}function ZIe(){const e=ke();return it({mutationFn:({verifierType:t})=>tt.unverifySocialAuth(t),onSuccess:()=>{e.refetchQueries({queryKey:["builderProfile"]})}})}function JIe({socialData:e}){const{type:t,display_name:n,verified_data:r}=e,s=t==="twitter"?u_:t==="linkedin"?d_:t==="github"?f_:null;return s?i.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[i.jsxs("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[s({className:"icon-md"}),i.jsx("span",{children:n})]}),r?.link_to&&i.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:r.link_to,className:"text-sm text-token-text-tertiary hover:cursor-pointer",children:i.jsx(Xs,{className:"icon-sm"})})]}):null}function G6e({socialData:e,icon:t}){const{id:n,type:r,display_name:s,verified:a,verified_data:o}=e,[c,l]=p.useState(!1),u=ZIe();return i.jsxs("div",{className:"flex flex-row items-center justify-between space-y-1",children:[i.jsxs("div",{className:A("flex items-center space-x-2"),children:[i.jsx(t,{className:"icon-sm"}),i.jsx("span",{children:s}),a&&o?.username&&i.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:o.link_to,className:"text-sm text-token-text-tertiary hover:cursor-pointer",children:o?.username})]}),a?i.jsx("div",{className:"py-1 font-semibold hover:cursor-pointer",onClick:()=>{u.mutate({verifierType:r})},children:u.isPending?i.jsx(cn,{}):i.jsx(Po,{className:"icon-sm text-token-text-tertiary"})}):i.jsx(ee,{size:"small",color:"secondary",loading:c,onClick:async()=>{l(!0),await eEe({id:n},QIe),l(!1)},children:i.jsx(S,{...Wv.verify})})]})}const Wv=z({verify:{defaultMessage:"Add",id:"GizmoSocialRow.add"},addDomain:{id:"GizmoSocialRow.addDomain",defaultMessage:"Verify new domain"},selectADomain:{id:"GizmoSocialRow.selectADomain",defaultMessage:"Select a domain"}}),eNe=fe.div`text-sm text-token-text-tertiary`,tNe="community builder";function nNe(e){const[t,n]=p.useState(e),r=p.useRef(null),s=(a,o)=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{n(a),r.current=null},o)};return p.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]),[t,s]}function rNe(e){return"gizmo"in e}function W6e({gizmo:e,builderName:t,builderUrl:n,className:r,socials:s,hideLink:a=!1}){const{value:o}=ot("2256850471");let c,l;e&&rNe(e)?(c=e.gizmo.author.display_name,l=e.gizmo.author.link_to):(c=t,l=n),(c===""||c==null)&&(c=tNe);const u=s?.filter(f=>f.verified),d=i.jsxs("div",{className:"w-48 space-y-4 text-sm",children:[l&&i.jsxs("div",{className:"flex w-full flex-row items-center justify-between",children:[i.jsxs("div",{className:"flex flex-row items-center space-x-2 text-token-text-primary",children:[i.jsx(m_,{className:"icon-md"}),i.jsx("span",{children:i.jsx(S,{id:"gizmo.author.websiteLabel",defaultMessage:"Website"})})]}),i.jsx("a",{target:"_blank",rel:"noopener noreferrer",href:l,className:"text-token-text-tertiary hover:cursor-pointer",children:i.jsx(Xs,{className:"icon-sm"})})]}),o&&u?.map((f,m)=>f.verified?i.jsx(JIe,{socialData:f},m):null),i.jsxs("div",{className:"text-xs text-token-text-tertiary",children:[(l||u&&u.length>0)&&i.jsx("hr",{className:"my-2 border-token-border-light"}),i.jsx(S,{id:"gizmo.author.cannotViewLabel",defaultMessage:"The builder of this GPT cannot view your conversations."})]})]});return i.jsxs("div",{className:"flex flex-row items-center space-x-1",children:[i.jsx(eNe,{className:r,children:i.jsx(S,{id:"gizmo.author.byLabel",defaultMessage:"By {displayName}",values:{displayName:c}})}),!a&&i.jsx(sNe,{socials:s,website:l,children:d})]})}function sNe({website:e,socials:t,children:n}){const[r,s]=nNe(!1);let a=[];e&&a.push(i.jsx(m_,{className:"icon-xs text-token-text-secondary"})),t&&t.forEach(c=>{c.verified&&(c.type==="twitter"?a.push(i.jsx(u_,{className:"icon-xs text-token-text-secondary"})):c.type==="linkedin"?a.push(i.jsx(d_,{className:"icon-xs text-token-text-secondary"})):c.type==="github"&&a.push(i.jsx(f_,{className:"icon-xs text-token-text-secondary"})))});const o=a.length-2;return a=a.slice(0,2),o>0&&a.push(i.jsxs("span",{className:"text-xs font-semibold text-token-text-secondary",children:["+",o]},"overflow")),i.jsx(Ax,{open:r,onOpenChange:c=>s(c,0),children:i.jsxs("div",{onPointerLeave:()=>s(!1,300),children:[i.jsx(pd,{asChild:!0,children:i.jsx("div",{onPointerEnter:()=>s(!0,0),children:a.length>0?i.jsx("div",{className:"flex items-center gap-1 rounded-xl bg-token-main-surface-secondary px-2 py-1",children:a}):i.jsx(y0,{className:"icon-xs text-token-text-secondary"})})}),i.jsx(Px,{side:"top",sideOffset:8,align:"center",className:"z-10 rounded-lg bg-token-main-surface-primary p-4 drop-shadow-md",children:i.jsx("div",{onPointerEnter:()=>s(!0,0),children:n})})]})})}function H6e(e){const t=mr();return!Ce()?.isWorkspaceAccount()||(t?.includes(e)??!1)}const aNe=({inMobileHeader:e=!1,children:t,onDismiss:n})=>{const{config:r,isLoading:s}=C$("743318407"),a=r.get("show_nux",!1),o=!s&&a;return i.jsx(Om,{announcementKey:je.hasSeenCanvasDropdownNux,side:"bottom",align:e?"center":"start",sideOffset:0,show:o,title:i.jsx(S,{...Bh.title}),description:i.jsxs("span",{children:[i.jsx(S,{...Bh.description}),i.jsx(gA,{type:"neutral",openNewTab:!0,href:"https://openai.com/index/introducing-canvas/",className:"ml-1",children:i.jsx(S,{...Bh.link})})]}),onDismiss:n,theme:"bright",children:t})},z6e=({inMobileHeader:e=!1,children:t})=>{const{isLoading:n,eligible:r,markAsViewed:s}=Be(je.hasSeenCanvasDropdownNux),{store:a}=Rb(),o=a.useHasAnnouncementInHeader();return n||!r||o?i.jsx(i.Fragment,{children:t}):i.jsx(aNe,{inMobileHeader:e,onDismiss:s,children:t})},Bh=z({title:{id:"Sh/ho6",defaultMessage:"You've got access to canvas"},description:{id:"6JEoci",defaultMessage:"Collaborate with ChatGPT to write and code in a dedicated space."},link:{id:"GtDcBu",defaultMessage:"Learn more"}}),oNe=()=>{const e=Jt(),t=Jo(),n=Ta(iNe.signUpCta),r=EE(),s=()=>{e({authType:"login",callback:l=>{E.logLogInButtonClicked({location:"Model switcher dropdown",provider:l}),q.logEvent("chatgpt_modelswitcher_login_button_clicked")}})},a=()=>{e({authType:"signup",callback:l=>{E.logSignUpButtonClicked({location:"Model switcher dropdown",provider:l}),q.logEvent("chatgpt_modelswitcher_signup_button_clicked")}})},o=i.jsx(ee,{as:"button",size:"medium",color:t?"primary":"secondary",onClick:s,children:i.jsx(S,{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"})}),c=i.jsx(ee,{as:"button",size:"medium",color:t?"secondary":"primary",onClick:a,children:i.jsx(S,{...n})});return i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-md mb-1 font-medium text-token-text-primary",children:t?r?i.jsx(S,{id:"bEtrO8",defaultMessage:"Log in to use other models"}):i.jsx(S,{id:"5JLF3H",defaultMessage:"Log in to try advanced features"}):r?i.jsx(S,{id:"mTr8UT",defaultMessage:"Sign up to use other models"}):i.jsx(S,{id:"g7yYMy",defaultMessage:"Sign up to try GPT 4o for free"})}),i.jsx("p",{className:"text-sm text-token-text-secondary",children:r?i.jsx(S,{id:"Vyn8f0",defaultMessage:"To access more intelligence, create an account or log in."}):i.jsx(S,{id:"pyWwm8",defaultMessage:"Get smarter responses, upload files, analyze images, and more by logging in."})})]}),i.jsx("div",{className:"flex flex-row justify-start space-x-2",children:t?[o,c]:[c,o]})]})},iNe=z({signUpCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"}});function cNe({clientThreadId:e,currentLeafId:t}){const{currentModelId:n}=ka(),r=hl(e),s=T$(e,t),a=Ec(e),o=Vn(),c=IO(n),l=bs(e)&&!s&&(GO(r)||r?.kind===Me.GizmoTest),u=Zo(a);return{showEmptyState:l,canUseNewHomepage:l&&u||l&&!a&&!c&&!o}}const TM=fe.button`group flex cursor-pointer items-center gap-1 rounded-lg py-1.5 ${({$shimmer:e})=>e?"loading-shimmer":""} ${({$isScreenArch:e})=>e?"text-md px-2":"px-3 text-lg"} hover:bg-token-main-surface-secondary radix-state-open:bg-token-main-surface-secondary font-semibold text-token-text-secondary overflow-hidden whitespace-nowrap`;function lNe({conversation:e,gizmoResource:t}){const n=k$(e.id)??e.title;return i.jsx(En,{to:wo(e.id,t),children:i.jsx(ne.Item,{icon:QE,children:n},e.id)})}function uNe({gizmoId:e,clientThreadId:t,inMobileHeader:n}){const r=L(),{data:s}=Ss(e),a=U7(e),{title:o,titleSource:c}=jE(t),l=yn(),{conversationLeafId:u}=ka(),{showEmptyState:d}=cNe({clientThreadId:t,currentLeafId:u}),f=AE(t),m=Eye(),h=r.formatMessage(Oe.newChatTitle),{resolvedTitle:g,isTypingEffect:v}=a5(t,o??null,!0);if(!s||d)return null;const y=g==null&&(bs(t)||c===kc.NewChat),b=f?i.jsx(i.Fragment,{}):i.jsxs(TM,{$isScreenArch:l,$shimmer:y,children:[v?i.jsx(i5,{text:g??""}):g??h,i.jsx(w0,{className:"icon-md text-token-text-tertiary"})]}),x=m&&s.gizmo.display.emoji?i.jsxs(i.Fragment,{children:[s.gizmo.display.emoji," ",s.gizmo.display.name]}):s.gizmo.display.name;return i.jsxs("div",{className:"flex items-center gap-1 overflow-hidden whitespace-nowrap px-2 py-1.5",children:[i.jsx(TM,{$isScreenArch:l,children:i.jsx(En,{to:aa(s),children:x})}),i.jsxs(i.Fragment,{children:[i.jsx(va,{className:"icon-md text-token-text-tertiary"}),i.jsxs(ga,{contentAlign:n?"center":"start",size:"small",triggerButton:b,children:[i.jsx(En,{to:aa(s),children:i.jsx(ne.Item,{icon:b0,children:i.jsx(S,{...Oe.newChatProjectDropdownItem,values:{name:`"${s.gizmo.display.name}"`}})},"new-chat")}),a.data?.items.map(w=>w.id!==t?i.jsx(lNe,{conversation:w,gizmoResource:s},w.id):null)]})]})]})}const OD=({categoryId:e,type:t,className:n})=>{const{data:r,isLoading:s}=A7(),a=i.jsx("div",{className:n});if(s)return a;const{iconFilledSrc:o,iconOutlineSrc:c}=r?.[e]??{},l=(t==="filled"?o:c)??"";return i.jsx(GE,{name:"ModelCategoryIcon",fallback:a,children:i.jsx("div",{className:A("[&_svg]:h-full [&_svg]:w-full",n),dangerouslySetInnerHTML:{__html:l}})})};function RD({modelSwitcherDeny:e}){switch(e.reason){case ai.UNSUPPORTED_TOOL_USE:case ai.UNSUPPORTED_AUDIO:case ai.UNSUPPORTED_IMAGE:case ai.UNSUPPORTED_GIZMO:case ai.UNSUPPORTED_ATTACHMENT:return i.jsx(i.Fragment,{children:e.description});case Xd.RATE_LIMIT:{const{resetsAfter:n}=e,r=new Date(n),s=new Date(n).toLocaleTimeString([],{hour:"numeric",minute:"2-digit"});if(Vxe(r))return i.jsx(S,{id:"HUybjA",defaultMessage:"Your limit will reset at {time}",values:{time:s}});if(Gxe(r))return i.jsx(S,{id:"TvYw9K",defaultMessage:"Your limit will reset at {time} tomorrow",values:{time:s}});{const a=r.toLocaleDateString([],{month:"short",day:"numeric"});return i.jsx(S,{id:"60ZcZL",defaultMessage:"Your limit will reset on {date}",values:{date:a}})}}}const t=e.description;return t?i.jsx(i.Fragment,{children:t}):i.jsx(S,{id:"wGF6eE",defaultMessage:"This model is not supported."})}function dNe({currentModel:e,categoryOptions:t,className:n,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s=!1}){const a=e?.id;return i.jsx(ne.Portal,{children:i.jsx(ne.SubContent,{className:n,children:t.map(o=>{const{value:c}=o;return"options"in o?i.jsx(Ei,{currentModel:e,isSelected:a.startsWith(c),option:o,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s},c):i.jsx(zd,{isSelected:a===c,value:c,renderName:()=>o.name,modelSwitcherDenialsBySlug:r,showNewChatHint:!1,displayInFull_INTERNAL_USE_ONLY:s},c)})})})}function Ei({currentModel:e,option:t,isSelected:n=!1,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s=!1}){const{name:a,options:o,categoryId:c}=t,l=`${a} Models`,u=()=>i.jsx("div",{className:"flex shrink-0 grow justify-between gap-2",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(y6,{className:"icon-md w-7 text-token-text-secondary"}),l]})});let d;return s&&n&&(d=t.options.find(f=>f.value===e.id)?.name),i.jsxs(ne.Sub,{children:[i.jsx(ne.SubMenuTrigger,{children:i.jsxs("div",{className:A("flex grow justify-between gap-2 overflow-hidden",s?"items-center break-all":""),children:[c?u():a,n&&i.jsx("div",{className:"truncate text-token-text-tertiary",children:d??e.title})]})}),i.jsx(dNe,{currentModel:e,categoryOptions:o,modelSwitcherDenialsBySlug:r,displayInFull_INTERNAL_USE_ONLY:s})]})}function zd({value:e,renderName:t,isSelected:n,showNewChatHint:r=!0,onClick:s,modelSwitcherDenialsBySlug:a,isUpgradeUpsell:o=!1,testId:c,displayInFull_INTERNAL_USE_ONLY:l=!1}){const u=Dc(),d=gSe(),f=e?a[e]?.conversation?.[0]:null,{layer:m}=_n("1846737571"),h=i.jsx(ne.Item,{onClick:()=>{if(s)s();else if(e){const g=e;u({modelId:g,location:"Model switcher menu item"}),d(g)}},className:A("!pr-3",n&&"!opacity-100",f&&"pointer-events-none text-token-text-quaternary"),"data-testid":c,children:i.jsxs("div",{className:"flex grow items-center justify-between gap-2",children:[i.jsx("div",{className:l?"break-all":"",children:t(f!=null)}),o&&i.jsx(ee,{color:"secondary",size:"small",className:m.get("is_upgrade_button_blue",!1)?"border-none bg-blue-600 text-white hover:bg-blue-800":"",children:i.jsx(S,{id:"oKo8wt",defaultMessage:"Upgrade"})}),o?i.jsx(i.Fragment,{children:n&&i.jsx(p_,{className:A("icon-md group-hover:invisible",!r&&"block group-hover:hidden")})}):n&&i.jsx(l_,{className:"icon-md"})]})},e);return f?i.jsx(Ye,{isLeftArrow:!0,sideOffset:-10,label:i.jsx(RD,{modelSwitcherDeny:f}),children:h}):h}function fNe(e){if(e<60)return{type:"minute",value:e,text:e<2?"minute":`${e} minutes`};const t=Math.floor(e/60);if(t<24)return{type:"hour",value:t,text:t<2?"hour":`${t} hours`};const n=Math.floor(t/24);return n<7?{type:"day",value:n,text:n<2?"day":`${n} days`}:{type:"minute",value:e,text:e<2?"minute":`${e} minutes`}}const Uh={textarea:"","model-switcher":""};function mNe(){const e=il(c=>c.isoDate),t=Y_(e),n=L(),r=ln(fs.isEnterpriseyPlan),{isUnauthenticated:s,isLoading:a}=bt(),{data:o}=me({queryKey:["modelMessageCap",s],queryFn:()=>K.getModelMessageCap(s),enabled:!a});return p.useMemo(()=>{const c=o?.message_cap??0,l=o?.message_cap_window??1,{text:u,type:d,value:f}=fNe(l),m=o?.message_disclaimer??Uh;if(!u||r)return{textareaDisclaimer:m.textarea,modelSwitcherDisclaimer:m["model-switcher"],modelSwitcherLimitShort:""};if(!o||!l||!c)return{textareaDisclaimer:Uh.textarea,modelSwitcherDisclaimer:Uh["model-switcher"],modelSwitcherLimitShort:""};let h=n.formatMessage(Vh.shortLimitMinutes,{numerator:c,denominator:f});switch(d){case"hour":h=n.formatMessage(Vh.shortLimitHours,{numerator:c,denominator:f});break;case"day":h=n.formatMessage(Vh.shortLimitDays,{numerator:c,denominator:f});break}return{textareaDisclaimer:m.textarea.replaceAll("%FORMATTED_TIME%",t).replaceAll("%NUMERATOR%",`${c}`).replaceAll("%DENOMINATOR%",u),modelSwitcherDisclaimer:m["model-switcher"].replaceAll("%FORMATTED_TIME%",t).replaceAll("%NUMERATOR%",`${c}`).replaceAll("%DENOMINATOR%",u),modelSwitcherLimitShort:h}},[o,t,n,r])}const Vh=z({shortLimitMinutes:{id:"modelCapMessaging.shortLimitMinutes",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# minute} one {# minute} other {# minutes}}"},shortLimitHours:{id:"modelCapMessaging.shortLimitHours",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# hour} one {# hour} other {# hours}}"},shortLimitDays:{id:"modelCapMessaging.shortLimitDays",defaultMessage:"Limit {numerator, plural, =0 {# message} one {# message} other {# messages}} / {denominator, plural, =0 {# day} one {# day} other {# days}}"}});var DD=(e=>(e.CODE_INTERPRETER="code_interpreter_model",e.DALLE="dalle_model",e))(DD||{}),xr=(e=>(e.ALPHA="alpha",e.DATA_CAMPAIGNS="data_campaigns",e.EXPERIMENTS="experiments",e.MAINLINE="mainline",e))(xr||{});const kM={code_interpreter_model:{name:"Advanced Data Analysis"},dalle_model:{name:"DALLE 3"}};function q6e(e){const t=pNe(e??void 0);return bf(["alpha","data_campaigns","experiments","mainline"],t)?"bg-orange-500 text-white":"bg-token-main-surface-primary text-token-text-primary"}function pNe(e){const t=qb();for(const n of t)if(n.options.length>0&&n.options.find(s=>s.value===e))return n.categoryId;return null}function hNe(e,t){const{data:n}=ws();return n?.categories.some(s=>s[t]===e)??!1}const gNe=e=>q0(e,({id:t})=>t.split(":").slice(0,1).join(":"));function qb(){const{data:e}=ws(),t=kue(),{modelSwitcherDisclaimer:n}=mNe(),r=rA();return p.useMemo(()=>{const s=[];if(!e)return s;const{categories:a,groups:o,modelsMap:c}=e;for(const l of a){const{defaultModel:u,categoryId:d,label:f}=l;if(r.has(u)){const m=t===u,h=e.modelsMap[u],g=m?[]:vNe(l,r,e.modelsMap);s.push({categoryId:d,value:u,name:f,description:m?n:h.description,options:[Wi(h,{name:"Default"}),...g]})}}for(const l of o){const{group:u,label:d,modelIds:f}=l,m=f[0],h=f.map(g=>c[g]).filter(({tags:g})=>!g.includes(Ys.HIDDEN));if(u==="experiments"){const g=gNe(h),v=Object.entries(g).map(([y,b])=>{const x=y.split(":").slice(-1)[0];return{key:y,value:x,name:x,options:b.map(w=>{const{title:C}=w;return Wi({...w,title:C.replace(x,"")})})}});s.push({categoryId:u,value:m,name:d,options:v})}else s.push({categoryId:u,value:m,name:d,options:h.map(g=>Wi(g))})}return s},[e,r,t,n])}function Wi(e,t={}){return{value:e.id,name:e.title,...t}}function vNe(e,t,n){const r=[];if(e.code_interpreter_model!=null&&t.has(e.code_interpreter_model)){const s=kM.code_interpreter_model;r.push(Wi(n[e.code_interpreter_model],{name:s.name}))}if(e.dalle_model!=null&&t.has(e.dalle_model)){const s=kM.dalle_model;r.push(Wi(n[e.dalle_model],{name:s.name}))}return r}const yNe=Xe(()=>qe(()=>import("./dtw7olj27tq8h4jv.js"),__vite__mapDeps([62,1,2,3,63])).then(e=>e.ThreadHeaderGizmoDropdown)),MM=fe.button`group flex cursor-pointer items-center gap-1 rounded-lg py-1.5 ${({$isScreenArch:e})=>e?"h-[44px] @lg/screen-composer:pl-3 [line-height:26px] [font-size:17px] pl-1 pr-3":"px-3 text-lg"} hover:bg-token-main-surface-secondary radix-state-open:bg-token-main-surface-secondary font-semibold text-token-text-secondary overflow-hidden whitespace-nowrap`;function xNe({clientThreadId:e}){const t=L(),n=Vn(),r=_c(e),s=ze(),[,a]=pa(),o=()=>{!r&&!n?s({pathname:"/",search:new URLSearchParams({[iu]:"true"}).toString()}):a(c=>(c.get(iu)==="true"?c.delete(iu):c.set(iu,"true"),c),{replace:r,state:cb()})};return i.jsx(ne.Item,{size:"large",className:"!pr-3",onClick:o,icon:S0,children:i.jsxs("div",{className:"flex grow items-center justify-between gap-2",children:[i.jsx("div",{className:"flex flex-1 items-center gap-3",children:i.jsx(S,{...FD.temporaryChat})}),i.jsx(fO,{enabled:n,label:t.formatMessage({defaultMessage:"Temporary",id:"temporaryChatToggleLabel"}),testId:"temporary-chat-toggle"})]})})}function LD(e,t,n){let r=e;if(e===fw.AUTO){const o=t.filter(({defaultModel:c})=>c!==fw.AUTO);o.length===1&&(r=o[0].defaultModel)}const s=t.find(({defaultModel:o})=>o===r);if(s){const{categoryId:o,shortLabel:c}=s;return{selectedCategory:o,modelLabel:c}}const a=n.find(({modelIds:o})=>o.includes(r));if(a){const{group:o,shortLabel:c}=a;return{selectedCategory:o,modelLabel:c}}return{selectedCategory:null,modelLabel:null}}function bNe({modelLabel:e}){return i.jsx("span",{className:"overflow-x-clip text-ellipsis text-token-text-secondary",children:e})}function wNe({clientThreadId:e,inMobileHeader:t}){const{isLoading:n,categories:r,groups:s}=Rc(),a=M$(),c=No(e).id,l=qb(),{modelLabel:u}=LD(c,r,s),d=CNe(e,l),f=L(),{isUnauthenticated:m}=bt(),h=$D(),g=(!m||!h)&&!a;p.useEffect(()=>{n||yR({namespace:bb.ChatPageLoad})?.logTiming("render_model_switcher")},[n]);const v=yn(),y=i.jsxs("div",{className:A(v?"overflow-x-hidden text-ellipsis":"text-token-text-secondary"),children:[Ige," ",g?i.jsx("span",{className:"text-token-text-secondary",children:u}):m&&u?i.jsx(bNe,{modelLabel:u}):null]});return d.length?n?null:i.jsx(ga,{sideOffset:8,size:"large",triggerButton:i.jsxs(MM,{$isScreenArch:v,"aria-label":u?f.formatMessage({id:"JrtGPQ",defaultMessage:"Model selector, current model is {modelLabel}"},{modelLabel:u}):"",children:[y,v?i.jsx(x6,{className:"icon-md text-token-text-tertiary"}):i.jsx(w0,{className:"icon-md text-token-text-tertiary"})]}),onOpenChange:b=>{E.logEvent(P.toggleModelSwitcher,{isOpen:b}),q.logEvent("toggle_model_switcher",null,{isOpen:String(b)})},contentAlign:t?"center":"start",testId:"model-switcher-dropdown",children:i.jsx(kNe,{sections:d})}):i.jsx(MM,{className:"cursor-default",children:y})}function $D(){return at("462735957").value}function SNe({category:e,modelSwitcherDenialsBySlug:t,currentGizmoId:n,currentModelId:r,omitIcon:s,testId:a}){const{defaultModel:o,label:c,categoryId:l,description:u,isBeta:d}=e;return i.jsx(zd,{value:o,modelSwitcherDenialsBySlug:t,renderName:f=>i.jsx(Hv,{categoryId:l,name:c,description:u,isDisabled:f,omitIcon:s,isBeta:d}),isSelected:!n&&r===o,testId:a},o)}function CNe(e,t){const n=No(e),r=n.id,s=Ec(e),{categories:a,groups:o}=Rc(),{doesUserHaveAnyAccountsWithPlusFeatures:c}=fa(),l=D.getServerThreadId(e),u=K0({clientThreadId:e}),d=L(),f=!l,{isUnauthenticated:m}=bt(),h=Jt(),{layer:g}=_n("2723963139"),v=g.get("is_dynamic_model_enabled",!1),y=$D(),b=t.find(({categoryId:Y})=>Y===xr.ALPHA),x=t.find(({categoryId:Y})=>Y===xr.DATA_CAMPAIGNS),w=t.find(({categoryId:Y})=>Y===xr.EXPERIMENTS),C=t.find(({categoryId:Y})=>Y===xr.MAINLINE),T=!0,M=!!b?.options?.length,_=!!x?.options?.length,k=!!w?.options?.length,I=!!C?.options?.length,j=ze(),F=p.useCallback(()=>{E.logEvent(P.openModalAccountPaymentfromModelPicker,{content:"gizmo-button"}),Rr(j,"Thread header dropdown")},[j]),U=()=>{q.logEvent("chatgpt_model_switcher_plus_upgrade_button_clicked"),E.logEvent(P.modelSwitcherPlusUpgradeButtonClicked),m?h({shouldOpenPaymentModalOnAuth:!0,callback:Y=>{E.logSignUpButtonClicked({location:"Model switcher GPT-4 upsell",provider:Y})}}):F()},B=[],N=i.jsxs("div",{className:"mb-1 flex items-center justify-between px-5 pt-2",children:[i.jsx("span",{className:"text-sm text-token-text-tertiary",children:i.jsx(S,{id:"ilkdMh",defaultMessage:"Model"})}),i.jsx("a",{href:v?"https://help.openai.com/en/articles/9155758-what-is-the-chatgpt-plus-model-selector":"https://help.openai.com/en/articles/7102672-how-can-i-access-gpt-4",target:"_blank",rel:"noreferrer",children:i.jsx(Pc,{className:"icon-md h-5 w-5 pl-0.5 text-token-text-tertiary"})})]},"header");if(y&&m){const Y={id:"modelSection",content:[]};Y.content.push(i.jsx(oNe,{},"noAuthUpsell")),B.push(Y)}else if(c){const Y={id:"modelSection",content:[]};a.length&&Y.content.push(N);const O=new Map;a.forEach(R=>{const V=i.jsx(SNe,{category:R,currentGizmoId:s,currentModelId:r,modelSwitcherDenialsBySlug:u,omitIcon:T,testId:`model-switcher-${R.defaultModel}`},R.categoryId);R.subcategory?(O.has(R.subcategory)||O.set(R.subcategory,[]),O.get(R.subcategory)?.push(V)):Y.content.push(V)}),O.forEach((R,V)=>{const X=a.find(re=>re.subcategory===V&&re.defaultModel===n.id);Y.content.push(i.jsxs(ne.Sub,{children:[i.jsx(ne.SubMenuTrigger,{"data-testid":V==="More models"?"more-models-submenu":void 0,children:i.jsxs("div",{className:"flex grow justify-between gap-2 overflow-hidden",children:[V,!!X&&i.jsx("div",{className:"truncate text-token-text-tertiary",children:X.label})]})}),i.jsx(ne.Portal,{children:i.jsx(ne.SubContent,{className:"min-w-72",children:R})})]},V))}),B.push(Y)}else{const Y={id:"modelSection",content:[]};Y.content.push(i.jsx(zd,{value:"",onClick:U,modelSwitcherDenialsBySlug:u,isUpgradeUpsell:!0,renderName:O=>i.jsx(Hv,{icon:w6,isDisabled:O,name:d.formatMessage({id:"mzDzkX",defaultMessage:"ChatGPT Plus"}),description:d.formatMessage({id:"bqTHri",defaultMessage:"Our smartest model & more"}),omitIcon:!1}),isSelected:!1,showNewChatHint:!1},"plusUpgrade")),Y.content.push(i.jsx(zd,{value:vu.AUTO,modelSwitcherDenialsBySlug:u,renderName:O=>i.jsx(Hv,{icon:b6,name:d.formatMessage({id:"U9E7Rx",defaultMessage:"ChatGPT"}),description:d.formatMessage({id:"n96qML",defaultMessage:"Great for everyday tasks"}),isDisabled:O,omitIcon:!1}),isSelected:!s&&r===vu.AUTO,showNewChatHint:!0},vu.AUTO)),B.push(Y)}const $={id:"otherOptionsSection",content:[]},{selectedCategory:H}=LD(r,a,o);return f&&(M&&$.content.push(i.jsx(Ei,{isSelected:H===xr.ALPHA,currentModel:n,option:b,modelSwitcherDenialsBySlug:u,displayInFull_INTERNAL_USE_ONLY:!0},b.value)),_&&$.content.push(i.jsx(Ei,{isSelected:H===xr.DATA_CAMPAIGNS,currentModel:n,option:x,modelSwitcherDenialsBySlug:u,displayInFull_INTERNAL_USE_ONLY:!0},x.value)),k&&$.content.push(i.jsx(Ei,{currentModel:n,isSelected:H===xr.EXPERIMENTS,option:w,modelSwitcherDenialsBySlug:u,displayInFull_INTERNAL_USE_ONLY:!0},w.value)),I&&$.content.push(i.jsx(Ei,{isSelected:H===xr.MAINLINE,currentModel:n,option:C,modelSwitcherDenialsBySlug:u,displayInFull_INTERNAL_USE_ONLY:!0},C.value))),$.content.length&&B.push($),m||B.push({id:"temporaryChatSection",content:[i.jsx(xNe,{clientThreadId:e},"tempChat")]}),B}function TNe(){const e=L();return i.jsx("div",{className:"border-token-text-quartenary items-center rounded-full border px-1 py-0.5 text-[8px] font-semibold uppercase leading-3 text-token-text-secondary dark:border-token-border-heavy dark:text-token-text-tertiary",children:e.formatMessage(FD.beta)})}function Hv({isDisabled:e,name:t,icon:n,categoryId:r,description:s,extra:a,omitIcon:o,isBeta:c=!1}){let l=t;return c&&(l=i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:t}),i.jsx(TNe,{})]})),i.jsxs("div",{className:"flex items-center gap-3",children:[!o&&i.jsx("span",{className:"flex h-7 w-7 flex-shrink-0 items-center justify-center rounded-full bg-token-main-surface-secondary",children:n?i.jsx(n,{className:"h-4 w-4 text-token-text-primary"}):r&&i.jsx(OD,{type:"filled",className:A("h-4 w-4",e&&"text-gray-300",!e&&"text-token-text-primary"),categoryId:r})}),i.jsxs("div",{children:[l,i.jsxs("div",{className:A(!e&&"text-token-text-secondary","text-xs"),children:[s,a]})]})]})}function kNe({sections:e}){return i.jsx(i.Fragment,{children:e.map((t,n)=>i.jsxs(J.Fragment,{children:[n!==0?i.jsx(ne.Separator,{}):null,t.content]},t.id))})}function Y6e({clientThreadId:e,inMobileHeader:t=!1}){const n=Ec(e),r=Zo(n);return n==null?i.jsx(wNe,{clientThreadId:e,inMobileHeader:t}):r?i.jsx(uNe,{gizmoId:n,clientThreadId:e,inMobileHeader:t}):i.jsx(yNe,{clientThreadId:e,gizmoId:n,inMobileHeader:t})}const FD=z({beta:{id:"XZwFET",defaultMessage:"Beta"},gpt35ShortExplainer:{defaultMessage:"Great for everyday tasks",id:"ModelSwitcher.gpt35ShortExplainer"},modelTunerSmartSelectionTitle:{id:"czjW8I",defaultMessage:"Dynamic"},modelTunerSmartSelectionExplainer:{id:"gp/YH1",defaultMessage:"Optimized for speed and intelligence"},gpt4ShortExplainer:{defaultMessage:"With DALLE, browsing and analysis",id:"ModelSwitcher.gpt4ShortExplainer"},gpt4ShortExplainerWithoutBrowse:{defaultMessage:"With DALLE and analysis",id:"ModelSwitcher.gpt4ShortExplainerWithoutBrowse"},gpt4UpsellExplainer:{id:"ModelSwitcher.gpt4Upsell",defaultMessage:"Our smartest and most capable model. Includes DALLE, browsing and more."},userUpgrade:{id:"ModelSwithcer.upgradeButton",defaultMessage:"Upgrade to Plus"},userUpgradeSignup:{id:"ModelSwitcher.signupUpgradeButton",defaultMessage:"Sign up for ChatGPT Plus"},temporaryChat:{id:"ModelSwitcher.temporaryChat",defaultMessage:"Temporary chat"},shareChat:{id:"ModelSwitcher.shareChat",defaultMessage:"Share chat"}}),BD=je.TemporaryChatOnboarding;function K6e(){const e=Vn(),{eligible:t}=Be(BD);return t&&e}function Si({icon:e,title:t,description:n}){return i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"mt-1 h-5 w-5",children:e}),i.jsxs("div",{className:"ml-4",children:[i.jsx("div",{className:"text-lg font-semibold",children:t}),i.jsx("p",{className:"mt-1 text-sm text-token-text-secondary",children:n})]})]})}function X6e({onClose:e}){const[t,n]=p.useState(!0),r=Ce(),s=L(),{markAsViewed:a}=Be(BD),o=xl(),c=p.useCallback(()=>{a(),n(!1),e?.()},[a,e]);return r?.isWorkspaceAccount()?i.jsx(Te,{isOpen:t,onClose:we,size:"custom",className:"max-w-xl",type:"success",title:s.formatMessage(Qe.title),primaryButton:i.jsx(Ke.Button,{onClick:c,title:s.formatMessage(Qe.continue),color:"primary"}),children:i.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[i.jsx(Si,{icon:i.jsx(Qe.bulletTitle1.Icon,{}),title:s.formatMessage(Qe.bulletTitle1),description:s.formatMessage({id:"nSGhxr",defaultMessage:"Temporary chats won't appear in your history."})}),i.jsx(Si,{icon:o?i.jsx(Qe.bulletTitle2MemoryAvailable.Icon,{}):i.jsx(Qe.bulletTitle2MemoryUnavailable.Icon,{}),title:s.formatMessage(o?Qe.bulletTitle2MemoryAvailable:Qe.bulletTitle2MemoryUnavailable),description:s.formatMessage(o?Qe.bulletDescription2MemoryAvailable:Qe.bulletDescription2MemoryUnavailable)})]})}):i.jsx(Te,{isOpen:t,onClose:we,size:"custom",className:"max-w-xl",type:"success",title:s.formatMessage(Qe.title),primaryButton:i.jsx(Ke.Button,{onClick:c,title:s.formatMessage(Qe.continue),color:"primary"}),children:i.jsxs("div",{className:"mb-6 flex flex-col gap-3",children:[i.jsx(Si,{icon:i.jsx(Qe.bulletTitle1.Icon,{}),title:s.formatMessage(Qe.bulletTitle1),description:s.formatMessage(Qe.bulletDescription1)}),i.jsx(Si,{icon:i.jsx(Qe.bulletTitle3.Icon,{}),title:s.formatMessage(Qe.bulletTitle3),description:s.formatMessage(Qe.bulletDescription3)}),i.jsx(Si,{icon:o?i.jsx(Qe.bulletTitle2MemoryAvailable.Icon,{}):i.jsx(Qe.bulletTitle2MemoryUnavailable.Icon,{}),title:s.formatMessage(o?Qe.bulletTitle2MemoryAvailable:Qe.bulletTitle2MemoryUnavailable),description:s.formatMessage(o?Qe.bulletDescription2MemoryAvailable:Qe.bulletDescription2MemoryUnavailable)})]})})}const Qe=z({title:{id:"TemporaryChatOnboardingModal.title",defaultMessage:"Temporary Chat"},bulletTitle1:{Icon:S0,id:"TemporaryChatOnboardingModal.bulletTitle1",defaultMessage:"Not in history"},bulletDescription1:{id:"TemporaryChatOnboardingModal.bulletDescription1.1",defaultMessage:"Temporary chats won't appear in your history. For safety purposes, we may keep a copy of your chat for up to 30 days."},bulletTitle2MemoryAvailable:{Icon:S6,id:"TemporaryChatOnboardingModal.bulletTitle2MemoryAvailable",defaultMessage:"Memory off"},bulletDescription2MemoryAvailable:{id:"Ziehyb",defaultMessage:"While in a Temporary Chat, ChatGPT won't use or create memories. Custom Instructions will still be followed if you have them enabled."},bulletTitle2MemoryUnavailable:{Icon:x0,id:"TemporaryChatOnboardingModal.bulletTitle2MemoryUnavailable",defaultMessage:"Follows Custom Instructions"},bulletDescription2MemoryUnavailable:{id:"TemporaryChatOnboardingModal.bulletDescription2MemoryUnavailable",defaultMessage:"Custom Instructions will still be followed if you have them enabled."},bulletTitle3:{Icon:E$,id:"TemporaryChatOnboardingModal.bulletTitle3",defaultMessage:"No model training"},bulletDescription3:{id:"TemporaryChatOnboardingModal.bulletDescription3",defaultMessage:"Temporary chats won't be used to improve our models."},continue:{id:"TemporaryChatOnboardingModal.continue",defaultMessage:"Continue"}});function UD(e){if(e&&e.messages.length>0){const t=e.messages[0].message.create_time;if(t)return new Date(t*1e3)}return null}function qd(e,t){return!e||!t?!1:e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function Q6e(e,t){const n=e0(e,t),r=p.useMemo(()=>{const s=new Array(n.length).fill(!1),a=new Date;let o=null,c=!0;for(let l=0;l<n.length;l++){const u=n[l],d=u.messages;if(eF(u,d)){const m=UD(u);c?(c=!1,qd(m,a)||(s[l]=!0)):o&&!qd(m,o)&&(s[l]=!0),o=m}}return s},[n]);return s=>r[s]}function MNe(e){const t=L(),n=UD(e);if(n){const r=new Date,s=new Date;s.setDate(r.getDate()-1);let a;if(qd(n,r))a=t.formatMessage({id:"ConversationTurn.todayHeader",defaultMessage:"Today"});else if(qd(n,s))a=t.formatMessage({id:"ConversationTurn.yesterdayHeader",defaultMessage:"Yesterday"});else{const o=r.getFullYear(),c=n.getFullYear();o===c?a=t.formatDate(n,{month:"short",day:"numeric"}):a=t.formatDate(n,{month:"short",day:"numeric",year:"numeric"})}return a}else return null}const ENe=()=>{const{value:e}=at("1847911009");return e},Z6e=({turn:e})=>{const t=ENe(),n=MNe(e);return!t||!n?null:i.jsx("div",{className:"my-4 flex justify-center",style:{height:"20px"},children:i.jsx("span",{className:"text-sm font-normal leading-5 text-token-text-secondary",children:n})})};function J6e(e){const n=xc(e)==="root",r=t0(e),s=Jd(r),a=lb(),{isUnauthenticated:o}=bt(),c=_$(e);return!n&&!s&&!a.displayingSideBySideFeedback&&!o&&!c}const e4e=({clientThreadId:e,message:t})=>{const n=qb(),r=sA(),s=Be(je.ModelSwitcherAutoDowngrade),{categories:a}=Rc({isRegen:!0}),o=K0({clientThreadId:e}),{doesUserHaveAnyAccountsWithPlusFeatures:c}=fa(),l=j7()!=null,u=[];for(const x of a){if(Jv(x))continue;const{defaultModel:w,label:C,tagline:T,categoryId:M,subscriptionLevel:_,subcategory:k}=x,I=o[w]?.regenerate?.[0];u.push({label:C,value:w,subtitle:T,icon:i.jsx(OD,{className:"icon-md h-4 w-4",categoryId:M,type:"filled"}),modelSwitcherDeny:I,subscriptionLevel:_,subcategory:k})}const d=_Ne(e,t.nodeId),f=t.message.metadata?.model_slug,m=n.find(x=>x.value===f)?.name,g=(f!=null?r[f]:void 0)?.enabledTools||[],v=ANe(l,d,f),y=t.message.metadata?.model_adjustments,b=c&&s.eligible&&!s.isLoading&&m&&u[0]?.label&&m!==u[0]?.label&&y?.some(x=>x.startsWith("auto:smaller_model"));return{modelOptions:u,modelSlug:f,messageModelEnabledTools:g,animateModelLabelOnRender:v,nuxProps:{shouldRenderNux:b,usedModelName:m,largestModelName:u[0]?.label,announcement:s}}};function _Ne(e,t){return D.getTree(e).getConversationTurns(t).flatMap(o=>o.messages).filter(o=>o.message.author.role===le.Assistant&&!LM(o.message)).reverse()[1]?.message.metadata?.model_slug}function ANe(e,t,n){return e&&!t?!0:!!(t&&n!==t)}function t4e(){const{doesUserHaveAnyAccountsWithPlusFeatures:e}=fa(),{categories:t}=Rc();return!!e||!!t.find(Jv)}const n4e=({modelSwitcherDeny:e,value:t,label:n,subtitle:r,icon:s,onMouseEnter:a,onMouseLeave:o,onSelect:c,messageModelSlug:l,isHovered:u=!1,shouldShowUpsell:d=!1,className:f,includeCheck:m,includeRegenerate:h,justifyIcon:g,wrapIcon:v=!0})=>{const y=Ce(),b=!e,x=!b&&!d,w=ze(),C=()=>{if(!d){c?.();return}E.logEvent(P.openModalAccountPaymentfromMessageModelPicker),E.logRateLimitGetPlusButtonClicked({type:Xd.RATE_LIMIT,location:"message_model_switcher_dropdown",plan_type:y?.planType??"unknown",is_hard_block:!1,hard_block_reason:"",is_new_conversation:!1}),Rr(w,"Message model switcher dropdown")};return i.jsx(ne.Item,{onSelect:C,onMouseEnter:()=>b&&a?.(),onMouseLeave:()=>b&&o?.(),disabled:x,className:f??"radix-disabled:pointer-events-auto radix-disabled:cursor-not-allowed radix-disabled:hover:bg-transparent",children:i.jsxs(Ye,{label:e&&i.jsx(RD,{modelSwitcherDeny:e}),className:"flex w-full items-center justify-between gap-2",sideOffset:0,children:[i.jsxs("div",{className:A("flex items-center gap-3",g==="right"&&"w-full"),children:[!!s&&(v?i.jsx("span",{className:A("flex h-7 w-7 items-center justify-center rounded-full bg-token-main-surface-secondary",g==="right"&&"order-10 ml-auto"),children:s}):s),i.jsxs("div",{children:[i.jsx("div",{children:n}),i.jsx("div",{className:A({"text-sm text-token-text-secondary":!x},{"text-sm text-token-text-quaternary":x}),children:r})]})]}),d?i.jsx(ee,{color:"secondary",size:"small",children:i.jsx(S,{id:"54fmrA",defaultMessage:"Get Plus"})}):i.jsx(PNe,{messageModelSlug:l,isHovered:u,modelSwitcherDeny:e,optionModelSlug:t,includeCheck:m,includeRegenerate:h})]})})},PNe=({modelSwitcherDeny:e,optionModelSlug:t,isHovered:n,messageModelSlug:r,includeRegenerate:s=!0,includeCheck:a=!0})=>{let o=null;if(e)switch(e.reason){case Xd.RATE_LIMIT:o=n_;break;default:o=Pc;break}if(e)return i.jsx(o,{className:"icon-md"});const c=!!s&&i.jsx(C6,{className:A("icon-md hidden text-token-text-tertiary",{"group-hover:block":n})});return r===t&&a?i.jsxs(i.Fragment,{children:[i.jsx(p_,{className:A("icon-md text-token-text-primary",{"group-hover:hidden":n})}),c]}):c};function r4e({messages:e}){const t=Sc(e.flatMap(r=>r?.message?.metadata?.citations?.map(s=>s.metadata)??[])),n=p.useMemo(()=>g5(t.map(r=>NNe(r)).filter(r=>r!==void 0),r=>r?.url),[t]);return i.jsx("div",{className:"mt-4 grid w-full grid-cols-[50%,50%] gap-3",children:n.map(r=>i.jsx(LNe,{citationMetadata:r},r?.url))})}const EM={"https://docs.google.com/document":"Google Docs","https://docs.google.com/presentation":"Google Slides","https://docs.google.com/spreadsheets":"Google Sheets","https://drive.google.com/":"Google Drive"},jNe=/^(https:\/\/)([a-zA-Z0-9-]+\.)slack\.com(\/.*)?$/;function VD(e){if(e){if(jNe.test(e))return"Slack";{const t=Object.keys(EM).find(n=>e.startsWith(n));return t?EM[t]:void 0}}}function INe(e){return i.jsx("img",{src:xD,...e})}function GD(e){switch(e){case"Google Docs":return _0;case"Google Slides":return M0;case"Google Sheets":return E0;case"Google Drive":return jo;case"Slack":return INe;default:return null}}function s4e(e){const t=VD(e);if(!t)return null;const n=GD(t);return n?{type:t,Icon:n}:null}function NNe(e){if(e.type==="file"){const t=e.extra?.cloud_doc_url;if(!t)return;const n=VD(t);if(!n)return;const r=e.name;return{url:t,type:n,title:RNe(n)?DNe(r):r}}}const ONe=["Google Docs","Google Slides","Google Sheets"];function RNe(e){return ONe.includes(e)}function DNe(e){const t=e.lastIndexOf(".");return t!==-1?e.slice(0,t):e}function LNe({citationMetadata:e,compact:t}){if(!e)return null;const n=GD(e.type);return n?t?i.jsx("a",{href:Tu(e.url),target:"_blank",rel:"noreferrer",children:i.jsxs("div",{className:"flex flex-row items-center gap-2 overflow-clip rounded-lg border border-gray-200 px-[16px] py-2",children:[i.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:e.type}),i.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:e.title?e.title:Tu(e.url)})]})}):i.jsx("a",{href:Tu(e.url),target:"_blank",rel:"noreferrer",children:i.jsxs("div",{className:"flex flex-col gap-[2px] overflow-clip rounded-lg border border-gray-200 px-[16px] py-[12px]",children:[i.jsxs("div",{className:"flex items-center gap-2 pb-0.5",children:[i.jsx(n,{className:"h-[16px] w-[16px] object-contain",alt:e.type}),i.jsx("p",{className:"text-xs leading-normal text-token-text-secondary",children:e.type})]}),i.jsx("p",{className:"text-token -text-primary line-clamp-1 text-sm",children:e.title})]})}):null}const a4e=({actions:e,pagination:t,isHovered:n,showInline:r,alwaysShow:s})=>!t&&!e?null:i.jsxs("div",{className:A("items-center justify-start rounded-xl p-1",r?"flex":"z-10 -mt-1 bg-token-main-surface-primary md:absolute",r?!1:n?"flex":"md:sr-only"),children:[t,e&&i.jsx("div",{className:A("flex items-center",r&&!s?n?"visible":"md:invisible":!1),children:e})]}),o4e=({onClick:e})=>{const[t,n]=p.useState(!1),r=o5(),s=L(),a=p.useCallback(o=>{o.stopPropagation(),e(o),n(!0),setTimeout(()=>{r()&&n(!1)},2e3),q.logEvent("chatgpt_turn_action_copy")},[r,e]);return i.jsx(WD,{icon:t?vf:A0,onClick:a,label:s.formatMessage({id:"CopyButton.copyTooltip",defaultMessage:"Copy"}),testId:"copy-turn-action-button"})},WD=({icon:e,label:t,iconClassName:n,className:r,onClick:s,disabled:a=!1,asLink:o=!1,href:c,style:l,target:u,testId:d})=>{const f=o?"a":"button";return i.jsx(NE,{sideOffset:0,label:t,disabled:!t,children:i.jsx(f,{className:A("rounded-lg text-token-text-secondary hover:bg-token-main-surface-secondary",r),"aria-label":t,onClick:s,disabled:a,target:u,href:c,style:l,"data-testid":d,children:e&&i.jsx("span",{className:"flex h-[30px] w-[30px] items-center justify-center",children:i.jsx(e,{className:A("icon-md-heavy",n)})})})})},i4e=p.memo(function(t){const{hasModelTunerAutoGPT4:n}=HD(t),r=zD(),s=ze();if(!n)return null;const a=r&&t.isFinalTurn,o=i.jsx(WD,{icon:Qh,className:A(a&&"hover:text-token-text-tertiary",!a&&"cursor-pointer"),iconClassName:t.isFinalTurn?"icon-shimmer":void 0});return a?o:i.jsxs(LE,{delayDuration:150,children:[i.jsx($E,{children:o}),i.jsx(FE,{children:i.jsx(BE,{side:"top",sideOffset:0,children:i.jsxs("div",{className:"flex max-w-2xs flex-col flex-nowrap rounded-lg border border-token-border-light bg-token-main-surface-primary p-4 shadow-xl",children:[i.jsxs("div",{className:"mb-1 flex flex-nowrap items-start gap-2",children:[i.jsx(Qh,{className:"h-[20px] w-[20px]"}),i.jsx("div",{className:"text-sm font-semibold",children:i.jsx(S,{id:"ModelTunerDisclaimer.autoUpgradeToGPT4.title",defaultMessage:"Upgraded response"})})]}),i.jsx("div",{className:"mb-3 text-sm text-token-text-secondary",children:i.jsx(S,{id:"ModelTunerDisclaimer.autoUpgradeToGPT4.content",defaultMessage:"Written with our most capable model, GPT-4, available on ChatGPT Plus"})}),i.jsx("div",{children:i.jsx(ee,{onClick:()=>Rr(s,"ModelTuner disclaimer cta"),size:"small",children:i.jsx(S,{id:"ModelTunerDisclaimer.autoUpgradeToGPT4.getPlus",defaultMessage:"Get Plus"})})})]})})})]})}),c4e=p.memo(function(t){const n=zD(),{hasModelTunerAutoGPT4:r}=HD(t);return!r||!t.isFinalTurn||!n?null:i.jsx($Ne,{})});function $Ne(){const e=vA().mutate,t=ze();return p.useEffect(()=>{e({key:je.ModelTunerDisclaimer})},[]),i.jsx("div",{className:"py-4",children:i.jsx("div",{className:"flex items-start justify-start gap-2.5 rounded-2xl bg-token-main-surface-secondary p-4 pr-5 text-token-text-primary",children:i.jsxs("div",{className:"flex w-full items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex flex-nowrap items-start gap-2",children:[i.jsx(Qh,{className:"h-[20px] w-[20px] shrink-0"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("div",{className:"font-semibold",children:i.jsx(S,{id:"ModelTunerDisclaimer.autoUpgradeToGPT4.title",defaultMessage:"Upgraded response"})}),i.jsx("div",{className:"pt-0.5",children:i.jsx(S,{id:"ModelTunerDisclaimer.autoUpgradeToGPT4.content",defaultMessage:"Written with our most capable model, GPT-4, available on ChatGPT Plus"})})]})]}),i.jsx(ee,{className:"shrink-0",onClick:()=>Rr(t,"ModelTuner disclaimer cta"),size:"small",children:i.jsx(S,{id:"ModelTunerDisclaimer.autoUpgradeToGPT4.getPlus",defaultMessage:"Get Plus"})})]})})})}function HD({message:e}){return{hasModelTunerAutoGPT4:e?.message?.metadata?.model_adjustments?.includes(A$.AUTO_UPGRADE_TO_GPT4)}}function zD(){return p.useRef(qM(e=>!e.announcements[je.ModelTunerDisclaimer])?.data).current}function l4e({clientThreadId:e,conversationMode:t}){const n=C2e(e);return({id:s,eventMetadata:a,turnTracker:o,requestedModelId:c,systemMessage:l,systemMessageMetadata:u,juice:d,extraStreamParams:f})=>{const h=D.getTree(e).getConversationTurns(s),v=h?.[h?.length-1].variantIds?.length===1&&f?.forceUseSearch===void 0,y=v?{...a,intent:"comparison_implicit"}:a;n({id:s,requestedModelId:c,eventMetadata:y,focusOnNewCompletion:!0,variantPurpose:v?"comparison_implicit":"none",conversationMode:t??Un.getConversationMode(e),useDefaultModel:!1,appendMessages:l?[{id:Dr(),author:{role:le.System},content:{content_type:Qt.Text,parts:[l]},metadata:{exclude_after_next_user_message:!0,...u}}]:void 0,juice:d,turnTracker:o,extraStreamParams:f})}}const FNe="bg-token-main-surface-primary text-token-text-primary",BNe="openai",_M=["bg-blue-300 text-white"];function UNe(e){return _M[(e?.charCodeAt(0)??0)%_M.length]}const hu=({children:e})=>i.jsx("div",{className:"pt-0",children:i.jsx("div",{className:A(p.isValidElement(e)&&e.type===Qg?"gizmo-bot-avatar":"gizmo-shadow-stroke","flex h-8 w-8 items-center justify-center overflow-hidden rounded-full"),children:e})});function u4e({messages:e,isUserTurn:t,avatarClassName:n,gizmo:r}){const s="medium",o=e[0]?.message.metadata?.shared_conversation_id,c=o!=null,l=zt(),{gizmoEditorData:u,mode:d}=wl();let f=i.jsx(hu,{children:i.jsx(Qg,{className:n??FNe,iconName:BNe,size:s})});return r?f=i.jsx(hu,{children:i.jsx(_Te,{gizmoId:r.gizmo.id,className:"h-full w-full"})}):u!=null&&d==="test"&&(f=i.jsx(Nb,{isFirstParty:!1,src:u.profilePictureUrl,className:"h-8 w-8 first:pt-[3px]"})),i.jsx("div",{children:t?c?i.jsx(hu,{children:i.jsx(Qg,{className:UNe(o),iconName:"user",size:s})}):i.jsx(hu,{children:i.jsx(um,{user:l,size:s})}):f})}function d4e({currentPage:e,onChangeIndex:t,length:n,showInline:r=!1}){const s=o=>{t(hd(e+o,0,n-1))},a=L();return i.jsxs("div",{className:A("flex items-center justify-center rounded-lg text-token-text-secondary",!r&&$_e.MessageAction),children:[i.jsx("button",{onClick:()=>s(-1),disabled:e===0,className:"flex h-[30px] w-[30px] items-center justify-center rounded-md hover:bg-token-main-surface-secondary disabled:opacity-50 disabled:hover:bg-transparent","aria-label":a.formatMessage({id:"XwENI/",defaultMessage:"Previous response"}),children:i.jsx(P0,{className:"icon-md-heavy"})}),i.jsx("div",{className:"px-0.5 text-sm font-semibold tabular-nums",children:`${e+1}/${n}`}),i.jsx("button",{onClick:()=>s(1),disabled:e===n-1,"aria-label":a.formatMessage({id:"V8RFHE",defaultMessage:"Next response"}),className:"flex h-[30px] w-[30px] items-center justify-center rounded-md hover:bg-token-main-surface-secondary disabled:opacity-50 disabled:hover:bg-transparent",children:i.jsx(va,{className:"icon-md-heavy"})})]})}function f4e({currentPage:e,onChangeIndex:t,length:n,className:r}){const s=a=>{t(hd(e+a,0,n-1))};return n===0?null:i.jsxs(VNe,{className:r,children:[i.jsx(AM,{onClick:()=>s(-1),disabled:e===0,children:i.jsx(P0,{className:"icon-sm"})}),i.jsx(GNe,{children:`${e+1}/${n}`}),i.jsx(AM,{onClick:()=>s(1),disabled:e===n-1,children:i.jsx(va,{className:"icon-sm"})})]})}const VNe=fe.div`text-xs inline-flex bg-token-main-surface-secondary h-8 border rounded border-token-border-medium`,AM=fe.button`text-token-text-secondary disabled:text-token-border-medium w-8 flex items-center justify-center hover:bg-token-main-surface-tertiary`,GNe=fe.span`text-token-text-tertiary px-2 flex items-center font-mono tracking-widest`;function m4e(e){const t=L();function n(){switch(e.role){case le.User:return t.formatMessage({id:"3DStaP",defaultMessage:"You said:"});case le.Assistant:return t.formatMessage({id:"LDIn6l",defaultMessage:"ChatGPT said:"});default:return""}}const r=e.role===le.Assistant?"h6":"h5";return i.jsx(r,{className:"sr-only",children:n()})}function WNe(e,t="<unknown>"){if(!e)throw P$(new Error(`${t}: unexpected non-truthy condition: ${JSON.stringify(e)}`),WNe)}var Yb={exports:{}};Yb.exports;(function(e){(function(t,n,r){function s(l){var u=this,d=c();u.next=function(){var f=2091639*u.s0+u.c*23283064365386963e-26;return u.s0=u.s1,u.s1=u.s2,u.s2=f-(u.c=f|0)},u.c=1,u.s0=d(" "),u.s1=d(" "),u.s2=d(" "),u.s0-=d(l),u.s0<0&&(u.s0+=1),u.s1-=d(l),u.s1<0&&(u.s1+=1),u.s2-=d(l),u.s2<0&&(u.s2+=1),d=null}function a(l,u){return u.c=l.c,u.s0=l.s0,u.s1=l.s1,u.s2=l.s2,u}function o(l,u){var d=new s(l),f=u&&u.state,m=d.next;return m.int32=function(){return d.next()*4294967296|0},m.double=function(){return m()+(m()*2097152|0)*11102230246251565e-32},m.quick=m,f&&(typeof f=="object"&&a(f,d),m.state=function(){return a(d,{})}),m}function c(){var l=4022871197,u=function(d){d=String(d);for(var f=0;f<d.length;f++){l+=d.charCodeAt(f);var m=.02519603282416938*l;l=m>>>0,m-=l,m*=l,l=m>>>0,m-=l,l+=m*4294967296}return(l>>>0)*23283064365386963e-26};return u}n&&n.exports?n.exports=o:this.alea=o})(Gt,e)})(Yb);var HNe=Yb.exports,Kb={exports:{}};Kb.exports;(function(e){(function(t,n,r){function s(c){var l=this,u="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var f=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^f^f>>>8},c===(c|0)?l.x=c:u+=c;for(var d=0;d<u.length+64;d++)l.x^=u.charCodeAt(d)|0,l.next()}function a(c,l){return l.x=c.x,l.y=c.y,l.z=c.z,l.w=c.w,l}function o(c,l){var u=new s(c),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,h=(u.next()>>>0)/4294967296,g=(m+h)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&a(d,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:this.xor128=o})(Gt,e)})(Kb);var zNe=Kb.exports,Xb={exports:{}};Xb.exports;(function(e){(function(t,n,r){function s(c){var l=this,u="";l.next=function(){var f=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(f^f<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,c===(c|0)?l.x=c:u+=c;for(var d=0;d<u.length+64;d++)l.x^=u.charCodeAt(d)|0,d==u.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(c,l){return l.x=c.x,l.y=c.y,l.z=c.z,l.w=c.w,l.v=c.v,l.d=c.d,l}function o(c,l){var u=new s(c),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,h=(u.next()>>>0)/4294967296,g=(m+h)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&a(d,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:this.xorwow=o})(Gt,e)})(Xb);var qNe=Xb.exports,Qb={exports:{}};Qb.exports;(function(e){(function(t,n,r){function s(c){var l=this;l.next=function(){var d=l.x,f=l.i,m,h;return m=d[f],m^=m>>>7,h=m^m<<24,m=d[f+1&7],h^=m^m>>>10,m=d[f+3&7],h^=m^m>>>3,m=d[f+4&7],h^=m^m<<7,m=d[f+7&7],m=m^m<<13,h^=m^m<<9,d[f]=h,l.i=f+1&7,h};function u(d,f){var m,h=[];if(f===(f|0))h[0]=f;else for(f=""+f,m=0;m<f.length;++m)h[m&7]=h[m&7]<<15^f.charCodeAt(m)+h[m+1&7]<<13;for(;h.length<8;)h.push(0);for(m=0;m<8&&h[m]===0;++m);for(m==8?h[7]=-1:h[m],d.x=h,d.i=0,m=256;m>0;--m)d.next()}u(l,c)}function a(c,l){return l.x=c.x.slice(),l.i=c.i,l}function o(c,l){c==null&&(c=+new Date);var u=new s(c),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,h=(u.next()>>>0)/4294967296,g=(m+h)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(d.x&&a(d,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:this.xorshift7=o})(Gt,e)})(Qb);var YNe=Qb.exports,Zb={exports:{}};Zb.exports;(function(e){(function(t,n,r){function s(c){var l=this;l.next=function(){var d=l.w,f=l.X,m=l.i,h,g;return l.w=d=d+1640531527|0,g=f[m+34&127],h=f[m=m+1&127],g^=g<<13,h^=h<<17,g^=g>>>15,h^=h>>>12,g=f[m]=g^h,l.i=m,g+(d^d>>>16)|0};function u(d,f){var m,h,g,v,y,b=[],x=128;for(f===(f|0)?(h=f,f=null):(f=f+"\0",h=0,x=Math.max(x,f.length)),g=0,v=-32;v<x;++v)f&&(h^=f.charCodeAt((v+32)%f.length)),v===0&&(y=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,v>=0&&(y=y+1640531527|0,m=b[v&127]^=h+y,g=m==0?g+1:0);for(g>=128&&(b[(f&&f.length||0)&127]=-1),g=127,v=4*128;v>0;--v)h=b[g+34&127],m=b[g=g+1&127],h^=h<<13,m^=m<<17,h^=h>>>15,m^=m>>>12,b[g]=h^m;d.w=y,d.X=b,d.i=g}u(l,c)}function a(c,l){return l.i=c.i,l.w=c.w,l.X=c.X.slice(),l}function o(c,l){c==null&&(c=+new Date);var u=new s(c),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,h=(u.next()>>>0)/4294967296,g=(m+h)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(d.X&&a(d,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:this.xor4096=o})(Gt,e)})(Zb);var KNe=Zb.exports,Jb={exports:{}};Jb.exports;(function(e){(function(t,n,r){function s(c){var l=this,u="";l.next=function(){var f=l.b,m=l.c,h=l.d,g=l.a;return f=f<<25^f>>>7^m,m=m-h|0,h=h<<24^h>>>8^g,g=g-f|0,l.b=f=f<<20^f>>>12^m,l.c=m=m-h|0,l.d=h<<16^m>>>16^g,l.a=g-f|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,c===Math.floor(c)?(l.a=c/4294967296|0,l.b=c|0):u+=c;for(var d=0;d<u.length+20;d++)l.b^=u.charCodeAt(d)|0,l.next()}function a(c,l){return l.a=c.a,l.b=c.b,l.c=c.c,l.d=c.d,l}function o(c,l){var u=new s(c),d=l&&l.state,f=function(){return(u.next()>>>0)/4294967296};return f.double=function(){do var m=u.next()>>>11,h=(u.next()>>>0)/4294967296,g=(m+h)/(1<<21);while(g===0);return g},f.int32=u.next,f.quick=f,d&&(typeof d=="object"&&a(d,u),f.state=function(){return a(u,{})}),f}n&&n.exports?n.exports=o:this.tychei=o})(Gt,e)})(Jb);var XNe=Jb.exports,qD={exports:{}};(function(e){(function(t,n,r){var s=256,a=6,o=52,c="random",l=r.pow(s,a),u=r.pow(2,o),d=u*2,f=s-1,m;function h(C,T,M){var _=[];T=T==!0?{entropy:!0}:T||{};var k=b(y(T.entropy?[C,w(n)]:C??x(),3),_),I=new g(_),j=function(){for(var F=I.g(a),U=l,B=0;F<u;)F=(F+B)*s,U*=s,B=I.g(1);for(;F>=d;)F/=2,U/=2,B>>>=1;return(F+B)/U};return j.int32=function(){return I.g(4)|0},j.quick=function(){return I.g(4)/4294967296},j.double=j,b(w(I.S),n),(T.pass||M||function(F,U,B,N){return N&&(N.S&&v(N,I),F.state=function(){return v(I,{})}),B?(r[c]=F,U):F})(j,k,"global"in T?T.global:this==r,T.state)}function g(C){var T,M=C.length,_=this,k=0,I=_.i=_.j=0,j=_.S=[];for(M||(C=[M++]);k<s;)j[k]=k++;for(k=0;k<s;k++)j[k]=j[I=f&I+C[k%M]+(T=j[k])],j[I]=T;(_.g=function(F){for(var U,B=0,N=_.i,$=_.j,H=_.S;F--;)U=H[N=f&N+1],B=B*s+H[f&(H[N]=H[$=f&$+U])+(H[$]=U)];return _.i=N,_.j=$,B})(s)}function v(C,T){return T.i=C.i,T.j=C.j,T.S=C.S.slice(),T}function y(C,T){var M=[],_=typeof C,k;if(T&&_=="object")for(k in C)try{M.push(y(C[k],T-1))}catch{}return M.length?M:_=="string"?C:C+"\0"}function b(C,T){for(var M=C+"",_,k=0;k<M.length;)T[f&k]=f&(_^=T[f&k]*19)+M.charCodeAt(k++);return w(T)}function x(){try{var C;return m&&(C=m.randomBytes)?C=C(s):(C=new Uint8Array(s),(t.crypto||t.msCrypto).getRandomValues(C)),w(C)}catch{var T=t.navigator,M=T&&T.plugins;return[+new Date,t,M,t.screen,w(n)]}}function w(C){return String.fromCharCode.apply(0,C)}if(b(r.random(),n),e.exports){e.exports=h;try{m=j$}catch{}}else r["seed"+c]=h})(typeof self<"u"?self:Gt,[],Math)})(qD);var QNe=qD.exports,ZNe=HNe,JNe=zNe,e9e=qNe,t9e=YNe,n9e=KNe,r9e=XNe,Ma=QNe;Ma.alea=ZNe;Ma.xor128=JNe;Ma.xorwow=e9e;Ma.xorshift7=t9e;Ma.xor4096=n9e;Ma.tychei=r9e;var s9e=Ma;const p4e=xe(s9e),a9e=Xe(()=>qe(()=>import("./g6z4mgh3qw7fyiz6.js").then(e=>e.b),__vite__mapDeps([64,1,2,3,6])));function YD(e){return e.find(t=>t.message.author.role===le.Tool&&t.message.metadata?.pending_memory_info)}function o9e(e){return e.filter((t,n)=>{const r=e[n+1],a=r?.message.recipient==="assistant"&&r?.message.author.role===le.Tool&&r?.message.author.name==="bio"&&Pr(r.message).startsWith("Model set context");return t.message.author.role===le.Assistant&&t.message.recipient==="bio"&&a}).flatMap(t=>{const n=t.message.content.content_type;return n===Qt.Text?t.message.content.parts:n===Qt.Code?[t.message.content.text]:[]}).map(p9e)}function i9e(e){return e.some(t=>t.message.author.role===le.Assistant&&t.message.recipient==="bio"&&t.message.status==="in_progress")}function c9e(e){const{eligible:t,isLoading:n}=CR(),r=p.useMemo(()=>e.length>0,[e]);p.useEffect(()=>{r&&t&&!n&&$e.openModal(et.GlobalMemoryOnboarding)},[r,t,n])}function l9e(e){const[t,n]=p.useState(!1);return{isPopoverOpen:t,setIsPopoverOpen:n,handleTogglePopover:s=>{const a=s??!t;n(a),a&&E.logEvent(P.memoryUpdatePopoverShown,{updateCount:e.length})}}}function KD({memoryWrites:e,popoverState:t,triggerButton:n,isParagen:r,setShowMemoriesModal:s}){return i.jsxs(A5,{open:t.isPopoverOpen,sideOffset:4,side:"bottom",alignAgainstAnchor:"start",size:"none",className:"z-10 min-w-60 max-w-96 text-sm",onOpenChange:a=>t.handleTogglePopover(a),disableAutofocus:!0,triggerButton:n,children:[i.jsx("div",{className:"mb-2 rounded border border-token-border-light bg-token-main-surface-secondary",children:e.map((a,o)=>i.jsx("div",{className:"border-b border-token-border-light px-3 py-2 first-letter:uppercase last:border-b-0",children:a},o))}),r?i.jsx("div",{className:"text-xs text-token-text-tertiary",children:i.jsx(S,{id:"MemoryActionResult.paragenMessage",defaultMessage:"This memory will be saved if you choose this response."})}):i.jsxs("button",{className:"flex w-full items-center justify-between rounded px-3 py-2 font-semibold hover:bg-token-main-surface-secondary",onClick:()=>{s(!0),E.logEvent(P.memoryUpdatePopoverManageButtonClicked,{updateCount:e.length})},children:[i.jsx(S,{id:"MemoryActionResult.manageMemories",defaultMessage:"Manage memories"}),i.jsx(va,{className:"icon-md -mr-1 text-token-text-tertiary"})]})]})}function u9e({clientThreadId:e,pendingMessage:t,memoryWrites:n,popoverState:r,setShowMemoriesModal:s}){const a=Ne(),o=L(),c=D.getServerThreadId(e),l=I$({clientThreadId:e}),u=n.join(" ");let d=u.slice(0,50).replace(new RegExp("^\\p{L}","u"),m=>m.toLocaleUpperCase()).replace(/\.$/,"");u.length>50&&(d+="...");const f=async m=>{if(!c)throw new Error("Failed to confirm or reject memory update: serverThreadId is not found");const h=t.message.metadata?.pending_memory_info;D.updateTree(e,g=>{g.updateNodeMessageMetadata(t.nodeId,{pending_memory_info:{...h,is_pending:!1,confirm_result:m}})});try{await K.confirmOrRejectMemory(t.message.id,c,m)}catch{a.danger(o.formatMessage({id:"memory.confirmOrDenyFail",defaultMessage:"Failed to confirm or reject memory update"})),D.updateTree(e,v=>{v.updateNodeMessageMetadata(t.nodeId,{pending_memory_info:h})})}};return i.jsxs("div",{className:"flex items-start",children:[i.jsx("div",{className:"inline-block text-sm font-semibold text-token-text-tertiary outline-none",children:i.jsx(S,{id:"MemoryActionResult.memoryConfirmation",defaultMessage:"Update memory? {memoryText}",values:{memoryText:i.jsx("div",{className:"inline-block py-1",onMouseOver:()=>r.handleTogglePopover(!0),onMouseOut:()=>r.handleTogglePopover(!1),children:i.jsx(KD,{memoryWrites:n,popoverState:r,triggerButton:i.jsx("button",{className:A("text-left font-normal",r.isPopoverOpen?"text-token-text-secondary":"text-token-text-tertiary"),children:i.jsx(S,{id:"MemoryActionResult.memoryWrapper",defaultMessage:"{memoryWrites}",values:{memoryWrites:d}})}),setShowMemoriesModal:s})})}})}),i.jsx(ee,{className:"ml-3 text-token-text-tertiary hover:text-token-text-primary",size:"xs",color:"secondary",disabled:l,onClick:()=>{f(!0)},children:i.jsx(S,{id:"MemoryActionResult.confirm",defaultMessage:"Yes"})}),i.jsx(ee,{className:"ml-2 text-token-text-tertiary hover:text-token-text-primary",size:"xs",color:"secondary",disabled:l,onClick:()=>{f(!1)},children:i.jsx(S,{id:"MemoryActionResult.deny",defaultMessage:"No"})})]})}function d9e({memoryWrites:e,popoverState:t,isParagen:n,setShowMemoriesModal:r}){return e.length===0?null:i.jsx(i.Fragment,{children:i.jsx("div",{className:"inline-block",onMouseOver:()=>t.handleTogglePopover(!0),onMouseOut:()=>t.handleTogglePopover(!1),children:i.jsx(KD,{memoryWrites:e,popoverState:t,isParagen:n,triggerButton:i.jsxs("button",{className:A("my-1 flex items-center gap-1 text-sm font-semibold outline-none",t.isPopoverOpen?"text-token-text-secondary":"text-token-text-tertiary"),children:[i.jsx(T6,{className:"mb-[-1px]"}),e.length===1?i.jsx(S,{id:"MemoryActionResult.memoryWriteSingular.1",defaultMessage:"Memory updated"}):i.jsx(S,{id:"MemoryActionResult.memoryWritePlural.1",defaultMessage:"Memories updated"})]}),setShowMemoriesModal:r})})})}function f9e(e){const t=YD(e),n=t?.message.metadata?.pending_memory_info?.confirm_result;return t==null?null:n===!0?"confirmed":n===!1?"denied":"pending"}function m9e({messages:e,clientThreadId:t,gizmoId:n,isParagen:r}){const s=o9e(e),a=l9e(s),o=i9e(e);c9e(s);const[c,l]=p.useState(!1),u=YD(e),d=f9e(e);return d==="denied"?null:o?i.jsx("div",{className:"result-streaming",children:i.jsx("span",{children:i.jsx("pre",{})})}):i.jsxs(i.Fragment,{children:[d==="pending"?i.jsx(u9e,{clientThreadId:t,memoryWrites:s,popoverState:a,setShowMemoriesModal:l,pendingMessage:u}):i.jsx(d9e,{memoryWrites:s,popoverState:a,isParagen:r,setShowMemoriesModal:l}),c&&i.jsx(a9e,{initialGizmoId:n,onClose:()=>l(!1)})]})}function p9e(e){const t=["The user ","The user's ","User ","User's "];for(const n of t)if(e.startsWith(n))return e.slice(n.length);return e}const h4e=Object.freeze(Object.defineProperty({__proto__:null,MemoryActionResult:m9e},Symbol.toStringTag,{value:"Module"})),h9e={liveRegionAssertive:"",liveRegionPolite:""},to=Ie()(()=>({...h9e}));let Gh,Wh;const gu={setLiveRegionAssertive:e=>{window.clearTimeout(Gh),to.setState({liveRegionAssertive:e}),Gh=window.setTimeout(()=>{to.setState({liveRegionAssertive:""}),Gh=void 0},5e3)},setLiveRegionPolite:e=>{window.clearTimeout(Wh),to.setState({liveRegionPolite:e}),Wh=window.setTimeout(()=>{to.setState({liveRegionPolite:""}),Wh=void 0},5e3)}};function g4e(e){const{isCompletionRequestInProgress:t,isUserTurn:n,message:r}=e,s=L(),a=p.useRef(t);p.useEffect(()=>{if(!t)return;let o;gu.setLiveRegionAssertive(s.formatMessage({id:"0LFLpz",defaultMessage:"ChatGPT is generating a response..."}));const c=s.formatMessage({id:"uqqkLX",defaultMessage:"ChatGPT is still generating a response..."}),l=5e3;function u(){gu.setLiveRegionAssertive(""),o=window.setTimeout(()=>{gu.setLiveRegionAssertive(c),o=window.setTimeout(()=>u(),l)},1e3)}return o=window.setTimeout(u,l),()=>{window.clearTimeout(o)}},[t,s]),p.useEffect(()=>{if(t||n||!r||!a.current){a.current=t;return}const{content:o}=r,c=(o.content_type===Qt.Text,o),l=s.formatMessage({id:"lZ4dVJ",defaultMessage:"ChatGPT says: {message}"},{message:c?.parts?.join?.(`
`)??""});gu.setLiveRegionAssertive(l),a.current=!1},[n,t,s,r])}function g9e(e){return e.nodeType===Node.ELEMENT_NODE}function v9e(e){const t=e.currentTarget.ownerDocument,n=t.defaultView,r=a=>{const o=c=>{if(g9e(c)){if(["THEAD","TR","TD","TH"].includes(c.nodeName.toUpperCase())){let l=c.parentNode;for(;l&&l.nodeName!=="TABLE";)l=l.parentNode;if(!l){n0.debug("Found table element without a parent <table>");const u=t.createElement("table");c.parentNode?.insertBefore(u,c),u.appendChild(c)}}c.attributes&&[...c.attributes].forEach(l=>{["style"].includes(l.name)&&c.removeAttribute(l.name)})}c.childNodes.forEach(o)};a.childNodes.forEach(o)};e.preventDefault();const s=n?.getSelection();if(s&&s.rangeCount>0){const o=s.getRangeAt(0).cloneContents();r(o);const c=t.createElement("div");c.appendChild(o);const l=c.innerHTML;e.clipboardData.setData("text/html",l),e.clipboardData.setData("text/plain",s.toString())}}const v4e=e=>{const t=Vn();return p.useCallback(n=>{v9e(n);const{currentTarget:r}=n,s=r.closest("[data-message-id]")?.getAttribute("data-message-id"),a=document.getSelection()?.toString(),o=D.getServerThreadId(e);!s||!a||!o||t||K.submitImplicitMessageFeedback({source:"keyboard",type:"copy",messageId:s,serverThreadId:o,selectedText:a,location:"selection"})},[e,t])};function y4e({clientThreadId:e,currentModelId:t}){const n=hNe(t,DD.CODE_INTERPRETER);y9e(n,e)}function y9e(e,t){const n=Zd(),r=D.getServerThreadId(t),s=Ne();async function a({queryKey:[o,c]}){return await K.getThreadInterpreterState(c).then(l=>(l.time_remaining_ms===0&&l.kernel_started&&s.warning("This advanced data analysis (beta) chat has timed out. You may continue the conversation, but previous files, links, and code blocks below may not work as expected.",{hasCloseButton:!0,duration:0}),l))}return me({queryKey:["interpreterState",r],queryFn:a,enabled:!!(e&&r&&!n),gcTime:0})}const x9e=Xe(()=>qe(()=>import("./khpl3zshcvxzq7am.js"),__vite__mapDeps([65,1,2,3,66,21,22,20,6])).then(e=>e.SearchSources));function x4e({clientThreadId:e}){const t=gf(),{turnIndex:n,messageId:r,clientThreadId:s,scrollToHeader:a,shouldAnimateScroll:o}=h0("searchSources")??{},{closeThreadSidebar:c}=Mo(),l=p.useCallback(()=>{c({clientThreadId:e})},[c,e]);return!r||!n||!t||s!==e?null:i.jsx(XR,{handleClose:l,children:i.jsx(x9e,{clientThreadId:e,scrollToHeader:a,shouldAnimateScroll:o,turnIndex:n,messageId:r,isInSidebar:!0})})}function b4e({clientThreadId:e}){p.useEffect(()=>{$e.closeSharingModal(),FO(),D.updateScrollToMessageId(e,"finalAgentTurn")},[e]);const t=ke();p.useEffect(()=>(D.retainThread(e),()=>{setTimeout(()=>{t.invalidateQueries({queryKey:["conversation",e]})},0),D.releaseThread(e)}),[e,t]),p.useEffect(()=>()=>{q.checkGate("3922476776")||na.abortAllRequests()},[e]);const n=p.useRef(e);p.useEffect(()=>{e!==n.current&&(q.checkGate("3922476776")||na.clear(),n.current=e)},[e]);const{closeThreadSidebar:r}=Mo(),s=mw.useState(mw.getActiveSidebar);p.useEffect(()=>{(s?.type==="searchSources"||s?.type==="summarizer")&&s.clientThreadId!==HE&&r({clientThreadId:e})},[e,r])}const b9e={type:"spring",stiffness:300,damping:30,mass:1},w4e={transition:b9e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}};function PM(e,t){return e===t-1}function S4e(e,t){const n=p.useRef(e).current,r=t&&e>n;p.useEffect(()=>{r&&(q.logEvent("chatgpt_continue_conversation_first_message_sent"),E.logEvent(P.continueConversationFirstMessageSent))},[r]),p.useEffect(()=>{t&&(q.logEvent("chatgpt_continue_conversation_page_loaded"),E.logEvent(P.continueConversationPageLoaded),q.logEvent("chatgpt_conversation_share_page_loaded"),E.logEvent(P.sharedConversationPageLoaded))},[t]);const s=Array.from({length:n},(o,c)=>({turnIndex:c,isFinalTurn:PM(c,e)})),a=Array.from({length:e-n},(o,c)=>{const l=c+n;return{turnIndex:l,isFinalTurn:PM(l,e)}});return{initialConversationTurns:s,continuedConversationTurns:a}}function C4e(){return i.jsx("div",{className:"text-pretty text-center text-xs font-semibold text-token-text-primary",children:i.jsx("button",{onClick:()=>{$e.openModal(et.ReportConversation),q.logEvent("chatgpt_conversation_share_report_content_clicked",null,{location:"Static Shared Thread Page"}),E.logEvent(P.sharedConversationReportContentClicked,{location:"Dynamic Shared Thread Page"})},children:i.jsx(S,{id:"thread.reportSharedConversation",defaultMessage:"Report content"})})})}function T4e(){return i.jsx("p",{className:"text-pretty text-center text-xs text-gray-500",children:i.jsx(S,{id:"threadLayout.sharedConversationCopyDisclaimer",defaultMessage:"This is a copy of a conversation between ChatGPT & Anonymous."})})}function k4e(){return i.jsxs("p",{className:"flex items-center justify-center text-pretty text-xs text-gray-500",children:[i.jsx(ya,{className:"icon-xs mr-2"}),i.jsx(S,{id:"threadLayout.sharedConversationPrivateDisclaimer",defaultMessage:"Messages beyond this point are only visible to you"})]})}var w9e=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,S9e=typeof self=="object"&&self&&self.Object===Object&&self;w9e||S9e||Function("return this")();function C9e({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:s=!1,onChange:a}={}){var o;const[c,l]=p.useState(null),[u,d]=p.useState(()=>({isIntersecting:s,entry:void 0})),f=p.useRef();f.current=a;const m=((o=u.entry)==null?void 0:o.isIntersecting)&&r;p.useEffect(()=>{if(!c||!("IntersectionObserver"in window)||m)return;let v;const y=new IntersectionObserver(b=>{const x=Array.isArray(y.thresholds)?y.thresholds:[y.thresholds];b.forEach(w=>{const C=w.isIntersecting&&x.some(T=>w.intersectionRatio>=T);d({isIntersecting:C,entry:w}),f.current&&f.current(C,w),C&&r&&v&&(v(),v=void 0)})},{threshold:e,root:t,rootMargin:n});return y.observe(c),()=>{y.disconnect()}},[c,JSON.stringify(e),t,n,m,r]);const h=p.useRef(null);p.useEffect(()=>{var v;!c&&((v=u.entry)!=null&&v.target)&&!r&&!m&&h.current!==u.entry.target&&(h.current=u.entry.target,d({isIntersecting:s,entry:void 0}))},[c,u.entry,r,m,s]);const g=[l,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function M4e(){const[e,t]=C9e({initialIsIntersecting:!1});return i.jsx("input",{name:"thread_is_scrolled_to_bottom",type:"checkbox",checked:t,ref:e,onChange:we,className:"invisible h-[1px] w-full"})}function E4e(e){const{children:t,className:n,style:r,...s}=e,[a,o]=$i(s);return i.jsx("div",{"data-testid":`bar-container-${s.name||"default"}`,className:A("z-10 flex flex-col gap-bar",n),ref:o,style:{...r,...a},children:t})}function _4e({className:e}){const t=L();return i.jsx(T9e,{className:e,"aria-label":t.formatMessage({id:"L/a4AQ",defaultMessage:"Scroll to bottom"}),onClick:async()=>{q.logEvent("chatgpt_thread_scroll_to_bottom"),await Xh.yield(),document.querySelector("[data-testid='screen-thread'] [slot=content]")?.scrollIntoView({behavior:"smooth",block:"end"})},children:i.jsx(t_,{className:"icon-md text-token-text-secondary"})})}const T9e=fe.button`cursor-pointer absolute bottom-0 self-center z-10 rounded-full bg-clip-padding border text-token-text-secondary border-token-border-light right-1/2 translate-x-1/2 bg-token-main-surface-primary w-11 h-11 flex items-center justify-center`,A4e=p.createContext({setComposerFooterElement:()=>{}});function zv(e){const t=e??document.querySelector("[data-name='application-root'] nav");return t&&getComputedStyle(t)?.getPropertyValue("--sidebar_should_light_dismiss")==="1"}const fo={openSidebar:(e,t,n)=>{const r=e.currentTarget.tagName==="INPUT"?e.currentTarget:document.querySelector(`#${e.currentTarget.getAttribute("for")}`);e.preventDefault(),e.persist();const a=zv(null)?kt.Floating:n;bu({className:"open-sidebar",types:[`from-${a}`],update:()=>{r&&(r.checked=!0),t.openSidebar()}})},closeSidebar:(e,t,n)=>{const r=e.currentTarget.tagName==="INPUT"?e.currentTarget:document.querySelector(`#${e.currentTarget.getAttribute("for")}`);e.preventDefault(),e.persist();const a=zv(null)?kt.Floating:n;bu({className:"close-sidebar",types:[`from-${a}`],update:()=>{r&&(r.checked=!1),t.closeSidebar()}})},togglePinSidebar:(e,t,n)=>{const s=e.currentTarget.tagName==="INPUT"?e.currentTarget:document.querySelector(`#${e.currentTarget.getAttribute("for")}`);s&&bu({className:n===kt.Pinned?"pin-sidebar":"unpin-sidebar",update:()=>{s.checked=n===kt.Pinned,t.setSidebarMode(n)}})}};function P4e(){const{store:e,actions:t}=Rm(),n=e(s=>s.isSidebarOpen),r=e(s=>s.mode);return i.jsxs(i.Fragment,{children:[i.jsx(jv,{id:Mn.FloatingOrPinned,name:Mn.FloatingOrPinned,checked:r===kt.Pinned,onChange:s=>{s.preventDefault(),s.persist();const a=r===kt.Pinned?kt.Floating:kt.Pinned;fo.togglePinSidebar(s,t,a)}}),i.jsx(jv,{id:Mn.OpenOrClosed,name:Mn.OpenOrClosed,checked:n,onChange:s=>{s.currentTarget.checked?fo.openSidebar(s,t,r):fo.closeSidebar(s,t,r)}})]})}function j4e(){const{actions:e,store:t}=Rm(),n=t(s=>s.mode),r=L();return i.jsx(KR,{className:A(pw.openSidebar,pw.sidebarIcon),htmlFor:Mn.OpenOrClosed,style:{viewTransitionName:"var(--vt_toggle_sidebar_closed)"},onActivate:s=>{fo.openSidebar(s,e,n)},icon:i.jsxs(i.Fragment,{children:[i.jsx(h_,{className:A("h-6 w-6","hidden @lg/thread:inline-flex")}),i.jsx(g_,{className:A("h-6 w-6","inline-flex @lg/thread:hidden")})]}),label:r.formatMessage({id:"fWaiMq",defaultMessage:"Open Sidebar"})})}const k9e=Xe(()=>qe(()=>import("./dn4wahbewcmhdzq3.js"),__vite__mapDeps([43,1,2,3,44,45,46,47,32,18])).then(e=>e.OpenDebugSidebarButton)),M9e=Xe(()=>qe(()=>Promise.resolve().then(()=>xIe),void 0).then(e=>e.default));function I4e(){const e=jke();return i.jsxs("div",{className:A("absolute bottom-4 right-4 z-30 flex-col gap-1","hidden @lg/screen-composer:flex"),style:{viewTransitionName:"var(--vt_thread_tools)"},children:[e?i.jsxs(i.Fragment,{children:[i.jsx(k9e,{}),!1]}):null,i.jsx(M9e,{})]})}var E9e=(e=>(e[e.ADAVisualization=0]="ADAVisualization",e[e.Image=1]="Image",e))(E9e||{});function N4e(){const{isUnauthenticated:e,isLoading:t}=bt(),{eligible:n,isLoading:r,markAsViewed:s}=Be(je.hasSeenPioneer),a=zt();return{eligible:a&&a.created>Date.now()/1e3-24*60*60&&n&&!e,isLoading:r||t,markAsViewed:s}}function _9e(){return window.dataLayer=window.dataLayer||[],function(){window.dataLayer.push(arguments)}}function A9e(){["IDE","ANID","NID"].forEach(t=>{try{document.cookie=t+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;domain=."+window.location.hostname}catch{q.logEvent("chatgpt_pioneer_cookie_error")}})}function O4e(){const e=zt(),{cspScriptNonce:t}=p.useContext(lE);return!window||!e||!t?()=>{}:async()=>{let n;if(e.email)try{const o=new TextEncoder().encode(e.email);n=await crypto.subtle.digest("SHA-256",o).then(c=>Array.from(new Uint8Array(c)).map(l=>l.toString(16).padStart(2,"0")).join(""))}catch{q.logEvent("chatgpt_pioneer_email_error")}const r=document.createElement("script");r.src="https://www.googletagmanager.com/gtag/js?id=AW-16678058309",r.nonce=t,r.async=!0,document.body.appendChild(r);const s=_9e();s("js",new Date),s("config","AW-16678058309",{send_page_view:!1,conversion_linker:!0,restricted_data_processing:!0}),A9e(),s("set","user_data",{sha256_email_address:n}),s("event","conversion",{send_to:"AW-16678058309/0kStCJHMl9QZEMXy25A-",user_data:{sha256_email_address:n}}),q.logEvent("chatgpt_pioneer_conv")}}var P9e=(e=>(e.Turn="turn",e.ImagesTab="images_tab",e))(P9e||{}),j9e=(e=>(e[e.FromLeft=-1]="FromLeft",e[e.FromRight=1]="FromRight",e))(j9e||{});class qv extends GM()(()=>({currentImage:void 0})){setCurrentImage(t){this.setState({currentImage:t})}static useCurrentImage(){return this.useState(t=>t.currentImage)}}function R4e({clientThreadId:e,children:t}){const[n]=p.useState(new qv);return p.useEffect(()=>{n.setCurrentImage(void 0)},[e,n]),i.jsx(qv.Provider,{store:n,children:t})}function D4e({clientThreadId:e}){return qv.useCurrentImage()?i.jsx(I9e,{clientThreadId:e}):null}const I9e=Xe(()=>qe(()=>import("./gzz12rmw75zva7mt.js"),__vite__mapDeps([67,1,2,3,21,22,16,17,6])).then(e=>e.ImageLightbox));function L4e(){const e=to(n=>n.liveRegionAssertive),t=to(n=>n.liveRegionPolite);return i.jsxs(i.Fragment,{children:[i.jsx("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",children:e}),i.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:t})]})}const $4e=()=>{const e=L(),t=ve(a=>a.activeModals.has(et.KeyboardActions)),n=()=>{$e.closeModal(et.KeyboardActions)},r=r5(),s=p.useMemo(()=>{const a=Math.ceil(r.length/2);return[r.slice(0,a),r.slice(a)]},[r]);return i.jsx(Te,{isOpen:t,onClose:n,type:"success",size:"custom",className:"md:max-w-[672px] lg:max-w-[796px] xl:max-w-4xl",showCloseButton:!0,title:e.formatMessage(R9e.keyboardActionsModalTitle),children:i.jsx(i.Fragment,{children:i.jsx("div",{className:"grid grid-flow-row grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-x-9",children:s.map((a,o)=>i.jsx("div",{className:"flex flex-col overflow-hidden",children:a.map(c=>i.jsx(N9e,{action:c},c.key))},`col-${o}`))})})})},N9e=({action:e})=>i.jsxs("div",{className:"flex items-center justify-between overflow-hidden text-token-text-primary",children:[i.jsx("div",{className:"flex flex-shrink items-center overflow-hidden text-sm",children:i.jsx("div",{className:"truncate",children:i.jsx(S,{...e.actionMessageDescriptor})})}),i.jsx("div",{className:"ml-3 flex flex-row gap-2",children:STe(e.keyboardBinding).map((t,n)=>i.jsx(O9e,{keyName:t},`${e.key}-${n}`))})]}),O9e=({keyName:e})=>{const t=A("my-2 flex h-8 items-center justify-center rounded-md border border-token-border-light capitalize text-token-text-secondary");return e.length>1?e.length>3?i.jsx("div",{className:A(t,"min-w-[50px]"),children:i.jsx("span",{className:"text-xs",children:e})}):i.jsx("div",{className:A(t,"min-w-[32px]"),children:i.jsx("span",{className:"text-xs",children:e})}):i.jsx("div",{className:A(t,"min-w-[32px]"),children:i.jsx("span",{className:"text-sm",children:e})})},R9e=z({keyboardActionsModalTitle:{id:"KeyboardActionsModal.keyboardActionsModalTitle",defaultMessage:"Keyboard shortcuts"}});function F4e(){const{clientThreadId:e,resetThread:t}=ka();return TTe({resetThreadAction:t,clientThreadId:e}),null}function B4e(e){const{children:t,className:n,style:r,name:s,...a}=e;return i.jsx("div",{className:Cn.parent,"data-testid":"screen-composer-parent",children:i.jsxs("div",{className:A(Cn.screenComposer,Cn.sidebarColors,Cn.registeredScreenProperties,n),"data-name":s,"data-testid":"screen-composer",style:r,children:[i.jsx("div",{className:Cn.banner,children:a.banner}),i.jsx("nav",{className:Cn.sidebar,children:a.sidebar}),i.jsx("div",{className:Cn.header,children:a.header}),i.jsx("main",{className:Cn.thread,id:"thread",children:a.thread}),i.jsx("section",{className:Cn.details,id:"details",children:a.details}),i.jsx("aside",{className:Cn.threadExtendedInfo,id:"threadExtendedInfo",children:a.threadExtendedInfo}),i.jsx("footer",{className:Cn.footer,children:a.footer}),i.jsx("div",{className:Cn.debugger,children:a.debugger}),t]})})}const D9e=()=>window.visualViewport?.height??document.documentElement.clientHeight;async function jM(e){return await new Promise(t=>setTimeout(t,100)),e?.aborted?null:D9e()}function XD(){return"virtualKeyboard"in navigator}function L9e({disableVirtualKeyboardScript:e,setKeyboardDimensions:t}){if(!XD())return;let n=!1;function r(){document.removeEventListener("focusout",o),navigator.virtualKeyboard.overlaysContent=!1,e||(t?.({height:null,bottom:null}),navigator.virtualKeyboard.removeEventListener("geometrychange",a))}function s(l,u){requestAnimationFrame(()=>{t?.({height:l,bottom:u})})}const a=l=>{const u=l,d=u.target.boundingRect.height,f=u.target.boundingRect.bottom;s(d,f)},o=()=>{n&&r()},c=l=>{const u=l.target;u&&(u instanceof HTMLInputElement||u instanceof HTMLTextAreaElement||u.isContentEditable)&&(n=!0,document.addEventListener("focusout",o),navigator.virtualKeyboard.overlaysContent=!0,e||navigator.virtualKeyboard.addEventListener("geometrychange",a))};return document.addEventListener("focusin",c),()=>{document.removeEventListener("focusin",c),document.removeEventListener("focusout",o),navigator.virtualKeyboard.removeEventListener("geometrychange",a)}}function $9e({screenRef:e}){let t=!1,n=new AbortController;function r(c){if(c==null){document.documentElement.style.removeProperty("--screen-height"),document.documentElement.style.removeProperty("--osk-height-multiplier");return}document.documentElement.style.setProperty("--screen-height",`${c}px`),document.documentElement.style.setProperty("--osk-height-multiplier","1")}const s=H0(async()=>{n.abort(),n=new AbortController;const c=await jM(n.signal);r(c)},250,{leading:!0}),a=c=>{const l=c.target;l&&(l instanceof HTMLInputElement||l instanceof HTMLTextAreaElement||l.isContentEditable)&&(t=!0,window.visualViewport?.addEventListener("resize",s),bu({update:async()=>{const u=await jM();r(u),window.scrollTo(0,0),e?.current?.scrollIntoView()}}))},o=()=>{t&&(t=!1,n.abort(),window.visualViewport?.removeEventListener("resize",s),document.removeEventListener("focusout",o),r(null))};return document.addEventListener("focusin",a),document.addEventListener("focusout",o),()=>{document.removeEventListener("focusin",a),document.removeEventListener("focusout",o),t=!1,n.abort(),window.visualViewport?.removeEventListener("resize",s)}}function U4e(e,t){const{value:n}=at("3168919911"),{value:r}=at("2128055372");p.useEffect(()=>!vR()||!n?void 0:XD()?L9e({screenRef:e,setKeyboardDimensions:t,disableVirtualKeyboardScript:r}):$9e({screenRef:e}),[n,r,e,t])}function V4e(e){const{clientThreadId:t}=ka(),n=p.useRef(e);n.current=e;const r=p.useRef(null);p.useEffect(()=>{const s=r.current;return r.current=t,()=>{t!==s&&n.current?.(t,s)}},[t])}function F9e(){const{activeModals:e}=ve(),t=Ce(),n=Be(je.ExploreGPTs),r=Be(je.ExploreGPTsNewNux),s=Kme(),a=hm(),o=Ms(),c=n.eligible&&!n.isLoading&&!a;let u=r.eligible&&!r.isLoading&&!a&&!s&&!o;return e.size>0&&(u=!1),!c&&t?.hasPlusFeatures()&&(u=!1),p.useEffect(()=>{u&&E.logEvent(P.storeDisplayNewNux)},[u]),u}function G4e({children:e}){const t=F9e(),n=L(),r=Be(je.ExploreGPTsNewNux);return t?i.jsx(Om,{announcementKey:je.ExploreGPTsNewNux,side:"right",show:!0,title:n.formatMessage(IM.exploreGPTsTitle),onDismiss:r.markAsViewed,sideOffset:20,theme:"bright",description:i.jsx(S,{...IM.exploreGPTsDescriptionNewNux}),children:e}):i.jsx(i.Fragment,{children:e})}const IM=z({exploreGPTsTitle:{id:"gptExploreGPTs.title",defaultMessage:"Explore GPTs"},exploreGPTsDescription:{id:"gptExploreGPTs.description",defaultMessage:"Now you can discover GPTs created by the community"},exploreGPTsDescriptionNewNux:{id:"gptExploreGPTs.descriptionNewNux",defaultMessage:"Discover custom versions of ChatGPT created for specific use cases like writing, research, and coding."}});function B9e({onClick:e}){const{clientThreadId:t}=ka(),{isSidebarFlyoutOpen:n,onSidebarFlyoutOpenChange:r}=m5(),s=Ms(),a=n(lo.Conversation);return i.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:i.jsx(ga,{onOpenChange:o=>{o&&q.logEvent("chatgpt_web_more_conversation_history_opened"),r(lo.Conversation,o)},side:s?"bottom":"right",sideOffset:4,open:a,contentAlign:"start",triggerButton:i.jsxs("button",{className:A("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",a&&"bg-token-main-surface-secondary"),onClick:e,children:[i.jsx(xf,{className:A("icon-md mr-1 font-semibold text-token-sidebar-icon")}),i.jsx("span",{className:"text-left",children:i.jsx(S,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:i.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:i.jsx(xs,{children:i.jsx(bke,{activeId:t,hideOverflowMenu:!0})})})})})}function U9e(){const e=yn(),{conversations:t}=ob();return{isCollapsible:e&&t.length>5,recentConversationLimit:5}}function V9e({showRetry:e,refetch:t}){return i.jsxs("div",{className:"mt-5 p-3 text-center italic text-token-text-tertiary",children:[i.jsx(S,{id:"p9u9Tx",defaultMessage:"Unable to load history"}),e&&i.jsx("div",{className:"mt-1",children:i.jsx(ee,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{t()},children:i.jsx(S,{id:"3NKcIv",defaultMessage:"Retry"})})})]})}function W4e({clientThreadId:e}){const t=g0(e),n=Vn(),{isCollapsible:r,recentConversationLimit:s}=U9e(),a={recentConversationLimit:s};Mm()&&(a.hideSnorlaxConversations=!0);const c=p.useRef(!1),l=!0,{conversations:u,data:d,isLoading:f,isError:m,recents:h,refetch:g}=ob(a),[v,y]=p.useState(!0),b=p.useCallback(function(I){I===void 0&&y(!1),g({cancelRefetch:!0})},[g,y]),x=n?void 0:t,w=u.length===0,C=m||d===void 0&&!f&&c.current,T=!C&&(d===void 0||f);d===void 0&&!f&&!c.current&&(c.current=!0,b(!0));const _=u.find(k=>k.id===x)??null;return p.useMemo(()=>{Mc.publish({kind:"refreshHistory",conversations:u})},[u]),i.jsxs(i.Fragment,{children:[C&&i.jsx(V9e,{showRetry:v,refetch:b}),!w&&i.jsxs(ETe,{header:h.label,isLastInGroup:!0,children:[h.items.map((k,I)=>i.jsx(Dd,{item:k,isActive:k.id===x,testId:`history-item-${I}`},k.id)),_&&!h.items.some(k=>k.id===x)&&i.jsx(Dd,{item:_,isActive:!0})]}),T&&i.jsx(cn,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),r&&i.jsx(xs,{children:i.jsx("div",{className:"-ml-2 mb-5",children:i.jsx("div",{hidden:!l,className:A(!l),children:i.jsx(B9e,{})})})})]})}function H4e(){return i.jsx("div",{className:Al.btn,children:i.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[i.jsx("path",{className:Al.bar,d:"M4 5V19"}),i.jsxs("g",{className:Al.rightArrow,children:[i.jsx("path",{d:"M21 12L11 12"}),i.jsx("path",{d:"M16 7L21 12L16 17"})]}),i.jsxs("g",{className:Al.leftArrow,children:[i.jsx("path",{d:"M13 12L3 12"}),i.jsx("path",{d:"M8 7L3 12L8 17"})]})]})})}function G9e(){return(Iv()?"":"Ctrl")+" K"}function W9e({children:e,sideOffset:t,className:n}){return i.jsx(Ye,{sideOffset:t,className:n,label:i.jsxs("div",{children:[i.jsx(S,{id:"jmd8WH",defaultMessage:"Search chats"}),i.jsx("div",{className:"text-sm font-normal text-token-text-secondary",children:G9e()})]}),children:e})}function H9e(e){const t=new AbortController,n=t.signal;let r=!1;function s(c){if(r)return;const{checkElement:l,onLightDismiss:u}=e.current;!NM(c.target,l)&&!z9e(c.target)&&u()}function a(c){const{checkElement:l}=e.current;r=NM(c.target,l)}function o(c){const{onLightDismiss:l}=e.current;c.key==="Escape"&&l()}return document.addEventListener("mousedown",a,{signal:n}),document.addEventListener("mouseup",s,{signal:n}),document.addEventListener("keydown",o,{signal:n}),()=>{t.abort()}}function z9e(e){return"getAttribute"in e?e.getAttribute("role")==="menuitem":!1}function NM(e,t){if(!e)return!1;let n=e;for(;n!=null;){if(t(n))return!0;n=n.parentElement}return!1}function q9e({onLightDismiss:e,checkElement:t,enabled:n}){const r=p.useRef({onLightDismiss:e,checkElement:t});r.current={onLightDismiss:e,checkElement:t},p.useEffect(()=>{if(n)return H9e(r)},[n])}function Y9e({onNewThread:e}){const t=L(),n=ze(),{clientThreadId:r}=ka(),s=hl(r),a=s?bwe(s):void 0,o=a?aa(a):void 0,c=Zo(a?.gizmo.id),l=t.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return i.jsx(Ye,{label:l,children:i.jsx(En,{to:o??"/",onClick:async u=>{u.preventDefault(),!c&&o!=null?uc(n,o):e()},tabIndex:-1,children:i.jsx(Pfe,{icon:i.jsx(b0,{className:br.sidebarIcon}),className:br.searchAction,label:l,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const K9e=Xe(()=>qe(()=>import("./n7jvk4prpmmvn45w.js"),__vite__mapDeps([68,1,2,3,69,49,70])).then(e=>e.FannyPackIconButton));function z4e({onNewThread:e}){const t=L(),n=p.useRef(null),{store:r,actions:s}=Rm(),a=r(g=>g.isSidebarOpen),o=r(g=>g.mode),{isSidebarFlyoutOpen:c}=m5(),l=c(lo.Conversation),u=c(lo.Gizmo),d=c(lo.Snorlax),f=a&&!l&&!u&&!d;function m(){zv(n.current)&&document.getElementById(Mn.OpenOrClosed)?.click()}q9e({checkElement:g=>g?.tagName==="NAV",enabled:f,onLightDismiss:m});const{isFannyPackEnabled:h}=Ab();return mr(),i.jsxs(i.Fragment,{children:[i.jsx(Sg,{type:"primary",className:A(br.screenHeader),name:"sidebar-header",children:i.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between",ref:n,children:[i.jsx("div",{className:"grid items-center gap-1",children:i.jsx(KR,{className:A(br.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:g=>{fo.closeSidebar(g,s,o)},onActivate:g=>{fo.closeSidebar(g,s,o)},icon:i.jsxs(i.Fragment,{children:[i.jsx(h_,{className:A(br.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),i.jsx(g_,{className:A(br.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:t.formatMessage(X9e.closeSidebar),htmlFor:Mn.OpenOrClosed,tooltipSideOffset:4})}),i.jsxs("div",{className:"flex items-center",children:[!1,h&&i.jsx(W9e,{children:i.jsx(K9e,{className:br.searchAction,icon:i.jsx(k6,{className:br.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),i.jsx(Y9e,{onNewThread:e})]})]})}),i.jsx(Sg,{type:"primary",className:br.bucketBar,disableSizeTracking:!0,children:""})]})}const X9e=z({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function q4e(){const{clientThreadId:e,currentModelId:t,isCompanionWindow:n}=ka();return i.jsx(Uje,{conversationId:e,currentModelId:t,isActiveWindow:!n})}export{et as $,uke as A,Xo as B,wf as C,a$e as D,BLe as E,o$e as F,A$e as G,bke as H,ka as I,cNe as J,sA as K,$i as L,_6e as M,GG as N,Ic as O,y$e as P,BOe as Q,M6e as R,lo as S,gRe as T,$e as U,V$e as V,A4e as W,jv as X,dTe as Y,I4e as Z,zx as _,_6 as a,IIe as a$,_$e as a0,Pke as a1,OO as a2,gA as a3,lRe as a4,wd as a5,en as a6,Hn as a7,Tpe as a8,ml as a9,xt as aA,Bpe as aB,nhe as aC,ao as aD,wr as aE,GDe as aF,fhe as aG,khe as aH,A9 as aI,_9 as aJ,C9 as aK,UDe as aL,Sa as aM,ki as aN,mv as aO,ZOe as aP,Jt as aQ,Ta as aR,Sg as aS,uc as aT,NIe as aU,Ga as aV,kIe as aW,MIe as aX,Ss as aY,SIe as aZ,wIe as a_,E9 as aa,Ca as ab,Le as ac,Che as ad,F9 as ae,_he as af,I9 as ag,Xpe as ah,DT as ai,Rpe as aj,dhe as ak,hs as al,Bn as am,Sn as an,DDe as ao,RDe as ap,$De as aq,qDe as ar,BDe as as,Ahe as at,dv as au,Sd as av,bm as aw,ihe as ax,ohe as ay,FDe as az,wSe as b,G9e as b$,Vt as b0,qRe as b1,Gv as b2,wwe as b3,aa as b4,k6e as b5,CDe as b6,x3e as b7,A6e as b8,$me as b9,TLe as bA,zt as bB,vLe as bC,yl as bD,No as bE,hl as bF,ll as bG,hN as bH,hn as bI,mc as bJ,Je as bK,h5 as bL,C5e as bM,oA as bN,cA as bO,pSe as bP,TN as bQ,z3e as bR,F3e as bS,E9e as bT,j6e as bU,g5 as bV,qv as bW,P9e as bX,j9e as bY,Pf as bZ,W9e as b_,NDe as ba,o5 as bb,N6e as bc,O6e as bd,cl as be,xde as bf,Y5e as bg,l3e as bh,v_ as bi,SN as bj,dde as bk,ode as bl,W3e as bm,bN as bn,_be as bo,V3e as bp,Tbe as bq,B3e as br,fm as bs,U3e as bt,l4e as bu,eOe as bv,Yu as bw,D0 as bx,ybe as by,jO as bz,PLe as c,H0 as c$,Oc as c0,E6e as c1,$3e as c2,Pfe as c3,ye as c4,$x as c5,Tle as c6,hDe as c7,_De as c8,dm as c9,ETe as cA,e$e as cB,JLe as cC,E5e as cD,Ms as cE,g6e as cF,IO as cG,v6e as cH,h6e as cI,oLe as cJ,w$e as cK,B7 as cL,Nb as cM,fA as cN,W6e as cO,bM as cP,HLe as cQ,Rs as cR,q9 as cS,KN as cT,H6e as cU,v$e as cV,Dm as cW,_Le as cX,CM as cY,IMe as cZ,jMe as c_,MR as ca,iCe as cb,Fn as cc,ln as cd,fs as ce,nRe as cf,U7 as cg,Oe as ch,xLe as ci,KLe as cj,B4e as ck,Lme as cl,aOe as cm,iOe as cn,cOe as co,Jh as cp,L0 as cq,vR as cr,lOe as cs,m5 as ct,r$e as cu,cbe as cv,t$e as cw,yR as cx,bb as cy,n$e as cz,ALe as d,b2 as d$,Hx as d0,MLe as d1,Gme as d2,Vme as d3,Wme as d4,Ome as d5,Rme as d6,Hme as d7,ks as d8,g3e as d9,kTe as dA,fbe as dB,ATe as dC,Ige as dD,tRe as dE,OOe as dF,mA as dG,m3e as dH,p3e as dI,wge as dJ,Sge as dK,ul as dL,P6e as dM,er as dN,x5e as dO,b5e as dP,ax as dQ,c5e as dR,l5e as dS,ac as dT,Us as dU,mce as dV,oc as dW,Zae as dX,v5e as dY,y5e as dZ,ix as d_,Td as da,v3e as db,y3e as dc,gD as dd,Gje as de,Wje as df,mO as dg,R4e as dh,D4e as di,$5e as dj,F5e as dk,Ule as dl,D5e as dm,B5e as dn,cDe as dp,iDe as dq,wo as dr,tt as ds,G$e as dt,sAe as du,Wue as dv,Tu as dw,wl as dx,Ko as dy,Z_e as dz,Fme as e,Mle as e$,C2 as e0,w2 as e1,S2 as e2,kce as e3,Lce as e4,o5e as e5,p5e as e6,h5e as e7,g5e as e8,m5e as e9,P3e as eA,um as eB,jOe as eC,A5e as eD,eA as eE,_Oe as eF,dRe as eG,hme as eH,NOe as eI,XOe as eJ,QOe as eK,fRe as eL,h$e as eM,QLe as eN,oke as eO,ake as eP,XLe as eQ,ZLe as eR,Q9 as eS,c3e as eT,sRe as eU,aRe as eV,V7 as eW,hge as eX,oRe as eY,$o as eZ,eRe as e_,i5e as ea,u5e as eb,d5e as ec,f5e as ed,M2 as ee,g2 as ef,$I as eg,E2 as eh,a5e as ei,i$e as ej,c$e as ek,l$e as el,Ob as em,Rr as en,pO as eo,u$e as ep,Jo as eq,k5e as er,ca as es,Aie as et,Lb as eu,p7 as ev,mRe as ew,A3e as ex,Dge as ey,IOe as ez,zme as f,l4 as f$,o3e as f0,hm as f1,j4e as f2,h7 as f3,p$e as f4,e5e as f5,yIe as f6,S6e as f7,TR as f8,rSe as f9,R6e as fA,D6e as fB,fO as fC,JOe as fD,T3e as fE,zOe as fF,vge as fG,I3e as fH,RPe as fI,jPe as fJ,kN as fK,yT as fL,Fle as fM,DIe as fN,Be as fO,je as fP,Q$e as fQ,Hje as fR,Z$e as fS,J$e as fT,Om as fU,LOe as fV,X$e as fW,WD as fX,E6 as fY,oa as fZ,SLe as f_,w6e as fa,Ct as fb,rRe as fc,POe as fd,T$e as fe,WOe as ff,HOe as fg,i3e as fh,AOe as fi,Zo as fj,ib as fk,gs as fl,ur as fm,Ib as fn,ve as fo,nke as fp,_ke as fq,d$e as fr,ID as fs,U6e as ft,YIe as fu,L6e as fv,F6e as fw,$6e as fx,B6e as fy,jD as fz,j_ as g,ls as g$,tg as g0,$_ as g1,J9e as g2,Tf as g3,O_ as g4,tOe as g5,oOe as g6,S_ as g7,nOe as g8,c6e as g9,q4e as gA,F4e as gB,L3e as gC,N4e as gD,O4e as gE,ASe as gF,bv as gG,iu as gH,NLe as gI,$4e as gJ,OLe as gK,L4e as gL,a3e as gM,pme as gN,f4e as gO,O3e as gP,t3e as gQ,n3e as gR,Mye as gS,VRe as gT,tP as gU,qU as gV,GRe as gW,OU as gX,LRe as gY,xA as gZ,Ir as g_,z5 as ga,CSe as gb,Que as gc,Kr as gd,tN as ge,Xue as gf,q5e as gg,yLe as gh,s3e as gi,PMe as gj,Q5e as gk,r5e as gl,WG as gm,X5e as gn,LEe as go,m7 as gp,hbe as gq,O$e as gr,q6e as gs,UO as gt,mwe as gu,Qg as gv,Cwe as gw,ede as gx,w4e as gy,U4e as gz,Dme as h,sme as h$,ms as h0,yRe as h1,yP as h2,Pe as h3,vy as h4,RRe as h5,kU as h6,p1 as h7,IRe as h8,g1 as h9,ERe as hA,MRe as hB,PRe as hC,HRe as hD,zRe as hE,xRe as hF,WRe as hG,vRe as hH,XDe as hI,vm as hJ,hhe as hK,Fpe as hL,JDe as hM,KDe as hN,zDe as hO,HDe as hP,Br as hQ,e3e as hR,YDe as hS,VDe as hT,kpe as hU,T9 as hV,QDe as hW,qpe as hX,Whe as hY,_5e as hZ,Ux as h_,TU as ha,ORe as hb,CRe as hc,SRe as hd,EU as he,MU as hf,kRe as hg,NRe as hh,wRe as hi,FRe as hj,TRe as hk,jRe as hl,wP as hm,Nr as hn,BRe as ho,zU as hp,URe as hq,vP as hr,qn as hs,pt as ht,Wt as hu,bRe as hv,$Re as hw,qB as hx,DRe as hy,ns as hz,q_ as i,YLe as i$,u3e as i0,d3e as i1,fge as i2,r3e as i3,iA as i4,ZG as i5,Mde as i6,hRe as i7,lDe as i8,uDe as i9,ea as iA,ibe as iB,R3e as iC,eAe as iD,ws as iE,DOe as iF,Kue as iG,Y_e as iH,Rge as iI,Q_e as iJ,F_e as iK,yb as iL,z5e as iM,xb as iN,Ake as iO,qLe as iP,tAe as iQ,BT as iR,b$e as iS,f5 as iT,jge as iU,Eye as iV,ULe as iW,jTe as iX,DTe as iY,JTe as iZ,ZTe as i_,D3e as ia,pbe as ib,tn as ic,EDe as id,ADe as ie,jDe as ig,IDe as ih,Ime as ii,PDe as ij,vme as ik,yme as il,X0 as im,Eje as io,fle as ip,FI as iq,A5 as ir,D$e as is,L$e as it,jN as iu,ZDe as iv,qb as iw,kfe as ix,Bx as iy,Z5 as iz,b4e as j,Q5 as j$,l5 as j0,i9 as j1,c9 as j2,g$e as j3,LNe as j4,NNe as j5,Xt as j6,lh as j7,M5e as j8,sDe as j9,G4e as jA,ODe as jB,q0 as jC,Ya as jD,M3e as jE,W4e as jF,Rm as jG,KR as jH,H4e as jI,fo as jJ,kt as jK,E4e as jL,V4e as jM,P4e as jN,z4e as jO,zv as jP,o6e as jQ,QG as jR,a6e as jS,dSe as jT,hR as jU,Jl as jV,FMe as jW,Tye as jX,X9 as jY,_3e as jZ,K_e as j_,aDe as ja,oDe as jb,K5e as jc,rDe as jd,Z5e as je,J5e as jf,bOe as jg,N5e as jh,O5e as ji,I5e as jj,TD as jk,_2e as jl,sIe as jm,sLe as jn,$Se as jo,Sb as jp,VOe as jq,pwe as jr,VO as js,tve as jt,GP as ju,WLe as jv,s5 as jw,zLe as jx,VLe as jy,GLe as jz,SSe as k,IU as k$,Gd as k0,Nge as k1,Oge as k2,k3e as k3,qOe as k4,iRe as k5,cRe as k6,Fge as k7,E3e as k8,tA as k9,$ie as kA,nLe as kB,Wbe as kC,ti as kD,eLe as kE,tLe as kF,rLe as kG,J3e as kH,Z3e as kI,r6e as kJ,wje as kK,s6e as kL,n6e as kM,FLe as kN,Lie as kO,NI as kP,nh as kQ,Wie as kR,Hie as kS,Io as kT,b6e as kU,mIe as kV,MM as kW,e6e as kX,t6e as kY,jke as kZ,_Se as k_,KRe as ka,XRe as kb,n5e as kc,KG as kd,Ax as ke,j5e as kf,Px as kg,kLe as kh,ob as ki,vke as kj,S5e as kk,T5e as kl,FJ as km,JG as kn,w_ as ko,Do as kp,t5e as kq,YG as kr,s5e as ks,oh as kt,Pw as ku,ts as kv,Ble as kw,Vle as kx,MOe as ky,kOe as kz,TTe as l,X_e as l$,eg as l0,pd as l1,eN as l2,I7 as l3,H7 as l4,Bke as l5,SMe as l6,Rb as l7,Ike as l8,R$e as l9,Nbe as lA,y6e as lB,$_e as lC,eDe as lD,Ede as lE,mDe as lF,F$e as lG,x6e as lH,p6e as lI,m6e as lJ,f6e as lK,sSe as lL,ZRe as lM,N7 as lN,FOe as lO,T6e as lP,ct as lQ,yd as lR,fAe as lS,EOe as lT,_Ee as lU,fOe as lV,hLe as lW,C6e as lX,iR as lY,Nd as lZ,mLe as l_,fDe as la,tDe as lb,nDe as lc,B$e as ld,$$e as le,jbe as lf,Vk as lg,HCe as lh,Nke as li,Oke as lj,Q3e as lk,q$e as ll,U$e as lm,Ht as ln,Y$e as lo,nR as lp,gLe as lq,CLe as lr,hSe as ls,QMe as lt,i6e as lu,WO as lv,Ewe as lw,rR as lx,DEe as ly,Ibe as lz,$Le as m,g4e as m$,FO as m0,D_ as m1,pRe as m2,N$e as m3,E$e as m4,YOe as m5,PEe as m6,I$e as m7,k$e as m8,z$e as m9,cLe as mA,K6e as mB,z6e as mC,X6e as mD,xl as mE,j3e as mF,t4e as mG,J6e as mH,e4e as mI,RIe as mJ,n4e as mK,Rc as mL,OD as mM,ROe as mN,p4e as mO,X3e as mP,u4e as mQ,QRe as mR,RLe as mS,DLe as mT,YRe as mU,BP as mV,WNe as mW,K$e as mX,vbe as mY,mTe as mZ,K3e as m_,j$e as ma,W$e as mb,H$e as mc,dOe as md,u6e as me,kSe as mf,aSe as mg,bLe as mh,uOe as mi,l6e as mj,pLe as mk,lb as ml,xR as mm,wLe as mn,rA as mo,C$e as mp,ISe as mq,x$e as mr,C2e as ms,tv as mt,il as mu,Fbe as mv,S$e as mw,_we as mx,vA as my,iLe as mz,f$e as n,G6e as n$,eF as n0,Z6e as n1,m4e as n2,YAe as n3,m9e as n4,r4e as n5,a4e as n6,d4e as n7,c4e as n8,o4e as n9,ILe as nA,DCe as nB,ICe as nC,vDe as nD,$Oe as nE,gDe as nF,TDe as nG,SDe as nH,bDe as nI,yDe as nJ,xDe as nK,_ye as nL,gme as nM,wDe as nN,kDe as nO,bl as nP,P$e as nQ,k5 as nR,C5 as nS,xD as nT,M$e as nU,C3e as nV,pe as nW,b3e as nX,STe as nY,uRe as nZ,V6e as n_,i4e as na,w5e as nb,Lje as nc,v4e as nd,Q6e as ne,GO as nf,OIe as ng,I6e as nh,UOe as ni,y4e as nj,Gle as nk,Hle as nl,lTe as nm,d6e as nn,Uje as no,m$e as np,oR as nq,S4e as nr,T4e as ns,C4e as nt,R5e as nu,k4e as nv,M4e as nw,_4e as nx,PSe as ny,Eb as nz,Y6e as o,M6 as o$,_O as o0,NTe as o1,qG as o2,ELe as o3,DSe as o4,w3e as o5,S3e as o6,aCe as o7,GOe as o8,pDe as o9,SOe as oA,V_ as oB,COe as oC,sOe as oD,TOe as oE,Zh as oF,rOe as oG,N_ as oH,P6 as oI,j6 as oJ,HO as oK,lLe as oL,fLe as oM,uLe as oN,mn as oO,ZO as oP,KO as oQ,kv as oR,dLe as oS,fk as oT,P1e as oU,mk as oV,T1e as oW,dk as oX,uk as oY,t1e as oZ,yue as o_,FSe as oa,Z7 as ob,A4 as oc,md as od,bf as oe,V0 as of,xOe as og,P4 as oh,_Re as oi,hd as oj,An as ok,Jg as ol,yOe as om,Q4 as on,wOe as oo,Tr as op,hOe as oq,gOe as or,mOe as os,aLe as ot,pOe as ou,$0 as ov,Tn as ow,ng as ox,vOe as oy,c4 as oz,s$e as p,M4 as p0,JRe as p1,G5e as p2,L5e as p3,H5e as p4,s4e as p5,N3e as p6,Vxe as p7,U5e as p8,xO as p9,hMe as pa,la as pb,NMe as pc,Y3e as pd,q3e as pe,G3e as pf,xle as pg,bbe as ph,H3e as pi,xbe as pj,cue as pk,uN as pl,Dx as pm,gue as pn,hue as po,V5e as pp,CT as pq,W5e as pr,Sue as ps,KOe as pt,ih as pu,h4e as pv,x4e as q,LLe as r,j0 as s,is as t,P_ as u,zG as v,MTe as w,Ab as x,HG as y,Mm as z};
//# sourceMappingURL=m0ujq4si8sio1lz0.js.map
