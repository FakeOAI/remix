const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/caf3d6zrpin3rim2.js","assets/nqo5y2f0dorhrqsr.js","assets/i4np6cv57rki7vb1.js","assets/root-c0rginjx.css","assets/hy4pnhpks2qtkjnf.js","assets/bd4k1d80iyttxstv.js","assets/c0tidrcnxh2cm8mc.js","assets/conversation-small-kq10986g.css","assets/l26obrirrfjcwlw1.js","assets/ghfs64zarpxqdqga.js","assets/d1cojvgt5j0pw4qh.js","assets/h6gfyhbt1sxbzqlm.js","assets/n0428qzwipwfqay9.js","assets/j1cp8314yc8vhtw9.js"])))=>i.map(i=>d[i]);
import{j as e,c as M,r as x,ae as U,af as Se,L as ee,M as E,e as je}from"./nqo5y2f0dorhrqsr.js";import{h4 as ve,jo as H,bR as ye,cg as Ce,h1 as se,hZ as Ie,g3 as Ne,dG as D,dE as ke,aS as te,cU as Me,jp as T,eT as ze,jq as Fe,jr as Oe,eZ as Te,dH as ne,js as we,b8 as Q,dI as Ee,ck as ae,jt as Ge,fm as _e,U as ie,fX as Le,eU as Pe,ju as Ae,cy as Re,cz as Be,cu as K,d0 as He,aY as De,jv as Ue,jw as O,ct as V,K as p,cM as oe,dJ as We,J as re,dK as Ke,cB as ce,jx as Ve,M as Ye,jy as Ze,jz as qe,jA as Je,jB as $,ew as Qe,jC as Y,aF as _,jD as le,jE as $e,jF as W,jG as w,cG as Xe,ex as es,bt as ss,jH as ts,aG as ns,bY as as,jI as is,E as os,jJ as rs,I as cs,bP as ls,jK as ds,jL as de,L as ms,jM as us,cd as xs}from"./c0tidrcnxh2cm8mc.js";import{aR as Z,aS as q,ej as me,j as J,bd as L,B as ue,dV as fs,cz as xe,as as y,N as A,S as hs,ak as gs,cQ as ps,cg as bs,d4 as Ss,a$ as fe,gC as j,gD as js,bN as vs,bO as ys,fD as Cs,dL as P,aU as Is}from"./i4np6cv57rki7vb1.js";import{u as G,d as Ns}from"./l26obrirrfjcwlw1.js";import{U as ks,P as Ms}from"./ghfs64zarpxqdqga.js";const zs=Z(()=>q(()=>import("./caf3d6zrpin3rim2.js"),__vite__mapDeps([0,1,2,3,4])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(he,{color:s})}),Fs={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function Os({color:s,folderState:n,gizmoId:t,sidebarSnorlaxFolderStore:o}){const a=M(),[d,i]=x.useState(!1);return e.jsx(L,{side:"top",sideOffset:4,delayDuration:600,label:n==="open"?a.formatMessage(Q.hideChatsForProjectTooltip):a.formatMessage(Q.showChatsForProjectTooltip),children:e.jsx("button",{onClick:m=>{m.preventDefault(),n==="open"?o.collapseProject(t):o.expandProject(t)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{i(!0)},onMouseLeave:()=>{i(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(zs,{isOpen:n==="open",isHovered:d,color:s})})})})})}function he({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center text-token-text-primary",children:e.jsx(ve,{className:"h-3/4 w-3/4",style:{color:s}})})}function Ts({gizmo:s,historyDisabled:n,section:t,onClick:o,isActive:a,hideOverflowMenu:d=!1,elementRef:i}){const{clientThreadId:m}=G(),f=me(m),h=M(),[u,b]=x.useState(!1),[c,r]=x.useState(!1),l=s.gizmo.id,g=H.useStore(),S=H.useState(F=>H.selectFolderState(F,l)),I=J(),R=!!s.gizmo.tags?.includes(ye.FirstParty),{items:k=[],hasNextPage:B}=Ce(s.gizmo.id),N=se(l),z=Ie(l);let v=!1;a&&N&&!(S==="open"&&f)&&(v=!0),x.useEffect(()=>{S!=="open"&&a&&f&&g.expandProject(l)},[a,f,g,l]);let C;if(s!=null)C=s.gizmo.display.name||Ne;else{if(I==null)return null;n?C=h.formatMessage(D.clearChat):I.canInteractWithGizmos()?C=Ee:C=h.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(U.div,{whileTap:{scale:.98},onMouseEnter:()=>{r(!0)},onMouseLeave:()=>{r(!1)},children:e.jsx(ke,{loggingGizmoId:s?.gizmo.id??"primary",href:te(s),onClick:o,showActiveIndicator:v,icon:N&&k.length>0?e.jsx(Os,{color:z,folderState:S,gizmoId:l,sidebarSnorlaxFolderStore:g}):N?e.jsx(he,{color:z}):e.jsx(Me,{isFirstParty:R,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:u,label:C,rightIcon:t===T.Workspace&&e.jsx(L,{side:"right",label:h.formatMessage(X.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"}),children:e.jsx(ze,{className:"icon-md text-token-text-secondary",alt:h.formatMessage(X.workspaceRecommended,{workspace_name:I?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(c||u)&&!d&&(N?e.jsx("div",{className:"text-token-text-tertiary",onClick:F=>{F.preventDefault()},children:e.jsx(Fe,{gizmo:s,isOpen:u,setIsOpen:b})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:F=>{F.preventDefault()},children:e.jsx(Oe,{gizmo:s,isOpen:u,setIsOpen:b,section:t})})),!N&&!d&&e.jsx(L,{side:"right",label:h.formatMessage(n?D.clearChat:D.newChat),className:"flex items-center",children:e.jsx("button",{className:u?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(Te,{className:"icon-md"}):e.jsx(ne,{className:"icon-md"})})})]}),elementRef:i})}),e.jsx(Se,{initial:!1,children:N&&S==="open"&&k.length>0&&e.jsx(U.div,{initial:"closed",animate:"open",exit:"closed",variants:Fs,className:"overflow-hidden",children:e.jsx(we,{gizmoResource:s,serverThreadId:f,isOnProjectPage:v,conversations:k,hasNextPage:B})},"nested-conversations")})]})}const X=ue({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function ws(s){const{clientThreadId:n}=G(),t=x.useRef(s);t.current=s;const o=x.useRef(null);x.useEffect(()=>{const a=o.current;return o.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function ge(){const s=M(),n=ae(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(Ge,{children:e.jsx(U.div,{whileTap:{scale:.98},children:e.jsx(ee,{to:_e(),onClick:()=>{n.activeSidebar==="popover-nav"&&ie.setActiveSidebar(!1)},children:e.jsx(Le,{icon:Pe,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const Es=2;function pe({gizmos:s,isGizmoFlyout:n,isLoaded:t,maxToShowOnLoad:o=4,isScreenArch:a,showAllSidebarItems:d}){const i=Ue(s,r=>r.flair.kind),m=[...(i[O.Workspace]?.map(({resource:r})=>({gizmo:r,section:T.Workspace}))??[]).slice(0,3),...i[O.FirstParty]?.map(({resource:r})=>({gizmo:r,section:T.Keep}))??[],...i[O.SidebarKeep]?.map(({resource:r})=>({gizmo:r,section:T.Keep}))??[]],f=i[O.Recent]?.slice(0,a||t?i[O.Recent]?.length:Es).map(({resource:r})=>({gizmo:r,section:T.Recents}))??[],h=f.length,u=m.length,b=a?h>0:s.length>o;let c=[];return n&&a?c=[...m,...f]:!n&&a?c=m:(c=[...m,...f],d||(c.length>o&&u>o?c=c.slice(0,u):c.length>o&&(c=c.slice(0,o)))),{listItems:c,itemsLeft:s.length-c.length,needsToCollapseItems:b,total:s.length}}function be({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:o=!1}){const a=x.useRef(!1),d=!t,i=fs(),[m,f]=x.useState(!1),h=ae(l=>!Ae.isGptListCollapsed(l)),{listItems:u,needsToCollapseItems:b,itemsLeft:c}=pe({gizmos:s,isGizmoFlyout:d,isLoaded:m,maxToShowOnLoad:t,isScreenArch:i,showAllSidebarItems:h});x.useEffect(()=>{m||f(!0)},[m]),x.useEffect(()=>{u.length>0&&!a.current&&(Re({namespace:Be.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),a.current=!0)},[u]);function r(l,g){const S=e.jsx(Ts,{gizmo:l,isActive:l.gizmo.id===n,section:g,hideOverflowMenu:o},l.gizmo.id);return i?e.jsx("li",{children:S}):S}return e.jsxs("div",{children:[u.map(({gizmo:l,section:g},S)=>e.jsxs(x.Fragment,{children:[S>1&&g!==u[S-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),r(l,g)]},S)),!i&&b?e.jsxs("button",{onClick:ie.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(K,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:h?e.jsxs(e.Fragment,{children:[e.jsx(E,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(He,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:c}}),e.jsx(De,{className:"icon-xs"})]})})]}):null,!i&&e.jsx(ge,{})]})}function Gs({currentGizmoId:s,gizmos:n,onClick:t}){const{isSidebarFlyoutOpen:o,onSidebarFlyoutOpenChange:a}=V(),d=o(p.Gizmo),i=oe();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(xe,{onOpenChange:m=>a(p.Gizmo,m),side:i?"bottom":"right",sideOffset:4,open:d,contentAlign:"end",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",d&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(K,{className:y("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(E,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(A,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(be,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function _s({currentGizmoId:s}){const{data:{gizmos:n}={}}=We();let t=n;re()&&(t=n?.filter(d=>!Ke(d.resource)));const{needsToCollapseItems:a}=pe({gizmos:t??[],isLoaded:!1,isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(ce,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(E,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(ge,{}),e.jsx(be,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:Ve}),a&&e.jsx(A,{children:e.jsx(Gs,{currentGizmoId:s,gizmos:t??[]})})]})})}function Ls({onClick:s}){const{clientThreadId:n}=G(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:o}=V(),a=oe(),d=t(p.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(xe,{onOpenChange:i=>{i&&hs.logEvent("chatgpt_web_more_conversation_history_opened"),o(p.Conversation,i)},side:a?"bottom":"right",sideOffset:4,open:d,contentAlign:"start",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",d&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(K,{className:y("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(E,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(A,{children:e.jsx(Ye,{activeId:n,hideOverflowMenu:!0})})})})})}function Ps({clientThreadId:s}){const n=me(s),t=gs(),{isCollapsible:o,recentConversationLimit:a}=Ze(),d={recentConversationLimit:a},i=x.useRef(!1),m=!0,{conversations:f,data:h,isLoading:u,isError:b,recents:c,refetch:r}=qe(d),[l,g]=x.useState(!0),S=x.useCallback(function(C){C===void 0&&g(!1),r({cancelRefetch:!0})},[r,g]),I=t?void 0:n,R=f.length===0,k=b||h===void 0&&!u&&i.current,B=!k&&(h===void 0||u);h===void 0&&!u&&!i.current&&(i.current=!0,S(!0));const z=f.find(v=>v.id===I)??null;return x.useMemo(()=>{ps.publish({kind:"refreshHistory",conversations:f})},[f]),e.jsxs(e.Fragment,{children:[k&&e.jsx(Je,{showRetry:l,refetch:S}),!R&&e.jsxs(ce,{header:c.label,isLastInGroup:!0,children:[c.items.map((v,C)=>e.jsx($,{item:v,isActive:v.id===I,testId:`history-item-${C}`},v.id)),z&&!c.items.some(v=>v.id===I)&&e.jsx($,{item:z,isActive:!0})]}),B&&e.jsx(bs,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),o&&e.jsx(A,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!m,className:y(!m),children:e.jsx(Ls,{})})})})]})}const As=Z(()=>q(()=>import("./bd4k1d80iyttxstv.js"),__vite__mapDeps([5,1,6,2,3,7,8,9])).then(s=>s.SnorlaxSidebarList));function Rs({clientThreadId:s}){const n=J(),t=Ss(s),{isUnauthenticated:o}=fe(),a=re();return o?null:e.jsxs("div",{className:y(j.screenContent,"group/sidebar"),children:[a&&e.jsx(As,{currentGizmoId:t}),null,e.jsx(Ps,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(_s,{currentGizmoId:t}):null]})}function Bs(){const s=J(),n=s?.data==null,{isUnauthenticated:t}=fe(),{openSettings:o}=Qe(),a=js(),[d]=x.useState(()=>{const r=vs.getCookie(ys.Workspace);return typeof r=="string"&&r!==Cs}),i=M(),{store:m,actions:f}=Y(),h=m(r=>r.mode),[u,b]=x.useState(!0);if(x.useEffect(()=>{b(!1)},[]),!s&&u||d&&n)return null;const c=t?e.jsx(ks,{}):e.jsx(Ns,{onClickSettings:()=>o()});return e.jsxs(_,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:pb-1.5 md:pt-2.5",type:"primary",disableSizeTracking:!0,trailing:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[c,a.get("include_floating_state",!1)&&e.jsx("div",{className:j.togglePinWrapper,children:e.jsx(le,{tooltipSideOffset:14,className:j.pinSidebarAction,icon:e.jsx($e,{}),onActivate:r=>{r.preventDefault(),r.persist(),W.togglePinSidebar(r,f,h===w.Floating?w.Pinned:w.Floating)},label:h===w.Floating?i.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):i.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:P.FloatingOrPinned})})]})}function Hs(){return e.jsx(_,{className:"z-10 px-sidebar-inline pb-0.5 empty:hidden",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Ms,{})})}function Ds(){return e.jsxs(Xe,{className:y(j.screenTrailingBarContainer),children:[e.jsx(es,{}),e.jsx(Hs,{}),e.jsx(Bs,{})]})}function Us({onNewThread:s}){const n=M(),t=je(),{clientThreadId:o}=G(),a=ss(o),d=a?ts(a):void 0,i=d?te(d):void 0,m=se(d?.gizmo.id),f=n.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return e.jsx(L,{label:f,children:e.jsx(ee,{to:i??"/",onClick:async h=>{h.preventDefault(),!m&&i!=null?ns(t,i):s()},tabIndex:-1,children:e.jsx(as,{icon:e.jsx(ne,{className:j.sidebarIcon}),className:j.searchAction,label:f,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const Ws=Z(()=>q(()=>import("./d1cojvgt5j0pw4qh.js"),__vite__mapDeps([10,1,6,2,3,7,11,12,13])).then(s=>s.FannyPackIconButton));function Ks({onNewThread:s}){const n=M(),t=x.useRef(null),{store:o,actions:a}=Y(),d=o(l=>l.isSidebarOpen),i=o(l=>l.mode),{isSidebarFlyoutOpen:m}=V(),f=m(p.Conversation),h=m(p.Gizmo),u=m(p.Snorlax),b=d&&!f&&!h&&!u;function c(){de(t.current)&&document.getElementById(P.OpenOrClosed)?.click()}is({checkElement:l=>l?.tagName==="NAV",enabled:b,onLightDismiss:c});const{isFannyPackEnabled:r}=os();return Is(),e.jsxs(e.Fragment,{children:[e.jsx(_,{type:"primary",className:y(j.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between px-[var(--sidebar-inline-padding)]",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(le,{className:y(j.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:l=>{W.closeSidebar(l,a,i)},onActivate:l=>{W.closeSidebar(l,a,i)},icon:e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:y(j.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(cs,{className:y(j.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(Vs.closeSidebar),htmlFor:P.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,r&&e.jsx(ls,{children:e.jsx(Ws,{className:j.searchAction,icon:e.jsx(ds,{className:j.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx(Us,{onNewThread:s})]})]})}),e.jsx(_,{type:"primary",name:"floating-spacer",leading:!0,className:j.bucketBar,disableSizeTracking:!0,children:"Â "})]})}const Vs=ue({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function $s(){const{clientThreadId:s,onNewThread:n}=G(),[t,o]=x.useState(!1),[a,d]=x.useState(!1),[i,m]=x.useState(!1),{store:f}=Y(),h=x.useCallback(c=>c===p.Conversation?t:c===p.Gizmo?a:c===p.Snorlax?i:!1,[t,a,i]),u=x.useCallback((c,r)=>{const l=g=>{c===p.Conversation?o(g):c===p.Gizmo?d(g):c===p.Snorlax&&m(g)};r?l(!0):setTimeout(()=>{l(!1)},100)},[]),b=x.useRef(null);return ws((c,r)=>{u(p.Conversation,!1),u(p.Gizmo,!1),u(p.Snorlax,!1);const l=window.matchMedia("(max-width: 700px)").matches,g=de(b.current);r!=null&&l&&f.getState().isSidebarOpen&&(f.getState().mode===w.Floating||g)&&setTimeout(()=>{document.getElementById(P.OpenOrClosed)?.click()},100)}),e.jsxs(ms,{value:{isSidebarFlyoutOpen:h,onSidebarFlyoutOpenChange:u},children:[e.jsx(us,{}),e.jsx(xs,{anchor:"vertical",className:y(j.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Ks,{onNewThread:n}),ref:b,trackLeading:!0,trailing:e.jsx(Ds,{}),children:e.jsx(Rs,{clientThreadId:s})})]})}export{$s as C,Ts as G,be as a};
//# sourceMappingURL=jou2ng0zo7d9qsw9.js.map
