const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/m1z640prs53ckxft.js","assets/nz9x58rcwaqc60b4.js","assets/ogd9t3e603yvziyi.js","assets/root-k202e21e.css"])))=>i.map(i=>d[i]);
import{aL as te,m as e,aR as r,u as De,r as N,em as f,G as D,t as ie,Z as re,c9 as G,df as U,ba as He,c_ as K,aH as Ye,aI as Qe,H as be,cD as Y,aX as W,aD as q,br as M,e4 as ge,eS as Ke,s as Ve,L as we,F as Me}from"./nz9x58rcwaqc60b4.js";import{ax as t,eg as Ne,at as Xe,cA as ne,eh as Ze,ei as Je,ej as $e,ek as x,b2 as es,el as ss,em as as,en as Se,eo as ts,ep as se,eq as is,er as A,es as Q,et as rs,c2 as ns,c4 as ls,eu as os,az as cs,ev as ds}from"./or560n5qz3kpvvuq.js";import{ao as ae,E as us,af as Z,e as ps,aj as ms,F as gs,aI as J,aW as xe,x as xs,b7 as fs}from"./ogd9t3e603yvziyi.js";import{S as j}from"./alnbk76f7ah4btre.js";import{c as hs}from"./e0bwkx5anf1dv1nf.js";import{a as fe}from"./j6c1pflqjvbgfsg0.js";function _e(s){return s==t.User||s==t.Group?t.Private:s==t.WorkspaceLink?t.Workspace:s}function R(s,a){return s=_e(s),a===void 0?!1:a.some(n=>n.recipient===s&&n.allowed)}function le(s,a){return a===void 0?[]:(s=_e(s),a.find(l=>l.recipient===s)?.moderated_fields)}function $(s,a){const n=le(s,a);return n&&n.length>0}const he=te.a`bold underline`,js=te.textarea`w-full text-sm overflow-y-auto rounded-lg border px-3 py-2 focus:ring-2 focus:ring-blue-400 border-token-border-medium bg-token-main-surface-primary h-32`;var Pe=(s=>(s[s.None=0]="None",s[s.AppealAvailable=1]="AppealAvailable",s[s.AppealSent=2]="AppealSent",s))(Pe||{}),Te=(s=>(s[s.None=0]="None",s[s.PublishBlocked=1]="PublishBlocked",s[s.RemovedFromMarketplace=2]="RemovedFromMarketplace",s[s.RemovedFromPublic=3]="RemovedFromPublic",s[s.RemovedFromPrivate=4]="RemovedFromPrivate",s[s.Recategorized=5]="Recategorized",s))(Te||{});function Ws(s){if(!s)return;const a=s.gizmo.appeal_info?.state.kind==="appeal_sent",n=ys(s.gizmo.share_recipient,s.gizmo.sharing_targets);return{sharingRecipient:s.gizmo.share_recipient,categories:s.gizmo.categories,gizmoId:s.gizmo.id,moderationType:n,sharingTargets:s.gizmo.sharing_targets,showModal:a?2:n!==0?1:0}}const je={[t.User]:t.Private,[t.Group]:t.Private,[t.WorkspaceLink]:t.Workspace};function ys(s,a=[]){const n=new Set(a.filter(u=>u.allowed).map(u=>u.recipient));if(!s||(s in je&&(s=je[s]),n.has(s)))return 0;const l=n.has(t.Private)||n.has(t.Workspace),o=n.has(t.Link)||n.has(t.Marketplace);return s===t.Marketplace&&o?2:!o&&l?3:4}function ye(s){switch(s){case 0:case 1:return f({id:"gizmo.appeals.publishBlockedTitle",defaultMessage:"Your changes couldn’t be published"});case 2:return f({id:"gizmo.appeals.removedFromMarketplaceTitle",defaultMessage:"Your GPT has been removed from the marketplace"});case 3:return f({id:"gizmo.appeals.removedFromPublicTitle",defaultMessage:"Your GPT has been removed from public view"});case 5:return f({id:"gizmo.appeals.recategorizedTitle",defaultMessage:"Your GPT has been recategorized"});default:Ne(s)}}function vs(s){switch(s){case"profile_picture":return f({id:"gizmo.appeals.profilePictureFieldName",defaultMessage:"Profile Picture"});case"gizmo_name":return f({id:"gizmo.appeals.gizmoNameFieldName",defaultMessage:"Name"});case"gizmo_description":return f({id:"gizmo.appeals.gizmoDescriptionFieldName",defaultMessage:"Description"});case"gizmo_instructions":return f({id:"gizmo.appeals.gizmoInstructionsFieldName",defaultMessage:"Instructions"});case"gizmo_welcome_message":return f({id:"gizmo.appeals.gizmoWelcomeMessageFieldName",defaultMessage:"Welcome Message"});case"custom_actions":return f({id:"gizmo.appeals.customActionsFieldName",defaultMessage:"Custom Actions"});case"conversation_starter":return f({id:"gizmo.appeals.conversationStarterFieldName",defaultMessage:"Conversation Starter"});case"file":return f({id:"gizmo.appeals.fileFieldName",defaultMessage:"File"});case"gizmo_combined_content":return f({id:"gizmo.appeals.gizmoCombinedContentFieldName",defaultMessage:"Overall GPT Config"})}}function ks(s){switch(s){case t.Private:case t.Workspace:return f({id:"gizmo.appeals.privateRecipientModerationText",defaultMessage:"Your GPT can’t be updated because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case t.Link:return f({id:"gizmo.appeals.linkRecipientModerationText",defaultMessage:"Your GPT can’t be shared publicly because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});case t.Marketplace:return f({id:"gizmo.appeals.marketplaceRecipientModerationText",defaultMessage:"Your GPT can’t appear in the Explore GPTs page because it violates our {usagePolicyLink}Usage Policies{usagePolicyLink}."});default:Ne(s)}}function Ae({sharingRecipient:s,moderatedFields:a,appealAvailable:n}){const l=a.length;return e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsx(r,{...ks(s),values:{usagePolicyLink:o=>e.jsx(he,{target:"_blank",href:"https://openai.com/policies/usage-policies",rel:"noreferrer",children:o})}})," ",l>0&&e.jsx(r,{id:"gizmo.appeals.seeBelowForSpecificIssues",defaultMessage:`{numModeratedFields, plural,
              one {See below for the specific issue:}
              other {See below for the specific issues:}
            }`,values:{numModeratedFields:l}})]}),l>0&&a?.map(o=>e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"font-bold",children:e.jsx(r,{...vs(o.name)})}),e.jsx("ul",{className:"list-disc pl-5",children:o.reasons.map(u=>e.jsxs("li",{children:[u.description," ",u.link?e.jsx(he,{href:u.link,target:"_blank",rel:"noreferrer",children:e.jsx(r,{id:"gizmo.appeals.learnMore",defaultMessage:"Learn more"})}):""]},u.description))})]})),n&&e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealAvailableText",defaultMessage:"Alternatively you may appeal this decision and we will get back to you as soon as possible. Or you can publish to “Only me” and use this GPT privately."})})]})}function bs({gizmoId:s,sharingRecipient:a,categories:n,moderationType:l,sharingTargets:o,appealAvailable:u,onClose:g,onAppealSubmitted:h}){const c=D(),[b,w]=N.useState(""),[S,T]=N.useState(0),_=ie(),d=async()=>{await ne.postGizmoAppeal(_,s,b,a,n),T(2),h?.()},v=le(a,o),y=v?.length??0,B=re();if(y==0&&B?.isEnterprisey())return e.jsx(G,{title:c.formatMessage(ye(l)),isOpen:!0,onClose:g,showCloseButton:!0,type:"warning",primaryButton:e.jsx(U.Button,{color:"primary",onClick:g,children:e.jsx(r,{id:"wEsAOU",defaultMessage:"OK"})}),children:e.jsx("p",{className:"text-sm",children:e.jsx(r,{id:"gizmo.appeals.workspaceSettingsMessage",defaultMessage:"Access to your GPT has been reduced by your workspace's GPT sharing settings. An owner of the workspace can change these settings in the workspace settings page."})})});switch(S){case 0:return e.jsx(G,{title:c.formatMessage(ye(l)),isOpen:!0,onClose:g,showCloseButton:!0,primaryButton:e.jsx(U.Button,{color:"primary",onClick:g,children:e.jsx(r,{id:"gizmo.appeals.contunueButton",defaultMessage:"Continue"})}),secondaryButton:u?e.jsx(U.Button,{onClick:()=>T(1),children:e.jsx(r,{id:"gizmo.appeals.appealButton",defaultMessage:"Appeal"})}):void 0,type:"warning",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx(Ae,{sharingRecipient:a,moderatedFields:v??[],appealAvailable:u})})});case 1:return e.jsx(G,{title:c.formatMessage({id:"gizmo.appeals.appealModalTitle",defaultMessage:"Appeal"}),isOpen:!0,onClose:g,showCloseButton:!0,shouldIgnoreClickOutside:!0,primaryButton:e.jsx(U.Button,{color:"primary",onClick:d,disabled:b.trim().length===0,children:e.jsx(r,{id:"gizmo.appeals.submitAppealButton",defaultMessage:"Submit"})}),secondaryButton:e.jsx(U.Button,{onClick:()=>T(0),children:e.jsx(r,{id:"gizmo.appeals.backButton",defaultMessage:"Back"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealReasonText",defaultMessage:"Please provide a reason for why you believe this GPT doesn’t violate our policies and should be published"})}),e.jsx(js,{value:b,onChange:V=>w(V.target.value)})]})});case 2:return e.jsx(e.Fragment,{})}}function ws({onClose:s}){const a=D();return e.jsx(G,{title:a.formatMessage({id:"gizmo.appeals.appealSubmittedModalTitle",defaultMessage:"Appeal submitted"}),isOpen:!0,onClose:s,showCloseButton:!0,primaryButton:e.jsx(U.Button,{color:"primary",onClick:s,children:e.jsx(r,{id:"gizmo.appeals.closeButton",defaultMessage:"Close"})}),type:"success",children:e.jsx("div",{className:"flex flex-col gap-2 text-sm",children:e.jsx("div",{children:e.jsx(r,{id:"gizmo.appeals.appealSubmittedText",defaultMessage:"Your appeal has been submitted. We will get back to you as soon as possible."})})})})}function Ms({gizmoId:s,onClose:a}){const{data:n}=Xe(s,!0),l=ie(),o=async()=>{await ne.postGizmoCancelAppeal(l,s)};return e.jsx(G,{isOpen:!0,onClose:He,primaryButton:e.jsx(U.Button,{color:"primary",onClick:()=>{o(),a?.()},children:e.jsx(r,{id:"gizmo.appeals.cancelAppealButton",defaultMessage:"Cancel appeal"})}),type:"warning",children:e.jsxs("div",{className:"flex flex-col gap-2 text-sm",children:[e.jsx("h2",{className:"text-lg font-semibold",children:e.jsx(r,{id:"gizmo.appeals.appealReviewingHeader",defaultMessage:"Reviewing your appeal"})}),e.jsx("p",{children:e.jsx(r,{id:"gizmo.appeals.appealSentModalText",defaultMessage:"During the review you can continue using “{gizmoName}” as your private GPT, but won’t be able to update it or share it with others.",values:{gizmoName:n?.gizmo.display.name}})})]})})}function qs({appealState:s,onAppealClose:a,onAppealSubmitted:n}){const{value:l}=De("4226692983"),[o,u]=N.useState(!1);return o?e.jsx(ws,{onClose:()=>{u(!1),n?.()}}):e.jsxs(e.Fragment,{children:[s?.showModal==2&&e.jsx(Ms,{gizmoId:s.gizmoId,onClose:a}),s?.showModal==1&&e.jsx(bs,{gizmoId:s.gizmoId,sharingRecipient:s.sharingRecipient,categories:s.categories,moderationType:s.moderationType,sharingTargets:s.sharingTargets,appealAvailable:l,onClose:()=>a?.(),onAppealSubmitted:()=>u(!0)})]})}function Ds(s,a){if(a==null)return s;function n(l){return typeof l=="object"&&l!=null?Array.isArray(l)?l.map(n):Object.fromEntries(Object.entries(l).map(([o,u])=>[o,n(u)])):l===null?void 0:l}return a=n(a),{...s,...a}}var Le=(s=>(s[s.Loading=0]="Loading",s[s.UploadingProfilePic=1]="UploadingProfilePic",s[s.GeneratingProfilePic=2]="GeneratingProfilePic",s[s.GizmoNameTooLong=3]="GizmoNameTooLong",s[s.GizmoDescriptionTooLong=4]="GizmoDescriptionTooLong",s[s.GizmoInstructionsTooLong=5]="GizmoInstructionsTooLong",s[s.NameEmpty=6]="NameEmpty",s[s.MissingPublicActionPrivacyPolicyURL=7]="MissingPublicActionPrivacyPolicyURL",s[s.MissingCategory=8]="MissingCategory",s))(Le||{});function Hs(s){switch(s){case 0:return"Loading";case 1:return"Uploading profile picture";case 2:return"Generating profile picture";case 3:return"GPT name too long";case 4:return"GPT description too long";case 5:return"GPT instructions too long";case 6:return"GPT name cannot be empty";case 7:return"Public actions require valid privacy policy URLs";case 8:return"Public GPTs must have a category"}}function Ns(s){return s==="link"||s==="marketplace"}function Ss(s){try{return new URL(s),!0}catch{return!1}}function _s(s,a,n){const l=s.name.length>Ze,o=(s.description?.length??0)>Je,u=(s.instructions?.length??0)>$e,g=[];if(s?.name===""&&g.push(6),l&&g.push(3),o&&g.push(4),u&&g.push(5),a!=null&&Ns(a)){const h=s.tools?.filter(c=>c.type===K.JIT_PLUGIN);for(const c of h){const b=c.metadata?.privacy_policy_url;if(b==null||!Ss(b)){g.push(7);break}}}return a===t.Marketplace&&n==null&&g.push(8),g}const ve={id:void 0,instructions:"",name:"",description:"",emoji:void 0,theme:void 0,profilePictureId:void 0,profilePictureUrl:void 0,promptStarters:[],sharing:{recipient:t.Private,subjects:[]},tools:[{type:K.DALLE}],files:[],trainingDisabled:!1,liveVersion:0,contextStuffingBudget:null},Ys={...ve,tools:[...ve.tools,{type:K.BROWSER}]},Re=Ye(()=>Qe(()=>import("./m1z640prs53ckxft.js"),__vite__mapDeps([0,1,2,3])).then(s=>s.DirectorySyncResourceManagedIndication)),Ps=[A,Q];function Ts(s,a){return s.type===x.USER?s.user_id===a.user_id:s.type===x.GROUP?s.group_id===a.group_id:s.type===a.type}const As={[x.USER]:t.User,[x.GROUP]:t.Group,[x.WORKSPACE]:t.Workspace,[x.ALL]:t.Marketplace};function Ls(s){const a=As[s.type];if(!a)throw new Error("Unknown sharing subject type: "+s.type);return{...s,type:a}}function Qs({gizmo:s,publishedGizmo:a,updateGizmo:n,promoteGizmo:l,appealGizmo:o,setAppealState:u,showActionsModal:g,shareOnly:h,onClose:c,workspaceOwner:b=!1}){const w=D(),S=be(),T=re(),_=T?.data?.name??"your workspace",d=es(),v=ss(),[y,B]=N.useState(void 0);N.useEffect(()=>{if(y==null)if(a?.gizmo.display.categories&&a?.gizmo.display.categories.length>0){const i=v.data?.categories.find(m=>m.id===a?.gizmo.display.categories[0]);i&&B(i)}else v.data!=null&&B(v.data.categories[v.data.categories.length-1])},[v.data,y,a]);const[p,V]=N.useState(s.sharingRecipient??t.Private),[k,E]=N.useState(s.sharing?.subjects??[]),[oe,Ge]=N.useState(null),[ce,de]=N.useState(!1),ze=N.useCallback(()=>!Y(s.sharing?.subjects,k)||s.sharingRecipient!==p,[s.sharing,s.sharingRecipient,p,k]),F=ie(),ue=_s(s,p,y?.id??void 0),Fe=ue.includes(Le.MissingPublicActionPrivacyPolicyURL),Be=s.tools.find(i=>i.type===K.JIT_PLUGIN&&!i.metadata.privacy_policy_url);if(oe)return e.jsx(Cs,{publishedGizmo:oe,sharing:{recipient:p,subjects:k},workspaceName:_,onClose:c});function Ee(i){k.find(m=>Ts(m,i))||E([...k,i])}const C=as(k);function X(i){const m=k.filter(L=>[x.WORKSPACE,x.ALL].indexOf(L.type)===-1);i!=null&&m.push(i),E(m)}function Oe(i){switch(V(i),i){case t.Marketplace:case t.Link:X({type:x.ALL,capabilities:A});break;case t.Workspace:case t.WorkspaceLink:X({type:x.WORKSPACE,capabilities:A});break;default:X(null)}}function pe(i){C!=null&&E(k.map(m=>m===C?{...m,capabilities:i}:m))}function We(i,m,L){return i.type===x.USER&&i.user_id.indexOf("__")===-1?{...i,user_id:i.user_id+"__"+T?.getWorkspaceId()}:i}async function qe(i,m){if(ce)return;if(i&&!m)throw new Error("Cannot share a gizmo that hasn't been promoted before");if(!y)return;de(!0);let I=k.map(We).map(Ls);if(I=ds(p,I,C?.capabilities??A),b)return!T||!m?(S.warning("Unable to change sharing settings"),c()):(await we.updateWorkspaceGPTSharing(T.id,m,I),S.success(w.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),F.invalidateQueries({queryKey:["workspace"]}),c());if(i){if(!m||!a)throw new Error("No gizmo ID to share");try{const P={sharing:I};y&&(P.categories=[y.id]);const H=await ne.shareGizmo(m,P);H.error?$(p,H.sharing_targets)?(u({gizmoId:a.gizmo.id,sharingRecipient:p,categories:a.gizmo.display.categories,moderationType:Te.PublishBlocked,sharingTargets:H.sharing_targets,showModal:Pe.AppealAvailable}),c()):S.warning(w.formatMessage({id:"tmIKmp",defaultMessage:"Unable to share GPT"})):(F.setQueryData(["gizmo",{gizmoId:a.gizmo.id},{draft:!1}],me=>H.resource),n(me=>({...me,sharingRecipient:p})),S.success(w.formatMessage({id:"SWSzcY",defaultMessage:"Sharing settings updated"})),c())}catch{return S.warning(w.formatMessage({id:"dKC65l",defaultMessage:"Failed to update sharing settings"})),c()}}else{const P=await l({subjects:I,recipient:p},y.id);m||(m=P?.gizmo.id),Ge(P??null),n({liveVersion:P?.gizmo.live_version??void 0}),F.invalidateQueries({queryKey:["gizmo",{gizmoId:m}]})}de(!1),F.invalidateQueries({queryKey:["gizmos"]}),F.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:m}]}),F.invalidateQueries({queryKey:["workspace"]}),n({sharing:{recipient:p,subjects:k},sharingRecipient:p},!1)}return e.jsx(G,{type:"success",className:"max-w-[555px]",size:"custom",isOpen:!0,onClose:c,primaryButton:$(p,s.sharingTargets)?e.jsx(W,{onClick:()=>o(p,y?.id),children:e.jsx(r,{id:"HRzqKK",defaultMessage:"Appeal"})}):e.jsx(W,{onClick:()=>qe(h,a?.gizmo.id),loading:ce,disabled:ue.length>0||!R(p,s.sharingTargets),children:h?e.jsx(r,{id:"BEKjVh",defaultMessage:"Save"}):e.jsx(r,{id:"24j5ts",defaultMessage:"Update"})}),secondaryButton:e.jsxs(e.Fragment,{children:[ze()&&e.jsx("div",{className:"absolute bottom-8 left-6 text-sm text-token-text-secondary",children:e.jsx(r,{id:"9CkgC4",defaultMessage:"Unsaved changes"})}),a&&e.jsx(W,{color:"secondary",onClick:i=>Se(a,S,i,w.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(r,{id:"wvL15a",defaultMessage:"Copy link"})})]}),title:w.formatMessage({id:"7JggXH",defaultMessage:"Share GPT"}),showCloseButton:!0,children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(Is,{onAdd:i=>Ee(i),publishedGizmo:a}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(r,{id:"bNQXcV",defaultMessage:"Share with..."})}),e.jsxs("div",{className:"max-h-[200px] space-y-2 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx("div",{className:"shrink-0 grow-0 self-start",children:e.jsx(ts,{user:d,size:"gizmoConversation",roundedStyle:"rounded-full"})}),e.jsx("div",{className:"grow",children:!a||Us(a?.gizmo.author.user_id.split("__")[0],d?.id)?e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-base font-semibold",children:e.jsx(r,{id:"U7tzof",defaultMessage:"{userName} (you)",values:{userName:d?.name}})}),e.jsx("span",{className:"-mt-1 text-sm text-token-text-secondary",children:d?.email})]}):e.jsx("span",{className:"text-base font-semibold",children:e.jsx(r,{id:"scRZqV",defaultMessage:"{userName} (builder)",values:{userName:a?.gizmo.author.display_name}})})})]}),k.map((i,m)=>se(i)&&e.jsxs("div",{className:"mb-4 flex flex-row items-center justify-between space-x-3",children:[e.jsx(is,{name:i.type===x.GROUP?i.group_name:`${i.user_name} ${i.user_email}`,initialsCount:i.type===x.USER?2:1,size:"gizmoConversation",className:q("shrink-0 grow-0",i.type===x.USER&&"self-start")}),e.jsxs("div",{className:"flex grow flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"mr-2 text-base font-semibold",children:i.type===x.GROUP?i.group_name:i.user_name}),i.type===x.GROUP&&i.is_scim_managed&&e.jsx(Re,{})]}),i.type===x.USER&&e.jsx("span",{className:"-mt-1 text-sm text-token-text-secondary",children:i.user_email})]}),e.jsxs(M.Root,{children:[e.jsxs(M.Trigger,{className:"whitespace-nowrap text-base text-token-text-secondary",children:[e.jsx(r,{...z(i.capabilities)}),e.jsx(ae,{className:"icon-md"})]}),e.jsx(M.Portal,{children:e.jsxs(M.Content,{className:"max-w-[280px]",children:[Ps.map((L,I)=>e.jsx(ee,{caps:L,selected:Y(L,i.capabilities),onClick:()=>{E(k.map(P=>P===i?{...P,capabilities:L}:P))}},I)),e.jsx(M.Separator,{}),e.jsx(M.Item,{onClick:()=>E(k.filter(L=>L!==i)),color:"danger",icon:us,children:e.jsx(r,{id:"NU0BOB",defaultMessage:"Remove"})})]})})]})]},m))]}),e.jsx("hr",{className:"border-token-border-medium"}),e.jsx("h3",{className:"text-base font-semibold",children:e.jsx(r,{id:"uqD7Y8",defaultMessage:"Access"})}),e.jsxs("div",{className:"-ms-3.5 flex flex-row items-center justify-between space-x-3",children:[e.jsxs(j.Root,{value:p,onValueChange:i=>Oe(i),children:[e.jsxs(j.Trigger,{children:[e.jsx(j.Value,{}),e.jsx(j.Icon,{})]}),e.jsx(j.Portal,{children:e.jsxs(j.Content,{children:[e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:e.jsx(r,{id:"YIQwaP",defaultMessage:"Private"})}),e.jsx(j.Item,{value:t.Private,children:e.jsx(O,{shareLevel:t.Private,workspaceName:_})})]}),e.jsx(j.Separator,{}),e.jsx(ge,{label:w.formatMessage({id:"n0m61x",defaultMessage:"Your workspace has disabled sharing with the workspace."}),side:"bottom",disabled:R("workspace",s.sharingTargets),children:e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:_}),e.jsx(j.Item,{value:t.WorkspaceLink,disabled:!R(t.WorkspaceLink,s.sharingTargets)&&!R(t.Workspace,s.sharingTargets),children:e.jsx(O,{shareLevel:t.WorkspaceLink,workspaceName:_})}),e.jsx(j.Item,{value:t.Workspace,disabled:!R("workspace",s.sharingTargets),children:e.jsx(O,{shareLevel:t.Workspace,workspaceName:_})})]})}),e.jsx(j.Separator,{}),e.jsx(ge,{label:w.formatMessage({id:"IHnort",defaultMessage:"Your workspace has disabled public sharing."}),side:"bottom",disabled:R("marketplace",s.sharingTargets),children:e.jsxs(j.Group,{children:[e.jsx(j.Label,{children:e.jsx(r,{id:"PjY9bi",defaultMessage:"Public"})}),e.jsx(j.Item,{value:t.Link,disabled:!R("link",s.sharingTargets),children:e.jsx(O,{shareLevel:t.Link,workspaceName:_})}),e.jsx(j.Item,{disabled:!R("marketplace",s.sharingTargets),value:t.Marketplace,children:e.jsx(O,{shareLevel:t.Marketplace,workspaceName:_})})]})})]})})]}),p!==t.Private&&p!==t.User&&e.jsxs(M.Root,{children:[e.jsxs(M.Trigger,{className:"whitespace-nowrap text-base text-token-text-secondary",children:[C==null?e.jsx(r,{...z(A)}):e.jsx(r,{...z(C.capabilities)}),e.jsx(ae,{className:"icon-md"})]}),e.jsx(M.Portal,{children:e.jsxs(M.Content,{className:"max-w-[280px]",children:[e.jsx(ee,{onClick:()=>pe(A),caps:A,selected:Y(C?.capabilities,A)}),p!==t.Marketplace&&p!==t.Link&&e.jsx(ee,{onClick:()=>pe(Q),caps:Q,selected:Y(C?.capabilities,Q)})]})})]})]}),Fe&&e.jsx("div",{className:"text-xs text-red-500",children:e.jsx(r,{id:"/iw1Iv",defaultMessage:"Public actions require valid privacy policy URLs. Click <fixlink>here</fixlink> to update.",values:{fixlink:i=>e.jsx("button",{onClick:()=>{g(Be?.metadata.action_id),c()},className:"underline",children:i})}})}),(p===t.Marketplace||p===t.Workspace)&&(R(p,s.sharingTargets)?e.jsx(Ue,{gizmo:s,category:y?.id,categories:v.data?.categories,onCategoryChange:i=>B(i)}):$(p,s.sharingTargets)?e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(Ae,{sharingRecipient:p,moderatedFields:le(p,s.sharingTargets)??[],appealAvailable:!0})}):e.jsx("div",{className:"pb-2 text-xs text-red-500",children:e.jsx(r,{id:"BzqqKH",defaultMessage:"Your workspace's settings don't allow this level of access. An owner of the workspace can change this setting in the workspace's GPTs settings."})}))]})})}const Ce=Me({private:{id:"pSXBWQ",defaultMessage:"Invite-only"},user:{id:"pSXBWQ",defaultMessage:"Invite-only"},group:{id:"pSXBWQ",defaultMessage:"Invite-only"},workspace_link:{id:"Giaxt1",defaultMessage:"Anyone at {workspaceName} with the link"},workspace:{id:"XLHaTU",defaultMessage:"{workspaceName}"},link:{id:"uP1+Ri",defaultMessage:"Anyone with the link"},marketplace:{id:"82Ilac",defaultMessage:"GPT Store"}}),Rs=Me({workspace:{id:"1kpopF",defaultMessage:"Published to {workspaceName}"},marketplace:{id:"hdTRpJ",defaultMessage:"Published to GPT Store"}});function z(s){return s.can_write?f({id:"SubCqD",defaultMessage:"Can edit"}):s.can_view_config?f({id:"ud3lp4",defaultMessage:"Can view configuration"}):s.can_read?f({id:"/0j34W",defaultMessage:"Can chat"}):f({id:"x2E8ET",defaultMessage:"Unknown"})}function ee({caps:s,selected:a,onClick:n}){let l=ps;return s.can_view_config?l=ms:s.can_read&&(l=gs),e.jsx(M.Item,{className:"flex h-auto flex-row items-start space-x-3 px-3 py-3",onClick:n,icon:l,children:s.can_write?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex grow flex-col",children:e.jsx("span",{className:"text-base font-semibold leading-tight",children:e.jsx(r,{...z(s)})})}),e.jsx(Z,{className:q("icon-lg shrink-0",!a&&"invisible")})]}):s.can_view_config?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex grow flex-col",children:[e.jsx("span",{className:"align-baseline text-base font-semibold leading-tight",children:e.jsx(r,{...z(s)})}),e.jsx("span",{className:"text-xs text-token-text-secondary",children:e.jsx(r,{id:"fL1rWw",defaultMessage:"View configuration settings, duplicate, and chat"})})]}),e.jsx(Z,{className:q("icon-lg shrink-0",!a&&"invisible")})]}):s.can_read?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex grow flex-col",children:[e.jsx("span",{className:"text-base font-semibold leading-tight",children:e.jsx(r,{...z(s)})}),e.jsx("span",{className:"text-xs text-token-text-secondary",children:e.jsx(r,{id:"tx5q1o",defaultMessage:"Users can only chat with this GPT"})})]}),e.jsx(Z,{className:q("icon-lg shrink-0",!a&&"invisible")})]}):null})}const Ie={private:J,user:J,group:J,workspace_link:xe,workspace:xs,link:xe,marketplace:fs};function O({shareLevel:s,workspaceName:a,hasInviteSharing:n=!0}){(s===t.User||s===t.Group)&&(s=t.Private);const l=Ie[s];return e.jsxs("div",{className:"flex flex-row items-center gap-3 text-base",children:[e.jsx(l,{className:"icon-lg"}),e.jsx("div",{className:"pt-px text-start font-semibold",children:!n&&s===t.Private?e.jsx(r,{id:"vVJhYB",defaultMessage:"Only me"}):e.jsx(r,{...Ce[s],values:{workspaceName:a}})})]})}function Cs({publishedGizmo:s,sharing:a,workspaceName:n,onClose:l}){const o=a.recipient,u=Ie[o],g=D(),h=be();return e.jsxs(G,{isOpen:!0,onClose:l,showCloseButton:!0,className:"w-[304px]",title:e.jsx(r,{id:"5CEceY",defaultMessage:"GPT Updated"}),primaryButton:e.jsx(W,{onClick:()=>{window.location.href=`/g/${s.gizmo.id}`},children:e.jsx(r,{id:"RF75o5",defaultMessage:"View GPT"})}),secondaryButton:e.jsx(W,{color:"secondary",onClick:c=>Se(s,h,c,g.formatMessage({id:"KdDqMm",defaultMessage:"Copied link to clipboard"})),children:e.jsx(r,{id:"9hLOl9",defaultMessage:"Copy link"})}),type:"success",children:[e.jsx(Ue,{gizmo:{profilePictureUrl:s.gizmo.display.profile_picture_url??void 0,name:s.gizmo.display.name}}),a.subjects.filter(c=>se(c)).length>0&&e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-token-text-secondary",children:e.jsx(r,{id:"/paYH9",defaultMessage:"Shared with"})}),a.subjects&&a.subjects.map((c,b)=>se(c)&&e.jsxs("div",{className:"flex flex-row items-center justify-between space-x-3 py-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-base font-semibold",children:c.type===x.GROUP?c.group_name:c.user_name}),c.type===x.USER&&e.jsxs(e.Fragment,{children:[e.jsx("br",{}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:c.user_email})]})]}),e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(r,{...z(c.capabilities)})})]},b))]}),e.jsxs("div",{className:"my-4",children:[e.jsx("h4",{className:"text-xs font-semibold text-token-text-secondary",children:e.jsx(r,{id:"q9XNZ7",defaultMessage:"Access"})}),e.jsxs("div",{className:"ml-[3px] flex flex-row items-center py-3 text-left text-base font-semibold",children:[e.jsx(u,{className:"md:icon-lg mr-3 h-6 w-6 shrink-0"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(r,{...Rs[o]??Ce[o],values:{workspaceName:n}})}),(o===t.Workspace||o===t.Marketplace)&&e.jsx("span",{className:"text-xs text-token-text-secondary"})]})]})]})]})}function Ue({gizmo:s,category:a,categories:n,onCategoryChange:l}){const{data:o,isLoading:u}=rs(),g=n?.find(h=>h.id===a);return e.jsxs("div",{children:[e.jsxs("div",{className:q("mb-[1px] flex flex-row items-center space-x-2 bg-token-main-surface-secondary p-4",u&&"invisible",n?"rounded-t-lg":"rounded-lg"),children:[e.jsx(ns,{isFirstParty:!1,className:"h-11 w-11",src:s.profilePictureUrl}),e.jsxs("div",{className:"flex grow flex-col space-y-0",children:[e.jsx("span",{className:"text-base font-semibold",children:s.name}),e.jsx(ls,{builderName:o?.display_name,builderUrl:o?.website_url,socials:[o?.socials.linkedin,o?.socials.github,o?.socials.twitter].filter(h=>h!=null),className:"text-xs text-token-text-secondary"})]})]}),n&&e.jsxs("div",{className:"flex min-h-[56px] flex-row items-center justify-between space-x-2 rounded-b-lg bg-token-main-surface-secondary px-4 text-base",children:[e.jsx("span",{className:"font-semibold",children:e.jsx(r,{id:"JcA4/t",defaultMessage:"Category"})}),e.jsx("div",{className:"text-token-text-secondary",children:l?e.jsx(Ke,{size:"small",triggerButton:e.jsxs("button",{className:"flex items-center gap-1",children:[g?.title,e.jsx(ae,{className:"icon-md"})]}),children:n.map((h,c)=>e.jsx(M.Item,{onClick:()=>l(h),children:h.title},c))}):e.jsx("span",{className:"text-token-text-secondary",children:g?.title})})]})]})}const ke=te.li`flex flex-col rounded-sm p-1 hover:bg-token-main-surface-secondary`;function Is({onAdd:s,publishedGizmo:a}){const n=D(),l=re(),[o,u]=N.useState(""),h=os(l?.id,0,o,5).data?.items.filter(d=>d.id!==a?.gizmo.author.user_id.split("__")[0]),{data:c}=Ve({queryKey:[l?.id,"groups","filtered",o],queryFn:()=>we.getWorkspaceGroups(l.id,{query:o,orderby:"@score"}),enabled:o.trim()!==""&&l!=null&&!!l.getWorkspaceId()}),b=(h?.length??0)>0||(c?.items.length??0)>0,[w,S]=N.useState(!1);function T(d,v,y){s({type:x.GROUP,group_id:d,group_name:v,capabilities:{...A},is_scim_managed:y}),u("")}function _(d,v,y){l&&(s({type:x.USER,user_id:d+"__"+l.getWorkspaceId(),user_name:v,user_email:y,capabilities:{...A}}),u(""))}return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex w-full flex-row space-x-3",children:e.jsxs(fe,{as:"div",className:"group relative z-10 grow",children:[e.jsx(cs,{list:"suggested-choices",name:"share-with-input",placeholder:l?.isEnterprisey()?n.formatMessage({id:"xy/AMO",defaultMessage:"Add people and groups from your workspace"}):n.formatMessage({id:"Lh9njB",defaultMessage:"Add people from your workspace"}),value:o,onChange:d=>u(d.target.value),onFocus:()=>S(!0),onBlur:()=>S(!1)}),e.jsx(hs,{show:o.trim()!==""&&b&&w,children:e.jsx(fe.Panel,{static:!0,className:"absolute top-8 ml-0 w-full cursor-pointer overflow-y-auto rounded-lg rounded-t-none border border-t-0 border-token-border-light bg-token-main-surface-primary px-1 py-1 group-has-[:focus]:border-token-border-xheavy",children:o.trim()!==""&&e.jsxs("ul",{id:"suggested-choices",children:[h&&h.map(d=>e.jsxs(ke,{tabIndex:0,className:"rounded-sm p-1 text-sm hover:bg-token-main-surface-secondary",onClick:()=>_(d.id,d.name,d.email??""),children:[e.jsx("span",{className:"w-full font-semibold",children:d.name}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:d.email})]},d.id)),c?.items&&c.items.slice(0,5).map(d=>e.jsx(ke,{tabIndex:0,onClick:()=>T(d.id,d.name,d.is_scim_managed??!1),children:e.jsxs("span",{className:"flex flex-col",children:[e.jsxs("span",{className:"flex flex-row",children:[e.jsx("span",{className:"mr-2 font-semibold",children:d.name}),d.is_scim_managed&&e.jsx(Re,{})]}),e.jsx("span",{className:"text-sm text-token-text-secondary",children:e.jsx(r,{id:"r3Rx6X",defaultMessage:"{numMembers, plural, one {1 member} other {# members}}",values:{numMembers:d.num_members}})})]})},d.id))]})})})]})})})}function Us(s,a){return s===void 0||a===void 0?!1:s.split("__")[0]===a.split("__")[0]}export{Pe as A,Le as C,Ys as E,Ue as G,Te as M,Qs as S,O as a,Ie as b,_s as c,Cs as d,ve as e,qs as f,Ws as g,Ds as h,R as i,Hs as r,Ls as s};
//# sourceMappingURL=h7yi0x4z1vdc5x58.js.map
