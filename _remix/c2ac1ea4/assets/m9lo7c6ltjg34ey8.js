const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kkm55r2baerk11p5.js","assets/lals6l6wvhqmd5cv.js","assets/h0xzxtn9v9a6p79x.js","assets/root-j0s7q5se.css","assets/ocy5lriy4r76uu3t.js","assets/conversation-small-eplmind9.css","assets/hhzd6wnlg2qeys27.js","assets/froezb8g6j840ema.js","assets/ki6xl5pistc069s0.js","assets/dl44wycnizjdr9ct.js","assets/ipzzjmcll381aidn.js","assets/dagv59ao91866tsg.js","assets/nysks1xlmyzd8eyo.js","assets/nm04jgpfyxi6pn12.js","assets/jkgps0ms1g393uu6.js","assets/cb1fkmyemnyrsbby.js","assets/kpkcev91ix8xhdb4.js","assets/nr8jhn7b7ayjgzuz.js","assets/dd48d0ccqlte627j.js","assets/mylcj6ilw2effv3o.js","assets/c5fwe2zczvz2lft2.js","assets/drtwivpp7kgsli96.js","assets/bnub92rh8g0nt735.js","assets/gvb71nam7e3eye1o.js","assets/cx8c6fqavyb4g7qz.js"])))=>i.map(i=>d[i]);
import{l as T,Z as Rt,r as d,D as ro,m as Lt,V as os,g as ii,gr as wc,a2 as yt,aE as Ml,P as Pn,a as $n,j as yc,aG as bc,a$ as Rl,a1 as vc,aN as xc,ck as kc,fe as Cc,bp as Sc,e3 as Mc}from"./lals6l6wvhqmd5cv.js";import{c7 as is,c8 as Rc,c9 as Ec,C as Tc,G as Ic,aa as Dc,p as Fc,o as Hc,ca as El,bT as Tl,cb as Ac,cc as zc,cd as Lc}from"./h0xzxtn9v9a6p79x.js";import{J as Il,nl as Pc,nm as $c,aF as _c,nn as Nc,K as Oc,no as Bc,np as Wc,nq as jc,nr as Vc,ns as Xc,nt as Yc,nu as Uc,nv as Kc,nw as Gc,nx as qc,ny as Zc,nz as Qc,nA as Jc,f3 as ed,nB as td,dR as nd,nC as rd,dJ as od,nD as id,nE as sd,nF as ld,nG as _s,nH as ad,nI as cd,nJ as dd,nK as ud,nL as fd,nM as hd,nN as gd,nO as md,nP as pd,nQ as wd,nR as yd,nS as bd,d as Dl,nT as vd,c1 as xd,nU as kd,nV as Cd,a1 as Sd,iY as sn,cj as Md,f7 as Rd,nW as Ed,nX as Td,nY as Id,aR as Dd,aP as Fl,c3 as si,ft as Fd,T as oo,gF as Hl,c2 as Ns}from"./ocy5lriy4r76uu3t.js";import{m as Go}from"./hhzd6wnlg2qeys27.js";import{b as Hd}from"./froezb8g6j840ema.js";import{S as Mr}from"./ki6xl5pistc069s0.js";import{c as Al}from"./dl44wycnizjdr9ct.js";import{e as Ad,d as zd,f as Ld,m as go,t as Pd,r as wt,g as $d,h as _d,v as Nd,i as zl,j as io,A as Ll,P as Pl,B as $l,k as Od,l as Bd,n as Wd,S as jd,C as Vd,a as Xd,L as Yd,p as Ud,b as Kd,c as Gd,o as qd,q as Zd,T as Qd}from"./ipzzjmcll381aidn.js";import{i as Pi}from"./dagv59ao91866tsg.js";import{j as Jd}from"./nysks1xlmyzd8eyo.js";import{D as _n}from"./jkgps0ms1g393uu6.js";import{a0 as eu,a1 as tu,a2 as nu,a3 as ru,a4 as ou}from"./cb1fkmyemnyrsbby.js";const iu=({isHovered:e=!1})=>T.jsx(Il,{children:e&&T.jsxs(Go.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.2},className:"absolute bottom-2 right-2 flex items-center justify-center rounded-md border border-token-border-light bg-token-main-surface-primary px-3 py-2 text-xs text-token-text-secondary",children:[T.jsx(is,{className:"icon-md mr-2"}),T.jsx(Rt,{id:"ILz2tL",defaultMessage:"Interactive charts of this type not yet supported"})]})});function su(e){const t=d.useRef(!1);return()=>{t.current||(e(),t.current=!0)}}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const lu={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};Ad._date.override({_id:"date-fns",formats:function(){return lu},parse:function(e,t){if(e===null||typeof e>"u")return null;const n=typeof e;return n==="number"||e instanceof Date?e=Pc(e):n==="string"&&(typeof t=="string"?e=$c(e,t,new Date,this.options):e=_c(e,this.options)),Nc(e)?e.getTime():null},format:function(e,t){return Oc(e,t,this.options)},add:function(e,t,n){switch(n){case"millisecond":return Gc(e,t);case"second":return Kc(e,t);case"minute":return Uc(e,t);case"hour":return Yc(e,t);case"day":return Xc(e,t);case"week":return Vc(e,t);case"month":return jc(e,t);case"quarter":return Wc(e,t);case"year":return Bc(e,t);default:return e}},diff:function(e,t,n){switch(n){case"millisecond":return od(e,t);case"second":return rd(e,t);case"minute":return nd(e,t);case"hour":return td(e,t);case"day":return ed(e,t);case"week":return Jc(e,t);case"month":return Qc(e,t);case"quarter":return Zc(e,t);case"year":return qc(e,t);default:return 0}},startOf:function(e,t,n){switch(t){case"second":return ud(e);case"minute":return dd(e);case"hour":return cd(e);case"day":return ad(e);case"week":return _s(e);case"isoWeek":return _s(e,{weekStartsOn:+n});case"month":return ld(e);case"quarter":return sd(e);case"year":return id(e);default:return e}},endOf:function(e,t){switch(t){case"second":return bd(e);case"minute":return yd(e);case"hour":return wd(e);case"day":return pd(e);case"week":return md(e);case"month":return gd(e);case"quarter":return hd(e);case"year":return fd(e);default:return e}}});const au=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/,ss=e=>e.length===0?!1:e.reduce((t,n)=>t&&au.test(n),!0),_l=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>n.map(o=>{const{data:i,label:s,colors:l}=o;return{label:s,data:i,backgroundColor:l,borderColor:l,borderRadius:4}}),[n]);return T.jsx(zd,{ref:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1,text:e.title},tooltip:{enabled:!0,animation:{duration:0},mode:"point",position:"nearest",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:6,left:16,right:16},yAlign:"bottom",callbacks:{title:function(o){return o[0].formattedValue},label:()=>""}}},scales:{x:{title:{display:!1},grid:{display:!1},time:{unit:"day",displayFormats:{day:"yyyy-MM-dd"},tooltipFormat:"yyyy-MM-dd"},ticks:{display:!0,autoSkip:!1},...ss(e.labels)?{type:"time"}:{}},y:{title:{display:!1},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}}},data:{labels:e.labels,datasets:r}})});_l.displayName="BarChart";const Nl=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=n.length;return n.map(i=>{const{data:s,label:l,colors:a}=i,c=s.length;return{label:l,data:s,backgroundColor:a,borderColor:a,pointRadius:0,pointHoverRadius:5,pointHitRadius:10,tension:.2,borderWidth:cu(o,c),pointBackgroundColor:["rgba(255, 255, 255, 1)"],pointBorderWidth:3,pointHoverBorderWidth:3}})},[n]);return T.jsx(Ld,{ref:t,options:{maintainAspectRatio:!1,scales:{x:{title:{display:!1,text:e.x_label},time:{unit:"day",displayFormats:{day:"yyyy-MM-dd"},tooltipFormat:"yyyy-MM-dd"},grid:{display:!1},ticks:{display:!0},...ss(e.labels)?{type:"time"}:{}},y:{title:{display:!1,text:e.y_label},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}},plugins:{legend:{display:!1},title:{display:!1,text:e.title},tooltip:{enabled:!0,mode:"point",animation:{duration:0},position:"nearest",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:function(o){return o[0].label},label:function(o){const{dataset:{label:i},parsed:{y:s}}=o;return`${i?`${i}: `:""}${s.toFixed(2)}`}}}}},data:{labels:e.labels,datasets:r}})}),cu=(e,t)=>t>15?1:e>10?e>50?.5:1:3;Nl.displayName="LineChart";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var Os=function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1}(),so={toTextLines:function(e){var t=[],n;for(e=[].concat(e);e.length;)n=e.pop(),typeof n=="string"?t.unshift.apply(t,n.split(`
`)):Array.isArray(n)?e.push.apply(e,n):io(e)||t.unshift(""+n);return t},textSize:function(e,t,n){var r=[].concat(t),o=r.length,i=e.font,s=0,l;for(e.font=n.string,l=0;l<o;++l)s=Math.max(e.measureText(r[l]).width,s);return e.font=i,{height:o*n.lineHeight,width:s}},bound:function(e,t,n){return Math.max(e,Math.min(t,n))},arrayDiff:function(e,t){var n=e.slice(),r=[],o,i,s,l;for(o=0,s=t.length;o<s;++o)l=t[o],i=n.indexOf(l),i===-1?r.push([l,1]):n.splice(i,1);for(o=0,s=n.length;o<s;++o)r.push([n[o],-1]);return r},rasterize:function(e){return Math.round(e*Os)/Os}};function $i(e,t){var n=t.x,r=t.y;if(n===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var o=e.x-n,i=e.y-r,s=Math.sqrt(o*o+i*i);return{x:s?o/s:0,y:s?i/s:-1}}function du(e,t,n,r,o){switch(o){case"center":n=r=0;break;case"bottom":n=0,r=1;break;case"right":n=1,r=0;break;case"left":n=-1,r=0;break;case"top":n=0,r=-1;break;case"start":n=-n,r=-r;break;case"end":break;default:o*=Math.PI/180,n=Math.cos(o),r=Math.sin(o);break}return{x:e,y:t,vx:n,vy:r}}var uu=0,Ol=1,Bl=2,Wl=4,jl=8;function $o(e,t,n){var r=uu;return e<n.left?r|=Ol:e>n.right&&(r|=Bl),t<n.top?r|=jl:t>n.bottom&&(r|=Wl),r}function fu(e,t){for(var n=e.x0,r=e.y0,o=e.x1,i=e.y1,s=$o(n,r,t),l=$o(o,i,t),a,c,u;!(!(s|l)||s&l);)a=s||l,a&jl?(c=n+(o-n)*(t.top-r)/(i-r),u=t.top):a&Wl?(c=n+(o-n)*(t.bottom-r)/(i-r),u=t.bottom):a&Bl?(u=r+(i-r)*(t.right-n)/(o-n),c=t.right):a&Ol&&(u=r+(i-r)*(t.left-n)/(o-n),c=t.left),a===s?(n=c,r=u,s=$o(n,r,t)):(o=c,i=u,l=$o(o,i,t));return{x0:n,x1:o,y0:r,y1:i}}function _o(e,t){var n=t.anchor,r=e,o,i;return t.clamp&&(r=fu(r,t.area)),n==="start"?(o=r.x0,i=r.y0):n==="end"?(o=r.x1,i=r.y1):(o=(r.x0+r.x1)/2,i=(r.y0+r.y1)/2),du(o,i,e.vx,e.vy,t.align)}var No={arc:function(e,t){var n=(e.startAngle+e.endAngle)/2,r=Math.cos(n),o=Math.sin(n),i=e.innerRadius,s=e.outerRadius;return _o({x0:e.x+r*i,y0:e.y+o*i,x1:e.x+r*s,y1:e.y+o*s,vx:r,vy:o},t)},point:function(e,t){var n=$i(e,t.origin),r=n.x*e.options.radius,o=n.y*e.options.radius;return _o({x0:e.x-r,y0:e.y-o,x1:e.x+r,y1:e.y+o,vx:n.x,vy:n.y},t)},bar:function(e,t){var n=$i(e,t.origin),r=e.x,o=e.y,i=0,s=0;return e.horizontal?(r=Math.min(e.x,e.base),i=Math.abs(e.base-e.x)):(o=Math.min(e.y,e.base),s=Math.abs(e.base-e.y)),_o({x0:r,y0:o+s,x1:r+i,y1:o,vx:n.x,vy:n.y},t)},fallback:function(e,t){var n=$i(e,t.origin);return _o({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:n.x,vy:n.y},t)}},Cn=so.rasterize;function hu(e){var t=e.borderWidth||0,n=e.padding,r=e.size.height,o=e.size.width,i=-o/2,s=-r/2;return{frame:{x:i-n.left-t,y:s-n.top-t,w:o+n.width+t*2,h:r+n.height+t*2},text:{x:i,y:s,w:o,h:r}}}function gu(e,t){var n=t.chart.getDatasetMeta(t.datasetIndex).vScale;if(!n)return null;if(n.xCenter!==void 0&&n.yCenter!==void 0)return{x:n.xCenter,y:n.yCenter};var r=n.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function mu(e){return e instanceof Ll?No.arc:e instanceof Pl?No.point:e instanceof $l?No.bar:No.fallback}function pu(e,t,n,r,o,i){var s=Math.PI/2;if(i){var l=Math.min(i,o/2,r/2),a=t+l,c=n+l,u=t+r-l,h=n+o-l;e.moveTo(t,c),a<u&&c<h?(e.arc(a,c,l,-Math.PI,-s),e.arc(u,c,l,-s,0),e.arc(u,h,l,0,s),e.arc(a,h,l,s,Math.PI)):a<u?(e.moveTo(a,n),e.arc(u,c,l,-s,s),e.arc(a,c,l,s,Math.PI+s)):c<h?(e.arc(a,c,l,-Math.PI,0),e.arc(a,h,l,0,Math.PI)):e.arc(a,c,l,-Math.PI,Math.PI),e.closePath(),e.moveTo(t,n)}else e.rect(t,n,r,o)}function wu(e,t,n){var r=n.backgroundColor,o=n.borderColor,i=n.borderWidth;!r&&(!o||!i)||(e.beginPath(),pu(e,Cn(t.x)+i/2,Cn(t.y)+i/2,Cn(t.w)-i,Cn(t.h)-i,n.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),o&&i&&(e.strokeStyle=o,e.lineWidth=i,e.lineJoin="miter",e.stroke()))}function yu(e,t,n){var r=n.lineHeight,o=e.w,i=e.x,s=e.y+r/2;return t==="center"?i+=o/2:(t==="end"||t==="right")&&(i+=o),{h:r,w:o,x:i,y:s}}function bu(e,t,n){var r=e.shadowBlur,o=n.stroked,i=Cn(n.x),s=Cn(n.y),l=Cn(n.w);o&&e.strokeText(t,i,s,l),n.filled&&(r&&o&&(e.shadowBlur=0),e.fillText(t,i,s,l),r&&o&&(e.shadowBlur=r))}function vu(e,t,n,r){var o=r.textAlign,i=r.color,s=!!i,l=r.font,a=t.length,c=r.textStrokeColor,u=r.textStrokeWidth,h=c&&u,m;if(!(!a||!s&&!h))for(n=yu(n,o,l),e.font=l.string,e.textAlign=o,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,s&&(e.fillStyle=i),h&&(e.lineJoin="round",e.lineWidth=u,e.strokeStyle=c),m=0,a=t.length;m<a;++m)bu(e,t[m],{stroked:h,filled:s,w:n.w,x:n.x,y:n.y+n.h*m})}var Vl=function(e,t,n,r){var o=this;o._config=e,o._index=r,o._model=null,o._rects=null,o._ctx=t,o._el=n};go(Vl.prototype,{_modelize:function(e,t,n,r){var o=this,i=o._index,s=Pd(wt([n.font,{}],r,i)),l=wt([n.color,$d.color],r,i);return{align:wt([n.align,"center"],r,i),anchor:wt([n.anchor,"center"],r,i),area:r.chart.chartArea,backgroundColor:wt([n.backgroundColor,null],r,i),borderColor:wt([n.borderColor,null],r,i),borderRadius:wt([n.borderRadius,0],r,i),borderWidth:wt([n.borderWidth,0],r,i),clamp:wt([n.clamp,!1],r,i),clip:wt([n.clip,!1],r,i),color:l,display:e,font:s,lines:t,offset:wt([n.offset,4],r,i),opacity:wt([n.opacity,1],r,i),origin:gu(o._el,r),padding:_d(wt([n.padding,4],r,i)),positioner:mu(o._el),rotation:wt([n.rotation,0],r,i)*(Math.PI/180),size:so.textSize(o._ctx,t,s),textAlign:wt([n.textAlign,"start"],r,i),textShadowBlur:wt([n.textShadowBlur,0],r,i),textShadowColor:wt([n.textShadowColor,l],r,i),textStrokeColor:wt([n.textStrokeColor,l],r,i),textStrokeWidth:wt([n.textStrokeWidth,0],r,i)}},update:function(e){var t=this,n=null,r=null,o=t._index,i=t._config,s,l,a,c=wt([i.display,!0],e,o);c&&(s=e.dataset.data[o],l=Nd(zl(i.formatter,[s,e]),s),a=io(l)?[]:so.toTextLines(l),a.length&&(n=t._modelize(c,a,i,e),r=hu(n))),t._model=n,t._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,t){var n=this,r=e.ctx,o=n._model,i=n._rects,s;this.visible()&&(r.save(),o.clip&&(s=o.area,r.beginPath(),r.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),r.clip()),r.globalAlpha=so.bound(0,o.opacity,1),r.translate(Cn(t.x),Cn(t.y)),r.rotate(o.rotation),wu(r,i.frame,o),vu(r,o.lines,i.text,o),r.restore())}});var xu=Number.MIN_SAFE_INTEGER||-9007199254740991,ku=Number.MAX_SAFE_INTEGER||9007199254740991;function Zr(e,t,n){var r=Math.cos(n),o=Math.sin(n),i=t.x,s=t.y;return{x:i+r*(e.x-i)-o*(e.y-s),y:s+o*(e.x-i)+r*(e.y-s)}}function Bs(e,t){var n=ku,r=xu,o=t.origin,i,s,l,a,c;for(i=0;i<e.length;++i)s=e[i],l=s.x-o.x,a=s.y-o.y,c=t.vx*l+t.vy*a,n=Math.min(n,c),r=Math.max(r,c);return{min:n,max:r}}function Oo(e,t){var n=t.x-e.x,r=t.y-e.y,o=Math.sqrt(n*n+r*r);return{vx:(t.x-e.x)/o,vy:(t.y-e.y)/o,origin:e,ln:o}}var Xl=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};go(Xl.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,t,n){this._rotation=n,this._rect={x:t.x+e.x,y:t.y+e.y,w:t.w,h:t.h}},contains:function(e){var t=this,n=1,r=t._rect;return e=Zr(e,t.center(),-t._rotation),!(e.x<r.x-n||e.y<r.y-n||e.x>r.x+r.w+n*2||e.y>r.y+r.h+n*2)},intersects:function(e){var t=this._points(),n=e._points(),r=[Oo(t[0],t[1]),Oo(t[0],t[3])],o,i,s;for(this._rotation!==e._rotation&&r.push(Oo(n[0],n[1]),Oo(n[0],n[3])),o=0;o<r.length;++o)if(i=Bs(t,r[o]),s=Bs(n,r[o]),i.max<s.min||s.max<i.min)return!1;return!0},_points:function(){var e=this,t=e._rect,n=e._rotation,r=e.center();return[Zr({x:t.x,y:t.y},r,n),Zr({x:t.x+t.w,y:t.y},r,n),Zr({x:t.x+t.w,y:t.y+t.h},r,n),Zr({x:t.x,y:t.y+t.h},r,n)]}});function Yl(e,t,n){var r=t.positioner(e,t),o=r.vx,i=r.vy;if(!o&&!i)return{x:r.x,y:r.y};var s=n.w,l=n.h,a=t.rotation,c=Math.abs(s/2*Math.cos(a))+Math.abs(l/2*Math.sin(a)),u=Math.abs(s/2*Math.sin(a))+Math.abs(l/2*Math.cos(a)),h=1/Math.max(Math.abs(o),Math.abs(i));return c*=o*h,u*=i*h,c+=t.offset*o,u+=t.offset*i,{x:r.x+c,y:r.y+u}}function Cu(e,t){var n,r,o,i;for(n=e.length-1;n>=0;--n)for(o=e[n].$layout,r=n-1;r>=0&&o._visible;--r)i=e[r].$layout,i._visible&&o._box.intersects(i._box)&&t(o,i);return e}function Su(e){var t,n,r,o,i,s,l;for(t=0,n=e.length;t<n;++t)r=e[t],o=r.$layout,o._visible&&(l=new Proxy(r._el,{get:(a,c)=>a.getProps([c],!0)[c]}),i=r.geometry(),s=Yl(l,r.model(),i),o._box.update(s,i,r.rotation()));return Cu(e,function(a,c){var u=a._hidable,h=c._hidable;u&&h||h?c._visible=!1:u&&(a._visible=!1)})}var lo={prepare:function(e){var t=[],n,r,o,i,s;for(n=0,o=e.length;n<o;++n)for(r=0,i=e[n].length;r<i;++r)s=e[n][r],t.push(s),s.$layout={_box:new Xl,_hidable:!1,_visible:!0,_set:n,_idx:s._index};return t.sort(function(l,a){var c=l.$layout,u=a.$layout;return c._idx===u._idx?u._set-c._set:u._idx-c._idx}),this.update(t),t},update:function(e){var t=!1,n,r,o,i,s;for(n=0,r=e.length;n<r;++n)o=e[n],i=o.model(),s=o.$layout,s._hidable=i&&i.display==="auto",s._visible=o.visible(),t|=s._hidable;t&&Su(e)},lookup:function(e,t){var n,r;for(n=e.length-1;n>=0;--n)if(r=e[n].$layout,r&&r._visible&&r._box.contains(t))return e[n];return null},draw:function(e,t){var n,r,o,i,s,l;for(n=0,r=t.length;n<r;++n)o=t[n],i=o.$layout,i._visible&&(s=o.geometry(),l=Yl(o._el,o.model(),s),i._box.update(l,s,o.rotation()),o.draw(e,l))}},Mu=function(e){if(io(e))return null;var t=e,n,r,o;if(Bd(e))if(!io(e.label))t=e.label;else if(!io(e.r))t=e.r;else for(t="",n=Object.keys(e),o=0,r=n.length;o<r;++o)t+=(o!==0?", ":"")+n[o]+": "+e[n[o]];return""+t},Ru={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Mu,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},_t="$datalabels",Ul="$default";function Eu(e,t){var n=e.datalabels,r={},o=[],i,s;return n===!1?null:(n===!0&&(n={}),t=go({},[t,n]),i=t.labels||{},s=Object.keys(i),delete t.labels,s.length?s.forEach(function(l){i[l]&&o.push(go({},[t,i[l],{_key:l}]))}):o.push(t),r=o.reduce(function(l,a){return Od(a.listeners||{},function(c,u){l[u]=l[u]||{},l[u][a._key||Ul]=c}),delete a.listeners,l},{}),{labels:o,listeners:r})}function Ki(e,t,n,r){if(t){var o=n.$context,i=n.$groups,s;t[i._set]&&(s=t[i._set][i._key],s&&zl(s,[o,r])===!0&&(e[_t]._dirty=!0,n.update(o)))}}function Tu(e,t,n,r,o){var i,s;!n&&!r||(n?r?n!==r&&(s=i=!0):s=!0:i=!0,s&&Ki(e,t.leave,n,o),i&&Ki(e,t.enter,r,o))}function Iu(e,t){var n=e[_t],r=n._listeners,o,i;if(!(!r.enter&&!r.leave)){if(t.type==="mousemove")i=lo.lookup(n._labels,t);else if(t.type!=="mouseout")return;o=n._hovered,n._hovered=i,Tu(e,r,o,i,t)}}function Du(e,t){var n=e[_t],r=n._listeners.click,o=r&&lo.lookup(n._labels,t);o&&Ki(e,r,o,t)}var Fu={id:"datalabels",defaults:Ru,beforeInit:function(e){e[_t]={_actives:[]}},beforeUpdate:function(e){var t=e[_t];t._listened=!1,t._listeners={},t._datasets=[],t._labels=[]},afterDatasetUpdate:function(e,t,n){var r=t.index,o=e[_t],i=o._datasets[r]=[],s=e.isDatasetVisible(r),l=e.data.datasets[r],a=Eu(l,n),c=t.meta.data||[],u=e.ctx,h,m,p,g,w,v,x,y;for(u.save(),h=0,p=c.length;h<p;++h)if(x=c[h],x[_t]=[],s&&x&&e.getDataVisibility(h)&&!x.skip)for(m=0,g=a.labels.length;m<g;++m)w=a.labels[m],v=w._key,y=new Vl(w,u,x,h),y.$groups={_set:r,_key:v||Ul},y.$context={active:!1,chart:e,dataIndex:h,dataset:l,datasetIndex:r},y.update(y.$context),x[_t].push(y),i.push(y);u.restore(),go(o._listeners,a.listeners,{merger:function(E,M,b){M[E]=M[E]||{},M[E][t.index]=b[E],o._listened=!0}})},afterUpdate:function(e){e[_t]._labels=lo.prepare(e[_t]._datasets)},afterDatasetsDraw:function(e){lo.draw(e,e[_t]._labels)},beforeEvent:function(e,t){if(e[_t]._listened){var n=t.event;switch(n.type){case"mousemove":case"mouseout":Iu(e,n);break;case"click":Du(e,n);break}}},afterEvent:function(e){var t=e[_t],n=t._actives,r=t._actives=e.getActiveElements(),o=so.arrayDiff(n,r),i,s,l,a,c,u,h;for(i=0,s=o.length;i<s;++i)if(c=o[i],c[1])for(h=c[0].element[_t]||[],l=0,a=h.length;l<a;++l)u=h[l],u.$context.active=c[1]===1,u.update(u.$context);(t._dirty||o.length)&&(lo.update(t._labels),e.render()),delete t._dirty}};const Kl=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=getComputedStyle(document.documentElement);return n.map(i=>{const{data:s,colors:l,label:a}=i;return{label:a,data:s,backgroundColor:l,borderWidth:2,borderColor:[o.getPropertyValue("--main-surface-primary").trim()]}})},[n]);return T.jsx("div",{className:"h-full w-full py-2",children:T.jsx(Wd,{ref:t,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!1},tooltip:{enabled:!0,animation:{duration:0},mode:"index",position:"average",backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:o=>o[0].formattedValue,label:function(o){const i=e.labels[o.dataIndex],s=n[0],l=s.data[o.dataIndex],a=s.data.reduce((u,h)=>Number(u)+Number(h),0),c=parseFloat((l/Number(a)*100).toFixed(2));return`${i} · ${c}%`}}},datalabels:{color:"white",textAlign:"center",font:{weight:"bold",size:16},backgroundColor:function(o){const i=o.dataset.data[o.dataIndex],s=o.dataset.data.reduce((a,c)=>Number(a)+Number(c),0);return i/Number(s)*100>=15?"rgba(0, 0, 0, 0.1)":"transparent"},borderRadius:15,padding:{top:6,bottom:6,left:8,right:8},formatter:(o,i)=>{const s=i.dataset.data.reduce((a,c)=>Number(a)+Number(c),0);return o/Number(s)*100>=15?o.toFixed(2):""}}}},plugins:[Fu],data:{labels:e.labels,datasets:r}})})});Kl.displayName="PieChart";const Gl=d.forwardRef(({chart:e},t)=>{const{datasets:n}=e,r=d.useMemo(()=>{const o=n.reduce((i,s)=>i+s.data.length,0);return n.map(i=>{const{data:s,label:l,colors:a}=i;return{label:l,data:s,backgroundColor:a,borderColor:a,pointRadius:o>50?o>200?2:4:8,pointHoverRadius:o>50?4:8}})},[n]);return T.jsx(jd,{ref:t,options:{maintainAspectRatio:!1,scales:{x:{title:{display:!1},time:{unit:"day",displayFormats:{day:"yyyy-MM-dd"},tooltipFormat:"yyyy-MM-dd"},grid:{display:!1},ticks:{display:!0},...ss(e.labels)?{type:"time"}:{}},y:{title:{display:!1},grid:{lineWidth:o=>o.tick.value===0?0:1},border:{dash:[3,3]}}},elements:{point:{radius:0}},plugins:{legend:{display:!1},title:{display:!1,text:e.title},tooltip:{enabled:!0,mode:"point",position:"nearest",animation:{duration:0},backgroundColor:"rgba(0, 0, 0, 1)",titleColor:"white",titleFont:{size:16,weight:"bold"},bodyFont:{size:12},displayColors:!1,bodyColor:"rgba(255, 255, 255, 0.7)",cornerRadius:8,caretSize:6,padding:{top:12,bottom:12,left:16,right:16},callbacks:{title:function(){return""},label:function(o){return`${o.dataset.label?`${o.dataset.label}: `:""} X=${o.parsed.x.toFixed(2)}, Y=${o.parsed.y.toFixed(2)} 
`}}}}},data:{labels:e.labels,datasets:r}})});Gl.displayName="ScatterChart";Vd.register(Ll,Xd,Yd,$l,Ud,Kd,Gd,qd,Pl,Zd,Qd);const ql=16,Ws={bar:_l,pie:Kl,line:Nl,scatter:Gl};function js({item:e,formattedName:t}){return T.jsxs("div",{className:"inline-flex items-center gap-1",children:[T.jsx("div",{className:"h-3 w-3 rounded-sm",style:{backgroundColor:e.color}}),t]})}function Hu({items:e,hideAxisLabels:t=!1,xLabel:n="",yLabel:r=""}){const o=os();function i(s,l){const a=l.indexOf(s);return a<l.length-2?`${s.name}, `:a===l.length-2?`${s.name}${l.length>2?", ":" "} ${o.formatMessage({id:"Gt7UQw",defaultMessage:"and"})}`:s.name}return T.jsxs("div",{className:"flex w-full flex-wrap items-center gap-1 px-4 text-xs text-token-text-primary",children:[!t&&T.jsx(Rt,{id:"Wn04Wd",defaultMessage:"{yLabel} by {xLabel}",values:{xLabel:T.jsxs("div",{className:"inline-flex items-center gap-0.5",children:[T.jsx(Rc,{className:"icon-sm text-token-text-secondary"}),n]}),yLabel:T.jsxs("div",{className:"inline-flex items-center gap-0.5",children:[T.jsx(Ec,{className:"icon-sm text-token-text-secondary"}),r]})}}),e.length>1&&e.length<ql&&(t?T.jsx(Rt,{id:"WKJKdH",defaultMessage:"For {legendItems}",values:{legendItems:e.map((s,l)=>T.jsx(js,{item:s,formattedName:i(s,e)},l))}}):T.jsx(Rt,{id:"Isulib",defaultMessage:"for {legendItems}",values:{legendItems:e.map((s,l)=>T.jsx(js,{item:s,formattedName:i(s,e)},l))}}))]})}const Zl=d.forwardRef(({chart:e},t)=>{const n=d.useRef(null);d.useImperativeHandle(t,()=>({getBase64Image:()=>{if(!n.current){ro.addError("Chart instance is not yet available.");return}return n.current.toBase64Image()}}));const r=d.useCallback(()=>{if(e.chart_type==="pie"){const i=e.datasets[0].colors;if(i&&Array.isArray(i))return e.labels.map((s,l)=>({name:s,color:i[l]??""}))}else return e.datasets.map(i=>({name:i.label,color:Array.isArray(i.colors)?i.colors[0]:i.colors}));return[]},[e]);if(!(e.chart_type in Ws))return T.jsx(Rt,{id:"Chart.invalidChartType",defaultMessage:"Invalid chart type"});const o=Ws[e.chart_type];return T.jsxs("div",{className:"flex h-full w-full flex-col items-center",children:[T.jsx("div",{className:"w-full flex-initial",style:{flexBasis:"28px"},children:T.jsx(Hu,{xLabel:e.x_label,yLabel:e.y_label,items:r(),hideAxisLabels:e.chart_type==="pie"})}),T.jsx("div",{className:Lt("flex w-full flex-grow items-center justify-center px-4 pb-3"),style:{minHeight:"0"},children:T.jsx(o,{chart:e,ref:n})})]})});Zl.displayName="Chart";function Ql(e="This should not happen"){throw new Error(e)}function Xt(e,t="Assertion failed"){if(!e)return Ql(t)}function mo(e,t){return Ql(t??"Hell froze over")}function Au(e,t){try{return e()}catch{return t}}const Vs=Object.prototype.hasOwnProperty;function Ar(e,t){let n,r;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Ar(e[r],t[r]););return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Vs.call(e,n)&&++r&&!Vs.call(t,n)||!(n in t)||!Ar(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}var zu=Object.prototype,Lu=zu.hasOwnProperty;function Pu(e,t){return e!=null&&Lu.call(e,t)}var $u=Pu,_u=$u,Nu=wc;function Ou(e,t){return e!=null&&Nu(e,t,_u)}var Bu=Ou;const Wu=ii(Bu),qo=null,ls=void 0;var J;(function(e){e.Uri="uri",e.Text="text",e.Image="image",e.RowID="row-id",e.Number="number",e.Bubble="bubble",e.Boolean="boolean",e.Loading="loading",e.Markdown="markdown",e.Drilldown="drilldown",e.Protected="protected",e.Custom="custom"})(J||(J={}));var Xs;(function(e){e.HeaderRowID="headerRowID",e.HeaderCode="headerCode",e.HeaderNumber="headerNumber",e.HeaderString="headerString",e.HeaderBoolean="headerBoolean",e.HeaderAudioUri="headerAudioUri",e.HeaderVideoUri="headerVideoUri",e.HeaderEmoji="headerEmoji",e.HeaderImage="headerImage",e.HeaderUri="headerUri",e.HeaderPhone="headerPhone",e.HeaderMarkdown="headerMarkdown",e.HeaderDate="headerDate",e.HeaderTime="headerTime",e.HeaderEmail="headerEmail",e.HeaderReference="headerReference",e.HeaderIfThenElse="headerIfThenElse",e.HeaderSingleValue="headerSingleValue",e.HeaderLookup="headerLookup",e.HeaderTextTemplate="headerTextTemplate",e.HeaderMath="headerMath",e.HeaderRollup="headerRollup",e.HeaderJoinStrings="headerJoinStrings",e.HeaderSplitString="headerSplitString",e.HeaderGeoDistance="headerGeoDistance",e.HeaderArray="headerArray",e.RowOwnerOverlay="rowOwnerOverlay",e.ProtectedColumnOverlay="protectedColumnOverlay"})(Xs||(Xs={}));var Zo;(function(e){e.Triangle="triangle",e.Dots="dots"})(Zo||(Zo={}));const li="___gdg_header_cell_",Jl=li+"checked",ea=li+"unchecked",ju=li+"indeterminate";function Bo(e){return"width"in e&&typeof e.width=="number"}async function Ys(e){return typeof e=="object"?e:await e()}function Tr(e){return!(e.kind===J.Loading||e.kind===J.Bubble||e.kind===J.RowID||e.kind===J.Protected||e.kind===J.Drilldown)}function Dr(e){return e.kind===Zt.Marker||e.kind===Zt.NewRow}function no(e){if(!Tr(e)||e.kind===J.Image)return!1;if(e.kind===J.Text||e.kind===J.Number||e.kind===J.Markdown||e.kind===J.Uri||e.kind===J.Custom||e.kind===J.Boolean)return e.readonly!==!0;mo(e,"A cell was passed with an invalid kind")}function Vu(e){return Wu(e,"editor")}function Gi(e){return!(e.readonly??!1)}var Zt;(function(e){e.NewRow="new-row",e.Marker="marker"})(Zt||(Zt={}));function Xu(e){if(e.length===0)return[];const t=[...e],n=[];t.sort(function(r,o){return r[0]-o[0]}),n.push([...t[0]]);for(const r of t.slice(1)){const o=n[n.length-1];o[1]<r[0]?n.push([...r]):o[1]<r[1]&&(o[1]=r[1])}return n}let Us;class ze{items;constructor(t){this.items=t}static empty=()=>Us??(Us=new ze([]));static fromSingleSelection=t=>ze.empty().add(t);offset(t){if(t===0)return this;const n=this.items.map(r=>[r[0]+t,r[1]+t]);return new ze(n)}add(t){const n=typeof t=="number"?[t,t+1]:t,r=Xu([...this.items,n]);return new ze(r)}remove(t){const n=[...this.items],r=typeof t=="number"?t:t[0],o=typeof t=="number"?t+1:t[1];for(const[i,s]of n.entries()){const[l,a]=s;if(l<=o&&r<=a){const c=[];l<r&&c.push([l,r]),o<a&&c.push([o,a]),n.splice(i,1,...c)}}return new ze(n)}first(){if(this.items.length!==0)return this.items[0][0]}last(){if(this.items.length!==0)return this.items.slice(-1)[0][1]-1}hasIndex(t){for(let n=0;n<this.items.length;n++){const[r,o]=this.items[n];if(t>=r&&t<o)return!0}return!1}hasAll(t){for(let n=t[0];n<t[1];n++)if(!this.hasIndex(n))return!1;return!0}some(t){for(const n of this)if(t(n))return!0;return!1}equals(t){if(t===this)return!0;if(t.items.length!==this.items.length)return!1;for(let n=0;n<this.items.length;n++){const r=t.items[n],o=this.items[n];if(r[0]!==o[0]||r[1]!==o[1])return!1}return!0}toArray(){const t=[];for(const[n,r]of this.items)for(let o=n;o<r;o++)t.push(o);return t}get length(){let t=0;for(const[n,r]of this.items)t+=r-n;return t}*[Symbol.iterator](){for(const[t,n]of this.items)for(let r=t;r<n;r++)yield r}}var Yu=function(){const t=Array.prototype.slice.call(arguments).filter(Boolean),n={},r=[];t.forEach(i=>{(i?i.split(" "):[]).forEach(l=>{if(l.startsWith("atm_")){const[,a]=l.split("_");n[a]=l}else r.push(l)})});const o=[];for(const i in n)Object.prototype.hasOwnProperty.call(n,i)&&o.push(n[i]);return o.push(...r),o.join(" ")},Ks=Yu,Uu=e=>e.toUpperCase()===e,Ku=e=>t=>e.indexOf(t)===-1,ta=(e,t)=>{const n={};return Object.keys(e).filter(Ku(t)).forEach(r=>{n[r]=e[r]}),n};function Gu(e,t,n){const r=ta(t,n);if(!e){const o=typeof Pi=="function"?{default:Pi}:Pi;Object.keys(r).forEach(i=>{o.default(i)||delete r[i]})}return r}var qu=(e,t)=>{};function Zu(e){let t="";return n=>{const r=(i,s)=>{const{as:l=e,class:a=t}=i,c=n.propsAsIs===void 0?!(typeof l=="string"&&l.indexOf("-")===-1&&!Uu(l[0])):n.propsAsIs,u=Gu(c,i,["as","class"]);u.ref=s,u.className=n.atomic?Ks(n.class,u.className||a):Ks(u.className||a,n.class);const{vars:h}=n;if(h){const m={};for(const w in h){const v=h[w],x=v[0],y=v[1]||"",E=typeof x=="function"?x(i):x;qu(E,n.name),m[`--${w}`]=`${E}${y}`}const p=u.style||{},g=Object.keys(p);g.length>0&&g.forEach(w=>{m[w]=p[w]}),u.style=m}return e.__linaria&&e!==l?(u.as=l,yt.createElement(e,u)):yt.createElement(l,u)},o=yt.forwardRef?yt.forwardRef(r):i=>{const s=ta(i,["innerRef"]);return r(s,i.innerRef)};return o.displayName=n.name,o.__linaria={className:n.class||t,extends:e},o}}var Ut=Zu;const Qu=Ut("div")({name:"ImageOverlayEditorStyle",class:"gdg-i2iowwq",propsAsIs:!1});function Et(e,t,n,r,o=!1){const i=d.useRef();i.current=t,d.useEffect(()=>{if(n===null||n.addEventListener===void 0)return;const s=n,l=a=>{i.current?.call(s,a)};return s.addEventListener(e,l,{passive:r,capture:o}),()=>{s.removeEventListener(e,l,{capture:o})}},[e,n,r,o])}function Rr(e,t){return e===void 0?void 0:t}const Ju=Math.PI;function Gs(e){return e*Ju/180}const na=(e,t,n)=>({x1:e-n/2,y1:t-n/2,x2:e+n/2,y2:t+n/2}),ra=(e,t,n,r,o)=>{switch(e){case"left":return Math.floor(t)+r+o/2;case"center":return Math.floor(t+n/2);case"right":return Math.floor(t+n)-r-o/2}},oa=(e,t,n)=>Math.min(e,t-n*2),ia=(e,t,n)=>n.x1<=e&&e<=n.x2&&n.y1<=t&&t<=n.y2,as=e=>{const t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M12.7073 7.05029C7.87391 11.8837 10.4544 9.30322 6.03024 13.7273C5.77392 13.9836 5.58981 14.3071 5.50189 14.6587L4.52521 18.5655C4.38789 19.1148 4.88543 19.6123 5.43472 19.475L9.34146 18.4983C9.69313 18.4104 10.0143 18.2286 10.2706 17.9722L16.9499 11.2929",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}),d.createElement("path",{d:"M20.4854 4.92901L19.0712 3.5148C18.2901 2.73375 17.0238 2.73375 16.2428 3.5148L14.475 5.28257C15.5326 7.71912 16.4736 8.6278 18.7176 9.52521L20.4854 7.75744C21.2665 6.97639 21.2665 5.71006 20.4854 4.92901Z",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",vectorEffect:"non-scaling-stroke"}))},ef=e=>{const t=e.fgColor??"currentColor";return d.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},d.createElement("path",{d:"M19 6L10.3802 17L5.34071 11.8758",vectorEffect:"non-scaling-stroke",stroke:t,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))};function tf(e,t,n){const[r,o]=d.useState(e),i=d.useRef(!0);d.useEffect(()=>()=>{i.current=!1},[]);const s=d.useRef(Dl(l=>{i.current&&o(l)},n));return d.useLayoutEffect(()=>{i.current&&s.current(()=>e())},t),r}const nf="֑-߿יִ-﷽ﹰ-ﻼ",rf="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",of=new RegExp("^[^"+rf+"]*["+nf+"]");function cs(e){return of.test(e)?"rtl":"not-rtl"}let Wo;function qi(){if(typeof document>"u")return 0;if(Wo!==void 0)return Wo;const e=document.createElement("p");e.style.width="100%",e.style.height="200px";const t=document.createElement("div");t.id="testScrollbar",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.append(e),document.body.append(t);const n=e.offsetWidth;t.style.overflow="scroll";let r=e.offsetWidth;return n===r&&(r=t.clientWidth),t.remove(),Wo=n-r,Wo}const Jn=Symbol();function sf(e){const t=d.useRef([Jn,e]);t.current[1]!==e&&(t.current[0]=e),t.current[1]=e;const[n,r]=d.useState(e),[,o]=d.useState(),i=d.useCallback(l=>{const a=t.current[0];a!==Jn&&(l=typeof l=="function"?l(a):l,l===a)||(a!==Jn&&o({}),r(c=>typeof l=="function"?l(a===Jn?c:a):l),t.current[0]=Jn)},[]),s=d.useCallback(()=>{t.current[0]=Jn,o({})},[]);return[t.current[0]===Jn?n:t.current[0],i,s]}function sa(e){if(e.length===0)return"";let t=0,n=0;for(const r of e){if(n+=r.length,n>1e4)break;t++}return e.slice(0,t).join(", ")}function lf(e){const t=d.useRef(e);return Ar(e,t.current)||(t.current=e),d.useMemo(()=>t.current,[t.current])}const af=e=>{const{urls:t,canWrite:n,onEditClick:r,renderImage:o}=e,i=t.filter(l=>l!=="");if(i.length===0)return null;const s=i.length>1;return d.createElement(Qu,{"data-testid":"GDG-default-image-overlay-editor"},d.createElement(Jd.Carousel,{showArrows:s,showThumbs:!1,swipeable:s,emulateTouch:s,infiniteLoop:s},i.map(l=>{const a=o?.(l)??d.createElement("img",{draggable:!1,src:l});return d.createElement("div",{className:"gdg-centering-container",key:l},a)})),n&&r&&d.createElement("button",{className:"gdg-edit-icon",onClick:r},d.createElement(as,null)))};function ds(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let rr=ds();function la(e){rr=e}const aa=/[&<>"']/,cf=new RegExp(aa.source,"g"),ca=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,df=new RegExp(ca.source,"g"),uf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qs=e=>uf[e];function jt(e,t){if(t){if(aa.test(e))return e.replace(cf,qs)}else if(ca.test(e))return e.replace(df,qs);return e}const ff=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function hf(e){return e.replace(ff,(t,n)=>(n=n.toLowerCase(),n==="colon"?":":n.charAt(0)==="#"?n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1)):""))}const gf=/(^|[^\[])\^/g;function et(e,t){let n=typeof e=="string"?e:e.source;t=t||"";const r={replace:(o,i)=>{let s=typeof i=="string"?i:i.source;return s=s.replace(gf,"$1"),n=n.replace(o,s),r},getRegex:()=>new RegExp(n,t)};return r}function Zs(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const ao={exec:()=>null};function Qs(e,t){const n=e.replace(/\|/g,(i,s,l)=>{let a=!1,c=s;for(;--c>=0&&l[c]==="\\";)a=!a;return a?"|":" |"}),r=n.split(/ \|/);let o=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;o<r.length;o++)r[o]=r[o].trim().replace(/\\\|/g,"|");return r}function jo(e,t,n){const r=e.length;if(r===0)return"";let o=0;for(;o<r;){const i=e.charAt(r-o-1);if(i===t&&!n)o++;else if(i!==t&&n)o++;else break}return e.slice(0,r-o)}function mf(e,t){if(e.indexOf(t[1])===-1)return-1;let n=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}function Js(e,t,n,r){const o=t.href,i=t.title?jt(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:o,title:i,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:o,title:i,text:jt(s)}}function pf(e,t){const n=e.match(/^(\s+)(?:```)/);if(n===null)return t;const r=n[1];return t.split(`
`).map(o=>{const i=o.match(/^\s+/);if(i===null)return o;const[s]=i;return s.length>=r.length?o.slice(r.length):o}).join(`
`)}class Qo{options;rules;lexer;constructor(t){this.options=t||rr}space(t){const n=this.rules.block.newline.exec(t);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(t){const n=this.rules.block.code.exec(t);if(n){const r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:jo(r,`
`)}}}fences(t){const n=this.rules.block.fences.exec(t);if(n){const r=n[0],o=pf(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:o}}}heading(t){const n=this.rules.block.heading.exec(t);if(n){let r=n[2].trim();if(/#$/.test(r)){const o=jo(r,"#");(this.options.pedantic||!o||/ $/.test(o))&&(r=o.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){const n=this.rules.block.hr.exec(t);if(n)return{type:"hr",raw:n[0]}}blockquote(t){const n=this.rules.block.blockquote.exec(t);if(n){const r=jo(n[0].replace(/^ *>[ \t]?/gm,""),`
`),o=this.lexer.state.top;this.lexer.state.top=!0;const i=this.lexer.blockTokens(r);return this.lexer.state.top=o,{type:"blockquote",raw:n[0],tokens:i,text:r}}}list(t){let n=this.rules.block.list.exec(t);if(n){let r=n[1].trim();const o=r.length>1,i={type:"list",raw:"",ordered:o,start:o?+r.slice(0,-1):"",loose:!1,items:[]};r=o?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=o?r:"[*+-]");const s=new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",a="",c=!1;for(;t;){let u=!1;if(!(n=s.exec(t))||this.rules.block.hr.test(t))break;l=n[0],t=t.substring(l.length);let h=n[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),m=t.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,a=h.trimStart()):(p=n[2].search(/[^ ]/),p=p>4?1:p,a=h.slice(p),p+=n[1].length);let g=!1;if(!h&&/^ *$/.test(m)&&(l+=m+`
`,t=t.substring(m.length+1),u=!0),!u){const x=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),y=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),E=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),M=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;t;){const b=t.split(`
`,1)[0];if(m=b,this.options.pedantic&&(m=m.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),E.test(m)||M.test(m)||x.test(m)||y.test(t))break;if(m.search(/[^ ]/)>=p||!m.trim())a+=`
`+m.slice(p);else{if(g||h.search(/[^ ]/)>=4||E.test(h)||M.test(h)||y.test(h))break;a+=`
`+m}!g&&!m.trim()&&(g=!0),l+=b+`
`,t=t.substring(b.length+1),h=m.slice(p)}}i.loose||(c?i.loose=!0:/\n *\n *$/.test(l)&&(c=!0));let w=null,v;this.options.gfm&&(w=/^\[[ xX]\] /.exec(a),w&&(v=w[0]!=="[ ] ",a=a.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:l,task:!!w,checked:v,loose:!1,text:a,tokens:[]}),i.raw+=l}i.items[i.items.length-1].raw=l.trimEnd(),i.items[i.items.length-1].text=a.trimEnd(),i.raw=i.raw.trimEnd();for(let u=0;u<i.items.length;u++)if(this.lexer.state.top=!1,i.items[u].tokens=this.lexer.blockTokens(i.items[u].text,[]),!i.loose){const h=i.items[u].tokens.filter(p=>p.type==="space"),m=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));i.loose=m}if(i.loose)for(let u=0;u<i.items.length;u++)i.items[u].loose=!0;return i}}html(t){const n=this.rules.block.html.exec(t);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(t){const n=this.rules.block.def.exec(t);if(n){const r=n[1].toLowerCase().replace(/\s+/g," "),o=n[2]?n[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:o,title:i}}}table(t){const n=this.rules.block.table.exec(t);if(!n||!/[:|]/.test(n[2]))return;const r=Qs(n[1]),o=n[2].replace(/^\||\| *$/g,"").split("|"),i=n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===o.length){for(const l of o)/^ *-+: *$/.test(l)?s.align.push("right"):/^ *:-+: *$/.test(l)?s.align.push("center"):/^ *:-+ *$/.test(l)?s.align.push("left"):s.align.push(null);for(const l of r)s.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of i)s.rows.push(Qs(l,s.header.length).map(a=>({text:a,tokens:this.lexer.inline(a)})));return s}}lheading(t){const n=this.rules.block.lheading.exec(t);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(t){const n=this.rules.block.paragraph.exec(t);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(t){const n=this.rules.block.text.exec(t);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(t){const n=this.rules.inline.escape.exec(t);if(n)return{type:"escape",raw:n[0],text:jt(n[1])}}tag(t){const n=this.rules.inline.tag.exec(t);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(t){const n=this.rules.inline.link.exec(t);if(n){const r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;const s=jo(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=mf(n[2],"()");if(s>-1){const a=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,a).trim(),n[3]=""}}let o=n[2],i="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);s&&(o=s[1],i=s[3])}else i=n[3]?n[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(this.options.pedantic&&!/>$/.test(r)?o=o.slice(1):o=o.slice(1,-1)),Js(n,{href:o&&o.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer)}}reflink(t,n){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){const o=(r[2]||r[1]).replace(/\s+/g," "),i=n[o.toLowerCase()];if(!i){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return Js(r,i,r[0],this.lexer)}}emStrong(t,n,r=""){let o=this.rules.inline.emStrongLDelim.exec(t);if(!o||o[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(o[1]||o[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...o[0]].length-1;let l,a,c=s,u=0;const h=o[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,n=n.slice(-1*t.length+s);(o=h.exec(n))!=null;){if(l=o[1]||o[2]||o[3]||o[4]||o[5]||o[6],!l)continue;if(a=[...l].length,o[3]||o[4]){c+=a;continue}else if((o[5]||o[6])&&s%3&&!((s+a)%3)){u+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+u);const m=[...o[0]][0].length,p=t.slice(0,s+o.index+m+a);if(Math.min(s,a)%2){const w=p.slice(1,-1);return{type:"em",raw:p,text:w,tokens:this.lexer.inlineTokens(w)}}const g=p.slice(2,-2);return{type:"strong",raw:p,text:g,tokens:this.lexer.inlineTokens(g)}}}}codespan(t){const n=this.rules.inline.code.exec(t);if(n){let r=n[2].replace(/\n/g," ");const o=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return o&&i&&(r=r.substring(1,r.length-1)),r=jt(r,!0),{type:"codespan",raw:n[0],text:r}}}br(t){const n=this.rules.inline.br.exec(t);if(n)return{type:"br",raw:n[0]}}del(t){const n=this.rules.inline.del.exec(t);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(t){const n=this.rules.inline.autolink.exec(t);if(n){let r,o;return n[2]==="@"?(r=jt(n[1]),o="mailto:"+r):(r=jt(n[1]),o=r),{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}url(t){let n;if(n=this.rules.inline.url.exec(t)){let r,o;if(n[2]==="@")r=jt(n[0]),o="mailto:"+r;else{let i;do i=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])?.[0]??"";while(i!==n[0]);r=jt(n[0]),n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:r,href:o,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const n=this.rules.inline.text.exec(t);if(n){let r;return this.lexer.state.inRawBlock?r=n[0]:r=jt(n[0]),{type:"text",raw:n[0],text:r}}}}const wf=/^(?: *(?:\n|$))+/,yf=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,bf=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,wo=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,vf=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,da=/(?:[*+-]|\d{1,9}[.)])/,ua=et(/^(?!bull )((?:.|\n(?!\s*?\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,da).getRegex(),us=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,xf=/^[^\n]+/,fs=/(?!\s*\])(?:\\.|[^\[\]\\])+/,kf=et(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",fs).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Cf=et(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,da).getRegex(),ai="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",hs=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Sf=et("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",hs).replace("tag",ai).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),fa=et(us).replace("hr",wo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ai).getRegex(),Mf=et(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",fa).getRegex(),gs={blockquote:Mf,code:yf,def:kf,fences:bf,heading:vf,hr:wo,html:Sf,lheading:ua,list:Cf,newline:wf,paragraph:fa,table:ao,text:xf},el=et("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",wo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ai).getRegex(),Rf={...gs,table:el,paragraph:et(us).replace("hr",wo).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",el).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ai).getRegex()},Ef={...gs,html:et(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",hs).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ao,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:et(us).replace("hr",wo).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ua).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},ha=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Tf=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ga=/^( {2,}|\\)\n(?!\s*$)/,If=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,yo="\\p{P}$+<=>`^|~",Df=et(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,yo).getRegex(),Ff=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Hf=et(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,yo).getRegex(),Af=et("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,yo).getRegex(),zf=et("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,yo).getRegex(),Lf=et(/\\([punct])/,"gu").replace(/punct/g,yo).getRegex(),Pf=et(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),$f=et(hs).replace("(?:-->|$)","-->").getRegex(),_f=et("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",$f).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Jo=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Nf=et(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Jo).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ma=et(/^!?\[(label)\]\[(ref)\]/).replace("label",Jo).replace("ref",fs).getRegex(),pa=et(/^!?\[(ref)\](?:\[\])?/).replace("ref",fs).getRegex(),Of=et("reflink|nolink(?!\\()","g").replace("reflink",ma).replace("nolink",pa).getRegex(),ms={_backpedal:ao,anyPunctuation:Lf,autolink:Pf,blockSkip:Ff,br:ga,code:Tf,del:ao,emStrongLDelim:Hf,emStrongRDelimAst:Af,emStrongRDelimUnd:zf,escape:ha,link:Nf,nolink:pa,punctuation:Df,reflink:ma,reflinkSearch:Of,tag:_f,text:If,url:ao},Bf={...ms,link:et(/^!?\[(label)\]\((.*?)\)/).replace("label",Jo).getRegex(),reflink:et(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Jo).getRegex()},Zi={...ms,escape:et(ha).replace("])","~|])").getRegex(),url:et(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Wf={...Zi,br:et(ga).replace("{2,}","*").getRegex(),text:et(Zi.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Vo={normal:gs,gfm:Rf,pedantic:Ef},Qr={normal:ms,gfm:Zi,breaks:Wf,pedantic:Bf};class pn{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||rr,this.options.tokenizer=this.options.tokenizer||new Qo,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={block:Vo.normal,inline:Qr.normal};this.options.pedantic?(n.block=Vo.pedantic,n.inline=Qr.pedantic):this.options.gfm&&(n.block=Vo.gfm,this.options.breaks?n.inline=Qr.breaks:n.inline=Qr.gfm),this.tokenizer.rules=n}static get rules(){return{block:Vo,inline:Qr}}static lex(t,n){return new pn(n).lex(t)}static lexInline(t,n){return new pn(n).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,n=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(l,a,c)=>a+"    ".repeat(c.length));let r,o,i,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(r=l.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&n.length>0?n[n.length-1].raw+=`
`:n.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&(o.type==="paragraph"||o.type==="text")?(o.raw+=`
`+r.raw,o.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=o.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),n.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const a=t.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},a),typeof c=="number"&&c>=0&&(l=Math.min(l,c))}),l<1/0&&l>=0&&(i=t.substring(0,l+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){o=n[n.length-1],s&&o.type==="paragraph"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r),s=i.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&o.type==="text"?(o.raw+=`
`+r.raw,o.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=o.text):n.push(r);continue}if(t){const l="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(t,n=[]){return this.inlineQueue.push({src:t,tokens:n}),n}inlineTokens(t,n=[]){let r,o,i,s=t,l,a,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,l.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(a||(c=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,n))?(t=t.substring(r.raw.length),n.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),o=n[n.length-1],o&&r.type==="text"&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(r=this.tokenizer.emStrong(t,s,c)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),n.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),n.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),n.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let m;this.options.extensions.startInline.forEach(p=>{m=p.call({lexer:this},h),typeof m=="number"&&m>=0&&(u=Math.min(u,m))}),u<1/0&&u>=0&&(i=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(i)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(c=r.raw.slice(-1)),a=!0,o=n[n.length-1],o&&o.type==="text"?(o.raw+=r.raw,o.text+=r.text):n.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}}class ei{options;constructor(t){this.options=t||rr}code(t,n,r){const o=(n||"").match(/^\S*/)?.[0];return t=t.replace(/\n$/,"")+`
`,o?'<pre><code class="language-'+jt(o)+'">'+(r?t:jt(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:jt(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,n){return t}heading(t,n,r){return`<h${n}>${t}</h${n}>
`}hr(){return`<hr>
`}list(t,n,r){const o=n?"ol":"ul",i=n&&r!==1?' start="'+r+'"':"";return"<"+o+i+`>
`+t+"</"+o+`>
`}listitem(t,n,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,n){return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,n){const r=n.header?"th":"td";return(n.align?`<${r} align="${n.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,n,r){const o=Zs(t);if(o===null)return r;t=o;let i='<a href="'+t+'"';return n&&(i+=' title="'+n+'"'),i+=">"+r+"</a>",i}image(t,n,r){const o=Zs(t);if(o===null)return r;t=o;let i=`<img src="${t}" alt="${r}"`;return n&&(i+=` title="${n}"`),i+=">",i}text(t){return t}}class ps{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,n,r){return""+r}image(t,n,r){return""+r}br(){return""}}class wn{options;renderer;textRenderer;constructor(t){this.options=t||rr,this.options.renderer=this.options.renderer||new ei,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new ps}static parse(t,n){return new wn(n).parse(t)}static parseInline(t,n){return new wn(n).parseInline(t)}parse(t,n=!0){let r="";for(let o=0;o<t.length;o++){const i=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=i,l=this.options.extensions.renderers[s.type].call({parser:this},s);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(s.type)){r+=l||"";continue}}switch(i.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{const s=i;r+=this.renderer.heading(this.parseInline(s.tokens),s.depth,hf(this.parseInline(s.tokens,this.textRenderer)));continue}case"code":{const s=i;r+=this.renderer.code(s.text,s.lang,!!s.escaped);continue}case"table":{const s=i;let l="",a="";for(let u=0;u<s.header.length;u++)a+=this.renderer.tablecell(this.parseInline(s.header[u].tokens),{header:!0,align:s.align[u]});l+=this.renderer.tablerow(a);let c="";for(let u=0;u<s.rows.length;u++){const h=s.rows[u];a="";for(let m=0;m<h.length;m++)a+=this.renderer.tablecell(this.parseInline(h[m].tokens),{header:!1,align:s.align[m]});c+=this.renderer.tablerow(a)}r+=this.renderer.table(l,c);continue}case"blockquote":{const s=i,l=this.parse(s.tokens);r+=this.renderer.blockquote(l);continue}case"list":{const s=i,l=s.ordered,a=s.start,c=s.loose;let u="";for(let h=0;h<s.items.length;h++){const m=s.items[h],p=m.checked,g=m.task;let w="";if(m.task){const v=this.renderer.checkbox(!!p);c?m.tokens.length>0&&m.tokens[0].type==="paragraph"?(m.tokens[0].text=v+" "+m.tokens[0].text,m.tokens[0].tokens&&m.tokens[0].tokens.length>0&&m.tokens[0].tokens[0].type==="text"&&(m.tokens[0].tokens[0].text=v+" "+m.tokens[0].tokens[0].text)):m.tokens.unshift({type:"text",text:v+" "}):w+=v+" "}w+=this.parse(m.tokens,c),u+=this.renderer.listitem(w,g,!!p)}r+=this.renderer.list(u,l,a);continue}case"html":{const s=i;r+=this.renderer.html(s.text,s.block);continue}case"paragraph":{const s=i;r+=this.renderer.paragraph(this.parseInline(s.tokens));continue}case"text":{let s=i,l=s.tokens?this.parseInline(s.tokens):s.text;for(;o+1<t.length&&t[o+1].type==="text";)s=t[++o],l+=`
`+(s.tokens?this.parseInline(s.tokens):s.text);r+=n?this.renderer.paragraph(l):l;continue}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}parseInline(t,n){n=n||this.renderer;let r="";for(let o=0;o<t.length;o++){const i=t[o];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const s=this.options.extensions.renderers[i.type].call({parser:this},i);if(s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){r+=s||"";continue}}switch(i.type){case"escape":{const s=i;r+=n.text(s.text);break}case"html":{const s=i;r+=n.html(s.text);break}case"link":{const s=i;r+=n.link(s.href,s.title,this.parseInline(s.tokens,n));break}case"image":{const s=i;r+=n.image(s.href,s.title,s.text);break}case"strong":{const s=i;r+=n.strong(this.parseInline(s.tokens,n));break}case"em":{const s=i;r+=n.em(this.parseInline(s.tokens,n));break}case"codespan":{const s=i;r+=n.codespan(s.text);break}case"br":{r+=n.br();break}case"del":{const s=i;r+=n.del(this.parseInline(s.tokens,n));break}case"text":{const s=i;r+=n.text(s.text);break}default:{const s='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(s),"";throw new Error(s)}}}return r}}class Uo{options;constructor(t){this.options=t||rr}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}class jf{defaults=ds();options=this.setOptions;parse=this.#e(pn.lex,wn.parse);parseInline=this.#e(pn.lexInline,wn.parseInline);Parser=wn;Renderer=ei;TextRenderer=ps;Lexer=pn;Tokenizer=Qo;Hooks=Uo;constructor(...t){this.use(...t)}walkTokens(t,n){let r=[];for(const o of t)switch(r=r.concat(n.call(this,o)),o.type){case"table":{const i=o;for(const s of i.header)r=r.concat(this.walkTokens(s.tokens,n));for(const s of i.rows)for(const l of s)r=r.concat(this.walkTokens(l.tokens,n));break}case"list":{const i=o;r=r.concat(this.walkTokens(i.items,n));break}default:{const i=o;this.defaults.extensions?.childTokens?.[i.type]?this.defaults.extensions.childTokens[i.type].forEach(s=>{r=r.concat(this.walkTokens(i[s],n))}):i.tokens&&(r=r.concat(this.walkTokens(i.tokens,n)))}}return r}use(...t){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{const o={...r};if(o.async=this.defaults.async||o.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=n.renderers[i.name];s?n.renderers[i.name]=function(...l){let a=i.renderer.apply(this,l);return a===!1&&(a=s.apply(this,l)),a}:n.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=n[i.level];s?s.unshift(i.tokenizer):n[i.level]=[i.tokenizer],i.start&&(i.level==="block"?n.startBlock?n.startBlock.push(i.start):n.startBlock=[i.start]:i.level==="inline"&&(n.startInline?n.startInline.push(i.start):n.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(n.childTokens[i.name]=i.childTokens)}),o.extensions=n),r.renderer){const i=this.defaults.renderer||new ei(this.defaults);for(const s in r.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(s==="options")continue;const l=s,a=r.renderer[l],c=i[l];i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h||""}}o.renderer=i}if(r.tokenizer){const i=this.defaults.tokenizer||new Qo(this.defaults);for(const s in r.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const l=s,a=r.tokenizer[l],c=i[l];i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}o.tokenizer=i}if(r.hooks){const i=this.defaults.hooks||new Uo;for(const s in r.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(s==="options")continue;const l=s,a=r.hooks[l],c=i[l];Uo.passThroughHooks.has(s)?i[l]=u=>{if(this.defaults.async)return Promise.resolve(a.call(i,u)).then(m=>c.call(i,m));const h=a.call(i,u);return c.call(i,h)}:i[l]=(...u)=>{let h=a.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}o.hooks=i}if(r.walkTokens){const i=this.defaults.walkTokens,s=r.walkTokens;o.walkTokens=function(l){let a=[];return a.push(s.call(this,l)),i&&(a=a.concat(i.call(this,l))),a}}this.defaults={...this.defaults,...o}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,n){return pn.lex(t,n??this.defaults)}parser(t,n){return wn.parse(t,n??this.defaults)}#e(t,n){return(r,o)=>{const i={...o},s={...this.defaults,...i};this.defaults.async===!0&&i.async===!1&&(s.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),s.async=!0);const l=this.#t(!!s.silent,!!s.async);if(typeof r>"u"||r===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(s.hooks&&(s.hooks.options=s),s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(a=>t(a,s)).then(a=>s.hooks?s.hooks.processAllTokens(a):a).then(a=>s.walkTokens?Promise.all(this.walkTokens(a,s.walkTokens)).then(()=>a):a).then(a=>n(a,s)).then(a=>s.hooks?s.hooks.postprocess(a):a).catch(l);try{s.hooks&&(r=s.hooks.preprocess(r));let a=t(r,s);s.hooks&&(a=s.hooks.processAllTokens(a)),s.walkTokens&&this.walkTokens(a,s.walkTokens);let c=n(a,s);return s.hooks&&(c=s.hooks.postprocess(c)),c}catch(a){return l(a)}}}#t(t,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const o="<p>An error occurred:</p><pre>"+jt(r.message+"",!0)+"</pre>";return n?Promise.resolve(o):o}if(n)return Promise.reject(r);throw r}}}const nr=new jf;function Ge(e,t){return nr.parse(e,t)}Ge.options=Ge.setOptions=function(e){return nr.setOptions(e),Ge.defaults=nr.defaults,la(Ge.defaults),Ge};Ge.getDefaults=ds;Ge.defaults=rr;Ge.use=function(...e){return nr.use(...e),Ge.defaults=nr.defaults,la(Ge.defaults),Ge};Ge.walkTokens=function(e,t){return nr.walkTokens(e,t)};Ge.parseInline=nr.parseInline;Ge.Parser=wn;Ge.parser=wn.parse;Ge.Renderer=ei;Ge.TextRenderer=ps;Ge.Lexer=pn;Ge.lexer=pn.lex;Ge.Tokenizer=Qo;Ge.Hooks=Uo;Ge.parse=Ge;Ge.options;Ge.setOptions;Ge.use;Ge.walkTokens;Ge.parseInline;wn.parse;pn.lex;const Vf=Ut("div")({name:"MarkdownContainer",class:"gdg-mnuv029",propsAsIs:!1});class Xf extends yt.PureComponent{targetElement=null;renderMarkdownIntoDiv(){const{targetElement:t,props:n}=this;if(t===null)return;const{contents:r,createNode:o}=n,i=Ge(r),s=document.createRange();s.selectNodeContents(t),s.deleteContents();let l=o?.(i);if(l===void 0){const c=document.createElement("template");c.innerHTML=i,l=c.content}t.append(l);const a=t.getElementsByTagName("a");for(const c of a)c.target="_blank",c.rel="noreferrer noopener"}containerRefHook=t=>{this.targetElement=t,this.renderMarkdownIntoDiv()};render(){return this.renderMarkdownIntoDiv(),yt.createElement(Vf,{ref:this.containerRefHook})}}const Yf=Ut("textarea")({name:"InputBox",class:"gdg-izpuzkl",propsAsIs:!1}),Uf=Ut("div")({name:"ShadowBox",class:"gdg-s69h75o",propsAsIs:!1}),Kf=Ut("div")({name:"GrowingEntryStyle",class:"gdg-g1y0xocz",propsAsIs:!1});let tl=0;const ci=e=>{const{placeholder:t,value:n,onKeyDown:r,highlight:o,altNewline:i,validatedSelection:s,...l}=e,{onChange:a,className:c}=l,u=d.useRef(null),h=n??"";Xt(a!==void 0,"GrowingEntry must be a controlled input area");const[m]=d.useState(()=>"input-box-"+(tl=(tl+1)%1e7));d.useEffect(()=>{const g=u.current;if(g===null||g.disabled)return;const w=h.toString().length;g.focus(),g.setSelectionRange(o?0:w,w)},[]),d.useLayoutEffect(()=>{if(s!==void 0){const g=typeof s=="number"?[s,null]:s;u.current?.setSelectionRange(g[0],g[1])}},[s]);const p=d.useCallback(g=>{g.key==="Enter"&&g.shiftKey&&i===!0||r?.(g)},[i,r]);return d.createElement(Kf,{className:"gdg-growing-entry"},d.createElement(Uf,{className:c},h+`
`),d.createElement(Yf,{...l,className:(c??"")+" gdg-input",id:m,ref:u,onKeyDown:p,value:h,placeholder:t,dir:"auto"}))},_i={};let An=null;function Gf(){const e=document.createElement("div");return e.style.opacity="0",e.style.pointerEvents="none",e.style.position="fixed",document.body.append(e),e}function Qi(e){const t=e.toLowerCase().trim();if(_i[t]!==void 0)return _i[t];An=An||Gf(),An.style.color="#000",An.style.color=t;const n=getComputedStyle(An).color;An.style.color="#fff",An.style.color=t;const r=getComputedStyle(An).color;if(r!==n)return[0,0,0,1];let o=r.replace(/[^\d.,]/g,"").split(",").map(Number.parseFloat);return o.length<4&&o.push(1),o=o.map(i=>Number.isNaN(i)?0:i),_i[t]=o,o}function zr(e,t){const[n,r,o]=Qi(e);return`rgba(${n}, ${r}, ${o}, ${t})`}function Yt(e,t){if(t===void 0)return e;const[n,r,o,i]=Qi(e);if(i===1)return e;const[s,l,a,c]=Qi(t),u=i+c*(1-i),h=(i*n+c*s*(1-i))/u,m=(i*r+c*l*(1-i))/u,p=(i*o+c*a*(1-i))/u;return`rgba(${h}, ${m}, ${p}, ${u})`}var Ir=new Map,Fr=new Map,Ji=new Map;function qf(){Ir.clear(),Ji.clear(),Fr.clear()}function Zf(e,t,n,r,o){var i,s,l;let a=0,c={};for(let h of e)a+=(i=n.get(h))!=null?i:o,c[h]=((s=c[h])!=null?s:0)+1;let u=t-a;for(let h of Object.keys(c)){let m=c[h],p=(l=n.get(h))!=null?l:o,g=p*m/a,w=u*g*r/m,v=p+w;n.set(h,v)}}function Qf(e,t){var n;let r=new Map,o=0;for(let c of"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890,.-+=?"){let u=e.measureText(c).width;r.set(c,u),o+=u}let i=o/r.size,s=3,l=(t/i+s)/(s+1),a=r.keys();for(let c of a)r.set(c,((n=r.get(c))!=null?n:i)*l);return r}function co(e,t,n,r){var o,i;let s=Fr.get(n);if(r&&s!==void 0&&s.count>2e4){let c=Ji.get(n);if(c===void 0&&(c=Qf(e,s.size),Ji.set(n,c)),s.count>5e5){let h=0;for(let m of t)h+=(o=c.get(m))!=null?o:s.size;return h*1.01}let u=e.measureText(t);return Zf(t,u.width,c,Math.max(.05,1-s.count/2e5),s.size),Fr.set(n,{count:s.count+t.length,size:s.size}),u.width}let l=e.measureText(t),a=l.width/t.length;if(((i=s?.count)!=null?i:0)>2e4)return l.width;if(s===void 0)Fr.set(n,{count:t.length,size:a});else{let c=a-s.size,u=t.length/(s.count+t.length),h=s.size+c*u;Fr.set(n,{count:s.count+t.length,size:h})}return l.width}function Jf(e,t,n,r,o,i,s,l){if(t.length<=1)return t.length;if(o<n)return-1;let a=Math.floor(n/o*i),c=co(e,t.slice(0,Math.max(0,a)),r,s);if(c!==n)if(c<n){for(;c<n;)a++,c=co(e,t.slice(0,Math.max(0,a)),r,s);a--}else for(;c>n;){let u=t.lastIndexOf(" ",a-1);u>0?a=u:a--,c=co(e,t.slice(0,Math.max(0,a)),r,s)}if(t[a]!==" "){let u=0;u=t.lastIndexOf(" ",a),u>0&&(a=u)}return a}function eh(e,t,n,r,o,i){let s=`${t}_${n}_${r}px`,l=Ir.get(s);if(l!==void 0)return l;if(r<=0)return[];let a=[],c=t.split(`
`),u=Fr.get(n),h=u===void 0?t.length:r/u.size*1.5,m=o&&u!==void 0&&u.count>2e4;for(let p of c){let g=co(e,p.slice(0,Math.max(0,h)),n,m),w=Math.min(p.length,h);if(g<=r)a.push(p);else{for(;g>r;){let v=Jf(e,p,r,n,g,w,m),x=p.slice(0,Math.max(0,v));p=p.slice(x.length),a.push(x),g=co(e,p.slice(0,Math.max(0,h)),n,m),w=Math.min(p.length,h)}g>0&&a.push(p)}}return a=a.map((p,g)=>g===0?p.trimEnd():p.trim()),Ir.set(s,a),Ir.size>500&&Ir.delete(Ir.keys().next().value),a}function th(e,t){return yt.useMemo(()=>e.map((n,r)=>({...n,sourceIndex:r,sticky:r<t})),[e,t])}function nh(e,t){const[n,r]=t;if(e.columns.hasIndex(n)||e.rows.hasIndex(r))return!0;if(e.current!==void 0){if(uo(e.current.cell,t))return!0;const o=[e.current.range,...e.current.rangeStack];for(const i of o)if(n>=i.x&&n<i.x+i.width&&r>=i.y&&r<i.y+i.height)return!0}return!1}function po(e,t){return(e??"")===(t??"")}function rh(e,t,n){return n.current===void 0||e[1]!==n.current.cell[1]?!1:t.span===void 0?n.current.cell[0]===e[0]:n.current.cell[0]>=t.span[0]&&n.current.cell[0]<=t.span[1]}function wa(e,t){const[n,r]=e;return n>=t.x&&n<t.x+t.width&&r>=t.y&&r<t.y+t.height}function uo(e,t){return e?.[0]===t?.[0]&&e?.[1]===t?.[1]}function ya(e){return[e.x+e.width-1,e.y+e.height-1]}function nl(e,t,n){const r=n.x,o=n.x+n.width-1,i=n.y,s=n.y+n.height-1,[l,a]=e;if(a<i||a>s)return!1;if(t.span===void 0)return l>=r&&l<=o;const[c,u]=t.span;return c>=r&&c<=o||u>=r&&c<=o||c<r&&u>o}function oh(e,t,n){let r=0;if(n.current===void 0)return r;nl(e,t,n.current.range)&&r++;for(const o of n.current.rangeStack)nl(e,t,o)&&r++;return r}function ba(e,t){let n=e;if(t!==void 0){let r=[...e];const o=n[t.src];t.src>t.dest?(r.splice(t.src,1),r.splice(t.dest,0,o)):(r.splice(t.dest+1,0,o),r.splice(t.src,1)),r=r.map((i,s)=>({...i,sticky:e[s].sticky})),n=r}return n}function Lr(e,t){let n=0;const r=ba(e,t);for(let o=0;o<r.length;o++){const i=r[o];if(i.sticky)n+=i.width;else break}return n}function Pr(e,t,n){if(typeof n=="number")return t*n;{let r=0;for(let o=e-t;o<e;o++)r+=n(o);return r}}function es(e,t,n,r,o){const i=ba(e,r),s=[];for(const c of i)if(c.sticky)s.push(c);else break;if(s.length>0)for(const c of s)n-=c.width;let l=t,a=o??0;for(;a<=n&&l<i.length;)a+=i[l].width,l++;for(let c=t;c<l;c++){const u=i[c];u.sticky||s.push(u)}return s}function ih(e,t,n){let r=0;for(const o of t){const i=o.sticky?r:r+(n??0);if(e<=i+o.width)return o.sourceIndex;r+=o.width}return-1}function sh(e,t,n,r,o,i,s,l,a,c){const u=r+o;if(n&&e<=o)return-2;if(e<=u)return-1;let h=t;for(let g=0;g<c;g++){const w=i-1-g,v=typeof s=="number"?s:s(w);if(h-=v,e>=h)return w}const m=i-c,p=e-(a??0);if(typeof s=="number"){const g=Math.floor((p-u)/s)+l;return g>=m?void 0:g}else{let g=u;for(let w=l;w<m;w++){const v=s(w);if(p<=g+v)return w;g+=v}return}}let Ko=0,fo={};const lh=typeof window>"u";async function ah(){lh||document?.fonts?.ready===void 0||(await document.fonts.ready,Ko=0,fo={},qf())}ah();function va(e,t,n,r){return`${e}_${r??t?.font}_${n}`}function di(e,t,n){const r=va(e,t,"middle",n);let o=fo[r];return o===void 0&&(o=t.measureText(e),fo[r]=o,Ko++),Ko>1e4&&(fo={},Ko=0),o}function ch(e,t){const n=va(e,void 0,"middle",t);return fo[n]}function On(e,t){return typeof t!="string"&&(t=t.baseFontFull),dh(e,t)}function rl(e,t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZ";e.save(),e.textBaseline=t;const r=e.measureText(n);return e.restore(),r}const ol=[];function dh(e,t){for(const i of ol)if(i.key===t)return i.val;const n=rl(e,"alphabetic"),o=-(rl(e,"middle").actualBoundingBoxDescent-n.actualBoundingBoxDescent)+n.actualBoundingBoxAscent/2;return ol.push({key:t,val:o}),o}function uh(e,t,n,r,o,i){const{ctx:s,rect:l,theme:a}=e;let c=Number.MAX_SAFE_INTEGER;const u=500;if(t!==void 0&&(c=n-t,c<u)){const h=1-c/u;s.globalAlpha=h,s.fillStyle=a.bgSearchResult,s.fillRect(l.x+1,l.y+1,l.width-(o?2:1),l.height-(i?2:1)),s.globalAlpha=1,r!==void 0&&(r.fillStyle=a.bgSearchResult)}return c<u}function bo(e,t,n){const{ctx:r,theme:o}=e,i=t??{},s=n??o.textDark;return s!==i.fillStyle&&(r.fillStyle=s,i.fillStyle=s),i}function xa(e,t,n,r,o,i,s,l,a){a==="right"?e.fillText(t,n+o-(l.cellHorizontalPadding+.5),r+i/2+s):a==="center"?e.fillText(t,n+o/2,r+i/2+s):e.fillText(t,n+l.cellHorizontalPadding+.5,r+i/2+s)}function ka(e,t){const n=di("ABCi09jgqpy",e,t);return n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}function fh(e,t){e.includes(`
`)&&(e=e.split(/\r?\n/,1)[0]);const n=t/4;return e.length>n&&(e=e.slice(0,n)),e}function hh(e,t,n,r,o,i,s,l,a,c){const u=l.baseFontFull,h=eh(e,t,u,o-l.cellHorizontalPadding*2,c??!1),m=ka(e,u),p=l.lineHeight*m,g=m+p*(h.length-1),w=g+l.cellVerticalPadding>i;w&&(e.save(),e.rect(n,r,o,i),e.clip());const v=r+i/2-g/2;let x=Math.max(r+l.cellVerticalPadding,v);for(const y of h)if(xa(e,y,n,x,o,m,s,l,a),x+=p,x>r+i)break;w&&e.restore()}function kn(e,t,n,r,o){const{ctx:i,rect:s,theme:l}=e,{x:a,y:c,width:u,height:h}=s;r=r??!1,r||(t=fh(t,u));const m=On(i,l),p=cs(t)==="rtl";if(n===void 0&&p&&(n="right"),p&&(i.direction="rtl"),t.length>0){let g=!1;n==="right"?(i.textAlign="right",g=!0):n!==void 0&&n!=="left"&&(i.textAlign=n,g=!0),r?hh(i,t,a,c,u,h,m,l,n,o):xa(i,t,a,c,u,h,m,l,n),g&&(i.textAlign="start"),p&&(i.direction="inherit")}}function Sn(e,t,n,r,o,i){typeof i=="number"&&(i={tl:i,tr:i,br:i,bl:i}),i={tl:Math.max(0,Math.min(i.tl,o/2,r/2)),tr:Math.max(0,Math.min(i.tr,o/2,r/2)),bl:Math.max(0,Math.min(i.bl,o/2,r/2)),br:Math.max(0,Math.min(i.br,o/2,r/2))},e.moveTo(t+i.tl,n),e.arcTo(t+r,n,t+r,n+i.tr,i.tr),e.arcTo(t+r,n+o,t+r-i.br,n+o,i.br),e.arcTo(t,n+o,t,n+o-i.bl,i.bl),e.arcTo(t,n,t+i.tl,n,i.tl)}function gh(e,t,n){e.arc(t,n-1.25*3.5,1.25,0,2*Math.PI,!1),e.arc(t,n,1.25,0,2*Math.PI,!1),e.arc(t,n+1.25*3.5,1.25,0,2*Math.PI,!1)}function mh(e,t,n){const r=function(l,a){const c=a.x-l.x,u=a.y-l.y,h=Math.sqrt(c*c+u*u),m=c/h,p=u/h;return{x:c,y:a.y-l.y,len:h,nx:m,ny:p,ang:Math.atan2(p,m)}};let o;const i=t.length;let s=t[i-1];for(let l=0;l<i;l++){let a=t[l%i];const c=t[(l+1)%i],u=r(a,s),h=r(a,c),m=u.nx*h.ny-u.ny*h.nx,p=u.nx*h.nx-u.ny*-h.ny;let g=Math.asin(m<-1?-1:m>1?1:m),w=1,v=!1;p<0?g<0?g=Math.PI+g:(g=Math.PI-g,w=-1,v=!0):g>0&&(w=-1,v=!0),o=a.radius!==void 0?a.radius:n;const x=g/2;let y=Math.abs(Math.cos(x)*o/Math.sin(x)),E;y>Math.min(u.len/2,h.len/2)?(y=Math.min(u.len/2,h.len/2),E=Math.abs(y*Math.sin(x)/Math.cos(x))):E=o;let M=a.x+h.nx*y,b=a.y+h.ny*y;M+=-h.ny*E*w,b+=h.nx*E*w,e.arc(M,b,E,u.ang+Math.PI/2*w,h.ang-Math.PI/2*w,v),s=a,a=c}e.closePath()}function ts(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g){const w={x:0,y:i+c,width:0,height:0};if(e>=p.length||t>=u||t<-2||e<0)return w;const v=i-o;if(e>=h){const x=s>e?-1:1,y=Lr(p);w.x+=y+a;for(let E=s;E!==e;E+=x)w.x+=p[x===1?E:E-1].width*x}else for(let x=0;x<e;x++)w.x+=p[x].width;if(w.width=p[e].width+1,t===-1)w.y=o,w.height=v;else if(t===-2){w.y=0,w.height=o;let x=e;const y=p[e].group,E=p[e].sticky;for(;x>0&&po(p[x-1].group,y)&&p[x-1].sticky===E;){const b=p[x-1];w.x-=b.width,w.width+=b.width,x--}let M=e;for(;M+1<p.length&&po(p[M+1].group,y)&&p[M+1].sticky===E;){const b=p[M+1];w.width+=b.width,M++}if(!E){const b=Lr(p),P=w.x-b;P<0&&(w.x-=P,w.width+=P),w.x+w.width>n&&(w.width=n-w.x)}}else if(t>=u-m){let x=u-t;for(w.y=r;x>0;){const y=t+x-1;w.height=typeof g=="number"?g:g(y),w.y-=w.height,x--}w.height+=1}else{const x=l>t?-1:1;if(typeof g=="number"){const y=t-l;w.y+=y*g}else for(let y=l;y!==t;y+=x)w.y+=g(y)*x;w.height=(typeof g=="number"?g:g(t))+1}return w}const ws=1<<21;function ln(e,t){return(t+2)*ws+e}function Ca(e){return e%ws}function ys(e){return Math.floor(e/ws)-2}function bs(e){const t=Ca(e),n=ys(e);return[t,n]}class Sa{visibleWindow={x:0,y:0,width:0,height:0};freezeCols=0;freezeRows=[];isInWindow=t=>{const n=Ca(t),r=ys(t),o=this.visibleWindow,i=n>=o.x&&n<=o.x+o.width||n<this.freezeCols,s=r>=o.y&&r<=o.y+o.height||this.freezeRows.includes(r);return i&&s};setWindow(t,n,r){this.visibleWindow.x===t.x&&this.visibleWindow.y===t.y&&this.visibleWindow.width===t.width&&this.visibleWindow.height===t.height&&this.freezeCols===n&&Ar(this.freezeRows,r)||(this.visibleWindow=t,this.freezeCols=n,this.freezeRows=r,this.clearOutOfWindow())}}class ph extends Sa{cache=new Map;setValue=(t,n)=>{this.cache.set(ln(t[0],t[1]),n)};getValue=t=>this.cache.get(ln(t[0],t[1]));clearOutOfWindow=()=>{for(const[t]of this.cache.entries())this.isInWindow(t)||this.cache.delete(t)}}class ho{cells;constructor(t=[]){this.cells=new Set(t.map(n=>ln(n[0],n[1])))}add(t){this.cells.add(ln(t[0],t[1]))}has(t){return t===void 0?!1:this.cells.has(ln(t[0],t[1]))}remove(t){this.cells.delete(ln(t[0],t[1]))}clear(){this.cells.clear()}get size(){return this.cells.size}hasHeader(){for(const t of this.cells)if(ys(t)<0)return!0;return!1}hasItemInRectangle(t){for(let n=t.y;n<t.y+t.height;n++)for(let r=t.x;r<t.x+t.width;r++)if(this.cells.has(ln(r,n)))return!0;return!1}hasItemInRegion(t){for(const n of t)if(this.hasItemInRectangle(n))return!0;return!1}*values(){for(const t of this.cells)yield bs(t)}}function wh(e){return{"--gdg-accent-color":e.accentColor,"--gdg-accent-fg":e.accentFg,"--gdg-accent-light":e.accentLight,"--gdg-text-dark":e.textDark,"--gdg-text-medium":e.textMedium,"--gdg-text-light":e.textLight,"--gdg-text-bubble":e.textBubble,"--gdg-bg-icon-header":e.bgIconHeader,"--gdg-fg-icon-header":e.fgIconHeader,"--gdg-text-header":e.textHeader,"--gdg-text-group-header":e.textGroupHeader??e.textHeader,"--gdg-text-header-selected":e.textHeaderSelected,"--gdg-bg-cell":e.bgCell,"--gdg-bg-cell-medium":e.bgCellMedium,"--gdg-bg-header":e.bgHeader,"--gdg-bg-header-has-focus":e.bgHeaderHasFocus,"--gdg-bg-header-hovered":e.bgHeaderHovered,"--gdg-bg-bubble":e.bgBubble,"--gdg-bg-bubble-selected":e.bgBubbleSelected,"--gdg-bg-search-result":e.bgSearchResult,"--gdg-border-color":e.borderColor,"--gdg-horizontal-border-color":e.horizontalBorderColor??e.borderColor,"--gdg-drilldown-border":e.drilldownBorder,"--gdg-link-color":e.linkColor,"--gdg-cell-horizontal-padding":`${e.cellHorizontalPadding}px`,"--gdg-cell-vertical-padding":`${e.cellVerticalPadding}px`,"--gdg-header-font-style":e.headerFontStyle,"--gdg-base-font-style":e.baseFontStyle,"--gdg-marker-font-style":e.markerFontStyle,"--gdg-font-family":e.fontFamily,"--gdg-editor-font-size":e.editorFontSize,...e.roundingRadius===void 0?{}:{"--gdg-rounding-radius":`${e.roundingRadius}px`}}}const Ma={accentColor:"#4F5DFF",accentFg:"#FFFFFF",accentLight:"rgba(62, 116, 253, 0.1)",textDark:"#313139",textMedium:"#737383",textLight:"#B2B2C0",textBubble:"#313139",bgIconHeader:"#737383",fgIconHeader:"#FFFFFF",textHeader:"#313139",textGroupHeader:"#313139BB",textHeaderSelected:"#FFFFFF",bgCell:"#FFFFFF",bgCellMedium:"#FAFAFB",bgHeader:"#F7F7F8",bgHeaderHasFocus:"#E9E9EB",bgHeaderHovered:"#EFEFF1",bgBubble:"#EDEDF3",bgBubbleSelected:"#FFFFFF",bgSearchResult:"#fff9e3",borderColor:"rgba(115, 116, 131, 0.16)",drilldownBorder:"rgba(0, 0, 0, 0)",linkColor:"#4F5DFF",cellHorizontalPadding:8,cellVerticalPadding:3,headerIconSize:18,headerFontStyle:"600 13px",baseFontStyle:"13px",markerFontStyle:"9px",fontFamily:"Inter, Roboto, -apple-system, BlinkMacSystemFont, avenir next, avenir, segoe ui, helvetica neue, helvetica, Ubuntu, noto, arial, sans-serif",editorFontSize:"13px",lineHeight:1.4};function Ra(){return Ma}const yh=yt.createContext(Ma);function Nn(e,...t){const n={...e};for(const r of t)if(r!==void 0)for(const o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);return(n.headerFontFull===void 0||e.fontFamily!==n.fontFamily||e.headerFontStyle!==n.headerFontStyle)&&(n.headerFontFull=`${n.headerFontStyle} ${n.fontFamily}`),(n.baseFontFull===void 0||e.fontFamily!==n.fontFamily||e.baseFontStyle!==n.baseFontStyle)&&(n.baseFontFull=`${n.baseFontStyle} ${n.fontFamily}`),(n.markerFontFull===void 0||e.fontFamily!==n.fontFamily||e.markerFontStyle!==n.markerFontStyle)&&(n.markerFontFull=`${n.markerFontStyle} ${n.fontFamily}`),n}const ns=150;function bh(e,t,n,r){return r(t)?.measure?.(e,t,n)??ns}function Ea(e,t,n,r,o,i,s,l,a){let c=0;const u=o===void 0?[]:o.map(m=>{const p=bh(e,m[r],t,a);return c=Math.max(c,p),p});if(u.length>5&&l){c=0;let m=0;for(const g of u)m+=g;const p=m/u.length;for(let g=0;g<u.length;g++)u[g]>=p*2?u[g]=0:c=Math.max(c,u[g])}c=Math.max(c,e.measureText(n.title).width+16+(n.icon===void 0?0:28));const h=Math.max(Math.ceil(i),Math.min(Math.floor(s),Math.ceil(c)));return{...n,width:h}}function vh(e,t,n,r,o,i,s,l,a){const c=d.useRef(t),u=d.useRef(n),h=d.useRef(s);c.current=t,u.current=n,h.current=s;const[m,p]=d.useMemo(()=>{if(typeof window>"u")return[null,null];const y=document.createElement("canvas");return y.style.display="none",y.style.opacity="0",y.style.position="fixed",[y,y.getContext("2d",{alpha:!1})]},[]);d.useLayoutEffect(()=>(m&&document.documentElement.append(m),()=>{m?.remove()}),[m]);const g=d.useRef({}),w=d.useRef(),[v,x]=d.useState();return d.useLayoutEffect(()=>{const y=u.current;if(y===void 0||e.every(Bo))return;let E=Math.max(1,10-Math.floor(e.length/1e4)),M=0;E<c.current&&E>1&&(E--,M=1);const b={x:0,y:0,width:e.length,height:Math.min(c.current,E)},P={x:0,y:c.current-1,width:e.length,height:1};(async()=>{const j=y(b,a.signal),I=M>0?y(P,a.signal):void 0;let B;typeof j=="object"?B=j:B=await Ys(j),I!==void 0&&(typeof I=="object"?B=[...B,...I]:B=[...B,...await Ys(I)]),w.current=e,x(B)})()},[a.signal,e]),d.useMemo(()=>{let E=e.every(Bo)?e:p===null?e.map(F=>Bo(F)?F:{...F,width:ns}):(p.font=h.current.baseFontFull,e.map((F,j)=>{if(Bo(F))return F;if(g.current[F.id]!==void 0)return{...F,width:g.current[F.id]};if(v===void 0||w.current!==e||F.id===void 0)return{...F,width:ns};const I=Ea(p,s,F,j,v,o,i,!0,l);return g.current[F.id]=I.width,I})),M=0,b=0;const P=[];for(const[F,j]of E.entries())M+=j.width,j.grow!==void 0&&j.grow>0&&(b+=j.grow,P.push(F));if(M<r&&P.length>0){const F=[...E],j=r-M;let I=j;for(let B=0;B<P.length;B++){const W=P[B],D=(E[W].grow??0)/b,H=B===P.length-1?I:Math.min(I,Math.floor(j*D));F[W]={...E[W],growOffset:H,width:E[W].width+H},I-=H}E=F}return{sizedColumns:E,nonGrowWidth:M}},[r,e,p,v,s,o,i,l])}var xh=vd;function kh(e){return e&&e.length?xh(e):[]}var Ch=kh;const Sh=ii(Ch);var Mh=xd;function Rh(e){var t=e==null?0:e.length;return t?Mh(e,1):[]}var Eh=Rh;const il=ii(Eh);var Th=Math.ceil,Ih=Math.max;function Dh(e,t,n,r){for(var o=-1,i=Ih(Th((t-e)/(n||1)),0),s=Array(i);i--;)s[r?i:++o]=e,e+=n;return s}var Fh=Dh,Hh=Fh,Ah=kd,Ni=Cd;function zh(e){return function(t,n,r){return r&&typeof r!="number"&&Ah(t,n,r)&&(n=r=void 0),t=Ni(t),n===void 0?(n=t,t=0):n=Ni(n),r=r===void 0?t<n?1:-1:Ni(r),Hh(t,n,r,e)}}var Lh=zh,Ph=Lh,$h=Ph(),_h=$h;const er=ii(_h),rt='<svg width="20" height="20" fill="none" xmlns="http://www.w3.org/2000/svg">',Nh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}<rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/><path d="M15.75 4h-1.5a.25.25 0 0 0-.177.074L9.308 8.838a3.75 3.75 0 1 0 1.854 1.854l1.155-1.157.967.322a.5.5 0 0 0 .65-.55l-.18-1.208.363-.363.727.331a.5.5 0 0 0 .69-.59l-.254-.904.647-.647A.25.25 0 0 0 16 5.75v-1.5a.25.25 0 0 0-.25-.25zM7.5 13.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0z" fill="${t}"/></svg>`},Oh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}<rect x="2" y="2" width="16" height="16" rx="4" fill="${n}"/><path d="m12.223 13.314 3.052-2.826a.65.65 0 0 0 0-.984l-3.052-2.822c-.27-.25-.634-.242-.865.022-.232.263-.206.636.056.882l2.601 2.41-2.601 2.41c-.262.245-.288.619-.056.882.231.263.595.277.865.026Zm-4.444.005c.266.25.634.241.866-.027.231-.263.206-.636-.06-.882L5.983 10l2.602-2.405c.266-.25.291-.62.06-.887-.232-.263-.596-.272-.866-.022L4.723 9.51a.653.653 0 0 0 0 .983l3.056 2.827Z" fill="${t}"/></svg>`},Bh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M6.52 12.78H5.51V8.74l-1.33.47v-.87l2.29-.83h.05v5.27zm5.2 0H8.15v-.69l1.7-1.83a6.38 6.38 0 0 0 .34-.4c.09-.11.16-.22.22-.32s.1-.19.12-.27a.9.9 0 0 0 0-.56.63.63 0 0 0-.15-.23.58.58 0 0 0-.22-.15.75.75 0 0 0-.29-.05c-.27 0-.48.08-.62.23a.95.95 0 0 0-.2.65H8.03c0-.24.04-.46.13-.67a1.67 1.67 0 0 1 .97-.91c.23-.1.49-.14.77-.14.26 0 .5.04.7.11.21.08.38.18.52.32.14.13.25.3.32.48a1.74 1.74 0 0 1 .03 1.13 2.05 2.05 0 0 1-.24.47 4.16 4.16 0 0 1-.35.47l-.47.5-1 1.05h2.32v.8zm1.8-3.08h.55c.28 0 .48-.06.61-.2a.76.76 0 0 0 .2-.55.8.8 0 0 0-.05-.28.56.56 0 0 0-.13-.22.6.6 0 0 0-.23-.15.93.93 0 0 0-.32-.05.92.92 0 0 0-.29.05.72.72 0 0 0-.23.12.57.57 0 0 0-.21.46H12.4a1.3 1.3 0 0 1 .5-1.04c.15-.13.33-.23.54-.3a2.48 2.48 0 0 1 1.4 0c.2.06.4.15.55.28.15.13.27.28.36.47.08.19.13.4.13.65a1.15 1.15 0 0 1-.2.65 1.36 1.36 0 0 1-.58.49c.15.05.28.12.38.2a1.14 1.14 0 0 1 .43.62c.03.13.05.26.05.4 0 .25-.05.47-.14.66a1.42 1.42 0 0 1-.4.49c-.16.13-.35.23-.58.3a2.51 2.51 0 0 1-.73.1c-.22 0-.44-.03-.65-.09a1.8 1.8 0 0 1-.57-.28 1.43 1.43 0 0 1-.4-.47 1.41 1.41 0 0 1-.15-.66h1a.66.66 0 0 0 .22.5.87.87 0 0 0 .58.2c.25 0 .45-.07.6-.2a.71.71 0 0 0 .21-.56.97.97 0 0 0-.06-.36.61.61 0 0 0-.18-.25.74.74 0 0 0-.28-.15 1.33 1.33 0 0 0-.37-.04h-.55V9.7z" fill="${t}"/>
  </svg>`},Wh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M8.182 12.4h3.636l.655 1.6H14l-3.454-8H9.455L6 14h1.527l.655-1.6zM10 7.44l1.36 3.651H8.64L10 7.441z" fill="${t}"/>
</svg>`},jh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
    <path
        d="M16.2222 2H3.77778C2.8 2 2 2.8 2 3.77778V16.2222C2 17.2 2.8 18 3.77778 18H16.2222C17.2 18 17.9911 17.2 17.9911 16.2222L18 3.77778C18 2.8 17.2 2 16.2222 2Z"
        fill="${n}"
    />
    <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M7.66667 6.66669C5.73368 6.66669 4.16667 8.15907 4.16667 10C4.16667 11.841 5.73368 13.3334 7.66667 13.3334H12.3333C14.2663 13.3334 15.8333 11.841 15.8333 10C15.8333 8.15907 14.2663 6.66669 12.3333 6.66669H7.66667ZM12.5 12.5C13.8807 12.5 15 11.3807 15 10C15 8.61931 13.8807 7.50002 12.5 7.50002C11.1193 7.50002 10 8.61931 10 10C10 11.3807 11.1193 12.5 12.5 12.5Z"
        fill="${t}"
    />
</svg>`},Ta=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
<path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M10.29 4.947a3.368 3.368 0 014.723.04 3.375 3.375 0 01.041 4.729l-.009.009-1.596 1.597a3.367 3.367 0 01-5.081-.364.71.71 0 011.136-.85 1.95 1.95 0 002.942.21l1.591-1.593a1.954 1.954 0 00-.027-2.733 1.95 1.95 0 00-2.732-.027l-.91.907a.709.709 0 11-1.001-1.007l.915-.911.007-.007z" fill="${t}"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M6.55 8.678a3.368 3.368 0 015.082.364.71.71 0 01-1.136.85 1.95 1.95 0 00-2.942-.21l-1.591 1.593a1.954 1.954 0 00.027 2.733 1.95 1.95 0 002.73.028l.906-.906a.709.709 0 111.003 1.004l-.91.91-.008.01a3.368 3.368 0 01-4.724-.042 3.375 3.375 0 01-.041-4.728l.009-.009L6.55 8.678z" fill="${t}"/>
</svg>
  `},Vh=e=>{const t=e.bgColor;return`${rt}
    <path stroke="${t}" stroke-width="2" d="M12 3v14"/>
    <path stroke="${t}" stroke-width="2" stroke-linecap="round" d="M10 4h4m-4 12h4"/>
    <path d="M11 14h4a3 3 0 0 0 3-3V9a3 3 0 0 0-3-3h-4v2h4a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-4v2ZM9.5 8H5a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h4.5v2H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h4.5v2Z" fill="${t}"/>
  </svg>
`},Xh=Ta,Yh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7 13.138a.5.5 0 00.748.434l5.492-3.138a.5.5 0 000-.868L7.748 6.427A.5.5 0 007 6.862v6.276z" fill="${t}"/>
</svg>`},Uh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path d="M10 5a5 5 0 1 0 0 10 5 5 0 0 0 0-10zm0 9.17A4.17 4.17 0 0 1 5.83 10 4.17 4.17 0 0 1 10 5.83 4.17 4.17 0 0 1 14.17 10 4.17 4.17 0 0 1 10 14.17z" fill="${t}"/>
    <path d="M8.33 8.21a.83.83 0 1 0-.03 1.67.83.83 0 0 0 .03-1.67zm3.34 0a.83.83 0 1 0-.04 1.67.83.83 0 0 0 .04-1.67z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M14.53 13.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 1 0 0 12 6 6 0 0 0 0-12zm0 11a5 5 0 1 1 .01-10.01A5 5 0 0 1 10 15z" fill="${t}"/>
    <path d="M8 7.86a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2zm4 0a1 1 0 1 0-.04 2 1 1 0 0 0 .04-2z" fill="${t}"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M12.53 11.9a2.82 2.82 0 0 1-5.06 0l.77-.38a1.97 1.97 0 0 0 3.52 0l.77.39z" fill="${t}"/>
  </svg>`},Kh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path opacity=".5" fill-rule="evenodd" clip-rule="evenodd" d="M12.499 10.801a.5.5 0 01.835 0l2.698 4.098a.5.5 0 01-.418.775H10.22a.5.5 0 01-.417-.775l2.697-4.098z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.07 8.934a.5.5 0 01.824 0l4.08 5.958a.5.5 0 01-.412.782h-8.16a.5.5 0 01-.413-.782l4.08-5.958zM13.75 8.333a2.083 2.083 0 100-4.166 2.083 2.083 0 000 4.166z" fill="${t}"/>
</svg>`},Gh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path fill="${t}" d="M3 3h14v14H3z"/>
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2zm-7.24 9.78h1.23c.15 0 .27.06.36.18l.98 1.28a.43.43 0 0 1-.05.58l-1.2 1.21a.45.45 0 0 1-.6.04A6.72 6.72 0 0 1 7.33 10c0-.61.1-1.2.25-1.78a6.68 6.68 0 0 1 2.12-3.3.44.44 0 0 1 .6.04l1.2 1.2c.16.17.18.42.05.59l-.98 1.29a.43.43 0 0 1-.36.17H8.98A5.38 5.38 0 0 0 8.67 10c0 .62.11 1.23.3 1.79z" fill="${n}"/>
  </svg>`},qh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="m13.49 13.15-2.32-3.27h1.4V7h1.86v2.88h1.4l-2.34 3.27zM11 13H9v-3l-1.5 1.92L6 10v3H4V7h2l1.5 2L9 7h2v6z" fill="${t}"/>
  </svg>`},Zh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M14.8 4.182h-.6V3H13v1.182H7V3H5.8v1.182h-.6c-.66 0-1.2.532-1.2 1.182v9.454C4 15.468 4.54 16 5.2 16h9.6c.66 0 1.2-.532 1.2-1.182V5.364c0-.65-.54-1.182-1.2-1.182zm0 10.636H5.2V7.136h9.6v7.682z" fill="${t}"/>
</svg>`},Qh=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 4a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6zm0 10.8A4.8 4.8 0 0 1 5.2 10a4.8 4.8 0 1 1 4.8 4.8z" fill="${t}"/>
    <path d="M10 7H9v3.93L12.5 13l.5-.8-3-1.76V7z" fill="${t}"/>
  </svg>`},Jh=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10 8.643a1.357 1.357 0 100 2.714 1.357 1.357 0 000-2.714zM7.357 10a2.643 2.643 0 115.286 0 2.643 2.643 0 01-5.286 0z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.589 4.898A5.643 5.643 0 0115.643 10v.5a2.143 2.143 0 01-4.286 0V8a.643.643 0 011.286 0v2.5a.857.857 0 001.714 0V10a4.357 4.357 0 10-1.708 3.46.643.643 0 01.782 1.02 5.643 5.643 0 11-5.842-9.582z" fill="${t}"/>
</svg>`},eg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <rect x="2" y="8" width="10" height="8" rx="2" fill="${n}"/>
    <rect x="8" y="4" width="10" height="8" rx="2" fill="${n}"/>
    <path d="M10.68 7.73V6l2.97 3.02-2.97 3.02v-1.77c-2.13 0-3.62.7-4.68 2.2.43-2.15 1.7-4.31 4.68-4.74z" fill="${t}"/>
  </svg>`},tg=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path fill="${t}" d="M4 3h12v14H4z"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M3.6 2A1.6 1.6 0 002 3.6v12.8A1.6 1.6 0 003.6 18h12.8a1.6 1.6 0 001.6-1.6V3.6A1.6 1.6 0 0016.4 2H3.6zm11.3 10.8a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7h-1.4a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.6-.693.117.117 0 00.1-.115V10.35a.117.117 0 00-.117-.116h-2.8a.117.117 0 00-.117.116v2.333c0 .064.053.117.117.117h.117a.7.7 0 01.7.7v1.4a.7.7 0 01-.7.7H9.3a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.117a.117.117 0 00.117-.117V10.35a.117.117 0 00-.117-.117h-2.8a.117.117 0 00-.117.117v2.342c0 .058.042.106.1.115a.7.7 0 01.6.693v1.4a.7.7 0 01-.7.7H5.1a.7.7 0 01-.7-.7v-1.4a.7.7 0 01.7-.7h.35a.116.116 0 00.116-.117v-2.45c0-.515.418-.933.934-.933h2.917a.117.117 0 00.117-.117V6.85a.117.117 0 00-.117-.116h-2.45a.7.7 0 01-.7-.7V5.1a.7.7 0 01.7-.7h6.067a.7.7 0 01.7.7v.934a.7.7 0 01-.7.7h-2.45a.117.117 0 00-.118.116v2.333c0 .064.053.117.117.117H13.5c.516 0 .934.418.934.934v2.45c0 .063.052.116.116.116h.35z" fill="${n}"/>
</svg>`},ng=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M9.98 13.33c.45 0 .74-.3.73-.75l-.01-.1-.16-1.67 1.45 1.05a.81.81 0 0 0 .5.18c.37 0 .72-.32.72-.76 0-.3-.17-.54-.49-.68l-1.63-.77 1.63-.77c.32-.14.49-.37.49-.67 0-.45-.34-.76-.71-.76a.81.81 0 0 0-.5.18l-1.47 1.03.16-1.74.01-.08c.01-.46-.27-.76-.72-.76-.46 0-.76.32-.75.76l.01.08.16 1.74-1.47-1.03a.77.77 0 0 0-.5-.18.74.74 0 0 0-.72.76c0 .3.17.53.49.67l1.63.77-1.62.77c-.32.14-.5.37-.5.68 0 .44.35.75.72.75a.78.78 0 0 0 .5-.17L9.4 10.8l-.16 1.68v.09c-.02.44.28.75.74.75z" fill="${t}"/>
  </svg>`},rg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M8 5.83H5.83a.83.83 0 0 0 0 1.67h1.69A4.55 4.55 0 0 1 8 5.83zm-.33 3.34H5.83a.83.83 0 0 0 0 1.66h2.72a4.57 4.57 0 0 1-.88-1.66zM5.83 12.5a.83.83 0 0 0 0 1.67h7.5a.83.83 0 1 0 0-1.67h-7.5zm8.8-2.9a3.02 3.02 0 0 0 .46-1.6c0-1.66-1.32-3-2.94-3C10.52 5 9.2 6.34 9.2 8s1.31 3 2.93 3c.58 0 1.11-.17 1.56-.47l2.04 2.08.93-.94-2.04-2.08zm-2.48.07c-.9 0-1.63-.75-1.63-1.67s.73-1.67 1.63-1.67c.9 0 1.63.75 1.63 1.67s-.73 1.67-1.63 1.67z" fill="${t}"/>
  </svg>`},og=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M7.676 4.726V3l2.976 3.021-2.976 3.022v-1.77c-2.125 0-3.613.69-4.676 2.201.425-2.158 1.7-4.316 4.676-4.748zM10.182 14.4h3.636l.655 1.6H16l-3.454-8h-1.091L8 16h1.527l.655-1.6zM12 9.44l1.36 3.65h-2.72L12 9.44z" fill="${t}"/>
</svg>`},ig=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.167 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666H4.167z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M7.083 4.167a.833.833 0 10-1.666 0v4.166a.833.833 0 101.666 0V4.167zM11.667 5.417a.833.833 0 100 1.666h4.166a.833.833 0 100-1.666h-4.166zM5.367 11.688a.833.833 0 00-1.179 1.179l2.947 2.946a.833.833 0 001.178-1.178l-2.946-2.947z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M8.313 12.867a.833.833 0 10-1.178-1.179l-2.947 2.947a.833.833 0 101.179 1.178l2.946-2.946z" fill="${t}"/>
  <path d="M10.833 12.5c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833zM10.833 15c0-.46.373-.833.834-.833h4.166a.833.833 0 110 1.666h-4.166a.833.833 0 01-.834-.833z" fill="${t}"/>
</svg>`},sg=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <path d="M16.22 2H3.78C2.8 2 2 2.8 2 3.78v12.44C2 17.2 2.8 18 3.78 18h12.44c.98 0 1.77-.8 1.77-1.78L18 3.78C18 2.8 17.2 2 16.22 2z" fill="${n}"/>
    <path d="M10 8.84a1.16 1.16 0 1 0 0 2.32 1.16 1.16 0 0 0 0-2.32zm3.02 3.61a3.92 3.92 0 0 0 .78-3.28.49.49 0 1 0-.95.2c.19.87-.02 1.78-.58 2.47a2.92 2.92 0 1 1-4.13-4.08 2.94 2.94 0 0 1 2.43-.62.49.49 0 1 0 .17-.96 3.89 3.89 0 1 0 2.28 6.27zM10 4.17a5.84 5.84 0 0 0-5.44 7.93.49.49 0 1 0 .9-.35 4.86 4.86 0 1 1 2.5 2.67.49.49 0 1 0-.4.88c.76.35 1.6.54 2.44.53a5.83 5.83 0 0 0 0-11.66zm3.02 3.5a.7.7 0 1 0-1.4 0 .7.7 0 0 0 1.4 0zm-6.97 5.35a.7.7 0 1 1 0 1.4.7.7 0 0 1 0-1.4z" fill="${t}"/>
  </svg>`},lg=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path d="M12.4 13.565c1.865-.545 3.645-2.083 3.645-4.396 0-1.514-.787-2.604-2.071-2.604C12.69 6.565 12 7.63 12 8.939c1.114.072 1.865.726 1.865 1.683 0 .933-.8 1.647-1.84 2.023l.375.92zM4 5h6v2H4zM4 9h5v2H4zM4 13h4v2H4z" fill="${t}"/>
</svg>`},ag=e=>{const t=e.fgColor,n=e.bgColor;return`
    ${rt}
    <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
    <path d="M12.4 13.56c1.86-.54 3.65-2.08 3.65-4.4 0-1.5-.8-2.6-2.08-2.6S12 7.64 12 8.95c1.11.07 1.86.73 1.86 1.68 0 .94-.8 1.65-1.83 2.03l.37.91zM4 5h6v2H4zm0 4h5v2H4zm0 4h4v2H4z" fill="${t}"/>
  </svg>`},cg=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <path d="M16.222 2H3.778C2.8 2 2 2.8 2 3.778v12.444C2 17.2 2.8 18 3.778 18h12.444c.978 0 1.77-.8 1.77-1.778L18 3.778C18 2.8 17.2 2 16.222 2z" fill="${n}"/>
  <path d="M10 7a1 1 0 100-2v2zm0 6a1 1 0 100 2v-2zm0-8H7v2h3V5zm-3 6h5V9H7v2zm5 2h-2v2h2v-2zm1-1a1 1 0 01-1 1v2a3 3 0 003-3h-2zm-1-1a1 1 0 011 1h2a3 3 0 00-3-3v2zM4 8a3 3 0 003 3V9a1 1 0 01-1-1H4zm3-3a3 3 0 00-3 3h2a1 1 0 011-1V5z" fill="${t}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M4.856 12.014a.5.5 0 00-.712.702L5.409 14l-1.265 1.284a.5.5 0 00.712.702l1.255-1.274 1.255 1.274a.5.5 0 00.712-.702L6.813 14l1.265-1.284a.5.5 0 00-.712-.702L6.11 13.288l-1.255-1.274zM12.856 4.014a.5.5 0 00-.712.702L13.409 6l-1.265 1.284a.5.5 0 10.712.702l1.255-1.274 1.255 1.274a.5.5 0 10.712-.702L14.813 6l1.265-1.284a.5.5 0 00-.712-.702L14.11 5.288l-1.255-1.274z" fill="${t}"/>
</svg>`},dg=e=>{const t=e.fgColor,n=e.bgColor;return`${rt}
  <rect x="2" y="2" width="16" height="16" rx="2" fill="${n}"/>
  <path fill-rule="evenodd" clip-rule="evenodd" d="M14.25 7.25a.75.75 0 000-1.5h-6.5a.75.75 0 100 1.5h6.5zM15 10a.75.75 0 01-.75.75h-6.5a.75.75 0 010-1.5h6.5A.75.75 0 0115 10zm-.75 4.25a.75.75 0 000-1.5h-6.5a.75.75 0 000 1.5h6.5zm-8.987-7a.75.75 0 100-1.5.75.75 0 000 1.5zm.75 2.75a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm-.75 4.25a.75.75 0 100-1.5.75.75 0 000 1.5z" fill="${t}"/>
</svg>`},ug=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2 15v1h14v-2.5c0-.87-.44-1.55-.98-2.04a6.19 6.19 0 0 0-1.9-1.14 12.1 12.1 0 0 0-2.48-.67A4 4 0 1 0 5 6a4 4 0 0 0 2.36 3.65c-.82.13-1.7.36-2.48.67-.69.28-1.37.65-1.9 1.13A2.8 2.8 0 0 0 2 13.5V15z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>`},fg=e=>{const t=e.fgColor;return`
    <svg width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M12.43 6.04v-.18a3.86 3.86 0 0 0-7.72 0v.18A2.15 2.15 0 0 0 3 8.14v5.72C3 15.04 3.96 16 5.14 16H12c1.18 0 2.14-.96 2.14-2.14V8.14c0-1.03-.73-1.9-1.71-2.1zM7.86 6v-.14a.71.71 0 1 1 1.43 0V6H7.86z" fill="${e.bgColor}" stroke="${t}" stroke-width="2"/>
  </svg>
`},hg={headerRowID:Nh,headerNumber:Bh,headerCode:Oh,headerString:Wh,headerBoolean:jh,headerAudioUri:Xh,headerVideoUri:Yh,headerEmoji:Uh,headerImage:Kh,headerUri:Ta,headerPhone:Gh,headerMarkdown:qh,headerDate:Zh,headerTime:Qh,headerEmail:Jh,headerReference:eg,headerIfThenElse:tg,headerSingleValue:ng,headerLookup:rg,headerTextTemplate:og,headerMath:ig,headerRollup:sg,headerJoinStrings:lg,headerSplitString:ag,headerGeoDistance:cg,headerArray:dg,rowOwnerOverlay:ug,protectedColumnOverlay:fg,renameIcon:Vh};function gg(e,t){return e==="normal"?[t.bgIconHeader,t.fgIconHeader]:e==="selected"?["white",t.accentColor]:[t.accentColor,t.bgHeader]}class mg{onSettled;spriteMap=new Map;headerIcons;inFlight=0;constructor(t,n){this.onSettled=n,this.headerIcons=t??{}}drawSprite(t,n,r,o,i,s,l,a=1){const[c,u]=gg(n,l),h=s*Math.ceil(window.devicePixelRatio),m=`${c}_${u}_${h}_${t}`;let p=this.spriteMap.get(m);if(p===void 0){const g=this.headerIcons[t];if(g===void 0)return;p=document.createElement("canvas");const w=p.getContext("2d");if(w===null)return;const v=new Image;v.src=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(g({fgColor:u,bgColor:c}))}`,this.spriteMap.set(m,p);const x=v.decode();if(x===void 0)return;this.inFlight++,x.then(()=>{w.drawImage(v,0,0,h,h)}).finally(()=>{this.inFlight--,this.inFlight===0&&this.onSettled()})}else a<1&&(r.globalAlpha=a),r.drawImage(p,0,0,h,h,o,i,s,s),a<1&&(r.globalAlpha=1)}}function vs(e,t,n,r,o,i,s,l,a=-20,c=-20,u=32,h="center"){const m=Math.floor(o+s/2),p=t.roundingRadius??4,g=oa(u,s,t.cellVerticalPadding),w=g/2,v=ra(h,r,i,t.cellHorizontalPadding,g),x=na(v,m,g),y=ia(r+a,o+c,x);switch(n){case!0:{e.beginPath(),Sn(e,v-g/2,m-g/2,g,g,p),e.fillStyle=l?t.accentColor:t.textMedium,e.fill(),e.beginPath(),e.moveTo(v-w+g/4.23,m-w+g/1.97),e.lineTo(v-w+g/2.42,m-w+g/1.44),e.lineTo(v-w+g/1.29,m-w+g/3.25),e.strokeStyle=t.bgCell,e.lineJoin="round",e.lineCap="round",e.lineWidth=1.9,e.stroke();break}case qo:case!1:{e.beginPath(),Sn(e,v-g/2+.5,m-g/2+.5,g-1,g-1,p),e.lineWidth=1,e.strokeStyle=y?t.textDark:t.textMedium,e.stroke();break}case ls:{e.beginPath(),Sn(e,v-g/2,m-g/2,g,g,p),e.fillStyle=y?t.textMedium:t.textLight,e.fill(),e.beginPath(),e.moveTo(v-g/3,m),e.lineTo(v+g/3,m),e.strokeStyle=t.bgCell,e.lineCap="round",e.lineWidth=1.9,e.stroke();break}default:mo()}}function pg(e,t,n,r){if(r==="any")return Ia(e,{x:t,y:n,width:1,height:1});if(r==="vertical"&&(t=e.x),r==="horizontal"&&(n=e.y),wa([t,n],e))return;const o=t-e.x,i=e.x+e.width-t,s=n-e.y+1,l=e.y+e.height-n,a=Math.min(r==="vertical"?Number.MAX_SAFE_INTEGER:o,r==="vertical"?Number.MAX_SAFE_INTEGER:i,r==="horizontal"?Number.MAX_SAFE_INTEGER:s,r==="horizontal"?Number.MAX_SAFE_INTEGER:l);return a===l?{x:e.x,y:e.y+e.height,width:e.width,height:n-e.y-e.height+1}:a===s?{x:e.x,y:n,width:e.width,height:e.y-n}:a===i?{x:e.x+e.width,y:e.y,width:t-e.x-e.width+1,height:e.height}:{x:t,y:e.y,width:e.x-t,height:e.height}}function Ia(e,t){const n=Math.min(e.x,t.x),r=Math.min(e.y,t.y),o=Math.max(e.x+e.width,t.x+t.width)-n,i=Math.max(e.y+e.height,t.y+t.height)-r;return{x:n,y:r,width:o,height:i}}function wg(e,t){return e.x<=t.x&&e.y<=t.y&&e.x+e.width>=t.x+t.width&&e.y+e.height>=t.y+t.height}function yg(e,t,n,r){if(e.x>t||e.y>n||e.x<0&&e.y<0&&e.x+e.width>t&&e.y+e.height>n)return;if(e.x>=0&&e.y>=0&&e.x+e.width<=t&&e.y+e.height<=n)return e;const o=-4,i=-4,s=t+4,l=n+4,a=o-e.x,c=e.x+e.width-s,u=i-e.y,h=e.y+e.height-l,m=a>0?e.x+Math.floor(a/r)*r:e.x,p=c>0?e.x+e.width-Math.floor(c/r)*r:e.x+e.width,g=u>0?e.y+Math.floor(u/r)*r:e.y,w=h>0?e.y+e.height-Math.floor(h/r)*r:e.y+e.height;return{x:m,y:g,width:p-m,height:w-g}}function bg(e,t,n,r,o){const[i,s,l,a]=t,[c,u,h,m]=o,{x:p,y:g,width:w,height:v}=e,x=[];if(w<=0||v<=0)return x;const y=p+w,E=g+v,M=p<i,b=g<s,P=p+w>l,F=g+v>a,j=p>i&&p<l||y>i&&y<l||p<i&&y>l,I=g>s&&g<a||E>s&&E<a||g<s&&E>a;if(j&&I){const W=Math.max(p,i),D=Math.max(g,s),H=Math.min(y,l),_=Math.min(E,a);x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:c,y:u,width:h-c+1,height:m-u+1}})}if(M&&b){const W=p,D=g,H=Math.min(y,i),_=Math.min(E,s);x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:0,y:0,width:c+1,height:u+1}})}if(b&&j){const W=Math.max(p,i),D=g,H=Math.min(y,l),_=Math.min(E,s);x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:c,y:0,width:h-c+1,height:u+1}})}if(b&&P){const W=Math.max(p,l),D=g,H=y,_=Math.min(E,s);x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:h,y:0,width:n-h+1,height:u+1}})}if(M&&I){const W=p,D=Math.max(g,s),H=Math.min(y,i),_=Math.min(E,a);x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:0,y:u,width:c+1,height:m-u+1}})}if(P&&I){const W=Math.max(p,l),D=Math.max(g,s),H=y,_=Math.min(E,a);x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:h,y:u,width:n-h+1,height:m-u+1}})}if(M&&F){const W=p,D=Math.max(g,a),H=Math.min(y,i),_=E;x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:0,y:m,width:c+1,height:r-m+1}})}if(F&&j){const W=Math.max(p,i),D=Math.max(g,a),H=Math.min(y,l),_=E;x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:c,y:m,width:h-c+1,height:r-m+1}})}if(P&&F){const W=Math.max(p,l),D=Math.max(g,a),H=y,_=E;x.push({rect:{x:W,y:D,width:H-W,height:_-D},clip:{x:h,y:m,width:n-h+1,height:r-m+1}})}return x}const vg={kind:J.Loading,allowOverlay:!1},Jr=[0,0],eo={x:0,y:0,width:0,height:0},Oi=[void 0,()=>{}];let rs=!1;function xg(){rs=!0}function Da(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,w,v,x,y,E,M,b,P,F,j){let I,B;v!==void 0&&v[0][0]===n&&v[0][1]===r&&(I=v[1][0],B=v[1][1]);let W;Jr[0]=n,Jr[1]=r,eo.x=s,eo.y=l,eo.width=a,eo.height=c,Oi[0]=P.getValue(Jr),Oi[1]=G=>P.setValue(Jr,G),rs=!1;const D={ctx:e,theme:h,col:n,row:r,cell:t,rect:eo,highlighted:u,cellFillColor:m,hoverAmount:w,frameTime:y,hoverX:I,drawState:Oi,hoverY:B,imageLoader:p,spriteManager:g,hyperWrapping:x,overrideCursor:I!==void 0?j:void 0,requestAnimationFrame:xg},H=uh(D,t.lastUpdated,y,M,o,i),_=F(t);if(_!==void 0){M?.renderer!==_&&(M?.deprep?.(D),M=void 0);const G=_.drawPrep?.(D,M);E!==void 0&&!Dr(D.cell)?E(D,()=>_.draw(D,t)):_.draw(D,t),W=G===void 0?void 0:{deprep:G?.deprep,fillStyle:G?.fillStyle,font:G?.font,renderer:_}}return(H||rs)&&b?.(Jr),W}function kg(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,w,v,x,y){const E=[];e.imageSmoothingEnabled=!1;const M=Math.min(o.cellYOffset,s),b=Math.max(o.cellYOffset,s);let P=0;if(typeof x=="number")P+=(b-M)*x;else for(let _=M;_<b;_++)P+=x(_);s>o.cellYOffset&&(P=-P),P+=a-o.translateY;const F=Math.min(o.cellXOffset,i),j=Math.max(o.cellXOffset,i);let I=0;for(let _=F;_<j;_++)I+=w[_].width;i>o.cellXOffset&&(I=-I),I+=l-o.translateX;let B=Lr(v);if(B>0&&B++,I!==0&&P!==0)return{regions:[]};const W=c>0?Pr(m,c,x):0,D=u-B-Math.abs(I),H=h-p-W-Math.abs(P)-1;if(D>150&&H>150){const _={sx:0,sy:0,sw:u*g,sh:h*g,dx:0,dy:0,dw:u*g,dh:h*g};if(P>0?(_.sy=(p+1)*g,_.sh=H*g,_.dy=(P+p+1)*g,_.dh=H*g,E.push({x:0,y:p,width:u,height:P+1})):P<0&&(_.sy=(-P+p+1)*g,_.sh=H*g,_.dy=(p+1)*g,_.dh=H*g,E.push({x:0,y:h+P-W,width:u,height:-P+W})),I>0?(_.sx=B*g,_.sw=D*g,_.dx=(I+B)*g,_.dw=D*g,E.push({x:B-1,y:0,width:I+2,height:h})):I<0&&(_.sx=(B-I)*g,_.sw=D*g,_.dx=B*g,_.dw=D*g,E.push({x:u+I,y:0,width:-I,height:h})),e.setTransform(1,0,0,1,0,0),y){if(B>0&&I!==0&&P===0&&(r===void 0||n?.[1]!==!1)){const G=B*g,he=h*g;e.drawImage(t,0,0,G,he,0,0,G,he)}if(W>0&&I===0&&P!==0&&(r===void 0||n?.[0]!==!1)){const G=(h-W)*g,he=u*g,xe=W*g;e.drawImage(t,0,G,he,xe,0,G,he,xe)}}e.drawImage(t,_.sx,_.sy,_.sw,_.sh,_.dx,_.dy,_.dw,_.dh),e.scale(g,g)}return e.imageSmoothingEnabled=!0,{regions:E}}function Cg(e,t,n,r,o,i,s,l,a,c){const u=[];return t!==e.cellXOffset||n!==e.cellYOffset||r!==e.translateX||o!==e.translateY||Bn(a,n,r,o,l,(h,m,p,g)=>{if(h.sourceIndex===c){const w=Math.max(m,g)+1;return u.push({x:w,y:0,width:i-w,height:s}),!0}}),u}function sl(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,w,v,x=!1){if(a!==void 0){e.beginPath(),e.save(),e.rect(0,0,i,s);for(const D of a)e.rect(D.x+1,D.y+1,D.width-1,D.height-1);e.clip("evenodd")}const y=v.horizontalBorderColor??v.borderColor,E=v.borderColor;let M=0,b=i,P=0,F=s;if(l!==void 0&&l.length>0){M=Number.MAX_SAFE_INTEGER,P=Number.MAX_SAFE_INTEGER,b=Number.MIN_SAFE_INTEGER,F=Number.MIN_SAFE_INTEGER;for(const D of l)M=Math.min(M,D.x-1),b=Math.max(b,D.x+D.width+1),P=Math.min(P,D.y-1),F=Math.max(F,D.y+D.height+1)}const j=[];e.beginPath();let I=.5;for(let D=0;D<t.length;D++){const H=t[D];if(H.width===0)continue;I+=H.width;const _=H.sticky?I:I+r;_>=M&&_<=b&&p(D+1)&&j.push({x1:_,y1:Math.max(c,P),x2:_,y2:Math.min(s,F),color:E})}let B=s+.5;for(let D=w-g;D<w;D++){const H=h(D);B-=H,j.push({x1:M,y1:B,x2:b,y2:B,color:y})}if(x!==!0){let D=u+.5,H=n;const _=B;for(;D+o<_;){const G=D+o;if(G>=P&&G<=F-1){const he=m?.(H);j.push({x1:M,y1:G,x2:b,y2:G,color:he?.horizontalBorderColor??he?.borderColor??y})}D+=h(H),H++}}const W=Sd(j,D=>D.color);for(const D of Object.keys(W)){e.strokeStyle=D;for(const H of W[D])e.moveTo(H.x1,H.y1),e.lineTo(H.x2,H.y2);e.stroke(),e.beginPath()}a!==void 0&&e.restore()}function Fa(e,t){const n=[];let r=e.x+e.width-26*t.length;const o=e.y+e.height/2-13,i=26,s=26;for(let l=0;l<t.length;l++)n.push({x:r,y:o,width:s,height:i}),r+=26;return n}function ui(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function Sg(e,t,n,r,o,i,s,l,a,c,u,h){const[p,g]=i?.[0]??[];let w=0;La(t,n,r,o,(v,x,y,E,M,b)=>{if(h!==void 0&&!h.hasItemInRectangle({x:v[0],y:-2,width:v[1]-v[0]+1,height:1}))return;e.save(),e.beginPath(),e.rect(y,E,M,b),e.clip();const P=u(x),F=P?.overrideTheme===void 0?s:Nn(s,P.overrideTheme),j=g===-2&&p!==void 0&&p>=v[0]&&p<=v[1],I=j?F.bgHeaderHovered:F.bgHeader;if(I!==s.bgHeader&&(e.fillStyle=I,e.fill()),e.fillStyle=F.textGroupHeader??F.textHeader,P!==void 0){let B=y;if(P.icon!==void 0&&(l.drawSprite(P.icon,"normal",e,B+8,(o-20)/2,20,F),B+=26),e.fillText(P.name,B+8,o/2+On(e,s.headerFontFull)),P.actions!==void 0&&j){const W=Fa({x:y,y:E,width:M,height:b},P.actions);e.beginPath();const D=W[0].x-10,H=y+M-D;e.rect(D,0,H,o);const _=e.createLinearGradient(D,0,D+H,0),G=zr(I,0);_.addColorStop(0,G),_.addColorStop(10/H,I),_.addColorStop(1,I),e.fillStyle=_,e.fill(),e.globalAlpha=.6;const[he,xe]=i?.[1]??[-1,-1];for(let de=0;de<P.actions.length;de++){const Be=P.actions[de],ne=W[de],q=ui(ne,he+y,xe);q&&(e.globalAlpha=1),l.drawSprite(Be.icon,"normal",e,ne.x+ne.width/2-10,ne.y+ne.height/2-10,20,F),q&&(e.globalAlpha=.6)}e.globalAlpha=1}}y!==0&&c(v[0])&&(e.beginPath(),e.moveTo(y+.5,0),e.lineTo(y+.5,o),e.strokeStyle=s.borderColor,e.lineWidth=1,e.stroke()),e.restore(),w=y+M}),e.beginPath(),e.moveTo(w+.5,0),e.lineTo(w+.5,o),e.moveTo(0,o+.5),e.lineTo(n,o+.5),e.strokeStyle=s.borderColor,e.lineWidth=1,e.stroke()}const Er=30;function Ha(e,t,n,r,o){return o?{x:e,y:t,width:Er,height:Math.min(Er,r)}:{x:e+n-Er,y:Math.max(t,t+r/2-Er/2),width:Er,height:Math.min(Er,r)}}function ll(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g){if(p){let M;i.title===Jl&&(M=!0),i.title===ea&&(M=!1),M!==!0&&(e.globalAlpha=c),vs(e,l,M,t,n,r,o,!1,void 0,void 0,18),M!==!0&&(e.globalAlpha=1);return}const w=l.cellHorizontalPadding,v=s?l.textHeaderSelected:l.textHeader,x=i.hasMenu===!0&&(a||h&&s),y=m?-1:1;let E=m?t+r-w:t+w;if(i.icon!==void 0){let M=s?"selected":"normal";i.style==="highlight"&&(M=s?"selected":"special");const b=l.headerIconSize;u.drawSprite(i.icon,M,e,m?E-b:E,n+(o-b)/2,b,l),i.overlayIcon!==void 0&&u.drawSprite(i.overlayIcon,s?"selected":"special",e,m?E-b+9:E+9,n+((o-18)/2+6),18,l),E+=Math.ceil(b*1.3)*y}if(x&&i.hasMenu===!0&&r>35){const b=m?35:r-35,P=m?35*.7:r-35*.7,F=b/r,j=P/r,I=e.createLinearGradient(t,0,t+r,0),B=zr(v,0);I.addColorStop(m?1:0,v),I.addColorStop(F,v),I.addColorStop(j,B),I.addColorStop(m?0:1,B),e.fillStyle=I}else e.fillStyle=v;if(m&&(e.textAlign="right"),e.fillText(i.title,E,n+o/2+On(e,l.headerFontFull)),m&&(e.textAlign="left"),x&&i.hasMenu===!0)if(i.menuIcon===void 0||i.menuIcon===Zo.Triangle){e.beginPath();const M=g.x+g.width/2-5.5,b=g.y+g.height/2-3;mh(e,[{x:M,y:b},{x:M+11,y:b},{x:M+5.5,y:b+6}],1),e.fillStyle=v,e.fill()}else if(i.menuIcon===Zo.Dots){e.beginPath();const M=g.x+g.width/2,b=g.y+g.height/2;gh(e,M,b),e.fillStyle=v,e.fill()}else{const M=g.x+(g.width-l.headerIconSize)/2,b=g.y+(g.height-l.headerIconSize)/2;u.drawSprite(i.menuIcon,"normal",e,M,b,l.headerIconSize,l)}}function Aa(e,t,n,r,o,i,s,l,a,c,u,h,m,p){const g=i.title.startsWith(li),w=cs(i.title)==="rtl",v=Ha(t,n,r,o,w);if(m!==void 0){let x=i;g&&(x={...i,title:""}),m({ctx:e,theme:l,rect:{x:t,y:n,width:r,height:o},column:x,columnIndex:x.sourceIndex,isSelected:s,hoverAmount:u,isHovered:a,hasSelectedCell:c,spriteManager:h,menuBounds:v},()=>ll(e,t,n,r,o,i,s,l,a,u,h,p,w,g,v))}else ll(e,t,n,r,o,i,s,l,a,u,h,p,w,g,v)}function Mg(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,w,v,x,y){const E=s+l;if(E<=0)return;e.fillStyle=h.bgHeader,e.fillRect(0,0,o,E);const[M,b]=r?.[0]??[],P=h.headerFontFull;e.font=P,Bn(t,0,i,0,E,(F,j,I,B)=>{if(v!==void 0&&!v.has([F.sourceIndex,-1]))return;const W=Math.max(0,B-j);e.save(),e.beginPath(),e.rect(j+W,l,F.width-W,s),e.clip();const D=w(F.group??"").overrideTheme,H=F.themeOverride===void 0&&D===void 0?h:Nn(h,D,F.themeOverride);H.bgHeader!==h.bgHeader&&(e.fillStyle=H.bgHeader,e.fill()),H!==h&&(e.font=H.baseFontFull);const _=u.columns.hasIndex(F.sourceIndex),G=a!==void 0||c,he=!G&&b===-1&&M===F.sourceIndex,xe=G?0:p.find(se=>se.item[0]===F.sourceIndex&&se.item[1]===-1)?.hoverAmount??0,de=u?.current!==void 0&&u.current.cell[0]===F.sourceIndex,Be=_?H.accentColor:de?H.bgHeaderHasFocus:H.bgHeader,ne=n?l:0,q=F.sourceIndex===0?0:1;_?(e.fillStyle=Be,e.fillRect(j+q,ne,F.width-q,s)):(de||xe>0)&&(e.beginPath(),e.rect(j+q,ne,F.width-q,s),de&&(e.fillStyle=H.bgHeaderHasFocus,e.fill()),xe>0&&(e.globalAlpha=xe,e.fillStyle=H.bgHeaderHovered,e.fill(),e.globalAlpha=1)),Aa(e,j,ne,F.width,s,F,_,H,he,de,xe,m,x,y),e.restore()}),n&&Sg(e,t,o,i,l,r,h,m,p,g,w,v)}function ti(e,t,n,r,o,i,s,l){return e<=o+s&&o<=e+n&&t<=i+l&&i<=t+r}function Rg(e,t,n,r,o,i,s,l,a){a===void 0||a.size===0||(e.beginPath(),La(t,n,i,r,(c,u,h,m,p,g)=>{a.hasItemInRectangle({x:c[0],y:-2,width:c[1]-c[0]+1,height:1})&&e.rect(h,m,p,g)}),Bn(t,l,i,s,o,(c,u,h,m)=>{const p=Math.max(0,m-u),g=u+p+1,w=c.width-p-1;a.has([c.sourceIndex,-1])&&e.rect(g,r,w,o-r)}),e.clip())}function za(e,t,n,r,o,i,s){const[l,a]=e;let c,u;const h=s.find(m=>!m.sticky)?.sourceIndex??0;if(a>h){const m=Math.max(l,h);let p=t,g=r;for(let w=i.sourceIndex-1;w>=m;w--)p-=s[w].width,g+=s[w].width;for(let w=i.sourceIndex+1;w<=a;w++)g+=s[w].width;u={x:p,y:n,width:g,height:o}}if(h>l){const m=Math.min(a,h-1);let p=t,g=r;for(let w=i.sourceIndex-1;w>=l;w--)p-=s[w].width,g+=s[w].width;for(let w=i.sourceIndex+1;w<=m;w++)g+=s[w].width;c={x:p,y:n,width:g,height:o}}return[c,u]}function al(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,w,v,x,y,E,M,b,P,F,j,I,B,W,D,H,_,G,he,xe,de){let Be=E?.size??Number.MAX_SAFE_INTEGER;const ne=performance.now();let q=H.baseFontFull;e.font=q;const se={ctx:e},Q=[0,0],ke=v>0?Pr(a,v,c):0;let oe,Re;return Bn(t,l,i,s,o,(le,We,je,Fe,He)=>{const Ve=Math.max(0,Fe-We),me=We+Ve,$e=o+1,qe=le.width-Ve,gt=r-o-1;if(y.length>0){let ue=!1;for(let Ae=0;Ae<y.length;Ae++){const Ce=y[Ae];if(ti(me,$e,qe,gt,Ce.x,Ce.y,Ce.width,Ce.height)){ue=!0;break}}if(!ue)return}const ae=()=>{e.save(),e.beginPath(),e.rect(me,$e,qe,gt),e.clip()},ee=M.columns.hasIndex(le.sourceIndex),Ie=h(le.group??"").overrideTheme,ge=le.themeOverride===void 0&&Ie===void 0?H:Nn(H,Ie,le.themeOverride),we=ge.baseFontFull;we!==q&&(q=we,e.font=we),ae();let Ne;return fi(He,je,r,a,c,v,x,(ue,Ae,Ce,lt,De)=>{if(Ae<0||(Q[0]=le.sourceIndex,Q[1]=Ae,E!==void 0&&!E.has(Q)))return;if(y.length>0){let Se=!1;for(let ct=0;ct<y.length;ct++){const Ke=y[ct];if(ti(We,ue,le.width,Ce,Ke.x,Ke.y,Ke.width,Ke.height)){Se=!0;break}}if(!Se)return}const tt=M.rows.hasIndex(Ae),Ye=p.hasIndex(Ae),be=Ae<a?u(Q):vg;let Ue=We,Ze=le.width,Tt=!1,Pt=!1;if(be.span!==void 0){const[Se,ct]=be.span,Ke=`${Ae},${Se},${ct},${le.sticky}`;if(Re===void 0&&(Re=new Set),Re.has(Ke)){Be--;return}else{const ut=za(be.span,We,ue,le.width,Ce,le,n),St=le.sticky?ut[0]:ut[1];if(!le.sticky&&ut[0]!==void 0&&(Pt=!0),St!==void 0){Ue=St.x,Ze=St.width,Re.add(Ke),e.restore(),Ne=void 0,e.save(),e.beginPath();const fn=Math.max(0,Fe-St.x);e.rect(St.x+fn,ue,St.width-fn,Ce),oe===void 0&&(oe=[]),oe.push({x:St.x+fn,y:ue,width:St.width-fn,height:Ce}),e.clip(),Tt=!0}}}const Nt=m?.(Ae),an=De&&le.trailingRowOptions?.themeOverride!==void 0?le.trailingRowOptions?.themeOverride:void 0,mt=be.themeOverride===void 0&&Nt===void 0&&an===void 0?ge:Nn(ge,Nt,an,be.themeOverride);e.beginPath();const yn=rh(Q,be,M);let bt=oh(Q,be,M);const Kt=be.span!==void 0&&M.columns.some(Se=>be.span!==void 0&&Se>=be.span[0]&&Se<=be.span[1]);yn&&!g&&w?bt=0:yn&&(bt=Math.max(bt,1)),Kt&&bt++,yn||(tt&&bt++,ee&&!De&&bt++);const Xe=be.kind===J.Protected?mt.bgCellMedium:mt.bgCell;let Qe;if((lt||Xe!==H.bgCell)&&(Qe=Yt(Xe,Qe)),bt>0||Ye){Ye&&(Qe=Yt(mt.bgHeader,Qe));for(let Se=0;Se<bt;Se++)Qe=Yt(mt.accentLight,Qe)}else if(b!==void 0){for(const Se of b)if(Se[0]===le.sourceIndex&&Se[1]===Ae){Qe=Yt(mt.bgSearchResult,Qe);break}}if(P!==void 0)for(let Se=0;Se<P.length;Se++){const ct=P[Se],Ke=ct.range;ct.style!=="solid-outline"&&Ke.x<=le.sourceIndex&&le.sourceIndex<Ke.x+Ke.width&&Ke.y<=Ae&&Ae<Ke.y+Ke.height&&(Qe=Yt(ct.color,Qe))}let cn=!1;if(E!==void 0){const Se=ue+1,Ke=(lt?Se+Ce-1:Math.min(Se+Ce-1,r-ke))-Se;(Ke!==Ce-1||Ue+1<=Fe)&&(cn=!0,e.save(),e.beginPath(),e.rect(Ue+1,Se,Ze-1,Ke),e.clip()),Qe=Qe===void 0?mt.bgCell:Yt(Qe,mt.bgCell)}const dn=le.sourceIndex===n.length-1,un=Ae===a-1;Qe!==void 0&&(e.fillStyle=Qe,Ne!==void 0&&(Ne.fillStyle=Qe),E!==void 0?e.fillRect(Ue+1,ue+1,Ze-(dn?2:1),Ce-(un?2:1)):e.fillRect(Ue,ue,Ze,Ce)),be.style==="faded"&&(e.globalAlpha=.6);let Ct;for(let Se=0;Se<I.length;Se++){const ct=I[Se];if(ct.item[0]===le.sourceIndex&&ct.item[1]===Ae){Ct=ct;break}}if(Ze>de&&!Pt){const Se=mt.baseFontFull;Se!==q&&(e.font=Se,q=Se),Ne=Da(e,be,le.sourceIndex,Ae,dn,un,Ue,ue,Ze,Ce,bt>0,mt,Qe??mt.bgCell,F,j,Ct?.hoverAmount??0,B,D,ne,W,Ne,_,G,he,xe)}return cn&&e.restore(),be.style==="faded"&&(e.globalAlpha=1),Be--,Tt&&(e.restore(),Ne?.deprep?.(se),Ne=void 0,ae(),q=we,e.font=we),Be<=0}),e.restore(),Be<=0}),oe}function Eg(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,w,v,x,y){x!==void 0||t[t.length-1]!==n[t.length-1]||Bn(t,a,s,l,i,(E,M,b,P,F)=>{if(E!==t[t.length-1])return;M+=E.width;const j=Math.max(M,P);j>r||(e.save(),e.beginPath(),e.rect(j,i+1,1e4,o-i-1),e.clip(),fi(F,b,o,c,u,g,w,(I,B,W,D)=>{if(!D&&v.length>0&&!v.some(xe=>ti(M,I,1e4,W,xe.x,xe.y,xe.width,xe.height)))return;const H=m.hasIndex(B),_=p.hasIndex(B);e.beginPath();const G=h?.(B),he=G===void 0?y:Nn(y,G);he.bgCell!==y.bgCell&&(e.fillStyle=he.bgCell,e.fillRect(M,I,1e4,W)),_&&(e.fillStyle=he.bgHeader,e.fillRect(M,I,1e4,W)),H&&(e.fillStyle=he.accentLight,e.fillRect(M,I,1e4,W))}),e.restore())})}function Tg(e,t,n,r,o,i,s,l,a){let c=!1;for(const p of t)if(!p.sticky){c=s(p.sourceIndex);break}const u=a.horizontalBorderColor??a.borderColor,h=a.borderColor,m=c?Lr(t):0;if(m!==0&&(e.beginPath(),e.moveTo(m+.5,0),e.lineTo(m+.5,r),e.strokeStyle=Yt(h,a.bgCell),e.stroke()),o>0){const p=Pr(i,o,l);e.beginPath(),e.moveTo(0,r-p+.5),e.lineTo(n,r-p+.5),e.strokeStyle=Yt(u,a.bgCell),e.stroke()}}function cl(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,w){const v=g?.filter(F=>F.style!=="no-outline");if(v===void 0||v.length===0)return;const x=Lr(l),y=Pr(p,m,h),E=[a,0,l.length,p-m],M=[x,0,t,n-y],b=v.map(F=>{const j=F.range,I=F.style??"dashed";return bg(j,E,t,n,M).map(B=>{const W=B.rect,D=ts(W.x,W.y,t,n,u,c+u,r,o,i,s,p,a,m,l,h),H=W.width===1&&W.height===1?D:ts(W.x+W.width-1,W.y+W.height-1,t,n,u,c+u,r,o,i,s,p,a,m,l,h);return W.x+W.width>=l.length&&(H.width-=1),W.y+W.height>=p&&(H.height-=1),{color:F.color,style:I,clip:B.clip,rect:yg({x:D.x,y:D.y,width:H.x+H.width-D.x,height:H.y+H.height-D.y},t,n,8)}})}),P=()=>{e.lineWidth=1;let F=!1;for(const j of b)for(const I of j)if(I?.rect!==void 0&&ti(0,0,t,n,I.rect.x,I.rect.y,I.rect.width,I.rect.height)){const B=F,W=!wg(I.clip,I.rect);W&&(e.save(),e.rect(I.clip.x,I.clip.y,I.clip.width,I.clip.height),e.clip()),I.style==="dashed"&&!F?(e.setLineDash([5,3]),F=!0):(I.style==="solid"||I.style==="solid-outline")&&F&&(e.setLineDash([]),F=!1),e.strokeStyle=I.style==="solid-outline"?Yt(Yt(I.color,w.borderColor),w.bgCell):zr(I.color,1),e.strokeRect(I.rect.x+.5,I.rect.y+.5,I.rect.width-1,I.rect.height-1),W&&(e.restore(),F=B)}F&&e.setLineDash([])};return P(),P}function dl(e,t,n,r,o){e.beginPath(),e.moveTo(t,n),e.lineTo(t,r),e.lineWidth=2,e.strokeStyle=o,e.stroke(),e.globalAlpha=1}function Bi(e,t,n,r,o,i,s,l,a,c,u,h,m,p,g,w,v){if(u.current===void 0)return;const x=u.current.range,y=u.current.cell,E=[x.x+x.width-1,x.y+x.height-1];if(y[1]>=v&&E[1]>=v||!s.some(G=>G.sourceIndex===y[0]||G.sourceIndex===E[0]))return;const[b,P]=u.current.cell,F=m(u.current.cell),j=F.span??[b,b],I=P>=v-p,B=p>0&&!I?Pr(v,p,h)-1:0,W=E[1];let D,H;if(Bn(s,r,o,i,c,(G,he,xe,de,Be)=>{if(G.sticky&&b>G.sourceIndex)return;const ne=G.sourceIndex<j[0],q=G.sourceIndex>j[1],se=G.sourceIndex===E[0];if(!(!se&&(ne||q)))return fi(Be,xe,n,v,h,p,g,(Q,ke,oe)=>{if(ke!==P&&ke!==W)return;let Re=he,le=G.width;const We=G.sourceIndex===l.length-1,je=ke===v-1;if(F.span!==void 0){const Ve=za(F.span,he,Q,G.width,oe,G,l),me=G.sticky?Ve[0]:Ve[1];me!==void 0&&(Re=me.x,le=me.width)}const Fe=ke===W&&se&&w,He=ke===P&&!ne&&!q&&D===void 0;return Fe&&(H=()=>{de>Re&&!G.sticky&&!He&&(e.beginPath(),e.rect(de,0,t-de,n),e.clip()),e.beginPath(),e.rect(Re+le-4,Q+oe-4,4,4),e.fillStyle=G.themeOverride?.accentColor??a.accentColor,e.fill()}),He&&(D=()=>{de>Re&&!G.sticky&&(e.beginPath(),e.rect(de,0,t-de,n),e.clip()),e.beginPath(),e.rect(Re+.5,Q+.5,le-(We?1:0),oe-(je?1:0)),e.strokeStyle=G.themeOverride?.accentColor??a.accentColor,e.lineWidth=1,e.stroke()}),D!==void 0&&(w?H!==void 0:!0)}),D!==void 0&&(w?H!==void 0:!0)}),D===void 0&&H===void 0)return;const _=()=>{e.save(),e.beginPath(),e.rect(0,c,t,n-c-B),e.clip(),D?.(),H?.(),e.restore()};return _(),_}function Ig(e,t,n,r,o,i,s,l,a,c){let u=0;return Bn(e,i,r,o,n,(h,m,p,g,w)=>(fi(w,p,t,s,l,a,c,(v,x,y,E)=>{E||(u=Math.max(x,u))}),!0)),u}function Dg(e,t){if(t===void 0||e.width!==t.width||e.height!==t.height||e.theme!==t.theme||e.headerHeight!==t.headerHeight||e.rowHeight!==t.rowHeight||e.rows!==t.rows||e.freezeColumns!==t.freezeColumns||e.getRowThemeOverride!==t.getRowThemeOverride||e.isFocused!==t.isFocused||e.isResizing!==t.isResizing||e.verticalBorder!==t.verticalBorder||e.getCellContent!==t.getCellContent||e.highlightRegions!==t.highlightRegions||e.selection!==t.selection||e.dragAndDropState!==t.dragAndDropState||e.prelightCells!==t.prelightCells||e.touchMode!==t.touchMode||e.maxScaleFactor!==t.maxScaleFactor)return!1;if(e.mappedColumns!==t.mappedColumns){if(e.mappedColumns.length>100||e.mappedColumns.length!==t.mappedColumns.length)return!1;let n;for(let r=0;r<e.mappedColumns.length;r++){const o=e.mappedColumns[r],i=t.mappedColumns[r];if(Ar(o,i))continue;if(n!==void 0||o.width===i.width)return!1;const{width:s,...l}=o,{width:a,...c}=i;if(!Ar(l,c))return!1;n=r}return n===void 0?!0:n}return!0}function ul(e,t){const{canvas:n,headerCanvas:r,width:o,height:i,cellXOffset:s,cellYOffset:l,translateX:a,translateY:c,mappedColumns:u,enableGroups:h,freezeColumns:m,dragAndDropState:p,theme:g,drawFocus:w,headerHeight:v,groupHeaderHeight:x,disabledRows:y,rowHeight:E,verticalBorder:M,overrideCursor:b,isResizing:P,selection:F,fillHandle:j,freezeTrailingRows:I,rows:B,getCellContent:W,getGroupDetails:D,getRowThemeOverride:H,isFocused:_,drawHeaderCallback:G,prelightCells:he,drawCellCallback:xe,highlightRegions:de,resizeCol:Be,imageLoader:ne,lastBlitData:q,hoverValues:se,hyperWrapping:Q,hoverInfo:ke,spriteManager:oe,maxScaleFactor:Re,hasAppendRow:le,touchMode:We,enqueue:je,renderStateProvider:Fe,getCellRenderer:He,renderStrategy:Ve,bufferA:me,bufferB:$e,damage:qe,minimumCellWidth:gt}=e;if(o===0||i===0)return;const ae=Ve==="double-buffer",ee=Math.min(Re,Math.ceil(window.devicePixelRatio??1)),Ie=Ve!=="direct"&&Dg(e,t);(n.width!==o*ee||n.height!==i*ee)&&(n.width=o*ee,n.height=i*ee,n.style.width=o+"px",n.style.height=i+"px");const ge=r,we=h?x+v:v,Ne=we+1;(ge.width!==o*ee||ge.height!==Ne*ee)&&(ge.width=o*ee,ge.height=Ne*ee,ge.style.width=o+"px",ge.style.height=Ne+"px"),ae&&(me.width!==o*ee||me.height!==i*ee)&&(me.width=o*ee,me.height=i*ee,q.current!==void 0&&(q.current.aBufferScroll=void 0)),ae&&($e.width!==o*ee||$e.height!==i*ee)&&($e.width=o*ee,$e.height=i*ee,q.current!==void 0&&(q.current.bBufferScroll=void 0));const ue=q.current;if(Ie===!0&&s===ue?.cellXOffset&&l===ue?.cellYOffset&&a===ue?.translateX&&c===ue?.translateY)return;let Ae=null;ae&&(Ae=n.getContext("2d",{alpha:!1}));const Ce=ge.getContext("2d",{alpha:!1});let lt;ae?qe!==void 0?lt=ue?.lastBuffer==="b"?$e:me:lt=ue?.lastBuffer==="b"?me:$e:lt=n;const De=lt.getContext("2d",{alpha:!1}),tt=ae?lt===me?$e:me:n;if(Ce===null||De===null)return;const Ye=typeof E=="number"?()=>E:E;Ce.save(),De.save(),Ce.beginPath(),De.beginPath(),Ce.textBaseline="middle",De.textBaseline="middle",ee!==1&&(Ce.scale(ee,ee),De.scale(ee,ee));const be=es(u,s,o,p,a);let Ue=[];const Ze=w&&F.current?.cell[1]===l&&c===0;let Tt=!1;if(de!==void 0){for(const Xe of de)if(Xe.style!=="no-outline"&&Xe.range.y===l&&c===0){Tt=!0;break}}const Pt=()=>{Mg(Ce,be,h,ke,o,a,v,x,p,P,F,g,oe,se,M,D,qe,G,We),sl(Ce,be,l,a,c,o,i,void 0,void 0,x,we,Ye,H,M,I,B,g,!0),Ce.beginPath(),Ce.moveTo(0,Ne-.5),Ce.lineTo(o,Ne-.5),Ce.strokeStyle=Yt(g.headerBottomBorderColor??g.horizontalBorderColor??g.borderColor,g.bgHeader),Ce.stroke(),Tt&&cl(Ce,o,i,s,l,a,c,u,m,v,x,E,I,B,de,g),Ze&&Bi(Ce,o,i,l,a,c,be,u,g,we,F,Ye,W,I,le,j,B)};if(qe!==void 0){const Xe=be[be.length-1].sourceIndex+1,Qe=qe.hasItemInRegion([{x:s,y:-2,width:Xe,height:2},{x:s,y:l,width:Xe,height:300},{x:0,y:l,width:m,height:300},{x:s,y:B-I,width:Xe,height:I,when:I>0}]),cn=dn=>{al(dn,be,u,i,we,a,c,l,B,Ye,W,D,H,y,_,w,I,le,Ue,qe,F,he,de,ne,oe,se,ke,xe,Q,g,je,Fe,He,b,gt);const un=F.current;j&&w&&un!==void 0&&qe.has(ya(un.range))&&Bi(dn,o,i,l,a,c,be,u,g,we,F,Ye,W,I,le,j,B)};Qe&&(cn(De),Ae!==null&&(Ae.save(),Ae.scale(ee,ee),Ae.textBaseline="middle",cn(Ae),Ae.restore()),qe.hasHeader()&&(Rg(Ce,be,o,x,we,a,c,l,qe),Pt())),De.restore(),Ce.restore();return}if((Ie!==!0||s!==ue?.cellXOffset||a!==ue?.translateX||Ze!==ue?.mustDrawFocusOnHeader||Tt!==ue?.mustDrawHighlightRingsOnHeader)&&Pt(),Ie===!0){Xt(tt!==void 0&&ue!==void 0);const{regions:Xe}=kg(De,tt,tt===me?ue.aBufferScroll:ue.bBufferScroll,tt===me?ue.bBufferScroll:ue.aBufferScroll,ue,s,l,a,c,I,o,i,B,we,ee,u,be,E,ae);Ue=Xe}else Ie!==!1&&(Xt(ue!==void 0),Ue=Cg(ue,s,l,a,c,o,i,we,be,Ie));Tg(De,be,o,i,I,B,M,Ye,g);const Nt=cl(De,o,i,s,l,a,c,u,m,v,x,E,I,B,de,g),an=w?Bi(De,o,i,l,a,c,be,u,g,we,F,Ye,W,I,le,j,B):void 0;if(De.fillStyle=g.bgCell,Ue.length>0){De.beginPath();for(const Xe of Ue)De.rect(Xe.x,Xe.y,Xe.width,Xe.height);De.clip(),De.fill(),De.beginPath()}else De.fillRect(0,0,o,i);const mt=al(De,be,u,i,we,a,c,l,B,Ye,W,D,H,y,_,w,I,le,Ue,qe,F,he,de,ne,oe,se,ke,xe,Q,g,je,Fe,He,b,gt);Eg(De,be,u,o,i,we,a,c,l,B,Ye,H,F.rows,y,I,le,Ue,qe,g),sl(De,be,l,a,c,o,i,Ue,mt,x,we,Ye,H,M,I,B,g),Nt?.(),an?.(),P&&Bn(be,0,a,0,we,(Xe,Qe)=>Xe.sourceIndex===Be?(dl(Ce,Qe+Xe.width,0,we+1,Yt(g.resizeIndicatorColor??g.accentLight,g.bgHeader)),dl(De,Qe+Xe.width,we,i,Yt(g.resizeIndicatorColor??g.accentLight,g.bgCell)),!0):!1),Ae!==null&&(Ae.fillStyle=g.bgCell,Ae.fillRect(0,0,o,i),Ae.drawImage(De.canvas,0,0));const yn=Ig(be,i,we,a,c,l,B,Ye,I,le);ne?.setWindow({x:s,y:l,width:be.length,height:yn-l},m,Array.from({length:I},(Xe,Qe)=>B-1-Qe));const bt=ue!==void 0&&(s!==ue.cellXOffset||a!==ue.translateX),Kt=ue!==void 0&&(l!==ue.cellYOffset||c!==ue.translateY);q.current={cellXOffset:s,cellYOffset:l,translateX:a,translateY:c,mustDrawFocusOnHeader:Ze,mustDrawHighlightRingsOnHeader:Tt,lastBuffer:ae?lt===me?"a":"b":void 0,aBufferScroll:lt===me?[bt,Kt]:ue?.aBufferScroll,bBufferScroll:lt===$e?[bt,Kt]:ue?.bBufferScroll},De.restore(),Ce.restore()}function fi(e,t,n,r,o,i,s,l){let a=t,c=e;const u=r-i;for(;a<n&&c<u;){const h=o(c);if(l(a,c,h,!1,s&&c===r-1)===!0)break;a+=h,c++}a=n;for(let h=0;h<i;h++){c=r-1-h;const m=o(c);a-=m,l(a,c,m,!0,s&&c===r-1)}}function Bn(e,t,n,r,o,i){let s=0,l=0;const a=o+r;for(const c of e){const u=c.sticky?l:s+n;if(i(c,u,a,l,t)===!0)break;s+=c.width,l+=c.sticky?c.width:0}}function La(e,t,n,r,o){let i=0,s=0;for(let l=0;l<e.length;l++){const a=e[l];let c=l+1,u=a.width;for(a.sticky&&(s+=u);c<e.length&&po(e[c].group,a.group)&&e[c].sticky===e[l].sticky;){const w=e[c];u+=w.width,c++,l++,w.sticky&&(s+=w.width)}const h=a.sticky?0:n,m=i+h,p=a.sticky?0:Math.max(0,s-m),g=Math.min(u-p,t-(m+p));o([a.sourceIndex,e[c-1].sourceIndex],a.group??"",m+p,0,g,r),i+=u}}const Fg=80;function Hg(e){const t=e-1;return t*t*t+1}class Ag{callback;constructor(t){this.callback=t}currentHoveredItem=void 0;leavingItems=[];lastAnimationTime;addToLeavingItems=t=>{this.leavingItems.some(r=>uo(r.item,t.item))||this.leavingItems.push(t)};removeFromLeavingItems=t=>{const n=this.leavingItems.find(r=>uo(r.item,t));return this.leavingItems=this.leavingItems.filter(r=>r!==n),n?.hoverAmount??0};cleanUpLeavingElements=()=>{this.leavingItems=this.leavingItems.filter(t=>t.hoverAmount>0)};shouldStep=()=>{const t=this.leavingItems.length>0,n=this.currentHoveredItem!==void 0&&this.currentHoveredItem.hoverAmount<1;return t||n};getAnimatingItems=()=>this.currentHoveredItem!==void 0?[...this.leavingItems,this.currentHoveredItem]:this.leavingItems.map(t=>({...t,hoverAmount:Hg(t.hoverAmount)}));step=t=>{if(this.lastAnimationTime===void 0)this.lastAnimationTime=t;else{const r=(t-this.lastAnimationTime)/Fg;for(const i of this.leavingItems)i.hoverAmount=sn(i.hoverAmount-r,0,1);this.currentHoveredItem!==void 0&&(this.currentHoveredItem.hoverAmount=sn(this.currentHoveredItem.hoverAmount+r,0,1));const o=this.getAnimatingItems();this.callback(o),this.cleanUpLeavingElements()}this.shouldStep()?(this.lastAnimationTime=t,window.requestAnimationFrame(this.step)):this.lastAnimationTime=void 0};setHovered=t=>{if(!uo(this.currentHoveredItem?.item,t)){if(this.currentHoveredItem!==void 0&&this.addToLeavingItems(this.currentHoveredItem),t!==void 0){const n=this.removeFromLeavingItems(t);this.currentHoveredItem={item:t,hoverAmount:n}}else this.currentHoveredItem=void 0;this.lastAnimationTime===void 0&&window.requestAnimationFrame(this.step)}}}class zg{fn;val;constructor(t){this.fn=t}get value(){return this.val??(this.val=this.fn())}}function xs(e){return new zg(e)}const Lg=xs(()=>window.navigator.userAgent.includes("Firefox")),ni=xs(()=>window.navigator.userAgent.includes("Mac OS")&&window.navigator.userAgent.includes("Safari")&&!window.navigator.userAgent.includes("Chrome")),ri=xs(()=>window.navigator.platform.toLowerCase().startsWith("mac"));function Pg(e){const t=d.useRef([]),n=d.useRef(0),r=d.useRef(e);r.current=e;const o=d.useCallback(()=>{const i=()=>window.requestAnimationFrame(s),s=()=>{const l=t.current.map(bs);t.current=[],r.current(new ho(l)),t.current.length>0?n.current++:n.current=0};window.requestAnimationFrame(n.current>600?i:s)},[]);return d.useCallback(i=>{t.current.length===0&&o();const s=ln(i[0],i[1]);t.current.includes(s)||t.current.push(s)},[o])}const Ln="header",Vt="group-header",oi="out-of-bounds";var Hr;(function(e){e[e.Start=-2]="Start",e[e.StartPadding=-1]="StartPadding",e[e.Center=0]="Center",e[e.EndPadding=1]="EndPadding",e[e.End=2]="End"})(Hr||(Hr={}));function Pa(e,t){return e===t?!0:e?.kind==="out-of-bounds"?e?.kind===t?.kind&&e?.location[0]===t?.location[0]&&e?.location[1]===t?.location[1]&&e?.region[0]===t?.region[0]&&e?.region[1]===t?.region[1]:e?.kind===t?.kind&&e?.location[0]===t?.location[0]&&e?.location[1]===t?.location[1]}const fl=6,$g=(e,t)=>e.kind===J.Custom?e.copyData:t?.(e)?.getAccessibilityString(e)??"",_g=(e,t)=>{const{width:n,height:r,accessibilityHeight:o,columns:i,cellXOffset:s,cellYOffset:l,headerHeight:a,fillHandle:c=!1,groupHeaderHeight:u,rowHeight:h,rows:m,getCellContent:p,getRowThemeOverride:g,onHeaderMenuClick:w,enableGroups:v,isFilling:x,onCanvasFocused:y,onCanvasBlur:E,isFocused:M,selection:b,freezeColumns:P,onContextMenu:F,freezeTrailingRows:j,fixedShadowX:I=!0,fixedShadowY:B=!0,drawFocusRing:W=!0,onMouseDown:D,onMouseUp:H,onMouseMoveRaw:_,onMouseMove:G,onItemHovered:he,dragAndDropState:xe,firstColAccessible:de,onKeyDown:Be,onKeyUp:ne,highlightRegions:q,canvasRef:se,onDragStart:Q,onDragEnd:ke,eventTargetRef:oe,isResizing:Re,resizeColumn:le,isDragging:We,isDraggable:je=!1,allowResize:Fe,disabledRows:He,hasAppendRow:Ve,getGroupDetails:me,theme:$e,prelightCells:qe,headerIcons:gt,verticalBorder:ae,drawCell:ee,drawHeader:Ie,onCellFocused:ge,onDragOverCell:we,onDrop:Ne,onDragLeave:ue,imageWindowLoader:Ae,smoothScrollX:Ce=!1,smoothScrollY:lt=!1,experimental:De,getCellRenderer:tt}=e,Ye=e.translateX??0,be=e.translateY??0,Ue=Math.max(P,Math.min(i.length-1,s)),Ze=d.useRef(null),Tt=Ae,Pt=d.useRef(),[Nt,an]=d.useState(!1),mt=d.useRef([]),yn=d.useRef(),[bt,Kt]=d.useState(),[Xe,Qe]=d.useState(),cn=d.useRef(null),[dn,un]=d.useState(),[Ct,Se]=d.useState(!1),ct=d.useRef(Ct);ct.current=Ct;const Ke=d.useMemo(()=>new mg(gt,()=>{ir.current=void 0,Jt.current()}),[gt]),ut=v?u+a:a,St=d.useRef(-1),fn=(De?.enableFirefoxRescaling??!1)&&Lg.value,$r=(De?.enableSafariRescaling??!1)&&ni.value;d.useLayoutEffect(()=>{window.devicePixelRatio===1||!fn&&!$r||(St.current!==-1&&an(!0),window.clearTimeout(St.current),St.current=window.setTimeout(()=>{an(!1),St.current=-1},200))},[l,Ue,Ye,be,fn,$r]);const ft=th(i,P),Wn=I?Lr(ft,xe):0,dt=d.useCallback((S,X,Z)=>{const re=S.getBoundingClientRect();if(X>=ft.length||Z>=m)return;const U=re.width/n,te=ts(X,Z,n,r,u,ut,Ue,l,Ye,be,m,P,j,ft,h);return U!==1&&(te.x*=U,te.y*=U,te.width*=U,te.height*=U),te.x+=re.x,te.y+=re.y,te},[n,r,u,ut,Ue,l,Ye,be,m,P,j,ft,h]),vt=d.useCallback((S,X,Z,re)=>{const U=S.getBoundingClientRect(),te=U.width/n,pe=(X-U.left)/te,Y=(Z-U.top)/te,ce=5,Oe=es(ft,Ue,n,void 0,Ye);let at=0,ot=0;re instanceof MouseEvent&&(at=re.button,ot=re.buttons);const nt=ih(pe,Oe,Ye),Le=sh(Y,r,v,a,u,m,h,l,be,j),fe=re?.shiftKey===!0,Ft=re?.ctrlKey===!0,it=re?.metaKey===!0,pt=re!==void 0&&!(re instanceof MouseEvent)||re?.pointerType==="touch",mr=[pe<0?-1:n<pe?1:0,Y<ut?-1:r<Y?1:0];let tn;if(nt===-1||Y<0||pe<0||Le===void 0||pe>n||Y>r){const _e=pe>n?1:pe<0?-1:0,nn=Y>r?1:Y<0?-1:0;let At=_e*2,Dn=nn*2;_e===0&&(At=nt===-1?Hr.EndPadding:Hr.Center),nn===0&&(Dn=Le===void 0?Hr.EndPadding:Hr.Center);let rn=!1;if(nt===-1&&Le===-1){const hn=dt(S,ft.length-1,-1);Xt(hn!==void 0),rn=X<hn.x+hn.width+ce}const Wr=pe>n&&pe<n+qi()||Y>r&&Y<r+qi();tn={kind:oi,location:[nt!==-1?nt:pe<0?0:ft.length-1,Le??m-1],region:[At,Dn],shiftKey:fe,ctrlKey:Ft,metaKey:it,isEdge:rn,isTouch:pt,button:at,buttons:ot,scrollEdge:mr,isMaybeScrollbar:Wr}}else if(Le<=-1){let _e=dt(S,nt,Le);Xt(_e!==void 0);let nn=_e!==void 0&&_e.x+_e.width-X<=ce;const At=nt-1;X-_e.x<=ce&&At>=0?(nn=!0,_e=dt(S,At,Le),Xt(_e!==void 0),tn={kind:v&&Le===-2?Vt:Ln,location:[At,Le],bounds:_e,group:ft[At].group??"",isEdge:nn,shiftKey:fe,ctrlKey:Ft,metaKey:it,isTouch:pt,localEventX:X-_e.x,localEventY:Z-_e.y,button:at,buttons:ot,scrollEdge:mr}):tn={kind:v&&Le===-2?Vt:Ln,group:ft[nt].group??"",location:[nt,Le],bounds:_e,isEdge:nn,shiftKey:fe,ctrlKey:Ft,metaKey:it,isTouch:pt,localEventX:X-_e.x,localEventY:Z-_e.y,button:at,buttons:ot,scrollEdge:mr}}else{const _e=dt(S,nt,Le);Xt(_e!==void 0);const nn=_e!==void 0&&_e.x+_e.width-X<ce;let At=!1;if(c&&b.current!==void 0){const Dn=ya(b.current.range),rn=dt(S,Dn[0],Dn[1]);if(rn!==void 0){const Wr=rn.x+rn.width-2,hn=rn.y+rn.height-2;At=Math.abs(Wr-X)<fl&&Math.abs(hn-Z)<fl}}tn={kind:"cell",location:[nt,Le],bounds:_e,isEdge:nn,shiftKey:fe,ctrlKey:Ft,isFillHandle:At,metaKey:it,isTouch:pt,localEventX:X-_e.x,localEventY:Z-_e.y,button:at,buttons:ot,scrollEdge:mr}}return tn},[n,ft,Ue,Ye,r,v,a,u,m,h,l,be,j,dt,c,b,ut]),[bn]=bt??[],vo=d.useRef(()=>{}),Qt=d.useRef(bt);Qt.current=bt;const[jn,Vn]=d.useMemo(()=>{const S=document.createElement("canvas"),X=document.createElement("canvas");return S.style.display="none",S.style.opacity="0",S.style.position="fixed",X.style.display="none",X.style.opacity="0",X.style.position="fixed",[S,X]},[]);d.useLayoutEffect(()=>(document.documentElement.append(jn),document.documentElement.append(Vn),()=>{jn.remove(),Vn.remove()}),[jn,Vn]);const or=d.useMemo(()=>new ph,[]),xo=fn&&Nt?1:$r&&Nt?2:5,ko=De?.disableMinimumCellWidth===!0?1:10,ir=d.useRef(),sr=d.useCallback(()=>{const S=Ze.current,X=cn.current;if(S===null||X===null)return;let Z=!1;const re=pe=>{Z=!0,un(pe)},U=ir.current,te={canvas:S,bufferA:jn,bufferB:Vn,headerCanvas:X,width:n,height:r,cellXOffset:Ue,cellYOffset:l,translateX:Math.round(Ye),translateY:Math.round(be),mappedColumns:ft,enableGroups:v,freezeColumns:P,dragAndDropState:xe,theme:$e,headerHeight:a,groupHeaderHeight:u,disabledRows:He??ze.empty(),rowHeight:h,verticalBorder:ae,isResizing:Re,resizeCol:le,isFocused:M,selection:b,fillHandle:c,drawCellCallback:ee,hasAppendRow:Ve,overrideCursor:re,maxScaleFactor:xo,freezeTrailingRows:j,rows:m,drawFocus:W,getCellContent:p,getGroupDetails:me??(pe=>({name:pe})),getRowThemeOverride:g,drawHeaderCallback:Ie,prelightCells:qe,highlightRegions:q,imageLoader:Tt,lastBlitData:yn,damage:Pt.current,hoverValues:mt.current,hoverInfo:Qt.current,spriteManager:Ke,scrolling:Nt,hyperWrapping:De?.hyperWrapping??!1,touchMode:Ct,enqueue:vo.current,renderStateProvider:or,renderStrategy:De?.renderStrategy??(ni.value?"double-buffer":"single-buffer"),getCellRenderer:tt,minimumCellWidth:ko};te.damage===void 0?(ir.current=te,ul(te,U)):ul(te,void 0),!Z&&(te.damage===void 0||te.damage.has(Qt?.current?.[0]))&&un(void 0)},[jn,Vn,n,r,Ue,l,Ye,be,ft,v,P,xe,$e,a,u,He,h,ae,Re,Ve,le,M,b,c,j,m,W,xo,p,me,g,ee,Ie,qe,q,Tt,Ke,Nt,De?.hyperWrapping,De?.renderStrategy,Ct,or,tt,ko]),Jt=d.useRef(sr);d.useLayoutEffect(()=>{sr(),Jt.current=sr},[sr]),d.useLayoutEffect(()=>{(async()=>{document?.fonts?.ready!==void 0&&(await document.fonts.ready,ir.current=void 0,Jt.current())})()},[]);const Mn=d.useCallback(S=>{Pt.current=S,Jt.current(),Pt.current=void 0},[]),gi=Pg(Mn);vo.current=gi;const Co=d.useCallback(S=>{Mn(new ho(S.map(X=>X.cell)))},[Mn]);Tt.setCallback(Mn);const[mi,pi]=d.useState(!1),[Xn,Rn]=bn??[],wi=Xn!==void 0&&Rn===-1,yi=Xn!==void 0&&Rn===-2;let So=!1,_r=!1,lr=dn;if(lr===void 0&&Xn!==void 0&&Rn!==void 0&&Rn>-1&&Rn<m){const S=p([Xn,Rn],!0);So=S.kind===Zt.NewRow||S.kind===Zt.Marker&&S.markerKind!=="number",_r=S.kind===J.Boolean&&Gi(S),lr=S.cursor}const Mo=We?"grabbing":(Xe??!1)||Re?"col-resize":mi||x?"crosshair":lr!==void 0?lr:wi||So||_r||yi?"pointer":"default",Yn=d.useMemo(()=>({contain:"strict",display:"block",cursor:Mo}),[Mo]),vn=d.useRef("default"),En=oe?.current;En!=null&&vn.current!==Yn.cursor&&(En.style.cursor=vn.current=Yn.cursor);const Tn=d.useCallback((S,X,Z,re)=>{if(me===void 0)return;const U=me(S);if(U.actions!==void 0){const te=Fa(X,U.actions);for(const[pe,Y]of te.entries())if(ui(Y,Z+X.x,re+Y.y))return U.actions[pe]}},[me]),Un=d.useCallback((S,X,Z,re)=>{const U=i[X];if(!We&&!Re&&U.hasMenu===!0&&!(Xe??!1)){const te=dt(S,X,-1);Xt(te!==void 0);const pe=Ha(te.x,te.y,te.width,te.height,cs(U.title)==="rtl");if(Z>pe.x&&Z<pe.x+pe.width&&re>pe.y&&re<pe.y+pe.height)return te}},[i,dt,Xe,We,Re]),ar=d.useRef(0),Kn=d.useRef(),It=d.useRef(!1),cr=d.useCallback(S=>{const X=Ze.current,Z=oe?.current;if(X===null||S.target!==X&&S.target!==Z)return;It.current=!0;let re,U;if(S instanceof MouseEvent?(re=S.clientX,U=S.clientY):(re=S.touches[0].clientX,U=S.touches[0].clientY),S.target===Z&&Z!==null){const pe=Z.getBoundingClientRect();if(re>pe.right||U>pe.bottom)return}const te=vt(X,re,U,S);Kn.current=te.location,te.isTouch&&(ar.current=Date.now()),ct.current!==te.isTouch&&Se(te.isTouch),!(te.kind===Ln&&Un(X,te.location[0],re,U)!==void 0)&&(te.kind===Vt&&Tn(te.group,te.bounds,te.localEventX,te.localEventY)!==void 0||(D?.(te),!te.isTouch&&je!==!0&&je!==te.kind&&te.button<3&&te.button!==1&&S.preventDefault()))},[oe,je,vt,Tn,Un,D]);Et("touchstart",cr,window,!1),Et("mousedown",cr,window,!1);const Nr=d.useRef(0),Or=d.useCallback(S=>{const X=Nr.current;Nr.current=Date.now();const Z=Ze.current;if(It.current=!1,H===void 0||Z===null)return;const re=oe?.current,U=S.target!==Z&&S.target!==re;let te,pe,Y=!0;if(S instanceof MouseEvent){if(te=S.clientX,pe=S.clientY,Y=S.button<3,S.pointerType==="touch")return}else te=S.changedTouches[0].clientX,pe=S.changedTouches[0].clientY;let ce=vt(Z,te,pe,S);ce.isTouch&&ar.current!==0&&Date.now()-ar.current>500&&(ce={...ce,isLongTouch:!0}),X!==0&&Date.now()-X<(ce.isTouch?1e3:500)&&(ce={...ce,isDoubleClick:!0}),ct.current!==ce.isTouch&&Se(ce.isTouch),!U&&S.cancelable&&Y&&S.preventDefault();const[Oe]=ce.location,at=Un(Z,Oe,te,pe);if(ce.kind===Ln&&at!==void 0){(ce.button!==0||Kn.current?.[0]!==Oe||Kn.current?.[1]!==-1)&&H(ce,!0);return}else if(ce.kind===Vt){const ot=Tn(ce.group,ce.bounds,ce.localEventX,ce.localEventY);if(ot!==void 0){ce.button===0&&ot.onClick(ce);return}}H(ce,U)},[H,oe,vt,Un,Tn]);Et("mouseup",Or,window,!1),Et("touchend",Or,window,!1);const bi=d.useCallback(S=>{const X=Ze.current;if(X===null)return;const Z=oe?.current,re=S.target!==X&&S.target!==Z;let U,te,pe=!0;S instanceof MouseEvent?(U=S.clientX,te=S.clientY,pe=S.button<3):(U=S.changedTouches[0].clientX,te=S.changedTouches[0].clientY);const Y=vt(X,U,te,S);ct.current!==Y.isTouch&&Se(Y.isTouch),!re&&S.cancelable&&pe&&S.preventDefault();const[ce]=Y.location,Oe=Un(X,ce,U,te);if(Y.kind===Ln&&Oe!==void 0)Y.button===0&&Kn.current?.[0]===ce&&Kn.current?.[1]===-1&&w?.(ce,Oe);else if(Y.kind===Vt){const at=Tn(Y.group,Y.bounds,Y.localEventX,Y.localEventY);at!==void 0&&Y.button===0&&at.onClick(Y)}},[oe,vt,Un,w,Tn]);Et("click",bi,window,!1);const vi=d.useCallback(S=>{const X=Ze.current,Z=oe?.current;if(X===null||S.target!==X&&S.target!==Z||F===void 0)return;const re=vt(X,S.clientX,S.clientY,S);F(re,()=>{S.cancelable&&S.preventDefault()})},[oe,vt,F]);Et("contextmenu",vi,oe?.current??null,!1);const en=d.useCallback(S=>{Pt.current=new ho(S.map(X=>X.item)),mt.current=S,Jt.current(),Pt.current=void 0},[]),xn=d.useMemo(()=>new Ag(en),[en]),Ot=d.useRef(xn);Ot.current=xn,d.useLayoutEffect(()=>{const S=Ot.current;if(bn===void 0||bn[1]<0){S.setHovered(bn);return}const X=p(bn,!0),Z=tt(X);S.setHovered(Z===void 0&&X.kind===J.Custom||Z?.needsHover===!0?bn:void 0)},[p,tt,bn]);const z=d.useRef(),Mt=d.useCallback(S=>{const X=Ze.current;if(X===null)return;const Z=oe?.current,re=S.target!==X&&S.target!==Z,U=vt(X,S.clientX,S.clientY,S);if(U.kind!=="out-of-bounds"&&re&&!It.current&&!U.isTouch)return;const te=(Y,ce)=>{Kt(Oe=>Oe===Y||Oe?.[0][0]===Y?.[0][0]&&Oe?.[0][1]===Y?.[0][1]&&(Oe?.[1][0]===Y?.[1][0]&&Oe?.[1][1]===Y?.[1][1]||!ce)?Oe:Y)};if(!Pa(U,z.current))he?.(U),te(U.kind===oi?void 0:[U.location,[U.localEventX,U.localEventY]],!0),z.current=U;else if(U.kind==="cell"||U.kind===Ln||U.kind===Vt){let Y=!1,ce=!0;if(U.kind==="cell"){const at=p(U.location);ce=tt(at)?.needsHoverPosition??at.kind===J.Custom,Y=ce}else U.kind===Vt&&(Y=!0);const Oe=[U.location,[U.localEventX,U.localEventY]];te(Oe,ce),Qt.current=Oe,Y&&Mn(new ho([U.location]))}const pe=U.location[0]>=(de?0:1);Qe(U.kind===Ln&&U.isEdge&&pe&&Fe===!0),pi(U.kind==="cell"&&U.isFillHandle),_?.(S),G(U)},[oe,vt,de,Fe,_,G,he,p,tt,Mn]);Et("mousemove",Mt,window,!0);const Bt=d.useCallback(S=>{const X=Ze.current;if(X===null)return;let Z,re;b.current!==void 0&&(Z=dt(X,b.current.cell[0],b.current.cell[1]),re=b.current.cell),Be?.({bounds:Z,stopPropagation:()=>S.stopPropagation(),preventDefault:()=>S.preventDefault(),cancel:()=>{},ctrlKey:S.ctrlKey,metaKey:S.metaKey,shiftKey:S.shiftKey,altKey:S.altKey,key:S.key,keyCode:S.keyCode,rawEvent:S,location:re})},[Be,b,dt]),xi=d.useCallback(S=>{const X=Ze.current;if(X===null)return;let Z,re;b.current!==void 0&&(Z=dt(X,b.current.cell[0],b.current.cell[1]),re=b.current.cell),ne?.({bounds:Z,stopPropagation:()=>S.stopPropagation(),preventDefault:()=>S.preventDefault(),cancel:()=>{},ctrlKey:S.ctrlKey,metaKey:S.metaKey,shiftKey:S.shiftKey,altKey:S.altKey,key:S.key,keyCode:S.keyCode,rawEvent:S,location:re})},[ne,b,dt]),Ro=d.useCallback(S=>{Ze.current=S,se!==void 0&&(se.current=S)},[se]),ki=d.useCallback(S=>{const X=Ze.current;if(X===null||je===!1||Re){S.preventDefault();return}let Z,re;const U=vt(X,S.clientX,S.clientY);if(je!==!0&&U.kind!==je){S.preventDefault();return}const te=(ot,nt)=>{Z=ot,re=nt};let pe,Y,ce;const Oe=(ot,nt,Le)=>{pe=ot,Y=nt,ce=Le};let at=!1;if(Q?.({...U,setData:te,setDragImage:Oe,preventDefault:()=>at=!0,defaultPrevented:()=>at}),!at&&Z!==void 0&&re!==void 0&&S.dataTransfer!==null)if(S.dataTransfer.setData(Z,re),S.dataTransfer.effectAllowed="copyLink",pe!==void 0&&Y!==void 0&&ce!==void 0)S.dataTransfer.setDragImage(pe,Y,ce);else{const[ot,nt]=U.location;if(nt!==void 0){const Le=document.createElement("canvas"),fe=dt(X,ot,nt);Xt(fe!==void 0);const Ft=Math.ceil(window.devicePixelRatio??1);Le.width=fe.width*Ft,Le.height=fe.height*Ft;const it=Le.getContext("2d");it!==null&&(it.scale(Ft,Ft),it.textBaseline="middle",nt===-1?(it.font=$e.headerFontFull,it.fillStyle=$e.bgHeader,it.fillRect(0,0,Le.width,Le.height),Aa(it,0,0,fe.width,fe.height,ft[ot],!1,$e,!1,!1,0,Ke,Ie,!1)):(it.font=$e.baseFontFull,it.fillStyle=$e.bgCell,it.fillRect(0,0,Le.width,Le.height),Da(it,p([ot,nt]),0,nt,!1,!1,0,0,fe.width,fe.height,!1,$e,$e.bgCell,Tt,Ke,1,void 0,!1,0,void 0,void 0,void 0,or,tt,()=>{}))),Le.style.left="-100%",Le.style.position="absolute",Le.style.width=`${fe.width}px`,Le.style.height=`${fe.height}px`,document.body.append(Le),S.dataTransfer.setDragImage(Le,fe.width/2,fe.height/2),window.setTimeout(()=>{Le.remove()},0)}}else S.preventDefault()},[je,Re,vt,Q,dt,$e,ft,Ke,Ie,p,Tt,or,tt]);Et("dragstart",ki,oe?.current??null,!1,!1);const Br=d.useRef(),Ss=d.useCallback(S=>{const X=Ze.current;if(Ne!==void 0&&S.preventDefault(),X===null||we===void 0)return;const Z=vt(X,S.clientX,S.clientY),[re,U]=Z.location,te=re-(de?0:1),[pe,Y]=Br.current??[];(pe!==te||Y!==U)&&(Br.current=[te,U],we([te,U],S.dataTransfer))},[de,vt,we,Ne]);Et("dragover",Ss,oe?.current??null,!1,!1);const N=d.useCallback(()=>{Br.current=void 0,ke?.()},[ke]);Et("dragend",N,oe?.current??null,!1,!1);const Gt=d.useCallback(S=>{const X=Ze.current;if(X===null||Ne===void 0)return;S.preventDefault();const Z=vt(X,S.clientX,S.clientY),[re,U]=Z.location,te=re-(de?0:1);Ne([te,U],S.dataTransfer)},[de,vt,Ne]);Et("drop",Gt,oe?.current??null,!1,!1);const xt=d.useCallback(()=>{ue?.()},[ue]);Et("dragleave",xt,oe?.current??null,!1,!1);const Eo=d.useRef(b);Eo.current=b;const dr=d.useRef(null),In=d.useCallback(S=>{Ze.current===null||!Ze.current.contains(document.activeElement)||(S===null&&Eo.current.current!==void 0?se?.current?.focus({preventScroll:!0}):S!==null&&S.focus({preventScroll:!0}),dr.current=S)},[se]);d.useImperativeHandle(t,()=>({focus:()=>{const S=dr.current;S===null||!document.contains(S)?se?.current?.focus({preventScroll:!0}):S.focus({preventScroll:!0})},getBounds:(S,X)=>{if(!(se===void 0||se.current===null))return dt(se.current,S??0,X??-1)},damage:Co}),[se,Co,dt]);const Dt=d.useRef(),ur=tf(()=>{if(n<50||De?.disableAccessibilityTree===!0)return null;let S=es(ft,Ue,n,xe,Ye);const X=de?0:-1;!de&&S[0]?.sourceIndex===0&&(S=S.slice(1));const[Z,re]=b.current?.cell??[],U=b.current?.range,te=S.map(Y=>Y.sourceIndex),pe=er(l,Math.min(m,l+o));return Z!==void 0&&re!==void 0&&!(te.includes(Z)&&pe.includes(re))&&In(null),d.createElement("table",{key:"access-tree",role:"grid","aria-rowcount":m+1,"aria-multiselectable":"true","aria-colcount":ft.length+X},d.createElement("thead",{role:"rowgroup"},d.createElement("tr",{role:"row","aria-rowindex":1},S.map(Y=>d.createElement("th",{role:"columnheader","aria-selected":b.columns.hasIndex(Y.sourceIndex),"aria-colindex":Y.sourceIndex+1+X,tabIndex:-1,onFocus:ce=>{if(ce.target!==dr.current)return ge?.([Y.sourceIndex,-1])},key:Y.sourceIndex},Y.title)))),d.createElement("tbody",{role:"rowgroup"},pe.map(Y=>d.createElement("tr",{role:"row","aria-selected":b.rows.hasIndex(Y),key:Y,"aria-rowindex":Y+2},S.map(ce=>{const Oe=ce.sourceIndex,at=ln(Oe,Y),ot=Z===Oe&&re===Y,nt=U!==void 0&&Oe>=U.x&&Oe<U.x+U.width&&Y>=U.y&&Y<U.y+U.height,Le=`glide-cell-${Oe}-${Y}`,fe=[Oe,Y],Ft=p(fe,!0);return d.createElement("td",{key:at,role:"gridcell","aria-colindex":Oe+1+X,"aria-selected":nt,"aria-readonly":Dr(Ft)||!no(Ft),id:Le,"data-testid":Le,onClick:()=>{const it=se?.current;if(it!=null)return Be?.({bounds:dt(it,Oe,Y),cancel:()=>{},preventDefault:()=>{},stopPropagation:()=>{},ctrlKey:!1,key:"Enter",keyCode:13,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:fe})},onFocusCapture:it=>{if(!(it.target===dr.current||Dt.current?.[0]===Oe&&Dt.current?.[1]===Y))return Dt.current=fe,ge?.(fe)},ref:ot?In:void 0,tabIndex:-1},$g(Ft,tt))})))))},[n,ft,Ue,xe,Ye,m,l,o,b,In,p,se,Be,dt,ge],200),fr=P===0||!I?0:Ue>P?1:sn(-Ye/100,0,1),Ci=-l*32+be,hr=B?sn(-Ci/100,0,1):0,Si=d.useMemo(()=>{if(!fr&&!hr)return null;const S={position:"absolute",top:0,left:Wn,width:n-Wn,height:r,opacity:fr,pointerEvents:"none",transition:Ce?void 0:"opacity 0.2s",boxShadow:"inset 13px 0 10px -13px rgba(0, 0, 0, 0.2)"},X={position:"absolute",top:ut,left:0,width:n,height:r,opacity:hr,pointerEvents:"none",transition:lt?void 0:"opacity 0.2s",boxShadow:"inset 0 13px 10px -13px rgba(0, 0, 0, 0.2)"};return d.createElement(d.Fragment,null,fr>0&&d.createElement("div",{id:"shadow-x",style:S}),hr>0&&d.createElement("div",{id:"shadow-y",style:X}))},[fr,hr,Wn,n,Ce,ut,r,lt]),gr=d.useMemo(()=>({position:"absolute",top:0,left:0}),[]);return d.createElement(d.Fragment,null,d.createElement("canvas",{"data-testid":"data-grid-canvas",tabIndex:0,onKeyDown:Bt,onKeyUp:xi,onFocus:y,onBlur:E,ref:Ro,style:Yn},ur),d.createElement("canvas",{ref:cn,style:gr}),Si)},Ng=d.memo(d.forwardRef(_g));function to(e,t,n,r){return sn(Math.round(t-(e.growOffset??0)),Math.ceil(n),Math.floor(r))}const Og=e=>{const[t,n]=d.useState(),[r,o]=d.useState(),[i,s]=d.useState(),[l,a]=d.useState(),[c,u]=d.useState(!1),[h,m]=d.useState(),[p,g]=d.useState(),[w,v]=d.useState(),[x,y]=d.useState(!1),[E,M]=d.useState(),{onHeaderMenuClick:b,getCellContent:P,onColumnMoved:F,onColumnResize:j,onColumnResizeStart:I,onColumnResizeEnd:B,gridRef:W,maxColumnWidth:D,minColumnWidth:H,onRowMoved:_,lockColumns:G,onColumnProposeMove:he,onMouseDown:xe,onMouseUp:de,onItemHovered:Be,onDragStart:ne,canvasRef:q}=e,se=(j??B??I)!==void 0,{columns:Q,selection:ke}=e,oe=ke.columns,Re=d.useCallback(ae=>{const[ee,Ie]=ae.location;i!==void 0&&l!==ee&&ee>=G?(u(!0),a(ee)):p!==void 0&&Ie!==void 0?(y(!0),v(Math.max(0,Ie))):Be?.(ae)},[i,p,l,Be,G]),le=F!==void 0,We=d.useCallback(ae=>{if(ae.button===0){const[ee,Ie]=ae.location;if(ae.kind==="out-of-bounds"&&ae.isEdge&&se){const ge=W?.current?.getBounds(Q.length-1,-1);ge!==void 0&&(n(ge.x),o(Q.length-1))}else if(ae.kind==="header"&&ee>=G){const ge=q?.current;if(ae.isEdge&&se&&ge){n(ae.bounds.x),o(ee);const Ne=ge.getBoundingClientRect().width/ge.offsetWidth,ue=ae.bounds.width/Ne;I?.(Q[ee],ue,ee,ue+(Q[ee].growOffset??0))}else ae.kind==="header"&&le&&(m(ae.bounds.x),s(ee))}else ae.kind==="cell"&&G>0&&ee===0&&Ie!==void 0&&_!==void 0&&(M(ae.bounds.y),g(Ie))}xe?.(ae)},[xe,se,G,_,W,Q,le,I,q]),je=d.useCallback((ae,ee)=>{c||x||b?.(ae,ee)},[c,x,b]),Fe=d.useRef(-1),He=d.useCallback(()=>{Fe.current=-1,g(void 0),v(void 0),M(void 0),y(!1),s(void 0),a(void 0),m(void 0),u(!1),o(void 0),n(void 0)},[]),Ve=d.useCallback((ae,ee)=>{if(ae.button===0){if(r!==void 0){if(oe?.hasIndex(r)===!0)for(const ge of oe){if(ge===r)continue;const we=Q[ge],Ne=to(we,Fe.current,H,D);j?.(we,Ne,ge,Ne+(we.growOffset??0))}const Ie=to(Q[r],Fe.current,H,D);if(B?.(Q[r],Ie,r,Ie+(Q[r].growOffset??0)),oe.hasIndex(r))for(const ge of oe){if(ge===r)continue;const we=Q[ge],Ne=to(we,Fe.current,H,D);B?.(we,Ne,ge,Ne+(we.growOffset??0))}}He(),i!==void 0&&l!==void 0&&F?.(i,l),p!==void 0&&w!==void 0&&_?.(p,w)}de?.(ae,ee)},[de,r,i,l,p,w,oe,B,Q,H,D,j,F,_,He]),me=d.useMemo(()=>{if(!(i===void 0||l===void 0)&&i!==l&&he?.(i,l)!==!1)return{src:i,dest:l}},[i,l,he]),$e=d.useCallback(ae=>{const ee=q?.current;if(i!==void 0&&h!==void 0)Math.abs(ae.clientX-h)>20&&u(!0);else if(p!==void 0&&E!==void 0)Math.abs(ae.clientY-E)>20&&y(!0);else if(r!==void 0&&t!==void 0&&ee){const ge=ee.getBoundingClientRect().width/ee.offsetWidth,we=(ae.clientX-t)/ge,Ne=Q[r],ue=to(Ne,we,H,D);if(j?.(Ne,ue,r,ue+(Ne.growOffset??0)),Fe.current=we,oe?.first()===r)for(const Ae of oe){if(Ae===r)continue;const Ce=Q[Ae],lt=to(Ce,Fe.current,H,D);j?.(Ce,lt,Ae,lt+(Ce.growOffset??0))}}},[i,h,p,E,r,t,Q,H,D,j,oe,q]),qe=d.useCallback((ae,ee)=>{if(p===void 0||w===void 0)return P(ae,ee);let[Ie,ge]=ae;return ge===w?ge=p:(ge>w&&(ge-=1),ge>=p&&(ge+=1)),P([Ie,ge],ee)},[p,w,P]),gt=d.useCallback(ae=>{ne?.(ae),ae.defaultPrevented()||He()},[He,ne]);return d.createElement(Ng,{accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,enableGroups:e.enableGroups,eventTargetRef:e.eventTargetRef,experimental:e.experimental,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,headerIcons:e.headerIcons,height:e.height,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,resizeColumn:r,isDraggable:e.isDraggable,isFilling:e.isFilling,isFocused:e.isFocused,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDrop:e.onDrop,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,width:e.width,getCellContent:qe,isResizing:r!==void 0,onHeaderMenuClick:je,isDragging:c,onItemHovered:Re,onDragStart:gt,onMouseDown:We,allowResize:se,onMouseUp:Ve,dragAndDropState:me,onMouseMoveRaw:$e,ref:W})};function Bg(e){const t=d.useRef(null),[n,r]=d.useState({width:e?.[0],height:e?.[1]});return d.useLayoutEffect(()=>{const o=s=>{for(const l of s){const{width:a,height:c}=l&&l.contentRect||{};r(u=>u.width===a&&u.height===c?u:{width:a,height:c})}},i=new window.ResizeObserver(o);return t.current&&i.observe(t.current,void 0),()=>{i.disconnect()}},[t.current]),{ref:t,...n}}const Wg=(e,t,n)=>{const r=d.useRef(null),o=d.useRef(null),i=d.useRef(null),s=d.useRef(0),l=d.useRef(t);l.current=t;const a=n.current;d.useEffect(()=>{const c=()=>{if(o.current===!1&&a!==null){const m=[a.scrollLeft,a.scrollTop];if(i.current?.[0]===m[0]&&i.current?.[1]===m[1])if(s.current>10){i.current=null,o.current=null;return}else s.current++;else s.current=0,l.current(m[0],m[1]),i.current=m;r.current=window.setTimeout(c,8.333333333333334)}},u=()=>{o.current=!0,i.current=null,r.current!==null&&(window.clearTimeout(r.current),r.current=null)},h=m=>{m.touches.length===0&&(o.current=!1,s.current=0,r.current=window.setTimeout(c,8.333333333333334))};if(e&&a!==null){const m=a;return m.addEventListener("touchstart",u),m.addEventListener("touchend",h),()=>{m.removeEventListener("touchstart",u),m.removeEventListener("touchend",h),r.current!==null&&window.clearTimeout(r.current)}}},[e,a])},jg=()=>e=>e.isSafari?"scroll":"auto",Vg=Ut("div")({name:"ScrollRegionStyle",class:"gdg-s1dgczr6",propsAsIs:!1,vars:{"s1dgczr6-0":[jg()]}});function Xg(e){const[t,n]=d.useState(!1),r=typeof window>"u"?null:window,o=d.useRef(0);return Et("touchstart",d.useCallback(()=>{window.clearTimeout(o.current),n(!0)},[]),r,!0,!1),Et("touchend",d.useCallback(i=>{i.touches.length===0&&(o.current=window.setTimeout(()=>n(!1),e))},[e]),r,!0,!1),t}const Yg=e=>{const{children:t,clientHeight:n,scrollHeight:r,scrollWidth:o,update:i,draggable:s,className:l,preventDiagonalScrolling:a=!1,paddingBottom:c=0,paddingRight:u=0,rightElement:h,rightElementProps:m,kineticScrollPerfHack:p=!1,scrollRef:g,initialSize:w}=e,v=[],x=m?.sticky??!1,y=m?.fill??!1,E=d.useRef(0),M=d.useRef(0),b=d.useRef(null),P=typeof window>"u"?1:window.devicePixelRatio,F=d.useRef({scrollLeft:0,scrollTop:0,lockDirection:void 0}),j=d.useRef(null),I=Xg(200),[B,W]=d.useState(!0),D=d.useRef(0);d.useLayoutEffect(()=>{if(!B||I||F.current.lockDirection===void 0)return;const Q=b.current;if(Q===null)return;const[ke,oe]=F.current.lockDirection;ke!==void 0?Q.scrollLeft=ke:oe!==void 0&&(Q.scrollTop=oe),F.current.lockDirection=void 0},[I,B]);const H=d.useCallback((Q,ke)=>{const oe=b.current;if(oe===null)return;ke=ke??oe.scrollTop,Q=Q??oe.scrollLeft;const Re=F.current.scrollTop,le=F.current.scrollLeft,We=Q-le,je=ke-Re;I&&We!==0&&je!==0&&(Math.abs(We)>3||Math.abs(je)>3)&&a&&F.current.lockDirection===void 0&&(F.current.lockDirection=Math.abs(We)<Math.abs(je)?[le,void 0]:[void 0,Re]);const Fe=F.current.lockDirection;Q=Fe?.[0]??Q,ke=Fe?.[1]??ke,F.current.scrollLeft=Q,F.current.scrollTop=ke;const He=oe.clientWidth,Ve=oe.clientHeight,me=ke,$e=M.current-me,qe=oe.scrollHeight-Ve;if(M.current=me,qe>0&&(Math.abs($e)>2e3||me===0||me===qe)&&r>oe.scrollHeight+5){const gt=me/qe,ae=(r-Ve)*gt;E.current=ae-me}Fe!==void 0&&(window.clearTimeout(D.current),W(!1),D.current=window.setTimeout(()=>W(!0),200)),i({x:Q,y:me+E.current,width:He-u,height:Ve-c,paddingRight:j.current?.clientWidth??0})},[c,u,r,i,a,I]);Wg(p&&ni.value,H,b);const _=d.useRef(H);_.current=H;const G=d.useRef(),he=d.useRef(!1);d.useLayoutEffect(()=>{he.current?H():he.current=!0},[H,c,u]);const xe=d.useCallback(Q=>{b.current=Q,g!==void 0&&(g.current=Q)},[g]);let de=0,Be=0;for(v.push(d.createElement("div",{key:de++,style:{width:o,height:0}}));Be<r;){const Q=Math.min(5e6,r-Be);v.push(d.createElement("div",{key:de++,style:{width:0,height:Q}})),Be+=Q}const{ref:ne,width:q,height:se}=Bg(w);return typeof window<"u"&&(G.current?.height!==se||G.current?.width!==q)&&(window.setTimeout(()=>_.current(),0),G.current={width:q,height:se}),(q??0)===0||(se??0)===0?d.createElement("div",{ref:ne}):d.createElement("div",{ref:ne},d.createElement(Vg,{isSafari:ni.value},d.createElement("div",{className:"dvn-underlay"},t),d.createElement("div",{ref:xe,style:G.current,draggable:s,onDragStart:Q=>{s||(Q.stopPropagation(),Q.preventDefault())},className:"dvn-scroller "+(l??""),onScroll:()=>H()},d.createElement("div",{className:"dvn-scroll-inner"+(h===void 0?" dvn-hidden":"")},d.createElement("div",{className:"dvn-stack"},v),h!==void 0&&d.createElement(d.Fragment,null,!y&&d.createElement("div",{className:"dvn-spacer"}),d.createElement("div",{ref:j,style:{height:se,maxHeight:n-Math.ceil(P%1),position:"sticky",top:0,paddingLeft:1,marginBottom:-40,marginRight:u,flexGrow:y?1:void 0,right:x?u??0:void 0,pointerEvents:"auto"}},h))))))},Ug=e=>{const{columns:t,rows:n,rowHeight:r,headerHeight:o,groupHeaderHeight:i,enableGroups:s,freezeColumns:l,experimental:a,nonGrowWidth:c,clientSize:u,className:h,onVisibleRegionChanged:m,scrollRef:p,preventDiagonalScrolling:g,rightElement:w,rightElementProps:v,overscrollX:x,overscrollY:y,initialSize:E,smoothScrollX:M=!1,smoothScrollY:b=!1,isDraggable:P}=e,{paddingRight:F,paddingBottom:j}=a??{},[I,B]=u,W=d.useRef(),D=d.useRef(),H=d.useRef(),_=d.useRef(),G=c+Math.max(0,x??0);let he=s?o+i:o;if(typeof r=="number")he+=n*r;else for(let ne=0;ne<n;ne++)he+=r(ne);y!==void 0&&(he+=y);const xe=d.useRef(),de=d.useCallback(()=>{if(xe.current===void 0)return;const ne={...xe.current};let q=0,se=ne.x<0?-ne.x:0,Q=0,ke=0;ne.x=ne.x<0?0:ne.x;let oe=0;for(let He=0;He<l;He++)oe+=t[He].width;for(const He of t){const Ve=q-oe;if(ne.x>=Ve+He.width)q+=He.width,ke++,Q++;else if(ne.x>Ve)q+=He.width,M?se+=Ve-ne.x:ke++,Q++;else if(ne.x+ne.width>Ve)q+=He.width,Q++;else break}let Re=0,le=0,We=0;if(typeof r=="number")b?(le=Math.floor(ne.y/r),Re=le*r-ne.y):le=Math.ceil(ne.y/r),We=Math.ceil(ne.height/r)+le,Re<0&&We++;else{let He=0;for(let Ve=0;Ve<n;Ve++){const me=r(Ve),$e=He+(b?0:me/2);if(ne.y>=He+me)He+=me,le++,We++;else if(ne.y>$e)He+=me,b?Re+=$e-ne.y:le++,We++;else if(ne.y+ne.height>me/2+He)He+=me,We++;else break}}const je={x:ke,y:le,width:Q-ke,height:We-le},Fe=W.current;(Fe===void 0||Fe.y!==je.y||Fe.x!==je.x||Fe.height!==je.height||Fe.width!==je.width||D.current!==se||H.current!==Re||ne.width!==_.current?.[0]||ne.height!==_.current?.[1])&&(m?.({x:ke,y:le,width:Q-ke,height:We-le},ne.width,ne.height,ne.paddingRight??0,se,Re),W.current=je,D.current=se,H.current=Re,_.current=[ne.width,ne.height])},[t,r,n,m,l,M,b]),Be=d.useCallback(ne=>{xe.current=ne,de()},[de]);return d.useEffect(()=>{de()},[de]),d.createElement(Yg,{scrollRef:p,className:h,kineticScrollPerfHack:a?.kineticScrollPerfHack,preventDiagonalScrolling:g,draggable:P===!0||typeof P=="string",scrollWidth:G+(F??0),scrollHeight:he+(j??0),clientHeight:B,rightElement:w,paddingBottom:j,paddingRight:F,rightElementProps:v,update:Be,initialSize:E},d.createElement(Og,{eventTargetRef:p,width:I,height:B,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onMouseMove:e.onMouseMove,prelightCells:e.prelightCells,rowHeight:e.rowHeight,rows:e.rows,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,onColumnProposeMove:e.onColumnProposeMove,verticalBorder:e.verticalBorder,drawFocusRing:e.drawFocusRing,drawHeader:e.drawHeader,drawCell:e.drawCell,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY}))},Kg=Ut("div")({name:"SearchWrapper",class:"gdg-seveqep",propsAsIs:!1}),Gg=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 244l144-144 144 144M256 120v292"})),qg=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M112 268l144 144 144-144M256 392V100"})),Zg=d.createElement("svg",{className:"button-icon",viewBox:"0 0 512 512"},d.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M368 368L144 144M368 144L144 368"})),Qg=10,Jg=e=>{const{canvasRef:t,cellYOffset:n,rows:r,columns:o,searchInputRef:i,searchValue:s,searchResults:l,onSearchValueChange:a,getCellsForSelection:c,onSearchResultsChanged:u,showSearch:h=!1,onSearchClose:m}=e,[p]=d.useState(()=>"search-box-"+Math.round(Math.random()*1e3)),[g,w]=d.useState(""),v=s??g,x=d.useCallback(q=>{w(q),a?.(q)},[a]),[y,E]=d.useState(),M=d.useRef(y);M.current=y,d.useEffect(()=>{l!==void 0&&(l.length>0?E(q=>({rowsSearched:r,results:l.length,selectedIndex:q?.selectedIndex??-1})):E(void 0))},[r,l]);const b=d.useRef(new AbortController),P=d.useRef(),[F,j]=d.useState([]),I=l??F,B=d.useCallback(()=>{P.current!==void 0&&(window.cancelAnimationFrame(P.current),P.current=void 0,b.current.abort())},[]),W=d.useRef(n);W.current=n;const D=d.useCallback(q=>{const se=new RegExp(q.replace(/([$()*+.?[\\\]^{|}-])/g,"\\$1"),"i");let Q=W.current,ke=Math.min(10,r),oe=0;E(void 0),j([]);const Re=[],le=async()=>{if(c===void 0)return;const We=performance.now(),je=r-oe;let Fe=c({x:0,y:Q,width:o.length,height:Math.min(ke,je,r-Q)},b.current.signal);typeof Fe=="function"&&(Fe=await Fe());let He=!1;for(const[ae,ee]of Fe.entries())for(const[Ie,ge]of ee.entries()){let we;switch(ge.kind){case J.Text:case J.Number:we=ge.displayData;break;case J.Uri:case J.Markdown:we=ge.data;break;case J.Boolean:we=typeof ge.data=="boolean"?ge.data.toString():void 0;break;case J.Image:case J.Bubble:we=ge.data.join("🐳");break;case J.Custom:we=ge.copyData;break}we!==void 0&&se.test(we)&&(Re.push([Ie,ae+Q]),He=!0)}const Ve=performance.now();He&&j([...Re]),oe+=Fe.length,Xt(oe<=r);const me=M.current?.selectedIndex??-1;E({results:Re.length,rowsSearched:oe,selectedIndex:me}),u?.(Re,me),Q+ke>=r?Q=0:Q+=ke;const $e=Ve-We,qe=Math.max($e,1),gt=Qg/qe;ke=Math.ceil(ke*gt),oe<r&&Re.length<1e3&&(P.current=window.requestAnimationFrame(le))};B(),P.current=window.requestAnimationFrame(le)},[B,o.length,c,u,r]),H=d.useCallback(()=>{m?.(),E(void 0),j([]),u?.([],-1),B(),t?.current?.focus()},[B,t,m,u]),_=d.useCallback(q=>{x(q.target.value),l===void 0&&(q.target.value===""?(E(void 0),j([]),B()):D(q.target.value))},[D,B,x,l]);d.useEffect(()=>{h&&i.current!==null&&(x(""),i.current.focus({preventScroll:!0}))},[h,i,x]);const G=d.useCallback(q=>{if(q?.stopPropagation?.(),y===void 0)return;const se=(y.selectedIndex+1)%y.results;E({...y,selectedIndex:se}),u?.(I,se)},[y,u,I]),he=d.useCallback(q=>{if(q?.stopPropagation?.(),y===void 0)return;let se=(y.selectedIndex-1)%y.results;se<0&&(se+=y.results),E({...y,selectedIndex:se}),u?.(I,se)},[u,I,y]),xe=d.useCallback(q=>{(q.ctrlKey||q.metaKey)&&q.nativeEvent.code==="KeyF"||q.key==="Escape"?(H(),q.stopPropagation(),q.preventDefault()):q.key==="Enter"&&(q.shiftKey?he():G())},[H,G,he]);d.useEffect(()=>()=>{B()},[B]);const[de,Be]=d.useState(!1);d.useEffect(()=>{if(h)Be(!0);else{const q=setTimeout(()=>Be(!1),150);return()=>clearTimeout(q)}},[h]);const ne=d.useMemo(()=>{if(!h&&!de)return null;let q;y!==void 0&&(q=y.results>=1e3?"over 1000":`${y.results} result${y.results!==1?"s":""}`,y.selectedIndex>=0&&(q=`${y.selectedIndex+1} of ${q}`));const se=oe=>{oe.stopPropagation()},ke={width:`${Math.floor((y?.rowsSearched??0)/r*100)}%`};return d.createElement(Kg,{className:h?"":"out",onMouseDown:se,onMouseMove:se,onMouseUp:se,onClick:se},d.createElement("div",{className:"gdg-search-bar-inner"},d.createElement("input",{id:p,"aria-hidden":!h,"data-testid":"search-input",ref:i,onChange:_,value:v,tabIndex:h?void 0:-1,onKeyDownCapture:xe}),d.createElement("button",{"aria-label":"Previous Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:he,disabled:(y?.results??0)===0},Gg),d.createElement("button",{"aria-label":"Next Result","aria-hidden":!h,tabIndex:h?void 0:-1,onClick:G,disabled:(y?.results??0)===0},qg),m!==void 0&&d.createElement("button",{"aria-label":"Close Search","aria-hidden":!h,"data-testid":"search-close-button",tabIndex:h?void 0:-1,onClick:H},Zg)),y!==void 0?d.createElement(d.Fragment,null,d.createElement("div",{className:"gdg-search-status"},d.createElement("div",{"data-testid":"search-result-area"},q)),d.createElement("div",{className:"gdg-search-progress",style:ke})):d.createElement("div",{className:"gdg-search-status"},d.createElement("label",{htmlFor:p},"Type to search")))},[h,de,y,r,p,i,_,v,xe,he,G,m,H]);return d.createElement(d.Fragment,null,d.createElement(Ug,{prelightCells:I,accessibilityHeight:e.accessibilityHeight,canvasRef:e.canvasRef,cellXOffset:e.cellXOffset,cellYOffset:e.cellYOffset,className:e.className,clientSize:e.clientSize,columns:e.columns,disabledRows:e.disabledRows,enableGroups:e.enableGroups,fillHandle:e.fillHandle,firstColAccessible:e.firstColAccessible,nonGrowWidth:e.nonGrowWidth,fixedShadowX:e.fixedShadowX,fixedShadowY:e.fixedShadowY,freezeColumns:e.freezeColumns,getCellContent:e.getCellContent,getCellRenderer:e.getCellRenderer,getGroupDetails:e.getGroupDetails,getRowThemeOverride:e.getRowThemeOverride,groupHeaderHeight:e.groupHeaderHeight,headerHeight:e.headerHeight,highlightRegions:e.highlightRegions,imageWindowLoader:e.imageWindowLoader,initialSize:e.initialSize,isFilling:e.isFilling,isFocused:e.isFocused,lockColumns:e.lockColumns,maxColumnWidth:e.maxColumnWidth,minColumnWidth:e.minColumnWidth,onHeaderMenuClick:e.onHeaderMenuClick,onMouseMove:e.onMouseMove,onVisibleRegionChanged:e.onVisibleRegionChanged,overscrollX:e.overscrollX,overscrollY:e.overscrollY,preventDiagonalScrolling:e.preventDiagonalScrolling,rightElement:e.rightElement,rightElementProps:e.rightElementProps,rowHeight:e.rowHeight,rows:e.rows,scrollRef:e.scrollRef,selection:e.selection,theme:e.theme,freezeTrailingRows:e.freezeTrailingRows,hasAppendRow:e.hasAppendRow,translateX:e.translateX,translateY:e.translateY,verticalBorder:e.verticalBorder,onColumnProposeMove:e.onColumnProposeMove,drawFocusRing:e.drawFocusRing,drawCell:e.drawCell,drawHeader:e.drawHeader,experimental:e.experimental,gridRef:e.gridRef,headerIcons:e.headerIcons,isDraggable:e.isDraggable,onCanvasBlur:e.onCanvasBlur,onCanvasFocused:e.onCanvasFocused,onCellFocused:e.onCellFocused,onColumnMoved:e.onColumnMoved,onColumnResize:e.onColumnResize,onColumnResizeEnd:e.onColumnResizeEnd,onColumnResizeStart:e.onColumnResizeStart,onContextMenu:e.onContextMenu,onDragEnd:e.onDragEnd,onDragLeave:e.onDragLeave,onDragOverCell:e.onDragOverCell,onDragStart:e.onDragStart,onDrop:e.onDrop,onItemHovered:e.onItemHovered,onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onRowMoved:e.onRowMoved,smoothScrollX:e.smoothScrollX,smoothScrollY:e.smoothScrollY}),ne)};class e0 extends d.PureComponent{wrapperRef=d.createRef();componentDidMount(){document.addEventListener("touchend",this.clickOutside,!0),document.addEventListener("mousedown",this.clickOutside,!0),document.addEventListener("contextmenu",this.clickOutside,!0)}componentWillUnmount(){document.removeEventListener("touchend",this.clickOutside,!0),document.removeEventListener("mousedown",this.clickOutside,!0),document.removeEventListener("contextmenu",this.clickOutside,!0)}clickOutside=t=>{if(!(this.props.isOutsideClick&&!this.props.isOutsideClick(t))&&this.wrapperRef.current!==null&&!this.wrapperRef.current.contains(t.target)){let n=t.target;for(;n!==null;){if(n.classList.contains("click-outside-ignore"))return;n=n.parentElement}this.props.onClickOutside()}};render(){const{onClickOutside:t,isOutsideClick:n,...r}=this.props;return d.createElement("div",{...r,ref:this.wrapperRef},this.props.children)}}const t0=()=>e=>Math.max(16,e.targetHeight-10),n0=Ut("input")({name:"RenameInput",class:"gdg-r17m35ur",propsAsIs:!1,vars:{"r17m35ur-0":[t0(),"px"]}}),r0=e=>{const{bounds:t,group:n,onClose:r,canvasBounds:o,onFinish:i}=e,[s,l]=yt.useState(n);return yt.createElement(e0,{style:{position:"absolute",left:t.x-o.left+1,top:t.y-o.top,width:t.width-2,height:t.height},className:"gdg-c1tqibwd",onClickOutside:r},yt.createElement(n0,{targetHeight:t.height,"data-testid":"group-rename-input",value:s,onBlur:r,onFocus:a=>a.target.setSelectionRange(0,s.length),onChange:a=>l(a.target.value),onKeyDown:a=>{a.key==="Enter"?i(s):a.key==="Escape"&&r()},autoFocus:!0}))};function o0(e,t){return e===void 0?!1:e.length>1&&e.startsWith("_")?Number.parseInt(e.slice(1))===t.keyCode:e.length===1&&e>="a"&&e<="z"?e.toUpperCase().codePointAt(0)===t.keyCode:e===t.key}function Ee(e,t,n){const r=$a(e,t);return r&&(n.didMatch=!0),r}function $a(e,t){if(e.length===0)return!1;if(e.includes("|")){const a=e.split("|");for(const c of a)if($a(c,t))return!0;return!1}let n=!1,r=!1,o=!1,i=!1;const s=e.split("+"),l=s.pop();if(!o0(l,t))return!1;if(s[0]==="any")return!0;for(const a of s)switch(a){case"ctrl":n=!0;break;case"shift":r=!0;break;case"alt":o=!0;break;case"meta":i=!0;break;case"primary":ri.value?i=!0:n=!0;break}return t.altKey===o&&t.ctrlKey===n&&t.shiftKey===r&&t.metaKey===i}function i0(e,t,n,r,o,i){const s=yt.useCallback((c,u,h,m)=>{(i==="cell"||i==="multi-cell")&&c!==void 0&&(c={...c,range:{x:c.cell[0],y:c.cell[1],width:1,height:1}});const p=n==="mixed"&&(h||m==="drag"),g=r==="mixed"&&p,w=o==="mixed"&&p;let v={current:c===void 0?void 0:{...c,rangeStack:m==="drag"?e.current?.rangeStack??[]:[]},columns:g?e.columns:ze.empty(),rows:w?e.rows:ze.empty()};h&&(i==="multi-rect"||i==="multi-cell")&&v.current!==void 0&&e.current!==void 0&&(v={...v,current:{...v.current,rangeStack:[...e.current.rangeStack,e.current.range]}}),t(v,u)},[r,e,n,i,o,t]),l=yt.useCallback((c,u,h)=>{c=c??e.rows,u!==void 0&&(c=c.add(u));let m;if(o==="exclusive"&&c.length>0)m={current:void 0,columns:ze.empty(),rows:c};else{const p=h&&n==="mixed",g=h&&r==="mixed";m={current:p?e.current:void 0,columns:g?e.columns:ze.empty(),rows:c}}t(m,!1)},[r,e,n,o,t]),a=yt.useCallback((c,u,h)=>{c=c??e.columns,u!==void 0&&(c=c.add(u));let m;if(r==="exclusive"&&c.length>0)m={current:void 0,rows:ze.empty(),columns:c};else{const p=h&&n==="mixed",g=h&&o==="mixed";m={current:p?e.current:void 0,rows:g?e.rows:ze.empty(),columns:c}}t(m,!1)},[r,e,n,o,t]);return[s,l,a]}function s0(e,t,n,r,o){const i=d.useCallback(c=>{if(e===!0){const u=[];for(let h=c.y;h<c.y+c.height;h++){const m=[];for(let p=c.x;p<c.x+c.width;p++)p<0||h>=o?m.push({kind:J.Loading,allowOverlay:!1}):m.push(t([p,h]));u.push(m)}return u}return e?.(c,r.signal)??[]},[r.signal,t,e,o]),s=e!==void 0?i:void 0,l=d.useCallback(c=>{if(s===void 0)return[];const u={...c,x:c.x-n};if(u.x<0){u.x=0,u.width--;const h=s(u,r.signal);return typeof h=="function"?async()=>(await h()).map(m=>[{kind:J.Loading,allowOverlay:!1},...m]):h.map(m=>[{kind:J.Loading,allowOverlay:!1},...m])}return s(u,r.signal)},[r.signal,s,n]);return[e!==void 0?l:void 0,s]}function l0(e){if(e.copyData!==void 0)return{formatted:e.copyData,rawValue:e.copyData,format:"string"};switch(e.kind){case J.Boolean:return{formatted:e.data===!0?"TRUE":e.data===!1?"FALSE":e.data===ls?"INDETERMINATE":"",rawValue:e.data,format:"boolean"};case J.Custom:return{formatted:e.copyData,rawValue:e.copyData,format:"string"};case J.Image:case J.Bubble:return{formatted:e.data,rawValue:e.data,format:"string-array"};case J.Drilldown:return{formatted:e.data.map(t=>t.text),rawValue:e.data.map(t=>t.text),format:"string-array"};case J.Text:return{formatted:e.displayData??e.data,rawValue:e.data,format:"string"};case J.Uri:return{formatted:e.displayData??e.data,rawValue:e.data,format:"url"};case J.Markdown:case J.RowID:return{formatted:e.data,rawValue:e.data,format:"string"};case J.Number:return{formatted:e.displayData,rawValue:e.data,format:"number"};case J.Loading:return{formatted:"#LOADING",rawValue:"",format:"string"};case J.Protected:return{formatted:"************",rawValue:"",format:"string"};default:mo()}}function a0(e,t){return e.map((r,o)=>{const i=t[o];return r.map(s=>s.span!==void 0&&s.span[0]!==i?{formatted:"",rawValue:"",format:"string"}:l0(s))})}function hl(e,t){return(t?/[\t\n",]/:/[\t\n"]/).test(e)&&(e=`"${e.replace(/"/g,'""')}"`),e}function c0(e){const t=[];for(const n of e){const r=[];for(const o of n)o.format==="url"?r.push(o.rawValue?.toString()??""):o.format==="string-array"?r.push(o.formatted.map(i=>hl(i,!0)).join(",")):r.push(hl(o.formatted,!1));t.push(r.join("	"))}return t.join(`
`)}function Wi(e){return e.replace(/\t/g,"    ").replace(/ {2,}/g,t=>"<span> </span>".repeat(t.length))}function gl(e){return'"'+e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+'"'}function d0(e){return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function u0(e){const t=[];t.push('<style type="text/css"><!--br {mso-data-placement:same-cell;}--></style>',"<table><tbody>");for(const n of e){t.push("<tr>");for(const r of n){const o=`gdg-format="${r.format}"`;r.format==="url"?t.push(`<td ${o}><a href="${r.rawValue}">${Wi(r.formatted)}</a></td>`):r.format==="string-array"?t.push(`<td ${o}><ol>${r.formatted.map((i,s)=>`<li gdg-raw-value=${gl(r.rawValue[s])}>`+Wi(i)+"</li>").join("")}</ol></td>`):t.push(`<td gdg-raw-value=${gl(r.rawValue?.toString()??"")} ${o}>${Wi(r.formatted)}</td>`)}t.push("</tr>")}return t.push("</tbody></table>"),t.join("")}function f0(e,t){const n=a0(e,t),r=c0(n),o=u0(n);return{textPlain:r,textHtml:o}}function ml(e){const t=document.createElement("html");t.innerHTML=e.replace(/&nbsp;/g," ");const n=t.querySelector("table");if(n===null)return;const r=[n],o=[];let i;for(;r.length>0;){const s=r.pop();if(s===void 0)break;if(s instanceof HTMLTableElement||s.nodeName==="TBODY")r.push(...[...s.children].reverse());else if(s instanceof HTMLTableRowElement)i!==void 0&&o.push(i),i=[],r.push(...[...s.children].reverse());else if(s instanceof HTMLTableCellElement){const l=s.cloneNode(!0),c=l.children.length===1&&l.children[0].nodeName==="P"?l.children[0]:null,u=c?.children.length===1&&c.children[0].nodeName==="FONT",h=l.querySelectorAll("br");for(const g of h)g.replaceWith(`
`);const m=l.getAttribute("gdg-raw-value"),p=l.getAttribute("gdg-format")??"string";if(l.querySelector("a")!==null)i?.push({rawValue:l.querySelector("a")?.getAttribute("href")??"",formatted:l.textContent??"",format:p});else if(l.querySelector("ol")!==null){const g=l.querySelectorAll("li");i?.push({rawValue:[...g].map(w=>w.getAttribute("gdg-raw-value")??""),formatted:[...g].map(w=>w.textContent??""),format:"string-array"})}else if(m!==null)i?.push({rawValue:d0(m),formatted:l.textContent??"",format:p});else{let g=l.textContent??"";u&&(g=g.replace(/\n(?!\n)/g,"")),i?.push({rawValue:g??"",formatted:g??"",format:p})}}}return i!==void 0&&o.push(i),o}function h0(e,t,n,r,o){const i=e;if(r==="allowPartial"||e.current===void 0||t===void 0)return e;let s=!1;do{if(e?.current===void 0)break;const l=e.current?.range,a=[];if(l.width>2){const h=t({x:l.x,y:l.y,width:1,height:l.height},o.signal);if(typeof h=="function")return i;a.push(...h);const m=t({x:l.x+l.width-1,y:l.y,width:1,height:l.height},o.signal);if(typeof m=="function")return i;a.push(...m)}else{const h=t({x:l.x,y:l.y,width:l.width,height:l.height},o.signal);if(typeof h=="function")return i;a.push(...h)}let c=l.x-n,u=l.x+l.width-1-n;for(const h of a)for(const m of h)m.span!==void 0&&(c=Math.min(m.span[0],c),u=Math.max(m.span[1],u));c===l.x-n&&u===l.x+l.width-1-n?s=!0:e={current:{cell:e.current.cell??[0,0],range:{x:c+n,y:l.y,width:u-c+1,height:l.height},rangeStack:e.current.rangeStack},columns:e.columns,rows:e.rows}}while(!s);return e}function pl(e){return e.startsWith('"')&&e.endsWith('"')&&(e=e.slice(1,-1).replace(/""/g,'"')),e}function g0(e){let t;(function(l){l[l.None=0]="None",l[l.inString=1]="inString",l[l.inStringPostQuote=2]="inStringPostQuote"})(t||(t={}));const n=[];let r=[],o=0,i=t.None;e=e.replace(/\r\n/g,`
`);let s=0;for(const l of e){switch(i){case t.None:l==="	"||l===`
`?(r.push(e.slice(o,s)),o=s+1,l===`
`&&(n.push(r),r=[])):l==='"'&&(i=t.inString);break;case t.inString:l==='"'&&(i=t.inStringPostQuote);break;case t.inStringPostQuote:l==='"'?i=t.inString:((l==="	"||l===`
`)&&(r.push(pl(e.slice(o,s))),o=s+1,l===`
`&&(n.push(r),r=[])),i=t.None);break}s++}return o<e.length&&r.push(pl(e.slice(o,e.length))),n.push(r),n.map(l=>l.map(a=>({rawValue:a,formatted:a,format:"string"})))}function wl(e,t,n){const r=f0(e,t),o=l=>{window.navigator.clipboard?.writeText(l)},i=(l,a)=>window.navigator.clipboard?.write===void 0?!1:(window.navigator.clipboard.write([new ClipboardItem({"text/plain":new Blob([l],{type:"text/plain"}),"text/html":new Blob([a],{type:"text/html"})})]),!0),s=(l,a)=>{try{if(n===void 0||n.clipboardData===null)throw new Error("No clipboard data");n?.clipboardData?.setData("text/plain",l),n?.clipboardData?.setData("text/html",a)}catch{i(l,a)||o(l)}};window.navigator.clipboard?.write!==void 0||n?.clipboardData!==void 0?s(r.textPlain,r.textHtml):o(r.textPlain),n?.preventDefault()}function _a(e){return e!==!0}function yl(e){return typeof e=="string"?e:`${e}px`}const m0=()=>e=>e.innerWidth,p0=()=>e=>e.innerHeight,w0=Ut("div")({name:"Wrapper",class:"gdg-wmyidgi",propsAsIs:!1,vars:{"wmyidgi-0":[m0()],"wmyidgi-1":[p0()]}}),y0=e=>{const{inWidth:t,inHeight:n,children:r,...o}=e;return d.createElement(w0,{innerHeight:yl(n),innerWidth:yl(t),...o},r)},b0=2,v0=1300;function x0(e,t,n){const r=yt.useRef(0),[o,i]=e??[0,0];yt.useEffect(()=>{if(o===0&&i===0){r.current=0;return}let s=!1,l=0;const a=c=>{if(!s){if(l===0)l=c;else{const u=c-l;r.current=Math.min(1,r.current+u/v0);const h=r.current**1.618*u*b0;t.current?.scrollBy(o*h,i*h),l=c,n?.()}window.requestAnimationFrame(a)}};return window.requestAnimationFrame(a),()=>{s=!0}},[t,o,i,n])}function k0({rowHeight:e,headerHeight:t,groupHeaderHeight:n,theme:r,overscrollX:o,overscrollY:i,scaleToRem:s,remSize:l}){const[a,c,u,h,m,p]=yt.useMemo(()=>{if(!s||l===16)return[e,t,n,r,o,i];const g=l/16,w=e,v=Ra();return[typeof w=="number"?w*g:x=>Math.ceil(w(x)*g),Math.ceil(t*g),Math.ceil(n*g),{...r,headerIconSize:(r?.headerIconSize??v.headerIconSize)*g,cellHorizontalPadding:(r?.cellHorizontalPadding??v.cellHorizontalPadding)*g,cellVerticalPadding:(r?.cellVerticalPadding??v.cellVerticalPadding)*g},Math.ceil((o??0)*g),Math.ceil((i??0)*g)]},[n,t,o,i,l,e,s,r]);return{rowHeight:a,headerHeight:c,groupHeaderHeight:u,theme:h,overscrollX:m,overscrollY:p}}const zn={downFill:!1,rightFill:!1,clear:!0,closeOverlay:!0,acceptOverlayDown:!0,acceptOverlayUp:!0,acceptOverlayLeft:!0,acceptOverlayRight:!0,copy:!0,paste:!0,cut:!0,search:!1,delete:!0,activateCell:!0,scrollToSelectedCell:!0,goToFirstCell:!0,goToFirstColumn:!0,goToFirstRow:!0,goToLastCell:!0,goToLastColumn:!0,goToLastRow:!0,goToNextPage:!0,goToPreviousPage:!0,selectToFirstCell:!0,selectToFirstColumn:!0,selectToFirstRow:!0,selectToLastCell:!0,selectToLastColumn:!0,selectToLastRow:!0,selectAll:!0,selectRow:!0,selectColumn:!0,goUpCell:!0,goRightCell:!0,goDownCell:!0,goLeftCell:!0,goUpCellRetainSelection:!0,goRightCellRetainSelection:!0,goDownCellRetainSelection:!0,goLeftCellRetainSelection:!0,selectGrowUp:!0,selectGrowRight:!0,selectGrowDown:!0,selectGrowLeft:!0};function Te(e,t){return e===!0?t:e===!1?"":e}function bl(e){const t=ri.value;return{activateCell:Te(e.activateCell," |Enter|shift+Enter"),clear:Te(e.clear,"any+Escape"),closeOverlay:Te(e.closeOverlay,"any+Escape"),acceptOverlayDown:Te(e.acceptOverlayDown,"Enter"),acceptOverlayUp:Te(e.acceptOverlayUp,"shift+Enter"),acceptOverlayLeft:Te(e.acceptOverlayLeft,"shift+Tab"),acceptOverlayRight:Te(e.acceptOverlayRight,"Tab"),copy:e.copy,cut:e.cut,delete:Te(e.delete,t?"Backspace|Delete":"Delete"),downFill:Te(e.downFill,"primary+_68"),scrollToSelectedCell:Te(e.scrollToSelectedCell,"primary+Enter"),goDownCell:Te(e.goDownCell,"ArrowDown"),goDownCellRetainSelection:Te(e.goDownCellRetainSelection,"alt+ArrowDown"),goLeftCell:Te(e.goLeftCell,"ArrowLeft|shift+Tab"),goLeftCellRetainSelection:Te(e.goLeftCellRetainSelection,"alt+ArrowLeft"),goRightCell:Te(e.goRightCell,"ArrowRight|Tab"),goRightCellRetainSelection:Te(e.goRightCellRetainSelection,"alt+ArrowRight"),goUpCell:Te(e.goUpCell,"ArrowUp"),goUpCellRetainSelection:Te(e.goUpCellRetainSelection,"alt+ArrowUp"),goToFirstCell:Te(e.goToFirstCell,"primary+Home"),goToFirstColumn:Te(e.goToFirstColumn,"Home|primary+ArrowLeft"),goToFirstRow:Te(e.goToFirstRow,"primary+ArrowUp"),goToLastCell:Te(e.goToLastCell,"primary+End"),goToLastColumn:Te(e.goToLastColumn,"End|primary+ArrowRight"),goToLastRow:Te(e.goToLastRow,"primary+ArrowDown"),goToNextPage:Te(e.goToNextPage,"PageDown"),goToPreviousPage:Te(e.goToPreviousPage,"PageUp"),paste:e.paste,rightFill:Te(e.rightFill,"primary+_82"),search:Te(e.search,"primary+f"),selectAll:Te(e.selectAll,"primary+a"),selectColumn:Te(e.selectColumn,"ctrl+ "),selectGrowDown:Te(e.selectGrowDown,"shift+ArrowDown"),selectGrowLeft:Te(e.selectGrowLeft,"shift+ArrowLeft"),selectGrowRight:Te(e.selectGrowRight,"shift+ArrowRight"),selectGrowUp:Te(e.selectGrowUp,"shift+ArrowUp"),selectRow:Te(e.selectRow,"shift+ "),selectToFirstCell:Te(e.selectToFirstCell,"primary+shift+Home"),selectToFirstColumn:Te(e.selectToFirstColumn,"primary+shift+ArrowLeft"),selectToFirstRow:Te(e.selectToFirstRow,"primary+shift+ArrowUp"),selectToLastCell:Te(e.selectToLastCell,"primary+shift+End"),selectToLastColumn:Te(e.selectToLastColumn,"primary+shift+ArrowRight"),selectToLastRow:Te(e.selectToLastRow,"primary+shift+ArrowDown")}}function C0(e){const t=lf(e);return yt.useMemo(()=>{if(t===void 0)return bl(zn);const n={...t,goToNextPage:t?.goToNextPage??t?.pageDown??zn.goToNextPage,goToPreviousPage:t?.goToPreviousPage??t?.pageUp??zn.goToPreviousPage,goToFirstCell:t?.goToFirstCell??t?.first??zn.goToFirstCell,goToLastCell:t?.goToLastCell??t?.last??zn.goToLastCell,selectToFirstCell:t?.selectToFirstCell??t?.first??zn.selectToFirstCell,selectToLastCell:t?.selectToLastCell??t?.last??zn.selectToLastCell};return bl({...zn,...n})},[t])}const S0=d.lazy(async()=>await Ml(()=>import("./kkm55r2baerk11p5.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])));let M0=0;function R0(e){return Sh(il(il(e).filter(t=>t.span!==void 0).map(t=>er((t.span?.[0]??0)+1,(t.span?.[1]??0)+1))))}function Xo(e,t){return e===void 0||t===0||e.columns.length===0&&e.current===void 0?e:{current:e.current===void 0?void 0:{cell:[e.current.cell[0]+t,e.current.cell[1]],range:{...e.current.range,x:e.current.range.x+t},rangeStack:e.current.rangeStack.map(n=>({...n,x:n.x+t}))},rows:e.rows,columns:e.columns.offset(t)}}const ji={kind:J.Loading,allowOverlay:!1},Yo={columns:ze.empty(),rows:ze.empty(),current:void 0},E0=(e,t)=>{const[n,r]=d.useState(Yo),[o,i]=d.useState(),s=d.useRef(null),l=d.useRef(null),[a,c]=d.useState(),u=d.useRef(null),h=d.useRef(),m=typeof window>"u"?null:window,{rowMarkers:p="none",rowMarkerWidth:g,imageEditorOverride:w,getRowThemeOverride:v,markdownDivCreateNode:x,width:y,height:E,columns:M,rows:b,getCellContent:P,onCellClicked:F,onCellActivated:j,onFillPattern:I,onFinishedEditing:B,coercePasteValue:W,drawHeader:D,drawCell:H,onHeaderClicked:_,onColumnProposeMove:G,spanRangeBehavior:he="default",onGroupHeaderClicked:xe,onCellContextMenu:de,className:Be,onHeaderContextMenu:ne,getCellsForSelection:q,onGroupHeaderContextMenu:se,onGroupHeaderRenamed:Q,onCellEdited:ke,onCellsEdited:oe,onSearchResultsChanged:Re,searchResults:le,onSearchValueChange:We,searchValue:je,onKeyDown:Fe,onKeyUp:He,keybindings:Ve,onRowAppended:me,onColumnMoved:$e,validateCell:qe,highlightRegions:gt,rangeSelect:ae="rect",columnSelect:ee="multi",rowSelect:Ie="multi",rangeSelectionBlending:ge="exclusive",columnSelectionBlending:we="exclusive",rowSelectionBlending:Ne="exclusive",onDelete:ue,onDragStart:Ae,onMouseMove:Ce,onPaste:lt,copyHeaders:De=!1,freezeColumns:tt=0,cellActivationBehavior:Ye="second-click",rowSelectionMode:be="auto",rowMarkerStartIndex:Ue=1,rowMarkerTheme:Ze,onHeaderMenuClick:Tt,getGroupDetails:Pt,onSearchClose:Nt,onItemHovered:an,onSelectionCleared:mt,showSearch:yn,onVisibleRegionChanged:bt,gridSelection:Kt,onGridSelectionChange:Xe,minColumnWidth:Qe=50,maxColumnWidth:cn=500,maxColumnAutoWidth:dn,provideEditor:un,trailingRowOptions:Ct,freezeTrailingRows:Se=0,allowedFillDirections:ct="orthogonal",scrollOffsetX:Ke,scrollOffsetY:ut,verticalBorder:St,onDragOverCell:fn,onDrop:$r,onColumnResize:ft,onColumnResizeEnd:Wn,onColumnResizeStart:dt,customRenderers:vt,fillHandle:bn,drawFocusRing:vo,experimental:Qt,fixedShadowX:jn,fixedShadowY:Vn,headerIcons:or,imageWindowLoader:xo,initialSize:ko,isDraggable:ir,onDragLeave:sr,onRowMoved:Jt,overscrollX:Mn,overscrollY:gi,preventDiagonalScrolling:Co,rightElement:mi,rightElementProps:pi,trapFocus:Xn=!1,smoothScrollX:Rn,smoothScrollY:wi,scaleToRem:yi=!1,rowHeight:So=34,headerHeight:_r=36,groupHeaderHeight:lr=_r,theme:Cs,isOutsideClick:Mo,renderers:Yn}=e,vn=Math.max(Qe,20),En=Math.max(cn,vn),Tn=Math.max(dn??En,vn),ar=d.useMemo(()=>typeof window>"u"?{fontSize:"16px"}:window.getComputedStyle(document.documentElement),[]).fontSize,Kn=d.useMemo(()=>Number.parseFloat(ar),[ar]),{rowHeight:It,headerHeight:cr,groupHeaderHeight:Nr,theme:Or,overscrollX:bi,overscrollY:vi}=k0({groupHeaderHeight:lr,headerHeight:_r,overscrollX:Mn,overscrollY:gi,remSize:Kn,rowHeight:So,scaleToRem:yi,theme:Cs}),en=C0(Ve),xn=g??(b>1e4?48:b>1e3?44:b>100?36:32),Ot=p!=="none",z=Ot?1:0,Mt=me!==void 0,Bt=Ct?.sticky===!0,[xi,Ro]=d.useState(!1),ki=yn??xi,Br=d.useCallback(()=>{Nt!==void 0?Nt():Ro(!1)},[Nt]),N=d.useMemo(()=>Kt===void 0?void 0:Xo(Kt,z),[Kt,z])??n,Gt=d.useRef(new AbortController);d.useEffect(()=>()=>{Gt?.current.abort()},[]);const[xt,Eo]=s0(q,P,z,Gt.current,b),dr=d.useCallback((f,C,k)=>{if(qe===void 0)return!0;const L=[f[0]-z,f[1]];return qe?.(L,C,k)},[z,qe]),In=d.useRef(Kt),Dt=d.useCallback((f,C)=>{C&&(f=h0(f,xt,z,he,Gt.current)),Xe!==void 0?(In.current=Xo(f,-z),Xe(In.current)):r(f)},[Xe,xt,z,he]),ur=Rr(ft,d.useCallback((f,C,k,L)=>{ft?.(M[k-z],C,k-z,L)},[ft,z,M])),fr=Rr(Wn,d.useCallback((f,C,k,L)=>{Wn?.(M[k-z],C,k-z,L)},[Wn,z,M])),Ci=Rr(dt,d.useCallback((f,C,k,L)=>{dt?.(M[k-z],C,k-z,L)},[dt,z,M])),hr=Rr(D,d.useCallback((f,C)=>D?.({...f,columnIndex:f.columnIndex-z},C)??!1,[D,z])),Si=Rr(H,d.useCallback((f,C)=>H?.({...f,col:f.col-z},C)??!1,[H,z])),gr=d.useCallback(f=>{if(ue!==void 0){const C=ue(Xo(f,-z));return typeof C=="boolean"?C:Xo(C,z)}return!0},[ue,z]),[S,X,Z]=i0(N,Dt,ge,we,Ne,ae),re=d.useMemo(()=>Nn(Ra(),Or),[Or]),[U,te]=d.useState([0,0,0]),pe=d.useMemo(()=>{if(Yn===void 0)return{};const f={};for(const C of Yn)f[C.kind]=C;return f},[Yn]),Y=d.useCallback(f=>f.kind!==J.Custom?pe[f.kind]:vt?.find(C=>C.isMatch(f)),[vt,pe]);let{sizedColumns:ce,nonGrowWidth:Oe}=vh(M,b,Eo,U[0]-(z===0?0:xn)-U[2],vn,Tn,re,Y,Gt.current);p!=="none"&&(Oe+=xn);const at=d.useMemo(()=>ce.some(f=>f.group!==void 0),[ce]),ot=at?cr+Nr:cr,nt=N.rows.length,Le=p==="none"?"":nt===0?ea:nt===b?Jl:ju,fe=d.useMemo(()=>p==="none"?ce:[{title:Le,width:xn,icon:void 0,hasMenu:!1,style:"normal",themeOverride:Ze},...ce],[ce,xn,p,Le,Ze]),[Ft,it]=d.useMemo(()=>[ut!==void 0&&typeof It=="number"?Math.floor(ut/It):0,ut!==void 0&&typeof It=="number"?-(ut%It):0],[ut,It]),pt=d.useRef({height:1,width:1,x:0,y:0}),mr=d.useMemo(()=>({x:pt.current.x,y:Ft,width:pt.current.width??1,height:pt.current.height??1,ty:it}),[it,Ft]),tn=d.useRef(!1),[_e,nn,At]=sf(mr);pt.current=_e;const Dn=(_e.height??1)>1;d.useLayoutEffect(()=>{if(ut!==void 0&&u.current!==null&&Dn){if(u.current.scrollTop===ut)return;u.current.scrollTop=ut,u.current.scrollTop!==ut&&At(),tn.current=!0}},[ut,Dn,At]);const rn=(_e.width??1)>1;d.useLayoutEffect(()=>{if(Ke!==void 0&&u.current!==null&&rn){if(u.current.scrollLeft===Ke)return;u.current.scrollLeft=Ke,u.current.scrollLeft!==Ke&&At(),tn.current=!0}},[Ke,rn,At]);const Wr=_e.x+z,hn=_e.y,$t=d.useRef(null),zt=d.useCallback(f=>{f===!0?$t.current?.focus():window.requestAnimationFrame(()=>{$t.current?.focus()})},[]),Ht=Mt?b+1:b,qt=d.useCallback(f=>{const C=z===0?f:f.map(L=>({...L,location:[L.location[0]-z,L.location[1]]})),k=oe?.(C);if(k!==!0)for(const L of C)ke?.(L.location,L.value);return k},[ke,oe,z]),[Gn,Mi]=d.useState(),To=N.current!==void 0&&N.current.range.width*N.current.range.height>1?N.current.range:void 0,Va=d.useMemo(()=>{if((gt===void 0||gt.length===0)&&To===void 0&&Gn===void 0)return;const f=[];if(gt!==void 0)for(const C of gt){const k=fe.length-C.range.x-z;k>0&&f.push({color:C.color,range:{...C.range,x:C.range.x+z,width:Math.min(k,C.range.width)},style:C.style})}return Gn!==void 0&&f.push({color:zr(re.accentColor,0),range:Gn,style:"dashed"}),To!==void 0&&f.push({color:zr(re.accentColor,.5),range:To,style:"solid-outline"}),f.length>0?f:void 0},[Gn,To,gt,fe.length,re.accentColor,z]),Ms=d.useRef(fe);Ms.current=fe;const Wt=d.useCallback(([f,C],k=!1)=>{const L=Mt&&C===Ht-1;if(f===0&&Ot)return L?ji:{kind:Zt.Marker,allowOverlay:!1,checked:N?.rows.hasIndex(C)===!0,markerKind:p==="clickable-number"?"number":p,row:Ue+C,drawHandle:Jt!==void 0,cursor:p==="clickable-number"?"pointer":void 0};if(L){const R=f===z?Ct?.hint??"":"",A=Ms.current[f];if(A?.trailingRowOptions?.disabled===!0)return ji;{const V=A?.trailingRowOptions?.hint??R,K=A?.trailingRowOptions?.addIcon??Ct?.addIcon;return{kind:Zt.NewRow,hint:V,allowOverlay:!1,icon:K}}}else{const O=f-z;if(k||Qt?.strict===!0){const A=pt.current,V=A.x>O||O>A.x+A.width||A.y>C||C>A.y+A.height||C>=Ei.current,K=O===A.extras?.selected?.[0]&&C===A.extras?.selected[1];let ie=!1;if(A.extras?.freezeRegions!==void 0){for(const Me of A.extras.freezeRegions)if(ui(Me,O,C)){ie=!0;break}}if(V&&!K&&!ie)return ji}let R=P([O,C]);return z!==0&&R.span!==void 0&&(R={...R,span:[R.span[0]+z,R.span[1]+z]}),R}},[Mt,Ht,Ot,N?.rows,Jt,p,z,Ct?.hint,Ct?.addIcon,Qt?.strict,P,Ue]),Ri=d.useCallback(f=>{let C=Pt?.(f)??{name:f};return Q!==void 0&&f!==""&&(C={icon:C.icon,name:C.name,overrideTheme:C.overrideTheme,actions:[...C.actions??[],{title:"Rename",icon:"renameIcon",onClick:k=>Ii({group:C.name,bounds:k.bounds})}]}),C},[Pt,Q]),Io=d.useCallback(f=>{const[C,k]=f.cell,L=fe[C],$=L?.group!==void 0?Ri(L.group)?.overrideTheme:void 0,O=L?.themeOverride,R=v?.(k);i({...f,theme:Nn(re,$,O,R,f.content.themeOverride)})},[v,fe,Ri,re]),pr=d.useCallback((f,C,k)=>{if(N.current===void 0)return;const[L,$]=N.current.cell,O=Wt([L,$]);if(O.kind!==J.Boolean&&O.allowOverlay){let R=O;if(k!==void 0)switch(R.kind){case J.Number:{const A=Au(()=>k==="-"?-0:Number.parseFloat(k),0);R={...R,data:Number.isNaN(A)?0:A};break}case J.Text:case J.Markdown:case J.Uri:R={...R,data:k};break}Io({target:f,content:R,initialValue:k,cell:[L,$],highlight:k===void 0,forceEditMode:k!==void 0})}else O.kind===J.Boolean&&C&&O.readonly!==!0&&(qt([{location:N.current.cell,value:{...O,data:_a(O.data)}}]),$t.current?.damage([{cell:N.current.cell}]))},[Wt,N,qt,Io]),Rs=d.useCallback((f,C)=>{const k=$t.current?.getBounds(f,C);if(k===void 0||u.current===null)return;const L=Wt([f,C]);L.allowOverlay&&Io({target:k,content:L,initialValue:void 0,highlight:!0,cell:[f,C],forceEditMode:!0})},[Wt,Io]),ht=d.useCallback((f,C,k="both",L=0,$=0,O=void 0)=>{if(u.current!==null){const R=$t.current,A=l.current,V=typeof f!="number"?f.unit==="cell"?f.amount:void 0:f,K=typeof C!="number"?C.unit==="cell"?C.amount:void 0:C,ie=typeof f!="number"&&f.unit==="px"?f.amount:void 0,Me=typeof C!="number"&&C.unit==="px"?C.amount:void 0;if(R!==null&&A!==null){let ve={x:0,y:0,width:0,height:0},ye=0,Pe=0;if((V!==void 0||K!==void 0)&&(ve=R.getBounds((V??0)+z,K??0)??ve,ve.width===0||ve.height===0))return;const Je=A.getBoundingClientRect(),kt=Je.width/A.offsetWidth;if(ie!==void 0&&(ve={...ve,x:ie-Je.left-u.current.scrollLeft,width:1}),Me!==void 0&&(ve={...ve,y:Me+Je.top-u.current.scrollTop,height:1}),ve!==void 0){const st={x:ve.x-L,y:ve.y-$,width:ve.width+2*L,height:ve.height+2*$};let kr=0;for(let Li=0;Li<tt;Li++)kr+=ce[Li].width;let Gr=0;const qr=Se+(Bt?1:0);qr>0&&(Gr=Pr(Ht,qr,It));let mn=kr*kt+Je.left+z*xn*kt,Cr=Je.right,Qn=Je.top+ot*kt,Sr=Je.bottom-Gr*kt;const Lo=ve.width+L*2;switch(O?.hAlign){case"start":Cr=mn+Lo;break;case"end":mn=Cr-Lo;break;case"center":mn=Math.floor((mn+Cr)/2)-Lo/2,Cr=mn+Lo;break}const Po=ve.height+$*2;switch(O?.vAlign){case"start":Sr=Qn+Po;break;case"end":Qn=Sr-Po;break;case"center":Qn=Math.floor((Qn+Sr)/2)-Po/2,Sr=Qn+Po;break}mn>st.x?ye=st.x-mn:Cr<st.x+st.width&&(ye=st.x+st.width-Cr),Qn>st.y?Pe=st.y-Qn:Sr<st.y+st.height&&(Pe=st.y+st.height-Sr),k==="vertical"||typeof f=="number"&&f<tt?ye=0:(k==="horizontal"||typeof C=="number"&&C>=Ht-qr)&&(Pe=0),(ye!==0||Pe!==0)&&(kt!==1&&(ye/=kt,Pe/=kt),u.current.scrollTo(ye+u.current.scrollLeft,Pe+u.current.scrollTop))}}}},[z,Se,xn,ot,tt,ce,Ht,Bt,It]),Es=d.useRef(Rs),Ts=d.useRef(P),Ei=d.useRef(b);Es.current=Rs,Ts.current=P,Ei.current=b;const wr=d.useCallback(async(f,C=!0)=>{if(fe[f]?.trailingRowOptions?.disabled===!0)return;const L=me?.();let $,O=!0;L!==void 0&&($=await L,$==="top"&&(O=!1),typeof $=="number"&&(O=!1));let R=0;const A=()=>{if(Ei.current<=b){R<500&&window.setTimeout(A,R),R=50+R*2;return}const V=typeof $=="number"?$:O?b:0;zo.current(f-z,V),S({cell:[f,V],range:{x:f,y:V,width:1,height:1}},!1,!1,"edit");const K=Ts.current([f-z,V]);K.allowOverlay&&no(K)&&K.readonly!==!0&&C&&window.setTimeout(()=>{Es.current(f,V)},0)};A()},[fe,me,z,b,S]),Do=d.useCallback(f=>{const C=ce[f]?.trailingRowOptions?.targetColumn??Ct?.targetColumn;if(typeof C=="number")return C+(Ot?1:0);if(typeof C=="object"){const k=M.indexOf(C);if(k>=0)return k+(Ot?1:0)}},[ce,M,Ot,Ct?.targetColumn]),Fn=d.useRef(),yr=d.useRef(),jr=d.useCallback((f,C)=>{const[k,L]=C;return Nn(re,fe[k]?.themeOverride,v?.(L),f.themeOverride)},[v,fe,re]),Vr=d.useCallback(f=>{const C=ri.value?f.metaKey:f.ctrlKey,k=C&&Ie==="multi",L=C&&ee==="multi",[$,O]=f.location,R=N.columns,A=N.rows,[V,K]=N.current?.cell??[];if(f.kind==="cell"){if(yr.current=void 0,qn.current=[$,O],$===0&&Ot){if(Mt===!0&&O===b||p==="number"||Ie==="none")return;const ie=Wt(f.location);if(ie.kind!==Zt.Marker)return;if(Jt!==void 0){const ye=Y(ie);Xt(ye?.kind===Zt.Marker);const Pe=ye?.onClick?.({...f,cell:ie,posX:f.localEventX,posY:f.localEventY,bounds:f.bounds,theme:jr(ie,f.location),preventDefault:()=>{}});if(Pe===void 0||Pe.checked===ie.checked)return}i(void 0),zt();const Me=A.hasIndex(O),ve=Fn.current;if(Ie==="multi"&&(f.shiftKey||f.isLongTouch===!0)&&ve!==void 0&&A.hasIndex(ve)){const ye=[Math.min(ve,O),Math.max(ve,O)+1];k||be==="multi"?X(void 0,ye,!0):X(ze.fromSingleSelection(ye),void 0,k)}else k||f.isTouch||be==="multi"?Me?X(A.remove(O),void 0,!0):(X(void 0,O,!0),Fn.current=O):Me&&A.length===1?X(ze.empty(),void 0,C):(X(ze.fromSingleSelection(O),void 0,C),Fn.current=O)}else if($>=z&&Mt&&O===b){const ie=Do($);wr(ie??$)}else if(V!==$||K!==O){const ie=Wt(f.location),Me=Y(ie);if(Me?.onSelect!==void 0){let Pe=!1;if(Me.onSelect({...f,cell:ie,posX:f.localEventX,posY:f.localEventY,bounds:f.bounds,preventDefault:()=>Pe=!0,theme:jr(ie,f.location)}),Pe)return}const ve=Bt&&O===b,ye=Bt&&N!==void 0&&N.current?.cell[1]===b;if((f.shiftKey||f.isLongTouch===!0)&&V!==void 0&&K!==void 0&&N.current!==void 0&&!ye){if(ve)return;const Pe=Math.min($,V),Je=Math.max($,V),kt=Math.min(O,K),st=Math.max(O,K);S({...N.current,range:{x:Pe,y:kt,width:Je-Pe+1,height:st-kt+1}},!0,C,"click"),Fn.current=void 0,zt()}else S({cell:[$,O],range:{x:$,y:O,width:1,height:1}},!0,C,"click"),Fn.current=void 0,i(void 0),zt()}}else if(f.kind==="header")if(qn.current=[$,O],i(void 0),Ot&&$===0)Fn.current=void 0,yr.current=void 0,Ie==="multi"&&(A.length!==b?X(ze.fromSingleSelection([0,b]),void 0,C):X(ze.empty(),void 0,C),zt());else{const ie=yr.current;if(ee==="multi"&&(f.shiftKey||f.isLongTouch===!0)&&ie!==void 0&&R.hasIndex(ie)){const Me=[Math.min(ie,$),Math.max(ie,$)+1];L?Z(void 0,Me,C):Z(ze.fromSingleSelection(Me),void 0,C)}else L?(R.hasIndex($)?Z(R.remove($),void 0,C):Z(void 0,$,C),yr.current=$):ee!=="none"&&(Z(ze.fromSingleSelection($),void 0,C),yr.current=$);Fn.current=void 0,zt()}else f.kind===Vt?qn.current=[$,O]:f.kind===oi&&!f.isMaybeScrollbar&&(Dt(Yo,!1),i(void 0),zt(),mt?.(),Fn.current=void 0,yr.current=void 0)},[wr,ee,zt,Y,Do,Wt,N,Ot,Bt,mt,Jt,z,p,Ie,be,b,S,Dt,Z,X,Mt,jr]),Xr=d.useRef(!1),qn=d.useRef(),Is=d.useRef(_e),gn=d.useRef(),Xa=d.useCallback(f=>{if(br.current=!1,Is.current=pt.current,f.button!==0&&f.button!==1){gn.current=void 0;return}const C=performance.now();gn.current={button:f.button,time:C,location:f.location},f?.kind==="header"&&(Xr.current=!0);const k=f.kind==="cell"&&f.isFillHandle;!k&&f.kind!=="cell"&&f.isEdge||(c({previousSelection:N,fillHandle:k}),qn.current=void 0,!f.isTouch&&f.button===0&&!k?Vr(f):!f.isTouch&&f.button===1&&(qn.current=f.location))},[N,Vr]),[Ti,Ii]=d.useState(),Ds=d.useCallback(f=>{if(f.kind!==Vt||ee!=="multi")return;const C=ri.value?f.metaKey:f.ctrlKey,[k]=f.location,L=N.columns;if(k<z)return;const $=fe[k];let O=k,R=k;for(let A=k-1;A>=z&&po($.group,fe[A].group);A--)O--;for(let A=k+1;A<fe.length&&po($.group,fe[A].group);A++)R++;if(zt(),C)if(L.hasAll([O,R+1])){let A=L;for(let V=O;V<=R;V++)A=A.remove(V);Z(A,void 0,C)}else Z(void 0,[O,R+1],C);else Z(ze.fromSingleSelection([O,R+1]),void 0,C)},[ee,zt,N.columns,fe,z,Z]),br=d.useRef(!1),Fo=d.useCallback(async f=>{if(xt!==void 0&&ur!==void 0){const C=pt.current.y,k=pt.current.height;let L=xt({x:f,y:C,width:1,height:Math.min(k,b-C)},Gt.current.signal);typeof L!="object"&&(L=await L());const $=ce[f-z],R=document.createElement("canvas").getContext("2d",{alpha:!1});if(R!==null){R.font=re.baseFontFull;const A=Ea(R,re,$,0,L,vn,En,!1,Y);ur?.($,A.width,f,A.width)}}},[ce,xt,En,re,vn,ur,z,b,Y]),[Ya,Di]=d.useState(),vr=d.useCallback(async(f,C)=>{const k=f.current?.range;if(k===void 0||xt===void 0||C.current===void 0)return;const L=C.current.range;if(I!==void 0){let A=!1;if(I({fillDestination:{...L,x:L.x-z},patternSource:{...k,x:k.x-z},preventDefault:()=>A=!0}),A)return}let $=xt(k,Gt.current.signal);typeof $!="object"&&($=await $());const O=$,R=[];for(let A=0;A<L.width;A++)for(let V=0;V<L.height;V++){const K=[L.x+A,L.y+V];if(wa(K,k))continue;const ie=O[V%k.height][A%k.width];Dr(ie)||!no(ie)||R.push({location:K,value:{...ie}})}qt(R),$t.current?.damage(R.map(A=>({cell:A.location})))},[xt,qt,I,z]),Fs=d.useCallback(()=>{if(N.current===void 0||N.current.range.width<=1)return;const f={...N,current:{...N.current,range:{...N.current.range,width:1}}};vr(f,N)},[vr,N]),Hs=d.useCallback(()=>{if(N.current===void 0||N.current.range.height<=1)return;const f={...N,current:{...N.current,range:{...N.current.range,height:1}}};vr(f,N)},[vr,N]),Ua=d.useCallback((f,C)=>{const k=a;if(c(void 0),Mi(void 0),Di(void 0),Xr.current=!1,C)return;if(k?.fillHandle===!0&&N.current!==void 0&&k.previousSelection?.current!==void 0){if(Gn===void 0)return;const ie={...N,current:{...N.current,range:Ia(k.previousSelection.current.range,Gn)}};vr(k.previousSelection,ie),Dt(ie,!0);return}const[L,$]=f.location,[O,R]=qn.current??[],A=()=>{br.current=!0},V=ie=>{const Me=ie.isTouch||O===L&&R===$;if(Me&&F?.([L-z,$],{...ie,preventDefault:A}),ie.button===1)return!br.current;if(!br.current){const ve=Wt(f.location),ye=Y(ve);if(ye!==void 0&&ye.onClick!==void 0&&Me){const Je=ye.onClick({...ie,cell:ve,posX:ie.localEventX,posY:ie.localEventY,bounds:ie.bounds,theme:jr(ve,f.location),preventDefault:A});Je!==void 0&&!Dr(Je)&&Tr(Je)&&(qt([{location:ie.location,value:Je}]),$t.current?.damage([{cell:ie.location}]))}if(br.current||N.current===void 0)return!1;let Pe=!1;switch(Ye){case"double-click":case"second-click":{if(k?.previousSelection?.current?.cell===void 0)break;const[Je,kt]=N.current.cell,[st,kr]=k.previousSelection.current.cell;Pe=L===Je&&L===st&&$===kt&&$===kr&&(ie.isDoubleClick===!0||Ye==="second-click");break}case"single-click":{Pe=!0;break}}if(Pe)return j?.([L-z,$]),pr(ie.bounds,!1),!0}return!1},K=f.location[0]-z;if(f.isTouch){const ie=pt.current,Me=Is.current;if(ie.x!==Me.x||ie.y!==Me.y)return;if(f.isLongTouch===!0){if(f.kind==="cell"&&uo(N.current?.cell,f.location)){de?.([K,f.location[1]],{...f,preventDefault:A});return}else if(f.kind==="header"&&N.columns.hasIndex(L)){ne?.(K,{...f,preventDefault:A});return}else if(f.kind===Vt){if(K<0)return;se?.(K,{...f,preventDefault:A});return}}f.kind==="cell"?V(f)||Vr(f):f.kind===Vt?xe?.(K,{...f,preventDefault:A}):(f.kind===Ln&&_?.(K,{...f,preventDefault:A}),Vr(f));return}if(f.kind==="header"){if(K<0)return;f.isEdge?f.isDoubleClick===!0&&Fo(L):f.button===0&&L===O&&$===R&&_?.(K,{...f,preventDefault:A})}if(f.kind===Vt){if(K<0)return;f.button===0&&L===O&&$===R&&(xe?.(K,{...f,preventDefault:A}),br.current||Ds(f))}f.kind==="cell"&&(f.button===0||f.button===1)&&V(f),qn.current=void 0},[a,N,z,Gn,vr,Dt,F,Wt,Y,Ye,jr,qt,j,pr,de,ne,se,Vr,xe,_,Fo,Ds]),Ka=d.useCallback(f=>{const C={...f,location:[f.location[0]-z,f.location[1]]};Ce?.(C),a!==void 0&&f.buttons===0&&(c(void 0),Mi(void 0),Di(void 0),Xr.current=!1),Di(k=>Xr.current?[f.scrollEdge[0],0]:f.scrollEdge[0]===k?.[0]&&f.scrollEdge[1]===k[1]?k:a===void 0||(gn.current?.location[0]??0)<z?void 0:f.scrollEdge)},[a,Ce,z]),Ga=d.useCallback((f,C)=>{Tt?.(f-z,C)},[Tt,z]),xr=N?.current?.cell,qa=d.useCallback((f,C,k,L,$,O)=>{tn.current=!1;let R=xr;R!==void 0&&(R=[R[0]-z,R[1]]);const A=tt===0?void 0:{x:0,y:f.y,width:tt,height:f.height},V=[];A!==void 0&&V.push(A),Se>0&&(V.push({x:f.x-z,y:b-Se,width:f.width,height:Se}),tt>0&&V.push({x:0,y:b-Se,width:tt,height:Se}));const K={x:f.x-z,y:f.y,width:f.width,height:Mt&&f.y+f.height>=b?f.height-1:f.height,tx:$,ty:O,extras:{selected:R,freezeRegion:A,freezeRegions:V}};pt.current=K,nn(K),te([C,k,L]),bt?.(K,K.tx,K.ty,K.extras)},[xr,z,Mt,b,tt,Se,nn,bt]),Za=Rr($e,d.useCallback((f,C)=>{$e?.(f-z,C-z),ee!=="none"&&Z(ze.fromSingleSelection(C),void 0,!0)},[ee,$e,z,Z])),Fi=d.useRef(!1),Qa=d.useCallback(f=>{if(f.location[0]===0&&z>0){f.preventDefault();return}Ae?.({...f,location:[f.location[0]-z,f.location[1]]}),f.defaultPrevented()||(Fi.current=!0),c(void 0)},[Ae,z]),Ja=d.useCallback(()=>{Fi.current=!1},[]),Hi=d.useRef(),Ai=d.useCallback(f=>{if(!Pa(f,Hi.current)&&(Hi.current=f,!(gn?.current?.button!==void 0&&gn.current.button>=1))){if(f.buttons!==0&&a!==void 0&&gn.current?.location[0]===0&&f.location[0]===0&&z===1&&Ie==="multi"&&a.previousSelection&&!a.previousSelection.rows.hasIndex(gn.current.location[1])&&N.rows.hasIndex(gn.current.location[1])){const C=Math.min(gn.current.location[1],f.location[1]),k=Math.max(gn.current.location[1],f.location[1])+1;X(ze.fromSingleSelection([C,k]),void 0,!1)}if(f.buttons!==0&&a!==void 0&&N.current!==void 0&&!Fi.current&&!Xr.current&&(ae==="rect"||ae==="multi-rect")){const[C,k]=N.current.cell;let[L,$]=f.location;if($<0&&($=pt.current.y),a.fillHandle===!0&&a.previousSelection?.current!==void 0){const O=a.previousSelection.current.range;$=Math.min($,Bt?b-1:b);const R=pg(O,L,$,ct);Mi(R)}else{if(Bt&&k===b)return;if(Bt&&$===b)if(f.kind===oi)$--;else return;L=Math.max(L,z);const A=L-C,V=$-k,K={x:A>=0?C:L,y:V>=0?k:$,width:Math.abs(A)+1,height:Math.abs(V)+1};S({...N.current,range:K},!0,!1,"drag")}}an?.({...f,location:[f.location[0]-z,f.location[1]]})}},[ct,a,z,Ie,N,ae,an,X,Bt,b,S]),ec=d.useCallback(()=>{const f=Hi.current;if(f===void 0)return;const[C,k]=f.scrollEdge;let[L,$]=f.location;const O=pt.current;C===-1?L=O.extras?.freezeRegion?.x??O.x:C===1&&(L=O.x+O.width),k===-1?$=Math.max(0,O.y):k===1&&($=Math.min(b-1,O.y+O.height)),L=sn(L,0,fe.length-1),$=sn($,0,b-1),Ai({...f,location:[L,$]})},[fe.length,Ai,b]);x0(Ya,u,ec);const on=d.useCallback(f=>{if(N.current===void 0)return;const[C,k]=f,[L,$]=N.current.cell,O=N.current.range;let R=O.x,A=O.x+O.width,V=O.y,K=O.y+O.height;if(k!==0)switch(k){case 2:{K=b,V=$,ht(0,K,"vertical");break}case-2:{V=0,K=$+1,ht(0,V,"vertical");break}case 1:{V<$?(V++,ht(0,V,"vertical")):(K=Math.min(b,K+1),ht(0,K,"vertical"));break}case-1:{K>$+1?(K--,ht(0,K,"vertical")):(V=Math.max(0,V-1),ht(0,V,"vertical"));break}default:mo()}if(C!==0)if(C===2)A=fe.length,R=L,ht(A-1-z,0,"horizontal");else if(C===-2)R=z,A=L+1,ht(R-z,0,"horizontal");else{let ie=[];if(xt!==void 0){const Me=xt({x:R,y:V,width:A-R-z,height:K-V},Gt.current.signal);typeof Me=="object"&&(ie=R0(Me))}if(C===1){let Me=!1;if(R<L){if(ie.length>0){const ve=er(R+1,L+1).find(ye=>!ie.includes(ye-z));ve!==void 0&&(R=ve,Me=!0)}else R++,Me=!0;Me&&ht(R,0,"horizontal")}Me||(A=Math.min(fe.length,A+1),ht(A-1-z,0,"horizontal"))}else if(C===-1){let Me=!1;if(A>L+1){if(ie.length>0){const ve=er(A-1,L,-1).find(ye=>!ie.includes(ye-z));ve!==void 0&&(A=ve,Me=!0)}else A--,Me=!0;Me&&ht(A-z,0,"horizontal")}Me||(R=Math.max(z,R-1),ht(R-z,0,"horizontal"))}else mo()}S({cell:N.current.cell,range:{x:R,y:V,width:A-R,height:K-V}},!0,!1,"keyboard-select")},[xt,N,fe.length,z,b,ht,S]),Hn=d.useCallback((f,C,k,L)=>{const $=Ht-(k?0:1);if(f=sn(f,z,ce.length-1+z),C=sn(C,0,$),f===xr?.[0]&&C===xr?.[1])return!1;if(L&&N.current!==void 0){const O=[...N.current.rangeStack];(N.current.range.width>1||N.current.range.height>1)&&O.push(N.current.range),Dt({...N,current:{cell:[f,C],range:{x:f,y:C,width:1,height:1},rangeStack:O}},!0)}else S({cell:[f,C],range:{x:f,y:C,width:1,height:1}},!0,!1,"keyboard-nav");return h.current!==void 0&&h.current[0]===f&&h.current[1]===C&&(h.current=void 0),ht(f-z,C),!0},[Ht,z,ce.length,xr,N,ht,Dt,S]),tc=d.useCallback((f,C)=>{o?.cell!==void 0&&f!==void 0&&Tr(f)&&(qt([{location:o.cell,value:f}]),window.requestAnimationFrame(()=>{$t.current?.damage([{cell:o.cell}])})),zt(!0),i(void 0);const[k,L]=C;if(N.current!==void 0&&(k!==0||L!==0)){const $=N.current.cell[1]===Ht-1&&f!==void 0;Hn(sn(N.current.cell[0]+k,0,fe.length-1),sn(N.current.cell[1]+L,0,Ht-1),$,!1)}B?.(f,C)},[o?.cell,zt,N,B,qt,Ht,Hn,fe.length]),nc=d.useMemo(()=>`gdg-overlay-${M0++}`,[]),Zn=d.useCallback(f=>{zt();const C=[];for(let k=f.x;k<f.x+f.width;k++)for(let L=f.y;L<f.y+f.height;L++){const $=P([k-z,L]);if(!$.allowOverlay&&$.kind!==J.Boolean)continue;let O;if($.kind===J.Custom){const R=Y($),A=R?.provideEditor?.($);R?.onDelete!==void 0?O=R.onDelete($):Vu(A)&&(O=A?.deletedValue?.($))}else(Tr($)&&$.allowOverlay||$.kind===J.Boolean)&&(O=Y($)?.onDelete?.($));O!==void 0&&!Dr(O)&&Tr(O)&&C.push({location:[k,L],value:O})}qt(C),$t.current?.damage(C.map(k=>({cell:k.location})))},[zt,P,Y,qt,z]),Yr=o!==void 0,As=d.useCallback(f=>{const C=()=>{f.stopPropagation(),f.preventDefault()},k={didMatch:!1},{bounds:L}=f,$=N.columns,O=N.rows,R=en;if(!Yr&&Ee(R.clear,f,k))Dt(Yo,!1),mt?.();else if(!Yr&&Ee(R.selectAll,f,k))Dt({columns:ze.empty(),rows:ze.empty(),current:{cell:N.current?.cell??[z,0],range:{x:z,y:0,width:M.length,height:b},rangeStack:[]}},!1);else if(Ee(R.search,f,k))s?.current?.focus({preventScroll:!0}),Ro(!0);else if(Ee(R.delete,f,k)){const ye=gr?.(N)??!0;if(ye!==!1){const Pe=ye===!0?N:ye;if(Pe.current!==void 0){Zn(Pe.current.range);for(const Je of Pe.current.rangeStack)Zn(Je)}for(const Je of Pe.rows)Zn({x:z,y:Je,width:M.length,height:1});for(const Je of Pe.columns)Zn({x:Je,y:0,width:1,height:b})}}if(k.didMatch)return C(),!0;if(N.current===void 0)return!1;let[A,V]=N.current.cell,K=!1,ie=!1;Ee(R.scrollToSelectedCell,f,k)?zo.current(A-z,V):ee!=="none"&&Ee(R.selectColumn,f,k)?$.hasIndex(A)?Z($.remove(A),void 0,!0):ee==="single"?Z(ze.fromSingleSelection(A),void 0,!0):Z(void 0,A,!0):Ie!=="none"&&Ee(R.selectRow,f,k)?O.hasIndex(V)?X(O.remove(V),void 0,!0):Ie==="single"?X(ze.fromSingleSelection(V),void 0,!0):X(void 0,V,!0):!Yr&&L!==void 0&&Ee(R.activateCell,f,k)?V===b&&Mt?window.setTimeout(()=>{const ye=Do(A);wr(ye??A)},0):(j?.([A-z,V]),pr(L,!0)):N.current.range.height>1&&Ee(R.downFill,f,k)?Hs():N.current.range.width>1&&Ee(R.rightFill,f,k)?Fs():Ee(R.goToNextPage,f,k)?V+=Math.max(1,pt.current.height-4):Ee(R.goToPreviousPage,f,k)?V-=Math.max(1,pt.current.height-4):Ee(R.goToFirstCell,f,k)?(i(void 0),V=0,A=0):Ee(R.goToLastCell,f,k)?(i(void 0),V=Number.MAX_SAFE_INTEGER,A=Number.MAX_SAFE_INTEGER):Ee(R.selectToFirstCell,f,k)?(i(void 0),on([-2,-2])):Ee(R.selectToLastCell,f,k)?(i(void 0),on([2,2])):Yr?(Ee(R.closeOverlay,f,k)&&i(void 0),Ee(R.acceptOverlayDown,f,k)&&(i(void 0),V++),Ee(R.acceptOverlayUp,f,k)&&(i(void 0),V--),Ee(R.acceptOverlayLeft,f,k)&&(i(void 0),A--),Ee(R.acceptOverlayRight,f,k)&&(i(void 0),A++)):(Ee(R.goDownCell,f,k)?V+=1:Ee(R.goUpCell,f,k)?V-=1:Ee(R.goRightCell,f,k)?A+=1:Ee(R.goLeftCell,f,k)?A-=1:Ee(R.goDownCellRetainSelection,f,k)?(V+=1,K=!0):Ee(R.goUpCellRetainSelection,f,k)?(V-=1,K=!0):Ee(R.goRightCellRetainSelection,f,k)?(A+=1,K=!0):Ee(R.goLeftCellRetainSelection,f,k)?(A-=1,K=!0):Ee(R.goToLastRow,f,k)?V=b-1:Ee(R.goToFirstRow,f,k)?V=Number.MIN_SAFE_INTEGER:Ee(R.goToLastColumn,f,k)?A=Number.MAX_SAFE_INTEGER:Ee(R.goToFirstColumn,f,k)?A=Number.MIN_SAFE_INTEGER:(ae==="rect"||ae==="multi-rect")&&(Ee(R.selectGrowDown,f,k)?on([0,1]):Ee(R.selectGrowUp,f,k)?on([0,-1]):Ee(R.selectGrowRight,f,k)?on([1,0]):Ee(R.selectGrowLeft,f,k)?on([-1,0]):Ee(R.selectToLastRow,f,k)?on([0,2]):Ee(R.selectToFirstRow,f,k)?on([0,-2]):Ee(R.selectToLastColumn,f,k)?on([2,0]):Ee(R.selectToFirstColumn,f,k)&&on([-2,0])),ie=k.didMatch);const Me=Hn(A,V,!1,K),ve=k.didMatch;return ve&&(Me||!ie||Xn)&&C(),ve},[Yr,N,en,ee,Ie,ae,z,b,Hn,Dt,mt,M.length,gr,Xn,Zn,Z,X,Mt,Do,wr,j,pr,Hs,Fs,on]),Ur=d.useCallback(f=>{let C=!1;if(Fe!==void 0&&Fe({...f,cancel:()=>{C=!0}}),C||As(f)||N.current===void 0)return;const[k,L]=N.current.cell,$=pt.current;if(!f.metaKey&&!f.ctrlKey&&N.current!==void 0&&f.key.length===1&&/[ -~]/g.test(f.key)&&f.bounds!==void 0&&no(P([k-z,Math.max(0,Math.min(L,b-1))]))){if((!Bt||L!==b)&&($.y>L||L>$.y+$.height||$.x>k||k>$.x+$.width))return;pr(f.bounds,!0,f.key),f.stopPropagation(),f.preventDefault()}},[Fe,As,N,P,z,b,Bt,pr]),rc=d.useCallback((f,C)=>{const k=f.location[0]-z;if(f.kind==="header"&&ne?.(k,{...f,preventDefault:C}),f.kind===Vt){if(k<0)return;se?.(k,{...f,preventDefault:C})}if(f.kind==="cell"){const[L,$]=f.location;de?.([k,$],{...f,preventDefault:C}),nh(N,f.location)||Hn(L,$,!1,!1)}},[N,de,se,ne,z,Hn]),zi=d.useCallback(async f=>{if(!en.paste)return;function C(R,A,V,K){const ie=typeof V=="object"?V?.join(`
`)??"":V?.toString()??"";if(!Dr(R)&&no(R)&&R.readonly!==!0){const Me=W?.(ie,R);if(Me!==void 0&&Tr(Me))return{location:A,value:Me};const ve=Y(R);if(ve===void 0)return;if(ve.kind===J.Custom){Xt(R.kind===J.Custom);const ye=ve.onPaste?.(ie,R.data);return ye===void 0?void 0:{location:A,value:{...R,data:ye}}}else{const ye=ve.onPaste?.(ie,R,{formatted:K,formattedString:typeof K=="string"?K:K?.join(`
`),rawValue:V});return ye===void 0?void 0:(Xt(ye.kind===R.kind),{location:A,value:ye})}}}const k=N.columns,L=N.rows,$=u.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0;let O;if(N.current!==void 0?O=[N.current.range.x,N.current.range.y]:k.length===1?O=[k.first()??0,0]:L.length===1&&(O=[z,L.first()??0]),$&&O!==void 0){let R,A;const V="text/plain",K="text/html";if(navigator.clipboard.read!==void 0){const ye=await navigator.clipboard.read();for(const Pe of ye){if(Pe.types.includes(K)){const kt=await(await Pe.getType(K)).text(),st=ml(kt);if(st!==void 0){R=st;break}}Pe.types.includes(V)&&(A=await(await Pe.getType(V)).text())}}else if(navigator.clipboard.readText!==void 0)A=await navigator.clipboard.readText();else if(f!==void 0&&f?.clipboardData!==null){if(f.clipboardData.types.includes(K)){const ye=f.clipboardData.getData(K);R=ml(ye)}R===void 0&&f.clipboardData.types.includes(V)&&(A=f.clipboardData.getData(V))}else return;const[ie,Me]=O,ve=[];do{if(lt===void 0){const ye=Wt(O),Pe=A??R?.map(kt=>kt.map(st=>st.rawValue).join("	")).join("	")??"",Je=C(ye,O,Pe,void 0);Je!==void 0&&ve.push(Je);break}if(R===void 0){if(A===void 0)return;R=g0(A)}if(lt===!1||typeof lt=="function"&&lt?.([O[0]-z,O[1]],R.map(ye=>ye.map(Pe=>Pe.rawValue?.toString()??"")))!==!0)return;for(const[ye,Pe]of R.entries()){if(ye+Me>=b)break;for(const[Je,kt]of Pe.entries()){const st=[Je+ie,ye+Me],[kr,Gr]=st;if(kr>=fe.length||Gr>=Ht)continue;const qr=Wt(st),mn=C(qr,st,kt.rawValue,kt.formatted);mn!==void 0&&ve.push(mn)}}}while(!1);qt(ve),$t.current?.damage(ve.map(ye=>({cell:ye.location})))}},[W,Y,Wt,N,en.paste,fe.length,qt,Ht,lt,z,b]);Et("paste",zi,m,!1,!0);const Kr=d.useCallback(async(f,C)=>{if(!en.copy)return;const k=C===!0||u.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0,L=N.columns,$=N.rows,O=(R,A)=>{if(!De)wl(R,A,f);else{const V=A.map(K=>({kind:J.Text,data:M[K].title,displayData:M[K].title,allowOverlay:!1}));wl([V,...R],A,f)}};if(k&&xt!==void 0){if(N.current!==void 0){let R=xt(N.current.range,Gt.current.signal);typeof R!="object"&&(R=await R()),O(R,er(N.current.range.x-z,N.current.range.x+N.current.range.width-z))}else if($!==void 0&&$.length>0){const A=[...$].map(V=>{const K=xt({x:z,y:V,width:M.length,height:1},Gt.current.signal);return typeof K=="object"?K[0]:K().then(ie=>ie[0])});if(A.some(V=>V instanceof Promise)){const V=await Promise.all(A);O(V,er(M.length))}else O(A,er(M.length))}else if(L.length>0){const R=[],A=[];for(const V of L){let K=xt({x:V,y:0,width:1,height:b},Gt.current.signal);typeof K!="object"&&(K=await K()),R.push(K),A.push(V-z)}if(R.length===1)O(R[0],A);else{const V=R.reduce((K,ie)=>K.map((Me,ve)=>[...Me,...ie[ve]]));O(V,A)}}}},[M,xt,N,en.copy,z,b,De]);Et("copy",Kr,m,!1,!1);const oc=d.useCallback(async f=>{if(!(!en.cut||!(u.current?.contains(document.activeElement)===!0||l.current?.contains(document.activeElement)===!0))&&(await Kr(f),N.current!==void 0)){let k={current:{cell:N.current.cell,range:N.current.range,rangeStack:[]},rows:ze.empty(),columns:ze.empty()};const L=gr?.(k);if(L===!1||(k=L===!0?k:L,k.current===void 0))return;Zn(k.current.range)}},[Zn,N,en.cut,Kr,gr]);Et("cut",oc,m,!1,!1);const ic=d.useCallback((f,C)=>{if(Re!==void 0){z!==0&&(f=f.map($=>[$[0]-z,$[1]])),Re(f,C);return}if(f.length===0||C===-1)return;const[k,L]=f[C];h.current!==void 0&&h.current[0]===k&&h.current[1]===L||(h.current=[k,L],Hn(k,L,!1,!1))},[Re,z,Hn]),[Ho,Ao]=Kt?.current?.cell??[],zo=d.useRef(ht);zo.current=ht,d.useLayoutEffect(()=>{!tn.current&&Ho!==void 0&&Ao!==void 0&&(Ho!==In.current?.current?.cell[0]||Ao!==In.current?.current?.cell[1])&&zo.current(Ho,Ao),tn.current=!1},[Ho,Ao]);const zs=N.current!==void 0&&(N.current.cell[0]>=fe.length||N.current.cell[1]>=Ht);d.useLayoutEffect(()=>{zs&&Dt(Yo,!1)},[zs,Dt]);const sc=d.useMemo(()=>Mt===!0&&Ct?.tint===!0?ze.fromSingleSelection(Ht-1):ze.empty(),[Ht,Mt,Ct?.tint]),lc=d.useCallback(f=>typeof St=="boolean"?St:St?.(f-z)??!0,[z,St]),ac=d.useMemo(()=>{if(Ti===void 0||l.current===null)return null;const{bounds:f,group:C}=Ti,k=l.current.getBoundingClientRect();return d.createElement(r0,{bounds:f,group:C,canvasBounds:k,onClose:()=>Ii(void 0),onFinish:L=>{Ii(void 0),Q?.(C,L)}})},[Q,Ti]),cc=Math.min(fe.length,tt+(Ot?1:0));d.useImperativeHandle(t,()=>({appendRow:(f,C)=>wr(f+z,C),updateCells:f=>(z!==0&&(f=f.map(C=>({cell:[C.cell[0]+z,C.cell[1]]}))),$t.current?.damage(f)),getBounds:(f,C)=>{if(!(l?.current===null||u?.current===null)){if(f===void 0&&C===void 0){const k=l.current.getBoundingClientRect(),L=k.width/u.current.clientWidth;return{x:k.x-u.current.scrollLeft*L,y:k.y-u.current.scrollTop*L,width:u.current.scrollWidth*L,height:u.current.scrollHeight*L}}return $t.current?.getBounds((f??0)+z,C)}},focus:()=>$t.current?.focus(),emit:async f=>{switch(f){case"delete":Ur({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!1,key:"Delete",keyCode:46,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-right":Ur({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"r",keyCode:82,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"fill-down":Ur({bounds:void 0,cancel:()=>{},stopPropagation:()=>{},preventDefault:()=>{},ctrlKey:!0,key:"d",keyCode:68,metaKey:!1,shiftKey:!1,altKey:!1,rawEvent:void 0,location:void 0});break;case"copy":await Kr(void 0,!0);break;case"paste":await zi();break}},scrollTo:ht,remeasureColumns:f=>{for(const C of f)Fo(C+z)}}),[wr,Fo,Kr,Ur,zi,z,ht]);const[Ls,Ps]=xr??[],dc=d.useCallback(f=>{const[C,k]=f;if(k===-1){ee!=="none"&&(Z(ze.fromSingleSelection(C),void 0,!1),zt());return}Ls===C&&Ps===k||(S({cell:f,range:{x:C,y:k,width:1,height:1}},!0,!1,"keyboard-nav"),ht(C,k))},[ee,zt,ht,Ls,Ps,S,Z]),[uc,fc]=d.useState(!1),$s=d.useRef(Dl(f=>{fc(f)},5)),hc=d.useCallback(()=>{$s.current(!0),N.current===void 0&&N.columns.length===0&&N.rows.length===0&&a===void 0&&S({cell:[z,hn],range:{x:z,y:hn,width:1,height:1}},!0,!1,"keyboard-select")},[hn,N,a,z,S]),gc=d.useCallback(()=>{$s.current(!1)},[]),[mc,pc]=d.useMemo(()=>{let f;const C=Qt?.scrollbarWidthOverride??qi(),k=b+(Mt?1:0);if(typeof It=="number")f=ot+k*It;else{let $=0;const O=Math.min(k,10);for(let R=0;R<O;R++)$+=It(R);$=Math.floor($/O),f=ot+k*$}f+=C;const L=fe.reduce(($,O)=>O.width+$,0)+C;return[`${Math.min(1e5,L)}px`,`${Math.min(1e5,f)}px`]},[fe,Qt?.scrollbarWidthOverride,It,b,Mt,ot]);return d.createElement(yh.Provider,{value:re},d.createElement(y0,{style:wh(re),className:Be,inWidth:y??mc,inHeight:E??pc},d.createElement(Jg,{fillHandle:bn,drawFocusRing:vo,experimental:Qt,fixedShadowX:jn,fixedShadowY:Vn,getRowThemeOverride:v,headerIcons:or,imageWindowLoader:xo,initialSize:ko,isDraggable:ir,onDragLeave:sr,onRowMoved:Jt,overscrollX:bi,overscrollY:vi,preventDiagonalScrolling:Co,rightElement:mi,rightElementProps:pi,smoothScrollX:Rn,smoothScrollY:wi,className:Be,enableGroups:at,onCanvasFocused:hc,onCanvasBlur:gc,canvasRef:l,onContextMenu:rc,theme:re,cellXOffset:Wr,cellYOffset:hn,accessibilityHeight:_e.height,onDragEnd:Ja,columns:fe,nonGrowWidth:Oe,drawHeader:hr,onColumnProposeMove:G,drawCell:Si,disabledRows:sc,freezeColumns:cc,lockColumns:z,firstColAccessible:z===0,getCellContent:Wt,minColumnWidth:vn,maxColumnWidth:En,searchInputRef:s,showSearch:ki,onSearchClose:Br,highlightRegions:Va,getCellsForSelection:xt,getGroupDetails:Ri,headerHeight:cr,isFocused:uc,groupHeaderHeight:at?Nr:0,freezeTrailingRows:Se+(Mt&&Ct?.sticky===!0?1:0),hasAppendRow:Mt,onColumnResize:ur,onColumnResizeEnd:fr,onColumnResizeStart:Ci,onCellFocused:dc,onColumnMoved:Za,onDragStart:Qa,onHeaderMenuClick:Ga,onItemHovered:Ai,isFilling:a?.fillHandle===!0,onMouseMove:Ka,onKeyDown:Ur,onKeyUp:He,onMouseDown:Xa,onMouseUp:Ua,onDragOverCell:fn,onDrop:$r,onSearchResultsChanged:ic,onVisibleRegionChanged:qa,clientSize:U,rowHeight:It,searchResults:le,searchValue:je,onSearchValueChange:We,rows:Ht,scrollRef:u,selection:N,translateX:_e.tx,translateY:_e.ty,verticalBorder:lc,gridRef:$t,getCellRenderer:Y}),ac,o!==void 0&&d.createElement(d.Suspense,{fallback:null},d.createElement(S0,{...o,validateCell:dr,id:nc,getCellRenderer:Y,className:Qt?.isSubGrid===!0?"click-outside-ignore":void 0,provideEditor:un,imageEditorOverride:w,onFinishEditing:tc,markdownDivCreateNode:x,isOutsideClick:Mo}))))},T0=d.forwardRef(E0),vl=20,I0={getAccessibilityString:e=>e.data?.toString()??"false",kind:J.Boolean,needsHover:!0,useLabel:!1,needsHoverPosition:!0,measure:()=>50,draw:e=>D0(e,e.cell.data,Gi(e.cell),e.cell.maxSize??vl),onDelete:e=>({...e,data:!1}),onClick:e=>{const{cell:t,posX:n,posY:r,bounds:o,theme:i}=e,{width:s,height:l,x:a,y:c}=o,u=t.maxSize??vl,h=Math.floor(o.y+l/2),m=oa(u,l,i.cellVerticalPadding),p=ra(t.contentAlign??"center",a,s,i.cellHorizontalPadding,m),g=na(p,h,m),w=ia(a+n,c+r,g);if(Gi(t)&&w)return{...t,data:_a(t.data)}},onPaste:(e,t)=>{let n=qo;return e.toLowerCase()==="true"?n=!0:e.toLowerCase()==="false"?n=!1:e.toLowerCase()==="indeterminate"&&(n=ls),n===t.data?void 0:{...t,data:n}}};function D0(e,t,n,r){if(!n&&t===qo)return;const{ctx:o,hoverAmount:i,theme:s,rect:l,highlighted:a,hoverX:c,hoverY:u,cell:{contentAlign:h}}=e,{x:m,y:p,width:g,height:w}=l,v=.35;let x=n?1-v+v*i:.4;t===qo&&(x*=i),x!==0&&(o.globalAlpha=x,vs(o,s,t,m,p,g,w,a,c,u,r,h),o.globalAlpha=1)}const F0=Ut("div")({name:"BubblesOverlayEditorStyle",class:"gdg-b1ygi5by",propsAsIs:!1}),H0=e=>{const{bubbles:t}=e;return d.createElement(F0,null,t.map((n,r)=>d.createElement("div",{key:r,className:"boe-bubble"},n)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))},A0={getAccessibilityString:e=>sa(e.data),kind:J.Bubble,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((r,o)=>e.measureText(o).width+r+20,0)+2*n.cellHorizontalPadding-4,draw:e=>L0(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return d.createElement(H0,{bubbles:t.data})},onPaste:()=>{}},z0=4;function L0(e,t){const{rect:n,theme:r,ctx:o,highlighted:i}=e,{x:s,y:l,width:a,height:c}=n,u=20,h=8,m=z0;let p=s+r.cellHorizontalPadding;const g=[];for(const w of t){if(p>s+a)break;const v=di(w,o,r.baseFontFull).width;g.push({x:p,width:v}),p+=v+h*2+m}o.beginPath();for(const w of g)Sn(o,w.x,l+(c-u)/2,w.width+h*2,u,r.roundingRadius??u/2);o.fillStyle=i?r.bgBubbleSelected:r.bgBubble,o.fill();for(const[w,v]of g.entries())o.beginPath(),o.fillStyle=r.textBubble,o.fillText(t[w],v.x+h,l+c/2+On(o,r))}const P0=Ut("div")({name:"DrilldownOverlayEditorStyle",class:"gdg-d4zsq0x",propsAsIs:!1}),$0=e=>{const{drilldowns:t}=e;return d.createElement(P0,null,t.map((n,r)=>d.createElement("div",{key:r,className:"doe-bubble"},n.img!==void 0&&d.createElement("img",{src:n.img}),d.createElement("div",null,n.text))))},_0={getAccessibilityString:e=>sa(e.data.map(t=>t.text)),kind:J.Drilldown,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:(e,t,n)=>t.data.reduce((r,o)=>e.measureText(o.text).width+r+20+(o.img!==void 0?18:0),0)+2*n.cellHorizontalPadding-4,draw:e=>B0(e,e.cell.data),provideEditor:()=>e=>{const{value:t}=e;return d.createElement($0,{drilldowns:t.data})},onPaste:()=>{}},N0=4,Vi={};function O0(e,t,n,r){const o=Math.ceil(window.devicePixelRatio),i=5,s=n-i*2,l=4,a=n*o,c=r+i,u=r*3,h=(u+i*2)*o,m=`${e},${t},${o},${n}`;if(Vi[m]!==void 0)return{el:Vi[m],height:a,width:h,middleWidth:l*o,sideWidth:c*o,padding:i*o,dpr:o};const p=document.createElement("canvas"),g=p.getContext("2d");return g===null?null:(p.width=h,p.height=a,g.scale(o,o),Vi[m]=p,g.beginPath(),Sn(g,i,i,u,s,r),g.shadowColor="rgba(24, 25, 34, 0.4)",g.shadowBlur=1,g.fillStyle=e,g.fill(),g.shadowColor="rgba(24, 25, 34, 0.3)",g.shadowOffsetY=1,g.shadowBlur=5,g.fillStyle=e,g.fill(),g.shadowOffsetY=0,g.shadowBlur=0,g.shadowBlur=0,g.beginPath(),Sn(g,i+.5,i+.5,u,s,r),g.strokeStyle=t,g.lineWidth=1,g.stroke(),{el:p,height:a,width:h,sideWidth:c*o,middleWidth:r*o,padding:i*o,dpr:o})}function B0(e,t){const{rect:n,theme:r,ctx:o,imageLoader:i,col:s,row:l}=e,{x:a,width:c}=n,u=r.baseFontFull,h=ka(o,u),m=Math.min(n.height,Math.max(16,Math.ceil(h*r.lineHeight)*2)),p=Math.floor(n.y+(n.height-m)/2),g=m-10,w=8,v=N0;let x=a+r.cellHorizontalPadding;const y=r.roundingRadius??6,E=O0(r.bgCell,r.drilldownBorder,m,y),M=[];for(const b of t){if(x>a+c)break;const F=di(b.text,o,u).width;let j=0;b.img!==void 0&&i.loadOrGetImage(b.img,s,l)!==void 0&&(j=g-8+4);const I=F+j+w*2;M.push({x,width:I}),x+=I+v}if(E!==null){const{el:b,height:P,middleWidth:F,sideWidth:j,width:I,dpr:B,padding:W}=E,D=j/B,H=W/B;for(const _ of M){const G=Math.floor(_.x),he=Math.floor(_.width),xe=he-(D-H)*2;o.imageSmoothingEnabled=!1,o.drawImage(b,0,0,j,P,G-H,p,D,m),xe>0&&o.drawImage(b,j,0,F,P,G+(D-H),p,xe,m),o.drawImage(b,I-j,0,j,P,G+he-(D-H),p,D,m),o.imageSmoothingEnabled=!0}}o.beginPath();for(const[b,P]of M.entries()){const F=t[b];let j=P.x+w;if(F.img!==void 0){const I=i.loadOrGetImage(F.img,s,l);if(I!==void 0){const B=g-8;let W=0,D=0,H=I.width,_=I.height;H>_?(W+=(H-_)/2,H=_):_>H&&(D+=(_-H)/2,_=H),o.beginPath(),Sn(o,j,p+m/2-B/2,B,B,r.roundingRadius??3),o.save(),o.clip(),o.drawImage(I,W,D,H,_,j,p+m/2-B/2,B,B),o.restore(),j+=B+4}}o.beginPath(),o.fillStyle=r.textBubble,o.fillText(F.text,j,p+m/2+On(o,r))}}const W0={getAccessibilityString:e=>e.data.join(", "),kind:J.Image,needsHover:!1,useLabel:!1,needsHoverPosition:!1,draw:e=>j0(e,e.cell.displayData??e.cell.data,e.cell.rounding??e.theme.roundingRadius??4,e.cell.contentAlign),measure:(e,t)=>t.data.length*50,onDelete:e=>({...e,data:[]}),provideEditor:()=>e=>{const{value:t,onFinishedEditing:n,imageEditorOverride:r}=e,o=r??af;return d.createElement(o,{urls:t.data,canWrite:t.readonly!==!1,onCancel:n,onChange:i=>{n({...t,data:[i]})}})},onPaste:(e,t)=>{e=e.trim();const r=e.split(",").map(o=>{try{return new URL(o),o}catch{return}}).filter(o=>o!==void 0);if(!(r.length===t.data.length&&r.every((o,i)=>o===t.data[i])))return{...t,data:r}}},Xi=4;function j0(e,t,n,r){const{rect:o,col:i,row:s,theme:l,ctx:a,imageLoader:c}=e,{x:u,y:h,height:m,width:p}=o,g=m-l.cellVerticalPadding*2,w=[];let v=0;for(let y=0;y<t.length;y++){const E=t[y];if(E.length===0)continue;const M=c.loadOrGetImage(E,i,s);if(M!==void 0){w[y]=M;const b=M.width*(g/M.height);v+=b+Xi}}if(v===0)return;v-=Xi;let x=u+l.cellHorizontalPadding;r==="right"?x=Math.floor(u+p-l.cellHorizontalPadding-v):r==="center"&&(x=Math.floor(u+p/2-v/2));for(const y of w){if(y===void 0)continue;const E=y.width*(g/y.height);n>0&&(a.beginPath(),Sn(a,x,h+l.cellVerticalPadding,E,g,n),a.save(),a.clip()),a.drawImage(y,x,h+l.cellVerticalPadding,E,g),n>0&&a.restore(),x+=E+Xi}}function V0(e,t){let n=e*49632+t*325176;return n^=n<<13,n^=n>>17,n^=n<<5,n/4294967295*2}const X0={getAccessibilityString:()=>"",kind:J.Loading,needsHover:!1,useLabel:!1,needsHoverPosition:!1,measure:()=>120,draw:e=>{const{cell:t,col:n,row:r,ctx:o,rect:i,theme:s}=e;if(t.skeletonWidth===void 0||t.skeletonWidth===0)return;let l=t.skeletonWidth;t.skeletonWidthVariability!==void 0&&t.skeletonWidthVariability>0&&(l+=Math.round(V0(n,r)*t.skeletonWidthVariability));const a=s.cellHorizontalPadding,c=t.skeletonHeight??Math.min(18,i.height-2*s.cellVerticalPadding);Sn(o,i.x+a,i.y+(i.height-c)/2,l,c,s.roundingRadius??3),o.fillStyle=zr(s.textDark,.1),o.fill()},onPaste:()=>{}},Y0=()=>e=>e.targetWidth,xl=Ut("div")({name:"MarkdownOverlayEditorStyle",class:"gdg-m1pnx84e",propsAsIs:!1,vars:{"m1pnx84e-0":[Y0(),"px"]}}),U0=e=>{const{value:t,onChange:n,forceEditMode:r,createNode:o,targetRect:i,onFinish:s,validatedSelection:l}=e,a=t.data,c=t.readonly===!0,[u,h]=d.useState(a===""||r),m=d.useCallback(()=>{h(g=>!g)},[]),p=a?"gdg-ml-6":"";return u?d.createElement(xl,{targetWidth:i.width-20},d.createElement(ci,{autoFocus:!0,highlight:!1,validatedSelection:l,value:a,onKeyDown:g=>{g.key==="Enter"&&g.stopPropagation()},onChange:n}),d.createElement("div",{className:`gdg-edit-icon gdg-checkmark-hover ${p}`,onClick:()=>s(t)},d.createElement(ef,null))):d.createElement(xl,{targetWidth:i.width},d.createElement(Xf,{contents:a,createNode:o}),!c&&d.createElement(d.Fragment,null,d.createElement("div",{className:"spacer"}),d.createElement("div",{className:`gdg-edit-icon gdg-edit-hover ${p}`,onClick:m},d.createElement(as,null))),d.createElement("textarea",{className:"gdg-md-edit-textarea gdg-input",autoFocus:!0}))},K0={getAccessibilityString:e=>e.data?.toString()??"",kind:J.Markdown,needsHover:!1,needsHoverPosition:!1,drawPrep:bo,measure:(e,t,n)=>{const r=t.data.split(`
`)[0];return e.measureText(r).width+2*n.cellHorizontalPadding},draw:e=>kn(e,e.cell.data,e.cell.contentAlign),onDelete:e=>({...e,data:""}),provideEditor:()=>e=>{const{onChange:t,value:n,target:r,onFinishedEditing:o,markdownDivCreateNode:i,forceEditMode:s,validatedSelection:l}=e;return d.createElement(U0,{onFinish:o,targetRect:r,value:n,validatedSelection:l,onChange:a=>t({...n,data:a.target.value}),forceEditMode:s,createNode:i})},onPaste:(e,t)=>e===t.data?void 0:{...t,data:e}},G0={getAccessibilityString:e=>e.row.toString(),kind:Zt.Marker,needsHover:!0,needsHoverPosition:!1,drawPrep:q0,measure:()=>44,draw:e=>Q0(e,e.cell.row,e.cell.checked,e.cell.markerKind,e.cell.drawHandle),onClick:e=>{const{bounds:t,cell:n,posX:r,posY:o}=e,{width:i,height:s}=t,l=n.drawHandle?7+(i-7)/2:i/2,a=s/2;if(Math.abs(r-l)<=10&&Math.abs(o-a)<=10)return{...n,checked:!n.checked}},onPaste:()=>{}};function q0(e,t){const{ctx:n,theme:r}=e,o=r.markerFontFull,i=t??{};return i?.font!==o&&(n.font=o,i.font=o),i.deprep=Z0,n.textAlign="center",i}function Z0(e){const{ctx:t}=e;t.textAlign="start"}function Q0(e,t,n,r,o){const{ctx:i,rect:s,hoverAmount:l,theme:a}=e,{x:c,y:u,width:h,height:m}=s,p=n?1:r==="checkbox-visible"?.6+.4*l:l;if(r!=="number"&&p>0){i.globalAlpha=p;const g=7*(n?l:1);if(vs(i,a,n,o?c+g:c,u,o?h-g:h,m,!0,void 0,void 0,18),o){i.globalAlpha=l,i.beginPath();for(const w of[3,6])for(const v of[-5,-1,3])i.rect(c+w,u+m/2+v,2,2);i.fillStyle=a.textLight,i.fill(),i.beginPath()}i.globalAlpha=1}if(r==="number"||r==="both"&&!n){const g=t.toString(),w=a.markerFontFull,v=c+h/2;r==="both"&&l!==0&&(i.globalAlpha=1-l),i.fillStyle=a.textLight,i.font=w,i.fillText(g,v,u+m/2+On(i,w)),l!==0&&(i.globalAlpha=1)}}const J0={getAccessibilityString:()=>"",kind:Zt.NewRow,needsHover:!0,needsHoverPosition:!1,measure:()=>200,draw:e=>em(e,e.cell.hint,e.cell.icon),onPaste:()=>{}};function em(e,t,n){const{ctx:r,rect:o,hoverAmount:i,theme:s,spriteManager:l}=e,{x:a,y:c,width:u,height:h}=o;r.beginPath(),r.globalAlpha=i,r.rect(a+1,c+1,u,h-2),r.fillStyle=s.bgHeaderHovered,r.fill(),r.globalAlpha=1,r.beginPath();const m=t!=="";let p=0;if(n!==void 0){const w=h-8,v=a+8/2,x=c+8/2;l.drawSprite(n,"normal",r,v,x,w,s,m?1:i),p=w}else{p=24;const g=12,w=m?g:i*g,v=m?0:(1-i)*g*.5,x=s.cellHorizontalPadding+4;w>0&&(r.moveTo(a+x+v,c+h/2),r.lineTo(a+x+v+w,c+h/2),r.moveTo(a+x+v+w*.5,c+h/2-w*.5),r.lineTo(a+x+v+w*.5,c+h/2+w*.5),r.lineWidth=2,r.strokeStyle=s.bgIconHeader,r.lineCap="round",r.stroke())}r.fillStyle=s.textMedium,r.fillText(t,p+a+s.cellHorizontalPadding+.5,c+h/2+On(r,s)),r.beginPath()}const tm=d.lazy(async()=>await Ml(()=>import("./cx8c6fqavyb4g7qz.js"),__vite__mapDeps([24,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23]))),nm={getAccessibilityString:e=>e.data?.toString()??"",kind:J.Number,needsHover:!1,needsHoverPosition:!1,useLabel:!0,drawPrep:bo,draw:e=>kn(e,e.cell.displayData,e.cell.contentAlign),measure:(e,t,n)=>e.measureText(t.displayData).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:void 0}),provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,value:r,validatedSelection:o}=e;return d.createElement(d.Suspense,{fallback:null},d.createElement(tm,{highlight:t,disabled:r.readonly===!0,value:r.data,fixedDecimals:r.fixedDecimals,allowNegative:r.allowNegative,thousandSeparator:r.thousandSeparator,decimalSeparator:r.decimalSeparator,validatedSelection:o,onChange:i=>n({...r,data:Number.isNaN(i.floatValue??0)?0:i.floatValue})}))},onPaste:(e,t,n)=>{const r=typeof n.rawValue=="number"?n.rawValue:Number.parseFloat(typeof n.rawValue=="string"?n.rawValue:e);if(!(Number.isNaN(r)||t.data===r))return{...t,data:r,displayData:n.formattedString??t.displayData}}},rm={getAccessibilityString:()=>"",measure:()=>108,kind:J.Protected,needsHover:!1,needsHoverPosition:!1,draw:om,onPaste:()=>{}};function om(e){const{ctx:t,theme:n,rect:r}=e,{x:o,y:i,height:s}=r;t.beginPath();const l=2.5;let a=o+n.cellHorizontalPadding+l;const c=i+s/2,u=Math.cos(Gs(30))*l,h=Math.sin(Gs(30))*l;for(let m=0;m<12;m++)t.moveTo(a,c-l),t.lineTo(a,c+l),t.moveTo(a+u,c-h),t.lineTo(a-u,c+h),t.moveTo(a-u,c-h),t.lineTo(a+u,c+h),a+=8;t.lineWidth=1.1,t.lineCap="square",t.strokeStyle=n.textLight,t.stroke()}const im={getAccessibilityString:e=>e.data?.toString()??"",kind:J.RowID,needsHover:!1,needsHoverPosition:!1,drawPrep:(e,t)=>bo(e,t,e.theme.textLight),draw:e=>kn(e,e.cell.data,e.cell.contentAlign),measure:(e,t,n)=>e.measureText(t.data).width+n.cellHorizontalPadding*2,provideEditor:()=>e=>{const{isHighlighted:t,onChange:n,value:r,validatedSelection:o}=e;return yt.createElement(ci,{highlight:t,autoFocus:r.readonly!==!0,disabled:r.readonly!==!1,value:r.data,validatedSelection:o,onChange:i=>n({...r,data:i.target.value})})},onPaste:()=>{}},sm={getAccessibilityString:e=>e.data?.toString()??"",kind:J.Text,needsHover:!1,needsHoverPosition:!1,drawPrep:bo,useLabel:!0,draw:e=>(kn(e,e.cell.displayData,e.cell.contentAlign,e.cell.allowWrapping,e.hyperWrapping),!0),measure:(e,t,n)=>{const r=t.displayData.split(`
`,t.allowWrapping===!0?void 0:1);return Math.max(...r.map(o=>e.measureText(o).width))+2*n.cellHorizontalPadding},onDelete:e=>({...e,data:""}),provideEditor:e=>({disablePadding:e.allowWrapping===!0,editor:t=>{const{isHighlighted:n,onChange:r,value:o,validatedSelection:i}=t;return d.createElement(ci,{style:e.allowWrapping===!0?{padding:"3px 8.5px"}:void 0,highlight:n,autoFocus:o.readonly!==!0,disabled:o.readonly===!0,altNewline:!0,value:o.data,validatedSelection:i,onChange:s=>r({...o,data:s.target.value})})}}),onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},lm=Ut("div")({name:"UriOverlayEditorStyle",class:"gdg-u1rrojo",propsAsIs:!1}),am=e=>{const{uri:t,onChange:n,forceEditMode:r,readonly:o,validatedSelection:i,preview:s}=e,[l,a]=d.useState(t===""||r),c=d.useCallback(()=>{a(!0)},[]);return l?d.createElement(ci,{validatedSelection:i,highlight:!0,autoFocus:!0,value:t,onChange:n}):d.createElement(lm,null,d.createElement("a",{className:"gdg-link-area",href:t,target:"_blank",rel:"noopener noreferrer"},s),!o&&d.createElement("div",{className:"gdg-edit-icon",onClick:c},d.createElement(as,null)),d.createElement("textarea",{className:"gdg-input",autoFocus:!0}))};function kl(e,t,n,r){let o=n.cellHorizontalPadding;const i=t.height/2-e.actualBoundingBoxAscent/2,s=e.width,l=e.actualBoundingBoxAscent;return r==="right"?o=t.width-s-n.cellHorizontalPadding:r==="center"&&(o=t.width/2-s/2),{x:o,y:i,width:s,height:l}}const cm={getAccessibilityString:e=>e.data?.toString()??"",kind:J.Uri,needsHover:!0,needsHoverPosition:!0,useLabel:!0,drawPrep:bo,draw:e=>{const{cell:t,theme:n,overrideCursor:r,hoverX:o,hoverY:i,rect:s,ctx:l}=e,a=t.displayData??t.data;if(r!==void 0&&t.hoverEffect===!0&&o!==void 0&&i!==void 0){const c=di(a,l,n.baseFontFull),u=kl(c,s,n,t.contentAlign),{x:h,y:m,width:p,height:g}=u;if(o>=h-4&&o<=h-4+p+8&&i>=m-4&&i<=m-4+g+8){const w=On(l,n.baseFontFull);r("pointer");const v=5,x=m-w;l.beginPath(),l.moveTo(s.x+h,Math.floor(s.y+x+g+v)+.5),l.lineTo(s.x+h+p,Math.floor(s.y+x+g+v)+.5),l.strokeStyle=n.textDark,l.stroke(),l.save(),l.fillStyle=e.cellFillColor,kn({...e,rect:{...s,x:s.x-1}},a,t.contentAlign),kn({...e,rect:{...s,x:s.x-2}},a,t.contentAlign),kn({...e,rect:{...s,x:s.x+1}},a,t.contentAlign),kn({...e,rect:{...s,x:s.x+2}},a,t.contentAlign),l.restore()}}kn(e,a,t.contentAlign)},onClick:e=>{const{cell:t,bounds:n,posX:r,posY:o,theme:i}=e,s=t.displayData??t.data;if(t.hoverEffect!==!0||t.onClickUri===void 0)return;const l=ch(s,i.baseFontFull);if(l===void 0)return;const a=kl(l,n,i,t.contentAlign);ui({x:a.x-4,y:a.y-4,width:a.width+8,height:a.height+8},r,o)&&t.onClickUri(e)},measure:(e,t,n)=>e.measureText(t.displayData??t.data).width+n.cellHorizontalPadding*2,onDelete:e=>({...e,data:""}),provideEditor:e=>t=>{const{onChange:n,value:r,forceEditMode:o,validatedSelection:i}=t;return d.createElement(am,{forceEditMode:o||e.hoverEffect===!0&&e.onClickUri!==void 0,uri:r.data,preview:r.displayData??r.data,validatedSelection:i,readonly:r.readonly===!0,onChange:s=>n({...r,data:s.target.value})})},onPaste:(e,t,n)=>e===t.data?void 0:{...t,data:e,displayData:n.formattedString??t.displayData}},dm=[G0,J0,I0,A0,_0,W0,X0,K0,nm,rm,im,sm,cm],Yi=[];class um extends Sa{imageLoaded=()=>{};loadedLocations=[];cache={};setCallback(t){this.imageLoaded=t}sendLoaded=Md(()=>{this.imageLoaded(new ho(this.loadedLocations)),this.loadedLocations=[]},20);clearOutOfWindow=()=>{const t=Object.keys(this.cache);for(const n of t){const r=this.cache[n];let o=!1;for(let i=0;i<r.cells.length;i++){const s=r.cells[i];if(this.isInWindow(s)){o=!0;break}}o?r.cells=r.cells.filter(this.isInWindow):(r.cancel(),delete this.cache[n])}};loadImage(t,n,r,o){let i=!1;const s=Yi.pop()??new Image;let l=!1;const a={img:void 0,cells:[ln(n,r)],url:t,cancel:()=>{l||(l=!0,Yi.length<12?Yi.unshift(s):i||(s.src=""))}},c=new Promise(u=>s.addEventListener("load",()=>u(null)));requestAnimationFrame(async()=>{try{s.src=t,await c,await s.decode();const u=this.cache[o];if(u!==void 0&&!l){u.img=s;for(const h of u.cells)this.loadedLocations.push(bs(h));i=!0,this.sendLoaded()}}catch{a.cancel()}}),this.cache[o]=a}loadOrGetImage(t,n,r){const o=t,i=this.cache[o];if(i!==void 0){const s=ln(n,r);return i.cells.includes(s)||i.cells.push(s),i.img}else this.loadImage(t,n,r,o)}}const fm=(e,t)=>{const n=d.useMemo(()=>({...hg,...e.headerIcons}),[e.headerIcons]),r=d.useMemo(()=>e.imageWindowLoader??new um,[e.imageWindowLoader]);return d.createElement(T0,{...e,renderers:dm,headerIcons:n,ref:t,imageWindowLoader:r})},hm=d.forwardRef(fm);function gm(e){switch(e){case"number":return J.Number;case"imageUrl":return J.Image;default:return J.Text}}const Cl=40,Sl=500;function mm({table:e,height:t,width:n,isInFocusedView:r=!1,className:o=""}){const{targetedContent:i,setTargetedContent:s}=Rd(),[l,a]=d.useState([]),c=getComputedStyle(document.documentElement),u=os();d.useEffect(()=>{e.columnNames.length>0&&a(e.columnNames.map((x,y)=>({id:`id:${y}`,title:x,maxWidth:500})))},[e.columnNames]);const[h,m]=d.useState({columns:ze.empty(),rows:ze.empty()}),p=d.useCallback(function([y,E]){const M=e.rows[E];return{kind:gm(e.columnTypes[y]),data:M[y],allowOverlay:!0,readonly:!0,displayData:String(M[y]),allowWrapping:!0,contentAlignment:"left"}},[e.columnTypes,e.rows]),g=d.useCallback(x=>{if(x.columns.length>0){const y=x.columns.items.flatMap(M=>e.columnNames.slice(M[0],M[1]));Pn.logEvent($n.adaColumnTargeted);const E=y.length>1?u.formatMessage({id:"B+HlXu",defaultMessage:"{totalColumns} columns"},{totalColumns:y.length}):u.formatMessage({id:"KnFSJb",defaultMessage:'"{columnName}" column'},{columnName:y[0]});s({type:"object",label:E,isFocusedViewContent:r,createNewCompletionParams:M=>Ui(M,`The user has selected the columns:  ${y.map(b=>`"${b}"`).join(", ")} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,E)})}else if(x.rows.length>0){const y=x.rows.items.flatMap(M=>{const[b,P]=M,F=[];for(let j=b;j<P;j++)F.push(j);return F}),E=y.length>1?u.formatMessage({id:"vFstNk",defaultMessage:"{totalRows} rows"},{totalRows:y.length}):u.formatMessage({id:"43/z2q",defaultMessage:"#{rowIndex} row"},{rowIndex:y[0]+1});Pn.logEvent($n.adaRowTargeted),s({type:"object",label:E,isFocusedViewContent:r,createNewCompletionParams:M=>Ui(M,`The user has selected rows at the following indices: ${y.map(b=>`"${b}"`).join(", ")} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,E)})}else if(x.current){const y=x.current.range.x,E=x.current.range.y,M=x.current.range.x+x.current.range.width,b=x.current.range.y+x.current.range.height,P=(M-y)*(b-E);let F="";P===1&&(F=e.rows[x.current.cell[1]][x.current.cell[0]]),Pn.logEvent($n.adaRangeTargeted);const j=P>1?u.formatMessage({id:"Ia9GsC",defaultMessage:"{totalCells} cells"},{totalCells:P}):u.formatMessage({id:"MEl4hN",defaultMessage:'"{cellContent}" cell'},{cellContent:F});s({type:"object",isFocusedViewContent:r,label:j,createNewCompletionParams:I=>Ui(I,`The user has selected a range at the iloc: ${E}:${b}, ${y}:${M} in the ${e.name} table ${e.sheetName?` in the ${e.sheetName} sheet`:""}`,j)})}x.columns.length===0&&x.rows.length===0&&x.current===void 0&&s(void 0),m(x)},[e.columnNames,s,r,e.rows,u,e.name,e.sheetName]);d.useEffect(()=>{i===void 0&&m({columns:ze.empty(),rows:ze.empty()})},[i]);const w=d.useCallback(x=>{const b=e.rows[x];if(!b)return 44;const P=b.reduce((D,H)=>{const _=D?.length||0,G=H?.length||0;return _>G?D:H})??"",I=(l[b.indexOf(P)]?.width||150)/8,B=Math.ceil(P.length/I);return 24+(B<4?B:4)*20},[e.rows,l]);d.useEffect(()=>{if(!document.getElementById("portal")){const x=document.createElement("div");x.id="portal",x.style.position="fixed",x.style.left="0",x.style.top="0",x.style.zIndex="9999",document.body.appendChild(x)}return()=>{const x=document.getElementById("portal");x&&document.body.removeChild(x)}},[]);const v=d.useCallback(()=>e.rows&&e.rows.length>999?10+10*String(e.rows.length).length:30,[e.rows]);return T.jsx(hm,{getCellContent:p,columns:l,rows:e.rows.length,gridSelection:h,onGridSelectionChange:g,smoothScrollX:!0,smoothScrollY:!0,overscrollX:50,className:o,rowMarkers:"clickable-number",height:t,width:n,rowMarkerTheme:{bgCell:c.getPropertyValue("--main-surface-secondary").trim(),textLight:c.getPropertyValue("--text-primary").trim()},theme:{textDark:c.getPropertyValue("--text-primary").trim(),textMedium:c.getPropertyValue("--text-primary").trim(),textLight:c.getPropertyValue("--text-primary").trim(),textHeader:c.getPropertyValue("--text-primary").trim(),bgHeader:c.getPropertyValue("--main-surface-secondary").trim(),bgCell:c.getPropertyValue("--main-surface-primary").trim(),bgBubbleSelected:c.getPropertyValue("--main-surface-tertiary").trim(),bgHeaderHovered:c.getPropertyValue("--main-surface-tertiary").trim(),bgHeaderHasFocus:c.getPropertyValue("--main-surface-tertiary").trim(),accentColor:c.getPropertyValue("--selection").trim(),drilldownBorder:c.getPropertyValue("--selection").trim(),editorFontSize:"400 14px",baseFontStyle:"400 14px",markerFontStyle:"400 14px",headerFontStyle:"500 14px",cellHorizontalPadding:12,cellVerticalPadding:10},rowMarkerWidth:v(),rowHeight:w,verticalBorder:!0,minColumnWidth:Cl,maxColumnWidth:Sl,onColumnResize:(x,y,E)=>{y>=Cl&&y<=Sl&&a(M=>{const b=[...M];return b[E]={...x,width:y},b})}})}function Ui(e,t,n){const r=Ed(t);return{...e,messageMetadata:{...e.messageMetadata,targeted_reply:t,targeted_reply_label:n},appendMessages:e.appendMessages==null?[r]:[...e.appendMessages,r]}}const tr=["#FFAF00","#F46920","#F53255","#F857C1","#29BDFD","#00CBBF","#01C159","#9DCA1C"];function Na({colorList:e,label:t,color:n,onColorUpdate:r}){return T.jsxs(_n.Root,{children:[T.jsx(_n.Trigger,{asChild:!0,children:T.jsxs("div",{className:"flex w-full items-center justify-between py-2 pl-4 pr-3.5 hover:bg-token-main-surface-secondary",children:[T.jsx("span",{className:"max-w-28 truncate text-sm",children:t||T.jsx(Rt,{id:"UnyV2o",defaultMessage:"Dataset"})}),T.jsxs("div",{className:"flex gap-1",children:[T.jsx("div",{className:"h-4 w-4 rounded-sm",style:{backgroundColor:n}}),T.jsx(Tc,{className:"icon-sm"})]})]})}),T.jsx(_n.Portal,{children:T.jsx(_n.Content,{className:"flex min-w-36 flex-col gap-4 p-4 align-middle",sideOffset:5,side:"right",children:T.jsx(pm,{currentColor:n,colorList:e,onUpdate:r})})})]})}function pm({colorList:e,currentColor:t,onUpdate:n}){const[r,o]=d.useState(t??""),i=os(),s=l=>/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/.test(l);return T.jsxs(T.Fragment,{children:[T.jsx("div",{className:"grid grid-cols-4 flex-wrap gap-2",children:e.map((l,a)=>T.jsx("button",{onClick:()=>{o(l),n(l)},className:Lt("flex h-6 w-6 items-center justify-center rounded-md"),style:{backgroundColor:l},children:t===l&&T.jsx(Ic,{className:"text-white"})},a))}),T.jsxs("div",{className:"flex h-6 rounded-md border border-token-border-light",children:[T.jsx("div",{className:"flex w-6 items-center justify-center bg-gray-200 px-2 py-1 text-sm text-gray-500",children:"#"}),T.jsx("input",{className:Lt("w-16 flex-1 rounded-r-md border-0 p-2 text-xs uppercase leading-6 outline-none"),placeholder:i.formatMessage({id:"3xKVHs",defaultMessage:"F1B023"}),value:r.slice(1),onChange:l=>{const a=`#${l.target.value}`;o(a),s(a)&&n(a)}})]})]})}function wm({chartData:e,setChartData:t}){let n=e.datasets[0].colors?[...e.datasets[0].colors]:[...tr];return T.jsx(T.Fragment,{children:e.labels.map((r,o)=>T.jsx(Na,{label:r,colorList:tr,color:n[o],onColorUpdate:i=>{Array.isArray(n)?n[o]=i:n=[i],e.datasets[0].colors=n,t?.({...e})}},o))})}function ym({chartData:e,setChartData:t}){return T.jsx(T.Fragment,{children:e.datasets.map((n,r)=>T.jsx(Na,{label:n.label,colorList:tr,color:n.colors?Array.isArray(n.colors)?n.colors[0]:n.colors:"",onColorUpdate:o=>{n.colors=[o],t?.({...e})}},r))})}function bm({chartData:e,setChartData:t}){return T.jsxs(_n.Root,{children:[T.jsx(_n.Trigger,{className:"h-5 px-0 hover:bg-transparent",asChild:!0,children:T.jsx("button",{children:T.jsx(Dc,{className:Lt("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),T.jsx(_n.Portal,{children:T.jsx(_n.Content,{className:"flex min-w-48 max-w-xs flex-col px-0 py-1",sideOffset:7,children:e&&e.datasets.length<ql&&T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"py-2 pl-4 pr-3.5 text-xs font-semibold text-token-text-quaternary",children:T.jsx(Rt,{id:"yYiKvS",defaultMessage:"Colors"})}),T.jsx("div",{className:"flex max-h-36 flex-col overflow-auto",children:e.chart_type==="pie"?T.jsx(wm,{chartData:e,setChartData:t}):T.jsx(ym,{chartData:e,setChartData:t})})]})})})]})}const vm=(e,t,n)=>{const{colors:r}=t;let o;return r&&r.length>0?o=r:e==="pie"?o=t.data.map((i,s)=>tr[s%tr.length]):o=tr[n%tr.length],Array.isArray(o)?o:[o]},xm=e=>{const{file_name:t="",context_connector_info:n}=e,{source_url:r=null,context_connector:o,synthetic_extension:i}=n??{};let s=null;if(n&&o){const l=i??Td(t)??null;s=Id(o,l)}return{sourceUrl:r,contextConnectorName:s}},Oa=async e=>{if(e.image_url==null){ro.addError("No image url provided for download");return}const t=Dd(e.image_url),n=await yc.getFileDownloadLink(t);if(n.status===bc.Success){const o=await(await fetch(n.download_url)).blob();ks(URL.createObjectURL(o),"output.png")}},ks=(e,t="")=>{const n=document.createElement("a");n.href=e,t&&(n.download=t),n.click()},Ba=300,km=350;function Cm({visualization:e,clientThreadId:t,expanded:n=!1}){return e.type==="chart"?e.fallback_image==null?(ro.addError("Chart visualizations require a fallback image message"),null):e.fallback_to_image?e.fallback_image==null?(ro.addError("No fallback image message provided for fallback chart"),null):T.jsx(Im,{visualization:e,expanded:n,clientThreadId:t}):T.jsx(Tm,{visualization:e,clientThreadId:t,expanded:n}):e.type==="table"?T.jsx(Sm,{visualization:e,expanded:n,clientThreadId:t}):(ro.addError("Unsupported visualization type",e.type),null)}function Sm({visualization:e,expanded:t,clientThreadId:n}){const r=Fl(),o=r&&!t,{isLoading:i,data:s,isError:l}=eu(e),[a,c]=d.useState(),u=d.useCallback(()=>{s&&ks(s.download_url)},[s]),[h,m]=d.useState(0),[p,g]=d.useState(0),w=d.useRef(null);let v;s&&(Array.isArray(s.content)?v=s.content.find(y=>y.name===a)??s.content[0]:v=s.content);const x=()=>{w.current&&g(w.current.offsetWidth)};return d.useEffect(()=>(x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)),[]),d.useEffect(()=>{const y=()=>{const M=window.innerHeight-48;m(M)};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]),l?T.jsx(Wa,{fileName:e.title}):T.jsx(hi,{ref:w,focusObject:{type:si.ADAVisualization,visualization:e},title:T.jsxs(T.Fragment,{children:[e.title,!o&&Array.isArray(s?.content)&&T.jsxs(Mr.Root,{defaultValue:a,onValueChange:y=>{c(y)},children:[T.jsxs(Mr.Trigger,{className:"m-0 h-4 bg-transparent p-1 text-xs font-semibold",children:[a??s.content[0].name,T.jsx(Mr.Icon,{})]}),T.jsx(Mr.Portal,{children:T.jsx(Mr.Content,{children:s.content.map(y=>T.jsx(Mr.Item,{className:"text-xs font-semibold",value:y.name??"",children:y.name},y.name))})})]})]}),onDownload:u,expanded:t,clientThreadId:n,children:i||v==null?T.jsx("div",{className:"flex w-full items-center justify-center",children:T.jsx(Rl,{})}):T.jsx("div",{className:"border-t border-token-border-light",children:T.jsx(mm,{table:{...v,name:e.title,sheetName:a},height:t?h:Ba,width:p,isInFocusedView:r})})})}function Mm({showStatic:e,setShowStatic:t}){return T.jsx(oo,{side:"top",sideOffset:4,label:e?T.jsx(Rt,{id:"o0thnT",defaultMessage:"Switch to interactive chart"}):T.jsx(Rt,{id:"cigiQO",defaultMessage:"Switch to static chart"}),children:T.jsx("button",{className:"flex",onClick:()=>{t(!e)},children:e?T.jsx(Ac,{className:"icon-md text-token-text-tertiary hover:text-token-text-primary"}):T.jsx(is,{className:"icon-md text-token-text-tertiary hover:text-token-text-primary"})})})}function Rm({type:e}){return T.jsx(Em,{children:e==="chart"?T.jsxs(T.Fragment,{children:[T.jsx(Rt,{id:"XBhWwK",defaultMessage:"Now interactive! (Beta)"})," ",T.jsx(is,{className:"icon-md"})]}):T.jsx(Rt,{id:"N0TMRs",defaultMessage:"Now interactive!"})})}const Em=vc.div`flex flex-shrink-0 cursor-pointer flex-nowrap items-center gap-1 rounded-lg bg-blue-selection/[0.1] py-1 pl-2 pr-1.5 text-xs font-semibold text-blue-selection`;function Tm({visualization:e,clientThreadId:t,expanded:n}){const{isLoading:r,data:o,isError:i}=tu(e),s=d.useRef(null),l=nu(),[a,c]=d.useState(!l),u=d.useCallback(async()=>{if(a&&e.fallback_image)Pn.logEvent($n.adaDownloadedStaticChart),await Oa(e.fallback_image);else if(s.current){const v=s.current.getBase64Image();v&&(Pn.logEvent($n.adaDownloadedInteractiveChart),ks(v,`${e.title}.png`))}},[e.fallback_image,a,s,e.title]),[h,m]=d.useState(void 0),p=Hd(t),g=su(()=>{Pn.logEvent($n.adaToggledInteractiveChart,{conversationId:p})}),w=v=>{g(),c(v)};return d.useEffect(()=>{Pn.logEvent($n.adaInteractiveChartShown)},[]),d.useEffect(()=>{if(o&&o.content!==h){const{chart_type:v,datasets:x,labels:y}=o.content,E=o.content;E.datasets=x.map((M,b)=>{const P=vm(v,M,b);return{...M,colors:P}}),E.labels=Array.isArray(y)?y:[y],m(E)}},[h,o]),i?T.jsx(Wa,{fileName:e.title}):T.jsx(hi,{focusObject:{type:si.ADAVisualization,visualization:e},title:e.title,onDownload:u,additionalActions:[T.jsx(Mm,{showStatic:a,setShowStatic:w},0),T.jsx(bm,{chartData:h,setChartData:m},1)],expanded:n,clientThreadId:t,children:r||h==null?T.jsx("div",{className:"flex w-full items-center justify-center",children:T.jsx(Rl,{})}):a&&e.fallback_image?T.jsx(Al,{jupyterMessage:e.fallback_image}):T.jsx(Zl,{ref:s,chart:h})})}function Im({visualization:e,expanded:t,clientThreadId:n}){const[r,o]=d.useState(!1),i=ru(),s=d.useCallback(async()=>{e.fallback_image&&await Oa(e.fallback_image)},[e.fallback_image]);return e.fallback_image==null?null:T.jsx(hi,{focusObject:{type:si.ADAVisualization,visualization:e},title:e.title,onDownload:s,expanded:t,clientThreadId:n,children:T.jsx("div",{className:Lt("h-full w-full",t&&"cursor-pointer items-center justify-center"),onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:T.jsxs("div",{className:Lt("relative flex h-full cursor-pointer items-center justify-center",!t&&"w-full"),children:[T.jsx(Al,{jupyterMessage:e.fallback_image}),i&&T.jsx(iu,{isHovered:r})]})})})}const hi=yt.forwardRef(({focusObject:e,title:t="",onDownload:n=()=>{},additionalActions:r=[],expanded:o=!1,clientThreadId:i,children:s},l)=>{const a=Fl(),c=Fd(),u=c&&c.type===si.ADAVisualization&&c.type===e.type&&c.visualization.file_id===e.visualization.file_id&&e.visualization.title===c.visualization.title,h=xc(),m=e.visualization.type,[p,g]=ou(m,h?.id??""),w=kc(),v=Cc(),x=Sc(),y=e.visualization.type,{sourceUrl:E,contextConnectorName:M}=xm(e.visualization);if(a&&!o||w)return T.jsx(Dm,{focusObject:e,title:t,type:y,isFocused:u??!1,disabled:w});const b=T.jsxs(T.Fragment,{children:[r.map((P,F)=>T.jsx("div",{className:"flex p-0",children:P},F)),E&&M&&T.jsx(oo,{side:"top",sideOffset:4,label:T.jsx(Rt,{id:"KG958Q",defaultMessage:"Open in {contextConnectorName}",values:{contextConnectorName:M}}),children:T.jsx("a",{className:"flex items-center text-xs",href:E,target:"_blank",rel:"noreferrer",children:T.jsx(Fc,{className:Lt("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),n&&T.jsx(oo,{side:"top",sideOffset:4,label:T.jsx(Rt,{id:"X0SJIT",defaultMessage:"Download {type}",values:{type:y}}),children:T.jsx("button",{onClick:n,className:"flex items-center text-xs",children:T.jsx(Hc,{className:Lt("icon-md text-token-text-tertiary hover:text-token-text-primary")})})}),T.jsx(oo,{side:"top",sideOffset:4,label:u?T.jsx(Rt,{id:"vilGuu",defaultMessage:"Collapse {type}",values:{type:y}}):T.jsx(Rt,{id:"7kLyF5",defaultMessage:"Expand {type}",values:{type:y}}),children:T.jsx("button",{onClick:()=>{v?(x(`/c/${i}`,{state:{focusObject:e}}),Mc.focusMainWindow()):ja(u??!1,e)},className:"flex items-center text-xs",children:u?T.jsx(El,{className:Lt("icon-md text-token-text-tertiary hover:text-token-text-primary")}):T.jsx(Tl,{className:Lt("icon-md text-token-text-tertiary hover:text-token-text-primary")})})})]});return T.jsxs(Go.div,{className:Lt("relative overflow-hidden border-token-border-light text-token-text-primary",!o&&"rounded-2xl border"),ref:l,onMouseEnter:()=>{g(!0)},...Hl,children:[T.jsxs("div",{className:Lt("flex items-center justify-between gap-2 bg-token-main-surface-primary px-4 py-3"),children:[T.jsx("span",{className:"flex-grow items-center truncate font-semibold capitalize",children:t}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(Il,{children:!p&&T.jsx(Go.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{type:"tween",ease:"easeInOut",duration:.2},className:"absolute right-3 top-3",children:T.jsx(Rm,{type:y})})}),p&&b]})]}),T.jsx("div",{className:"flex items-center justify-center bg-token-main-surface-primary",style:{height:o?"calc(100vh - 48px)":`${y==="table"?Ba:km}px`},children:s})]})});hi.displayName="ADAVisualizationWrapper";function Dm({focusObject:e,title:t="",type:n,isFocused:r,disabled:o=!1}){const[i,s]=d.useState(!1),l=n==="chart"?zc:Lc,a=r||i||o;return T.jsx(Go.div,{className:Lt("relative w-52 overflow-hidden rounded-2xl border",r&&"border-blue-selection/[.3]",a?"text-token-text-primary":"text-token-text-secondary",!o&&"cursor-pointer"),onMouseEnter:()=>{o||s(!0)},onMouseLeave:()=>{o||s(!1)},onClick:()=>{o||ja(r,e)},...Hl,children:T.jsxs("div",{className:"flex justify-between bg-token-main-surface-primary px-3 py-2",children:[T.jsxs("div",{className:"my-0 flex w-full items-center gap-2 overflow-hidden text-sm font-semibold capitalize",children:[T.jsx(l,{className:Lt("icon-lg flex-shrink-0",a?"text-brand-green-800":"text-token-text-quaternary")}),T.jsx("span",{className:"flex-grow truncate",children:t})]}),i&&T.jsx("div",{className:"flex items-center gap-2",children:T.jsx(oo,{side:"top",sideOffset:4,label:r?T.jsx(Rt,{id:"vilGuu",defaultMessage:"Collapse {type}",values:{type:n}}):T.jsx(Rt,{id:"7kLyF5",defaultMessage:"Expand {type}",values:{type:n}}),children:r?T.jsx(El,{className:"icon-md icon-md text-token-text-secondary"}):T.jsx(Tl,{className:Lt("icon-md text-token-text-secondary")})})})]})})}function Wa({fileName:e=""}){return T.jsx("div",{className:"w-full rounded-2xl border border-red-600 p-3",children:T.jsxs("div",{className:"my-0 flex items-center justify-between",children:[T.jsx("div",{className:"flex items-center gap-2",children:T.jsx("p",{className:"m-0 p-0 text-lg font-semibold capitalize",children:e})}),T.jsx("span",{className:"text-sm text-red-600",children:T.jsx(Rt,{id:"ADAVisualzationComponent.unableToLoadOutput",defaultMessage:"Unable to display visualization"})})]})})}const ja=(e,t)=>{Pn.logEvent($n.adaFocusModeToggled),e?Ns.close():Ns.setFocusedObject(t)},jm=Object.freeze(Object.defineProperty({__proto__:null,default:Cm},Symbol.toStringTag,{value:"Module"}));export{jm as A,e0 as C,yh as T,Dr as a,Vu as b,Tr as i,wh as m,Ut as s};
//# sourceMappingURL=m9lo7c6ltjg34ey8.js.map
