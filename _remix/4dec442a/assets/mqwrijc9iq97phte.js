import{K as u,L as d,r as g,ei as h,ao as l,bA as y,a8 as T,cm as f,aJ as p,h as v,j as R,D as A,ej as C}from"./ce20vh2pwl1h2mrx.js";import{cB as r,cC as H,cD as P}from"./izfif69im9lzk9q2.js";import{P as S,r as E}from"./e1cnpm5dmj2ijz1x.js";import{s as b}from"./n076a76oyaedfeaj.js";import{e as L,i as M,T as I}from"./ivcjr0x9hy2blveg.js";const D="prompt-textarea";function G(){document.getElementById(D)?.focus()}const K={getAndReset:(e,s)=>{const t=u.getItem(d.RestoreMessageAfterOauthRedirect);return u.removeItem(d.RestoreMessageAfterOauthRedirect),!t||t.userId!==e||s!==t.serverThreadId||Date.now()>t.expiresAt?null:t},set:(e,s,t)=>{const a={userId:e,serverThreadId:s,inputText:t,expiresAt:Date.now()+6e4};u.setItem(d.RestoreMessageAfterOauthRedirect,a)}},q=()=>S.useState(S.getPersistedSystemHints).has(r.Search),z=()=>{const e=S.useStore(),s=g.useCallback(()=>e.getPersistedSystemHintTrigger(r.Search),[e]),t=g.useCallback(()=>e.clearPersistedSystemHintTrigger(r.Search),[e]),a=g.useCallback((o,n,i)=>{(o?e.addPersistedSystemHint:e.removePersistedSystemHint)(r.Search,n,i)},[e]);return{getSearchModeTrigger:s,clearSearchModeTrigger:t,setThreadSearchMode:a}},x=1e3;function j(e){return e&&e.length>x&&!h().shift&&l.checkGate("1508312659")}async function O(e,s){const t=P(e),a=t??await R.getConversation(e);return s==null&&t&&(s=!0),t||A.addTiming("chatgpt.web.chatPage.loadExistingConversation"),I.initThreadFromServerData(e,a,s,void 0,s),b(a.conversation_id,a.async_status?{source:C.SERVER,value:a.async_status}:null),a}const N=e=>{const s=y(),{pathname:t}=T(),a=f(),o=L(),n=p();v({queryKey:["conversation",e],queryFn:()=>O(e).catch(i=>{const c=H(t),m=c!=null?E(c):"/";throw s(m),n.danger(`Unable to load conversation ${e}`,{testId:"conversation-fetch-error-toaster"}),i}),enabled:!M(e)&&!a&&!o,refetchOnMount:!0})};export{K as P,D as T,N as a,q as b,O as f,j as i,G as t,z as u};
//# sourceMappingURL=mqwrijc9iq97phte.js.map
