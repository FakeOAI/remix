import{r as u,bu as f,l as c,eu as h,c_ as x,aG as y,cg as w,ev as g,e2 as C}from"./ce20vh2pwl1h2mrx.js";import{T as W}from"./gye8zmhcxzn16c06.js";import{cm as P,d9 as S,da as L}from"./izfif69im9lzk9q2.js";import{c as j}from"./n60pzhz119lcsyep.js";import{u as N}from"./kyrlol8yqnckq752.js";import{a as A}from"./e3znbdl56zpegr6d.js";function m(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function p(e,t){e.head.querySelectorAll("link, style").forEach(o=>{m(o)&&t.head.appendChild(o.cloneNode(!0))});const r=new WeakMap,s=new MutationObserver(o=>{o.forEach(n=>{n.type==="childList"&&(n.addedNodes.forEach(i=>{if(m(i)){const a=t.head.appendChild(i.cloneNode(!0));if(r.set(i,a),i instanceof HTMLStyleElement&&i.dataset.emotion){const{sheet:d}=i,{sheet:l}=a;if(d&&l)for(const E of d.cssRules)l.insertRule(E.cssText)}}}),n.removedNodes.forEach(i=>{const a=r.get(i);a&&t.head.removeChild(a)}))})});return s.observe(e.head,{childList:!0}),()=>{s.disconnect()}}function b(e,t){for(const s of e.attributes)t.setAttribute(s.name,s.value);const r=new MutationObserver(s=>{s.forEach(o=>{if(o.type==="attributes"&&o.attributeName!=null){const n=e.getAttribute(o.attributeName);n==null?t.removeAttribute(o.attributeName):t.setAttribute(o.attributeName,n)}})});return r.observe(e,{attributes:!0}),()=>{r.disconnect()}}const v=e=>{const t=u.useRef(!1);u.useEffect(()=>{t.current||(e(),t.current=!0)},[e])};function D({children:e,target:t="_blank",features:r}){const[s,o]=u.useState(null);return v(()=>{const n=window.open("about:blank",t,r);if(!n){x.error("Unable to create child window");return}p(document,n.document),b(document.documentElement,n.document.documentElement),o(n);function i(){n?.close()}return window.addEventListener("unload",i),()=>{window.removeEventListener("unload",i),n.close()}}),s&&f.createPortal(c.jsx(h,{window:s,children:e}),s.document.body)}function F({children:e}){const[t,r]=u.useState(null);return v(()=>{let s=!1,o=null;return async function(){const n=await window.documentPictureInPicture?.requestWindow({width:400,height:600});if(n){if(s){n.close();return}o=()=>n.close(),p(document,n.document),b(document.documentElement,n.document.documentElement),r(n)}}(),()=>{s=!0,o?.()}}),t&&f.createPortal(c.jsx(h,{window:t,children:e}),t.document.body)}function M({clientThreadId:e}){const t=C.useStore(),r=w();return A({resetThreadAction:()=>t.newThread(),clientThreadId:e,focusPromptTextareaAction:()=>r.document.getElementById("prompt-textarea")?.focus()}),c.jsxs(c.Fragment,{children:[c.jsx(j,{clientThreadId:e,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},e),c.jsx(L,{clientThreadId:e})]})}function q({clientThreadId:e}){N(e,{kind:y.PrimaryAssistant});const t=w();return u.useEffect(()=>{const r=()=>{t.document.getElementById("prompt-textarea")?.focus()};return t.addEventListener("focus",r),()=>{t.removeEventListener("focus",r)}},[t]),c.jsx(g,{children:c.jsx(P,{children:c.jsx(S,{clientThreadId:e,children:c.jsx(W,{clientThreadId:e,children:c.jsx(M,{clientThreadId:e})})})})})}export{q as C,F as D,D as a};
//# sourceMappingURL=c1mqr94jlhbbz2pe.js.map
