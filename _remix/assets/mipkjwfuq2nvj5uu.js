import{bH as P,j as e,P as f,ba as E,G as c,bX as ge,S as pe,r as h,aW as he,aX as xe,aY as be,a_ as ve,H as _,c as C,D as F,E as je,F as Se,I as V,ak as X,C as W,bb as T,x as M,ck as Me,av as Y,an as B,dD as ye,ac as Q,bi as Z,eO as J,aH as Ce,a2 as ke,co as we,eP as Ne,b5 as Ie,b6 as Te,ef as Pe,az as _e,bd as Ue,u as z,aB as G}from"./bi9nzlakut336dzw.js";import{fn as ee,bb as D,bc as se,k as L,U as x,fo as Ee,b5 as Fe,aW as I,c3 as Be,c2 as Le,fp as U,fq as Oe,fr as Re,fs as q,ft as Ae,fu as H,s as We,aX as te,fv as De,fw as He,fx as $e,fy as K,fl as ze}from"./nbtnwh422004o6rf.js";import{am as Ge,B as qe,bq as Ke,br as ae,A as Ve,bs as Xe,aO as Ye,$ as Qe}from"./o3o45rugqi7ysa5o.js";import{N as ne,c as Ze,E as Je}from"./fjbnx45512mj7nhj.js";import{m as ie}from"./ggx03yp89y9443op.js";import{B as es,D as R}from"./lp7c78wpenuxxb63.js";import{A as ss}from"./n2ouojicq6zztbgb.js";function Ns({onClick:t,className:a,...s}){return e.jsx(Ee,{onClick:t,className:C(a,"flex-grow overflow-hidden"),...s})}function Is({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=P();return s||!a?null:e.jsx(ne,{className:"mr-3",onClick:()=>{f.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function Ts({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=P(),o=ee();return s?null:a?o?e.jsx(as,{}):e.jsx(ts,{}):e.jsx(ne,{onClick:()=>{f.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function ts(){const t=D(),a=se(re.signUpButtonText);return e.jsx(E,{as:"button",size:"small",color:"primary",onClick:()=>{t({authType:"signup",callback:s=>{f.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:s})}})},children:e.jsx(c,{...a})})}function as(){const t=D();return e.jsx(E,{as:"button",size:"small",color:"primary",onClick:()=>{t({authType:"login",callback:a=>{f.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:a})}})},"data-testid":"login-button",children:e.jsx(c,{...ge.logInButtonText})})}function ns({onClick:t}){return e.jsxs("button",{type:"button",className:"inline-flex rounded-md hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:t,children:[e.jsx("span",{className:"sr-only",children:e.jsx(c,{...re.openSidebar})}),e.jsx(Ge,{className:"icon-lg mx-2 text-token-text-secondary"})]})}const is=({onClickOpenSidebar:t,children:a,showNavSidebar:s,leftContent:o,rightContent:i,bottomContent:n})=>{const r=L(m=>m.activeSidebar),d=pe().asPath;return h.useEffect(()=>{r==="popover-nav"&&x.setActiveSidebar(!1)},[d]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"draggable sticky top-0 z-10 flex min-h-[60px] items-center justify-center border-transparent bg-token-main-surface-primary pl-0 md:hidden",children:[(s||o)&&e.jsxs("div",{className:"no-draggable absolute bottom-0 left-0 top-0 ml-3 inline-flex items-center justify-center",children:[s&&e.jsx(ns,{onClick:t}),o]}),e.jsx("div",{className:"no-draggable",children:a}),i&&e.jsx("div",{className:"no-draggable absolute bottom-0 right-0 top-0 mr-3 inline-flex items-center justify-center",children:i})]}),n&&e.jsx("div",{className:"no-draggable flex w-full items-center justify-center bg-token-main-surface-primary",children:n})]})};function rs({isPopover:t=!1,isExpanded:a=!1,children:s}){return e.jsxs(e.Fragment,{children:[t&&e.jsx(ls,{children:s}),e.jsx(os,{isExpanded:!t&&a,children:s})]})}function os({isExpanded:t,children:a}){const s=h.useRef(null);return e.jsx(ie.div,{className:"flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary",ref:s,initial:!1,animate:{width:t?"260px":0,transition:{duration:.165,ease:"easeOut"}},onAnimationStart:()=>{s.current&&(s.current.style.visibility="visible")},onAnimationComplete:()=>{s.current&&(t||(s.current.style.visibility="hidden"))},children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col",children:a})})})}function ls({children:t}){const a=L(s=>s.activeSidebar);return e.jsx(he,{open:a==="popover-nav",onOpenChange:s=>{s||x.setActiveSidebar(!1)},children:e.jsxs(xe,{children:[e.jsx(be,{className:"fixed inset-0 z-10 bg-white/50 radix-state-open:animate-show dark:bg-black/50"}),e.jsx(ve,{className:"fixed left-0 top-0 z-50 h-full max-w-xs border-r border-gray-200 bg-token-sidebar-surface-primary shadow-[0_0_64px_0_rgba(0,0,0,0.07)] focus:outline-none radix-state-closed:animate-sidebarHide radix-state-open:animate-sidebarShow dark:border-gray-800",children:t})]})})}const re=_({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}});function cs({workspace:t}){var n;const a=F(),s=Fe(I.InviteUsersToWorkspace),o=Be()??!0,i=(n=Le())==null?void 0:n.map(r=>r.hostname);return e.jsx(je,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Se,type:"success",title:t.data.name!=null?a.formatMessage(N.inviteMemberModalTitle,{workspaceName:t.data.name}):a.formatMessage(N.inviteMemberModalTitleUntitledWorkspace),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(c,{...N.inviteMemberModalDescription})}),!!(i!=null&&i.length)&&!o&&e.jsxs("p",{className:"mt-2",children:[e.jsx(c,{...N.prohibitExternalDomainsDescription})," ",e.jsx("b",{children:i.join(", ")})]})]}),children:e.jsx(ss,{workspace:t,canResendInviteEmails:!0,onCancel:()=>x.closeModal(I.InviteUsersToWorkspace),onSuccess:()=>x.closeModal(I.InviteUsersToWorkspace),cancelButtonText:a.formatMessage(N.inviteMemberInviteCancelButton)})})}const N=_({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},prohibitExternalDomainsDescription:{id:"ky8nVd",defaultMessage:"Only users from the following emails can be added to this workspace:"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}});function ds({showFreeTrialLoadingPayment:t,handleGetPaymentLink:a}){const s=F(),o=()=>{t||(U(!0),a())},i=b=>{b.stopPropagation(),Oe(!0),Re(!0)},{data:n,isLoading:r,isSuccess:l}=X({queryKey:["claimedReferralInvite"],queryFn:()=>W.getClaimedReferralInvite(),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),d=n==null?void 0:n.invite_code,[m,g]=h.useState(!1);if(h.useEffect(()=>{d&&!m&&l&&(g(!0),T.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),f.logEvent(M.chatgptReferralShowClaimedSidebartMenuPromo))},[d,g,m,l]),!d||r||!l)return null;const u=d.invite_metadata.invite_data,k=u!=null&&u.referral_trial_duration_months?(u==null?void 0:u.referral_trial_duration_months)>1?s.formatMessage(A.monthsOfBenefit,{referralTrialDurationMonths:u==null?void 0:u.referral_trial_duration_months}):s.formatMessage(A.daysOfBenefit,{referralTrialDurationDays:u==null?void 0:u.referral_trial_duration_days}):null;return e.jsx(ie.div,{className:C("relative",{"cursor-progress opacity-50":t}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:e.jsxs(us,{className:C(t&&"opacity-75"),onClick:o,children:[e.jsxs("div",{className:"flex w-full flex-row items-center justify-start gap-3",children:[e.jsx(Me,{className:"icon-sm shrink-0"}),e.jsx(c,{...A.freeTrialCta,values:{duration:k}})]}),!t&&e.jsx(qe,{onClick:i,className:"icon-md shrink-0 rounded-full p-0.5 text-token-text-tertiary opacity-50 transition-colors duration-200 hover:bg-[#0077FF] hover:text-red-500 group-hover:opacity-100"}),e.jsx("span",{className:"absolute top-11 h-0 w-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}const us=V.a`group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm`,A=_({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}"}});function ms(){const t=F(),a=Y(),s=B(),o=!s,i=(s==null?void 0:s.hasPaidSubscription())??!1,n=(s==null?void 0:s.hasClaimedFreeTrial())??!1,r=h.useMemo(()=>s==null?void 0:s.subscriptionAnalyticsParams,[s]),l=async()=>{U(!0),f.logEvent(M.clickAccountPaymentCheckout,r);try{const v=await W.getCheckoutLink(a);window.location.href=v.url}catch{ke.warning(t.formatMessage(j.paymentErrorWarning),{hasCloseButton:!0}),U(!1)}finally{}},d=()=>{g||(U(!0),l())},m=q(v=>v.didCloseFreeTrial),g=q(v=>v.showFreeTrialLoadingPayment),u=!m&&n,k=(s==null?void 0:s.wasPaidCustomer())??!1;let b=(s==null?void 0:s.isWorkspaceAccount())??!1;const w=(s==null?void 0:s.isPlus())??!1,{doesUserHaveAnyAccountsWithPlusFeatures:S}=ye(),{layer:O}=Q("2670443078");let p=w;!b&&!w&&S&&O.get("is_gating_fix_enabled",!1)&&(p=S,b=!0);const ce=!o&&!b,de=Z(),ue=()=>{f.logEvent(M.clickSidebarAccountPaymentMenuItem,r),We(de,"Sidebar account payment menu item")},{setShowReferralInviteModal:$}=Ae(v=>({setShowReferralInviteModal:v.setShowReferralInviteModal})),me=h.useCallback(()=>{T.logEvent("chatgpt_referral_invite_sidebar_clicked"),f.logEvent(M.chatgptReferralInviteSidebarClicked,r),$(!0,()=>{f.logEvent(M.clickSidebarAccountPaymentMenuItem,r)})},[r,$]),fe=(s==null?void 0:s.isTeam())??!1;return e.jsxs(e.Fragment,{children:[((a==null?void 0:a.includes(J))||i)&&e.jsx(ps,{analyticsParams:r,handleReferralInvite:me}),!i&&u&&e.jsx(ds,{showFreeTrialLoadingPayment:g,handleGetPaymentLink:l}),fe&&e.jsx(gs,{}),ce&&e.jsx(H,{onClick:u?d:ue,className:"m-0 rounded-lg px-2",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(fs,{wasPaidCustomer:k,showFreeTrialLoadingPayment:g,hasPlusSubscription:p})})})})]})}const fs=({wasPaidCustomer:t,showFreeTrialLoadingPayment:a,hasPlusSubscription:s})=>a?e.jsx(Ce,{className:"icon-sm shrink-0"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(Ke,{className:"icon-sm shrink-0"})}),e.jsx("div",{className:"flex flex-col",children:t?e.jsx(c,{...j.renewPlus}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s?e.jsx(c,{...j.createATeamWorkspace}):e.jsx(c,{...j.upgradePlan})}),e.jsx("span",{className:"line-clamp-1 text-xs text-token-text-tertiary",children:s?e.jsx(c,{...j.upgradeToTeamUpsell}):e.jsx(c,{...j.upgradeToPlusUpsell})})]})})]}),gs=()=>{const t=B();return e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:()=>{x.openModal(I.InviteUsersToWorkspace)},className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(ae,{className:"icon-sm shrink-0"})}),e.jsx(c,{...j.inviteMembers})]})})}),t!=null?e.jsx(cs,{workspace:t}):null]})},ps=({analyticsParams:t,handleReferralInvite:a})=>{const s=Y(),o=(s==null?void 0:s.includes(J))??!1,i=B(),{data:n}=X({queryKey:["referralInvites"],queryFn:()=>W.getEligibleReferralInvites(),enabled:o}),r=i&&!i.isOrWasPaidCustomer()&&!i.hasPlusFeatures(),l=(n==null?void 0:n.invites_remaining)&&(n==null?void 0:n.invites_remaining)>0,d=r&&l,[m,g]=h.useState(!1);return h.useEffect(()=>{d&&!m&&(g(!0),T.logEvent("chatgpt_referral_show_sidebar_menu_item"),f.logEvent(M.chatgptReferralShowSidebarMenuItem,t))},[d,g,m,t]),d?e.jsx(H,{onClick:a,className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(ae,{className:"icon-sm shrink-0"})}),e.jsx(c,{...j.inviteReferral})]})})}):null},j=_({upgradePlan:{id:"PaymentMenuItems.upgradePlan",defaultMessage:"Upgrade plan"},createATeamWorkspace:{id:"PaymentMenuItems.createATeamWorkspace",defaultMessage:"Add Team workspace"},upgradeToTeamUpsell:{id:"PaymentMenuItems.upgradeToTeamUpsell",defaultMessage:"Collaborate on a Team plan"},upgradeToPlusUpsell:{id:"PaymentMenuItems.upgradeToPlusUpsell.0",defaultMessage:"Get GPT-4, DALL·E, and more"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend"},inviteMembers:{id:"PaymentMenuItems.inviteMembers.0",defaultMessage:"Invite members"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}});function Ps({navHeader:t,children:a,className:s}){const o=F(),i=h.useRef(null),n=we(),{isUnauthenticated:r}=P(),{layer:l}=Q("1578749296"),d=l.get("is_sticky_toggle_off",!1);return h.useEffect(()=>{d&&x.openSidebar()},[d]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"draggable relative h-full w-full flex-1 items-start border-white/20",children:[e.jsx(Ne,{asChild:!0,children:e.jsx("h2",{children:e.jsx(c,{...y.chatHistoryLabel})})}),e.jsxs("nav",{className:C("flex h-full w-full flex-col px-3",s),"aria-label":o.formatMessage(y.chatHistoryLabel),children:[t,e.jsx(xs,{ref:i,$disableScroll:n&&!r,children:a}),e.jsx(hs,{})]})]})})}function hs(){const[t]=h.useState(()=>{const l=Ie.getCookie(Te.Workspace);return typeof l=="string"&&l!==Pe}),a=B(),s=(a==null?void 0:a.data)==null,{isUnauthenticated:o}=P(),{openSettings:i}=te(),{isCollapsible:n}=De(),r=L(l=>l.isHistoryCollapsed);return t&&s||!a?null:o?e.jsx(oe,{}):e.jsxs("div",{className:C("flex flex-col py-2 empty:hidden dark:border-white/20",n&&"-mx-3 border-t border-token-border-sharp px-3"),children:[n&&!r&&e.jsx(He,{type:"less",onClick:x.toggleHistoryCollapsed}),e.jsx($e,{}),e.jsx(ms,{}),e.jsx("div",{className:"flex w-full items-center md:hidden",children:e.jsx("div",{className:"max-w-[100%] grow",children:e.jsx(Ze,{onClickSettings:()=>i()})})})]})}const oe=()=>{const t=ee(),a=D(),s=se(y.unauthSignupCta),o=()=>{a({authType:"login",callback:l=>{f.logLogInButtonClicked({location:"Sidebar bottom unit",provider:l}),T.logEvent("chatgpt_sidebar_login_button_clicked")}})},i=()=>{a({authType:"signup",callback:l=>{f.logSignUpButtonClicked({location:"Sidebar bottom unit",provider:l}),T.logEvent("chatgpt_sidebar_signup_button_clicked")}})},n=e.jsx(E,{as:"button",size:"medium",color:t?"secondary":"primary","data-testid":"signup-button",onClick:i,children:e.jsx(c,{...s})}),r=e.jsx(E,{as:"button",size:"medium",color:t?"primary":"secondary","data-testid":"login-button",onClick:o,children:e.jsx(c,{...y.unauthLoginCta})});return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-4 mt-2",children:[e.jsx("p",{className:"mb-1 text-sm font-semibold text-token-text-primary",children:e.jsx(c,{...t?y.logInOrSignUp:y.signUpOrLogIn})}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(c,{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."})})]}),e.jsx("div",{className:"flex flex-row items-start gap-2",children:t?[r,n]:[n,r]})]})},xs=V.div`flex-col flex-1 transition-opacity duration-500 relative -mr-2 pr-2
  ${({$disableScroll:t})=>t?"overflow-y-hidden opacity-20 pointer-events-none":"overflow-y-auto"}`,y=_({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history"},closeSidebar:{id:"NavigationContent.closeSidebar",defaultMessage:"Close sidebar"},signInToChat:{id:"NavigationContent.signInToChat",defaultMessage:"Sign in to ChatGPT"},signUpOrLogIn:{id:"NavigationContent.signUpOrLogIn",defaultMessage:"Sign up or log in"},logInOrSignUp:{id:"NavigationContent.logInOrSignUp",defaultMessage:"Log in or sign up"},unauthSignupCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},unauthLoginCta:{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"}}),bs=()=>{var o;const{openSettings:t}=te(),a=(o=_e("3376455464"))==null?void 0:o.value,s=Z();return e.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[e.jsx(K,{icon:Ve,onClick:()=>{ze(s),x.closeActiveSidebar()},children:e.jsx(c,{id:"0FupYP",defaultMessage:"New chat"})}),e.jsx("div",{className:"flex grow items-center justify-center",children:e.jsx(oe,{})}),e.jsxs(es,{contentClassName:"w-[298px]",triggerButton:e.jsx(K,{icon:Xe,children:e.jsx(c,{id:"y4Lkp7",defaultMessage:"Settings and more"})}),children:[e.jsx(R.Item,{onClick:()=>t(),icon:Ye,children:e.jsx(c,{id:"HrRLkZ",defaultMessage:"Settings"})}),a&&e.jsx(R.Item,{icon:Qe,onClick:()=>{x.openModal(I.ReportConversation)},children:e.jsx(c,{id:"thread.report.0",defaultMessage:"Report illegal content"})}),e.jsx(R.Separator,{}),e.jsx(Je,{})]})]})};function le({children:t,hideNavigation:a=!1,mobileHeaderContent:s,mobileHeaderLeftContent:o,mobileHeaderRightContent:i,mobileHeaderBottomContent:n,sidebar:r,forceOpenDesktopSidebar:l=!1}){const d=Ue(),{isUnauthenticated:m}=P(),[g,u,k]=L(p=>[p.isDesktopNavCollapsed,p.activeStageSidebar,p.activeSidebar]),b=[];let w=null;z.Children.forEach(t,p=>{z.isValidElement(p)&&(p.type===le.Sidebars?w=p:b.push(p))});const S=!m&&!a&&r!=null,O=!a&&!d&&(S||m);return e.jsxs("div",{className:C("relative flex h-full w-full overflow-hidden transition-colors",k!=="popover-nav"&&"z-0"),children:[S&&e.jsx(G,{children:e.jsx(rs,{isExpanded:l||!g,isPopover:u||!d,children:m?e.jsx(bs,{}):r})}),e.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[O&&e.jsx(G,{children:e.jsx(is,{onClickOpenSidebar:()=>x.togglePopoverNavSidebar(),showNavSidebar:S,leftContent:o,rightContent:i,bottomContent:n,children:s})}),e.jsx("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:b})]}),w]})}function vs({children:t}){return e.jsx(e.Fragment,{children:t})}le.Sidebars=vs;export{cs as A,Ps as N,le as S,Ns as a,Is as b,Ts as c};
//# sourceMappingURL=mipkjwfuq2nvj5uu.js.map
