import{bC as T,j as e,P as f,b5 as F,G as l,bX as ge,S as pe,r as h,aR as he,aS as xe,aT as be,aV as ve,H as _,c as C,D as U,E as je,F as Se,I as X,af as Z,C as W,b6 as P,x as M,cM as Me,aq as Q,ai as L,dE as ye,a7 as Y,bd as J,eO as ee,aC as Ce,a2 as ke,cO as we,eP as Ne,b0 as Ie,b1 as Pe,eg as Te,au as z,b8 as _e,u as G,aw as q}from"./e80s9x9phit586fh.js";import{fj as se,b9 as D,k as B,U as x,fk as Ee,b3 as Fe,aU as I,b_ as Ue,bZ as Le,fl as E,fm as Be,fn as Oe,fo as V,fp as Re,fq as H,s as Ae,aV as te,fr as We,fs as De,ft as He,fu as K,fh as $e}from"./epx1rnqqdufg3tv7.js";import{am as ze,B as Ge,bo as qe,bp as ae,A as Ve,bq as Ke,aM as Xe,$ as Ze}from"./g8qf5jn9kid9awdx.js";import{N as ne,c as Qe,E as Ye}from"./b0p6qfoiy2w3wq1g.js";import{m as ie}from"./dlro9umj0c9wyaej.js";import{B as Je,D as R}from"./mskiymhqe349kbng.js";import{A as es}from"./j36wks2eekqepqds.js";function ws({onClick:t,className:a,...s}){return e.jsx(Ee,{onClick:t,className:C(a,"flex-grow overflow-hidden"),...s})}function Ns({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=T();return s||!a?null:e.jsx(ne,{className:"mr-3",onClick:()=>{f.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function Is({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=T(),o=se();return s?null:a?o?e.jsx(ts,{}):e.jsx(ss,{}):e.jsx(ne,{onClick:()=>{f.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function ss(){const t=D();return e.jsx(F,{as:"button",size:"small",color:"primary",onClick:()=>{const a=t({authType:"signup"});f.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:a})},children:e.jsx(l,{...re.signUpButtonText})})}function ts(){const t=D();return e.jsx(F,{as:"button",size:"small",color:"primary",onClick:()=>{const a=t({authType:"login"});f.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:a})},"data-testid":"login-button",children:e.jsx(l,{...ge.logInButtonText})})}function as({onClick:t}){return e.jsxs("button",{type:"button",className:"inline-flex rounded-md hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:t,children:[e.jsx("span",{className:"sr-only",children:e.jsx(l,{...re.openSidebar})}),e.jsx(ze,{className:"icon-lg mx-2 text-token-text-secondary"})]})}const ns=({onClickOpenSidebar:t,children:a,showNavSidebar:s,leftContent:o,rightContent:i,bottomContent:n})=>{const r=B(m=>m.activeSidebar),d=pe().asPath;return h.useEffect(()=>{r==="popover-nav"&&x.setActiveSidebar(!1)},[d]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"draggable sticky top-0 z-10 flex min-h-[60px] items-center justify-center border-transparent bg-token-main-surface-primary pl-0 md:hidden",children:[(s||o)&&e.jsxs("div",{className:"no-draggable absolute bottom-0 left-0 top-0 ml-3 inline-flex items-center justify-center",children:[s&&e.jsx(as,{onClick:t}),o]}),e.jsx("div",{className:"no-draggable",children:a}),i&&e.jsx("div",{className:"no-draggable absolute bottom-0 right-0 top-0 mr-3 inline-flex items-center justify-center",children:i})]}),n&&e.jsx("div",{className:"no-draggable flex w-full items-center justify-center bg-token-main-surface-primary",children:n})]})};function is({isPopover:t=!1,isExpanded:a=!1,children:s}){return e.jsxs(e.Fragment,{children:[t&&e.jsx(os,{children:s}),e.jsx(rs,{isExpanded:!t&&a,children:s})]})}function rs({isExpanded:t,children:a}){const s=h.useRef(null);return e.jsx(ie.div,{className:"flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary",ref:s,initial:!1,animate:{width:t?"260px":0,transition:{duration:.165,ease:"easeOut"}},onAnimationStart:()=>{s.current&&(s.current.style.visibility="visible")},onAnimationComplete:()=>{s.current&&(t||(s.current.style.visibility="hidden"))},children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col",children:a})})})}function os({children:t}){const a=B(s=>s.activeSidebar);return e.jsx(he,{open:a==="popover-nav",onOpenChange:s=>{s||x.setActiveSidebar(!1)},children:e.jsxs(xe,{children:[e.jsx(be,{className:"fixed inset-0 z-10 bg-white/50 radix-state-open:animate-show dark:bg-black/50"}),e.jsx(ve,{className:"fixed left-0 top-0 z-50 h-full max-w-xs border-r border-gray-200 bg-token-sidebar-surface-primary shadow-[0_0_64px_0_rgba(0,0,0,0.07)] focus:outline-none radix-state-closed:animate-sidebarHide radix-state-open:animate-sidebarShow dark:border-gray-800",children:t})]})})}const re=_({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}});function ls({workspace:t}){var n;const a=U(),s=Fe(I.InviteUsersToWorkspace),o=Ue()??!0,i=(n=Le())==null?void 0:n.map(r=>r.hostname);return e.jsx(je,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Se,type:"success",title:t.data.name!=null?a.formatMessage(N.inviteMemberModalTitle,{workspaceName:t.data.name}):a.formatMessage(N.inviteMemberModalTitleUntitledWorkspace),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(l,{...N.inviteMemberModalDescription})}),!!(i!=null&&i.length)&&!o&&e.jsxs("p",{className:"mt-2",children:[e.jsx(l,{...N.prohibitExternalDomainsDescription})," ",e.jsx("b",{children:i.join(", ")})]})]}),children:e.jsx(es,{workspace:t,canResendInviteEmails:!0,onCancel:()=>x.closeModal(I.InviteUsersToWorkspace),onSuccess:()=>x.closeModal(I.InviteUsersToWorkspace),cancelButtonText:a.formatMessage(N.inviteMemberInviteCancelButton)})})}const N=_({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},prohibitExternalDomainsDescription:{id:"ky8nVd",defaultMessage:"Only users from the following emails can be added to this workspace:"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}});function cs({showFreeTrialLoadingPayment:t,handleGetPaymentLink:a}){const s=U(),o=()=>{t||(E(!0),a())},i=b=>{b.stopPropagation(),Be(!0),Oe(!0)},{data:n,isLoading:r,isSuccess:c}=Z({queryKey:["claimedReferralInvite"],queryFn:()=>W.getClaimedReferralInvite(),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),d=n==null?void 0:n.invite_code,[m,g]=h.useState(!1);if(h.useEffect(()=>{d&&!m&&c&&(g(!0),P.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),f.logEvent(M.chatgptReferralShowClaimedSidebartMenuPromo))},[d,g,m,c]),!d||r||!c)return null;const u=d.invite_metadata.invite_data,k=u!=null&&u.referral_trial_duration_months?(u==null?void 0:u.referral_trial_duration_months)>1?s.formatMessage(A.monthsOfBenefit,{referralTrialDurationMonths:u==null?void 0:u.referral_trial_duration_months}):s.formatMessage(A.daysOfBenefit,{referralTrialDurationDays:u==null?void 0:u.referral_trial_duration_days}):null;return e.jsx(ie.div,{className:C("relative",{"cursor-progress opacity-50":t}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:e.jsxs(ds,{className:C(t&&"opacity-75"),onClick:o,children:[e.jsxs("div",{className:"flex w-full flex-row items-center justify-start gap-3",children:[e.jsx(Me,{className:"icon-sm shrink-0"}),e.jsx(l,{...A.freeTrialCta,values:{duration:k}})]}),!t&&e.jsx(Ge,{onClick:i,className:"icon-md shrink-0 rounded-full p-0.5 text-token-text-tertiary opacity-50 transition-colors duration-200 hover:bg-[#0077FF] hover:text-red-500 group-hover:opacity-100"}),e.jsx("span",{className:"absolute top-11 h-0 w-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}const ds=X.a`group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm`,A=_({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}"}});function us(){const t=U(),a=Q(),s=L(),o=!s,i=(s==null?void 0:s.hasPaidSubscription())??!1,n=(s==null?void 0:s.hasClaimedFreeTrial())??!1,r=h.useMemo(()=>s==null?void 0:s.subscriptionAnalyticsParams,[s]),c=async()=>{E(!0),f.logEvent(M.clickAccountPaymentCheckout,r);try{const v=await W.getCheckoutLink(a);window.location.href=v.url}catch{ke.warning(t.formatMessage(j.paymentErrorWarning),{hasCloseButton:!0}),E(!1)}finally{}},d=()=>{g||(E(!0),c())},m=V(v=>v.didCloseFreeTrial),g=V(v=>v.showFreeTrialLoadingPayment),u=!m&&n,k=(s==null?void 0:s.wasPaidCustomer())??!1;let b=(s==null?void 0:s.isWorkspaceAccount())??!1;const w=(s==null?void 0:s.isPlus())??!1,{doesUserHaveAnyAccountsWithPlusFeatures:S}=ye(),{layer:O}=Y("2670443078");let p=w;!b&&!w&&S&&O.get("is_gating_fix_enabled",!1)&&(p=S,b=!0);const ce=!o&&!b,de=J(),ue=()=>{f.logEvent(M.clickSidebarAccountPaymentMenuItem,r),Ae(de,"Sidebar account payment menu item")},{setShowReferralInviteModal:$}=Re(v=>({setShowReferralInviteModal:v.setShowReferralInviteModal})),me=h.useCallback(()=>{P.logEvent("chatgpt_referral_invite_sidebar_clicked"),f.logEvent(M.chatgptReferralInviteSidebarClicked,r),$(!0,()=>{f.logEvent(M.clickSidebarAccountPaymentMenuItem,r)})},[r,$]),fe=(s==null?void 0:s.isTeam())??!1;return e.jsxs(e.Fragment,{children:[((a==null?void 0:a.includes(ee))||i)&&e.jsx(gs,{analyticsParams:r,handleReferralInvite:me}),!i&&u&&e.jsx(cs,{showFreeTrialLoadingPayment:g,handleGetPaymentLink:c}),fe&&e.jsx(fs,{}),ce&&e.jsx(H,{onClick:u?d:ue,className:"m-0 rounded-lg px-2",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ms,{wasPaidCustomer:k,showFreeTrialLoadingPayment:g,hasPlusSubscription:p})})})})]})}const ms=({wasPaidCustomer:t,showFreeTrialLoadingPayment:a,hasPlusSubscription:s})=>a?e.jsx(Ce,{className:"icon-sm shrink-0"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(qe,{className:"icon-sm shrink-0"})}),e.jsx("div",{className:"flex flex-col",children:t?e.jsx(l,{...j.renewPlus}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s?e.jsx(l,{...j.createATeamWorkspace}):e.jsx(l,{...j.upgradePlan})}),e.jsx("span",{className:"line-clamp-1 text-xs text-token-text-tertiary",children:s?e.jsx(l,{...j.upgradeToTeamUpsell}):e.jsx(l,{...j.upgradeToPlusUpsell})})]})})]}),fs=()=>{const t=L();return e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:()=>{x.openModal(I.InviteUsersToWorkspace)},className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(ae,{className:"icon-sm shrink-0"})}),e.jsx(l,{...j.inviteMembers})]})})}),t!=null?e.jsx(ls,{workspace:t}):null]})},gs=({analyticsParams:t,handleReferralInvite:a})=>{const s=Q(),o=(s==null?void 0:s.includes(ee))??!1,i=L(),{data:n}=Z({queryKey:["referralInvites"],queryFn:()=>W.getEligibleReferralInvites(),enabled:o}),r=i&&!i.isOrWasPaidCustomer()&&!i.hasPlusFeatures(),c=(n==null?void 0:n.invites_remaining)&&(n==null?void 0:n.invites_remaining)>0,d=r&&c,[m,g]=h.useState(!1);return h.useEffect(()=>{d&&!m&&(g(!0),P.logEvent("chatgpt_referral_show_sidebar_menu_item"),f.logEvent(M.chatgptReferralShowSidebarMenuItem,t))},[d,g,m,t]),d?e.jsx(H,{onClick:a,className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(ae,{className:"icon-sm shrink-0"})}),e.jsx(l,{...j.inviteReferral})]})})}):null},j=_({upgradePlan:{id:"PaymentMenuItems.upgradePlan",defaultMessage:"Upgrade plan"},createATeamWorkspace:{id:"PaymentMenuItems.createATeamWorkspace",defaultMessage:"Add Team workspace"},upgradeToTeamUpsell:{id:"PaymentMenuItems.upgradeToTeamUpsell",defaultMessage:"Collaborate on a Team plan"},upgradeToPlusUpsell:{id:"PaymentMenuItems.upgradeToPlusUpsell.0",defaultMessage:"Get GPT-4, DALL·E, and more"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend"},inviteMembers:{id:"PaymentMenuItems.inviteMembers.0",defaultMessage:"Invite members"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}});function Ps({navHeader:t,children:a,className:s}){const o=U(),i=h.useRef(null),n=we(),{isUnauthenticated:r}=T(),{layer:c}=Y("1578749296"),d=c.get("is_sticky_toggle_off",!1);return h.useEffect(()=>{d&&x.openSidebar()},[d]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"draggable relative h-full w-full flex-1 items-start border-white/20",children:[e.jsx(Ne,{asChild:!0,children:e.jsx("h2",{children:e.jsx(l,{...y.chatHistoryLabel})})}),e.jsxs("nav",{className:C("flex h-full w-full flex-col px-3",s),"aria-label":o.formatMessage(y.chatHistoryLabel),children:[t,e.jsx(hs,{ref:i,$disableScroll:n&&!r,children:a}),e.jsx(ps,{})]})]})})}function ps(){const[t]=h.useState(()=>{const c=Ie.getCookie(Pe.Workspace);return typeof c=="string"&&c!==Te}),a=L(),s=(a==null?void 0:a.data)==null,{isUnauthenticated:o}=T(),{openSettings:i}=te(),{isCollapsible:n}=We(),r=B(c=>c.isHistoryCollapsed);return t&&s||!a?null:o?e.jsx(oe,{}):e.jsxs("div",{className:C("flex flex-col py-2 empty:hidden dark:border-white/20",n&&"-mx-3 border-t border-token-border-sharp px-3"),children:[n&&!r&&e.jsx(De,{type:"less",onClick:x.toggleHistoryCollapsed}),e.jsx(He,{}),e.jsx(us,{}),e.jsx("div",{className:"flex w-full items-center md:hidden",children:e.jsx("div",{className:"max-w-[100%] grow",children:e.jsx(Qe,{onClickSettings:()=>i()})})})]})}const oe=()=>{const t=se(),a=D(),s=()=>{const r=a({authType:"login"});f.logLogInButtonClicked({location:"Sidebar bottom unit",provider:r}),P.logEvent("chatgpt_sidebar_login_button_clicked")},o=()=>{const r=a({authType:"signup"});f.logSignUpButtonClicked({location:"Sidebar bottom unit",provider:r}),P.logEvent("chatgpt_sidebar_signup_button_clicked")},i=e.jsx(F,{as:"button",size:"medium",color:t?"secondary":"primary","data-testid":"signup-button",onClick:o,children:e.jsx(l,{...y.unauthSignupCta})}),n=e.jsx(F,{as:"button",size:"medium",color:t?"primary":"secondary","data-testid":"login-button",onClick:s,children:e.jsx(l,{...y.unauthLoginCta})});return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-4 mt-2",children:[e.jsx("p",{className:"mb-1 text-sm font-semibold text-token-text-primary",children:e.jsx(l,{...t?y.logInOrSignUp:y.signUpOrLogIn})}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."})})]}),e.jsx("div",{className:"flex flex-row items-start gap-2",children:t?[n,i]:[i,n]})]})},hs=X.div`flex-col flex-1 transition-opacity duration-500 relative -mr-2 pr-2
  ${({$disableScroll:t})=>t?"overflow-y-hidden opacity-20 pointer-events-none":"overflow-y-auto"}`,y=_({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history"},closeSidebar:{id:"NavigationContent.closeSidebar",defaultMessage:"Close sidebar"},signInToChat:{id:"NavigationContent.signInToChat",defaultMessage:"Sign in to ChatGPT"},signUpOrLogIn:{id:"NavigationContent.signUpOrLogIn",defaultMessage:"Sign up or log in"},logInOrSignUp:{id:"NavigationContent.logInOrSignUp",defaultMessage:"Log in or sign up"},unauthSignupCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},unauthLoginCta:{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"}}),xs=()=>{var i,n;const{openSettings:t}=te(),a=(i=z("3376455464"))==null?void 0:i.value,s=(n=z("90459671"))==null?void 0:n.value,o=J();return e.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[e.jsx(K,{icon:Ve,onClick:()=>{$e(o),x.closeActiveSidebar()},children:e.jsx(l,{id:"0FupYP",defaultMessage:"New chat"})}),e.jsx("div",{className:"flex grow items-center justify-center",children:e.jsx(oe,{})}),e.jsxs(Je,{contentClassName:"w-[298px]",triggerButton:e.jsx(K,{icon:Ke,children:e.jsx(l,{id:"y4Lkp7",defaultMessage:"Settings and more"})}),children:[e.jsx(R.Item,{onClick:()=>t(),icon:Xe,children:e.jsx(l,{id:"HrRLkZ",defaultMessage:"Settings"})}),a&&s&&e.jsx(R.Item,{icon:Ze,onClick:()=>{x.openModal(I.ReportConversation)},children:e.jsx(l,{id:"thread.report.0",defaultMessage:"Report illegal content"})}),e.jsx(R.Separator,{}),e.jsx(Ye,{})]})]})};function le({children:t,hideNavigation:a=!1,mobileHeaderContent:s,mobileHeaderLeftContent:o,mobileHeaderRightContent:i,mobileHeaderBottomContent:n,sidebar:r,forceOpenDesktopSidebar:c=!1}){const d=_e(),{isUnauthenticated:m}=T(),[g,u,k]=B(p=>[p.isDesktopNavCollapsed,p.activeStageSidebar,p.activeSidebar]),b=[];let w=null;G.Children.forEach(t,p=>{G.isValidElement(p)&&(p.type===le.Sidebars?w=p:b.push(p))});const S=!m&&!a&&r!=null,O=!a&&!d&&(S||m);return e.jsxs("div",{className:C("relative flex h-full w-full overflow-hidden transition-colors",k!=="popover-nav"&&"z-0"),children:[S&&e.jsx(q,{children:e.jsx(is,{isExpanded:c||!g,isPopover:u||!d,children:m?e.jsx(xs,{}):r})}),e.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[O&&e.jsx(q,{children:e.jsx(ns,{onClickOpenSidebar:()=>x.togglePopoverNavSidebar(),showNavSidebar:S,leftContent:o,rightContent:i,bottomContent:n,children:s})}),e.jsx("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:b})]}),w]})}function bs({children:t}){return e.jsx(e.Fragment,{children:t})}le.Sidebars=bs;export{ls as A,Ps as N,le as S,ws as a,Ns as b,Is as c};
