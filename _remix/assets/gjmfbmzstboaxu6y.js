import{I as nt,D as st,r as o,j as d,G as ee,E as ct,b5 as it,u as C}from"./e80s9x9phit586fh.js";import{n as ut,A as dt,ap as mt,d9 as g,da as ft,db as fe,dc as G,dd as vt,de as ht,df as b,dg as s,dh as c,di as ve,dj as ge,dk as gt,dl as pt,dm as bt,dn as Tt,dp as St,dq as xt,dr as yt,ds as Ct,dt as kt,du as wt,dv as De,dw as Et,dx as Nt,dy as Ye,dz as _t,dA as Bt,dB as Ve,dC as Ht,dD as It,dE as Pt,dF as jt,dG as Mt,dH as Rt}from"./epx1rnqqdufg3tv7.js";import{B as Ot}from"./g8qf5jn9kid9awdx.js";import{m as Ge}from"./dlro9umj0c9wyaej.js";const Lt=5,Ft="Default";function $t(n){const t={};return n.forEach(i=>{const m=i.group??Ft;t[m]||(t[m]=[]),t[m].push(i)}),t}function Yt({tagOptions:n,onSubmit:t,onMoreClicked:i,onCancel:m,maxInlineTags:x=Lt,modalOnly:p=!1,modalTitle:k,multiple:r,children:B,allowEmptySubmit:M=!1}){const u=st(),[w,H]=o.useState(p?"modal":"inline"),[P,U]=o.useState([]),[E,z]=o.useState(void 0),I=o.useCallback(h=>{t(h),H("submitted"),setTimeout(()=>{H("closed")},1500)},[t]),J=o.useMemo(()=>ut(I,500),[I]),K=h=>{let T=[];return r?T=P.includes(h)?P.filter(le=>le!==h):[...P,h]:T=[h],U(T),T},S=()=>{I({tags:P,textFeedback:E,tagChoices:Q,source:"modal"})},Q=n.map(h=>h.value),y=$t(n),W=Object.keys(y);return d.jsxs(d.Fragment,{children:[!p&&d.jsx(dt,{children:w!=="closed"&&d.jsxs(Ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"min-h-[96px] w-full",children:[w==="submitted"&&d.jsx(Ge.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center",children:d.jsx("div",{className:"inline-flex rounded-lg border border-token-border-light p-4",children:d.jsx("div",{className:"text-sm",children:d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.submitted",defaultMessage:"Thanks for your feedback!"})})})}),["inline","modal"].includes(w)&&d.jsxs("div",{className:"relative mt-2 flex w-full flex-col gap-3 rounded-lg border border-token-border-light p-4",children:[d.jsx("button",{className:"absolute right-4 top-4 text-sm font-bold",onClick:()=>{H("closed"),J.cancel(),m==null||m()},children:d.jsx(Ot,{className:"icon-md text-token-text-secondary hover:text-token-text-primary"})}),d.jsx("div",{className:"text-sm text-token-text-secondary",children:d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.inlineTitle",defaultMessage:"Tell us more:"})}),d.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.slice(0,x).map(h=>d.jsx(he,{$selected:P.includes(h.value),onClick:()=>{const T=K(h.value);J({tags:T,tagChoices:Q,source:"inline"})},children:h.label},h.value)),d.jsx(he,{onClick:()=>{i==null||i(),J.cancel(),H("modal")},children:d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.moreOptions.1",defaultMessage:"More..."})})]})]})]},"main")}),w==="modal"&&d.jsxs(ct,{type:"success",isOpen:!0,className:"max-w-xl",size:"custom",title:k??d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.modalTitle",defaultMessage:"Provide additional feedback"}),onClose:()=>{U([]),H(p?"closed":"inline"),p&&(m==null||m())},showCloseButton:!0,primaryButton:d.jsx(it,{color:"primary",disabled:P.length===0&&!E&&!M,onClick:S,children:d.jsx(ee,{id:"ConversationTurnInlineMessageFeedback.submit",defaultMessage:"Submit"})}),rootClassName:"z-50",children:[d.jsx("div",{className:"flex flex-col gap-6",children:W.map(h=>d.jsxs("div",{children:[W.length>1&&d.jsx("div",{className:"mb-3 text-sm font-semibold",children:h}),d.jsx("div",{className:"flex flex-wrap gap-3",children:y[h].map(T=>d.jsx(he,{$selected:P.includes(T.value),onClick:()=>K(T.value),children:T.label},T.value))},h)]},h))}),d.jsx(mt,{name:"feedback",type:"text",className:"mt-6",placeholder:u.formatMessage({id:"ConversationTurnInlineMessageFeedback.feedbackPlaceholder.1",defaultMessage:"(Optional) Feel free to add specific details"}),value:E??"",onChange:h=>z(h.target.value),onPressEnter:S}),B]})]})}const he=nt.button`
  rounded-lg border border-token-border-light px-3 py-1 text-sm text-token-text-secondary hover:text-token-text-primary hover:bg-token-main-surface-secondary
  ${({$selected:n})=>n&&"!bg-token-text-primary !text-token-main-surface-primary"}
`;function Ue(n,t){var i=Bt(n);if(Ve){var m=Ve(n);t&&(m=Ht(m).call(m,function(x){return Ye(n,x).enumerable})),i.push.apply(i,m)}return i}function ze(n){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};if(t%2){var m;ge(m=Ue(Object(i),!0)).call(m,function(p){wt(n,p,i[p])})}else if(De)Et(n,De(i));else{var x;ge(x=Ue(Object(i))).call(x,function(p){Nt(n,p,Ye(i,p))})}}return n}var Dt=function(){return 1/0},Ke=17,Vt="bottom",_="top",We=1,Gt=34,qe={};function Ut(n,t){return n(),_t(n,t)}function Xe(n){var t=n.mode,i=n.target,m=i.offsetHeight,x=i.scrollHeight,p=i.scrollTop,k=x-p-m<We,r=p<We,B=t===_?r:k,M=t!==_?r:k;return{atBottom:k,atEnd:B,atStart:M,atTop:r}}function te(n,t){return n===(t===_?0:"100%")}var pe=function(t){var i=t.checkInterval,m=t.children,x=t.debounce,p=t.debug,k=t.initialScrollBehavior,r=t.mode,B=t.nonce,M=t.scroller,u=o.useMemo(function(){return ft("<ScrollToBottom>",{force:p})},[p]);r=r===_?_:Vt;var w=o.useRef(0),H=o.useRef(k),P=fe(r===_?0:"100%"),U=G(P,3),E=U[0],z=U[1],I=U[2],J=fe(null),K=G(J,3),S=K[0],Q=K[1],y=K[2],W=o.useRef(0),h=o.useRef(0),T=o.useRef(0),le=o.useState(!0),Te=G(le,2),Se=Te[0],xe=Te[1],Je=o.useState(!0),ye=G(Je,2),Ce=ye[0],ke=ye[1],Qe=o.useState(!0),we=G(Qe,2),Ee=we[0],Ne=we[1],Ze=o.useState(!1),_e=G(Ze,2),Be=_e[0],He=_e[1],et=fe(!0),ne=G(et,3),se=ne[0],R=ne[1],O=ne[2],Z=o.useRef([]),Ie=o.useCallback(function(e){var l=y.current;return Z.current.push(e),l&&e({scrollTop:l.scrollTop}),function(){var a=Z.current,f=vt(a).call(a,e);~f&&ht(a).call(a,f,1)}},[Z,y]),ce=o.useCallback(function(){var e=I.current;u(function(){var l;return b(l=["%cSpineTo%c: %conEnd%c is fired."]).call(l,s(c("magenta")),s(c("orange")),[{animateTo:e}])}),w.current=ve(),te(e,r)||R(!1),z(null)},[I,u,w,r,z,R]),L=o.useCallback(function(e){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=l.behavior,f=y.current;if(typeof e!="number"&&e!=="100%")return console.warn('react-scroll-to-bottom: Arguments passed to scrollTo() must be either number or "100%".');u(function(){var v;return[b(v=["%cscrollTo%c: Will scroll to %c".concat(typeof e=="number"?e+"px":e.replace(/%/g,"%%"),"%c")]).call(v,s(c("lime","")),s(c("purple"))),{behavior:a,nextAnimateTo:e,target:f}]}),a==="auto"?(ce(),f&&(f.scrollTop=e==="100%"?f.scrollHeight-f.offsetHeight:e)):(a!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollTo". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),z(e)),te(e,r)&&(u(function(){var v;return[b(v=["%cscrollTo%c: Scrolling to end, will set sticky to %ctrue%c."]).call(v,s(c("lime","")),s(c("purple"))),[{mode:r,nextAnimateTo:e}]]}),R(!0))},[u,ce,r,z,R,y]),q=o.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=e.behavior;u(function(){var a;return b(a=["%cscrollToBottom%c: Called"]).call(a,s(c("yellow","")))}),l!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToBottom". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),L("100%",{behavior:l||"smooth"})},[u,L]),X=o.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=e.behavior;u(function(){var a;return b(a=["%cscrollToTop%c: Called"]).call(a,s(c("yellow","")))}),l!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToTop". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),L(0,{behavior:l||"smooth"})},[u,L]),Pe=o.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=e.behavior;u(function(){var f;return b(f=["%cscrollToEnd%c: Called"]).call(f,s(c("yellow","")))}),l!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToEnd". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var a={behavior:l||"smooth"};r===_?X(a):q(a)},[u,r,q,X]),je=o.useCallback(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},l=e.behavior;u(function(){var f;return b(f=["%cscrollToStart%c: Called"]).call(f,s(c("yellow","")))}),l!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToStart". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var a={behavior:l||"smooth"};r===_?q(a):X(a)},[u,r,q,X]),re=o.useCallback(function(){var e=y.current;if(e){if(H.current==="auto"){u(function(){var D;return b(D=["%ctarget changed%c: Initial scroll"]).call(D,s(c("blue")))}),e.scrollTop=r===_?0:e.scrollHeight-e.offsetHeight,H.current=!1;return}var l=W.current,a=e.offsetHeight,f=e.scrollHeight,v=e.scrollTop,j=r===_?0:Math.max(0,f-a-v),$=Math.max(0,l-v),ae=M({maxValue:j,minValue:$,offsetHeight:a,scrollHeight:f,scrollTop:v}),F=Math.max(0,Math.min(j,ae)),N;r===_||F!==j?N=v+F:N="100%",u(function(){var D,Y,A;return[b(D=[b(Y=b(A="%cscrollToSticky%c: Will animate from %c".concat(l,"px%c to %c")).call(A,typeof N=="number"?N+"px":N.replace(/%/g,"%%"),"%c (%c")).call(Y,(N==="100%"?j:N)+l,"px%c)")]).call(D,s(c("orange")),s(c("purple")),s(c("purple")),s(c("purple"))),{animateFrom:l,maxValue:j,minValue:$,nextAnimateTo:N,nextValue:F,offsetHeight:a,rawNextValue:ae,scrollHeight:f,scrollTop:v}]}),L(N,{behavior:"smooth"})}},[W,u,r,M,L,y]),tt=o.useCallback(function(e){var l,a=e.timeStampLow,f=I.current,v=y.current,j=f!==null;if(!(a<=w.current||!v)){var $=Xe({mode:r,target:v}),ae=$.atBottom,F=$.atEnd,N=$.atStart,D=$.atTop;xe(ae),ke(F),He(N),Ne(D);var Y=v.offsetHeight,A=v.scrollHeight,Re=h.current,Oe=T.current,de=Y!==Re,me=A!==Oe;if(de&&(h.current=Y),me&&(T.current=A),!de&&!me){var oe=j&&te(f,r)||F;O.current!==oe&&(u(function(){var V,Le,Fe,$e;return[b(V=["%conScroll%c: %csetSticky%c(%c".concat(oe,"%c)")]).call(V,s(c("red")),s(c("red")),s(c("purple"))),b(Le=[b(Fe=b($e="(animating = %c".concat(j,"%c && isEnd = %c")).call($e,te(f,r),"%c) || atEnd = %c")).call(Fe,F,"%c")]).call(Le,s(c("purple")),s(c("purple")),s(c("purple")),[{animating:j,animateTo:f,atEnd:F,mode:r,offsetHeight:v.offsetHeight,scrollHeight:v.scrollHeight,sticky:O.current,nextSticky:oe}])]}),R(oe))}else O.current&&(u(function(){var V;return[b(V=["%conScroll%c: Size changed while sticky, calling %cscrollToSticky()%c"]).call(V,s(c("red")),s(c("orange")),[{offsetHeightChanged:de,scrollHeightChanged:me}]),{nextOffsetHeight:Y,prevOffsetHeight:Re,nextScrollHeight:A,prevScrollHeight:Oe}]}),re());var lt=v.scrollTop;ge(l=Z.current).call(l,function(V){return V({scrollTop:lt})})}},[I,u,w,r,h,T,Z,re,xe,ke,He,Ne,R,O,y]);o.useEffect(function(){if(S){var e=!1,l=Ut(function(){var a=y.current,f=I.current!==null;O.current?Xe({mode:r,target:a}).atEnd?e=!1:e?ve()-e>Gt&&(f||(W.current=a.scrollTop,u(function(){var v;return b(v=["%cInterval check%c: Should sticky but not at end, calling %cscrollToSticky()%c to scroll"]).call(v,s(c("navy")),s(c("orange")))}),re()),e=!1):e=ve():a.scrollHeight<=a.offsetHeight&&!O.current&&(u(function(){var v;return[b(v=["%cInterval check%c: Container is emptied, setting sticky back to %ctrue%c"]).call(v,s(c("navy")),s(c("purple"))),[{offsetHeight:a.offsetHeight,scrollHeight:a.scrollHeight,sticky:O.current}]]}),R(!0))},Math.max(Ke,i)||Ke);return function(){return clearInterval(l)}}},[I,i,u,r,re,R,O,S,y]);var Me=o.useMemo(function(){var e=qe[B]||(qe[B]=gt({key:"react-scroll-to-bottom--css-"+pt(),nonce:B}));return function(l){return e.css(l)+""}},[B]),rt=o.useMemo(function(){return{observeScrollPosition:Ie,setTarget:Q,styleToClassName:Me}},[Ie,Q,Me]),ie=o.useMemo(function(){return{atBottom:Se,atEnd:Ce,atStart:Be,atTop:Ee,mode:r}},[Se,Ce,Be,Ee,r]),ue=o.useMemo(function(){var e=E!==null;return{animating:e,animatingToEnd:e&&te(E,r),sticky:se}},[E,r,se]),at=o.useMemo(function(){return ze(ze({},ie),ue)},[ie,ue]),ot=o.useMemo(function(){return{scrollTo:L,scrollToBottom:q,scrollToEnd:Pe,scrollToStart:je,scrollToTop:X}},[L,q,Pe,je,X]);return o.useEffect(function(){if(S){var e=function(){T.current=S.scrollHeight};return S.addEventListener("focus",e,{capture:!0,passive:!0}),function(){return S.removeEventListener("focus",e)}}},[S]),u(function(){var e;return[b(e=["%cRender%c: Render"]).call(e,s(c("cyan",""))),{animateTo:E,animating:E!==null,sticky:se,target:S}]}),C.createElement(bt.Provider,{value:rt},C.createElement(Tt.Provider,{value:ot},C.createElement(St.Provider,{value:at},C.createElement(xt.Provider,{value:ie},C.createElement(yt.Provider,{value:ue},m,S&&C.createElement(Ct,{debounce:x,name:"scroll",onEvent:tt,target:S}),S&&E!==null&&C.createElement(kt,{name:"scrollTop",onEnd:ce,target:S,value:E}))))))};pe.defaultProps={checkInterval:100,children:void 0,debounce:17,debug:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:Dt};pe.propTypes={checkInterval:g.number,children:g.any,debounce:g.number,debug:g.bool,initialScrollBehavior:g.oneOf(["auto","smooth"]),mode:g.oneOf(["bottom","top"]),nonce:g.string,scroller:g.func};var zt={position:"relative"},be=function(t){var i=t.children,m=t.className,x=t.followButtonClassName,p=t.scrollViewClassName,k=It()(zt);return C.createElement("div",{className:Pt(k,(m||"")+"")},C.createElement(jt,{className:(p||"")+""},i),C.createElement(Mt,{className:(x||"")+""}))};be.defaultProps={children:void 0,className:void 0,followButtonClassName:void 0,scrollViewClassName:void 0};be.propTypes={children:g.any,className:g.string,followButtonClassName:g.string,scrollViewClassName:g.string};var Ae=function(t){var i=t.checkInterval,m=t.children,x=t.className,p=t.debounce,k=t.debug,r=t.followButtonClassName,B=t.initialScrollBehavior,M=t.mode,u=t.nonce,w=t.scroller,H=t.scrollViewClassName;return C.createElement(pe,{checkInterval:i,debounce:p,debug:k,initialScrollBehavior:B,mode:M,nonce:u,scroller:w},C.createElement(be,{className:x,followButtonClassName:r,scrollViewClassName:H},m))};Ae.defaultProps={checkInterval:void 0,children:void 0,className:void 0,debounce:void 0,debug:void 0,followButtonClassName:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:void 0,scrollViewClassName:void 0};Ae.propTypes={checkInterval:g.number,children:g.any,className:g.string,debounce:g.number,debug:g.bool,followButtonClassName:g.string,initialScrollBehavior:g.oneOf(["auto","smooth"]),mode:g.oneOf(["bottom","top"]),nonce:g.string,scroller:g.func,scrollViewClassName:g.string};Rt();export{Ae as B,Yt as I,he as T};
