import{S,r as s,a2 as d,C as E,aI as o,aJ as i,j as O}from"./lqxieoavntgc1bwa.js";import"./elw9by4pq97u474x.js";function m(){const t=S(),l=s.useRef(!1),[f,p]=s.useState(""),{code:a,error:u,error_description:n,state:c}=Object.fromEntries(new URLSearchParams(f.substring(1)).entries()),e=t.query.pluginId;return s.useEffect(()=>{p(window.location.hash)},[]),s.useEffect(()=>{if(l.current)return;e&&a&&c&&(l.current=!0);async function C(){const R=`https://chatgpt.com/ccc/${e}/oauth/callback`;if(!(!e||!a||!c))try{const r=await E.connectorOauthCallback(e,a,R,c);if(r.success){const h=new URL(o(i.OAUTH_SUCCESS,r.redirect_path));h.searchParams.set("oauth_success","true"),t.push(h.toString())}else t.push(o(i.CUSTOM_ERROR,r.redirect_path,r.error??r.message))}catch{t.push(o(i.CUSTOM_ERROR))}}C()},[e,a,c,t]),s.useEffect(()=>{u&&d.danger(`${u}${n?`: ${n}`:""}`)},[u,n]),null}function g(){return O.jsx(m,{})}export{g as default};
//# sourceMappingURL=l2t4zjpskh0l1fab.js.map
