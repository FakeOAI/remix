import{S,r as s,a2 as E,C as d,aD as o,aE as i,j as O}from"./e80s9x9phit586fh.js";import"./g8qf5jn9kid9awdx.js";function m(){const t=S(),l=s.useRef(!1),[f,p]=s.useState(""),{code:a,error:u,error_description:n,state:c}=Object.fromEntries(new URLSearchParams(f.substring(1)).entries()),e=t.query.pluginId;return s.useEffect(()=>{p(window.location.hash)},[]),s.useEffect(()=>{if(l.current)return;e&&a&&c&&(l.current=!0);async function C(){const R=`/ccc/${e}/oauth/callback`;if(!(!e||!a||!c))try{const r=await d.connectorOauthCallback(e,a,R,c);if(r.success){const h=new URL(o(i.OAUTH_SUCCESS,r.redirect_path));h.searchParams.set("oauth_success","true"),t.push(h.toString())}else t.push(o(i.CUSTOM_ERROR,r.redirect_path,r.error??r.message))}catch{t.push(o(i.CUSTOM_ERROR))}}C()},[e,a,c,t]),s.useEffect(()=>{u&&E.danger(`${u}${n?`: ${n}`:""}`)},[u,n]),null}function g(){return O.jsx(m,{})}export{g as default};
