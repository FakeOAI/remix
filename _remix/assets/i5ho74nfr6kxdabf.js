import{j as r,S as m,r as c,a2 as R,C as E,aD as f,aE as h}from"./k9l0508ak3e7lzcr.js";import{u as O}from"./jqz6to61rc4qnxah.js";import"./hb601xkanolcuyaq.js";function g(t){return r.jsx(C,{...t})}function C({pluginId:t,code:n,state:i,error:e,errorDesc:u}){const s=m(),o=c.useRef(!1);return c.useEffect(()=>{if(o.current===!0)return;o.current=!0;async function p(){const S=`https://chat.openai.com/aip/${t}/oauth/callback`;try{const a=await E.pluginOauthCallback(t,n,S,i);if(a.success){const l=new URL(f(h.OAUTH_SUCCESS,a.redirect_path));l.searchParams.set("oauth_success","true"),s.push(l.toString())}else s.push(f(h.CUSTOM_ERROR,a.redirect_path,a.error??a.message))}catch{s.push(`/?model=gpt-4-plugins&loginAip=${t}&loginSuccess=false`)}}p()},[t,n,i,s]),c.useEffect(()=>{e&&R.danger(`${e}${u?`: ${u}`:""}`,{duration:5})},[e,u]),r.jsx("div",{})}function x(){const t=O();return r.jsx(g,{...t})}export{x as default};
