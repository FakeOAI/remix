import{r as a,cl as E,bD as m,a6 as c,fd as h,I as v,aL as w,fe as y,eQ as C}from"./nhth9ejvp1y38gpf.js";import{X as S,cf as P,d3 as W,Y as g,d4 as j,aY as L,d5 as A}from"./pdsi9ig2nufco8yv.js";import{C as N}from"./k2bcega1x4o8akh0.js";import{T as M}from"./jvh226e0savay1mc.js";import{c as T}from"./mfj415wp2kzbofro.js";function f(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function p(e,t){e.head.querySelectorAll("link, style").forEach(o=>{f(o)&&t.head.appendChild(o.cloneNode(!0))});const s=new WeakMap,r=new MutationObserver(o=>{o.forEach(n=>{n.type==="childList"&&(n.addedNodes.forEach(i=>{if(f(i)){const u=t.head.appendChild(i.cloneNode(!0));if(s.set(i,u),i instanceof HTMLStyleElement&&i.dataset.emotion){const{sheet:d}=i,{sheet:l}=u;if(d&&l)for(const x of d.cssRules)l.insertRule(x.cssText)}}}),n.removedNodes.forEach(i=>{const u=s.get(i);u&&t.head.removeChild(u)}))})});return r.observe(e.head,{childList:!0}),()=>{r.disconnect()}}function b(e,t){for(const r of e.attributes)t.setAttribute(r.name,r.value);const s=new MutationObserver(r=>{r.forEach(o=>{if(o.type==="attributes"&&o.attributeName!=null){const n=e.getAttribute(o.attributeName);n==null?t.removeAttribute(o.attributeName):t.setAttribute(o.attributeName,n)}})});return s.observe(e,{attributes:!0}),()=>{s.disconnect()}}const k=e=>{const t=a.useRef(!1);a.useEffect(()=>{t.current||(e(),t.current=!0)},[e])};function q({children:e,target:t="_blank",features:s}){const[r,o]=a.useState(null);return a.useEffect(()=>{const n=window.open("about:blank",t,s);if(!n){E.error("Unable to create child window");return}p(document,n.document),b(document.documentElement,n.document.documentElement),o(n);function i(){n?.close()}return window.addEventListener("unload",i),()=>{window.removeEventListener("unload",i),n.close()}},[]),r&&m.createPortal(c.jsx(h,{window:r,children:e}),r.document.body)}function K({children:e}){const[t,s]=a.useState(null);return k(()=>{let r=!1,o=null;return async function(){const n=await window.documentPictureInPicture?.requestWindow({width:400,height:600});if(n){if(r){n.close();return}o=()=>n.close(),p(document,n.document),b(document.documentElement,n.document.documentElement),s(n)}}(),()=>{r=!0,o?.()}}),t&&m.createPortal(c.jsx(h,{window:t,children:e}),t.document.body)}function H({clientThreadId:e}){const t=C.useStore(),s=w();j({resetThreadAction:()=>t.newThread(!0),clientThreadId:e,focusPromptTextareaAction:()=>s.document.getElementById("prompt-textarea")?.focus()});const r=L();return c.jsxs(c.Fragment,{children:[r?c.jsx(T,{clientThreadId:e,children:c.jsx(N,{hideHeader:!0})}):c.jsx(M,{clientThreadId:e,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},e),c.jsx(A,{clientThreadId:e})]})}function U({clientThreadId:e}){S(e,{kind:v.PrimaryAssistant});const t=w();return a.useEffect(()=>{const s=()=>{t.document.getElementById("prompt-textarea")?.focus()};return t.addEventListener("focus",s),()=>{t.removeEventListener("focus",s)}},[t]),c.jsx(y,{children:c.jsx(P,{children:c.jsx(W,{clientThreadId:e,children:c.jsx(g,{clientThreadId:e,children:c.jsx(H,{clientThreadId:e})})})})})}export{U as C,K as D,q as a};
//# sourceMappingURL=eb5txretlbm8bb22.js.map
