const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kpxbkub0pjeyvmfv.js","assets/e9yuj0ll30e3kmlx.js","assets/mhi0wfvgf6n45t1b.js","assets/root-g1i0dm9m.css","assets/ihoxwwe79kyl4jef.js","assets/conversation-small-o3h1ik6j.css","assets/l31haxulaym9t4ts.js","assets/ckzt1z3opco67c10.js","assets/ogeaiwpkr6sm1oz0.js","assets/fq0451of3h9o57hb.js","assets/hlvgw9oyg882c45o.js","assets/e3hecsyr6ickw1bt.js","assets/ej09qo1vmp718kgv.js","assets/b0crfrak97mklwk7.js","assets/z8pqu5q32w1jenu1.js","assets/i3rqszi2jft06oon.js","assets/mn3d10go6s4oyp47.js","assets/fzrn137102spawew.js","assets/gf188augm5itvpd3.js","assets/mry9hax8k6o56kk4.js","assets/h6q6kaq8zg1ta889.js","assets/nihsqo11e3vw8mbw.js","assets/ngv8frlm7alo4hi3.js","assets/mk6tgn9xrc5k4g5x.js","assets/b5xw7ip865e6t8or.js","assets/kqwdyvkaaavvn8k3.js","assets/cuv4wdp6aigxllzn.js","assets/ek01e26h588vkl0p.js","assets/983a0dy92b3ronpv.js","assets/ccj1v084emjhtah9.js","assets/cjwsl8eg7deq7swq.js","assets/m0cemrt26ks3sdw1.js","assets/c4bxzbp1808foto4.js","assets/d7j71pnz17tmnn0d.js","assets/gnc11p2kgf0azhul.js","assets/lv3864e7hotyf5b5.js","assets/ejd7qgx2ipuhgs3u.js","assets/hgy4vqlj2re9g125.js","assets/e7j70gn24wjc1x68.js","assets/hctu73tqgw9pngv7.js","assets/hyw91is0wpdvej8o.js","assets/lqckdo21ej0fjrg7.js","assets/gcvnmtdvlfkhgilw.js","assets/mcuhwh1k9238hl6t.js","assets/os9sz5vbrb9n44ev.js","assets/eyjytbju6rmsbcag.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{r as d,X as Pe,cs as Ee,cr as Te,cp as _e,bt as De,aA as Ie,F as se,j as e,J as ye,bz as Ne,aN as Le,I as Be,ao as g,ap as f,aQ as Fe,aK as oe,ft as te,ak as Ve,fn as ne,aU as We,ag as Re,t as ie,a0 as He,ca as re,D as Ue,bH as Ge,bI as ze,bJ as Ke,cA as Qe,l as qe,O as Ye}from"./e9yuj0ll30e3kmlx.js";import{i8 as Je,i9 as Xe,bZ as k,ia as Ze,ib as $e,ic as ea,j as aa,k as sa,cf as oa,T as N,id as ta,ie as na,ig as ia,ih as ra,eq as la,ii as da,ij as ca,ik as ua,il as ha,im as ga,io as fa,ip as ma,iq as pa,ir as ba,is as Sa,it as xa,iu as Ma,iv as Ca,iw as Aa,ix as ja,iy as wa,iz as va,iA as Oa,iB as ka,iC as Pa,c8 as me,o as y,U as le,b_ as B,iD as Ea,iE as Ta,cX as _a,cR as pe,be as Da,cS as Ia,c as be,iF as Se,fM as ya,iG as Na,gF as xe,iH as Me,iI as Ce,eL as La,bx as Ba,ap as Ae,aE as Fa,bh as je,iJ as de,iK as v,g9 as Va,bz as L,bA as ce,m as Wa,fc as Ra,iL as Ha,fb as Ua,iM as Ga,iN as za,iO as Ka,iP as Qa,iQ as qa,iR as Ya,iS as ue,iT as Ja,an as Xa,iU as Za,iV as $a,bc as es,S as as,cP as ss,cQ as os,iW as ts,iX as ns,cT as is,iY as rs}from"./ihoxwwe79kyl4jef.js";import{S as he,b as ls,c as ds}from"./d7j71pnz17tmnn0d.js";import{S as cs,C as us}from"./lv3864e7hotyf5b5.js";import{T as we}from"./ejd7qgx2ipuhgs3u.js";import{N as hs}from"./gnc11p2kgf0azhul.js";import{C as ve}from"./hyw91is0wpdvej8o.js";import{m as O}from"./ogeaiwpkr6sm1oz0.js";import{C as gs}from"./gcvnmtdvlfkhgilw.js";const fs=({onClose:a})=>{const s=ye(),o=k(B.isBusinessWorkspace),t=k(l=>l.currentWorkspace),r=o?s.formatMessage(ge.workspaceWelcome,{workspaceName:t?.name}):"ChatGPT";return e.jsx(Ne,{isOpen:!0,onClose:Le,type:"success",title:r,size:"custom",noPadding:!0,className:"max-w-3xl",description:s.formatMessage(ge.personalOnboardingSubheading),children:e.jsx(Ea,{onClose:a,scope:Ta.Personal})})};function ms({clientThreadId:a}){const[s,o]=d.useState(0),{hasSeenOnboardingDate:t}=Je(),{hasSeenTeamOwnerOnboardingDate:r}=Xe(),l=k(B.isBusinessWorkspace),u=Pe(),[n,m]=d.useState(!1),{data:P,isPending:E,isEnabled:T}=Ze(),b=$e(P,E&&T),{eligible:w}=ea(),S=Ee(),x=Te(),M=_e(),_=aa(()=>sa.getThread(a)),C=oa(a)||!_,A=N.getConversationOrigin(a),{data:i,isError:j}=De(),h=i!=null,F=i&&i?.accountItems.length>1&&i.currentAccountId==null,V=i?.accountItems.some(c=>c.isPersonalAccount()),W=!!i?.accountItems&&i.accountItems.length>0&&i.accountItems.every(({canAccessWithCurrentSession:c})=>!c),{eligible:R,isLoading:H}=ta(),{value:U}=Ie("1542198993"),{punchOutRequireLoginInfo:G}=na(),{state:z}=ia(),{isOpen:K,isLoading:Q}=ra(),{isOpen:q,isLoading:Y}=la(),{isOpen:J,isLoading:X}=da(),{isOpen:Z,isLoading:$}=ca(),{state:ee}=ua(),p=d.useMemo(()=>[{Component:ha,getModalState:()=>G?"show":"hide",isDeferrable:!1},{Component:ga,getModalState:()=>z,isDeferrable:!1},{Component:fa,getModalState:()=>ee,isDeferrable:!1},{Component:ma,getModalState:()=>Q||C?"loading":A===se.APPLE?"hide":K?"show":"hide",isDeferrable:!1},{Component:pa,getModalState:()=>$||C?"loading":A===se.APPLE?"hide":Z?"show":"hide",isDeferrable:!1},{Component:fs,getModalState:()=>l?"hide":t===null?"loading":t===!1?"show":"hide",isDeferrable:!0},{Component:ba,getModalState:()=>j?"hide":F?"show":h?"hide":"loading",isDeferrable:!1},{Component:Sa,getModalState:()=>S!==null?"show":j||h?"hide":"loading",isDeferrable:!1},{Component:xa,getModalState:()=>x!==null?"show":j||h?"hide":"loading",isDeferrable:!1},{Component:Ma,getModalState:()=>M!=null?"show":j||h?"hide":"loading",isDeferrable:!1},{Component:Ca,getModalState:()=>h?W?"show":"hide":"loading",isDeferrable:!1},{Component:Aa,getModalState:()=>Y?"loading":q?"show":"hide",isDeferrable:!1},{Component:ja,getModalState:()=>X?"loading":J?"show":"hide",isDeferrable:!1},{Component:wa,getModalState:()=>"hide",isDeferrable:!1},{Component:va,getModalState:()=>!u?.isTeam()||!u?.isOwnerOfAccount()||!V?"hide":!h||r===null?"loading":r===!1?"show":"hide",isDeferrable:!1},{Component:Oa,getModalState:()=>l?t===null?"loading":t===!1?"show":"hide":"hide",isDeferrable:!0},{Component:ka,getModalState:()=>H?"loading":R&&U?"show":"hide",isDeferrable:!1},{Component:Pa,getModalState:()=>b,isDeferrable:!1}].filter(c=>!(c.isDeferrable&&n)),[w,G,z,M,h,t,r,V,l,j,S,x,u,W,F,b,n,U,R,H,K,Q,Z,$,ee,Y,q,J,X,A,C]);d.useEffect(()=>{if(p[s]&&p[s].getModalState()==="hide"){const c=p.findIndex(ke=>ke.getModalState()!=="hide");o(c)}},[s,p]);const D=p[s],I=D?.getModalState()==="show";if(d.useEffect(()=>{const c=me.getState().activeModals.has(y.BlockingInitialComponent);I!==c&&(I?le.openModal(y.BlockingInitialComponent):le.closeModal(y.BlockingInitialComponent))},[I]),D==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const ae=D.getModalState();if(ae==="loading")return null;ae==="hide"&&o(c=>c+1);const Oe=p[s].Component;return e.jsx(Oe,{onClose:()=>{m(!0),o(c=>c+1)}})}const ge=Be({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),ps=g(()=>f(()=>import("./kpxbkub0pjeyvmfv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])).then(a=>a.CanvasFocusedViewManager)),bs=g(()=>f(()=>import("./nihsqo11e3vw8mbw.js"),__vite__mapDeps([21,1,2,3,4,5,22,23,24,25,26,27,8,28])).then(a=>a.SearchResultsModal));function Ss({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){const r=_a();pe({clientThreadId:a});const{createNewThread:l,onThreadCreated:u,resetThread:n}=Da({clientThreadId:a,setClientThreadId:s});return Ia({resetThreadAction:n,clientThreadId:a}),e.jsxs(be,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(Se,{clientThreadId:a,urlThreadId:o}),e.jsxs(he,{hideNavigation:r,mobileHeaderContent:e.jsx(ya,{clientThreadId:a,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Na,{clientThreadId:a}),mobileHeaderLeftContent:e.jsx(ls,{onNewChatButtonClick:n}),mobileHeaderRightContent:e.jsx(ds,{onNewChatButtonClick:n}),sidebar:e.jsx(hs,{navHeader:a?e.jsx(cs,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:l}):null,children:e.jsx(us,{clientThreadId:a,onNewThread:l})}),threadFlyout:e.jsx(xe,{clientThreadId:a}),children:[e.jsx(Me,{}),e.jsx(we,{clientThreadId:a,onCreate:u,prefetchSearch:t},a),e.jsxs(he.Sidebars,{children:[e.jsx(ps,{clientThreadId:a}),e.jsx(Ce,{clientThreadId:a}),!1]})]}),e.jsx(xs,{clientThreadId:a})]})}function xs({clientThreadId:a}){const s=Fe(),o=s?.includes(oe.SearchTool)&&!s?.includes(oe.SearchToolHoldout),t=La(),{isOpen:r}=Ba();return r&&(!t||!o)&&e.jsx(bs,{clientThreadId:a})}const fe=450;function Ms({children:a,clientThreadId:s,isOpen:o,onClose:t}){const r=Ae();return e.jsxs(Fa,{children:[o&&r&&e.jsx(je,{clientThreadId:s,children:e.jsx(te,{children:e.jsx(de.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(O.div,{className:"h-full w-full bg-token-main-surface-secondary",...v}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(O.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:fe},...v,children:e.jsx(ve,{hideHeader:!0,hideTools:!0})})]})]})})})}),o&&!r&&e.jsx(te,{children:e.jsx(de.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(O.div,{className:"h-full w-full bg-token-main-surface-secondary",...v}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(O.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:fe},...v,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(we,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const Cs=g(()=>f(()=>import("./ccj1v084emjhtah9.js"),__vite__mapDeps([29,1,2,3,4,5]))),As=g(()=>f(()=>import("./cjwsl8eg7deq7swq.js"),__vite__mapDeps([30,1,2,3,4,5,31,32,8,33,34,19,35,36,15,37,38,39,9,40,41,42])).then(a=>a.ImageEditor));function js({clientThreadId:a}){const s=Va();d.useEffect(()=>{L.close()},[a]);let o;return s?.type===ce.ADAVisualization?o=e.jsx(Cs,{clientThreadId:a,visualization:s.visualization}):s?.type===ce.Image&&(o=e.jsx(As,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(Ms,{clientThreadId:a,isOpen:s!=null,onClose:L.close,children:o})}const ws=g(()=>f(()=>import("./kpxbkub0pjeyvmfv.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])).then(a=>a.CanvasFocusedViewManager));function vs(){const{focusedObject:a,clientThreadId:s}=Wa(),[o,t]=d.useState(!1);return e.jsx(Ra,{className:Ve(ne.application,{[ne.withFocusedView]:a}),banner:e.jsx(We,{children:e.jsx(Ha,{setIsMobileAppUpsellBannerVisible:t})}),sidebar:e.jsx(gs,{}),thread:e.jsx(ve,{},s),details:e.jsxs(e.Fragment,{children:[e.jsx(ws,{clientThreadId:s}),!1]}),threadExtendedInfo:e.jsx(xe,{clientThreadId:s}),debugger:e.jsx(Ce,{clientThreadId:s}),name:"application-root",style:{"--screen-height-offset":o?"64px":""}})}function Os({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){return pe({clientThreadId:a}),e.jsx(je,{clientThreadId:a,setClientThreadId:s,prefetchSearch:t,children:e.jsxs(Ua,{children:[e.jsx(Ga,{}),e.jsx(za,{}),e.jsxs(be,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(Se,{clientThreadId:a,urlThreadId:o}),e.jsx(Me,{}),e.jsx(vs,{})]})]})})}var ks={};const Ps=g(()=>f(()=>import("./mcuhwh1k9238hl6t.js"),__vite__mapDeps([43,1,2,3,4,5,44]))),Es=g(()=>f(()=>import("./eyjytbju6rmsbcag.js"),__vite__mapDeps([45,1,2,3,4,5,40,36,15,37,38,8,39,19,9,41,46])));function Rs(a){const{urlThreadId:s,clientThreadId:o,prefetchSearch:t}=a;_s();const r=Re(),l=ie(),[u]=He(),[n,m]=d.useState(()=>s!==void 0?s:o!==void 0?o:re());s!==void 0&&n!==s&&N.getServerThreadId(n)!==s&&m(s);const P=Ka(ie());d.useEffect(()=>{s===void 0&&N.getServerThreadId(n)!==void 0&&m(re())},[s,n,P]);const E=k(B.workspaceId),T=Ae(),{eligible:b,isLoading:w,markAsViewed:S}=Qa(),x=qa();d.useEffect(()=>{(l.pathname==="/"||l.pathname.startsWith("/c/"))&&Ya({namespace:ue.ChatPageLoad})==null&&(Ja({namespace:ue.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),Ue.addTiming("chatgpt.web.chatPage.mounted"))},[]);const M=Xa();d.useEffect(()=>{Ge(!0).then(i=>{i.force_login&&M({authType:"login"}),ze.initializeAndGatherData(i),Za.initializeAndGatherData(i),Ke.initializeAndGatherData(i)})},[M]),d.useEffect(()=>{const i=u.get($a)==="true";r!==i&&Qe.setIsTemporaryChatEnabled(i)},[r,u]),d.useEffect(()=>{l.state?.focusObject&&L.setFocusedObject(l.state.focusObject)},[l.state?.focusObject]),d.useEffect(()=>{!w&&b&&(S(),x())},[b,w,S,x]);const{isOpen:_,isLoading:C}=es(),A=T?Os:Ss;return e.jsx(as.Provider,{value:null,children:e.jsx(ss,{children:e.jsxs(os,{clientThreadId:n,children:[e.jsx(ms,{clientThreadId:n},E),!C&&_&&e.jsx(Es,{clientThreadId:n,setClientThreadId:m}),e.jsx(ts,{}),e.jsx(ns,{}),e.jsx(A,{urlThreadId:s,clientThreadId:n,setClientThreadId:m,prefetchSearch:t}),e.jsx(js,{clientThreadId:n}),e.jsx(is,{clientThreadId:n}),e.jsx(Ts,{}),e.jsx(rs,{})]})})})}function Ts(){const a=me(s=>s.sharingModalThreadId);return a?e.jsx(Ps,{serverThreadId:a}):null}function _s(){qe({queryKey:["pingEdge"],queryFn:()=>Ye.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=ks.GOKU_SERVICE);export{Rs as C,fe as F};
//# sourceMappingURL=fqtexs0gqm3z4gnq.js.map
