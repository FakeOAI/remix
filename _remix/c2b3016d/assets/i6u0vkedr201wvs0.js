import{a8 as m,r as o,aK as g,l as R,j as S,c1 as p,c2 as h}from"./mi4ha5f7fhlqv21j.js";import{u as E}from"./c65m5q6t7ygo4ixn.js";import"./fbiqn8pcnxli6gt8.js";function $(){const{pluginId:t,code:u,state:i,error:r,errorDesc:c}=E(),a=m(),n=o.useRef(!1);o.useEffect(()=>{if(n.current===!0)return;n.current=!0;async function f(){const d=`https://chat.openai.com/aip/${t}/oauth/callback`;try{const e=await S.pluginOauthCallback(t,u,d,i);if(e.success){const s=new URL(p(h.OAUTH_SUCCESS,e.redirect_path),location.origin);s.searchParams.set("oauth_success","true"),a.push(s.pathname+s.search+s.hash)}else a.push(p(h.CUSTOM_ERROR,e.redirect_path,e.error??e.message))}catch{a.push(`/?model=gpt-4-plugins&loginAip=${t}&loginSuccess=false`)}}f()},[t,u,i,a]);const l=g();return o.useEffect(()=>{r&&l.danger(`${r}${c?`: ${c}`:""}`,{duration:5})},[r,c,l]),R.jsx("div",{})}export{$ as default};
//# sourceMappingURL=i6u0vkedr201wvs0.js.map
