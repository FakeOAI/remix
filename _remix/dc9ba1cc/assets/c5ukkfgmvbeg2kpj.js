import{r as a,e as C,j as i,c as x}from"./lklglvrzltpv3f05.js";import{C as E,a as v}from"./hgpx7mvevwf8xzp4.js";import{av as g,fs as d,au as T,dV as M,u as w,bd as h,gf as I,gg as b}from"./cuau6nn9sjz8q54j.js";import{u as _}from"./ozfud5sanqv2gdbp.js";import"./mzmx7garxmhj4428.js";import{gK as H,gL as Z}from"./ebwx7yj0baonheef.js";import{c as W}from"./fh0wmi0z03cdvxo6.js";import"./cy4w1u60daz8y90f.js";import"./dy5wvkz47nxj2h1d.js";import"./lif4od4ycl7gaybt.js";import"./n45otc1227s1uah5.js";import"./k362shm1u5t3zzyg.js";import"./6tiysfziu7tlaxu0.js";import"./dqzga3jv5dl3on3n.js";import"./ckatlww9jl157xyn.js";const D=o=>a.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},a.createElement("path",{d:"M6.5 3.00015C6.77614 3.00015 7 2.77629 7 2.50015C7 2.22401 6.77614 2.00015 6.5 2.00015V3.00015ZM14 9.50015V9.00015H13V9.50015H14ZM9.42819 8.57196L9.78174 8.92551V8.92551L9.42819 8.57196ZM8.40621 9.11891L8.30815 8.62862L8.40621 9.11891ZM6.5 9.50015L6.00971 9.40209C5.97692 9.56602 6.02823 9.73549 6.14645 9.8537C6.26466 9.97192 6.43413 10.0232 6.59806 9.99044L6.5 9.50015ZM6.88124 7.59394L6.39095 7.49588L6.88124 7.59394ZM7.42819 6.57196L7.78174 6.92551L7.42819 6.57196ZM11.5 2.50015L11.1464 2.1466L11.5 2.50015ZM6.5 2.00015H4V3.00015H6.5V2.00015ZM2 4.00015V12.0002H3V4.00015H2ZM4 14.0002H12V13.0002H4V14.0002ZM14 12.0002V9.50015H13V12.0002H14ZM12 14.0002C13.1046 14.0002 14 13.1047 14 12.0002H13C13 12.5524 12.5523 13.0002 12 13.0002V14.0002ZM2 12.0002C2 13.1047 2.89543 14.0002 4 14.0002V13.0002C3.44772 13.0002 3 12.5524 3 12.0002H2ZM4 2.00015C2.89543 2.00015 2 2.89558 2 4.00015H3C3 3.44787 3.44772 3.00015 4 3.00015V2.00015ZM13.1464 4.1466L9.07464 8.21841L9.78174 8.92551L13.8536 4.8537L13.1464 4.1466ZM8.30815 8.62862L6.40194 9.00986L6.59806 9.99044L8.50427 9.6092L8.30815 8.62862ZM6.99029 9.59821L7.37153 7.692L6.39095 7.49588L6.00971 9.40209L6.99029 9.59821ZM7.78174 6.92551L11.8536 2.8537L11.1464 2.1466L7.07464 6.21841L7.78174 6.92551ZM7.37153 7.692C7.42961 7.40161 7.57234 7.13492 7.78174 6.92551L7.07464 6.21841C6.72563 6.56741 6.48775 7.01191 6.39095 7.49588L7.37153 7.692ZM9.07464 8.21841C8.86524 8.42781 8.59854 8.57054 8.30815 8.62862L8.50427 9.6092C8.98824 9.5124 9.43274 9.27452 9.78174 8.92551L9.07464 8.21841ZM13.1464 2.8537C13.5035 3.21073 13.5035 3.78957 13.1464 4.1466L13.8536 4.8537C14.6011 4.10616 14.6011 2.89414 13.8536 2.1466L13.1464 2.8537ZM13.8536 2.1466C13.106 1.39905 11.894 1.39905 11.1464 2.1466L11.8536 2.8537C12.2106 2.49668 12.7894 2.49668 13.1464 2.8537L13.8536 2.1466Z",fill:"currentColor"})),B=o=>a.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...o},a.createElement("path",{d:"M13.5 5.5V4C13.5 3.17157 12.8284 2.5 12 2.5H3C2.17157 2.5 1.5 3.17157 1.5 4V11C1.5 11.8284 2.17157 12.5 3 12.5H5.5M4.5 7.5V5.5H6.5M9.5 13.5H13.5C14.0523 13.5 14.5 13.0523 14.5 12.5V9.5C14.5 8.94772 14.0523 8.5 13.5 8.5H9.5C8.94772 8.5 8.5 8.94772 8.5 9.5V12.5C8.5 13.0523 8.94772 13.5 9.5 13.5Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})),V=W("Dismiss16Regular","16",["m2.59 2.72.06-.07a.5.5 0 0 1 .63-.06l.07.06L8 7.29l4.65-4.64a.5.5 0 0 1 .7.7L8.71 8l4.64 4.65c.18.17.2.44.06.63l-.06.07a.5.5 0 0 1-.63.06l-.07-.06L8 8.71l-4.65 4.64a.5.5 0 0 1-.7-.7L7.29 8 2.65 3.35a.5.5 0 0 1-.06-.63l.06-.07-.06.07Z"]);function p(o,r){return o/r}function L(){const[t,n]=a.useState({titleBarHeight:32,buttonWidth:46,iconSize:16}),{value:s}=w("842034403");return a.useEffect(()=>{if(!s)return;const e=async()=>{const u=await window.getScreenDetails(),c=window.devicePixelRatio/u.currentScreen.devicePixelRatio;n({titleBarHeight:p(32,c),buttonWidth:p(46,c),iconSize:p(16,c)})};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[s]),t}function y({onNewThread:o,onOpenInMainWindow:r,onClose:l}){const t=x(),{titleBarHeight:n,buttonWidth:s,iconSize:e}=L(),u=t.formatMessage({id:"DAjGx7",defaultMessage:"New chat"}),c=t.formatMessage({defaultMessage:"Open in main window",id:"CompanionWindow.openInMainWindow1"}),f=t.formatMessage({id:"/LZfgc",defaultMessage:"Close"});return i.jsxs("div",{className:"draggable no-draggable-children fixed top-0 flex w-full justify-between",style:{height:`${n}px`},children:[i.jsx(h,{label:u,sideOffset:4,side:"bottom",children:i.jsx(m,{onClick:o,"aria-label":u,style:{height:`${n}px`,width:`${s}px`},children:i.jsx(D,{style:{height:`${e}px`,width:`${e}px`}})})}),i.jsx(h,{label:c,sideOffset:4,side:"bottom",className:"ml-auto",children:i.jsx(m,{onClick:r,"aria-label":c,style:{height:`${n}px`,width:`${s}px`},children:i.jsx(B,{style:{height:`${e}px`,width:`${e}px`}})})}),i.jsx(h,{label:f,sideOffset:4,side:"bottom",children:i.jsx(j,{onClick:l,"aria-label":f,style:{height:`${n}px`,width:`${s}px`},children:i.jsx(V,{style:{height:`${e}px`,width:`${e}px`}})})})]})}const m=g.button`flex items-center justify-center cursor-default hover:bg-gray-200 active:bg-gray-100 dark:hover:bg-gray-600 dark:active:bg-gray-700`,j=g.button`flex items-center justify-center cursor-default hover:bg-red-500 hover:text-white active:bg-red-400 active:text-white`;function S({onNewThread:o,onOpenInMainWindow:r,onClose:l,children:t}){const n=a.useRef(null),{titleBarHeight:s}=L(),e=M();return i.jsxs("div",{className:"flex h-full w-full flex-col",style:{paddingTop:e?void 0:`${s}px`,"--screen-titlebar-height":`${s}px`,"--screen-height-override":"calc(100dvh - var(--screen-titlebar-height))","--screen-scrollbar-gutter-override":"stable both-edges","--screen-inline-padding-override":"0px","--screen-inline-padding-offset-override":"0px","--conversation-turn-wrapper-padding-left-override":"1.25rem","--conversation-turn-wrapper-padding-right-override":"1.25rem"},ref:n,children:[i.jsx(y,{onNewThread:o,onOpenInMainWindow:r,onClose:l}),t]})}function O({clientThreadId:o}){const r=d.useStore(),l=C(),t=T();return a.useEffect(()=>{if(!t)return;function n(e){e.key==="Escape"&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&d.hide()}function s(){t&&H()&&d.hide()}return t.document.addEventListener("keydown",n),t.addEventListener("blur",s),()=>{t.document.removeEventListener("keydown",n),t.removeEventListener("blur",s)}},[t]),i.jsx(S,{onNewThread:()=>{r.newThread(!0)},onOpenInMainWindow:()=>{l(`/c/${o}`),r.newThread(!0),d.focusMainWindow()},onClose:()=>{d.hide()},children:i.jsx(E,{clientThreadId:o})})}function Q(){const{value:o}=w("3653083604"),{isOpen:r}=Z(),l=_(e=>e.isVoiceModeActive),t=o&&!r&&!l,{clientThreadId:n}=d.useState(),s=d.useStore();if(a.useEffect(()=>{t&&!n&&s.newThread(!1)},[t,n,s]),!(!t||!n))return i.jsx(v,{features:`${I}=${b.COMPANION}`,children:i.jsx(O,{clientThreadId:n})})}export{Q as DesktopCompanionWindowController};
//# sourceMappingURL=c5ukkfgmvbeg2kpj.js.map
