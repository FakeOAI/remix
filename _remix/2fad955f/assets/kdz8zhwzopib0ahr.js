const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/kaas6otnb5pi6cgi.js","assets/orw3ylzo1pm5yat5.js","assets/fx9bt06582fbthzh.js","assets/root-jo2ifv11.css","assets/d4ylnkykwzpoyycg.js","assets/ohur7ks8s4e2vjcx.js","assets/okkj3my0355ooax9.js","assets/hnxs3lgii7eg8whc.js","assets/e2qww3xa5329768j.js","assets/jmwh1bgit9rhshv6.js"])))=>i.map(i=>d[i]);
import{gh as N,dh as f,di as Zt,ds as C,dq as y,dr as g,ap as $,am as x}from"./orw3ylzo1pm5yat5.js";function Ze(e,t,r){t.split&&(t=t.split("."));for(var n=0,i=t.length,o=e,a,u;n<i&&(u=""+t[n++],!(u==="__proto__"||u==="constructor"||u==="prototype"));)o=o[u]=n===i?r:typeof(a=o[u])==typeof t?a:t[n]*0!==0||~(""+t[n]).indexOf(".")?{}:[]}var Nr=function(e,t){return Object.keys(e).filter(function(r){return t(r,e[r])}).reduce(function(r,n){return r[n]=e[n],r},{})},oe=function(e){N(t,e);function t(r,n){var i=e.call(this,"".concat(r," ").concat(n))||this;return i.field=r,i}return t}(Error);function se(e){return typeof e=="string"}function Ye(e){return typeof e=="number"}function pe(e){return typeof e=="function"}function Lr(e){return e!=null}function z(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()==="object"}var lt="is not a string",ft="is not an object",Rr="is nil";function qr(e){if(!Lr(e))throw new oe("Event",Rr);if(typeof e!="object")throw new oe("Event",ft)}function $r(e){if(!se(e.type))throw new oe(".type",lt)}function zr(e){if(!se(e.event))throw new oe(".event",lt)}function Br(e){if(!z(e.properties))throw new oe(".properties",ft)}function Ur(e){if(!z(e.traits))throw new oe(".traits",ft)}function Kr(e){if(!se(e.messageId))throw new oe(".messageId",lt)}function Vr(e){qr(e),$r(e),Kr(e),e.type==="track"&&(zr(e),Br(e)),["group","identify"].includes(e.type)&&Ur(e)}var Gr=function(){function e(t){var r,n;this.settings=t,this.createMessageId=t.createMessageId,this.onEventMethodCall=(r=t.onEventMethodCall)!==null&&r!==void 0?r:function(){},this.onFinishedEvent=(n=t.onFinishedEvent)!==null&&n!==void 0?n:function(){}}return e}(),Jr=function(){function e(t){this.settings=new Gr(t)}return e.prototype.track=function(t,r,n,i){return this.settings.onEventMethodCall({type:"track",options:n}),this.normalize(f(f({},this.baseEvent()),{event:t,type:"track",properties:r??{},options:f({},n),integrations:f({},i)}))},e.prototype.page=function(t,r,n,i,o){var a;this.settings.onEventMethodCall({type:"page",options:i});var u={type:"page",properties:f({},n),options:f({},i),integrations:f({},o)};return t!==null&&(u.category=t,u.properties=(a=u.properties)!==null&&a!==void 0?a:{},u.properties.category=t),r!==null&&(u.name=r),this.normalize(f(f({},this.baseEvent()),u))},e.prototype.screen=function(t,r,n,i,o){this.settings.onEventMethodCall({type:"screen",options:i});var a={type:"screen",properties:f({},n),options:f({},i),integrations:f({},o)};return t!==null&&(a.category=t),r!==null&&(a.name=r),this.normalize(f(f({},this.baseEvent()),a))},e.prototype.identify=function(t,r,n,i){return this.settings.onEventMethodCall({type:"identify",options:n}),this.normalize(f(f({},this.baseEvent()),{type:"identify",userId:t,traits:r??{},options:f({},n),integrations:i}))},e.prototype.group=function(t,r,n,i){return this.settings.onEventMethodCall({type:"group",options:n}),this.normalize(f(f({},this.baseEvent()),{type:"group",traits:r??{},options:f({},n),integrations:f({},i),groupId:t}))},e.prototype.alias=function(t,r,n,i){this.settings.onEventMethodCall({type:"alias",options:n});var o={userId:t,type:"alias",options:f({},n),integrations:f({},i)};return r!==null&&(o.previousId=r),t===void 0?this.normalize(f(f({},o),this.baseEvent())):this.normalize(f(f({},this.baseEvent()),o))},e.prototype.baseEvent=function(){return{integrations:{},options:{}}},e.prototype.context=function(t){var r,n=["userId","anonymousId","timestamp","messageId"];delete t.integrations;var i=Object.keys(t),o=(r=t.context)!==null&&r!==void 0?r:{},a={};return i.forEach(function(u){u!=="context"&&(n.includes(u)?Ze(a,u,t[u]):Ze(o,u,t[u]))}),[o,a]},e.prototype.normalize=function(t){var r,n,i=Object.keys((r=t.integrations)!==null&&r!==void 0?r:{}).reduce(function(p,v){var h,m;return f(f({},p),(h={},h[v]=!!(!((m=t.integrations)===null||m===void 0)&&m[v]),h))},{});t.options=Nr(t.options||{},function(p,v){return v!==void 0});var o=f(f({},i),(n=t.options)===null||n===void 0?void 0:n.integrations),a=t.options?this.context(t.options):[],u=a[0],s=a[1],c=t.options,l=Zt(t,["options"]),d=f(f(f(f({timestamp:new Date},l),{context:u,integrations:o}),s),{messageId:c.messageId||this.settings.createMessageId()});return this.settings.onFinishedEvent(d),Vr(d),d},e}();function Wr(e,t){return new Promise(function(r,n){var i=setTimeout(function(){n(Error("Promise timed out"))},t);e.then(function(o){return clearTimeout(i),r(o)}).catch(n)})}function Qr(e){return new Promise(function(t){return setTimeout(t,e)})}function Hr(e,t,r){var n=function(){try{return Promise.resolve(t(e))}catch(i){return Promise.reject(i)}};return Qr(r).then(function(){return Wr(n(),1e3)}).catch(function(i){e?.log("warn","Callback Error",{error:i}),e?.stats.increment("callback_error")}).then(function(){return e})}var Yt=function(){var e,t,r=!1,n=new Promise(function(i,o){e=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];r=!0,i.apply(void 0,a)},t=function(){for(var a=[],u=0;u<arguments.length;u++)a[u]=arguments[u];r=!0,o.apply(void 0,a)}});return{resolve:e,reject:t,promise:n,isSettled:function(){return r}}},dt=function(){function e(t){var r;this.callbacks={},this.warned=!1,this.maxListeners=(r=t?.maxListeners)!==null&&r!==void 0?r:10}return e.prototype.warnIfPossibleMemoryLeak=function(t){this.warned||this.maxListeners&&this.callbacks[t].length>this.maxListeners&&(console.warn("Event Emitter: Possible memory leak detected; ".concat(String(t)," has exceeded ").concat(this.maxListeners," listeners.")),this.warned=!0)},e.prototype.on=function(t,r){return this.callbacks[t]?(this.callbacks[t].push(r),this.warnIfPossibleMemoryLeak(t)):this.callbacks[t]=[r],this},e.prototype.once=function(t,r){var n=this,i=function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];n.off(t,i),r.apply(n,o)};return this.on(t,i),this},e.prototype.off=function(t,r){var n,i=(n=this.callbacks[t])!==null&&n!==void 0?n:[],o=i.filter(function(a){return a!==r});return this.callbacks[t]=o,this},e.prototype.emit=function(t){for(var r=this,n,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var a=(n=this.callbacks[t])!==null&&n!==void 0?n:[];return a.forEach(function(u){u.apply(r,i)}),this},e}();function Xr(e){var t=Math.random()+1,r=e.minTimeout,n=r===void 0?500:r,i=e.factor,o=i===void 0?2:i,a=e.attempt,u=e.maxTimeout,s=u===void 0?1/0:u;return Math.min(t*n*Math.pow(o,a),s)}var er="onRemoveFromFuture",vt=function(e){N(t,e);function t(r,n,i){var o=e.call(this)||this;return o.future=[],o.maxAttempts=r,o.queue=n,o.seen=i??{},o}return t.prototype.push=function(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n.map(function(a){var u=r.updateAttempts(a);return u>r.maxAttempts||r.includes(a)?!1:(r.queue.push(a),!0)});return this.queue=this.queue.sort(function(a,u){return r.getAttempts(a)-r.getAttempts(u)}),o},t.prototype.pushWithBackoff=function(r,n){var i=this;if(n===void 0&&(n=0),n==0&&this.getAttempts(r)===0)return this.push(r)[0];var o=this.updateAttempts(r);if(o>this.maxAttempts||this.includes(r))return!1;var a=Xr({attempt:o-1});return n>0&&a<n&&(a=n),setTimeout(function(){i.queue.push(r),i.future=i.future.filter(function(u){return u.id!==r.id}),i.emit(er)},a),this.future.push(r),!0},t.prototype.getAttempts=function(r){var n;return(n=this.seen[r.id])!==null&&n!==void 0?n:0},t.prototype.updateAttempts=function(r){return this.seen[r.id]=this.getAttempts(r)+1,this.getAttempts(r)},t.prototype.includes=function(r){return this.queue.includes(r)||this.future.includes(r)||!!this.queue.find(function(n){return n.id===r.id})||!!this.future.find(function(n){return n.id===r.id})},t.prototype.pop=function(){return this.queue.shift()},Object.defineProperty(t.prototype,"length",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"todo",{get:function(){return this.queue.length+this.future.length},enumerable:!1,configurable:!0}),t}(dt),ne=256,ke=[],Oe;for(;ne--;)ke[ne]=(ne+256).toString(16).substring(1);function ht(){var e=0,t,r="";if(!Oe||ne+16>256){for(Oe=Array(e=256);e--;)Oe[e]=256*Math.random()|0;e=ne=0}for(;e<16;e++)t=Oe[ne+e],e==6?r+=ke[t&15|64]:e==8?r+=ke[t&63|128]:r+=ke[t],e&1&&e>1&&e<11&&(r+="-");return ne++,r}var Zr=function(){function e(){this._logs=[]}return e.prototype.log=function(t,r,n){var i=new Date;this._logs.push({level:t,message:r,time:i,extras:n})},Object.defineProperty(e.prototype,"logs",{get:function(){return this._logs},enumerable:!1,configurable:!0}),e.prototype.flush=function(){if(this.logs.length>1){var t=this._logs.reduce(function(r,n){var i,o,a,u=f(f({},n),{json:JSON.stringify(n.extras,null," "),extras:n.extras});delete u.time;var s=(a=(o=n.time)===null||o===void 0?void 0:o.toISOString())!==null&&a!==void 0?a:"";return r[s]&&(s="".concat(s,"-").concat(Math.random())),f(f({},r),(i={},i[s]=u,i))},{});console.table?console.table(t):console.log(t)}else this.logs.forEach(function(r){var n=r.level,i=r.message,o=r.extras;n==="info"||n==="debug"?console.log(i,o??""):console[n](i,o??"")});this._logs=[]},e}(),Yr=function(e){var t={gauge:"g",counter:"c"};return t[e]},tr=function(){function e(){this.metrics=[]}return e.prototype.increment=function(t,r,n){r===void 0&&(r=1),this.metrics.push({metric:t,value:r,tags:n??[],type:"counter",timestamp:Date.now()})},e.prototype.gauge=function(t,r,n){this.metrics.push({metric:t,value:r,tags:n??[],type:"gauge",timestamp:Date.now()})},e.prototype.flush=function(){var t=this.metrics.map(function(r){return f(f({},r),{tags:r.tags.join(",")})});console.table?console.table(t):console.log(t),this.metrics=[]},e.prototype.serialize=function(){return this.metrics.map(function(t){return{m:t.metric,v:t.value,t:t.tags,k:Yr(t.type),e:t.timestamp}})},e}(),en=function(e){N(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.gauge=function(){},t.prototype.increment=function(){},t.prototype.flush=function(){},t.prototype.serialize=function(){return[]},t}(tr),ae=function(){function e(t){var r,n,i;this.retry=(r=t.retry)!==null&&r!==void 0?r:!0,this.type=(n=t.type)!==null&&n!==void 0?n:"plugin Error",this.reason=(i=t.reason)!==null&&i!==void 0?i:""}return e}(),Fe=function(){function e(t,r,n,i){r===void 0&&(r=ht()),n===void 0&&(n=new en),i===void 0&&(i=new Zr),this.attempts=0,this.event=t,this._id=r,this.logger=i,this.stats=n}return e.system=function(){},e.prototype.isSame=function(t){return t.id===this.id},e.prototype.cancel=function(t){throw t||new ae({reason:"Context Cancel"})},e.prototype.log=function(t,r,n){this.logger.log(t,r,n)},Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.updateEvent=function(t,r){var n;if(t.split(".")[0]==="integrations"){var i=t.split(".")[1];if(((n=this.event.integrations)===null||n===void 0?void 0:n[i])===!1)return this.event}return Ze(this.event,t,r),this.event},e.prototype.failedDelivery=function(){return this._failedDelivery},e.prototype.setFailedDelivery=function(t){this._failedDelivery=t},e.prototype.logs=function(){return this.logger.logs},e.prototype.flush=function(){this.logger.flush(),this.stats.flush()},e.prototype.toJSON=function(){return{id:this._id,event:this.event,logs:this.logger.logs,metrics:this.stats.metrics}},e}();function tn(e,t){var r={};return e.forEach(function(n){var i,o=void 0;{var a=n[t];o=typeof a!="string"?JSON.stringify(a):a}o!==void 0&&(r[o]=C(C([],(i=r[o])!==null&&i!==void 0?i:[],!0),[n],!1))}),r}var rn=function(e){return typeof e=="object"&&e!==null&&"then"in e&&typeof e.then=="function"},nn=function(){var e,t,r=0;return{done:function(){return e},run:function(n){var i=n();return rn(i)&&(++r===1&&(e=new Promise(function(o){return t=o})),i.finally(function(){return--r===0&&t()})),i}}};function on(e){return y(this,void 0,void 0,function(){var t;return g(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e()];case 1:return[2,r.sent()];case 2:return t=r.sent(),[2,Promise.reject(t)];case 3:return[2]}})})}function Se(e,t){e.log("debug","plugin",{plugin:t.name});var r=new Date().getTime(),n=t[e.event.type];if(n===void 0)return Promise.resolve(e);var i=on(function(){return n.apply(t,[e])}).then(function(o){var a=new Date().getTime()-r;return o.stats.gauge("plugin_time",a,["plugin:".concat(t.name)]),o}).catch(function(o){if(o instanceof ae&&o.type==="middleware_cancellation")throw o;return o instanceof ae?(e.log("warn",o.type,{plugin:t.name,error:o}),o):(e.log("error","plugin Error",{plugin:t.name,error:o}),e.stats.increment("plugin_error",1,["plugin:".concat(t.name)]),o)});return i}function an(e,t){return Se(e,t).then(function(r){if(r instanceof Fe)return r;e.log("debug","Context canceled"),e.stats.increment("context_canceled"),e.cancel(r)})}var un=function(e){N(t,e);function t(r){var n=e.call(this)||this;return n.criticalTasks=nn(),n.plugins=[],n.failedInitializations=[],n.flushing=!1,n.queue=r,n.queue.on(er,function(){n.scheduleFlush(0)}),n}return t.prototype.register=function(r,n,i){return y(this,void 0,void 0,function(){var o,a,u=this;return g(this,function(s){switch(s.label){case 0:return this.plugins.push(n),o=function(c){u.failedInitializations.push(n.name),u.emit("initialization_failure",n),console.warn(n.name,c),r.log("warn","Failed to load destination",{plugin:n.name,error:c}),u.plugins=u.plugins.filter(function(l){return l!==n})},n.type==="destination"&&n.name!=="Segment.io"?(n.load(r,i).catch(o),[3,4]):[3,1];case 1:return s.trys.push([1,3,,4]),[4,n.load(r,i)];case 2:return s.sent(),[3,4];case 3:return a=s.sent(),o(a),[3,4];case 4:return[2]}})})},t.prototype.deregister=function(r,n,i){return y(this,void 0,void 0,function(){var o;return g(this,function(a){switch(a.label){case 0:return a.trys.push([0,3,,4]),n.unload?[4,Promise.resolve(n.unload(r,i))]:[3,2];case 1:a.sent(),a.label=2;case 2:return this.plugins=this.plugins.filter(function(u){return u.name!==n.name}),[3,4];case 3:return o=a.sent(),r.log("warn","Failed to unload destination",{plugin:n.name,error:o}),[3,4];case 4:return[2]}})})},t.prototype.dispatch=function(r){return y(this,void 0,void 0,function(){var n;return g(this,function(i){return r.log("debug","Dispatching"),r.stats.increment("message_dispatched"),this.queue.push(r),n=this.subscribeToDelivery(r),this.scheduleFlush(0),[2,n]})})},t.prototype.subscribeToDelivery=function(r){return y(this,void 0,void 0,function(){var n=this;return g(this,function(i){return[2,new Promise(function(o){var a=function(u,s){u.isSame(r)&&(n.off("flush",a),o(u))};n.on("flush",a)})]})})},t.prototype.dispatchSingle=function(r){return y(this,void 0,void 0,function(){var n=this;return g(this,function(i){return r.log("debug","Dispatching"),r.stats.increment("message_dispatched"),this.queue.updateAttempts(r),r.attempts=1,[2,this.deliver(r).catch(function(o){var a=n.enqueuRetry(o,r);return a?n.subscribeToDelivery(r):(r.setFailedDelivery({reason:o}),r)})]})})},t.prototype.isEmpty=function(){return this.queue.length===0},t.prototype.scheduleFlush=function(r){var n=this;r===void 0&&(r=500),!this.flushing&&(this.flushing=!0,setTimeout(function(){n.flush().then(function(){setTimeout(function(){n.flushing=!1,n.queue.length&&n.scheduleFlush(0)},0)})},r))},t.prototype.deliver=function(r){return y(this,void 0,void 0,function(){var n,i,o,a;return g(this,function(u){switch(u.label){case 0:return[4,this.criticalTasks.done()];case 1:u.sent(),n=Date.now(),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.flushOne(r)];case 3:return r=u.sent(),i=Date.now()-n,this.emit("delivery_success",r),r.stats.gauge("delivered",i),r.log("debug","Delivered",r.event),[2,r];case 4:throw o=u.sent(),a=o,r.log("error","Failed to deliver",a),this.emit("delivery_failure",r,a),r.stats.increment("delivery_failed"),o;case 5:return[2]}})})},t.prototype.enqueuRetry=function(r,n){var i=!(r instanceof ae)||r.retry;return i?this.queue.pushWithBackoff(n):!1},t.prototype.flush=function(){return y(this,void 0,void 0,function(){var r,n,i;return g(this,function(o){switch(o.label){case 0:if(this.queue.length===0)return[2,[]];if(r=this.queue.pop(),!r)return[2,[]];r.attempts=this.queue.getAttempts(r),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.deliver(r)];case 2:return r=o.sent(),this.emit("flush",r,!0),[3,4];case 3:return n=o.sent(),i=this.enqueuRetry(n,r),i||(r.setFailedDelivery({reason:n}),this.emit("flush",r,!1)),[2,[]];case 4:return[2,[r]]}})})},t.prototype.isReady=function(){return!0},t.prototype.availableExtensions=function(r){var n=this.plugins.filter(function(v){var h,m,w;if(v.type!=="destination"&&v.name!=="Segment.io")return!0;var b=void 0;return(h=v.alternativeNames)===null||h===void 0||h.forEach(function(S){r[S]!==void 0&&(b=r[S])}),(w=(m=r[v.name])!==null&&m!==void 0?m:b)!==null&&w!==void 0?w:(v.name==="Segment.io"?!0:r.All)!==!1}),i=tn(n,"type"),o=i.before,a=o===void 0?[]:o,u=i.enrichment,s=u===void 0?[]:u,c=i.destination,l=c===void 0?[]:c,d=i.after,p=d===void 0?[]:d;return{before:a,enrichment:s,destinations:l,after:p}},t.prototype.flushOne=function(r){var n,i;return y(this,void 0,void 0,function(){var o,a,u,s,c,l,h,d,p,v,h,m,w,b,S;return g(this,function(E){switch(E.label){case 0:if(!this.isReady())throw new Error("Not ready");r.attempts>1&&this.emit("delivery_retry",r),o=this.availableExtensions((n=r.event.integrations)!==null&&n!==void 0?n:{}),a=o.before,u=o.enrichment,s=0,c=a,E.label=1;case 1:return s<c.length?(l=c[s],[4,an(r,l)]):[3,4];case 2:h=E.sent(),h instanceof Fe&&(r=h),this.emit("message_enriched",r,l),E.label=3;case 3:return s++,[3,1];case 4:d=0,p=u,E.label=5;case 5:return d<p.length?(v=p[d],[4,Se(r,v)]):[3,8];case 6:h=E.sent(),h instanceof Fe&&(r=h),this.emit("message_enriched",r,v),E.label=7;case 7:return d++,[3,5];case 8:return m=this.availableExtensions((i=r.event.integrations)!==null&&i!==void 0?i:{}),w=m.destinations,b=m.after,[4,new Promise(function(I,P){setTimeout(function(){var M=w.map(function(R){return Se(r,R)});Promise.all(M).then(I).catch(P)},0)})];case 9:return E.sent(),r.stats.increment("message_delivered"),this.emit("message_delivered",r),S=b.map(function(I){return Se(r,I)}),[4,Promise.all(S)];case 10:return E.sent(),[2,r]}})})},t}(dt),sn=function(e,t){var r=Date.now()-e;return Math.max((t??300)-r,0)};function cn(e,t,r,n){return y(this,void 0,void 0,function(){var i,o;return g(this,function(a){switch(a.label){case 0:return r.emit("dispatch_start",e),i=Date.now(),t.isEmpty()?[4,t.dispatchSingle(e)]:[3,2];case 1:return o=a.sent(),[3,4];case 2:return[4,t.dispatch(e)];case 3:o=a.sent(),a.label=4;case 4:return n?.callback?[4,Hr(o,n.callback,sn(i,n.timeout))]:[3,6];case 5:o=a.sent(),a.label=6;case 6:return n?.debug&&o.flush(),[2,o]}})})}function rr(e,t,r,n){var i,o=[e,t,r,n],a=z(e)?e.event:e;if(!a||!se(a))throw new Error("Event missing");var u=z(e)?(i=e.properties)!==null&&i!==void 0?i:{}:z(t)?t:{},s={};pe(r)||(s=r??{}),z(e)&&!pe(t)&&(s=t??{});var c=o.find(pe);return[a,u,s,c]}function et(e,t,r,n,i){var o,a,u=null,s=null,c=[e,t,r,n,i],l=c.filter(se);l[0]!==void 0&&l[1]!==void 0&&(u=l[0],s=l[1]),l.length===1&&(u=null,s=l[0]);var d=c.find(pe),p=c.filter(function(m){return s===null?z(m):z(m)||m===null}),v=(o=p[0])!==null&&o!==void 0?o:{},h=(a=p[1])!==null&&a!==void 0?a:{};return[u,s,v,h,d]}var tt=function(e){return function(){for(var t,r,n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];for(var a={},u=["callback","options","traits","id"],s=0,c=i;s<c.length;s++){var l=c[s],d=u.pop();if(d==="id"){if(se(l)||Ye(l)){a.id=l.toString();continue}if(l==null)continue;d=u.pop()}if((d==="traits"||d==="options")&&(l==null||z(l))&&(a[d]=l),pe(l)){a.callback=l;break}}return[(t=a.id)!==null&&t!==void 0?t:e.id(),(r=a.traits)!==null&&r!==void 0?r:{},(n=a.options)!==null&&n!==void 0?n:{},a.callback]}};function nr(e,t,r,n){Ye(e)&&(e=e.toString()),Ye(t)&&(t=t.toString());var i=[e,t,r,n],o=i.filter(se),a=o[0],u=a===void 0?e:a,s=o[1],c=s===void 0?null:s,l=i.filter(z)[0],d=l===void 0?{}:l,p=i.find(pe);return[u,c,d,p]}function pt(){return typeof window<"u"}function _o(){return!pt()}function ln(){return pt()?window.navigator.onLine:!0}function Ee(){return!ln()}function fn(e,t){return t=t||{},new Promise(function(r,n){var i=new XMLHttpRequest,o=[],a=[],u={},s=function(){return{ok:(i.status/100|0)==2,statusText:i.statusText,status:i.status,url:i.responseURL,text:function(){return Promise.resolve(i.responseText)},json:function(){return Promise.resolve(i.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([i.response]))},clone:s,headers:{keys:function(){return o},entries:function(){return a},get:function(l){return u[l.toLowerCase()]},has:function(l){return l.toLowerCase()in u}}}};for(var c in i.open(t.method||"get",e,!0),i.onload=function(){i.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(l,d,p){o.push(d=d.toLowerCase()),a.push([d,p]),u[d]=u[d]?u[d]+","+p:p}),r(s())},i.onerror=n,i.withCredentials=t.credentials=="include",t.headers)i.setRequestHeader(c,t.headers[c]);i.send(t.body||null)})}var yt=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:null},je=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=yt();return(r&&r.fetch||fn).apply(void 0,e)},Ne="1.73.0",ir="api.segment.io/v1",dn=function(e,t,r){var n=t.reduce(function(i,o){var a=o.split(":"),u=a[0],s=a[1];return i[u]=s,i},{});return{type:"Counter",metric:e,value:1,tags:f(f({},n),{library:"analytics.js",library_version:"npm:next-".concat(Ne)})}};function Ge(e){console.error("Error sending segment performance metrics",e)}var vn=function(){function e(t){var r=this,n,i,o,a,u;if(this.host=(n=t?.host)!==null&&n!==void 0?n:ir,this.sampleRate=(i=t?.sampleRate)!==null&&i!==void 0?i:1,this.flushTimer=(o=t?.flushTimer)!==null&&o!==void 0?o:30*1e3,this.maxQueueSize=(a=t?.maxQueueSize)!==null&&a!==void 0?a:20,this.protocol=(u=t?.protocol)!==null&&u!==void 0?u:"https",this.queue=[],this.sampleRate>0){var s=!1,c=function(){s||(s=!0,r.flush().catch(Ge),s=!1,setTimeout(c,r.flushTimer))};c()}}return e.prototype.increment=function(t,r){if(t.includes("analytics_js.")&&r.length!==0&&!(Math.random()>this.sampleRate)&&!(this.queue.length>=this.maxQueueSize)){var n=dn(t,r);this.queue.push(n),t.includes("error")&&this.flush().catch(Ge)}},e.prototype.flush=function(){return y(this,void 0,void 0,function(){var t=this;return g(this,function(r){switch(r.label){case 0:return this.queue.length<=0?[2]:[4,this.send().catch(function(n){Ge(n),t.sampleRate=0})];case 1:return r.sent(),[2]}})})},e.prototype.send=function(){return y(this,void 0,void 0,function(){var t,r,n;return g(this,function(i){return t={series:this.queue},this.queue=[],r={"Content-Type":"text/plain"},n="".concat(this.protocol,"://").concat(this.host,"/m"),[2,je(n,{headers:r,body:JSON.stringify(t),method:"POST"})]})})},e}(),xe,or=function(e){N(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.initRemoteMetrics=function(r){xe=new vn(r)},t.prototype.increment=function(r,n,i){e.prototype.increment.call(this,r,n,i),xe?.increment(r,i??[])},t}(tr),V=function(e){N(t,e);function t(r,n){return e.call(this,r,n,new or)||this}return t.system=function(){return new this({type:"track",event:"system"})},t}(Fe),ar="bpc",ur=function(e,t,r,n,i,o){return{__t:ar,c:t,p:n,u:e,s:r,t:i,r:o}},hn=Object.keys(ur("","","","","",""));function pn(e){if(!z(e)||e.__t!==ar)return!1;for(var t in e)if(!hn.includes(t))return!1;return!0}var yn=function(e,t){return e.indexOf("?")>-1?e:e+t},gn=function(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)},mn=function(e){try{return new URL(e).pathname}catch{return e[0]==="/"?e:"/"+e}},sr=function(e){var t=e.c,r=e.p,n=e.s,i=e.u,o=e.r,a=e.t,u=t?mn(t):r,s=t?yn(t,n):gn(i);return{path:u,referrer:o,search:n,title:a,url:s}},cr=function(){var e=document.querySelector("link[rel='canonical']");return ur(location.href,e&&e.getAttribute("href")||void 0,location.search,location.pathname,document.title,document.referrer)},bn=function(){return sr(cr())};function _n(e,t){return Object.assign.apply(Object,C([{}],t.map(function(r){var n;if(e&&Object.prototype.hasOwnProperty.call(e,r))return n={},n[r]=e[r],n}),!1))}var fe=function(e,t){t===void 0&&(t=bn());var r=e.context,n;e.type==="page"&&(n=e.properties&&_n(e.properties,Object.keys(t)),e.properties=f(f(f({},t),e.properties),e.name?{name:e.name}:{})),r.page=f(f(f({},t),n),r.page)},lr=function(e){N(t,e);function t(r){var n=e.call(this,{createMessageId:function(){return"ajs-next-".concat(Date.now(),"-").concat(ht())},onEventMethodCall:function(i){var o=i.options;n.maybeUpdateAnonId(o)},onFinishedEvent:function(i){return n.addIdentity(i),i}})||this;return n.user=r,n}return t.prototype.maybeUpdateAnonId=function(r){r?.anonymousId&&this.user.anonymousId(r.anonymousId)},t.prototype.addIdentity=function(r){this.user.id()&&(r.userId=this.user.id()),this.user.anonymousId()&&(r.anonymousId=this.user.anonymousId())},t.prototype.track=function(r,n,i,o,a){var u=e.prototype.track.call(this,r,n,i,o);return fe(u,a),u},t.prototype.page=function(r,n,i,o,a,u){var s=e.prototype.page.call(this,r,n,i,o,a);return fe(s,u),s},t.prototype.screen=function(r,n,i,o,a,u){var s=e.prototype.screen.call(this,r,n,i,o,a);return fe(s,u),s},t.prototype.identify=function(r,n,i,o,a){var u=e.prototype.identify.call(this,r,n,i,o);return fe(u,a),u},t.prototype.group=function(r,n,i,o,a){var u=e.prototype.group.call(this,r,n,i,o);return fe(u,a),u},t.prototype.alias=function(r,n,i,o,a){var u=e.prototype.alias.call(this,r,n,i,o);return fe(u,a),u},t}(Jr),fr=function(e){return"addMiddleware"in e&&e.type==="destination"},G={getItem:function(){},setItem:function(){},removeItem:function(){}};try{G=pt()&&window.localStorage?window.localStorage:G}catch(e){console.warn("Unable to access localStorage",e)}function dr(e){var t=G.getItem(e);return(t?JSON.parse(t):[]).map(function(r){return new V(r.event,r.id)})}function wn(e,t){var r=dr(e),n=C(C([],t,!0),r,!0),i=n.reduce(function(o,a){var u;return f(f({},o),(u={},u[a.id]=a,u))},{});G.setItem(e,JSON.stringify(Object.values(i)))}function vr(e){var t=G.getItem(e);return t?JSON.parse(t):{}}function Sn(e,t){var r=vr(e);G.setItem(e,JSON.stringify(f(f({},r),t)))}function Bt(e){G.removeItem(e)}var En=function(){return new Date().getTime()};function rt(e,t,r){r===void 0&&(r=0);var n=50,i="persisted-queue:v1:".concat(e,":lock"),o=function(c){return new Date().getTime()>c},a=G.getItem(i),u=a?JSON.parse(a):null,s=u===null||o(u);if(s){G.setItem(i,JSON.stringify(En()+n)),t(),G.removeItem(i);return}!s&&r<3?setTimeout(function(){rt(e,t,r+1)},n):console.error("Unable to retrieve lock")}var gt=function(e){N(t,e);function t(r,n){var i=e.call(this,r,[])||this,o="persisted-queue:v1:".concat(n,":items"),a="persisted-queue:v1:".concat(n,":seen"),u=[],s={};return rt(n,function(){try{u=dr(o),s=vr(a),Bt(o),Bt(a),i.queue=C(C([],u,!0),i.queue,!0),i.seen=f(f({},s),i.seen)}catch(c){console.error(c)}}),window.addEventListener("pagehide",function(){if(i.todo>0){var c=C(C([],i.queue,!0),i.future,!0);try{rt(n,function(){wn(o,c),Sn(a,i.seen)})}catch(l){console.error(l)}}}),i}return t}(vt),In=function(e){N(t,e);function t(r){return e.call(this,typeof r=="string"?new gt(4,r):r)||this}return t.prototype.flush=function(){return y(this,void 0,void 0,function(){return g(this,function(r){return Ee()?[2,[]]:[2,e.prototype.flush.call(this)]})})},t}(un);function mt(e){for(var t=e.constructor.prototype,r=0,n=Object.getOwnPropertyNames(t);r<n.length;r++){var i=n[r];if(i!=="constructor"){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);o&&typeof o.value=="function"&&(e[i]=e[i].bind(e))}}return e}/*! js-cookie v3.0.1 | MIT */function Me(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}var Pn={read:function(e){return e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function nt(e,t){function r(i,o,a){if(!(typeof document>"u")){a=Me({},t,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var s in a)a[s]&&(u+="; "+s,a[s]!==!0&&(u+="="+a[s].split(";")[0]));return document.cookie=i+"="+e.write(o,i)+u}}function n(i){if(!(typeof document>"u"||arguments.length&&!i)){for(var o=document.cookie?document.cookie.split("; "):[],a={},u=0;u<o.length;u++){var s=o[u].split("="),c=s.slice(1).join("=");try{var l=decodeURIComponent(s[0]);if(a[l]=e.read(c,l),i===l)break}catch{}}return i?a[i]:a}}return Object.create({set:r,get:n,remove:function(i,o){r(i,"",Me({},o,{expires:-1}))},withAttributes:function(i){return nt(this.converter,Me({},this.attributes,i))},withConverter:function(i){return nt(Me({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(e)}})}var Q=nt(Pn,{path:"/"});function An(e){var t=e.hostname,r=t.split("."),n=r[r.length-1],i=[];if(r.length===4&&parseInt(n,10)>0||r.length<=1)return i;for(var o=r.length-2;o>=0;--o)i.push(r.slice(o).join("."));return i}function On(e){try{return new URL(e)}catch{return}}function hr(e){var t=On(e);if(t)for(var r=An(t),n=0;n<r.length;++n){var i="__tld__",o=r[n],a={domain:"."+o};try{if(Q.set(i,"1",a),Q.get(i))return Q.remove(i,a),o}catch{return}}}var xn=365,pr=function(){function e(t){t===void 0&&(t=e.defaults),this.options=f(f({},e.defaults),t)}return Object.defineProperty(e,"defaults",{get:function(){return{maxage:xn,domain:hr(window.location.href),path:"/",sameSite:"Lax"}},enumerable:!1,configurable:!0}),e.prototype.opts=function(){return{sameSite:this.options.sameSite,expires:this.options.maxage,domain:this.options.domain,path:this.options.path,secure:this.options.secure}},e.prototype.get=function(t){var r;try{var n=Q.get(t);if(n==null)return null;try{return(r=JSON.parse(n))!==null&&r!==void 0?r:null}catch{return n??null}}catch{return null}},e.prototype.set=function(t,r){typeof r=="string"?Q.set(t,r,this.opts()):r===null?Q.remove(t,this.opts()):Q.set(t,JSON.stringify(r),this.opts())},e.prototype.remove=function(t){return Q.remove(t,this.opts())},e}(),Mn=function(){function e(){}return e.prototype.localStorageWarning=function(t,r){console.warn("Unable to access ".concat(t,", localStorage may be ").concat(r))},e.prototype.get=function(t){var r;try{var n=localStorage.getItem(t);if(n===null)return null;try{return(r=JSON.parse(n))!==null&&r!==void 0?r:null}catch{return n??null}}catch{return this.localStorageWarning(t,"unavailable"),null}},e.prototype.set=function(t,r){try{localStorage.setItem(t,JSON.stringify(r))}catch{this.localStorageWarning(t,"full")}},e.prototype.remove=function(t){try{return localStorage.removeItem(t)}catch{this.localStorageWarning(t,"unavailable")}},e}(),bt=function(){function e(){this.cache={}}return e.prototype.get=function(t){var r;return(r=this.cache[t])!==null&&r!==void 0?r:null},e.prototype.set=function(t,r){this.cache[t]=r},e.prototype.remove=function(t){delete this.cache[t]},e}(),T={Cookie:"cookie",LocalStorage:"localStorage",Memory:"memory"};function yr(e){return e&&e.stores&&Array.isArray(e.stores)&&e.stores.every(function(t){return Object.values(T).includes(t)})}function Cn(e){return typeof e=="object"&&e.name!==void 0}var Je=function(e,t,r,n){console.warn("".concat(e.constructor.name,": Can't ").concat(t,' key "').concat(r,'" | Err: ').concat(n))},Y=function(){function e(t){this.stores=t}return e.prototype.get=function(t){for(var r=null,n=0,i=this.stores;n<i.length;n++){var o=i[n];try{if(r=o.get(t),r!=null)return r}catch(a){Je(o,"get",t,a)}}return null},e.prototype.set=function(t,r){this.stores.forEach(function(n){try{n.set(t,r)}catch(i){Je(n,"set",t,i)}})},e.prototype.clear=function(t){this.stores.forEach(function(r){try{r.remove(t)}catch(n){Je(r,"remove",t,n)}})},e.prototype.getAndSync=function(t){var r=this.get(t),n=typeof r=="number"?r.toString():r;return this.set(t,n),n},e}();function it(e){var t=e.map(function(r){var n,i;switch(Cn(r)?(n=r.name,i=r.settings):n=r,n){case T.Cookie:return new pr(i);case T.LocalStorage:return new Mn;case T.Memory:return new bt;default:throw new Error("Unknown Store Type: ".concat(r))}});return t}function gr(e,t){return e.map(function(r){return t&&r===T.Cookie?{name:r,settings:t}:r})}var re={persist:!0,cookie:{key:"ajs_user_id",oldKey:"ajs_user"},localStorage:{key:"ajs_user_traits"}},_t=function(){function e(t,r){t===void 0&&(t=re);var n=this,i,o,a,u;this.options={},this.id=function(c){if(n.options.disable)return null;var l=n.identityStore.getAndSync(n.idKey);if(c!==void 0){n.identityStore.set(n.idKey,c);var d=c!==l&&l!==null&&c!==null;d&&n.anonymousId(null)}var p=n.identityStore.getAndSync(n.idKey);if(p)return p;var v=n.legacyUserStore.get(re.cookie.oldKey);return v?typeof v=="object"?v.id:v:null},this.anonymousId=function(c){var l,d;if(n.options.disable)return null;if(c===void 0){var p=(l=n.identityStore.getAndSync(n.anonKey))!==null&&l!==void 0?l:(d=n.legacySIO())===null||d===void 0?void 0:d[0];if(p)return p}return c===null?(n.identityStore.set(n.anonKey,null),n.identityStore.getAndSync(n.anonKey)):(n.identityStore.set(n.anonKey,c??ht()),n.identityStore.getAndSync(n.anonKey))},this.traits=function(c){var l;if(!n.options.disable)return c===null&&(c={}),c&&n.traitsStore.set(n.traitsKey,c??{}),(l=n.traitsStore.get(n.traitsKey))!==null&&l!==void 0?l:{}},this.options=f(f({},re),t),this.cookieOptions=r,this.idKey=(o=(i=t.cookie)===null||i===void 0?void 0:i.key)!==null&&o!==void 0?o:re.cookie.key,this.traitsKey=(u=(a=t.localStorage)===null||a===void 0?void 0:a.key)!==null&&u!==void 0?u:re.localStorage.key,this.anonKey="ajs_anonymous_id",this.identityStore=this.createStorage(this.options,r),this.legacyUserStore=this.createStorage(this.options,r,function(c){return c===T.Cookie}),this.traitsStore=this.createStorage(this.options,r,function(c){return c!==T.Cookie});var s=this.legacyUserStore.get(re.cookie.oldKey);s&&typeof s=="object"&&(s.id&&this.id(s.id),s.traits&&this.traits(s.traits)),mt(this)}return e.prototype.legacySIO=function(){var t=this.legacyUserStore.get("_sio");if(!t)return null;var r=t.split("----"),n=r[0],i=r[1];return[n,i]},e.prototype.identify=function(t,r){if(!this.options.disable){r=r??{};var n=this.id();(n===null||n===t)&&(r=f(f({},this.traits()),r)),t&&this.id(t),this.traits(r)}},e.prototype.logout=function(){this.anonymousId(null),this.id(null),this.traits({})},e.prototype.reset=function(){this.logout(),this.identityStore.clear(this.idKey),this.identityStore.clear(this.anonKey),this.traitsStore.clear(this.traitsKey)},e.prototype.load=function(){return new e(this.options,this.cookieOptions)},e.prototype.save=function(){return!0},e.prototype.createStorage=function(t,r,n){var i=[T.LocalStorage,T.Cookie,T.Memory];return t.disable?new Y([]):t.persist?(t.storage!==void 0&&t.storage!==null&&yr(t.storage)&&(i=t.storage.stores),t.localStorageFallbackDisabled&&(i=i.filter(function(o){return o!==T.LocalStorage})),n&&(i=i.filter(n)),new Y(it(gr(i,r)))):new Y([new bt])},e.defaults=re,e}(),Ut={persist:!0,cookie:{key:"ajs_group_id"},localStorage:{key:"ajs_group_properties"}},mr=function(e){N(t,e);function t(r,n){r===void 0&&(r=Ut);var i=e.call(this,f(f({},Ut),r),n)||this;return i.anonymousId=function(o){},mt(i),i}return t}(_t),wt="analytics";function St(){return window[wt]}function kn(e){wt=e}function Dn(e){window[wt]=e}var Fn=function(e){return typeof e=="object"&&e!==null&&"then"in e&&typeof e.then=="function"},br=function(e,t,r){r.getAndRemove(e).forEach(function(n){Le(t,n).catch(console.error)})},Tn=function(e,t){return y(void 0,void 0,void 0,function(){var r,n,i;return g(this,function(o){switch(o.label){case 0:r=0,n=t.getAndRemove("addSourceMiddleware"),o.label=1;case 1:return r<n.length?(i=n[r],[4,Le(e,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},jn=function(e,t){return y(void 0,void 0,void 0,function(){var r,n,i;return g(this,function(o){switch(o.label){case 0:r=0,n=t.getAndRemove("register"),o.label=1;case 1:return r<n.length?(i=n[r],[4,Le(e,i).catch(console.error)]):[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},Nn=br.bind(void 0,"on"),Ln=br.bind(void 0,"setAnonymousId"),Rn=function(e,t){Object.keys(t.calls).forEach(function(r){t.getAndRemove(r).forEach(function(n){setTimeout(function(){Le(e,n).catch(console.error)},0)})})},de=function(e){if(_r(e)){var t=e.pop();return sr(t)}},_r=function(e){var t=e[e.length-1];return pn(t)},ot=function(){function e(t,r,n,i){n===void 0&&(n=function(){}),i===void 0&&(i=console.error),this.method=t,this.resolve=n,this.reject=i,this.called=!1,this.args=r}return e}(),qn=function(){function e(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this._callMap={},this.add.apply(this,t)}return Object.defineProperty(e.prototype,"calls",{get:function(){return this._pushSnippetWindowBuffer(),this._callMap},set:function(t){this._callMap=t},enumerable:!1,configurable:!0}),e.prototype.get=function(t){var r;return(r=this.calls[t])!==null&&r!==void 0?r:[]},e.prototype.getAndRemove=function(t){var r=this.get(t);return this.calls[t]=[],r},e.prototype.add=function(){for(var t=this,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r.forEach(function(i){var o=["track","screen","alias","group","page","identify"];o.includes(i.method)&&!_r(i.args)&&(i.args=C(C([],i.args,!0),[cr()],!1)),t.calls[i.method]?t.calls[i.method].push(i):t.calls[i.method]=[i]})},e.prototype.clear=function(){this._pushSnippetWindowBuffer(),this.calls={}},e.prototype.toArray=function(){var t;return(t=[]).concat.apply(t,Object.values(this.calls))},e.prototype._pushSnippetWindowBuffer=function(){},e}();function Le(e,t){return y(this,void 0,void 0,function(){var r,n;return g(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),t.called?[2,void 0]:(t.called=!0,r=e[t.method].apply(e,t.args),Fn(r)?[4,r]:[3,2]);case 1:i.sent(),i.label=2;case 2:return t.resolve(r),[3,4];case 3:return n=i.sent(),t.reject(n),[3,4];case 4:return[2]}})})}var $n=function(){function e(t){var r=this;this.trackSubmit=this._createMethod("trackSubmit"),this.trackClick=this._createMethod("trackClick"),this.trackLink=this._createMethod("trackLink"),this.pageView=this._createMethod("pageview"),this.identify=this._createMethod("identify"),this.reset=this._createMethod("reset"),this.group=this._createMethod("group"),this.track=this._createMethod("track"),this.ready=this._createMethod("ready"),this.alias=this._createMethod("alias"),this.debug=this._createChainableMethod("debug"),this.page=this._createMethod("page"),this.once=this._createChainableMethod("once"),this.off=this._createChainableMethod("off"),this.on=this._createChainableMethod("on"),this.addSourceMiddleware=this._createMethod("addSourceMiddleware"),this.setAnonymousId=this._createMethod("setAnonymousId"),this.addDestinationMiddleware=this._createMethod("addDestinationMiddleware"),this.screen=this._createMethod("screen"),this.register=this._createMethod("register"),this.deregister=this._createMethod("deregister"),this.user=this._createMethod("user"),this.VERSION=Ne,this._preInitBuffer=new qn,this._promise=t(this._preInitBuffer),this._promise.then(function(n){var i=n[0],o=n[1];r.instance=i,r.ctx=o}).catch(function(){})}return e.prototype.then=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).then.apply(t,r)},e.prototype.catch=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).catch.apply(t,r)},e.prototype.finally=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return(t=this._promise).finally.apply(t,r)},e.prototype._createMethod=function(t){var r=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(r.instance){var a=(n=r.instance)[t].apply(n,i);return Promise.resolve(a)}return new Promise(function(u,s){r._preInitBuffer.add(new ot(t,i,u,s))})}},e.prototype._createChainableMethod=function(t){var r=this;return function(){for(var n,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return r.instance?((n=r.instance)[t].apply(n,i),r):(r._preInitBuffer.add(new ot(t,i)),r)}},e}(),X="This is being deprecated and will be not be available in future releases of Analytics JS",We=yt(),Qe=We?.analytics;function zn(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=t?10:1,i=r?new vt(n,[]):new gt(n,e);return new In(i)}var Bn=function(){function e(t){var r;this.timeout=300,this.writeKey=t.writeKey,this.cdnSettings=(r=t.cdnSettings)!==null&&r!==void 0?r:{integrations:{},edgeFunction:{}}}return e}();function K(){console.warn(X)}var Et=function(e){N(t,e);function t(r,n,i,o,a){var u=this,s,c;u=e.call(this)||this,u._debug=!1,u.initialized=!1,u.user=function(){return u._user},u.init=u.initialize.bind(u),u.log=K,u.addIntegrationMiddleware=K,u.listeners=K,u.addEventListener=K,u.removeAllListeners=K,u.removeListener=K,u.removeEventListener=K,u.hasListeners=K,u.add=K,u.addIntegration=K;var l=n?.cookie,d=(s=n?.disableClientPersistence)!==null&&s!==void 0?s:!1;u.settings=new Bn(r),u.queue=i??zn("".concat(r.writeKey,":event-queue"),n?.retryQueue,d);var p=n?.storage;return u._universalStorage=u.createStore(d,p,l),u._user=o??new _t(f({persist:!d,storage:n?.storage},n?.user),l).load(),u._group=a??new mr(f({persist:!d,storage:n?.storage},n?.group),l).load(),u.eventFactory=new lr(u._user),u.integrations=(c=n?.integrations)!==null&&c!==void 0?c:{},u.options=n??{},mt(u),u}return t.prototype.createStore=function(r,n,i){return r?new Y([new bt]):n&&yr(n)?new Y(it(gr(n.stores,i))):new Y(it([T.LocalStorage,{name:T.Cookie,settings:i},T.Memory]))},Object.defineProperty(t.prototype,"storage",{get:function(){return this._universalStorage},enumerable:!1,configurable:!0}),t.prototype.track=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o,a,u,s,c,l,d=this;return g(this,function(p){return i=de(r),o=rr.apply(void 0,r),a=o[0],u=o[1],s=o[2],c=o[3],l=this.eventFactory.track(a,u,s,this.integrations,i),[2,this._dispatch(l,c).then(function(v){return d.emit("track",a,v.event.properties,v.event.options),v})]})})},t.prototype.page=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o,a,u,s,c,l,d,p=this;return g(this,function(v){return i=de(r),o=et.apply(void 0,r),a=o[0],u=o[1],s=o[2],c=o[3],l=o[4],d=this.eventFactory.page(a,u,s,c,this.integrations,i),[2,this._dispatch(d,l).then(function(h){return p.emit("page",a,u,h.event.properties,h.event.options),h})]})})},t.prototype.identify=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o,a,u,s,c,l,d=this;return g(this,function(p){return i=de(r),o=tt(this._user).apply(void 0,r),a=o[0],u=o[1],s=o[2],c=o[3],this._user.identify(a,u),l=this.eventFactory.identify(this._user.id(),this._user.traits(),s,this.integrations,i),[2,this._dispatch(l,c).then(function(v){return d.emit("identify",v.event.userId,v.event.traits,v.event.options),v})]})})},t.prototype.group=function(){for(var r=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=de(n);if(n.length===0)return this._group;var a=tt(this._group).apply(void 0,n),u=a[0],s=a[1],c=a[2],l=a[3];this._group.identify(u,s);var d=this._group.id(),p=this._group.traits(),v=this.eventFactory.group(d,p,c,this.integrations,o);return this._dispatch(v,l).then(function(h){return r.emit("group",h.event.groupId,h.event.traits,h.event.options),h})},t.prototype.alias=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o,a,u,s,c,l,d=this;return g(this,function(p){return i=de(r),o=nr.apply(void 0,r),a=o[0],u=o[1],s=o[2],c=o[3],l=this.eventFactory.alias(a,u,s,this.integrations,i),[2,this._dispatch(l,c).then(function(v){return d.emit("alias",a,u,v.event.options),v})]})})},t.prototype.screen=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o,a,u,s,c,l,d,p=this;return g(this,function(v){return i=de(r),o=et.apply(void 0,r),a=o[0],u=o[1],s=o[2],c=o[3],l=o[4],d=this.eventFactory.screen(a,u,s,c,this.integrations,i),[2,this._dispatch(d,l).then(function(h){return p.emit("screen",a,u,h.event.properties,h.event.options),h})]})})},t.prototype.trackClick=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o;return g(this,function(a){switch(a.label){case 0:return[4,$(()=>import("./kaas6otnb5pi6cgi.js"),__vite__mapDeps([0,1,2,3]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,C([this],r,!1))]}})})},t.prototype.trackLink=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o;return g(this,function(a){switch(a.label){case 0:return[4,$(()=>import("./kaas6otnb5pi6cgi.js"),__vite__mapDeps([0,1,2,3]))];case 1:return i=a.sent(),[2,(o=i.link).call.apply(o,C([this],r,!1))]}})})},t.prototype.trackSubmit=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o;return g(this,function(a){switch(a.label){case 0:return[4,$(()=>import("./kaas6otnb5pi6cgi.js"),__vite__mapDeps([0,1,2,3]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,C([this],r,!1))]}})})},t.prototype.trackForm=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o;return g(this,function(a){switch(a.label){case 0:return[4,$(()=>import("./kaas6otnb5pi6cgi.js"),__vite__mapDeps([0,1,2,3]))];case 1:return i=a.sent(),[2,(o=i.form).call.apply(o,C([this],r,!1))]}})})},t.prototype.register=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o,a=this;return g(this,function(u){switch(u.label){case 0:return i=V.system(),o=r.map(function(s){return a.queue.register(i,s,a)}),[4,Promise.all(o)];case 1:return u.sent(),[2,i]}})})},t.prototype.deregister=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return y(this,void 0,void 0,function(){var i,o,a=this;return g(this,function(u){switch(u.label){case 0:return i=V.system(),o=r.map(function(s){var c=a.queue.plugins.find(function(l){return l.name===s});if(c)return a.queue.deregister(i,c,a);i.log("warn","plugin ".concat(s," not found"))}),[4,Promise.all(o)];case 1:return u.sent(),[2,i]}})})},t.prototype.debug=function(r){return r===!1&&localStorage.getItem("debug")&&localStorage.removeItem("debug"),this._debug=r,this},t.prototype.reset=function(){this._user.reset(),this._group.reset(),this.emit("reset")},t.prototype.timeout=function(r){this.settings.timeout=r},t.prototype._dispatch=function(r,n){return y(this,void 0,void 0,function(){var i;return g(this,function(o){return i=new V(r),Ee()&&!this.options.retryQueue?[2,i]:[2,cn(i,this.queue,this,{callback:n,debug:this._debug,timeout:this.settings.timeout})]})})},t.prototype.addSourceMiddleware=function(r){return y(this,void 0,void 0,function(){var n=this;return g(this,function(i){switch(i.label){case 0:return[4,this.queue.criticalTasks.run(function(){return y(n,void 0,void 0,function(){var o,a,u;return g(this,function(s){switch(s.label){case 0:return[4,$(()=>Promise.resolve().then(()=>Ui),void 0)];case 1:return o=s.sent().sourceMiddlewarePlugin,a={},this.queue.plugins.forEach(function(c){if(c.type==="destination")return a[c.name]=!0}),u=o(r,a),[4,this.register(u)];case 2:return s.sent(),[2]}})})})];case 1:return i.sent(),[2,this]}})})},t.prototype.addDestinationMiddleware=function(r){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return this.queue.plugins.filter(fr).forEach(function(o){(r==="*"||o.name.toLowerCase()===r.toLowerCase())&&o.addMiddleware.apply(o,n)}),Promise.resolve(this)},t.prototype.setAnonymousId=function(r){return this._user.anonymousId(r)},t.prototype.queryString=function(r){return y(this,void 0,void 0,function(){var n;return g(this,function(i){switch(i.label){case 0:return this.options.useQueryString===!1?[2,[]]:[4,$(()=>import("./d4ylnkykwzpoyycg.js"),__vite__mapDeps([4,1,2,3]))];case 1:return n=i.sent().queryString,[2,n(this,r)]}})})},t.prototype.use=function(r){return r(this),this},t.prototype.ready=function(r){return r===void 0&&(r=function(n){return n}),y(this,void 0,void 0,function(){return g(this,function(n){return[2,Promise.all(this.queue.plugins.map(function(i){return i.ready?i.ready():Promise.resolve()})).then(function(i){return r(i),i})]})})},t.prototype.noConflict=function(){return console.warn(X),Dn(Qe??this),this},t.prototype.normalize=function(r){return console.warn(X),this.eventFactory.normalize(r)},Object.defineProperty(t.prototype,"failedInitializations",{get:function(){return console.warn(X),this.queue.failedInitializations},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VERSION",{get:function(){return Ne},enumerable:!1,configurable:!0}),t.prototype.initialize=function(r,n){return y(this,void 0,void 0,function(){return g(this,function(i){return console.warn(X),[2,Promise.resolve(this)]})})},t.prototype.pageview=function(r){return y(this,void 0,void 0,function(){return g(this,function(n){switch(n.label){case 0:return console.warn(X),[4,this.page({path:r})];case 1:return n.sent(),[2,this]}})})},Object.defineProperty(t.prototype,"plugins",{get:function(){var r;return console.warn(X),(r=this._plugins)!==null&&r!==void 0?r:{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Integrations",{get:function(){console.warn(X);var r=this.queue.plugins.filter(function(n){return n.type==="destination"}).reduce(function(n,i){var o="".concat(i.name.toLowerCase().replace(".","").split(" ").join("-"),"Integration"),a=window[o];if(!a)return n;var u=a.Integration;return u?(n[i.name]=u,n):(n[i.name]=a,n)},{});return r},enumerable:!1,configurable:!0}),t.prototype.push=function(r){var n=this,i=r.shift();i&&!n[i]||n[i].apply(this,r)},t}(dt),Kt=function(e){N(t,e);function t(){var r=e.call(this,{writeKey:""},{disableClientPersistence:!0})||this;return r.initialized=!0,r}return t}(Et),Vt={};function wr(){return typeof process>"u"||!Vt?{}:Vt}var Un=/(https:\/\/.*)\/analytics\.js\/v1\/(?:.*?)\/(?:platform|analytics.*)?/,Kn=function(){var e,t=Array.prototype.slice.call(document.querySelectorAll("script"));return t.forEach(function(r){var n,i=(n=r.getAttribute("src"))!==null&&n!==void 0?n:"",o=Un.exec(i);o&&o[1]&&(e=o[1])}),e},De,Vn=function(){var e,t=De??((e=St())===null||e===void 0?void 0:e._cdn);return t},Gn=function(e){var t=St();t&&(t._cdn=e),De=e},It=function(){var e=Vn();if(e)return e;var t=Kn();return t||"https://cdn.segment.com"},wo=function(){var e=It();return"".concat(e,"/next-integrations")};function Jn(e,t){var r,n=Object.entries((r=t.integrations)!==null&&r!==void 0?r:{}).reduce(function(i,o){var a,u,s=o[0],c=o[1];return typeof c=="object"?f(f({},i),(a={},a[s]=c,a)):f(f({},i),(u={},u[s]={},u))},{});return Object.entries(e.integrations).reduce(function(i,o){var a,u=o[0],s=o[1];return f(f({},i),(a={},a[u]=f(f({},s),n[u]),a))},{})}function Wn(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return e}}function Qn(e){return y(this,void 0,void 0,function(){var t;return g(this,function(r){return t=navigator.userAgentData,t?e?[2,t.getHighEntropyValues(e).catch(function(){return t.toJSON()})]:[2,t.toJSON()]:[2,void 0]})})}var we;function Hn(){if(we)return we;var e=hr(window.location.href);return we={expires:31536e6,secure:!1,path:"/"},e&&(we.domain=e),we}function Xn(e){var t={btid:"dataxu",urid:"millennial-media"};e.startsWith("?")&&(e=e.substring(1)),e=e.replace(/\?/g,"&");for(var r=e.split("&"),n=0,i=r;n<i.length;n++){var o=i[n],a=o.split("="),u=a[0],s=a[1];if(t[u])return{id:s,type:t[u]}}}function Zn(e){return e.startsWith("?")&&(e=e.substring(1)),e=e.replace(/\?/g,"&"),e.split("&").reduce(function(t,r){var n=r.split("="),i=n[0],o=n[1],a=o===void 0?"":o;if(i.includes("utm_")&&i.length>4){var u=i.slice(4);u==="campaign"&&(u="name"),t[u]=Wn(a)}return t},{})}function Yn(){var e=Q.get("_ga");if(e&&e.startsWith("amp"))return e}function ei(e,t,r){var n,i=new Y(r?[]:[new pr(Hn())]),o=i.get("s:context.referrer"),a=(n=Xn(e))!==null&&n!==void 0?n:o;a&&(t&&(t.referrer=f(f({},t.referrer),a)),i.set("s:context.referrer",a))}var ti=function(e){try{var t=new URLSearchParams;return Object.entries(e).forEach(function(r){var n=r[0],i=r[1];Array.isArray(i)?i.forEach(function(o){return t.append(n,o)}):t.append(n,i)}),t.toString()}catch{return""}},ri=function(){function e(){var t=this;this.name="Page Enrichment",this.type="before",this.version="0.1.0",this.isLoaded=function(){return!0},this.load=function(r,n){return y(t,void 0,void 0,function(){var i;return g(this,function(o){switch(o.label){case 0:this.instance=n,o.label=1;case 1:return o.trys.push([1,3,,4]),i=this,[4,Qn(this.instance.options.highEntropyValuesClientHints)];case 2:return i.userAgentData=o.sent(),[3,4];case 3:return o.sent(),[3,4];case 4:return[2,Promise.resolve()]}})})},this.enrich=function(r){var n,i,o=r.event.context,a=o.page.search||"",u=typeof a=="object"?ti(a):a;o.userAgent=navigator.userAgent,o.userAgentData=t.userAgentData;var s=navigator.userLanguage||navigator.language;typeof o.locale>"u"&&typeof s<"u"&&(o.locale=s),(n=o.library)!==null&&n!==void 0||(o.library={name:"analytics.js",version:"".concat("npm:next","-").concat(Ne)}),u&&!o.campaign&&(o.campaign=Zn(u));var c=Yn();c&&(o.amp={id:c}),ei(u,o,(i=t.instance.options.disableClientPersistence)!==null&&i!==void 0?i:!1);try{o.timezone=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return r},this.track=this.enrich,this.identify=this.enrich,this.page=this.enrich,this.group=this.enrich,this.alias=this.enrich,this.screen=this.enrich}return e}(),ni=new ri;function Sr(e){var t=Array.prototype.slice.call(window.document.querySelectorAll("script"));return t.find(function(r){return r.src===e})}function He(e,t){var r=Sr(e);if(r!==void 0){var n=r?.getAttribute("status");if(n==="loaded")return Promise.resolve(r);if(n==="loading")return new Promise(function(i,o){r.addEventListener("load",function(){return i(r)}),r.addEventListener("error",function(a){return o(a)})})}return new Promise(function(i,o){var a,u=window.document.createElement("script");u.type="text/javascript",u.src=e,u.async=!0,u.setAttribute("status","loading");for(var s=0,c=Object.entries({});s<c.length;s++){var l=c[s],d=l[0],p=l[1];u.setAttribute(d,p)}u.onload=function(){u.onerror=u.onload=null,u.setAttribute("status","loaded"),i(u)},u.onerror=function(){u.onerror=u.onload=null,u.setAttribute("status","error"),o(new Error("Failed to load ".concat(e)))};var v=window.document.querySelector("script");v?(a=v.parentElement)===null||a===void 0||a.insertBefore(u,v):window.document.head.appendChild(u)})}function So(e){var t=Sr(e);return t!==void 0&&t.remove(),Promise.resolve()}var Z={},J={},Pt={},Er={exports:{}};(function(e){e.exports=t(r),e.exports.find=e.exports,e.exports.replace=function(u,s,c,l){return t(i).call(this,u,s,c,l),u},e.exports.del=function(u,s,c){return t(n).call(this,u,s,null,c),u};function t(u){return function(s,c,l,d){var p=d&&a(d.normalizer)?d.normalizer:o;c=p(c);for(var v,h=!1;!h;)m();function m(){for(v in s){var w=p(v);if(c.indexOf(w)===0){var b=c.substr(w.length);if(b.charAt(0)==="."||b.length===0){c=b.substr(1);var S=s[v];if(S==null){h=!0;return}if(!c.length){h=!0;return}s=S;return}}}v=void 0,h=!0}if(v)return s==null?s:u(s,v,l)}}function r(u,s){if(u.hasOwnProperty(s))return u[s]}function n(u,s){return u.hasOwnProperty(s)&&delete u[s],u}function i(u,s,c){return u.hasOwnProperty(s)&&(u[s]=c),u}function o(u){return u.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function a(u){return typeof u=="function"}})(Er);var Re=Er.exports,ii=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pt,"__esModule",{value:!0});var H=ii(Re);function ve(e,t){return function(){var r=this.traits(),n=this.properties?this.properties():{};return H.default(r,"address."+e)||H.default(r,e)||(t?H.default(r,"address."+t):null)||(t?H.default(r,t):null)||H.default(n,"address."+e)||H.default(n,e)||(t?H.default(n,"address."+t):null)||(t?H.default(n,t):null)}}function oi(e){e.zip=ve("postalCode","zip"),e.country=ve("country"),e.street=ve("street"),e.state=ve("state"),e.city=ve("city"),e.region=ve("region")}Pt.default=oi;var qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.clone=void 0;function at(e){if(typeof e!="object")return e;if(Object.prototype.toString.call(e)==="[object Object]"){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=at(e[r]));return t}else return Array.isArray(e)?e.map(at):e}qe.clone=at;var At={};Object.defineProperty(At,"__esModule",{value:!0});var ai={Salesforce:!0};function ui(e){return!ai[e]}At.default=ui;var $e={},Ir=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;$e.parse=function(e){var t=[1,5,6,7,11,12],r=Ir.exec(e),n=0;if(!r)return new Date(e);for(var i=0,o;o=t[i];i++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0,r[4]===" "?n=new Date().getTimezoneOffset():r[9]!=="Z"&&r[10]&&(n=r[11]*60+r[12],r[10]==="+"&&(n=0-n));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+n,r[7],r[8]);return new Date(a)};$e.is=function(e,t){return typeof e!="string"||t&&/^\d{4}-\d{2}-\d{2}/.test(e)===!1?!1:Ir.test(e)};var Ot={},si=/\d{13}/;Ot.is=function(e){return si.test(e)};Ot.parse=function(e){return e=parseInt(e,10),new Date(e)};var xt={},ci=/\d{10}/;xt.is=function(e){return ci.test(e)};xt.parse=function(e){var t=parseInt(e,10)*1e3;return new Date(t)};var Gt=$e,Jt=Ot,Wt=xt,li=Object.prototype,Pr=li.toString;function fi(e){return Pr.call(e)==="[object Date]"}function di(e){return Pr.call(e)==="[object Number]"}var Mt=function(t){return fi(t)?t:di(t)?new Date(vi(t)):Gt.is(t)?Gt.parse(t):Jt.is(t)?Jt.parse(t):Wt.is(t)?Wt.parse(t):new Date(t)};function vi(e){return e<315576e5?e*1e3:e}var Qt=$e,hi=Ct;function Ct(e,t){return t===void 0&&(t=!0),e&&typeof e=="object"?pi(e,t):Array.isArray(e)?yi(e,t):Qt.is(e,t)?Qt.parse(e):e}function pi(e,t){return Object.keys(e).forEach(function(r){e[r]=Ct(e[r],t)}),e}function yi(e,t){return e.forEach(function(r,n){e[n]=Ct(r,t)}),e}var Ie=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J,"__esModule",{value:!0});J.Facade=void 0;var gi=Ie(Pt),ge=qe,mi=Ie(At),bi=Ie(Mt),ut=Ie(Re),_i=Ie(hi);function L(e,t){t=t||{},this.raw=ge.clone(e),"clone"in t||(t.clone=!0),t.clone&&(e=ge.clone(e)),"traverse"in t||(t.traverse=!0),"timestamp"in e?e.timestamp=bi.default(e.timestamp):e.timestamp=new Date,t.traverse&&_i.default(e),this.opts=t,this.obj=e}J.Facade=L;var A=L.prototype;A.proxy=function(e){var t=e.split(".");e=t.shift();var r=this[e]||this.obj[e];return r&&(typeof r=="function"&&(r=r.call(this)||{}),t.length===0?this.opts.clone?st(r):r:(r=ut.default(r,t.join(".")),this.opts.clone?st(r):r))};A.field=function(e){var t=this.obj[e];return this.opts.clone?st(t):t};L.proxy=function(e){return function(){return this.proxy(e)}};L.field=function(e){return function(){return this.field(e)}};L.multi=function(e){return function(){var t=this.proxy(e+"s");if(Array.isArray(t))return t;var r=this.proxy(e);return r&&(r=[this.opts.clone?ge.clone(r):r]),r||[]}};L.one=function(e){return function(){var t=this.proxy(e);if(t)return t;var r=this.proxy(e+"s");if(Array.isArray(r))return r[0]}};A.json=function(){var e=this.opts.clone?ge.clone(this.obj):this.obj;return this.type&&(e.type=this.type()),e};A.rawEvent=function(){return this.raw};A.options=function(e){var t=this.obj.options||this.obj.context||{},r=this.opts.clone?ge.clone(t):t;if(!e)return r;if(this.enabled(e)){var n=this.integrations(),i=n[e]||ut.default(n,e);return typeof i!="object"&&(i=ut.default(this.options(),e)),typeof i=="object"?i:{}}};A.context=A.options;A.enabled=function(e){var t=this.proxy("options.providers.all");typeof t!="boolean"&&(t=this.proxy("options.all")),typeof t!="boolean"&&(t=this.proxy("integrations.all")),typeof t!="boolean"&&(t=!0);var r=t&&mi.default(e),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(e)&&(r=n.providers[e]),n.hasOwnProperty(e)){var i=n[e];typeof i=="boolean"?r=i:r=!0}return!!r};A.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()};A.active=function(){var e=this.proxy("options.active");return e==null&&(e=!0),e};A.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")};A.sessionId=A.anonymousId;A.groupId=L.proxy("options.groupId");A.traits=function(e){var t=this.proxy("options.traits")||{},r=this.userId();e=e||{},r&&(t.id=r);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=this[n]==null?this.proxy("options.traits."+n):this[n]();if(i==null)continue;t[e[n]]=i,delete t[n]}return t};A.library=function(){var e=this.proxy("options.library");return e?typeof e=="string"?{name:e,version:null}:e:{name:"unknown",version:null}};A.device=function(){var e=this.proxy("context.device");(typeof e!="object"||e===null)&&(e={});var t=this.library().name;return e.type||(t.indexOf("ios")>-1&&(e.type="ios"),t.indexOf("android")>-1&&(e.type="android")),e};A.userAgent=L.proxy("context.userAgent");A.timezone=L.proxy("context.timezone");A.timestamp=L.field("timestamp");A.channel=L.field("channel");A.ip=L.proxy("context.ip");A.userId=L.field("userId");gi.default(A);function st(e){return ge.clone(e)}var ze={},ct={exports:{}};typeof Object.create=="function"?ct.exports=function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:ct.exports=function(t,r){if(r){t.super_=r;var n=function(){};n.prototype=r.prototype,t.prototype=new n,t.prototype.constructor=t}};var ce=ct.exports,wi=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ze,"__esModule",{value:!0});ze.Alias=void 0;var Si=wi(ce),Ar=J;function B(e,t){Ar.Facade.call(this,e,t)}ze.Alias=B;Si.default(B,Ar.Facade);B.prototype.action=function(){return"alias"};B.prototype.type=B.prototype.action;B.prototype.previousId=function(){return this.field("previousId")||this.field("from")};B.prototype.from=B.prototype.previousId;B.prototype.userId=function(){return this.field("userId")||this.field("to")};B.prototype.to=B.prototype.userId;var Be={},me={};Object.defineProperty(me,"__esModule",{value:!0});var Ei=/.+\@.+\..+/;function Ii(e){return Ei.test(e)}me.default=Ii;var kt=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Be,"__esModule",{value:!0});Be.Group=void 0;var Pi=kt(ce),Ai=kt(me),Oi=kt(Mt),be=J;function Dt(e,t){be.Facade.call(this,e,t)}Be.Group=Dt;Pi.default(Dt,be.Facade);var U=Dt.prototype;U.action=function(){return"group"};U.type=U.action;U.groupId=be.Facade.field("groupId");U.created=function(){var e=this.proxy("traits.createdAt")||this.proxy("traits.created")||this.proxy("properties.createdAt")||this.proxy("properties.created");if(e)return Oi.default(e)};U.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.groupId();if(Ai.default(t))return t};U.traits=function(e){var t=this.properties(),r=this.groupId();e=e||{},r&&(t.id=r);for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var i=this[n]==null?this.proxy("traits."+n):this[n]();if(i==null)continue;t[e[n]]=i,delete t[n]}return t};U.name=be.Facade.proxy("traits.name");U.industry=be.Facade.proxy("traits.industry");U.employees=be.Facade.proxy("traits.employees");U.properties=function(){return this.field("traits")||this.field("properties")||{}};var Pe={},Ue=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.Identify=void 0;var W=J,ye=Ue(Re),xi=Ue(ce),Mi=Ue(me),Or=Ue(Mt),ie=function(e){return e.trim()};function Ft(e,t){W.Facade.call(this,e,t)}Pe.Identify=Ft;xi.default(Ft,W.Facade);var O=Ft.prototype;O.action=function(){return"identify"};O.type=O.action;O.traits=function(e){var t=this.field("traits")||{},r=this.userId();e=e||{},r&&(t.id=r);for(var n in e){var i=this[n]==null?this.proxy("traits."+n):this[n]();i!=null&&(t[e[n]]=i,n!==e[n]&&delete t[n])}return t};O.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.userId();if(Mi.default(t))return t};O.created=function(){var e=this.proxy("traits.created")||this.proxy("traits.createdAt");if(e)return Or.default(e)};O.companyCreated=function(){var e=this.proxy("traits.company.created")||this.proxy("traits.company.createdAt");if(e)return Or.default(e)};O.companyName=function(){return this.proxy("traits.company.name")};O.name=function(){var e=this.proxy("traits.name");if(typeof e=="string")return ie(e);var t=this.firstName(),r=this.lastName();if(t&&r)return ie(t+" "+r)};O.firstName=function(){var e=this.proxy("traits.firstName");if(typeof e=="string")return ie(e);var t=this.proxy("traits.name");if(typeof t=="string")return ie(t).split(" ")[0]};O.lastName=function(){var e=this.proxy("traits.lastName");if(typeof e=="string")return ie(e);var t=this.proxy("traits.name");if(typeof t=="string"){var r=ie(t).indexOf(" ");if(r!==-1)return ie(t.substr(r+1))}};O.uid=function(){return this.userId()||this.username()||this.email()};O.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")};O.age=function(){var e=this.birthday(),t=ye.default(this.traits(),"age");if(t!=null)return t;if(e instanceof Date){var r=new Date;return r.getFullYear()-e.getFullYear()}};O.avatar=function(){var e=this.traits();return ye.default(e,"avatar")||ye.default(e,"photoUrl")||ye.default(e,"avatarUrl")};O.position=function(){var e=this.traits();return ye.default(e,"position")||ye.default(e,"jobTitle")};O.username=W.Facade.proxy("traits.username");O.website=W.Facade.one("traits.website");O.websites=W.Facade.multi("traits.website");O.phone=W.Facade.one("traits.phone");O.phones=W.Facade.multi("traits.phone");O.address=W.Facade.proxy("traits.address");O.gender=W.Facade.proxy("traits.gender");O.birthday=W.Facade.proxy("traits.birthday");var _e={},Tt=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_e,"__esModule",{value:!0});_e.Track=void 0;var Ci=Tt(ce),k=J,ki=Pe,Di=Tt(me),xr=Tt(Re);function jt(e,t){k.Facade.call(this,e,t)}_e.Track=jt;Ci.default(jt,k.Facade);var _=jt.prototype;_.action=function(){return"track"};_.type=_.action;_.event=k.Facade.field("event");_.value=k.Facade.proxy("properties.value");_.category=k.Facade.proxy("properties.category");_.id=k.Facade.proxy("properties.id");_.productId=function(){return this.proxy("properties.product_id")||this.proxy("properties.productId")};_.promotionId=function(){return this.proxy("properties.promotion_id")||this.proxy("properties.promotionId")};_.cartId=function(){return this.proxy("properties.cart_id")||this.proxy("properties.cartId")};_.checkoutId=function(){return this.proxy("properties.checkout_id")||this.proxy("properties.checkoutId")};_.paymentId=function(){return this.proxy("properties.payment_id")||this.proxy("properties.paymentId")};_.couponId=function(){return this.proxy("properties.coupon_id")||this.proxy("properties.couponId")};_.wishlistId=function(){return this.proxy("properties.wishlist_id")||this.proxy("properties.wishlistId")};_.reviewId=function(){return this.proxy("properties.review_id")||this.proxy("properties.reviewId")};_.orderId=function(){return this.proxy("properties.id")||this.proxy("properties.order_id")||this.proxy("properties.orderId")};_.sku=k.Facade.proxy("properties.sku");_.tax=k.Facade.proxy("properties.tax");_.name=k.Facade.proxy("properties.name");_.price=k.Facade.proxy("properties.price");_.total=k.Facade.proxy("properties.total");_.repeat=k.Facade.proxy("properties.repeat");_.coupon=k.Facade.proxy("properties.coupon");_.shipping=k.Facade.proxy("properties.shipping");_.discount=k.Facade.proxy("properties.discount");_.shippingMethod=function(){return this.proxy("properties.shipping_method")||this.proxy("properties.shippingMethod")};_.paymentMethod=function(){return this.proxy("properties.payment_method")||this.proxy("properties.paymentMethod")};_.description=k.Facade.proxy("properties.description");_.plan=k.Facade.proxy("properties.plan");_.subtotal=function(){var e=xr.default(this.properties(),"subtotal"),t=this.total()||this.revenue();if(e)return e;if(!t)return 0;if(this.total()){var r=this.tax();r&&(t-=r),r=this.shipping(),r&&(t-=r),r=this.discount(),r&&(t+=r)}return t};_.products=function(){var e=this.properties(),t=xr.default(e,"products");return Array.isArray(t)?t.filter(function(r){return r!==null}):[]};_.quantity=function(){var e=this.obj.properties||{};return e.quantity||1};_.currency=function(){var e=this.obj.properties||{};return e.currency||"USD"};_.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};_.query=k.Facade.proxy("options.query");_.properties=function(e){var t=this.field("properties")||{};e=e||{};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=this[r]==null?this.proxy("properties."+r):this[r]();if(n==null)continue;t[e[r]]=n,delete t[r]}return t};_.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()};_.email=function(){var e=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(e)return e;var t=this.userId();if(Di.default(t))return t};_.revenue=function(){var e=this.proxy("properties.revenue"),t=this.event(),r=/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i;return!e&&t&&t.match(r)&&(e=this.proxy("properties.total")),Fi(e)};_.cents=function(){var e=this.revenue();return typeof e!="number"?this.value()||0:e*100};_.identify=function(){var e=this.json();return e.traits=this.traits(),new ki.Identify(e,this.opts)};function Fi(e){if(e){if(typeof e=="number")return e;if(typeof e=="string"&&(e=e.replace(/\$/g,""),e=parseFloat(e),!isNaN(e)))return e}}var Ae={},Mr=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.Page=void 0;var Ti=Mr(ce),le=J,ji=_e,Ni=Mr(me);function Nt(e,t){le.Facade.call(this,e,t)}Ae.Page=Nt;Ti.default(Nt,le.Facade);var j=Nt.prototype;j.action=function(){return"page"};j.type=j.action;j.category=le.Facade.field("category");j.name=le.Facade.field("name");j.title=le.Facade.proxy("properties.title");j.path=le.Facade.proxy("properties.path");j.url=le.Facade.proxy("properties.url");j.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")};j.properties=function(e){var t=this.field("properties")||{},r=this.category(),n=this.name();e=e||{},r&&(t.category=r),n&&(t.name=n);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=this[i]==null?this.proxy("properties."+i):this[i]();if(o==null)continue;t[e[i]]=o,i!==e[i]&&delete t[i]}return t};j.email=function(){var e=this.proxy("context.traits.email")||this.proxy("properties.email");if(e)return e;var t=this.userId();if(Ni.default(t))return t};j.fullName=function(){var e=this.category(),t=this.name();return t&&e?e+" "+t:t};j.event=function(e){return e?"Viewed "+e+" Page":"Loaded a Page"};j.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new ji.Track(t,this.opts)};var Ke={},Li=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ke,"__esModule",{value:!0});Ke.Screen=void 0;var Ri=Li(ce),Cr=Ae,qi=_e;function ue(e,t){Cr.Page.call(this,e,t)}Ke.Screen=ue;Ri.default(ue,Cr.Page);ue.prototype.action=function(){return"screen"};ue.prototype.type=ue.prototype.action;ue.prototype.event=function(e){return e?"Viewed "+e+" Screen":"Loaded a Screen"};ue.prototype.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new qi.Track(t,this.opts)};var Ve={},$i=x&&x.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.Delete=void 0;var zi=$i(ce),kr=J;function Lt(e,t){kr.Facade.call(this,e,t)}Ve.Delete=Lt;zi.default(Lt,kr.Facade);Lt.prototype.type=function(){return"delete"};(function(e){var t=x&&x.__assign||function(){return t=Object.assign||function(l){for(var d,p=1,v=arguments.length;p<v;p++){d=arguments[p];for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&(l[h]=d[h])}return l},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=e.Screen=e.Page=e.Track=e.Identify=e.Group=e.Alias=e.Facade=void 0;var r=J;Object.defineProperty(e,"Facade",{enumerable:!0,get:function(){return r.Facade}});var n=ze;Object.defineProperty(e,"Alias",{enumerable:!0,get:function(){return n.Alias}});var i=Be;Object.defineProperty(e,"Group",{enumerable:!0,get:function(){return i.Group}});var o=Pe;Object.defineProperty(e,"Identify",{enumerable:!0,get:function(){return o.Identify}});var a=_e;Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return a.Track}});var u=Ae;Object.defineProperty(e,"Page",{enumerable:!0,get:function(){return u.Page}});var s=Ke;Object.defineProperty(e,"Screen",{enumerable:!0,get:function(){return s.Screen}});var c=Ve;Object.defineProperty(e,"Delete",{enumerable:!0,get:function(){return c.Delete}}),e.default=t(t({},r.Facade),{Alias:n.Alias,Group:i.Group,Identify:o.Identify,Track:a.Track,Page:u.Page,Screen:s.Screen,Delete:c.Delete})})(Z);function Te(e,t){var r=new Z.Facade(e,t);return e.type==="track"&&(r=new Z.Track(e,t)),e.type==="identify"&&(r=new Z.Identify(e,t)),e.type==="page"&&(r=new Z.Page(e,t)),e.type==="alias"&&(r=new Z.Alias(e,t)),e.type==="group"&&(r=new Z.Group(e,t)),e.type==="screen"&&(r=new Z.Screen(e,t)),Object.defineProperty(r,"obj",{value:e,writable:!0}),r}function Dr(e,t,r){return y(this,void 0,void 0,function(){function n(c,l){return y(this,void 0,void 0,function(){var d,p,v;return g(this,function(h){switch(h.label){case 0:return d=!1,p=null,[4,l({payload:Te(c,{clone:!0,traverse:!1}),integration:e,next:function(m){d=!0,m===null&&(p=null),m&&(p=m.obj)}})];case 1:return h.sent(),!d&&p!==null&&(p=p,p.integrations=f(f({},c.integrations),(v={},v[e]=!1,v))),[2,p]}})})}var i,o,a,u,s;return g(this,function(c){switch(c.label){case 0:i=Te(t,{clone:!0,traverse:!1}).rawEvent(),o=0,a=r,c.label=1;case 1:return o<a.length?(u=a[o],[4,n(i,u)]):[3,4];case 2:if(s=c.sent(),s===null)return[2,null];i=s,c.label=3;case 3:return o++,[3,1];case 4:return[2,i]}})})}function Bi(e,t){function r(n){return y(this,void 0,void 0,function(){var i;return g(this,function(o){switch(o.label){case 0:return i=!1,[4,e({payload:Te(n.event,{clone:!0,traverse:!1}),integrations:t??{},next:function(a){i=!0,a&&(n.event=a.obj)}})];case 1:if(o.sent(),!i)throw new ae({retry:!1,type:"middleware_cancellation",reason:"Middleware `next` function skipped"});return[2,n]}})})}return{name:"Source Middleware ".concat(e.name),type:"before",version:"0.1.0",isLoaded:function(){return!0},load:function(n){return Promise.resolve(n)},track:r,page:r,identify:r,alias:r,group:r}}const Ui=Object.freeze(Object.defineProperty({__proto__:null,applyDestinationMiddleware:Dr,sourceMiddlewarePlugin:Bi},Symbol.toStringTag,{value:"Module"}));function Ce(e,t){var r=t.methodName,n=t.integrationName,i=t.type,o=t.didError,a=o===void 0?!1:o;e.stats.increment("analytics_js.integration.invoke".concat(a?".error":""),1,["method:".concat(r),"integration_name:".concat(n),"type:".concat(i)])}var Ki=function(){function e(t,r){this.version="1.0.0",this.alternativeNames=[],this.loadPromise=Yt(),this.middleware=[],this.alias=this._createMethod("alias"),this.group=this._createMethod("group"),this.identify=this._createMethod("identify"),this.page=this._createMethod("page"),this.screen=this._createMethod("screen"),this.track=this._createMethod("track"),this.action=r,this.name=t,this.type=r.type,this.alternativeNames.push(r.name)}return e.prototype.addMiddleware=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this.type==="destination"&&(t=this.middleware).push.apply(t,r)},e.prototype.transform=function(t){return y(this,void 0,void 0,function(){var r;return g(this,function(n){switch(n.label){case 0:return[4,Dr(this.name,t.event,this.middleware)];case 1:return r=n.sent(),r===null&&t.cancel(new ae({retry:!1,reason:"dropped by destination middleware"})),[2,new V(r)]}})})},e.prototype._createMethod=function(t){var r=this;return function(n){return y(r,void 0,void 0,function(){var i,o;return g(this,function(a){switch(a.label){case 0:return this.action[t]?(i=n,this.type!=="destination"?[3,2]:[4,this.transform(n)]):[2,n];case 1:i=a.sent(),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,this.ready()];case 3:if(!a.sent())throw new Error("Something prevented the destination from getting ready");return Ce(n,{integrationName:this.action.name,methodName:t,type:"action"}),[4,this.action[t](i)];case 4:return a.sent(),[3,6];case 5:throw o=a.sent(),Ce(n,{integrationName:this.action.name,methodName:t,type:"action",didError:!0}),o;case 6:return[2,n]}})})}},e.prototype.isLoaded=function(){return this.action.isLoaded()},e.prototype.ready=function(){return y(this,void 0,void 0,function(){return g(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.loadPromise.promise];case 1:return t.sent(),[2,!0];case 2:return t.sent(),[2,!1];case 3:return[2]}})})},e.prototype.load=function(t,r){return y(this,void 0,void 0,function(){var n,i,o,a;return g(this,function(u){switch(u.label){case 0:if(this.loadPromise.isSettled())return[2,this.loadPromise.promise];u.label=1;case 1:return u.trys.push([1,3,,4]),Ce(t,{integrationName:this.action.name,methodName:"load",type:"action"}),n=this.action.load(t,r),o=(i=this.loadPromise).resolve,[4,n];case 2:return o.apply(i,[u.sent()]),[2,n];case 3:throw a=u.sent(),Ce(t,{integrationName:this.action.name,methodName:"load",type:"action",didError:!0}),this.loadPromise.reject(a),a;case 4:return[2]}})})},e.prototype.unload=function(t,r){var n,i;return(i=(n=this.action).unload)===null||i===void 0?void 0:i.call(n,t,r)},e}();function Vi(e){if(!Array.isArray(e))throw new Error("Not a valid list of plugins");var t=["load","isLoaded","name","version","type"];return e.forEach(function(r){t.forEach(function(n){var i;if(r[n]===void 0)throw new Error("Plugin: ".concat((i=r.name)!==null&&i!==void 0?i:"unknown"," missing required function ").concat(n))})}),!0}function Gi(e,t){var r=e[t.creationName],n=e[t.name];return e.All===!1&&!r&&!n||r===!1||n===!1}function Ji(e,t){return y(this,void 0,void 0,function(){var r,n,i,o,a,u;return g(this,function(s){switch(s.label){case 0:if(s.trys.push([0,9,,10]),r=new RegExp("https://cdn.segment.(com|build)"),n=It(),!t)return[3,6];i=e.url.split("/"),o=i[i.length-2],a=e.url.replace(o,btoa(o).replace(/=/g,"")),s.label=1;case 1:return s.trys.push([1,3,,5]),[4,He(a.replace(r,n))];case 2:return s.sent(),[3,5];case 3:return s.sent(),[4,He(e.url.replace(r,n))];case 4:return s.sent(),[3,5];case 5:return[3,8];case 6:return[4,He(e.url.replace(r,n))];case 7:s.sent(),s.label=8;case 8:return typeof window[e.libraryName]=="function"?[2,window[e.libraryName]]:[3,10];case 9:throw u=s.sent(),console.error("Failed to create PluginFactory",e),u;case 10:return[2]}})})}function Wi(e,t,r,n,i,o){var a,u,s;return y(this,void 0,void 0,function(){var c,l,d,p=this;return g(this,function(v){switch(v.label){case 0:return c=[],l=(u=(a=e.middlewareSettings)===null||a===void 0?void 0:a.routingRules)!==null&&u!==void 0?u:[],d=((s=e.remotePlugins)!==null&&s!==void 0?s:[]).map(function(h){return y(p,void 0,void 0,function(){var m,w,b,S,E,I;return g(this,function(P){switch(P.label){case 0:if(Gi(t,h))return[2];P.label=1;case 1:return P.trys.push([1,6,,7]),w=o?.find(function(M){var R=M.pluginName;return R===h.name}),w?[3,3]:[4,Ji(h,n?.obfuscate)];case 2:w=P.sent(),P.label=3;case 3:return m=w,m?[4,m(f(f({},h.settings),r[h.name]))]:[3,5];case 4:b=P.sent(),S=Array.isArray(b)?b:[b],Vi(S),E=l.filter(function(M){return M.destinationName===h.creationName}),S.forEach(function(M){var R=new Ki(h.creationName,M);E.length&&i&&R.addMiddleware(i),c.push(R)}),P.label=5;case 5:return[3,7];case 6:return I=P.sent(),console.warn("Failed to load Remote Plugin",I),[3,7];case 7:return[2]}})})}),[4,Promise.all(d)];case 1:return v.sent(),[2,c.filter(Boolean)]}})})}var Qi=function(e){var t=!1;window.addEventListener("pagehide",function(){t||(t=!0,e(t))}),document.addEventListener("visibilitychange",function(){if(document.visibilityState=="hidden"){if(t)return;t=!0}else t=!1;e(t)})},Fr=function(e){N(t,e);function t(r,n){var i=e.call(this,r)||this;return i.retryTimeout=n,i.name="RateLimitError",i}return t}(Error),Hi=500,Xi=64;function Rt(e){var t=encodeURI(JSON.stringify(e)).split(/%..|./).length-1;return t/1024}function Zi(e){return Rt(e)>=Hi-50}function Yi(e){return Rt(e)>=Xi-10}function eo(e){var t=[],r=0;return e.forEach(function(n){var i=Rt(t[r]);i>=64&&r++,t[r]?t[r].push(n):t[r]=[n]}),t}function to(e,t){var r,n,i=[],o=!1,a=(r=t?.size)!==null&&r!==void 0?r:10,u=(n=t?.timeout)!==null&&n!==void 0?n:5e3,s=0;function c(h){var m;if(h.length!==0){var w=(m=h[0])===null||m===void 0?void 0:m.writeKey,b=h.map(function(S){var E=S;E.sentAt;var I=Zt(E,["sentAt"]);return I});return je("https://".concat(e,"/b"),{keepalive:t?.keepalive||o,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify({writeKey:w,batch:b,sentAt:new Date().toISOString()})}).then(function(S){var E;if(S.status>=500)throw new Error("Bad response from server: ".concat(S.status));if(S.status===429){var I=(E=S.headers)===null||E===void 0?void 0:E.get("x-ratelimit-reset"),P=typeof I=="string"?parseInt(I)*1e3:u;throw new Fr("Rate limit exceeded: ".concat(S.status),P)}})}}function l(h){var m;return h===void 0&&(h=1),y(this,void 0,void 0,function(){var w;return g(this,function(b){return i.length?(w=i,i=[],[2,(m=c(w))===null||m===void 0?void 0:m.catch(function(S){var E,I=V.system();I.log("error","Error sending batch",S),h<=((E=t?.maxRetries)!==null&&E!==void 0?E:10)&&(S.name==="RateLimitError"&&(s=S.retryTimeout),i.push.apply(i,w),i.map(function(P){if("_metadata"in P){var M=P;M._metadata=f(f({},M._metadata),{retryCount:h})}}),p(h+1))})]):[2]})})}var d;function p(h){h===void 0&&(h=1),!d&&(d=setTimeout(function(){d=void 0,l(h).catch(console.error)},s||u),s=0)}Qi(function(h){if(o=h,o&&i.length){var m=eo(i).map(c);Promise.all(m).catch(console.error)}});function v(h,m){return y(this,void 0,void 0,function(){var w;return g(this,function(b){return i.push(m),w=i.length>=a||Zi(i)||t?.keepalive&&Yi(i),[2,w||o?l():p()]})})}return{dispatch:v}}function ro(e){function t(r,n){return je(r,{keepalive:e?.keepalive,headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(n)}).then(function(i){var o;if(i.status>=500)throw new Error("Bad response from server: ".concat(i.status));if(i.status===429){var a=(o=i.headers)===null||o===void 0?void 0:o.get("x-ratelimit-reset"),u=a?parseInt(a)*1e3:5e3;throw new Fr("Rate limit exceeded: ".concat(i.status),u)}})}return{dispatch:t}}function no(e,t,r,n,i){var o,a=e.user();delete t.options,t.writeKey=r?.apiKey,t.userId=t.userId||a.id(),t.anonymousId=t.anonymousId||a.anonymousId(),t.sentAt=new Date;var u=e.queue.failedInitializations||[];u.length>0&&(t._metadata={failedInitializations:u}),i!=null&&(i.attempts>1&&(t._metadata=f(f({},t._metadata),{retryCount:i.attempts})),i.attempts++);var s=[],c=[];for(var l in n){var d=n[l];l==="Segment.io"&&s.push(l),d.bundlingStatus==="bundled"&&s.push(l),d.bundlingStatus==="unbundled"&&c.push(l)}for(var p=0,v=r?.unbundledIntegrations||[];p<v.length;p++){var h=v[p];c.includes(h)||c.push(h)}var m=(o=r?.maybeBundledConfigIds)!==null&&o!==void 0?o:{},w=[];return s.sort().forEach(function(b){var S;((S=m[b])!==null&&S!==void 0?S:[]).forEach(function(E){w.push(E)})}),r?.addBundledMetadata!==!1&&(t._metadata=f(f({},t._metadata),{bundled:s.sort(),unbundled:c.sort(),bundledIds:w})),t}var io=function(e,t){return y(void 0,void 0,void 0,function(){var r;return g(this,function(n){return r=function(i){return y(void 0,void 0,void 0,function(){var o;return g(this,function(a){switch(a.label){case 0:return e(i)?(o=r,[4,t()]):[3,2];case 1:return[2,o.apply(void 0,[a.sent()])];case 2:return[2]}})})},[2,r(void 0)]})})};function oo(e,t){return y(this,void 0,void 0,function(){var r,n=this;return g(this,function(i){switch(i.label){case 0:return r=[],Ee()?[2,t]:[4,io(function(){return t.length>0&&!Ee()},function(){return y(n,void 0,void 0,function(){var o,a,u;return g(this,function(s){switch(s.label){case 0:return o=t.pop(),o?[4,Se(o,e)]:[2];case 1:return a=s.sent(),u=a instanceof V,u||r.push(o),[2]}})})})];case 1:return i.sent(),r.map(function(o){return t.pushWithBackoff(o)}),[2,t]}})})}function he(e,t,r,n){var i=this;e||setTimeout(function(){return y(i,void 0,void 0,function(){var o,a;return g(this,function(u){switch(u.label){case 0:return o=!0,[4,oo(r,t)];case 1:return a=u.sent(),o=!1,t.todo>0&&n(o,a,r,n),[2]}})})},Math.random()*5e3)}function ao(e,t){var r,n,i,o,a=e.user();return t.previousId=(i=(n=(r=t.previousId)!==null&&r!==void 0?r:t.from)!==null&&n!==void 0?n:a.id())!==null&&i!==void 0?i:a.anonymousId(),t.userId=(o=t.userId)!==null&&o!==void 0?o:t.to,delete t.from,delete t.to,t}function Tr(e,t,r){var n,i,o;window.addEventListener("pagehide",function(){u.push.apply(u,Array.from(s)),s.clear()});var a=(n=t?.apiKey)!==null&&n!==void 0?n:"",u=e.options.disableClientPersistence?new vt(e.queue.queue.maxAttempts,[]):new gt(e.queue.queue.maxAttempts,"".concat(a,":dest-Segment.io")),s=new Set,c=!1,l=(i=t?.apiHost)!==null&&i!==void 0?i:ir,d=(o=t?.protocol)!==null&&o!==void 0?o:"https",p="".concat(d,"://").concat(l),v=t?.deliveryStrategy,h=v?.strategy==="batching"?to(l,v.config):ro(v?.config);function m(b){return y(this,void 0,void 0,function(){var S,E;return g(this,function(I){return Ee()?(u.push(b),he(c,u,w,he),[2,b]):(s.add(b),S=b.event.type.charAt(0),E=Te(b.event).json(),b.event.type==="track"&&delete E.traits,b.event.type==="alias"&&(E=ao(e,E)),[2,h.dispatch("".concat(p,"/").concat(S),no(e,E,t,r,b)).then(function(){return b}).catch(function(P){if(b.log("error","Error sending event",P),P.name==="RateLimitError"){var M=P.retryTimeout;u.pushWithBackoff(b,M)}else u.pushWithBackoff(b);return he(c,u,w,he),b}).finally(function(){s.delete(b)})])})})}var w={name:"Segment.io",type:"destination",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:m,identify:m,page:m,alias:m,group:m,screen:m};return u.todo&&he(c,u,w,he),w}var Xe,Ht,uo=yt(),Xt=(Xe=(Ht=uo).__SEGMENT_INSPECTOR__)!==null&&Xe!==void 0?Xe:Ht.__SEGMENT_INSPECTOR__={},so=function(e){var t;return(t=Xt.attach)===null||t===void 0?void 0:t.call(Xt,e)};function co(e,t){var r=t??It();return je("".concat(r,"/v1/projects/").concat(e,"/settings")).then(function(n){return n.ok?n.json():n.text().then(function(i){throw new Error(i)})}).catch(function(n){throw console.error(n.message),n})}function lo(e){return wr().NODE_ENV!=="test"&&Object.keys(e.integrations).length>1}function fo(e){var t,r,n;return wr().NODE_ENV!=="test"&&((n=(r=(t=e.middlewareSettings)===null||t===void 0?void 0:t.routingRules)===null||r===void 0?void 0:r.length)!==null&&n!==void 0?n:0)>0}function vo(e,t){Ln(e,t),Nn(e,t)}function ho(e,t){return y(this,void 0,void 0,function(){return g(this,function(r){switch(r.label){case 0:return[4,Tn(e,t)];case 1:return r.sent(),Rn(e,t),[2]}})})}function po(e,t,r,n,i,o,a){var u,s,c;return i===void 0&&(i=[]),y(this,void 0,void 0,function(){var l,d,p,v,h,m,w,b,S,E,I,P,M,R,ee,q=this;return g(this,function(D){switch(D.label){case 0:return vo(r,a),l=i?.filter(function(F){return typeof F=="object"}),d=i?.filter(function(F){return typeof F=="function"&&typeof F.pluginName=="string"}),fo(t)?[4,$(()=>import("./jov8lefyy9p4h8uq.js"),[]).then(function(F){return F.tsubMiddleware(t.middlewareSettings.routingRules)})]:[3,2];case 1:return v=D.sent(),[3,3];case 2:v=void 0,D.label=3;case 3:return p=v,lo(t)||o.length>0?[4,$(()=>import("./ohur7ks8s4e2vjcx.js"),__vite__mapDeps([5,1,2,3,6])).then(function(F){return F.ajsDestinations(e,t,r.integrations,n,p,o)})]:[3,5];case 4:return m=D.sent(),[3,6];case 5:m=[],D.label=6;case 6:return h=m,t.legacyVideoPluginsEnabled?[4,$(()=>import("./hnxs3lgii7eg8whc.js"),__vite__mapDeps([7,1,2,3])).then(function(F){return F.loadLegacyVideoPlugins(r)})]:[3,8];case 7:D.sent(),D.label=8;case 8:return!((u=n.plan)===null||u===void 0)&&u.track?[4,$(()=>import("./e2qww3xa5329768j.js"),__vite__mapDeps([8,1,2,3,6])).then(function(F){var te;return F.schemaFilter((te=n.plan)===null||te===void 0?void 0:te.track,t)})]:[3,10];case 9:return b=D.sent(),[3,11];case 10:b=void 0,D.label=11;case 11:return w=b,S=Jn(t,n),[4,Wi(t,r.integrations,S,n,p,d).catch(function(){return[]})];case 12:return E=D.sent(),I=C(C([ni],h,!0),E,!0),w&&I.push(w),P=((s=n.integrations)===null||s===void 0?void 0:s.All)===!1&&!n.integrations["Segment.io"]||n.integrations&&n.integrations["Segment.io"]===!1,P?[3,14]:(R=(M=I).push,[4,Tr(r,S["Segment.io"],t.integrations)]);case 13:R.apply(M,[D.sent()]),D.label=14;case 14:return[4,r.register.apply(r,C(C([],I,!1),l,!1))];case 15:return ee=D.sent(),[4,jn(r,a)];case 16:return D.sent(),Object.entries((c=t.enabledMiddleware)!==null&&c!==void 0?c:{}).some(function(F){var te=F[1];return te})?[4,$(()=>import("./jmwh1bgit9rhshv6.js"),__vite__mapDeps([9,1,2,3])).then(function(F){var te=F.remoteMiddlewares;return y(q,void 0,void 0,function(){var qt,$t;return g(this,function(zt){switch(zt.label){case 0:return[4,te(ee,t,n.obfuscate)];case 1:return qt=zt.sent(),$t=qt.map(function(jr){return r.addSourceMiddleware(jr)}),[2,Promise.all($t)]}})})})]:[3,18];case 17:D.sent(),D.label=18;case 18:return[2,ee]}})})}function yo(e,t,r){var n,i,o,a,u,s,c,l,d,p;return t===void 0&&(t={}),y(this,void 0,void 0,function(){var v,h,m,w,b,S,E,I,P,M,R,ee;return g(this,function(q){switch(q.label){case 0:return t.disable===!0?[2,[new Kt,V.system()]]:(t.globalAnalyticsKey&&kn(t.globalAnalyticsKey),e.cdnURL&&Gn(e.cdnURL),t.initialPageview&&r.add(new ot("page",[])),(n=e.cdnSettings)!==null&&n!==void 0?(h=n,[3,3]):[3,1]);case 1:return[4,co(e.writeKey,e.cdnURL)];case 2:h=q.sent(),q.label=3;case 3:return v=h,t.updateCDNSettings&&(v=t.updateCDNSettings(v)),typeof t.disable!="function"?[3,5]:[4,t.disable(v)];case 4:if(m=q.sent(),m)return[2,[new Kt,V.system()]];q.label=5;case 5:return w=(o=(i=v.integrations["Segment.io"])===null||i===void 0?void 0:i.retryQueue)!==null&&o!==void 0?o:!0,t=f({retryQueue:w},t),b=new Et(f(f({},e),{cdnSettings:v}),t),so(b),S=(a=e.plugins)!==null&&a!==void 0?a:[],E=(u=e.classicIntegrations)!==null&&u!==void 0?u:[],I=(s=t.integrations)===null||s===void 0?void 0:s["Segment.io"],or.initRemoteMetrics(f(f({},v.metrics),{host:(c=I?.apiHost)!==null&&c!==void 0?c:(l=v.metrics)===null||l===void 0?void 0:l.host,protocol:I?.protocol})),[4,po(e.writeKey,v,b,t,S,E,r)];case 6:return P=q.sent(),M=(d=window.location.search)!==null&&d!==void 0?d:"",R=(p=window.location.hash)!==null&&p!==void 0?p:"",ee=M.length?M:R.replace(/(?=#).*(?=\?)/,""),ee.includes("ajs_")?[4,b.queryString(ee).catch(console.error)]:[3,8];case 7:q.sent(),q.label=8;case 8:return b.initialized=!0,b.emit("initialize",e,t),[4,ho(b,r)];case 9:return q.sent(),[2,[b,P]]}})})}var go=function(e){N(t,e);function t(){var r=this,n=Yt(),i=n.promise,o=n.resolve;return r=e.call(this,function(a){return i.then(function(u){var s=u[0],c=u[1];return yo(s,c,a)})})||this,r._resolveLoadStart=function(a,u){return o([a,u])},r}return t.prototype.load=function(r,n){return n===void 0&&(n={}),this._resolveLoadStart(r,n),this},t.load=function(r,n){return n===void 0&&(n={}),new t().load(r,n)},t.standalone=function(r,n){return t.load({writeKey:r},n).then(function(i){return i[0]})},t}($n),mo=function(){function e(){}return e.load=function(){return Promise.reject(new Error("AnalyticsNode is not available in browsers."))},e}();const Eo=Object.freeze(Object.defineProperty({__proto__:null,Analytics:Et,AnalyticsBrowser:go,AnalyticsNode:mo,Context:V,ContextCancelation:ae,EventFactory:lr,Group:mr,UniversalStorage:Y,User:_t,getGlobalAnalytics:St,isDestinationPluginWithAddMiddleware:fr,resolveAliasArguments:nr,resolveArguments:rr,resolvePageArguments:et,resolveUserArguments:tt,segmentio:Tr},Symbol.toStringTag,{value:"Module"}));export{ae as C,vt as P,Wn as a,z as b,Ee as c,Dr as d,Z as e,io as f,wo as g,Yt as h,_o as i,gt as j,Se as k,He as l,Jn as m,ln as n,V as o,Wr as p,Eo as q,Ce as r,So as u};
//# sourceMappingURL=kdz8zhwzopib0ahr.js.map
