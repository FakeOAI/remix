import{r as i,cQ as F,g as TA,bd as pA,fx as oe,bA as J,W as E,a8 as ae,x as A,dN as se,bC as ne,bq as RA,av as ZA,N as tA,aq as X,am as ie,D as re,au as ce,fy as le}from"./m8rh4g4wti5oij6r.js";import{a as NA,bM as de,n as ue,bN as me,bO as ge,bP as he,bQ as pe,af as fe,bR as xe,c as MA,bS as Ce,W as ke,bk as be,Q as ve,bT as Be,y as Ee}from"./f2s0ymrsx8zkcqzb.js";import{ju as fA,al as Ie,jv as YA,h9 as Me,jw as we,aa as D,ef as Se,bY as Qe}from"./gyk6913sy5h59gmv.js";import{o as GA,n as OA,a as f,u as JA,e as xA,f as CA,C as FA,g as ye,R as uA,p as sA,T as kA,q as XA,V as w,l as wA,s as SA,t as QA,E as je,v as Ve,w as De,x as Te}from"./lvulsy4rwrr70w4z.js";import{u as bA,V as Re}from"./q91vtqhmq48kp4gu.js";import{H as vA,w as oA}from"./o24ms7b147ogs90x.js";import{d as nA,b as j}from"./imjfbin0u57rzypy.js";import{m as C}from"./e3sq0rwlveh4dug2.js";import{G as Ze,W as Ne}from"./nc7jarzn11u3mq6j.js";import{B as Ye,D as Ge}from"./kmjf2foda203kwt3.js";import{_ as Oe}from"./iprrzmp1dxv2xoqd.js";import{u as Je,s as Fe,U as Xe,a as We,b as Le,v as qe,c as Ue,d as Pe,V as ze}from"./d9p9md95edzj4wlk.js";import"./oecyk0ix5rsaeskq.js";import"./o4y657gzal7pp820.js";import"./m1ibh1oof5grnyzc.js";import"./cfylx6lsvkt0axtk.js";import"./cdq3rh8lvaa0485m.js";import"./m3hwjquoibx09ax4.js";import"./e243ffiqjjk1dz27.js";import"./kxxyd4n5sf3kg621.js";import"./gh1krnjzg356aimg.js";import"./kcsp429tkwx76g3x.js";import"./dec9ybsqi2xvfz8n.js";import"./bay3xpmywnb89fgm.js";import"./nj6gtq3smw2xafi5.js";import"./g0yrrng133xj30tp.js";import"./e1hclywt3kywgmuk.js";import"./f06xlpll9ay1ar2k.js";import"./exj5rh99we0tibo5.js";import"./j8vcdu8olreefkgr.js";import"./kxicdzv6qy0hb1po.js";import"./mgp6ivelzszq87jp.js";import"./e4lpu0nv9omcx9gy.js";import"./ogtpso75ifgykkdu.js";import"./dqixwv9zu9qcbsj0.js";import"./nxuq71qstce0uovv.js";import"./jjmzj070cd6o2hu4.js";import"./hvi8ts8m7lsnow7e.js";import"./expx98kpumfssxfl.js";import"./d78dllczs2bibb5c.js";import"./bvqwuwvgfrzqhadq.js";function WA(){const{shouldDelayDisconnect:t,delayDisconnect:e,immediateDisconnect:o}=bA({refetchLater:!0}),{toggleMute:a}=GA();return i.useCallback(async()=>{F.exitVoiceState.click(),t?(await a(),e()):o()},[e,o,t,a])}var Ke={webm:"data:video/webm;base64,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",mp4:"data:video/mp4;base64,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"};const{webm:He,mp4:_e}=Ke,mA=()=>typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,gA=()=>"wakeLock"in navigator;class $e{constructor(){if(this.enabled=!1,gA()){this._wakeLock=null;const e=()=>{this._wakeLock!==null&&document.visibilityState==="visible"&&this.enable()};document.addEventListener("visibilitychange",e),document.addEventListener("fullscreenchange",e)}else mA()?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("title","No Sleep"),this.noSleepVideo.setAttribute("playsinline",""),this._addSourceToVideo(this.noSleepVideo,"webm",He),this._addSourceToVideo(this.noSleepVideo,"mp4",_e),this.noSleepVideo.addEventListener("loadedmetadata",()=>{this.noSleepVideo.duration<=1?this.noSleepVideo.setAttribute("loop",""):this.noSleepVideo.addEventListener("timeupdate",()=>{this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())})}))}_addSourceToVideo(e,o,a){var s=document.createElement("source");s.src=a,s.type=`video/${o}`,e.appendChild(s)}get isEnabled(){return this.enabled}enable(){return gA()?navigator.wakeLock.request("screen").then(e=>{this._wakeLock=e,this.enabled=!0,console.log("Wake Lock active."),this._wakeLock.addEventListener("release",()=>{console.log("Wake Lock released.")})}).catch(e=>{throw this.enabled=!1,console.error(`${e.name}, ${e.message}`),e}):mA()?(this.disable(),console.warn(`
        NoSleep enabled for older iOS devices. This can interrupt
        active or long-running network requests from completing successfully.
        See https://github.com/richtr/NoSleep.js/issues/15 for more details.
      `),this.noSleepTimer=window.setInterval(()=>{document.hidden||(window.location.href=window.location.href.split("#")[0],window.setTimeout(window.stop,0))},15e3),this.enabled=!0,Promise.resolve()):this.noSleepVideo.play().then(o=>(this.enabled=!0,o)).catch(o=>{throw this.enabled=!1,o})}disable(){gA()?(this._wakeLock&&this._wakeLock.release(),this._wakeLock=null):mA()?this.noSleepTimer&&(console.warn(`
          NoSleep now disabled for older iOS devices.
        `),window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause(),this.enabled=!1}}var At=$e;const et=TA(At),tt=()=>{const t=fA()&&pA,e=J("1359128927")?.value;return async()=>{if(t&&e)return await oe();{const o=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),a=await navigator.mediaDevices.enumerateDevices();return o.getTracks().forEach(n=>n.stop()),a.some(n=>n.kind==="audioinput"&&n.label!=="")}}};function ot(t){const e=t.default_voice_mode,o=t.modes.find(a=>a.mode===e);if(!o)throw new Error("Voice status returned a default_voice_mode that does not exist in the modes array");return o.default_model_slug}function BA(){const t=E(),e=ae(),{startVoiceMode:o,stopVoiceMode:a,isConnected:s,isVoiceModeActive:n}=OA(),r=i.useCallback(async c=>{const u={conversation_id:c.serverThreadId,parent_message_id:c.parentMessageId,model_slug:c.modelSlug,model_slug_advanced:c.isAdvancedMode?c.modelSlug:void 0,voice_mode:c.isAdvancedMode?"advanced":"standard",eventSource:c.eventSource,clientThreadId:c.clientThreadId,gizmo_id:c.gizmoId},d=t.formatMessage({id:"useVoiceModeButtonAction.error",defaultMessage:"Failed to start voice mode"});try{await o(u)}catch{if(c.isAdvancedMode&&c.retryWithStandard)try{await o({...u,voice_mode:"standard"})}catch{e.danger(d),F.voiceMode.error({error:d})}else e.danger(d),F.voiceMode.error({error:d})}},[t,o,e]);return{isVoiceModeActive:n,isConnected:s,toggleVoiceMode:r,stopVoiceMode:a}}const LA="inline-flex items-center bg-transparent text-token-text-secondary hover:text-token-text-primary",at=({message:t,onClick:e,type:o})=>{const a=E(),s=fA()&&pA;if(!t)return null;switch(o){case"microphone_denied":return s?A.jsxs("a",{href:"ms-settings:privacy-microphone",className:LA,children:[t,A.jsx(NA,{className:"icon-sm ml-1"})]}):A.jsx(yA,{onClick:e,message:t});case"connection_quality":return A.jsxs("div",{className:"inline-flex items-center",children:[t,A.jsx("button",{onClick:e,className:"ml-1",children:A.jsx("strong",{children:a.formatMessage(qA.retry)})})]});case"normal":return A.jsx(yA,{onClick:e,message:t})}},yA=({message:t,onClick:e})=>{const o=E();return A.jsxs("button",{onClick:e,className:LA,"aria-label":o.formatMessage(qA.openInfoModal),children:[t,A.jsx(NA,{className:"icon-sm ml-1"})]})},qA={openInfoModal:{id:"hintMessage.openInfoModal",defaultMessage:"Open info modal",description:"Open info modal about voice mode usage"},retry:{id:"hintMessage.retry",defaultMessage:"Retry",description:"Retry text next to lost connection message"}};function st(t){const{button:e,conversationId:o,modelId:a,onClick:s}=t,n=nA(o),r=vA(o),c=e.action==="new_chat"?r:a,{toggleVoiceMode:u}=BA(),d=i.useCallback(()=>{switch(e.action){case"new_chat":{const m=c??oA;Ie(`/?model=${m}`),u({serverThreadId:void 0,modelSlug:m,isAdvancedMode:!0,eventSource:`modal_${e.action}`,parentMessageId:void 0,retryWithStandard:!1,clientThreadId:se(),gizmoId:j.getGizmoId(o)});break}case"switch_to_standard":n&&a&&u({serverThreadId:n,modelSlug:c??oA,isAdvancedMode:!1,eventSource:`modal_${e.action}`,parentMessageId:void 0,retryWithStandard:!1,clientThreadId:n,gizmoId:j.getGizmoId(o)});break;case"ok":break;default:return}s?.()},[e.action,o,c,a,s,n,u]);return A.jsx(ne.Button,{onClick:d,title:e.title,color:t.color})}function UA({buttons:t,conversationId:e,modelId:o,onClick:a}){let s,n;return!t||t.length===0?{primary:void 0,secondary:void 0}:(t.forEach(r=>{const c=r.action==="new_chat",u=r.action==="switch_to_standard",d=c&&e,m=u&&e&&o,l=A.jsx(st,{button:r,conversationId:e,modelId:o,onClick:a,color:r.style});(d||m||r.action==="ok")&&(s?n||(n=l):s=l)}),{primary:s,secondary:n})}function nt({conversationId:t,modelId:e,isOpen:o,onClose:a,buttons:s,title:n,description_markdown:r}){const c=UA({buttons:s,conversationId:t,modelId:e,onClick:a}),u=A.jsx(YA,{className:"markdown",urlTransform:d=>d,children:r});return A.jsx(RA,{title:n,isOpen:o,onClose:a,size:"custom",className:"max-w-[550px]",type:"warning",showCloseButton:!0,children:A.jsxs("div",{className:"w-full",children:[A.jsx("p",{className:"mb-6 text-token-text-secondary",children:u}),A.jsx("div",{className:"flex justify-end",children:c.primary})]})})}function it({conversationId:t,currentModelId:e}){const o=E(),a=WA(),s=f(p=>p.server.usage),n=f(p=>p.server.voiceConnectionQuality),r=p=>p===FA.Lost,c=f(p=>p.server.connectionState),u=JA(),[d,m]=i.useState(!1),l=f(p=>p.server.toolUpdate),[h,x]=i.useState(!1),[g,k]=i.useState(!0),[b,v]=i.useState(null),[Q,y]=i.useState(null),[N,T]=i.useState(null),[L,I]=i.useState(!1),[Y,q]=i.useState(!1),G=i.useRef(!1),M=nA(t),{stopVoiceMode:U,toggleVoiceMode:P,isVoiceModeActive:B}=BA(),z=tt();i.useEffect(()=>{Y||z().then(p=>{I(p)}).finally(()=>{q(!0)})},[z,Y]);const iA=fA()&&pA,K=B&&Y&&!L,rA=B&&L&&!c&&u;i.useEffect(()=>{K&&(v(o.formatMessage(hA.hint)),y({title:o.formatMessage(hA.title),description_markdown:o.formatMessage(hA.description_markdown),buttons:[]}))},[o,iA,K]),i.useEffect(()=>{if(rA&&!G.current){G.current=!0,v(null),y(null);const p=ot(u),Z=j.getCurrentNode(t)?.parentId,_={serverThreadId:M,modelSlug:p,parentMessageId:Z,isAdvancedMode:u.default_voice_mode==="advanced",retryWithStandard:!0,eventSource:"composer_speech_button",clientThreadId:t,gizmoId:j.getGizmoId(t)};F.voiceSessionStarted.click(),P(_)}},[t,rA,u,M,P]);const{reaching_limit_disclosure:cA,exceed_limit_message:R}=s?.rate_limit_message??{},H=u?.modes.find(p=>p.mode===u?.default_voice_mode),lA=H?.disclosure_message,dA=r(n)?"Lost connection.":cA?.hint??R?.title??lA?.hint??null;i.useEffect(()=>{H&&v(H.disclosure_message?.hint??null)},[H]),i.useEffect(()=>{const p=l?.text;let Z,_,IA;return p&&(k(!1),Z=setTimeout(()=>{x(!0),_=setTimeout(()=>{x(!1),IA=setTimeout(()=>{k(!0)},750)},3e3)},750)),()=>{clearTimeout(Z),clearTimeout(_),clearTimeout(IA)}},[l]),i.useEffect(()=>{if(dA&&v(dA),R&&B){U();const p={title:R.title,description_markdown:R.description_markdown,buttons:R.buttons};d?T(p):(y(p),m(!0))}else if(!Q){const p=cA??lA;p&&y({title:p.title,description_markdown:p.message_markdown,buttons:p.buttons})}},[s,lA,U,B,dA,R,cA,d,Q,n]);const KA=i.useCallback(()=>{N&&(y(N),T(null)),m(!0)},[N]),HA=i.useCallback(()=>{m(!1)},[]),{startVoiceMode:_A}=OA(),$A=vA(t),Ae=f(p=>p.voiceMode),{voiceName:ee}=Me(),te=async()=>{try{v(null),await _A({conversation_id:M,model_slug:$A??oA,eventSource:"lost_connection_hint_message",voice_mode:Ae,voice:ee,clientThreadId:t,gizmo_id:j.getGizmoId(t)})}catch(p){const Z=p instanceof Error?p.message:String(p);F.voiceMode.error({error:Z,eventSource:"lost_connection_hint_message"})}};let O;return K?O="microphone_denied":r(n)?O="connection_quality":O="normal",A.jsxs("div",{className:"flex w-full flex-col items-center",children:[A.jsxs("div",{className:"relative mb-6 flex min-h-5 w-full items-center justify-center text-xs text-token-text-secondary",children:[l?.text&&A.jsx(C.div,{initial:{opacity:0},animate:{opacity:h?1:0},transition:{duration:.5},style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center"},children:A.jsxs("div",{className:"flex items-center",children:[l?.text&&A.jsx(de,{className:"icon-sm mr-1"}),l?.text]})}),A.jsx(C.div,{initial:{opacity:0},animate:{opacity:g?1:0},transition:{duration:.5},style:{position:"absolute",left:"50%",transform:"translateX(-50%)",textAlign:"center"},children:A.jsx("div",{className:"flex items-center",children:A.jsx(at,{type:O,message:b,onClick:O==="connection_quality"?te:KA})})})]}),A.jsxs("div",{className:tA("flex flex-row items-center gap-6","rounded-full px-3 py-1","transition-width duration-200 ease-in-out"),children:[A.jsx(jA,{capability:"video",children:A.jsx(ct,{})}),A.jsx(dt,{shouldQueryDevices:!!rA,hideTooltip:K}),A.jsx(jA,{capability:"screenshare",children:A.jsx(ut,{})}),A.jsx(EA,{onClick:a})]}),A.jsx(nt,{conversationId:t,modelId:e,isOpen:d,onClose:HA,title:Q?.title,description_markdown:Q?.description_markdown,buttons:Q?.buttons??[]})]})}function rt(){const t=J("716722001")?.value??!1,e=J("2436427643")?.value??!1,o=J("1413999995")?.value??!1;return{av:t,video:e,screenshare:o}}function jA({children:t,capability:e}){const o=rt();return!o.av||!o[e]?null:A.jsx(A.Fragment,{children:t})}function ct(){const{isVideoEnabled:t,isStartingVideo:e,toggleVideo:o}=xA();let a=null;e?a=X:a=me;const s=t?"bg-gray-900 hover:bg-gray-800 active:bg-gray-700":"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",n=t?"text-white dark:text-black":"text-black dark:text-white";return A.jsx(W,{onClick:()=>o("ControlButton"),disabled:e,icon:a,className:s,iconColor:n})}const lt=async()=>{try{return(await ye("audioinput"))?.label??""}catch(t){return console.warn("Error fetching default media device:",t),re.addError("Failed to fetch default media device",{error:t}),"Error accessing microphone devices"}};function dt({shouldQueryDevices:t,hideTooltip:e}){const{isMicrophoneEnabled:o,isMuting:a,toggleMute:s}=GA(),n=E(),{disconnectPending:r}=bA(),[c,u]=i.useState(""),d=o?ge:he,m=o?"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10":"bg-red-500/10 hover:bg-red-500/15 active:bg-red-500/20 dark:bg-red-500/10 dark:hover:bg-red-500/15 dark:active:bg-red-500/20",l=o?"text-black dark:text-white":"text-red-500";i.useEffect(()=>{t&&lt().then(x=>u(x))},[t]);const h=o?n.formatMessage({id:"nbbUMb",defaultMessage:"Turn on microphone"}):n.formatMessage({id:"PJzixV",defaultMessage:"Turn off microphone"});return A.jsx(W,{"aria-label":h,onClick:s,icon:d,disabled:a||r,className:m,iconColor:l,tooltipPrimaryLabel:!e&&c?h:"",tooltipSecondaryLabel:c})}function ut(){const{isScreenshareEnabled:t,isScreenshareStarting:e,toggleScreenShare:o}=CA();let a=null;e?a=X:a=pe;const s=t?"bg-gray-900 hover:bg-gray-800 active:bg-gray-700":"bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",n=t?"text-white dark:text-black":"text-black dark:text-white";return A.jsx(W,{onClick:()=>o("ControlButton"),disabled:e,icon:a,className:s,iconColor:n})}function EA({className:t,onClick:e}){const o=E(),{disconnectPending:a}=bA(),s="bg-black/5 hover:bg-black/10 active:bg-black/20 dark:bg-[rgba(255,255,255,0.04)] dark:hover:bg-white/5 dark:active:bg-white/10",n=o.formatMessage({id:"9Mto0a",defaultMessage:"End"});return A.jsx(W,{disabled:a,onClick:e,icon:a?X:ue,iconColor:"text-black dark:text-white",className:t??s,"aria-label":o.formatMessage({id:"7/8k4Y",defaultMessage:"End voice mode"}),tooltipPrimaryLabel:n})}function W(t){const{icon:e,disabled:o,className:a,iconColor:s="text-current",iconSize:n="icon-xl",buttonSize:r="h-16 w-16",tooltipPrimaryLabel:c,tooltipSecondaryLabel:u,...d}=t,[m,l]=i.useState(!1),h=i.useRef(void 0),x=i.useCallback(()=>{const b=window.setTimeout(()=>{l(!0)},300);h.current=b},[]),g=i.useCallback(()=>{clearTimeout(h.current),l(!1)},[]),k=A.jsx(mt,{className:tA(a,r,"overflow-hidden rounded-full border-none p-0.5 text-token-text-primary transition-colors duration-200 ease-in-out hover:text-token-text-secondary"),disabled:o,...d,children:A.jsx(e,{className:tA(n,s)})});return c?A.jsx(ie,{sideOffset:14,label:c,secondaryLabel:u,contentClassName:"flex flex-col items-center justify-center",className:"flex",open:m,side:"top",children:A.jsx("span",{onPointerEnter:x,onPointerLeave:g,children:k})}):k}const mt=C(ZA),hA={hint:{id:"micMessages.hint",defaultMessage:"Enable microphone access in Settings",description:"Hint to the user to manually enable microphone access for voice mode"},title:{id:"micMessages.title",defaultMessage:"Microphone access required",description:"Title for modal that informs the user that microphone access is required for voice mode"},description_markdown:{id:"micMessages.description_markdown",defaultMessage:"To use voice mode, you'll need to enable your microphone and try again.",description:"Description for modal that informs the user that microphone access is required for voice mode"}};var gt=Oe,ht=we,pt=gt(function(t,e,o){return t+(o?" ":"")+ht(e)}),ft=pt;const xt=TA(ft);function Ct({conversationId:t}){const e=J("1426009137")?.value,o=nA(t),a=vA(t),s=j.getCurrentNode(t)?.parentId,n=JA();return!e||!a?null:A.jsx(V,{conversationId:o??t,parentMessageId:s,status:n})}function V(t){const e=t?.status?.modes,[o,a]=i.useState(!1),[s,n]=i.useState(),r=i.useCallback(d=>{n(d),a(!0)},[]),c=E(),u=i.useCallback(()=>a(!1),[]);return A.jsxs(A.Fragment,{children:[A.jsx(Ye,{contentAlign:"center",triggerButton:A.jsx(V.Trigger,{}),children:e?e.map(d=>{const m=d.default_model_slug;return i.createElement(V.Item,{...t,modelSlug:m,key:d.mode,voiceStatusMode:d,onShowModal:r})}):A.jsx("div",{role:"progressbar","aria-valuetext":c.formatMessage({defaultMessage:"Loading voice modes",id:"voiceModeButton.loadingModes"}),"aria-busy":"true","aria-live":"assertive","aria-valuemin":0,"aria-valuemax":100,children:A.jsx(X,{"aria-hidden":"true",className:"my-4 min-w-full"})})}),A.jsx(V.Modal,{conversationId:t.conversationId,disabledModeMetadata:s,isOpen:o,onClose:u})]})}V.Modal=function(e){const o=e.disabledModeMetadata?.buttons??[],a=UA({buttons:o,conversationId:e.conversationId,modelId:oA,onClick:e.onClose}),s=A.jsx(YA,{children:e.disabledModeMetadata?.description_markdown});return A.jsx(RA,{title:e.disabledModeMetadata?.title,description:s,isOpen:e.isOpen,onClose:e.onClose,type:"success",primaryButton:a.primary,secondaryButton:a.secondary})};V.Trigger=i.forwardRef(function(e,o){const a=f(s=>s.voiceMode);return A.jsxs(Ze,{ref:o,...e,children:[xt(a)??A.jsx(X,{}),A.jsx(fe,{className:"icon-md text-token-text-tertiary"})]})});V.Item=function({conversationId:e,modelSlug:o,parentMessageId:a,voiceStatusMode:s,onShowModal:n}){const{disabled_mode_metadata:r,mode:c}=s,{toggleVoiceMode:u}=BA(),d=nA(e),m=i.useCallback(async()=>{r?n(r.disabled_message):u({serverThreadId:d,modelSlug:o,parentMessageId:a,isAdvancedMode:c==="advanced"&&!r,eventSource:"voice_mode_picker",retryWithStandard:!1,clientThreadId:e,gizmoId:j.getGizmoId(e)})},[e,r,c,o,n,a,d,u]);return A.jsx(Ge.Item,{onClick:m,children:A.jsxs("div",{children:[s.display_name,A.jsx("div",{className:"text-xs text-token-text-tertiary",children:s.description})]})})};function kt({conversationId:t}){const e=f(a=>a.server.messages),o=f(a=>a.voiceSessionId);return A.jsx(C.div,{className:"hidden h-full max-w-[400px] overflow-y-auto border-l border-l-token-sidebar-surface-secondary bg-token-main-surface-secondary pt-16 shadow-inner md:block",initial:{opacity:0,x:420,width:"0px"},animate:{opacity:1,x:0,width:"400px"},exit:{opacity:0,x:420,width:"0px"},transition:{type:"tween"},children:A.jsxs(D,{children:[A.jsx(Ct,{conversationId:t}),A.jsxs("div",{className:"p-4 py-2 text-lg font-semibold",children:["Voice Session ID: ",o]}),e.length?A.jsxs(C.div,{className:"flex h-full w-full flex-col",initial:{opacity:0,x:-100},animate:{opacity:1,x:0},exit:{opacity:0,x:-100},children:[A.jsxs("div",{children:[A.jsx("h3",{className:"p-4 py-2 text-lg font-semibold text-token-text-secondary",children:"Room Stats"}),A.jsx(bt,{})]}),A.jsx("h3",{className:"p-4 py-2 text-lg font-semibold text-token-text-secondary",children:"Messages"}),A.jsx("div",{className:"grow overflow-hidden",children:A.jsx(Ne,{children:A.jsx(C.ul,{className:"pointer-events-none flex w-full flex-col gap-4 pb-24 pt-4",initial:"initial",animate:"animate",exit:"exit",variants:PA,transition:{delayChildren:.25,staggerChildren:.05},children:e.map((a,s)=>A.jsx(It,{index:s,message:a},s))})})})]}):null]})})}function bt(){const t=f(a=>a.dev.room);if(!t)return null;const e=t.numParticipants,o=t.activeSpeakers;return A.jsx("div",{className:"px-4 pb-8",children:A.jsxs("div",{className:"flex flex-col flex-nowrap gap-2",children:[A.jsx(vt,{}),A.jsx(aA,{text:"Attendees"}),A.jsx(S,{name:"Participants",text:e}),A.jsx(S,{name:"Speakers",text:o.length}),A.jsx(Bt,{})]})})}function vt(){const t=f(n=>n.server.connectionState),e=f(n=>n.dev.room),[o,a]=i.useState("Unknown"),s=e?.localParticipant;return i.useEffect(()=>{if(s){const n=r=>{a(r)};return s.on("connectionQualityChanged",n),()=>{s.off("connectionQualityChanged",n)}}},[s]),A.jsxs(A.Fragment,{children:[A.jsx(aA,{text:"Connection"}),A.jsx(S,{name:"Quality",text:String(o)}),A.jsx(S,{name:"State",text:String(t)})]})}function Bt(){const t=f(m=>m.dev.room),[e,o]=i.useState(null),[a,s]=i.useState(null),[n,r]=i.useState(null),c=t?.getActiveDevice("audioinput"),u=t?.getActiveDevice("audiooutput"),d=t?.getActiveDevice("videoinput");return i.useEffect(()=>{async function m(){const l=await uA.getLocalDevices("audioinput"),h=await uA.getLocalDevices("audiooutput"),x=await uA.getLocalDevices("videoinput"),g=l.find(v=>v.deviceId===c),k=h.find(v=>v.deviceId===u),b=x.find(v=>v.deviceId===d);o(g?.label??"Unknown"),s(k?.label??"Unknown"),r(b?.label??null)}m()},[c,u,d]),A.jsxs(A.Fragment,{children:[A.jsx(aA,{text:"Devices"}),n?A.jsx(S,{icon:xe,name:"Video Input",text:n}):null,A.jsx(S,{icon:MA,name:"Audio Input",text:e??"Unknown"}),A.jsx(S,{icon:Ce,name:"Audio Output",text:a??"Unknown"}),A.jsx(aA,{text:"Monitors"}),A.jsx(S,{name:"Mic level",icon:MA,text:"unknown",content:A.jsx(Et,{})})]})}function Et(){const t=f(e=>e.dev.room?.localParticipant.audioLevel);return A.jsx("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:A.jsx("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:Array.from({length:10}).map((e,o)=>A.jsx("div",{className:`h-2 w-2 rounded-full ${(t??0)>o*.1?"bg-gray-500":"bg-token-main-surface-tertiary"}`},o))})})}function aA({text:t}){return A.jsx("h4",{className:"text-md font-semibold",children:t})}function S(t){return A.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-2",children:[A.jsx("span",{className:"opacity-85",children:t.icon?A.jsx(t.icon,{className:"h-[0.75rem] w-[0.75rem]"}):`${t.name}:`}),t.content??A.jsx("span",{className:"line-clamp-1 rounded-lg bg-token-main-surface-tertiary p-0.5 px-1 font-mono text-xs",children:t.text})]})}function It({index:t,message:e}){const[o,a]=i.useState(!1),s=E();let n=null;switch(e.source){case"remote":n=ve;break;case"local":n=be;break}return A.jsx(C.div,{className:"w-full border-t border-token-main-surface-tertiary p-4",variants:PA,children:A.jsxs("div",{className:"flex w-full flex-col gap-2 rounded-lg bg-token-main-surface-secondary",children:[A.jsxs("div",{className:"font-mono text-[0.65rem] font-semibold text-token-text-secondary",children:[A.jsxs("div",{className:"flex w-full flex-row flex-nowrap items-center justify-between",children:[A.jsxs("div",{className:"flex flex-row flex-nowrap items-center gap-1",children:[A.jsx(n,{className:"h-3 w-3 text-token-text-secondary"}),A.jsx("span",{children:` | ${t+1} | ${s.formatDate(e.timestamp,{hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:2})}`})]}),A.jsx("div",{className:"flex flex-row flex-nowrap items-center gap-2",children:A.jsx(ZA,{className:"rounded-full p-0.5",color:"ghost",size:"small",onClick:()=>a(r=>!r),children:A.jsx(ke,{className:`transform transition-transform ${o?"rotate-180":""}`})})})]}),A.jsx("div",{className:"mt-1 text-xs font-bold",children:e.type})]}),A.jsx(D,{children:o?A.jsx(C.pre,{initial:{opacity:0,transform:"blur(4px)"},animate:{opacity:1,transform:"blur(0px)"},exit:{opacity:0,transform:"blur(4px)"},className:"overflow-x-auto rounded-md bg-token-main-surface-tertiary p-2 text-xs text-token-text-secondary",children:JSON.stringify(e.payload,null,2)}):null})]})})}const PA={hidden:{opacity:0,x:100},animate:{opacity:1,x:0},exit:{opacity:0,x:100}};function Mt({children:t}){const{isVideoEnabled:e}=xA(),{isScreenshareEnabled:o}=CA(),a=e||o;return A.jsx(D,{mode:"wait",children:a?A.jsx("div",{className:"flex h-full w-full flex-nowrap items-center",children:e?A.jsx(wt,{}):A.jsx(St,{})}):A.jsx(C.div,{className:"flex h-full w-full items-center justify-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:t},"children")})}function wt(){const{isVideoEnabled:t,isStartingVideo:e,toggleVideo:o}=xA(),s=sA([kA.Source.Camera]).find(r=>r.participant.isLocal),n=t&&!e&&s;return i.useEffect(()=>{const r=s?.publication?.track;if(r){const c=()=>{o("Browser Video Controls")};return r.on("ended",c),()=>{r.off("ended",c)}}},[s,o]),A.jsx(D,{children:n&&A.jsx(zA,{children:A.jsxs("div",{className:"aspect-w-16 aspect-h-9 group relative max-h-[95%] w-fit max-w-[60%] overflow-hidden rounded-3xl shadow-md",children:[A.jsx("div",{className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-90",children:A.jsx(EA,{onClick:()=>o("StopButton"),className:"bg-gray-900 bg-opacity-20 backdrop-blur-lg hover:bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-20 dark:backdrop-blur-lg dark:hover:bg-opacity-30"})}),A.jsx(XA,{className:"h-full w-full object-contain",trackRef:s})]})},"camera-renderer")})}function St(){const{isScreenshareEnabled:t,isScreenshareStarting:e,toggleScreenShare:o}=CA(),s=sA([kA.Source.ScreenShare]).find(r=>r.participant.isLocal),n=t&&!e&&s;return i.useEffect(()=>{const r=s?.publication?.track;if(r){const c=()=>{o("Browser ScreenShare Controls")};return r.on("ended",c),()=>{r.off("ended",c)}}},[s,o]),A.jsx(D,{children:n&&A.jsx(zA,{children:A.jsxs("div",{className:"aspect-w-16 aspect-h-9 group relative max-h-[95%] w-fit max-w-[60%] overflow-hidden rounded-3xl shadow-md",children:[A.jsx("div",{className:"absolute right-2 top-2 z-10 opacity-0 transition-opacity group-hover:opacity-90",children:A.jsx(EA,{onClick:()=>o("StopButton"),className:"bg-gray-900 bg-opacity-20 backdrop-blur-lg hover:bg-opacity-30 dark:bg-gray-900 dark:bg-opacity-20 dark:backdrop-blur-lg dark:hover:bg-opacity-30"})}),A.jsx(XA,{className:"h-full w-full object-contain",trackRef:s})]})},"screenshare-renderer")})}function zA({children:t,key:e}){return A.jsx(C.div,{className:"flex h-full w-full flex-col items-center justify-center gap-2 bg-token-main-surface-primary",initial:{opacity:0,transform:"blur(12px)",scale:.75},animate:{opacity:1,transform:"blur(0px)",scale:1},exit:{opacity:0,transform:"blur(12px)",scale:.75},transition:{duration:.2},children:t},e)}const $=(t,e)=>{const[o,a]=i.useState(t===e?performance.now():0),s=i.useRef(e);i.useEffect(()=>{s.current!==e&&t===e&&a(performance.now()),s.current=e},[e,t]);const n=i.useCallback(()=>{a(0)},[]);return[t===e?1:0,o,n]},AA=([t,e,o],a=500)=>{const[s,n]=i.useState(t),r=i.useRef(t),c=i.useRef(void 0),u=i.useCallback((d,m,l)=>{const h=x=>{const g=Math.min((x-d)/a,1),k=m+g*(l-m);n(k),g<1&&(c.current=requestAnimationFrame(h))};c.current=requestAnimationFrame(h)},[a]);return i.useEffect(()=>{if(r.current!==t){r.current=t,c.current&&cancelAnimationFrame(c.current);const d=s,m=t;u(performance.now(),d,m)}},[u,s,t]),[s,e/1e3,o]},VA=t=>{const[e,o]=i.useState({audioData:[0,0,0,0],cumulativeAudioData:[0,0,0,0]}),a=i.useRef([0,0,0,0]),s=i.useRef(void 0),n=i.useRef(performance.now()),{bandMagnitudes:r,cumulativeMagnitude:c}=Je(t,{bands:3,bins:1,gainMultipliers:[10,1,1]});a.current=[...r,c].flat();const u=i.useCallback(()=>{const d=performance.now(),m=(d-n.current)/1e3;n.current=d;const l=a.current,{audioData:h,cumulativeAudioData:x}=e,g=Fe({deltaTimeS:m,audioDataRaw:l,prevAudioData:h,prevCumulativeAudioData:x});o(g)},[e]);return i.useEffect(()=>(s.current||(s.current=window.setInterval(u,Xe)),()=>{clearInterval(s.current),s.current=void 0}),[u]),e},Qt="webp",yt=512,jt=512,Vt="srgb",Dt=3,Tt="uchar",Rt=72,Zt=!1,Nt=8,Yt=!1,Gt=!1,Ot="https://cdn.oaistatic.com/assets/noise-watercolor-m3j88gni.webp",Jt={format:Qt,width:yt,height:jt,space:Vt,channels:Dt,depth:Tt,density:Rt,isProgressive:Zt,paletteBitDepth:Nt,hasProfile:Yt,hasAlpha:Gt,src:Ot};if(typeof window<"u"){const t=new window.Image;t.crossOrigin="anonymous",t.src=Jt.src,t.onload=()=>{}}function DA({className:t}){return A.jsx(Kt,{className:t})}const Ft=1.55,Xt=1.4,Wt="voice-wav",Lt="shout",qt="User",Ut={bands:4,loPass:0,hiPass:400},Pt=[300,300];function zt(){const{resolvedTheme:t}=ce(),e=t==="dark",o=f(g=>g.voiceMode==="advanced"),a=sA([kA.Source.Microphone]),s=a.find(g=>g.publication.trackName===Wt),n=a.find(g=>g.publication.trackName===Lt);let r=wA(n?.publication.audioTrack,Ut);r.length===0&&(r=[0,0,0,0]),r.map(g=>g*Xt);let c=VA(n?.publication.audioTrack),u=VA(s?.publication.audioTrack);const d=c.audioData.map((g,k)=>{const b=u.audioData[k];return g>0&&b>0?(g+b)/2:g>0?g:b}),m=c.cumulativeAudioData.map((g,k)=>{const b=u.cumulativeAudioData[k];return g>0&&b>0?(g+b)/2:g>0?g:b}),l=f(g=>g.server.remoteState),h=a.find(g=>g.participant.identity===qt),x=(wA(h,{bands:1,loPass:0,hiPass:400})[0]??0)*Ft;return{remoteState:l,userVolume:x,isAdvanced:o,avgMag:d,cumulativeAudio:m,isDarkMode:e,standardBloopVolumes:r}}function Kt({className:t}){const{remoteState:e,userVolume:o,isAdvanced:a,avgMag:s,cumulativeAudio:n,isDarkMode:r,standardBloopVolumes:c}=zt(),[u,d]=i.useState(Pt),m=i.useCallback(B=>{d([B.width,B.height])},[]),l=i.useRef([0,0,0,0]);i.useEffect(()=>{e===w.Connecting&&(l.current=[0,0,0,0])},[e]);const h=i.useRef(performance.now());i.useEffect(()=>{const B=performance.now();e===w.Speaking&&B-h.current>50&&(h.current=B,l.current=l.current.map((z,iA)=>z+s[iA]))},[e,s]);const[x,g]=AA($(w.Listening,e)),[k,b]=AA($(w.Speaking,e)),[v,Q]=AA($(w.Thinking,e)),[y,N]=AA($(w.Halted,e)),[T,L]=i.useState(performance.now()/1e3);i.useEffect(()=>{const B=setInterval(()=>{L(performance.now()/1e3)},50);return()=>clearInterval(B)},[]);const I=i.useMemo(()=>performance.now()/1e3,[]),[Y,q]=i.useState(1e5),G=i.useRef(e);i.useEffect(()=>{e===w.Connecting?q(1e5):G.current===w.Connecting&&q(T),G.current=e},[e,x,T]);const M=We(a),U=a?s:c,P={time:T-I,micLevel:o,stateListen:x,listenTimestamp:Math.max(g-I,0),stateThink:v,thinkTimestamp:Math.max(Q-I,0),stateSpeak:k,speakTimestamp:Math.max(b-I,0),readyTimestamp:Y-I,stateHalt:y,haltTimestamp:Math.max(N-I,0),touchDownTimestamp:0,touchUpTimestamp:0,stateFailedToConnect:0,failedToConnectTimestamp:0,avgMag:U,cumulativeAudio:n??l.current,isNewBloop:!0,isAdvancedBloop:a,bloopColorMain:Array.from(M.bloopColorMain),bloopColorLow:Array.from(M.bloopColorLow),bloopColorMid:Array.from(M.bloopColorMid),bloopColorHigh:Array.from(M.bloopColorHigh),isDarkMode:r,screenScaleFactor:window.devicePixelRatio,viewport:u,silenceAmount:0,silenceTimestamp:0,fadeBloopWhileListening:!1};return A.jsx(Le,{className:tA("flex items-center justify-center",t),vert:qe,frag:Ue,variables:P,onViewportUpdate:m,ManagerClass:Pe})}const Ht=({conversationId:t})=>{const e=sA(),[o,a]=i.useState(!1),[s,n]=i.useState(!1),r=i.useCallback(()=>{e&&e.length>0&&e.forEach(m=>{const{publication:l}=m;l.audioTrack instanceof SA?(n(l.audioTrack.isMuted),l.audioTrack.mute()):l.audioTrack instanceof QA&&l.audioTrack.setMuted(!0)})},[e]),c=i.useCallback(()=>{e&&e.length>0&&e.forEach(m=>{const{publication:l}=m;l.audioTrack instanceof SA?s||l.audioTrack.unmute():l.audioTrack instanceof QA&&l.audioTrack.setMuted(!1)})},[e,s]),u=()=>{r(),a(!0)},d=()=>{c(),a(!1)};return A.jsxs(A.Fragment,{children:[A.jsx(W,{onClick:u,icon:Be,iconColor:"text-token-text-tertiary",className:"h-[40px] w-[40px] bg-transparent hover:bg-black/10 active:bg-black/20 dark:bg-transparent dark:hover:bg-white/5 dark:active:bg-white/10",iconSize:"icon-md"}),o&&A.jsx(ze,{conversationId:t,onClose:d})]})};class _t extends Worker{constructor(e,o){const a=String(e);super(a.includes("://")&&!a.startsWith(location.origin)?URL.createObjectURL(new Blob([`import("${a}")`],{type:"text/javascript"})):e,o)}}const $t=new _t(new URL("https://cdn.oaistatic.com/assets/livekit-client.e2ee.worker-DCt9knlM.js",import.meta.url),{type:"module"}),Ao=i.memo(function({children:e}){const o=i.useRef({keyProvider:new je}).current,[a,s]=i.useState(!1),{token:n,url:r,e2eeKey:c}=f(l=>l.credentials),u=Ve(),d=f(l=>l.isVoiceModeActive),m=f(l=>l.audioInputDevice?.deviceId);return i.useEffect(()=>{const l=n&&r&&c;!a&&l?o.keyProvider.setKey(c).then(()=>{s(!0)}):a&&!l&&s(!1)},[n,r,c,a,o]),d?A.jsxs(De,{...u,connect:!0,token:n??void 0,serverUrl:r??void 0,audio:{deviceId:{ideal:m,exact:m},noiseSuppression:!0,echoCancellation:!0},options:{e2ee:{keyProvider:o.keyProvider,worker:$t}},children:[e,a&&n&&r&&A.jsx(Re,{}),a&&n&&r&&A.jsx(Te,{})]}):null});function Xo({conversationId:t,currentModelId:e,isActiveWindow:o}){const[a,s]=i.useState(!1),n=f(h=>h.isVoiceModeActive),r=f(h=>h.server.voiceConnectionQuality),c=Se(),u=f(h=>h.screenshare!=null),d=f(h=>h.video!=null),m=E(),l=WA();return le(l),i.useEffect(()=>{if(!o)return;const h=new et;return n?h.enable():h.disable(),()=>{h.disable()}},[n,o]),o&&A.jsxs(Ao,{children:[A.jsx(D,{children:n?A.jsx(C.div,{className:"fixed left-0 top-0 z-50 flex h-full w-full flex-col bg-token-main-surface-primary",initial:"hidden",animate:"visible",exit:"hidden",variants:eA,children:A.jsxs(C.div,{className:"relative h-full w-full",variants:eA,children:[A.jsxs(C.div,{variants:eA,className:"flex h-full w-full flex-col justify-between gap-6",children:[A.jsxs(C.div,{className:"relative mt-6 flex w-full justify-center",children:[A.jsx("div",{className:"flex w-full items-center justify-center",children:(u||d)&&A.jsx(DA,{className:"h-16 w-16"})}),A.jsx("div",{className:"mr-4",children:A.jsx(Ht,{conversationId:t})})]}),A.jsxs("div",{className:"flex h-full min-h-0 items-center justify-center",children:[A.jsx(Mt,{children:A.jsx(DA,{className:"h-max min-h-52 w-max min-w-52"})}),A.jsx(D,{children:a?A.jsx(kt,{conversationId:t}):null})]}),A.jsx(C.div,{className:"mb-6 flex justify-center",children:A.jsx(it,{conversationId:t,currentModelId:e})})]}),A.jsx(C.div,{className:"absolute bottom-0 right-0 flex w-auto items-center justify-end p-4",variants:eA,children:c?A.jsx(Qe,{onClick:()=>s(h=>!h),icon:Ee}):null})]})}):null}),r===FA.Poor&&A.jsx("div",{className:"absolute left-1/2 top-6 z-50 -translate-x-1/2 transform",children:A.jsx("div",{className:"inline-flex flex-col items-center rounded-full border border-token-border-light bg-token-main-surface-primary px-6 py-3",children:A.jsx("span",{className:"text-token-text-secondary",children:m.formatMessage({id:"YE2Eng",defaultMessage:"Poor connection"})})})})]})}const eA={hidden:{opacity:0,transform:"blur(4px)"},visible:{transform:"blur(0px)",opacity:1},exit:{opacity:0,transform:"blur(4px)"}};export{Xo as VoiceModeLayout};
//# sourceMappingURL=hev6b56gorfrl6sz.js.map
