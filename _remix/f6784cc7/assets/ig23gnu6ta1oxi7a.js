import{c as m,f as p,eo as A,bU as g,ep as C,aO as I,dn as R,j as T,r as u}from"./5owd3ee156wpz27v.js";import{T as h}from"./n9bl8h8dwgedvxgc.js";const c=m(p(()=>({statusMap:{}}))),F=s=>c(t=>t.statusMap[s]),H=(s,t)=>{c.setState(n=>{n.statusMap[s]=t;const e=h.getServerThreadId(s);e&&(n.statusMap[e]=t)})},f=s=>{c.setState(t=>{for(const{id:n,async_status:e}of s)e!=null&&(t.statusMap[n]={source:A.SERVER,value:e})})},_=28,y="conversationHistory";function N(){const t=g()?.includes(C)??!1,n=I(),e=!t&&!!n?.data,{data:r,fetchNextPage:S,hasNextPage:d,isInitialLoading:v,isFetchingNextPage:E,isError:l}=R({queryKey:[y],queryFn:async({pageParam:a})=>{const o=await T.getConversations({offset:a,limit:_});return f(o.items),o},initialPageParam:0,getNextPageParam:a=>{const o=a.offset+a.limit;return o<a.total?o:void 0},enabled:e}),i=u.useMemo(()=>r?.pages.flatMap(a=>a.items)??[],[r]);return u.useEffect(()=>{f(i)},[i]),{conversations:i,data:r,fetchNextPage:S,hasNextPage:d,isLoading:v,isFetchingNextPage:E,isError:l}}function O(s){s.invalidateQueries({queryKey:[y]})}export{y as C,F as a,O as r,H as s,N as u};
//# sourceMappingURL=ig23gnu6ta1oxi7a.js.map
