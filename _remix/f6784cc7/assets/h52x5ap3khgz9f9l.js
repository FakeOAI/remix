const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-n7kmdbb6lltubkgi.js","assets/5owd3ee156wpz27v.js","assets/jy1r24jznpivy1dp.js","assets/root-chlr7052.css","assets/yh63950ulj5nrzoi.js","assets/i6xi3s7uv52pwxhq.js","assets/conversation-small-kig9eefw.css","assets/iki8xg9zvxe0x3up.js","assets/lmzf96u3byd7ysa0.js","assets/n9bl8h8dwgedvxgc.js","assets/m40jmshfqkclfeg2.js","assets/gk6m9wtxsqq161m3.js","assets/nymvvi4k8c99doop.js","assets/c1e3a7wd7o4327i5.js","assets/i1wh9kgb3xj7xo01.js","assets/c6yqva1b1l3p3i6e.js","assets/d76uy7jpp8ubqzph.js","assets/nshgx7w2afmw4s9d.js","assets/d9w2pj5bnp7mjzpk.js","assets/hsx2th79t7rdlzqx.js","assets/lugcfsfrjzz2us1d.js","assets/ig23gnu6ta1oxi7a.js","assets/g850gwkouqxm2v39.js","assets/vdkdw1y5n43i5ns4.js","assets/cj320v9fh960ptuz.js","assets/lwyt3hp63vsn7m7u.js","assets/hmd5sbqjtt0pd6mc.js","assets/iij0uzeigib4oo15.js","assets/m7l12jih5aqjz81g.js","assets/ecu2ilsyyue2f8ej.js","assets/cr6lg9xf6lo3hoz0.js","assets/itghwucfyv5ciib7.js","assets/fivk43558id4ijtb.js","assets/kgbpx41m5ewwlikj.js","assets/icqbyup2j1m5llig.js","assets/983a0dy92b3ronpv.js","assets/h2884p3m12t60kpq.js","assets/d9oat00mlpbncey5.js","assets/kqwdyvkaaavvn8k3.js","assets/chtpv1t7jthcarb1.js","assets/lvrs7r96v7os0iw7.js","assets/esagy0birmo3a4jd.js","assets/gz5e1tcybd4wk8iv.js","assets/nhwwej1nq0zrd7sc.js","assets/g0tvefbvrrw1o073.js","assets/jmscepvur27er7ee.js","assets/fcquab63e2czds2a.js","assets/eic6tf90outftk73.js","assets/ndyq6honxnft3vgw.js","assets/lel9khdnprlw2oee.js","assets/cb8785d1r3lb23l2.js","assets/ktw7tj3xse9vfvgq.js","assets/n43lab3iutt0pnjt.js","assets/o19tl9uepmhlqwpz.js","assets/iej0cupg2dqkmejt.js","assets/d6vibzdxec56zc9s.js","assets/g0qdr67llb5bfri8.js","assets/jk8w36bsokizpx57.js","assets/h6simizcmrr3520q.js","assets/itkvdkj9vb8qaytf.js","assets/cpivnpg7gm7322qh.js","assets/mvwz5f71dbdbf46a.js","assets/iqnuo36f7yyxkzky.js","assets/b6vnsbdddsvwt2n6.js","assets/mjvnnsv8zvhcmuxe.js","assets/swiper-kmk1dd5x.css","assets/f5l4dq2eqb89zl7f.js"])))=>i.map(i=>d[i]);
import{bY as _,l as e,r as c,m as h,a0 as y,a3 as z,a2 as R,a as F,e1 as V,b0 as N,be as $,a1 as U,aE as k,aF as w,W,T as q,eJ as Q,aO as J,Q as X,cq as Y}from"./5owd3ee156wpz27v.js";import{cN as v,a5 as j,ca as K,eB as Z,dL as ee,bQ as se,eC as te,eD as ne,aJ as H,ah as ae,q as ie,eE as oe,eF as re,cc as ce,cd as le,c5 as M,eG as C,c8 as de,eH as ue,V as S,c6 as me,aI as he,c as fe,N as xe,eI as pe,bB as ge}from"./i6xi3s7uv52pwxhq.js";import{q as be,aa as ye,a_ as Se,a$ as ve}from"./jy1r24jznpivy1dp.js";import{B as je,D as Ie}from"./gk6m9wtxsqq161m3.js";import{m as Ne}from"./m40jmshfqkclfeg2.js";import{d as Ce,m as Te}from"./n9bl8h8dwgedvxgc.js";import{u as ke,a as A,H as we,b as He}from"./iqnuo36f7yyxkzky.js";import{u as Me,r as Ae}from"./ig23gnu6ta1oxi7a.js";import{N as Ee}from"./iki8xg9zvxe0x3up.js";function Be(){const s=v(j.SonicSidebar),[t,n]=c.useState(!1);return s.isLoading||!s.eligible?null:e.jsx(Ne.div,{className:"no-draggable group pb-0",whileTap:{scale:.98},children:e.jsx(Le,{children:e.jsx(K,{href:"/search",target:"_blank",icon:e.jsx("div",{className:h("gizmo-shadow-stroke mr-[0.5] flex h-6 w-6 items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:e.jsx(Z,{})}),label:"SearchGPT",hoverRightIcon:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(Pe,{isOpen:t,setIsOpen:n,onDismiss:()=>s.markAsViewed()}),e.jsx(be,{className:h("icon-md text-token-text-tertiary",!t&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function Ge(){const s=se(),t=v(j.hasSeenSncSidebarTooltip),n=te(),i=ne(),{activeModals:o}=H(),a=ae();return!t.isLoading&&t.eligible&&!n&&o.size===0&&!s&&!i&&!a}function Le({children:s}){const t=Ge(),n=v(j.hasSeenSncSidebarTooltip);return t?e.jsx(ee,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:n.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:e.jsx("div",{className:"w-full",children:s})}):e.jsx(e.Fragment,{children:s})}function Pe({isOpen:s,setIsOpen:t,onDismiss:n}){return e.jsx(je,{open:s,onOpenChange:t,triggerButton:e.jsx("button",{className:h("flex text-token-text-tertiary",s?"":"invisible group-hover:visible"),onClick:i=>{i.preventDefault()},children:e.jsx(ye,{className:"icon-md"})}),children:e.jsx(Ie.Item,{onClick:i=>{i.preventDefault(),n()},children:e.jsx(y,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}function De(){const s=_("114024");return!s.value||s.isLoading?null:e.jsx(Be,{})}const T=U({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function Oe({activeId:s,isPrimaryBackgroundColor:t}){const n=F(),[i,o]=c.useState(!1),[a,l]=c.useState(0),r=V(),{conversations:d,hasNextPage:f,fetchNextPage:p,isLoading:x,isFetchingNextPage:E,isError:I}=Me(),g=c.useRef(null),B=c.useCallback(m=>{x||m==null||(g.current?.disconnect(),g.current=new IntersectionObserver(O=>{O[0].isIntersecting&&f&&p()}),g.current.observe(m))},[x,f,p]);c.useEffect(()=>()=>{g.current?.disconnect()},[]),c.useMemo(()=>{ie.publish({kind:"refreshHistory",conversations:d})},[d]);const b=d;c.useEffect(()=>{const m=oe(re(),Date.now());r(()=>{l(a+1)},m+1e3)},[a,r]);const u=b.length===0;c.useEffect(()=>{u||ce({namespace:le.ChatPageLoad})?.logTiming("render_history_items")},[u]);const G=ke(b,a),{isCollapsible:L}=A(),P=H(m=>m.isHistoryCollapsed),D=M();return e.jsxs(Re,{$centered:x||I||u,$screenArch:D,children:[u&&x&&e.jsx(N,{className:"m-auto"}),u&&I&&e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(y,{...T.unableToLoadHistory}),!i&&e.jsx("div",{className:"mt-1",children:e.jsx($,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{o(!0),Ae(n)},children:e.jsx(y,{...T.retryButton})})})]}),!x&&!u&&e.jsx("div",{children:L&&P?e.jsx(_e,{activeId:s,items:b,isPrimaryBackgroundColor:t}):e.jsx(we,{activeId:s,bucketedItems:G,hasNextPage:f,items:b,isPrimaryBackgroundColor:t,infiniteScrollTriggerElementRef:B})}),E&&e.jsx("div",{className:"m-4 mb-5 flex justify-center",children:e.jsx(N,{})})]})}function _e({activeId:s,items:t,isPrimaryBackgroundColor:n}){const{isCollapsible:i,recentConversationLimit:o}=A(),a=M(),l=t.slice(0,o);if(s){const r=t.findIndex(d=>d.id===s);r>o-1&&l.push(t[r])}return e.jsxs("div",{className:h(n&&!a&&"first:mt-0",!a&&"relative mt-5 last:mb-5"),children:[e.jsx("div",{className:h("sticky top-[--sidebar-sticky-threshold]",a&&["z-5",C.historyHeading,C.historyHeadingTimeline],!a&&"z-20"),children:e.jsx("span",{className:"flex h-9 items-center",children:e.jsx(de,{$screenArch:a,children:e.jsx(y,{id:"VbQeVG",defaultMessage:"Recent"})})})}),e.jsx("ol",{className:a?"mt-1 flex flex-col gap-0.5":void 0,children:l.map((r,d)=>{const f=s===r.id,p=d===0;return e.jsx(He,{item:r,isActive:f,isFirstItem:p,isInRecents:!0,isPrimaryBackgroundColor:n,testId:`history-item-${d}`},`history-item-${r.id}`)})}),i&&e.jsx(ue,{type:"more",onClick:S.toggleHistoryCollapsed})]})}const ze=z.memo(Oe),Re=R.div`flex flex-col gap-2 pb-2 text-token-text-primary text-sm
${({$centered:s,$screenArch:t})=>[s&&"h-full justify-center items-center empty:hidden",t?"mt-0 pb-8":"mt-5"]}`,Fe=k(()=>w(()=>import("./sso-n7kmdbb6lltubkgi.js").then(s=>s.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65])).then(s=>s.FannyPackAction)),Ve=k(()=>w(()=>import("./f5l4dq2eqb89zl7f.js"),__vite__mapDeps([66,1,2,3,5,6,47,8,9,10,11,62,21,23,46,7,12,13,14,15,16,17])).then(s=>s.GizmoSidebarList));function Ze({clientThreadId:s,onNewThread:t}){const n=Ce(s),i=J(),{isUnauthenticated:o}=X(),a=Te(s),l=Y();return o?null:e.jsxs(e.Fragment,{children:[e.jsx(ge,{onNewThread:t}),i?.canInteractWithGizmos()?e.jsx(Ve,{currentGizmoId:a}):e.jsx(De,{}),!o&&e.jsx(ze,{activeId:l?void 0:n})]})}function es({className:s,onNewThread:t}){const n=W(),i=q(),o=me(),a=Q(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:l}=he();return e.jsxs("div",{className:h("flex",a?.visible&&a.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(fe,{sideOffset:4,label:n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(xe,{className:"no-draggable","aria-label":n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{pe(i)?S.toggleNavSidebar():S.togglePopoverNavSidebar()},icon:Se,mobileIcon:ve,surfaceContext:"secondary","data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[l&&e.jsx(Fe,{}),!o&&e.jsx(Ee,{onClick:t,testId:"create-new-chat-button"})]})]})}export{Ze as C,ze as H,es as S,De as a};
//# sourceMappingURL=h52x5ap3khgz9f9l.js.map
