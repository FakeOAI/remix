import{J as y,_ as k,dx as j,ah as v,g as _,j as a,ar as S,ao as d,bI as M,ax as E,r as f,d as p,P as R}from"./ns1tfo6glfhr2njn.js";import{eW as A,eX as C,bP as T,eY as D,eZ as N,e_ as m,e$ as L,a6 as w,a7 as F,f0 as P,f1 as $}from"./lnlvqx2sg8j5t2nm.js";import{F as z}from"./b4v2lnxl25hbwkp3.js";import{S as I,a as U}from"./i2aauj1ucwqe9q3a.js";import{g as H}from"./kqwdyvkaaavvn8k3.js";import{a as W}from"./mo6rtvdy5i8go1pk.js";import{E as q}from"./6vult52rtqtmju65.js";import{m as B}from"./bf1fa2lxk3a560fa.js";import"./jeba75ammv4sijqh.js";function G({date:e}){const t=y(),n=e instanceof Date?e:new Date(e*1e3),r=A(n,new Date);if(r<4&&r>-4){const o=t.formatRelativeTime(r,"day",{numeric:"auto"});return o.charAt(0).toUpperCase()+o.slice(1)}else return t.formatDate(n,{year:"numeric",month:"long",day:"numeric"})}var J=j,O=k,V=C,X=v;function Y(e,t){var n=X(e)?J:V;return n(e,O(t))}var Z=Y,K=T,Q=Z;function ee(e,t){return K(Q(e,t),1)}var te=ee;const ae=_(te),ne=(e,t)=>{const n=L();return w(()=>{const r=F.getTurnContentReferences(e,t);return P(r,n)})};function xe({clientThreadId:e,turnIndex:t,messageId:n,isInSidebar:r=!1}){const o=ne(e,t),i=D(e,t),s={clientThreadId:e,messageId:n,turnIndex:t},l=ae(i,c=>c.entries).toSorted((c,u)=>(u?.pub_date??0)-(c?.pub_date??0));return a.jsxs("div",{className:S("flex w-full flex-col border-t border-token-border-light bg-token-main-surface-primary",r?"mt-[-57px]":"mt-0"),children:[a.jsx(x,{title:a.jsx(d,{id:"dlVlo6",defaultMessage:"Citations"}),items:o,analyticsMetadata:{...s,linkType:"citation"},messageId:n}),a.jsx(x,{title:a.jsx(d,{id:"iUafP7",defaultMessage:"Search Results"}),items:l,analyticsMetadata:{...s,linkType:"search_result"},messageId:n,analyticsIndexOffset:o.length})]},`${t}-${e}`)}function x({title:e,items:t,analyticsMetadata:n,analyticsIndexOffset:r=0,messageId:o}){return!t||t.length===0?null:a.jsxs("div",{children:[a.jsx(h,{className:"sticky top-0 z-[1] h-[56px] border-b border-token-border-light bg-token-main-surface-primary px-6 py-4 text-sm font-medium text-token-text-primary",children:e}),a.jsx("div",{className:"flex flex-col px-3 py-2",children:t.map((i,s)=>a.jsx(h,{index:s,children:a.jsx(se,{item:i,analyticsMetadata:{...n,groupIndex:s,entireListIndex:s+r},messageId:o},s)},`${e}-${s}`))})]})}function h({children:e,index:t=0,className:n=""}){return a.jsx(B.div,{className:n,initial:{opacity:0},animate:{opacity:1},transition:{delay:(t+1)*.03},children:e})}function se({item:e,analyticsMetadata:t,messageId:n}){const r=W(e.url).data??H(e.url,"short"),o=c=>"ref_id"in c&&"content_type"in c,i=N(),s=M().resolvedTheme==="dark",l=a.jsxs(re,{analyticsMetadata:t,href:e.url,target:"_blank",rel:"noopener",className:"flex flex-col gap-0.5 rounded-xl px-3 py-2.5 hover:bg-token-main-surface-secondary",onMouseEnter:()=>{!("attributions"in e)||!e.attributions||m.setHighlightBySource(n,e)},onMouseLeave:()=>{m.clearHighlights()},children:[a.jsxs("div",{className:"line-clamp-1 flex h-6 items-center gap-2 text-xs",children:[a.jsx(z,{url:e.url,className:"icon-sm rounded-full bg-token-main-surface-primary object-cover",size:32,minSize:20,fallback:a.jsx(I,{className:"icon-sm text-token-text-quaternary"})}),r,o(e)&&a.jsx(U,{searchResult:e,className:"inline h-4 w-4 text-token-text-tertiary"})]}),a.jsx("div",{className:"line-clamp-2 text-sm font-semibold",children:e.title}),(e.pub_date??e.snippet)&&a.jsxs("div",{className:"line-clamp-2 text-sm font-normal leading-snug text-token-text-secondary",children:[e.pub_date&&a.jsx(G,{date:e.pub_date}),e.pub_date&&e.snippet&&" â€” ",e.snippet]})]});return i?a.jsx(E,{label:a.jsx(q,{item:e}),className:"text-left text-xs",theme:s?"default":"white",children:l}):l}const re=f.forwardRef(function(t,n){const{analyticsMetadata:r,...o}=t;function i(s,l){if(!t.href)return;const{entireListIndex:c,groupIndex:u,linkType:b,...g}=r;R.logEventWithStatsig(s,l,{...$(g),url:t.href,global_index:c.toString(),local_index:u.toString(),type:b})}return f.useEffect(()=>{i(p.searchLinkShown,"search_link_shown")},[]),a.jsx("a",{ref:n,...o,onClick:s=>{t.onClick?.(s),s.stopPropagation(),i(p.searchLinkClicked,"search_link_clicked")}})});export{xe as SearchSources,x as SourcesListGroup};
//# sourceMappingURL=j6iar3ehg3a3w36s.js.map
