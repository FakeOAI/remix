import{r as c,by as x,cv as f,m as a,gE as h,at as v,aG as w,gF as C,g9 as y,ee as g}from"./l5zxgmdvuqhdk2bc.js";import{b as S,cg as P,dc as W,T as j,j as A,l as L,dd as N}from"./gvv36j3z3mhdi4e0.js";import{C as M}from"./gpcxxc4tz3mf1m1b.js";import{a as T}from"./l5p3p01xk4qto08o.js";import{a as k}from"./4wga6zv4lb7ii8e0.js";function m(e){return e instanceof HTMLLinkElement&&e.rel==="stylesheet"||e instanceof HTMLStyleElement}function b(e,t){e.head.querySelectorAll("link, style").forEach(r=>{m(r)&&t.head.appendChild(r.cloneNode(!0))});const s=new WeakMap,o=new MutationObserver(r=>{r.forEach(n=>{n.type==="childList"&&(n.addedNodes.forEach(i=>{if(m(i)){const u=t.head.appendChild(i.cloneNode(!0));if(s.set(i,u),i instanceof HTMLStyleElement&&i.dataset.emotion){const{sheet:d}=i,{sheet:l}=u;if(d&&l)for(const E of d.cssRules)l.insertRule(E.cssText)}}}),n.removedNodes.forEach(i=>{const u=s.get(i);u&&t.head.removeChild(u)}))})});return o.observe(e.head,{childList:!0}),()=>{o.disconnect()}}function p(e,t){for(const o of e.attributes)t.setAttribute(o.name,o.value);const s=new MutationObserver(o=>{o.forEach(r=>{if(r.type==="attributes"&&r.attributeName!=null){const n=e.getAttribute(r.attributeName);n==null?t.removeAttribute(r.attributeName):t.setAttribute(r.attributeName,n)}})});return s.observe(e,{attributes:!0}),()=>{s.disconnect()}}const H=e=>{const t=c.useRef(!1);c.useEffect(()=>{t.current||(e(),t.current=!0)},[e])};function q({children:e,target:t="_blank",features:s}){const[o,r]=c.useState(null);return c.useEffect(()=>{const n=window.open("about:blank",t,s);if(!n){x.error("Unable to create child window");return}b(document,n.document),p(document.documentElement,n.document.documentElement),r(n);function i(){n?.close()}return window.addEventListener("unload",i),()=>{window.removeEventListener("unload",i),n.close()}},[]),o&&f.createPortal(a.jsx(h,{window:o,children:e}),o.document.body)}function K({children:e}){const[t,s]=c.useState(null);return H(()=>{let o=!1,r=null;return async function(){const n=await window.documentPictureInPicture?.requestWindow({width:400,height:600});if(n){if(o){n.close();return}r=()=>n.close(),b(document,n.document),p(document.documentElement,n.document.documentElement),s(n)}}(),()=>{o=!0,r?.()}}),t&&f.createPortal(a.jsx(h,{window:t,children:e}),t.document.body)}function O({clientThreadId:e}){const t=y.useStore(),s=w();A({clientThreadId:e}),L({resetThreadAction:()=>t.newThread(!0),clientThreadId:e,focusPromptTextareaAction:()=>s.document.getElementById("prompt-textarea")?.focus()});const o=g(),r=c.useCallback(n=>{t.setThreadId(n,!0)},[t]);return a.jsxs(a.Fragment,{children:[o?a.jsx(k,{clientThreadId:e,setClientThreadId:r,children:a.jsx(M,{hideHeader:!0})}):a.jsx(T,{clientThreadId:e,hideHeader:!0,hideFooter:!0,renderEmptyState:!1},e),a.jsx(N,{clientThreadId:e})]})}function G({clientThreadId:e}){S(e,{kind:v.PrimaryAssistant});const t=w();return c.useEffect(()=>{const s=()=>{t.document.getElementById("prompt-textarea")?.focus()};return t.addEventListener("focus",s),()=>{t.removeEventListener("focus",s)}},[t]),a.jsx(C,{children:a.jsx(P,{children:a.jsx(W,{clientThreadId:e,children:a.jsx(j,{clientThreadId:e,children:a.jsx(O,{clientThreadId:e})})})})})}export{G as C,K as D,q as a};
//# sourceMappingURL=bet8ku4qjrp607sv.js.map
