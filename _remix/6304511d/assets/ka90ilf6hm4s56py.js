import{dN as S,ax as m,r as s,a7 as E,R as O,b1 as u,b2 as h}from"./gdbo8e7dyfri4is1.js";import"./hx4nuyiea8nyedix.js";function _(){const{pluginId:e}=S(),t=m(),l=s.useRef(!1),[f,p]=s.useState(""),{code:r,error:o,error_description:i,state:c}=Object.fromEntries(new URLSearchParams(f.substring(1)).entries());return s.useEffect(()=>{p(window.location.hash)},[]),s.useEffect(()=>{if(l.current)return;if(e&&r&&c)l.current=!0;else{t("/");return}async function R(){const d=`https://chatgpt.com/ccc/${e}/oauth/callback`;if(!(!e||!r||!c))try{const a=await O.connectorOauthCallback(e,r,d,c);if(a.success){const n=new URL(u(h.OAUTH_SUCCESS,a.redirect_path),location.origin);n.searchParams.set("oauth_success","true"),t(n.pathname+n.search+n.hash)}else t(u(h.CUSTOM_ERROR,a.redirect_path,a.error??a.message))}catch{t(u(h.CUSTOM_ERROR))}}R()},[e,r,c,t]),s.useEffect(()=>{o&&E.danger(`${o}${i?`: ${i}`:""}`)},[o,i]),null}export{_ as default};
//# sourceMappingURL=ka90ilf6hm4s56py.js.map
