const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-b1z6e72swgma32lk.js","assets/ggqkrs5vmoblzdof.js","assets/ewkai8s4e9yar8dc.js","assets/root-iiaju9r7.css","assets/ewyixyddh5pmlp1p.js","assets/q9yjk42glkz6k7z4.js","assets/conversation-small-ogafjggy.css","assets/kcu7yb7kmfakkuk4.js","assets/iza8y8l6mmli306n.js","assets/i0warstii4ooeu5q.js","assets/b8d848azo3dhtxr3.js","assets/lurjpvlfqaw76wz0.js","assets/hmddwd68wyz1zxhg.js","assets/b2ipu85lq53l0g5n.js","assets/flx3aslm8lcme041.js","assets/dy0de7qsh4wsq4f7.js","assets/dnnti5ycxlkock1t.js","assets/pi90stopy4shtu36.js","assets/iamrr32dx0p9hhru.js","assets/gbv1uw39asifi1jh.js","assets/kl4uzc01l95ohk4w.js","assets/epki1omfq4el3erx.js","assets/eio2we3hcce7krab.js","assets/jt3ibd2tok9xqii3.js","assets/hmi8i6gcrvkjo3n3.js","assets/itghwucfyv5ciib7.js","assets/kf3gk5iru3xiq4w9.js","assets/cvj4mfmc4a67wtlp.js","assets/ep578kky843j3b48.js","assets/eh7h2s7qojuftokk.js","assets/gwkqjj9a3ieqv1b1.js","assets/kqwdyvkaaavvn8k3.js","assets/fc6la0jakh1fjl5t.js","assets/c51gecqrymlttny8.js","assets/ljzd43vaf60unn2s.js","assets/k7xxq0bt8m7898kc.js","assets/fzrn137102spawew.js","assets/e9lafxuzyeh4418f.js","assets/cvu2wuwh0n4w0tkw.js","assets/i707jjdl1du9m1ed.js","assets/nhwwej1nq0zrd7sc.js","assets/iowjy863ojkcp7xx.js","assets/ncad8i52836c4xgz.js","assets/djhd3vso5u446lz6.js","assets/nknlh5fqjrqo75k7.js","assets/e0wwab5uahg7c5xz.js","assets/nk84vjeawg79ihe8.js","assets/o5xl8td8i97kggrl.js","assets/cc6ms1pcuotykfy0.js","assets/kocb4igwgl272pgi.js","assets/mzxp4kh60o6aebik.js","assets/5kdctwc58de6efql.js","assets/iej0cupg2dqkmejt.js","assets/iz278ccgss3dl0nv.js","assets/lfgcqj2puzblz6vm.js","assets/jk8w36bsokizpx57.js","assets/fz6zlryqc5ygvbv8.js","assets/f6w8mzufa33zh9to.js","assets/h5losqcfh4dn7b56.js","assets/gso0fpgq2lj8vrbs.js","assets/hl9oi76ubmcjelma.js","assets/d21c9v1988fljvd4.js","assets/c9wdtc9t9g45lxvg.js","assets/swiper-kmk1dd5x.css","assets/jwmkohlffwtygn64.js"])))=>i.map(i=>d[i]);
import{bm as O,l as e,r as c,m as h,$ as y,a2 as R,a1 as _,a as F,dX as $,a$ as N,bg as U,a0 as V,aD as T,aE as w,X as W,U as X,ez as q,aN as Q,Q as K,cj as Y}from"./ggqkrs5vmoblzdof.js";import{dj as j,a8 as v,c5 as Z,e0 as J,ds as ee,X as se,D as te,bN as ne,e1 as ae,e2 as ie,aD as H,ak as oe,q as re,e3 as ce,e4 as le,c7 as de,c8 as ue,aG as M,e5 as C,c3 as me,e6 as he,Z as S,c1 as fe,aC as xe,c as pe,N as ge,e7 as be,bx as ye}from"./q9yjk42glkz6k7z4.js";import{p as Se,L as je,a$ as ve,b0 as Ie}from"./ewkai8s4e9yar8dc.js";import{m as Ne}from"./iza8y8l6mmli306n.js";import{d as Ce,m as ke}from"./b8d848azo3dhtxr3.js";import{u as Te,H as we,a as He}from"./gso0fpgq2lj8vrbs.js";import{u as Me,r as Ae}from"./b2ipu85lq53l0g5n.js";import{u as A}from"./hl9oi76ubmcjelma.js";import{N as Ee}from"./hmddwd68wyz1zxhg.js";function Ge(){const s=j(v.SonicSidebar),[t,n]=c.useState(!1);return s.isLoading||!s.eligible?null:e.jsx(Ne.div,{className:"no-draggable group pb-0",whileTap:{scale:.98},children:e.jsx(Pe,{children:e.jsx(Z,{href:"/search",target:"_blank",icon:e.jsx("div",{className:h("gizmo-shadow-stroke mr-[0.5] flex h-6 w-6 items-center justify-center rounded-full bg-token-main-surface-primary align-middle text-token-text-primary"),children:e.jsx(J,{})}),label:"SearchGPT",hoverRightIcon:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(De,{isOpen:t,setIsOpen:n,onDismiss:()=>s.markAsViewed()}),e.jsx(Se,{className:h("icon-md text-token-text-tertiary",!t&&"invisible group-hover:visible")})]}),isMenuOpen:!1,loggingGizmoId:"search-gpt-sidebar"})})})}function Le(){const s=ne(),t=j(v.hasSeenSncSidebarTooltip),n=ae(),i=ie(),{activeModals:o}=H(),a=oe();return!t.isLoading&&t.eligible&&!n&&o.size===0&&!s&&!i&&!a}function Pe({children:s}){const t=Le(),n=j(v.hasSeenSncSidebarTooltip);return t?e.jsx(ee,{side:"right",show:!0,badge:"new",title:"Try SearchGPT",onDismiss:n.markAsViewed,sideOffset:10,theme:"bright",description:"You're in. Get answers with real-time information from relevant sources, and ask follow-up questions.",children:e.jsx("div",{className:"w-full",children:s})}):e.jsx(e.Fragment,{children:s})}function De({isOpen:s,setIsOpen:t,onDismiss:n}){return e.jsx(se,{open:s,onOpenChange:t,triggerButton:e.jsx("button",{className:h("flex text-token-text-tertiary",s?"":"invisible group-hover:visible"),onClick:i=>{i.preventDefault()},children:e.jsx(je,{className:"icon-md"})}),children:e.jsx(te.Item,{onClick:i=>{i.preventDefault(),n()},children:e.jsx(y,{id:"sidebar.hideFromSidebar",defaultMessage:"Hide from sidebar"})})})}function ze(){const s=O("114024");return!s.value||s.isLoading?null:e.jsx(Ge,{})}const k=V({unableToLoadHistory:{id:"history.unableToLoad",defaultMessage:"Unable to load history"},retryButton:{id:"history.retryButton",defaultMessage:"Retry"}});function Be({activeId:s,isPrimaryBackgroundColor:t}){const n=F(),[i,o]=c.useState(!1),[a,l]=c.useState(0),r=$(),{conversations:d,hasNextPage:f,fetchNextPage:p,isLoading:x,isFetchingNextPage:E,isError:I}=Me(),g=c.useRef(null),G=c.useCallback(m=>{x||m==null||(g.current?.disconnect(),g.current=new IntersectionObserver(B=>{B[0].isIntersecting&&f&&p()}),g.current.observe(m))},[x,f,p]);c.useEffect(()=>()=>{g.current?.disconnect()},[]),c.useMemo(()=>{re.publish({kind:"refreshHistory",conversations:d})},[d]);const b=d;c.useEffect(()=>{const m=ce(le(),Date.now());r(()=>{l(a+1)},m+1e3)},[a,r]);const u=b.length===0;c.useEffect(()=>{u||de({namespace:ue.ChatPageLoad})?.logTiming("render_history_items")},[u]);const L=Te(b,a),{isCollapsible:P}=A(),D=H(m=>m.isHistoryCollapsed),z=M();return e.jsxs(_e,{$centered:x||I||u,$screenArch:z,children:[u&&x&&e.jsx(N,{className:"m-auto"}),u&&I&&e.jsxs("div",{className:"p-3 text-center italic text-token-text-tertiary",children:[e.jsx(y,{...k.unableToLoadHistory}),!i&&e.jsx("div",{className:"mt-1",children:e.jsx(U,{as:"button",color:"primary",size:"small",className:"m-auto mt-2",onClick:()=>{o(!0),Ae(n)},children:e.jsx(y,{...k.retryButton})})})]}),!x&&!u&&e.jsx("div",{children:P&&D?e.jsx(Oe,{activeId:s,items:b,isPrimaryBackgroundColor:t}):e.jsx(we,{activeId:s,bucketedItems:L,hasNextPage:f,items:b,isPrimaryBackgroundColor:t,infiniteScrollTriggerElementRef:G})}),E&&e.jsx("div",{className:"m-4 mb-5 flex justify-center",children:e.jsx(N,{})})]})}function Oe({activeId:s,items:t,isPrimaryBackgroundColor:n}){const{isCollapsible:i,recentConversationLimit:o}=A(),a=M(),l=t.slice(0,o);if(s){const r=t.findIndex(d=>d.id===s);r>o-1&&l.push(t[r])}return e.jsxs("div",{className:h(n&&!a&&"first:mt-0",!a&&"relative mt-5 last:mb-5"),children:[e.jsx("div",{className:h("sticky top-[--sidebar-sticky-threshold]",a&&["z-5",C.historyHeading,C.historyHeadingTimeline],!a&&"z-20"),children:e.jsx("span",{className:"flex h-9 items-center",children:e.jsx(me,{$screenArch:a,children:e.jsx(y,{id:"VbQeVG",defaultMessage:"Recent"})})})}),e.jsx("ol",{className:a?"mt-1 flex flex-col gap-0.5":void 0,children:l.map((r,d)=>{const f=s===r.id,p=d===0;return e.jsx(He,{item:r,isActive:f,isFirstItem:p,isInRecents:!0,isPrimaryBackgroundColor:n,testId:`history-item-${d}`},`history-item-${r.id}`)})}),i&&e.jsx(he,{type:"more",onClick:S.toggleHistoryCollapsed})]})}const Re=R.memo(Be),_e=_.div`flex flex-col gap-2 pb-2 text-token-text-primary text-sm
${({$centered:s,$screenArch:t})=>[s&&"h-full justify-center items-center empty:hidden",t?"mt-0 pb-8":"mt-5"]}`,Fe=T(()=>w(()=>import("./sso-b1z6e72swgma32lk.js").then(s=>s.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63])).then(s=>s.FannyPackAction)),$e=T(()=>w(()=>import("./jwmkohlffwtygn64.js"),__vite__mapDeps([64,1,2,3,5,6,44,9,10,8,59,60,13,14,17,43,12])).then(s=>s.GizmoSidebarList));function Je({clientThreadId:s,onNewThread:t}){const n=Ce(s),i=Q(),{isUnauthenticated:o}=K(),a=ke(s),l=Y();return o?null:e.jsxs(e.Fragment,{children:[e.jsx(ye,{onNewThread:t}),i?.canInteractWithGizmos()?e.jsx($e,{currentGizmoId:a}):e.jsx(ze,{}),!o&&e.jsx(Re,{activeId:l?void 0:n})]})}function es({className:s,onNewThread:t}){const n=W(),i=X(),o=fe(),a=q(()=>navigator.windowControlsOverlay),{isFannyPackEnabled:l}=xe();return e.jsxs("div",{className:h("flex",a?.visible&&a.getTitlebarAreaRect().left>0?"justify-end":"justify-between",s),children:[e.jsx(pe,{sideOffset:4,label:n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),className:"flex",side:"right",children:e.jsx(ge,{className:"no-draggable","aria-label":n.formatMessage({id:"e7SzX9",defaultMessage:"Close sidebar"}),onClick:()=>{be(i)?S.toggleNavSidebar():S.togglePopoverNavSidebar()},icon:ve,mobileIcon:Ie,surfaceContext:"secondary","data-testid":"close-sidebar-button"})}),e.jsxs("div",{className:"flex",children:[l&&e.jsx(Fe,{}),!o&&e.jsx(Ee,{onClick:t,testId:"create-new-chat-button"})]})]})}export{Je as C,Re as H,es as S,ze as a};
//# sourceMappingURL=ed26ogsbgy7p165g.js.map
