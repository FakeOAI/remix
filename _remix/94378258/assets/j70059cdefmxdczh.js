const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/b46aheneaj76wci8.js","assets/i5bamk05qmvsi6c3.js","assets/mqz1li9meltzje6z.js","assets/root-o6g0n1da.css","assets/b5wtmoh4inpzei0d.js","assets/conversation-small-cll5buey.css","assets/kmyp4ah1dd5ptfwx.js","assets/hyvagn7wiyqjw66o.js","assets/go8i9ioogzsa6rv8.js","assets/leiuw82gjevvfzoe.js","assets/mr00bmar0lzlfr7n.js","assets/l7a7ub907k9z5fpi.js","assets/kfe2c9wpphxhi1gf.js","assets/basnv9fux9j484go.js","assets/jn8sbvvcvfq89cru.js","assets/mk4ingvn6gaf4ymp.js","assets/ke6ca343lrs30bzf.js","assets/n5sxb9l1jmluwhlc.js","assets/js5qb1fmq9lggf33.js","assets/f8m2hnrr877wbn2c.js","assets/chzj6qbe1fufxjay.js","assets/j9x5yz86yxlnd515.js","assets/i5ztl46q405lbqos.js","assets/ADAVisualizationComponent-mi6em660.css","assets/sso-g8ntn8uqujvdycjx.js","assets/g8cvarwu9kkjfdjo.js","assets/gmv4bjxieaumcpbe.js","assets/mc7k7l0ibm5wl50f.js","assets/bgiejlu576b1qobr.js","assets/h9oypc2qmvcsstao.js","assets/itghwucfyv5ciib7.js","assets/mfstumv9br6718hp.js","assets/fd32v7uck8awyo3g.js","assets/mrorf6gdqq9b4f24.js","assets/983a0dy92b3ronpv.js","assets/abgxln2axoxr8vbp.js","assets/kqwdyvkaaavvn8k3.js","assets/oi06fxyvf4fl2096.js","assets/3jfg16tmo26gq1nn.js","assets/mzinwff0rbmpqf5x.js","assets/gz2yc31u8s97ju4n.js","assets/e9lafxuzyeh4418f.js","assets/fzus5xpt55y5yfi6.js","assets/k1gqs7xq8245zh9y.js","assets/k4owery9q8o61suw.js","assets/otj51hs94qtn8hs9.js","assets/doodretu0y6yq9ie.js","assets/b43f1u52may4qx6s.js","assets/l95fvr5t3zlg0jfk.js","assets/kpoy32ai0odj83kl.js","assets/fccvvf8cj4y1o42r.js","assets/iej0cupg2dqkmejt.js","assets/kgrty254hpmdebt2.js","assets/ngbny9nvl6v9bsn9.js","assets/jk8w36bsokizpx57.js","assets/enzbfz65vpzupghi.js","assets/hn3zskgmb2j8dfsg.js","assets/g6ve46pdhyx644oj.js","assets/nneklm0cdl6aq822.js","assets/k0dfaitak04hux2b.js","assets/d92ertajpk7h5xwr.js","assets/npdlvg4zyth0duyg.js","assets/l63ca3cm2p9lee2n.js","assets/nbd4kr5pg26sqlld.js","assets/el5eouf2z746i8se.js","assets/d01tx82c75xf5kne.js","assets/gbjpgsmak6ngv98b.js","assets/imrbcsu5tcgwgvls.js"])))=>i.map(i=>d[i]);
import{a0 as oe,r as y,y as t,as as he,a4 as w,a9 as B,ab as A,ac as b,M as H,bB as xe,bC as pe,ae as U,ed as Me,P as J,d as Y,ah as z,cB as Ee,S as Te,N as ye,e as _e}from"./i5bamk05qmvsi6c3.js";import{hq as Ie,dS as Ce,fW as ve,fX as Ae,fR as be,hr as je,hs as Ne,ht as we,hu as Se,hv as Re,dP as Pe,hw as Fe,hx as De,hy as ke,hz as Oe,fZ as x,fY as k,hA as G,hB as Q,hC as Le,hD as ze,hE as X,hF as ie,bP as V,fC as re,hG as Ve,hH as We,hI as Ue,hJ as de,hK as le,h as Be,bQ as He,b as Ke,fK as Je,hL as Ye,fV as c,H as Ge,hM as Qe,hN as Xe,bH as $e,hO as qe,eZ as Ze,hP as es,hQ as ss,hR as ts,hS as W,hT as as}from"./b5wtmoh4inpzei0d.js";import{q as $,r as ns,d as ce,s as os,v as is,w as rs,z as ds,F as ls,A as cs,B as ms,D as gs}from"./basnv9fux9j484go.js";import{H as us,I as fs,T as D,l as hs}from"./hyvagn7wiyqjw66o.js";import{i as xs,C as ps,g as Ms,a as Es,b as Ts}from"./leiuw82gjevvfzoe.js";import{m as O}from"./kmyp4ah1dd5ptfwx.js";import{ah as ys,ai as _s}from"./mqz1li9meltzje6z.js";const Is=(e,a)=>e?.textdocId?e.textdocId:e?.function===k.CreateTextdoc?Le(e):a??void 0,Cs=({messages:e,isRequestActive:a})=>{const s=oe(),o=Ie(e),i=Ce(e),n=y.useMemo(()=>{if(ve(o?.message))return Ae(a,o.message,i?.message??null)},[a,o,i]),g=be(),r=Is(n,g),m=je(r),f=Ne(),u=we(r),M=Se(),d=Re(),h=Pe(),p=Fe(),E=De(),I=ke(),j=Oe({textdocId:r,toolResponseMessage:i});if(!n)return null;const N=!p&&!m&&n.status!==x.STREAMING&&n.status!==x.WAITING&&E;let R,P;if(n.status!==x.REDACTED&&n.status!==x.FAILED&&!N&&r){const C=I&&n.function===k.UpdateTextdoc&&n.status===x.COMPLETE;R=()=>{C&&n.versionInt?ze(r,n.versionInt,M):G(r)},P=()=>{C&&n.versionInt&&h(r,n.versionInt)}}const l=vs(n,m);if(n.function===k.CreateTextdoc){if(n.status===x.STREAMING||n.status===x.WAITING||n.status===x.COMPLETE){const L=p===!0&&(n.status===x.STREAMING||n.status===x.WAITING);return t.jsx($,{isInlinePreview:j,isMissingFromThread:N,isFetching:L,type:n.type??null,name:l,isFocused:u,isStreaming:n.status===x.STREAMING,onClick:R,isCanvasOpen:f,textdocId:r})}let C;switch(n.status){case x.FAILED:C=s.formatMessage({id:"SNarKX",defaultMessage:"Failed to generate"});break;case x.CANCELED:C=s.formatMessage({id:"1A6W36",defaultMessage:"Stopped generating"});break;case x.REDACTED:C=t.jsx(he,{align:"start",label:s.formatMessage({id:"F6q1k7",defaultMessage:"Removed from shared conversation"}),children:s.formatMessage({id:"BqyYDu",defaultMessage:"Created document"})});break}return t.jsx(q,{children:C})}const T=N||n.status===x.REDACTED,S=d&&!T?l:null,_=t.jsx(q,{onClick:R,onMouseOver:P,isStreaming:n.status===x.STREAMING,children:n.function===k.CommentTextdoc?bs(s,n,S):As(s,n,S)});return j&&!f?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx($,{isInlinePreview:!0,isMissingFromThread:N,isFetching:!1,type:m?.type??null,name:l,isFocused:u,isStreaming:n.status===x.STREAMING,onClick:r!=null?()=>G(r):void 0,isCanvasOpen:f,textdocId:r}),_]}):_};function vs(e,a){return a?.title?Q(a.title):e.function===k.CreateTextdoc&&e.title?Q(e.title):null}const q=({isStreaming:e=!1,onClick:a,onMouseOver:s,children:o})=>t.jsx("button",{disabled:!a,className:w(e&&"loading-shimmer","flex min-h-5 w-fit select-none pt-[3px] text-start text-token-text-secondary",a&&"hover:text-token-text-primary"),onClick:a,onMouseOver:s,children:o}),me=9;function As(e,a,s){if(a.status===x.STREAMING)return s?e.formatMessage({id:"W2xN1Z",defaultMessage:"Editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"8taq8v",defaultMessage:"Editing"});if(a.status===x.FAILED)return s?e.formatMessage({id:"UjJKYZ",defaultMessage:"Failed to edit {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"kWUVkg",defaultMessage:"Failed to edit"});if(a.status===x.CANCELED)return s?e.formatMessage({id:"TmSrCd",defaultMessage:"Stopped editing {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"bYV7xA",defaultMessage:"Stopped editing"});const o=a.updates?.length;return a.status===x.REDACTED||!o||o>me?s?e.formatMessage({id:"n+G/ct",defaultMessage:"Edited {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"aegqpL",defaultMessage:"Edited"}):s?e.formatMessage({id:"osYMSb",defaultMessage:"{numEdits, plural, one {Edited {documentTitle}} other {Made {numEdits} edits to {documentTitle}}}"},{numEdits:o,documentTitle:s}):e.formatMessage({id:"xJD3WR",defaultMessage:"{numEdits, plural, one {Edited} other {Made {numEdits} edits}}"},{numEdits:o})}function bs(e,a,s){if(a.status===x.STREAMING)return s?e.formatMessage({id:"8xQH/P",defaultMessage:"Commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"5yqLeN",defaultMessage:"Commenting"});if(a.status===x.FAILED)return s?e.formatMessage({id:"Rl821S",defaultMessage:"Failed to comment on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"W007jt",defaultMessage:"Failed to comment"});if(a.status===x.CANCELED)return s?e.formatMessage({id:"bozPdq",defaultMessage:"Stopped commenting on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"hyBGa7",defaultMessage:"Stopped commenting"});const o=a.comments?.length;return a.status===x.REDACTED||!o||o>me?s?e.formatMessage({id:"LXEzK7",defaultMessage:"Commented on {documentTitle}"},{documentTitle:s}):e.formatMessage({id:"KeMYhy",defaultMessage:"Commented"}):s?e.formatMessage({id:"Ql5lPq",defaultMessage:"{numComments, plural, one {Commented on {documentTitle}} other {Added {numComments} comments on {documentTitle}}}"},{numComments:o,documentTitle:s}):e.formatMessage({id:"FHtyJQ",defaultMessage:"{numComments, plural, one {Commented} other {Added {numComments} comments}}"},{numComments:o})}const js=2e3,ge=.4,Ns=.45,ws=.2,Ss=.1,Rs=.25;var v=(e=>(e[e.Running=0]="Running",e[e.Finished=1]="Finished",e[e.Error=2]="Error",e[e.Stopped=3]="Stopped",e[e.Paused=4]="Paused",e))(v||{});function mt({conversationMessages:e,icon:a,status:s,text:o,estimatedToolDurationMs:i,animationLoopDurationMs:n=js,shouldPersistAfterFinished:g=!1}){const[r,m]=y.useState(s===0?0:s===1&&!g?7:1),[f,u]=y.useState(0);y.useEffect(()=>{s===2?m(8):s===3?m(9):s===4?m(10):s===1?m(r===2?3:7):s===0&&r===10&&(m(2),u(d=>d+1))},[s]);const M=Ds(r);return y.useEffect(()=>{const d=e[0].message.id;if(M)return X.addDelayedRenderingMessage(d),()=>{X.removeDelayedRenderingMessage(d)}},[M]),ie(()=>{F(r)&&u(d=>d+1)},n),r===7&&!g?null:t.jsxs("div",{className:"my-2.5 flex items-center gap-2.5",children:[t.jsx(Ps,{icon:a,status:s,uiState:r,estimatedToolDurationMs:i,animationLoopCounter:f,shouldPersistAfterFinished:g,onFillProgressBarAnimationComplete:()=>m(4),onFinishAnimationComplete:()=>{m(5),setTimeout(()=>{m(g?7:6)},Ss*1e3)},onHideAnimationComplete:()=>m(7)}),t.jsx(Fs,{text:o,uiState:r,animationLoopCounter:f,onEnterAnimationComplete:()=>m(2)})]})}const Z=50;function Ps({icon:e,status:a,uiState:s,estimatedToolDurationMs:o,animationLoopCounter:i,shouldPersistAfterFinished:n,onFillProgressBarAnimationComplete:g,onFinishAnimationComplete:r,onHideAnimationComplete:m}){const[f,u]=y.useState(0);ie(()=>{F(s)?u(N=>N+Z):s===10&&u(0)},Z);let M,d,h;F(s)||s===10?(M="running",d=t.jsx(e,{animationLoopCounter:i}),h="bg-transparent"):s===4||s===5||s===7&&n?(M="finished",d=t.jsx(Ve,{}),h="bg-brand-purple"):a===2?(M="error",d=t.jsx(We,{}),h="bg-orange-500"):a===3&&(M="stopped",d=t.jsx(Ue,{}),h="bg-gray-300");let p={opacity:0,scale:0,rotate:-180,x:0},E={type:"spring",bounce:.3,duration:Ns},I={opacity:0,scale:.6,rotate:0,x:0};s===0?(p={opacity:0,scale:.5,rotate:-180,x:-8},E={type:"spring",bounce:.3,duration:ge}):s===1?p=!1:s===5&&(I={opacity:0,scale:0,rotate:0,x:0},E={type:"spring",bounce:.3,duration:Rs});const j=ns(f,o);return t.jsx("div",{className:"relative h-5 w-5 shrink-0",children:t.jsx(V,{onExitComplete:()=>{s===6&&m()},children:M!=null&&t.jsxs(O.div,{className:w("absolute left-0 top-0 flex h-full w-full items-center justify-center rounded-full text-white",h),initial:p,animate:{opacity:1,scale:1,rotate:0,x:0},exit:I,transition:E,onAnimationComplete:()=>{s===4&&r()},children:[d,(F(s)||s===10)&&t.jsx(re,{percentage:s===3?100:j,thickness:1.5/23,className:"absolute left-1/2 top-1/2 h-[23px] w-[23px] -translate-x-1/2 -translate-y-1/2 text-brand-purple",backgroundStrokeClassName:"stroke-brand-purple/25 dark:stroke-brand-purple/50",transitionDuration:s===3?`${(100-j)/100*ws}s`:void 0,transitionTimingFunction:s===3?"cubic-bezier(0.55, 0, 1, 1)":void 0,onTransitionEnd:()=>{s===3&&g()}})]},M)})})}function Fs({text:e,uiState:a,animationLoopCounter:s,onEnterAnimationComplete:o}){const[i,n]=y.useState(e);y.useEffect(()=>{a===2&&n(e)},[s]),y.useEffect(()=>{F(a)||n(e)},[a,e]);let g={opacity:0,x:0,y:15},r={type:"spring",bounce:.3,opacity:{duration:.15},y:{duration:.3}};a===0?(g={opacity:0,x:-8,y:0},r={type:"spring",bounce:.3,duration:ge,delay:.15}):a===1&&(g=!1);const m=i??void 0;return t.jsx("div",{className:w("relative h-5 w-full leading-5",a===8||a===9?"text-token-text-tertiary":"text-token-text-secondary"),children:t.jsx(V,{children:m!=null&&t.jsx(O.div,{className:"absolute left-0 top-0 line-clamp-1 overflow-visible",initial:g,animate:{opacity:1,x:0,y:0},exit:{opacity:0,x:0,y:-15},transition:r,onAnimationComplete:()=>{a===0&&o()},children:m},m.toString())})})}function F(e){return e===0||e===2||e===3}function Ds(e){return F(e)||e===4||e===5||e===6||e===10}const ee=B.div`group absolute left-0 top-0 mr-1.5 h-8 overflow-hidden mt-1`;function K({highlightedCommand:e,status:a,children:s,showWorkUserSetting:o=!1,hideOnlyIfNotInteractedWith:i=!1,onOpenAnalytics:n}){const g=s!=null,[r]=y.useState(o),[m,f]=y.useState(o),[u,M]=y.useState(!1),d=a===v.Finished||a===v.Error,h=i?r?!1:!u:!1,p=a===v.Running&&"loading-shimmer";return d&&h?null:g?t.jsxs(t.Fragment,{children:[t.jsx(se,{$canShowWork:!0,children:t.jsx(V,{children:t.jsx(ee,{children:t.jsx(O.button,{onClick:()=>{m||n?.(),f(E=>!E),M(!0)},initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:w(p),children:t.jsxs("div",{className:"flex items-center justify-start gap-1",children:[t.jsx("span",{children:e}),m?t.jsx(ys,{className:"icon-md"}):t.jsx(_s,{className:"icon-md"})]})},e?.toString())})})}),t.jsx(V,{children:m&&s&&t.jsx(O.div,{initial:"collapsed",animate:"reveal",exit:"collapsed",variants:{collapsed:{translateY:-20,opacity:0,height:0},reveal:{translateY:0,opacity:1,height:"auto"}},transition:{duration:.3,ease:"easeInOut"},className:"overflow-hidden",children:s})})]}):t.jsx(se,{$canShowWork:!1,children:t.jsx(ee,{className:w(p),children:e})})}const se=B.p`first:mt-0 relative h-8
${({$canShowWork:e})=>e?"text-token-text-secondary hover:text-token-text-primary my-1.5":"text-token-text-secondary"}`,te=A(()=>b(()=>import("./b46aheneaj76wci8.js").then(e=>e.A),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])).then(e=>e.default));function ks({messages:e,isRequestActive:a,clientThreadId:s}){const[o,i]=e,n=ce(o.message),g=i?.message.metadata?.aggregate_result,r=os(),m=is(),f=i?.message?rs(i.message):[],u=i?.message.metadata?.aggregate_result?.messages.filter(xs)??[],d=(f.filter(E=>E.type==="chart")??[]).length!==u.length,h=m&&!d;let p=v.Running;return g?.status==="success"?p=v.Finished:i!=null&&i.message.content.content_type!==H.ExecutionOutput||g!=null&&g.status!=="running"?p=v.Error:(n||!a)&&(p=v.Stopped),t.jsxs(t.Fragment,{children:[t.jsx(Os,{messages:e,status:p,isRequestActive:a}),h&&f.map((E,I)=>{const{type:j}=E;return j==="chart"&&!r?(E.fallback_to_image=!0,t.jsx(ae,{children:t.jsx(te,{clientThreadId:s,visualization:E})},I)):t.jsx(ae,{children:t.jsx(te,{clientThreadId:s,visualization:E})},I)}),!h&&i!=null&&t.jsx(ps,{message:i.message})]})}const ae=B.div`mb-3 max-w-[80%]`;function Os({messages:e,status:a,isRequestActive:s}){const[o,i]=e,n=oe(),g=i?.message.metadata?.aggregate_result,r=ce(o.message),{data:m,error:f}=xe(pe.ShowExpandedCodeView);let u=n.formatMessage({id:"message.tools.data-analysis.running",defaultMessage:"Analyzing"});if(g?.status==="success"?u=n.formatMessage({id:"message.tools.data-analysis.finished",defaultMessage:"Analyzed"}):i!=null&&i.message.content.content_type!==H.ExecutionOutput||g!=null&&g.status!=="running"?u=n.formatMessage({id:"message.tools.data-analysis.error",defaultMessage:"Analysis errored"}):(r||!s)&&(u=n.formatMessage({id:"message.tools.data-analysis.stopped",defaultMessage:"Analysis paused"})),m!==void 0||f){const M=Ms(o.message)!=null;return t.jsx(K,{status:a,highlightedCommand:u,showWorkUserSetting:m??!1,hideOnlyIfNotInteractedWith:!0,children:M?t.jsxs("div",{className:"mb-3 mt-0.5 overflow-hidden rounded-xl bg-black",children:[t.jsx(Es,{message:o.message,FormattedText:de}),i!=null&&t.jsx(Ts,{message:i.message})]}):null})}return null}const Ls=3,zs=.1,ne=[0,.26,.4];function Vs({nextMessage:e,isLastMessage:a,isRequestActive:s}){let o=a||!e||e&&!le(e.message);const i=us(e?.message),n=Be(i.slice(0,Ls).map(g=>g.entries[0].url));if(e?.message.id&&ds(e?.message.id),o){const g=s?t.jsxs("div",{className:"flex items-center gap-1",children:[n.map((r,m)=>t.jsx(O.div,{className:w("-ml-1.5 first:ml-0 last:mr-1.5","relative"),initial:{width:m===0?0:6,opacity:0},animate:{width:20,opacity:1},transition:{duration:zs,delay:ne[Math.min(m,ne.length-1)]},children:t.jsx("div",{className:w("flex h-[22px] w-[22px] items-center overflow-hidden rounded-full","border-2 border-token-main-surface-primary bg-token-main-surface-primary"),children:t.jsx(He,{url:r,size:32,minSize:16,className:"icon-md rounded-full"})})},r)),t.jsx(U,{id:"jjx8Qg",defaultMessage:"Searching the web"})]}):t.jsx(U,{id:"fssXGM",defaultMessage:"Error while searching"});return t.jsx(K,{highlightedCommand:g,status:s?v.Running:v.Error})}return null}const Ws={strong:e=>{const{node:a,children:s,...o}=e;return t.jsx("strong",{...o,className:w(o.className,"font-semibold text-token-text-primary"),children:s})},p:e=>{const{node:a,children:s,...o}=e;return t.jsx("p",{...o,className:w(o.className,"text-base","has-[strong]:mb-1 [&:not(:first-child)]:has-[strong]:mt-3 [&:not(:has(strong))]:mb-3"),children:s})}};function Us({headline:e,message:a}){const o=a.create_time?new Date(a.create_time*1e3):Date.now(),i=+new Date-+o,n=Je(a.id,48e4,Ye(48e4,i));return t.jsxs("div",{className:"flex items-center gap-2.5",children:[t.jsx(re,{percentage:n,thickness:1/8,className:"h-5 w-5 text-token-text-primary",backgroundStrokeClassName:"stroke-token-main-surface-tertiary",transitionDuration:`${(100-n)/100*.2}s`,transitionTimingFunction:"cubic-bezier(0.55, 0, 1, 1)"}),e]})}function Bs({messages:e,isStreaming:a,clientThreadId:s}){const[o,i]=y.useState(""),[n,g]=y.useState(!1),f=fs(s)===Me.STREAMING||a,u=e[0].message,M=u.id,d=D.getServerThreadId(s),h=Ke(u),p=u.metadata?.summarization_headline,E=a&&p!=null;y.useEffect(()=>{const N=/\*\*(.*?)(?:\*\*|\n|$)/g;let R,P="";for(;(R=N.exec(h))!=null;)P=R[1].trim();P?i(P):u.metadata?.initial_text!=null&&i(u.metadata.initial_text)},[h,u.metadata?.initial_text]),y.useEffect(()=>{h.length>0&&!p&&g(!0)},[h,p]);const I=y.useMemo(()=>({client_thread_id:s,message_id:M,conversationId:d}),[s,M,d]);y.useEffect(()=>{n&&J.logEvent(Y.receivedA8KM123Message,I)},[n]);const j=y.useCallback(()=>{J.logEvent(Y.openedA8KM123Message,{...I,isStreaming:a})},[I,a]);return t.jsx(K,{status:f?v.Running:v.Finished,highlightedCommand:f?p==null?o:t.jsx(Us,{headline:p,message:u}):u.metadata?.finished_text??"",onOpenAnalytics:j,children:n&&!E?t.jsx("div",{className:"mb-4 border-l-2 pl-4 dark:border-token-text-secondary",children:t.jsx(de,{componentOverrides:Ws,className:"not-prose leading-6",children:h})}):null})}const Hs=A(()=>b(()=>import("./sso-g8ntn8uqujvdycjx.js").then(e=>e.J),__vite__mapDeps([24,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56])).then(e=>e.JawboneMessage).catch(()=>ls)),Ks=A(()=>b(()=>import("./g6ve46pdhyx644oj.js"),__vite__mapDeps([57,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),Js=A(()=>b(()=>import("./nneklm0cdl6aq822.js"),__vite__mapDeps([58,1,2,3,4,5]))),Ys=A(()=>b(()=>import("./k0dfaitak04hux2b.js"),__vite__mapDeps([59,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),Gs=A(()=>b(()=>import("./d92ertajpk7h5xwr.js"),__vite__mapDeps([60,1,2,3,4,5,7,6])).then(e=>e.TextMessageEditor)),Qs=A(()=>b(()=>import("./npdlvg4zyth0duyg.js"),__vite__mapDeps([61,1,2,3,4,5,6,62,13,12,14,15,7,16,17,18,19,8,20,21,9,22]))),Xs=A(()=>b(()=>import("./nbd4kr5pg26sqlld.js"),__vite__mapDeps([63,1,2,3,13,4,5,12,14,15,7,6,16,17,18,19,8,20,21,9,22]))),$s=A(()=>b(()=>import("./el5eouf2z746i8se.js"),__vite__mapDeps([64,1,2,3,4,5,16,7,6,17,37,13,12,14,15,18,19,8,20,21,9,22])).then(e=>e.BrowsingMessage)),qs=A(()=>b(()=>import("./d01tx82c75xf5kne.js"),__vite__mapDeps([65,1,2,3,4,5,13,12,14,15,7,6,16,17,18,19,8,20,21,9,22])).then(e=>e.SearchResultMessage)),Zs=A(()=>b(()=>import("./gbjpgsmak6ngv98b.js"),__vite__mapDeps([66,1,2,3,4,5,16,7,6,17,46,44])).then(e=>e.GizmoContactsMessage)),et=A(()=>b(()=>import("./imrbcsu5tcgwgvls.js"),__vite__mapDeps([67,1,2,3,4,5,16,7,6,17,13,12,14,15,18,19,8,20,21,9,22])).then(e=>e.JITPluginMessage));function gt(e){switch(e.type){case c.Text:case c.Debug:return[e.message];case c.MultiText:case c.Browsing:case c.CodeInterpreter:case c.JITPlugin:case c.RetrievalBrowsing:case c.ParallelBrowsing:case c.Dalle:case c.GizmoEditor:case c.SearchResult:case c.GizmoContacts:case c.a8km123:case c.f959b8c:case c.b1de6e2:case c.b1de6e2_c:case c.Canmore:case c.de1d73e:case c.SearchGPTQuery:return e.messages;default:throw new Error("Bad")}}function ut({groupedMessagesToRender:e,allGroupedMessages:a,clientThreadId:s,isEditing:o,isUserTurn:i,isCompletionRequestInProgress:n,isFeedbackEnabled:g,isFinalTurn:r,turnIndex:m,hasActiveRequest:f,showEditButton:u=!1,handleEnterEdit:M,handleExitEdit:d,onChangeItemInView:h,onRequestMoreCompletions:p,onRequestCompletion:E,shouldGrowContainer:I=!0}){const{showDebugConversationTurns:j}=Ge(),N=hs(s),R=a.some(l=>Qe.includes(l.type)),P=e.map((l,T)=>{const S=T===a.length-1;switch(l.type){case c.Text:case c.MultiText:{const _=e[T-1],C=_?.type,L=_&&"messages"in _?_.messages:void 0;if(l.type===c.Text){const ue=l?.message&&!le(l.message.message),fe=o?t.jsx(Gs,{message:l.message,clientThreadId:s,onChangeItemInView:h,onRequestCompletion:E,onRequestMoreCompletions:p,onExitEdit:d,disabled:f}):R&&ue?null:t.jsx(cs,{className:"min-h-8",message:l.message,isFeedbackEnabled:g,isCompletionInProgress:S&&n,turnIndex:m,clientThreadId:s,showEditButton:u,onEnterEdit:M,isUserTurn:i,onRequestMoreCompletions:p,prevGroupedMessageType:C,prevGroupedMessages:L});return t.jsxs(y.Fragment,{children:[fe,t.jsx(Xe,{isUserTurn:i,message:l.message.message})]},"group-"+l.message.nodeId)}else return l.type===c.MultiText?t.jsx(Ys,{clientThreadId:s,messages:l.messages,isCompletionInProgress:S&&n,isFeedbackEnabled:g,onRequestMoreCompletions:p,prevGroupedMessageType:C,prevGroupedMessages:L},"multitext-"+(l.messages[0]?.nodeId??T)):l.type}case c.Browsing:case c.RetrievalBrowsing:{const _=N!=null&&[z.GizmoInteraction,z.GizmoMagicCreate,z.GizmoTest].includes(N.kind);return t.jsx($s,{messages:l.messages,isRequestActive:f,isLastMessageInTurn:S,isUsingGizmo:_,isRetrieval:l.type===c.RetrievalBrowsing},"browsing-"+(l.messages[0]?.nodeId??T))}case c.SearchGPTQuery:{const _=a.slice(T+1).find(C=>C.type===c.Text);return t.jsx(Vs,{isRequestActive:f,isLastMessage:S,nextMessage:_&&_.type===c.Text?_.message:void 0},"searchquery-"+(l.messages[0]?.nodeId??T))}case c.a8km123:return t.jsx(Bs,{messages:l.messages,isStreaming:S&&n,clientThreadId:s},"sum-"+(l.messages[0]?.nodeId??T));case c.f959b8c:return null;case c.b1de6e2:return null;case c.b1de6e2_c:return null;case c.de1d73e:{const _=T+1<a.length?a[T+1]:void 0;return t.jsx(Hs,{currentGroupedMessage:l,nextMessage:_&&_.type===c.Text?_.message:void 0,isLastMessage:S,isRequestActive:f},"jawbone-"+(l.messages[0]?.nodeId??T))}case c.ParallelBrowsing:return t.jsx(Xs,{messages:l.messages},"parallel-"+(l.messages[0]?.nodeId??T));case c.CodeInterpreter:return t.jsx(ks,{messages:l.messages,isRequestActive:f,clientThreadId:s},"ada-"+(l.messages[0]?.nodeId??T));case c.JITPlugin:return t.jsx(et,{messages:l.messages,clientThreadId:s,isLastTurnInConversation:r,onRequestCompletion:E},"jit-"+(l.messages[0]?.nodeId??T));case c.GizmoContacts:return t.jsx(Zs,{messages:l.messages,clientThreadId:s,isLastTurnInConversation:r,onRequestCompletion:E},"gizmo-contacts-"+(l.messages[0]?.nodeId??T));case c.Dalle:return t.jsx(Qs,{messages:l.messages,clientThreadId:s},"dalle-"+(l.messages[0]?.nodeId??T));case c.GizmoEditor:return t.jsx(Ks,{messages:l.messages},"gizmo-editor-"+(l.messages[0]?.nodeId??T));case c.Canmore:return t.jsx(Cs,{messages:l.messages,isRequestActive:f},"canmore-"+(l.messages[0]?.nodeId??T));case c.Debug:return j?t.jsx(Js,{message:l.message},"debug-"+l.message.nodeId):null;case c.SearchResult:return t.jsx(qs,{messages:l.messages},"search-result-"+(l.messages[0]?.nodeId??T))}});return t.jsx(tt,{shouldGrowContainer:I,children:P})}function st(){return t.jsx($e,{type:"danger",children:t.jsx(U,{id:"daIg0P",defaultMessage:"Unable to display this message due to a error."})})}function tt({children:e,shouldGrowContainer:a}){return t.jsx("div",{className:w({"flex max-w-full flex-col":!0,"flex-grow":a}),children:t.jsx(Ee,{name:"GroupedMessages",fallback:st,children:e})})}function ft(e,a,s,o){let i=es.getReadyFiles(e.getState());o?.kind===z.GizmoMagicCreate?i=i.filter(d=>d.gizmoId!=null):i=i.filter(d=>d.gizmoId==null);let n=a??"";const g=[],r=[],m=ss(s,o),u=ts(s,o).length>0,M=m===W.Interpreter||m===W.Retrieval||m===W.ContextConnector;return i.forEach(({fileSpec:d})=>{if(M){const h=d.contextConnectorInfo;g.push({id:d.id,size:d.size,name:d.name,context_connector_info:h?{context_connector:h?.contextConnector,source_url:h?.sourceUrl,synthetic_extension:h?.syntheticExtension??null,type:h?.type}:void 0,mime_type:d.mimeType,width:"width"in d?d.width:void 0,height:"height"in d?d.height:void 0,file_token_size:d.fileTokenSize})}u&&"width"in d&&"height"in d&&r.push({content_type:_e.ImageAssetPointer,asset_pointer:as(d.id),size_bytes:d.size,width:d.width,height:d.height})}),r.length>0&&(r.push(a??""),n={content_type:H.MultimodalText,parts:r}),{content:n,attachments:g}}async function ht({clientThreadId:e,currentRequestId:a,queryClient:s,isHistoryAndTrainingDisabled:o}){const i=D.getServerThreadId(e);ms.stopConversation(i);const n=D.getTree(e);!n.hasReceivedServerCompletion&&!o&&n.getParent(a).metadata?.errCode!==qe.ContentPolicy&&setTimeout(()=>{gs.onCreateFinished(s,i,o)},500),i&&Te.checkGate("3922476776")&&await ye.stopConversationProcess(i),Ze.abortRequest(a)&&D.updateTree(e,r=>{const m=D.getThreadCurrentLeafId(e);r.updateNodeMessageMetadata(m,{finish_details:{type:"interrupted"}})})}export{ut as C,K as T,v as a,mt as b,ht as c,gt as d,ft as g};
//# sourceMappingURL=j70059cdefmxdczh.js.map
