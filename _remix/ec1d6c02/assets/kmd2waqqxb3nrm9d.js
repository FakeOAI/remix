const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/sso-d96fytjrxr1wd8cs.js","assets/mdvve60r3u0lq3gw.js","assets/eiz85vh9wqm3txxu.js","assets/root-clozo42r.css","assets/la9ot4ejr0xq00fv.js","assets/ggghhsqfrwvy26w6.js","assets/conversation-small-ogafjggy.css","assets/jfxv6pru1fep6d0n.js","assets/1em6js9ldywb8jo9.js","assets/mgzwrqlcqpofwvnn.js","assets/j0mwk4jy2xii6a90.js","assets/bijaxd0rygoar74a.js","assets/nu8w0jlcd97empkl.js","assets/gffjrndhueggzugw.js","assets/bfk8q13uf0xob9la.js","assets/l451h3pg2q1q6d92.js","assets/krcsso3dzxjs0rk7.js","assets/jzdvdg5p8vdo66j8.js","assets/ie0xqw3uu7as5d2v.js","assets/bm4tk3i6mh76b3sk.js","assets/n2bkejszh8qiwe4c.js","assets/n4x9ba3q8tw7thwr.js","assets/chanqqq14eovqfzi.js","assets/lzyyefxn5lw4y3xr.js","assets/km36rs7hnkq57j12.js","assets/itghwucfyv5ciib7.js","assets/nj4ujvlr0k17b94v.js","assets/gfhktqjs1o9pkfj1.js","assets/i4y0h3ss1395zpjq.js","assets/i829m7lb8g57h1fh.js","assets/hghy272d8e3carqv.js","assets/b06uixp33nqioxq3.js","assets/kqwdyvkaaavvn8k3.js","assets/h32i4q3h9g7aelpk.js","assets/j1dth7gac8a34hts.js","assets/m1devxqg0epau5hp.js","assets/lj3dqildrwdbc2oe.js","assets/e9lafxuzyeh4418f.js","assets/gr2fxe9c4t8exscc.js","assets/m3tzvhdh0475rs9h.js","assets/nhwwej1nq0zrd7sc.js","assets/crl0sez1qgtqcmrg.js","assets/iw8jz1bl29vq1dva.js","assets/mddy9fo43dpte5se.js","assets/iurh0glg6qmfh0mo.js","assets/o505znxsrwvjmna6.js","assets/ianjmy4ssm37yheo.js","assets/z8z8vxmu3fwiwl8d.js","assets/e19b4froa89gonib.js","assets/cjprrp01wkq5trs7.js","assets/kgiyyb8sxn32sml2.js","assets/iej0cupg2dqkmejt.js","assets/ehs9pxknk2ixdhls.js","assets/82hahlbcb9bbt4fq.js","assets/jk8w36bsokizpx57.js","assets/m55fs9o2htlqjy5t.js","assets/lvljgaxcto3lg1ob.js","assets/fjinss7pa440pg08.js","assets/lj8zcwwzxc9sqlh8.js","assets/c3r36uhxxyouz9rd.js","assets/c1yqvn64tqcdhu6q.js","assets/nxywmgodaixgther.js","assets/jiduoherw1s2lh7w.js","assets/carousel-wd3f3wtr.css","assets/fwf9110vpej6fyav.js","assets/nm04jgpfyxi6pn12.js"])))=>i.map(i=>d[i]);
import{bU as Oe,u as Gt,r as l,b as qt,l as n,R as zt,fn as Qt,an as at,W as K,fo as Me,bx as X,by as Kt,fp as Yt,a3 as se,a2 as ue,m as ve,cl as Xt,aN as Y,bD as de,P as W,d as U,aA as Jt,aD as Zt,aE as en,a0 as w,a1 as De,a as rt,bf as be,aK as tn,c7 as nn,c5 as sn,a$ as ge,bX as it,bz as ct,cn as lt,a9 as on,eY as an,eZ as rn,ap as _e,bg as xe,bW as cn,Q as ut,bd as Re}from"./mdvve60r3u0lq3gw.js";import{hL as ln,hM as un,hN as dn,hO as mn,hP as fn,hQ as pn,ex as gn,hR as xn,hS as hn,hT as vn,fl as Ge,hU as bn,hV as In,hW as yn,hX as Sn,hY as me,fA as Cn,hZ as Mn,h_ as Tn,h$ as jn,i0 as kn,i1 as En,i2 as dt,i3 as qe,i4 as Pn,i5 as fe,i6 as wn,i7 as Rn,i8 as ze,fg as An,fm as Fn,fp as Nn,i9 as On,ia as Dn,ib as _n,ic as mt,fw as Wn,id as $n,ie as ft,ig as Bn,c as oe,N as Ie,ih as Ln,ii as Un,ij as pe,ik as Hn,il as pt,im as Te,io as Vn,ip as Gn,bo as J,iq as qn,ir as zn,is as Qn,b0 as D,it as gt,aV as Qe,aW as ae,aX as ye,b5 as Kn,bw as Yn,bx as Xn,b8 as Jn,b9 as xt,ba as he,bb as re,bn as Zn,by as O,iu as _,bz as es,bc as ts,bd as ns,be as ss,bg as ht,bf as os,aZ as as,bk as rs,bl as is,bp as cs,bq as ls,iv as us,iw as ds,ix as ms,iy as fs,bs as Ke,iz as vt,bt as ps,bm as gs,bv as xs,iA as hs,iB as vs,iC as bs,iD as bt,iE as Is,iF as ys,iG as je,iH as Ss,f7 as Cs,A as We,V as Q,aB as It,v as yt,ax as $e,d as Ms,gX as Be,cW as St,ca as Ye,y as Ct,aN as Ts,bS as js,iI as ks,eh as Es,iJ as Ps,u as ws,aK as Mt,bV as Tt,w as Rs,x as As}from"./ggghhsqfrwvy26w6.js";import{q as Fs,L as jt,K as Ns,u as Os}from"./mgzwrqlcqpofwvnn.js";import{T as Ae,j as Ds,p as _s,w as Ws,d as $s}from"./j0mwk4jy2xii6a90.js";import{u as Le,a5 as Bs,bv as kt,a0 as Et,aN as Ls,ae as Us,q as Hs,S as Vs,a8 as Gs,p as qs,aW as Pt,br as wt,bw as Rt,I as zs,bh as Qs,b7 as Ks,b1 as Xe,aY as Ys,U as Xs}from"./eiz85vh9wqm3txxu.js";import{D as P,$ as Js,B as Zs}from"./i4y0h3ss1395zpjq.js";import{c as At,d as Ft}from"./gffjrndhueggzugw.js";import{u as eo}from"./czcwez8nqm74k4qu.js";const to=()=>{const{value:e}=Oe("44045625");return e},Da=()=>{const{value:e}=Oe("3700195277");return e||!1},Ue=e=>{const t=Fs(e);return to()&&!!t?.includes("canmore")},no=e=>qt.safeGet("/conversation/{conversation_id}/textdocs",{parameters:{path:{conversation_id:e}}}),so=async e=>{const t=await no(e),s=new Map(t?.map(r=>[r.id,r])),o=[];for(const{id:r,content:i,version:c,textdoc_type:m,title:f,comments:p}of t)o.push({textdocId:r,messageId:null,type:mn(m),comments:fn(p,i),title:f,content:i,versionInt:c,createdAt:0});return{persistedTextdocVersionById:new Map(o.map(r=>[r.textdocId,r])),persistedTextdocVersions:o,persistedTextdocById:s}};function oo({clientThreadId:e,isEnabled:t}){const s=Ae.getServerThreadId(e),{data:o,error:a,isLoading:r,isFetching:i,refetch:c}=Gt({queryKey:[s,"textdocs"],enabled:!!s&&t,gcTime:0,queryFn:()=>s&&so(s)});return l.useEffect(()=>{if(!o)return;const{persistedTextdocVersions:m}=o;ln(m),un(m),dn(m)},[o]),[{...o,error:a,isLoading:r,isFetching:i},c]}const Nt=pn(null);function ie(e=Qt){return _n(Nt,e)}function _a(){return ie(e=>e?.isFetchingFromPersistence)}function Wa(){return ie(e=>e?.isEnabled)}function $a(e){const t=dt();return ie(s=>mt(s,t,e))}function Ot(e){const t=dt();return ie(s=>mt(s,t,e)?.metadata??null)}function Dt(){const e=ie(t=>t?.allTextdocIdSet);return e?Object.keys(e):null}function Ba(){return ie(e=>e?Object.keys(e.allTextdocIdSet).length>1:!1)}function La({clientThreadId:e,children:t}){const s=Ue(e),o=ao({clientThreadId:e,isEnabled:s});return n.jsx(Nt.Provider,{value:o,children:t})}function ao({clientThreadId:e,isEnabled:t}){const s=Ds(e),o=_s(e,s),a=Ws(e),r=gn(a),[{error:i,persistedTextdocVersionById:c,isLoading:m,isFetching:f},p]=oo({clientThreadId:e,isEnabled:t}),b=xn(),[u,d]=l.useState(!1),g=hn(),[x,v]=l.useState(!0);vn(()=>{if(!t)return;const C=Ae.getThreadCurrentLeafId(e),h=Ae.getThreadConversationTurns(e,C),E=Ge(h)?.messages??[],j=qe(E);if(j==null)return;const F=j.message.metadata?.canvas?.textdoc_id,L=j.message.metadata?.canvas?.version;F!=null&&L!=null&&b(F,L),d(!0),p().finally(()=>d(!1))});const[M,k]=l.useState(c);l.useEffect(()=>{r&&k(c)},[r]);const I=t&&(r||!x||f&&!m&&u),y=Ge(o),R=l.useMemo(()=>{if(!y)return null;const{messages:C}=y,h=bn(C??[],({message:E})=>E.author.role===zt.System),A=h===-1?C:C?.slice(h+1);return I&&A&&In(A)?A:null},[I,y]),$=!!R?M:c,S=yn(),T=Sn(),H=l.useMemo(()=>{let C=Pn();return!$||(C=me(C,h=>{for(const[A,E]of $.entries()){h.allTextdocIdSet[A]=A;const j=g.get(A);let F=j&&(j.versionInt??fe)>(E.versionInt??fe)?{...E,...j}:E;const L=T.filter(G=>G.textdocId===A&&G.kind===wn.REMOVE_COMMENT);let te=F.versionInt;for(const G of L)F=Rn(F,G),te=Math.max(te??fe,G.versionInt??fe);F={...F,versionInt:te},h.textdocById[A]=void 0,ze(h,F)}}),!S)?C:me(C,h=>{ze(h,S,!1)})},[$,g,S,T]),B=l.useMemo(()=>me(H,C=>{C.fetchError=i,C.isFetchingFromPersistence=f}),[H,i,f]),q=Cn(),z=l.useMemo(()=>R?.length?Mn(r,H,q,R):null,[R,r,q,H]),V=Tn(r,z,v),ee=l.useMemo(()=>V?jn(B,V):B,[B,V]);return l.useEffect(()=>{t&&kn(o)},[e,t,o.length]),l.useEffect(()=>{En(z)},[z]),l.useMemo(()=>me(ee,C=>{C.isEnabled!==t&&(C.isEnabled=t);const h=An(o,j=>j.messages),A={},E=Fn(h);for(let j=E.length-1;j>=0;j--){const F=E[j];if(F.type!==Nn.Canmore)continue;const L=On(F.messages),G=qe(F.messages)?.message.metadata?.canvas?.textdoc_id??Dn(h);G&&L!=null&&!A[G]&&(A[G]=!0,L.nodeId!==C.lastCanvasAssistantMessageById[G]&&(C.lastCanvasAssistantMessageById[G]=L.nodeId))}}),[ee,o,t])}const ro=({children:e})=>{const t=Dt();return t?.length?n.jsxs(P.Root,{children:[n.jsx(P.Trigger,{className:"h-10 px-2",children:e}),n.jsx(P.Content,{align:"end",onCloseAutoFocus:s=>s.preventDefault(),children:t.map(s=>n.jsx(io,{textdocId:s},s))})]}):null},io=({textdocId:e})=>{const t=at(Ot(e));return n.jsx(P.Item,{icon:Le,onClick:()=>{Wn.logButtonClick($n.FILE_DRAWER_ITEM),ft(t.textdocId)},children:t.title})},co=()=>{const e=K(),t=Dt(),s=Bn();if(!t||s)return null;const o=t.length;return o===1?n.jsx(lo,{textdocId:t[0]}):n.jsx(ro,{children:n.jsx(oe,{label:e.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsxs("div",{className:"flex items-center gap-1 text-token-text-secondary",children:[n.jsx(Le,{className:"icon-xl-heavy"}),o]})})})},lo=({textdocId:e})=>{const t=K(),s=at(Ot(e));return n.jsx(oe,{label:t.formatMessage({id:"xX2Zyt",defaultMessage:"Open canvas"}),children:n.jsx(Ie,{onClick:()=>ft(s.textdocId),icon:Le})})},uo=({clientThreadId:e,children:t})=>Ue(e)?n.jsx(Ln,{children:t}):t,_t={...Kt},mo=_t.useInsertionEffect,fo=mo||(e=>e());function Wt(e){const t=l.useRef(()=>{});return fo(()=>{t.current=e}),l.useCallback(function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return t.current==null?void 0:t.current(...o)},[])}var Fe=typeof document<"u"?l.useLayoutEffect:l.useEffect;let Je=!1,po=0;const Ze=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+po++;function go(){const[e,t]=l.useState(()=>Je?Ze():void 0);return Fe(()=>{e==null&&t(Ze())},[]),l.useEffect(()=>{Je=!0},[]),e}const xo=_t.useId,ho=xo||go;function vo(){const e=new Map;return{emit(t,s){var o;(o=e.get(t))==null||o.forEach(a=>a(s))},on(t,s){e.set(t,[...e.get(t)||[],s])},off(t,s){var o;e.set(t,((o=e.get(t))==null?void 0:o.filter(a=>a!==s))||[])}}}const bo=l.createContext(null),Io=l.createContext(null),yo=()=>{var e;return((e=l.useContext(bo))==null?void 0:e.id)||null},So=()=>l.useContext(Io),Co="data-floating-ui-focusable";function Mo(e){const{open:t=!1,onOpenChange:s,elements:o}=e,a=ho(),r=l.useRef({}),[i]=l.useState(()=>vo()),c=yo()!=null,[m,f]=l.useState(o.reference),p=Wt((d,g,x)=>{r.current.openEvent=d?g:void 0,i.emit("openchange",{open:d,event:g,reason:x,nested:c}),s?.(d,g,x)}),b=l.useMemo(()=>({setPositionReference:f}),[]),u=l.useMemo(()=>({reference:m||o.reference||null,floating:o.floating||null,domReference:o.reference}),[m,o.reference,o.floating]);return l.useMemo(()=>({dataRef:r,open:t,onOpenChange:p,elements:u,events:i,floatingId:a,refs:b}),[t,p,u,i,a,b])}function To(e){e===void 0&&(e={});const{nodeId:t}=e,s=Mo({...e,elements:{reference:null,floating:null,...e.elements}}),o=e.rootContext||s,a=o.elements,[r,i]=l.useState(null),[c,m]=l.useState(null),p=a?.reference||r,b=l.useRef(null),u=So();Fe(()=>{p&&(b.current=p)},[p]);const d=Un({...e,elements:{...a,...c&&{reference:c}}}),g=l.useCallback(I=>{const y=pe(I)?{getBoundingClientRect:()=>I.getBoundingClientRect(),contextElement:I}:I;m(y),d.refs.setReference(y)},[d.refs]),x=l.useCallback(I=>{(pe(I)||I===null)&&(b.current=I,i(I)),(pe(d.refs.reference.current)||d.refs.reference.current===null||I!==null&&!pe(I))&&d.refs.setReference(I)},[d.refs]),v=l.useMemo(()=>({...d.refs,setReference:x,setPositionReference:g,domReference:b}),[d.refs,x,g]),M=l.useMemo(()=>({...d.elements,domReference:p}),[d.elements,p]),k=l.useMemo(()=>({...d,...o,refs:v,elements:M,nodeId:t}),[d,v,M,t,o]);return Fe(()=>{o.dataRef.current.floatingContext=k;const I=u?.nodesRef.current.find(y=>y.id===t);I&&(I.context=k)}),l.useMemo(()=>({...d,context:k,refs:v,elements:M}),[d,v,M,k])}const et="active",tt="selected";function ke(e,t,s){const o=new Map,a=s==="item";let r=e;if(a&&e){const{[et]:i,[tt]:c,...m}=e;r=m}return{...s==="floating"&&{tabIndex:-1,[Co]:""},...r,...t.map(i=>{const c=i?i[s]:null;return typeof c=="function"?e?c(e):null:c}).concat(e).reduce((i,c)=>(c&&Object.entries(c).forEach(m=>{let[f,p]=m;if(!(a&&[et,tt].includes(f)))if(f.indexOf("on")===0){if(o.has(f)||o.set(f,[]),typeof p=="function"){var b;(b=o.get(f))==null||b.push(p),i[f]=function(){for(var u,d=arguments.length,g=new Array(d),x=0;x<d;x++)g[x]=arguments[x];return(u=o.get(f))==null?void 0:u.map(v=>v(...g)).find(v=>v!==void 0)}}}else i[f]=p}),i),{})}}function jo(e){e===void 0&&(e=[]);const t=e.map(c=>c?.reference),s=e.map(c=>c?.floating),o=e.map(c=>c?.item),a=l.useCallback(c=>ke(c,e,"reference"),t),r=l.useCallback(c=>ke(c,e,"floating"),s),i=l.useCallback(c=>ke(c,e,"item"),o);return l.useMemo(()=>({getReferenceProps:a,getFloatingProps:r,getItemProps:i}),[a,r,i])}function nt(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const ko=e=>({name:"inner",options:e,async fn(t){const{listRef:s,overflowRef:o,onFallbackChange:a,offset:r=0,index:i=0,minItemsVisible:c=4,referenceOverflowThreshold:m=0,scrollRef:f,...p}=Hn(e,t),{rects:b,elements:{floating:u}}=t,d=s.current[i],g=f?.current||u,x=u.clientTop||g.clientTop,v=u.clientTop!==0,M=g.clientTop!==0,k=u===g;if(!d)return{};const I={...t,...await pt(-d.offsetTop-u.clientTop-b.reference.height/2-d.offsetHeight/2-r).fn(t)},y=await Me(nt(I,g.scrollHeight+x+u.clientTop),p),R=await Me(I,{...p,elementContext:"reference"}),N=Te(0,y.top),$=I.y+N,S=Vn(Te(0,g.scrollHeight+(v&&k||M?x*2:0)-N-Te(0,y.bottom)));if(g.style.maxHeight=S+"px",g.scrollTop=N,a){const T=g.scrollHeight>g.offsetHeight&&g.offsetHeight<d.offsetHeight*c-1||R.top>=-m||R.bottom>=-m;X.flushSync(()=>a(T))}return o&&(o.current=await Me(nt({...I,y:$},g.offsetHeight+x+u.clientTop),p)),{y:$}}});function Eo(e,t){const{open:s,elements:o}=e,{enabled:a=!0,overflowRef:r,scrollRef:i,onChange:c}=t,m=Wt(c),f=l.useRef(!1),p=l.useRef(null),b=l.useRef(null);l.useEffect(()=>{if(!a)return;function d(x){if(x.ctrlKey||!g||r.current==null)return;const v=x.deltaY,M=r.current.top>=-.5,k=r.current.bottom>=-.5,I=g.scrollHeight-g.clientHeight,y=v<0?-1:1,R=v<0?"max":"min";g.scrollHeight<=g.clientHeight||(!M&&v>0||!k&&v<0?(x.preventDefault(),X.flushSync(()=>{m(N=>N+Math[R](v,I*y))})):/firefox/i.test(Gn())&&(g.scrollTop+=v))}const g=i?.current||o.floating;if(s&&g)return g.addEventListener("wheel",d),requestAnimationFrame(()=>{p.current=g.scrollTop,r.current!=null&&(b.current={...r.current})}),()=>{p.current=null,b.current=null,g.removeEventListener("wheel",d)}},[a,s,o.floating,r,i,m]);const u=l.useMemo(()=>({onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const d=i?.current||o.floating;if(!(!r.current||!d||!f.current)){if(p.current!==null){const g=d.scrollTop-p.current;(r.current.bottom<-.5&&g<-1||r.current.top<-.5&&g>1)&&X.flushSync(()=>m(x=>x+g))}requestAnimationFrame(()=>{p.current=d.scrollTop})}}}),[o.floating,m,r,i]);return l.useMemo(()=>a?{floating:u}:{},[a,u])}let ce=l.createContext({styles:void 0,setReference:()=>{},setFloating:()=>{},getReferenceProps:()=>({}),getFloatingProps:()=>({}),slot:{}});ce.displayName="FloatingContext";let He=l.createContext(null);He.displayName="PlacementContext";function Po(e){return l.useMemo(()=>e?typeof e=="string"?{to:e}:e:null,[e])}function wo(){return l.useContext(ce).setReference}function Ro(){return l.useContext(ce).getReferenceProps}function Ao(){let{getFloatingProps:e,slot:t}=l.useContext(ce);return l.useCallback((...s)=>Object.assign({},e(...s),{"data-anchor":t.anchor}),[e,t])}function Fo(e=null){e===!1&&(e=null),typeof e=="string"&&(e={to:e});let t=l.useContext(He),s=l.useMemo(()=>e,[JSON.stringify(e,(a,r)=>{var i;return(i=r?.outerHTML)!=null?i:r})]);J(()=>{t?.(s??null)},[t,s]);let o=l.useContext(ce);return l.useMemo(()=>[o.setFloating,e?o.styles:{}],[o.setFloating,e,o.styles])}let st=4;function No({children:e,enabled:t=!0}){let[s,o]=l.useState(null),[a,r]=l.useState(0),i=l.useRef(null),[c,m]=l.useState(null);Oo(c);let f=t&&s!==null&&c!==null,{to:p="bottom",gap:b=0,offset:u=0,padding:d=0,inner:g}=Do(s,c),[x,v="center"]=p.split(" ");J(()=>{f&&r(0)},[f]);let{refs:M,floatingStyles:k,context:I}=To({open:f,placement:x==="selection"?v==="center"?"bottom":`bottom-${v}`:v==="center"?`${x}`:`${x}-${v}`,strategy:"absolute",transform:!1,middleware:[pt({mainAxis:x==="selection"?0:b,crossAxis:u}),qn({padding:d}),x!=="selection"&&zn({padding:d}),x==="selection"&&g?ko({...g,padding:d,overflowRef:i,offset:a,minItemsVisible:st,referenceOverflowThreshold:d,onFallbackChange(B){var q,z;if(!B)return;let V=I.elements.floating;if(!V)return;let ee=parseFloat(getComputedStyle(V).scrollPaddingBottom)||0,C=Math.min(st,V.childElementCount),h=0,A=0;for(let E of(z=(q=I.elements.floating)==null?void 0:q.childNodes)!=null?z:[])if(E instanceof HTMLElement){let j=E.offsetTop,F=j+E.clientHeight+ee,L=V.scrollTop,te=L+V.clientHeight;if(j>=L&&F<=te)C--;else{A=Math.max(0,Math.min(F,te)-Math.max(j,L)),h=E.clientHeight;break}}C>=1&&r(E=>{let j=h*C-A+ee;return E>=j?E:j})}}):null,Qn({padding:d,apply({availableWidth:B,availableHeight:q,elements:z}){Object.assign(z.floating.style,{overflow:"auto",maxWidth:`${B}px`,maxHeight:`min(var(--anchor-max-height, 100vh), ${q}px)`})}})].filter(Boolean),whileElementsMounted:Yt}),[y=x,R=v]=I.placement.split("-");x==="selection"&&(y="selection");let N=l.useMemo(()=>({anchor:[y,R].filter(Boolean).join(" ")}),[y,R]),$=Eo(I,{overflowRef:i,onChange:r}),{getReferenceProps:S,getFloatingProps:T}=jo([$]),H=D(B=>{m(B),M.setFloating(B)});return l.createElement(He.Provider,{value:o},l.createElement(ce.Provider,{value:{setFloating:H,setReference:M.setReference,styles:k,getReferenceProps:S,getFloatingProps:T,slot:N}},e))}function Oo(e){J(()=>{if(!e)return;let t=new MutationObserver(()=>{let s=window.getComputedStyle(e).maxHeight,o=parseFloat(s);if(isNaN(o))return;let a=parseInt(s);isNaN(a)||o!==a&&(e.style.maxHeight=`${Math.ceil(o)}px`)});return t.observe(e,{attributes:!0,attributeFilter:["style"]}),()=>{t.disconnect()}},[e])}function Do(e,t){var s,o,a;let r=Ee((s=e?.gap)!=null?s:"var(--anchor-gap, 0)",t),i=Ee((o=e?.offset)!=null?o:"var(--anchor-offset, 0)",t),c=Ee((a=e?.padding)!=null?a:"var(--anchor-padding, 0)",t);return{...e,gap:r,offset:i,padding:c}}function Ee(e,t,s=void 0){let o=gt(),a=D((m,f)=>{if(m==null)return[s,null];if(typeof m=="number")return[m,null];if(typeof m=="string"){if(!f)return[s,null];let p=ot(m,f);return[p,b=>{let u=$t(m);{let d=u.map(g=>window.getComputedStyle(f).getPropertyValue(g));o.requestAnimationFrame(function g(){o.nextFrame(g);let x=!1;for(let[M,k]of u.entries()){let I=window.getComputedStyle(f).getPropertyValue(k);if(d[M]!==I){d[M]=I,x=!0;break}}if(!x)return;let v=ot(m,f);p!==v&&(b(v),p=v)})}return o.dispose}]}return[s,null]}),r=l.useMemo(()=>a(e,t)[0],[e,t]),[i=r,c]=l.useState();return J(()=>{let[m,f]=a(e,t);if(c(m),!!f)return f(c)},[e,t]),i}function $t(e){let t=/var\((.*)\)/.exec(e);if(t){let s=t[1].indexOf(",");if(s===-1)return[t[1]];let o=t[1].slice(0,s).trim(),a=t[1].slice(s+1).trim();return a?[o,...$t(a)]:[o]}return[]}function ot(e,t){let s=document.createElement("div");t.appendChild(s),s.style.setProperty("margin-top","0px","important"),s.style.setProperty("margin-top",e,"important");let o=parseFloat(window.getComputedStyle(s).marginTop)||0;return t.removeChild(s),o}var _o=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_o||{}),Wo=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Wo||{}),$o=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetItemsElement=8]="SetItemsElement",e))($o||{});function Pe(e,t=s=>s){let s=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,o=Ss(t(e.items.slice()),r=>r.dataRef.current.domRef.current),a=s?o.indexOf(s):null;return a===-1&&(a=null),{items:o,activeItemIndex:a}}let Bo={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,__demoMode:!1,menuState:0}},2:(e,t)=>{var s,o,a,r,i;if(e.menuState===1)return e;let c={...e,searchQuery:"",activationTrigger:(s=t.trigger)!=null?s:1,__demoMode:!1};if(t.focus===_.Nothing)return{...c,activeItemIndex:null};if(t.focus===_.Specific)return{...c,activeItemIndex:e.items.findIndex(p=>p.id===t.id)};if(t.focus===_.Previous){let p=e.activeItemIndex;if(p!==null){let b=e.items[p].dataRef.current.domRef,u=je(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((o=b.current)==null?void 0:o.previousElementSibling)===d.current||((a=d.current)==null?void 0:a.previousElementSibling)===null)return{...c,activeItemIndex:u}}}}else if(t.focus===_.Next){let p=e.activeItemIndex;if(p!==null){let b=e.items[p].dataRef.current.domRef,u=je(t,{resolveItems:()=>e.items,resolveActiveIndex:()=>e.activeItemIndex,resolveId:d=>d.id,resolveDisabled:d=>d.dataRef.current.disabled});if(u!==null){let d=e.items[u].dataRef.current.domRef;if(((r=b.current)==null?void 0:r.nextElementSibling)===d.current||((i=d.current)==null?void 0:i.nextElementSibling)===null)return{...c,activeItemIndex:u}}}}let m=Pe(e),f=je(t,{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.current.disabled});return{...c,...m,activeItemIndex:f}},3:(e,t)=>{let s=e.searchQuery!==""?0:1,o=e.searchQuery+t.value.toLowerCase(),a=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+s).concat(e.items.slice(0,e.activeItemIndex+s)):e.items).find(i=>{var c;return((c=i.dataRef.current.textValue)==null?void 0:c.startsWith(o))&&!i.dataRef.current.disabled}),r=a?e.items.indexOf(a):-1;return r===-1||r===e.activeItemIndex?{...e,searchQuery:o}:{...e,searchQuery:o,activeItemIndex:r,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let s=Pe(e,o=>[...o,{id:t.id,dataRef:t.dataRef}]);return{...e,...s}},6:(e,t)=>{let s=Pe(e,o=>{let a=o.findIndex(r=>r.id===t.id);return a!==-1&&o.splice(a,1),o});return{...e,...s,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.itemsElement===t.element?e:{...e,itemsElement:t.element}},Ve=l.createContext(null);Ve.displayName="MenuContext";function Se(e){let t=l.useContext(Ve);if(t===null){let s=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,Se),s}return t}function Lo(e,t){return xt(t.type,Bo,e,t)}let Uo=l.Fragment;function Ho(e,t){let{__demoMode:s=!1,...o}=e,a=l.useReducer(Lo,{__demoMode:s,menuState:s?0:1,buttonElement:null,itemsElement:null,items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsElement:i,buttonElement:c},m]=a,f=ye(t);Kn(r===0,[c,i],(d,g)=>{m({type:1}),Yn(g,Xn.Loose)||(d.preventDefault(),c?.focus())});let p=D(()=>{m({type:1})}),b=l.useMemo(()=>({open:r===0,close:p}),[r,p]),u={ref:f};return se.createElement(No,null,se.createElement(Ve.Provider,{value:a},se.createElement(Jn,{value:xt(r,{0:he.Open,1:he.Closed})},re({ourProps:u,theirProps:o,slot:b,defaultTag:Uo,name:"Menu"}))))}let Vo="button";function Go(e,t){var s;let o=l.useId(),{id:a=`headlessui-menu-button-${o}`,disabled:r=!1,autoFocus:i=!1,...c}=e,[m,f]=Se("Menu.Button"),p=Ro(),b=Zn(),u=ye(t,wo(),D(S=>f({type:7,element:S}))),d=D(S=>{switch(S.key){case O.Space:case O.Enter:case O.ArrowDown:S.preventDefault(),S.stopPropagation(),X.flushSync(()=>f({type:0})),f({type:2,focus:_.First});break;case O.ArrowUp:S.preventDefault(),S.stopPropagation(),X.flushSync(()=>f({type:0})),f({type:2,focus:_.Last});break}}),g=D(S=>{switch(S.key){case O.Space:S.preventDefault();break}}),x=D(S=>{var T;if(es(S.currentTarget))return S.preventDefault();r||(m.menuState===0?(X.flushSync(()=>f({type:1})),(T=m.buttonElement)==null||T.focus({preventScroll:!0})):(S.preventDefault(),f({type:0})))}),{isFocusVisible:v,focusProps:M}=ts({autoFocus:i}),{isHovered:k,hoverProps:I}=ns({isDisabled:r}),{pressed:y,pressProps:R}=ss({disabled:r}),N=l.useMemo(()=>({open:m.menuState===0,active:y||m.menuState===0,disabled:r,hover:k,focus:v,autofocus:i}),[m,k,v,y,r,i]),$=ht(p(),{ref:u,id:a,type:os(e,m.buttonElement),"aria-haspopup":"menu","aria-controls":(s=m.itemsElement)==null?void 0:s.id,"aria-expanded":m.menuState===0,disabled:r||void 0,autoFocus:i,onKeyDown:d,onKeyUp:g,onClick:x},M,I,R);return re({mergeRefs:b,ourProps:$,theirProps:c,slot:N,defaultTag:Vo,name:"Menu.Button"})}let qo="div",zo=Qe.RenderStrategy|Qe.Static;function Qo(e,t){var s,o;let a=l.useId(),{id:r=`headlessui-menu-items-${a}`,anchor:i,portal:c=!1,modal:m=!0,transition:f=!1,...p}=e,b=Po(i),[u,d]=Se("Menu.Items"),[g,x]=Fo(b),v=Ao(),[M,k]=l.useState(null),I=ye(t,b?g:null,D(h=>d({type:8,element:h})),k),y=as(u.itemsElement);b&&(c=!0);let R=rs(),[N,$]=is(f,M,R!==null?(R&he.Open)===he.Open:u.menuState===0);cs(N,u.buttonElement,()=>{d({type:1})});let S=u.__demoMode?!1:m&&u.menuState===0;ls(S,y);let T=u.__demoMode?!1:m&&u.menuState===0;us(T,{allowed:l.useCallback(()=>[u.buttonElement,u.itemsElement],[u.buttonElement,u.itemsElement])});let H=u.menuState!==0,B=ds(H,u.buttonElement)?!1:N;l.useEffect(()=>{let h=u.itemsElement;h&&u.menuState===0&&h!==y?.activeElement&&h.focus({preventScroll:!0})},[u.menuState,u.itemsElement,y]),ms(u.menuState===0,{container:u.itemsElement,accept(h){return h.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:h.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(h){h.setAttribute("role","none")}});let q=gt(),z=D(h=>{var A,E,j;switch(q.dispose(),h.key){case O.Space:if(u.searchQuery!=="")return h.preventDefault(),h.stopPropagation(),d({type:3,value:h.key});case O.Enter:if(h.preventDefault(),h.stopPropagation(),d({type:1}),u.activeItemIndex!==null){let{dataRef:F}=u.items[u.activeItemIndex];(E=(A=F.current)==null?void 0:A.domRef.current)==null||E.click()}vt(u.buttonElement);break;case O.ArrowDown:return h.preventDefault(),h.stopPropagation(),d({type:2,focus:_.Next});case O.ArrowUp:return h.preventDefault(),h.stopPropagation(),d({type:2,focus:_.Previous});case O.Home:case O.PageUp:return h.preventDefault(),h.stopPropagation(),d({type:2,focus:_.First});case O.End:case O.PageDown:return h.preventDefault(),h.stopPropagation(),d({type:2,focus:_.Last});case O.Escape:h.preventDefault(),h.stopPropagation(),X.flushSync(()=>d({type:1})),(j=u.buttonElement)==null||j.focus({preventScroll:!0});break;case O.Tab:h.preventDefault(),h.stopPropagation(),X.flushSync(()=>d({type:1})),fs(u.buttonElement,h.shiftKey?Ke.Previous:Ke.Next);break;default:h.key.length===1&&(d({type:3,value:h.key}),q.setTimeout(()=>d({type:4}),350));break}}),V=D(h=>{switch(h.key){case O.Space:h.preventDefault();break}}),ee=l.useMemo(()=>({open:u.menuState===0}),[u.menuState]),C=ht(b?v():{},{"aria-activedescendant":u.activeItemIndex===null||(s=u.items[u.activeItemIndex])==null?void 0:s.id,"aria-labelledby":(o=u.buttonElement)==null?void 0:o.id,id:r,onKeyDown:z,onKeyUp:V,role:"menu",tabIndex:u.menuState===0?0:void 0,ref:I,style:{...p.style,...x,"--button-width":ps(u.buttonElement,!0).width},...gs($)});return se.createElement(xs,{enabled:c?e.static||N:!1},re({ourProps:C,theirProps:p,slot:ee,defaultTag:qo,features:zo,visible:B,name:"Menu.Items"}))}let Ko=l.Fragment;function Yo(e,t){let s=l.useId(),{id:o=`headlessui-menu-item-${s}`,disabled:a=!1,...r}=e,[i,c]=Se("Menu.Item"),m=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===o:!1,f=l.useRef(null),p=ye(t,f);J(()=>{if(!i.__demoMode&&i.menuState===0&&m&&i.activationTrigger!==0)return hs().requestAnimationFrame(()=>{var T,H;(H=(T=f.current)==null?void 0:T.scrollIntoView)==null||H.call(T,{block:"nearest"})})},[i.__demoMode,f,m,i.menuState,i.activationTrigger,i.activeItemIndex]);let b=vs(f),u=l.useRef({disabled:a,domRef:f,get textValue(){return b()}});J(()=>{u.current.disabled=a},[u,a]),J(()=>(c({type:5,id:o,dataRef:u}),()=>c({type:6,id:o})),[u,o]);let d=D(()=>{c({type:1})}),g=D(T=>{if(a)return T.preventDefault();c({type:1}),vt(i.buttonElement)}),x=D(()=>{if(a)return c({type:2,focus:_.Nothing});c({type:2,focus:_.Specific,id:o})}),v=bs(),M=D(T=>{v.update(T),!a&&(m||c({type:2,focus:_.Specific,id:o,trigger:0}))}),k=D(T=>{v.wasMoved(T)&&(a||m||c({type:2,focus:_.Specific,id:o,trigger:0}))}),I=D(T=>{v.wasMoved(T)&&(a||m&&c({type:2,focus:_.Nothing}))}),[y,R]=bt(),[N,$]=Is(),S=l.useMemo(()=>({active:m,focus:m,disabled:a,close:d}),[m,a,d]);return se.createElement(R,null,se.createElement($,null,re({ourProps:{id:o,ref:p,role:"menuitem",tabIndex:a===!0?void 0:-1,"aria-disabled":a===!0?!0:void 0,"aria-labelledby":y,"aria-describedby":N,disabled:void 0,onClick:g,onFocus:x,onPointerEnter:M,onMouseEnter:M,onPointerMove:k,onMouseMove:k,onPointerLeave:I,onMouseLeave:I},theirProps:r,slot:S,defaultTag:Ko,name:"Menu.Item"})))}let Xo="div";function Jo(e,t){let[s,o]=bt();return se.createElement(o,null,re({ourProps:{ref:t,"aria-labelledby":s,role:"group"},theirProps:e,slot:{},defaultTag:Xo,name:"Menu.Section"}))}let Zo="header";function ea(e,t){let s=l.useId(),{id:o=`headlessui-menu-heading-${s}`,...a}=e,r=ys();J(()=>r.register(o),[o,r.register]);let i={id:o,ref:t,role:"presentation",...r.props};return re({ourProps:i,theirProps:a,slot:{},defaultTag:Zo,name:"Menu.Heading"})}let ta="div";function na(e,t){return re({ourProps:{ref:t,role:"separator"},theirProps:e,slot:{},defaultTag:ta,name:"Menu.Separator"})}let sa=ae(Ho),oa=ae(Go),aa=ae(Qo),ra=ae(Yo),ia=ae(Jo),ca=ae(ea),la=ae(na),le=Object.assign(sa,{Button:oa,Items:aa,Item:ra,Section:ia,Heading:ca,Separator:la});function ua({show:e,appear:t,children:s}){return n.jsx(Cs,{as:l.Fragment,enter:"transition ease-out duration-200",enterFrom:"opacity-0 translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition ease-in duration-150",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 translate-y-1",show:e,appear:t,children:s})}function ne({onClick:e,href:t,target:s,children:o,disabled:a,icon:r,testId:i}){return n.jsx(le.Item,{disabled:a,children:({active:c})=>n.jsxs(Ce,{onClick:e,href:t,target:s,className:ve({"bg-token-sidebar-surface-secondary":c,"hover:bg-token-sidebar-surface-secondary":!c&&!a}),"data-testid":i,children:[r&&n.jsx(r,{className:"icon-md"}),o]})})}function da({to:e,children:t,icon:s}){return n.jsx(le.Item,{children:({active:o})=>n.jsx(Xt,{to:e,children:n.jsxs(Ce,{$as:"span",className:ve(o?"bg-token-sidebar-surface-secondary":"cursor-pointer"),children:[s&&n.jsx(s,{className:"icon-md"}),t]})})})}ue.a`p-2 rounded-md hover:bg-black/10 hover:dark:bg-white/10 cursor-pointer`;const Ce=ue.a`flex gap-2 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group items-center`,Ua=ue(Ce)`border dark:border-white/20 min-h-0 hover:bg-gray-500/10 h-10 rounded-lg border-[rgba(0,0,0,0.1)]`,Ne=ue.div`h-px bg-token-border-light my-1.5`,Ha=ue(Ce)`${e=>e.$active?"bg-token-sidebar-surface-secondary":"hover:bg-token-sidebar-surface-secondary"}`;function Bt({menuItemComponent:e}){const t=Y(),s=de(),o=l.useCallback(()=>{W.logEvent(U.clickSidebarAccountPortalMenuItem),We(s,"Sidebar account menu item")},[s]),{value:a}=Jt("1028682714"),r=Zt(()=>en(()=>import("./sso-d96fytjrxr1wd8cs.js").then(i=>i.M),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65])).then(i=>i.default));return n.jsxs(n.Fragment,{children:[t?.hasPaidSubscription()&&(a?n.jsx(r,{handleClickCustomerPortal:o,menuItemComponent:e}):n.jsx(e,{onClick:o,icon:Bs,children:n.jsx(w,{id:"popoverNavigation.myPlan",defaultMessage:"My plan"})})),t?.canInteractWithGizmos()&&n.jsx(e,{onClick:()=>{W.logEvent(U.accountMenuClickMyGPTs),s(jt())},icon:kt,children:n.jsx(w,{id:"popoverNavigation.myGpts",defaultMessage:"My GPTs"})}),n.jsx(e,{icon:Et,onClick:()=>{Q.openModal(It.UserContext),W.logEvent(U.accountMenuClickCustomizeChatGPT)},children:n.jsx(w,{id:"popoverNavigation.chatPreferences.1",defaultMessage:"Customize ChatGPT"})})]})}function Lt({menuItemComponent:e,routedMenuItemComponent:t}){const s=Y(),o=Oe("2756095923")?.value&&s?.isEdu()&&s?.isStandardUserOfAccount();return n.jsxs(n.Fragment,{children:[!o&&n.jsx(t,{to:"/admin",icon:Ls,children:n.jsx(w,{...we.myWorkspaceSettings})}),n.jsx(t,{to:jt(),onClick:()=>{W.logEvent(U.accountMenuClickMyGPTs)},icon:kt,children:n.jsx(w,{...we.myGpts})}),n.jsx(e,{onClick:()=>{Q.openModal(It.UserContext),W.logEvent(U.accountMenuClickCustomizeChatGPT)},icon:Et,children:n.jsx(w,{...we.chatPreferences})})]})}const we=De({myWorkspaceSettings:{id:"workspacePopoverNavigation.myWorkspaceSettings",defaultMessage:"Manage workspace"},chatPreferences:{id:"B4s/Jz",defaultMessage:"Customize ChatGPT"},myGpts:{id:"workspacePopoverNavigation.myGpts",defaultMessage:"My GPTs"}});function Va({onClickSettings:e}){return n.jsxs(le,{as:"div",className:"group relative",children:[n.jsx(ga,{}),n.jsx(ua,{children:n.jsx(le.Items,{className:"popover absolute bottom-full left-0 z-50 mb-1 w-full overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary p-1.5 shadow-lg outline-none",children:n.jsx(pa,{onClickSettings:e})})})]})}function Ut(){const e=!Y()?.isEnterprisey()&&!ct,t=K(),s=$e(),o=de();return s?n.jsxs("div",{className:"flex items-center justify-between gap-2 py-2 pl-5 pr-4",children:[n.jsx("div",{className:"text-sm text-token-text-secondary",children:s?.email}),e&&n.jsx(oe,{label:t.formatMessage(Z.addWorkspaceTooltip),side:"right",children:n.jsx("button",{onClick:()=>We(o,"profile menu"),children:n.jsx(zs,{className:"icon-sm text-token-text-primary"})})})]}):null}function ma(){const e=Y();return e==null?n.jsx(n.Fragment,{children:n.jsx("div",{className:"w-full px-3 py-2",children:n.jsx(ge,{})})}):n.jsxs(n.Fragment,{children:[n.jsx(Ut,{}),n.jsx("div",{className:"flex h-11 w-full items-center justify-start gap-3 px-3 py-1 text-sm",children:n.jsx(Vt,{workspace:e,isLoading:!1,currentWorkspaceId:e.id,showCheck:!1})})]})}function Ht({menuItemComponent:e}){const t=yt(),s=rt(),{data:o}=be(),a=Y(),[r,i]=l.useState(!1),c=$e(),m=K(),f=tn();if(!a||!o)return null;const p=a.isWorkspaceAccount(),b=o.accountItems.length>1,u=o.accountItems,d=Ms([u.find(x=>x.isPersonalAccount()),...u.filter(x=>!x.isPersonalAccount())]);if(d.sort((x,v)=>x.isPersonalAccount()?1:v.isPersonalAccount()?-1:0),!b)return p?n.jsx(ma,{}):n.jsx(n.Fragment,{children:n.jsx("div",{className:"ml-3 mr-2 py-2 text-sm text-token-text-secondary",children:c?.email})});const g=d.map(x=>n.jsx(e,{disabled:x.isDeactivated(),onClick:()=>{if(x.isDeactivated()||x.id===a?.id)return;i(!0);const{willRedirect:v}=nn(s,x.id,t,m,f);v||sn()},className:"radix-disabled:pointer-events-auto radix-disabled:hover:bg-transparent",children:x.isDeactivated()?n.jsx(fa,{workspace:x,isLoading:r}):n.jsx(Vt,{workspace:x,isLoading:r,currentWorkspaceId:a?.id})},x.id));return n.jsxs(n.Fragment,{children:[n.jsx(Ut,{}),n.jsx(P.Separator,{}),g]})}function Vt({workspace:e,isLoading:t,currentWorkspaceId:s,showCheck:o=!0}){const a=e.canAccessWithCurrentSession,r=!t&&o&&e.id===s;return n.jsxs("div",{children:[n.jsxs("div",{className:"flex w-full items-center gap-2.5",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(Be,{iconSize:"small",workspace:e,className:ve({"flex-shrink-0":!0})})}),n.jsx("div",{className:"line-clamp-1 text-token-text-primary",children:St(K(),e)}),t&&n.jsx(ge,{}),r&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(Us,{className:"icon-sm"})}),!a&&n.jsx("span",{className:"text-token-text-primary",children:n.jsx(Hs,{className:"icon-sm"})})]}),!a&&n.jsx("div",{className:"rowDivClassName",children:n.jsx("small",{className:"text-token-text-secondary",children:n.jsx(w,{...e.ssoConnectionName?Z.authenticateWithSSOToAccessWorkspace:Z.authenticateWithoutSSOToAccessWorkspace})})})]})}function fa({workspace:e,isLoading:t}){const s=K(),o=e.isOwnerOfAccount(),[a,r]=l.useState(!1),i=eo(e.id);return l.useEffect(()=>{i!=null&&a&&(Q.setPurchaseWorkspaceData({minimumSeats:Math.max(i,Ye),existingAccount:e}),r(!1))},[i,a,e]),n.jsxs(n.Fragment,{children:[n.jsxs(oe,{className:"flex w-full flex-1 items-center gap-2.5",label:s.formatMessage(Z.disabledWorkspaceTooltip),sideOffset:20,side:"right",children:[n.jsx("span",{className:"flex h-5 w-5 items-center justify-center",children:n.jsx(Vs,{className:"icon-sm flex-shrink-0 opacity-30"})}),n.jsx("div",{className:"truncate opacity-30",children:St(s,e)})]}),t&&n.jsx(ge,{}),!t&&n.jsxs(P.Root,{children:[n.jsx(Js,{className:"rounded text-center hover:bg-token-main-surface-secondary",children:n.jsx(Gs,{className:"icon-sm m-1"})}),n.jsx(P.Portal,{children:n.jsxs(P.Content,{children:[o&&n.jsx(n.Fragment,{children:n.jsx(P.Item,{onClick:()=>{i==null?r(!0):Q.setPurchaseWorkspaceData({minimumSeats:Math.max(i,Ye),existingAccount:e})},children:a?n.jsx(ge,{}):n.jsx(w,{id:"navigation.reactivateWorkspace",defaultMessage:"Reactivate workspace"})})}),n.jsx(P.Item,{onClick:()=>{Q.setLeaveWorkspaceData(e)},children:n.jsx(w,{id:"navigation.leaveWorkspace",defaultMessage:"Leave workspace"})})]})})]})]})}function pa({onClickSettings:e}){const{data:t}=be(),s=Y(),o=Ct(),a=At(),{openModal:r}=Ft();if(!s||!t)return null;const i=s.isWorkspaceAccount(),c=!o;return n.jsxs("nav",{children:[n.jsx(Ht,{menuItemComponent:ne}),n.jsx(Ne,{}),i?n.jsx(Lt,{menuItemComponent:ne,routedMenuItemComponent:da}):n.jsx(Bt,{menuItemComponent:ne}),c&&n.jsx(ne,{href:Ts(),target:"_blank",onClick:()=>{W.logEvent(U.clickFaqLink)},icon:qs,children:n.jsx(w,{...Z.helpAndFaq})}),n.jsx(ne,{onClick:e,icon:Pt,testId:"accounts-settings-button",children:n.jsx(w,{...Z.settings})}),a&&n.jsx(xa,{openDownloadModal:r}),n.jsx(Ne,{}),n.jsx(ne,{onClick:()=>{W.logEvent(U.clickLogOut,{eventSource:"mouse"}),it()},icon:wt,children:n.jsx(w,{...Z.logOut})})]})}function ga(){return $e()?n.jsx(ha,{}):null}function xa({openDownloadModal:e}){return n.jsxs("span",{children:[n.jsx(Ne,{}),n.jsx(ne,{icon:Rt,onClick:()=>{W.logEvent(U.accountMenuClickDownloadApp),e()},children:n.jsx(w,{...Z.downloadApp})})]})}function ha(){const{data:e}=be(),t=Y(),s=js(),o=ks();if(!t||!e)return null;const a=t.isWorkspaceAccount(),r=e.accountItems.length>1;return n.jsxs(le.Button,{className:"flex w-full max-w-[100%] items-center gap-2 rounded-lg p-2 text-sm hover:bg-token-sidebar-surface-secondary group-ui-open:bg-token-sidebar-surface-secondary","data-testid":"accounts-profile-button",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Be,{iconSize:"gizmo"})}),n.jsxs("div",{className:"relative -top-px grow -space-y-px truncate text-start text-token-text-primary",children:[n.jsx("div",{dir:"auto",children:o}),a||r?n.jsx("div",{className:"truncate text-xs text-token-text-secondary",dir:"auto",children:s}):null]})]})}const Z=De({helpAndFaq:{id:"navigation.helpAndFaq",defaultMessage:"Help & FAQ"},settings:{id:"navigation.settings",defaultMessage:"Settings"},logOut:{id:"navigation.logOut",defaultMessage:"Log out"},accountSwitcherTitle:{id:"navigation.accountSwitcherTitle",defaultMessage:"Workspaces"},defaultWorkspaceTitle:{id:"useWorkspaces.defaultWorkspaceTitle",defaultMessage:"Untitled Workspace"},addWorkspaceTooltip:{id:"navigation.addWorkspaceTooltip",defaultMessage:"Create a Team workspace"},disabledWorkspaceTooltip:{id:"navigation.disabledWorkspaceTooltip",defaultMessage:"This workspace has been deactivated"},downloadApp:{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"},authenticateWithSSOToAccessWorkspace:{id:"CV7pdM",defaultMessage:"Authenticate with SSO to access this workspace"},authenticateWithoutSSOToAccessWorkspace:{id:"zfCWFh",defaultMessage:"Authenticate without SSO to access this workspace"}});function va({clientThreadId:e,location:t}){const s=rt(),{id:o}=Ns(e),a=Os(!0),r=de(),i=lt(),c=on();return l.useCallback(()=>{an(rn(s))?Es(r):i?r({pathname:c.pathname,search:c.search},{state:Ps()}):(a({modelId:o,location:t}),_e.logEvent("chatgpt_web_thread_tap_new_thread"))},[s,t,o,a,r,i,c])}function Ga({showShareButton:e,showProfileDropdown:t,clientThreadId:s}){const o=$s(s),a=K(),r=Ue(s),{layer:i}=xe("1547743984"),c=i.get("show_share_button_text",!1);return n.jsxs(n.Fragment,{children:[!1,r&&n.jsx(co,{}),e&&o&&n.jsx(uo,{clientThreadId:s,children:c?n.jsx(Re,{onClick:()=>Q.openSharingModal(o),icon:Xe,"data-testid":"share-chat-button",color:"secondary",className:"text-token-text-primary",children:a.formatMessage({id:"GizmoInformation.shareChat",defaultMessage:"Share"})}):n.jsx(oe,{label:a.formatMessage({id:"CPEfES",defaultMessage:"Share chat"}),children:n.jsx(Ie,{"data-testid":"share-chat-button",onClick:()=>Q.openSharingModal(o),icon:Xe})})}),t&&n.jsx(Ia,{})]})}function ba({to:e,children:t,icon:s}){const o=de();return n.jsx(P.Item,{icon:s,onSelect:()=>o(e),children:t})}function Ia(){const{isUnauthenticated:e}=ut();return e?n.jsx(ja,{}):n.jsx(ya,{})}function ya(){const{data:e}=be(),t=Y(),s=t?.isPlus()??!1,o=t?.isWorkspaceAccount()??!1,{openSettings:a}=ws(),r=At(),{openModal:i}=Ft(),{layer:c}=xe("2888142241"),{doesUserHaveAnyAccountsWithPlusFeatures:m}=cn(),{layer:f}=xe("2670443078");if(!t||!e)return null;const p=e.accountItems.length>1;let b=s;!o&&!s&&m&&f.get("is_gating_fix_enabled",!1)&&(b=m);const u=!o&&!b&&!ct&&c.get("is_upgrade_in_settings",!1);return n.jsxs(Zs,{triggerButton:n.jsx("button",{onClick:()=>{W.logEvent(U.accountOpenProfileMenu),_e.logEvent("chatgpt_account_open_profile_menu")},"data-testid":"profile-button",className:"flex h-10 w-10 items-center justify-center rounded-full hover:bg-token-main-surface-secondary focus-visible:bg-token-main-surface-secondary focus-visible:outline-0",children:n.jsx(Be,{iconSize:"medium"})}),children:[p&&n.jsx(Ht,{menuItemComponent:P.Item}),p?n.jsx(P.Separator,{}):null,o?n.jsx(Lt,{menuItemComponent:P.Item,routedMenuItemComponent:ba}):n.jsx(Bt,{menuItemComponent:P.Item}),n.jsx(P.Item,{icon:Pt,onClick:()=>a(),"data-testid":"settings-menu-item",children:n.jsx(w,{defaultMessage:"Settings",id:"navigation.settings.0"})}),n.jsx(P.Separator,{}),r&&n.jsx(Ca,{openDownloadModal:i}),u&&n.jsx(Ma,{}),(u||r)&&n.jsx(P.Separator,{}),n.jsx(P.Item,{onClick:()=>{W.logEvent(U.clickLogOut,{eventSource:"mouse"}),W.logLogOutButtonClicked({location:"profile_drop_down"}),it()},"data-testid":"log-out-menu-item",icon:wt,children:n.jsx(w,{defaultMessage:"Log out",id:"navigation.logOut.0"})})]})}function Sa({onClick:e,className:t,testId:s}){const o=K(),a=lt(),r=a?o.formatMessage({id:"yqd/J5",defaultMessage:"Clear chat"}):o.formatMessage({id:"OFyxqj",defaultMessage:"New chat"});return n.jsx(oe,{sideOffset:4,label:r,className:ve("flex",t),children:n.jsx(Ie,{onClick:()=>{Q.closePopoverNavSidebar(),e()},icon:a?Ys:Xs,surfaceContext:"secondary","aria-label":r,"data-testid":s})})}function qa({clientThreadId:e}){const[t]=Mt(a=>[a.activeStageSidebar]),s=Tt(),o=va({clientThreadId:e,location:"Navigation actions"});return!s&&!t?null:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Ta,{}),n.jsx(Sa,{onClick:o})]})}function Ca({openDownloadModal:e}){return n.jsx("span",{children:n.jsx(P.Item,{icon:Rt,onClick:()=>{e(),W.logEvent(U.accountMenuClickDownloadApp)},children:n.jsx(w,{id:"navigation.downloadMacApp",defaultMessage:"Download the macOS app"})})})}function Ma(){const e=de(),s=Y()?.wasPaidCustomer()??!1,o=()=>{_e.logEvent("chatgpt_plus_upgrade_in_settings_menu_clicked"),W.logEvent(U.plusUpgradeInSettingsMenuClicked),We(e,"Upper right settings menu")};return n.jsx(P.Item,{icon:Qs,onClick:o,children:s?n.jsx(w,{id:"navigation.renewPlus",defaultMessage:"Renew Plus"}):n.jsx(w,{id:"navigation.upgradePlan",defaultMessage:"Upgrade Plan"})})}function Ta(){const e=K(),[t]=Mt(r=>[r.activeStageSidebar]),s=Tt(),o=Ct(),{isUnauthenticated:a}=ut();return!t&&!s||!o||a?null:n.jsx(oe,{label:e.formatMessage({id:"cElEQV",defaultMessage:"Open sidebar"}),className:"flex",children:n.jsx(Ie,{"aria-label":e.formatMessage({id:"pV/Etp",defaultMessage:"Open sidebar"}),onClick:Q.toggleNavSidebar,icon:Ks,surfaceContext:"primary"})})}function ja(){const e=yt(),t=Rs(),s=As(ka.signUpCta),{layer:o}=xe("3637408529"),a=o.get("is_desktop_primary_auth_button_on_right",!1),r=()=>{e({authType:"login",callback:p=>{W.logLogInButtonClicked({location:"Chat header",provider:p})}})},i=()=>{e({authType:"signup",callback:p=>{W.logSignUpButtonClicked({location:"Chat header",provider:p})}})},c=n.jsx(Re,{onClick:r,color:t?"primary":"secondary",size:"small","data-testid":"login-button",children:n.jsx(w,{id:"B1SN7b",defaultMessage:"Log in"})},"login"),m=n.jsx(Re,{color:t?"secondary":"primary",onClick:i,size:"small","data-testid":"signup-button",children:n.jsx(w,{...s})},"signup"),f=t?[c,m]:[m,c];return n.jsx("div",{className:"flex items-center justify-center gap-2",children:a?f.reverse():f})}const ka=De({signUpCta:{id:"P6cySK",defaultMessage:"Sign up"}});export{Ga as C,Ta as E,Ia as L,No as M,Sa as N,ua as P,Fo as R,La as T,Ha as U,ya as a,Ao as b,Ce as c,Ua as d,Va as e,Ue as f,Da as g,$a as h,_a as i,Ot as j,Ba as k,Wa as l,ie as m,to as n,qa as o,va as u,Po as x,wo as y};
//# sourceMappingURL=kmd2waqqxb3nrm9d.js.map
