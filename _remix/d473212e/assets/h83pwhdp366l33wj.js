const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/nu0ykbxea3g3v1e6.js","assets/kkasil63rmfidan7.js","assets/spwglx8qg6louqra.js","assets/root-cpnh8fjk.css","assets/kn4ay466vw8pwdsq.js","assets/m5ko8xkwcu432ruw.js","assets/conversation-small-c8xg50op.css","assets/c8spuoldjzhkt44r.js","assets/gazk9g3ps3xf2gya.js","assets/ebnn6k9808w4u7tm.js","assets/c701sb993wyon030.js"])))=>i.map(i=>d[i]);
import{D as L,r as k,j as e,E as U,G as n,ba as $,a2 as ee,H as C,A as P,I as O,dd as S,aH as ae,c as te,z as B,C as se,ch as ie,bY as ne,an as oe,S as re,av as V,az as F,aw as z,dV as ce,bH as q,P as de}from"./kkasil63rmfidan7.js";import{aU as le,b3 as A,aT as p,H as me,aH as I,U as f,$ as ue,B as ge,D as he,d9 as H,bl as xe,da as fe,db as pe,bj as E,ce as K}from"./m5ko8xkwcu432ruw.js";import{q as ve,r as ye,c as we}from"./c8spuoldjzhkt44r.js";import{F as je,A as be,E as Ge,S as Se,aQ as Ie,g as Me,T as ke,q as ze,b9 as Ce,$ as Pe,av as W,B as Ae,Z as Te,al as _e,o as Fe,aE as Ee}from"./spwglx8qg6louqra.js";import{d as De,T as Ne}from"./ebnn6k9808w4u7tm.js";import{G as M}from"./nc7yz4lk3z3pc5c9.js";import{R as Le}from"./gwhh6psgf34yh4t1.js";import{B as J,D as r}from"./kn4ay466vw8pwdsq.js";import{b as Ue,c as $e}from"./bissc0yl9rab3u2m.js";import{G as Oe}from"./mxfabxamzanivwep.js";import"./gazk9g3ps3xf2gya.js";import"./c701sb993wyon030.js";import"./jwmpdi90ayhpa01i.js";import"./mqfbyxetp1xg623u.js";import"./bllz95bri8cvn1jb.js";function Be(t){return P({mutationFn:async({message:a,includeFrom:s})=>{await I.sendFeedbackEmail(t,a,s)}})}const Ve=({gizmo:t})=>{const a=le(),s=A(p.GPTFeedbackEmail),i=()=>f.closeModal(p.GPTFeedbackEmail),c=L(),[h,m]=k.useState(""),[d,g]=k.useState(!0),o=Be(t.gizmo.id),u=h.length===0;return e.jsx(U,{type:"success",title:c.formatMessage(G.title,{name:t.gizmo.display.name}),isOpen:s,onClose:i,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:e.jsx("div",{className:"flex flex-row",children:e.jsxs("div",{className:"-mt-4 flex flex-grow flex-col space-y-4",children:[e.jsx(me,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:`Write feedback about ${t.gizmo.display.name}...`,value:h,rows:4,onChange:l=>m(l.target.value)}),e.jsxs("div",{className:"flex flex-row items-center space-x-2 self-start",children:[e.jsx("input",{type:"checkbox",checked:d,onChange:l=>g(l.target.checked)}),a&&e.jsx("span",{className:"text-sm",children:e.jsx(n,{...G.includeFrom,values:{email:e.jsx("strong",{children:a.email})}})})]}),e.jsx($,{color:"primary",disabled:u,onClick:async()=>{await o.mutateAsync({message:h,includeFrom:d}),ee.success(c.formatMessage(G.successToast),{duration:3}),i()},children:e.jsx(n,{...G.send,values:{name:t.gizmo.author.display_name}})})]})})})},G=C({title:{id:"GizmoFeedbackEmailModal.title",defaultMessage:"Feedback about {name}"},send:{id:"GizmoFeedbackEmailModal.sendTo",defaultMessage:"Send To {name}"},successToast:{id:"GizmoFeedbackEmailModal.successToast",defaultMessage:"Feedback sent"},includeFrom:{id:"GizmoFeedbackEmailModal.includeFrom",defaultMessage:"Include my email address {email}"}});function qe(t){const a=B();return P({mutationFn:async({actionId:s,domain:i,settings:c})=>I.upsertUserActionSettings(s,i,c),onSuccess:()=>{a.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:t}]})}})}function He(t){const a=B();return P({mutationFn:async({pluginId:s})=>{await se.deletePluginUserSettings({pluginId:s})},onSuccess:()=>{a.invalidateQueries({queryKey:["gizmo","userActionSettings",{gizmoId:t}]})}})}const Ke=({gizmo:t})=>{const{data:a,isLoading:s}=ve(t.gizmo.id,!0),i=A(p.GPTPrivacySettings),c=()=>f.closeModal(p.GPTPrivacySettings),h=L(),[m,d]=k.useState("actions"),g=a!=null&&a.settings.some(o=>o.oauth_status!=null&&t.tools.some(u=>{var l;return u.type===S.JIT_PLUGIN&&((l=u.metadata)==null?void 0:l.action_id)===o.action_id}));return m==="connected_accounts"&&!g&&d("actions"),e.jsx(U,{title:h.formatMessage(v.title),isOpen:i,onClose:c,type:"success",size:"custom",className:"min-h-[50vh] max-w-3xl overflow-y-auto scroll-smooth",noPadding:!0,showCloseButton:!0,children:s?e.jsx(ae,{}):e.jsxs(ue,{className:"flex flex-row gap-6 p-4",orientation:"vertical",defaultValue:m,onValueChange:o=>{d(o)},children:[g&&e.jsxs(ge,{className:te("flex min-w-[180px] max-w-[200px] flex-shrink-0 flex-col gap-2"),children:[e.jsx(D,{value:"actions",message:v.actions}),g&&e.jsx(D,{value:"connected_accounts",message:v.connectedAccounts})]}),e.jsxs("div",{className:"flex-1 text-sm",children:[m==="actions"&&e.jsxs(N,{children:[e.jsx(n,{...v.allowedActionsDesc,values:{gizmoName:t.gizmo.display.name}}),a==null?void 0:a.settings.map((o,u)=>{var w;const l=(w=t.tools)==null?void 0:w.find(y=>{var j;return y.type===S.JIT_PLUGIN&&((j=y.metadata)==null?void 0:j.action_id)===o.action_id});return l&&e.jsx(We,{gizmoId:t.gizmo.id,actionSettings:o,actionTool:l},u)})]}),m==="connected_accounts"&&e.jsxs(N,{children:[e.jsx(n,{...v.connectedAccountsDesc,values:{gizmoName:t.gizmo.display.name}}),e.jsx("div",{children:a==null?void 0:a.settings.map((o,u)=>{var w;const l=(w=t.tools)==null?void 0:w.find(y=>{var j;return y.type===S.JIT_PLUGIN&&((j=y.metadata)==null?void 0:j.action_id)===o.action_id});return l&&o.oauth_status&&e.jsx(Je,{gizmoId:t.gizmo.id,actionSettings:o,actionTool:l},u)})})]})]})]})})};function D({value:t,message:a}){return e.jsx(he,{className:"flex rounded-md px-2 py-1.5 text-sm text-token-text-primary radix-state-active:bg-white dark:radix-state-active:bg-token-main-surface-tertiary md:radix-state-active:bg-token-main-surface-tertiary md:radix-state-active:text-token-text-primary",value:t,children:e.jsx("div",{className:"truncate",children:e.jsx(n,{...a})})})}function We({gizmoId:t,actionSettings:a,actionTool:s}){var m,d,g;const i=qe(t),c=(m=a.action_settings)==null?void 0:m.all,h=o=>{var u,l;(u=s.metadata)!=null&&u.action_id&&((l=s.metadata)!=null&&l.domain)&&i.mutateAsync({actionId:s.metadata.action_id,domain:s.metadata.domain,settings:{all:o}})};return e.jsx("div",{children:e.jsxs(Q,{className:"border-b border-black/10 dark:border-white/10",children:[e.jsxs("div",{className:"flex flex-row space-x-4",children:[e.jsx("div",{className:"font-semibold",children:(d=s.metadata)==null?void 0:d.domain}),e.jsxs("a",{href:(g=s.metadata)==null?void 0:g.privacy_policy_url,target:"_blank",rel:"noreferrer",className:"flex items-center gap-1 text-token-text-tertiary hover:cursor-pointer hover:text-token-text-secondary",children:[e.jsx(n,{...v.privacyPolicyLink}),e.jsx(je,{className:"icon-md"})]})]}),e.jsxs("select",{value:c?"always_allow":"unset",onChange:o=>h(o.target.value),className:"rounded border-none bg-token-main-surface-primary text-sm",children:[e.jsx("option",{value:"always_allow",children:e.jsx(n,{...v.alwaysAllowDropdown})}),e.jsx("option",{value:"unset",children:e.jsx(n,{...v.askDropdown})})]})]})})}function Je({gizmoId:t,actionSettings:a,actionTool:s}){var h;const i=He(t),c=a.oauth_status==="valid";return e.jsxs(Q,{children:[e.jsx("div",{className:"font-semibold",children:(h=s==null?void 0:s.metadata)==null?void 0:h.domain}),e.jsx($,{color:"secondary",size:"small",onClick:()=>{var m,d,g,o,u;(m=s.metadata)!=null&&m.action_id&&((d=s.metadata)!=null&&d.domain)&&(c?i.mutateAsync({pluginId:(g=s.metadata)==null?void 0:g.action_id}):I.doOAuthRedirect(t,(o=s.metadata)==null?void 0:o.action_id,(u=s.metadata)==null?void 0:u.domain,window.location.href))},children:e.jsx(n,{...c?v.logout:v.login})})]})}const N=O.div`flex flex-col gap-6`,Q=O.div`flex flex-row justify-between py-3 items-center`,v=C({title:{defaultMessage:"GPT's privacy settings",id:"GizmoPrivacySettings.title"},actions:{defaultMessage:"Actions",id:"GizmoPrivacySettings.actions"},connectedAccounts:{defaultMessage:"Connected accounts",id:"GizmoPrivacySettings.connectedAccounts"},connectedAccountsDesc:{defaultMessage:"Manage which 3rd party accounts can be accessed by {gizmoName}.",id:"GizmoPrivacySettings.connectedAccountsDesc"},allowedActionsTitle:{defaultMessage:"GPT's privacy settings",id:"GizmoPrivacySettings.allowedActionsTitle"},allowedActionsDesc:{defaultMessage:"Select which 3rd party actions are allowed in conversations with {gizmoName}.",id:"GizmoPrivacySettings.allowedActionsDesc"},privacyPolicyLink:{defaultMessage:"Privacy policy",id:"GizmoPrivacySettings.privacyPolicyLink"},alwaysAllowDropdown:{defaultMessage:"Always allow",id:"GizmoPrivacySettings.alwaysAllowDropdown"},askDropdown:{defaultMessage:"Ask",id:"GizmoPrivacySettings.askDropdown"},login:{defaultMessage:"Log in",id:"GizmoPrivacySettings.login"},logout:{defaultMessage:"Log out",id:"GizmoPrivacySettings.logout"}}),Qe=ie(()=>ne(()=>import("./nu0ykbxea3g3v1e6.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10])).then(t=>t.GizmoKeepInSidebarMenuItem));function ha({children:t,clientThreadId:a,gizmoResource:s,showReportModal:i,inMobileHeader:c}){return e.jsxs(e.Fragment,{children:[e.jsx(J,{contentAlign:c?"center":"start",size:"small",triggerButton:t,children:e.jsx(Ye,{clientThreadId:a,gizmoResource:s,showReportModal:i})}),e.jsx(Xe,{gizmoResource:s})]})}function Xe({gizmoResource:t}){const a=A(p.GPTRemoveThirdParty),s=oe(),i=H(t);return e.jsxs(e.Fragment,{children:[e.jsx(Ue,{gizmoId:t.gizmo.id,creatorId:t.gizmo.author.user_id}),e.jsx(Ke,{gizmo:t}),i&&e.jsx(Ve,{gizmo:t}),i&&e.jsx(Oe,{gizmo:t}),e.jsx(Le,{gpt:t,isOpen:a,onClose:()=>f.closeModal(p.GPTRemoveThirdParty),account:s})]})}function Ye({clientThreadId:t,gizmoResource:a,showReportModal:s}){var _;const i=re(),c=xe(a),h=fe(a),m=ye(a.gizmo.id),d=V(),g=pe(a),o=a.gizmo.share_recipient===E.Marketplace||a.gizmo.share_recipient===E.Link,u=!g&&o,l=F("1825130190").value,w=F("3645668434").value,y=l&&!g&&H(a),j=(d==null?void 0:d.includes(z.GizmoSupportEmails))&&!g&&a.gizmo.author.will_receive_support_emails&&y,X=ce(),T=De(t),Y=K(z.WorkspaceShareLinks),{isUnauthenticated:Z}=q(),R=T&&Y&&!Z;return e.jsxs(e.Fragment,{children:[e.jsx(r.Item,{onClick:()=>{de.logNewChatButtonClicked({location:"Gizmo information dropdown",gizmo_id:a.gizmo.id}),i.push(`/g/${a.gizmo.short_url}`)},icon:be,children:e.jsx(n,{...x.newChat})}),e.jsx(r.Item,{onClick:()=>f.openModal(p.GPTDetails),icon:Ge,children:e.jsx(n,{...x.about})}),((_=a.tools)==null?void 0:_.find(b=>b.type===S.JIT_PLUGIN))&&e.jsx(r.Item,{onClick:()=>f.openModal(p.GPTPrivacySettings),icon:Se,children:e.jsx(n,{...x.privacySettings})}),c&&e.jsx(r.Item,{onClick:()=>{i.push(m,void 0,{shallow:!0})},icon:Ie,children:e.jsx(n,{...x.customize})}),!c&&h&&w&&e.jsxs(e.Fragment,{children:[e.jsx(r.Item,{onClick:async()=>{i.push(`/g/${a.gizmo.id}/view`)},icon:Me,children:e.jsx(n,{id:"GizmoInformation.viewGizmoLabel",defaultMessage:"View configuration"})}),e.jsx(r.Item,{onClick:async()=>{const b=await I.copyGizmo({gizmoId:a.gizmo.id});b.gizmo.id&&i.push(`/gpts/editor/${b.gizmo.id}`)},icon:ke,children:e.jsx(n,{id:"GizmoInformation.copyGizmoLabel",defaultMessage:"Duplicate GPT"})})]}),e.jsx(Qe,{gizmoResource:a}),e.jsx($e,{gizmoResource:a}),j&&e.jsx(r.Item,{onClick:()=>f.openModal(p.GPTFeedbackEmail),icon:ze,children:e.jsx(n,{...x.feedbackEmail})}),y&&e.jsx(r.Item,{onClick:()=>f.openModal(p.GPTReview),icon:Ce,children:e.jsx(n,{...x.reviewGPT})}),u&&e.jsx(r.Item,{onClick:s,icon:Pe,children:e.jsx(n,{...x.report})}),R&&e.jsx(r.Item,{onClick:()=>f.openSharingModal(T),icon:W,children:e.jsx(n,{...x.shareChat})}),X&&e.jsxs(e.Fragment,{children:[e.jsx(r.Separator,{}),e.jsx(r.Item,{color:"danger",onClick:()=>f.openModal(p.GPTRemoveThirdParty),icon:Ae,children:e.jsx(n,{defaultMessage:"Remove GPT from workspace",id:"GizmoInformation.removeGPT"})})]}),(d==null?void 0:d.includes("debug"))&&e.jsxs(e.Fragment,{children:[e.jsx(r.Separator,{}),e.jsx(r.Item,{onClick:()=>{i.push(we(a),void 0)},children:"(Internal) See share page"})]})]})}const Ze=({clientThreadId:t})=>{const a=V(),s=a==null?void 0:a.includes("debug"),i=Ne.getServerThreadId(t),c=K(z.WorkspaceShareLinks),{isUnauthenticated:h}=q(),m=c&&i&&!h;return e.jsxs(e.Fragment,{children:[m&&e.jsx(r.Item,{onClick:()=>f.openSharingModal(i,"History Item Menu"),icon:W,children:e.jsx(n,{...x.shareChat})}),e.jsx(r.Item,{disabled:!i,onClick:()=>{setTimeout(()=>{i&&M.publish({kind:"editTitle",serverThreadId:i})},100)},icon:Te,children:e.jsx(n,{...x.renameChat})}),e.jsx(r.Item,{disabled:!i,onClick:()=>{i&&M.publish({kind:"archiveChat",serverThreadId:i})},icon:_e,children:e.jsx(n,{...x.archiveChat})}),e.jsx(r.Item,{color:"danger",disabled:!i,onClick:()=>{i&&M.publish({kind:"deleteChat",serverThreadId:i})},icon:Fe,children:e.jsx(n,{...x.deleteChat})}),s&&e.jsxs(e.Fragment,{children:[e.jsx(r.Separator,{}),e.jsx(r.Item,{onClick:()=>f.toggleActiveSidebar("debug"),icon:Ee,children:e.jsx(n,{...x.debugChat})})]})]})},xa=({clientThreadId:t,children:a,onOpenChange:s})=>e.jsx(J,{onOpenChange:s,side:"bottom",contentAlign:"start",triggerButton:a,size:"auto",children:e.jsx(Ze,{clientThreadId:t})}),x=C({newChat:{defaultMessage:"New chat",id:"GizmoInformation.newChat"},about:{defaultMessage:"About",id:"GizmoInformation.about"},privacySettings:{defaultMessage:"Privacy settings",id:"GizmoInformation.privacySettings"},viewDetails:{defaultMessage:"View details",id:"GizmoInformation.viewDetails"},share:{defaultMessage:"Share",id:"GizmoInformation.share"},favorite:{defaultMessage:"Favorite",id:"GizmoInformation.favorite"},customize:{defaultMessage:"Edit GPT",id:"GizmoInformation.customize"},feedbackEmail:{defaultMessage:"Send feedback",id:"GizmoInformation.feedbackEmail"},reviewGPT:{defaultMessage:"Review GPT",id:"GizmoInformation.reviewGPT"},report:{defaultMessage:"Report",id:"GizmoInformation.report"},privacy:{defaultMessage:"Privacy",id:"GizmoInformation.privacy"},deleteChat:{defaultMessage:"Delete",id:"GizmoInformation.deleteChat.0"},debugChat:{defaultMessage:"(Internal) Debug",id:"GizmoInformation.debugChat"},renameChat:{defaultMessage:"Rename",id:"GizmoInformation.renameChat"},archiveChat:{defaultMessage:"Archive",id:"GizmoInformation.archiveChat.0"},shareChat:{defaultMessage:"Share",id:"GizmoInformation.shareChat"},shareChatLong:{defaultMessage:"Share chat",id:"GizmoInformation.shareChatLong"}});export{xa as GizmoConversationOptionsDropdown,ha as GizmoInformationDropdown,Ye as GizmoInformationDropdownItems};
//# sourceMappingURL=h83pwhdp366l33wj.js.map
