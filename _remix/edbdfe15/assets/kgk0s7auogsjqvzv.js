const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gag3t288g1pmm181.js","assets/f4169wusp1t738jq.js","assets/root-hn8413c5.css","assets/gb1b5pzny7cafmt5.js","assets/nh0zolc3xl2g4bg9.js","assets/bk2htf6x5ark09ai.js","assets/conversation-small-ile61fj8.css","assets/gmzpjw1nugjjsn52.js","assets/ni678l7obnphgmc3.js","assets/gv3osddqeibn11s6.js","assets/niu0erxns7f0g5x9.js","assets/myqquqcitiowdh3t.js","assets/ognxbys1o1e4k77l.js","assets/i9v2hyk3mt2sf0h0.js"])))=>i.map(i=>d[i]);
import{b3 as W,b4 as K,m as e,eI as se,L as E,r as x,a5 as V,ba as A,K as te,ef as ne,ee as Se,b6 as w,cK as ae,aE as y,N as B,V as ve,aw as je,d3 as ye,co as ke,dl as Ce,bq as ie,hu as v,hv as Ie,cf as Ne,cg as Me,go as ze,e4 as P,a9 as Fe,bF as Oe}from"./f4169wusp1t738jq.js";import{gV as Te,c1 as we,gR as oe,iI as Ee,fR as _e,ds as H,dq as Ge,b3 as re,ci as J,cO as Le,k5 as O,eG as Ae,k6 as Pe,k7 as Re,eM as Be,dt as ce,b0 as He,k8 as De,du as Ue,fI as le,k9 as We,f9 as Ke,U as de,fJ as Ve,eH as qe,ka as Ye,cz as Ze,cA as $e,cv as q,cW as Je,b9 as Qe,kb as Xe,kc as F,cu as Y,A as p,cG as me,dv as es,z as Z,dw as ss,cC as ue,kd as ts,I as ns,ke as as,kf as is,kg as os,kh as Q,ej as rs,ki as $,aR as R,kj as xe,kk as cs,kl as D,km as T,kn as ls,ek as ds,bF as ms,ko as us,aS as xs,c4 as fs,kp as hs,w as gs,kq as ps,y as bs,b$ as Ss,kr as vs,ks as fe,E as js,kt as ys,X as ks}from"./bk2htf6x5ark09ai.js";import{u as _,c as Cs}from"./gmzpjw1nugjjsn52.js";import{m as U}from"./ni678l7obnphgmc3.js";import{U as Is,P as Ns}from"./gv3osddqeibn11s6.js";const Ms=W(()=>K(()=>import("./gag3t288g1pmm181.js"),__vite__mapDeps([0,1,2,3])).then(s=>s.SnorlaxFolderAnimation),{loading:({color:s})=>e.jsx(he,{color:s})}),zs={open:{opacity:1,y:0,transition:{duration:.15,ease:"easeOut"}},closed:{opacity:0,y:-5,transition:{duration:.15,ease:"easeIn"}}};function he({color:s}){return e.jsx("div",{className:"flex h-6 w-6 shrink-0 items-center justify-center",children:e.jsx(Te,{className:"h-3/4 w-3/4",style:{color:s}})})}function Fs({gizmo:s,historyDisabled:n,section:t,onClick:c,isActive:a,hideOverflowMenu:u=!1,elementRef:o,subConversations:l}){const{clientThreadId:h}=_(),f=se(h),d=E(),[g,r]=x.useState(!1),[i,m]=x.useState(!1),[b,j]=x.useState(!1),[k,N]=x.useState(null),M=V(),G=!!s?.gizmo.tags?.includes(we.FirstParty),I=oe(s?.gizmo.id),L=Ee(s.gizmo.id);let z=!1;a&&I&&!(k&&f)&&(z=!0),x.useEffect(()=>{k==null&&a&&f&&N(!0)},[a,f,k]);let S;if(s!=null)S=s.gizmo.display.name||_e;else{if(M==null)return null;n?S=d.formatMessage(H.clearChat):M.canInteractWithGizmos()?S=Ue:S=d.formatMessage({id:"GizmoSidebarListItem.newChat",defaultMessage:"New chat"})}return e.jsxs(e.Fragment,{children:[e.jsx(U.div,{whileTap:{scale:.98},onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{m(!1)},children:e.jsx(Ge,{loggingGizmoId:s?.gizmo.id??"primary",href:re(s),onClick:c,showActiveIndicator:z,icon:I&&l&&l.items.length>0?e.jsx(A,{side:"top",sideOffset:4,delayDuration:600,label:k?d.formatMessage(J.hideChatsForProjectTooltip):d.formatMessage(J.showChatsForProjectTooltip),children:e.jsx("button",{onClick:C=>{C.preventDefault(),N(!k)},className:"-m-0.5 flex rounded-xl p-0.5 text-token-text-secondary hover:bg-token-sidebar-surface-tertiary",onMouseEnter:()=>{j(!0)},onMouseLeave:()=>{j(!1)},children:e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(Ms,{isOpen:k??!1,isHovered:b,color:L||null})})})})}):I?e.jsx(he,{color:L}):e.jsx(Le,{isFirstParty:G,src:s?.gizmo.display.profile_picture_url,className:"h-6 w-6 shrink-0"}),isMenuOpen:g,label:S,rightIcon:t===O.Workspace&&e.jsx(A,{side:"right",label:d.formatMessage(X.workspaceRecommended,{workspace_name:M?.name??"Your Workspace"}),children:e.jsx(Ae,{className:"icon-md text-token-text-secondary",alt:d.formatMessage(X.workspaceRecommended,{workspace_name:M?.name??"Your Workspace"})})}),hoverRightIcon:e.jsxs("div",{className:"flex gap-2",children:[(i||g)&&!u&&(I?e.jsx("div",{className:"text-token-text-tertiary",onClick:C=>{C.preventDefault()},children:e.jsx(Pe,{gizmo:s,isOpen:g,setIsOpen:r})}):e.jsx("div",{className:"text-token-text-tertiary",onClick:C=>{C.preventDefault()},children:e.jsx(Re,{gizmo:s,isOpen:g,setIsOpen:r,section:t})})),!I&&!u&&e.jsx(A,{side:"right",label:d.formatMessage(n?H.clearChat:H.newChat),className:"flex items-center",children:e.jsx("button",{className:g?"text-token-text-tertiary":"invisible text-token-text-secondary hover:text-token-text-primary group-hover:visible",children:n?e.jsx(Be,{className:"icon-md"}):e.jsx(ce,{className:"icon-md"})})})]}),elementRef:o})}),e.jsx(He,{children:I&&k&&l&&l.items.length>0&&e.jsx(U.div,{initial:"closed",animate:"open",exit:"closed",variants:zs,className:"overflow-hidden",layout:!0,children:e.jsx(De,{gizmoResource:s,serverThreadId:f,isOnProjectPage:z,conversations:l.items})},"nested-conversations")})]})}const X=te({workspaceRecommended:{id:"gizmo.workspaceRecommended",defaultMessage:"Recommended at {workspace_name}"}});function Os(s){const{clientThreadId:n}=_(),t=x.useRef(s);t.current=s;const c=x.useRef(null);x.useEffect(()=>{const a=c.current;return c.current=n,()=>{n!==a&&t.current?.(n,a)}},[n])}function ge(){const s=E(),n=le(),t=s.formatMessage({id:"gizmo.exploreStoreEnabled",defaultMessage:"Explore GPTs"});return e.jsx(We,{children:e.jsx(U.div,{whileTap:{scale:.98},children:e.jsx(ne,{to:Ke(),onClick:()=>{n.activeSidebar==="popover-nav"&&de.setActiveSidebar(!1)},children:e.jsx(Ve,{icon:qe,"data-testid":"explore-gpts-button",children:t})},"explore")})})}const Ts=2;function pe({gizmos:s,isGizmoFlyout:n,isLoaded:t,maxToShowOnLoad:c=4,isScreenArch:a,showAllSidebarItems:u}){const o=Xe(s,i=>i.flair.kind),l=[...(o[F.Workspace]?.map(({resource:i})=>({gizmo:i,section:O.Workspace}))??[]).slice(0,3),...o[F.FirstParty]?.map(({resource:i})=>({gizmo:i,section:O.Keep}))??[],...o[F.SidebarKeep]?.map(({resource:i})=>({gizmo:i,section:O.Keep}))??[]],h=o[F.Recent]?.slice(0,a||t?o[F.Recent]?.length:Ts).map(({resource:i})=>({gizmo:i,section:O.Recents}))??[],f=h.length,d=l.length,g=a?f>0:s.length>c;let r=[];return n&&a?r=[...l,...h]:!n&&a?r=l:(r=[...l,...h],u||(r.length>c&&d>c?r=r.slice(0,d):r.length>c&&(r=r.slice(0,c)))),{listItems:r,itemsLeft:s.length-r.length,needsToCollapseItems:g,total:s.length}}function be({gizmo:s,currentGizmoId:n,maxToShowOnLoad:t,hideOverflowMenu:c=!1}){const a=x.useRef(!1),u=!t,o=Se(),[l,h]=x.useState(!1),f=le(m=>!Ye.isGptListCollapsed(m)),{listItems:d,needsToCollapseItems:g,itemsLeft:r}=pe({gizmos:s,isGizmoFlyout:u,isLoaded:l,maxToShowOnLoad:t,isScreenArch:o,showAllSidebarItems:f});x.useEffect(()=>{l||h(!0)},[l]),x.useEffect(()=>{d.length>0&&!a.current&&(Ze({namespace:$e.ChatPageLoad})?.logTiming("render_gizmo_sidebar"),a.current=!0)},[d]);function i(m,b){const j=e.jsx(Fs,{gizmo:m,isActive:m.gizmo.id===n,section:b,hideOverflowMenu:c},m.gizmo.id);return o?e.jsx("li",{children:j}):j}return e.jsxs("div",{children:[d.map(({gizmo:m,section:b},j)=>e.jsxs(x.Fragment,{children:[j>1&&b!==d[j-1].section&&e.jsx("div",{className:"my-2 ml-2 h-px w-7 bg-token-sidebar-surface-tertiary"}),i(m,b)]},j)),!o&&g?e.jsxs("button",{onClick:de.toggleGptListCollapsed,className:"flex h-10 w-full items-center gap-2 rounded-lg px-2 text-sm text-token-text-primary hover:bg-token-sidebar-surface-secondary",children:[e.jsx("div",{className:"flex h-6 w-6 flex-shrink-0 items-center justify-center",children:e.jsx(q,{className:"icon-md text-token-text-primary"})}),e.jsx("div",{className:"flex grow items-center gap-1",children:f?e.jsxs(e.Fragment,{children:[e.jsx(w,{id:"GizmoSidebarList.showLess",defaultMessage:"See less"}),e.jsx(Je,{className:"icon-xs"})]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{id:"GizmoSidebarList.showMoreItems",defaultMessage:"{numMore} more",values:{numMore:r}}),e.jsx(Qe,{className:"icon-xs"})]})})]}):null,!o&&e.jsx(ge,{})]})}function ws({currentGizmoId:s,gizmos:n,onClick:t}){const{isSidebarFlyoutOpen:c,onSidebarFlyoutOpenChange:a}=Y(),u=c(p.Gizmo),o=me();return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(ae,{onOpenChange:l=>a(p.Gizmo,l),side:o?"bottom":"right",sideOffset:4,open:u,contentAlign:"end",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2.5 rounded-lg px-2 py-[7px] text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",u&&"bg-token-main-surface-secondary"),onClick:t,children:[e.jsx("div",{className:"h-6 w-6",children:e.jsx("div",{className:"relative flex h-full items-center justify-center text-token-text-primary",children:e.jsx(q,{className:y("icon-md font-semibold text-token-sidebar-icon")})})}),e.jsx("span",{className:"text-left",children:e.jsx(w,{id:"qTIiY/",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(B,{children:e.jsx("ul",{className:"flex flex-col gap-0.5",children:e.jsx(be,{gizmo:n,currentGizmoId:s,hideOverflowMenu:!0})})})})})})}function Es({currentGizmoId:s}){const{data:{gizmos:n}={}}=es();let t=n;Z()&&(t=n?.filter(u=>!ss(u.resource)));const{needsToCollapseItems:a}=pe({gizmos:t??[],isLoaded:!1,isGizmoFlyout:!1,isScreenArch:!0});return e.jsx(e.Fragment,{children:e.jsxs(ue,{header:e.jsx("div",{className:"sticky top-[--sidebar-sticky-threshold] z-20",children:e.jsx(w,{id:"ZT2HVu",defaultMessage:"GPTs"})}),isLastInGroup:!0,children:[e.jsx(ge,{}),e.jsx(be,{gizmo:t??[],currentGizmoId:s,maxToShowOnLoad:ts}),a&&e.jsx(B,{children:e.jsx(ws,{currentGizmoId:s,gizmos:t??[]})})]})})}function _s({onClick:s}){const{clientThreadId:n}=_(),{isSidebarFlyoutOpen:t,onSidebarFlyoutOpenChange:c}=Y(),a=me(),u=t(p.Conversation);return e.jsx("div",{className:"group mt-1 flex w-full items-center justify-start",children:e.jsx(ae,{onOpenChange:o=>{o&&ve.logEvent("chatgpt_web_more_conversation_history_opened"),c(p.Conversation,o)},side:a?"bottom":"right",sideOffset:4,open:u,contentAlign:"start",triggerButton:e.jsxs("button",{className:y("flex flex-1 select-none items-center gap-2 rounded-lg px-2 py-2 text-body tracking-condensed text-token-text-secondary ease-[var(--spring-bounce)] hover:bg-token-main-surface-secondary focus:ring-0 motion-safe:active:scale-[98%] motion-safe:active:transition-transform",u&&"bg-token-main-surface-secondary"),onClick:s,children:[e.jsx(q,{className:y("icon-md mr-1 font-semibold text-token-sidebar-icon")}),e.jsx("span",{className:"text-left",children:e.jsx(w,{id:"25xE8F",defaultMessage:"See more"})})]}),size:"auto",children:e.jsx("div",{className:"max-h-[50dvh] w-80 overflow-x-auto px-2 [scrollbar-gutter:stable]",children:e.jsx(B,{children:e.jsx(ns,{activeId:n,hideOverflowMenu:!0})})})})})}function Gs({clientThreadId:s}){const n=se(s),t=je(),{isCollapsible:c,recentConversationLimit:a}=as(),u={recentConversationLimit:a};Z()&&(u.hideSnorlaxConversations=!0);const l=x.useRef(!1),h=!0,{conversations:f,data:d,isLoading:g,isError:r,recents:i,refetch:m}=is(u),[b,j]=x.useState(!0),k=x.useCallback(function(C){C===void 0&&j(!1),m({cancelRefetch:!0})},[m,j]),N=t?void 0:n,M=f.length===0,G=r||d===void 0&&!g&&l.current,I=!G&&(d===void 0||g);d===void 0&&!g&&!l.current&&(l.current=!0,k(!0));const z=f.find(S=>S.id===N)??null;return x.useMemo(()=>{ye.publish({kind:"refreshHistory",conversations:f})},[f]),e.jsxs(e.Fragment,{children:[G&&e.jsx(os,{showRetry:b,refetch:k}),!M&&e.jsxs(ue,{header:i.label,isLastInGroup:!0,children:[i.items.map((S,C)=>e.jsx(Q,{item:S,isActive:S.id===N,testId:`history-item-${C}`},S.id)),z&&!i.items.some(S=>S.id===N)&&e.jsx(Q,{item:z,isActive:!0})]}),I&&e.jsx(ke,{className:"sticky top-4 z-30 mt-4 justify-self-center"}),c&&e.jsx(B,{children:e.jsx("div",{className:"-ml-2 mb-5",children:e.jsx("div",{hidden:!h,className:y(!h),children:e.jsx(_s,{})})})})]})}const ee=W(()=>K(()=>import("./nh0zolc3xl2g4bg9.js"),__vite__mapDeps([4,1,2,5,6,7,8,9])).then(s=>s.SnorlaxSidebarList));function Ls({clientThreadId:s}){const n=V(),t=Ce(s),{isUnauthenticated:c}=ie(),a=Z();return c?null:e.jsxs("div",{className:y(v.screenContent),children:[a&&n?.canInteractWithGizmos()&&ee?e.jsx(ee,{currentGizmoId:t}):null,null,e.jsx(Gs,{clientThreadId:s}),n?.canInteractWithGizmos()?e.jsx(Es,{currentGizmoId:t}):null]})}function As(){const s=V(),n=s?.data==null,{isUnauthenticated:t}=ie(),{openSettings:c}=rs(),a=Ie(),[u]=x.useState(()=>{const i=Ne.getCookie(Me.Workspace);return typeof i=="string"&&i!==ze}),o=E(),{store:l,actions:h}=$(),f=l(i=>i.mode),[d,g]=x.useState(!0);if(x.useEffect(()=>{g(!1)},[]),!s&&d||u&&n)return null;const r=t?e.jsx(Is,{}):e.jsx(Cs,{onClickSettings:()=>c()});return e.jsxs(R,{name:"user-profile-bar",className:"z-10 mb-[0.5px] grid-cols-[minmax(0,_1fr)_auto] px-sidebar-inline md:py-1.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:[r,a.get("include_floating_state",!1)&&e.jsx("div",{className:v.togglePinWrapper,children:e.jsx(xe,{tooltipSideOffset:14,className:v.pinSidebarAction,icon:e.jsx(cs,{}),onActivate:i=>{i.preventDefault(),i.persist(),D.togglePinSidebar(i,h,f===T.Floating?T.Pinned:T.Floating)},label:f===T.Floating?o.formatMessage({id:"b43Hkt",defaultMessage:"Pin Sidebar"}):o.formatMessage({id:"6m3n9w",defaultMessage:"Unpin Sidebar"}),htmlFor:P.FloatingOrPinned})})]})}function Ps(){return e.jsx(R,{className:"z-10 px-sidebar-inline pb-0.5",type:"primary",disableSizeTracking:!0,style:{"--bar-gap":"12px","--bar-background-color":"transparent"},children:e.jsx(Ns,{})})}function Rs(){return e.jsxs(ls,{className:y(v.screenTrailingBarContainer),children:[e.jsx(ds,{}),e.jsx(Ps,{}),e.jsx(As,{})]})}function Bs({onNewThread:s}){const n=E(),t=Fe(),{clientThreadId:c}=_(),a=ms(c),u=a?us(a):void 0,o=u?re(u):void 0,l=oe(u?.gizmo.id),h=n.formatMessage({id:"NUNaGU",defaultMessage:"New chat"});return e.jsx(A,{label:h,children:e.jsx(ne,{to:o??"/",onClick:async f=>{f.preventDefault(),!l&&o!=null?xs(t,o):s()},tabIndex:-1,children:e.jsx(fs,{icon:e.jsx(ce,{className:v.sidebarIcon}),className:v.searchAction,label:h,style:{viewTransitionName:"var(--vt_new_chat_sidebar)"}})})})}const Hs=W(()=>K(()=>import("./niu0erxns7f0g5x9.js"),__vite__mapDeps([10,1,2,5,6,11,12,13])).then(s=>s.FannyPackIconButton));function Ds({onNewThread:s}){const n=E(),t=x.useRef(null),{store:c,actions:a}=$(),u=c(m=>m.isSidebarOpen),o=c(m=>m.mode),{isSidebarFlyoutOpen:l}=Y(),h=l(p.Conversation),f=l(p.Gizmo),d=l(p.Snorlax),g=u&&!h&&!f&&!d;function r(){fe(t.current)&&document.getElementById(P.OpenOrClosed)?.click()}hs({checkElement:m=>m?.tagName==="NAV",enabled:g,onLightDismiss:r});const{isFannyPackEnabled:i}=gs();return Oe(),e.jsxs(e.Fragment,{children:[e.jsx(R,{type:"primary",className:y(v.screenHeader),name:"sidebar-header",children:e.jsxs("div",{className:"flex min-h-[var(--screen-thread-header-min-height,60px)] w-full flex-1 items-center justify-between",ref:t,children:[e.jsx("div",{className:"grid items-center gap-1",children:e.jsx(xe,{className:y(v.closeSidebarAction),style:{viewTransitionName:"var(--vt_toggle_sidebar_opened)"},onClick:m=>{D.closeSidebar(m,a,o)},onActivate:m=>{D.closeSidebar(m,a,o)},icon:e.jsxs(e.Fragment,{children:[e.jsx(ps,{className:y(v.sidebarIcon,"hidden @lg/screen-composer:inline-flex")}),e.jsx(bs,{className:y(v.sidebarIcon,"@xs/screen-composer:inline-flex @lg/screen-composer:hidden")})]}),label:n.formatMessage(Us.closeSidebar),htmlFor:P.OpenOrClosed,tooltipSideOffset:4})}),e.jsxs("div",{className:"flex items-center",children:[!1,i&&e.jsx(Ss,{children:e.jsx(Hs,{className:v.searchAction,icon:e.jsx(vs,{className:v.sidebarIcon}),style:{viewTransitionName:"var(--vt_search_sidebar)"}})}),e.jsx(Bs,{onNewThread:s})]})]})}),e.jsx(R,{type:"primary",className:v.bucketBar,disableSizeTracking:!0,children:"Â "})]})}const Us=te({closeSidebar:{id:"fM0vj3",defaultMessage:"Close Sidebar"}});function Zs(){const{clientThreadId:s,onNewThread:n}=_(),[t,c]=x.useState(!1),[a,u]=x.useState(!1),[o,l]=x.useState(!1),{store:h}=$(),f=x.useCallback(r=>r===p.Conversation?t:r===p.Gizmo?a:r===p.Snorlax?o:!1,[t,a,o]),d=x.useCallback((r,i)=>{const m=b=>{r===p.Conversation?c(b):r===p.Gizmo?u(b):r===p.Snorlax&&l(b)};i?m(!0):setTimeout(()=>{m(!1)},100)},[]),g=x.useRef(null);return Os((r,i)=>{d(p.Conversation,!1),d(p.Gizmo,!1),d(p.Snorlax,!1);const m=window.matchMedia("(max-width: 700px)").matches,b=fe(g.current);i!=null&&m&&h.getState().isSidebarOpen&&(h.getState().mode===T.Floating||b)&&setTimeout(()=>{document.getElementById(P.OpenOrClosed)?.click()},100)}),e.jsxs(js,{value:{isSidebarFlyoutOpen:f,onSidebarFlyoutOpenChange:d},children:[e.jsx(ys,{}),e.jsx(ks,{anchor:"vertical",className:y(v.screen,"popover flex-1 border-r border-r-token-border-xlight"),name:"sidebar",leading:e.jsx(Ds,{onNewThread:n}),ref:g,trackLeading:!0,trailing:e.jsx(Rs,{}),children:e.jsx(Ls,{clientThreadId:s})})]})}export{Zs as C,Fs as G,be as a};
//# sourceMappingURL=kgk0s7auogsjqvzv.js.map
