const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ff2p8svic4yz5255.js","assets/lcrtg4u38c25vcr6.js","assets/dihy3niyej409otc.js","assets/root-f2s4xiqy.css","assets/kb8c8tnxq47dzq88.js","assets/conversation-small-lkohtmkm.css","assets/gnw6hs681ctc3t18.js","assets/jxgyjize5mehcr1a.js","assets/bodou6e8m5g8oiwx.js","assets/l58agnqmwznas2f4.js","assets/lhbdvwlhhmhzzz3g.js","assets/oh80akocgcsdnyjw.js","assets/o9ihrnvyvheeqpoz.js","assets/oxem2ba4gyl858w3.js","assets/hw60930i0nu2yx0w.js","assets/m532hb46uwqox3gz.js","assets/o3wmufk8xbvfvte2.js","assets/fzrn137102spawew.js","assets/hi1kt4zcj0klo55c.js","assets/dh49dvd6o17ggx5m.js","assets/l5ex433b1g42hdp0.js","assets/irv191brhdgx3921.js","assets/mxuhb5gbmmulwkjs.js","assets/bg3fts5a8ukllc3p.js","assets/mo055qocpnemp40o.js","assets/otzvin23mdb5yw2x.js","assets/js913aptc754n7my.js","assets/dtud98z4ef6lq034.js","assets/v10crvonvpug2uwz.js","assets/c4bxzbp1808foto4.js","assets/im4bzy2b2pa6uut6.js","assets/j5sj4tmdaht52i9i.js","assets/obspq8w33lzwe95x.js","assets/bm6cwh61bus2r3li.js","assets/kc3ibcmoq359lyp6.js","assets/f61f8b6ummp79iyl.js","assets/b4ydst8vb03un0un.js","assets/hw1476gh1lapan3t.js","assets/23rgfd9w8oqnpi5a.js","assets/4givp2pjx0hkk0vm.js","assets/m5qlrat32gsh5ess.js","assets/lpo9epzg7ba4gxb5.js","assets/d1ymhxr0v21wzzne.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{r as l,m as e,a3 as Fe,w as Ve,G as Se,er as Be,Z as Re,dl as We,dk as He,di as Ue,y as Ge,ab as ze,gm as qe,o as F,c6 as Ke,aR as Me,hq as ie,cc as Qe,ba as Xe,F as Ye,e_ as T,ay as $e,fd as Je,dL as B,b9 as Ze,e as es,aH as A,aI as k,aq as ss,bf as as,b2 as re,gX as le,aC as ts,gQ as D,bw as os,ap as ns,a2 as de,a4 as is,d4 as ce,D as rs,cj as ls,ck as ds,cl as cs,du as us,g2 as hs,t as ms,L as gs}from"./lcrtg4u38c25vcr6.js";import{hU as fs,hV as Ce,aJ as ve,hW as ps,hk as bs,hX as xs,hY as Ss,c2 as _,hZ as Ms,h_ as Cs,h$ as vs,i0 as js,i1 as ws,i2 as As,i3 as ks,ej as Os,i4 as ys,i5 as Ts,i6 as Es,i7 as Ns,i8 as _s,i9 as Ps,ia as Is,ib as Ds,ic as Ls,id as Fs,ie as Vs,ig as Bs,ih as Rs,ii as Ws,ij as Hs,ik as Us,il as Gs,im as zs,io as qs,ip as Ks,cd as je,x as L,U as ue,c3 as R,iq as Qs,ir as Xs,av as W,is as Ys,fy as $s,bV as Js,it as Zs,F as ea,cT as we,bn as sa,cU as aa,o as Ae,T as ke,iu as Oe,iv as ta,iw as oa,fK as ye,ix as Te,iy as Ee,iz as na,bo as Ne,iA as he,hp as N,fq as ia,bE as V,bF as me,v as ra,iB as la,u as da,e_ as ca,ex as ua,eZ as ha,iC as ma,iD as ga,iE as fa,iF as pa,iG as ba,iH as xa,iI as ge,iJ as Sa,at as Ma,iK as Ca,iL as va,bl as ja,cR as wa,cS as Aa,iM as ka,iN as Oa,cV as ya,iO as Ta}from"./kb8c8tnxq47dzq88.js";import{m as E}from"./bodou6e8m5g8oiwx.js";import{S as fe,b as Ea,c as Na}from"./im4bzy2b2pa6uut6.js";import{SUMMARY_MARKDOWN_COMPONENT_OVERRIDES as _a}from"./obspq8w33lzwe95x.js";import{S as Pa,C as Ia}from"./bm6cwh61bus2r3li.js";import{T as _e,C as Pe}from"./kc3ibcmoq359lyp6.js";import{N as Da}from"./j5sj4tmdaht52i9i.js";import{C as La}from"./4givp2pjx0hkk0vm.js";function Fa({clientThreadId:s}){const a=fs(o=>o.notifications);return l.useEffect(()=>{a.filter(t=>t.clientThreadId===s).map(t=>t.id).filter(t=>t!==void 0).forEach(t=>Ce(t))},[s,a]),a.length===0?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(ve,{children:a.map(o=>e.jsx(Va,{...o},o.id))})})}function Va({...s}){const a=Fe(),o=Ve(),t=Se(),i=Be(s.clientThreadId),r=()=>{i&&bs(a,o,i),s.id&&Ce(s.id)};return e.jsxs(E.div,{onClick:r,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(ps,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:s.title??t.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:s.subtitle??t.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const Ba=({onClose:s})=>{const a=Se(),o=_(R.isBusinessWorkspace),t=_(r=>r.currentWorkspace),i=o?a.formatMessage(pe.workspaceWelcome,{workspaceName:t?.name}):"ChatGPT";return e.jsx(Qe,{isOpen:!0,onClose:Xe,type:"success",title:i,size:"custom",noPadding:!0,className:"max-w-3xl",description:a.formatMessage(pe.personalOnboardingSubheading),children:e.jsx(Qs,{onClose:s,scope:Xs.Personal})})};function Ra({clientThreadId:s}){const[a,o]=l.useState(0),{hasSeenOnboardingDate:t}=xs(),{hasSeenTeamOwnerOnboardingDate:i}=Ss(),r=_(R.isBusinessWorkspace),g=Re(),[n,f]=l.useState(!1),{data:p,isPending:b,isEnabled:v}=Ms(),d=Cs(p,b&&v),{eligible:S}=vs(),M=We(),u=He(),O=Ue(),x=Ge(()=>ze.getThread(s)),j=qe(s)||!x,C=F.getConversationOrigin(s),{data:c,isError:h}=Ke(),w=c!=null,H=c&&c?.accountItems.length>1&&c.currentAccountId==null,U=c?.accountItems.some(m=>m.isPersonalAccount()),G=!!c?.accountItems&&c.accountItems.length>0&&c.accountItems.every(({canAccessWithCurrentSession:m})=>!m),{eligible:z,isLoading:q}=js(),{value:K}=Me("1542198993"),{punchOutRequireLoginInfo:Q}=ws(),{state:X}=As(),{isOpen:Y,isLoading:$}=ks(),{isOpen:J,isLoading:Z}=Os(),{isOpen:ee,isLoading:se}=ys(),{isOpen:ae,isLoading:te}=Ts(),{state:oe}=Es(),y=l.useMemo(()=>[{Component:Ns,getModalState:()=>Q?"show":"hide",isDeferrable:!1},{Component:_s,getModalState:()=>X,isDeferrable:!1},{Component:Ps,getModalState:()=>oe,isDeferrable:!1},{Component:Is,getModalState:()=>$||j?"loading":C===ie.APPLE?"hide":Y?"show":"hide",isDeferrable:!1},{Component:Ds,getModalState:()=>te||j?"loading":C===ie.APPLE?"hide":ae?"show":"hide",isDeferrable:!1},{Component:Ba,getModalState:()=>r?"hide":t===null?"loading":t===!1?"show":"hide",isDeferrable:!0},{Component:Ls,getModalState:()=>h?"hide":H?"show":w?"hide":"loading",isDeferrable:!1},{Component:Fs,getModalState:()=>M!==null?"show":h||w?"hide":"loading",isDeferrable:!1},{Component:Vs,getModalState:()=>u!==null?"show":h||w?"hide":"loading",isDeferrable:!1},{Component:Bs,getModalState:()=>O!=null?"show":h||w?"hide":"loading",isDeferrable:!1},{Component:Rs,getModalState:()=>w?G?"show":"hide":"loading",isDeferrable:!1},{Component:Ws,getModalState:()=>Z?"loading":J?"show":"hide",isDeferrable:!1},{Component:Hs,getModalState:()=>se?"loading":ee?"show":"hide",isDeferrable:!1},{Component:Us,getModalState:()=>"hide",isDeferrable:!1},{Component:Gs,getModalState:()=>!g?.isTeam()||!g?.isOwnerOfAccount()||!U?"hide":!w||i===null?"loading":i===!1?"show":"hide",isDeferrable:!1},{Component:zs,getModalState:()=>r?t===null?"loading":t===!1?"show":"hide":"hide",isDeferrable:!0},{Component:qs,getModalState:()=>q?"loading":z&&K?"show":"hide",isDeferrable:!1},{Component:Ks,getModalState:()=>d,isDeferrable:!1}].filter(m=>!(m.isDeferrable&&n)),[S,Q,X,O,w,t,i,U,r,h,M,u,g,G,H,d,n,K,z,q,Y,$,ae,te,oe,Z,J,ee,se,C,j]);l.useEffect(()=>{if(y[a]&&y[a].getModalState()==="hide"){const m=y.findIndex(Le=>Le.getModalState()!=="hide");o(m)}},[a,y]);const P=y[a],I=P?.getModalState()==="show";if(l.useEffect(()=>{const m=je.getState().activeModals.has(L.BlockingInitialComponent);I!==m&&(I?ue.openModal(L.BlockingInitialComponent):ue.closeModal(L.BlockingInitialComponent))},[I]),P==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const ne=P.getModalState();if(ne==="loading")return null;ne==="hide"&&o(m=>m+1);const De=y[a].Component;return e.jsx(De,{onClose:()=>{f(!0),o(m=>m+1)}})}const pe=Ye({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}});function Ie({clientThreadId:s}){const[a,o]=l.useState(""),{clientThreadId:t,currentGroupedMessageIndex:i,turnIndex:r=-1}=T("summarizer")??{},g=$e(s),n=Je(s,r,g),f=B(),p=W(),{closeThreadSidebar:b}=Ze(),v=l.useCallback(()=>{p?Ys({className:"close-thread-sidebar",update:()=>{b({clientThreadId:s})}}):b({clientThreadId:s})},[b,p,s]),{messages:d}=n??{},S=d?$s(d):void 0,M=i!==void 0&&S?S[i]:void 0,u=M&&M.type===Js.a8km123?M.messages[0].message:void 0,O=u?.metadata?.summarization_headline,x=u?es(u):"";return l.useEffect(()=>{if(!x)return;const j=/\*\*(.*?)(?:\*\*|\n|$)/g;let C,c="";for(;(C=j.exec(x))!=null;)c=C[1].trim();c?o(c):u?.metadata?.initial_text!=null&&o(u?.metadata.initial_text)},[x,u?.metadata?.initial_text]),!n||!f||!u||!x||t!==s?null:e.jsx("div",{className:"!bg-token-main-surface-primary",children:e.jsx(Zs,{title:O??a,handleClose:v,children:e.jsx("div",{className:"bg-token-main-surface-primary px-6",children:e.jsx(ea,{componentOverrides:_a,className:"not-prose leading-6",children:x})})})})}const Wa=A(()=>k(()=>import("./ff2p8svic4yz5255.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(s=>s.CanvasFocusedViewManager)),Ha=A(()=>k(()=>import("./mxuhb5gbmmulwkjs.js"),__vite__mapDeps([22,1,2,3,23,4,5,24,25,8])).then(s=>s.SearchResultsModal));function Ua({clientThreadId:s,setClientThreadId:a,urlThreadId:o,prefetchSearch:t}){const i=ss();we({clientThreadId:s});const{createNewThread:r,onThreadCreated:g,resetThread:n}=sa({clientThreadId:s,setClientThreadId:a});aa({resetThreadAction:n,clientThreadId:s});const f=T("searchSources"),p=T("summarizer"),b=Ae();return e.jsxs(ke,{enableSandbox:!1,clientThreadId:s,children:[e.jsx(Oe,{clientThreadId:s,urlThreadId:o}),e.jsxs(fe,{hideNavigation:i,mobileHeaderContent:e.jsx(ta,{clientThreadId:s,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(oa,{clientThreadId:s}),mobileHeaderLeftContent:e.jsx(Ea,{onNewChatButtonClick:n}),mobileHeaderRightContent:e.jsx(Na,{onNewChatButtonClick:n}),sidebar:e.jsx(Da,{navHeader:s?e.jsx(Pa,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:r}):null,children:e.jsx(Ia,{clientThreadId:s,onNewThread:r})}),threadFlyout:e.jsxs(e.Fragment,{children:[f&&e.jsx(ye,{clientThreadId:s}),b&&p&&e.jsx(Ie,{clientThreadId:s})]}),children:[e.jsx(Te,{}),e.jsx(_e,{clientThreadId:s,onCreate:g,prefetchSearch:t},s),e.jsxs(fe.Sidebars,{children:[e.jsx(Wa,{clientThreadId:s}),e.jsx(Ee,{clientThreadId:s})]})]}),e.jsx(Ga,{clientThreadId:s})]})}function Ga({clientThreadId:s}){const a=as(),o=a?.includes(re.SearchTool)&&!a?.includes(re.SearchToolHoldout),t=na();return B()&&(!t||!o)&&e.jsx(Ha,{clientThreadId:s})}const be=450;function za({children:s,clientThreadId:a,isOpen:o,onClose:t}){const i=W();return e.jsxs(ve,{children:[o&&i&&e.jsx(Ne,{clientThreadId:a,children:e.jsx(le,{children:e.jsx(he.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(E.div,{className:"h-full w-full bg-token-main-surface-secondary",...N}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(E.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:be},...N,children:e.jsx(Pe,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:s})]})]})})})}),o&&!i&&e.jsx(le,{children:e.jsx(he.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(E.div,{className:"h-full w-full bg-token-main-surface-secondary",...N}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:s}),e.jsx(E.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:be},...N,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(_e,{clientThreadId:a,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},a)})})]})]})})})]})}const qa=A(()=>k(()=>import("./js913aptc754n7my.js"),__vite__mapDeps([26,1,2,3,4,5]))),Ka=A(()=>k(()=>import("./dtud98z4ef6lq034.js"),__vite__mapDeps([27,1,2,3,4,5,28,29,8,30,31,19,32,15,33,34,9,35,36,37,38,39])).then(s=>s.ImageEditor));function Qa({clientThreadId:s}){const a=ia();l.useEffect(()=>{V.close()},[s]);let o;return a?.type===me.ADAVisualization?o=e.jsx(qa,{clientThreadId:s,visualization:a.visualization}):a?.type===me.Image&&(o=e.jsx(Ka,{clientThreadId:s,messageId:a.messageId,image:a.image,allImages:a.allImages},a.image.asset_pointer)),e.jsx(za,{clientThreadId:s,isOpen:a!=null,onClose:V.close,children:o})}const Xa=A(()=>k(()=>import("./ff2p8svic4yz5255.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(s=>s.CanvasFocusedViewManager)),xe=64;function Ya(){const{focusedObject:s,clientThreadId:a}=ra();T(void 0);const o=l.useRef(null),[t,i]=l.useState({bottom:null,height:null});la(o,i);const r=da(),g=T("searchSources"),n=T("summarizer"),f=B(),[p,b]=l.useState(!1),v=!r&&!!s;let d=0;p&&t.height==null?d=xe:p&&t.height!=null?d=xe+t.height:!p&&t.height!=null&&(d=t.height);const S=Ae();return e.jsx(ca,{className:ts(D.application,{[D.withCanvasFocusedView]:!!r,[D.withEmbeddedFocusedView]:v}),banner:e.jsx(os,{children:e.jsx(ua,{setIsMobileAppUpsellBannerVisible:b})}),sidebar:e.jsx(La,{}),thread:e.jsx(Pe,{ref:o},a),details:e.jsx(Xa,{clientThreadId:a}),threadExtendedInfo:f&&e.jsxs(e.Fragment,{children:[!1,g&&e.jsx(ye,{clientThreadId:a}),S&&n&&e.jsx(Ie,{clientThreadId:a})]}),debugger:e.jsx(Ee,{clientThreadId:a}),name:"application-root",style:{"--screen-keyboard-bottom":t.bottom?`${t.bottom}px`:"","--screen-height-offset":d>0?`${d}px`:""}})}function $a({clientThreadId:s,setClientThreadId:a,urlThreadId:o,prefetchSearch:t}){return we({clientThreadId:s}),e.jsx(Ne,{clientThreadId:s,setClientThreadId:a,prefetchSearch:t,children:e.jsxs(ha,{children:[e.jsx(ma,{}),e.jsx(ga,{}),e.jsxs(ke,{enableSandbox:!1,clientThreadId:s,children:[e.jsx(Oe,{clientThreadId:s,urlThreadId:o}),e.jsx(Te,{}),e.jsx(Ya,{})]})]})})}var Ja={};const Za=A(()=>k(()=>import("./m5qlrat32gsh5ess.js"),__vite__mapDeps([40,1,2,3,4,5,41]))),et=A(()=>k(()=>import("./d1ymhxr0v21wzzne.js"),__vite__mapDeps([42,1,2,3,4,5,34,9,8,15,35,19,36,37,38,43])));function ht(s){const{urlThreadId:a,clientThreadId:o,prefetchSearch:t}=s;at();const i=ns(),r=de(),[g]=is(),[n,f]=l.useState(()=>a!==void 0?a:o!==void 0?o:ce());a!==void 0&&n!==a&&F.getServerThreadId(n)!==a&&f(a);const p=fa(de());l.useEffect(()=>{a===void 0&&F.getServerThreadId(n)!==void 0&&f(ce())},[a,n,p]);const b=_(R.workspaceId),v=W(),{eligible:d,isLoading:S,markAsViewed:M}=pa(),u=ba(),O=Me("3435450078");l.useEffect(()=>{(r.pathname==="/"||r.pathname.startsWith("/c/"))&&xa({namespace:ge.ChatPageLoad})==null&&(Sa({namespace:ge.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),rs.addTiming("chatgpt.web.chatPage.mounted"))},[]);const x=Ma();l.useEffect(()=>{ls(!0).then(h=>{h.force_login&&x({authType:"login"}),ds.initializeAndGatherData(h),Ca.initializeAndGatherData(h),cs.initializeAndGatherData(h)})},[x]),l.useEffect(()=>{const h=g.get(va)==="true";i!==h&&us.setIsTemporaryChatEnabled(h)},[i,g]),l.useEffect(()=>{r.state?.focusObject&&V.setFocusedObject(r.state.focusObject)},[r.state?.focusObject]),l.useEffect(()=>{!S&&d&&(M(),u())},[d,S,M,u]);const{isOpen:j,isLoading:C}=ja(),c=v?$a:Ua;return e.jsx(hs.Provider,{value:null,children:e.jsx(wa,{children:e.jsxs(Aa,{clientThreadId:n,children:[e.jsx(Ra,{clientThreadId:n},b),!C&&j&&e.jsx(et,{clientThreadId:n,setClientThreadId:f}),e.jsx(ka,{}),e.jsx(Oa,{}),e.jsx(c,{urlThreadId:a,clientThreadId:n,setClientThreadId:f,prefetchSearch:t}),e.jsx(Qa,{clientThreadId:n}),e.jsx(ya,{clientThreadId:n}),e.jsx(st,{}),e.jsx(Ta,{}),O?e.jsx(Fa,{clientThreadId:n}):!1]})})})}function st(){const s=je(a=>a.sharingModalThreadId);return s?e.jsx(Za,{serverThreadId:s}):null}function at(){ms({queryKey:["pingEdge"],queryFn:()=>gs.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Ja.GOKU_SERVICE);export{ht as C,be as F};
//# sourceMappingURL=krynvim3ih8i2rxr.js.map
