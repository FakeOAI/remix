import{K as a,L as o,r as h,a8 as g,cn as l,aK as y,h as p,j as f,D as v}from"./msit3m24yq8wtq5q.js";import{cA as n,cB as R,cC as T}from"./jcihqhf7cy65fsyu.js";import{P as i,r as A}from"./jpo22nc0d5ydvitd.js";import{s as C}from"./mizt9nawbgd97gs9.js";import{e as P,i as x,T as H}from"./dzayn67rbbxy23lf.js";const I="prompt-textarea";function F(){document.getElementById(I)?.focus()}const M={getAndReset:(e,s)=>{const t=a.getItem(o.RestoreMessageAfterOauthRedirect);return a.removeItem(o.RestoreMessageAfterOauthRedirect),!t||t.userId!==e||s!==t.serverThreadId||Date.now()>t.expiresAt?null:t},set:(e,s,t)=>{const r={userId:e,serverThreadId:s,inputText:t,expiresAt:Date.now()+6e4};a.setItem(o.RestoreMessageAfterOauthRedirect,r)}},K=()=>i.useState(i.getPersistedSystemHints).has(n.Search),q=()=>{const e=i.useStore();return h.useCallback((s,t)=>{s?e.addPersistedSystemHint(n.Search,t):e.removePersistedSystemHint(n.Search,t)},[e])};async function b(e,s){const t=T(e),r=t??await f.getConversation(e);return s==null&&t&&(s=!0),t||v.addTiming("chatgpt.web.chatPage.loadExistingConversation"),H.initThreadFromServerData(e,r,s,void 0,s),C(r.conversation_id,r.async_status??null),r}const z=e=>{const{asPath:s,replace:t}=g(),r=l(),u=P(),m=y();p({queryKey:["conversation",e],queryFn:()=>b(e).catch(d=>{const c=R(s),S=c!=null?A(c):"/";throw t(S,void 0,{shallow:!0}),m.danger(`Unable to load conversation ${e}`,{testId:"conversation-fetch-error-toaster"}),d}),enabled:!x(e)&&!r&&!u,refetchOnMount:!0})};export{M as P,I as T,q as a,K as b,b as f,F as t,z as u};
//# sourceMappingURL=br92jhppegkc7ldc.js.map
