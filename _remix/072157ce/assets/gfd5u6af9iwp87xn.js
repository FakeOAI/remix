import{L as M,a3 as D,r as o,m as e,aU as y,cb as T,a_ as U,eT as A,ev as I,P as _,d as P,c7 as R,aL as q,u as F}from"./ejnnsd2ul10wwon8.js";import{C as z,R as K,aS as W,aT as Q,A as X,aU as Y}from"./iq818lbd3vi25zxi.js";import{bT as w,bU as N,aD as G,d2 as H,bX as J,cp as Z,d3 as $}from"./71wmxosf3hlynfn3.js";import{u as ee,a as se,b as te}from"./g5l9lzquxe1dsy3t.js";import{V as ae}from"./gtn5eh3dc9652n2d.js";import{m as oe}from"./bhodeadh6qtod2rx.js";import"./hoa50yshgnfy7z32.js";import"./m3kxuhbm52zu7odn.js";import"./c4bxzbp1808foto4.js";function ne({conversationId:a,initialVoiceName:t}){const s=M(),r=w(N.hasSeenAdvancedVoiceNuxFullPage),n=D(),i=n?.isPlus()??!1,d=n?.isEnterprisey()??!1,u=!i&&!d,m="https://help.openai.com/en/articles/8400625-voice-mode-faq#h_c5d6fe534b",[c,f]=o.useState(!1),[x,k]=o.useState(!1),[g,j]=o.useState(!1),[b,S]=o.useState(!0);o.useEffect(()=>{requestAnimationFrame(()=>k(!0))},[]);const l=()=>{j(!0),A.voiceAdvancedDisclosureAccepted.click(),f(!0),setTimeout(async()=>{S(!1)},H)},h=()=>{r.markAsViewed()},p=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(z,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"TFfx7w",defaultMessage:"Natural conversations"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"qR+v5Q",defaultMessage:"Senses and responds to interruptions, humor, and more."})})]})]}),E=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(K,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"br49Gd",defaultMessage:"Free monthly preview"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"LhOfga",defaultMessage:"Use advanced voice for a short period each month."})})]})]}),O=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(W,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"84QiAT",defaultMessage:"Multiple voices"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"yYgwEW",defaultMessage:"Offers an expanded set of voices to choose from."})})]})]}),V=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Q,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"M/x7uJ",defaultMessage:"Personalized to you"})}),e.jsx("p",{className:"text-token-text-secondary",children:s.formatMessage({id:"QZXq7u",defaultMessage:"Can use memory and custom instructions to shape responses."})})]})]}),C=e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(X,{className:"mr-4 h-8 w-8"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("h4",{className:"font-semibold text-token-text-primary",children:s.formatMessage({id:"e6n5kr",defaultMessage:"You’re in control"})}),e.jsx("p",{className:"text-token-text-secondary",children:d?e.jsx(y,{id:"4szv66",defaultMessage:"Your audio recordings are saved but not used for training. Learn how to <link>manage recordings</link>.",values:{link:v=>e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"underline",children:v})}}):e.jsx(y,{id:"M/k4S5",defaultMessage:"Audio recordings are saved, and you can delete them at any time. Learn how to <link>manage recordings</link>.",values:{link:v=>e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"underline",children:v})}})})]})]}),L=u?[E,p,V,C]:[p,O,V,C];return e.jsxs(e.Fragment,{children:[e.jsx(T,{isOpen:c,onClose:h,type:"success",size:"fullscreen",children:e.jsx(G,{children:e.jsx(oe.div,{children:e.jsx(ae,{conversationId:a,onClose:h,cameFromNux:!0,initialVoiceName:t})})})}),e.jsx(T,{isOpen:b,onClose:h,type:"success",size:"fullscreen",className:`bg-white transition-opacity duration-300 dark:bg-gray-800 ${x&&!g?"opacity-100":"opacity-0"}`,showOverlayBackground:!1,children:e.jsxs("div",{className:"mx-auto flex h-full w-full max-w-lg flex-col items-center justify-center px-4 text-center",children:[e.jsx("h1",{className:"mb-9 text-2xl font-semibold text-token-text-primary",children:u?s.formatMessage({id:"XV3+9K",defaultMessage:"Sneak a peek at advanced voice mode"}):s.formatMessage({id:"9YnxDX",defaultMessage:"Say hello to advanced voice mode"})}),e.jsx("div",{className:"mb-9 space-y-5",children:L.map((v,B)=>e.jsx("div",{children:v},B))}),e.jsxs("p",{className:"mb-9 text-sm text-token-text-primary",children:[s.formatMessage({id:"vtcf3s",defaultMessage:"Voice mode can make mistakes — check important info."}),e.jsx("br",{}),s.formatMessage({id:"4nw2S2",defaultMessage:"Usage limits may change."})]}),e.jsx(U,{className:"rounded-full bg-token-text-primary px-20 py-3 font-semibold",onClick:l,children:e.jsx(y,{id:"ppi93b",defaultMessage:"Continue"})})]})})]})}const ie={default_voice_mode:"advanced",modes:[{mode:"advanced",default_model_slug:$,disabled_mode_metadata:null,description:"Advanced Voice Mode",display_name:"Advanced Voice",info_message:{actions:[],buttons:[],hint:"Advanced Voice",message_markdown:"Advanced Voice",message:"Advanced Voice",title:"Advanced Voice",display_at_launch:!1},disclosure_message:null,resets_after:"None"}],chatreq_token:"default"};function ce(){const a=F("2775516364").value,t=w(N.hasSeenAdvancedVoiceNuxFullPage);return!t.isLoading&&t.eligible&&a}function le(){const a=F("562926978").value,t=Z()?N.hasSeenAdvancedVoiceWebNuxTooltip:N.hasSeenAdvancedVoiceRealWebNuxTooltip,s=w(t);return{shouldShowTooltipNux:!s.isLoading&&s.eligible&&a,tooltipAnnouncement:s,announcementKey:t}}function Ne({clientThreadId:a,gizmoId:t}){const s=I(a),n=M().formatMessage({id:"HDu59A",defaultMessage:"Start voice mode"}),[i,d]=o.useState(!1),[u,m]=o.useState(!1),c=ce(),{shouldShowTooltipNux:f,tooltipAnnouncement:x,announcementKey:k}=le(),g=ee(),j=s??a,b=se(l=>l.isVoiceModeActive);o.useEffect(()=>{c||m(!1)},[c]);const S=o.useCallback(async()=>{if(_.logEvent(P.composerSpeechButtonClicked),f&&x.markAsViewed(),c){A.voiceAdvancedDisclosureShown.success(),m(!0);return}let l;d(!0);try{l=await g({conversation_id:s??null,requested_voice_mode:"advanced",gizmo_id:t??null},"composer_speech_button")}finally{d(!1)}const h=l??ie;te.setState(p=>{p.voiceStatus=h,p.isVoiceModeActive=!0})},[g,c,f,x,t,s]);return e.jsxs(e.Fragment,{children:[u&&e.jsx(ne,{conversationId:j}),!u&&e.jsx(re,{showNuxTooltip:f,tooltipAnnouncement:x,announcementKey:k,children:e.jsx("button",{"data-testid":"composer-speech-button",onClick:S,"aria-label":n,disabled:b||i,className:"flex h-8 w-8 items-center justify-center rounded-full bg-black text-white transition-colors hover:opacity-70 focus-visible:outline-none focus-visible:outline-black disabled:text-[#f4f4f4] disabled:opacity-30 dark:bg-white dark:text-black dark:focus-visible:outline-white",style:{viewTransitionName:"var(--vt-composer-speech-button)"},children:i?e.jsx(R,{}):e.jsx(Y,{})})})]})}function re({children:a,showNuxTooltip:t,tooltipAnnouncement:s,announcementKey:r}){const n=M();return t?e.jsx(J,{announcementKey:r,theme:"bright",side:"top",show:!0,badge:"new",dismissOnOutsideClick:!0,title:n.formatMessage({id:"DQ6CAP",defaultMessage:"Try advanced voice mode"}),contentAlign:"center",onDismiss:s.markAsViewed,sideOffset:2,children:e.jsx("div",{children:a})}):e.jsx(q,{sideOffset:4,label:n.formatMessage({id:"i4P/ix",defaultMessage:"Use voice mode"}),side:"top",onOpenChange:i=>{i&&(_.logEvent(P.composerSpeechButtonHovered),A.composerSpeechButton.hover())},children:a})}export{Ne as ComposerSpeechButton};
//# sourceMappingURL=gfd5u6af9iwp87xn.js.map
