const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/pbzakdvia7tnvaav.js","assets/ejnnsd2ul10wwon8.js","assets/iq818lbd3vi25zxi.js","assets/root-o085mhci.css","assets/71wmxosf3hlynfn3.js","assets/conversation-small-lkohtmkm.css","assets/dmjpf4nd9ywz94af.js","assets/ncxy382w1ckw5tgp.js","assets/bhodeadh6qtod2rx.js","assets/h0kpabp1jtuoi17n.js","assets/bxpjovrb20pr5qay.js","assets/doaawdf6ga0xm0wy.js","assets/k1wwrifvoapcweps.js","assets/l8vq6xz3tfzptfeh.js","assets/jhb2lcxnthif2lpi.js","assets/nrpmzwpmkgs4zly1.js","assets/c7assj56hy680let.js","assets/fzrn137102spawew.js","assets/box7f19311aq5kky.js","assets/k55tvdvc94a3v24b.js","assets/g36s9nh7j170vcr9.js","assets/nodk2wiysateaps4.js","assets/fjvr2ep1ty0a0iei.js","assets/oe6k0ii3tt3dln3t.js","assets/hv3ql4orn3m94q55.js","assets/kqwdyvkaaavvn8k3.js","assets/e1a5vp7jaok1t1vn.js","assets/fqhk2f7iu624ck6n.js","assets/cnp54ygvjmrzygjx.js","assets/c8iaed3c04d7935k.js","assets/cso9y3aambu21eqq.js","assets/ioce8ftjez81yy73.js","assets/c4bxzbp1808foto4.js","assets/ny55yho61v7tukho.js","assets/hfoq59uzfbv0qt7v.js","assets/hg6z3jy5h786djgq.js","assets/hpr9emzdoqezsi05.js","assets/o4stuqgjq01q0m8v.js","assets/jl6nxl2zxu4djhch.js","assets/moogu9j7gmp2sz13.js","assets/ez66yy6ef0rdgwfu.js","assets/ox3v3ygik0iebo6w.js","assets/ni02i8uzglki2kuw.js","assets/pftoodlnf1gmzmpy.js","assets/gxxmr9g4kfxqvl6r.js","assets/g4tl5lt9yqf20m4s.js"])))=>i.map(i=>d[i]);
import{r as l,m as e,a8 as Be,w as Fe,L as be,ev as Ve,a3 as Re,dk as We,dj as He,dh as Ue,y as ze,ag as Ge,gn as Ke,o as B,c5 as qe,aT as xe,hr as oe,cb as Qe,bb as Xe,K as Ye,aJ as x,aK as S,aw as $e,dM as y,bg as Je,b3 as ne,dK as Se,gY as re,aD as Ze,gS as I,bv as ea,av as aa,a7 as ie,a9 as sa,d3 as le,D as ta,ci as oa,cj as na,ck as ra,dt as ia,g3 as la,t as da,V as ca}from"./ejnnsd2ul10wwon8.js";import{hL as ua,hM as Me,aD as Ce,hN as ha,hf as fa,hO as ga,hP as ma,bQ as N,hQ as pa,hR as ba,hS as xa,hT as Sa,hU as Ma,hV as Ca,hW as va,ef as ja,hX as wa,hY as Aa,hZ as ka,h_ as Oa,h$ as ya,i0 as Ea,i1 as Pa,i2 as Ta,i3 as Na,i4 as _a,i5 as Da,i6 as Ia,i7 as La,i8 as Ba,i9 as Fa,ia as Va,ib as Ra,ic as Wa,id as Ha,ie as Ua,b$ as ve,q as L,U as de,bR as V,ig as za,ih as Ga,cF as je,bb as Ka,cG as qa,cQ as we,T as Ae,ii as ke,ij as Qa,ik as Xa,fF as Oe,il as ye,im as Ee,io as Pe,ip as Ya,ap as Te,bc as Ne,iq as ce,hk as T,fm as $a,bs as F,bt as ue,o as Ja,ir as Za,u as es,eW as as,et as ss,eV as ts,is as os,it as ns,iu as rs,iv as is,iw as ls,ix as ds,iy as he,iz as cs,an as us,iA as hs,iB as fs,b9 as gs,cD as ms,cE as ps,iC as bs,iD as xs,cH as Ss,iE as Ms}from"./71wmxosf3hlynfn3.js";import{m as O}from"./bhodeadh6qtod2rx.js";import{S as fe,b as Cs,c as vs}from"./ny55yho61v7tukho.js";import{S as js,C as ws}from"./hg6z3jy5h786djgq.js";import{T as _e,C as De}from"./hpr9emzdoqezsi05.js";import{N as As}from"./hfoq59uzfbv0qt7v.js";import{C as ks}from"./ox3v3ygik0iebo6w.js";function Os({clientThreadId:a}){const s=ua(o=>o.notifications);return l.useEffect(()=>{s.filter(t=>t.clientThreadId===a).map(t=>t.id).filter(t=>t!==void 0).forEach(t=>Me(t))},[a,s]),s.length===0?null:e.jsx("div",{className:"fixed right-4 top-8 my-2 flex max-h-[90vh] flex-col-reverse space-y-2 space-y-reverse overflow-y-auto px-2 py-4",children:e.jsx(Ce,{children:s.map(o=>e.jsx(ys,{...o},o.id))})})}function ys({...a}){const s=Be(),o=Fe(),t=be(),r=Ve(a.clientThreadId),i=()=>{r&&fa(s,o,r),a.id&&Me(a.id)};return e.jsxs(O.div,{onClick:i,className:"inline-flex w-80 cursor-pointer items-center justify-start gap-2.5 rounded-2xl border border-token-border-light bg-token-main-surface-primary px-3 py-3 align-middle shadow-lg",initial:{opacity:0,x:320},animate:{opacity:1,x:0},exit:{opacity:0,x:320},transition:{duration:.5},children:[e.jsx(ha,{iconName:"openai",size:"medium",className:"border-token-secondary rounded-full border bg-token-main-surface-primary text-token-text-primary"}),e.jsxs("div",{className:"inline-flex w-full shrink grow basis-0 flex-col items-start justify-start overflow-hidden",children:[e.jsx("div",{className:"w-full truncate text-sm font-medium text-token-text-primary",children:a.title??t.formatMessage({id:"mpXAeu",defaultMessage:"New chat"})}),e.jsx("div",{className:"w-full truncate text-sm text-token-text-tertiary",children:a.subtitle??t.formatMessage({id:"qMEc8J",defaultMessage:"New Message"})})]})]})}const Es=({onClose:a})=>{const s=be(),o=N(V.isBusinessWorkspace),t=N(i=>i.currentWorkspace),r=o?s.formatMessage(ge.workspaceWelcome,{workspaceName:t?.name}):"ChatGPT";return e.jsx(Qe,{isOpen:!0,onClose:Xe,type:"success",title:r,size:"custom",noPadding:!0,className:"max-w-3xl",description:s.formatMessage(ge.personalOnboardingSubheading),children:e.jsx(za,{onClose:a,scope:Ga.Personal})})};function Ps({clientThreadId:a}){const[s,o]=l.useState(0),{hasSeenOnboardingDate:t}=ga(),{hasSeenTeamOwnerOnboardingDate:r}=ma(),i=N(V.isBusinessWorkspace),h=Re(),[n,f]=l.useState(!1),{data:m,isPending:p,isEnabled:v}=pa(),u=ba(m,p&&v),{eligible:M}=xa(),j=We(),w=He(),E=Ue(),P=ze(()=>Ge.getThread(a)),A=Ke(a)||!P,k=B.getConversationOrigin(a),{data:g,isError:d}=qe(),b=g!=null,R=g&&g?.accountItems.length>1&&g.currentAccountId==null,W=g?.accountItems.some(c=>c.isPersonalAccount()),H=!!g?.accountItems&&g.accountItems.length>0&&g.accountItems.every(({canAccessWithCurrentSession:c})=>!c),{eligible:U,isLoading:z}=Sa(),{value:G}=xe("1542198993"),{punchOutRequireLoginInfo:K}=Ma(),{state:q}=Ca(),{isOpen:Q,isLoading:X}=va(),{isOpen:Y,isLoading:$}=ja(),{isOpen:J,isLoading:Z}=wa(),{isOpen:ee,isLoading:ae}=Aa(),{state:se}=ka(),C=l.useMemo(()=>[{Component:Oa,getModalState:()=>K?"show":"hide",isDeferrable:!1},{Component:ya,getModalState:()=>q,isDeferrable:!1},{Component:Ea,getModalState:()=>se,isDeferrable:!1},{Component:Pa,getModalState:()=>X||A?"loading":k===oe.APPLE?"hide":Q?"show":"hide",isDeferrable:!1},{Component:Ta,getModalState:()=>ae||A?"loading":k===oe.APPLE?"hide":ee?"show":"hide",isDeferrable:!1},{Component:Es,getModalState:()=>i?"hide":t===null?"loading":t===!1?"show":"hide",isDeferrable:!0},{Component:Na,getModalState:()=>d?"hide":R?"show":b?"hide":"loading",isDeferrable:!1},{Component:_a,getModalState:()=>j!==null?"show":d||b?"hide":"loading",isDeferrable:!1},{Component:Da,getModalState:()=>w!==null?"show":d||b?"hide":"loading",isDeferrable:!1},{Component:Ia,getModalState:()=>E!=null?"show":d||b?"hide":"loading",isDeferrable:!1},{Component:La,getModalState:()=>b?H?"show":"hide":"loading",isDeferrable:!1},{Component:Ba,getModalState:()=>$?"loading":Y?"show":"hide",isDeferrable:!1},{Component:Fa,getModalState:()=>Z?"loading":J?"show":"hide",isDeferrable:!1},{Component:Va,getModalState:()=>"hide",isDeferrable:!1},{Component:Ra,getModalState:()=>!h?.isTeam()||!h?.isOwnerOfAccount()||!W?"hide":!b||r===null?"loading":r===!1?"show":"hide",isDeferrable:!1},{Component:Wa,getModalState:()=>i?t===null?"loading":t===!1?"show":"hide":"hide",isDeferrable:!0},{Component:Ha,getModalState:()=>z?"loading":U&&G?"show":"hide",isDeferrable:!1},{Component:Ua,getModalState:()=>u,isDeferrable:!1}].filter(c=>!(c.isDeferrable&&n)),[M,K,q,E,b,t,r,W,i,d,j,w,h,H,R,u,n,G,U,z,Q,X,ee,ae,se,$,Y,J,Z,k,A]);l.useEffect(()=>{if(C[s]&&C[s].getModalState()==="hide"){const c=C.findIndex(Le=>Le.getModalState()!=="hide");o(c)}},[s,C]);const _=C[s],D=_?.getModalState()==="show";if(l.useEffect(()=>{const c=ve.getState().activeModals.has(L.BlockingInitialComponent);D!==c&&(D?de.openModal(L.BlockingInitialComponent):de.closeModal(L.BlockingInitialComponent))},[D]),_==null)return e.jsx("span",{"data-testid":"blocking-initial-modals-done",className:"hidden"});const te=_.getModalState();if(te==="loading")return null;te==="hide"&&o(c=>c+1);const Ie=C[s].Component;return e.jsx(Ie,{onClose:()=>{f(!0),o(c=>c+1)}})}const ge=Ye({workspaceWelcome:{id:"BlockingInitialModals.workspaceWelcome",defaultMessage:"Welcome to the {workspaceName} workspace"},personalOnboardingSubheading:{id:"BlockingInitialModals.personalOnboardingSubheading",defaultMessage:"Tips for getting started"}}),Ts=x(()=>S(()=>import("./pbzakdvia7tnvaav.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(a=>a.CanvasFocusedViewManager)),Ns=x(()=>S(()=>import("./fjvr2ep1ty0a0iei.js"),__vite__mapDeps([22,1,2,3,23,4,5,24,25,26,27,8])).then(a=>a.SearchResultsModal));function _s({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){const r=$e();je({clientThreadId:a});const{createNewThread:i,onThreadCreated:h,resetThread:n}=Ka({clientThreadId:a,setClientThreadId:s});qa({resetThreadAction:n,clientThreadId:a});const f=y("searchSources"),m=y("summarizer"),p=we();return e.jsxs(Ae,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(ke,{clientThreadId:a,urlThreadId:o}),e.jsxs(fe,{hideNavigation:r,mobileHeaderContent:e.jsx(Qa,{clientThreadId:a,inMobileHeader:!0}),mobileHeaderBottomContent:e.jsx(Xa,{clientThreadId:a}),mobileHeaderLeftContent:e.jsx(Cs,{onNewChatButtonClick:n}),mobileHeaderRightContent:e.jsx(vs,{onNewChatButtonClick:n}),sidebar:e.jsx(As,{navHeader:a?e.jsx(js,{className:"flex h-[60px] items-center md:h-header-height",onNewThread:i}):null,children:e.jsx(ws,{clientThreadId:a,onNewThread:i})}),threadFlyout:e.jsxs(e.Fragment,{children:[f&&e.jsx(Oe,{clientThreadId:a}),p&&m&&e.jsx(ye,{clientThreadId:a})]}),children:[e.jsx(Ee,{}),e.jsx(_e,{clientThreadId:a,onCreate:h,prefetchSearch:t},a),e.jsxs(fe.Sidebars,{children:[e.jsx(Ts,{clientThreadId:a}),e.jsx(Pe,{clientThreadId:a})]})]}),e.jsx(Ds,{clientThreadId:a})]})}function Ds({clientThreadId:a}){const s=Je(),o=s?.includes(ne.SearchTool)&&!s?.includes(ne.SearchToolHoldout),t=Ya();return Se()&&(!t||!o)&&e.jsx(Ns,{clientThreadId:a})}const me=450;function Is({children:a,clientThreadId:s,isOpen:o,onClose:t}){const r=Te();return e.jsxs(Ce,{children:[o&&r&&e.jsx(Ne,{clientThreadId:s,children:e.jsx(re,{children:e.jsx(ce.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(O.div,{className:"h-full w-full bg-token-main-surface-secondary",...T}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx(O.div,{className:"relative shrink-0 border-r border-token-border-medium bg-token-main-surface-primary",style:{width:me},...T,children:e.jsx(De,{hideHeader:!0,hideTools:!0})}),e.jsx("div",{className:"relative flex-grow overflow-auto",children:a})]})]})})})}),o&&!r&&e.jsx(re,{children:e.jsx(ce.Provider,{value:{isEmbeddedInFocusedView:!0},children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsx(O.div,{className:"h-full w-full bg-token-main-surface-secondary",...T}),e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-grow overflow-auto",children:a}),e.jsx(O.div,{className:"relative shrink-0 border-l border-token-border-medium bg-token-main-surface-primary",style:{width:me},...T,children:e.jsx("div",{className:"h-[100vh] pb-4",children:e.jsx(_e,{clientThreadId:s,hideHeader:!0,hideFooter:!0,hideToolsOverlay:!0,messagesVerticalAlign:"bottom"},s)})})]})]})})})]})}const Ls=x(()=>S(()=>import("./cnp54ygvjmrzygjx.js"),__vite__mapDeps([28,1,2,3,4,5]))),Bs=x(()=>S(()=>import("./c8iaed3c04d7935k.js"),__vite__mapDeps([29,1,2,3,4,5,30,31,32,8,33,34,19,35,36,9,15,37,38,39,40,41])).then(a=>a.ImageEditor));function Fs({clientThreadId:a}){const s=$a();l.useEffect(()=>{F.close()},[a]);let o;return s?.type===ue.ADAVisualization?o=e.jsx(Ls,{clientThreadId:a,visualization:s.visualization}):s?.type===ue.Image&&(o=e.jsx(Bs,{clientThreadId:a,messageId:s.messageId,image:s.image,allImages:s.allImages},s.image.asset_pointer)),e.jsx(Is,{clientThreadId:a,isOpen:s!=null,onClose:F.close,children:o})}const Vs=x(()=>S(()=>import("./pbzakdvia7tnvaav.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21])).then(a=>a.CanvasFocusedViewManager)),pe=64;function Rs(){const{focusedObject:a,clientThreadId:s}=Ja();y(void 0);const o=l.useRef(null),[t,r]=l.useState({bottom:null,height:null});Za(o,r);const i=es(),h=y("searchSources"),n=y("summarizer"),f=Se(),[m,p]=l.useState(!1),v=!i&&!!a;let u=0;m&&t.height==null?u=pe:m&&t.height!=null?u=pe+t.height:!m&&t.height!=null&&(u=t.height);const M=we();return e.jsx(as,{className:Ze(I.application,{[I.withCanvasFocusedView]:!!i,[I.withEmbeddedFocusedView]:v}),banner:e.jsx(ea,{children:e.jsx(ss,{setIsMobileAppUpsellBannerVisible:p})}),sidebar:e.jsx(ks,{}),thread:e.jsx(De,{ref:o},s),details:e.jsx(Vs,{clientThreadId:s}),threadExtendedInfo:f&&e.jsxs(e.Fragment,{children:[!1,h&&e.jsx(Oe,{clientThreadId:s}),M&&n&&e.jsx(ye,{clientThreadId:s})]}),debugger:e.jsx(Pe,{clientThreadId:s}),name:"application-root",style:{"--screen-keyboard-bottom":t.bottom?`${t.bottom}px`:"","--screen-height-offset":u>0?`${u}px`:""}})}function Ws({clientThreadId:a,setClientThreadId:s,urlThreadId:o,prefetchSearch:t}){return je({clientThreadId:a}),e.jsx(Ne,{clientThreadId:a,setClientThreadId:s,prefetchSearch:t,children:e.jsxs(ts,{children:[e.jsx(os,{}),e.jsx(ns,{}),e.jsxs(Ae,{enableSandbox:!1,clientThreadId:a,children:[e.jsx(ke,{clientThreadId:a,urlThreadId:o}),e.jsx(Ee,{}),e.jsx(Rs,{})]})]})})}var Hs={};const Us=x(()=>S(()=>import("./ni02i8uzglki2kuw.js"),__vite__mapDeps([42,1,2,3,4,5,43]))),zs=x(()=>S(()=>import("./gxxmr9g4kfxqvl6r.js"),__vite__mapDeps([44,1,2,3,4,5,36,9,8,15,37,19,38,39,40,45])));function at(a){const{urlThreadId:s,clientThreadId:o,prefetchSearch:t}=a;Ks();const r=aa(),i=ie(),[h]=sa(),[n,f]=l.useState(()=>s!==void 0?s:o!==void 0?o:le());s!==void 0&&n!==s&&B.getServerThreadId(n)!==s&&f(s);const m=rs(ie());l.useEffect(()=>{s===void 0&&B.getServerThreadId(n)!==void 0&&f(le())},[s,n,m]);const p=N(V.workspaceId),v=Te(),{eligible:u,isLoading:M,markAsViewed:j}=is(),w=ls(),E=xe("3435450078");l.useEffect(()=>{(i.pathname==="/"||i.pathname.startsWith("/c/"))&&ds({namespace:he.ChatPageLoad})==null&&(cs({namespace:he.ChatPageLoad,opts:{expectedTimingLogs:[{name:"render_model_switcher",expectedInMs:1e4},{name:"render_history_items",expectedInMs:25e3}]}}),ta.addTiming("chatgpt.web.chatPage.mounted"))},[]);const P=us();l.useEffect(()=>{oa(!0).then(d=>{d.force_login&&P({authType:"login"}),na.initializeAndGatherData(d),hs.initializeAndGatherData(d),ra.initializeAndGatherData(d)})},[P]),l.useEffect(()=>{const d=h.get(fs)==="true";r!==d&&ia.setIsTemporaryChatEnabled(d)},[r,h]),l.useEffect(()=>{i.state?.focusObject&&F.setFocusedObject(i.state.focusObject)},[i.state?.focusObject]),l.useEffect(()=>{!M&&u&&(j(),w())},[u,M,j,w]);const{isOpen:A,isLoading:k}=gs(),g=v?Ws:_s;return e.jsx(la.Provider,{value:null,children:e.jsx(ms,{children:e.jsxs(ps,{clientThreadId:n,children:[e.jsx(Ps,{clientThreadId:n},p),!k&&A&&e.jsx(zs,{clientThreadId:n,setClientThreadId:f}),e.jsx(bs,{}),e.jsx(xs,{}),e.jsx(g,{urlThreadId:s,clientThreadId:n,setClientThreadId:f,prefetchSearch:t}),e.jsx(Fs,{clientThreadId:n}),e.jsx(Ss,{clientThreadId:n}),e.jsx(Gs,{}),e.jsx(Ms,{}),E?e.jsx(Os,{clientThreadId:n}):!1]})})})}function Gs(){const a=ve(s=>s.sharingModalThreadId);return a?e.jsx(Us,{serverThreadId:a}):null}function Ks(){da({queryKey:["pingEdge"],queryFn:()=>ca.pingEdge(),enabled:!0,staleTime:1/0})}typeof window<"u"&&(window._g=Hs.GOKU_SERVICE);export{at as C,me as F};
//# sourceMappingURL=np64hnpy8s8rsssb.js.map
