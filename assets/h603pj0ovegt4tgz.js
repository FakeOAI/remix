import{r as a,K as T}from"./hc9xxm00a3r3byem.js";import{Z as le,a0 as N,a1 as j,a2 as te,a3 as D,a4 as ne}from"./ozzpumen10p6g0yq.js";import{C as K,S as q,I as A,y as G,T as ae,n as Z,o as S,b as ue,$ as H,s as se,O as M,c as R,F as ie,N as pe,e as ce,d as ve}from"./fi9p3eeu24b9vfd1.js";import{E as de,n as oe,h as U,s as V,a as L}from"./gd8pozsaf0jikwjx.js";var fe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(fe||{}),Pe=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Pe||{});let me={0:e=>({...e,popoverState:N(e.popoverState,{0:1,1:0})}),1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,l){return e.button===l.button?e:{...e,button:l.button}},3(e,l){return e.buttonId===l.buttonId?e:{...e,buttonId:l.buttonId}},4(e,l){return e.panel===l.panel?e:{...e,panel:l.panel}},5(e,l){return e.panelId===l.panelId?e:{...e,panelId:l.panelId}}},_=a.createContext(null);_.displayName="PopoverContext";function J(e){let l=a.useContext(_);if(l===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,J),n}return l}let z=a.createContext(null);z.displayName="PopoverAPIContext";function Q(e){let l=a.useContext(z);if(l===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Q),n}return l}let X=a.createContext(null);X.displayName="PopoverGroupContext";function re(){return a.useContext(X)}let Y=a.createContext(null);Y.displayName="PopoverPanelContext";function Se(){return a.useContext(Y)}function be(e,l){return N(l.type,me,e,l)}let ye="div",Ee=K(function(e,l){var n;let f=`headlessui-popover-button-${A()}`,o=`headlessui-popover-panel-${A()}`,c=a.useRef(null),$=G(l,ae(t=>{c.current=t})),g=a.useReducer(be,{popoverState:1,button:null,buttonId:f,panel:null,panelId:o,beforePanelSentinel:a.createRef(),afterPanelSentinel:a.createRef()}),[{popoverState:d,button:i,panel:r,beforePanelSentinel:O,afterPanelSentinel:h},P]=g,u=Z((n=c.current)!=null?n:i);a.useEffect(()=>P({type:3,buttonId:f}),[f,P]),a.useEffect(()=>P({type:5,panelId:o}),[o,P]);let v=a.useMemo(()=>{if(!i||!r)return!1;for(let t of document.querySelectorAll("body > *"))if(Number(t==null?void 0:t.contains(i))^Number(t==null?void 0:t.contains(r)))return!0;return!1},[i,r]),b=a.useMemo(()=>({buttonId:f,panelId:o,close:()=>P({type:1})}),[f,o,P]),y=re(),I=y==null?void 0:y.registerPopover,w=S(()=>{var t;return(t=y==null?void 0:y.isFocusWithinPopoverGroup())!=null?t:(u==null?void 0:u.activeElement)&&((i==null?void 0:i.contains(u.activeElement))||(r==null?void 0:r.contains(u.activeElement)))});a.useEffect(()=>I==null?void 0:I(b),[I,b]),de(u==null?void 0:u.defaultView,"focus",t=>{var s,m,B,F;d===0&&(w()||!i||!r||(m=(s=O.current)==null?void 0:s.contains)!=null&&m.call(s,t.target)||(F=(B=h.current)==null?void 0:B.contains)!=null&&F.call(B,t.target)||P({type:1}))},!0),ue([i,r],(t,s)=>{P({type:1}),ie(s,pe.Loose)||(t.preventDefault(),i==null||i.focus())},d===0);let k=S(t=>{P({type:1});let s=t?t instanceof HTMLElement?t:"current"in t&&t.current instanceof HTMLElement?t.current:i:i;s==null||s.focus()}),p=a.useMemo(()=>({close:k,isPortalled:v}),[k,v]),C=a.useMemo(()=>({open:d===0,close:k}),[d,k]),E=e,x={ref:$};return T.createElement(_.Provider,{value:g},T.createElement(z.Provider,{value:p},T.createElement(le,{value:N(d,{0:j.Open,1:j.Closed})},H({ourProps:x,theirProps:E,slot:C,defaultTag:ye,name:"Popover"}))))}),$e="button",ge=K(function(e,l){let[n,f]=J("Popover.Button"),{isPortalled:o}=Q("Popover.Button"),c=a.useRef(null),$=`headlessui-focus-sentinel-${A()}`,g=re(),d=g==null?void 0:g.closeOthers,i=Se(),r=i===null?!1:i===n.panelId,O=G(c,l,r?null:t=>f({type:2,button:t})),h=G(c,l),P=Z(c),u=S(t=>{var s,m,B;if(r){if(n.popoverState===1)return;switch(t.key){case D.Space:case D.Enter:t.preventDefault(),(m=(s=t.target).click)==null||m.call(s),f({type:1}),(B=n.button)==null||B.focus();break}}else switch(t.key){case D.Space:case D.Enter:t.preventDefault(),t.stopPropagation(),n.popoverState===1&&(d==null||d(n.buttonId)),f({type:0});break;case D.Escape:if(n.popoverState!==0)return d==null?void 0:d(n.buttonId);if(!c.current||P!=null&&P.activeElement&&!c.current.contains(P.activeElement))return;t.preventDefault(),t.stopPropagation(),f({type:1});break}}),v=S(t=>{r||t.key===D.Space&&t.preventDefault()}),b=S(t=>{var s,m;ne(t.currentTarget)||e.disabled||(r?(f({type:1}),(s=n.button)==null||s.focus()):(t.preventDefault(),t.stopPropagation(),n.popoverState===1&&(d==null||d(n.buttonId)),f({type:0}),(m=n.button)==null||m.focus()))}),y=S(t=>{t.preventDefault(),t.stopPropagation()}),I=n.popoverState===0,w=a.useMemo(()=>({open:I}),[I]),k=se(e,c),p=e,C=r?{ref:h,type:k,onKeyDown:u,onClick:b}:{ref:O,id:n.buttonId,type:k,"aria-expanded":e.disabled?void 0:n.popoverState===0,"aria-controls":n.panel?n.panelId:void 0,onKeyDown:u,onKeyUp:v,onClick:b,onMouseDown:y},E=oe(),x=S(()=>{let t=n.panel;if(!t)return;function s(){N(E.current,{[L.Forwards]:()=>M(t,R.First),[L.Backwards]:()=>M(t,R.Last)})}s()});return T.createElement(T.Fragment,null,H({ourProps:C,theirProps:p,slot:w,defaultTag:$e,name:"Popover.Button"}),I&&!r&&o&&T.createElement(U,{id:$,features:V.Focusable,as:"button",type:"button",onFocus:x}))}),Ie="div",Ce=q.RenderStrategy|q.Static,he=K(function(e,l){let[{popoverState:n},f]=J("Popover.Overlay"),o=G(l),c=`headlessui-popover-overlay-${A()}`,$=te(),g=$!==null?$===j.Open:n===0,d=S(r=>{if(ne(r.currentTarget))return r.preventDefault();f({type:1})}),i=a.useMemo(()=>({open:n===0}),[n]);return H({ourProps:{ref:o,id:c,"aria-hidden":!0,onClick:d},theirProps:e,slot:i,defaultTag:Ie,features:Ce,visible:g,name:"Popover.Overlay"})}),Te="div",ke=q.RenderStrategy|q.Static,xe=K(function(e,l){let{focus:n=!1,...f}=e,[o,c]=J("Popover.Panel"),{close:$,isPortalled:g}=Q("Popover.Panel"),d=`headlessui-focus-sentinel-before-${A()}`,i=`headlessui-focus-sentinel-after-${A()}`,r=a.useRef(null),O=G(r,l,p=>{c({type:4,panel:p})}),h=Z(r),P=te(),u=P!==null?P===j.Open:o.popoverState===0,v=S(p=>{var C;switch(p.key){case D.Escape:if(o.popoverState!==0||!r.current||h!=null&&h.activeElement&&!r.current.contains(h.activeElement))return;p.preventDefault(),p.stopPropagation(),c({type:1}),(C=o.button)==null||C.focus();break}});a.useEffect(()=>{var p;e.static||o.popoverState===1&&((p=e.unmount)==null||p)&&c({type:4,panel:null})},[o.popoverState,e.unmount,e.static,c]),a.useEffect(()=>{if(!n||o.popoverState!==0||!r.current)return;let p=h==null?void 0:h.activeElement;r.current.contains(p)||M(r.current,R.First)},[n,r,o.popoverState]);let b=a.useMemo(()=>({open:o.popoverState===0,close:$}),[o,$]),y={ref:O,id:o.panelId,onKeyDown:v,onBlur:n&&o.popoverState===0?p=>{var C,E,x,t,s;let m=p.relatedTarget;!m||!r.current||(C=r.current)!=null&&C.contains(m)||(c({type:1}),((x=(E=o.beforePanelSentinel.current)==null?void 0:E.contains)!=null&&x.call(E,m)||(s=(t=o.afterPanelSentinel.current)==null?void 0:t.contains)!=null&&s.call(t,m))&&m.focus({preventScroll:!0}))}:void 0,tabIndex:-1},I=oe(),w=S(()=>{let p=r.current;if(!p)return;function C(){N(I.current,{[L.Forwards]:()=>{M(p,R.First)},[L.Backwards]:()=>{var E;(E=o.button)==null||E.focus({preventScroll:!0})}})}C()}),k=S(()=>{let p=r.current;if(!p)return;function C(){N(I.current,{[L.Forwards]:()=>{var E,x,t;if(!o.button)return;let s=ve(),m=s.indexOf(o.button),B=s.slice(0,m+1),F=[...s.slice(m+1),...B];for(let W of F.slice())if((x=(E=W==null?void 0:W.id)==null?void 0:E.startsWith)!=null&&x.call(E,"headlessui-focus-sentinel-")||(t=o.panel)!=null&&t.contains(W)){let ee=F.indexOf(W);ee!==-1&&F.splice(ee,1)}M(F,R.First,!1)},[L.Backwards]:()=>M(p,R.Last)})}C()});return T.createElement(Y.Provider,{value:o.panelId},u&&g&&T.createElement(U,{id:d,ref:o.beforePanelSentinel,features:V.Focusable,as:"button",type:"button",onFocus:w}),H({ourProps:y,theirProps:f,slot:b,defaultTag:Te,features:ke,visible:u,name:"Popover.Panel"}),u&&g&&T.createElement(U,{id:i,ref:o.afterPanelSentinel,features:V.Focusable,as:"button",type:"button",onFocus:k}))}),we="div",Be=K(function(e,l){let n=a.useRef(null),f=G(n,l),[o,c]=a.useState([]),$=S(u=>{c(v=>{let b=v.indexOf(u);if(b!==-1){let y=v.slice();return y.splice(b,1),y}return v})}),g=S(u=>(c(v=>[...v,u]),()=>$(u))),d=S(()=>{var u;let v=ce(n);if(!v)return!1;let b=v.activeElement;return(u=n.current)!=null&&u.contains(b)?!0:o.some(y=>{var I,w;return((I=v.getElementById(y.buttonId))==null?void 0:I.contains(b))||((w=v.getElementById(y.panelId))==null?void 0:w.contains(b))})}),i=S(u=>{for(let v of o)v.buttonId!==u&&v.close()}),r=a.useMemo(()=>({registerPopover:g,unregisterPopover:$,isFocusWithinPopoverGroup:d,closeOthers:i}),[g,$,d,i]),O=a.useMemo(()=>({}),[]),h=e,P={ref:f};return T.createElement(X.Provider,{value:r},H({ourProps:P,theirProps:h,slot:O,defaultTag:we,name:"Popover.Group"}))}),Re=Object.assign(Ee,{Button:ge,Overlay:he,Panel:xe,Group:Be});export{Re as m};
//# sourceMappingURL=h603pj0ovegt4tgz.js.map
