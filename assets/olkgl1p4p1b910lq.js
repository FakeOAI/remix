import{bU as T,j as e,X as f,G as U,T as l,e8 as de,h as ue,r as g,dt as me,dv as fe,dw as ge,b2 as pe,I as P,c as y,aB as C,a4 as F,ax as he,a3 as xe,F as X,p as Y,R as W,Y as S,e9 as be,z as Z,v as L,J,ea as Q,aO as ve,t as je,bH as Se,o as Me,eb as ye,a8 as Ce,a9 as ke,d2 as we,E as G,a5 as Ne,K as z,co as q}from"./hc9xxm00a3r3byem.js";import{u as B,U as x,b as Ie,G as I}from"./guykwp3ov0cliuel.js";import{b9 as Te,e as Pe,ba as _e,bb as ee,aS as Ee,bc as Ue,an as Fe,u as Le}from"./fga5qe14lr2llx8v.js";import{bZ as se,b_ as E,b$ as Be,c0 as Oe,c1 as K,c2 as Re,c3 as Ae,c4 as We,c5 as V}from"./ozzpumen10p6g0yq.js";import{u as D}from"./nug034oo81goid6a.js";import{h as te,i as De,U as H,j as He,k as $e,E as Ge}from"./fi9p3eeu24b9vfd1.js";import{m as ae}from"./ovjwzbtdrcsgos3a.js";import{B as ze,D as R}from"./i9qil017zb3p1czr.js";import{s as qe,u as ne}from"./eq9w2mijkl5gcncq.js";import{u as Ke}from"./l02mntsvyz06f5g3.js";import{A as Ve}from"./dkb2noz4qv6snkbi.js";import{b as Xe,a as Ye}from"./cj3cq0j3ew1e2kbz.js";function Is({onClick:t,className:a,...s}){return e.jsx(De,{onClick:t,className:y(a,"flex-grow overflow-hidden"),...s})}function Ts({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=T();return s||!a?null:e.jsx(te,{className:"mr-3",onClick:()=>{f.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function Ps({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=T(),o=se();return s?null:a?o?e.jsx(Je,{}):e.jsx(Ze,{}):e.jsx(te,{onClick:()=>{f.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function Ze(){const t=D();return e.jsx(U,{as:"button",size:"small",color:"primary",onClick:()=>{const a=t({authType:"signup"});f.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:a})},children:e.jsx(l,{...ie.signUpButtonText})})}function Je(){const t=D();return e.jsx(U,{as:"button",size:"small",color:"primary",onClick:()=>{const a=t({authType:"login"});f.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:a})},children:e.jsx(l,{...de.logInButtonText})})}function Qe({onClick:t}){return e.jsxs("button",{type:"button",className:"inline-flex rounded-md hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:t,children:[e.jsx("span",{className:"sr-only",children:e.jsx(l,{...ie.openSidebar})}),e.jsx(Te,{className:"icon-lg mx-2 text-token-text-secondary"})]})}const es=({onClickOpenSidebar:t,children:a,showNavSidebar:s,leftContent:o,rightContent:i,bottomContent:n})=>{const r=B(m=>m.activeSidebar),d=ue().asPath;return g.useEffect(()=>{r==="popover-nav"&&x.setActiveSidebar(!1)},[d]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sticky top-0 z-10 flex min-h-[60px] items-center justify-center border-transparent bg-token-main-surface-primary pl-0 md:hidden",children:[(s||o)&&e.jsxs("div",{className:"absolute bottom-0 left-0 top-0 ml-3 inline-flex items-center justify-center",children:[s&&e.jsx(Qe,{onClick:t}),o]}),a,i&&e.jsx("div",{className:"absolute bottom-0 right-0 top-0 mr-3 inline-flex items-center justify-center",children:i})]}),n&&e.jsx("div",{className:"flex w-full items-center justify-center bg-token-main-surface-primary",children:n})]})};function ss({isPopover:t=!1,isExpanded:a=!1,children:s}){return e.jsxs(e.Fragment,{children:[t&&e.jsx(as,{children:s}),e.jsx(ts,{isExpanded:!t&&a,children:s})]})}function ts({isExpanded:t,children:a}){const s=g.useRef(null);return e.jsx(ae.div,{className:"flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary",ref:s,initial:!1,animate:{width:t?"260px":0,transition:{duration:.165,ease:"easeOut"}},onAnimationStart:()=>{s.current&&(s.current.style.visibility="visible")},onAnimationComplete:()=>{s.current&&(t||(s.current.style.visibility="hidden"))},children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col",children:a})})})}function as({children:t}){const a=B(s=>s.activeSidebar);return e.jsx(me,{open:a==="popover-nav",onOpenChange:s=>{s||x.setActiveSidebar(!1)},children:e.jsxs(fe,{children:[e.jsx(ge,{className:"fixed inset-0 z-10 bg-white/50 radix-state-open:animate-show dark:bg-black/50"}),e.jsx(pe,{className:"fixed left-0 top-0 z-50 h-full max-w-xs border-r border-gray-200 bg-token-sidebar-surface-primary shadow-[0_0_64px_0_rgba(0,0,0,0.07)] focus:outline-none radix-state-closed:animate-sidebarHide radix-state-open:animate-sidebarShow dark:border-gray-800",children:t})]})})}const ie=P({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}});function ns(){const{conversations:t}=Ke(),a=g.useMemo(()=>t.length<=5?!1:C.checkGate("4277113861"),[t]);return{canUseHistoryIsCollapsible:a,isCollapsible:a&&t.length>5,recentConversationLimit:5}}function is({workspace:t}){var n;const a=F(),s=Ie(I.InviteUsersToWorkspace),o=Xe()??!0,i=(n=Ye())==null?void 0:n.map(r=>r.hostname);return e.jsx(he,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:xe,type:"success",title:t.data.name!=null?a.formatMessage(N.inviteMemberModalTitle,{workspaceName:t.data.name}):a.formatMessage(N.inviteMemberModalTitleUntitledWorkspace),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(l,{...N.inviteMemberModalDescription})}),!!(i!=null&&i.length)&&!o&&e.jsxs("p",{className:"mt-2",children:[e.jsx(l,{...N.prohibitExternalDomainsDescription})," ",e.jsx("b",{children:i.join(", ")})]})]}),children:e.jsx(Ve,{workspace:t,canResendInviteEmails:!0,onCancel:()=>x.closeModal(I.InviteUsersToWorkspace),onSuccess:()=>x.closeModal(I.InviteUsersToWorkspace),cancelButtonText:a.formatMessage(N.inviteMemberInviteCancelButton)})})}const N=P({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},prohibitExternalDomainsDescription:{id:"ky8nVd",defaultMessage:"Only users from the following emails can be added to this workspace:"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}});function rs({showFreeTrialLoadingPayment:t,handleGetPaymentLink:a}){const s=F(),o=()=>{t||(E(!0),a())},i=j=>{j.stopPropagation(),Be(!0),Oe(!0)},{data:n,isLoading:r,isSuccess:c}=Y({queryKey:["claimedReferralInvite"],queryFn:()=>W.getClaimedReferralInvite(),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),d=n==null?void 0:n.invite_code,[m,p]=g.useState(!1);if(g.useEffect(()=>{d&&!m&&c&&(p(!0),C.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),f.logEvent(S.chatgptReferralShowClaimedSidebartMenuPromo))},[d,p,m,c]),!d||r||!c)return null;const u=d.invite_metadata.invite_data,k=u!=null&&u.referral_trial_duration_months?(u==null?void 0:u.referral_trial_duration_months)>1?s.formatMessage(A.monthsOfBenefit,{referralTrialDurationMonths:u==null?void 0:u.referral_trial_duration_months}):s.formatMessage(A.daysOfBenefit,{referralTrialDurationDays:u==null?void 0:u.referral_trial_duration_days}):null;return e.jsx(ae.div,{className:y("relative",{"cursor-progress opacity-50":t}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:e.jsxs(os,{className:y(t&&"opacity-75"),onClick:o,children:[e.jsxs("div",{className:"flex w-full flex-row items-center justify-start gap-3",children:[e.jsx(be,{className:"icon-sm shrink-0"}),e.jsx(l,{...A.freeTrialCta,values:{duration:k}})]}),!t&&e.jsx(Pe,{onClick:i,className:"icon-md shrink-0 rounded-full p-0.5 text-token-text-tertiary opacity-50 transition-colors duration-200 hover:bg-[#0077FF] hover:text-red-500 group-hover:opacity-100"}),e.jsx("span",{className:"absolute top-11 h-0 w-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}const os=X.a`group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm`,A=P({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}"}});function ls(){const t=F(),a=Z(),s=L(),o=!s,i=(s==null?void 0:s.hasPaidSubscription())??!1,n=(s==null?void 0:s.hasClaimedFreeTrial())??!1,r=g.useMemo(()=>s==null?void 0:s.subscriptionAnalyticsParams,[s]),c=async()=>{E(!0),f.logEvent(S.clickAccountPaymentCheckout,r);try{const b=await W.getCheckoutLink(a);window.location.href=b.url}catch{je.warning(t.formatMessage(v.paymentErrorWarning),{hasCloseButton:!0}),E(!1)}finally{}},d=()=>{p||(E(!0),c())},m=K(b=>b.didCloseFreeTrial),p=K(b=>b.showFreeTrialLoadingPayment),u=!m&&n,k=(s==null?void 0:s.wasPaidCustomer())??!1,j=(s==null?void 0:s.isWorkspaceAccount())??!1,_=(s==null?void 0:s.isPlus())??!1,w=!o&&!j,O=J(),h=()=>{f.logEvent(S.clickSidebarAccountPaymentMenuItem,r),qe(O,"Sidebar account payment menu item")},{setShowReferralInviteModal:$}=Re(b=>({setShowReferralInviteModal:b.setShowReferralInviteModal})),le=g.useCallback(()=>{C.logEvent("chatgpt_referral_invite_sidebar_clicked"),f.logEvent(S.chatgptReferralInviteSidebarClicked,r),$(!0,()=>{f.logEvent(S.clickSidebarAccountPaymentMenuItem,r)})},[r,$]),ce=(s==null?void 0:s.isTeam())??!1;return e.jsxs(e.Fragment,{children:[((a==null?void 0:a.includes(Q))||i)&&e.jsx(us,{analyticsParams:r,handleReferralInvite:le}),!i&&u&&e.jsx(rs,{showFreeTrialLoadingPayment:p,handleGetPaymentLink:c}),ce&&e.jsx(ds,{}),w&&e.jsx(H,{onClick:u?d:h,className:"m-0 rounded-lg px-2",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(cs,{wasPaidCustomer:k,showFreeTrialLoadingPayment:p,hasPlusSubscription:_})})})})]})}const cs=({wasPaidCustomer:t,showFreeTrialLoadingPayment:a,hasPlusSubscription:s})=>a?e.jsx(ve,{className:"icon-sm shrink-0"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(_e,{className:"icon-sm shrink-0"})}),e.jsx("div",{className:"flex flex-col",children:t?e.jsx(l,{...v.renewPlus}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s?e.jsx(l,{...v.createATeamWorkspace}):e.jsx(l,{...v.upgradePlan})}),e.jsx("span",{className:"line-clamp-1 text-xs text-token-text-tertiary",children:s?e.jsx(l,{...v.upgradeToTeamUpsell}):e.jsx(l,{...v.upgradeToPlusUpsell})})]})})]}),ds=()=>{const t=L();return e.jsxs(e.Fragment,{children:[e.jsx(H,{onClick:()=>{x.openModal(I.InviteUsersToWorkspace)},className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(ee,{className:"icon-sm shrink-0"})}),e.jsx(l,{...v.inviteMembers})]})})}),t!=null?e.jsx(is,{workspace:t}):null]})},us=({analyticsParams:t,handleReferralInvite:a})=>{const s=Z(),o=(s==null?void 0:s.includes(Q))??!1,i=L(),{data:n}=Y({queryKey:["referralInvites"],queryFn:()=>W.getEligibleReferralInvites(),enabled:o}),r=i&&!i.isOrWasPaidCustomer()&&!i.hasPlusFeatures(),c=(n==null?void 0:n.invites_remaining)&&(n==null?void 0:n.invites_remaining)>0,d=r&&c,[m,p]=g.useState(!1);return g.useEffect(()=>{d&&!m&&(p(!0),C.logEvent("chatgpt_referral_show_sidebar_menu_item"),f.logEvent(S.chatgptReferralShowSidebarMenuItem,t))},[d,p,m,t]),d?e.jsx(H,{onClick:a,className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(ee,{className:"icon-sm shrink-0"})}),e.jsx(l,{...v.inviteReferral})]})})}):null},v=P({upgradePlan:{id:"PaymentMenuItems.upgradePlan",defaultMessage:"Upgrade plan"},createATeamWorkspace:{id:"PaymentMenuItems.createATeamWorkspace",defaultMessage:"Add Team workspace"},upgradeToTeamUpsell:{id:"PaymentMenuItems.upgradeToTeamUpsell",defaultMessage:"Collaborate on a Team plan"},upgradeToPlusUpsell:{id:"PaymentMenuItems.upgradeToPlusUpsell.0",defaultMessage:"Get GPT-4, DALL·E, and more"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend"},inviteMembers:{id:"PaymentMenuItems.inviteMembers.0",defaultMessage:"Invite members"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}});function _s({navHeader:t,children:a,className:s}){const o=F(),i=g.useRef(null),n=Se(),{isUnauthenticated:r}=T(),{layer:c}=Me("1578749296"),d=c.get("is_sticky_toggle_off",!1);return g.useEffect(()=>{d&&x.openSidebar()},[d]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full w-full flex-1 items-start border-white/20",children:[e.jsx(ye,{asChild:!0,children:e.jsx("h2",{children:e.jsx(l,{...M.chatHistoryLabel})})}),e.jsxs("nav",{className:y("flex h-full w-full flex-col px-3",s),"aria-label":o.formatMessage(M.chatHistoryLabel),children:[t,e.jsx(fs,{ref:i,$disableScroll:n&&!r,children:a}),e.jsx(ms,{})]})]})})}function ms(){const[t]=g.useState(()=>{const c=Ce.getCookie(ke.Workspace);return typeof c=="string"&&c!==we}),a=L(),s=(a==null?void 0:a.data)==null,{isUnauthenticated:o}=T(),{openSettings:i}=ne(),{isCollapsible:n}=ns(),r=B(c=>c.isHistoryCollapsed);return t&&s||!a?null:o?e.jsx(re,{}):e.jsxs("div",{className:y("flex flex-col py-2 empty:hidden dark:border-white/20",n&&"-mx-3 border-t border-token-border-sharp px-3"),children:[n&&!r&&e.jsx(Ae,{type:"less",onClick:x.toggleHistoryCollapsed}),e.jsx(We,{}),e.jsx(ls,{}),e.jsx("div",{className:"flex w-full items-center md:hidden",children:e.jsx("div",{className:"max-w-[100%] grow",children:e.jsx(He,{onClickSettings:()=>i()})})})]})}const re=()=>{const t=se(),a=D(),s=()=>{const r=a({authType:"login"});f.logLogInButtonClicked({location:"Sidebar bottom unit",provider:r}),C.logEvent("chatgpt_sidebar_login_button_clicked")},o=()=>{const r=a({authType:"signup"});f.logSignUpButtonClicked({location:"Sidebar bottom unit",provider:r}),C.logEvent("chatgpt_sidebar_signup_button_clicked")},i=e.jsx(U,{as:"button",size:"medium",color:t?"secondary":"primary","data-testid":"signup-button",onClick:o,children:e.jsx(l,{...M.unauthSignupCta})}),n=e.jsx(U,{as:"button",size:"medium",color:t?"primary":"secondary","data-testid":"login-button",onClick:s,children:e.jsx(l,{...M.unauthLoginCta})});return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-4 mt-2",children:[e.jsx("p",{className:"mb-1 text-sm font-semibold text-token-text-primary",children:e.jsx(l,{...t?M.logInOrSignUp:M.signUpOrLogIn})}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."})})]}),e.jsx("div",{className:"flex flex-row items-start gap-2",children:t?[n,i]:[i,n]})]})},fs=X.div`flex-col flex-1 transition-opacity duration-500 relative -mr-2 pr-2
  ${({$disableScroll:t})=>t?"overflow-y-hidden opacity-20 pointer-events-none":"overflow-y-auto"}`,M=P({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history"},closeSidebar:{id:"NavigationContent.closeSidebar",defaultMessage:"Close sidebar"},signInToChat:{id:"NavigationContent.signInToChat",defaultMessage:"Sign in to ChatGPT"},signUpOrLogIn:{id:"NavigationContent.signUpOrLogIn",defaultMessage:"Sign up or log in"},logInOrSignUp:{id:"NavigationContent.logInOrSignUp",defaultMessage:"Log in or sign up"},unauthSignupCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},unauthLoginCta:{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"}}),gs=()=>{var i,n;const{openSettings:t}=ne(),a=(i=G("3376455464"))==null?void 0:i.value,s=(n=G("90459671"))==null?void 0:n.value,o=J();return e.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[e.jsx(V,{icon:Ee,onClick:()=>{$e(o),x.closeActiveSidebar()},children:e.jsx(l,{id:"0FupYP",defaultMessage:"New chat"})}),e.jsx("div",{className:"flex grow items-center justify-center",children:e.jsx(re,{})}),e.jsxs(ze,{contentClassName:"w-[298px]",triggerButton:e.jsx(V,{icon:Ue,children:e.jsx(l,{id:"y4Lkp7",defaultMessage:"Settings and more"})}),children:[e.jsx(R.Item,{onClick:()=>t(),icon:Fe,children:e.jsx(l,{id:"HrRLkZ",defaultMessage:"Settings"})}),a&&s&&e.jsx(R.Item,{icon:Le,onClick:()=>{x.openModal(I.ReportConversation)},children:e.jsx(l,{id:"thread.report.0",defaultMessage:"Report illegal content"})}),e.jsx(R.Separator,{}),e.jsx(Ge,{})]})]})};function oe({children:t,hideNavigation:a=!1,mobileHeaderContent:s,mobileHeaderLeftContent:o,mobileHeaderRightContent:i,mobileHeaderBottomContent:n,sidebar:r,forceOpenDesktopSidebar:c=!1}){const d=Ne(),{isUnauthenticated:m}=T(),[p,u,k]=B(h=>[h.isDesktopNavCollapsed,h.activeStageSidebar,h.activeSidebar]),j=[];let _=null;z.Children.forEach(t,h=>{z.isValidElement(h)&&(h.type===oe.Sidebars?_=h:j.push(h))});const w=!m&&!a&&r!=null,O=!a&&!d&&(w||m);return e.jsxs("div",{className:y("relative flex h-full w-full overflow-hidden transition-colors",k!=="popover-nav"&&"z-0"),children:[w&&e.jsx(q,{children:e.jsx(ss,{isExpanded:c||!p,isPopover:u||!d,children:m?e.jsx(gs,{}):r})}),e.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[O&&e.jsx(q,{children:e.jsx(es,{onClickOpenSidebar:()=>x.togglePopoverNavSidebar(),showNavSidebar:w,leftContent:o,rightContent:i,bottomContent:n,children:s})}),e.jsx("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:j})]}),_]})}function ps({children:t}){return e.jsx(e.Fragment,{children:t})}oe.Sidebars=ps;export{is as A,_s as N,oe as S,Is as a,Ts as b,Ps as c,ns as u};
//# sourceMappingURL=olkgl1p4p1b910lq.js.map
