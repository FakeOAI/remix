const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/e6476rboo2cz5t2v.js","assets/hc9xxm00a3r3byem.js","assets/fga5qe14lr2llx8v.js","assets/root-gxieg4k5.css"])))=>i.map(i=>d[i]);
import{F as R,a4 as k,j as t,c as W,aj as q,ak as G,a2 as Q,r as U,T as g,ax as X,ay as S,E as K,W as p,a as _,R as O,t as E,u as ee,aO as ae,I as te}from"./hc9xxm00a3r3byem.js";import{aX as se,a_ as re,a$ as $,b0 as F,b1 as ne,b2 as z,V as ie,b3 as w,z as l,T as oe,b4 as le}from"./ozzpumen10p6g0yq.js";import{U as de,G as ce}from"./guykwp3ov0cliuel.js";import{c as H}from"./exuoj3g9rvnr47xj.js";import{ag as B,S as P,a2 as me,a0 as I}from"./fga5qe14lr2llx8v.js";import{D as M}from"./i9qil017zb3p1czr.js";import{B as ue}from"./o65h1gsmgo0mfsrq.js";import{b as fe,c as xe,d as Y}from"./nbrfb6b5fqz7ea4t.js";function ge(e,a){var s;se(1,arguments);var r=re((s=a==null?void 0:a.additionalDigits)!==null&&s!==void 0?s:2);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var n=he(e),i;if(n.date){var d=je(n.date,r);i=be(d.restDateString,d.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var x=i.getTime(),c=0,f;if(n.time&&(c=Ne(n.time),isNaN(c)))return new Date(NaN);if(n.timezone){if(f=Ue(n.timezone),isNaN(f))return new Date(NaN)}else{var m=new Date(x+c),v=new Date(0);return v.setFullYear(m.getUTCFullYear(),m.getUTCMonth(),m.getUTCDate()),v.setHours(m.getUTCHours(),m.getUTCMinutes(),m.getUTCSeconds(),m.getUTCMilliseconds()),v}return new Date(x+c+f)}var D={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},ve=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Me=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,pe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function he(e){var a={},s=e.split(D.dateTimeDelimiter),r;if(s.length>2)return a;if(/:/.test(s[0])?r=s[0]:(a.date=s[0],r=s[1],D.timeZoneDelimiter.test(a.date)&&(a.date=e.split(D.timeZoneDelimiter)[0],r=e.substr(a.date.length,e.length))),r){var n=D.timezone.exec(r);n?(a.time=r.replace(n[1],""),a.timezone=n[1]):a.time=r}return a}function je(e,a){var s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+a)+"})|(\\d{2}|[+-]\\d{"+(2+a)+"})$)"),r=e.match(s);if(!r)return{year:NaN,restDateString:""};var n=r[1]?parseInt(r[1]):null,i=r[2]?parseInt(r[2]):null;return{year:i===null?n:i*100,restDateString:e.slice((r[1]||r[2]).length)}}function be(e,a){if(a===null)return new Date(NaN);var s=e.match(ve);if(!s)return new Date(NaN);var r=!!s[4],n=j(s[1]),i=j(s[2])-1,d=j(s[3]),x=j(s[4]),c=j(s[5])-1;if(r)return ke(a,x,c)?De(a,x,c):new Date(NaN);var f=new Date(0);return!ye(a,i,d)||!Re(a,n)?new Date(NaN):(f.setUTCFullYear(a,i,Math.max(n,d)),f)}function j(e){return e?parseInt(e):1}function Ne(e){var a=e.match(Me);if(!a)return NaN;var s=y(a[1]),r=y(a[2]),n=y(a[3]);return Te(s,r,n)?s*$+r*F+n*1e3:NaN}function y(e){return e&&parseFloat(e.replace(",","."))||0}function Ue(e){if(e==="Z")return 0;var a=e.match(pe);if(!a)return 0;var s=a[1]==="+"?-1:1,r=parseInt(a[2]),n=a[3]&&parseInt(a[3])||0;return Se(r,n)?s*(r*$+n*F):NaN}function De(e,a,s){var r=new Date(0);r.setUTCFullYear(e,0,4);var n=r.getUTCDay()||7,i=(a-1)*7+s+1-n;return r.setUTCDate(r.getUTCDate()+i),r}var Ce=[31,null,31,30,31,30,31,31,30,31,30,31];function Z(e){return e%400===0||e%4===0&&e%100!==0}function ye(e,a,s){return a>=0&&a<=11&&s>=1&&s<=(Ce[a]||(Z(e)?29:28))}function Re(e,a){return a>=1&&a<=(Z(e)?366:365)}function ke(e,a,s){return a>=1&&a<=53&&s>=0&&s<=6}function Te(e,a,s){return e===24?a===0&&s===0:s>=0&&s<60&&a>=0&&a<60&&e>=0&&e<25}function Se(e,a){return a>=0&&a<=59}function Ge({currentPage:e,onChangeIndex:a,length:s,showInline:r=!1}){const n=d=>{a(H(e+d,0,s-1))},i=k();return t.jsxs("div",{className:W("flex items-center justify-center rounded-lg text-token-text-secondary",!r&&ne.MessageAction),children:[t.jsx("button",{onClick:()=>n(-1),disabled:e===0,className:"flex h-[30px] w-[30px] items-center justify-center rounded-md hover:bg-token-main-surface-secondary disabled:opacity-50 disabled:hover:bg-transparent","aria-label":i.formatMessage({id:"XwENI/",defaultMessage:"Previous response"}),children:t.jsx(B,{className:"icon-md-heavy"})}),t.jsx("div",{className:"px-0.5 text-sm font-semibold tabular-nums",children:`${e+1}/${s}`}),t.jsx("button",{onClick:()=>n(1),disabled:e===s-1,"aria-label":i.formatMessage({id:"V8RFHE",defaultMessage:"Next response"}),className:"flex h-[30px] w-[30px] items-center justify-center rounded-md hover:bg-token-main-surface-secondary disabled:opacity-50 disabled:hover:bg-transparent",children:t.jsx(P,{className:"icon-md-heavy"})})]})}function we({currentPage:e,onChangeIndex:a,length:s,className:r}){const n=i=>{a(H(e+i,0,s-1))};return s===0?null:t.jsxs(Ie,{className:r,children:[t.jsx(A,{onClick:()=>n(-1),disabled:e===0,children:t.jsx(B,{className:"icon-sm"})}),t.jsx(Ae,{children:`${e+1}/${s}`}),t.jsx(A,{onClick:()=>n(1),disabled:e===s-1,children:t.jsx(P,{className:"icon-sm"})})]})}const Ie=R.div`text-xs inline-flex bg-token-main-surface-secondary h-8 border rounded border-token-border-medium`,A=R.button`text-token-text-secondary disabled:text-token-border-medium w-8 flex items-center justify-center hover:bg-token-main-surface-tertiary`,Ae=R.span`text-token-text-tertiary px-2 flex items-center font-mono tracking-widest`,We=q(()=>G(()=>import("./e6476rboo2cz5t2v.js"),__vite__mapDeps([0,1,2,3])).then(e=>e.DirectorySyncResourceManagedIndication)),b=Q(()=>({confirmModalUserData:null})),C={openModalForUser:e=>{b.setState({confirmModalUserData:e})},closeModal:()=>{b.setState({confirmModalUserData:null})}};function Qe({workspaceId:e,filterInputValue:a}){const[s,r]=U.useState(0),n=ie(),i=n==null?void 0:n.id,d=fe(e),x=xe(e),c=d||x,f=Fe(),m=ze(e),{data:v}=z(e,s*w,a),V=U.useCallback(o=>{C.openModalForUser(o)},[]),J=U.useCallback(()=>{var N;const o=(N=b.getState().confirmModalUserData)==null?void 0:N.id;o!==void 0&&m.mutate({userId:o}),C.closeModal()},[m]),L=U.useCallback((o,N)=>{f.mutate({userId:o,value:N,workspaceId:e})},[f,e]);if(v===void 0)return t.jsx(He,{});const T=v.items,h=Math.ceil((v.total??0)/w);return s>=h&&h!==0&&r(Math.max(h-1,0)),t.jsxs(t.Fragment,{children:[t.jsxs(l.Root,{fixed:!0,size:"normal",children:[t.jsxs(l.Header,{children:[t.jsx(l.HeaderCell,{className:"bg-token-main-surface-primary",children:t.jsx(g,{...u.name})}),t.jsx(l.HeaderCell,{className:"bg-token-main-surface-primary",children:t.jsx(g,{...u.email})}),t.jsx(l.HeaderCell,{className:"w-28 bg-token-main-surface-primary",children:t.jsx("span",{className:d?"pl-3":"",children:t.jsx(g,{...u.role})})}),c&&t.jsx(l.HeaderCell,{className:"w-16 bg-token-main-surface-primary"})]}),t.jsxs(l.Body,{children:[T.map(o=>t.jsx(Oe,{isCurrentUser:i!==void 0&&o.id===i,user:o,currentUserHasAdminRights:c,isCurrentUserOwner:d,onRemoveUserClick:()=>V({id:o.id,name:o.name??"",email:o.email??"",created_time:o.created_time}),onUpdateUserRole:L},o.id)),T.length===0&&t.jsx(l.Row,{children:t.jsx(l.Cell,{children:t.jsx("div",{className:"text-token-text-tertiary",children:t.jsx(g,{...u.noResults})})})})]})]}),t.jsxs("div",{className:"relative mb-8 mt-4 min-h-[20px]",children:[d&&t.jsxs("button",{onClick:()=>de.openModal(ce.InviteUsersToWorkspace),className:"flex items-center gap-2 text-token-text-secondary hover:text-token-text-primary",children:[t.jsx(me,{className:"icon-sm"}),t.jsx(g,{...u.inviteMemberButton})]}),h>1&&t.jsx("div",{className:"absolute start-1/2 top-1/2 flex -translate-x-1/2 -translate-y-1/2 justify-center",children:t.jsx(we,{currentPage:s,onChangeIndex:r,length:h})})]}),t.jsx(_e,{onDeleteConfirm:J})]})}function _e({onDeleteConfirm:e}){const a=k(),s=b(n=>n.confirmModalUserData!==null),r=b(n=>n.confirmModalUserData===null?{}:{userId:n.confirmModalUserData.id,email:n.confirmModalUserData.email,name:n.confirmModalUserData.name,dateAdded:ge(n.confirmModalUserData.created_time)});return t.jsx(X,{isOpen:s,title:a.formatMessage(u.removeMemberModalTitle),onClose:()=>C.closeModal(),type:"success",primaryButton:t.jsx(S.Button,{title:a.formatMessage(u.removeMemberModalConfirm),color:"danger",onClick:e}),secondaryButton:t.jsx(S.Button,{title:a.formatMessage(u.removeMemberModalCancel),color:"secondary",onClick:()=>C.closeModal()}),children:t.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.name??r.email,t.jsx("div",{className:"text-token-text-tertiary",children:t.jsx(g,{...u.dateJoined,values:{dateAdded:a.formatDate(r.dateAdded,{year:"numeric",month:"long",day:"numeric"})}})})]})})}function Oe({user:e,currentUserHasAdminRights:a,isCurrentUserOwner:s,isCurrentUser:r,onRemoveUserClick:n,onUpdateUserRole:i}){const x=Y()[e.role],c=e.name==null||e.name==="",{value:f}=K("3999712942");return t.jsxs(l.Row,{children:[t.jsx(l.Cell,{children:t.jsxs("span",{className:W("flex flex-grow items-center justify-between gap-2",c&&"text-token-text-tertiary"),children:[t.jsx("span",{children:e.name??t.jsx(g,{...u.missingName})}),r&&t.jsx("span",{children:t.jsx(g,{...u.youSpecifier})}),f&&e.is_scim_managed&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"flex-grow"}),t.jsx(We,{})]})]})}),t.jsx(l.Cell,{children:e.email}),t.jsx(l.Cell,{children:s?t.jsx(Ee,{currentRole:e.role,onUpdateUserRole:m=>{i(e.id,m)},disabled:r}):x}),a&&t.jsx(l.Cell,{children:t.jsx($e,{userId:e.id,onRemoveUserClick:n,disabled:r,isScimManaged:e.is_scim_managed})})]})}function Ee({currentRole:e,onUpdateUserRole:a,disabled:s=!1}){const r=Y();return t.jsx(ue,{disabled:s,defaultValue:e,onValueChange:n=>{a(n)},options:[{label:r[p.STANDARD],value:p.STANDARD},{label:r[p.ADMIN],value:p.ADMIN},{label:r[p.OWNER],value:p.OWNER}]})}function $e({disabled:e,onRemoveUserClick:a,userId:s,isScimManaged:r}){const n=k();return e?null:r?t.jsx(M.Root,{children:t.jsx(M.Trigger,{disabled:!0,children:t.jsx(oe,{sideOffset:0,label:n.formatMessage(le.managedViaSCIMTooltip),className:"flex",side:"right",children:t.jsx(I,{className:"icon-sm"})})})}):t.jsxs(M.Root,{children:[t.jsx(M.Trigger,{className:"-my-2",children:t.jsx(I,{className:"icon-sm"})}),t.jsx(M.Portal,{children:t.jsx(M.Content,{children:t.jsx(M.Item,{onClick:()=>{a(s)},children:t.jsx(g,{...u.removeMemberModalTitle})})})})]})}function Xe(e){const{data:a}=z(e);return(a==null?void 0:a.total)??0}function Fe(){return _({mutationFn:({userId:e,workspaceId:a,value:s})=>O.updateWorkspaceUserRole(a,e,s).catch(r=>{E.danger(`Unable to update user (${e}) role: ${r.message}`)})})}function ze(e){const a=ee();return _({mutationFn:({userId:s})=>O.removeWorkspaceUser(e,s).catch(r=>{E.danger(`Unable to remove user (${s}) from workspace: ${r.message}`)}),onSuccess:()=>{a.invalidateQueries({queryKey:["workspace",e]})}})}function He(){return t.jsx("div",{className:"flex w-full items-center justify-center",children:t.jsx(ae,{})})}const u=te({name:{id:"UserManager.name",defaultMessage:"Name"},email:{id:"UserManager.email",defaultMessage:"Email"},role:{id:"UserManager.role",defaultMessage:"Role"},missingName:{id:"UserManager.missingName",defaultMessage:"No name provided"},youSpecifier:{id:"UserManager.youSpecifier",defaultMessage:"(You)"},removeUser:{id:"UserManager.removeUser",defaultMessage:"Remove user from workspace"},removeMemberModalTitle:{id:"UserManager.removeMemberModalTitle",defaultMessage:"Remove member"},removeMemberModalConfirm:{id:"UserManager.removeMemberModalConfirm",defaultMessage:"Delete"},removeMemberModalCancel:{id:"UserManager.removeMemberModalCancel",defaultMessage:"Cancel"},dateJoined:{id:"UserManager.dateJoined",defaultMessage:"Joined workspace on {dateAdded}"},inviteMemberButton:{id:"UserManager.inviteMemberButton",defaultMessage:"Invite member"},noResults:{id:"UserManager.noResults",defaultMessage:"No results"}});export{He as A,Ge as M,we as P,Qe as U,Ee as W,ge as p,Xe as u};
//# sourceMappingURL=caxkuyopolf76hse.js.map
