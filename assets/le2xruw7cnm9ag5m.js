import{j as e,a4 as y,r as c,X as w,Y as M,ax as N,T as u,c as g,G as C,t as b,I as E,p as F}from"./hc9xxm00a3r3byem.js";import{V as S,T as G,n as P}from"./ozzpumen10p6g0yq.js";import{b as U,G as O,a as _}from"./lyr64vj216kc7moh.js";import{b as H,G as j,U as I}from"./guykwp3ov0cliuel.js";import{am as L}from"./fga5qe14lr2llx8v.js";function q(t,i){const a=t??i??0;return g(t!=null&&t!=i&&"opacity-50 dark:opacity-60",a>4?"text-brand-purple":a>3?"text-green-500":a>2?"text-yellow-500":a>1?"text-orange-500":"text-red-500")}function A(t){switch(t){case 1:return s.hoverRating1;case 2:return s.hoverRating2;case 3:return s.hoverRating3;case 4:return s.hoverRating4;case 5:return s.hoverRating5}}function B(t){return F({queryFn:async()=>_.getUserReview(t),queryKey:["gizmo","review",{gizmoId:t}],enabled:t!=null})}const V=({rating:t,onRating:i,className:a})=>{const[l,r]=c.useState(),x=y();return e.jsx("div",{className:g("flex flex-row",a),children:[1,2,3,4,5].map(n=>{const m=e.jsx(L,{className:g("icon-2xl cursor-pointer",(l??t??0)>=n?q(l,t):"text-token-main-surface-tertiary")}),o=A(l??0),v=o&&x.formatMessage(o);return e.jsx("div",{onClick:()=>{i(n)},onMouseEnter:()=>{r(n)},onMouseLeave:()=>{r(void 0)},className:"p-1",children:o?e.jsx(G,{label:v,side:"top",sideOffset:4,children:m}):m},n)})})},J=({gizmo:t})=>H(j.GPTReview)?e.jsx(Q,{gizmo:t}):null,Q=({gizmo:t})=>{var R,p;const i=S(),a=()=>I.closeModal(j.GPTReview),l=y(),[r,x]=c.useState(""),[n,m]=c.useState(!1),o=B(t.gizmo.id),v=U(t.gizmo.id),[d,h]=c.useState(),z=d===((R=o.data)==null?void 0:R.rating);c.useEffect(()=>{o.data!=null&&d==null&&h(o.data.rating)},[o.data,d]),c.useEffect(()=>{w.logEvent(M.showRatingModal,{gizmo_id:t.gizmo.id})},[t.gizmo.id]);const T=o.data!=null,k=!((p=t.gizmo.tags)!=null&&p.includes(O.FirstParty))&&t.gizmo.author.will_receive_support_emails;return e.jsx(N,{type:"success",title:e.jsxs("div",{children:[e.jsx(u,{...s.title}),e.jsxs("div",{className:"align-end mt-2 flex text-sm font-normal",children:[T?e.jsx(u,{...s.subtitleChange}):e.jsx(u,{...s.subtitle}),e.jsx(G,{label:l.formatMessage(s.subtitleTooltip),className:"ml-1 flex cursor-pointer items-center pl-1",sideOffset:0,children:e.jsx("div",{className:"icon-xs flex items-center justify-center rounded-full border border-token-text-tertiary text-[8px] font-bold text-token-text-tertiary",children:"i"})})]})]}),isOpen:!0,onClose:a,size:"custom",showCloseButton:!0,className:"max-w-xl overflow-y-auto",hideSeparator:!0,children:e.jsxs("div",{className:"flex flex-grow flex-col space-y-8",children:[e.jsx(V,{rating:d,onRating:h,className:"mx-auto flex flex-row items-center"}),k&&e.jsxs("div",{children:[e.jsx(P,{className:"mb-1 w-full resize-none overflow-y-auto rounded-md bg-transparent focus:border-gray-200 focus:ring-gray-200 dark:focus:border-white dark:focus:ring-white",placeholder:l.formatMessage(s.messagePlaceholder),value:r,rows:1,onChange:f=>x(f.target.value)}),e.jsxs("div",{className:g("flex flex-row items-center space-x-2 self-start",r.length>0?"text-token-text-primary":"text-token-text-tertiary"),children:[e.jsx("input",{type:"checkbox",className:"rounded",checked:n,onChange:f=>m(f.target.checked)}),i&&e.jsx("span",{className:"text-sm",children:e.jsx(u,{...s.includeFrom,values:{email:e.jsx("strong",{children:i.email})}})})]})]}),e.jsx(C,{color:"primary",disabled:z,onClick:async()=>{if(d==null){b.warning("Please select a rating");return}w.logEvent(M.submitRatingModal,{gizmo_id:t.gizmo.id,rating:d}),await v.mutateAsync({rating:d,message:r.length>0?r:void 0,includeFrom:r.length>0?n:void 0}),b.success(l.formatMessage(s.successToast),{duration:3}),a()},children:e.jsx(u,{...s.submit})})]})})},s=E({title:{id:"GizmoReviewModal.title",defaultMessage:"Leave Feedback"},subtitle:{id:"GizmoReviewModal.subtitle",defaultMessage:"How would you rate this GPT?"},subtitleChange:{id:"GizmoReviewModal.subtitleChange",defaultMessage:"Would you like to change your rating?"},subtitleTooltip:{id:"GizmoReviewModal.subtitleTooltip",defaultMessage:"Stars will be public and anonymous"},messagePlaceholder:{id:"GizmoReviewModal.messagePlaceholder",defaultMessage:"Add an optional private email to the creator"},submit:{id:"GizmoReviewModal.submit",defaultMessage:"Submit"},successToast:{id:"GizmoReviewModal.successToast",defaultMessage:"Review sent"},includeFrom:{id:"GizmoReviewModal.includeFrom",defaultMessage:"Include my email address {email}"},hoverRating1:{id:"GizmoReviewModal.hoverRating1",defaultMessage:"Bad"},hoverRating2:{id:"GizmoReviewModal.hoverRating2",defaultMessage:"Okay"},hoverRating3:{id:"GizmoReviewModal.hoverRating3",defaultMessage:"Good"},hoverRating4:{id:"GizmoReviewModal.hoverRating4",defaultMessage:"Great!"},hoverRating5:{id:"GizmoReviewModal.hoverRating5",defaultMessage:"Excellent!"}});export{J as G,V as a};
//# sourceMappingURL=le2xruw7cnm9ag5m.js.map
