import{h as S,r as s,t as d,R as E,b9 as o,ba as i,j as O}from"./hc9xxm00a3r3byem.js";import"./fga5qe14lr2llx8v.js";function b(){const t=S(),l=s.useRef(!1),[f,p]=s.useState(""),{code:a,error:u,error_description:n,state:c}=Object.fromEntries(new URLSearchParams(f.substring(1)).entries()),e=t.query.pluginId;return s.useEffect(()=>{p(window.location.hash)},[]),s.useEffect(()=>{if(l.current)return;e&&a&&c&&(l.current=!0);async function R(){const C=`https://chatgpt.com/ccc/${e}/oauth/callback`;if(!(!e||!a||!c))try{const r=await E.connectorOauthCallback(e,a,C,c);if(r.success){const h=new URL(o(i.OAUTH_SUCCESS,r.redirect_path));h.searchParams.set("oauth_success","true"),t.push(h.toString())}else t.push(o(i.CUSTOM_ERROR,r.redirect_path,r.error??r.message))}catch{t.push(o(i.CUSTOM_ERROR))}}R()},[e,a,c,t]),s.useEffect(()=>{u&&d.danger(`${u}${n?`: ${n}`:""}`)},[u,n]),null}function g(){return O.jsx(b,{})}export{g as default};
//# sourceMappingURL=ben6i2oq1ktgj1cm.js.map
