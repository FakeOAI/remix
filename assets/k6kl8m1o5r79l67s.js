import{j as e,d3 as F,d4 as w,F as v,r as j,a4 as k,D as E,ax as T,d5 as N,T as M,G,t as I,cp as b,E as z}from"./hc9xxm00a3r3byem.js";import{p as H}from"./lyr64vj216kc7moh.js";import{d as L}from"./iyldmwu8ywhos7ff.js";import{b as A,G as C,U as _}from"./guykwp3ov0cliuel.js";import{aU as O,I as S,n as U,a5 as B,a6 as D}from"./ozzpumen10p6g0yq.js";import{ag as Y}from"./fga5qe14lr2llx8v.js";function P(t){const a=H(t.gizmo.display.name);return a==null?[]:[{title:a},{property:"og:site_name",content:"ChatGPT"},{property:"og:type",content:"website"},{property:"og:title",content:a},...t.gizmo.display.description?[{name:"description",content:t.gizmo.display.description},{property:"og:description",content:t.gizmo.display.description}]:[],...t.gizmo.display.profile_picture_url?[{property:"og:image",content:t.gizmo.display.profile_picture_url},{property:"og:image:width",content:"512"},{property:"og:image:height",content:"512"}]:[]]}function re({gizmo:t}){return e.jsx(F,{children:e.jsx(w,{metadata:P(t)})})}const Q=v.div`divide-y overflow-hidden rounded-md border border-token-border-medium`,q=v.button`w-full border-token-border-medium p-2 text-left text-sm hover:bg-token-main-surface-secondary`,J=v.div`text-sm font-semibold`,K=v.div`text-sm text-token-text-secondary`;function g({header:t,subHeader:a}){return t==null&&a==null?null:e.jsxs("div",{className:"mb-4",children:[t!=null&&e.jsx(J,{children:t}),a!=null&&e.jsx(K,{children:a})]})}function V({reasons:t,onSelectReason:a}){return e.jsx(Q,{children:t.map(o=>e.jsx(q,{onClick:()=>{a(o)},children:o.cta},o.id))})}function W({reason:t,submitReport:a}){var h;const[o,l]=j.useState(""),[r,d]=j.useState(""),[c,m]=j.useState(""),i=(h=t.additional_fields)==null?void 0:h.map(n=>n.id),u=i==null?void 0:i.includes(N.UserName),s=i==null?void 0:i.includes(N.UserEmail),p=u||s;return e.jsxs("div",{className:"flex flex-col gap-4",children:[p&&e.jsxs("div",{className:"flex flex-col gap-4 text-sm",children:[u&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(M,{id:"report.loggedOut.name",defaultMessage:"Your name"}),e.jsx(S,{name:"name",type:"text",value:r,onChange:n=>d(n.target.value)})]}),s&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(M,{id:"report.loggedOut.email",defaultMessage:"Your email address"}),e.jsx(S,{name:"email",type:"email",value:c,onChange:n=>m(n.target.value)})]})]}),e.jsx(U,{value:o,onChange:n=>l(n.target.value),placeholder:t.details_placeholder??void 0,autoFocus:!0,className:"!bg-token-main-surface-primary"}),t.subtext!=null&&e.jsx("div",{className:"text-sm text-token-text-secondary",children:t.subtext}),e.jsx("div",{className:"flex justify-end",children:e.jsx(G,{onClick:()=>{let n;p&&(n={},u&&(n.user_name=r),s&&(n.user_email=c)),a.mutateAsync({reason:{id:t.id,details:o},additional_fields_values:n})},disabled:a.isPending,children:e.jsx(M,{id:"report.submitReport",defaultMessage:"Submit"})})})]})}function X({reason:t}){return e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"mb-2",children:t.link_explanation}),t.link_attachment!=null&&e.jsx("div",{children:e.jsx("a",{href:t.link_attachment,target:"_blank",rel:"noreferrer",className:"break-words underline",children:t.link_attachment})})]})}function Z({reasons:t,submitReport:a,title:o,onClose:l,header:r,subHeader:d}){const[c,m]=j.useState([]),i=k();let u=t,s;for(const f of c)s=u.find(y=>y.id===f),u=(s==null?void 0:s.sub_reasons)??[];const p=s!=null&&e.jsx("div",{className:"mb-2 flex gap-1 text-sm",children:e.jsxs("button",{onClick:()=>{m(f=>f.slice(0,-1))},className:"flex items-center gap-2 p-1",children:[e.jsx(Y,{className:"icon-sm"}),e.jsx("div",{children:s.cta})]})}),h=(s==null?void 0:s.subtext)!=null&&e.jsx("div",{className:"text-sm text-token-text-secondary",children:s.subtext}),n=i.formatMessage({id:"report.submittedModal.header",defaultMessage:"Report submitted"}),R=i.formatMessage({id:"report.submittedModal.subHeader",defaultMessage:"You report has been submitted. Thank you for letting us know about this issue."});let x;return a.isSuccess?x=e.jsx(g,{header:n,subHeader:R}):(s==null?void 0:s.details_placeholder)!=null?x=e.jsxs(e.Fragment,{children:[e.jsx(g,{header:r,subHeader:d}),p,e.jsx(W,{reason:s,submitReport:a})]}):(s==null?void 0:s.link_attachment)!=null?x=e.jsxs(e.Fragment,{children:[e.jsx(g,{header:r,subHeader:d}),p,e.jsx(X,{reason:s}),h]}):u.length>0?x=e.jsxs(e.Fragment,{children:[e.jsx(g,{header:r,subHeader:d}),p,u.length>0&&e.jsx(V,{reasons:u,onSelectReason:async f=>{O(f)?a.mutateAsync({reason:{id:f.id}}):m(y=>[...y,f.id])}}),h]}):(s==null?void 0:s.subtext)!=null?x=e.jsxs(e.Fragment,{children:[e.jsx(g,{header:r,subHeader:d}),p,e.jsx("div",{className:"text-sm",children:s==null?void 0:s.subtext})]}):(E.addError("Reporting: arrived at empty leaf reason",s),x=e.jsx(g,{header:n,subHeader:R})),e.jsx(T,{title:o,onClose:l,isOpen:!0,showCloseButton:!0,type:"success",children:x})}function le({serverThreadId:t,clientThreadId:a,isStaticSharedThread:o}){var i;const l=A(C.ReportConversation),r=((i=z("3376455464"))==null?void 0:i.value)||o,d=L(a),c=t??d,m=k();return j.useEffect(()=>{c==null&&l&&r&&(I.danger(m.formatMessage({id:"gizmo.report.conversationModal.emptyConversationError",defaultMessage:"Empty conversations cannot be reported"})),_.closeModal(C.ReportConversation))},[c,l,r,m]),!l||!r||c==null?null:e.jsx($,{serverThreadId:c,onClose:()=>_.closeModal(C.ReportConversation),isStaticSharedThread:o})}function $({serverThreadId:t,onClose:a,isStaticSharedThread:o}){const{data:l}=B(o?b.ShareableConversation:b.Conversation),r=k(),d=D(r,t,o?b.ShareableConversation:b.Conversation);return l==null||t==null?null:e.jsx(Z,{reasons:l.reasons,submitReport:d,title:r.formatMessage({id:"gizmo.report.conversationModal.title",defaultMessage:"Report a conversation"}),onClose:a,header:l.header,subHeader:l.header_explanation})}export{re as G,$ as R,le as T,g as a,Q as b,q as c,Z as d,P as g};
//# sourceMappingURL=k6kl8m1o5r79l67s.js.map
