import{r as x,j as e,G as C,c as D,T as r,a4 as G,ax as Se,a3 as Pe,R as I,I as J,e3 as j,bc as b,u as q,aO as ee,h as Ne,cR as Ge,d9 as Ae,d3 as _e,v as Re,E as De,a as ae,e4 as Q,da as Ee,db as Z,dc as ge,t as ie}from"./hc9xxm00a3r3byem.js";import{a as We,b as Ie,A as Le}from"./lmryd6g8vt3gp93f.js";import{z as d,I as ve,aI as ze,T as Me,o as se,M as Fe}from"./ozzpumen10p6g0yq.js";import{S as w}from"./o65h1gsmgo0mfsrq.js";import{a1 as te,b7 as Be,e as xe,b8 as He,as as qe,a2 as he,D as fe,E as Te,al as Ue,a0 as Ke,a_ as Ye,aq as Ve}from"./fga5qe14lr2llx8v.js";import{B as je,S as Qe}from"./lwskf2c58o0875kf.js";import{g as we}from"./cm4yp0pj7foedy4v.js";import{e as y,G as Je,h as $e,C as ye}from"./lyr64vj216kc7moh.js";import{P as Xe}from"./caxkuyopolf76hse.js";import{D as O}from"./i9qil017zb3p1czr.js";import{G as Ze}from"./g8nlf109ai64grtj.js";import{S as es,c as ss}from"./eysqd59hfut746t3.js";import{A as ts}from"./j6ctad4z1l2dr1m8.js";import{R as as}from"./digczro7gxkpswto.js";import{a as is,b as rs,c as ke,d as ns,e as os,f as ls,A as cs}from"./bhuxwenpl900hvjj.js";import{u as ds,b as ps}from"./fdepw20m3sce5u4k.js";import"./lxui8l23v2tzixf9.js";import"./facz9srd4e5z6fv5.js";import"./olkgl1p4p1b910lq.js";import"./guykwp3ov0cliuel.js";import"./nug034oo81goid6a.js";import"./fi9p3eeu24b9vfd1.js";import"./cqwvbnjobeewuxnd.js";import"./iyldmwu8ywhos7ff.js";import"./ovjwzbtdrcsgos3a.js";import"./eq9w2mijkl5gcncq.js";import"./k0a5tmklve7lhdwt.js";import"./io7lyk89lbveno1g.js";import"./kwn3fefba30wvgsb.js";import"./hzcrrlyorrog0p41.js";import"./jt3dvx97wm610wtl.js";import"./exuoj3g9rvnr47xj.js";import"./c6gg5hubzrgc52sj.js";import"./nbrfb6b5fqz7ea4t.js";import"./l02mntsvyz06f5g3.js";import"./dkb2noz4qv6snkbi.js";import"./do5dtfxps7uqtxpp.js";import"./fr59f31fg6jwe2u4.js";import"./cj3cq0j3ew1e2kbz.js";import"./b2rny0kod41myp87.js";import"./kptbw01pxwd1ocyc.js";import"./dsvckya76mm06sjp.js";import"./k9btfb42xrk56ut9.js";import"./hmu1ot8fm4uszmig.js";import"./jivegfkq3c3y773c.js";import"./c1hyxnl6kpsjtl7u.js";import"./n1uzh05qecnh8ko6.js";import"./n3ty0r2frjejpyv8.js";import"./fsddy3bxlesj6ecw.js";import"./lk8bqzua7fjya6ep.js";import"./6tjupkkyx0z5k2fa.js";import"./j8vh1bvwq2thm6el.js";import"./hdncrjsjzzuve3ru.js";import"./lqlcwrsq68jkt57a.js";import"./j6ap2wbjx1muhlqy.js";import"./k6kl8m1o5r79l67s.js";import"./oz2p01rklj1p4n8d.js";import"./btg2u9gpl3szhq0h.js";import"./gi4dwz24es0xqvpd.js";import"./le2xruw7cnm9ag5m.js";import"./c4ub15ug1kevxj8w.js";import"./cpyn50o38nwfhwhi.js";import"./btkpb7dih1nft29s.js";import"./flu5midy8l1pp37c.js";import"./m0hxapdm52wypf6x.js";import"./os9q9b6j79v07zj6.js";import"./mafougdlzkh8qo68.js";import"./mnfbtuy5shn7j7rh.js";import"./h3k8refrd2si6yl9.js";import"./eozgrwgbmz9gatod.js";import"./isu9bse2a2oa6tex.js";import"./gi3tzluaomiird95.js";import"./bdei09nh6a4fidtg.js";import"./h603pj0ovegt4tgz.js";import"./gd8pozsaf0jikwjx.js";import"./j9ybtsexrrxsl9vq.js";import"./cu7i7jyqvstu6net.js";import"./miwz08wj07jf3elq.js";import"./dg9zyoagslpqr7lk.js";import"./d86ggbbqvfoy1ksr.js";import"./ss6ebzpmrb7u9y0k.js";import"./mpt09otgmtef4exw.js";import"./d6p9qwxebyx8lv0e.js";import"./iej0cupg2dqkmejt.js";function ms({value:s,title:t,valueClassName:a,onChange:i,emptyMessage:n}){const[o,l]=x.useState(!1),[p,f]=x.useState(""),m=x.useRef(null),h=()=>{if(p!==""){const u=p.trim();i([...s,u]),l(!1),f("")}};return e.jsxs(d.Root,{className:"w-auto",children:[e.jsxs(d.Header,{children:[e.jsx(d.HeaderCell,{children:t}),e.jsx(d.HeaderCell,{})]}),e.jsxs(d.Body,{children:[s.map((u,k)=>e.jsxs(d.Row,{children:[e.jsx(d.Cell,{className:a,children:u}),e.jsx(d.Cell,{textAlign:"right",children:e.jsx(C,{type:"button",onClick:()=>{i(s.filter((v,P)=>P!==k))},children:e.jsx(te,{className:"icon-sm"})})})]},k)),n&&s.length===0?e.jsx(d.Row,{children:e.jsx(d.Cell,{colSpan:2,className:"text-center text-sm italic",children:n})}):null,e.jsxs(d.Row,{children:[e.jsxs("div",{className:D("mt-2 flex flex-row gap-2 p-1",!o&&"hidden"),children:[e.jsx(ve,{className:"w-80",name:"newDomain",value:p,onChange:u=>{f(u.target.value)},ref:m,onPressEnter:h,placeholder:"example.com"}),e.jsx(C,{className:"grow-0",onClick:h,children:e.jsx(r,{id:"svRVol",defaultMessage:"Add"})})]}),!o&&e.jsxs(C,{type:"button",onClick:()=>{l(!0),setTimeout(()=>{var u;(u=m.current)==null||u.focus()},0)},className:"mt-2",children:[e.jsx(Be,{className:"icon-sm inline-block"}),e.jsx(r,{id:"J5y3+M",defaultMessage:"Add new domain"})]})]})]})]})}function us({isOpen:s,onClose:t,account:a,gpt:i}){const n=G(),[o,l]=x.useState(!1),[p,f]=x.useState(""),[m,h]=x.useState(!0);return e.jsxs(Se,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Pe,type:"success",title:n.formatMessage(B.deleteModalTitle),children:[e.jsx("p",{className:"mb-4 text-token-text-primary",children:e.jsx(r,{...B.deleteModalPrompt,values:{gptName:i.gizmo.display.name}})}),!m&&e.jsx("p",{className:"text-red-500",children:e.jsx(r,{...B.invalidEmail})}),e.jsx(ve,{className:D("px-3 py-2",m?"":"border-red-500"),name:"email",type:"email",value:p,placeholder:"Email",onChange:u=>{f(u.target.value)}}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(C,{color:"secondary",onClick:()=>{t(!1),l(!1),h(!0)},loading:o,children:e.jsx(r,{...B.cancelButtonText})}),e.jsx(C,{color:"primary",loading:o,onClick:()=>{l(!0),h(!0),p==""||!ze.test(p)?(h(!1),l(!1)):I.updateWorkspaceGPTOwner(a.id,i.gizmo.id,p).then(()=>{t(!0),l(!1),h(!0)},()=>{h(!1),l(!1)})},children:e.jsx(r,{...B.deleteButtonText})})]})]})}const B=J({deleteModalTitle:{id:"changeOwnerModal.changeModalTitle",defaultMessage:"Change Owner"},deleteModalPrompt:{id:"changeOwnerModal.changeModalPrompt",defaultMessage:"New owner of {gptName}"},cancelButtonText:{id:"changeOwnerModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"changeOwnerModal.changeOwnerButtonText",defaultMessage:"Change owner"},invalidEmail:{id:"changeOwnerModal.invalidEmail",defaultMessage:"Email is invalid or does not belong to a member in this workspace"}});function gs({isOpen:s,onClose:t,account:a,gpt:i}){const n=G(),[o,l]=x.useState(!1);return e.jsxs(Se,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:Pe,type:"success",title:n.formatMessage(Y.deleteModalTitle),children:[e.jsx("p",{className:"mb-4 text-token-text-primary",children:e.jsx(r,{...Y.deleteModalPrompt,values:{gptName:i.gizmo.display.name}})}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx(C,{color:"secondary",onClick:()=>{t(!1)},loading:o,children:e.jsx(r,{...Y.cancelButtonText})}),e.jsx(C,{color:"danger",loading:o,onClick:()=>{l(!0),I.deleteWorkspaceGPT(a.id,i.gizmo.id).finally(()=>{t(!0),l(!1)})},children:e.jsx(r,{...Y.deleteButtonText})})]})]})}const Y=J({deleteModalTitle:{id:"deleteGPTModal.accessModalTitle",defaultMessage:"Delete GPT"},deleteModalPrompt:{id:"deleteGPTModal.accessModalPrompt",defaultMessage:"Are you sure you would like to delete {gptName}? This action can not be undone."},cancelButtonText:{id:"deleteGPTModal.cancelButtonText",defaultMessage:"Cancel"},deleteButtonText:{id:"deleteGPTModal.deleteButtonText",defaultMessage:"Delete"}}),H=10;function xs({account:s,gpt:t,thirdParty:a=!1}){var L,A;const i=q(),[n,o]=x.useState(!1),[l,p]=x.useState(!1),[f,m]=x.useState(!1),[h,u]=x.useState(!1),k=Ne(),v=new Date(a?t.gizmo.workspace_approval_date??"":t.gizmo.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"}),P=t.tools.filter(S=>S.type===b.JIT_PLUGIN).map(S=>S.type===b.JIT_PLUGIN?S.metadata.domain:"");let N="";return P.length===0?N="":P.length===1?N=P[0]:N=`${P.length} domains`,e.jsxs(e.Fragment,{children:[e.jsxs(d.Row,{children:[e.jsx(d.Cell,{className:"py-4 pr-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:e.jsx(Ze,{src:t.gizmo.display.profile_picture_url,isFirstParty:((L=t.gizmo.tags)==null?void 0:L.includes(Je.FirstParty))??!1,alt:t.gizmo.display.name,className:"h-10 w-10"})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-semibold text-token-text-primary",children:t.gizmo.display.name})})]})}),e.jsx(d.Cell,{className:"p-4 text-sm text-token-text-secondary",children:t.gizmo.author.display_name}),e.jsx(d.Cell,{className:"p-4 text-sm text-token-text-secondary",children:N}),!a&&e.jsx(d.Cell,{className:"p-4 text-sm text-token-text-secondary",children:e.jsx(ks,{gizmo:t,account:s})}),!a&&e.jsx(d.Cell,{className:"p-4 text-sm text-token-text-secondary",children:((A=t.gizmo.vanity_metrics)==null?void 0:A.num_conversations_str)??0}),e.jsx(d.Cell,{className:"p-4 text-sm text-token-text-secondary",children:v}),e.jsx(d.Cell,{children:e.jsxs(O.Root,{children:[e.jsx(O.Trigger,{className:"-my-2",children:e.jsx(Ke,{className:"icon-sm"})}),e.jsx(O.Portal,{children:a?e.jsx(O.Content,{children:e.jsx(O.Item,{onClick:()=>{u(!0)},color:"danger",icon:te,children:e.jsx(r,{...c.removeFromWorkspace})})}):e.jsxs(O.Content,{children:[e.jsx(O.Item,{onClick:()=>{o(t)},icon:Ye,children:e.jsx(r,{...c.changeAccess})}),e.jsx(O.Item,{onClick:()=>{m(!0)},icon:Ve,children:e.jsx(r,{...c.changeOwner})}),e.jsx(O.Item,{onClick:()=>{p(!0)},icon:te,color:"danger",children:e.jsx(r,{...c.deleteGPT})})]})})]})})]}),n&&e.jsx(es,{publishedGizmo:n,gizmo:ss(n),promoteGizmo:async()=>{},onClose:()=>{o(!1)},showActionsModal:()=>{},appealGizmo:async()=>{k.push($e(n.gizmo.id))},setAppealState:()=>{},shareOnly:!0,updateGizmo:()=>{},workspaceOwner:!0}),e.jsx(us,{isOpen:f,gpt:t,account:s,onClose:S=>{m(!1),S&&i.invalidateQueries({queryKey:["workspace",s.id,j.WORKSPACE]})}}),e.jsx(gs,{isOpen:l,gpt:t,account:s,onClose:S=>{p(!1),S&&i.invalidateQueries({queryKey:["workspace",s.id,j.WORKSPACE]})}}),e.jsx(as,{isOpen:h,gpt:t,account:s,onClose:S=>{u(!1),S&&i.invalidateQueries({queryKey:["workspace",s.id,j.THIRD_PARTY]})}})]})}function hs(s,t,a){return s.sort((i,n)=>{var p,f;let o,l;if(t==="created_at")o=new Date(i.gizmo.created_at).getTime(),l=new Date(n.gizmo.created_at).getTime();else if(t==="workspace_approval_date")o=new Date(i.gizmo.workspace_approval_date??"").getTime(),l=new Date(n.gizmo.workspace_approval_date??"").getTime();else if(t==="vanity_metrics.num_conversations_str")o=((p=i.gizmo.vanity_metrics)==null?void 0:p.num_conversations)??0,l=((f=n.gizmo.vanity_metrics)==null?void 0:f.num_conversations)??0;else throw new Error(`Invalid field: ${t}`);if(a==="asc")return o-l;if(a==="desc")return l-o;throw new Error(`Invalid direction: ${a}`)})}function fs(s){switch(s){case y.User:case y.Group:return y.Private;case y.WorkspaceLink:return y.Workspace;default:return s}}function Ts(s,t){return s.filter(a=>{const i=a.tools.some(l=>l.type===b.MEMORY||l.type===b.INTENT||l.type===b.CONTACTS?!1:t.tools[l.type]),n=fs(a.gizmo.share_recipient),o=t.share_recipient[n];return i||o})}function js(s,t){const a=t.toLowerCase();return s.filter(i=>{const n=i.gizmo.author.display_name&&i.gizmo.author.display_name.toLowerCase(),o=i.gizmo.display.name.toLowerCase();return n&&n.includes(a)||o.includes(a)})}function ws({account:s,showThirdParty:t}){const[a,i]=x.useState(j.WORKSPACE),{data:n,fetchNextPage:o,hasNextPage:l,isError:p,isFetchingNextPage:f}=ys(s.id,a),m=G(),[h,u]=x.useState(!1),k=(n==null?void 0:n.pages.flatMap(T=>T.items))??[];x.useEffect(()=>{!p&&!f&&l&&o()},[f,l,p,o]);const v=l,P=x.useRef(null),[N,L]=x.useState(""),[A,S]=x.useState(!1),[_,re]=x.useState(a==j.WORKSPACE?"created_at":"workspace_approval_date"),[R,E]=x.useState("desc"),ne={tools:{[b.BROWSER]:!1,[b.PYTHON]:!1,[b.JIT_PLUGIN]:!1,[b.RETRIEVAL]:!1,[b.DALLE]:!1},share_recipient:{[y.Private]:!1,[y.Workspace]:!1,[y.Link]:!1,[y.Marketplace]:!1}},[W,oe]=x.useState(ne),[$,U]=x.useState(0),Oe=q();x.useEffect(()=>{A&&P.current&&P.current.focus()},[A]);function le(T,z){const{id:F,checked:Ce}=T.currentTarget,ue={...W};ue[z][F]=Ce,oe(ue),U(0)}let ce=0,de=0;const X=Object.values(W.tools).filter(Boolean).length+Object.values(W.share_recipient).filter(Boolean).length;let M=[],pe=0;const K=n===void 0,me=!K&&k.length>0;return K||(pe=Math.min(k.length,H),de=Math.ceil(k.length/H),v?M=k:M=hs(k,_,R),N!==""&&(M=js(M,N)),X>0&&(M=Ts(M,W)),ce=Math.ceil(M.length/H),M=M.slice($*H,($+1)*H)),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between border-b border-token-border-light",children:[e.jsxs("div",{className:"flex space-x-4 pt-2",children:[e.jsx("a",{className:D("text-l pb-4 font-semibold",a===j.WORKSPACE?"border-b border-token-text-secondary text-token-text-primary":"cursor-pointer text-token-text-tertiary"),onClick:()=>{i(j.WORKSPACE)},children:e.jsx(r,{...c.workspaceTab})}),t&&e.jsx("a",{className:D("text-l pb-4 font-semibold",a===j.THIRD_PARTY?"border-b border-token-text-secondary text-token-text-primary":"cursor-pointer text-token-text-tertiary"),onClick:()=>{i(j.THIRD_PARTY)},children:e.jsx(r,{...c.thirdPartyTab})})]}),!K&&e.jsxs("div",{className:"flex items-center space-x-4 pb-2",children:[X>0&&e.jsxs("div",{className:"mx-0 flex items-center space-x-1",onClick:()=>{oe(ne)},children:[e.jsx("span",{children:X}),e.jsx(xe,{className:"cursor-pointer"})]}),e.jsx(Me,{theme:"white",label:e.jsxs("div",{className:"w-64 space-y-4 p-2 font-normal text-token-text-primary",children:[e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(r,{...c.capabilitiesTitle})}),Object.entries(W.tools).map(([T,z])=>e.jsx(se,{id:T,checked:z,label:we(s,T),onChange:F=>{le(F,"tools")}},T))]}),e.jsxs("div",{className:"flex-col space-y-2",children:[e.jsx("span",{className:"flex font-semibold",children:e.jsx(r,{...c.whoHasAccessTitle})}),Object.entries(W.share_recipient).map(([T,z])=>e.jsx(se,{id:T,checked:z,label:we(s,T),onChange:F=>{le(F,"share_recipient")}},T))]})]}),className:"bg-token-main-surface-primary",side:"bottom",withArrow:!1,align:"end",sideOffset:4,wide:!0,interactive:!0,children:e.jsx(He,{className:"cursor-pointer"})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>{S(!0)},children:e.jsx(qe,{className:"icon-sm"})}),e.jsx("input",{type:"text",ref:P,placeholder:m.formatMessage(c.filterByNameOrBuilderPlaceholder),className:D("border-none bg-token-main-surface-primary px-0 transition-width duration-300 ease-in-out focus:ring-0",A?"w-64":"w-0"),value:N,onChange:()=>{var T;U(0),L(((T=P.current)==null?void 0:T.value)??"")}}),e.jsx("div",{className:D("cursor-pointer",A?"":"hidden"),onClick:()=>{S(!1),L(""),U(0)},children:e.jsx(xe,{className:"icon-sm"})}),t&&e.jsx(C,{color:"secondary",onClick:()=>{u(!0)},icon:he,children:e.jsx(r,{...c.approveAGPTButton})})]})]}),K?e.jsx("div",{className:"mt-8 flex items-center justify-center",children:e.jsx(ee,{})}):e.jsxs("div",{style:{height:pe*85+75},className:"mb-8",children:[M.length>0?e.jsxs(d.Root,{size:"normal",className:"min-w-full overflow-hidden bg-token-main-surface-primary sm:rounded-lg",children:[e.jsxs(d.Header,{children:[e.jsx(d.HeaderCell,{className:"py-2 pr-4 text-left text-xs text-token-text-secondary",children:e.jsx(r,{...c.nameCellTitle})}),e.jsx(d.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(r,{...c.builderCellTitle})}),e.jsx(d.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(r,{...c.customActionsCellTitle})}),a==j.WORKSPACE&&e.jsx(d.HeaderCell,{className:"px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsx(r,{...c.whoHasAccessTitle})}),a==j.WORKSPACE&&e.jsx(d.HeaderCell,{className:"cursor-pointer px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{_==="vanity_metrics.num_conversations_str"?E(R==="asc"?"desc":"asc"):(re("vanity_metrics.num_conversations_str"),E("desc"))},children:[e.jsx("span",{children:e.jsx(r,{...c.chatsCellTitle})}),_==="vanity_metrics.num_conversations_str"&&R==="asc"&&e.jsx(fe,{className:"icon-sm"}),_==="vanity_metrics.num_conversations_str"&&R==="desc"&&e.jsx(Te,{className:"icon-sm"})]})}),e.jsx(d.HeaderCell,{className:"cursor-pointer px-4 py-2 text-left text-xs text-token-text-secondary",children:e.jsxs("div",{className:"flex items-center gap-1",onClick:()=>{_==="created_at"?E(R==="asc"?"desc":"asc"):(re("created_at"),E("desc"))},children:[e.jsx("span",{children:a==j.WORKSPACE?e.jsx(r,{...c.createdCellTitle}):e.jsx(r,{...c.approvedCellTitle})}),_==="created_at"&&R==="asc"&&e.jsx(fe,{className:"icon-sm"}),_==="created_at"&&R==="desc"&&e.jsx(Te,{className:"icon-sm"})]})}),e.jsx(d.HeaderCell,{className:"w-16"})]}),e.jsx(d.Body,{children:M.map(T=>e.jsx(xs,{account:s,gpt:T,thirdParty:a==j.THIRD_PARTY},T.gizmo.id))})]}):e.jsxs("div",{className:"flex h-full w-full flex-col items-center gap-4 py-16",children:[e.jsx(Ue,{className:"h-12 w-12 text-gray-400"}),e.jsx("p",{className:"text-token-text-secondary",children:a==j.THIRD_PARTY?me?e.jsx(r,{...c.noWorkspaceApprovedGPTsFound}):e.jsx(r,{...c.noWorkspaceApprovedGPTs}):me?e.jsx(r,{...c.noWorkspaceGPTsFound}):e.jsx(r,{...c.noWorkspaceGPTs})}),a==j.THIRD_PARTY&&e.jsx(C,{color:"secondary",onClick:()=>{u(!0)},icon:he,children:e.jsx(r,{...c.approveAGPTButton})})]}),v&&e.jsxs("div",{className:"my-4 flex w-full items-center justify-center gap-4 text-token-text-tertiary",children:[e.jsx(ee,{}),e.jsx(r,{...c.stillLoadingData})]}),de>1&&e.jsx("div",{className:"mt-2 flex justify-center",children:e.jsx(Xe,{currentPage:$,onChangeIndex:U,length:Math.max(ce,1)})})]}),e.jsx(ts,{isOpen:h,onClose:()=>{u(!1),Oe.invalidateQueries({queryKey:["workspace",s.id,j.THIRD_PARTY]})},account:s})]})}function ys(s,t){return Ge({queryKey:["workspace",s,"gizmos",t],queryFn:({pageParam:a})=>I.getWorkspaceGPTs(s,t,a),initialPageParam:"",getNextPageParam:a=>a.cursor})}function ks({gizmo:s,account:t}){const a=G(),i={[y.Private]:a.formatMessage(c.shareRecipientTitlePrivate),[y.User]:a.formatMessage(c.shareRecipientTitlePrivate),[y.Group]:a.formatMessage(c.shareRecipientTitlePrivate),[y.Link]:a.formatMessage(c.shareRecipientTitleLink),[y.Marketplace]:a.formatMessage(c.shareRecipientTitlePublic),[y.Workspace]:t.data.name,[y.WorkspaceLink]:t.data.name};if(["private","user","group"].includes(s.gizmo.sharing.recipient)){const{users:n,groups:o}=Ss(s);return n===0&&o===0?e.jsx("span",{className:"text-token-text-secondary",children:e.jsx(r,{...c.shareRecipientTitlePrivate})}):n>0&&o>0?e.jsxs("span",{className:"text-token-text-secondary",children:[i[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(r,{id:"fQ+tJG",defaultMessage:"Shared with {users} and {groups}",values:{users:a.formatMessage(c.userCount,{numUsers:n}),groups:a.formatMessage(c.groupCount,{numGroups:o})}})]}):n>0?e.jsxs("span",{className:"text-token-text-secondary",children:[i[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(r,{...c.userCount,values:{numUsers:n}})]}):e.jsxs("span",{className:"text-token-text-secondary",children:[i[s.gizmo.share_recipient],e.jsx("br",{}),e.jsx(r,{...c.groupCount,values:{numGroups:o}})]})}return e.jsx("span",{children:i[s.gizmo.share_recipient]})}function Ss(s){if(s.gizmo.sharing.subjects){const t=s.gizmo.sharing.subjects.filter(i=>i.type===ye.USER).length,a=s.gizmo.sharing.subjects.filter(i=>i.type===ye.GROUP).length;return{users:t,groups:a}}return{users:0,groups:0}}const c=J({stillLoadingData:{id:"workspaceSettings.stillLoadingData",defaultMessage:"Don't see what you're looking for? Some GPTs are still loading..."},noWorkspaceGPTs:{id:"workspaceSettings.noWorkspaceGPTs",defaultMessage:"This workspace does not have any GPTs"},noWorkspaceGPTsFound:{id:"workspaceSettings.noWorkspaceGPTsFound",defaultMessage:"No workspace GPTs found"},noWorkspaceApprovedGPTs:{id:"workspaceSettings.noWorkspaceApprovedGPTs",defaultMessage:"You havent approved any third-party GPTs"},noWorkspaceApprovedGPTsFound:{id:"workspaceSettings.noWorkspaceApprovedGPTsFound",defaultMessage:"No approved third-party GPTs found"},workspaceTab:{id:"workspaceSettings.workspaceTab",defaultMessage:"Workspace"},thirdPartyTab:{id:"workspaceSettings.thirdPartyTab",defaultMessage:"Third-party"},capabilitiesTitle:{id:"workspaceSettings.capabilitiesTitle",defaultMessage:"Capabilities"},whoHasAccessTitle:{id:"workspaceSettings.whoHasAccessTitle",defaultMessage:"Who has access"},filterByNameOrBuilderPlaceholder:{id:"workspaceSettings.filterByNameOrBuilderPlaceholder",defaultMessage:"Filter by name or builder..."},nameCellTitle:{id:"workspaceSettings.nameCellTitle",defaultMessage:"Name"},builderCellTitle:{id:"workspaceSettings.builderCellTitle",defaultMessage:"Builder"},customActionsCellTitle:{id:"workspaceSettings.customActionsCellTitle",defaultMessage:"Custom Actions"},chatsCellTitle:{id:"workspaceSettings.chatsCellTitle",defaultMessage:"Chats"},createdCellTitle:{id:"workspaceSettings.createdCellTitle",defaultMessage:"Created"},approvedCellTitle:{id:"workspaceSettings.approvedCellTitle",defaultMessage:"Approved"},approveAGPTButton:{id:"workspaceSettings.approveAGPTButton",defaultMessage:"Approve a GPT"},shareRecipientTitlePrivate:{id:"vyjlzc",defaultMessage:"Invite only"},shareRecipientTitleLink:{id:"workspaceSettings.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettings.shareRecipientTitlePublic",defaultMessage:"Public"},changeAccess:{id:"workspaceSettings.changeAccess",defaultMessage:"Change who has access"},changeOwner:{id:"workspaceSettings.changeOwner",defaultMessage:"Change Owner"},deleteGPT:{id:"workspaceSettings.deleteGPT",defaultMessage:"Delete GPT"},removeFromWorkspace:{id:"workspaceSettings.removeFromWorkspace",defaultMessage:"Remove from workspace"},userCount:{id:"P1xo2B",defaultMessage:"{numUsers, plural, one {# user} other {# users}}"},groupCount:{id:"4zRUED",defaultMessage:"{numGroups, plural, one {# group} other {# groups}}"}});function V({title:s,description:t,children:a,upsellEnterprise:i=!1,className:n=""}){return e.jsx(Fe,{label:e.jsx(r,{...g.enterpriseRequiredMessage}),side:"top",sideOffset:4,disabled:!i,className:"max-w-5xl",children:e.jsxs(ns,{className:D(i&&"text-token-text-tertiary","max-w-4xl",n),children:[e.jsxs(os,{className:"flex items-center gap-3",children:[e.jsx(r,{...s}),i&&e.jsx("span",{className:"rounded-xl bg-token-main-surface-tertiary px-2 pb-0.5 text-sm",children:e.jsx(r,{...g.enterpriseUpsellPill})})]}),t&&e.jsx(ls,{className:"py-2 text-token-text-secondary",children:e.jsx(r,{...t})}),a]})})}function Ps({workspaceId:s,label:t,setting:a,defaultValue:i,values:n,disabled:o=!1}){const l=G(),p=q(),{variables:f,mutate:m}=ae({mutationFn:({setting:h,value:u})=>I.setWorkspaceShareSetting(s,h,u),onSettled:()=>{p.invalidateQueries({queryKey:["workspace-settings"]}),p.invalidateQueries({queryKey:["workspace"]})},onError:()=>{ie.danger(l.formatMessage(g.featureSettingsUpdateFailed))}});return e.jsxs(cs,{children:[e.jsx("p",{className:"text-md inline-flex items-center",children:e.jsx(r,{...t})}),e.jsxs(w.Root,{defaultValue:(f==null?void 0:f.value)??i,onValueChange:h=>{m({setting:a,value:h})},disabled:o,children:[e.jsxs(w.Trigger,{className:"text-md focus-visible:border-none",children:[e.jsx(w.Value,{}),e.jsx(w.Icon,{})]}),e.jsx(w.Portal,{children:e.jsx(w.Content,{children:n.map((h,u)=>e.jsx(w.Item,{className:"text-md",value:h.value,children:e.jsx(r,{...h.display})},u))})})]})]})}function vs({workspaceId:s,value:t,upsellEnterprise:a=!1}){const i=G(),n=q(),{variables:o,mutate:l}=ae({mutationFn:({value:p})=>I.setWorkspaceThirdPartyGPTSetting(s,p),onSettled:()=>{n.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{ie.danger(i.formatMessage(g.featureSettingsUpdateFailed))}});return e.jsxs(w.Root,{defaultValue:(o==null?void 0:o.value)??t,onValueChange:p=>{l({value:p})},children:[e.jsxs(w.Trigger,{className:"border border-token-border-light text-base focus-visible:border-token-border-light",children:[e.jsx(w.Value,{}),e.jsx(w.Icon,{})]}),e.jsx(w.Portal,{children:e.jsxs(w.Content,{children:[e.jsx(w.Item,{className:"text-base",value:Q.ALLOW_ALL,children:e.jsx(r,{...g.allowAllOption})}),!a&&e.jsx(w.Item,{className:"text-base",value:Q.ALLOW_SPECIFIC,children:e.jsx(r,{...g.ownerApprovedOnlyOption})}),e.jsx(w.Item,{className:"text-base",value:Q.ALLOW_NONE,children:e.jsx(r,{...g.dontAllowOption})})]})})]})}function Ms({workspaceId:s,data:t}){const a=G(),i=Re(),n=q(),[o,l]=x.useState([]),{value:p}=De("3298726333"),f=ae({mutationFn:({value:v})=>I.setWorkspaceCustomActionsDomains(s,v),onSettled:()=>{n.invalidateQueries({queryKey:["workspace-settings"]})},onError:()=>{ie.danger(a.formatMessage(g.featureSettingsUpdateFailed))}});if(i==null)return null;const m=i.isTeam(),h=e.jsx(V,{title:g.thirdPartyGPTsTitle,description:g.thirdPartyGPTsDescription,className:"border-b border-token-border-light pb-4",children:e.jsx("div",{children:e.jsx(vs,{workspaceId:s,value:t.allow_third_party_gpts,upsellEnterprise:m})})}),u=e.jsx(V,{title:g.sidebarTitle,children:e.jsx(ws,{account:i,showThirdParty:!m&&t.allow_third_party_gpts===Q.ALLOW_SPECIFIC})}),k=t.allowed_custom_actions_domains!=null||t.beta_settings.workspace_gpt_custom_actions===!1;return e.jsxs(is,{className:"max-w-5xl",children:[m&&h,m&&i.isOwnerOfAccount()&&u,m&&e.jsx(rs,{}),e.jsx(V,{title:g.sharingSettingsTitle,upsellEnterprise:m,children:e.jsx(ke,{children:e.jsx(Ps,{workspaceId:s,label:g.gptSharingTitle,disabled:m,setting:Ee.GPT_SHARE_SETTINGS,defaultValue:t.share_settings.gpt_share_setting,values:[{display:g.anyOneSelect,value:Z.ANYONE},{display:g.workspaceMembersOnlySelect,value:Z.WORKSPACE_ONLY},{display:g.inviteOnlySelect,value:Z.NO_ONE}]})})}),e.jsx(V,{title:g.workspaceGPTsTitle,description:g.workspaceGPTsDescription,upsellEnterprise:m,children:e.jsxs(ke,{children:[e.jsx(je,{label:g.browseOptionTitle,feature:ge.BROWSING,value:t.beta_settings.browsing,workspaceId:s,tooltip:g.browseTooltip,disabled:m}),p?e.jsxs("div",{className:"flex flex-col gap-4 py-6",children:[e.jsx("div",{className:"text-xl font-semibold",children:e.jsx(r,{id:"ugI3Yt",defaultMessage:"GPT actions"})}),e.jsx("div",{className:"py-2 text-sm text-token-text-secondary",children:e.jsx(r,{id:"HY2eof",defaultMessage:"GPT actions allow GPTs to call third-party APIs for tasks such as retrieving or modifying data. GPT actions are defined by GPT builders, and you can limit the domains that can be used for GPTs created in your workspace."})}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(se,{checked:!k,id:"allow-all-domains",onChange:v=>{v.currentTarget.checked?(l(t.allowed_custom_actions_domains),f.mutate({value:null})):f.mutate({value:o??[]})},label:e.jsxs("span",{className:"flex flex-row items-center",children:[e.jsx(r,{id:"WnWoqJ",defaultMessage:"Allow all domains for GPT actions"}),e.jsx(Me,{sideOffset:4,interactive:!0,delayDuration:0,label:e.jsx(r,{id:"KjJtEm",defaultMessage:"Limit the Internet domains that can be used by GPTs created in your workspace. This does not apply to third-party GPTs."}),side:"top",children:e.jsx(Qe,{})})]})}),f.isPending&&e.jsx(ee,{})]}),k&&e.jsx(ms,{value:t.allowed_custom_actions_domains??[],title:a.formatMessage({id:"YetDcq",defaultMessage:"Domains"}),onChange:v=>{f.mutate({value:v})},emptyMessage:a.formatMessage({id:"rFH4IP",defaultMessage:"No domains added. No GPT actions will be allowed."})})]}):e.jsx(je,{label:g.customActionsOptionTitle,feature:ge.WORKSPACE_GPT_CUSTOM_ACTIONS,value:t.beta_settings.workspace_gpt_custom_actions,workspaceId:s,tooltip:g.customActionsTooltip,disabled:m})]})}),!m&&h,!m&&i.isOwnerOfAccount()&&u]})}function bs({currentWorkspaceId:s}){const{data:t,isLoading:a}=Ae(s),i=G();return e.jsxs(e.Fragment,{children:[e.jsx(_e,{children:e.jsx("title",{children:i.formatMessage(g.sidebarTitle)})}),e.jsx(We,{title:i.formatMessage(g.sidebarTitle)}),e.jsx(Ie,{showSpinner:a,children:t===void 0?null:e.jsx(Ms,{workspaceId:s,data:t})})]})}const g=J({sidebarTitle:{id:"workspaceSettingsOld.sidebarTitle",defaultMessage:"GPTs"},allowAllOption:{id:"workspaceSettingsOld.allowAllOption",defaultMessage:"Allow all"},ownerApprovedOnlyOption:{id:"workspaceSettingsOld.ownerApprovedOnlyOption",defaultMessage:"Owner-approved only"},dontAllowOption:{id:"workspaceSettingsOld.dontAllowOption",defaultMessage:"Don't allow"},retentionPolicyTitle:{id:"workspaceSettingsOld.retentionPolicyTitle",defaultMessage:"Retention policy"},thirdPartyGPTsTitle:{id:"workspaceSettingsOld.thirdPartyGPTsTitle",defaultMessage:"Third-party"},thirdPartyGPTsDescription:{id:"workspaceSettingsOld.thirdPartyGPTsDescription",defaultMessage:"Manage whether members can use GPTs created outside your workspace."},customActionsTooltip:{id:"workspaceSettingsOld.customActionsTooltip",defaultMessage:"Allow GPTs to use third-party services for tasks such as finding flights. Actions are defined by GPT builders."},browseTooltip:{id:"workspaceSettingsOld.browseTooltip",defaultMessage:"Allow ChatGPT and GPTs to browse the internet to answer questions about recent topics and events."},customActionsOptionTitle:{id:"workspaceSettingsOld.pluginsOptionTitle.0",defaultMessage:"Custom actions"},browseOptionTitle:{id:"workspaceSettingsOld.browseOptionTitle",defaultMessage:"Browsing with Bing"},workspaceGPTsTitle:{id:"workspaceSettingsOld.workspaceGPTsTitle",defaultMessage:"Workspace"},appearanceTitle:{id:"workspaceSettingsOld.appearanceTitle",defaultMessage:"Appearance"},sharingSettingsTitle:{id:"workspaceSettingsOld.sharingSettingsTitle",defaultMessage:"Sharing"},gptSharingTitle:{id:"workspaceSettingsOld.gptSharingTitle",defaultMessage:"GPTs can be shared with..."},chatSharingTitle:{id:"workspaceSettingsOld.chatSharingTitle",defaultMessage:"Chats can be shared with..."},workspaceMembersOnlySelect:{id:"workspaceSettingsOld.workspaceMembersOnlySelect",defaultMessage:"Workspace members only"},anyOneSelect:{id:"workspaceSettingsOld.anyOneSelect",defaultMessage:"Anyone"},noOneSelect:{id:"workspaceSettingsOld.noOneSelect",defaultMessage:"No one"},inviteOnlySelect:{id:"workspaceSettingsOld.inviteOnlySelect",defaultMessage:"Invite only"},featureSettingsUpdateFailed:{id:"workspaceSettingsOld.featureSettingsUpdateFailed",defaultMessage:"Failed to update feature setting"},conversationRetention:{id:"workspaceSettingsOld.conversationRetention",defaultMessage:"Chat retention"},retentionInfinite:{id:"workspaceSettingsOld.retentionInfinite",defaultMessage:"Infinite"},retentionNinetyDays:{id:"workspaceSettingsOld.retentionNinetyDays",defaultMessage:"90 days"},retentionOneYear:{id:"workspaceSettingsOld.retentionOneYear",defaultMessage:"1 year"},retentionCustomDays:{id:"workspaceSettingsOld.retentionCustomDays",defaultMessage:"{num} days"},retentionChange:{id:"workspaceSettingsOld.retentionChange",defaultMessage:"Contact your account manager to change this setting."},workspaceGPTsDescription:{id:"workspaceSettingsOld.workspaceGPTsDescription",defaultMessage:"Manage which capabilities are available for GPTs built in your workspace or by ChatGPT. This does not apply to third-party GPTs."},enterpriseUpsellPill:{id:"workspaceSettingsOld.enterpriseUpsellPill",defaultMessage:"Enterprise"},retentionSettingTooltip:{id:"workspaceSettingsOld.retentionSettingTooltip",defaultMessage:"Contact your account manager to change this setting"},enterpriseRequiredMessage:{id:"workspaceSettingsOld.enterpriseRequiredMessage",defaultMessage:"Only workspaces with the Enterprise plan can change these settings"},shareRecipientTitlePrivate:{id:"workspaceSettingsOld.shareRecipientTitlePrivate",defaultMessage:"Private"},shareRecipientTitleLink:{id:"workspaceSettingsOld.shareRecipientTitleLink",defaultMessage:"Link"},shareRecipientTitlePublic:{id:"workspaceSettingsOld.shareRecipientTitlePublic",defaultMessage:"Public"}});function be(s){return e.jsx(bs,{...s})}be.getLayout=function(t){return e.jsx(Le,{mobilePageTitle:"GPTs",requireOwnerPrivileges:!0,children:t})};function ia(){const s=ds();return ps(),e.jsx(be,{...s})}export{ia as default};
//# sourceMappingURL=gzyzj6jxtq9ed2jh.js.map
