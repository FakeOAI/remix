import{bB as T,j as e,P as f,b5 as F,G as l,bT as de,S as ue,r as p,aR as me,aS as fe,aT as ge,aV as pe,H as P,c as y,D as U,E as he,F as xe,I as Q,af as X,C as W,b6 as I,x as S,cK as be,aq as Y,ai as L,bd as Z,eL as J,aC as ve,a2 as je,cM as Se,a7 as Me,eM as ye,b0 as Ce,b1 as ke,ec as we,au as z,b8 as Ne,u as G,aw as q}from"./jeen44fo1keunqlc.js";import{fa as ee,b1 as D,j as B,U as x,fb as Ie,b0 as Te,aR as N,bR as Pe,bQ as _e,fc as E,fd as Ee,fe as Fe,ff as K,fg as Ue,fh as $,s as Le,aS as se,fi as Be,fj as Re,fk as Oe,fl as V,f8 as Ae}from"./osf8maqq52t0ie0w.js";import{ap as We,B as De,bn as $e,bo as te,A as He,bp as ze,aN as Ge,a1 as qe}from"./hisz4iug0sf9ooju.js";import{N as ae,c as Ke,E as Ve}from"./b4y2ge3nobhogt80.js";import{m as ne}from"./m3qjut27is4ffm4j.js";import{B as Qe,D as O}from"./gy8d176d0tsqf86m.js";import{A as Xe}from"./lpnc7pij2s03xjm3.js";function Ms({onClick:t,className:a,...s}){return e.jsx(Ie,{onClick:t,className:y(a,"flex-grow overflow-hidden"),...s})}function ys({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=T();return s||!a?null:e.jsx(ae,{className:"mr-3",onClick:()=>{f.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function Cs({onNewChatButtonClick:t}){const{isUnauthenticated:a,isLoading:s}=T(),o=ee();return s?null:a?o?e.jsx(Ze,{}):e.jsx(Ye,{}):e.jsx(ae,{onClick:()=>{f.logNewChatButtonClicked({location:"Mobile header"}),t()}})}function Ye(){const t=D();return e.jsx(F,{as:"button",size:"small",color:"primary",onClick:()=>{const a=t({authType:"signup"});f.logSignUpButtonClicked({location:"Mobile Chat Stage Header",provider:a})},children:e.jsx(l,{...ie.signUpButtonText})})}function Ze(){const t=D();return e.jsx(F,{as:"button",size:"small",color:"primary",onClick:()=>{const a=t({authType:"login"});f.logLogInButtonClicked({location:"Mobile Chat Stage Header",provider:a})},children:e.jsx(l,{...de.logInButtonText})})}function Je({onClick:t}){return e.jsxs("button",{type:"button",className:"inline-flex rounded-md hover:text-token-text-primary focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white active:opacity-50",onClick:t,children:[e.jsx("span",{className:"sr-only",children:e.jsx(l,{...ie.openSidebar})}),e.jsx(We,{className:"icon-lg mx-2 text-token-text-secondary"})]})}const es=({onClickOpenSidebar:t,children:a,showNavSidebar:s,leftContent:o,rightContent:i,bottomContent:n})=>{const r=B(m=>m.activeSidebar),d=ue().asPath;return p.useEffect(()=>{r==="popover-nav"&&x.setActiveSidebar(!1)},[d]),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sticky top-0 z-10 flex min-h-[60px] items-center justify-center border-transparent bg-token-main-surface-primary pl-0 md:hidden",children:[(s||o)&&e.jsxs("div",{className:"absolute bottom-0 left-0 top-0 ml-3 inline-flex items-center justify-center",children:[s&&e.jsx(Je,{onClick:t}),o]}),a,i&&e.jsx("div",{className:"absolute bottom-0 right-0 top-0 mr-3 inline-flex items-center justify-center",children:i})]}),n&&e.jsx("div",{className:"flex w-full items-center justify-center bg-token-main-surface-primary",children:n})]})};function ss({isPopover:t=!1,isExpanded:a=!1,children:s}){return e.jsxs(e.Fragment,{children:[t&&e.jsx(as,{children:s}),e.jsx(ts,{isExpanded:!t&&a,children:s})]})}function ts({isExpanded:t,children:a}){const s=p.useRef(null);return e.jsx(ne.div,{className:"flex-shrink-0 overflow-x-hidden bg-token-sidebar-surface-primary",ref:s,initial:!1,animate:{width:t?"260px":0,transition:{duration:.165,ease:"easeOut"}},onAnimationStart:()=>{s.current&&(s.current.style.visibility="visible")},onAnimationComplete:()=>{s.current&&(t||(s.current.style.visibility="hidden"))},children:e.jsx("div",{className:"h-full w-[260px]",children:e.jsx("div",{className:"flex h-full min-h-0 flex-col",children:a})})})}function as({children:t}){const a=B(s=>s.activeSidebar);return e.jsx(me,{open:a==="popover-nav",onOpenChange:s=>{s||x.setActiveSidebar(!1)},children:e.jsxs(fe,{children:[e.jsx(ge,{className:"fixed inset-0 z-10 bg-white/50 radix-state-open:animate-show dark:bg-black/50"}),e.jsx(pe,{className:"fixed left-0 top-0 z-50 h-full max-w-xs border-r border-gray-200 bg-token-sidebar-surface-primary shadow-[0_0_64px_0_rgba(0,0,0,0.07)] focus:outline-none radix-state-closed:animate-sidebarHide radix-state-open:animate-sidebarShow dark:border-gray-800",children:t})]})})}const ie=P({closeSidebar:{id:"navigation.closeSidebar",defaultMessage:"Close sidebar"},openSidebar:{id:"navigation.openSidebar",defaultMessage:"Open sidebar"},signUpButtonText:{id:"navigation.signUpButtonText",defaultMessage:"Sign up"}});function ns({workspace:t}){var n;const a=U(),s=Te(N.InviteUsersToWorkspace),o=Pe()??!0,i=(n=_e())==null?void 0:n.map(r=>r.hostname);return e.jsx(he,{size:"custom",className:"max-w-lg text-sm",isOpen:s,onClose:xe,type:"success",title:t.data.name!=null?a.formatMessage(w.inviteMemberModalTitle,{workspaceName:t.data.name}):a.formatMessage(w.inviteMemberModalTitleUntitledWorkspace),description:e.jsxs(e.Fragment,{children:[e.jsx("p",{children:e.jsx(l,{...w.inviteMemberModalDescription})}),!!(i!=null&&i.length)&&!o&&e.jsxs("p",{className:"mt-2",children:[e.jsx(l,{...w.prohibitExternalDomainsDescription})," ",e.jsx("b",{children:i.join(", ")})]})]}),children:e.jsx(Xe,{workspace:t,canResendInviteEmails:!0,onCancel:()=>x.closeModal(N.InviteUsersToWorkspace),onSuccess:()=>x.closeModal(N.InviteUsersToWorkspace),cancelButtonText:a.formatMessage(w.inviteMemberInviteCancelButton)})})}const w=P({inviteMemberInviteCancelButton:{id:"adminPage.inviteMemberInviteCancelButton",defaultMessage:"Cancel"},inviteMemberModalTitle:{id:"adminPage.inviteMemberModalTitle",defaultMessage:"Invite members to the {workspaceName} workspace"},inviteMemberModalTitleUntitledWorkspace:{id:"adminPage.inviteMemberModalTitleUntitledWorkspace",defaultMessage:"Invite members to this workspace"},inviteMemberModalDescription:{id:"adminPage.inviteMemberModalDescription",defaultMessage:"This workspace is private, only select members and roles can use this workspace. This workspace is opted out of training."},prohibitExternalDomainsDescription:{id:"ky8nVd",defaultMessage:"Only users from the following emails can be added to this workspace:"},fileTooLargeWarning:{id:"adminPage",defaultMessage:"File is too large. Please upload a CSV file smaller than {maxSize}."}});function is({showFreeTrialLoadingPayment:t,handleGetPaymentLink:a}){const s=U(),o=()=>{t||(E(!0),a())},i=j=>{j.stopPropagation(),Ee(!0),Fe(!0)},{data:n,isLoading:r,isSuccess:c}=X({queryKey:["claimedReferralInvite"],queryFn:()=>W.getClaimedReferralInvite(),refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,refetchOnReconnect:!1}),d=n==null?void 0:n.invite_code,[m,g]=p.useState(!1);if(p.useEffect(()=>{d&&!m&&c&&(g(!0),I.logEvent("chatgpt_referral_show_claimed_sidebar_menu_promo"),f.logEvent(S.chatgptReferralShowClaimedSidebartMenuPromo))},[d,g,m,c]),!d||r||!c)return null;const u=d.invite_metadata.invite_data,C=u!=null&&u.referral_trial_duration_months?(u==null?void 0:u.referral_trial_duration_months)>1?s.formatMessage(A.monthsOfBenefit,{referralTrialDurationMonths:u==null?void 0:u.referral_trial_duration_months}):s.formatMessage(A.daysOfBenefit,{referralTrialDurationDays:u==null?void 0:u.referral_trial_duration_days}):null;return e.jsx(ne.div,{className:y("relative",{"cursor-progress opacity-50":t}),layout:"position",initial:{y:-10,opacity:1},animate:{y:0,opacity:1,transition:{duration:.1,ease:"easeIn"}},children:e.jsxs(rs,{className:y(t&&"opacity-75"),onClick:o,children:[e.jsxs("div",{className:"flex w-full flex-row items-center justify-start gap-3",children:[e.jsx(be,{className:"icon-sm shrink-0"}),e.jsx(l,{...A.freeTrialCta,values:{duration:C}})]}),!t&&e.jsx(De,{onClick:i,className:"icon-md shrink-0 rounded-full p-0.5 text-token-text-tertiary opacity-50 transition-colors duration-200 hover:bg-[#0077FF] hover:text-red-500 group-hover:opacity-100"}),e.jsx("span",{className:"absolute top-11 h-0 w-0 border-l-8 border-r-8 border-t-8 border-l-transparent border-r-transparent border-t-[#0077FF] transition-colors duration-200 group-hover:border-t-[#0077FF]"})]})})}const rs=Q.a`group relative mb-1 rounded-md hover:[#0077FF] bg-[#0077FF] flex px-3 min-h-[44px] py-1 items-center gap-3 transition-colors duration-200 dark:text-white cursor-pointer text-sm`,A=P({freeTrialCta:{id:"PaymentMenuItems.freeTrialCta",defaultMessage:"Get {duration}!"},monthsOfBenefit:{id:"FreeTrialMenuItem.monthsOfBenefit",defaultMessage:"{referralTrialDurationMonths, plural, one {one month free} other {# months free}}"},daysOfBenefit:{id:"FreeTrialMenuItem.daysOfBenefit",defaultMessage:"{referralTrialDurationDays, plural, one {one day free} other {# days free}}"}});function os(){const t=U(),a=Y(),s=L(),o=!s,i=(s==null?void 0:s.hasPaidSubscription())??!1,n=(s==null?void 0:s.hasClaimedFreeTrial())??!1,r=p.useMemo(()=>s==null?void 0:s.subscriptionAnalyticsParams,[s]),c=async()=>{E(!0),f.logEvent(S.clickAccountPaymentCheckout,r);try{const b=await W.getCheckoutLink(a);window.location.href=b.url}catch{je.warning(t.formatMessage(v.paymentErrorWarning),{hasCloseButton:!0}),E(!1)}finally{}},d=()=>{g||(E(!0),c())},m=K(b=>b.didCloseFreeTrial),g=K(b=>b.showFreeTrialLoadingPayment),u=!m&&n,C=(s==null?void 0:s.wasPaidCustomer())??!1,j=(s==null?void 0:s.isWorkspaceAccount())??!1,_=(s==null?void 0:s.isPlus())??!1,k=!o&&!j,R=Z(),h=()=>{f.logEvent(S.clickSidebarAccountPaymentMenuItem,r),Le(R,"Sidebar account payment menu item")},{setShowReferralInviteModal:H}=Ue(b=>({setShowReferralInviteModal:b.setShowReferralInviteModal})),le=p.useCallback(()=>{I.logEvent("chatgpt_referral_invite_sidebar_clicked"),f.logEvent(S.chatgptReferralInviteSidebarClicked,r),H(!0,()=>{f.logEvent(S.clickSidebarAccountPaymentMenuItem,r)})},[r,H]),ce=(s==null?void 0:s.isTeam())??!1;return e.jsxs(e.Fragment,{children:[((a==null?void 0:a.includes(J))||i)&&e.jsx(ds,{analyticsParams:r,handleReferralInvite:le}),!i&&u&&e.jsx(is,{showFreeTrialLoadingPayment:g,handleGetPaymentLink:c}),ce&&e.jsx(cs,{}),k&&e.jsx($,{onClick:u?d:h,className:"m-0 rounded-lg px-2",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(ls,{wasPaidCustomer:C,showFreeTrialLoadingPayment:g,hasPlusSubscription:_})})})})]})}const ls=({wasPaidCustomer:t,showFreeTrialLoadingPayment:a,hasPlusSubscription:s})=>a?e.jsx(ve,{className:"icon-sm shrink-0"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx($e,{className:"icon-sm shrink-0"})}),e.jsx("div",{className:"flex flex-col",children:t?e.jsx(l,{...v.renewPlus}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:s?e.jsx(l,{...v.createATeamWorkspace}):e.jsx(l,{...v.upgradePlan})}),e.jsx("span",{className:"line-clamp-1 text-xs text-token-text-tertiary",children:s?e.jsx(l,{...v.upgradeToTeamUpsell}):e.jsx(l,{...v.upgradeToPlusUpsell})})]})})]}),cs=()=>{const t=L();return e.jsxs(e.Fragment,{children:[e.jsx($,{onClick:()=>{x.openModal(N.InviteUsersToWorkspace)},className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(te,{className:"icon-sm shrink-0"})}),e.jsx(l,{...v.inviteMembers})]})})}),t!=null?e.jsx(ns,{workspace:t}):null]})},ds=({analyticsParams:t,handleReferralInvite:a})=>{const s=Y(),o=(s==null?void 0:s.includes(J))??!1,i=L(),{data:n}=X({queryKey:["referralInvites"],queryFn:()=>W.getEligibleReferralInvites(),enabled:o}),r=i&&!i.isOrWasPaidCustomer()&&!i.hasPlusFeatures(),c=(n==null?void 0:n.invites_remaining)&&(n==null?void 0:n.invites_remaining)>0,d=r&&c,[m,g]=p.useState(!1);return p.useEffect(()=>{d&&!m&&(g(!0),I.logEvent("chatgpt_referral_show_sidebar_menu_item"),f.logEvent(S.chatgptReferralShowSidebarMenuItem,t))},[d,g,m,t]),d?e.jsx($,{onClick:a,className:"rounded-lg",children:e.jsx("span",{className:"flex w-full flex-row flex-wrap-reverse justify-between",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-7 w-7 items-center justify-center rounded-full border border-token-border-light",children:e.jsx(te,{className:"icon-sm shrink-0"})}),e.jsx(l,{...v.inviteReferral})]})})}):null},v=P({upgradePlan:{id:"PaymentMenuItems.upgradePlan",defaultMessage:"Upgrade plan"},createATeamWorkspace:{id:"PaymentMenuItems.createATeamWorkspace",defaultMessage:"Add Team workspace"},upgradeToTeamUpsell:{id:"PaymentMenuItems.upgradeToTeamUpsell",defaultMessage:"Collaborate on a Team plan"},upgradeToPlusUpsell:{id:"PaymentMenuItems.upgradeToPlusUpsell.0",defaultMessage:"Get GPT-4, DALL·E, and more"},renewPlus:{id:"PaymentMenuItems.renewPlus",defaultMessage:"Renew Plus"},inviteReferral:{id:"PaymentMenuItems.inviteReferral",defaultMessage:"Refer a friend"},inviteMembers:{id:"PaymentMenuItems.inviteMembers.0",defaultMessage:"Invite members"},paymentErrorWarning:{id:"PaymentMenuItems.paymentErrorWarning",defaultMessage:"The payments page encountered an error. Please try again. If the problem continues, please visit help.openai.com."}});function ks({navHeader:t,children:a,className:s}){const o=U(),i=p.useRef(null),n=Se(),{isUnauthenticated:r}=T(),{layer:c}=Me("1578749296"),d=c.get("is_sticky_toggle_off",!1);return p.useEffect(()=>{d&&x.openSidebar()},[d]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative h-full w-full flex-1 items-start border-white/20",children:[e.jsx(ye,{asChild:!0,children:e.jsx("h2",{children:e.jsx(l,{...M.chatHistoryLabel})})}),e.jsxs("nav",{className:y("flex h-full w-full flex-col px-3",s),"aria-label":o.formatMessage(M.chatHistoryLabel),children:[t,e.jsx(ms,{ref:i,$disableScroll:n&&!r,children:a}),e.jsx(us,{})]})]})})}function us(){const[t]=p.useState(()=>{const c=Ce.getCookie(ke.Workspace);return typeof c=="string"&&c!==we}),a=L(),s=(a==null?void 0:a.data)==null,{isUnauthenticated:o}=T(),{openSettings:i}=se(),{isCollapsible:n}=Be(),r=B(c=>c.isHistoryCollapsed);return t&&s||!a?null:o?e.jsx(re,{}):e.jsxs("div",{className:y("flex flex-col py-2 empty:hidden dark:border-white/20",n&&"-mx-3 border-t border-token-border-sharp px-3"),children:[n&&!r&&e.jsx(Re,{type:"less",onClick:x.toggleHistoryCollapsed}),e.jsx(Oe,{}),e.jsx(os,{}),e.jsx("div",{className:"flex w-full items-center md:hidden",children:e.jsx("div",{className:"max-w-[100%] grow",children:e.jsx(Ke,{onClickSettings:()=>i()})})})]})}const re=()=>{const t=ee(),a=D(),s=()=>{const r=a({authType:"login"});f.logLogInButtonClicked({location:"Sidebar bottom unit",provider:r}),I.logEvent("chatgpt_sidebar_login_button_clicked")},o=()=>{const r=a({authType:"signup"});f.logSignUpButtonClicked({location:"Sidebar bottom unit",provider:r}),I.logEvent("chatgpt_sidebar_signup_button_clicked")},i=e.jsx(F,{as:"button",size:"medium",color:t?"secondary":"primary","data-testid":"signup-button",onClick:o,children:e.jsx(l,{...M.unauthSignupCta})}),n=e.jsx(F,{as:"button",size:"medium",color:t?"primary":"secondary","data-testid":"login-button",onClick:s,children:e.jsx(l,{...M.unauthLoginCta})});return e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"mb-4 mt-2",children:[e.jsx("p",{className:"mb-1 text-sm font-semibold text-token-text-primary",children:e.jsx(l,{...t?M.logInOrSignUp:M.signUpOrLogIn})}),e.jsx("p",{className:"text-sm text-token-text-secondary",children:e.jsx(l,{id:"4qlPtW",defaultMessage:"Get smarter responses, upload files and images, and more."})})]}),e.jsx("div",{className:"flex flex-row items-start gap-2",children:t?[n,i]:[i,n]})]})},ms=Q.div`flex-col flex-1 transition-opacity duration-500 relative -mr-2 pr-2
  ${({$disableScroll:t})=>t?"overflow-y-hidden opacity-20 pointer-events-none":"overflow-y-auto"}`,M=P({chatHistoryLabel:{id:"NavigationContent.chatHistoryLabel",defaultMessage:"Chat history"},closeSidebar:{id:"NavigationContent.closeSidebar",defaultMessage:"Close sidebar"},signInToChat:{id:"NavigationContent.signInToChat",defaultMessage:"Sign in to ChatGPT"},signUpOrLogIn:{id:"NavigationContent.signUpOrLogIn",defaultMessage:"Sign up or log in"},logInOrSignUp:{id:"NavigationContent.logInOrSignUp",defaultMessage:"Log in or sign up"},unauthSignupCta:{id:"NavigationContent.unauthSignupCta",defaultMessage:"Sign up"},unauthLoginCta:{id:"NavigationContent.unauthLoginCta",defaultMessage:"Log in"}}),fs=()=>{var i,n;const{openSettings:t}=se(),a=(i=z("3376455464"))==null?void 0:i.value,s=(n=z("90459671"))==null?void 0:n.value,o=Z();return e.jsxs("div",{className:"flex h-full flex-col gap-2 p-3",children:[e.jsx(V,{icon:He,onClick:()=>{Ae(o),x.closeActiveSidebar()},children:e.jsx(l,{id:"0FupYP",defaultMessage:"New chat"})}),e.jsx("div",{className:"flex grow items-center justify-center",children:e.jsx(re,{})}),e.jsxs(Qe,{contentClassName:"w-[298px]",triggerButton:e.jsx(V,{icon:ze,children:e.jsx(l,{id:"y4Lkp7",defaultMessage:"Settings and more"})}),children:[e.jsx(O.Item,{onClick:()=>t(),icon:Ge,children:e.jsx(l,{id:"HrRLkZ",defaultMessage:"Settings"})}),a&&s&&e.jsx(O.Item,{icon:qe,onClick:()=>{x.openModal(N.ReportConversation)},children:e.jsx(l,{id:"thread.report.0",defaultMessage:"Report illegal content"})}),e.jsx(O.Separator,{}),e.jsx(Ve,{})]})]})};function oe({children:t,hideNavigation:a=!1,mobileHeaderContent:s,mobileHeaderLeftContent:o,mobileHeaderRightContent:i,mobileHeaderBottomContent:n,sidebar:r,forceOpenDesktopSidebar:c=!1}){const d=Ne(),{isUnauthenticated:m}=T(),[g,u,C]=B(h=>[h.isDesktopNavCollapsed,h.activeStageSidebar,h.activeSidebar]),j=[];let _=null;G.Children.forEach(t,h=>{G.isValidElement(h)&&(h.type===oe.Sidebars?_=h:j.push(h))});const k=!m&&!a&&r!=null,R=!a&&!d&&(k||m);return e.jsxs("div",{className:y("relative flex h-full w-full overflow-hidden transition-colors",C!=="popover-nav"&&"z-0"),children:[k&&e.jsx(q,{children:e.jsx(ss,{isExpanded:c||!g,isPopover:u||!d,children:m?e.jsx(fs,{}):r})}),e.jsxs("div",{className:"relative flex h-full max-w-full flex-1 flex-col overflow-hidden",children:[R&&e.jsx(q,{children:e.jsx(es,{onClickOpenSidebar:()=>x.togglePopoverNavSidebar(),showNavSidebar:k,leftContent:o,rightContent:i,bottomContent:n,children:s})}),e.jsx("main",{className:"relative h-full w-full flex-1 overflow-auto transition-width",children:j})]}),_]})}function gs({children:t}){return e.jsx(e.Fragment,{children:t})}oe.Sidebars=gs;export{ns as A,ks as N,oe as S,Ms as a,ys as b,Cs as c};
//# sourceMappingURL=f6zk01kv3e3n5dn0.js.map
