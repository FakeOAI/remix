import{v as j,bT as y,r as h,h as M,a4 as C,j as e,ax as O,a3 as D,T as t,cO as m,R as v,d1 as I,bM as T,t as B,d2 as R,I as U}from"./hc9xxm00a3r3byem.js";import{W as E}from"./lamtvuipqt8q6qja.js";import{M as Y}from"./exuoj3g9rvnr47xj.js";import{U as _}from"./guykwp3ov0cliuel.js";import{V as z,al as H,X as k,Y as b}from"./ozzpumen10p6g0yq.js";import{a as L,A as g}from"./lxui8l23v2tzixf9.js";import{u as F}from"./caxkuyopolf76hse.js";import"./fga5qe14lr2llx8v.js";import"./nug034oo81goid6a.js";import"./nbrfb6b5fqz7ea4t.js";import"./c6gg5hubzrgc52sj.js";import"./io7lyk89lbveno1g.js";import"./kwn3fefba30wvgsb.js";import"./facz9srd4e5z6fv5.js";import"./i9qil017zb3p1czr.js";import"./o65h1gsmgo0mfsrq.js";function G(){const r=z(),a=j(),{data:i}=y(),c=a!=null||i!=null,[l,o]=h.useState(!1),W=M(),n=i==null?void 0:i.accountItems,f=F((a==null?void 0:a.id)??""),w=a==null?void 0:a.id,u=n==null?void 0:n.find(d=>d.id===w),N=(a==null?void 0:a.isOwnerOfAccount())&&a.isTeam()&&!a.hasPaidSubscription(),S=(a==null?void 0:a.isOwnerOfAccount())&&a.isTeam()&&a.hasPaidSubscription(),p=n==null?void 0:n.filter(d=>!d.isDeactivated()),x=C(),P=h.useCallback(()=>{o(!0),_.setPurchaseWorkspaceData({minimumSeats:Math.max(f,Y),existingAccount:u}),o(!1)},[f,u]),A=async()=>{o(!0);try{const d=await v.fetchCustomerPortalUrl();W.push(d.url),o(!1)}catch{o(!1),B.warning(x.formatMessage(s.unableToOpenStripeDashboard),{hasCloseButton:!0})}};return a==null||!u||!p?e.jsx(e.Fragment,{}):e.jsx(O,{type:"success",onClose:D,isOpen:c,title:e.jsx("span",{className:"text-lg",children:e.jsx(t,{...s.workspaceDeactivated})}),children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsxs("div",{className:"flex w-full items-center gap-4",children:[e.jsx(L,{src:u.data.profilePictureUrl,size:"large"}),e.jsx("div",{className:"font-semibold",children:u.data.name})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-base font-bold",children:e.jsx(t,{...s.workspaceDeactivated})}),e.jsxs("ul",{className:"list-disc pl-5",children:[e.jsx("li",{className:"mb-1",children:e.jsx(t,{...s.chatHistoryUnavailable})}),e.jsx("li",{children:e.jsx(t,{...s.otherWorkspacesAvailable})})]})]}),N&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{children:e.jsx(t,{...s.purchaseNewSubscription})}),e.jsx(m,{className:"m-auto mt-2 w-full",loading:l,onClick:P,children:e.jsx(t,{...s.purchaseNewSubscriptionButton})})]}),S&&e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("p",{children:e.jsx(t,{...s.resolveOutstandingInvoice})}),e.jsx(m,{className:"m-auto mt-2 w-full",loading:l,onClick:A,children:e.jsx(t,{...s.manageSubscriptionButton})})]}),e.jsx(H,{}),e.jsx("div",{className:"w-full justify-center",children:p.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"mb-2 text-base font-bold",children:e.jsx(t,{...s.selectWorkspace})}),e.jsx(E,{data:p})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h3",{className:"text-base font-bold",children:e.jsx(t,{...s.createPersonalWorkspace})}),e.jsx(t,{...s.deactivatedWorkspaceReason})]}),e.jsxs("div",{className:"flex w-full items-center gap-4",children:[r&&r.picture&&e.jsx("img",{alt:"Profile",src:r.picture,width:g.workspaceMedium,height:g.workspaceMedium,className:"flex items-center justify-center rounded-sm"}),e.jsx("span",{className:"font-semibold",children:r&&e.jsx("span",{children:r.name})})]}),e.jsx("div",{className:"ml-auto",children:e.jsx(m,{title:x.formatMessage(s.createPersonalWorkspaceButton),loading:l,onClick:async()=>{o(!0),await v.upsertPersonalWorkspace(),I(R),T()},color:"primary",className:"ml-4"})})]})})]})})}const s=U({workspaceDeactivated:{id:"deactivatedWorkspaceModal.workspaceDeactivated",defaultMessage:"Your workspace has been deactivated"},workspaceDeactivatedDesc:{id:"deactivatedWorkspaceModal.workspaceDeactivatedDesc",defaultMessage:"Your workspace has been deactivated."},chatHistoryUnavailable:{id:"deactivatedWorkspaceModal.chatHistoryUnavailable",defaultMessage:"Your chat history and settings will not be available."},otherWorkspacesAvailable:{id:"deactivatedWorkspaceModal.otherWorkspacesAvailable",defaultMessage:"You will still be able to use ChatGPT with the other workspaces associated with this email address."},selectWorkspace:{id:"deactivatedWorkspaceModal.selectWorkspace",defaultMessage:"Select a workspace to continue"},createPersonalWorkspace:{id:"deactivatedWorkspaceModal.createPersonalWorkspace",defaultMessage:"Create a personal workspace to continue"},deactivatedWorkspaceReason:{id:"deactivatedWorkspaceModal.deactivatedWorkspaceReason",defaultMessage:"Because your workspace has been deactivated, you need to create a personal workspace to continue using ChatGPT."},profileAlt:{id:"deactivatedWorkspaceModal.profileAlt",defaultMessage:"Profile"},createPersonalWorkspaceButton:{id:"deactivatedWorkspaceModal.createPersonalWorkspaceButton",defaultMessage:"Create a personal workspace"},unableToOpenStripeDashboard:{id:"deactivatedWorkspaceModal.unableToOpenStripeDashboard",defaultMessage:"Unable to open Stripe dashboard"},purchaseNewSubscription:{id:"deactivatedWorkspaceModal.purchaseNewSubscription",defaultMessage:"You can reactivate your workspace by purchasing a new subscription."},purchaseNewSubscriptionButton:{id:"deactivatedWorkspaceModal.purchaseNewSubscriptionButton",defaultMessage:"Purchase subscription"},resolveOutstandingInvoice:{id:"deactivatedWorkspaceModal.resolveOutstandingInvoice",defaultMessage:"You can reactivate your workspace by resolving an outstanding invoice on your subscription."},manageSubscriptionButton:{id:"deactivatedWorkspaceModal.manageSubscriptionButton",defaultMessage:"Manage subscription"}});function K(){const r=k(b.workspaces),a=j(),i=k(b.workspaceId),c=r.find(o=>o.id===i),l=M();return h.useEffect(()=>{a!=null&&a.data&&(!c||!c.deactivated)&&l.push("/")},[a,c,l]),a!=null&&a.data&&(!c||!c.deactivated)?e.jsx("div",{}):e.jsx(G,{})}function ne(){return e.jsx(K,{})}export{ne as default};
//# sourceMappingURL=i1xw6xnr58y1j6ej.js.map
