import{F as l,a4 as c,j as e,d3 as v,p as L,T as o,I as A,b7 as w,r as u,R as M}from"./hc9xxm00a3r3byem.js";import{a as C,b as W,A as P}from"./lmryd6g8vt3gp93f.js";import{C as _,a as U,L as N,P as T,B as D,p as V,b as S,c as q,d as R}from"./ml6caj8ci8ergnrl.js";import{u as B,a as E}from"./fdepw20m3sce5u4k.js";import"./fga5qe14lr2llx8v.js";import"./lxui8l23v2tzixf9.js";import"./ozzpumen10p6g0yq.js";import"./facz9srd4e5z6fv5.js";import"./olkgl1p4p1b910lq.js";import"./guykwp3ov0cliuel.js";import"./nug034oo81goid6a.js";import"./fi9p3eeu24b9vfd1.js";import"./cqwvbnjobeewuxnd.js";import"./iyldmwu8ywhos7ff.js";import"./ovjwzbtdrcsgos3a.js";import"./i9qil017zb3p1czr.js";import"./kwn3fefba30wvgsb.js";import"./io7lyk89lbveno1g.js";import"./eq9w2mijkl5gcncq.js";import"./k0a5tmklve7lhdwt.js";import"./hzcrrlyorrog0p41.js";import"./jt3dvx97wm610wtl.js";import"./caxkuyopolf76hse.js";import"./exuoj3g9rvnr47xj.js";import"./c6gg5hubzrgc52sj.js";import"./o65h1gsmgo0mfsrq.js";import"./nbrfb6b5fqz7ea4t.js";import"./lyr64vj216kc7moh.js";import"./l02mntsvyz06f5g3.js";import"./dkb2noz4qv6snkbi.js";import"./do5dtfxps7uqtxpp.js";import"./fr59f31fg6jwe2u4.js";import"./cj3cq0j3ew1e2kbz.js";import"./b2rny0kod41myp87.js";import"./kptbw01pxwd1ocyc.js";import"./cm4yp0pj7foedy4v.js";import"./dsvckya76mm06sjp.js";import"./iej0cupg2dqkmejt.js";_.register(U,N,T,D,V,S,q);async function F({queryKey:[t,{workspaceId:s}]}){return M.getWorkspaceAnalytics(s)}function z(t){return L({queryKey:["workspace-analytics",{workspaceId:t}],queryFn:F})}function H(t){const s=getComputedStyle(document.body);return{animation:!1,scales:{y:{position:"right",beginAtZero:!0,ticks:{stepSize:3,color:s.getPropertyValue("--text-tertiary"),padding:12},grid:{tickLength:0,color:s.getPropertyValue("--border-medium")},border:{display:!1}},x:{grid:{display:!1},ticks:{color:s.getPropertyValue("--text-tertiary"),padding:20}}},plugins:{legend:!1,tooltip:{backgroundColor:s.getPropertyValue("--surface-primary"),titleColor:s.getPropertyValue("--text-primary"),bodyColor:s.getPropertyValue("--text-secondary"),displayColors:!1,padding:{top:8,left:8,right:8,bottom:8}}}}}function p({data:t,label:s,getWeekValue:r}){const i=c(),d=w().theme,h=u.useMemo(()=>H(),[d]),b=u.useMemo(()=>getComputedStyle(document.body).getPropertyValue("--text-secondary"),[d]),j={labels:t.weekly_data.map(m=>i.formatDate(m.week,{month:"numeric",day:"numeric"})),datasets:[{label:s,data:t.weekly_data.map(r),borderWidth:0,backgroundColor:b,barThickness:20}]};return e.jsx("div",{className:"flex h-full w-full items-center justify-center bg-token-main-surface-secondary p-4",children:e.jsx(R,{options:h,data:j,height:192})})}function n({label:t,value:s}){return e.jsxs("div",{className:"w-1/3 rounded bg-token-main-surface-secondary px-4 py-2",children:[e.jsx("label",{className:"text-sm text-token-text-secondary",children:t}),e.jsx("div",{className:"text-xl font-semibold text-token-text-primary",children:s})]})}function I({data:t}){const s=c(),r=t.weekly_data[t.weekly_data.length-2];return e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"mb-2 font-semibold text-token-text-primary",children:e.jsx(o,{...a.totals})}),e.jsxs("div",{className:"mb-16 flex gap-4",children:[e.jsx(n,{label:s.formatMessage(a.usersLabel),value:t.total_users}),e.jsx(n,{label:s.formatMessage(a.conversationsLabel),value:t.total_conversations}),e.jsx(n,{label:s.formatMessage(a.messagesLabel),value:t.total_messages})]}),e.jsxs(g,{children:[e.jsx("div",{className:"flex flex-col justify-between p-4",children:e.jsxs("div",{children:[e.jsx(y,{children:e.jsx(o,{...a.usageTitle})}),r!=null&&e.jsxs("div",{children:[e.jsx(x,{children:r.message_count}),e.jsx(f,{children:e.jsx(o,{...a.messagesLastWeek})})]})]})}),e.jsx("div",{children:e.jsx(p,{data:t,label:s.formatMessage(a.messagesChartLabel),getWeekValue:i=>i.message_count})})]}),e.jsxs(g,{children:[e.jsx("div",{children:e.jsx(p,{data:t,label:s.formatMessage(a.activeUsersChartLabel),getWeekValue:i=>i.active_users_count})}),e.jsx("div",{className:"flex grow flex-col justify-between p-4",children:e.jsxs("div",{children:[e.jsx(y,{children:e.jsx(o,{...a.weeklyUsersTitle})}),r!=null&&e.jsxs("div",{children:[e.jsx(x,{children:r.active_users_count}),e.jsx(f,{children:e.jsx(o,{...a.activeUsersLastWeek})})]})]})})]})]})}const g=l.div`mb-12 grid grid-cols-1 rounded-lg overflow-hidden border border-token-border-light sm:grid-cols-2`,y=l.div`font-semibold`,x=l.div`font-semibold text-3xl`,f=l.div`text-sm text-token-text-tertiary`;function K({currentWorkspaceId:t}){const s=c(),{data:r,isLoading:i}=z(t);return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx("title",{children:s.formatMessage(a.title)})}),e.jsx(C,{title:s.formatMessage(a.title),subtitle:s.formatMessage(a.pageDescription)}),e.jsx(W,{showSpinner:i,children:r!==void 0?e.jsx(I,{data:r}):null})]})}const a=A({title:{id:"workspaceAnalytics.title",defaultMessage:"Workspace Analytics"},pageDescription:{id:"workspaceAnalytics.understand",defaultMessage:"Understand how your workspace is using ChatGPT"},totals:{id:"workspaceAnalytics.totals",defaultMessage:"Totals over last 30 days"},usersLabel:{id:"workspaceAnalytics.usersLabel",defaultMessage:"Users"},conversationsLabel:{id:"workspaceAnalytics.conversationsLabel",defaultMessage:"Conversations"},messagesLabel:{id:"workspaceAnalytics.messagesLabel",defaultMessage:"Messages"},usageTitle:{id:"workspaceAnalytics.usageTitle",defaultMessage:"Usage"},messagesLastWeek:{id:"workspaceAnalytics.messagesLastWeek",defaultMessage:"Messages processed last week"},messagesLast30Days:{id:"workspaceAnalytics.messagesLast30Days",defaultMessage:"{count, plural, =0 {No messages} one {# message} other {# messages}} processed over last 30 days"},messagesChartLabel:{id:"workspaceAnalytics.messagesChartLabel",defaultMessage:"Messages"},weeklyUsersTitle:{id:"workspaceAnalytics.weeklyUsersTitle",defaultMessage:"Weekly users"},activeUsersChartLabel:{id:"workspaceAnalytics.activeUsersChartLabel",defaultMessage:"Active users"},activeUsersLastWeek:{id:"workspaceAnalytics.activeUsersLastWeek",defaultMessage:"Active users last week"},usersLast30Days:{id:"workspaceAnalytics.usersLast30Days",defaultMessage:"{count, plural, =0 {No active users} one {# active user} other {# active user}} over last 30 days"}});function k(t){return e.jsx(K,{...t})}k.getLayout=function(s){return e.jsx(P,{mobilePageTitle:"Analytics",requireAdminPrivileges:!0,children:s})};function _e(){const t=B();return E(),e.jsx(k,{...t})}export{_e as default};
//# sourceMappingURL=dylguf79ei96xm2d.js.map
