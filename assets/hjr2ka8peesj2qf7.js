import{bN as f,p as l,bO as _,x as y,R as a,a8 as c,a9 as u,bP as k,bQ as d,bR as g,u as p,a as m,bS as A}from"./hc9xxm00a3r3byem.js";const t="compliance",E=60*60*24*30*6,q={serverPrimedAllowBrowserStorageValue:!0,showCookieConsentBanner:!1,isStorageComplianceEnabled:!1,ageVerificationDeadline:null,ageVerificationType:"none"},O={IT:"countdown",KR:"passive"};function I(e,n){const i=A(n),o=e.registration_country??"",s=o in _&&e.age_verification.is_required;if(!i&&!s)return q;const r=i&&e.require_cookie_consent;return{serverPrimedAllowBrowserStorageValue:r?e.cookie_consent.analytics_cookies_accepted??!1:!0,showCookieConsentBanner:r&&e.cookie_consent.is_required,isStorageComplianceEnabled:r,ageVerificationDeadline:s?e.age_verification.remaining_seconds??null:null,ageVerificationType:s?O[o]??"none":"none"}}const C=y({queryKey:[t],queryFn:async()=>await a.getCompliance().then(e=>{if(e.cookie_consent.is_required){const n=c.getCookie(u.AllowNonessential),i=e.cookie_consent.analytics_cookies_accepted;if(n===void 0&&i!=null)c.setCookie(u.AllowNonessential,i,{maxAge:E,domain:k});else if(n!==i&&n!=null){const o={analytics_cookies_accepted:n};return a.updateCookieConsentCompliance(o),{...e,cookie_consent:{...e.cookie_consent,...o}}}}return e}).catch(e=>(e instanceof d&&e.status===401&&g(),{registration_country:null,require_cookie_consent:!1,age_verification:{is_required:!1},cookie_consent:{is_required:!1},terms_of_use:{is_required:!1,accepted_at:null}}))});function V({enabled:e,select:n}){return l({...C,enabled:e,select:n})}function w(){const{country:e}=f();return l({...C,enabled:e!=null&&e in _,select:n=>I(n,e)})}function P(){const e=p();return m({mutationFn:async n=>await a.updateCookieConsentCompliance(n),onSuccess:()=>{e.refetchQueries({queryKey:[t]})},onMutate:async n=>{await e.cancelQueries({queryKey:[t]});const i=e.getQueryData([t]);return e.setQueryData([t],o=>{if(o!==void 0)return{...o,cookie_consent:{...o.cookie_consent,...n}}}),{previousValue:i}},onError:(n,i,o)=>{o!==void 0&&e.setQueryData([t],o.previousValue)}})}function b({serverPrimedAllowBrowserStorageValue:e,enabled:n}){const{data:i,isLoading:o}=V({enabled:n,select:s=>s.cookie_consent.analytics_cookies_accepted===!0});return o||!n?e:i??!1}export{E as C,P as a,V as b,b as c,w as u};
//# sourceMappingURL=hjr2ka8peesj2qf7.js.map
